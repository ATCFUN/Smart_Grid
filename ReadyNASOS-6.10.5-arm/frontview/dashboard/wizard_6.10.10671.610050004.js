Njl={};Njl.Utils={};Njl.Utils.Format={};Njl.utils=Njl.Utils;Njl.util=Njl.Utils;Njl.lib={};Njl.data={};Njl.USE_NATIVE_JSON=false;Njl.ua=navigator.userAgent.toLowerCase();Njl.check=function(b){return b.test(Njl.ua)};try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}Njl.idSeed=0;Njl.docMode=document.documentMode;Njl.isOpera=Njl.check(/opera/);Njl.isChrome=Njl.check(/\bchrome\b/);Njl.isWebKit=Njl.check(/webkit/);Njl.isSafari=!Njl.isChrome&&Njl.check(/safari/);
Njl.isSafari2=Njl.isSafari&&Njl.check(/applewebkit\/4/);Njl.isSafari3=Njl.isSafari&&Njl.check(/version\/3/);Njl.isSafari4=Njl.isSafari&&Njl.check(/version\/4/);Njl.isIE=!Njl.isOpera&&Njl.check(/msie/);Njl.isIE7=Njl.isIE&&(Njl.check(/msie 7/)||Njl.docMode==7);Njl.isIE8=Njl.isIE&&(Njl.check(/msie 8/)&&Njl.docMode!=7&&Njl.docMode!=9||Njl.docMode==8);Njl.isIE9=Njl.isIE&&(Njl.check(/msie 9/)&&Njl.docMode!=7&&Njl.docMode!=8||Njl.docMode==9);
Njl.isIE10=Njl.isIE&&(Njl.check(/msie 10/)&&Njl.docMode!=7&&Njl.docMode!=8||Njl.docMode==10);Njl.isIE11=/rv:11/.test(navigator.userAgent.toLowerCase())&&navigator.userAgent.indexOf("Trident/7")>-1;Njl.isMetro=Njl.isIE10&&Njl.check(/msapphost/)||Njl.isIE11&&Njl.check(/msapphost/);Njl.isIE6=Njl.isIE&&!Njl.isIE7&&!Njl.isIE8&&!Njl.isIE9&&!Njl.isIE10&&!Njl.isIE11;Njl.isIE10=Njl.isIE10||Njl.isIE11;Njl.isIE=Njl.isIE||Njl.isIE11;Njl.isEdge=Njl.check(/edge/);
if(typeof Ext!=="undefined"){Ext.isIE=Njl.isIE;Ext.isIE7=Njl.isIE7;Ext.isIE8=Njl.isIE8;Ext.isIE9=Njl.isIE9;Ext.isIE10=Njl.isIE10;Ext.isIE11=Njl.isIE11;Ext.isIE6=Njl.isIE6;Ext.BLANK_IMAGE_URL="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}Njl.isGecko=!Njl.isWebKit&&Njl.check(/gecko/);Njl.isGecko2=Njl.isGecko&&Njl.check(/rv:1\.8/);Njl.isGecko3=Njl.isGecko&&Njl.check(/rv:1\.9/);Njl.isBorderBox=Njl.isIE&&!Njl.sStrict;Njl.isWindows=Njl.check(/windows|win32/);
Njl.isMac=Njl.check(/macintosh|mac os x/);Njl.isAir=Njl.check(/adobeair/);Njl.isLinux=Njl.check(/linux/);Njl.isSecure=/^https/i.test(window.location.protocol);Njl.isWindows8=Njl.isWindows&&function(b){if((b=/[\(]{1}([^\)]*)[\)]{1}/i.exec(b))&&b.length>0){b=b[1].split(";");for(var c=0;c<b.length;c++)if(/windows/i.test(b[c])||/win/i.test(b[c])){b=/([0-9\.]+)/.exec(b[c]);if(b[1]*1>=6.2)return true}}return false}(Njl.ua);Njl.isiPhone=Njl.check(/iphone/);Njl.isiPod=Njl.check(/ipod/);Njl.isiPad=Njl.check(/ipad/);
Njl.isiOS=Njl.isiPhone||Njl.isiPod||Njl.isiPad;Njl.isAndroid=Njl.check(/android/);Njl.isBlackBerry=Njl.check(/blackberry/);Njl.toString=Object.prototype.toString;Njl.toArray=function(){return Njl.isIE?function(b,c,d,f){f=[];for(var g=0,j=b.length;g<j;g++)f.push(b[g]);return f.slice(c||0,d||f.length)}:function(b,c,d){return Array.prototype.slice.call(b,c||0,d||b.length)}}();Njl.isEmpty=function(b,c){return b===null||b===undefined||Njl.isArray(b)&&!b.length||(!c?b==="":false)};
Njl.isArray=function(b){return Njl.toString.apply(b)==="[object Array]"};Njl.isDate=function(b){return Njl.toString.apply(b)==="[object Date]"};Njl.isObject=function(b){return!!b&&Object.prototype.toString.call(b)==="[object Object]"};Njl.isPrimitive=function(b){return Njl.isString(b)||Njl.isNumber(b)||Njl.isBoolean(b)};Njl.isFunction=function(b){return Njl.toString.apply(b)==="[object Function]"};Njl.isNumber=function(b){return typeof b==="number"&&isFinite(b)};
Njl.isString=function(b){return typeof b==="string"};Njl.isBoolean=function(b){return typeof b==="boolean"};Njl.isElement=function(b){return b?!!b.tagName:false};Njl.isDefined=function(b){return typeof b!=="undefined"};Njl.isAllDefined=function(){for(var b=0,c=arguments.length;b<c;++b)if(typeof arguments[b]=="undefined")return false;return true};
Njl.isIterable=function(b){if(Njl.isArray(b)||b.callee)return true;if(/NodeList|HTMLCollection/.test(Njl.toString.call(b)))return true;return(typeof b.nextNode!="undefined"||b.item)&&Njl.isNumber(b.length)};Njl.each=function(b,c,d){if(!Njl.isEmpty(b,true)){if(!Njl.isIterable(b)||Njl.isPrimitive(b))b=[b];for(var f=0,g=b.length;f<g;f++)if(c.call(d||b[f],b[f],f,b)===false)return f}};
Njl.iterate=function(b,c,d){if(!Njl.isEmpty(b))if(Njl.isIterable(b))Njl.each(b,c,d);else if(Njl.isObject(b))for(var f in b)if(b.hasOwnProperty(f))if(c.call(d||b,f,b[f],b)===false)return};Njl.namespace=function(){var b,c;Njl.each(arguments,function(d){c=d.split(".");b=window[c[0]]=window[c[0]]||{};Njl.each(c.slice(1),function(f){b=b[f]=b[f]||{}})});return b};Njl.apply=function(b,c,d){d&&Njl.apply(b,d);if(b&&c&&typeof c=="object")for(var f in c)b[f]=c[f];return b};
Njl.applyIf=function(b,c){if(b)for(var d in c)Njl.isDefined(b[d])||(b[d]=c[d]);return b};Njl.applyRecIf=function(b,c,d){d&&Njl.apply(b,d);if(b&&c&&typeof c=="object")for(var f in c)if(Njl.isObject(b[f])&&Njl.isObject(c[f]))b[f]=Njl.applyRecIf(b[f],c[f],false);else Njl.isDefined(b[f])||(b[f]=c[f]);return b};Njl.applyRec=function(b,c,d){d&&Njl.apply(b,d);if(b&&c&&typeof c=="object")for(var f in c)b[f]=Njl.isObject(b[f])&&Njl.isObject(c[f])?Njl.applyRec(b[f],c[f],false):c[f];return b};
Njl.overrideIf=function(b,c,d){if(c){b=b.prototype;d?Njl.applyRecIf(b,c):Njl.applyIf(b,c);if(Njl.isIE&&c.hasOwnProperty("toString"))b.toString=c.toString}};Njl.override=function(b,c,d){if(c){b=b.prototype;d?Njl.applyRec(b,c):Njl.apply(b,c);if(Njl.isIE&&c.hasOwnProperty("toString"))b.toString=c.toString}};Njl.callback=function(b,c,d,f){if(Njl.isFunction(b))f?b.defer(f,c,d||[]):b.apply(c,d||[])};function clone(b){function c(){}c.prototype=b;b=new c;b.constructor=c;return b}
Njl.extend=function(){var b=function(d){for(var f in d)this[f]=d[f]},c=Object.prototype.constructor;return function(d,f,g){if(Njl.isObject(f)){g=f;f=d;d=g.constructor!=c?g.constructor:function(){f.apply(this,arguments)}}var j=function(){},u=f.prototype;j.prototype=u;j=new j;d.prototype=j;for(var v in j)if(Njl.isInterface(j[v]))j[v]=Njl.clone(j[v],true);j.constructor=d;d.superclass=u;if(u.constructor==c)u.constructor=f;d.override=function(t){Njl.override(d,t,true)};j.superclass=j.supr=function(){return u};
j.override=b;Njl.override(d,g,true);d.extend=function(t){return Njl.extend(d,t)};return d}}();Njl.id=function(b){return(b||"njl_id_")+ ++Njl.idSeed};Njl.idn=function(){return++Njl.idSeed};Njl.Utils.Format.htmlEncode=function(b){return!b?b:String(b).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};Njl.Utils.Format.htmlDecode=function(b){return!b?b:String(b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")};
Njl.Utils.Format.urlEncode=function(b,c){var d,f=[],g=encodeURIComponent;Njl.iterate(b,function(j,u){d=Njl.isEmpty(u);Njl.each(d?j:u,function(v){f.push("&",g(j),"=",!Njl.isEmpty(v)&&(v!=j||!d)?Njl.isDate(v)?Njl.encode(v).replace(/"/g,""):g(v):"")})});if(!c){f.shift();c=""}return c+f.join("")};Njl.urlEncode=Njl.Utils.Format.urlEncode;Njl.urlAppend=function(b,c){if(!Njl.isEmpty(c))return b+(b.indexOf("?")===-1?"?":"&")+c;return b};
Njl.Utils.Format.urlDecode=function(b,c){if(Njl.isEmpty(b))return{};var d={};b=b.split("&");var f=decodeURIComponent,g,j;Njl.each(b,function(u){u=u.split("=");g=f(u[0]);j=f(u[1]);d[g]=c||!d[g]?j:[].concat(d[g]).concat(j)});return d};Njl.urlDecode=Njl.Utils.Format.urlDecode;Njl.Utils.Entities2xml=function(b){if(Njl.isString(b))return b.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&");return b};Njl.make_unquoted=Njl.Utils.Entities2xml;
Njl.Utils.xml2Entities=function(b){if(Njl.isString(b)){var c=function(d){if(d=="<")return"&lt;";else if(d==">")return"&gt;";else if(d=='"')return"&quot;";else if(d=="&")return"&amp;"};return b.replace(/[<>"&]/g,function(d){return c(d)})}return b};Njl.make_quoted=Njl.Utils.xml2Entities;
Njl.Utils.xmlDocument2Entities=function(b){for(var c=0,d=b.attributes.length;c<d;++c)b.attributes[c].nodeValue=make_quoted(b.attributes[c].nodeValue);c=0;for(d=b.childNodes.length;c<d;++c)if(b.childNodes[c].nodeType==3)b.childNodes[c].nodeValue=make_quoted(b.childNodes[c].nodeValue);else b.childNodes[c].nodeType==1&&Njl.Utils.xmlDocument2Entities(b.childNodes[c])};
Njl.Utils.copyToClipboard=function(b){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",b)}else if(navigator.userAgent.indexOf("Opera")!=-1)window.location=b;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(c){_TRACE("You need set 'signed.applets.codebase_principal_support=true' at about:config'");return false}var d=Components.classes["@mozilla.org/widget/clipboard;1\u0081"].createInstance(Components.interfaces.nsIClipboard);
if(d){var f=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(f){f.addDataFlavor("text/unicode");var g={};g=Components.classes["@mozilla.org/supports-string;1\u0081\u008d"].createInstance(Components.interfaces.nsISupportsString);g.data=b;f.setTransferData("text/unicode",g,b.length*2);if(!d)return false;d.setData(f,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}};Njl.copyToClipboard=Njl.Utils.copyToClipboard;
Njl.Utils.def=function(b,c){if(Njl.isDefined(b))return b;return c};Njl.def=Njl.Utils.def;
Njl.apply(Function.prototype,{createInterceptor:function(b,c){var d=this;return!Njl.isFunction(b)?this:function(){var f=arguments;b.target=this;b.method=d;return b.apply(c||this||window,f)!==false?d.apply(this||window,f):null}},createCallback:function(){var b=arguments,c=this;return function(){return c.apply(window,b)}},createDelegate:function(b,c,d){var f=this;return function(){var g=c||arguments;if(d===true){g=Array.prototype.slice.call(arguments,0);g=g.concat(c)}else if(Njl.isNumber(d)){g=Array.prototype.slice.call(arguments,
0);var j=[d,0].concat(c);Array.prototype.splice.apply(g,j)}return f.apply(b||window,g)}},defer:function(b,c,d,f){c=this.createDelegate(c,d,f);if(b>0)return setTimeout(c,b);c();return 0}});Njl.applyIf(String,{format:function(b){var c=Njl.toArray(arguments,1);return b.replace(/\{(\d+)\}/g,function(d,f){return c[f]})}});
Njl.applyIf(Array.prototype,{indexOf:function(b,c){var d=this.length;c=c||0;for(c+=c<0?d:0;c<d;++c)if(this[c]===b)return c;return-1},remove:function(b){b=this.indexOf(b);b!=-1&&this.splice(b,1);return this}});Njl.Utils.registerEventHandler=function(b,c,d){typeof b.addEventListener=="function"?b.addEventListener(c,d,false):b.attachEvent("on"+c,d)};Njl.Utils.unregisterEventHandler=function(b,c,d){typeof b.removeEventListener=="function"?b.removeEventListener(c,d,false):b.detachEvent("on"+c,d)};
Njl.clone=function(b,c){var d=function(){};d.prototype=b;b=new d;if(c)for(var f in b)if(Njl.isObject(b[f]))b[f]=Njl.clone(b[f],c);return b};Njl.isInterface=function(b){return Njl.isObject(b)&&(!!!b.prototype||!!!b.prototype.constructor)};
Njl.inherit=function(){var b=undefined,c=undefined;if(arguments&&arguments.length){b=arguments[arguments.length-1];for(var d=0,f=arguments.length-1;d<f;++d){var g=arguments[d];if(g&&Njl.isString(g))c=g;else if(g&&g.prototype){var j=g;if(g=Njl.isInterface(g)){var u=function(){};u.prototype=Njl.clone(j.prototype,true);j=u}if(g){if(!b.prototype){b={prototype:b};b.prototype.constructor=undefined}Njl.overrideIf(b,j.prototype,true)}else b=Njl.extend(j,b.prototype?b.prototype:b)}else if(g){if(!b.prototype){b=
{prototype:b};b.prototype.constructor=undefined}Njl.overrideIf(b,Njl.clone(g,true),true);b.prototype.constructor=undefined}}}if(c&&Njl.isString(c)&&c.length){d=Njl.JSCom.singleton(Njl.JSCom.CComObjectsStorage);f=d.register(b,c);if(_FAILED(f))throw new CoException(f,d.register,[b,c],'Failed to register JSCOM object "'+c+'"');}return b};
Njl.Utils.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b,c){var d="",f,g,j,u,v,t=0;for(b=this._utf8_encode(b,c);t<b.length;){f=b.charCodeAt(t++);c=b.charCodeAt(t++);g=b.charCodeAt(t++);j=f>>2;f=(f&3)<<4|c>>4;u=(c&15)<<2|g>>6;v=g&63;if(isNaN(c))u=v=64;else if(isNaN(g))v=64;d=d+this._keyStr.charAt(j)+this._keyStr.charAt(f)+this._keyStr.charAt(u)+this._keyStr.charAt(v)}return d},decode:function(b){var c="",d,f,g,j,u,v=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,
"");v<b.length;){d=this._keyStr.indexOf(b.charAt(v++));f=this._keyStr.indexOf(b.charAt(v++));j=this._keyStr.indexOf(b.charAt(v++));u=this._keyStr.indexOf(b.charAt(v++));d=d<<2|f>>4;f=(f&15)<<4|j>>2;g=(j&3)<<6|u;c+=String.fromCharCode(d);if(j!=64)c+=String.fromCharCode(f);if(u!=64)c+=String.fromCharCode(g)}return c=this._utf8_decode(c)},_utf8_encode:function(b,c){c||(b=b.replace(/\r\n/g,"\n"));c="";for(var d=0;d<b.length;d++){var f=b.charCodeAt(d);if(f<128)c+=String.fromCharCode(f);else{if(f>127&&
f<2048)c+=String.fromCharCode(f>>6|192);else{c+=String.fromCharCode(f>>12|224);c+=String.fromCharCode(f>>6&63|128)}c+=String.fromCharCode(f&63|128)}}return c},_utf8_decode:function(b){for(var c="",d=0,f=c1=c2=0;d<b.length;){f=b.charCodeAt(d);if(f<128){c+=String.fromCharCode(f);d++}else if(f>191&&f<224){c2=b.charCodeAt(d+1);c+=String.fromCharCode((f&31)<<6|c2&63);d+=2}else{c2=b.charCodeAt(d+1);c3=b.charCodeAt(d+2);c+=String.fromCharCode((f&15)<<12|(c2&63)<<6|c3&63);d+=3}}return c}};
if(!Array.prototype.indexOf)Array.prototype.indexOf=function(b,c){var d=this.length;c=Number(c)||0;c=c<0?Math.ceil(c):Math.floor(c);if(c<0)c+=d;for(;c<d;c++)if(c in this&&this[c]===b)return c;return-1};if("function"!==typeof String.makewindowspath)String.makewindowspath=function(b){b=!Njl.isEmpty(b)?b:this;b=(new String(b)).substring(1,b.length).replace(/\//g,"\\");var c=b.indexOf("\\");if(c!=-1)b=b.substring(0,c).concat(":",b.length>1?b.substring(c,b.length):"\\");return b};
if(!String.prototype.makewindowspath)String.prototype.makewindowspath=String.makewindowspath;if("function"!==typeof String.isUsb)String.isUsb=function(b){b||(b=this);if(b.toLowerCase().indexOf("usb/")!=-1)return true;return false};if(!String.prototype.isUsb)String.prototype.isUsb=String.isUsb;if("function"!==typeof String.getfileext)String.getfileext=function(b){if(b||this){b=b?b:this;var c=b.lastIndexOf(".");return c!=-1?b.substr(c+1,b.length):""}return""};
if(!String.prototype.getfileext)String.prototype.getfileext=String.getfileext;if("function"!==typeof RegExp.escape)RegExp.escape=function(b){if("string"!==typeof b)return b;return b.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")};Njl.Utils.isValidHostname=function(b){if(b.replace(/[a-zA-Z0-9]+[a-zA-Z0-9\-]*[a-zA-Z0-9]+/g,"")==""&&b.length<=15)return true;return false};Njl.isValidHostname=Njl.Utils.isValidHostname;
Njl.Utils.isValidPort=function(b){return/^(\d)+$/g.test(b)&&parseInt(b)<=65535&&parseInt(b)>=0};Njl.isValidPort=Njl.Utils.isValidPort;Njl.Utils.isValidDomainName=function(b){var c=/[\-\.]/g;if(b.replace(/[a-zA-Z]+[a-zA-Z0-9\-\_\.]+/g,"")==""&&b.replace(c,"")!=""){b=b.split(".");if(b[0].length>15)return false;for(c=1;c<b.length;c++)if(b[c].length>15)return false;return true}return false};Njl.isValidDomainName=Njl.Utils.isValidDomainName;
Njl.Utils.isValidNetBIOSorNASHostname=function(b){var c=/[\-\.]/g;if(b.replace(/[a-zA-Z0-9\-\._]/g,"")==""&&b.replace(c,"")!=""){b=b.split(".");if(b[0].length>15)return false;for(c=1;c<b.length;c++)if(b[c].length>15)return false;return true}return false};Njl.isValidNetBIOSorNASHostname=Njl.Utils.isValidNetBIOSorNASHostname;Njl.Utils.isValidWorkgroup=function(b){var c=/[\-\._]/g;if(b.replace(/[a-zA-Z0-9\-_\.]/g,"")==""&&b.replace(c,"")!=""&&b.length<=15)return true;return false};
Njl.isValidWorkgroup=Njl.Utils.isValidWorkgroup;Njl.Utils.isValidIPAddress=function(b){if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(b)){b=b.split(".");if(parseInt(parseFloat(b[0]))==0||parseInt(parseFloat(b[2]))==0&&parseInt(parseFloat(b[3]))==0)return false;for(var c=0;c<b.length;c++)if(parseInt(parseFloat(b[c]))>255)return false;return true}return false};Njl.isValidIPAddress=Njl.Utils.isValidIPAddress;
Njl.Utils.isValidIPAddressWithPort=function(b){if(typeof b=="string"){b=b.split(":");if(b.length==2){var c=/^\d{1,5}$/;if(Njl.isValidIPAddress(b[0])&&c.test(b[1]))return true}}return false};Njl.isValidIPAddressWithPort=Njl.Utils.isValidIPAddressWithPort;Njl.Utils.isValidIPv6Address=function(b){return/^((?=(?=(.*?::))\2(?!.+::))(::)?([\dA-F]{1,4}:(:|(?!$))|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\4)::|:(?!$)|$))|(?!\3\4)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])(\.(?!$)|$)){4})$/i.test(b)};
Njl.Utils.isValidNetmask=function(b){if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(b)){b=b.split(".");if(parseInt(parseFloat(b[0]))==0)return false;for(var c=0;c<b.length;c++)if(parseInt(parseFloat(b[c]))>255)return false;var d=0;for(c=b.length-1;c>=0;c--)for(var f=b[c],g=0;g<8;g++){if(f>>1<<1==f){if(d==1)return false}else d=1;f>>=1}return true}return false};Njl.isValidNetmask=Njl.Utils.isValidNetmask;
Njl.Utils.isValidDomainName=function(b){var c=/[\-_]/g;if(b.replace(/[a-zA-Z0-9\-_\.\+]/g,"")==""&&b.replace(c,"")!="")return true;return false};Njl.isValidDomainName=Njl.Utils.isValidDomainName;Njl.Utils.isValidMacAddress=function(b){if(/^[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}$/.test(b))return true;return false};Njl.isValidMacAddress=Njl.Utils.isValidMacAddress;
Njl.Utils.isValidPath=function(b){var c=/\.\./;if(b.replace(/[a-zA-Z0-9\-_\\\/|\%\.\$:~&@\[\]`'",!#%^&()+=;{}<>? \u0080-\uffef]/g,"")==""&&!c.test(b))return true;return false};Njl.isValidPath=Njl.Utils.isValidPath;Njl.Utils.isValidShareName=function(b){var c=/[$a-zA-Z0-9\-_\u0080-\uffef]/g,d=/[\-\._]/g;if(b&&b.replace(c,"")==""&&b.replace(d,"")!=""&&b.length<81)return true;return false};Njl.isValidShareName=Njl.Utils.isValidShareName;
Njl.Utils.isValidSnapshotName=function(b){var c=/[\-\._]/g;if(b.replace(/[a-zA-Z0-9\u0080-\uffef]+[a-zA-Z0-9\u0080-\uffef\-\._]*/g,"")==""&&b.replace(c,"")!=""&&b.length<50)return true;return false};Njl.isValidSnapshotName=Njl.Utils.isValidSnapshotName;Njl.Utils.isValidUserGroup=function(b){var c=/[a-zA-Z0-9\-_\.@]/g,d=/[\-_@0-9]/g;c=/[a-zA-Z0-9\-_\.@\u0080-\uffef]/g;if(b==""||b=="shares")return false;else if(b.replace(c,"")==""&&b.replace(d,"")!="")return true;return false};
Njl.isValidUserGroup=Njl.Utils.isValidUserGroup;Njl.Utils.isValidCifsPath=function(b){var c=/[a-zA-Z0-9\-\._\\\/]/g;if(b=="")return false;else if(b.replace(c,"")=="")return true;return false};Njl.isValidCifsPath=Njl.Utils.isValidCifsPath;Njl.Utils.initElePHEvent=function(b,c){var d=Ext.get(b.id);d.set({placeholder:c});b.on("blur",function(){d.set({placeholder:c})},this);b.on("focus",function(){d.set({placeholder:c})},this)};Njl.initElePHEvent=Njl.Utils.initElePHEvent;
Njl.Utils.isValidHttpFtpPath=function(b){var c=/[a-zA-Z0-9\-\._\/\%:]/g;if(b=="")return false;else if(b.indexOf("ftp://")==0||b.indexOf("http://")==0)if(b.replace(c,"")=="")return true;return false};Njl.isValidHttpFtpPath=Njl.Utils.isValidHttpFtpPath;Njl.Utils.isValidFolderName=function(b){var c=/\.\./;if(b.replace(/[a-zA-Z0-9\-_\\|\%\.\$:~&@\[\]`'",!*#%^&()+=;{}<>? \u0080-\uffef]/g,"")==""&&!c.test(b)&&b.length&&b.length<81)return true;return false};Njl.isValidFolderName=Njl.Utils.isValidFolderName;
Njl.Utils.isValidEmail=function(b){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(b)};Njl.isValidEmail=Njl.Utils.isValidEmail;
Njl.Utils.isValidPoolName=function(b){var c=/c[0-9](.)*/g;if(b.replace(/(([a-zA-Z])+([a-zA-Z0-9\-_:\.])*)/g,"")==""&&b.replace(c,"")!=""&&b.toUpperCase()!="LOG"&&b.toUpperCase()!="MIRROR"&&b.toUpperCase()!="RAIDZ"&&b.toUpperCase()!="SPARE"&&b.toUpperCase()!="RPOOL"&&b.length<31)return true;return false};Njl.isValidPoolName=Njl.Utils.isValidPoolName;Njl.Utils.isValidBtrFSPoolName=function(b){if(b.replace(/(([a-zA-Z])+([a-zA-Z0-9\-_:\.])*)/g,"")==""&&b.length<20)return true;return false};
Njl.isValidBtrFSPoolName=Njl.Utils.isValidBtrFSPoolName;
Njl.Utils.MD5=function(b){function c(x,y){return x<<y|x>>>32-y}function d(x,y){var B,E,H,I;H=x&2147483648;I=y&2147483648;B=x&1073741824;E=y&1073741824;x=(x&1073741823)+(y&1073741823);if(B&E)return x^2147483648^H^I;return B|E?x&1073741824?x^3221225472^H^I:x^1073741824^H^I:x^H^I}function f(x,y,B){return x&y|~x&B}function g(x,y,B){return x&B|y&~B}function j(x,y,B){return x^y^B}function u(x,y,B){return y^(x|~B)}function v(x,y,B,E,H,I,J){x=d(x,d(d(f(y,B,E),H),J));return d(c(x,I),y)}function t(x,y,B,E,
H,I,J){x=d(x,d(d(g(y,B,E),H),J));return d(c(x,I),y)}function z(x,y,B,E,H,I,J){x=d(x,d(d(j(y,B,E),H),J));return d(c(x,I),y)}function C(x,y,B,E,H,I,J){x=d(x,d(d(u(y,B,E),H),J));return d(c(x,I),y)}function G(x){var y,B=x.length;y=B+8;for(var E=((y-y%64)/64+1)*16,H=Array(E-1),I=0,J=0;J<B;){y=(J-J%4)/4;I=J%4*8;H[y]|=x.charCodeAt(J)<<I;J++}y=(J-J%4)/4;I=J%4*8;H[y]|=128<<I;H[E-2]=B<<3;H[E-1]=B>>>29;return H}function k(x){var y="",B="",E;for(E=0;E<=3;E++){B=x>>>E*8&255;B="0"+B.toString(16);y+=B.substr(B.length-
2,2)}return y}function l(x){x=x.replace(/\r\n/g,"\n");for(var y="",B=0;B<x.length;B++){var E=x.charCodeAt(B);if(E<128)y+=String.fromCharCode(E);else{if(E>127&&E<2048)y+=String.fromCharCode(E>>6|192);else{y+=String.fromCharCode(E>>12|224);y+=String.fromCharCode(E>>6&63|128)}y+=String.fromCharCode(E&63|128)}}return y}var i=Array(),r,w,A,F,n,p,q,o;b=l(b);i=G(b);n=1732584193;p=4023233417;q=2562383102;o=271733878;for(b=0;b<i.length;b+=16){r=n;w=p;A=q;F=o;n=v(n,p,q,o,i[b+0],7,3614090360);o=v(o,n,p,q,i[b+
1],12,3905402710);q=v(q,o,n,p,i[b+2],17,606105819);p=v(p,q,o,n,i[b+3],22,3250441966);n=v(n,p,q,o,i[b+4],7,4118548399);o=v(o,n,p,q,i[b+5],12,1200080426);q=v(q,o,n,p,i[b+6],17,2821735955);p=v(p,q,o,n,i[b+7],22,4249261313);n=v(n,p,q,o,i[b+8],7,1770035416);o=v(o,n,p,q,i[b+9],12,2336552879);q=v(q,o,n,p,i[b+10],17,4294925233);p=v(p,q,o,n,i[b+11],22,2304563134);n=v(n,p,q,o,i[b+12],7,1804603682);o=v(o,n,p,q,i[b+13],12,4254626195);q=v(q,o,n,p,i[b+14],17,2792965006);p=v(p,q,o,n,i[b+15],22,1236535329);n=t(n,
p,q,o,i[b+1],5,4129170786);o=t(o,n,p,q,i[b+6],9,3225465664);q=t(q,o,n,p,i[b+11],14,643717713);p=t(p,q,o,n,i[b+0],20,3921069994);n=t(n,p,q,o,i[b+5],5,3593408605);o=t(o,n,p,q,i[b+10],9,38016083);q=t(q,o,n,p,i[b+15],14,3634488961);p=t(p,q,o,n,i[b+4],20,3889429448);n=t(n,p,q,o,i[b+9],5,568446438);o=t(o,n,p,q,i[b+14],9,3275163606);q=t(q,o,n,p,i[b+3],14,4107603335);p=t(p,q,o,n,i[b+8],20,1163531501);n=t(n,p,q,o,i[b+13],5,2850285829);o=t(o,n,p,q,i[b+2],9,4243563512);q=t(q,o,n,p,i[b+7],14,1735328473);p=t(p,
q,o,n,i[b+12],20,2368359562);n=z(n,p,q,o,i[b+5],4,4294588738);o=z(o,n,p,q,i[b+8],11,2272392833);q=z(q,o,n,p,i[b+11],16,1839030562);p=z(p,q,o,n,i[b+14],23,4259657740);n=z(n,p,q,o,i[b+1],4,2763975236);o=z(o,n,p,q,i[b+4],11,1272893353);q=z(q,o,n,p,i[b+7],16,4139469664);p=z(p,q,o,n,i[b+10],23,3200236656);n=z(n,p,q,o,i[b+13],4,681279174);o=z(o,n,p,q,i[b+0],11,3936430074);q=z(q,o,n,p,i[b+3],16,3572445317);p=z(p,q,o,n,i[b+6],23,76029189);n=z(n,p,q,o,i[b+9],4,3654602809);o=z(o,n,p,q,i[b+12],11,3873151461);
q=z(q,o,n,p,i[b+15],16,530742520);p=z(p,q,o,n,i[b+2],23,3299628645);n=C(n,p,q,o,i[b+0],6,4096336452);o=C(o,n,p,q,i[b+7],10,1126891415);q=C(q,o,n,p,i[b+14],15,2878612391);p=C(p,q,o,n,i[b+5],21,4237533241);n=C(n,p,q,o,i[b+12],6,1700485571);o=C(o,n,p,q,i[b+3],10,2399980690);q=C(q,o,n,p,i[b+10],15,4293915773);p=C(p,q,o,n,i[b+1],21,2240044497);n=C(n,p,q,o,i[b+8],6,1873313359);o=C(o,n,p,q,i[b+15],10,4264355552);q=C(q,o,n,p,i[b+6],15,2734768916);p=C(p,q,o,n,i[b+13],21,1309151649);n=C(n,p,q,o,i[b+4],6,4149444226);
o=C(o,n,p,q,i[b+11],10,3174756917);q=C(q,o,n,p,i[b+2],15,718787259);p=C(p,q,o,n,i[b+9],21,3951481745);n=d(n,r);p=d(p,w);q=d(q,A);o=d(o,F)}return(k(n)+k(p)+k(q)+k(o)).toLowerCase()};Njl.Utils.throttle=function(b,c,d){var f,g,j;return function(u){g=u;j=true;f||function(){if(j){b.apply(c,[g]);j=false;f=setTimeout(arguments.callee,d)}else f=null}()}};
Njl.Utils.createNavigationMap=function(b,c){var d=CComQIPtr(CoCreateInstance(b),"IExtNative");if(d=d&&d.getNative().ISystemFrameTab&&d.getNative().ISystemFrameTab.getTitle()){Njl.CLSIDS.MAP[d]=[b];b=0;for(c=c||[];b<c.length;++b)Njl.CLSIDS.MAP[d].push(c[b])}};Njl.createNavigationMap=Njl.Utils.createNavigationMap;
Njl.Utils.formatDate=function(b){var c="";switch(localStorage.getItem("dataFormatType")){case "1":c="M d, Y";break;case "2":c="d M Y";break;case "3":c="Y M d";break;default:c="M d, Y";break}return String.format("{0}",b.format(c))};Njl.formatDate=Njl.Utils.formatDate;Njl.Utils.formatTime=function(b,c,d,f){return String.format("{0}:{1}:{2} {3}",("0"+b).slice(-2),("0"+c).slice(-2),("0"+d).slice(-2),f)};Njl.formatTime=Njl.Utils.formatTime;
Njl.Utils.formatDateTime=function(b,c){var d=localStorage.getItem("enable24Hour")=="true",f=+b.getHours();if(d){if(c==_TR("PM")){f+=12;if(f==24)f=12}else if(c==_TR("AM"))if(f==12)f=0;c=""}else if(typeof c=="undefined")if(f>12){c=" "+_TR("PM");f-=12}else if(f==12)c=" "+_TR("PM");else if(f>0&&f<12)c=" "+_TR("AM");else if(f==0){c=" "+_TR("AM");f=12}return Njl.formatDate(b)+" "+Njl.formatTime(f,b.getMinutes(),b.getSeconds(),c)};Njl.formatDateTime=Njl.Utils.formatDateTime;
Njl.Utils.timeStampToDateTime=function(b){b=new Date(b*1E3);Y=b.getFullYear()+"-";M=(b.getMonth()+1<10?"0"+(b.getMonth()+1):b.getMonth()+1)+"-";D=b.getDate()+" ";h=b.getHours()+":";m=b.getMinutes()+":";s=b.getSeconds();return Y+M+D+h+m+s};Njl.timeStampToDateTime=Njl.Utils.timeStampToDateTime;
Njl.Utils.convertDateToFixedFormat=function(b,c){var d={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()};if(/(y+)/.test(c))c=c.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length));for(var f in d)if((new RegExp("("+f+")")).test(c))c=c.replace(RegExp.$1,RegExp.$1.length==1?d[f]:("00"+d[f]).substr((""+d[f]).length));return c};Njl.convertDateToFixedFormat=Njl.Utils.convertDateToFixedFormat;
Njl.Utils.getQueryString=function(b,c){if(b.indexOf("?")==-1)return null;b=b.substr(b.indexOf("?")+1);b=b.match(new RegExp("(^|&)"+c+"=([^&]*)(&|$)"));if(b!=null)return unescape(b[2]);return null};Njl.getQueryString=Njl.Utils.getQueryString;
Njl.Utils.OAuth2EnDeCryption=function(b,c,d){if("ENCODE"!=d)b=Njl.Utils.Base64.decode(b);var f="";c=Njl.Utils.MD5(c).substring(9,27);for(var g=c.length,j=b.length,u=0;u<j;++u){var v=u%g;f+=String.fromCharCode(b.charCodeAt(u)^c.charCodeAt(v))}if("DECODE"!=d)f=Njl.Utils.Base64.encode(f,true);return f};Njl.OAuth2EnDeCryption=Njl.Utils.OAuth2EnDeCryption;
Njl.Utils.TimeZoneArray=function(){return new Ext.data.ArrayStore({fields:["id","text"],data:[["US/Samoa","GMT -11:00 Samoa"],["US/Hawaii","GMT -10:00 Hawaii"],["US/Alaska","GMT -09:00 Alaska"],["US/Pacific","GMT -08:00 Pacific Time (US & Canada); Tijuana"],["US/Arizona","GMT -07:00 Arizona"],["US/Mountain","GMT -07:00 Mountain Time (US & Canada)"],["America/Costa_Rica","GMT -06:00 Central America"],["US/Central","GMT -06:00 Central Time (US & Canada)"],["America/Bogota","GMT -05:00 Bogota, Lima"],
["US/Eastern","GMT -05:00 Eastern Time (US & Canada)"],["US/East-Indiana","GMT -05:00 Indiana (East)"],["America/Caracas","GMT -04:00 Caracas"],["America/La_Paz","GMT -04:00 Georgetown, La Paz"],["Canada/Atlantic","GMT -04:00 Atlantic Time (Canada)"],["Atlantic/Bermuda","GMT -04:00 Mid-Atlantic"],["Canada/Newfoundland","GMT -03:30 Newfoundland"],["America/Buenos_Aires","GMT -03:00 Buenos Aires"],["Etc/GMT+2","GMT -02:00 Coordinated Universal Time-02"],["Atlantic/Azores","GMT -01:00 Azores, Cape Verde Is."],
["Africa/Monrovia","GMT -00:00 Monrovia"],["Greenwich","GMT -00:00 Greenwich Mean Time"],["WET","GMT -00:00 Western European Time; Dublin, London"],["Africa/Casablanca","GMT +01:00 Casablanca"],["Europe/Paris","GMT +01:00 Amsterdam, Copenhagen, Madrid, Paris"],["Europe/Belgrade","GMT +01:00 Belgrade, Sarajevo, Skopie"],["Europe/Budapest","GMT +01:00 Bratislava, Budapest, Prague, Warsaw"],["Europe/Brussels","GMT +01:00 Brussels, Berlin, Rome, Stockholm, Vienna"],["Europe/Athens","GMT +02:00 Athens, Istanbul"],
["Europe/Bucharest","GMT +02:00 Bucharest"],["Africa/Cairo","GMT +02:00 Cairo"],["Africa/Harare","GMT +02:00 Harare, Pretoria"],["Europe/Helsinki","GMT +02:00 Helsinki, Riga, Tallinn, Sofija"],["Israel","GMT +02:00 Israel"],["Europe/Minsk","GMT +03:00 Minsk"],["Asia/Baghdad","GMT +03:00 Baghdad, Kuwait, Riyadh"],["Africa/Nairobi","GMT +03:00 Nairobi"],["Europe/Moscow","GMT +03:00 Moscow, St. Petersburg, Volgograd"],["Asia/Tehran","GMT +03:30 Tehran"],["Asia/Muscat","GMT +04:00 Abu Dhabi, Muscat"],
["Asia/Tbilisi","GMT +04:00 Tbilisi"],["Asia/Baku","GMT +04:00 Baku"],["Asia/Kabul","GMT +04:30 Kabul"],["Asia/Karachi","GMT +05:00 Islamabad, Karachi, Tashkent"],["Asia/Kolkata","GMT +05:30 Mumbai, Kolkata, Chennai"],["Asia/Calcutta","GMT +05:30 Bombay, Calcutta, Madrasi"],["Asia/Colombo","GMT +05:30 Colombo"],["Asia/Kathmandu","GMT +05:45 Kathmandu"],["Asia/Almaty","GMT +06:00 Almaty, Dhaka"],["Asia/Bangkok","GMT +07:00 Thailand, Vietnam, Bangkok, Hanoi, Jakarta"],["Asia/Krasnoyarsk","GMT +07:00 Krasnoyarsk"],
["Asia/Hong_Kong","GMT +08:00 Ulan Bator, Beijing, Chongqing, Hong Kong, Urumqi"],["Australia/Perth","GMT +08:00 Perth"],["Asia/Singapore","GMT +08:00 Singapore"],["Asia/Taipei","GMT +08:00 Taipei"],["Asia/Irkutsk","GMT +08:00 Irkutsk"],["Asia/Tokyo","GMT +09:00 Tokyo, Osaka, Sapporo"],["Asia/Seoul","GMT +09:00 Seoul"],["Asia/Yakutsk","GMT +09:00 Yakutsk"],["Australia/Adelaide","GMT +09:30 Adelaide"],["Australia/Darwin","GMT +09:30 Darwin"],["Australia/Brisbane","GMT +10:00 Brisbane"],["Australia/Sydney",
"GMT +10:00 Canberra, Melbourne, Sydney"],["Pacific/Guam","GMT +10:00 Guam, Port Moresby"],["Australia/Hobart","GMT +10:00 Hobart"],["Asia/Vladivostok","GMT +10:00 Vladivostok"],["Pacific/Noumea","GMT +11:00 Solomon Is., New Caledonia"],["Asia/Magadan","GMT +11:00 Magadan"],["Pacific/Fiji","GMT +12:00 Fiji"],["Asia/Kamchatka","GMT +12:00 Kamchatka"],["NZ","GMT +12:00 New Zealand"],["Pacific/Kwajalein","GMT +12:00 Kwajalein, Marshall Is."]]})};Njl.TimeZoneArray=Njl.Utils.TimeZoneArray;
Njl.namespace("Njl","Njl.CLSIDS");Njl.CLSIDS.Reporter="Njl.Reporter.1";Njl.CLSIDS.ErrorReporter="Njl.ErrorReporter.1";Njl.CLSIDS.XMLDocument="Njl.XMLDocument.1";
Njl.util.JSON=new (function(){var b=!!{}.hasOwnProperty,c=function(){var t=null;return function(){if(t===null)t=Njl.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]";return t}}(),d=function(t){return t<10?"0"+t:t},f=function(t){return eval("("+t+")")},g=function(t){if(!Njl.isDefined(t)||t===null)return"null";else if(Njl.isArray(t))return v(t);else if(Njl.isDate(t))return Njl.util.JSON.encodeDate(t);else if(Njl.isString(t))return u(t);else if(typeof t=="number")return isFinite(t)?String(t):
"null";else if(Njl.isBoolean(t))return String(t);else{var z=["{"],C,G,k;for(G in t)if(!t.getElementsByTagName)if(!b||t.hasOwnProperty(G)){k=t[G];switch(typeof k){case "undefined":case "function":case "unknown":break;default:C&&z.push(",");z.push(g(G),":",k===null?"null":g(k));C=true}}z.push("}");return z.join("")}},j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u=function(t){if(/["\\\x00-\x1f]/.test(t))return'"'+t.replace(/([\x00-\x1f\\"])/g,function(z,C){if(z=
j[C])return z;z=C.charCodeAt();return"\\u00"+Math.floor(z/16).toString(16)+(z%16).toString(16)})+'"';return'"'+t+'"'},v=function(t){var z=["["],C,G,k=t.length,l;for(G=0;G<k;G+=1){l=t[G];switch(typeof l){case "undefined":case "function":case "unknown":break;default:C&&z.push(",");z.push(l===null?"null":Njl.util.JSON.encode(l));C=true}}z.push("]");return z.join("")};this.encodeDate=function(t){return'"'+t.getFullYear()+"-"+d(t.getMonth()+1)+"-"+d(t.getDate())+"T"+d(t.getHours())+":"+d(t.getMinutes())+
":"+d(t.getSeconds())+'"'};this.encode=function(){var t;return function(z){t||(t=c()?JSON.stringify:g);return t(z)}}();this.decode=function(){var t;return function(z){t||(t=c()?JSON.parse:f);return t(z)}}()});Njl.encode=Njl.util.JSON.encode;Njl.decode=Njl.util.JSON.decode;
(function(){function b(k,l,i){return function(){l.target==arguments[0]&&k.apply(i,j(arguments))}}function c(k,l,i,r){i.task=new g.DelayedTask;return function(){i.task.delay(l.buffer,k,r,j(arguments))}}function d(k,l,i,r){return function(){l.removeListener(i,r);return k.apply(r,arguments)}}function f(k,l,i,r){return function(){var w=new g.DelayedTask;if(!i.tasks)i.tasks=[];i.tasks.push(w);w.delay(l.delay||10,k,r,j(arguments))}}var g=Njl.utils,j=Njl.toArray,u=Njl.each,v=Njl.isObject,t=Njl.isBoolean,
z=Njl.isString,C=Njl.applyIf;g.Observable=function(){var k=this.events;if(this.listeners){this.on(this.listeners);delete this.listeners}this.events=k||{}};g.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var k=j(arguments),l=k[0].toLowerCase(),i=true,r=this.events[l];if(this.eventsSuspended===true){if(l=this.eventQueue)l.push(k)}else if(v(r)&&r.bubble){if(r.fire.apply(r,k.slice(1))===false)return false;if((r=this.getBubbleTarget&&this.getBubbleTarget())&&
r.enableBubble){if(!r.events[l]||!v(r.events[l])||!r.events[l].bubble)r.enableBubble(l);return r.fireEvent.apply(r,k)}}else if(v(r)){k.shift();i=r.fire.apply(r,k)}return i},addListener:function(k,l,i,r){var w;if(v(k)){r=k;for(w in r){k=r[w];this.filterOptRe.test(w)||this.addListener(w,k.fn||k,k.scope||r.scope,k.fn?k:r)}}else{k=k.toLowerCase();w=this.events[k]||true;if(t(w))this.events[k]=w=new g.Event(this,k);w.addListener(l,i,v(r)?r:{})}},removeListener:function(k,l,i){k=this.events[k.toLowerCase()];
v(k)&&k.removeListener(l,i)},purgeListeners:function(){var k=this.events,l,i;for(i in k){l=k[i];v(l)&&l.clearListeners()}},addEvents:function(k){this.events=this.events||{};if(z(k))for(var l=arguments,i=l.length;i--;)this.events[l[i]]=this.events[l[i]]||true;else C(this.events,k)},hasListener:function(k){k=this.events[k.toLowerCase()];return v(k)&&k.listeners.length>0},suspendEvents:function(k){this.eventsSuspended=true;if(k&&!this.eventQueue)this.eventQueue=[]},resumeEvents:function(){var k=this,
l=k.eventQueue||[];k.eventsSuspended=false;delete k.eventQueue;u(l,function(i){k.fireEvent.apply(k,i)})}};var G=g.Observable.prototype;G.on=G.addListener;G.un=G.removeListener;g.Observable.releaseCapture=function(k){k.fireEvent=G.fireEvent};g.Event=function(k,l){this.name=l;this.obj=k;this.listeners=[]};g.Event.prototype={addListener:function(k,l,i){l=l||this.obj;if(!this.isListening(k,l)){k=this.createListener(k,l,i);if(this.firing)this.listeners=this.listeners.slice(0);this.listeners.push(k)}},
createListener:function(k,l,i){i=i||{};l=l||this.obj;var r={fn:k,scope:l,options:i},w=k;if(i.target)w=b(w,i,l);if(i.delay)w=f(w,i,r,l);if(i.single)w=d(w,this,k,l);if(i.buffer)w=c(w,i,r,l);r.fireFn=w;return r},findListener:function(k,l){var i=this.listeners,r=i.length,w;for(l=l||this.obj;r--;)if(w=i[r])if(w.fn==k&&w.scope==l)return r;return-1},isListening:function(k,l){return this.findListener(k,l)!=-1},removeListener:function(k,l){var i;i=false;if((k=this.findListener(k,l))!=-1){if(this.firing)this.listeners=
this.listeners.slice(0);i=this.listeners[k];if(i.task){i.task.cancel();delete i.task}if(l=i.tasks&&i.tasks.length){for(;l--;)i.tasks[l].cancel();delete i.tasks}this.listeners.splice(k,1);i=true}return i},clearListeners:function(){for(var k=this.listeners,l=k.length;l--;)this.removeListener(k[l].fn,k[l].scope)},fire:function(){var k=j(arguments),l=this.listeners,i=l.length,r=0,w;if(i>0)for(this.firing=true;r<i;r++)if((w=l[r])&&w.fireFn.apply(w.scope||this.obj||window,k)===false)return this.firing=
false;this.firing=false;return true}}})();
Njl.lib.Ajax=function(){function b(l){function i(w,A){for(r in A)A.hasOwnProperty(r)&&w.setRequestHeader(r,A[r])}l=l.conn;var r;k.defaultHeaders&&i(l,k.defaultHeaders);if(k.headers){i(l,k.headers);delete k.headers}}function c(l,i,r,w){return{tId:l,status:r?-1:0,statusText:r?"transaction aborted":"communication failure",isAbort:r,isTimeout:w,argument:i}}function d(l,i){(k.headers=k.headers||{})[l]=i}function f(l,i){var r={},w,A=l.conn,F,n,p=A.status==1223;try{w=l.conn.getAllResponseHeaders();Njl.each(w.replace(/\r\n/g,
"\n").split("\n"),function(o){F=o.indexOf(":");if(F>=0){n=o.substr(0,F).toLowerCase();o.charAt(F+1)==" "&&++F;r[n]=o.substr(F+1)}})}catch(q){}return{tId:l.tId,status:p?204:A.status,statusText:p?"No Content":A.statusText,getResponseHeader:function(o){return r[o.toLowerCase()]},getAllResponseHeaders:function(){return w},responseText:A.responseText,responseXML:A.responseXML,argument:i}}function g(l){if(l.tId)k.conn[l.tId]=null;l.conn=null}function j(l,i,r,w){if(i){var A;try{A=l.conn.status!==undefined&&
l.conn.status!=0?l.conn.status:13030}catch(F){A=13030}if(A>=200&&A<300||Njl.isIE&&A==1223){r=f(l,i.argument);if(i.success)i.scope?i.success.apply(i.scope,[r]):i.success(r)}else switch(A){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:r=c(l.tId,i.argument,r?r:false,w);if(i.failure)i.scope?i.failure.apply(i.scope,[r]):i.failure(r);break;default:r=f(l,i.argument);if(i.failure)i.scope?i.failure.apply(i.scope,[r]):i.failure(r)}}g(l)}function u(l,i){i=i||{};var r=l.conn,w=l.tId,A=k.poll,
F=i.timeout||null;if(F){k.conn[w]=r;k.timeout[w]=setTimeout(function(){k.abort(l,i,true)},F)}var n=A[w]=setInterval(function(){if(r&&r.readyState==4){clearInterval(n);A[w]=null;if(F){clearTimeout(k.timeout[w]);k.timeout[w]=null}j(l,i)}},k.pollInterval)}function v(l,i,r,w,A){var F=t()||null;if(F){F.conn.open(l,i,true);if("withCredentials"in F.conn)F.conn.withCredentials=A;k.useDefaultXhrHeader&&d("X-Requested-With",k.defaultXhrHeader);if(w&&k.useDefaultHeader&&(!k.headers||!k.headers[G]))d(G,k.defaultPostHeader);
if(k.defaultHeaders||k.headers)b(F);u(F,r);F.conn.send(w||null)}return F}function t(){var l;try{if(l=z(k.transactionId))k.transactionId++}catch(i){}finally{return l}}function z(l){var i;try{i=new XMLHttpRequest}catch(r){for(var w=0;w<C.length;++w)try{i=new ActiveXObject(C[w]);break}catch(A){}}finally{return{conn:i,tId:l}}}var C=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],G="Content-Type",k={request:function(l,i,r,w,A){if(A){var F=A.xmlData,n=A.jsonData;Njl.applyIf(this,A);if(F||n){w=
this.headers;if(!w||!w[G])d(G,F?"text/xml":"application/json");w=F||(!Njl.isPrimitive(n)?Njl.encode(n):n)}}return v(l||A.method||"POST",i,r,w,!!(A&&A.withCredentials))},useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},conn:{},pollInterval:50,transactionId:0,abort:function(l,i,r){var w=l.tId,A=false;if(this.isCallInProgress(l)){l.conn.abort();clearInterval(this.poll[w]);this.poll[w]=
null;clearTimeout(k.timeout[w]);this.timeout[w]=null;j(l,i,A=true,r)}return A},isCallInProgress:function(l){return l.conn&&!{0:true,4:true}[l.conn.readyState]}};return k}();Njl.Ajax=Njl.lib.Ajax;
(function(){var b=window;Njl.data.Connection=function(c){Njl.apply(this,c);this.addEvents("beforerequest","requestcomplete","requestexception");Njl.data.Connection.superclass.constructor.call(this)};Njl.extend(Njl.data.Connection,Njl.util.Observable,{timeout:3E4,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:function(c){if(this.fireEvent("beforerequest",this,c)){var d=c.params,f=c.url||this.url,g,j={success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{options:c},
timeout:c.timeout||this.timeout};if(Njl.isFunction(d))d=d.call(c.scope||b,c);d=Njl.isDefined(c.type)&&c.type=="BIN"?d.request:Njl.urlEncode(this.extraParams,Njl.isObject(d)?Njl.urlEncode(d):d);if(Njl.isFunction(f))f=f.call(c.scope||b,c);g=c.method||this.method||(d||c.xmlData||c.jsonData?"POST":"GET");if(g==="GET"&&this.disableCaching&&c.disableCaching!==false||c.disableCaching===true)f=Njl.urlAppend(f,(c.disableCachingParam||this.disableCachingParam)+"="+(new Date).getTime());c.headers=Njl.apply(c.headers||
{},this.defaultHeaders||{});if(c.autoAbort===true||this.autoAbort)this.abort();if((g=="GET"||c.xmlData||c.jsonData)&&d){f=Njl.urlAppend(f,d);d=""}return this.transId=Njl.lib.Ajax.request(g,f,j,d,c)}else return c.callback?c.callback.apply(c.scope,[c,undefined,undefined]):null},isLoading:function(c){return c?Njl.lib.Ajax.isCallInProgress(c):!!this.transId},abort:function(c){if(c||this.isLoading())Njl.lib.Ajax.abort(c||this.transId)},handleResponse:function(c){this.transId=false;var d=c.argument.options;
c.argument=d?d.argument:null;this.fireEvent("requestcomplete",this,c,d);d.success&&d.success.call(d.scope,c,d);d.callback&&d.callback.call(d.scope,d,true,c)},handleFailure:function(c,d){this.transId=false;var f=c.argument.options;c.argument=f?f.argument:null;this.fireEvent("requestexception",this,c,f,d);f.failure&&f.failure.call(f.scope,c,f);f.callback&&f.callback.call(f.scope,f,false,c)}})})();Njl.namespace("Njl");
if(typeof Ext!=="undefined")Njl.FilteredStore=Njl.extend(Ext.data.ArrayStore,{filterFunc:null,filterScope:null,setFilter:function(b,c){this.filterBy(b,c);this.filterFunc=b;this.filterScope=c},applyFilter:function(){this.filterFunc&&this.filterScope&&this.filterBy(this.filterFunc,this.filterScope);this.reload()},add:function(b){var c,d,f;b=[].concat(b);if(!(b.length<1)){c=0;for(d=b.length;c<d;c++){f=b[c];f.join(this);if(f.dirty||f.phantom)this.modified.push(f)}c=this.data.length;this.snapshot&&this.snapshot.addAll(b);
if(this.filterFunc&&this.filterScope){d=new Ext.util.MixedCollection;d.addAll(b);d=d.filterBy(this.filterFunc,this.filterScope);b=d.items}this.data.addAll(b);b.length>0&&this.fireEvent("add",this,b,c)}}});Njl.namespace("Njl");Njl.Debug=true;Njl.MAXDBG_TRACES=10;S_OK=0;S_FALSE=1;S_PENDING=2147483658;E_FAIL=-2147500037;E_NOTIMPL=-2147483649;E_OUTOFMEMORY=-2147483650;E_INVALIDARG=-2147483651;E_ACCESSDENIED=-2147483657;E_PENDING=-2147483658;E_ABORT=-2147483655;E_NOINTERFACE=-2147500034;E_UNEXPECTED=-2147614719;
_TRACE_STORAGE=null;if(typeof Ext!="undefined")_TRACE_STORAGE=new Njl.FilteredStore({proxy:new Ext.data.MemoryProxy,fields:["desc","sev","info","date","ctx"]});_SUCCEEDED=function(b){return b>=0};_FAILED=function(b){return b<0};
_TRACE_ACTIVE=function b(c,d,f,g){try{if(typeof Ext!="undefined"){if(!f)f=_TRACE.INFO;a=[];a.push([c,f,d,new Date,g]);_TRACE_STORAGE.getCount()>Njl.MAXDBG_TRACES&&_TRACE_STORAGE.removeAll();_TRACE_STORAGE.loadData(a,true);b.sper=!b.sper?CComQIPtr(CoCreateInstance(Njl.CLSIDS.ErrorReporter),"IErrorReporter"):b.sper;b.sper.report(c,d,f)}}catch(j){}};_TRACE_PASSIVE=function(){};_TRACE_ACTIVE.INFO={code:0,name:"Info"};_TRACE_ACTIVE.WARNING={code:1,name:"Warning"};_TRACE_ACTIVE.ERROR={code:2,name:"Error"};
_TRACE_PASSIVE.INFO={code:0,name:"Info"};_TRACE_PASSIVE.WARNING={code:1,name:"Warning"};_TRACE_PASSIVE.ERROR={code:2,name:"Error"};_TRACE=_TRACE_ACTIVE;Njl._TRACE_REQUESTS_STORAGE=null;if(typeof Ext!="undefined")Njl._TRACE_REQUESTS_STORAGE=new Njl.FilteredStore({proxy:new Ext.data.MemoryProxy,fields:["id","desc","sev","ctx","start","end","time","request","response"],idIndex:0});
Njl._TRACE_REQUEST=function(b,c,d,f,g){try{if(typeof Ext!="undefined")if(f==Njl._TRACE_REQUEST.PENDING){if(Njl._TRACE_REQUEST.Enabled){Njl._TRACE_REQUESTS_STORAGE.getCount()>Njl.MAXDBG_TRACES&&Njl._TRACE_REQUESTS_STORAGE.removeAll();Njl._TRACE_REQUESTS_STORAGE.loadData([[b,c,Njl._TRACE_REQUEST.PENDING,d,new Date,"",0,g,""]],true)}}else{var j=Njl._TRACE_REQUESTS_STORAGE.getById(b);if(j){j.set("sev",f||Njl._TRACE_REQUEST_PENDING.FAIL);j.set("end",new Date);var u=j.get("start"),v=j.get("end");u&&v&&
j.set("time",(v.getTime()-u.getTime())/1E3);g&&j.set("response",g)}Njl._TRACE_REQUESTS_STORAGE.commitChanges();Njl._TRACE_REQUESTS_STORAGE.applyFilter()}}catch(t){}};Njl._TRACE_REQUEST.Enabled=document.__DEBUG;Njl._TRACE_REQUEST.PENDING={code:0,name:"Pending"};Njl._TRACE_REQUEST.SUCCESS={code:1,name:"Success"};Njl._TRACE_REQUEST.FAIL={code:2,name:"Fail"};Exception=function(b,c){this.m_hr=b;this.m_desc=c};
function globalErrorHanler(b,c,d){REPORT_ERROR("error: "+b+"</br>line: "+d+"</br>file: "+c);return true}window.defaultOnError=window.onerror;window.onerror=globalErrorHanler;
function STACK(b){var c=[],d=false;if(Njl.isDefined(b)&&b.stack){d=b.stack.split("\n");for(var f=0,g=d.length;f<g;++f)c.push(d[f]);c.shift();d=true}else if(Njl.isDefined(b)&&window.opera&&b.message){d=b.message.split("\n");f=0;for(g=d.length;f<g;++f){var j=d[f];if(d[f+1]){j+=" at "+d[f+1];++f}c.push(j)}c.shift();d=true}if(!d){d=0;for(f=arguments.callee.caller;f;){++d;g=f.toString();g=g.substring(g.indexOf("function")+8,g.indexOf(")")+1)||"anonymous()";g=!g||g=="()"?"anonymous()":g;c.push(g);f=f.caller;
if(d>30)break}c.shift()}return c}function REPORT_EXCEPTION(b,c,d){if(Njl.isDefined(b)){for(var f=STACK(b),g="",j=0,u=f.length;j<u;++j)g+=f[j].toString()+"<br>";_TRACE(c?c:"Unhandled Exception","<b>Name: </b>"+b.name+"<br><b>Error: </b>"+b.number+"<br><br><b>Description: </b>"+b.description+"<br><b>Message: </b>"+b.message+"<br><br><br><b>Stack:</b><br>"+g+"<br>"+(d?d:""),_TRACE.ERROR)}}function REPORT_ERROR(b,c){_TRACE("Failed",b,_TRACE.ERROR,c)}Njl.namespace("Njl");
if(typeof Ext!=="undefined"){Njl.RowExpander=Njl.extend(Njl.util.Observable,{expandOnEnter:true,expandOnDblClick:true,header:"",width:20,sortable:false,fixed:true,hideable:false,menuDisabled:true,dataIndex:"",id:"expander",lazyRender:true,enableCaching:true,constructor:function(b){Njl.apply(this,b);this.addEvents({beforeexpand:true,expand:true,beforecollapse:true,collapse:true});Njl.RowExpander.superclass.constructor.call(this);if(this.tpl){if(typeof this.tpl=="string")this.tpl=new Ext.Template(this.tpl);
this.tpl.compile()}this.state={};this.bodyContent={}},getRowClass:function(b,c,d){d.cols-=1;var f=this.bodyContent[b.id];if(!f&&!this.lazyRender)f=this.getBodyContent(b,c);if(f)d.body=f;return this.state[b.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(b){this.grid=b;var c=b.getView();c.getRowClass=this.getRowClass.createDelegate(this);c.enableRowBody=true;b.on("render",this.onRender,this);b.on("destroy",this.onDestroy,this)},onRender:function(){var b=this.grid;b.getView().mainBody.on("mousedown",
this.onMouseDown,this,{delegate:".x-grid3-row-expander"});if(this.expandOnEnter)this.keyNav=new Ext.KeyNav(this.grid.getGridEl(),{enter:this.onEnter,scope:this});this.expandOnDblClick&&b.on("rowdblclick",this.onRowDblClick,this)},onDestroy:function(){if(this.keyNav){this.keyNav.disable();delete this.keyNav}var b=this.grid.getView().mainBody;b&&b.un("mousedown",this.onMouseDown,this)},onRowDblClick:function(b,c){this.toggleRow(c)},onEnter:function(){for(var b=this.grid,c=b.getSelectionModel().getSelections(),
d=0,f=c.length;d<f;d++)this.toggleRow(b.getStore().indexOf(c[d]))},getBodyContent:function(b){if(!this.enableCaching)return this.tpl.apply(b.data);var c=this.bodyContent[b.id];if(!c){c=this.tpl.apply(b.data);this.bodyContent[b.id]=c}return c},onMouseDown:function(b){b.stopEvent();this.toggleRow(b.getTarget(".x-grid3-row"))},renderer:function(b,c){c.cellAttr='rowspan="2"';return'<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(b,c,d){if(this.fireEvent("beforeexpand",this,b,c,
d)!==false){if(this.tpl&&this.lazyRender)c.innerHTML=this.getBodyContent(b,d);return true}else return false},toggleRow:function(b){if(typeof b=="number")b=this.grid.view.getRow(b);this[Ext.fly(b).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](b)},expandRow:function(b){if(typeof b=="number")b=this.grid.view.getRow(b);var c=this.grid.store.getAt(b.rowIndex),d=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",b);if(this.beforeExpand(c,d,b.rowIndex)){this.state[c.id]=true;Ext.fly(b).replaceClass("x-grid3-row-collapsed",
"x-grid3-row-expanded");this.fireEvent("expand",this,c,d,b.rowIndex)}},collapseRow:function(b){if(typeof b=="number")b=this.grid.view.getRow(b);var c=this.grid.store.getAt(b.rowIndex),d=Ext.fly(b).child("tr:nth(1) div.x-grid3-row-body",true);if(this.fireEvent("beforecollapse",this,c,d,b.rowIndex)!==false){this.state[c.id]=false;Ext.fly(b).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed");this.fireEvent("collapse",this,c,d,b.rowIndex)}}});Ext.preg("rowexpanderex",Njl.RowExpander)}Njl.namespace("Njl");
Njl.XmlConnection=Njl.extend(Njl.util.Observable,{m_szUrl:null,m_argument:null,m_connection:null,m_timeout:9E4,constructor:function(b){Njl.Ajax.timeout=this.m_timeout;Njl.XmlConnection.superclass.constructor.call(this);this.m_szUrl=b;this.addEvents("onBeforeWebCall","onWebPending","onWebSuccess","onWebFailure")},BeforeRequest:function(b,c){this.fireEvent("onWebPending",this,c)},RequestComplete:function(b,c,d){_TRACE("WebResp ["+Njl.util.Format.htmlEncode(c.responseText)+"]",Njl.util.Format.htmlEncode(c.responseText),
_TRACE.INFO);if(c&&c.responseText)if(c.status==505||c.responseText.indexOf('id="auth"')>-1)return this.RequestFailed(b,c,d,error);if(c&&c.responseXML)return this.fireEvent("onWebSuccess",this,c);this.RequestFailed(b,c,d,error)},RequestFailed:function(b,c,d,f){if(b){f={handled:false,code:f};this.fireEvent("onWebFailure",this,c,f);f.handled||REPORT_ERROR("<b>SERVER Error      :</b> "+f.code+"<br/><b>HTTP Status  :</b> "+c.status+"<br/><b>HTTP Error   :</b> "+c.statusText+"<br/><b>AJAX URL     :</b>"+
d.url+"<br/><br/><b>HTTP Request :</b><br/>"+Njl.util.Format.htmlEncode(d.params.request)+"<br/><br/><b>HTTP Response:</b><br/>"+Njl.util.Format.htmlEncode(c.responseText),this)}},RowWebCall:function(b,c){if(!this.m_connection){this.m_connection=new Njl.data.Connection({timeout:this.m_timeout});this.m_connection.on("requestexception",this.RequestFailed,this);this.m_connection.on("requestcomplete",this.RequestComplete,this);this.m_connection.on("beforerequest",this.BeforeRequest,this)}b={url:this.m_szUrl,
argument:this.m_argument,params:{request:b},method:"POST",timeout:this.m_timeout,type:c};if(this.fireEvent("onBeforeWebCall",this,this.m_connection,b)!=false){_TRACE("RowWebCall ["+Njl.util.Format.htmlEncode(b.params.request)+"]",Njl.util.Format.htmlEncode(b.params.request),_TRACE.INFO);this.m_connection.request(b)}},WebCall:function(b,c,d){if(!this.m_connection){this.m_connection=new Njl.data.Connection({timeout:this.m_timeout});this.m_connection.on("requestexception",this.RequestFailed,this);this.m_connection.on("requestcomplete",
this.RequestComplete,this);this.m_connection.on("beforerequest",this.BeforeRequest,this)}b={url:this.m_szUrl,argument:this.m_argument,params:{request:this.Save(b,c)},method:"POST",timeout:this.m_timeout,type:d};if(this.fireEvent("onBeforeWebCall",this,this.m_connection,b)!=false){_TRACE("WebCall ["+Njl.util.Format.htmlEncode(b.params.request)+"]",Njl.util.Format.htmlEncode(b.params.request),_TRACE.INFO);this.m_connection.request(b)}},attachArgument:function(b){this.m_argument=b},IsPending:function(){return false},
getTransId:function(){if(this.m_connection)return this.m_connection.transId;return false},abort:function(){this.IsPending()&&this.m_connection.abort()},Save:function(){return false},Load:function(){return false}});Njl.namespace("Njl","Njl.Crx");
Njl.Crx.Connection=Njl.extend(Njl.data.Connection,{request:function(b){if(this.fireEvent("beforerequest",this,b)!==false){var c=b.params;if(typeof c=="function")c=c.call(b.scope||window,b);if(typeof c=="object")c=Njl.urlEncode(c);if(this.extraParams){var d=Njl.urlEncode(this.extraParams);c=c?c+"&"+d:d}d=b.url||this.url;if(typeof d=="function")d=d.call(b.scope||window,b);var f=b.headers;if(this.defaultHeaders){f=Njl.apply(f||{},this.defaultHeaders);if(!b.headers)b.headers=f}f={success:this.handleResponse,
failure:this.handleFailure,scope:this,argument:{options:b},timeout:Njl.isDefined(b.timeout)?b.timeout:this.timeout};var g=b.method||this.method||(c?"POST":"GET");if(g=="GET"&&this.disableCaching&&b.disableCaching!==false||b.disableCaching===true)d+=(d.indexOf("?")!=-1?"&":"?")+"_dc="+(new Date).getTime();if(typeof b.autoAbort=="boolean")b.autoAbort&&this.abort();else this.autoAbort!==false&&this.abort();if(g=="GET"&&c||b.xmlData||b.jsonData){d+=(d.indexOf("?")!=-1?"&":"?")+c;c=""}return this.transId=
b.scriptTag||this.scriptTag?this.scriptRequest(g,d,f,c,b):Njl.lib.Ajax.request(g,d,f,c,b)}else{Njl.callback(b.callback,b.scope,[b,null,null]);return null}},scriptRequest:function(b,c,d,f,g){b=Njl.id();var j={id:b,cb:g.callbackName||"stcCallback"+b,scriptId:"stcScript"+b,options:g};c+=(c.indexOf("?")!=-1?"&":"?")+(f?f+"&":"")+String.format("{0}={1}",g.callbackParam||this.callbackParam||"callback",j.cb);var u=this;window[j.cb]=function(v){u.handleScriptResponse(v,j)};j.timeoutId=this.handleScriptFailure.defer(d.timeout,
this,[j]);d=document.createElement("script");d.setAttribute("src",c);d.setAttribute("id",j.scriptId);d.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(d);return j},handleScriptResponse:function(b,c){this.transId=false;this.destroyScriptTrans(c,true);c=c.options;var d=null;if(typeof b=="string"){b=decodeURIComponent(b);b=Njl.Utils.Base64.decode(b);if(window.ActiveXObject){d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}else d=(new DOMParser).parseFromString(b,
"text/xml")}response={status:200,responseObject:b,responseText:typeof b=="object"?Njl.encode(b):String(b),responseXML:d,argument:c.argument};this.fireEvent("requestcomplete",this,response,c);Njl.callback(c.success,c.scope,[response,c]);Njl.callback(c.callback,c.scope,[c,true,response])},handleScriptFailure:function(b){this.trans=false;this.destroyScriptTrans(b,false);b=b.options;response={argument:b.argument,status:500,statusText:"Server failed to respond",responseText:""};this.fireEvent("requestexception",
this,response,b,{status:-1,statusText:"communication failure"});Njl.callback(b.failure,b.scope,[response,b]);Njl.callback(b.callback,b.scope,[b,false,response])},destroyScriptTrans:function(b,c){document.getElementsByTagName("head")[0].removeChild(document.getElementById(b.scriptId));clearTimeout(b.timeoutId);if(c){try{delete window[b.cb]}catch(d){}window[b.cb]=undefined}else window[b.cb]=function(){try{delete window[b.cb]}catch(f){}window[b.cb]=undefined}}});Njl.namespace("Njl","Njl.Xml");
Njl.Xml.document=Njl.extend(Njl.util.Observable,{xmlDocument:null,constructor:function(b){this.init(b)},init:function(b){if(b)switch(typeof b){case "object":this.xmlDocument=b.xmlDocument?b.xmlDocument:b;break;case "string":if(Njl.isIE){this.xmlDocument=new ActiveXObject("Microsoft.XMLDOM");this.xmlDocument.async="false";this.xmlDocument.loadXML(b)}else this.xmlDocument=(new DOMParser).parseFromString(b,"text/xml");break;default:throw"Unsuported XML source";}},isValid:function(){return this.xmlDocument&&
(Njl.isIE?Njl.isDefined(this.xmlDocument.parseError)?!this.xmlDocument.parseError.errorCode:this.xmlDocument.parsed:"parsererror"!=(this.xmlDocument.ownerDocument?this.xmlDocument.ownerDocument.documentElement.nodeName:this.xmlDocument.documentElement.nodeName))},selectNodes:function(b){if(this.xmlDocument)if((b=this.xmlDocument.selectNodes(b))&&b.length>0){for(var c=[],d=0,f=b.length;d<f;++d)c.push(new Njl.Xml.document(b[d]));return c}},cloneNode:function(b){if(this.xmlDocument)return new Njl.Xml.document(this.xmlDocument.cloneNode(b))},
selectSingleNode:function(b){if(this.xmlDocument)if(b=this.xmlDocument.selectSingleNode(b))return new Njl.Xml.document(b)},getAttribute:function(b){if(this.xmlDocument)return this.selectSingleNode("./@"+b)},getNodeText:function(b){if(this.xmlDocument){if(!b||!b.length)b=".";if((b=this.selectSingleNode(b+(Njl.isIE?"":"/text()")))&&b.xmlDocument)return Njl.isIE?b.xmlDocument.text:b.xmlDocument.nodeValue}},setNodeText:function(b,c){if(this.xmlDocument){if(!c||!c.length)c=".";if((c=this.selectSingleNode(c))&&
c.xmlDocument){if(Njl.isIE)c.xmlDocument.text=b;else c.xmlDocument.textContent=b;return true}}return false},getAttributeText:function(b){return(b=b?this.getAttribute(b):this)&&b.xmlDocument?b.xmlDocument.nodeValue:undefined},setAttributeText:function(b,c){if((c=c?this.getAttribute(c):this)&&c.xmlDocument)c.xmlDocument.nodeValue=b},toString:function(){if(this.xmlDocument)return Njl.isIE?this.xmlDocument.xml:(new XMLSerializer).serializeToString(this.xmlDocument);return""},getNodeName:function(){if(this.xmlDocument)return this.xmlDocument.nodeName},
removeNode:function(b){if(this.xmlDocument){if(!b||!b.length)b=".";b=this.selectNodes(b);Njl.each(b,function(c){c&&c.xmlDocument&&c.xmlDocument.parentNode.removeChild(c.xmlDocument)});return true}return false},appendNode:function(b){if(this.xmlDocument)switch(typeof b){case "string":b=(this.xmlDocument.ownerDocument?this.xmlDocument.ownerDocument:this.xmlDocument).createElement(b);this.xmlDocument.appendChild(b);return new Njl.Xml.document(b);case "object":var c=this.xmlDocument.ownerDocument?this.xmlDocument.ownerDocument:
this.xmlDocument;b=b.xmlDocument.documentElement?b.xmlDocument.documentElement:b.xmlDocument;b=Njl.isIE?b:c.importNode(b,true);this.xmlDocument.appendChild(b);return new Njl.Xml.document(b);default:throw"Unsuported XML source";}return null}});
if(document.implementation.hasFeature("XPath","3.0")){if(typeof XMLDocument=="undefined")XMLDocument=Document;XMLDocument.prototype.selectNodes=Document.prototype.selectNodes=function(b,c){if(!this.createNSResolver||!this.evaluate){_TRACE("XMLDocument doesnt supoprt XPath","Functions createNSResolver and evaluate where not found",_TRACE.ERROR);return[]}c||(c=this);var d,f;try{d=this.createNSResolver(this.documentElement);f=this.evaluate(b,c,d,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}catch(g){REPORT_EXCEPTION(g)}b=
[];c=f?f.snapshotLength:-1;if(c>0){b.push(f.snapshotItem(0));if(b[0].appendData)for(d=1;d<c;++d)b[0].appendData(f.snapshotItem(d).data);else for(d=1;d<c;++d)b.push(f.snapshotItem(d))}return b};XMLDocument.prototype.selectSingleNode=Document.prototype.selectSingleNode=function(b,c){c||(c=this);b=this.selectNodes(b,c);if(b.length>0)return b[0];return null};Element.prototype.selectNodes=function(b){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(b,this);throw"For XML Elements Only";
};Element.prototype.selectSingleNode=function(b){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode(b,this);throw"For XML Elements Only";};Attr.prototype.selectNodes=function(b){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(b,this);throw"For XML Attributes Only";};Attr.prototype.selectSingleNode=function(b){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode(b,this);throw"For XML Attributes Only";}}
Njl.namespace("Njl","Njl.JSCom");Njl.JSCom.IUnknown=Njl.inherit(undefined,{IUnknown:{}});var IUnknown=Njl.JSCom.IUnknown;Njl.namespace("Njl","Njl.JSCom");Njl.JSCom.INotifySink=Njl.inherit(IUnknown,{INotifySink:{Advise:function(){return E_NOTIMPL},Unadvise:function(){return E_NOTIMPL},Fire:function(){return E_NOTIMPL}}});var INotifySink=Njl.JSCom.INotifySink;Njl.namespace("Njl","Njl.JSCom");
Njl.JSCom.ICollection=Njl.inherit(IUnknown,{ICollection:{getCount:function(){return E_NOTIMPL},getItem:function(){return E_NOTIMPL},getItemBy:function(){return E_NOTIMPL}}});var ICollection=Njl.JSCom.ICollection;Njl.namespace("Njl","Njl.JSCom");Njl.JSCom.ISingleTone=Njl.inherit(IUnknown,{ISingleTone:{getSingleToneState:function(b){b.res=true;return S_OK}}});var ISingleTone=Njl.JSCom.ISingleTone;Njl.namespace("Njl","Njl.JSCom");Njl.JSCom.IExtNative=Njl.inherit(IUnknown,{IExtNative:{getNative:function(){return this}}});
var IExtNative=Njl.JSCom.IExtNative;Njl.namespace("Njl","Njl.JSCom");
Njl.JSCom.IReporter=Njl.inherit(IExtNative,ISingleTone,{IReporter:{Show:function(){return E_NOTIMPL},Hide:function(){return E_NOTIMPL},AdviseKeyHandler:function(){return E_NOTIMPL},UnadviseKeyHandler:function(){return E_NOTIMPL},Close:function(){return E_NOTIMPL},Enable:function(){return E_NOTIMPL},getVisible:function(){return E_NOTIMPL},getEnable:function(){return E_NOTIMPL},getMaxTraceCount:function(){return E_NOTIMPL},putMaxTraceCount:function(){return E_NOTIMPL},putDebugUrls:function(){return E_NOTIMPL}}});
var IReporter=Njl.JSCom.IReporter;Njl.namespace("Njl","Njl.JSCom");Njl.JSCom.IErrorReporter=Njl.inherit(IExtNative,ISingleTone,{IErrorReporter:{enable:function(){},disable:function(){},report:function(){return E_NOTIMPL}}});var IErrorReporter=Njl.JSCom.IErrorReporter;Njl.namespace("Njl","Njl.JSCom","Njl.JSCom.Macro","Njl.JSCom.Impl");Njl.JSCom.Remoting=false;
Njl.JSCom.fun=function(b,c,d){this[c]=function(){if(b[c])return b[c].apply(d,arguments);else _TRACE('Undefined interface: "'+b.__uuid+'" method: "'+c+'" call prevented',_TRACE_WARNING);return E_NOTIMPL}};Njl.JSCom.singleton=function(){var b=[];return function(c){return b[c]?b[c]:(b[c]=new c)}}();
Njl.JSCom.CComObjectsStorage=Njl.inherit(Njl.utils.Observable,{__stones:[],__classes:{},register:function(b,c){if(b&&c&&Njl.isString(c)){if(this.__classes[c]==undefined){this.__classes[c]=b;return S_OK}return E_FAIL}return E_INVALIDARG},isSTone:function(b,c){b=b&&b.getOption("singleton")=="true";if(!b)if(c=c?CComQIPtr(c,"ISingleTone"):null){b={};c.getSingleToneState(b);b=b.res}return b},getObject:function(b,c){if(this.__classes[b]!=undefined){var d=this.__classes[b],f=this.__stones[b];if(this.isSTone(c,
f)){if(!f){f=c.newInstance(d);this.__stones[b]=f}return f}d=c?c.newInstance(d):new d;if(this.isSTone(c,d))this.__stones[b]=d;return d}else if(c&&c.isLazy())if(c.loadLazyObject())return this.getObject(b,c);return null}});
if(Njl.JSCom.Remoting){Njl.JSCom.CComRegestry=Njl.inherit(Njl.Xml.document,{counter:{c:0,set:function(b,c){this.c=b;this.x=c;this.dec(0)},dec:function(b){this.c-=b;this.c<1&&this.x.fireEvent("OnReady",this.x,!!!this.e)},err:function(b){this.e=b}},constructor:function(){this.addEvents("onRegestryDone","OnScriptLoad","OnScriptDone","OnCssLoad","OnCssDone","OnReady")},getObjectDefinition:function(b){if(this.xmlDocument)return new Njl.JSCom.CComRegestry.CComDefinition(this.selectSingleNode("REGESTRY/CLASSES_ROOT/CLASSES/"+
b));return null},loadObjects:function(){var b=this.selectNodes("REGESTRY/CLASSES_ROOT/CLASSES/*");this.counter.set(b.length*2,this);for(var c=0,d=b.length;c<d;++c){var f=b[c],g=f.getNodeText("./Remote/js"),j=f.getNodeText("./Remote/css"),u=f.getNodeText("./Remote/lazy")!="false",v=Njl.Debug==true;this.counter.dec(u?2:0);if(!u){this.counter.dec(!j?1:0);this.counter.dec(!g||v?1:0);if(g)if(v){_TRACE("Inline script instance from ["+g+"]",g,_TRACE.INFO);u=Njl.id();f=new Njl.JSCom.CComRegestry.CComDefinition(f);
this.fireEvent("OnScriptDone",this,f,CoAddScript(u,g,v))}else{v=new Njl.data.Connection;v.on("requestcomplete",this.OnScriptCssComplete,this);v.on("requestexception",this.OnScriptCssFailed,this);this.fireEvent("OnScriptLoad",this,g);f=new Njl.JSCom.CComRegestry.CComDefinition(f);v.request({url:g,method:"GET",argument:{type:"text/javascript",regdef:f}});_TRACE("WebCall ["+g+"]",g,_TRACE.INFO)}if(j){g=new Mjl.data.Connection;g.on("requestcomplete",this.OnScriptCssComplete,this);g.on("requestexception",
this.OnScriptCssFailed,this);this.fireEvent("OnCssLoad",this,j);f=j;g.request({url:j,method:"GET",argument:{type:"text/css",regdef:f}});_TRACE("WebCall ["+j+"]",j,_TRACE.INFO)}}}return true},OnScriptCssComplete:function(b,c,d){_TRACE("WebResp ["+Njl.Utils.Format.htmlEncode(c.responseText)+"]",Njl.Utils.Format.htmlEncode(c.responseText),_TRACE.INFO);if(c.status==200||c.status==304){if(c.argument.type=="text/css")this.fireEvent("OnCssDone",this,c.argument.regdef,CoAddCss(c.responseText));else if(c.argument.type==
"text/javascript"){b=Njl.id();this.fireEvent("OnScriptDone",this,c.argument.regdef,CoAddScript(b,c.responseText,Njl.Debug==true))}this.counter.dec(1)}else this.OnScriptFailed(b,c,d)},OnScriptCssFailed:function(b,c,d){this.reportError(b,c,d);this.fireEvent(c.argument.type=="text/css"?"OnCssDone":"OnScriptDone",this,c.argument.regdef,false);this.counter.err(c.status);this.counter.dec(1)},loadRegestry:function(b){if(b&&b.length){var c=new Njl.data.Connection;c.on("requestexception",this.OnRegestryFailed,
this);c.on("requestcomplete",this.OnRegestryComplete,this);c.request({url:b,method:"GET"});_TRACE("WebCall ["+b+"]",b,_TRACE.INFO)}return this},OnRegestryComplete:function(b,c,d){_TRACE("WebResp ["+Njl.Utils.Format.htmlEncode(c.responseText)+"]",Njl.Utils.Format.htmlEncode(c.responseText),_TRACE.INFO);if(c&&c.responseText)if(c.status==505||c.responseText.indexOf('id="auth"')>-1){window.location="/welcome.html";return}if(c&&c.responseXML){this.init(c.responseXML);if(this.isValid()){this.fireEvent("onRegestryDone",
this,this,true);return this.loadObjects()}else{var f=this.xmlDocument;REPORT_ERROR("Failed to Load System Regestry.<br>Pls check regestry xml file syntaxis and existance.<br><br>Description: "+f.parseError.reason+"<br>File: "+f.parseError.url+"<br>Line: "+f.parseError.line+"<br>Line Position: "+f.parseError.linepos+"<br>Source Code: "+f.parseError.srcText)}}this.OnRegestryFailed(b,c,d)},OnRegestryFailed:function(b,c,d){this.reportError(b,c,d);this.fireEvent("onRegestryDone",this,this,false)},reportError:function(b,
c,d){b&&REPORT_ERROR("<br/><b>HTTP Error        :</b>"+c.status+"<br/><b>HTTP Status       :</b>"+c.statusText+"<br/><b>AJAX URL          :</b>"+d.url+"<br/><br/><br/><b>HTTP Response:</b><br/>"+Njl.Utils.Format.htmlEncode(c.responseText))}});Njl.JSCom.CComRegestry.CComDefinition=Njl.inherit(Njl.Xml.document,{activated:false,constructor:function(b){Njl.JSCom.CComRegestry.CComDefinition.superclass.constructor.call(this,b)},getOption:function(b){return this.getNodeText("./Settings/"+b)},isLazy:function(){return!this.activated&&
this.getNodeText("./Remote/lazy")!="false"},loadLazyObject:function(){this.activated=true;var b=this.getNodeText("./Remote/js");if(b){var c=Njl.Debug==true;if(b=c?b:CoLoadContent(b)){var d=Njl.id();if(CoAddScript(d,b,c)){if(c=this.getNodeText("./Remote/css"))(c=CoLoadContent(c))&&CoAddCss(c);return true}}}return false},newInstance:function(b){return new b}});Njl.JSCom.Impl.CoLoadContent=function(b){_TRACE("SyncWebCall ["+b+"]",b,_TRACE.INFO);var c=undefined;try{c=window.XMLHttpRequest?new XMLHttpRequest:
new ActiveXObject("Microsoft.XMLHTTP");c.open("GET",b,false);c.send(null);if(c.status==200||c.status==304)return c.responseText}catch(d){}REPORT_ERROR("<br/><b>HTTP Error        :</b>"+c.status+"<br/><b>HTTP Status       :</b>"+c.statusText+"<br/><b>AJAX URL          :</b>"+b+"<br/><br/><br/><b>HTTP Response:</b><br/>"+Njl.Utils.Format.htmlEncode(c.responseText))};Njl.JSCom.Impl.CoAddScript=function(b,c,d){try{if(!d){eval(c);return true}var f=document.getElementById(b);if(f)f.text=c;else{var g=document.getElementsByTagName("HEAD").item(0),
j=document.createElement("script");j.id=b;j.src=c;j.defer=true;j.language="javascript";j.type="text/javascript";j.done=false;j.onreadystatechange=function(){if(this.readyState=="loaded")this.done=true};for(g.appendChild(j);!j.done;)alert("Loading inline script.\n "+c+" \nPls press OK to continue debug session.")}return true}catch(u){REPORT_EXCEPTION(u,"JSCOM object evaluation failed","<br><b>Failed to evaluate JSCOM object :</b><br>"+c.replace(/\r\n/g,"<br>"))}return false};Njl.JSCom.Impl.CoAddCss=
function(b){try{var c=document.getElementsByTagName("HEAD").item(0),d=document.createElement("style");d.setAttribute("type","text/css");if(d.styleSheet)d.styleSheet.cssText=b;else{var f=document.createTextNode(b);d.appendChild(f)}c.appendChild(d);return true}catch(g){}return false}}Njl.JSCom.__enable_cashe=true;Njl.JSCom.__qiobjtr=20;Njl.JSCom.__qiobjcl=5E3;Njl.JSCom.__qiobjgl=500;Njl.JSCom.__qiobjmap={length:0};Njl.JSCom.__qiobjres={length:0};
Njl.JSCom.CComObjectRoot=Njl.inherit(Njl.util.Observable,{CComQIPtr:function(b,c){if(!b||!c)return null;b.__uuid_obj_id=b.__uuid_obj_id?b.__uuid_obj_id:Njl.idn();if(Njl.JSCom.__enable_cashe){var d=Njl.JSCom.__qiobjcl,f=Njl.JSCom.__qiobjgl,g=Njl.JSCom.__qiobjtr,j=Njl.JSCom.__qiobjmap,u=Njl.JSCom.__qiobjres;if(j[b.__uuid_obj_id]&&j[b.__uuid_obj_id][c]){d=j[b.__uuid_obj_id][c];++d.__usage;if(d.__usage>g){if(f<u.length)Njl.JSCom.__qiobjres={length:0};u[b.__uuid_obj_id]=u[b.__uuid_obj_id]?u[b.__uuid_obj_id]:
{};u[b.__uuid_obj_id][c]=d;j[b.__uuid_obj_id][c]=undefined;++u.length;return u[b.__uuid_obj_id][c]}return d}else if(u[b.__uuid_obj_id]&&u[b.__uuid_obj_id][c]){b=u[b.__uuid_obj_id][c];++b.__usage;return b}}f=b.QueryInterface?b.QueryInterface(c):null;if(Njl.JSCom.__enable_cashe&&f){if(d<j.length)Njl.JSCom.__qiobjmap={length:0};j[b.__uuid_obj_id]=j[b.__uuid_obj_id]?j[b.__uuid_obj_id]:{};j[b.__uuid_obj_id][c]=f;j[b.__uuid_obj_id][c].__usage=1;++j.length}return f},QueryInterface:function(b){var c=this[b];
if(c){var d=new function(){};d.__uuid=b;d.__s=this;d.QueryInterface=function(){return Njl.JSCom.CComObjectRoot.prototype.QueryInterface.apply(this.__s,arguments)};for(var f in c)if(Njl.isFunction(c[f]))d[f]=(new Njl.JSCom.fun(c,f,d.__s))[f];return d}return null},IUnknown:{}});
Njl.JSCom.CComEventsObjectRoot=Njl.inherit(Njl.JSCom.CComObjectRoot,INotifySink,{__i:"",INotifySink:{Advise:function(b,c){this.__c=this.__c?this.__c:[];if(b=CComQIPtr(b,this.__i)){if(c)b.__flt=c;this.__c.push(b);return S_OK}return E_FAIL},Unadvise:function(b){if(this.__c)if(b=CComQIPtr(b,this.__i)){for(var c=0,d=this.__c.length;c<d;++c)if(this.__c[c].__s==b.__s){this.__c.splice(c,1);return S_OK}return S_FALSE}return E_FAIL},Fire:function(b,c,d){return this.Fire(b,c,d)}},Fire:function(b,c,d){if(this.__c&&
this.__c.length){for(var f=this.__c.slice(0),g=0;g<f.length;++g)if(f[g][b])if(!(d&&f[g].__flt&&f[g].__flt!=d))try{f[g][b].apply(f[g].__s,c)}catch(j){REPORT_EXCEPTION(j,'JSCom event exception. Subscriber: <b>"'+f[g].__uuid+'"</b> Method: <b>"'+b+'"</b>')}return S_OK}return E_FAIL}});Njl.JSCom.Macro.CoException=function(b,c,d,f){this.init(b,c,d,f)};
Njl.JSCom.Macro.CoException.prototype.init=function(b,c,d,f){this.hr=b;this.name="JSCOM";b=c.toString();this.expression=b.substring(b.indexOf("function")+9,b.indexOf("("))||"anonymous";this.args="(";if(d&&d.length){b=0;for(c=d.length;b<c;++b)this.args=this.args+d[b]+(b==c-1?")":", ")}this.expression+=this.args+(d&&d.length?"":")");_TRACE("JSCOM Exception","<b>Name: </b>"+this.name+"<br><b>Error: </b>"+this.hr+"<br><b>Description: </b>"+f+"<br><br><b>Stack:</b><br>"+this.expression,_TRACE.ERROR)};
var CoException=Njl.JSCom.Macro.CoException;Njl.JSCom.Macro._HR=function(){var b=arguments.length;if(b){for(var c=[],d=arguments[0],f=1;f<b;++f)c.push(arguments[f]);b=d.apply(null,c);_FAILED(b)&&new CoException(b,d,c);return b}};Njl.JSCom.Macro._XTHR=function(){var b=arguments.length;if(b){for(var c=[],d=arguments[0],f=1;f<b;++f)c.push(arguments[f]);b=d.apply(null,c);if(_FAILED(b))throw new CoException(b,d,c);}};
Njl.JSCom.Impl.CoInitialize=function(b){return Njl.JSCom.Remoting?Njl.JSCom.singleton(Njl.JSCom.CComRegestry).loadRegestry(b):null};Njl.JSCom.Impl.CoCreateInstance=function(b){var c=Njl.JSCom.Remoting?Njl.JSCom.singleton(Njl.JSCom.CComRegestry).getObjectDefinition(b):null;return CComQIPtr(Njl.JSCom.singleton(Njl.JSCom.CComObjectsStorage).getObject(b,c),"IUnknown")};
var CoInitialize=Njl.JSCom.Impl.CoInitialize,CoCreateInstance=Njl.JSCom.Impl.CoCreateInstance,CComSingleton=Njl.JSCom.singleton,CoAddCss=Njl.JSCom.Impl.CoAddCss,CoAddScript=Njl.JSCom.Impl.CoAddScript,CoLoadContent=Njl.JSCom.Impl.CoLoadContent,CComQIPtr=Njl.JSCom.CComObjectRoot.prototype.CComQIPtr,CComObjectRoot=Njl.JSCom.CComObjectRoot,CComEventsObjectRoot=function(b){var c=function(){};c.prototype=Njl.clone(Njl.JSCom.CComEventsObjectRoot.prototype,false);c.superclass=Njl.JSCom.CComEventsObjectRoot.superclass;
c.prototype.__i=b;return c},CComEqual=function(b,c){if(b&&c){b=CComQIPtr(b,"IUnknown");c=CComQIPtr(c,"IUnknown");if(b&&c)return b.__s==c.__s}return false},_HR=Njl.JSCom.Macro._HR,_XTHR=Njl.JSCom.Macro._XTHR;Njl.Inherit=Njl.inherit;Njl.namespace("Njl");
if(typeof Ext!=="undefined"){Njl.RowNumberer=Njl.extend(Ext.grid.RowNumberer,{width:30,startIndex:0,m_dirty:false,renderer:function(b,c,d,f){if(this.rowspan)c.cellAttr='rowspan="'+this.rowspan+'"';return f+1+this.startIndex}});Njl.Debugger=Njl.extend(Ext.Panel,{initComponent:function(){var b=new Ext.Toolbar({monitorResize:true,autoScroll:true,enableOverflow:true,layout:"hbox",items:[this.urlSelectorCombo=new Ext.form.ComboBox({flex:1,mode:"local",lazyRender:true,typeAhead:true,triggerAction:"all",
forceSelection:true,store:new Ext.data.ArrayStore({id:1,fields:["id","url"],data:[[1,document.dbbroker],[2,document.fsbroker],[3,document.phbroker],[4,document.fsshare],[5,document.recovery],[6,document.fwbroker]]}),valueField:"url",displayField:"url"}),{flex:0,xtype:"button",text:"Send XML request",iconCls:"x-icon-errorreporter-icon-webcall",tooltip:"Send xml request",handler:this.OnWebRequest.createDelegate(this)},{flex:0,xtype:"button",text:"Execute Script",iconCls:"x-icon-errorreporter-icon-execscript",
tooltip:"Toggle Warnings visability on/off",handler:this.OnExecScript.createDelegate(this)}]});this.editor=new Ext.form.TextArea;this.urlSelectorCombo.setValue(document.dbbroker);Ext.apply(this,{tbar:b,items:[this.editor]});Njl.Debugger.superclass.initComponent.apply(this,arguments)},OnWebRequest:function(){var b=this.editor.getValue();if(b&&b.length){var c=new Njl.XmlConnection(this.urlSelectorCombo.getValue());c.on("onWebPending",this.onWebPending,this);c.on("onWebSuccess",this.onWebSuccess,this);
c.on("onWebFailure",this.onWebFailure,this);c.RowWebCall(b,"BIN")}},OnExecScript:function(){var b=this.editor.getValue();if(b)try{eval(b)}catch(c){REPORT_EXCEPTION(c,"Script Evaluation Failed","<br><b>Failed to Evaluation script :</b><br>"+b.replace(/\r\n/g,"<br>"))}},onWebPending:function(){if(!Ext.isDefined(this.myProgress))this.myProgress=new Ext.LoadMask(this.getEl(),{type:"normal",msg:"Please wait..."});this.myProgress.show()},onWebSuccess:function(b){this.myProgress.hide();b.un("onWebPending",
this.onWebPending,this);b.un("onWebSuccess",this.onWebSuccess,this);b.un("onWebFailure",this.onWebFailure,this)},onWebFailure:function(b){this.myProgress.hide();b.un("onWebPending",this.onWebPending,this);b.un("onWebSuccess",this.onWebSuccess,this);b.un("onWebFailure",this.onWebFailure,this)}});Njl.InspectWindow=Njl.inherit(Njl.JSCom.CComObjectRoot,Ext.Window,{cls:"x-window-debugger",layout:"fit",iconCls:"x-icon-errorreporter-inspect-window-title",height:400,width:600,border:true,plain:true,autoDestroy:true,
bodyStyle:"padding:0px",constrainHeader:true,draggable:true,constrain:false,minimizable:false,maximizable:true,stateful:true,shim:false,footer:false,closable:true,collapsible:false,initHidden:true,modal:false,autoHeight:false,title:"Details",constructor:function(){this.editor=new Ext.form.HtmlEditor({enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableFormat:false,enableLinks:false,enableLists:false,listeners:{editmodechange:this.onEditModeChange,scope:this}});this.items=
[this.editor];Njl.InspectWindow.superclass.constructor.apply(this,arguments)},onEditModeChange:function(b,c){if(c){c=Njl.make_unquoted(b.text);c=c.replace(new RegExp("<br>","gi"),"\r\n");c=c.replace(new RegExp("</br>","gi"),"\r\n");c=c.replace(new RegExp("<\u0008r>","gi"),"\r\n");c=c.replace(new RegExp("<br>","gi"),"\r\n");c=c.replace(new RegExp("<br/>","gi"),"\r\n");b.setRawValue(c)}else b.setValue(b.text)}});Njl.TracerRequests=Njl.inherit(Njl.JSCom.CComObjectRoot,Ext.Container,{constructor:function(){var b=
Njl._TRACE_REQUESTS_STORAGE.applyFilter.createDelegate(Njl._TRACE_REQUESTS_STORAGE),c=new Njl.RowExpander({tpl:new Ext.Template("Request:<br/>{request}<br/><br/>Response:<br/>{response}<br/><br/>")});this.toolbarRequests=new Ext.Toolbar({monitorResize:true,autoScroll:true,enableOverflow:true,items:[this.failButton=new Ext.Button({text:"Fail",iconCls:"x-icon-tracerrequests-fail",pressed:true,enableToggle:true,handler:b,items:0}),this.pendingButton=new Ext.Button({text:"Pending",pressed:true,enableToggle:true,
iconCls:"x-icon-tracerrequests-pending",handler:b,items:0}),this.successButton=new Ext.Button({text:"Success",pressed:true,enableToggle:true,iconCls:"x-icon-tracerrequests-success",handler:b,items:0}),"-",{xtype:"box",html:"Average Time:&nbsp;"},this.lAvTime=new Ext.BoxComponent({html:"0 s"}),"->","-",{xtype:"button",text:"Help Manager",disabled:true,enableToggle:true,iconCls:"x-icon-errorreporter-icon-question",listeners:{afterRender:function(d){Ext.HelpManager&&Ext.HelpManager.reg(d)}}},"-",{xtype:"button",
text:"Clear",iconCls:"x-icon-errorreporter-icon-clear",handler:Njl._TRACE_REQUESTS_STORAGE.removeAll.createDelegate(Njl._TRACE_REQUESTS_STORAGE)},{xtype:"button",text:"Enable",enableToggle:true,pressed:Njl._TRACE_REQUEST.Enabled,iconCls:"x-icon-errorreporter-icon-enable",handler:function(d){Njl._TRACE_REQUEST.Enabled=d.pressed}}]});b=function(d){if(d)return'<div><span class="errorreporter-datetime-value">'+Ext.util.Format.dateRenderer("H:i:s")(d)+"</span></div>";return d};colModel=[c,new Njl.RowNumberer,
{header:"Status",width:50,sortable:false,dataIndex:"sev",groupable:false,renderer:function(d){var f="";switch(d){case Njl._TRACE_REQUEST.PENDING:f="x-icon-tracerrequests-pending";break;case Njl._TRACE_REQUEST.SUCCESS:f="x-icon-tracerrequests-success";break;case Njl._TRACE_REQUEST.FAIL:f="x-icon-tracerrequests-fail";break}return"<div style='vertical-align: middle' class='x-icon-tracerrequests-status "+f+"'></div>"},fixed:true},{header:"Description",width:100,sortable:false,dataIndex:"desc",groupable:false,
id:"desc"},{header:"Context",width:100,sortable:false,dataIndex:"ctx",groupable:false,id:"ctx"},{header:"Start",width:80,sortable:false,dataIndex:"start",groupable:false,fixed:true,renderer:b},{header:"End",width:80,sortable:false,dataIndex:"end",groupable:false,fixed:true,renderer:b},{header:"Time",width:80,sortable:false,dataIndex:"time",groupable:false,fixed:true,xtype:"numbercolumn",format:"0.0"}];this.gridRequests=new Ext.grid.GridPanel({id:"debug-reports-requests-grid",header:false,border:false,
frame:false,stripeRows:true,trackMouseOver:false,disableSelection:false,split:true,minHeight:100,collapsible:true,collapseMode:"mini",collapsed:false,height:100,viewConfig:{forceFit:true,scrollOffset:0},store:Njl._TRACE_REQUESTS_STORAGE,columns:colModel,plugins:c,tbar:this.toolbarRequests,region:"center",anchor:"100%"});this.items=[this.gridRequests];Njl.TracerRequests.superclass.constructor.apply(this,arguments);this.lAvTime.on("afterRender",function(){this.updateAvTime();Njl._TRACE_REQUESTS_STORAGE.on("datachanged",
this.updateAvTime,this);Njl._TRACE_REQUESTS_STORAGE.on("remove",this.updateAvTime,this);Njl._TRACE_REQUESTS_STORAGE.on("update",this.updateAvTime,this);Njl._TRACE_REQUESTS_STORAGE.on("clear",this.updateAvTime,this);Njl._TRACE_REQUESTS_STORAGE.on("load",this.updateAvTime,this)},this);Njl._TRACE_REQUESTS_STORAGE.setFilter(function(d){var f=false;switch(d.get("sev")){case Njl._TRACE_REQUEST.FAIL:f=this.failButton.pressed;break;case Njl._TRACE_REQUEST.PENDING:f=this.pendingButton.pressed;break;case Njl._TRACE_REQUEST.SUCCESS:f=
this.successButton.pressed;break}return f},this);this.gridRequests.on("rowcontextmenu",this.OnContextMenu,this)},updateAvTime:function(){this.lAvTime.update((Njl._TRACE_REQUESTS_STORAGE.sum("time")/Njl._TRACE_REQUESTS_STORAGE.getTotalCount()).toFixed(1)+" s")},OnContextMenu:function(b,c,d){b.getSelectionModel().getCount()<2&&b.getSelectionModel().selectRow(c,false);c=this.rowContextMenu=this.rowContextMenu||new Ext.menu.Menu({cls:"x-window-debugger-menu",items:[{ids:"request",iconCls:"x-icon-errorreporter-icon-inspect",
text:"Inspect Request"},{ids:"response",iconCls:"x-icon-errorreporter-icon-inspect",text:"Inspect Response"},"-",{ids:"delete",iconCls:"x-icon-errorreporter-icon-delete",text:"Delete"}],listeners:{itemclick:function(f){switch(f.ids){case "request":case "response":for(var g="",j=f.parentMenu.contextNodes,u=0,v=j.length;u<v;++u){node=j[u];g+=node.get(f.ids)}f=new Njl.InspectWindow;f.show();f.editor.text=g;f.editor.setValue(g);break;case "delete":j=f.parentMenu.contextNodes;u=0;for(v=j.length;u<v;++u)Njl._TRACE_REQUESTS_STORAGE.remove(j[u]);
break}},scope:this}});c.contextNodes=b.getSelectionModel().getSelections();d.stopEvent();c.showAt(d.getXY())}});Njl.Reporter=Njl.inherit(Njl.CLSIDS.Reporter,Njl.JSCom.CComObjectRoot,Ext.Window,IReporter,{_x:undefined,_y:undefined,_h:450,_w:800,cls:"x-window-debugger",sh:function(b){if(b.keyCode=="28"||b.which=="92"&&b.ctrlKey||b.keyCode=="92"&&b.ctrlKey){b=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Reporter),"IReporter");b.getVisible()?b.Hide():b.Show()}},IReporter:{Show:function(b,c,d,f){this.setSize(Njl.def(f,
this._w),Njl.def(d,this._h));this.setPosition(Njl.def(b,this._x),Njl.def(c,this._y));this.show();return S_OK},Hide:function(){this.OnBeforeClose();return S_OK},Close:function(){this.close();return S_OK},Enable:function(b){_TRACE=b?_TRACE_ACTIVE:_TRACE_PASSIVE;Njl.Debug=b;this.toolbar.findById("NjlEnableButton").toggle(b);return S_OK},getVisible:function(){return!this.hidden},putMaxTraceCount:function(b){Njl.MAXDBG_TRACES=b;return S_OK},getMaxTraceCount:function(){return Njl.MAXDBG_TRACES},AdviseKeyHandler:function(){Njl.Utils.registerEventHandler(document,
"keypress",this.sh);return S_OK},UnadviseKeyHandler:function(){Njl.Utils.unregisterEventHandler(document,"keypress",this.sh);return S_OK},getEnable:function(){return _TRACE==_TRACE_ACTIVE},putDebugUrls:function(b){b=b||[];for(var c=[],d=0;d<b.length;++d)c.push([[d+1],b[d]]);this.dbg.urlSelectorCombo.store.loadData(c);this.dbg.urlSelectorCombo.setValue(b[0]||"");return S_OK}},IExtNative:{getNative:function(){return this}},constructor:function(b){if(typeof Ext=="undefined")throw"Unable to load Reporter Console, Ext didnt loaded.";
this.config=Ext.isDefined(b)?b:{};this.hidden=true;this.config.title="Dev Tools";this.config.modal=false;this.config.layout="border";this.config.plain=false;this.config.autoDestroy=true;this.config.bodyStyle="padding:0px";this.config.constrainHeader=true;this.config.draggable=true;this.config.border=true;this.config.resizable=true;this.config.constrain=false;this.config.minimizable=false;this.config.maximizable=true;this.config.stateful=true;this.config.shim=false;this.config.footer=false;this.config.closable=
true;this.config.collapsible=true;this.config.initHidden=true;this.config.iconCls="x-icon-errorreporter-window-title";b=new Njl.RowExpander({tpl:new Ext.Template("{info}<br/><br/>")});var c=[b,new Njl.RowNumberer,{header:"Status",width:50,sortable:true,dataIndex:"sev",renderer:this.iconCellRender,fixed:true,groupable:false},{header:"Description",width:100,sortable:false,dataIndex:"desc",groupable:false,id:"desc"},{header:"Context",width:100,sortable:true,dataIndex:"ctx",groupable:false,id:"ctx",renderer:this.CTXCellRender},
{header:"Date",width:150,sortable:true,dataIndex:"date",groupable:false,fixed:true,renderer:this.DTCellRender}];this.toolbar=new Ext.Toolbar({monitorResize:true,autoScroll:true,enableOverflow:true,items:[this.errButton=new Ext.Button({text:"Errors",iconCls:"x-icon-errorreporter-error",tooltip:"Toggle Errors visability on/off",pressed:true,enableToggle:true,handler:this.OnModeChange.createDelegate(this),items:0}),this.wrnButton=new Ext.Button({text:"Warnings",pressed:true,enableToggle:true,iconCls:"x-icon-errorreporter-warning",
tooltip:"Toggle Warnings visability on/off",handler:this.OnModeChange.createDelegate(this),items:0}),this.infButton=new Ext.Button({text:"Messages",pressed:true,enableToggle:true,iconCls:"x-icon-errorreporter-info",tooltip:"Toggle Info visability on/off",handler:this.OnModeChange.createDelegate(this),items:0}),"->","-",{xtype:"button",text:"Help Manager",disabled:true,enableToggle:true,iconCls:"x-icon-errorreporter-icon-question",listeners:{afterRender:function(d){Ext.HelpManager&&Ext.HelpManager.reg(d)}}},
"-",{xtype:"button",text:"Clear",iconCls:"x-icon-errorreporter-icon-clear",tooltip:"Clear",handler:this.OnClear.createDelegate(this)},{id:"NjlEnableButton",xtype:"button",text:"Enable",enableToggle:true,pressed:_TRACE==_TRACE_ACTIVE,iconCls:"x-icon-errorreporter-icon-enable",tooltip:"Enable/Disable trace output",handler:this.OnEnableDisable.createDelegate(this)}]});this.grid=new Ext.grid.GridPanel({id:"debug-reports-grid",header:false,border:false,frame:false,stripeRows:true,trackMouseOver:false,
disableSelection:false,split:true,minHeight:100,collapsible:true,collapseMode:"mini",collapsed:false,height:100,viewConfig:{forceFit:true,scrollOffset:0},store:_TRACE_STORAGE,columns:c,plugins:b,tbar:this.toolbar,region:"center",anchor:"100%"});this.grid.on("afterrender",function(){this.contextPopupMenu=new Ext.menu.Menu({cls:"x-window-debugger-menu",style:{overflow:"hidden"},width:140,maxHeight:300,enableScrolling:true,items:[]});this.contextMenuItem=new Ext.menu.Item({clickHideDelay:0,hideOnClick:false,
menu:this.contextPopupMenu,text:"Context"});this.grid.view.hmenu.add(this.contextMenuItem);this.grid.view.hmenu.on("beforeshow",function(){this.grid.view.cm.findColumnIndex("ctx")==this.grid.view.hdCtxIndex?this.contextMenuItem.show():this.contextMenuItem.hide()},this)},this);this.dbg=new Njl.Debugger({layout:"fit",collapseMode:"mini",collapsed:true,height:80,split:true,region:"south"});this.grid.view.onLoad=function(){};this.config.items=[new Ext.TabPanel({activeTab:0,region:"center",items:[{title:"Log",
xtype:"container",layout:"border",items:[this.grid,this.dbg]},new Njl.TracerRequests({title:"Requests",layout:"border"})]})];Njl.Reporter.superclass.constructor.call(this,this.config);this.render(document.body);this.getEl().addClass("x-window-dlg");this.hide()},initComponent:function(){Njl.Reporter.superclass.initComponent.call(this);this.contextStore=new Ext.data.ArrayStore({fields:["ctx","checked"]});_TRACE_STORAGE.on("load",this.OnTraceDataChanged,this);_TRACE_STORAGE.on("remove",this.OnTraceDataChanged,
this);this.on("hide",function(){this.contextPopupMenu&&this.contextPopupMenu.hide()},this);this.grid.view.on("rowsinserted",this.OnRowsInserted,this);this.grid.on("rowcontextmenu",this.OnContextMenu,this);this.on("beforeclose",this.OnBeforeClose,this);_TRACE_STORAGE.setFilter(function(b){var c=false,d=true,f=this.contextStore.find("ctx",b.get("ctx"));if(f!=-1)d=this.contextStore.getAt(f).get("checked");switch(b.get("sev")){case _TRACE.ERROR:c=this.errButton.pressed&&d;break;case _TRACE.WARNING:c=
this.wrnButton.pressed&&d;break;case _TRACE.INFO:c=this.infButton.pressed&&d;break}return c},this)},CTXCellRender:function(b){if(b)return'<div><span title="'+b+'">'+b+"</span></div>";return b},DTCellRender:function(b){if(b)return'<div><span title="'+Ext.util.Format.dateRenderer("Y-m-d H:i")(b)+'" class="errorreporter-datetime-value">'+Ext.util.Format.dateRenderer("Y-m-d H:i:s")(b)+"</span></div>";return b},OnBeforeClose:function(){this._x=this.x;this._y=this.y;this._w=this.getWidth();this._h=this.getHeight();
this.hide();return false},iconCellRender:function(b,c,d){switch(b){case _TRACE.INFO:cls="x-icon-errorreporter-error-info";break;case _TRACE.WARNING:cls="x-icon-errorreporter-error-warning";break;case _TRACE.ERROR:cls="x-icon-errorreporter-error-error";break}clsd=d.get("desc").indexOf("WebCall")>-1?"x-icon-errorreporter-error-web-in":d.get("desc").indexOf("WebResp")>-1?"x-icon-errorreporter-error-web-out":"";return clsd.length?"<div style='vertical-align: middle' class="+cls+"><div class="+clsd+"></div></div>":
"<div style='vertical-align: middle' class="+cls+"></div>"},OnTraceDataChanged:function(){this.contextPopupMenu&&this.contextPopupMenu.removeAll();var b=new Ext.data.ArrayStore({fields:["ctx"]});Ext.each(_TRACE_STORAGE.snapshot.items.length?_TRACE_STORAGE.snapshot.items:_TRACE_STORAGE.data.items,function(c){this.contextStore.find("ctx",c.get("ctx"))==-1&&this.contextStore.loadData([[c.get("ctx"),true]],true);c.get("ctx")&&b.find("ctx",c.get("ctx"))==-1&&b.loadData([[c.get("ctx")]],true)},this);b.sort("ctx");
Ext.each(b.data.items,function(c){this.contextPopupMenu.add({clickHideDelay:0,text:c.get("ctx"),checked:this.contextStore.getAt(this.contextStore.find("ctx",c.get("ctx"))).get("checked"),hideOnClick:false,listeners:{checkchange:function(d,f){this.contextStore.getAt(this.contextStore.find("ctx",c.get("ctx"))).set("checked",f);_TRACE_STORAGE.applyFilter()},scope:this}})},this)},OnRowsInserted:function(b,c,d){(b=this.grid.view.scroller.dom)&&b.clientHeight-(b.scrollHeight-b.scrollTop)>=-25&&this.grid.view.focusRow(d);
for(c=c-1;c<d;++c)if(b=_TRACE_STORAGE.getAt(c)){var f=null;switch(b.get("sev")){case _TRACE.ERROR:f=this.errButton;break;case _TRACE.WARNING:f=this.wrnButton;break;case _TRACE.INFO:f=this.infButton;break}if(f)f.text=++f.items+" "+f.text}},OnClear:function(){_TRACE_STORAGE.removeAll()},OnEnableDisable:function(b){_TRACE=b.pressed?_TRACE_ACTIVE:_TRACE_PASSIVE;Njl.Debug=b.pressed},OnModeChange:function(){_TRACE_STORAGE.applyFilter()},OnContextMenu:function(b,c,d){b.getSelectionModel().getCount()<2&&
b.getSelectionModel().selectRow(c,false);c=new Ext.menu.Menu({cls:"x-window-debugger-menu",items:[{ids:"show",iconCls:"x-icon-errorreporter-icon-inspect",text:"Inspect..."},{ids:"delete",iconCls:"x-icon-errorreporter-icon-delete",text:"Delete"},"-",{ids:"copyto",iconCls:"x-icon-errorreporter-icon-copy",text:"Copy",disabled:!Ext.isIE}],listeners:{itemclick:function(f){switch(f.ids){case "copyto":var g="";f=f.parentMenu.contextNodes;for(var j=0,u=f.length;j<u;++j){node=f[j];g+=node.get("sev").name+
"\r\n"+node.get("date")+"\r\n"+node.get("desc")+"\r\n"+node.get("info")+"\r\n\r\n\r\n"}g=Njl.make_unquoted(g);g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("</br>","gi"),"\r\n");g=g.replace(new RegExp("<\u0008r>","gi"),"\r\n");g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("<br/>","gi"),"\r\n");copyToClipboard(g);break;case "delete":f=f.parentMenu.contextNodes;_TRACE_STORAGE.suspendEvents(true);j=0;for(u=f.length;j<u;++j)_TRACE_STORAGE.remove(f[j]);_TRACE_STORAGE.resumeEvents();
break;case "show":g="";f=f.parentMenu.contextNodes;j=0;for(u=f.length;j<u;++j){node=f[j];g+=node.get("info")+"<br/><br/><br/>"}f=new Njl.InspectWindow;f.show();f.editor.text=g;f.editor.setValue(g);break}},scope:this}});c.contextNodes=b.getSelectionModel().getSelections();d.stopEvent();c.showAt(d.getXY())}})}
if(typeof Ext!=="undefined")Njl.ErrorReporter=Njl.inherit(Njl.CLSIDS.ErrorReporter,Njl.JSCom.CComObjectRoot,IErrorReporter,{_isCollapse:true,_isAlwaysIgnore:false,_isNextAlt:true,_expandSize:undefined,_errorsText:"",_selectItem:undefined,_defaultWindowTitle:"Error Reporter",collapseButton:undefined,errorGrid:undefined,errorBox:undefined,controlsBox:undefined,titleContent:undefined,window:undefined,buttonCopy:undefined,buttonIgnore:undefined,buttonInspect:undefined,buttonShowLog:undefined,buttonReport:undefined,
checkboxAlwaysShow:undefined,IErrorReporter:{enable:function(){this._isAlwaysIgnore=false},disable:function(){this._isAlwaysIgnore=true},report:function(b,c,d,f){f=f||{};if(d!=_TRACE.INFO){this.window.render(Ext.getBody());this.window.hidden&&this.onClearClick();var g=(new Date).format("h:i:s m/d/Y"),j=document.createElement("div");this.errorGrid.el.dom.childNodes.length?this.errorGrid.el.dom.insertBefore(j,this.errorGrid.el.dom.childNodes[0]):this.errorGrid.el.dom.appendChild(j);j=Ext.get(j);if(this._isNextAlt^=
1)j.addClass("errorreporter-errorgrid-altrow");j.data={d:b,i:c,s:d,date:g,title:f.title,subTitle:f.subTitle};this.setLongData(j);this.setShortData(this._selectItem);this._selectItem=j;Ext.EventManager.on(j,"click",function(){return function(){if(j!=this._selectItem){this.setLongData(j);this.setShortData(this._selectItem);this._selectItem=j;this.updateTitle(j.data.s,j.data.title,j.data.subTitle)}}}(j),this);this._errorsText+=(this._errorsText?"\n\n\n":"")+b+"\n\n"+c+"\n\nDatetime: "+g;if(!this._isAlwaysIgnore){if(this.window.hidden){this.buttonReport.setText(_TR("Report to NETGEAR"));
this.buttonShowLog.setText(_TR("Show log"));this.buttonIgnore.setText(_TR("Ignore"));this.buttonInspect.setText(_TR("Inspect"));this.buttonCopy.setText(_TR("Copy to Clipboard"));this.window.setTitle(_TR(this._defaultWindowTitle));this.checkboxAlwaysShow.setLabel(_TR("Always show this message for errors"));this._isCollapse?this.collapseButton.setText(_TR("Details")):this.collapseButton.setText(_TR("Collapse"));this.window.show();this.window.center()}this.errorGrid.el.dom.scrollTop=0}this.updateTitle(d,
f.title,f.subTitle);f.buttonInspect==undefined&&(f.buttonInspect=true);f.buttonInspect?this.buttonInspect.show():this.buttonInspect.hide();f.buttonShowLog==undefined&&(f.buttonShowLog=true);f.buttonShowLog?this.buttonShowLog.show():this.buttonShowLog.hide();f.checkboxShow==undefined&&(f.checkboxShow=true);f.checkboxShow?this.checkboxAlwaysShow.show():this.checkboxAlwaysShow.hide();f.windowTitle!=undefined&&this.setWindowTitle(f.windowTitle);f.buttonReport==undefined&&(f.buttonReport=true);if(f.buttonReport&&
(f.title+f.subTitle+"").match(/[0-9]{10,}/)){this.reportCfg=f;this.buttonReport.show();(b=Ext.HelpContext)&&!b.enabled&&b.review()}else{this.reportCfg=undefined;this.buttonReport.hide()}}}},constructor:function(){this.collapseButton=new Ext.UI.Button({text:_TR("Details"),width:85,handler:function(){if(this._isCollapse){this.window.removeClass("errorreporter-no-resize");this.window.addClass("ui-window-style1-resizable");this.collapseButton.setText(_TR("Collapse"));this.window.minHeight=this.window.minHeight+
this.errorBox.minHeight+this.controlsBox.getHeight();this.window.setSize(this._expandSize);this.window.resizer.enabled=true}else{this.collapseButton.setText(_TR("Details"));this.window.minHeight=this.window.minHeight-this.errorBox.minHeight-this.controlsBox.getHeight();this._expandSize=this.window.getSize();this.window.setSize(this.window.minWidth,this.window.minHeight);this.window.resizer.enabled=false;this.window.addClass("errorreporter-no-resize");this.window.removeClass("ui-window-style1-resizable")}this._isCollapse=
!this._isCollapse},scope:this});this.errorGrid=new Ext.Container({cls:"errorreporter-errorgrid"});this.errorBox=new Ext.Container({cls:"errorreporter-border",minHeight:150,items:[{xtype:"container",cls:"errorreporter-border-tml",items:[{xtype:"container",cls:"errorreporter-border-tmr",items:[{xtype:"container",cls:"errorreporter-border-tmc"}]}]},{xtype:"container",cls:"errorreporter-border-mc",items:[this.errorGrid]},{xtype:"container",cls:"errorreporter-border-bml",items:[{xtype:"container",cls:"errorreporter-border-bmr",
items:[{xtype:"container",cls:"errorreporter-border-bmc"}]}]}]});this.controlsBox=new Ext.Container({cls:"errorreporter-controls",items:[this.checkboxAlwaysShow=new Ext.UI.Checkbox({boxLabel:_TR("Always show this message for errors"),cls:"errorreporter-controls-checkbox",checked:true,handler:function(b,c){this._isAlwaysIgnore=!c},scope:this}),this.buttonCopy=new Ext.UI.Button({text:_TR("Copy to Clipboard"),width:120,handler:function(){Njl.copyToClipboard(this._errorsText)},scope:this,hidden:!Njl.isIE,
cls:"errorreporter-controls-clipboard"}),this.buttonInspect=new Ext.UI.Button({text:_TR("Inspect"),width:85,handler:this.onInspectClick,scope:this,cls:"errorreporter-controls-inspectbutton"}),{xtype:"component",style:"clear: both"}]});this.titleContent=new Ext.Container({cls:"errorreporter-title-warning",html:'<div><span style="font-size:24px;">'+_TR("An error has occurred")+'</span></div><div><span style="font-size:12px;">'+_TR("Errors in this application might cause it to work incorrectly")+"</span></div>"});
this.window=new Ext.UI.Window({title:this._defaultWindowTitle,modal:true,width:500,minWidth:500,y:175,autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:true,stateful:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",cls:"errorreporter",items:[this.titleContent,this.errorBox,this.controlsBox],fbar:[this.collapseButton,this.buttonReport=new Ext.UI.Button({text:_TR("Report to NETGEAR"),width:150,expandToText:true,style:"margin-left:10px",
handler:function(){var b="",c=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice").getSystemManager();if((c=CComQIPtr(c.getSysInfo(),"ISysInfo"))&&c!=E_FAIL)b+="Model: "+c.getModel()+"\nFirmware: "+c.getFirmwareVersion()+"\n";if(c=Ext.HelpContext)if((c=c.getContext())&&c.length>0)b+="Context: "+c[c.length-1]+"\n";if(c=this.reportCfg){c=(c.title?c.title+"\n":"")+(c.subTitle?c.subTitle+"\n":"");if(c=c.replace(/<br[\s\/]*>/g,"\n"))b+="Error:\n"+c+"\n"}window.location.href="mailto:readycloud@netgear.com?subject="+
encodeURIComponent("Customer Error Report")+"&body="+encodeURIComponent(b)},scope:this}),"->",this.buttonShowLog=new Ext.UI.Button({text:_TR("Show log"),width:85,handler:function(){this.spReporter=this.spReporter||CComQIPtr(CoCreateInstance(Njl.CLSIDS.Reporter),"IReporter");this.spReporter.Show()},scope:this}),this.buttonIgnore=new Ext.UI.Button({text:_TR("Ignore"),width:85,cancelbtn:true,handler:function(){this.window.hide()},scope:this})]});Njl.ErrorReporter.superclass.constructor.call(this);this.window.on("resize",
function(){this.errorGrid.setHeight(this.window.body.getHeight(true)-this.titleContent.getHeight()-this.controlsBox.getHeight()-this.errorGrid.paddings)},this);this.window.on("hide",function(){this.errorGrid.scroller.hide();this.setWindowTitle(this._defaultWindowTitle)},this);this.window.on("afterrender",function(){this.window.minHeight=this.window.getHeight()-this.errorBox.getHeight()-this.controlsBox.getHeight();this.window.setHeight(this.window.minHeight);this._expandSize={width:this.window.minWidth,
height:this.window.minHeight+this.errorBox.minHeight+this.controlsBox.getHeight()};this.window.resizer.enabled=false;this.window.addClass("errorreporter-no-resize");this.window.removeClass("ui-window-style1-resizable")},this);this.errorGrid.on("afterrender",function(){this.errorGrid.paddings=this.errorBox.getHeight()-this.errorGrid.getHeight();this.errorGrid.scroller=new Ext.UI.Scroller({dom:this.errorGrid.el.dom,type:"vertical",margins:{top:2,right:3,bottom:2,left:2}});this.errorGrid.scroller.reg()},
this)},setWindowTitle:function(b){this.window.setTitle(b)},updateTitle:function(b,c,d){b==_TRACE.ERROR?this.titleContent.addClass("errorreporter-title-error"):this.titleContent.removeClass("errorreporter-title-error");this.titleContent.update('<div><span style="font-size:24px;">'+(c==undefined?_TR("An error has occurred"):c)+'</span></div><div><span style="font-size:12px;">'+(d==undefined?_TR("Errors in this application might cause it to work incorrectly"):d)+"</span></div>")},onClearClick:function(){this._errorsText=
this.errorGrid.el.dom.innerHTML="";this._selectItem=undefined},onInspectClick:function(){var b=this._selectItem.data.i;if(!this.wndEditorWnd){var c=this.htmlEditor=new Ext.form.HtmlEditor({enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableFormat:false,enableLinks:false,enableLists:false,cacheSizes:false,listeners:{editmodechange:function(f,g){if(g){g=Njl.make_unquoted(b);g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("</br>","gi"),"\r\n");g=
g.replace(new RegExp("<\u0008r>","gi"),"\r\n");g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("<br/>","gi"),"\r\n");f.setRawValue(g)}else f.setValue(b)}}}),d=this.wndEditorWnd=new Ext.UI.Window({layout:"fit",items:[c],fbar:[{xtype:"uibutton",text:"Ok",acceptbtn:true,handler:function(){this.wndEditorWnd.hide()},scope:this}],height:320,width:540,minHeight:320,minWidth:540,border:true,plain:true,autoDestroy:true,bodyStyle:"padding:0px",constrainHeader:true,draggable:true,constrain:false,
minimizable:false,maximizable:true,stateful:true,shim:false,footer:false,closable:true,collapsible:false,initHidden:true,modal:true,autoHeight:false,title:_TR("Inspect Error"),cls:"errorreporter-inspect"});c.toggleSourceEdit=function(f){if(f===undefined)f=!this.sourceEditMode;this.sourceEditMode=f===true;f=this.tb.getComponent("sourceedit");if(f.pressed!==this.sourceEditMode){f.toggle(this.sourceEditMode);if(!f.xtbHidden)return}if(this.sourceEditMode){this.disableItems(true);this.syncValue();this.iframe.className=
"x-hidden";this.el.removeClass("x-hidden");this.el.dom.removeAttribute("tabIndex");this.el.focus()}else{this.initialized&&this.disableItems(this.readOnly);this.pushValue();this.iframe.className="";this.el.addClass("x-hidden");this.el.dom.setAttribute("tabIndex",-1);this.deferFocus()}this.fireEvent("editmodechange",this,this.sourceEditMode)};c.onResize=function(f,g){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(f)){var j=f-this.wrap.getFrameWidth("lr");
this.el.setWidth(j);this.tb.setWidth(j);this.iframe.style.width=Math.max(j,0)+"px"}if(Ext.isNumber(g)){j=g-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(j);if(this.iframeWrap)this.iframeWrap.dom.style.height=Math.max(j,0)+"px";if(j=this.getEditorBody())this.iframe.style.height=j.scrollHeight+"px"}}};c.on("afterrender",function(){c.iframeWrap=Ext.get(c.iframe).wrap();(new Ext.UI.Scroller({dom:c.el.dom,type:"vertical",margins:{top:2,right:3,bottom:2,left:2}})).reg();c.iframeWrap.scroller=
new Ext.UI.Scroller({dom:c.iframeWrap.dom,type:"vertical",margins:{top:2,right:3,bottom:2,left:2}});c.iframeWrap.scroller.reg();c.getToolbar().items.items[1].el.addClass("ui-button")},this);c.on("push",function(){c.setHeight(d.body.getHeight());if(!c.setStyles){c.setStyles=true;c.getEditorBody().style.overflow="hidden";Ext.EventManager.on(c.getEditorBody(),"mousewheel",function(f){c.iframeWrap.scroller.target_mouseWheel(f)},this)}},this);c.on("editmodechange",function(){c.setHeight(d.body.getHeight())},
this)}this.htmlEditor.setValue(b);this.wndEditorWnd.show()},setLongData:function(b){if(b)b.dom.innerHTML='<table cellspacing="0" class="errorreporter-errorgrid-table errorreporter-errorgrid-select-table"><tr><td class="errorreporter-errorgrid-cell"><span style="font-size: 14px">'+b.data.d+"</span><br />"+b.data.i+'</td><td class="errorreporter-errorgrid-cell errorreporter-errorgrid-cell-warning'+(b.data.s==_TRACE.ERROR?" errorreporter-errorgrid-cell-error":"")+'">'+b.data.date+"</td></tr></table>"},
setShortData:function(b){if(b)b.dom.innerHTML='<table cellspacing="0" class="errorreporter-errorgrid-table"><tr><td class="errorreporter-errorgrid-cell"><span style="font-size: 14px">'+b.data.d+'</span></td><td class="errorreporter-errorgrid-cell errorreporter-errorgrid-cell-warning'+(b.data.s==_TRACE.ERROR?" errorreporter-errorgrid-cell-error":"")+'"></td></tr></table>'}});
if(typeof Njl=="undefined")throw"Njl library is not found";Njl.namespace("dpv","dpv.utils");dpv.utils.gp=function(a,b){if(a&&CComQIPtr(a,"IXPropertyList"))return a.getProperty(b);return E_FAIL};dpv.gp=dpv.utils.gp;dpv.utils.pp=function(a,b,c){if(a&&CComQIPtr(a,"IXPropertyList"))return a.putProperty(b,c);return E_FAIL};dpv.pp=dpv.utils.pp;dpv.utils.xml2text=function(a){if(a)return a.getNodeText()};dpv.x2t=dpv.utils.xml2text;dpv.utils.xmlattr2text=function(a,b){if(a)return a.getAttributeText(b)};
dpv.xa2t=dpv.utils.xmlattr2text;Njl.namespace("dpv","dpv.api");Njl.namespace("dpv","dpv.CLSIDS");dpv.CLSIDS.Transaction="Devices.Transaction";dpv.CLSIDS.MarvelDevice="Device.Marvel";dpv.CLSIDS.Device5200="Device.5200";dpv.CLSIDS.RCApplication="RCApplication";dpv.CLSIDS.RCDevice="Device.RCDevice";Njl.namespace("dpv");dpv.INMLError=Njl.inherit(IUnknown,{INMLError:{getErrorCode:function(){return E_NOTIMPL},getErrorCause:function(){return E_NOTIMPL},getErrorDetails:function(){return E_NOTIMPL}}});
var INMLError=dpv.INMLError;Njl.namespace("dpv");dpv.IXPropertyList=Njl.inherit(IUnknown,{IXPropertyList:{getProperty:function(){return E_NOTIMPL},putProperty:function(){return E_NOTIMPL},getXml:function(){return E_NOTIMPL},putXml:function(){return E_NOTIMPL},getCount:function(){return E_NOTIMPL},rmProperty:function(){return E_NOTIMPL}}});var IXPropertyList=dpv.IXPropertyList;Njl.namespace("dpv");dpv.IXPropertyListEvents=Njl.inherit(IUnknown,{IXPropertyListEvents:{OnChanged:function(){return E_NOTIMPL}}});
var IXPropertyListEvents=dpv.IXPropertyListEvents;Njl.namespace("dpv");
dpv.IXDomNode=Njl.inherit(IUnknown,{IXDomNode:{getXDomId:function(){return E_NOTIMPL},putParent:function(){return E_NOTIMPL},getParent:function(){return E_NOTIMPL},getChildren:function(){return E_NOTIMPL},getChildByTrait:function(){return E_NOTIMPL},putRoot:function(){return E_NOTIMPL},getRoot:function(){},getXml:function(){return E_NOTIMPL},Initialize:function(){return E_NOTIMPL},appendChild:function(){return E_NOTIMPL},removeChild:function(){return E_NOTIMPL},removeAll:function(){return E_NOTIMPL},
loadFromXml:function(){return E_NOTIMPL},clone:function(){return E_NOTIMPL},Update:function(){return E_NOTIMPL},Commit:function(){return E_NOTIMPL}}});var IXDomNode=dpv.IXDomNode;Njl.namespace("dpv");
dpv.IProtocol=Njl.inherit(IUnknown,{IProtocol:{getXmlConnection:function(){return E_NOTIMPL},getTargetDevice:function(){return E_NOTIMPL},getResponse:function(){return E_NOTIMPL},getRequest:function(){return E_NOTIMPL},getPendingState:function(){return E_NOTIMPL},getLastNMLError:function(){return E_NOTIMPL},Send:function(){return E_NOTIMPL},Abort:function(){return E_NOTIMPL}}});var IProtocol=dpv.IProtocol;Njl.namespace("dpv");
dpv.IProtocolEvents=Njl.inherit(IUnknown,{IProtocolEvents:{OnNTFailed:function(){return E_NOTIMPL},OnNTReady:function(){return E_NOTIMPL},OnNTPending:function(){return E_NOTIMPL},OnFailed:function(){return E_NOTIMPL},OnReady:function(){return E_NOTIMPL},OnPending:function(){return E_NOTIMPL},OnDone:function(){return E_NOTIMPL}}});var IProtocolEvents=dpv.IProtocolEvents;Njl.namespace("dpv");dpv.IRequestRootEvents=Njl.inherit(IProtocolEvents,{IRequestRootEvents:{OnConnectionLost:function(){return E_NOTIMPL}}});
var IRequestRootEvents=dpv.IRequestRootEvents;Njl.namespace("dpv");dpv.IRequestRoot=Njl.inherit(IUnknown,{putTimeOut:function(){return E_NOTIMPL},getTimeOut:function(){return E_NOTIMPL},putSourceURL:function(){return E_NOTIMPL},getSourceURL:function(){return E_NOTIMPL},getJsonpFlag:function(){return E_NOTIMPL},putJsonpFlag:function(){return E_NOTIMPL},getJsonpURL:function(){return E_NOTIMPL},putJsonpURL:function(){return E_NOTIMPL},getXmlRequest:function(){return E_NOTIMPL}});IRequestRoot=dpv.IRequestRoot;
Njl.namespace("dpv");
dpv.IUser=Njl.inherit(IUnknown,{IUser:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},putId:function(){return E_NOTIMPL},getAccess:function(){return E_NOTIMPL},putAccess:function(){return E_NOTIMPL},getShellAccess:function(){return E_NOTIMPL},putShellAccess:function(){return E_NOTIMPL},getPassword:function(){return E_NOTIMPL},putPassword:function(){return E_NOTIMPL},getIsLocked:function(){return E_NOTIMPL},putIsLocked:function(){return E_NOTIMPL},getEmail:function(){return E_NOTIMPL},
putEmail:function(){return E_NOTIMPL},getGroupName:function(){return E_NOTIMPL},putGroupName:function(){return E_NOTIMPL},getIsDomainMember:function(){return E_NOTIMPL},putIsDomainMember:function(){return E_NOTIMPL},getHomeDirectory:function(){return E_NOTIMPL},getHomeFolder:function(){return this.xuserhf?this.xuserhf:E_FAIL},createHomeFolder:function(){return this.xuserhf?this.xuserhf:E_FAIL},getTimeMachine:function(){return this.xuserhf?this.xuserhf:E_FAIL},createTimeMachine:function(){return this.xuserhf?
this.xuserhf:E_FAIL},getGroupMembership:function(){return E_NOTIMPL},putGroupMembership:function(){return E_NOTIMPL}}});var IUser=dpv.IUser;Njl.namespace("dpv");dpv.IUserEvents=Njl.inherit(IProtocolEvents,{IUserEvents:{}});var IUserEvents=dpv.IUserEvents;Njl.namespace("dpv");
dpv.IGroup=Njl.inherit(IUnknown,{IGroup:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},putId:function(){return E_NOTIMPL},getAccess:function(){return E_NOTIMPL},putAccess:function(){return E_NOTIMPL},getUsed:function(){return E_NOTIMPL},putUsed:function(){return E_NOTIMPL},getQuota:function(){return E_NOTIMPL},putQuota:function(){return E_NOTIMPL},getSecondaryMembers:function(){return E_NOTIMPL},putSecondaryMembers:function(){return E_NOTIMPL},
getIsDomainMember:function(){return E_NOTIMPL},putIsDomainMember:function(){return E_NOTIMPL}}});var IGroup=dpv.IGroup;Njl.namespace("dpv");dpv.IGroupEvents=Njl.inherit(IProtocolEvents,{IGroupEvents:{}});var IGroupEvents=dpv.IGroupEvents;Njl.namespace("dpv");
dpv.IShareProtocolHost=Njl.inherit(IUnknown,{IShareProtocolHost:{getId:function(){return E_NOTIMPL},getAccess:function(){return E_NOTIMPL},putAccess:function(){return E_NOTIMPL},getHostName:function(){return E_NOTIMPL},putHostName:function(){return E_NOTIMPL},getRootPrivilege:function(){return E_NOTIMPL},putRootPrivilege:function(){return E_NOTIMPL}}});var IShareProtocolHost=dpv.IShareProtocolHost;Njl.namespace("dpv");
dpv.IShareProtocol=Njl.inherit(IUnknown,{IShareProtocol:{getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getProtoId:function(){return E_NOTIMPL},getAvailable:function(){return E_NOTIMPL},putAvailable:function(){return E_NOTIMPL},getGroups:function(){return E_NOTIMPL},getGroupById:function(){return E_NOTIMPL},getUsers:function(){return E_NOTIMPL},getUserById:function(){return E_NOTIMPL},getHosts:function(){return E_NOTIMPL},getDFSList:function(){return E_NOTIMPL},getStrictSync:function(){return E_NOTIMPL},
putSStrictSync:function(){return E_NOTIMPL},getShareDisplayOption:function(){return E_NOTIMPL},putShareDisplayOption:function(){return E_NOTIMPL},getSmbEncryptOption:function(){return E_NOTIMPL},putSmbEncryptOption:function(){return E_NOTIMPL},putSmbHomeEncryptOption:function(){return E_NOTIMPL},getEnableOplocks:function(){return E_NOTIMPL},putEnableOplocks:function(){return E_NOTIMPL},getEnableRecycleBin:function(){return E_NOTIMPL},putEnableRecycleBin:function(){return E_NOTIMPL},getEnableDFS:function(){return E_NOTIMPL},
putEnableDFS:function(){return E_NOTIMPL},getDefaultAccess:function(){return E_NOTIMPL},putDefaultAccess:function(){return E_NOTIMPL},getDefaultSync:function(){return E_NOTIMPL},putDefaultSync:function(){return E_NOTIMPL},getUserId:function(){return E_NOTIMPL},putUserId:function(){return E_NOTIMPL},getGroupId:function(){return E_NOTIMPL},putGroupId:function(){return E_NOTIMPL},getSquashType:function(){return E_NOTIMPL},putSquashType:function(){return E_NOTIMPL},getAllowGuestAccess:function(){return E_NOTIMPL},
putAllowGuestAccess:function(){return E_NOTIMPL},getNewFileFolderPermAutoset:function(){return E_NOTIMPL},putNewFileFolderPermAutoset:function(){return E_NOTIMPL},getAclChangeRestrictionToggle:function(){return E_NOTIMPL},putAclChangeRestrictionToggle:function(){return E_NOTIMPL},getFolderCreateGroupRights:function(){return E_NOTIMPL},putFolderCreateGroupRights:function(){return E_NOTIMPL},getFolderCreateEveryOneRights:function(){return E_NOTIMPL},putFolderCreateEveryOneRights:function(){return E_NOTIMPL},
getFileCreateGroupRights:function(){return E_NOTIMPL},putFileCreateGroupRights:function(){return E_NOTIMPL},getFileCreateEveryOneRights:function(){return E_NOTIMPL},putFileCreateEveryOneRights:function(){return E_NOTIMPL},getSpotlight:function(){return E_NOTIMPL},putSpotlight:function(){return E_NOTIMPL},getMediaType:function(){return E_NOTIMPL},putMediaType:function(){return E_NOTIMPL},getEnablePasswordProtection:function(){return E_NOTIMPL},putEnablePasswordProtection:function(){return E_NOTIMPL},
appendUser:function(){return E_NOTIMPL},addUser:function(){return E_NOTIMPL},removeUser:function(){return E_NOTIMPL},removeAllUsers:function(){return E_NOTIMPL},appendGroup:function(){return E_NOTIMPL},removeGroup:function(){return E_NOTIMPL},appendHost:function(){return E_NOTIMPL},removeHost:function(){return E_NOTIMPL},appendDFSFolder:function(){return E_NOTIMPL},removeDFSFolder:function(){return E_NOTIMPL},getEnableWebDav:function(){return E_NOTIMPL},putEnableWebDav:function(){return E_NOTIMPL},
putWebDavDefaultAccess:function(){return E_NOTIMPL},putWebDavAllowGuestAccess:function(){return E_NOTIMPL}}});var IShareProtocol=dpv.IShareProtocol;Njl.namespace("dpv");dpv.IShareProtocolEvents=Njl.inherit(IProtocolEvents,{IShareProtocolEvents:{}});var IShareProtocolEvents=dpv.IShareProtocolEvents;Njl.namespace("dpv");
dpv.IReplisyncDevice=Njl.inherit(IUnknown,{IReplisyncDevice:{getHostname:function(){return E_NOTIMPL},getModel:function(){return E_NOTIMPL},getSerial:function(){return E_NOTIMPL},getIPv4:function(){return E_NOTIMPL},getIPv6:function(){return E_NOTIMPL}}});var IReplisyncDevice=dpv.IReplisyncDevice;Njl.namespace("dpv");
dpv.IShare=Njl.inherit(IUnknown,{IShare:{putName:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},putComments:function(){return E_NOTIMPL},getComment:function(){return E_NOTIMPL},putFolderOwner:function(){return E_NOTIMPL},getVolumeId:function(){return E_NOTIMPL},putVolumeId:function(){return E_NOTIMPL},getFolderOwner:function(){return E_NOTIMPL},putNonOwnerDelete:function(){return E_NOTIMPL},getNonOwnerDelete:function(){return E_NOTIMPL},putFolderGroup:function(){return E_NOTIMPL},
getFolderGroup:function(){return E_NOTIMPL},putOwnerRights:function(){return E_NOTIMPL},getOwnerRights:function(){return E_NOTIMPL},putGroupRights:function(){return E_NOTIMPL},getGroupRights:function(){return E_NOTIMPL},putEveryoneRights:function(){return E_NOTIMPL},getEveryoneRights:function(){return E_NOTIMPL},getVisibleSnapshot:function(){return E_NOTIMPL},putVisibleSnapshot:function(){return E_NOTIMPL},getVisibleSnapFolder:function(){return E_NOTIMPL},putVisibleSnapFolder:function(){return E_NOTIMPL},
getPrevVersionsAccessible:function(){return E_NOTIMPL},putPrevVersionsAccessible:function(){return E_NOTIMPL},getProtocols:function(){return E_NOTIMPL},getProtocolByName:function(){return E_NOTIMPL},getProtocolById:function(){return E_NOTIMPL},putPath:function(){return E_NOTIMPL},getPath:function(){return E_NOTIMPL},getAvailableMB:function(){return E_NOTIMPL},getUsedMB:function(){return E_NOTIMPL},getUsedByChildrenMB:function(){return E_NOTIMPL},getUsedByDatasetMB:function(){return E_NOTIMPL},getUsedByRefReservatonMB:function(){return E_NOTIMPL},
getUsedBySnapshotsMB:function(){return E_NOTIMPL},getCompressRatio:function(){return E_NOTIMPL},getCountOfContinuousSnapshots:function(){return E_NOTIMPL},getCountOfManualSnapshots:function(){return E_NOTIMPL},getCountOfReplicateSnapshots:function(){return E_NOTIMPL},getCountOfCustomSnapshots:function(){return E_NOTIMPL},getQuotaMB:function(){return E_NOTIMPL},putQuotaMB:function(){return E_NOTIMPL},getReserveMB:function(){return E_NOTIMPL},putReserveMB:function(){return E_NOTIMPL},getRefQuotaMB:function(){return E_NOTIMPL},
putRefQuotaMB:function(){return E_NOTIMPL},getRefReserveMB:function(){return E_NOTIMPL},putRefReserveMB:function(){return E_NOTIMPL},getCompression:function(){return E_NOTIMPL},putCompression:function(){return E_NOTIMPL},getLogbias:function(){return E_NOTIMPL},putLogbias:function(){return E_NOTIMPL},getDedup:function(){return E_NOTIMPL},putDedup:function(){return E_NOTIMPL},getDedupAutoDisabling:function(){return E_NOTIMPL},putDedupAutoDisabling:function(){return E_NOTIMPL},getCloneState:function(){return E_NOTIMPL},
getFirstSnapshotCreationTime:function(){return E_NOTIMPL},getLastSnapshotCreationTime:function(){return E_NOTIMPL},getEnableProtection:function(){return E_NOTIMPL},putEnableProtection:function(){return E_NOTIMPL},getEnableSmartSnapshot:function(){return E_NOTIMPL},putEnableSmartSnapshot:function(){return E_NOTIMPL},getSnapshotScheduleInterval:function(){return E_NOTIMPL},putSnapshotScheduleInterval:function(){return E_NOTIMPL},getCustomSnapshotManagement:function(){return E_NOTIMPL},putCustomSnapshotManagement:function(){return E_NOTIMPL},
getNonEmptySnapshots:function(){return E_NOTIMPL},putNonEmptySnapshots:function(){return E_NOTIMPL},getCustomSnapshotSchedule:function(){return E_NOTIMPL},putCustomSnapshotSchedule:function(){return E_NOTIMPL},getSnapshotRetentionType:function(){return E_NOTIMPL},putSnapshotRetentionType:function(){return E_NOTIMPL},getSnapshotRetentionNumber:function(){return E_NOTIMPL},putSnapshotRetentionNumber:function(){return E_NOTIMPL},getSnapshotRetentionLifeTime:function(){return E_NOTIMPL},putSnapshotRetentionLifeTime:function(){return E_NOTIMPL},
appendProtocol:function(){return E_NOTIMPL},removeProtocol:function(){return E_NOTIMPL},getMigration:function(){return E_NOTIMPL},getExportInProgress:function(){return E_NOTIMPL},getExportPath:function(){return E_NOTIMPL},getExportProcessId:function(){return E_NOTIMPL},getImportInProgress:function(){return E_NOTIMPL},getImportPath:function(){return E_NOTIMPL},getImportProcessId:function(){return E_NOTIMPL},putEveryoneAccessRights:function(){return E_NOTIMPL},getEveryoneAccessRights:function(){return E_NOTIMPL},
getInheritAcl:function(){return E_NOTIMPL},putInheritAcl:function(){return E_NOTIMPL},getAccessAclList:function(){return E_NOTIMPL},getDefaultAclList:function(){return E_NOTIMPL},getClones:function(){return E_NOTIMPL},getUserQuotas:function(){return E_NOTIMPL},appendUserQuota:function(){return E_NOTIMPL},removeUserQuota:function(){return E_NOTIMPL},getGroupQuotas:function(){return E_NOTIMPL},appendGroupQuota:function(){return E_NOTIMPL},removeGroupQuota:function(){return E_NOTIMPL},getUseReplicate:function(){return E_NOTIMPL},
getReplicateJobId:function(){return E_NOTIMPL},getReplicateJobName:function(){return E_NOTIMPL},getIsReplicateSource:function(){return E_NOTIMPL},getUseReadyRecover:function(){return E_NOTIMPL},getSync:function(){return E_NOTIMPL},putSync:function(){return E_NOTIMPL},getBitRotProtection:function(){return E_NOTIMPL},putBitRotProtection:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},putType:function(){return E_NOTIMPL},isReadyDRShare:function(){return E_NOTIMPL},getIndexed:function(){return E_NOTIMPL},
putIndexed:function(){return E_NOTIMPL}}});var IShare=dpv.IShare;Njl.namespace("dpv");dpv.IShareEvents=Njl.inherit(IUnknown,{IShareEvents:{}});var IShareEvents=dpv.IShareEvents;Njl.namespace("dpv");
dpv.IShareManager=Njl.inherit(IUnknown,{IShareManager:{updateShares:function(){return E_NOTIMPL},updateWebShare:function(){return E_NOTIMPL},commitShares:function(){return E_NOTIMPL},commitShare:function(){return E_NOTIMPL},commitShareAcl:function(){return E_NOTIMPL},getShares:function(){return E_NOTIMPL},addShare:function(){return E_NOTIMPL},removeShare:function(){return E_NOTIMPL},migrateShare:function(){return E_NOTIMPL},ReimportSnapshots:function(){return E_NOTIMPL},updateLUNS:function(){return E_NOTIMPL},
getLUNS:function(){return E_NOTIMPL},appendLUN:function(){return E_NOTIMPL},removeLUN:function(){return E_NOTIMPL},commitLUN:function(){return E_NOTIMPL},migrateLUN:function(){return E_NOTIMPL},exportToNfs:function(){return E_NOTIMPL},importFromNfs:function(){return E_NOTIMPL},ChangePermissions:function(){return E_NOTIMPL},UnUsedShareForReplicate:function(){return E_NOTIMPL},UnUsedLUNForReplicate:function(){return E_NOTIMPL},deleteBgProcess:function(){return E_NOTIMPL},UpdateDefaultSettings:function(){return E_NOTIMPL},
getDefaultSettingBitRotProtection:function(){return E_NOTIMPL},getDefaultSettingBitRotProtectionPerformanceWarning:function(){return E_NOTIMPL},getDefaultSettingContinuousProtection:function(){return E_NOTIMPL},getDefaultSettingContinuousProtectionFrequency:function(){return E_NOTIMPL},getSharesReadyDR:function(){return E_NOTIMPL},addShareReadyDR:function(){return E_NOTIMPL},updateReadyDRDestShares:function(){return E_NOTIMPL},getReadyDRDestShares:function(){return E_NOTIMPL}}});
var IShareManager=dpv.IShareManager;Njl.namespace("dpv");dpv.IShareManagerEvents=Njl.inherit(IProtocolEvents,{IShareManagerEvents:{OnSHMigrated:function(){return E_NOTIMPL},OnSHChangeAcl:function(){return E_NOTIMPL},OnSHExported:function(){return E_NOTIMPL},OnSHImported:function(){return E_NOTIMPL}}});var IShareManagerEvents=dpv.IShareManagerEvents;Njl.namespace("dpv");
dpv.ISecurityManager=Njl.inherit(IUnknown,{ISecurityManager:{getUsers:function(){return E_NOTIMPL},getUserById:function(){return E_NOTIMPL},getADSMode:function(){return E_NOTIMPL},getADSDomain:function(){return E_NOTIMPL},getADSRealm:function(){return E_NOTIMPL},getADSOrganization:function(){return E_NOTIMPL},getADSAdminName:function(){return E_NOTIMPL},getADSAdminPwd:function(){return E_NOTIMPL},getADSController:function(){return E_NOTIMPL},getTrustedUsersVisibility:function(){return E_NOTIMPL},
getNotSyncAdsAccounts:function(){return E_NOTIMPL},getADSIDMapMode:function(){return E_NOTIMPL},addUser:function(){return E_NOTIMPL},createUser:function(){return E_NOTIMPL},AddUser:function(){return E_NOTIMPL},removeUser:function(){return E_NOTIMPL},updateUsers:function(){return E_NOTIMPL},updateUsersWithAdmin:function(){return E_NOTIMPL},applyUsers:function(){return E_NOTIMPL},commitUsers:function(){return E_NOTIMPL},getGroups:function(){return E_NOTIMPL},getGroupById:function(){return E_NOTIMPL},
updateGroups:function(){return E_NOTIMPL},commitGroups:function(){return E_NOTIMPL},addGroup:function(){return E_NOTIMPL},updateADSMode:function(){return E_NOTIMPL},commitADSMode:function(){return E_NOTIMPL},queryUsers:function(){return E_NOTIMPL},queryUsersWithAdmin:function(){return E_NOTIMPL},getQueryUsers:function(){return E_NOTIMPL},queryGroups:function(){return E_NOTIMPL},getQueryGroups:function(){return E_NOTIMPL},refreshAds:function(){return E_NOTIMPL},UpdateRCUsers:function(){return E_NOTIMPL},
getRCUsers:function(){return E_NOTIMPL},UpdateDefaultUserProfile:function(){return E_NOTIMPL},getLoginUserName:function(){return E_NOTIMPL},UpdateLoginUserName:function(){return E_NOTIMPL},getDefaultUserProfile:function(){return E_NOTIMPL},CommitDefaultUserProfile:function(){return E_NOTIMPL},queryUsersWithTimeMachine:function(){return E_NOTIMPL},removeUserTimeMachine:function(){return E_NOTIMPL},queryUsersWithHomeFolder:function(){return E_NOTIMPL},queryUsersWithHFProtectOrAccess:function(){return E_NOTIMPL},
backupADSIDMap:function(){return E_NOTIMPL}}});var ISecurityManager=dpv.ISecurityManager;Njl.namespace("dpv");dpv.ISecurityManagerEvents=Njl.inherit(IProtocolEvents,{ISecurityManagerEvents:{}});var ISecurityManagerEvents=dpv.ISecurityManagerEvents;Njl.namespace("dpv");
dpv.IDevice=Njl.inherit(IUnknown,{IDevice:{getWebEventSink:function(){return E_NOTIMPL},getReplicateSystem:function(){return E_NOTIMPL},getShareManager:function(){return E_NOTIMPL},getSecurityManager:function(){return E_NOTIMPL},getFSManager:function(){return E_NOTIMPL},getNetworkManager:function(){return E_NOTIMPL},getHealthManager:function(){return E_NOTIMPL},getSystemManager:function(){return E_NOTIMPL},getBackupManager:function(){return E_NOTIMPL},getAddonsManager:function(){return E_NOTIMPL},
getAlbumManager:function(){return E_NOTIMPL},getXRaidManager:function(){return E_NOTIMPL},getSystemServiceManager:function(){return E_NOTIMPL},putSourceFSURL:function(){return E_NOTIMPL},getSourceFSURL:function(){return E_NOTIMPL},putSourcePHURL:function(){return E_NOTIMPL},getSourcePHURL:function(){return E_NOTIMPL},putSourceRCVURL:function(){return E_NOTIMPL},getSourceRCVURL:function(){return E_NOTIMPL},putSourceFWURL:function(){return E_NOTIMPL},getSourceFWURL:function(){return E_NOTIMPL},getZFSVolumesManager:function(){return E_NOTIMPL},
getZFSDisksManager:function(){return E_NOTIMPL},getZFSSnapshotsManager:function(){return E_NOTIMPL},getISCSIManager:function(){return E_NOTIMPL},getFirmwareManager:function(){return E_NOTIMPL},getStatsManager:function(){return E_NOTIMPL},getVolumeScheduleManager:function(){return E_NOTIMPL},getHFSnapshotsManager:function(){return E_NOTIMPL},getNetworkVLANManager:function(){return E_NOTIMPL},getNetworkProxyManager:function(){return E_NOTIMPL},getSSHKeyManager:function(){return E_NOTIMPL},updateDeviceState:function(){return E_NOTIMPL},
commitDeviceState:function(){return E_NOTIMPL},getDeviceState:function(){return E_NOTIMPL},shutdown:function(){return E_NOTIMPL},startWebEventSink:function(){return E_NOTIMPL},stopWebEventSink:function(){return E_NOTIMPL},isStartedWebEventSink:function(){return E_NOTIMPL},reboot:function(){return E_NOTIMPL},register:function(){return E_NOTIMPL},installFirmwareAftreUpload:function(){return E_NOTIMPL},ejectVolume:function(){return E_NOTIMPL},shutdownEDADevice:function(){return E_NOTIMPL}}});
var IDevice=dpv.IDevice;Njl.namespace("dpv");dpv.ISSHEvents=Njl.inherit(IProtocolEvents,{ISSHEvents:{}});var ISSHEvents=dpv.ISSHEvents;
dpv.ISSH=Njl.inherit(IUnknown,{ISSH:{IsDirty:function(){return E_NOTIMPL},IsMarkedToDelete:function(){return E_NOTIMPL},MarkToDelete:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getUserId:function(){return E_NOTIMPL},putUserId:function(){return E_NOTIMPL},getComment:function(){return E_NOTIMPL},getTitle:function(){return E_NOTIMPL},putTitle:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},getFingerPrint:function(){return E_NOTIMPL},getKey:function(){return E_NOTIMPL},
getReadOnly:function(){return E_NOTIMPL},putReadOnly:function(){return E_NOTIMPL},getFilePath:function(){return E_NOTIMPL},putFilePath:function(){return E_NOTIMPL}}});var ISSH=dpv.ISSH;Njl.namespace("dpv");dpv.ISSHManager=Njl.inherit(IUnknown,{ISSHManager:{createKey:function(){return E_NOTIMPL},updateKeys:function(){return E_NOTIMPL},getKeys:function(){return E_NOTIMPL},getKeyById:function(){return E_NOTIMPL},deleteKey:function(){return E_NOTIMPL},editKey:function(){return E_NOTIMPL},addKey:function(){return E_NOTIMPL}}});
var ISSHManager=dpv.ISSHManager;Njl.namespace("dpv");dpv.ISSHManagerEvents=Njl.inherit(IProtocolEvents,{ISSHManagerEvents:{}});var ISSHManagerEvents=dpv.ISSHManagerEvents;Njl.namespace("dpv");dpv.IDeviceState=Njl.inherit(IUnknown,{IDeviceState:{getFirstLaunchState:function(){return E_NOTIMPL},putFirstLaunchState:function(){return E_NOTIMPL},getDropboxV1Flag:function(){return E_NOTIMPL}}});var IDeviceState=dpv.IDeviceState;Njl.namespace("dpv");
dpv.IDeviceEvents=Njl.inherit(IRequestRootEvents,{IDeviceEvents:{OnDeviceHalt:function(){return E_NOTIMPL},OnDeviceReboot:function(){return E_NOTIMPL}}});var IDeviceEvents=dpv.IDeviceEvents;Njl.namespace("dpv");dpv.IFSVolume=Njl.inherit(IUnknown,{IFSVolume:{getTotalSize:function(){return E_NOTIMPL},getFreeSize:function(){return E_NOTIMPL},getMountPoint:function(){return E_NOTIMPL},getDescription:function(){return E_NOTIMPL},getFSFormat:function(){return E_NOTIMPL}}});var IFSVolume=dpv.IFSVolume;Njl.namespace("dpv");
dpv.IFSAction=Njl.inherit(IUnknown,{IFSAction:{getId:function(){return E_NOTIMPL},getMethod:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getElapsedSeconds:function(){return E_NOTIMPL},getRemainingSeconds:function(){return E_NOTIMPL},getProgressPercent:function(){return E_NOTIMPL},getSourceFolder:function(){return E_NOTIMPL},getDestinationFolder:function(){return E_NOTIMPL}}});var IFSAction=dpv.IFSAction;Njl.namespace("dpv");
dpv.IFSManager=Njl.inherit(IUnknown,{IFSManager:{getFsTreeNode:function(){return E_NOTIMPL},makeFolder:function(){return E_NOTIMPL},deleteFolder:function(){return E_NOTIMPL},removeFolder:function(){return E_NOTIMPL},moveFolder:function(){return E_NOTIMPL},renameFolder:function(){return E_NOTIMPL},abortFSAction:function(){return E_NOTIMPL},updateVolumes:function(){return E_NOTIMPL},getVolumes:function(){return E_NOTIMPL},updateFilePreview:function(){return E_NOTIMPL},getFSSnapView:function(){return E_NOTIMPL},
getHFSnapView:function(){return E_NOTIMPL},UpdateSnapFilePreview:function(){return E_NOTIMPL},UpdateHFSnapFilePreview:function(){return E_NOTIMPL},UpdateVersionFilePreview:function(){return E_NOTIMPL},RestoreSnapFSItem:function(){return E_NOTIMPL},RestoreSnapHFFSItem:function(){return E_NOTIMPL},getFSVersions:function(){return E_NOTIMPL},RestoreFSVersion:function(){return E_NOTIMPL},getHFFSVersions:function(){return E_NOTIMPL},RestoreHFFSVersion:function(){return E_NOTIMPL},search:function(){return E_NOTIMPL}}});
var IFSManager=dpv.IFSManager;Njl.namespace("dpv");
dpv.IFSManagerEvents=Njl.inherit(IProtocolEvents,{IFSManagerEvents:{OnFSTNodeReady:function(){return E_NOTIMPL},OnFSTPreviewReady:function(){return E_NOTIMPL},OnFSTUsbEject:function(){return E_NOTIMPL},OnFSTUsbPlug:function(){return E_NOTIMPL},OnFSSnapViewReady:function(){return E_NOTIMPL},OnFSHFSnapViewReady:function(){return E_NOTIMPL},OnFSSnapFilePreviewReady:function(){return E_NOTIMPL},OnFSHFSnapFilePreviewReady:function(){return E_NOTIMPL},OnFSActionsUpdate:function(){return E_NOTIMPL},OnFSVersionsReady:function(){return E_NOTIMPL},
OnFSSearchReady:function(){return E_NOTIMPL}}});var IFSManagerEvents=dpv.IFSManagerEvents;Njl.namespace("dpv");
dpv.INetworkManager=Njl.inherit(IUnknown,{INetworkManager:{updateNetworkInfo:function(){return E_NOTIMPL},updateNICS:function(){return E_NOTIMPL},updateBONDS:function(){return E_NOTIMPL},getDNSManager:function(){return E_NOTIMPL},getInterfaces:function(){return E_NOTIMPL},getWorkgroup:function(){return E_NOTIMPL},putWorkgroup:function(){return E_NOTIMPL},getGateway:function(){return E_NOTIMPL},putGateway:function(){return E_NOTIMPL},getHostname:function(){return E_NOTIMPL},putHostname:function(){return E_NOTIMPL},
commitNetworkInfo:function(){return E_NOTIMPL},getAutoDHCP:function(){return E_NOTIMPL},putAutoDHCP:function(){return E_NOTIMPL},getNICS:function(){return E_NOTIMPL},commitNIC:function(){return E_NOTIMPL},AppendVNIC:function(){return E_NOTIMPL},RemoveVNIC:function(){return E_NOTIMPL},commitVNIC:function(){return E_NOTIMPL},getBONDS:function(){return E_NOTIMPL},AppendBOND:function(){return E_NOTIMPL},RemoveBOND:function(){return E_NOTIMPL},commitBOND:function(){return E_NOTIMPL},AppendBONDNIC:function(){return E_NOTIMPL},
RemoveBONDNIC:function(){return E_NOTIMPL}}});var INetworkManager=dpv.INetworkManager;Njl.namespace("dpv");dpv.INetworkInterfaceEvents=Njl.inherit(IProtocolEvents,{INetworkInterfaceEvents:{}});var INetworkInterfaceEvents=dpv.INetworkInterfaceEvents;Njl.namespace("dpv");
dpv.INetworkInterface=Njl.inherit(IUnknown,{INetworkInterface:{renew:function(){return E_NOTIMPL},getLinkStatus:function(){return E_NOTIMPL},getIPAssignment:function(){return E_NOTIMPL},putIPAssignment:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getNetMask:function(){return E_NOTIMPL},putNetMask:function(){return E_NOTIMPL},getBroadcastIP:function(){return E_NOTIMPL},putBroadcastIP:function(){return E_NOTIMPL},getMTU:function(){return E_NOTIMPL},putMTU:function(){return E_NOTIMPL},
getMAC:function(){return E_NOTIMPL},getIP:function(){return E_NOTIMPL},putIP:function(){return E_NOTIMPL}}});var INetworkInterface=dpv.INetworkInterface;Njl.namespace("dpv");dpv.INetworkManagerEvents=Njl.inherit(IProtocolEvents,{INetworkManagerEvents:{}});var INetworkManagerEvents=dpv.INetworkManagerEvents;Njl.namespace("dpv");dpv.INetworkDNS=Njl.inherit(IUnknown,{INetworkDNS:{getIP:function(){return E_NOTIMPL},putIP:function(){return E_NOTIMPL},getPriority:function(){return E_NOTIMPL},putPriority:function(){return E_NOTIMPL}}});
var INetworkDNS=dpv.INetworkDNS;Njl.namespace("dpv");dpv.INetworkDNSEvents=Njl.inherit(IProtocolEvents,{INetworkDNSEvents:{}});var INetworkDNSEvents=dpv.INetworkDNSEvents;Njl.namespace("dpv");dpv.INetworkDNSManager=Njl.inherit(IUnknown,{INetworkDNSManager:{getDNSRecords:function(){return E_NOTIMPL},getDomain:function(){return E_NOTIMPL},putDomain:function(){return E_NOTIMPL},appendDNSRecord:function(){return E_NOTIMPL},removeDNSRecord:function(){return E_NOTIMPL}}});var INetworkDNSManager=dpv.INetworkDNSManager;
Njl.namespace("dpv");dpv.INetworkDNSManager=Njl.inherit(IProtocolEvents,{INetworkDNSManager:{}});INetworkDNSManager=dpv.INetworkDNSManager;Njl.namespace("dpv");dpv.IHealthDisk=Njl.inherit(IUnknown,{IHealthDisk:{getLabel:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getResourceId:function(){return E_NOTIMPL},getModel:function(){return E_NOTIMPL},getTemperature:function(){return E_NOTIMPL},getCapacity:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL}}});
var IHealthDisk=dpv.IHealthDisk;dpv.IHealthFan=Njl.inherit(IUnknown,{IHealthFan:{getLabel:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getSpeed:function(){return E_NOTIMPL},getMinNormalSpeed:function(){return E_NOTIMPL},getMaxNormalSpeed:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL}}});var IHealthFan=dpv.IHealthFan;
dpv.IHealthTemp=Njl.inherit(IUnknown,{IHealthTemp:{getLabel:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getValue:function(){return E_NOTIMPL},getMinValue:function(){return E_NOTIMPL},getMaxValue:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL}}});var IHealthTemp=dpv.IHealthTemp;
dpv.IHealthUPS=Njl.inherit(IUnknown,{IHealthUPS:{getLabel:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getRawStatus:function(){return E_NOTIMPL},getModel:function(){return E_NOTIMPL},getCharge:function(){return E_NOTIMPL},getRuntime:function(){return E_NOTIMPL}}});var IHealthUPS=dpv.IHealthUPS;
dpv.IHealthSumTemp=Njl.inherit(IUnknown,{IHealthSumTemp:{getLabel:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getValue:function(){return E_NOTIMPL}}});var IHealthSumTemp=dpv.IHealthSumTemp;dpv.IHealthVolt=Njl.inherit(IUnknown,{IHealthVolt:{getLabel:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getValue:function(){return E_NOTIMPL}}});var IHealthVolt=dpv.IHealthVolt;
dpv.IHealthPSU=Njl.inherit(IUnknown,{IHealthPSU:{getLabel:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL}}});var IHealthPSU=dpv.IHealthPSU;
dpv.IHealthDiskSmartInfo=Njl.inherit(IUnknown,{IHealthDiskSmartInfo:{getDevice:function(){return E_NOTIMPL},getController:function(){},getChannel:function(){},getModel:function(){},getSerial:function(){},getFirmware:function(){},getClass:function(){},getRPM:function(){},getSectors:function(){},getPool:function(){},getPoolType:function(){},getATAErrorCount:function(){},getReallocatedSectors:function(){},getReallocationEvents:function(){},getSpinRetryCount:function(){},getEndToEndErrors:function(){},
getCommandTimeouts:function(){},getCurrentPendingSectorCount:function(){},getUncorrectableSectorCount:function(){},getTemperature:function(){},getStartStopCount:function(){},getPowerOnHours:function(){},getPowerCycleCount:function(){},getLoadCycleCount:function(){}}});var IHealthDiskSmartInfo=dpv.IHealthDiskSmartInfo;
dpv.IHealthEnclosure=Njl.inherit(IUnknown,{IHealthEnclosure:{getPortLabel:function(){return E_NOTIMPL},getDisksHealth:function(){return E_NOTIMPL},getFansHealth:function(){return E_NOTIMPL},getTemperatureHealth:function(){return E_NOTIMPL},getUPSHealth:function(){return E_NOTIMPL},getVoltageHealth:function(){return E_NOTIMPL},getPSUHealth:function(){return E_NOTIMPL}}});var IHealthEnclosure=dpv.IHealthEnclosure;Njl.namespace("dpv");
dpv.IHealthManager=Njl.inherit(IUnknown,{IHealthManager:{updateHealth:function(){return E_NOTIMPL},getDisksHealth:function(){return E_NOTIMPL},getFansHealth:function(){return E_NOTIMPL},getTemperatureHealth:function(){return E_NOTIMPL},getUPSHealth:function(){return E_NOTIMPL},getVoltageHealth:function(){return E_NOTIMPL},getPSUHealth:function(){return E_NOTIMPL},getEnclosures:function(){return E_NOTIMPL}}});var IHealthManager=dpv.IHealthManager;Njl.namespace("dpv");
dpv.IHealthManagerEvents=Njl.inherit(IProtocolEvents,{IHealthManagerEvents:{OnHealthUpdate:function(){return E_NOTIMPL}}});var IHealthManagerEvents=dpv.IHealthManagerEvents;Njl.namespace("dpv");
dpv.ILog=Njl.inherit(IUnknown,{ILog:{getMessage:function(){return E_NOTIMPL},getDate:function(){return E_NOTIMPL},getLogTime:function(){return E_NOTIMPL},getSeverity:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL},getTime:function(){return E_NOTIMPL},getLocalTime:function(){return E_NOTIMPL},getCategory:function(){return E_NOTIMPL},getMessageTag:function(){return E_NOTIMPL},getArgs:function(){return E_NOTIMPL}}});var ILog=dpv.ILog;Njl.namespace("dpv");
dpv.ILogManager=Njl.inherit(IUnknown,{ILogManager:{updateLogs:function(){return E_NOTIMPL},cleanLogs:function(){return E_NOTIMPL},downloadAllLogs:function(){return E_NOTIMPL},QueryLogs:function(){return E_NOTIMPL},getLogs:function(){return E_NOTIMPL},getLogsCount:function(){return E_NOTIMPL},getTotalLogsCount:function(){return E_NOTIMPL}}});var ILogManager=dpv.ILogManager;Njl.namespace("dpv");dpv.ILogManagerEvents=Njl.inherit(IProtocolEvents,{ILogManagerEvents:{OnDeviceAlarm:function(){return E_NOTIMPL}}});
var ILogManagerEvents=dpv.ILogManagerEvents;Njl.namespace("dpv");
dpv.ISysManager=Njl.inherit(IUnknown,{ISysManager:{updateClock:function(){return E_NOTIMPL},RecoverPassword:function(){return E_NOTIMPL},commitClock:function(){return E_NOTIMPL},updateTimeZone:function(){return E_NOTIMPL},updateSysInfo:function(){return E_NOTIMPL},commitTimeZone:function(){return E_NOTIMPL},checkForUpdate:function(){return E_NOTIMPL},SetAdminPassword:function(){return E_NOTIMPL},PerfomFactoryDefault:function(){return E_NOTIMPL},PerfomeFirmwareUpdateWithVersion:function(){return E_NOTIMPL},
updateNTPInfo:function(){return E_NOTIMPL},commitNTPInfo:function(){return E_NOTIMPL},setMyPassword:function(){return E_NOTIMPL},getClock:function(){return E_NOTIMPL},getTimeZone:function(){return E_NOTIMPL},getNTPInfo:function(){return E_NOTIMPL},getPowerManager:function(){return E_NOTIMPL},getUpdateManager:function(){return E_NOTIMPL},getAlertsManager:function(){return E_NOTIMPL},getLocaleManager:function(){return E_NOTIMPL},getSysInfo:function(){return E_NOTIMPL},getFirmwareInfo:function(){return E_NOTIMPL},
updateChart:function(){return E_NOTIMPL},getChart:function(){return E_NOTIMPL},restoreSysConfig:function(){return E_NOTIMPL},updateDiskcache:function(){return E_NOTIMPL},commitDiskcache:function(){return E_NOTIMPL},getDiskcacheStatus:function(){return E_NOTIMPL},updateSupportedFeatures:function(){return E_NOTIMPL},getSupportStatsVolume:function(){return E_NOTIMPL},getSupportStatsNetwork:function(){return E_NOTIMPL},getSupportStatsUtilization:function(){return E_NOTIMPL},getSupportStatsTemperature:function(){return E_NOTIMPL},
getSupportBackupButton:function(){return E_NOTIMPL},getSupportReadyDR:function(){return E_NOTIMPL},getSupportXRAID:function(){return E_NOTIMPL},getSupportFileSearch:function(){return E_NOTIMPL},getSupportLunOver8TB:function(){return E_NOTIMPL},updateDeviceState:function(){return E_NOTIMPL},commitDeviceState:function(){return E_NOTIMPL},getDeviceState:function(){return E_NOTIMPL},updateCloudOwner:function(){return E_NOTIMPL},updateInsightAgent:function(){return E_NOTIMPL},registerCloudOwner:function(){return E_NOTIMPL},
removeCloudOwner:function(){return E_NOTIMPL},cancelCloudOwner:function(){return E_NOTIMPL},getCloudOwner:function(){return E_NOTIMPL},UpdateCloudServer:function(){return E_NOTIMPL},CommitCloudServer:function(){return E_NOTIMPL},getCloudServerAddress:function(){return E_NOTIMPL},putCloudServerAddress:function(){return E_NOTIMPL},reboot:function(){return E_NOTIMPL},UpdateHomeFolderOptions:function(){return E_NOTIMPL},CommitHomeFolderOptions:function(){return E_NOTIMPL},getHomeFolderOptions:function(){return E_NOTIMPL},
updateFanConfig:function(){return E_NOTIMPL},commitFanConfig:function(){return E_NOTIMPL},getFanConfig:function(){return E_NOTIMPL}}});var ISysManager=dpv.ISysManager;Njl.namespace("dpv");dpv.ISysManagerEvents=Njl.inherit(IProtocolEvents,{ISysManagerEvents:{OnSysReboot:function(){return E_NOTIMPL}}});var ISysManagerEvents=dpv.ISysManagerEvents;Njl.namespace("dpv");
dpv.ISysClock=Njl.inherit(IUnknown,{ISysClock:{getYear:function(){return E_NOTIMPL},getMonth:function(){return E_NOTIMPL},getDay:function(){return E_NOTIMPL},getHour:function(){return E_NOTIMPL},getMinute:function(){return E_NOTIMPL},getSecond:function(){return E_NOTIMPL},putYear:function(){return E_NOTIMPL},putMonth:function(){return E_NOTIMPL},putDay:function(){return E_NOTIMPL},putHour:function(){return E_NOTIMPL},putMinute:function(){return E_NOTIMPL},putSecond:function(){return E_NOTIMPL}}});
var ISysClock=dpv.ISysClock;Njl.namespace("dpv");dpv.ISysTZone=Njl.inherit(IUnknown,{ISysTZone:{getTimeZoneName:function(){return E_NOTIMPL},putTimeZoneName:function(){return E_NOTIMPL}}});var ISysTZone=dpv.ISysTZone;Njl.namespace("dpv");
dpv.ISysLocaleManager=Njl.inherit(IUnknown,{ISysLocaleManager:{updateDictionary:function(){return E_NOTIMPL},tr:function(){return E_NOTIMPL},updateLocale:function(){return E_NOTIMPL},commitLocale:function(){return E_NOTIMPL},getLangs:function(){return E_NOTIMPL},getLocale:function(){return E_NOTIMPL},getAutoLocale:function(){return E_NOTIMPL},putLocale:function(){return E_NOTIMPL},getLocaleSpell:function(){return E_NOTIMPL},getDictionary:function(){return E_NOTIMPL}}});var ISysLocaleManager=dpv.ISysLocaleManager;
Njl.namespace("dpv");dpv.ISysLocaleManagerEvents=Njl.inherit(IProtocolEvents,{ISysLocaleManagerEvents:{OnLanguageChanged:function(){return E_NOTIMPL}}});var ISysLocaleManagerEvents=dpv.ISysLocaleManagerEvents;Njl.namespace("dpv");dpv.ISysLocale=Njl.inherit(IUnknown,{ISysLocale:{getLocale:function(){return E_NOTIMPL},putLocale:function(){return E_NOTIMPL},getAutoLocale:function(){return E_NOTIMPL}}});var ISysLocale=dpv.ISysLocale;Njl.namespace("dpv");
dpv.ISysLocaleEvents=Njl.inherit(IProtocolEvents,{ISysLocaleEvents:{}});var ISysLocaleEvents=dpv.ISysLocaleEvents;Njl.namespace("dpv");dpv.ISysDongleBluetooth=Njl.inherit(IUnknown,{ISysDongleBluetooth:{getAddress:function(){return E_NOTIMPL},updateStatus:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL}}});var ISysDongleBluetooth=dpv.ISysDongleBluetooth;dpv.ISysDongleBluetoothEvents=Njl.inherit(IProtocolEvents,{ISysDongleBluetoothEvents:{}});var ISysDongleBluetoothEvents=dpv.ISysDongleBluetoothEvents;
Njl.namespace("dpv");dpv.ISysDongleBluetoothState=Njl.inherit(IUnknown,{ISysDongleBluetoothState:{getState:function(){return E_NOTIMPL},getClientAddress:function(){return E_NOTIMPL},getPairingCode:function(){return E_NOTIMPL}}});var ISysDongleBluetoothState=dpv.ISysDongleBluetoothState;Njl.namespace("dpv");dpv.ISysDictionary=Njl.inherit(IUnknown,{ISysDictionary:{tr:function(){return E_NOTIMPL},getLangs:function(){return E_NOTIMPL},getLangSpell:function(){return E_NOTIMPL},getGaps:function(){return E_NOTIMPL}}});
var ISysDictionary=dpv.ISysDictionary;Njl.namespace("dpv");dpv.ISysDictionaryEvents=Njl.inherit(IProtocolEvents,{ISysDictionaryEvents:{}});var ISysDictionaryEvents=dpv.ISysDictionaryEvents;Njl.namespace("dpv");
dpv.ISysAlertsManager=Njl.inherit(IUnknown,{ISysAlertsManager:{updateSMTPProviders:function(){return E_NOTIMPL},updateConfig:function(){return E_NOTIMPL},updateSettings:function(){return E_NOTIMPL},commitConfig:function(){return E_NOTIMPL},commitSettings:function(){return E_NOTIMPL},sendTestMessage:function(){return E_NOTIMPL},getSMTPProviders:function(){return E_NOTIMPL},getConfig:function(){return E_NOTIMPL},getSettings:function(){return E_NOTIMPL},updateSMTPServers:function(){return E_NOTIMPL},
getSMTPServers:function(){return E_NOTIMPL}}});var ISysAlertsManager=dpv.ISysAlertsManager;Njl.namespace("dpv");dpv.ISysAlertsManagerEvents=Njl.inherit(IProtocolEvents,{ISysAlertsManagerEvents:{}});var ISysAlertsManagerEvents=dpv.ISysAlertsManagerEvents;Njl.namespace("dpv");
dpv.ISysAlertsConfig=Njl.inherit(IUnknown,{ISysAlertsConfig:{getContact:function(){return E_NOTIMPL},getProvider:function(){return E_NOTIMPL},getUser:function(){return E_NOTIMPL},getPassword:function(){return E_NOTIMPL},getServer:function(){return E_NOTIMPL},getPort:function(){return E_NOTIMPL},getFromName:function(){return E_NOTIMPL},getTLS:function(){return E_NOTIMPL},getAuth:function(){return E_NOTIMPL},putContact:function(){return E_NOTIMPL},putProvider:function(){return E_NOTIMPL},putUser:function(){return E_NOTIMPL},
putPassword:function(){return E_NOTIMPL},putServer:function(){return E_NOTIMPL},putPort:function(){return E_NOTIMPL},putFromName:function(){return E_NOTIMPL},putTLS:function(){return E_NOTIMPL}}});var ISysAlertsConfig=dpv.ISysAlertsConfig;Njl.namespace("dpv");
dpv.ISysAlertsSettings=Njl.inherit(IUnknown,{ISysAlertsSettings:{getOffonDiskFail:function(){return E_NOTIMPL},getOffonDiskOverheat:function(){return E_NOTIMPL},getMonitorVolume:function(){return E_NOTIMPL},getMonitorDiskFailure:function(){return E_NOTIMPL},getMonitorFan:function(){return E_NOTIMPL},getMonitorPower:function(){return E_NOTIMPL},getMonitorBoardTemp:function(){return E_NOTIMPL},getMonitorUPS:function(){return E_NOTIMPL},getMonitorDiskFull:function(){return E_NOTIMPL},getMonitorDiskTemp:function(){return E_NOTIMPL},
getMonitorAntivirus:function(){return E_NOTIMPL},getMonitorQuotaExceed:function(){return E_NOTIMPL},getMonitorBoardTemp:function(){return E_NOTIMPL},getMonitorPSU:function(){return E_NOTIMPL},putOffonDiskFail:function(){return E_NOTIMPL},putOffonDiskOverheat:function(){return E_NOTIMPL},putMonitorVolume:function(){return E_NOTIMPL},putMonitorDiskFailure:function(){return E_NOTIMPL},putMonitorFan:function(){return E_NOTIMPL},putMonitorPower:function(){return E_NOTIMPL},putMonitorBoardTemp:function(){return E_NOTIMPL},
putMonitorUPS:function(){return E_NOTIMPL},putMonitorDiskFull:function(){return E_NOTIMPL},putMonitorDiskTemp:function(){return E_NOTIMPL},putMonitorAntivirus:function(){return E_NOTIMPL},putMonitorQuotaExceed:function(){return E_NOTIMPL},putMonitorBoardTemp:function(){return E_NOTIMPL},putMonitorPSU:function(){return E_NOTIMPL}}});var ISysAlertsSettings=dpv.ISysAlertsSettings;Njl.namespace("dpv");
dpv.ISysAlertsSMTPProvider=Njl.inherit(IUnknown,{ISysAlertsSMTPProvider:{getName:function(){return E_NOTIMPL},getServer:function(){return E_NOTIMPL},getDomain:function(){return E_NOTIMPL},getPort:function(){return E_NOTIMPL},getTLS:function(){return E_NOTIMPL},getHelpURL:function(){return E_NOTIMPL}}});var ISysAlertsSMTPProvider=dpv.ISysAlertsSMTPProvider;Njl.namespace("dpv");
dpv.ISysAlertsSMTPServer=Njl.inherit(IUnknown,{ISysAlertsSMTPServer:{getHostName:function(){return E_NOTIMPL},getPort:function(){return E_NOTIMPL},getSocketType:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL},getAuthentication:function(){return E_NOTIMPL}}});var ISysAlertsSMTPServer=dpv.ISysAlertsSMTPServer;Njl.namespace("dpv");
dpv.ISysPowerManager=Njl.inherit(IUnknown,{ISysPowerManager:{updatePowerSchedule:function(){return E_NOTIMPL},commitPowerSchedule:function(){return E_NOTIMPL},getActions:function(){return E_NOTIMPL},getSpindownActions:function(){return E_NOTIMPL},getEnablePowerSchedule:function(){return E_NOTIMPL},EnablePowerSchedule:function(){return E_NOTIMPL},appendAction:function(){return E_NOTIMPL},appendActions:function(){return E_NOTIMPL},removeAction:function(){return E_NOTIMPL},removeActions:function(){return E_NOTIMPL},
removeAllActions:function(){return E_NOTIMPL},appendSpindownAction:function(){return E_NOTIMPL},appendSpindownActions:function(){return E_NOTIMPL},removeSpindownAllActions:function(){return E_NOTIMPL},updateWakeOnLAN:function(){return E_NOTIMPL},commitWakeOnLAN:function(){return E_NOTIMPL},getWakeOnLanStatus:function(){return E_NOTIMPL},putWakeOnLanStatus:function(){return E_NOTIMPL},updateSpindown:function(){return E_NOTIMPL},commitSpindown:function(){return E_NOTIMPL},getSpindownStatus:function(){return E_NOTIMPL},
putSpindownStatus:function(){return E_NOTIMPL},getSpindownTime:function(){return E_NOTIMPL},putSpindownTime:function(){return E_NOTIMPL}}});var ISysPowerManager=dpv.ISysPowerManager;Njl.namespace("dpv");dpv.ISysPowerManagerEvents=Njl.inherit(IProtocolEvents,{ISysPowerManagerEvents:{}});var ISysPowerManagerEvents=dpv.ISysPowerManagerEvents;Njl.namespace("dpv");
dpv.ISysPowerAction=Njl.inherit(IUnknown,{ISysPowerAction:{getDayOfWeek:function(){return E_NOTIMPL},getHour:function(){return E_NOTIMPL},getMinute:function(){return E_NOTIMPL},getAction:function(){return E_NOTIMPL},putDayOfWeek:function(){return E_NOTIMPL},putHour:function(){return E_NOTIMPL},putMinute:function(){return E_NOTIMPL},putAction:function(){return E_NOTIMPL}}});var ISysPowerAction=dpv.ISysPowerAction;Njl.namespace("dpv");
dpv.ISysInfo=Njl.inherit(IUnknown,{ISysInfo:{getModel:function(){return E_NOTIMPL},getSerial:function(){return E_NOTIMPL},getHostname:function(){return E_NOTIMPL},getFirmwareName:function(){return E_NOTIMPL},getFirmwareVersion:function(){return E_NOTIMPL},getFirmwareTime:function(){return E_NOTIMPL},getMemorySize:function(){return E_NOTIMPL},getCPUNumber:function(){return E_NOTIMPL},getCPUFrequency:function(){return E_NOTIMPL},getMACAddress:function(){return E_NOTIMPL},getRaidLevel:function(){return E_NOTIMPL},
getHDDVendor:function(){return E_NOTIMPL},getHDDModel:function(){return E_NOTIMPL},getHDDSerial:function(){return E_NOTIMPL},getHDDFirmware:function(){return E_NOTIMPL},getRegistered:function(){return E_NOTIMPL},getRaidStatus:function(){return E_NOTIMPL},getRaidPercentage:function(){return E_NOTIMPL},getRaidSpeed:function(){return E_NOTIMPL},getRaidCompletionTime:function(){return E_NOTIMPL},getRackmount:function(){return E_NOTIMPL},getSafeMode:function(){return E_NOTIMPL},getOSRootCorrupt:function(){return E_NOTIMPL},
getReadOnlyDataVolumes:function(){return E_NOTIMPL}}});var ISysInfo=dpv.ISysInfo;Njl.namespace("dpv");dpv.ISysFirmwareInfo=Njl.inherit(IUnknown,{ISysFirmwareInfo:{getUpdateURL:function(){return E_NOTIMPL},getDescription:function(){return E_NOTIMPL},getVersion:function(){return E_NOTIMPL},getSize:function(){return E_NOTIMPL},getTime:function(){return E_NOTIMPL}}});var ISysFirmwareInfo=dpv.ISysFirmwareInfo;Njl.namespace("dpv");
dpv.IBackup=Njl.inherit(IUnknown,{IBackup:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getStatusDate:function(){return E_NOTIMPL},getStatusResult:function(){return E_NOTIMPL},getSourceType:function(){return E_NOTIMPL},putSourceType:function(){return E_NOTIMPL},getSourceShareNameOrProtocol:function(){return E_NOTIMPL},putSourceShareNameOrProtocol:function(){return E_NOTIMPL},getSourcePath:function(){return E_NOTIMPL},
putSourcePath:function(){return E_NOTIMPL},getSourceLogin:function(){return E_NOTIMPL},putSourceLogin:function(){return E_NOTIMPL},getSourcePassword:function(){return E_NOTIMPL},putSourcePassword:function(){return E_NOTIMPL},getSourcePort:function(){return E_NOTIMPL},putSourcePort:function(){return E_NOTIMPL},getSourceEject:function(){return E_NOTIMPL},putSourceEject:function(){return E_NOTIMPL},getSourceEjectable:function(){return E_NOTIMPL},getDestinationType:function(){return E_NOTIMPL},putDestinationType:function(){return E_NOTIMPL},
getDestinationShareNameOrProtocol:function(){return E_NOTIMPL},putDestinationShareNameOrProtocol:function(){return E_NOTIMPL},getDestinationPath:function(){return E_NOTIMPL},putDestinationPath:function(){return E_NOTIMPL},getDestinationLogin:function(){return E_NOTIMPL},putDestinationLogin:function(){return E_NOTIMPL},getDestinationPassword:function(){return E_NOTIMPL},putDestinationPassword:function(){return E_NOTIMPL},getDestinationPort:function(){return E_NOTIMPL},putDestinationPort:function(){return E_NOTIMPL},
getDestinationEject:function(){return E_NOTIMPL},putDestinationEject:function(){return E_NOTIMPL},getDestinationEjectable:function(){return E_NOTIMPL},getSheduleEnabled:function(){return E_NOTIMPL},putSheduleEnabled:function(){return E_NOTIMPL},getSheduleFrequency:function(){return E_NOTIMPL},putSheduleFrequency:function(){return E_NOTIMPL},getSheduleStart:function(){return E_NOTIMPL},putSheduleStart:function(){return E_NOTIMPL},getSheduleEnd:function(){return E_NOTIMPL},putSheduleEnd:function(){return E_NOTIMPL},
getSheduleDayOfWeek:function(){return E_NOTIMPL},putSheduleDayOfWeek:function(){return E_NOTIMPL},getFullBackupFrequency:function(){return E_NOTIMPL},putFullBackupFrequency:function(){return E_NOTIMPL},getRemovePreviousBackup:function(){return E_NOTIMPL},putRemovePreviousBackup:function(){return E_NOTIMPL},getChownToShareOwner:function(){return E_NOTIMPL},putChownToShareOwner:function(){return E_NOTIMPL},getRsyncOption:function(){return E_NOTIMPL},putRsyncOption:function(){return E_NOTIMPL},getRsyncExclude:function(){return E_NOTIMPL},
putRsyncExclude:function(){return E_NOTIMPL},getEmailThisToAlertEmail:function(){return E_NOTIMPL},putEmailThisToAlertEmail:function(){return E_NOTIMPL},getMiscOption:function(){return E_NOTIMPL},putMiscOption:function(){return E_NOTIMPL},getWolAddress:function(){return E_NOTIMPL},putWolAddress:function(){return E_NOTIMPL}}});var IBackup=dpv.IBackup;Njl.namespace("dpv");dpv.IBackupEvents=Njl.inherit(IProtocolEvents,{IBackupEvents:{}});var IBackupEvents=dpv.IBackupEvents;Njl.namespace("dpv");
dpv.IBackupTarget=Njl.inherit(IUnknown,{IBackupTarget:{getType:function(){return E_NOTIMPL},getUSBSubType:function(){return E_NOTIMPL},getShareNameOrProtocol:function(){return E_NOTIMPL},getPath:function(){return E_NOTIMPL},getEjectable:function(){return E_NOTIMPL},getRefId:function(){return E_NOTIMPL}}});var IBackupTarget=dpv.IBackupTarget;Njl.namespace("dpv");
dpv.IBackupManager=Njl.inherit(IUnknown,{IBackupManager:{updateBackups:function(){return E_NOTIMPL},getBackups:function(){return E_NOTIMPL},commitBackups:function(){return E_NOTIMPL},deleteBackup:function(){return E_NOTIMPL},runBackups:function(){return E_NOTIMPL},cancelBackup:function(){return E_NOTIMPL},addBackup:function(){return E_NOTIMPL},appendBackup:function(){return E_NOTIMPL},removeBackup:function(){return E_NOTIMPL},updateButtonBackups:function(){return E_NOTIMPL},getButtonBackups:function(){return E_NOTIMPL},
commitButtonBackups:function(){return E_NOTIMPL},appendButtonBackup:function(){return E_NOTIMPL},removeButtonBackup:function(){return E_NOTIMPL},updateTimeMachine:function(){return E_NOTIMPL},getTimeMachine:function(){return E_NOTIMPL},commitTimeMachine:function(){return E_NOTIMPL},testBackupConnection:function(){return E_NOTIMPL},updateButtonBackupsLog:function(){return E_NOTIMPL},getButtonBackupsLog:function(){return E_NOTIMPL},clearButtonBackupsLog:function(){return E_NOTIMPL},updateLog:function(){return E_NOTIMPL},
clearLog:function(){return E_NOTIMPL},updateBackupsTargets:function(){return E_NOTIMPL},getBackupSourceTargets:function(){return E_NOTIMPL},getBackupDestinationTargets:function(){return E_NOTIMPL},updateVaultStatus:function(){return E_NOTIMPL},commitVaultStatus:function(){return E_NOTIMPL},commitVaultAction:function(){return E_NOTIMPL},getVault:function(){return E_NOTIMPL},dowloadSSHKey:function(){return E_NOTIMPL},updateDropBoxProvisioningStatus:function(){return E_NOTIMPL},commitDropBoxProvisioningStatus:function(){return E_NOTIMPL},
getDropBox:function(){return E_NOTIMPL},updateDropBoxAuthURL:function(){return E_NOTIMPL},getDropBoxAuthURL:function(){return E_NOTIMPL},updateDropBoxShareList:function(){return E_NOTIMPL},getDropBoxShareList:function(){return E_NOTIMPL},syncDropBoxShare:function(){return E_NOTIMPL},updateConnectionStatus:function(){return E_NOTIMPL},getConnectionStatus:function(){return E_NOTIMPL},updateAmazonProvisioningStatus:function(){return E_NOTIMPL},commitAmazonProvisioningStatus:function(){return E_NOTIMPL},
getAmazon:function(){return E_NOTIMPL},updateAmazonAuthURL:function(){return E_NOTIMPL},getAmazonAuthURL:function(){return E_NOTIMPL},updateAmazonShareList:function(){return E_NOTIMPL},getAmazonShareList:function(){return E_NOTIMPL},syncAmazonShare:function(){return E_NOTIMPL},updateAmazonLogs:function(){return E_NOTIMPL},getAmazonLogs:function(){return E_NOTIMPL},updateMediaBackup:function(){return E_NOTIMPL},commitMediaBackup:function(){return E_NOTIMPL},getMediaBackup:function(){return E_NOTIMPL},
updateMediaBackupStatus:function(){return E_NOTIMPL},getMediaBackupStatus:function(){return E_NOTIMPL}}});var IBackupManager=dpv.IBackupManager;Njl.namespace("dpv");dpv.IBackupManagerEvents=Njl.inherit(IProtocolEvents,{IBackupManagerEvents:{OnLogUpdate:function(){return E_NOTIMPL}}});var IBackupManagerEvents=dpv.IBackupManagerEvents;Njl.namespace("dpv");
dpv.ITimeMachine=Njl.inherit(IUnknown,{ITimeMachine:{getEnable:function(){return E_NOTIMPL},putEnable:function(){return E_NOTIMPL},getPassword:function(){return E_NOTIMPL},putPassword:function(){return E_NOTIMPL},getCapacity:function(){return E_NOTIMPL},putCapacity:function(){return E_NOTIMPL},getMaxCapacity:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL},getProtocol:function(){return E_NOTIMPL},putProtocol:function(){return E_NOTIMPL}}});var ITimeMachine=dpv.ITimeMachine;Njl.namespace("dpv");
dpv.IVault=Njl.inherit(IUnknown,{IVault:{getEnable:function(){return E_NOTIMPL},getVersion:function(){return E_NOTIMPL},getHostname:function(){return E_NOTIMPL},getUsername:function(){return E_NOTIMPL},getVolume:function(){return E_NOTIMPL},getDefaultJob:function(){return E_NOTIMPL}}});var IVault=dpv.IVault;Njl.namespace("dpv");
dpv.IAddon=Njl.inherit(IUnknown,{IAddon:{getName:function(){return E_NOTIMPL},getDispalyName:function(){return E_NOTIMPL},getversion:function(){return E_NOTIMPL},getMinRaidiatorVersion:function(){return E_NOTIMPL},getAuthor:function(){return E_NOTIMPL},getDescription:function(){return E_NOTIMPL},getCurrentUrl:function(){return E_NOTIMPL},getDetailUrl:function(){return E_NOTIMPL},getDownloadUrl:function(){return E_NOTIMPL},getLaunchUrl:function(){return E_NOTIMPL},getIconUrl:function(){return E_NOTIMPL},
getStatus:function(){return E_NOTIMPL}}});var IAddon=dpv.IAddon;Njl.namespace("dpv");dpv.IAddonManager=Njl.inherit(IUnknown,{IAddonManager:{updateInstalledAddons:function(){return E_NOTIMPL},updateAvailableAddons:function(){return E_NOTIMPL},installAddonRemotely:function(){return E_NOTIMPL},getInstalledAddons:function(){return E_NOTIMPL},getAvailableAddons:function(){return E_NOTIMPL}}});var IAddonManager=dpv.IAddonManager;Njl.namespace("dpv");
dpv.IAddonManagerEvents=Njl.inherit(IProtocolEvents,{IAddonManagerEvents:{OnInstall:function(){return E_NOTIMPL},OnRemove:function(){return E_NOTIMPL}}});var IAddonManagerEvents=dpv.IAddonManagerEvents;Njl.namespace("dpv");
dpv.IAlbum=Njl.inherit(IUnknown,{IAlbum:{getCoverUrl:function(){return E_NOTIMPL},getTitle:function(){return E_NOTIMPL},getDescription:function(){return E_NOTIMPL},getOwnerName:function(){return E_NOTIMPL},getOwnerFirstName:function(){return E_NOTIMPL},getOwnerLastName:function(){return E_NOTIMPL},getPunlishedOn:function(){return E_NOTIMPL},getLastInvitation:function(){return E_NOTIMPL},getItemsCount:function(){return E_NOTIMPL},getGuestsCount:function(){return E_NOTIMPL},getGuestsViewCount:function(){return E_NOTIMPL},
getLastGuestsViewCount:function(){return E_NOTIMPL},getPublicViewCount:function(){return E_NOTIMPL},getLastPublicViewCount:function(){return E_NOTIMPL},getAlbumURL:function(){return E_NOTIMPL}}});var IAlbum=dpv.IAlbum;Njl.namespace("dpv");
dpv.IAlbumManager=Njl.inherit(IUnknown,{IAlbumManager:{updateAlbums:function(){return E_NOTIMPL},getAlbums:function(){return E_NOTIMPL},getVersion:function(){return E_NOTIMPL},getCountOfAlbums:function(){return E_NOTIMPL},getCountOfSharedAlbums:function(){return E_NOTIMPL},getCountOfPhotographers:function(){return E_NOTIMPL},getConfigURL:function(){return E_NOTIMPL},getLoginURL:function(){return E_NOTIMPL}}});var IAlbumManager=dpv.IAlbumManager;Njl.namespace("dpv");
dpv.IAlbumManagerEvents=Njl.inherit(IProtocolEvents,{IAlbumManagerEvents:{}});var IAlbumManagerEvents=dpv.IAlbumManagerEvents;Njl.namespace("dpv");dpv.ISysNTPInfo=Njl.inherit(IUnknown,{ISysNTPInfo:{getEnable:function(){return E_NOTIMPL},putEnable:function(){return E_NOTIMPL}}});var ISysNTPInfo=dpv.ISysNTPInfo;Njl.namespace("dpv");
dpv.ISysHourMapInfo=Njl.inherit(IUnknown,{ISysHourMapInfo:{getEnable:function(){return E_NOTIMPL},putEnable:function(){return E_NOTIMPL},getFormatType:function(){return E_NOTIMPL},putFormatType:function(){return E_NOTIMPL}}});var ISysHourMapInfo=dpv.ISysHourMapInfo;Njl.namespace("dpv");dpv.IXRaidVolumeDisk=Njl.inherit(IUnknown,{IXRaidVolumeDisk:{getId:function(){return E_NOTIMPL},getSlotNumber:function(){return E_NOTIMPL},getSlotBusyState:function(){return E_NOTIMPL},getUsage:function(){return E_NOTIMPL}}});
var IXRaidVolumeDisk=dpv.IXRaidVolumeDisk;Njl.namespace("dpv");dpv.IXRaidVolume=Njl.inherit(IUnknown,{IXRaidVolume:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getRaidLevel:function(){return E_NOTIMPL},getCapacity:function(){return E_NOTIMPL},getState:function(){return E_NOTIMPL},getVolumeDisks:function(){return E_NOTIMPL},getTimeToComplete:function(){return E_NOTIMPL},getPercentage:function(){return E_NOTIMPL},getSpeed:function(){return E_NOTIMPL}}});
var IXRaidVolume=dpv.IXRaidVolume;Njl.namespace("dpv");dpv.IXRaidManagerEvents=Njl.inherit(IProtocolEvents,{IXRaidManagerEvents:{}});var IXRaidManagerEvents=dpv.IXRaidManagerEvents;Njl.namespace("dpv");dpv.IXRaidManager=Njl.inherit(IUnknown,{IXRaidManager:{updateXRaidInfo:function(){return E_NOTIMPL},getXRaidVolumes:function(){return E_NOTIMPL},getXRaidType:function(){return E_NOTIMPL},getXRaidExpandble:function(){return E_NOTIMPL},getXRaidPermissibleDisksCount:function(){return E_NOTIMPL},getXRaidInstalledDisksCount:function(){return E_NOTIMPL}}});
var IXRaidManager=dpv.IXRaidManager;Njl.namespace("dpv");dpv.IDeviceWebEventSink=Njl.inherit(IUnknown,{IDeviceWebEventSink:{Listen:function(){return E_NOTIMPL},StopListen:function(){return E_NOTIMPL}}});var IDeviceWebEventSink=dpv.IDeviceWebEventSink;Njl.namespace("dpv");dpv.IDeviceWebEventSinkEvents=Njl.inherit(IProtocolEvents,{IDeviceWebEventSinkEvents:{OnEvent:function(){return E_NOTIMPL}}});var IDeviceWebEventSinkEvents=dpv.IDeviceWebEventSinkEvents;Njl.namespace("dpv");
dpv.IZFSVolumesManager=Njl.inherit(IUnknown,{IZFSVolumesManager:{UpdateVolumes:function(){return E_NOTIMPL},AppendVolume:function(){return E_NOTIMPL},ExportVolume:function(){return E_NOTIMPL},Export:function(){return E_NOTIMPL},ImportVolume:function(){return E_NOTIMPL},RemoveVolume:function(){return E_NOTIMPL},ReplaceVolumeDisk:function(){return E_NOTIMPL},AttachVolumeDisk:function(){return E_NOTIMPL},DetachVolumeDisk:function(){return E_NOTIMPL},RemoveVolumeDisk:function(){return E_NOTIMPL},getVolumes:function(){return E_NOTIMPL},
getActiveVolumes:function(){return E_NOTIMPL},getVolumeById:function(){return E_NOTIMPL},ExpandCapacity:function(a,b,c,d){return this.ExpandVolume(a,b,c,"capacity",null,d)},ExpandRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,"raid_group",d,e)},ExpandNewRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,d?"concatenate":"stripe",null,e)},AddParity:function(){return E_NOTIMPL},UpdateVolumeIOStat:function(){return E_NOTIMPL},RemoveRaidGroup:function(){return E_NOTIMPL},UpdateVolume:function(){return E_NOTIMPL},
CommitVolume:function(){return E_NOTIMPL},StartVolumeScrub:function(){return E_NOTIMPL},StopVolumeScrub:function(){return E_NOTIMPL},DefragVolume:function(){return E_NOTIMPL},TrimVolume:function(){return E_NOTIMPL},StartVolumeBalance:function(){return E_NOTIMPL},StartVolumeDiskTest:function(){return E_NOTIMPL}}});var IZFSVolumesManager=dpv.IZFSVolumesManager;Njl.namespace("dpv");
dpv.IZFSVolumesManagerEvents=Njl.inherit(IProtocolEvents,{IZFSVolumesManagerEvents:{OnVolumeAdd:function(){return E_NOTIMPL},OnVolumeUpdate:function(){return E_NOTIMPL}}});var IZFSVolumesManagerEvents=dpv.IZFSVolumesManagerEvents;Njl.namespace("dpv");
dpv.IZFSVolume=Njl.inherit(IUnknown,{IZFSVolume:{getVolumeId:function(){return E_NOTIMPL},getEjectable:function(){return E_NOTIMPL},getVolumeName:function(){return E_NOTIMPL},putVolumeName:function(){return E_NOTIMPL},getAltRoot:function(){return E_NOTIMPL},getDeDup:function(){return E_NOTIMPL},getAutoExpand:function(){return E_NOTIMPL},getDiscardable:function(){return E_NOTIMPL},getMetadataAllocated:function(){return E_NOTIMPL},getMetadataUsed:function(){return E_NOTIMPL},getDataAllocated:function(){return E_NOTIMPL},
getDataUsed:function(){return E_NOTIMPL},getUnallocated:function(){return E_NOTIMPL},getXRaidExpanded:function(){return E_NOTIMPL},getAutoReplace:function(){return E_NOTIMPL},getCacheFile:function(){return E_NOTIMPL},getDelegation:function(){return E_NOTIMPL},getListSnapshots:function(){return E_NOTIMPL},getVersion:function(){return E_NOTIMPL},getAllocated:function(){return E_NOTIMPL},getCapacity:function(){return E_NOTIMPL},getFree:function(){return E_NOTIMPL},getAvailable:function(){return E_NOTIMPL},
getReserved:function(){return E_NOTIMPL},getGuid:function(){return E_NOTIMPL},getState:function(){return E_NOTIMPL},getSize:function(){return E_NOTIMPL},getScrubProgress:function(){return E_NOTIMPL},getResilverProgress:function(){return E_NOTIMPL},getRemoveRAIDGroupProgress:function(){return E_NOTIMPL},getBalanceProgress:function(){return E_NOTIMPL},getDisktestProgress:function(){return E_NOTIMPL},getResilverRemaining:function(){return E_NOTIMPL},getVirtualDevices:function(){return E_NOTIMPL},getDisksCount:function(){return E_NOTIMPL},
getIOStat:function(){return E_NOTIMPL},getVolumeMode:function(){return E_NOTIMPL},putVolumeMode:function(){return E_NOTIMPL},getChecksum:function(){return E_NOTIMPL},putChecksum:function(){return E_NOTIMPL},getQuota:function(){return E_NOTIMPL},putQuota:function(){return E_NOTIMPL},getCreateDefaultShare:function(){return E_NOTIMPL},putCreateDefaultShare:function(){return E_NOTIMPL},getConcatenated:function(){return E_NOTIMPL},putConcatenated:function(){return E_NOTIMPL},getEncryptionEnabled:function(){return E_NOTIMPL},
putEncryptionEnabled:function(){return E_NOTIMPL},getEncryptionMount:function(){return E_NOTIMPL},putEncryptionMount:function(){return E_NOTIMPL},getEncryptionEmail:function(){return E_NOTIMPL},putEncryptionEmail:function(){return E_NOTIMPL},getEncryptionAllowOverwriteKey:function(){return this.xenc?this.xenc.getAttributeText("allow_overwrite_key"):E_FAIL},putEncryptionAllowOverwriteKey:function(a){return this.xenc?this.xenc.setAttributeText(a,"allow_overwrite_key"):E_FAIL},getImportInProgress:function(){return E_NOTIMPL},
getImportPath:function(){return E_NOTIMPL},getImportProcessId:function(){return E_NOTIMPL},getSnapshotPruneThreshold:function(){return E_NOTIMPL},putSnapshotPruneThreshold:function(){return E_NOTIMPL},getRAIDLevel:function(){return E_NOTIMPL},AppendVirtualDevices:function(){return E_NOTIMPL}}});var IZFSVolume=dpv.IZFSVolume;Njl.namespace("dpv");
dpv.IZFSVolumeIOStat=Njl.inherit(IUnknown,{IZFSVolumeIOStat:{getReadCount:function(){return E_NOTIMPL},getWriteCount:function(){return E_NOTIMPL},getBandwidthReadCount:function(){return E_NOTIMPL},getBandwidthWriteCount:function(){return E_NOTIMPL}}});var IZFSVolumeIOStat=dpv.IZFSVolumeIOStat;Njl.namespace("dpv");dpv.IZFSVolumeEvents=Njl.inherit(IProtocolEvents,{IZFSVolumeEvents:{}});var IZFSVolumeEvents=dpv.IZFSVolumeEvents;Njl.namespace("dpv");
dpv.IZFSVirtualDevice=Njl.inherit(IUnknown,{IZFSVirtualDevice:{getType:function(){return E_NOTIMPL},putType:function(){return E_NOTIMPL},getVirtualDeviceId:function(){return E_NOTIMPL},getLevel:function(){return E_NOTIMPL},putLevel:function(){return E_NOTIMPL},putGroupsNumber:function(){return E_NOTIMPL},getTierType:function(){return E_NOTIMPL},getDisks:function(){return E_NOTIMPL},getMetadataAllocated:function(){return E_NOTIMPL},getDataAllocated:function(){return E_NOTIMPL},getUnallocated:function(){return E_NOTIMPL},
AppendDisks:function(){return E_NOTIMPL},RemoveDisk:function(){return E_NOTIMPL}}});var IZFSVirtualDevice=dpv.IZFSVirtualDevice;Njl.namespace("dpv");dpv.IZFSVirtualDeviceEvents=Njl.inherit(IProtocolEvents,{IZFSVirtualDeviceEvents:{}});var IZFSVirtualDeviceEvents=dpv.IZFSVirtualDeviceEvents;Njl.namespace("dpv");
dpv.IZFSDisk=Njl.inherit(IUnknown,{IZFSDisk:{getDiskId:function(){return E_NOTIMPL},getPresent:function(){return E_NOTIMPL},getModel:function(){return E_NOTIMPL},getSerial:function(){return E_NOTIMPL},getFirmwareVersion:function(){return E_NOTIMPL},getRPM:function(){return E_NOTIMPL},getSectors:function(){return E_NOTIMPL},getCapacity:function(){return E_NOTIMPL},getTemperature:function(){return E_NOTIMPL},getATAError:function(){return E_NOTIMPL},getSlotName:function(){return E_NOTIMPL},getHardwareInterface:function(){return E_NOTIMPL},
getVolumeName:function(){return E_NOTIMPL},getVolumeType:function(){return E_NOTIMPL},getVolumeState:function(){return E_NOTIMPL},getVolumeHostId:function(){return E_NOTIMPL},getDiskState:function(){return E_NOTIMPL},getChannelID:function(){return E_NOTIMPL},getSignedByNetgear:function(){return E_NOTIMPL},getFormattable:function(){return E_NOTIMPL},getPartitions:function(){return E_NOTIMPL},getEnclosureId:function(){return E_NOTIMPL},getIsGlobalSpare:function(){return E_NOTIMPL},getClass:function(){return E_NOTIMPL},
getType:function(){return E_NOTIMPL}}});var IZFSDisk=dpv.IZFSDisk;Njl.namespace("dpv");dpv.IZFSDiskEnclosure=Njl.inherit(IUnknown,{IZFSDiskEnclosure:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getPortName:function(){return E_NOTIMPL},getDisks:function(){return E_NOTIMPL},getDiskById:function(){return E_NOTIMPL},getRowsCount:function(){return E_NOTIMPL},getColmsCount:function(){return E_NOTIMPL},getRackAlignment:function(){return E_NOTIMPL}}});var IZFSDiskEnclosure=dpv.IZFSDiskEnclosure;
Njl.namespace("dpv");dpv.IZFSDiskEvents=Njl.inherit(IProtocolEvents,{IZFSDiskEvents:{}});var IZFSDiskEvents=dpv.IZFSDiskEvents;Njl.namespace("dpv");dpv.IZFSDisksManagerEvents=Njl.inherit(IProtocolEvents,{IZFSDisksManagerEvents:{OnDiskAdd:function(){return E_NOTIMPL},OnDiskRemove:function(){return E_NOTIMPL},OnDiskUpdate:function(){return E_NOTIMPL}}});var IZFSDisksManagerEvents=dpv.IZFSDisksManagerEvents;Njl.namespace("dpv");
dpv.IZFSDisksManager=Njl.inherit(IUnknown,{IZFSDisksManager:{updateDiskEnclosures:function(){return E_NOTIMPL},getDiskEnclosures:function(){return E_NOTIMPL},getDiskEnclosureById:function(){return E_NOTIMPL},getDiskById:function(){return E_NOTIMPL},getHeadEnclosure:function(){return E_NOTIMPL},MakeSpare:function(){return E_NOTIMPL},FormatDisks:function(){return E_NOTIMPL}}});var IZFSDisksManager=dpv.IZFSDisksManager;Njl.namespace("dpv");
dpv.ITransaction=Njl.inherit(IUnknown,{ITransaction:{getPendingState:function(){return E_NOTIMPL},putAsyncMode:function(){return E_NOTIMPL},putIgnoreFails:function(){return E_NOTIMPL},Append:function(){return E_NOTIMPL},Update:function(){return E_NOTIMPL},Commit:function(){return E_NOTIMPL},Abort:function(){return E_NOTIMPL},Remove:function(){return E_NOTIMPL},RemoveAll:function(){return E_NOTIMPL}}});var ITransaction=dpv.ITransaction;Njl.namespace("dpv");
dpv.ITransactionEvents=Njl.inherit(IProtocolEvents,{ITransactionEvents:{}});var ITransactionEvents=dpv.ITransactionEvents;Njl.namespace("dpv");dpv.IZFSSnapshot=Njl.inherit(IUnknown,{IZFSSnapshot:{getName:function(){return E_NOTIMPL},getVolumeName:function(){return E_NOTIMPL},getShareName:function(){return E_NOTIMPL},getUsedSpace:function(){return E_NOTIMPL},getCreationDate:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},getCloneShareCount:function(){return E_NOTIMPL},getPath:function(){return E_NOTIMPL}}});
var IZFSSnapshot=dpv.IZFSSnapshot;Njl.namespace("dpv");dpv.IZFSSnapshotEvents=Njl.inherit(IProtocolEvents,{IZFSSnapshotEvents:{}});var IZFSSnapshotEvents=dpv.IZFSSnapshotEvents;Njl.namespace("dpv");
dpv.IZFSSnapshotsManager=Njl.inherit(IUnknown,{IZFSSnapshotsManager:{updateSnapshotsByDateRange:function(){return E_NOTIMPL},getSnapshots:function(){return E_NOTIMPL},getSnapshotByName:function(){return E_NOTIMPL},updateSnapshotsCountByDateRange:function(){return E_NOTIMPL},getSnapshotCountByType:function(){return E_NOTIMPL},getSnapshotsDateRangeByType:function(){return E_NOTIMPL},updateSnapshotSummary:function(){return E_NOTIMPL},getSNSTotalCount:function(){return E_NOTIMPL},getSNSManualTotalCount:function(){return E_NOTIMPL},
getSNSContinuousTotalCount:function(){return E_NOTIMPL},getSNSFirstSnapshotTime:function(){return E_NOTIMPL},getSNSLastSnapshotTime:function(){return E_NOTIMPL},CreateSnapshot:function(){return E_NOTIMPL},RollbackSnapshot:function(){return E_NOTIMPL},DeleteSnapshot:function(){return E_NOTIMPL},CloneSnapshot:function(){return E_NOTIMPL},PromoteSnapshot:function(){return E_NOTIMPL}}});var IZFSSnapshotsManager=dpv.IZFSSnapshotsManager;Njl.namespace("dpv");
dpv.IZFSSnapshotsManagerEvents=Njl.inherit(IProtocolEvents,{IZFSSnapshotsManagerEvents:{}});var IZFSSnapshotsManagerEvents=dpv.IZFSSnapshotsManagerEvents;Njl.namespace("dpv");
dpv.INetworkBond=Njl.inherit(IUnknown,{INetworkBond:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getMode:function(){return E_NOTIMPL},putMode:function(){return E_NOTIMPL},getPolicy:function(){return E_NOTIMPL},putPolicy:function(){return E_NOTIMPL},getAddrPolicy:function(){return E_NOTIMPL},getLACPActivity:function(){return E_NOTIMPL},putLACPActivity:function(){return E_NOTIMPL},getLACPTimer:function(){return E_NOTIMPL},putLACPTimer:function(){return E_NOTIMPL},getFlags:function(){return E_NOTIMPL},
getMTU:function(){return E_NOTIMPL},putMTU:function(){return E_NOTIMPL},getState:function(){return E_NOTIMPL},getOver:function(){return E_NOTIMPL},getIPAddress:function(){return E_NOTIMPL},putIPAddress:function(){return E_NOTIMPL},getIPv6Address:function(){return E_NOTIMPL},putIPv6Address:function(){return E_NOTIMPL},getMACAddress:function(){return E_NOTIMPL},getIPType:function(){return E_NOTIMPL},putIPType:function(){return E_NOTIMPL},getRouter:function(){return E_NOTIMPL},putRouter:function(){return E_NOTIMPL},
getRouterv6:function(){return E_NOTIMPL},putRouterv6:function(){return E_NOTIMPL},getSubnet:function(){return E_NOTIMPL},putSubnet:function(){return E_NOTIMPL},getPrefixLength:function(){return E_NOTIMPL},putPrefixLength:function(){return E_NOTIMPL},getVID:function(){return E_NOTIMPL},putVID:function(){return E_NOTIMPL},getJumboFrames:function(){return E_NOTIMPL},putJumboFrames:function(){return E_NOTIMPL},getVNICS:function(){return E_NOTIMPL},getDNSRecords:function(){return E_NOTIMPL},putDNSRecords:function(){return E_NOTIMPL},
getRoutes:function(){return E_NOTIMPL},putRoutes:function(){return E_NOTIMPL}}});var INetworkBond=dpv.INetworkBond;Njl.namespace("dpv");
dpv.INetworkNIC=Njl.inherit(IUnknown,{INetworkNIC:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getMTU:function(){return E_NOTIMPL},putMTU:function(){return E_NOTIMPL},getState:function(){return E_NOTIMPL},getBridge:function(){return E_NOTIMPL},getIPAddress:function(){return E_NOTIMPL},putIPAddress:function(){return E_NOTIMPL},getIPv6Address:function(){return E_NOTIMPL},putIPv6Address:function(){return E_NOTIMPL},getMACAddress:function(){return E_NOTIMPL},getSpeed:function(){return E_NOTIMPL},
putSpeed:function(){return E_NOTIMPL},getDuplex:function(){return E_NOTIMPL},putDuplex:function(){return E_NOTIMPL},getGateway:function(){return E_NOTIMPL},getMACAddressType:function(){return E_NOTIMPL},getIPType:function(){return E_NOTIMPL},putIPType:function(){return E_NOTIMPL},getRouter:function(){return E_NOTIMPL},putRouter:function(){return E_NOTIMPL},getRouterv6:function(){return E_NOTIMPL},putRouterv6:function(){return E_NOTIMPL},getSubnet:function(){return E_NOTIMPL},putSubnet:function(){return E_NOTIMPL},
getPrefixLength:function(){return E_NOTIMPL},putPrefixLength:function(){return E_NOTIMPL},getVID:function(){return E_NOTIMPL},putVID:function(){return E_NOTIMPL},getPath:function(){return E_NOTIMPL},putPath:function(){return E_NOTIMPL},getOver:function(){return E_NOTIMPL},putOver:function(){return E_NOTIMPL},getVNICS:function(){return E_NOTIMPL},getDNSRecords:function(){return E_NOTIMPL},putDNSRecords:function(){return E_NOTIMPL},getRoutes:function(){return E_NOTIMPL},putRoutes:function(){return E_NOTIMPL}}});
var INetworkNIC=dpv.INetworkNIC;Njl.namespace("dpv");
dpv.INetworkVNIC=Njl.inherit(IUnknown,{INetworkVNIC:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getState:function(){return E_NOTIMPL},getMTU:function(){return E_NOTIMPL},putMTU:function(){return E_NOTIMPL},getOver:function(){return E_NOTIMPL},putOver:function(){return E_NOTIMPL},getIPAddress:function(){return E_NOTIMPL},putIPAddress:function(){return E_NOTIMPL},getIPv6Address:function(){return E_NOTIMPL},putIPv6Address:function(){return E_NOTIMPL},getMACAddress:function(){return E_NOTIMPL},
getSpeed:function(){return E_NOTIMPL},putSpeed:function(){return E_NOTIMPL},getMACAddressType:function(){return E_NOTIMPL},getVID:function(){return E_NOTIMPL},putVID:function(){return E_NOTIMPL},getIPType:function(){return E_NOTIMPL},putIPType:function(){return E_NOTIMPL},getGateway:function(){return E_NOTIMPL},putGateway:function(){return E_NOTIMPL},getSubnet:function(){return E_NOTIMPL},putSubnet:function(){return E_NOTIMPL},getPrefixLength:function(){return E_NOTIMPL},putPrefixLength:function(){return E_NOTIMPL},
getPrimaryRouter:function(){return E_NOTIMPL},putPrimaryRouter:function(){return E_NOTIMPL},getEffectiveRouter:function(){return E_NOTIMPL},getDNSRecords:function(){return E_NOTIMPL},putDNSRecords:function(){return E_NOTIMPL}}});var INetworkVNIC=dpv.INetworkVNIC;Njl.namespace("dpv");dpv.ISCSITarget=Njl.inherit(IUnknown,{ISCSITarget:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getSessionsCount:function(){return E_NOTIMPL}}});var ISCSITarget=dpv.ISCSITarget;Njl.namespace("dpv");
dpv.ILUN=Njl.inherit(IUnknown,{ILUN:{getId:function(){return E_NOTIMPL},getComment:function(){return E_NOTIMPL},putComment:function(){return E_NOTIMPL},getSize:function(){return E_NOTIMPL},putSize:function(){return E_NOTIMPL},getBlockSize:function(){return E_NOTIMPL},putBlockSize:function(){return E_NOTIMPL},getAlertThreshold:function(){return E_NOTIMPL},putAlertThreshold:function(){return E_NOTIMPL},getAvailable:function(){return E_NOTIMPL},getAllocated:function(){return E_NOTIMPL},getUsedByDataset:function(){return E_NOTIMPL},
getUsedBySnapshots:function(){return E_NOTIMPL},getUsedByRefReservation:function(){return E_NOTIMPL},getVolumeId:function(){return E_NOTIMPL},putVolumeId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getSparse:function(){return E_NOTIMPL},putSparse:function(){return E_NOTIMPL},getLUNGroupName:function(){return E_NOTIMPL},putLUNGroupName:function(){return E_NOTIMPL},getCompression:function(){return E_NOTIMPL},putCompression:function(){return E_NOTIMPL},
getCompressRatio:function(){return E_NOTIMPL},getLogbias:function(){return E_NOTIMPL},putLogbias:function(){return E_NOTIMPL},getDedup:function(){return E_NOTIMPL},putDedup:function(){return E_NOTIMPL},getCountOfContinuousSnapshots:function(){return E_NOTIMPL},getCountOfManualSnapshots:function(){return E_NOTIMPL},getShared:function(){return E_NOTIMPL},getFirstSnapshotCreationTime:function(){return E_NOTIMPL},getLastSnapshotCreationTime:function(){return E_NOTIMPL},putShared:function(){return E_NOTIMPL},
getEnableProtection:function(){return E_NOTIMPL},putEnableProtection:function(){return E_NOTIMPL},getSnapshotScheduleInterval:function(){return E_NOTIMPL},getEnableSmartSnapshot:function(){return E_NOTIMPL},putEnableSmartSnapshot:function(){return E_NOTIMPL},putSnapshotScheduleInterval:function(){return E_NOTIMPL},getCustomSnapshotManagement:function(){return E_NOTIMPL},putCustomSnapshotManagement:function(){return E_NOTIMPL},getNonEmptySnapshots:function(){return E_NOTIMPL},putNonEmptySnapshots:function(){return E_NOTIMPL},
getCustomSnapshotSchedule:function(){return E_NOTIMPL},putCustomSnapshotSchedule:function(){return E_NOTIMPL},getSnapshotRetentionType:function(){return E_NOTIMPL},putSnapshotRetentionType:function(){return E_NOTIMPL},getSnapshotRetentionNumber:function(){return E_NOTIMPL},putSnapshotRetentionNumber:function(){return E_NOTIMPL},getSnapshotRetentionLifeTime:function(){return E_NOTIMPL},putSnapshotRetentionLifeTime:function(){return E_NOTIMPL},getMigration:function(){return E_NOTIMPL},getExportInProgress:function(){return E_NOTIMPL},
getExportPath:function(){return E_NOTIMPL},getExportProcessId:function(){return E_NOTIMPL},getImportInProgress:function(){return E_NOTIMPL},getImportPath:function(){return E_NOTIMPL},getImportProcessId:function(){return E_NOTIMPL},getOriginClone:function(){return E_NOTIMPL},getCloneState:function(){return E_NOTIMPL},getSnapshotClone:function(){return E_NOTIMPL},getUseReplicate:function(){return E_NOTIMPL},getReplicateJobId:function(){return E_NOTIMPL},getReplicateJobName:function(){return E_NOTIMPL},
getIsReplicateSource:function(){return E_NOTIMPL},getSync:function(){return E_NOTIMPL},putSync:function(){return E_NOTIMPL},isReadyDRShare:function(){return E_NOTIMPL}}});var ILUN=dpv.ILUN;Njl.namespace("dpv");
dpv.ISCSIManager=Njl.inherit(IUnknown,{ISCSIManager:{updateLUNGroups:function(){return E_NOTIMPL},getLUNGroups:function(){return E_NOTIMPL},AppendLUNGroup:function(){return E_NOTIMPL},CommitLUNGroup:function(){return E_NOTIMPL},RemoveLUNGroup:function(){return E_NOTIMPL},updateHosts:function(){return E_NOTIMPL},getHosts:function(){return E_NOTIMPL},AppendHost:function(){return E_NOTIMPL},CommitHost:function(){return E_NOTIMPL},RemoveHost:function(){return E_NOTIMPL}}});var ISCSIManager=dpv.ISCSIManager;
Njl.namespace("dpv");dpv.ISCSIManagerEvents=Njl.inherit(IProtocolEvents,{ISCSIManagerEvents:{}});var ISCSIManagerEvents=dpv.ISCSIManagerEvents;Njl.namespace("dpv");dpv.ISCSIHost=Njl.inherit(IUnknown,{ISCSIHost:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},putChapSecretValueBase64:function(){return E_NOTIMPL},getChapSecret:function(){return E_NOTIMPL},putChapSecret:function(){return E_NOTIMPL}}});var ISCSIHost=dpv.ISCSIHost;Njl.namespace("dpv");
dpv.ILUNGroup=Njl.inherit(IUnknown,{ILUNGroup:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getChapAuth:function(){return E_NOTIMPL},putChapAuth:function(){return E_NOTIMPL},getChapSecret:function(){return E_NOTIMPL},putChapSecret:function(){return E_NOTIMPL},putChapSecretValueBase64:function(){return E_NOTIMPL},getTargets:function(){return E_NOTIMPL},putTargets:function(){return E_NOTIMPL},getHosts:function(){return E_NOTIMPL},putHosts:function(){return E_NOTIMPL},getAllHosts:function(){},
putAllHosts:function(){}}});var ILUNGroup=dpv.ILUNGroup;Njl.namespace("dpv");
dpv.ISysService=Njl.inherit(IUnknown,{ISysService:{getName:function(){return E_NOTIMPL},getEnable:function(){return E_NOTIMPL},putEnable:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getNFSThreads:function(){return E_NOTIMPL},putNFSThreads:function(){return E_NOTIMPL},getNFSHomeShareState:function(){return E_NOTIMPL},putNFSHomeShareState:function(){return E_NOTIMPL},getNFSV4:function(){return E_NOTIMPL},putNFSV4:function(){return E_NOTIMPL},getNFSV4Domain:function(){return E_NOTIMPL},
putNFSV4Domain:function(){return E_NOTIMPL},getFTPPort:function(){return E_NOTIMPL},putFTPPort:function(){return E_NOTIMPL},getFTPAuthMode:function(){return E_NOTIMPL},putFTPAuthMode:function(){return E_NOTIMPL},getFTPPassiveRangeMin:function(){return E_NOTIMPL},putFTPPassiveRangeMin:function(){return E_NOTIMPL},getFTPPassiveRangeMax:function(){return E_NOTIMPL},putFTPPassiveRangeMax:function(){return E_NOTIMPL},getFTPMasqAddr:function(){return E_NOTIMPL},putFTPMasqAddr:function(){return E_NOTIMPL},
getFTPMasqEnable:function(){return E_NOTIMPL},putFTPMasqEnable:function(){return E_NOTIMPL},getFTPSEnable:function(){return E_NOTIMPL},putFTPSEnable:function(){return E_NOTIMPL},getFTPLogEnable:function(){return E_NOTIMPL},putFTPLogEnable:function(){return E_NOTIMPL},getFTPMaxUploadRate:function(){return E_NOTIMPL},putFTPMaxUploadRate:function(){return E_NOTIMPL},getFTPMaxDownloadRate:function(){return E_NOTIMPL},putFTPMaxDownloadRate:function(){return E_NOTIMPL},getFTPUploadResumeState:function(){return E_NOTIMPL},
putFTPUploadResumeState:function(){return E_NOTIMPL},getFTPHomeShareState:function(){return E_NOTIMPL},putFTPHomeShareState:function(){return E_NOTIMPL},getDAAPShareName:function(){return E_NOTIMPL},putDAAPShareName:function(){return E_NOTIMPL},getDAAPPassword:function(){return E_NOTIMPL},putDAAPPassword:function(){return E_NOTIMPL},getDAAPDirectory:function(){return E_NOTIMPL},putDAAPDirectory:function(){return E_NOTIMPL},getDLNAAutoScanState:function(){return E_NOTIMPL},putDLNAAutoScanState:function(){return E_NOTIMPL},
getDLNATivoServerState:function(){return E_NOTIMPL},putDLNATivoServerState:function(){return E_NOTIMPL},rescanDLNA:function(){return E_NOTIMPL},getDLNATivoArchiverState:function(){return E_NOTIMPL},putDLNATivoArchiverState:function(){return E_NOTIMPL},getBonjourCIFSState:function(){return E_NOTIMPL},putBonjourCIFSState:function(){return E_NOTIMPL},getBonjourAFPState:function(){return E_NOTIMPL},putBonjourAFPState:function(){return E_NOTIMPL},getBonjourFrontviewState:function(){return E_NOTIMPL},putBonjourFrontviewState:function(){return E_NOTIMPL},
getBonjourReadynasState:function(){return E_NOTIMPL},putBonjourReadynasState:function(){return E_NOTIMPL},getBonjourTimeMachineState:function(){return E_NOTIMPL},putBonjourTimeMachineState:function(){return E_NOTIMPL},getHTTPLoginEnableState:function(){return E_NOTIMPL},putHTTPLoginEnableState:function(){return E_NOTIMPL},getHTTPSelectedShareName:function(){return E_NOTIMPL},putHTTPSelectedShareName:function(){return E_NOTIMPL},getHTTPAdminEnabled:function(){return E_NOTIMPL},putHTTPAdminEnabled:function(){return E_NOTIMPL},
getHTTPShareList:function(){return E_NOTIMPL},getHTTPSPort:function(){return E_NOTIMPL},putHTTPSPort:function(){return E_NOTIMPL},getHTTPSSslKeyHost:function(){return E_NOTIMPL},putHTTPSSslKeyHost:function(){return E_NOTIMPL},getSNMPAllowHost:function(){return E_NOTIMPL},putSNMPAllowHost:function(){return E_NOTIMPL},getSNMPCommunity:function(){return E_NOTIMPL},putSNMPCommunity:function(){return E_NOTIMPL},getSNMPTrapDest:function(){return E_NOTIMPL},putSNMPTrapDest:function(){return E_NOTIMPL},getSNMPMibUrl:function(){return E_NOTIMPL},
getSNMPContact:function(){return E_NOTIMPL},putSNMPContact:function(){return E_NOTIMPL},getSNMPLocation:function(){return E_NOTIMPL},putSNMPLocation:function(){return E_NOTIMPL},getSSHPort:function(){return E_NOTIMPL},putSSHPort:function(){return E_NOTIMPL},getSSHPswdAuthEnable:function(){return E_NOTIMPL},putSSHPswdAuthEnable:function(){return E_NOTIMPL},getIndexContent:function(){return E_NOTIMPL},putIndexContent:function(){return E_NOTIMPL},getExcludedFiles:function(){return E_NOTIMPL},putExcludedFiles:function(){return E_NOTIMPL},
getExcludedFolders:function(){return E_NOTIMPL},putExcludedFolders:function(){return E_NOTIMPL},getCifsEnhanceMacOS:function(){return E_NOTIMPL},putCifsEnhanceMacOS:function(){return E_NOTIMPL},getCifsWindowsDiscovery:function(){return E_NOTIMPL},putCifsWindowsDiscovery:function(){return E_NOTIMPL}}});var ISysService=dpv.ISysService;Njl.namespace("dpv");dpv.ISysServiceEvents=Njl.inherit(IProtocolEvents,{ISysServiceEvents:{}});var ISysServiceEvents=dpv.ISysServiceEvents;Njl.namespace("dpv");
dpv.ISysServiceManager=Njl.inherit(IUnknown,{ISysServiceManager:{updateSystemServiceInfo:function(){return E_NOTIMPL},commitSystemService:function(){return E_NOTIMPL},getSystemServices:function(){return E_NOTIMPL},getTIVOInfo:function(){return E_NOTIMPL},getTIVOList:function(){return E_NOTIMPL},activateTIVO:function(){return E_NOTIMPL},deactivateTIVO:function(){return E_NOTIMPL},updateTIVOStatus:function(){return E_NOTIMPL},commitTIVOConfig:function(){return E_NOTIMPL},updateRemoteSSH:function(){return E_NOTIMPL},
commitRemoteSSH:function(){return E_NOTIMPL},getRemoteSSHPort:function(){return E_NOTIMPL},getRemoteSSHComment:function(){return E_NOTIMPL},getRemoteSSHStatus:function(){return E_NOTIMPL},updateFileSearchStats:function(){return E_NOTIMPL},getFileSearchStats:function(){return E_NOTIMPL},resetFileSearchIndex:function(){return E_NOTIMPL},pauseFileSearchIndex:function(){return E_NOTIMPL},resumeFileSearchIndex:function(){return E_NOTIMPL}}});var ISysServiceManager=dpv.ISysServiceManager;Njl.namespace("dpv");
dpv.ISysServiceManagerEvents=Njl.inherit(IProtocolEvents,{ISysServiceManagerEvents:{}});var ISysServiceManagerEvents=dpv.ISysServiceManagerEvents;Njl.namespace("dpv");dpv.ISysTIVOInfo=Njl.inherit(IUnknown,{ISysTIVOInfo:{getSharedFolderList:function(){return E_NOTIMPL},getTIVOFolder:function(){return E_NOTIMPL},getHour:function(){return E_NOTIMPL},getMinute:function(){return E_NOTIMPL},getDays:function(){return E_NOTIMPL},getFastTransfer:function(){return E_NOTIMPL}}});var ISysTIVOInfo=dpv.ISysTIVOInfo;
Njl.namespace("dpv");dpv.ISysTIVOList=Njl.inherit(IUnknown,{ISysTIVOList:{getName:function(){return E_NOTIMPL},isActivated:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL}}});var ISysTIVOList=dpv.ISysTIVOList;Njl.namespace("dpv");dpv.ISysIndexStat=Njl.inherit(IUnknown,{ISysIndexStat:{getStatus:function(){return E_NOTIMPL},getFilesNumber:function(){return E_NOTIMPL},getFoldersNumber:function(){return E_NOTIMPL}}});var ISysIndexStat=dpv.ISysIndexStat;Njl.namespace("dpv");
dpv.IFWManagerEvents=Njl.inherit(IProtocolEvents,{IFWManagerEvents:{}});var IFWManagerEvents=dpv.IFWManagerEvents;Njl.namespace("dpv");
dpv.IFWManager=Njl.inherit(IUnknown,{IFWManager:{updateFirmwareDownloadProgress:function(){return E_NOTIMPL},getDownloadState:function(){return E_NOTIMPL},getDownloadProgress:function(){return E_NOTIMPL},cancelFirmwareDownload:function(){return E_NOTIMPL},checkForUpdate:function(){return E_NOTIMPL},PerfomeLastFirmwareUpdate:function(){return E_NOTIMPL},getFirmwareInfo:function(){return E_NOTIMPL},updateFirmWareUpdateStatus:function(){return E_NOTIMPL},getFirmWareUpdateStatus:function(){return E_NOTIMPL},
getUpdateChannel:function(){return E_NOTIMPL},setUpdateChannel:function(){return E_NOTIMPL}}});var IFWManager=dpv.IFWManager;Njl.namespace("dpv");dpv.IADSProgress=Njl.inherit(IUnknown,{IADSProgress:{getState:function(){return E_NOTIMPL},getPercent:function(){return E_NOTIMPL},getTotalUser:function(){return E_NOTIMPL},getCurrUser:function(){return E_NOTIMPL},getTotalGroup:function(){return E_NOTIMPL},getCurrGroup:function(){return E_NOTIMPL},getStartAt:function(){return E_NOTIMPL},getDoneAt:function(){return E_NOTIMPL}}});
var IADSProgress=dpv.IADSProgress;Njl.namespace("dpv");dpv.IShareClone=Njl.inherit(IUnknown,{IShareClone:{getId:function(){return E_NOTIMPL},getShareId:function(){return E_NOTIMPL},getClonedShareName:function(){return E_NOTIMPL},getParentSnapshotName:function(){return E_NOTIMPL}}});var IShareClone=dpv.IShareClone;Njl.namespace("dpv");dpv.IShareQuota=Njl.inherit(IUnknown,{IShareQuota:{getHardLimitMB:function(){return E_NOTIMPL},putHardLimitMB:function(){return E_NOTIMPL},getUsedMB:function(){return E_NOTIMPL}}});
var IShareQuota=dpv.IShareQuota;dpv.IShareUserQuota=Njl.inherit(IShareQuota,{IShareUserQuota:{getUserId:function(){return E_NOTIMPL},putUserId:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL},putUserName:function(){return E_NOTIMPL}}});var IShareUserQuota=dpv.IShareUserQuota;dpv.IShareGroupQuota=Njl.inherit(IShareQuota,{IShareGroupQuota:{getGroupId:function(){return E_NOTIMPL},putGroupId:function(){return E_NOTIMPL},getGroupName:function(){return E_NOTIMPL},putGroupName:function(){return E_NOTIMPL}}});
var IShareGroupQuota=dpv.IShareGroupQuota;Njl.namespace("dpv");
dpv.ISmartLocalAppManager=Njl.inherit(IUnknown,{ISmartLocalAppManager:{updateLocalApps:function(){return E_NOTIMPL},getLocalApps:function(){return E_NOTIMPL},updateLocalAvailableApps:function(){return E_NOTIMPL},getLocalAvailableApps:function(){return E_NOTIMPL},updateFeaturedApps:function(){return E_NOTIMPL},updateFeaturedAppsVisible:function(){return E_NOTIMPL},getFeaturedAppsVisible:function(){return E_NOTIMPL},commitFeaturedAppsVisible:function(){return E_NOTIMPL},getFeaturedApps:function(){return E_NOTIMPL},
updateLocalInstalledApps:function(){return E_NOTIMPL},getLocalInstalledApps:function(){return E_NOTIMPL},updateLocalGenieApps:function(){return E_NOTIMPL},getLocalGenieApps:function(){return E_NOTIMPL},updateLocalLaunchableApps:function(){return E_NOTIMPL},getLocalLaunchableApps:function(){return E_NOTIMPL},updateLocalApp:function(){return E_NOTIMPL},getAppBackgroundProcessStatus:function(){return E_NOTIMPL},updateAppBackgroundProcessStatus:function(){return E_NOTIMPL},updateServiceProcessStatus:function(){return E_NOTIMPL},
getServiceActiveState:function(){return E_NOTIMPL},getServiceSubState:function(){return E_NOTIMPL},getServiceStateProgress:function(){return E_NOTIMPL},commitCheckUpdate:function(){return E_NOTIMPL},commitAppInstall:function(){return E_NOTIMPL}}});var ISmartLocalAppManager=dpv.ISmartLocalAppManager;Njl.namespace("dpv");
dpv.ISmartLocalAppManagerEvents=Njl.inherit(IProtocolEvents,{ISmartLocalAppManagerEvents:{OnReceiveProgressData:function(){return E_NOTIMPL},OnInstallationAbort:function(){return E_NOTIMPL},OnUpdateLocalApp:function(){}}});var ISmartLocalAppManagerEvents=dpv.ISmartLocalAppManagerEvents;Njl.namespace("dpv");
dpv.ISmartLocalApp=Njl.inherit(IUnknown,{ISmartLocalApp:{getId:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getAuthor:function(){return E_NOTIMPL},getVersion:function(){return E_NOTIMPL},getConfigURL:function(){return E_NOTIMPL},getLaunchURL:function(){return E_NOTIMPL},getDebianPackageName:function(){return E_NOTIMPL},getServiceName:function(){return E_NOTIMPL},getDescription:function(){return E_NOTIMPL},getCategory:function(){return E_NOTIMPL},
getAppType:function(){return E_NOTIMPL},uninstallApp:function(){return E_NOTIMPL},silentUninstallApp:function(){return E_NOTIMPL},commitAppState:function(){return E_NOTIMPL}}});var ISmartLocalApp=dpv.ISmartLocalApp;Njl.namespace("dpv");dpv.ISmartLocalAppEvents=Njl.inherit(IProtocolEvents,{ISmartLocalAppEvents:{}});var ISmartLocalAppEvents=dpv.ISmartLocalAppEvents;Njl.namespace("dpv");
dpv.ISmartProgress=Njl.inherit(IUnknown,{ISmartProgress:{getPID:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},getPackageName:function(){return E_NOTIMPL},getStatusString:function(){return E_NOTIMPL},getElapsedSeconds:function(){return E_NOTIMPL},getRemainingSeconds:function(){return E_NOTIMPL},getProgressPercentage:function(){return E_NOTIMPL}}});var ISmartProgress=dpv.ISmartProgress;Njl.namespace("dpv");dpv.ISmartProgressEvents=Njl.inherit(IProtocolEvents,{ISmartProgressEvents:{}});
var ISmartProgressEvents=dpv.ISmartProgressEvents;Njl.namespace("dpv");
dpv.IP2PManager=Njl.inherit(IUnknown,{IP2PManager:{updateP2PConfigurations:function(){return E_NOTIMPL},commitP2PConfigurations:function(){return E_NOTIMPL},getDeviceId:function(){return E_NOTIMPL},getP2PStatus:function(){return E_NOTIMPL},getNetworkConn:function(){return E_NOTIMPL},getP2PState:function(){return E_NOTIMPL},getProxyServerEnableStatus:function(){return E_NOTIMPL},putProxyServerEnableStatus:function(){return E_NOTIMPL},getProxyType:function(){return E_NOTIMPL},putProxyType:function(){return E_NOTIMPL},
getProxyAddr:function(){return E_NOTIMPL},putProxyAddr:function(){return E_NOTIMPL},getProxyPort:function(){return E_NOTIMPL},putProxyPort:function(){return E_NOTIMPL},getProxyUsername:function(){return E_NOTIMPL},putProxyUsername:function(){return E_NOTIMPL},getProxyPass:function(){return E_NOTIMPL},putProxyPass:function(){return E_NOTIMPL},getSpecConnEnableStatus:function(){return E_NOTIMPL},putSpecConnEnableStatus:function(){return E_NOTIMPL},getSpecConnProtocol:function(){return E_NOTIMPL},putSpecConnProtocol:function(){return E_NOTIMPL},
getSpecConnPort:function(){return E_NOTIMPL},putSpecConnPort:function(){return E_NOTIMPL},getSecEncryptEnableStatus:function(){return E_NOTIMPL},putSecEncryptEnableStatus:function(){return E_NOTIMPL},getSecFirewallEnableStatus:function(){return E_NOTIMPL},putSecFirewallEnableStatus:function(){return E_NOTIMPL},getLogDebugLevel:function(){return E_NOTIMPL},putLogDebugLevel:function(){return E_NOTIMPL},getLogMaxEntries:function(){return E_NOTIMPL},putLogMaxEntries:function(){return E_NOTIMPL},getLogFlushEntries:function(){return E_NOTIMPL},
putLogFlushEntries:function(){return E_NOTIMPL},restartP2P:function(){return E_NOTIMPL},updateRemoteAccessList:function(){return E_NOTIMPL},commitRemoteAccessList:function(){return E_NOTIMPL},getP2PRemoteUsers:function(){return E_NOTIMPL},appendP2PRemoteUser:function(){return E_NOTIMPL},removeP2PRemoteUser:function(){return E_NOTIMPL},queryP2PRemoteUsers:function(){return E_NOTIMPL},getP2PQueryUsers:function(){return E_NOTIMPL},startP2P:function(){return E_NOTIMPL},stopP2P:function(){return E_NOTIMPL},
updateReadyDropStatus:function(){return E_NOTIMPL},getReadyDropStatus:function(){return E_NOTIMPL},getReadyDropVolume:function(){return E_NOTIMPL},commitReadyDropVolume:function(){return E_NOTIMPL},commitReadyDropStatus:function(){return E_NOTIMPL},updateDiscoverServiceStatus:function(){return E_NOTIMPL},getDiscoverServiceStatus:function(){return E_NOTIMPL},commitDiscoverServiceStatus:function(){return E_NOTIMPL}}});var IP2PManager=dpv.IP2PManager;Njl.namespace("dpv");
dpv.IP2PManagerEvents=Njl.inherit(IProtocolEvents,{IP2PManagerEvents:{}});var IP2PManagerEvents=dpv.IP2PManagerEvents;
dpv.IUpsConfig=Njl.inherit(IUnknown,{IUpsConfig:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getDescription:function(){return E_NOTIMPL},putDescription:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},putType:function(){return E_NOTIMPL},getSnmpAddress:function(){return E_NOTIMPL},putSnmpAddress:function(){return E_NOTIMPL},getSnmpCommunity:function(){return E_NOTIMPL},putSnmpCommunity:function(){return E_NOTIMPL},getSnmpMibs:function(){return E_NOTIMPL},
putSnmpMibs:function(){return E_NOTIMPL},getShutDownThreshold:function(){return E_NOTIMPL},putShutDownThreshold:function(){return E_NOTIMPL},getRemoteUserName:function(){return E_NOTIMPL},putRemoteUserName:function(){return E_NOTIMPL},getRemotePassword:function(){return E_NOTIMPL},putRemotePassword:function(){return E_NOTIMPL},getRemoteAddress:function(){return E_NOTIMPL},putRemoteAddress:function(){return E_NOTIMPL},getLocalAddress:function(){return E_NOTIMPL},putLocalAddress:function(){return E_NOTIMPL},
getLocalEnabled:function(){return E_NOTIMPL},putLocalEnabled:function(){return E_NOTIMPL},getShutdownThreshold:function(){return E_NOTIMPL},putShutdownThreshold:function(){return E_NOTIMPL},getUpsStatus:function(){return E_NOTIMPL},getUpsRawStatus:function(){return dpv.gp(this.xupsconfig,"ups_raw_status")},getUpsModel:function(){return E_NOTIMPL},getUpsMfr:function(){return E_NOTIMPL},getUpsSerial:function(){return E_NOTIMPL}}});var IUpsConfig=dpv.IUpsConfig;Njl.namespace("dpv");
dpv.IUpsConfigManager=Njl.inherit(IUnknown,{IUpsConfigManager:{UpdateUpsConfigs:function(){return E_NOTIMPL},getUpsConfigs:function(){return E_NOTIMPL},AddSnmpUpsConfig:function(){return E_NOTIMPL},AddRemoteUpsConfig:function(){return E_NOTIMPL},CommitUpsConfig:function(){return E_NOTIMPL},DeleteUpsConfig:function(){return E_NOTIMPL}}});var IUpsConfigManager=dpv.IUpsConfigManager;Njl.namespace("dpv");dpv.IUpsConfigManagerEvents=Njl.inherit(IProtocolEvents,{IUpsConfigManagerEvents:{}});
var IUpsConfigManagerEvents=dpv.IUpsConfigManagerEvents;Njl.namespace("dpv");dpv.IFWPackage=Njl.inherit(IUnknown,{IFWPackage:{getName:function(){return E_NOTIMPL},getVersion:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL}}});var IFWPackage=dpv.IFWPackage;Njl.namespace("dpv");
dpv.IP2PQueryUser=Njl.inherit(IUnknown,{IP2PQueryUser:{getUserId:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL},getFirstName:function(){return E_NOTIMPL},getLastName:function(){return E_NOTIMPL},getEmail:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL}}});var IP2PQueryUser=dpv.IP2PQueryUser;Njl.namespace("dpv");dpv.IP2PRemoteUser=Njl.inherit(IUnknown,{IP2PRemoteUser:{getFullName:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL},getChannel:function(){return E_NOTIMPL}}});
var IP2PRemoteUser=dpv.IP2PRemoteUser;Njl.namespace("dpv");dpv.IDropBox=Njl.inherit(IUnknown,{IDropBox:{getDropBoxState:function(){return E_NOTIMPL},putDropBoxState:function(){return E_NOTIMPL}}});var IDropBox=dpv.IDropBox;Njl.namespace("dpv");dpv.IDropBoxShare=Njl.inherit(IUnknown,{IDropBoxShare:{getDropBoxShareId:function(){return E_NOTIMPL},getDropBoxShareName:function(){return E_NOTIMPL},getSelectedShare:function(){return E_NOTIMPL}}});var IDropBoxShare=dpv.IDropBoxShare;Njl.namespace("dpv");
dpv.IAmazon=Njl.inherit(IUnknown,{IAmazon:{getAmazonState:function(){return E_NOTIMPL},putAmazonState:function(){return E_NOTIMPL}}});var IAmazon=dpv.IAmazon;Njl.namespace("dpv");dpv.IAmazonShare=Njl.inherit(IUnknown,{IAmazonShare:{getAmazonShareId:function(){return E_NOTIMPL},getAmazonShareName:function(){return E_NOTIMPL},getSelectedShares:function(){return E_NOTIMPL}}});var IAmazonShare=dpv.IAmazonShare;Njl.namespace("dpv");
dpv.IMediaBackup=Njl.inherit(IUnknown,{IMediaBackup:{getEnabled:function(){return E_NOTIMPL},putEnabled:function(){return E_NOTIMPL},getDeleteSource:function(){return E_NOTIMPL},putDeleteSource:function(){return E_NOTIMPL},getRoot:function(){return E_NOTIMPL},putRoot:function(){return E_NOTIMPL}}});var IMediaBackup=dpv.IMediaBackup;Njl.namespace("dpv");
dpv.IMediaBackupStatus=Njl.inherit(IUnknown,{IMediaBackupStatus:{getStatus:function(){return E_NOTIMPL},getStatusResult:function(){return E_NOTIMPL},getTotalBytes:function(){return E_NOTIMPL},getTotalFiles:function(){return E_NOTIMPL},getCopiedFiles:function(){return E_NOTIMPL},getSpeed:function(){return E_NOTIMPL}}});var IMediaBackupStatus=dpv.IMediaBackupStatus;Njl.namespace("dpv");
dpv.IShareProtocolDFS=Njl.inherit(IUnknown,{IShareProtocolDFS:{getName:function(){return E_NOTIMPL},getAddress:function(){return E_NOTIMPL},getRemoteShare:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},putAddress:function(){return E_NOTIMPL},putRemoteShare:function(){return E_NOTIMPL}}});var IShareProtocolDFS=dpv.IShareProtocolDFS;Njl.namespace("dpv");dpv.IStatsManager=Njl.inherit(IUnknown,{IStatsManager:{UpdateZfsArcStats:function(){return E_NOTIMPL}}});var IStatsManager=dpv.IStatsManager;
Njl.namespace("dpv");dpv.IStatsManagerEvents=Njl.inherit(IProtocolEvents,{IStatsManagerEvents:{OnZfsArcStatsUpdate:function(){return E_NOTIMPL}}});var IStatsManagerEvents=dpv.IStatsManagerEvents;Njl.namespace("dpv");dpv.IZFSVolumeScheduleManager=Njl.inherit(IUnknown,{IZFSVolumeScheduleManager:{UpdateSchedules:function(){return E_NOTIMPL},getSchedules:function(){return E_NOTIMPL},AddSchedule:function(){return E_NOTIMPL},CommitSchedule:function(){return E_NOTIMPL},RemoveSchedule:function(){return E_NOTIMPL}}});
var IZFSVolumeScheduleManager=dpv.IZFSVolumeScheduleManager;Njl.namespace("dpv");dpv.IZFSVolumeSchedule=Njl.inherit(IUnknown,{IZFSVolumeSchedule:{IsDirty:function(){return E_NOTIMPL},IsMarkedToDelete:function(){return E_NOTIMPL},MarkToDelete:function(){return E_NOTIMPL},getId:function(){return E_NOTIMPL}}});var IZFSVolumeSchedule=dpv.IZFSVolumeSchedule;Njl.namespace("dpv");dpv.IZFSVolumeScheduleManagerEvents=Njl.inherit(IProtocolEvents,{IZFSVolumeScheduleManagerEvents:{}});
var IZFSVolumeScheduleManagerEvents=dpv.IZFSVolumeScheduleManagerEvents;Njl.namespace("dpv");dpv.IHomeFolderOptions=Njl.inherit(IUnknown,{IHomeFolderOptions:{}});var IHomeFolderOptions=dpv.IHomeFolderOptions;Njl.namespace("dpv");
dpv.IShareAcl=Njl.inherit(IUnknown,{IShareAcl:{getId:function(){return E_NOTIMPL},putId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},putType:function(){return E_NOTIMPL},getPermissions:function(){return E_NOTIMPL},putPermissions:function(){return E_NOTIMPL}}});var IShareAcl=dpv.IShareAcl;Njl.namespace("dpv");
dpv.IShareAclList=Njl.inherit(IUnknown,{IShareAclList:{getUserAcls:function(){return E_NOTIMPL},getGroupAcls:function(){return E_NOTIMPL},getUserOwnerAcl:function(){return E_NOTIMPL},getGroupOwnerAcl:function(){return E_NOTIMPL},getMaskAcl:function(){return E_NOTIMPL},getOtherAcl:function(){return E_NOTIMPL}}});var IShareAclList=dpv.IShareAclList;Njl.namespace("dpv");
dpv.IUserHomeFolder=Njl.inherit(IUnknown,{IUserHomeFolder:{getSizeLimit:function(){return E_NOTIMPL},putSizeLimit:function(){return E_NOTIMPL},getSizeUsed:function(){return E_NOTIMPL},getSnapProtectionEnabled:function(){return E_NOTIMPL},putSnapProtectionEnabled:function(){return E_NOTIMPL},getVisibleSnapshot:function(){return E_NOTIMPL},putVisibleSnapshot:function(){return E_NOTIMPL},getVisibleSnapFolder:function(){return E_NOTIMPL},putVisibleSnapFolder:function(){return E_NOTIMPL}}});
var IUserHomeFolder=dpv.IUserHomeFolder;Njl.namespace("dpv");dpv.IUserTimeMachine=Njl.inherit(IUnknown,{IUserTimeMachine:{getEnabled:function(){return E_NOTIMPL},putEnabled:function(){return E_NOTIMPL},getSizeLimit:function(){return E_NOTIMPL},putSizeLimit:function(){return E_NOTIMPL},getUsedGB:function(){return E_NOTIMPL}}});var IUserTimeMachine=dpv.IUserTimeMachine;Njl.namespace("dpv");
dpv.IHFSnapshot=Njl.inherit(IUnknown,{IHFSnapshot:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getUserId:function(){return E_NOTIMPL},putUserId:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},getCreationDate:function(){return E_NOTIMPL},getPath:function(){return E_NOTIMPL}}});var IHFSnapshot=dpv.IHFSnapshot;Njl.namespace("dpv");
dpv.IHFSnapshotsManager=Njl.inherit(IUnknown,{IHFSnapshotsManager:{UpdateSnapshots:function(){return E_NOTIMPL},createSnapshot:function(){return E_NOTIMPL},AddSnapshot:function(){return E_NOTIMPL},RollbackSnapshot:function(){return E_NOTIMPL},DeleteSnapshot:function(){return E_NOTIMPL}}});var IHFSnapshotsManager=dpv.IHFSnapshotsManager;Njl.namespace("dpv");
dpv.INetworkVLAN=Njl.inherit(IUnknown,{INetworkVLAN:{getId:function(){return E_NOTIMPL},putId:function(){return E_NOTIMPL},getBase:function(){return E_NOTIMPL},putBase:function(){return E_NOTIMPL}}});var INetworkVLAN=dpv.INetworkVLAN;Njl.namespace("dpv");dpv.INetworkVLANManager=Njl.inherit(IUnknown,{INetworkVLANManager:{UpdateVLANs:function(){return E_NOTIMPL},getVLANs:function(){return E_NOTIMPL},createVLAN:function(){return E_NOTIMPL},AddVLAN:function(){return E_NOTIMPL},RemoveVLAN:function(){return E_NOTIMPL}}});
var INetworkVLANManager=dpv.INetworkVLANManager;Njl.namespace("dpv");dpv.INetworkVLANManagerEvents=Njl.inherit(IProtocolEvents,{INetworkVLANManagerEvents:{}});var INetworkVLANManagerEvents=dpv.INetworkVLANManagerEvents;Njl.namespace("dpv");dpv.INetworkRoute=Njl.inherit(IUnknown,{INetworkRoute:{getDestCIDRAddress:function(){return E_NOTIMPL},putDestCIDRAddress:function(){return E_NOTIMPL}}});var INetworkRoute=dpv.INetworkRoute;Njl.namespace("dpv");
dpv.ISnapshotSchedule=Njl.inherit(IUnknown,{ISnapshotSchedule:{getConfig:function(){return E_NOTIMPL},putConfig:function(){return E_NOTIMPL}}});var ISnapshotSchedule=dpv.ISnapshotSchedule;Njl.namespace("dpv");dpv.ISimpleShare=Njl.inherit(IUnknown,{ISimpleShare:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},isLUN:function(){return E_NOTIMPL},isReadyDRShare:function(){return E_NOTIMPL}}});var ISimpleShare=dpv.ISimpleShare;Njl.namespace("dpv");
dpv.ICloudStorageManager=Njl.inherit(IUnknown,{ICloudStorageManager:{updateConnectionStatus:function(){return E_NOTIMPL},updateConnections:function(){return E_NOTIMPL},getConnections:function(){return E_NOTIMPL},deleteConnections:function(){return E_NOTIMPL},createConnection:function(){return E_NOTIMPL},addConnection:function(){return E_NOTIMPL},putConnection:function(){return E_NOTIMPL},deleteConnection:function(){return E_NOTIMPL},createSession:function(){return E_NOTIMPL},addSession:function(){return E_NOTIMPL},
putSession:function(){return E_NOTIMPL},deleteSession:function(){return E_NOTIMPL},updateConnectionLog:function(){return E_NOTIMPL},getConnectionLog:function(){return E_NOTIMPL},updateBuckets:function(){return E_NOTIMPL},getBuckets:function(){return E_NOTIMPL},addBucket:function(){return E_NOTIMPL},updateDirectories:function(){return E_NOTIMPL},getDirectories:function(){return E_NOTIMPL},addDirectory:function(){return E_NOTIMPL},updateBucketLocations:function(){return E_NOTIMPL},getBucketLocations:function(){return E_NOTIMPL},
cancelMigration:function(){return E_NOTIMPL}}});var ICloudStorageManager=dpv.ICloudStorageManager;dpv.ICloudStorageManagerEvents=Njl.inherit(IProtocolEvents,{ICloudStorageManagerEvents:{}});var ICloudStorageManagerEvents=dpv.ICloudStorageManagerEvents;Njl.namespace("dpv");
dpv.ICloudStorageAmazonS3=Njl.inherit(IUnknown,{ICloudStorageAmazonS3:{updateBuckets:function(){return E_NOTIMPL},getBuckets:function(){return E_NOTIMPL},addBucket:function(){return E_NOTIMPL},updateBucketLocations:function(){return E_NOTIMPL},getBucketLocations:function(){return E_NOTIMPL}}});var ICloudStorageAmazonS3=dpv.ICloudStorageAmazonS3;Njl.namespace("dpv");
dpv.ICloudStorageConnection=Njl.inherit(IUnknown,{ICloudStorageConnection:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getAKey:function(){return E_NOTIMPL},putAKey:function(){return E_NOTIMPL},getSKey:function(){return E_NOTIMPL},putSKey:function(){return E_NOTIMPL},getBucketName:function(){return E_NOTIMPL},putBucketName:function(){return E_NOTIMPL},getRegion:function(){return E_NOTIMPL},putRegion:function(){return E_NOTIMPL},getContainerName:function(){return E_NOTIMPL},
putContainerName:function(){return E_NOTIMPL},getServer:function(){return E_NOTIMPL},putServer:function(){return E_NOTIMPL},getStorageClass:function(){return E_NOTIMPL},putStorageClass:function(){return E_NOTIMPL},getPartSizeMB:function(){return E_NOTIMPL},putPartSizeMB:function(){return E_NOTIMPL},getPollingSec:function(){return E_NOTIMPL},putPollingSec:function(){return E_NOTIMPL},getMaxUploadKBS:function(){return E_NOTIMPL},putMaxUploadKBS:function(){return E_NOTIMPL},getMaxDownloadKBS:function(){return E_NOTIMPL},
putMaxDownloadKBS:function(){return E_NOTIMPL},getServerEncryption:function(){return E_NOTIMPL},putServerEncryption:function(){return E_NOTIMPL},getSessions:function(){return E_NOTIMPL}}});var ICloudStorageConnection=dpv.ICloudStorageConnection;Njl.namespace("dpv");
dpv.ICloudStorageSession=Njl.inherit(IUnknown,{ICloudStorageSession:{getId:function(){return E_NOTIMPL},getConnectionId:function(){return E_NOTIMPL},putConnectionId:function(){return E_NOTIMPL},getLocalPath:function(){return E_NOTIMPL},putLocalPath:function(){return E_NOTIMPL},getRemotePath:function(){return E_NOTIMPL},putRemotePath:function(){return E_NOTIMPL},getSyncDirection:function(){return E_NOTIMPL},putSyncDirection:function(){return E_NOTIMPL}}});var ICloudStorageSession=dpv.ICloudStorageSession;
Njl.namespace("dpv");dpv.ICloudStatus=Njl.inherit(IUnknown,{ICloudStatus:{getJoined:function(){return E_NOTIMPL},getEnabled:function(){return E_NOTIMPL},getConn_Id:function(){return E_NOTIMPL},getConn_Type:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getUser_Name:function(){return E_NOTIMPL},getUsed:function(){return E_NOTIMPL},getCapacity:function(){return E_NOTIMPL},getFail_Code:function(){return E_NOTIMPL}}});var ICloudStatus=dpv.ICloudStatus;Njl.namespace("dpv");
dpv.IInsightAgent=Njl.inherit(IUnknown,{IInsightAgent:{getRegistered:function(){return E_NOTIMPL},getRConnected:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL}}});var IInsightAgent=dpv.IInsightAgent;Njl.namespace("dpv");
dpv.INetworkProxyServer=Njl.inherit(IUnknown,{INetworkProxyServer:{getId:function(){return E_NOTIMPL},getProtocol:function(){return E_NOTIMPL},putProtocol:function(){return E_NOTIMPL},getAddress:function(){return E_NOTIMPL},putAddress:function(){return E_NOTIMPL},getPort:function(){return E_NOTIMPL},putPort:function(){return E_NOTIMPL},getUsername:function(){return E_NOTIMPL},putUsername:function(){return E_NOTIMPL},getPassword:function(){return E_NOTIMPL},putPassword:function(){return E_NOTIMPL}}});
var INetworkProxyServer=dpv.INetworkProxyServer;Njl.namespace("dpv");dpv.INetworkProxyManager=Njl.inherit(IUnknown,{INetworkProxyManager:{UpdateServers:function(){return E_NOTIMPL},getServers:function(){return E_NOTIMPL},createServer:function(){return E_NOTIMPL},AddServer:function(){return E_NOTIMPL},CommitServer:function(){return E_NOTIMPL},RemoveServer:function(){return E_NOTIMPL},RemoveAllServers:function(){return E_NOTIMPL},TestConnection:function(){return E_NOTIMPL}}});
var INetworkProxyManager=dpv.INetworkProxyManager;dpv.INetworkProxyManagerEvents=Njl.inherit(IProtocolEvents,{INetworkProxyManagerEvents:{OnTestConnection:function(){}}});var INetworkProxyManagerEvents=dpv.INetworkProxyManagerEvents;Njl.namespace("dpv");
dpv.nmlerr=Njl.inherit(CComObjectRoot,INMLError,IXDomNode,{constructor:function(){dpv.nmlerr.superclass.constructor.apply(this,arguments)},INMLError:{getErrorCode:function(){return this.code},getErrorCause:function(){return this.cause},getErrorDetails:function(){return this.desc}},IXDomNode:{loadFromXml:function(a){var b=a.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:error"),c=a.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:result/xs:command-s/message/error"),d=a.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:result/xs:command-s");
if(b){this.code=dpv.x2t(b.selectSingleNode("xs:error-code"));this.cause=dpv.x2t(b.selectSingleNode("xs:error-cause"));this.desc=dpv.x2t(b.selectSingleNode("xs:error-details"))}else if(c){this.code=dpv.x2t(c.selectSingleNode("code"));this.desc=this.cause=dpv.x2t(c.selectSingleNode("message"))}else if(d){this.code=dpv.x2t(d.selectSingleNode("xs:command-error"));this.cause=this.desc=dpv.x2t(d.selectSingleNode("xs:command-output"))}else{this.code=dpv.x2t(a.selectSingleNode("xs:error-code"));this.cause=
dpv.x2t(a.selectSingleNode("xs:error-cause"));this.desc=dpv.x2t(a.selectSingleNode("xs:error-details"))}return S_OK}}});Njl.namespace("dpv");
dpv.xmlEnvelope=function(a,b){dpv.NMLGUID=dpv.NMLGUID?dpv.NMLGUID:"dpv_"+Date.parse(new Date);return String.format('<?xml version="1.0" encoding="UTF-8"?>             <xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="{0}" dst="nas">                <xs:transaction id="{1}">                    {2}                </xs:transaction>            </xs:nml>',dpv.NMLGUID,b?b:Njl.id(),a)};
dpv.xprop=Njl.inherit(CComEventsObjectRoot("IXPropertyListEvents"),IXPropertyList,{constructor:function(a){dpv.xprop.superclass.constructor.apply(this,arguments);CComQIPtr(this,"IXPropertyList").putXml(a)},getPropertyAbsolute:function(a,b){if(a)if(a=a.selectSingleNode("./"+b))return a.getNodeText();return E_FAIL},putPropertyAbsolute:function(a,b,c){if(a)if(a=a.selectSingleNode("./"+b))if(a.setNodeText(c))return S_OK;return E_FAIL},getCountAbsolute:function(a){if(a)if(a=a.selectNodes("./*"))return a.length;
return-1},IXPropertyList:{getProperty:function(a){if(this.xdoc)if(a=this.xdoc.selectSingleNode("./"+a)){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()}return E_FAIL},putProperty:function(a,b){if(this.xdoc){var c=this.xdoc.selectSingleNode("./"+a)||this.xdoc.appendNode(a);if(c)if(c.setNodeText(b)){this.Fire("OnChanged",[a,b,"changed"]);return S_OK}}return E_FAIL},getXml:function(){if(this.xdoc)return this.xdoc;return E_FAIL},putXml:function(a){if(Njl.isDefined(a)&&
Njl.isDefined(a.isValid)&&a.isValid()){this.xdoc=a;this.Fire("OnChanged",[null,null,"cleaned"]);return S_OK}return E_INVALIDARG},getCount:function(){if(this.xdoc){var a=this.xdoc.selectNodes("./*");if(a)return a.length}return-1},rmProperty:function(){return E_FAIL}}});
dpv.collection=Njl.inherit(CComObjectRoot,{constructor:function(a,b){dpv.collection.superclass.constructor.call(this);this._a=a;this._i=b},getItemBy:function(a,b){if(this._a&&this._a.length)for(var c=0,d=this._a.length;c<d;++c){var e=this._i?CComQIPtr(this._a[c],this._i):this._a[c];if(e)if(e["get"+a].call(this)==b)return e}},getCount:function(){return this._a?this._a.length:undefined},getItem:function(a){return this._a&&this._a.length?CComQIPtr(this._a[a],this._i):undefined}});
dpv.base=Njl.inherit(CComObjectRoot,IXDomNode,IProtocol,{constructor:function(){dpv.base.superclass.constructor.apply(this,arguments);this.__xid=Njl.idn();this.children=[];this.children.hash={};this.children.append=function(a){this.hash[a.getXDomId()]={o:a,i:this.length};this.push(a)};this.children.clear=function(){this.splice(0,this.length);this.hash={}};this.children.getItemBy=function(a){return this.hash[a]};this.children.removeItemBy=function(a){var b=this.hash[a];if(b){this.splice(b.i,1);this.hash[a]=
undefined;delete this.hash[a];a=0;for(var c in this.hash){this.hash[c].i=a;a++}return true}return false}},IXDomNode:{getXDomId:function(){return this.__xid},putParent:function(a){this.parent=CComQIPtr(a,"IXDomNode");return S_OK},getParent:function(){return Njl.isDefined(this.parent)?this.parent:null},putRoot:function(a){this.root=CComQIPtr(a,"IXDomNode");for(var b=0,c=this.children.length;b<c;++b)this.children[b].putRoot(a);return S_OK},getRoot:function(){return Njl.isDefined(this.root)?this.root:
CComQIPtr(this,"IXDomNode")},getChildren:function(){return this.children},getChildByTrait:function(a){for(var b=0,c=this.children.length;b<c;++b)if(CComQIPtr(this.children[b],a))return this.children[b];return null},appendChild:function(a){var b=CComQIPtr(a,"IXDomNode");if(b){if(this.children.getItemBy(b.getXDomId()))return a;var c=CComQIPtr(this,"IXDomNode"),d=Njl.isDefined(c.getRoot())?c.getRoot():c;b.putRoot(d);b.putParent(c);this.children.append(b);b.Initialize(d,c);return a}return E_INVALIDARG},
removeChild:function(a){if(a=CComQIPtr(a,"IXDomNode")){if(this.children.removeItemBy(a.getXDomId())){a.putRoot(undefined);a.putParent(undefined);return S_OK}return S_FALSE}return E_INVALIDARG},removeAll:function(){for(var a=0,b=this.children.length;a<b;++a){this.children[a].putRoot(undefined);this.children[a].putParent(undefined)}this.children.clear();return S_OK},clone:function(){var a=null,b=this.root,c=this.parent;this.parent=undefined;CComQIPtr(this,"IXDomNode").putRoot(undefined);a=Njl.clone(this,
true);a.__uuid_obj_id=undefined;this.parent=c;CComQIPtr(this,"IXDomNode").putRoot(b);a.parent=c;CComQIPtr(a,"IXDomNode").putRoot(b);a.__xid=Njl.idn();b=CComQIPtr(this,"IXDomNode").getXml();if(b!=E_NOTIMPL)if(b=b.cloneNode(true)){a=CComQIPtr(a,"IXDomNode");if(a.loadFromXml(b.selectNodes(".")[0])==S_OK)return a}return null}},IProtocol:{getXmlConnection:function(){return this.m_conn?this.m_conn:E_FAIL},getTargetDevice:function(){return CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice")},getResponse:function(){return this.xmlResponse?
this.xmlResponse:E_FAIL},getRequest:function(){return this.xmlRequest?this.xmlRequest:E_FAIL},getPendingState:function(){if(this.m_conn)return this.m_conn.isLoading();return E_FAIL},Send:function(a,b,c,d){return this.sendXml(a,b,undefined,undefined,c,d)},Abort:function(){if(this.m_conn&&this.m_conn.isLoading()){this.m_conn.abort();return S_OK}return E_FAIL},getLastNMLError:function(){return this.nmlLastError?this.nmlLastError:null}},sendXml:function(a,b,c,d,e,f){var g=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),
"IRequestRoot");if(g&&a){this.xmlRequest=g.getXmlRequest(a,b,c,d,e,f);if(!this.m_conn){this.m_conn=!this.xmlRequest.scriptTag?new Njl.data.Connection({}):new Njl.Crx.Connection({});this.m_conn.on("requestexception",this.RequestFailed,this);this.m_conn.on("requestcomplete",this.RequestComplete,this)}c=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";if(this.root&&this.root.__s.IRCDevice){d=this.root.__s.IRCDevice.isLocalSessionInitialized.call(this.root.__s);e=this.root.__s.IRCDevice.getLocalIP.call(this.root.__s);
c=this.root.__s.IRCDevice.getAlias.call(this.root.__s)+(d?"("+e+")":"")+" - "+c}d=this.xmlRequest.params.request;if(/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d))d=Njl.utils.Base64.decode(d);d=Njl.util.Format.htmlEncode(d);_TRACE("WebCall [lparam = "+b+"]",d,_TRACE.INFO,c);if(a.repeatLocalSessionRequest)delete a.repeatLocalSessionRequest;else this.Fire("OnNTPending",[CComQIPtr(this,"IUnknown"),b]);if(a=this.m_conn.request(this.xmlRequest)){this.xmlRequest.id=a.tId;Njl._TRACE_REQUEST(this.xmlRequest.id,
(b||"").toString(),c,Njl._TRACE_REQUEST.PENDING,d)}return S_OK}return E_FAIL},RequestComplete:function(a,b,c){try{this.xmlResponse=b;var d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";if(this.root&&this.root.__s.IRCDevice){var e=this.root.__s.IRCDevice.isLocalSessionInitialized.call(this.root.__s),f=this.root.__s.IRCDevice.getLocalIP.call(this.root.__s);d=this.root.__s.IRCDevice.getAlias.call(this.root.__s)+(e?"("+f+")":"")+" - "+d}a="";if(b.responseText&&b.responseText.length<102400)a=
Njl.util.Format.htmlEncode(b.responseText);else if(b.responseText&&b.responseText.length)a="Message > 100k has been omitted";_TRACE("WebResp [lparam = "+c.lp+"]",a,_TRACE.INFO,d);Njl._TRACE_REQUEST(c.id,(c.lp||"").toString(),d,Njl._TRACE_REQUEST.SUCCESS,a);this.Fire("OnNTReady",[CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnPending",[CComQIPtr(this,"IUnknown"),c.lp]);a="Invalid XML";if(b&&b.responseXML){var g=b.responseXML;if(Njl.isIE){g=b.responseXML.xml&&b.responseXML.xml.length&&b.responseXML.xml.length>
0?b.responseXML:String(b.responseText).replace('xmlns="urn:netgear:nas:readynasd"',"");if(Njl.isString(g))if(b.responseXML.parsed===true){b.responseXML.async="false";b.responseXML.loadXML(g);g=b.responseXML}}var h=new Njl.Xml.document(g),k=h.selectSingleNode("xs:nml/xs:transaction/xs:event");if(k=k?k:h.selectSingleNode("xs:nml/xs:transaction/xs:event-close")){a='Invalid XML response, "xs:nml/xs:transaction/xs:event/*" event body is missing';var j=h.selectNodes("xs:nml/xs:transaction/xs:event/*");
if((j=j?j:h.selectNodes("xs:nml/xs:transaction/*"))&&j.length){h=0;for(var m=j.length;h<m;++h){var n=j[h];switch(n.getNodeName()){case "xs:close":case "xs:add-s":case "xs:set-s":case "xs:delete-s":case "xs:custom-s":case "xs:command-s":case "xs:update-s":case "xs:event-close":case "xs:error-s":if(CComQIPtr(this,"IXDomNode").loadFromXml(n,c.lp)==S_OK){a="No error";this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",[S_OK,CComQIPtr(this,"IUnknown"),c.lp]);if(h==m-1)return}else{a=
"Failed to parse event ["+n.getNodeName()+"]";_TRACE(a,n.toString(),_TRACE.ERROR,d)}break;default:a="Unknown event type ["+n.getNodeName()+"]";_TRACE(a,n.toString(),_TRACE.ERROR,d)}}}}else{a='Invalid XML response, "xs:nml/xs:transaction/xs:response" node is missing';var p=h.selectSingleNode("xs:nml/xs:transaction/xs:response");if(p){a='Invalid XML response, "xs:nml/xs:transaction/xs:response/@status" attribute is missing';if(p=p.getAttributeText("status")){a="XML operation failed with code: "+p;if((p==
"success"||p=="queued")&&!h.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:result/xs:command-s/message/error")){j=p=="success"?S_OK:E_PENDING;var o=h.selectNodes("xs:nml/xs:transaction/xs:response/xs:result/*");if(o&&o.length){o=o[0];switch(o.getNodeName()){case "xs:query-s":case "xs:get-s":a="Invalid XML response structure";if(CComQIPtr(this,"IXDomNode").loadFromXml(o,c.lp)==S_OK){this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",[j,CComQIPtr(this,"IUnknown"),c.lp]);
return}break;case "xs:command-s":var q=dpv.xa2t(o,"resource");q=q?q=="true":false;a="Invalid XML response structure";if(!q?true:CComQIPtr(this,"IXDomNode").loadFromXml(o,c.lp)==S_OK){this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",[j,CComQIPtr(this,"IUnknown"),c.lp]);return}break;case "xs:delete-s":a="Invalid XML response structure";if(CComQIPtr(this,"IXDomNode").loadFromXml(o,c.lp)==S_OK||!o.selectNodes("./*")){this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",
[S_OK,CComQIPtr(this,"IUnknown"),c.lp]);return}break;default:this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",[j,CComQIPtr(this,"IUnknown"),c.lp]);return}}else{if(p=="queued"){var r=h.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:queue");r&&r!=E_FAIL&&this.Fire("OnQueue",[r.getAttributeText("id"),CComQIPtr(this,"IUnknown"),c.lp])}this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",[j,CComQIPtr(this,"IUnknown"),c.lp]);return}}else{this.nmlLastError=
CComQIPtr(new dpv.nmlerr,"INMLError");CComQIPtr(this.nmlLastError,"IXDomNode").loadFromXml(h,c.lp);if(this.nmlLastError.getErrorCode()){REPORT_ERROR("<b>NML Error                :</b> "+this.nmlLastError.getErrorCode()+"<br/><b>NML  Cause   :</b> "+this.nmlLastError.getErrorCause()+"<br/><b>NML  Details :</b> "+this.nmlLastError.getErrorDetails()+"<br/><b>Caller       :</b> "+d+"<br/><b>User Data    :</b> "+c.lp+"<br/><b>AJAX URL     :</b> "+c.url+"<br/><br/><b>XHTTP Request :</b><br/>"+Njl.util.Format.htmlEncode(c.params.request)+
"<br/><br/><b>XHTTP X-Requested-With :</b><br/>"+(c.headers?c.headers["X-Requested-With"]:"")+"<br/><b>XHTTP Content-Type :</b><br/>"+(c.headers?c.headers["Content-Type"]:"")+"<br/><br/><b>XHTTP Response:</b><br/>"+Njl.util.Format.htmlEncode(b.responseText),d);this.Fire("OnFailed",[CComQIPtr(this,"IUnknown"),this.nmlLastError,c.lp]);this.Fire("OnDone",[E_FAIL,CComQIPtr(this,"IUnknown"),c.lp])}return}}}}}REPORT_ERROR("<b>XML Error                :</b> "+a+"<br/><b>HTTP Status  :</b> "+b.status+"<br/><b>HTTP Error   :</b> "+
b.statusText+"<br/><b>Caller       :</b> "+d+"<br/><b>User Data    :</b> "+c.lp+"<br/><b>AJAX URL     :</b> "+c.url+"<br/><br/><b>XHTTP Request :</b><br/>"+Njl.util.Format.htmlEncode(c.params.request)+"<br/><br/><b>XHTTP X-Requested-With :</b><br/>"+(c.headers?c.headers["X-Requested-With"]:"")+"<br/><b>XHTTP Content-Type :</b><br/>"+(c.headers?c.headers["Content-Type"]:"")+"<br/><br/><b>XHTTP Response:</b><br/>"+Njl.util.Format.htmlEncode(b.responseText),d);this.nmlLastError=null;this.Fire("OnNTFailed",
[a,CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",[E_FAIL,CComQIPtr(this,"IUnknown"),c.lp]);if(!document.__DEBUG&&!CComQIPtr(this,"IDeviceWebEventSink")){var s=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"INotifySink");s&&s.Fire("OnConnectionLost",[CComQIPtr(s,"IUnknown"),CComQIPtr(this,"IUnknown"),c.lp])}}finally{this.m_conn=this.xmlResponse=undefined}},RequestFailed:function(a,b,c,d){try{this.xmlResponse=b;var e=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";if(this.root&&this.root.__s.IRCDevice){var f=
this.root.__s.IRCDevice.isLocalSessionInitialized.call(this.root.__s),g=this.root.__s.IRCDevice.getLocalIP.call(this.root.__s);e=this.root.__s.IRCDevice.getAlias.call(this.root.__s)+(f?"("+g+")":"")+" - "+e}REPORT_ERROR("<b>HTTP Error   :</b> "+d+"<br/><b>HTTP Status  :</b> "+b.status+"<br/><b>HTTP Error   :</b> "+b.statusText+"<br/><b>Caller       :</b> "+e+"<br/><b>User Data    :</b> "+c.lp+"<br/><b>AJAX URL     :</b> "+c.url+"<br/><br/><b>HTTP Request :</b><br/>"+Njl.util.Format.htmlEncode(c.params.request)+
"<br/><br/><b>HTTP Response:</b><br/>"+Njl.util.Format.htmlEncode(b.responseText),e);this.nmlLastError=null;if(c.isLocalSessionRequest&&(b.status===0||b.status===403||b.status===410)){var h=new String(c.params.request);h.repeatLocalSessionRequest=true;this.sendXml.defer(200,this,[h,c.lp,c.originalUrl,c.type,c.method,c.tm]);this.root&&this.root.__s.IRCDevice&&CComQIPtr(this.root,"IRCDevice").onLocalSessionRequestFailed(a,b,c,d)}else{this.Fire("OnNTFailed",[d,CComQIPtr(this,"IUnknown"),c.lp]);this.Fire("OnDone",
[E_FAIL,CComQIPtr(this,"IUnknown"),c.lp]);if(!document.__DEBUG&&!CComQIPtr(this,"IDeviceWebEventSink")){var k=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"INotifySink");k&&k.Fire("OnConnectionLost",[CComQIPtr(k,"IUnknown"),CComQIPtr(this,"IUnknown"),c.lp])}}Njl._TRACE_REQUEST(c.id,(c.lp||"").toString(),e,Njl._TRACE_REQUEST.FAIL,Njl.util.Format.htmlEncode(b.responseText))}finally{this.m_conn=this.xmlResponse=undefined}}});Njl.namespace("dpv");
dpv.reqroot=Njl.inherit(CComEventsObjectRoot("IRequestRootEvents"),dpv.base,IRequestRoot,{constructor:function(){dpv.reqroot.superclass.constructor.apply(this,arguments);this.m_timeout=7E4;this.jsonp_url=this.m_url="";this.jsonp_flag=false},IRequestRoot:{getTimeOut:function(){return this.m_timeout},putTimeOut:function(a){this.m_timeout=a;return S_OK},getSourceURL:function(){return this.m_url},putSourceURL:function(a){this.m_url=a;return S_OK},getJsonpFlag:function(){return this.jsonp_flag},putJsonpFlag:function(a){this.jsonp_flag=
!!a;return S_OK},getJsonpURL:function(){return this.jsonp_url},putJsonpURL:function(a){this.jsonp_url=a;return S_OK},getXmlRequest:function(a,b,c,d,e,f){var g,h=CComQIPtr(this,"IRequestRoot");if(a){f=f?f:h.getTimeOut();c=c?c:h.getSourceURL();d=d?d:"BIN";e=e?e:"POST";if(g=h.getJsonpFlag()){a=Njl.Utils.Base64.encode(a);c=h.getJsonpURL()||c}g={url:c,params:{request:a},method:e,type:d,timeout:f,lp:b,scriptTag:g}}return g}}});Njl.namespace("dpv");
dpv.fsvol=Njl.inherit(CComObjectRoot,dpv.base,IFSVolume,{constructor:function(){dpv.fsvol.superclass.constructor.apply(this,arguments)},IFSVolume:{getTotalSize:function(){return this.x?this.x.getAttributeText("size"):E_FAIL},getFreeSize:function(){return this.x?this.x.getAttributeText("free"):E_FAIL},getMountPoint:function(){return this.x?this.x.getAttributeText("mount"):E_FAIL},getLable:function(){return this.x?this.x.getAttributeText("label"):E_FAIL},getDescription:function(){return this.x?this.x.getAttributeText("descr"):
E_FAIL},getUUID:function(){return this.x?this.x.getAttributeText("uuid"):E_FAIL},getDevice:function(){return this.x?this.x.getAttributeText("device"):E_FAIL},getSpeed:function(){return this.x?this.x.getAttributeText("speed"):E_FAIL},getLocation:function(){return this.x?this.x.getAttributeText("location"):E_FAIL},getDSize:function(){return this.x?this.x.getAttributeText("d_size"):E_FAIL},getFSFormat:function(){return this.x?this.x.getAttributeText("fsinfo"):E_FAIL},getReadOnly:function(){return this.x?
this.x.getAttributeText("readonly"):E_FAIL},getSerial:function(){return this.x?this.x.getAttributeText("serial"):E_FAIL},getEncrypt:function(){return this.x?this.x.getAttributeText("encrypt"):E_FAIL},getUnlock:function(){return this.x?this.x.getAttributeText("unlock"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.fsaction=Njl.inherit(CComObjectRoot,dpv.base,IFSAction,{constructor:function(){dpv.fsaction.superclass.constructor.apply(this,arguments)},IFSAction:{getId:function(){return dpv.gp(this.xproptlist,"id")},getMethod:function(){return dpv.gp(this.xproptlist,"method")},getStatus:function(){return dpv.gp(this.xproptlist,"status")},getElapsedSeconds:function(){return dpv.gp(this.xproptlist,"elapsed-seconds")},getRemainingSeconds:function(){return dpv.gp(this.xproptlist,"remaining-seconds")},getProgressPercent:function(){return dpv.gp(this.xproptlist,
"progress-percent")},getSourceFolder:function(){return dpv.gp(this.xproptlist,"from-folder")},getDestinationFolder:function(){return dpv.gp(this.xproptlist,"to-folder")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.fsManager=Njl.inherit(CComEventsObjectRoot("IFSManagerEvents"),dpv.base,IFSManager,IDeviceWebEventSinkEvents,{constructor:function(){dpv.fsManager.superclass.constructor.apply(this,arguments)},make_quoted:function(a){if(Njl.isString(a)){var b=function(c){if(c=="<")return"&lt;";else if(c==">")return"&gt;";else if(c=='"')return"&quot;";else if(c=="&")return"&amp;"};return a.replace(/[<>"&]/g,function(c){return b(c)})}return a},IFSManager:{getFsTreeNode:function(a,b,c,d,e){a=this.make_quoted(a);
b=b?b:0;var f=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");d=d||0;e=e||150;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSGrabNode" resource-type="FSGrabNode">                    <request id="{0}" method="fs.grab">                        <param name="path">{1}</param>                        <param name="attr">{2}</param>                        <param name="start_index">{3}</param>                        <param name="count">{4}</param>                    </request>                </xs:get>',
Njl.id(),a,b,d,e)),c,f.getSourceFSURL(),"FORM")},getHomeFsTreeNode:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="" resource-type="Accounts_Based_HomeFolder_Collection">                </xs:get>',Njl.id())),a)},makeFolder:function(a,b){a=this.make_quoted(a);var c=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSMkdir" resource-type="FSMkdir">                    <request id="{0}" method="fs.mkdir">                        <param name="path">{1}</param>                    </request>                </xs:get>',
Njl.id(),a),"mkdir"),b,c.getSourceFSURL(),"FORM")},deleteFolder:function(a,b){Njl.isArray(a)||(a=[a]);var c="";Njl.each(a,function(d){d=this.make_quoted(d);c+=String.format('<param name="path">{0}</param>',d)},this);a=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSRm" resource-type="FSRm">                    <request id="{0}" method="fs.rm">                        {1}                    </request>                </xs:get>',
Njl.id(),c),"rm"),b,a.getSourceFSURL(),"FORM")},removeFolder:function(a,b,c){b=this.make_quoted(b);Njl.isArray(a)||(a=[a]);var d="";Njl.each(a,function(e){e=this.make_quoted(e);d+=String.format('<param name="file-or-folder">{0}</param>',e)},this);a=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="FSRm" resource-type="FSRm">                    <request id="{0}" method="fs.rm">                        {1}                        <param name="from-folder">{2}</param>                    </request>                </xs:command>',
Njl.id(),d,b)),c,a.getSourceFSURL(),"FORM")},moveFolder:function(a,b,c,d){b=this.make_quoted(b);c=this.make_quoted(c);Njl.isArray(a)||(a=[a]);var e="";Njl.each(a,function(f){f=this.make_quoted(f);e+=String.format('<param name="file-or-folder">{0}</param>',f)},this);a=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="FSMv" resource-type="FSMv">                    <request id="{0}" method="fs.mv">                        {1}                        <param name="from-folder">{2}</param>                        <param name="to-folder">{3}</param>                    </request>                </xs:command>',
Njl.id(),e,b,c)),d,a.getSourceFSURL(),"FORM")},copyFolder:function(a,b,c,d){b=this.make_quoted(b);c=this.make_quoted(c);Njl.isArray(a)||(a=[a]);var e="";Njl.each(a,function(f){f=this.make_quoted(f);e+=String.format('<param name="file-or-folder">{0}</param>',f)},this);a=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSCp" resource-type="FSCp">                    <request id="{0}" method="fs.cp">                        {1}                        <param name="from-folder">{2}</param>                        <param name="to-folder">{3}</param>                    </request>                </xs:get>',
Njl.id(),e,b,c)),d,a.getSourceFSURL(),"FORM")},renameFolder:function(a,b,c){a=this.make_quoted(a);b=this.make_quoted(b);var d=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSRename" resource-type="FSRename">                    <request id="{0}" method="fs.rename">                        <param name="old-path">{1}</param>                        <param name="new-name">{2}</param>                    </request>                </xs:get>',
Njl.id(),a,b)),c,d.getSourceFSURL(),"FORM")},abortFSAction:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="BgProcess"/>',Njl.id(),a)),b)},updateVolumes:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSInfo" resource-type="FSInfo">                    <request id="{0}" method="fs.info">                    </request>                </xs:get>',
Njl.id()),"volumes"),a,b.getSourceFSURL(),"FORM")},getVolumes:function(){return this.fsvols?this.fsvols.getChildren():E_FAIL},FormatUSB:function(a,b,c,d,e,f){if(a){var g=a.getDevice().split("/");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="USB">                        <xs:command_name>Format</xs:command_name>                            <xs:args>                                <xs:arg>                                    <UUID>{2}</UUID>                                    <Descr>{3}</Descr>                                    <Device>{4}</Device>                                    <Speed>{5}</Speed>                                    <Location>{6}</Location>                                    <Size>{7}</Size>                                    <Type>{8}</Type>                                    <Label>{9}</Label>                                    <Encryption>{10}</Encryption>                                    <Email>{11}</Email>                                    <Serial>{12}</Serial>                                </xs:arg>                            </xs:args>                     </xs:command>',
Njl.id(),a.getMountPoint(),a.getUUID(),a.getDescription(),g[g.length-1],a.getSpeed(),a.getLocation(),a.getTotalSize(),b,c,d,e,a.getSerial())),f)}return E_FAIL},updateUSBKeys:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="EncryptUsbKeys"/>',Njl.id())),a)},getUSBKeys:function(){return this.usbKeys},removeUSBKey:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="EncryptUsbKeys" />',Njl.id(),
a)),b)},LockUSB:function(a,b){if(a){var c=a.getDevice().split("/");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="USB">                        <xs:command_name>Lock</xs:command_name>                            <xs:args>                                <xs:arg>                                    <UUID>{2}</UUID>                                    <Descr>{3}</Descr>                                    <Device>{4}</Device>                                    <Speed>{5}</Speed>                                    <Location>{6}</Location>                                    <Size>{7}</Size>                                    <Type>{8}</Type>                                    <Label>{9}</Label>                                    <Encryption>1</Encryption>                                </xs:arg>                            </xs:args>                     </xs:command>',
Njl.id(),a.getMountPoint(),a.getUUID(),a.getDescription(),c[c.length-1],a.getSpeed(),a.getLocation(),a.getTotalSize(),"",a.getLable())),b)}return E_FAIL},UnlockUSB:function(a,b,c,d){if(a){var e=a.getDevice().split("/");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="USB">                        <xs:command_name>Unlock</xs:command_name>                            <xs:args>                                <xs:arg>                                    <UUID>{2}</UUID>                                    <Descr>{3}</Descr>                                    <Device>{4}</Device>                                    <Speed>{5}</Speed>                                    <Location>{6}</Location>                                    <Size>{7}</Size>                                    <Type>{8}</Type>                                    <Label>{9}</Label>                                    <Encryption>1</Encryption>                                    <FileName>{10}</FileName>                                    <SaveKey>{12}</SaveKey>                                    <Serial>{11}</Serial>                                </xs:arg>                            </xs:args>                     </xs:command>',
Njl.id(),a.getMountPoint(),a.getUUID(),a.getDescription(),e[e.length-1],a.getSpeed(),a.getLocation(),a.getTotalSize(),"",a.getLable(),b,a.getSerial(),c)),d)}return E_FAIL},updateFilePreview:function(a,b,c,d){a=this.make_quoted(a);var e=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSFilePreview" resource-type="FSFilePreview">                    <request id="{1}" method="fs.preview">                            <param name="path">{2}</param>                            <param name="height">{3}</param>                            <param name="width">{4}</param>                          </request>                </xs:get>',
Njl.id(),Njl.id(),a,b,c)),d,e.getSourceFSURL(),"FORM")},getFSSnapView:function(a,b,c,d){a=this.make_quoted(a);b=b?b:0;var e=c.getShareName(),f=c.getVolumeName(),g=c.getName(),h=c.getType();c=c.getCreationDate();var k=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSSnapView" resource-type="FSSnapView">                    <request id="{0}" method="fs.snap">                        <param name="path">/{3}/{4}</param>                         <param name="relativePath">{1}</param>                         <param name="attr">{2}</param>                         <param name="volume">{3}</param>                        <param name="share">{4}</param>                        <param name="snapshotName">{5}</param>                        <param name="snapshotType">{6}</param>                        <param name="snapshotCreatedOn">{7}</param>                        <param name="action">list</param>                    </request>                </xs:get>',
Njl.id(),a,b,f,e,g,h,c)),d,k.getSourceFSURL(),"FORM")},getFSHFSnapView:function(a,b,c,d){b=this.make_quoted(b);d=d?d:0;var e=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSHFSnapView" resource-type="FSHFSnapView">                    <request id="{0}" method="fs.hfsnap">                        <param name="relativePath">{1}</param>                         <param name="snapshotId">{2}</param>                        <param name="attr">{3}</param>                         <param name="action">list</param>                    </request>                </xs:get>',
Njl.id(),b,c.getId(),d)),a,e.getSourceFSURL(),"FORM")},UpdateSnapFilePreview:function(a,b,c,d,e,f,g){a=this.make_quoted(a);b=b?b:0;var h=c.getShareName(),k=c.getVolumeName(),j=c.getName(),m=c.getType();c=c.getCreationDate();var n=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSSnapFilePreview" resource-type="FSSnapFilePreview">                    <request id="{0}" method="fs.snap">                        <param name="path">/{3}/{4}</param>                        <param name="relativePath">{1}</param>                        <param name="attr">{2}</param>                        <param name="volume">{3}</param>                        <param name="share">{4}</param>                        <param name="snapshotName">{5}</param>                        <param name="snapshotType">{6}</param>                        <param name="snapshotCreatedOn">{7}</param>                        <param name="action">preview</param>                        <param name="width">{8}</param>                        <param name="height">{9}</param>                        <param name="quality">{10}</param>                    </request>                </xs:get>',
Njl.id(),a,b,k,h,j,m,c,e,d,f)),g,n.getSourceFSURL(),"FORM")},UpdateHFSnapFilePreview:function(a,b,c,d,e,f,g){b=this.make_quoted(b);d=d?d:0;c=Njl.isString(c)?c:c.getId();var h=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSHFSnapFilePreview" resource-type="FSHFSnapFilePreview">                    <request id="{0}" method="fs.hfsnap">                        <param name="relativePath">{1}</param>                        <param name="snapshotId">{2}</param>                        <param name="attr">{3}</param>                        <param name="action">preview</param>                        <param name="width">{4}</param>                        <param name="height">{5}</param>                        <param name="quality">{6}</param>                    </request>                </xs:get>',
Njl.id(),b,c,d,f,e,g)),a,h.getSourceFSURL(),"FORM")},UpdateVersionFilePreview:function(a,b,c,d,e,f,g,h,k,j,m){a=this.make_quoted(a);b=b?b:0;var n=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSSnapFilePreview" resource-type="FSSnapFilePreview">                    <request id="{0}" method="fs.snap">                        <param name="path">/{3}/{4}</param>                         <param name="relativePath">{1}</param>                         <param name="attr">{2}</param>                         <param name="volume">{3}</param>                        <param name="share">{4}</param>                        <param name="snapshotName">{5}</param>                        <param name="snapshotType">{6}</param>                        <param name="snapshotCreatedOn">{7}</param>                        <param name="action">preview</param>                        <param name="width">{8}</param>                        <param name="height">{9}</param>                        <param name="quality">{10}</param>                    </request>                </xs:get>',
Njl.id(),a,b,c,d,e,f,g,k,h,j)),m,n.getSourceFSURL(),"FORM")},RestoreSnapFSItem:function(a,b,c,d){a=this.make_quoted(a);b=this.make_quoted(b);var e=c.getShareName(),f=c.getVolumeName(),g=c.getName();c=c.getType();CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="fssnap">                    <SnapshotItem>                        <Path>{1}</Path>                        <DestPath>{2}</DestPath>                        <VolumeName>{3}</VolumeName>                        <ShareName>{4}</ShareName>                        <SnapshotName>{5}</SnapshotName>                        <SnapshotType>{6}</SnapshotType>                    </SnapshotItem>                </xs:add>',
Njl.id(),a,b,f,e,g,c)),d)},RestoreSnapHFFSItem:function(a,b,c,d,e){b=this.make_quoted(b);c=this.make_quoted(c);d=this.make_quoted(d);var f=e.getName();e=e.getType();CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command  id="{0}" resource-type="hf_fssnap">                    <xs:command_name>Restore</xs:command_name>                    <xs:args>                        <xs:arg>                            <HomeDirectory>{1}</HomeDirectory>                        </xs:arg>                        <xs:arg>                            <RelativePath>{2}</RelativePath>                        </xs:arg>                        <xs:arg>                            <DestPath>{3}</DestPath>                        </xs:arg>                        <xs:arg>                            <SnapshotName>{4}</SnapshotName>                        </xs:arg>                        <xs:arg>                            <SnapshotType>{5}</SnapshotType>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c,d,f,e)),a)},getFSVersions:function(a,b){a=this.make_quoted(a);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="fssnap" resource-id="{1}">                </xs:get>',Njl.id(),a)),b,null,null,null,1E9)},RestoreFSVersion:function(a,b,c,d,e,f,g){a=this.make_quoted(a);b=this.make_quoted(b);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="fssnap">                    <SnapshotItem>                        <Path>{1}</Path>                        <DestPath>{2}</DestPath>                        <VolumeName>{3}</VolumeName>                        <ShareName>{4}</ShareName>                        <SnapshotName>{5}</SnapshotName>                        <SnapshotType>{6}</SnapshotType>                    </SnapshotItem>                </xs:add>',
Njl.id(),a,b,c,d,e,f)),g)},getHFFSVersions:function(a,b,c){b=this.make_quoted(b);c=this.make_quoted(c);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command  id="{0}" resource-type="hf_fssnap">                    <xs:command_name>Versions</xs:command_name>                    <xs:args>                        <xs:arg>                            <HomeDirectory>{1}</HomeDirectory>                        </xs:arg>                        <xs:arg>                            <RelativePath>{2}</RelativePath>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c)),a,null,null,null,1E9)},RestoreHFFSVersion:function(a,b,c,d,e,f){b=this.make_quoted(b);c=this.make_quoted(c);d=this.make_quoted(d);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command  id="{0}" resource-type="hf_fssnap">                    <xs:command_name>Restore</xs:command_name>                    <xs:args>                        <xs:arg>                            <HomeDirectory>{1}</HomeDirectory>                        </xs:arg>                        <xs:arg>                            <RelativePath>{2}</RelativePath>                        </xs:arg>                        <xs:arg>                            <DestPath>{3}</DestPath>                        </xs:arg>                        <xs:arg>                            <SnapshotName>{4}</SnapshotName>                        </xs:arg>                        <xs:arg>                            <SnapshotType>{5}</SnapshotType>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c,d,e,f)),a)},search:function(a,b){var c="",d="",e="",f="",g="",h="",k="",j="";b.startIndex=b.startIndex||0;b.count=b.count||150;k=String.format('<xs:page direction="1" start-index="{0}" count="{1}"/>',b.startIndex,b.count);if(b.keyword)c=String.format('<xs:equal property="KeyWord"><xs:value><![CDATA[{0}]]\></xs:value></xs:equal>',b.keyword);if(b.location)d=String.format('<xs:equal property="Location" value="{0}" />',this.make_quoted(b.location));if(b.content)e='<xs:equal property="SearchContent" value="yes" />';
if(b.date&&b.date.type){f=String.format('<xs:equal property="DateType" value="{0}" />',b.date.type);if(b.date.min)f+=String.format('<xs:equal property="DatetimeStart" value="{0}" />',b.date.min);if(b.date.max)f+=String.format('<xs:equal property="DatetimeEnd" value="{0}" />',b.date.max)}if(b.size&&b.size.op&&b.size.value)g=String.format('<xs:{0} property="Size" value="{1}" />',b.size.op,b.size.value);if(b.type)h=String.format('<xs:equal property="FileType" value="{0}" />',b.type);if(b.ext)j=String.format('<xs:equal property="Extension" value="{0}" />',
this.make_quoted(b.ext));return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="FileSearch"><xs:qualifier>'+k+"</xs:qualifier><xs:criterion><xs:and>"+c+d+e+f+g+h+j+"</xs:and></xs:criterion></xs:query>",Njl.id())),a)}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){switch(d){case "USB_Device":switch(e){case "xs:add-s":this.Fire("OnFSTUsbPlug",[c]);break;case "xs:delete-s":this.Fire("OnFSTUsbEject",[c]);break}break;case "FSActions":switch(e){case "xs:update-s":a=
b[0].selectNodes("FSAction");var f=[];Njl.each(a,function(g){var h=CComQIPtr(new dpv.fsaction,"IXDomNode");h.loadFromXml(g)==S_OK&&f.push(CComQIPtr(h,"IFSAction"))},this);this.Fire("OnFSActionsUpdate",[f]);break}break}return S_OK}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IFSManager").updateVolumes(a)},Initialize:function(a){if(a=CComQIPtr(a,"IDevice")){a=CComQIPtr(a.getWebEventSink(),"INotifySink");if(!this.Subscribed){this.Subscribed=true;this.SubscribedValue=a.Advise(this)}return this.SubscribedValue}return E_FAIL},
loadFromXml:function(a,b){switch(a.getAttributeText("resource-type")){case "FSInfo":b=(new Njl.Xml.document(a.getNodeText())).selectNodes("fsinfo/volume");if(Njl.isDefined(b)){a=CComQIPtr(this,"IXDomNode");a.removeAll();this.fsvols=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(b,function(f){var g=CComQIPtr(new dpv.fsvol,"IXDomNode");g.loadFromXml(f)==S_OK&&this.fsvols.appendChild(g)},this);a.appendChild(this.fsvols)}else this.fsvols=CComQIPtr(new dpv.base,"IXDomNode");return S_OK;case "FSFilePreview":this.Fire("OnFSTPreviewReady",
[a.getNodeText(),b]);return S_OK;case "FSGrabNode":this.Fire("OnFSTNodeReady",[a,b]);return S_OK;case "Accounts_Based_HomeFolder_Collection":this.Fire("OnFSTNodeReady",[a,b]);return S_OK;case "FSSnapView":this.Fire("OnFSSnapViewReady",[a,b]);return S_OK;case "FSHFSnapView":this.Fire("OnFSHFSnapViewReady",[a,b]);return S_OK;case "FSSnapFilePreview":this.Fire("OnFSSnapFilePreviewReady",[a.getNodeText(),b]);return S_OK;case "FSHFSnapFilePreview":this.Fire("OnFSHFSnapFilePreviewReady",[a.getNodeText(),
b]);return S_OK;case "hf_fssnap":case "fssnap":this.Fire("OnFSVersionsReady",[a,b]);return S_OK;case "FileSearch":var c=a.selectSingleNode("Search_Result_Collection");if(Njl.isDefined(c)){a=c.selectNodes("File");c=c.getAttributeText("n_result");var d=[];Njl.each(a,function(f){d.push({type:f.getAttributeText("type"),path:f.getAttributeText("path"),name:f.getAttributeText("name"),size:f.getAttributeText("size"),date:f.getAttributeText("date")})});this.Fire("OnFSSearchReady",[b,d,c]);return S_OK}break;
case "EncryptUsbKeys":c=a.selectSingleNode("EncryptUsbKey_Collection");if(Njl.isDefined(c)){b=c.selectNodes("EncryptUsbKey");var e=[];Njl.each(b,function(f){e.push({serial:f.getNodeText("Serial"),model:f.getNodeText("Model"),method:f.getNodeText("Encrypt")})});this.usbKeys=e;return S_OK}break;default:return S_OK}}}});Njl.namespace("dpv");
dpv.user=Njl.inherit(CComEventsObjectRoot("IUserEvents"),dpv.base,IUser,{constructor:function(a){dpv.user.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <User id="0" resource-id="0" resource-type="User" is-domain-member="0">                    <User_Id></User_Id>                    <Password></Password>                    <Group_Name></Group_Name>                    <Access></Access>                    <Email_Address></Email_Address>                    <User_Name></User_Name>                </User>')).selectNodes("./*")[0])},
IUser:{getName:function(){return dpv.gp(this.xuser,"User_Name")},putName:function(a){return dpv.pp(this.xuser,"User_Name",a)},getId:function(){return dpv.gp(this.xuser,"User_Id")},putId:function(a){return dpv.pp(this.xuser,"User_Id",a)==E_FAIL||this.x.setAttributeText(a,"id")==E_FAIL||this.x.setAttributeText(a,"resource-id")==E_FAIL?E_FAIL:S_OK},getAccess:function(){return dpv.gp(this.xuser,"Access")},putAccess:function(a){return dpv.pp(this.xuser,"Access",a)},getShellAccess:function(){return dpv.gp(this.xuser,
"ShellAccess")},putShellAccess:function(a){return dpv.pp(this.xuser,"ShellAccess",a===true?1:0)},getPassword:function(){return dpv.gp(this.xuser,"Password")},putPassword:function(a){return dpv.pp(this.xuser,"Password",a)},getIsLocked:function(){return dpv.gp(this.xuser,"IsLocked")},putIsLocked:function(a){return dpv.pp(this.xuser,"IsLocked",a)},getEmail:function(){return dpv.gp(this.xuser,"Email_Address")},putEmail:function(a){return dpv.pp(this.xuser,"Email_Address",a)},getGroupName:function(){return dpv.gp(this.xuser,
"Group_Name")},putGroupName:function(a){return dpv.pp(this.xuser,"Group_Name",a)},getIsDomainMember:function(){return this.x.getAttributeText("is-domain-member")},putIsDomainMember:function(a){return this.x.setAttributeText(a,"is-domain-member")},getHomeDirectory:function(){return dpv.gp(this.xuser,"Home_Directory")},getHomeFolder:function(){return this.xuserhf?this.xuserhf:E_FAIL},createHomeFolder:function(){if(!this.xuserhf){var a=CComQIPtr(this,"IXDomNode").getXml(),b=a.selectSingleNode("Home_Folder");
b&&b.removeNode();var c=CComQIPtr(new dpv.userhf,"IXDomNode");a.appendNode(CComQIPtr(c,"IXDomNode").getXml());b=a.selectSingleNode("Home_Folder");CComQIPtr(c,"IXDomNode").loadFromXml(b);this.xuserhf=CComQIPtr(c,"IUserHomeFolder")}return this.xuserhf},getTimeMachine:function(){return this.xusertm?this.xusertm:E_FAIL},createTimeMachine:function(){if(!this.xusertm){var a=CComQIPtr(this,"IXDomNode").getXml(),b=a.selectSingleNode("Private_Time_Machine");b&&b.removeNode();var c=CComQIPtr(new dpv.usertm,
"IXDomNode");a.appendNode(CComQIPtr(c,"IXDomNode").getXml());b=a.selectSingleNode("Private_Time_Machine");CComQIPtr(c,"IXDomNode").loadFromXml(b);this.xusertm=CComQIPtr(c,"IUserTimeMachine")}return this.xusertm},getGroupMembership:function(){return dpv.gp(this.xuser,"Group_Membership")},putGroupMembership:function(a){return dpv.pp(this.xuser,"Group_Membership",a)},isAdmin:function(){var a=CComQIPtr(this,"IUser");if(a.getGroupName()=="admin")return true;var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),
"IDevice");if(b)if(b=b.getSecurityManager())if(b=CComQIPtr(b.getGroupById("98"),"IGroup"))return!!b.getSecondaryMembersIDs()[a.getId()];return false}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");delete this.xuserhf;var b=a.selectSingleNode("Home_Folder");if(b){var c=CComQIPtr(new dpv.userhf(true),"IXDomNode");if(c.loadFromXml(b)==S_OK)this.xuserhf=CComQIPtr(c,"IUserHomeFolder")}delete this.xusertm;if(a=a.selectSingleNode("Private_Time_Machine")){b=
CComQIPtr(new dpv.usertm(true),"IXDomNode");if(b.loadFromXml(a)==S_OK)this.xusertm=CComQIPtr(b,"IUserTimeMachine")}return S_OK}}});Njl.namespace("dpv");
dpv.group=Njl.inherit(CComEventsObjectRoot("IGroupEvents"),dpv.base,IGroup,{constructor:function(a){dpv.group.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Group id="0" resource-id="0" resource-type="Group" is-domain-member="0">                    <Group_Id></Group_Id>                    <Secondary_Member_List/>                    <Group_Name></Group_Name>                    <Used>0</Used>                    <Quota>0</Quota>                    <Access></Access>                </Group>')).selectNodes("./*")[0])},IGroup:{getName:function(){return dpv.gp(this.xgroup,
"Group_Name")},putName:function(a){return dpv.pp(this.xgroup,"Group_Name",a)},getId:function(){return dpv.gp(this.xgroup,"Group_Id")},putId:function(a){return dpv.pp(this.xgroup,"Group_Id",a)==E_FAIL||this.x.setAttributeText(a,"id")==E_FAIL||this.x.setAttributeText(a,"resource-id")==E_FAIL?E_FAIL:S_OK},getAccess:function(){return dpv.gp(this.xgroup,"Access")},putAccess:function(a){return dpv.pp(this.xgroup,"Access",a)},getUsed:function(){return dpv.gp(this.xgroup,"Used")},putUsed:function(a){return dpv.pp(this.xgroup,
"Used",a)},getQuota:function(){return dpv.gp(this.xgroup,"Quota")},putQuota:function(a){return dpv.pp(this.xgroup,"Quota",a)},getSecondaryMembers:function(){return this.xsms?this.xsms.getChildren():E_FAIL},getSecondaryMembersIDs:function(){return this.xsmsids||{}},putSecondaryMembers:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Secondary_Member_List");b.removeNode("User");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});
else if(CComQIPtr(a,"IUser")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},getIsDomainMember:function(){return this.x.getAttributeText("is-domain-member")},putIsDomainMember:function(a){return this.x.setAttributeText(a,"is-domain-member")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){CComQIPtr(this,"IXDomNode");this.x=a;this.xgroup=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");
if(a=this.x.selectSingleNode("Secondary_Member_List")){a=this.x.selectNodes("Secondary_Member_List/User");this.xsms=CComQIPtr(new dpv.base,"IXDomNode");this.xsmsids={};Njl.each(a,function(b){var c=CComQIPtr(new dpv.user(true),"IXDomNode");if(c.loadFromXml(b)==S_OK){this.xsms.appendChild(c);b=CComQIPtr(c,"IUser");this.xsmsids[b.getId()]=b}},this)}return S_OK}}});Njl.namespace("dpv");
dpv.replisyncdevice=Njl.inherit(CComEventsObjectRoot("IShareEvents"),dpv.base,IReplisyncDevice,{constructor:function(a){dpv.replisyncdevice.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <ReplisyncDevice id="0" resource-id="4MC574EL0003A" resource-type="ReplisyncDevice">                    <Hostname></Hostname>                    <Model></Model>                    <Serial></Serial>                    <IPv4></IPv4>                    <IPv6></IPv6>                </ReplisyncDevice>')).selectNodes("./*")[0])},
IReplisyncDevice:{getHostname:function(){if(this.xhostname)return this.xhostname.getNodeText();return E_FAIL},getModel:function(){if(this.xmodel)return this.xmodel.getNodeText();return E_FAIL},getSerial:function(){if(this.xserial)return this.xserial.getNodeText();return E_FAIL},getIPv4:function(){if(this.xipv4)return this.xipv4.getNodeText();return E_FAIL},getIPv6:function(){if(this.xipv6)return this.xipv6.getNodeText();return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;this.xhostname=this.x.selectSingleNode("Hostname");this.xmodel=this.x.selectSingleNode("Model");this.xserial=this.x.selectSingleNode("Serial");this.xipv4=this.x.selectSingleNode("IPv4");this.xipv6=this.x.selectSingleNode("IPv6");return Njl.isAllDefined(this.xhostname,this.xipv4,this.xipv6)?S_OK:E_FAIL}}});Njl.namespace("dpv");
dpv.share=Njl.inherit(CComEventsObjectRoot("IShareEvents"),dpv.base,IShare,{constructor:function(a){dpv.share.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Share id="0" resource-type="Share">                   <Protocol_List/>\t               <Property_List>                        <Share_Name/>                        <Comment/>\t                    <Path/>                        <Volume_Id/>                        <Folder_Owner>\t                       <Access/>\t                    </Folder_Owner>                        <Non_Owner_Delete/>                        <Folder_Group>    \t                    <Access/>\t                    </Folder_Group>                        <Owner_Rights/>                        <Group_Rights/>                        <Everyone_Rights/>                        <Compression>0</Compression>                        <Logbias/>                        <Dedup>0</Dedup>                        <DedupAutoDisabling>0</DedupAutoDisabling>                        <Quota_MB>0</Quota_MB>                        <RefQuota_MB>0</RefQuota_MB>                        <Reserve_MB>0</Reserve_MB>                        <RefReserve_MB>0</RefReserve_MB>                        <Snapshot_Clones/>                  </Property_List>                </Share>')).selectNodes("./*")[0])},
IShare:{getId:function(){return this.xid},getProtocols:function(){return CComQIPtr(this,"IXDomNode").getChildren()},getProtocolByName:function(a){return this.hash?this.hash.name[a]:null},getProtocolById:function(a){return this.hash?this.hash.id[a]:null},getName:function(){return dpv.gp(this.xproptlist,"Share_Name")},putName:function(a){return dpv.pp(this.xproptlist,"Share_Name",a)},getLabel:function(){return dpv.gp(this.xproptlist,"PartitionLabel")},putLabel:function(a){return dpv.pp(this.xproptlist,
"PartitionLabel",a)},getModelName:function(){return dpv.gp(this.xproptlist,"ModelName")},putModelName:function(a){return dpv.pp(this.xproptlist,"ModelName",a)},getSN:function(){return dpv.gp(this.xproptlist,"Serial")},putSN:function(a){return dpv.pp(this.xproptlist,"Serial",a)},getComment:function(){return dpv.gp(this.xproptlist,"Comment")},putComment:function(a){return dpv.pp(this.xproptlist,"Comment",a)},getVolumeId:function(){return dpv.gp(this.xproptlist,"Volume_Id")},putVolumeId:function(a){return dpv.pp(this.xproptlist,
"Volume_Id",a)},getNonOwnerDelete:function(){return dpv.gp(this.xproptlist,"Non_Owner_Delete")},putNonOwnerDelete:function(a){return dpv.pp(this.xproptlist,"Non_Owner_Delete",a)},getPath:function(){return dpv.gp(this.xproptlist,"Path")},putPath:function(a){return dpv.pp(this.xproptlist,"Path",a)},getEveryoneRights:function(){return dpv.gp(this.xproptlist,"Everyone_Rights")},putEveryoneRights:function(a){return dpv.pp(this.xproptlist,"Everyone_Rights",a)},getVisibleSnapshot:function(){return dpv.gp(this.xproptlist,
"VisibleSnapshot")=="1"?true:false},putVisibleSnapshot:function(a){return dpv.pp(this.xproptlist,"VisibleSnapshot",a?"1":"0")},getVisibleSnapFolder:function(){return dpv.gp(this.xproptlist,"VisibleSnapFolder")},putVisibleSnapFolder:function(a){return dpv.pp(this.xproptlist,"VisibleSnapFolder",a)},getPrevVersionsAccessible:function(){return dpv.gp(this.xproptlist,"PrevVersions")=="1"?true:false},putPrevVersionsAccessible:function(a){return dpv.pp(this.xproptlist,"PrevVersions",a?"1":"0")},getAvailableMB:function(){return dpv.gp(this.xproptlist,
"Available_MB")},getUsedMB:function(){return dpv.gp(this.xproptlist,"Used_MB")},getUsedByChildrenMB:function(){return dpv.gp(this.xproptlist,"UsedByChildren_MB")},getUsedByDatasetMB:function(){return dpv.gp(this.xproptlist,"UsedByDataset_MB")},getUsedByRefReservatonMB:function(){return dpv.gp(this.xproptlist,"UsedByRefReservaton_MB")},getUsedBySnapshotsMB:function(){return dpv.gp(this.xproptlist,"UsedBySnapshots_MB")},getUsedByBackupsMB:function(){return dpv.gp(this.xproptlist,"UsedByBackups_MB")},
getCompressRatio:function(){return dpv.gp(this.xproptlist,"CompressRatio")},getCountOfContinuousSnapshots:function(){return parseInt(dpv.gp(this.xproptlist,"NrContinuousSnapshots"))},getCountOfManualSnapshots:function(){return parseInt(dpv.gp(this.xproptlist,"NrManualSnapshots"))},getCountOfReplicateSnapshots:function(){return parseInt(dpv.gp(this.xproptlist,"NrReplicateSnapshots"))},getCountOfCustomSnapshots:function(){return parseInt(dpv.gp(this.xproptlist,"NrCustomSnapshots"))},getQuotaMB:function(){return dpv.gp(this.xproptlist,
"Quota_MB")},putQuotaMB:function(a){return dpv.pp(this.xproptlist,"Quota_MB",a)},getReserveMB:function(){return dpv.gp(this.xproptlist,"Reserve_MB")},putReserveMB:function(a){return dpv.pp(this.xproptlist,"Reserve_MB",a)},getRefQuotaMB:function(){return dpv.gp(this.xproptlist,"RefQuota_MB")},putRefQuotaMB:function(a){return dpv.pp(this.xproptlist,"RefQuota_MB",a)},getRefReserveMB:function(){return dpv.gp(this.xproptlist,"RefReserve_MB")},putRefReserveMB:function(a){return dpv.pp(this.xproptlist,"RefReserve_MB",
a)},getCompression:function(){return dpv.gp(this.xproptlist,"Compression")},putCompression:function(a){return dpv.pp(this.xproptlist,"Compression",a?"1":"0")},getLogbias:function(){return dpv.gp(this.xproptlist,"Logbias")},putLogbias:function(a){return dpv.pp(this.xproptlist,"Logbias",a)},getDedup:function(){return dpv.gp(this.xproptlist,"Dedup")},putDedup:function(a){return dpv.pp(this.xproptlist,"Dedup",a?"1":"0")},getDedupAutoDisabling:function(){return dpv.gp(this.xproptlist,"DedupAutoDisabling")},
putDedupAutoDisabling:function(a){return dpv.pp(this.xproptlist,"DedupAutoDisabling",a?"1":"0")},getCloneState:function(){if(this.xorigin)return this.xorigin.getAttributeText("Share_Name")?this.xorigin.getAttributeText("Share_Name")+"@"+this.xorigin.getAttributeText("Snapshot_Name"):this.xorigin.getAttributeText("Share_Name");return E_FAIL},getFirstSnapshotCreationTime:function(){return parseInt(dpv.gp(this.xproptlist,"FirstSnapshotCreatedOn"))},getLastSnapshotCreationTime:function(){return parseInt(dpv.gp(this.xproptlist,
"LastSnapshotCreatedOn"))},getEnableProtection:function(){return this.getSnapshotScheduleNode().getAttributeText("enabled")=="1"?true:false},putEnableProtection:function(a){this.getSnapshotScheduleNode().setAttributeText(a?"1":"0","enabled")},getEnableSmartSnapshot:function(){return this.getSnapshotScheduleNode().getAttributeText("smart-snapshot")=="1"?true:false},putEnableSmartSnapshot:function(a){this.getSnapshotScheduleNode().setAttributeText(a?"1":"0","smart-snapshot")},getSnapshotScheduleInterval:function(){for(var a=
{hour:"hourly","day-of-week":"daily","day-of-month":"weekly",month:"monthly"},b=["hour","day-of-week","day-of-month","month"],c,d=0;d<b.length;++d){c=this.getSnapshotScheduleNode().getAttributeText(b[d]);if(c=="*")return a[b[d]]}return""},putSnapshotScheduleInterval:function(a){var b=["minute","hour","day-of-week","day-of-month","month"];a={hourly:"hour",daily:"day-of-week",weekly:"day-of-month",monthly:"month"}[a];for(var c=false,d=0;d<b.length;++d){if(!c&&a==b[d])c=true;this.getSnapshotScheduleNode().setAttributeText(c?
"*":"0",b[d])}},getCustomSnapshotManagement:function(){return dpv.gp(this.xproptlist,"CustomSnapshotManagement")=="1"},putCustomSnapshotManagement:function(a){return dpv.pp(this.xproptlist,"CustomSnapshotManagement",a?"1":"0")},getNonEmptySnapshots:function(){return dpv.gp(this.xproptlist,"NonEmptySnapshots")=="1"},putNonEmptySnapshots:function(a){return dpv.pp(this.xproptlist,"NonEmptySnapshots",a?"1":"0")},getCustomSnapshotSchedule:function(){return this.xsched?this.xsched.getConfig():E_FAIL},putCustomSnapshotSchedule:function(a){return this.xsched?
this.xsched.putConfig(a):E_FAIL},getSnapshotRetentionType:function(){return dpv.gp(this.xproptlist,"SnapshotRetention/type")},putSnapshotRetentionType:function(a){return dpv.pp(this.xproptlist,"SnapshotRetention/type",a)},getSnapshotRetentionNumber:function(){return dpv.gp(this.xproptlist,"SnapshotRetention/number")},putSnapshotRetentionNumber:function(a){return dpv.pp(this.xproptlist,"SnapshotRetention/number",a)},getSnapshotRetentionLifeTime:function(){return dpv.gp(this.xproptlist,"SnapshotRetention/lifetime")},
putSnapshotRetentionLifeTime:function(a){return dpv.pp(this.xproptlist,"SnapshotRetention/lifetime",a)},appendProtocol:function(a){if(a&&this.x){var b=this.x.selectSingleNode("Protocol_List");if(b){a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}}return E_FAIL},removeProtocol:function(a){if(a&&this.x)if(a=this.x.selectSingleNode("Protocol_List/*[@id='"+a.getId()+"']"))if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.x);
return E_FAIL},getMigration:function(){return dpv.gp(this.xproptlist,"Migration")=="1"},getExportInProgress:function(){return this.xexport?this.xexport.getAttributeText("active")=="1":false},getExportPath:function(){return this.xexport?this.xexport.getNodeText():""},getExportProcessId:function(){return this.xexport?this.xexport.getAttributeText("id"):E_FAIL},getImportInProgress:function(){return this.ximport?this.ximport.getAttributeText("active")=="1":false},getImportPath:function(){return this.ximport?
this.ximport.getNodeText():""},getImportProcessId:function(){return this.ximport?this.ximport.getAttributeText("id"):E_FAIL},getOwnerRights:function(){if(this.xfowner)return this.xfowner.getNodeText("Access");return E_FAIL},putOwnerRights:function(a){if(this.xfowner)return this.xfowner.setNodeText(a,"Access")?S_OK:E_FAIL;return E_FAIL},getFolderOwner:function(){if(this.xfowner)return this.xfowner.getNodeText("System_User/User_Name");return E_FAIL},getFolderOwnerId:function(){if(this.xfowner)return this.xfowner.getNodeText("System_User/User_Id");
return E_FAIL},putFolderOwner:function(a){if(this.xfowner)return this.xfowner.setNodeText(a,"System_User/User_Name")?S_OK:E_FAIL;return E_FAIL},putFolderOwnerId:function(a){if(this.xfowner){this.xfowner.setNodeText(a,"System_User/User_Id");this.xfowner.selectSingleNode("System_User").setAttributeText(a,"id");this.xfowner.selectSingleNode("System_User").setAttributeText(a,"resource-id")}return E_FAIL},getGroupRights:function(){if(this.xfgroup)return this.xfgroup.getNodeText("Access");return E_FAIL},
putGroupRights:function(a){if(this.xfgroup)return this.xfgroup.setNodeText(a,"Access")?S_OK:E_FAIL;return E_FAIL},getFolderGroup:function(){if(this.xfgroup)return this.xfgroup.getNodeText("System_Group/Group_Name");return E_FAIL},getFolderGroupId:function(){if(this.xfgroup)return this.xfgroup.getNodeText("System_Group/Group_Id");return E_FAIL},putFolderGroup:function(a){if(this.xfgroup)return this.xfgroup.setNodeText(a,"System_Group/Group_Name")?S_OK:E_FAIL;return E_FAIL},putFolderGroupId:function(a){if(this.xfgroup){this.xfgroup.setNodeText(a,
"System_Group/Group_Id");this.xfgroup.selectSingleNode("System_Group").setAttributeText(a,"id");this.xfgroup.selectSingleNode("System_Group").setAttributeText(a,"resource-id")}return E_FAIL},getEveryoneAccessRights:function(){if(this.xfeveryone)return this.xfeveryone.getNodeText("Access");return E_FAIL},putEveryoneAccessRights:function(a){if(this.xfeveryone)return this.xfeveryone.setNodeText(a,"Access")?S_OK:E_FAIL;return E_FAIL},getInheritAcl:function(){var a=this.x.selectSingleNode("Inherit_Acl");
return a?a.getNodeText():E_FAIL},putInheritAcl:function(a){var b=this.x.selectSingleNode("Inherit_Acl");if(!b)return E_FAIL;b.setNodeText(a);if(a=="0"&&!this.xdefacl)if(this.xacl){a=CComQIPtr(this.xacl,"IXDomNode").clone();CComQIPtr(this,"IXDomNode").getXml().appendNode("Default_Acl_List");b=CComQIPtr(this,"IXDomNode").getXml().selectSingleNode("Default_Acl_List").appendNode(a.getXml());a.loadFromXml(b);this.xdefacl=CComQIPtr(a,"IShareAclList")}},getAccessAclList:function(){return this.xacl?this.xacl:
E_FAIL},getDefaultAclList:function(){return this.xdefacl?this.xdefacl:E_FAIL},getClones:function(){return this.xclones?this.xclones.getChildren():E_FAIL},getUserQuotas:function(){return this.xuquotas?this.xuquotas.getChildren():E_FAIL},appendUserQuota:function(a){if(a&&this.x){var b=this.x.selectSingleNode("Property_List/UserQuota");if(!b){var c=this.x.selectSingleNode("Property_List");if(c)b=c.appendNode("UserQuota")}if(b){a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);
return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}}return E_FAIL},removeUserQuota:function(a){if(a&&this.x){a.__s.x.removeNode();return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},getGroupQuotas:function(){return this.xgquotas?this.xgquotas.getChildren():E_FAIL},appendGroupQuota:function(a){if(a&&this.x){var b=this.x.selectSingleNode("Property_List/GroupQuota");if(!b){var c=this.x.selectSingleNode("Property_List");if(c)b=c.appendNode("GroupQuota")}if(b){a=CComQIPtr(a,"IXDomNode");
if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}}return E_FAIL},removeGroupQuota:function(a){if(a&&this.x){a.__s.x.removeNode();return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},getUseReplicate:function(){return dpv.gp(CComQIPtr(new dpv.xprop(this.x),"IXPropertyList"),"Use_List/Use/Replicate")},getReplicateJobId:function(){return dpv.gp(CComQIPtr(new dpv.xprop(this.x),"IXPropertyList"),"Use_List/Use/Replicate/JobId")},getReplicateJobName:function(){return dpv.gp(CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList"),"Use_List/Use/Replicate/JobName")},getIsReplicateSource:function(){var a=dpv.gp(CComQIPtr(new dpv.xprop(this.x),"IXPropertyList"),"Use_List/Use/Replicate/Source");return a=="true"||a==E_FAIL},getUseReadyRecover:function(){return dpv.gp(CComQIPtr(new dpv.xprop(this.x),"IXPropertyList"),"Use_List/Use/ReadyRecover")},getSync:function(){return dpv.gp(this.xproptlist,"Sync")},putSync:function(a){return dpv.pp(this.xproptlist,"Sync",a)},getBitRotProtection:function(){return dpv.gp(this.xproptlist,
"BitRotProtection")},putBitRotProtection:function(a){return dpv.pp(this.xproptlist,"BitRotProtection",a)},getAutoDefrag:function(){return dpv.gp(this.xproptlist,"AutoDefrag")},putAutoDefrag:function(a){return dpv.pp(this.xproptlist,"AutoDefrag",a)},getType:function(){return dpv.gp(this.xproptlist,"Type")},putType:function(a){return dpv.pp(this.xproptlist,"Type",a)},isReadyDRShare:function(){return CComQIPtr(this,"IShare").getType()=="readonly"},getIndexed:function(){return dpv.gp(this.xproptlist,
"Indexed")=="1"},putIndexed:function(a){return dpv.pp(this.xproptlist,"Indexed",a?"1":"0")},getAuditEnabled:function(){return dpv.gp(this.xproptlist,"Audit_Rules_Enabled")=="1"},putAuditEnabled:function(a){return dpv.pp(this.xproptlist,"Audit_Rules_Enabled",a?"1":"0")}},getSnapshotScheduleNode:function(){if(!this.xsnapshdlr&&this.xproptlist)this.xsnapshdlr=this.xproptlist.getXml().appendNode(new Njl.Xml.document('<Snapshot_Schedule id="0" resource-id="0" resource-type="snapshot-schedule" enabled="1" minute="0" hour="0" day-of-month="*" day-of-week="0" month="0" purge-manual-snapshot="0" smart-snapshot="1"/>'));
return this.xsnapshdlr},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xid=this.x.getAttributeText("id");this.xfowner=this.x.selectSingleNode("Folder_Owner");this.xfgroup=this.x.selectSingleNode("Folder_Group");this.xfeveryone=this.x.selectSingleNode("Folder_Everyone");this.xprotlist=this.x.selectNodes("Protocol_List/*");if(this.xproptlist=this.x.selectSingleNode("Property_List")){this.xsnapshdlr=this.xproptlist.selectSingleNode("Snapshot_Schedule");this.xorigin=
this.xproptlist.selectSingleNode("Origin");this.xexport=this.xproptlist.selectSingleNode("ExportDatasetTo");this.ximport=this.xproptlist.selectSingleNode("ImportDatasetFrom")}var b=this.x.selectSingleNode("Access_Acl_List/Acl_List");delete this.xacl;if(b){var c=CComQIPtr(new dpv.sacllist,"IXDomNode");if(c.loadFromXml(b)==S_OK)this.xacl=CComQIPtr(c,"IShareAclList")}b=this.x.selectSingleNode("Default_Acl_List/Acl_List");delete this.xdefacl;if(b){c=CComQIPtr(new dpv.sacllist,"IXDomNode");if(c.loadFromXml(b)==
S_OK)this.xdefacl=CComQIPtr(c,"IShareAclList")}b=document.webshare?Njl.isAllDefined(this.xprotlist,this.xproptlist):Njl.isAllDefined(this.xfowner,this.xfgroup,this.xfeveryone,this.xprotlist,this.xproptlist);this.xproptlist=CComQIPtr(new dpv.xprop(this.xproptlist),"IXPropertyList");if(this.xprotlist){var d=CComQIPtr(this,"IXDomNode");d.removeAll();this.hash={};this.hash.id=[];this.hash.name=[];Njl.each(this.xprotlist,function(e){var f=CComQIPtr(new dpv.sproto,"IXDomNode");d.appendChild(f);if(f.loadFromXml(e)!=
S_OK)d.removeChild(f);else{e=CComQIPtr(f,"IShareProtocol");this.hash.id[e.getProtoId()]=e;this.hash.name[e.getName()]=e;this.hash.id["*"]=e;this.hash.name["*"]=e}},this)}if(c=a.selectNodes("Property_List/Snapshot_Clones/Clone")){d=CComQIPtr(this,"IXDomNode");this.xclones=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(e){var f=CComQIPtr(new dpv.sclone,"IXDomNode");f.loadFromXml(e)==S_OK&&this.xclones.appendChild(f)},this)}this.xuquotas=CComQIPtr(new dpv.base,"IXDomNode");if(c=a.selectNodes("Property_List/UserQuota/Quota")){d=
CComQIPtr(this,"IXDomNode");Njl.each(c,function(e){var f=CComQIPtr(new dpv.suquota,"IXDomNode");f.loadFromXml(e)==S_OK&&this.xuquotas.appendChild(f)},this)}this.xgquotas=CComQIPtr(new dpv.base,"IXDomNode");if(a=a.selectNodes("Property_List/GroupQuota/Quota")){d=CComQIPtr(this,"IXDomNode");Njl.each(a,function(e){var f=CComQIPtr(new dpv.sgquota,"IXDomNode");f.loadFromXml(e)==S_OK&&this.xgquotas.appendChild(f)},this)}a=this.x.selectSingleNode("Property_List/Custom_Snapshot_Schedule");delete this.xsched;
if(a){c=CComQIPtr(new dpv.snapsched,"IXDomNode");if(c.loadFromXml(a)==S_OK)this.xsched=CComQIPtr(c,"ISnapshotSchedule")}return b?S_OK:E_FAIL}}});Njl.namespace("dpv");
dpv.shareManager=Njl.inherit(CComEventsObjectRoot("IShareManagerEvents"),dpv.base,IShareManager,{constructor:function(){dpv.shareManager.superclass.constructor.apply(this,arguments)},IShareManager:{getShares:function(){return this.xshares?this.xshares.getChildren():E_FAIL},getShareByName:function(a){return this.xshares?this.xshares.hash[a]:E_FAIL},updateShares:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Shares" resource-type="Share_Collection"/>',Njl.id())),
a)},getLanDevices:function(){return this.xlandevices?this.xlandevices.getChildren():E_FAIL},getRemoteDevices:function(){return this.xremotedevices?this.xremotedevices.getChildren():E_FAIL},getLanDeviceByName:function(a){return this.xlandevices?this.xlandevices.hash[a]:E_FAIL},updateLanDevices:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="ReplisyncDevice_Collection"/>',Njl.id())),a)},updateConnectionWithLanDevices:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>Connect</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host><![CDATA[{1}]]\></Host>                            <Username><![CDATA[{2}]]\></Username>                            <Password><![CDATA[{3}]]\></Password>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),a,b,c)),d)},updateRemoteDevices:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="0" resource-type="BackupJob_Resource">                    <xs:command_name>BrowseHosts</xs:command_name>                    <xs:args>                        <xs:arg>                            <BackupJob_Resource>                                <Share_Name_Or_Protocol>{1}</Share_Name_Or_Protocol>                            </BackupJob_Resource>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b)),a)},updateWebShare:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="MyShares" resource-type="MyShare_Collection"/>',Njl.id())),a)},commitShares:function(a,b){var c="";if(b&&b.length){for(var d=0;d<b.length;++d)c+=CComQIPtr(b[d],"IXDomNode").getXml().toString();if(c)c="<Share_Collection>"+c+"</Share_Collection>"}else if(this.x&&this.x.selectSingleNode("Share_Collection"))c=this.x.selectSingleNode("./Share_Collection").toString();if(c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Shares" resource-type="Share_Collection">{1}</xs:set>',
Njl.id(),c)),a);return S_FALSE},commitShare:function(a,b){if(a=CComQIPtr(a,"IShare")){a=CComQIPtr(a,"IXDomNode").clone().getXml();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Shares" resource-type="Share_Collection"><Share_Collection>{1}</Share_Collection></xs:set>',Njl.id(),a.toString())),b)}return E_INVALIDARG},commitShareAcl:function(a,b){if(a=CComQIPtr(a,"IShare")){var c=CComQIPtr(a.getAccessAclList(),"IXDomNode"),d=CComQIPtr(a.getDefaultAclList(),"IXDomNode");
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ChangeAcl</xs:command_name>                        <xs:args>                            <xs:arg><User resource-id="{2}" resource-type="System_User"/></xs:arg>                            <xs:arg><Group resource-id="{3}" resource-type="System_Group"/></xs:arg>                            <xs:arg><Flags recursive="0"/></xs:arg>                            <xs:arg><Inherit_Acl>{4}</Inherit_Acl></xs:arg>                            <xs:arg><Access_Acl_List>{5}</Access_Acl_List></xs:arg>                            {6}                            <xs:arg><Non_Owner_Delete>{7}</Non_Owner_Delete></xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),a.getId(),a.getFolderOwnerId(),a.getFolderGroupId(),a.getInheritAcl(),c?c.getXml().toString():"",d&&a.getInheritAcl()=="0"?"<xs:arg><Default_Acl_List>"+d.getXml().toString()+"</Default_Acl_List></xs:arg>":"",a.getNonOwnerDelete())),b)}return E_INVALIDARG},addShare:function(a,b,c,d,e){var f=CComQIPtr(a,"IShare");if(f){a=CComQIPtr(f,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="Share" c-resource-id="Shares" c-resource-type="Share_Collection">                        <Share_Collection>                        {1}                        </Share_Collection>                    </xs:add>',
Njl.id(),a.getXml().toString())),e)}else if(a&&a.length){d=d?d:0;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="Share" c-resource-id="Shares" c-resource-type="Share_Collection">                        <Share_Collection>                        <Share id="0" resource-type="Share">                            <Protocol_List>                                <cifs id="cifs.0" resource-type="cifs">                                    <Host_List/>                                    <User_List/>                                    <Group_List/>                                    <Property_List>                                    </Property_List>                                </cifs>                            </Protocol_List>                            <Property_List>                                <Share_Name><![CDATA[{1}]]\></Share_Name>                                <Comment><![CDATA[{2}]]\></Comment>                                <Path><![CDATA[{3}]]\></Path>                                <Volume_Id>{4}</Volume_Id>                            </Property_List>                        </Share>                        </Share_Collection>                    </xs:add>',
Njl.id(),a,b?b:"",c,d)),e)}return E_INVALIDARG},removeShare:function(a,b){if(CComQIPtr(a,"IShare"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Share" c-resource-id="Shares" c-resource-type="Share_Collection"/>',Njl.id(),a.getId())),b);return E_INVALIDARG},migrateShare:function(a,b,c){if(CComQIPtr(a,"IShare"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>Migrate</xs:command_name>                        <xs:args>                            <xs:arg>                                <Volume resource-id="{2}" resource-type="Volume"/>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),a.getVolumeId()+"/"+a.getName(),b)),c);return E_INVALIDARG},ReimportSnapshots:function(a,b,c){b=Njl.isString(b)?b:b.getVolumeName();Njl.isString(c)||(c=CComQIPtr(c,"IShare")?CComQIPtr(c,"IShare").getName():CComQIPtr(c,"ILUN")?CComQIPtr(c,"ILUN").getName():"");if(b&&c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ReImport</xs:command_name>                    </xs:command>',Njl.id(),b+
"/"+c)),a);return E_INVALIDARG},updateLUNS:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="lun_collection" />',Njl.id())),a)},getLUNS:function(){return this.xluns?this.xluns.getChildren():E_FAIL},getLunByName:function(a){return this.xluns?this.xluns.hash[a]:E_FAIL},appendLUN:function(a,b){if(CComQIPtr(a,"ILUN")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="lun">                       {1}                    </xs:add>',
Njl.id(),a.getXml().toString())),b)}return E_FAIL},removeLUN:function(a,b){if(CComQIPtr(a,"ILUN")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-type="lun">                       {1}                    </xs:delete>',Njl.id(),a.getXml().toString())),b)}return E_FAIL},commitLUN:function(a,b){if(CComQIPtr(a,"ILUN")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="lun">                       {1}                    </xs:set>',
Njl.id(),a.getXml().toString())),b)}return E_FAIL},migrateLUN:function(a,b,c){if(CComQIPtr(a,"ILUN"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>Migrate</xs:command_name>                        <xs:args>                            <xs:arg>                                <Volume resource-id="{2}" resource-type="Volume"/>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),a.getVolumeId()+"/"+a.getName(),b)),c);return E_INVALIDARG},exportToNfs:function(a,b,c,d,e,f,g){var h,k,j;if(h=CComQIPtr(b,"ILUN")){k=h.getVolumeId();j=h.getName()}else if(b=CComQIPtr(b,"IShare")){k=b.getVolumeId();j=b.getName()}if(k&&j)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ExportToNfs</xs:command_name>                        <xs:args>                            <xs:arg>                                <NfsPath host="{2}" exportpoint="{3}" overwrite="{5}" forceudp="{6}">{4}</NfsPath>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),k+"/"+j,c,d,e,f?"1":"0",g?"1":"0")),a);return E_INVALIDARG},importFromNfs:function(a,b,c,d,e,f,g){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ImportFromNfs</xs:command_name>                        <xs:args>                            <xs:arg>                                <NfsPath host="{2}" exportpoint="{3}" forceudp="{5}">{4}</NfsPath>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b+"/"+c,d,e,f,g?"1":"0")),a)},ChangePermissions:function(a,b){if(a=CComQIPtr(a,"IShare"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ChangePermission</xs:command_name>                     </xs:command>',Njl.id(),a.getId())),b);return E_INVALIDARG},UnUsedShareForReplicate:function(a,b){if(a=CComQIPtr(a,"IShare"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>RTerm</xs:command_name>                     </xs:command>',
Njl.id(),a.getId())),b);return E_INVALIDARG},UnUsedLUNForReplicate:function(a,b){if(a=CComQIPtr(a,"ILUN"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="lun">                        <xs:command_name>RTerm</xs:command_name>                     </xs:command>',Njl.id(),a.getId())),b);return E_INVALIDARG},deleteBgProcess:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="BgProcess"/>',
Njl.id(),a)),b)},UpdateDefaultSettings:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DefaultSettings" resource-type="DefaultSettings"/>',Njl.id())),a)},getDefaultSettingBitRotProtection:function(){return dpv.gp(this.xdefsettings,"BitRotProtection")},getDefaultSettingBitRotProtectionPerformanceWarning:function(){return dpv.gp(this.xdefsettings,"BitRotProtectionPerformanceWarning")},getDefaultSettingContinuousProtection:function(){return dpv.gp(this.xdefsettings,
"ContinuousProtection")},getDefaultSettingContinuousProtectionFrequency:function(){return dpv.gp(this.xdefsettings,"ContinuousProtectionFrequency")},getSharesReadyDR:function(){var a=CComQIPtr(this,"IShareManager").getShares(),b=[];a!=E_FAIL&&Njl.each(a,function(c){CComQIPtr(c,"IShare").isReadyDRShare()&&b.push(c)});return b},addShareReadyDR:function(a,b,c){var d=CComQIPtr(new dpv.share,"IShare"),e=CComQIPtr(new dpv.sproto("cifs"),"IShareProtocol"),f=CComQIPtr(new dpv.sproto("ftp"),"IShareProtocol");
d.putName(b);d.putVolumeId(c);d.putPath("/"+c+"/"+b);d.putType("readonly");d.putVisibleSnapshot(true);e.putAvailable(true);e.putDefaultAccess("ReadOnly");e.putEnableOplocks(0);f.putAvailable(false);f.putDefaultAccess("ReadOnly");d.appendProtocol(e);d.appendProtocol(f);return CComQIPtr(this,"IShareManager").addShare(d,null,null,null,a)},updateReadyDRDestShares:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SimpleReadyDRDestShare" resource-type="Share_Collection"/>',
Njl.id())),a)},getReadyDRDestShares:function(){return this.xRdrDestShares?this.xRdrDestShares.getChildren():E_FAIL},getReplisyncJobRtnCode:function(){return this.ReplisyncJobRtnCode?this.ReplisyncJobRtnCode:E_FAIL},getReplisyncJobRtnCause:function(){return this.ReplisyncJobRtnCause?this.ReplisyncJobRtnCause:E_FAIL}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){if(e=="xs:command-s"){d=(d=a.selectSingleNode("command-name")||a.selectSingleNode("xs:command-name"))?d.getNodeText():"";switch(d){case "ChangePermission":this.Fire("OnSHChangePermission",
[c,a]);break;case "ChangeAcl":this.Fire("OnSHChangeAcl",[c]);break;case "ExportToNfs":this.Fire("OnSHExported",[c]);break;case "ImportFromNfs":this.Fire("OnSHImported",[c]);break;default:a=b[1]?b[1].getNodeText():undefined;this.Fire("OnSHMigrated",[c,a]);break}}return S_OK}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IShareManager").updateShares(a)},Commit:function(a){return CComQIPtr(this,"IShareManager").commitShares(a)},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),
"INotifySink").Advise(this,"Share");return E_FAIL},getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.getAttributeText("resource-id")=="SimpleReadyDRDestShare"){var c=a.selectNodes("Share_Collection/Share");this.xRdrDestShares&&b.removeChild(this.xRdrDestShares);this.xRdrDestShares=CComQIPtr(new dpv.base,"IXDomNode");b.appendChild(this.xRdrDestShares);Njl.each(c,function(g){var h=CComQIPtr(new dpv.simpleshare(true),"IXDomNode");h.loadFromXml(g)==S_OK&&
this.xRdrDestShares.appendChild(h)},this);return S_OK}else if(a.getAttributeText("resource-type")=="ReplisyncDevice_Collection"){if(a.selectSingleNode("ReplisyncDevice_Collection")){this.x=a;a=a.selectNodes("ReplisyncDevice_Collection/ReplisyncDevice");this.xlandevices&&b.removeChild(this.xlandevices);this.xlandevices=CComQIPtr(new dpv.base,"IXDomNode");this.xlandevices.hash=[];b.appendChild(this.xlandevices);Njl.each(a,function(g){var h=CComQIPtr(new dpv.replisyncdevice(true),"IXDomNode");if(h.loadFromXml(g)==
S_OK){this.xlandevices.appendChild(h);g=CComQIPtr(h,"IReplisyncDevice");this.xlandevices.hash[g.getHostname()]=g}},this);return S_OK}}else if(a.getAttributeText("resource-type")=="BackupJob_Resource"){if(a.selectSingleNode("BackupJob_Resource")){this.x=a;a=a.selectNodes("BackupJob_Resource/BackupDevice");this.xremotedevices&&b.removeChild(this.xremotedevices);this.xremotedevices=CComQIPtr(new dpv.base,"IXDomNode");this.xremotedevices.hash=[];b.appendChild(this.xremotedevices);Njl.each(a,function(g){var h=
CComQIPtr(new dpv.replisyncdevice(true),"IXDomNode");if(h.loadFromXml(g)==S_OK){this.xremotedevices.appendChild(h);g=CComQIPtr(h,"IReplisyncDevice");this.xremotedevices.hash[g.getHostname()]=g}},this);return S_OK}}else if(a.getAttributeText("resource-type")=="ReplisyncJob"){if(a.selectSingleNode("RemoteResponseDetails")){this.x=a;this.ReplisyncJobRtnCode=a.selectSingleNode("RemoteResponseDetails/ReturnCode")||a.selectSingleNode("RemoteResponseDetails/ReturnCode").getNodeText();this.ReplisyncJobRtnCause=
a.selectSingleNode("RemoteResponseDetails/Cause")||a.selectSingleNode("RemoteResponseDetails/Cause").getNodeText();return S_OK}return E_FAIL}else{c=a.selectSingleNode("Share_Collection");var d=a.selectSingleNode("MyShare_Collection"),e=a.selectSingleNode("LUN_Collection"),f=a.selectSingleNode("DefaultSettings");if(c||d){this.x=a;c=(c=a.selectNodes("Share_Collection/Share"))?c:a.selectNodes("MyShare_Collection/Share");this.xshares&&b.removeChild(this.xshares);this.xshares=CComQIPtr(new dpv.base,"IXDomNode");
this.xshares.hash=[];b.appendChild(this.xshares);Njl.each(c,function(g){var h=CComQIPtr(new dpv.share(true),"IXDomNode");if(h.loadFromXml(g)==S_OK){this.xshares.appendChild(h);g=CComQIPtr(h,"IShare");this.xshares.hash[g.getName()]=g}},this);return S_OK}else if(e){this.xl=a;a=a.selectNodes("LUN_Collection/LUN");this.xluns&&b.removeChild(this.xluns);this.xluns=CComQIPtr(new dpv.base,"IXDomNode");this.xluns.hash=[];Njl.each(a,function(g){var h=CComQIPtr(new dpv.lun(true),"IXDomNode");if(h.loadFromXml(g)==
S_OK){this.xluns.appendChild(h);g=CComQIPtr(h,"ILUN");this.xluns.hash[g.getName()]=g}},this);b.appendChild(this.xluns);return S_OK}else if(f){this.xdefsettings=CComQIPtr(new dpv.xprop(f),"IXPropertyList");return S_OK}}return E_FAIL}}});Njl.namespace("dpv");
dpv.devState=Njl.inherit(CComObjectRoot,dpv.base,IDeviceState,{constructor:function(){dpv.devState.superclass.constructor.apply(this,arguments)},IDeviceState:{getFirstLaunchState:function(){return dpv.gp(this.xstate,"First_Launch")=="1"},putFirstLaunchState:function(a){return dpv.pp(this.xstate,"First_Launch",a)},getDropboxV1Flag:function(){return dpv.gp(this.xstate,"Dropbox_V1_Flag")=="1"}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xstate=CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.device=Njl.inherit(dpv.CLSIDS.MarvelDevice,CComEventsObjectRoot("IDeviceEvents"),dpv.reqroot,IDevice,ISingleTone,IDeviceWebEventSinkEvents,{constructor:function(){dpv.device.superclass.constructor.apply(this,arguments);this.m_url=document.dbbroker;this.m_fsurl=document.fsbroker;this.m_phurl=document.phbroker;this.m_rcurl=document.recovery},IDeviceWebEventSinkEvents:{OnEvent:function(a,b){if(b&&b[0]){a=b[0].getNodeText();if(a=="Halt")this.Fire("OnDeviceHalt");else a=="Reboot"&&this.Fire("OnDeviceReboot")}return S_OK}},
IDevice:{startWebEventSink:function(){if(!this.active_events){this.active_events=true;if(!this.m_weid){var a=CComQIPtr(this,"IDevice").getWebEventSink();CComQIPtr(a,"INotifySink").Advise(this,"Device");this.m_weid=a.Listen.defer(1E3,a)}}return S_OK},stopWebEventSink:function(){this.active_events=false;var a=CComQIPtr(this,"IDevice").getWebEventSink();CComQIPtr(a,"INotifySink").Unadvise(this,"Device");a=a.StopListen();clearTimeout(this.m_weid);this.m_weid=undefined;return a},isStartedWebEventSink:function(){return this.active_events},
putSourceFSURL:function(a){this.m_fsurl=a;return S_OK},getSourceFSURL:function(){return this.m_fsurl},putSourcePHURL:function(a){this.m_phurl=a;return S_OK},getSourcePHURL:function(){return this.m_phurl},putSourceRCVURL:function(a){this.m_rcurl=a;return S_OK},getSourceRCVURL:function(){return this.m_rcurl},getWebEventSink:function(){return this._wevnt||(this._wevnt=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.wevnt,"IDeviceWebEventSink")))},getShareManager:function(){return this._mngr_share||
(this._mngr_share=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.shareManager,"IShareManager")))},getSecurityManager:function(){return this._mngr_security||(this._mngr_security=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.securityManager,"ISecurityManager")))},getSSHKeyManager:function(){return this._mngr_ssh||(this._mngr_ssh=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.sshManager,"ISSHManager")))},getFSManager:function(){return this._mngr_fs||(this._mngr_fs=CComQIPtr(this,
"IXDomNode").appendChild(CComQIPtr(new dpv.fsManager,"IFSManager")))},getNetworkManager:function(){return this._mngr_nt||(this._mngr_nt=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.ntManager,"INetworkManager")))},getHealthManager:function(){return this._mngr_ht||(this._mngr_ht=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.htManager,"IHealthManager")))},getLogManager:function(){return this._mngr_lg||(this._mngr_lg=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.lgManager,
"ILogManager")))},getSystemManager:function(){return this._mngr_sys||(this._mngr_sys=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.sysManager,"ISysManager")))},getBackupManager:function(){return this._mngr_bck||(this._mngr_bck=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.bckManager,"IBackupManager")))},getCloudStorageAmazonS3Manager:function(){return this._mngr_csas3||(this._mngr_csas3=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.cloudstorage.amazons3,"ICloudStorageManager")))},
getCloudStorageWasabiManager:function(){return this._mngr_cswasabi||(this._mngr_cswasabi=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.cloudstorage.wasabi,"ICloudStorageManager")))},getCloudStorageAzureManager:function(){return this._mngr_csazure||(this._mngr_csazure=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.cloudstorage.azure,"ICloudStorageManager")))},getCloudStorageGoogleDriveManager:function(){return this._mngr_csgd||(this._mngr_csgd=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.cloudstorage.googledrive,
"ICloudStorageManager")))},getCloudStorageOneDriveManager:function(){return this._mngr_csod||(this._mngr_csod=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.cloudstorage.onedrive,"ICloudStorageManager")))},getCloudStorageAmazonDriveManager:function(){return this._mngr_csad||(this._mngr_csad=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.cloudstorage.amazondrive,"ICloudStorageManager")))},getCloudStorageDropboxManager:function(){return this._mngr_csdb||(this._mngr_csdb=CComQIPtr(this,
"IXDomNode").appendChild(CComQIPtr(new dpv.cloudstorage.dropbox,"ICloudStorageManager")))},getAddonsManager:function(){return this._mngr_add||(this._mngr_add=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.addManager,"IAddonManager")))},getAlbumManager:function(){return this._mngr_album||(this._mngr_album=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.albumManager,"IAlbumManager")))},getXRaidManager:function(){return this._mngr_xr||(this._mngr_xr=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.xrManager,
"IXRaidManager")))},getSystemServiceManager:function(){return this._mngr_service||(this._mngr_service=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.serviceManager,"ISysServiceManager")))},getSmartLocalAppManager:function(){return this._mngr_smartlocalapp||(this._mngr_smartlocalapp=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.smartlocalappManager,"ISmartLocalAppManager")))},getP2PManager:function(){return this._mngr_p2p||(this._mngr_p2p=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.p2pManager,
"IP2PManager")))},updateDeviceState:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DeviceState" resource-type="DeviceState"/>',Njl.id())),a)},commitDeviceState:function(a){if(this.deviceState){var b=this.deviceState.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update id="{0}" resource-id="DeviceState" resource-type="DeviceState">{1}</xs:update>',Njl.id(),b)),a)}return E_FAIL},getDeviceState:function(){return this.deviceState?
this.deviceState:E_FAIL},shutdown:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown halt="true" fsck="{1}"/>                </xs:custom>',Njl.id(),a)),b)},reboot:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown halt="false" fsck="{1}"/>                </xs:custom>',
Njl.id(),a)),b)},register:function(a,b){if(a&&CComQIPtr(a,"ISysInfo")){a=String.format("https://my.netgear.com/myNETGEAR/register_readynas.asp?product={0}&serial={1}&firmware={2}&memory={3}&mac_address={4}&raid_level={5}&hdd_vendor={6}&hdd_model={7}&hdd_serial={8}&hdd_firmware={9}",a.getModel(),a.getSerial(),a.getFirmwareName()+" "+a.getFirmwareVersion(),a.getMemorySize(),a.getMACAddress(),a.getRaidLevel(),a.getHDDVendor(),a.getHDDModel(),a.getHDDSerial(),a.getHDDFirmware());if(b)window.open(a);else document.location=
a;CComQIPtr(this,"IDevice").registerSystem();return S_OK}return E_FAIL},registerSystem:function(){CComQIPtr(CoCreateInstance(Njl.CLSIDS.System.Frame),"IExtNative").getNative().alarmbar.hide();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update id="{0}" resource-type="DeviceState" c-resource-id="DeviceState"><DeviceState><Registration>1</Registration></DeviceState></xs:update>',Njl.id())),"registered_system")},installFirmwareAftreUpload:function(a,b,c){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update resource-id="Firmware" resource-type="FirmwareImage">                        <FirmwareImage resource-id="Firmware" resource-type="FirmwareImage">                        <Location>local</Location>                         <Resource>{0}</Resource>                        </FirmwareImage>                  </xs:update>',
a)),c,undefined,undefined,undefined,b)},ejectVolume:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>eject</xs:command_name>                    <xs:args/>                 </xs:command>',Njl.id(),a)),b)},shutdownEDADevice:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="EDA_Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown eda="{1}"/>                </xs:custom>',
Njl.id(),a)),b)}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IDevice").updateDeviceState(a)},Commit:function(a){return CComQIPtr(this,"IDevice").commitDeviceState(a)},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a?a[0]:undefined;switch(c){case "DeviceState":this.deviceState=CComQIPtr(new dpv.devState,"IXDomNode");if(this.deviceState.loadFromXml(a)==S_OK){b.removeChild(b.getChildByTrait("IDeviceState"));
b.appendChild(this.deviceState);return S_OK}break}}return E_FAIL}}});Njl.namespace("dpv");
dpv.sysDongleBluetooth=Njl.inherit(CComEventsObjectRoot("ISysDongleBluetoothEvents"),dpv.base,ISysDongleBluetooth,{constructor:function(){dpv.sysDongleBluetooth.superclass.constructor.apply(this,arguments);this._body=this._status=null},ISysDongleBluetooth:{getAddress:function(){return dpv.gp(this._body,"Address")},updateStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="BluetoothUSBDevice" resource-type="BluetoothUSBConnection">                </xs:get>',Njl.id())),
a)},getStatus:function(){return this._status?this._status:E_FAIL}},IXDomNode:{getXml:function(){return this._body},loadFromXml:function(a){CComQIPtr(this,"IXDomNode");if(!a)return E_FAIL;a.getAttributeText("resource-id");var b=a.getAttributeText("resource-type");a.selectNodes("./*");switch(b){case "BluetoothUSBDevice":this._body=a.selectSingleNode("BluetoothUSBDevice");this._body=CComQIPtr(new dpv.xprop(this._body),"IXPropertyList");return S_OK;case "BluetoothUSBConnection":this._status=CComQIPtr(new dpv.sysDongleBluetoothState,
"IXDomNode");if(this._status.loadFromXml(a)==S_OK){this._status=CComQIPtr(this._status,"ISysDongleBluetoothState");return S_OK}break}return E_FAIL}}});Njl.namespace("dpv");
dpv.sysDongleBluetoothState=Njl.inherit(CComObjectRoot,dpv.base,ISysDongleBluetoothState,{constructor:function(){dpv.sysDongleBluetoothState.superclass.constructor.apply(this,arguments)},ISysDongleBluetoothState:{getState:function(){return dpv.gp(this.x,"State")},getClientAddress:function(){return dpv.gp(this.x,"ClientAddress")},getPairingCode:function(){return dpv.gp(this.x,"PairingCode")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=CComQIPtr(new dpv.xprop(a.selectSingleNode("BluetoothUSBConnection")),
"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.sproto=Njl.inherit(CComEventsObjectRoot("IShareProtocolEvents"),dpv.base,IShareProtocol,{constructor:function(a){dpv.sproto.superclass.constructor.call(this,arguments);if(a)switch(a){case "cifs":CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Group_List/>                                    <Host_List/>                                    <User_List/>                                    <DFS_List/>                                    <Property_List>                                        <Not_Available>0</Not_Available>                                        <Share_Display_Option>0</Share_Display_Option>                                        <Enable_Oplocks>1</Enable_Oplocks>                                        <Enable_Recycle_Bin>0</Enable_Recycle_Bin>                                        <Enable_DFS>0</Enable_DFS>                                        <Default_Access>Disabled</Default_Access>                                        <Allow_Guest_Access>0</Allow_Guest_Access>                                        <New_File_Folder_Perm_Autoset>0</New_File_Folder_Perm_Autoset>                                        <Acl_Change_Restriction_Toggle>0</Acl_Change_Restriction_Toggle>                                        <Folder_Create_Group_Rights>Disabled</Folder_Create_Group_Rights>                                        <Folder_Create_EveryOne_Rights>Disabled</Folder_Create_EveryOne_Rights>                                        <File_Create_Group_Rights>Disabled</File_Create_Group_Rights>                                        <File_Create_EveryOne_Rights>Disabled</File_Create_EveryOne_Rights>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);
break;case "dlna":CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                        <Media_Type>All</Media_Type>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);
break;case "daap":CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);break;case "afp":CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <User_List/>                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;case "nfs":CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                        <Default_Sync>0</Default_Sync>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;case "http":CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                        <Enable_WebDav>0</Enable_WebDav>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;case "ftp":CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);break;case "rsync":CComQIPtr(this,
"IXDomNode").loadFromXml((new Njl.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Rsync_User/>                                    <Host_List/>                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Password_Protection>Disabled</Password_Protection>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;default:break}},IShareProtocol:{getId:function(){return this.xid},getProtoId:function(){return this.xpid},getAvailable:function(){return dpv.gp(this.xplist,"Not_Available")=="0"?true:false},putAvailable:function(a){return dpv.pp(this.xplist,"Not_Available",a?0:1)},getEnableDFS:function(){return dpv.gp(this.xplist,"Enable_DFS")=="1"?true:false},putEnableDFS:function(a){return dpv.pp(this.xplist,"Enable_DFS",a?1:0)},getName:function(){return this.xpname?this.xpname:
E_FAIL},getGroups:function(){return this.groups?this.groups.getChildren():E_FAIL},getGroupById:function(a){return this.groups?this.groups.hash[a]:null},getUsers:function(){return this.users?this.users.getChildren():E_FAIL},getUserById:function(a){return this.users?this.users.hash[a]:null},getHosts:function(){return this.hosts?this.hosts.getChildren():E_FAIL},getDFSList:function(){return this.dfsList?this.dfsList.getChildren():E_FAIL},getStrictSync:function(){return dpv.gp(this.xplist,"Strict_Sync")},
putSStrictSync:function(a){return dpv.pp(this.xplist,"Strict_Sync",a?1:0)},getShareDisplayOption:function(){return dpv.gp(this.xplist,"Share_Display_Option")},putShareDisplayOption:function(a){return dpv.pp(this.xplist,"Share_Display_Option",a?1:0)},getFsCaseInsensitive:function(){return dpv.gp(this.xplist,"Fs_Case_Insensitive")},putFsCaseInsensitive:function(a){return dpv.pp(this.xplist,"Fs_Case_Insensitive",a?1:0)},getSmbEncryptOption:function(){return dpv.gp(this.xplist,"Smb_Encrypt")},putSmbEncryptOption:function(a){if(a)return dpv.pp(this.xplist,
"Smb_Encrypt",a);else{a=this.xplist.getXml().xmlDocument.getElementsByTagName("Smb_Encrypt");a.length>0&&this.xplist.getXml().xmlDocument.removeChild(a[0])}},putSmbHomeEncryptOption:function(a){return dpv.pp(this.xplist,"Smb_Encrypt",a)},getEnableOplocks:function(){return dpv.gp(this.xplist,"Enable_Oplocks")},putEnableOplocks:function(a){return dpv.pp(this.xplist,"Enable_Oplocks",a?1:0)},getEnableRecycleBin:function(){return dpv.gp(this.xplist,"Enable_Recycle_Bin")},putEnableRecycleBin:function(a){return dpv.pp(this.xplist,
"Enable_Recycle_Bin",a?1:0)},getDefaultAccess:function(){return dpv.gp(this.xplist,"Default_Access")},putDefaultAccess:function(a){return dpv.pp(this.xplist,"Default_Access",a)},getDefaultSync:function(){return dpv.gp(this.xplist,"Default_Sync")},putDefaultSync:function(a){return dpv.pp(this.xplist,"Default_Sync",a)},getUserId:function(){return dpv.gp(this.xplist,"User_Id")},putUserId:function(a){return dpv.pp(this.xplist,"User_Id",a)},getGroupId:function(){return dpv.gp(this.xplist,"Group_Id")},
putGroupId:function(a){return dpv.pp(this.xplist,"Group_Id",a)},getSquashType:function(){return dpv.gp(this.xplist,"Squash_Type")},putSquashType:function(a){return dpv.pp(this.xplist,"Squash_Type",a)},getAllowGuestAccess:function(){return dpv.gp(this.xplist,"Allow_Guest_Access")},putAllowGuestAccess:function(a){return dpv.pp(this.xplist,"Allow_Guest_Access",a?1:0)},getNewFileFolderPermAutoset:function(){return dpv.gp(this.xplist,"New_File_Folder_Perm_Autoset")},putNewFileFolderPermAutoset:function(a){return dpv.pp(this.xplist,
"New_File_Folder_Perm_Autoset",a?1:0)},getAclChangeRestrictionToggle:function(){return dpv.gp(this.xplist,"Acl_Change_Restriction_Toggle")},putAclChangeRestrictionToggle:function(a){return dpv.pp(this.xplist,"Acl_Change_Restriction_Toggle",a?1:0)},getFolderCreateGroupRights:function(){return dpv.gp(this.xplist,"Folder_Create_Group_Rights")},putFolderCreateGroupRights:function(a){return dpv.pp(this.xplist,"Folder_Create_Group_Rights",a)},getFolderCreateEveryOneRights:function(){return dpv.gp(this.xplist,
"Folder_Create_EveryOne_Rights")},putFolderCreateEveryOneRights:function(a){return dpv.pp(this.xplist,"Folder_Create_EveryOne_Rights",a)},getFileCreateGroupRights:function(){return dpv.gp(this.xplist,"File_Create_Group_Rights")},putFileCreateGroupRights:function(a){return dpv.pp(this.xplist,"File_Create_Group_Rights",a)},getFileCreateEveryOneRights:function(){return dpv.gp(this.xplist,"File_Create_EveryOne_Rights")},putFileCreateEveryOneRights:function(a){return dpv.pp(this.xplist,"File_Create_EveryOne_Rights",
a)},getSpotlight:function(){return dpv.gp(this.xplist,"Enable_Spotlight")=="1"},putSpotlight:function(a){return dpv.pp(this.xplist,"Enable_Spotlight",a?"1":"0")},getMediaType:function(){return dpv.gp(this.xplist,"Media_Type")},putMediaType:function(a){return dpv.pp(this.xplist,"Media_Type",a)},getEnablePasswordProtection:function(){return dpv.gp(this.xplist,"Password_Protection")},putEnablePasswordProtection:function(a){return dpv.pp(this.xplist,"Password_Protection",a)},getEnableWebDav:function(){return dpv.gp(this.xplist,
"Enable_WebDav")},putEnableWebDav:function(a){return dpv.pp(this.xplist,"Enable_WebDav",a)},putWebDavDefaultAccess:function(a){return dpv.pp(this.xplist,"Default_Access",a)},putWebDavAllowGuestAccess:function(a){return dpv.pp(this.xplist,"Allow_Guest_Access",a)},addUser:function(a){if(!this.xuls){this.x.appendNode("User_List");CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}if(this.xuls&&a)if(this.users&&this.users.hash&&!this.users.hash[a.getId()]){var b=CComQIPtr(a,"IXDomNode").clone(),c=this.xuls.appendNode(b.__s.x);
if(c)if(b.loadFromXml(c)==S_OK){this.users.hash[a.getId()]=CComQIPtr(b,"IUser");this.users.hash[a.getId()].putAccess("Disabled");this.users.appendChild(b);return S_OK}}return E_FAIL},appendUser:function(a){if(!this.xuls){this.x.appendNode("User_List");CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}if(this.xuls&&a){var b=this.xuls;a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}return E_FAIL},removeUser:function(a){if(a){var b=
this.x.selectSingleNode("User_List/User[User_Id='"+a.getId()+"']");if(b)if(b.removeNode()){this.users.removeChild(this.users.hash[a.getId()]);this.users.hash[a.getId()]=undefined;return S_OK}}return E_FAIL},removeAllUsers:function(){if(this.xuls){var a=this.xuls;if(this.users&&this.users.hash)this.users.hash={};a.removeNode();this.x.appendNode("User_List");return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},appendGroup:function(a){if(!this.xgls){this.x.appendNode("Group_List");CComQIPtr(this,
"IXDomNode").loadFromXml(this.x)}if(this.xgls&&a){var b=this.xgls;a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}return E_FAIL},removeGroup:function(a){if(a){var b=this.x.selectSingleNode("Group_List/Group[Group_Id='"+a.getId()+"']");if(b){if(b.removeNode()){this.groups.removeChild(this.groups.hash[a.getId()]);this.groups.hash[a.getId()]=undefined;return S_OK}return E_FAIL}}return E_INVALIDARG},appendHost:function(a){if(!this.xhls){this.x.appendNode("Host_List");
CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}if(this.xhls&&a){var b=this.xhls;a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}return E_FAIL},removeHost:function(a){if(a)if(a=this.xhls.selectSingleNode("Host[@id='"+a.getId()+"']")){if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.x);return E_FAIL}return E_INVALIDARG},removeHostById:function(a){if(a!=undefined&&a!=null)if(a=this.xhls.selectSingleNode("Host[@id='"+
a+"']")){if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.x);return E_FAIL}return E_INVALIDARG},removeAllHosts:function(){if(this.xhls){this.xhls.removeNode();this.x.appendNode("Host_List");return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},appendDFSFolder:function(a){if(!this.dfsls){this.x.appendNode("DFS_List");CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}if(this.dfsls&&a){var b=this.dfsls;a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);
return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}return E_FAIL},removeDFSFolder:function(a){var b=this.x,c=this;a&&Njl.each(this.dfslist,function(d){var e=CComQIPtr(new dpv.xprop(d),"IXPropertyList");if(dpv.gp(e,"Name")==a)if(d.removeNode())return CComQIPtr(c,"IXDomNode").loadFromXml(b)},this);return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xpname=this.x.getNodeName();this.xid=this.x.getAttributeText("id");this.xpid=this.x.getAttributeText("protocol-id");
this.xhls=this.x.selectSingleNode("Host_List");this.xuls=this.x.selectSingleNode("User_List");this.xgls=this.x.selectSingleNode("Group_List");this.dfsls=this.x.selectSingleNode("DFS_List");this.xhlist=this.x.selectNodes("Host_List/Host");this.xulist=this.x.selectNodes("User_List/User");this.xglist=this.x.selectNodes("Group_List/Group");this.dfslist=this.x.selectNodes("DFS_List/DFS_folder");this.xplist=this.x.selectSingleNode("Property_List");if(a=Njl.isAllDefined(this.xplist)){this.xplist=CComQIPtr(new dpv.xprop(this.xplist),
"IXPropertyList");var b=CComQIPtr(this,"IXDomNode");b.removeAll();var c=false;if(this.xpname=="rsync")c=true;if(this.xuls){this.users=CComQIPtr(new dpv.base,"IXDomNode");this.users.hash={};Njl.each(this.xulist,function(d){var e=CComQIPtr(new dpv.user(true),"IXDomNode");if(e.loadFromXml(d)==S_OK){d=CComQIPtr(e,"IUser");this.users.hash[d.getId()]=d;this.users.appendChild(e)}},this);b.appendChild(this.users)}if(this.xhls){this.hosts=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xhlist,function(d){var e=
CComQIPtr(new dpv.sprotohost(true),"IXDomNode");e.loadFromXml(d)==S_OK&&this.hosts.appendChild(e)},this);b.appendChild(this.hosts)}if(this.dfsls){this.dfsList=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.dfslist,function(d){var e=CComQIPtr(new dpv.sprotodfs(true),"IXDomNode");e.loadFromXml(d)==S_OK&&this.dfsList.appendChild(e)},this);b.appendChild(this.dfsList)}if(this.xgls){this.groups=CComQIPtr(new dpv.base,"IXDomNode");this.groups.hash={};Njl.each(this.xglist,function(d){var e=CComQIPtr(new dpv.group(true),
"IXDomNode");if(e.loadFromXml(d)==S_OK){d=CComQIPtr(e,"IGroup");this.groups.hash[d.getId()]=d;this.groups.appendChild(e)}},this);b.appendChild(this.groups)}}return a?S_OK:E_FAIL}}});Njl.namespace("dpv");
dpv.securityManager=Njl.inherit(CComEventsObjectRoot("ISecurityManagerEvents"),dpv.base,ISecurityManager,{constructor:function(){dpv.securityManager.superclass.constructor.apply(this,arguments)},ISecurityManager:{getUsers:function(){if(this.users)return CComQIPtr(this.users,"IXDomNode").getChildren();return E_FAIL},getUserById:function(a){var b=!this.users?this.qusers:this.users;return b?b.hash[a]:null},updateUsers:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Users" resource-type="User_Collection"/>',
Njl.id())),a)},updateUsersWithAdmin:function(a,b,c){b=!b?0:1;c=!c?1:0;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="1" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:and>                            <xs:equal property="/User/With_Admin" value="{1}"/>                            <xs:equal property="/User/Without_ReadyCloud_Users" value="{2}"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
Njl.id(),b,c)),a)},applyUsers:function(a){return this.sendXml(dpv.xmlEnvelope('<xs:update resource-id="User" resource-type="User"></xs:update>'),a)},commitUser:function(a,b){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="User_Collection" resource-type="User_Collection">                            <User_Collection>{1}</User_Collection>                        </xs:set>',Njl.id(),b)),a)},commitUsers:function(a,b){var c=
"";if(b&&b.length){for(var d=0;d<b.length;++d)c+=CComQIPtr(b[d],"IXDomNode").getXml().toString();if(c)c="<User_Collection>"+c+"</User_Collection>"}else if(this.xusers&&this.xusers.length)c=this.x.selectSingleNode("./User_Collection").toString();if(c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Users" resource-type="User_Collection">{1}</xs:set>',Njl.id(),c)),a);return S_FALSE},addUser:function(a,b,c,d,e,f){return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:add id="{0}" resource-type="User" c-resource-id="Users" c-resource-type="User_Collection">                    <User_Collection>                        <User id="0" resource-type="User">                            <User_Id><![CDATA[{1}]]\></User_Id>                            <User_Name><![CDATA[{2}]]\></User_Name>                            <Password><![CDATA[{3}]]\></Password>                            <Group_Name><![CDATA[{4}]]\></Group_Name>                            <Email_Address><![CDATA[{5}]]\></Email_Address>                        </User>                        </User_Collection>                </xs:add>',
Njl.id(),a,b,c,d,e)),f)},createUser:function(){return CComQIPtr(new dpv.user,"IUser")},AddUser:function(a,b){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:add id="{0}" resource-type="User" c-resource-id="Users" c-resource-type="User_Collection">                    <User_Collection>                        {1}                    </User_Collection>                </xs:add>',Njl.id(),b)),a)},removeUser:function(a,b){if(a&&CComQIPtr(a,"IUser")){var c=
CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");c=(c=c?c.getShareManager():null)?c.getShares():E_FAIL;c!=E_FAIL&&c.length&&Njl.each(c,function(d){Njl.each(CComQIPtr(d,"IShare").getProtocols(),function(e){CComQIPtr(e,"IShareProtocol").removeUser(a)},this)},this);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="User" c-resource-id="Users" c-resource-type="User_Collection"/>',Njl.id(),a.getId())),b)}return E_INVALIDARG},getGroups:function(){if(this.groups)return CComQIPtr(this.groups,
"IXDomNode").getChildren();return E_FAIL},getGroupById:function(a){return this.groups?this.groups.hash[a]:null},updateGroups:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Groups" resource-type="Group_Collection"/>',Njl.id())),a)},commitGroups:function(a){if(this.xgroups&&this.xgroups.length){var b=this.xg.selectSingleNode("./Group_Collection").toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Groups" resource-type="Group_Collection">{1}</xs:set>',
Njl.id(),b)),a)}return S_FALSE},addGroup:function(a,b,c){return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:add id="{0}" resource-type="Group" c-resource-id="Groups" c-resource-type="Group_Collection">                    <Group_Collection>                        <Group id="0" resource-type="Group">                            <Group_Id><![CDATA[{1}]]\></Group_Id>                            <Group_Name><![CDATA[{2}]]\></Group_Name>                             <Secondary_Member_List/>                        </Group>                        </Group_Collection>                </xs:add>',
Njl.id(),a,b)),c)},removeGroup:function(a,b){if(a&&CComQIPtr(a,"IGroup"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Group" c-resource-id="Groups" c-resource-type="Group_Collection"/>',Njl.id(),a.getId())),b);return E_INVALIDARG},getADSMode:function(){return this.ads?this.ads.type:E_FAIL},getADSDomain:function(){return this.ads?this.ads.wroup:E_FAIL},getADSRealm:function(){return this.ads?this.ads.realm:E_FAIL},getADSOrganization:function(){return this.ads?
this.ads.ounit:E_FAIL},getADSAdminName:function(){return this.ads?this.ads.admin:E_FAIL},getADSAdminPwd:function(){return this.ads?this.ads.pwd:E_FAIL},getADSController:function(){return this.ads?this.ads.ctrlr:E_FAIL},getTrustedUsersVisibility:function(){return this.ads?this.ads.dispu:E_FAIL},getNotSyncAdsAccounts:function(){return this.ads?this.ads.notSync:E_FAIL},getTimeout:function(){return this.ads?this.ads.timeout:E_FAIL},getADSIDMapMode:function(){return this.ads?this.ads.idMapMode:E_FAIL},
updateADSMode:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SecurityMode" resource-type="Security"/>',Njl.id())),a)},commitADSMode:function(a,b,c,d,e,f,g,h,k,j,m){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="SecurityMode" resource-type="Security">                  <Security>                   <Type>{1}</Type>                   <Realm>{2}</Realm>                   <workGroup>{3}</workGroup>                   <orgUnit><![CDATA[{4}]]\></orgUnit>                   <domainAdministrator>{5}</domainAdministrator>                   <passWord><![CDATA[{6}]]\></passWord>                   <passWordServer>{7}</passWordServer>                   <displayTrustedUsers>{8}</displayTrustedUsers>                   <noSyncADS>{9}</noSyncADS>                   <ldapTimeout>{10}</ldapTimeout>                  </Security>                </xs:set>',
Njl.id(),a,b,c,d,e,f,g,h,j||"0",m)),k)},queryUsers:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:like property="/User/User_Name/">                            <xs:value><![CDATA[%{3}%]]\></xs:value>                        </xs:like>                    </xs:criterion>                </xs:query>',
Njl.id(),b,c,a)),d)},queryUsersWithAdmin:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:and>                            <xs:equal property="/User/With_Admin" value="1"/>                            <xs:equal property="/User/Without_ReadyCloud_Users" value="1"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
Njl.id(),b,c,a)),d)},getQueryUsers:function(){return this.qusers?this.qusers.getChildren():E_FAIL},getQueryUsersCount:function(){return this.lucnt!=undefined?this.lucnt:E_FAIL},getTotalUsersCount:function(){return this.tlucnt!=undefined?this.tlucnt:E_FAIL},queryGroups:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="ADS_Group_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}" sort="/Group/Group_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:like property="/Group/Group_Name/">                            <xs:value><![CDATA[%{3}%]]\></xs:value>                        </xs:like>                    </xs:criterion>                </xs:query>',
Njl.id(),b,c,a)),d)},getQueryGroups:function(){return this.qgroups?this.qgroups.getChildren():E_FAIL},getQueryGroupsCount:function(){return this.lgcnt!=undefined?this.lgcnt:E_FAIL},getTotalGroupsCount:function(){return this.tlgcnt!=undefined?this.tlgcnt:E_FAIL},refreshAds:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="ADS" resource-type="Security">                    <xs:command_name>RefreshAds</xs:command_name>                </xs:command>',Njl.id())),
a)},getADSProgress:function(){return this.adsprogress?this.adsprogress:E_FAIL},updateADSProgress:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SecurityAdsProgress" resource-type="SecurityAdsProgress"/>',Njl.id())),a)},getLoginUserName:function(){return this.loginUserName?this.loginUserName:E_FAIL},UpdateLoginUserName:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="LoginUser" resource-type="LoginUser"/>',Njl.id())),
a)},UpdateRCUsers:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Users" resource-type="Cloud_User_Collection"/>',Njl.id())),a)},getRCUsers:function(){if(this.rcusers)return CComQIPtr(this.rcusers,"IXDomNode").getChildren();return E_FAIL},UpdateDefaultUserProfile:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="default_user_profile"/>',Njl.id())),a)},getDefaultUserProfile:function(){return this.dup||E_FAIL},
CommitDefaultUserProfile:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="default_user_profile">                    {1}                </xs:set>',Njl.id(),CComQIPtr(this.dup,"IXDomNode").getXml().toString())),a)},queryUsersWithTimeMachine:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="1" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:like property="/User/Time_Machine/">                            <xs:value><![CDATA[%%]]\></xs:value>                        </xs:like>                    </xs:criterion>                </xs:query>',
Njl.id())),a)},removeUserTimeMachine:function(a,b){if(a&&CComQIPtr(a,"IUser"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Timemachine"/>',Njl.id(),a.getId())),b);return E_INVALIDARG},queryUsersWithHomeFolder:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:criterion>                        <xs:equal property="/User/Home_Folder/Exists">                            <xs:value><![CDATA[1]]\></xs:value>                        </xs:equal>                    </xs:criterion>                </xs:query>',
Njl.id())),a)},queryUsersWithHFProtectOrAccess:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:criterion>                        <xs:or>                            <xs:equal property="/User/Home_Folder/Snapshot_Protection">                                <xs:value><![CDATA[1]]\></xs:value>                            </xs:equal>                            <xs:equal property="/User/Home_Folder/Snapshot_Access">                                <xs:value><![CDATA[1]]\></xs:value>                            </xs:equal>                        </xs:or>                    </xs:criterion>                </xs:query>',
Njl.id())),a)},backupADSIDMap:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update resource-id="AdsIdmapBackup" resource-type="AdsIdmapBackup"/>')),a)}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){switch(e){case "xs:command-s":a=b[1]?b[1].getNodeText():undefined;this.Fire("OnRefreshAds",[c,a]);break}return S_OK}},IXDomNode:{Update:function(a){var b=CComQIPtr(this,"ISecurityManager");return b.updateUsers(a)&&b.updateGroups(a)},Commit:function(a){var b=CComQIPtr(this,
"ISecurityManager");return b.commitUsers(a)&&b.commitGroups(a)},getXml:function(){return this.x},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),"INotifySink").Advise(this,"Security");return E_FAIL},loadFromXml:function(a){var b=a.getAttributeText("resource-id"),c=a.getAttributeText("resource-type"),d=CComQIPtr(this,"IXDomNode");if(b=="SecurityMode"){if(d=a.selectSingleNode("Security")){this.ads={type:dpv.xprop.prototype.getPropertyAbsolute(d,"Type"),realm:dpv.xprop.prototype.getPropertyAbsolute(d,
"Realm"),wroup:dpv.xprop.prototype.getPropertyAbsolute(d,"workGroup"),ounit:dpv.xprop.prototype.getPropertyAbsolute(d,"orgUnit"),admin:dpv.xprop.prototype.getPropertyAbsolute(d,"domainAdministrator"),pwd:dpv.xprop.prototype.getPropertyAbsolute(d,"passWord"),ctrlr:dpv.xprop.prototype.getPropertyAbsolute(d,"passWordServer"),dispu:dpv.xprop.prototype.getPropertyAbsolute(d,"displayTrustedUsers"),notSync:dpv.xprop.prototype.getPropertyAbsolute(d,"noSyncADS"),timeout:dpv.xprop.prototype.getPropertyAbsolute(d,
"ldapTimeout"),idMapMode:dpv.xprop.prototype.getPropertyAbsolute(d,"idmapBackend")};return S_OK}return E_FAIL}else if(c=="SecurityAdsProgress"){if(d=a.selectSingleNode("SecurityAdsProgress")){a=CComQIPtr(new dpv.adsprogress,"IXDomNode");if(a.loadFromXml(d)==S_OK){this.adsprogress=a;return S_OK}}}else if(c=="ADS_User_Collection"){if(b=a.selectSingleNode("User_Collection")){this.lucnt=parseInt(b.getAttributeText("n_entries"));this.tlucnt=parseInt(b.getAttributeText("n_total_entries"));b=b.selectNodes("User");
this.qusers=CComQIPtr(new dpv.base,"IXDomNode");this.qusers.hash=[];if(b){d=0;for(a=b.length;d<a;d++){c=CComQIPtr(new dpv.user(true),"IXDomNode");if(c.loadFromXml(b[d])==S_OK){var e=CComQIPtr(c,"IUser");this.qusers.hash[e.getId()]=e;this.qusers.appendChild(c)}}}return S_OK}}else if(c=="ADS_Group_Collection"){if(c=a.selectSingleNode("Group_Collection")){this.lgcnt=parseInt(c.getAttributeText("n_entries"));this.tlgcnt=parseInt(c.getAttributeText("n_total_entries"));b=c.selectNodes("Group");this.qgroups=
CComQIPtr(new dpv.base,"IXDomNode");if(b){d=0;for(a=b.length;d<a;d++){c=CComQIPtr(new dpv.group(true),"IXDomNode");c.loadFromXml(b[d])==S_OK&&this.qgroups.appendChild(c)}}return S_OK}}else if(c=="Cloud_User_Collection"){if(a.selectNodes("User_Collection")){a=a.selectNodes("User_Collection/User");this.rcusers&&d.removeChild(this.rcusers);this.rcusers=CComQIPtr(new dpv.base,"IXDomNode");d.appendChild(this.rcusers);this.rcusers.hash=[];Njl.each(a,function(f){var g=CComQIPtr(new dpv.user(true),"IXDomNode");
if(g.loadFromXml(f)==S_OK){f=CComQIPtr(g,"IUser");this.rcusers.hash[f.getId()]=f;this.rcusers.appendChild(g)}},this);return S_OK}}else if(c=="default_user_profile"){if(d=a.selectSingleNode("Default_User_Profile")){a=CComQIPtr(new dpv.user,"IXDomNode");if(a.loadFromXml(d)==S_OK){this.dup=CComQIPtr(a,"IUser");return S_OK}}}else if(c=="LoginUser"){if(d=a.selectSingleNode("CurrentLoginUser")){d=CComQIPtr(new dpv.xprop(d),"IXPropertyList");this.loginUserName=dpv.gp(d,"Username")}return S_OK}else{b=a.selectNodes("User_Collection");
c=a.selectNodes("Group_Collection");(e=(e=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice"))?e.getShareManager():null)&&e.getShares();if(b){this.x=a;this.xusers=a.selectNodes("User_Collection/User");this.users&&d.removeChild(this.users);this.users=CComQIPtr(new dpv.base,"IXDomNode");this.users.hash=[];Njl.each(this.xusers,function(f){var g=CComQIPtr(new dpv.user(true),"IXDomNode");if(g.loadFromXml(f)==S_OK){f=CComQIPtr(g,"IUser");this.users.hash[f.getId()]=f;this.users.appendChild(g)}},this);
d.appendChild(this.users);return S_OK}if(c){this.xg=a;this.xgroups=a.selectNodes("Group_Collection/Group");this.groups&&d.removeChild(this.groups);this.groups=CComQIPtr(new dpv.base,"IXDomNode");this.groups.hash=[];Njl.each(this.xgroups,function(f){var g=CComQIPtr(new dpv.group(true),"IXDomNode");if(g.loadFromXml(f)==S_OK){f=CComQIPtr(g,"IGroup");var h=f.getId();if(f&&f!=E_FAIL)this.groups.hash[h]=f;this.groups.appendChild(g)}},this);d.appendChild(this.groups);return S_OK}}return E_FAIL}}});Njl.namespace("dpv");
dpv.dns=Njl.inherit(CComEventsObjectRoot("INetworkDNSEvents"),dpv.base,INetworkDNS,{constructor:function(a){dpv.dns.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("               <DNS>                  <Priority>0</Priority>                  <IP_Address>0.0.0.0</IP_Address>               </DNS>")).selectNodes("./*")[0])},INetworkDNS:{getIP:function(){return dpv.gp(this.xstgs,"IP_Address")},putIP:function(a){return dpv.pp(this.xstgs,"IP_Address",
a)},getPriority:function(){return dpv.gp(this.xstgs,"Priority")},putPriority:function(a){return dpv.pp(this.xstgs,"Priority",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xstgs=this.x.selectSingleNode(".");if(Njl.isAllDefined(this.xstgs)){this.xstgs=CComQIPtr(new dpv.xprop(this.xstgs),"IXPropertyList");return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.eth=Njl.inherit(CComEventsObjectRoot("INetworkInterfaceEvents"),dpv.base,INetworkInterface,{constructor:function(){dpv.eth.superclass.constructor.apply(this,arguments)},INetworkInterface:{getLinkStatus:function(){return dpv.gp(this.xstgs,"Link_Status")},getIPAssignment:function(){return dpv.gp(this.xstgs,"IP_Assignment")},putIPAssignment:function(a){return dpv.pp(this.xstgs,"IP_Assignment",a)},getName:function(){return dpv.gp(this.xstgs,"Name")},getNetMask:function(){return dpv.gp(this.xstgs,
"Net_Mask")},putNetMask:function(a){return dpv.pp(this.xstgs,"Net_Mask",a)},getBroadcastIP:function(){return dpv.gp(this.xstgs,"Broadcast")},putBroadcastIP:function(a){return dpv.pp(this.xstgs,"Broadcast",a)},getMTU:function(){return dpv.gp(this.xstgs,"MTU")},putMTU:function(a){return dpv.pp(this.xstgs,"MTU",a)},getMAC:function(){return dpv.gp(this.xstgs,"HW_Addr")},getIP:function(){return dpv.gp(this.xstgs,"IP_Address")},putIP:function(a){return dpv.pp(this.xstgs,"IP_Address",a)},renew:function(a){var b=
CComQIPtr(this,"INetworkInterface");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Network">                        <xs:command_name>renew</xs:command_name>                        <xs:args/>                        </xs:command>',Njl.id(),b.getName())),a)}},IXDomNode:{loadFromXml:function(a){this.x=a;if(this.xstgs=this.x.selectSingleNode(".")){this.xstgs=CComQIPtr(new dpv.xprop(this.xstgs),"IXPropertyList");return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.dnsManager=Njl.inherit(CComEventsObjectRoot("INetworkDNSManagerEvents"),dpv.base,INetworkDNSManager,{constructor:function(){dpv.dnsManager.superclass.constructor.apply(this,arguments)},INetworkDNSManager:{getDNSRecords:function(){return CComQIPtr(this,"IXDomNode").getChildren()},getDomain:function(){return dpv.gp(this.xstgs,"Domain")},putDomain:function(a){return dpv.pp(this.xstgs,"Domain",a)},appendDNSRecord:function(a){if(CComQIPtr(a,"INetworkDNS")){var b=this.x.selectSingleNode("DNS_List");
if(b){xsnode=CComQIPtr(a,"IXDomNode");if(a=b.appendNode(xsnode.getXml())){xsnode.loadFromXml(a);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}}return E_FAIL},removeDNSRecord:function(a){if(a=CComQIPtr(a,"INetworkDNS"))if(a=this.x.selectSingleNode("DNS_List/DNS[IP_Address='"+a.getIP()+"']"))if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.x);return E_FAIL}},IXDomNode:{loadFromXml:function(a){this.x=a;this.xstgs=this.x.selectSingleNode(".");this.xdnss=this.x.selectNodes("DNS_List/DNS");
if(Njl.isAllDefined(this.xstgs,this.xdnss)){this.xstgs=CComQIPtr(new dpv.xprop(this.xstgs),"IXPropertyList");var b=CComQIPtr(this,"IXDomNode");b.removeAll();Njl.each(this.xdnss,function(c){var d=CComQIPtr(new dpv.dns(true),"IXDomNode");d.loadFromXml(c)==S_OK&&b.appendChild(d)},this);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.ntManager=Njl.inherit(CComEventsObjectRoot("INetworkManagerEvents"),dpv.base,INetworkManager,IDeviceWebEventSinkEvents,{constructor:function(){dpv.ntManager.superclass.constructor.apply(this,arguments)},INetworkManager:{updateNetworkInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Network" resource-type="Network" />',Njl.id())),a)},commitNetworkInfo:function(a){if(this.x){var b=this.x.selectSingleNode("Network").toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Network" resource-type="Network">{1}</xs:set>',
Njl.id(),b)),a)}return E_FAIL},getDNSManager:function(){return this.mdns?this.mdns:E_FAIL},getInterfaces:function(){return this.eths?this.eths.getChildren():E_FAIL},getWorkgroup:function(){return dpv.gp(this.xstgs,"Workgroup")},putWorkgroup:function(a){return dpv.pp(this.xstgs,"Workgroup",a)},getGateway:function(){return dpv.gp(this.xstgs,"Gateway")},putGateway:function(a){return dpv.pp(this.xstgs,"Gateway",a)},getHostname:function(){return dpv.gp(this.xstgs,"Hostname")},putHostname:function(a){return dpv.pp(this.xstgs,
"Hostname",a)},getPrimaryRouter:function(){return dpv.gp(this.xstgs,"PrimaryRouter")},putPrimaryRouter:function(a){return dpv.pp(this.xstgs,"PrimaryRouter",a)},getAutoDHCP:function(){return dpv.gp(this.xstgs,"AutoDhcp")},putAutoDHCP:function(a){return dpv.pp(this.xstgs,"AutoDhcp",a)},updateNICS:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="network_link_list" resource-type="network_link_collection" />',Njl.id())),a)},updateBONDS:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="aggregate" resource-type="aggregate_collection" />',
Njl.id())),a)},getNICS:function(){return this.xnics?this.xnics.getChildren():E_FAIL},commitNIC:function(a,b){if(CComQIPtr(a,"INetworkNIC")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="link" resource-type="Network" >{1}</xs:set>',Njl.id(),a.getXml().toString())),b)}},AppendVNIC:function(a,b){var c=CComQIPtr(a,"IXDomNode");if(CComQIPtr(a,"INetworkVNIC")&&c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="vnic" resource-type="Network">                       {1}                    </xs:add>',
Njl.id(),c.getXml().toString())),b);return E_FAIL},RemoveVNIC:function(a,b){if(a=CComQIPtr(a,"INetworkVNIC"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{1}" resource-id="vnic" resource-type="Network"/>',Njl.id(),a.getName())),b);return E_FAIL},commitVNIC:function(a,b){if(CComQIPtr(a,"INetworkVNIC")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="vnic" resource-type="Network" >{1}</xs:set>',Njl.id(),a.getXml().toString())),
b)}},getBONDS:function(){return this.xbonds?this.xbonds.getChildren():E_FAIL},AppendBOND:function(a,b,c,d,e,f){a=CComQIPtr(a,"INetworkNIC");b=CComQIPtr(b,"INetworkNIC");if(a&&c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="aggregate" resource-type="Network">                       <aggregate>                            <lacpactivity><![CDATA[{3}]]\></lacpactivity>                            <timer><![CDATA[{4}]]\></timer>                            <policy><![CDATA[{5}]]\></policy>                            <link_collection>\t\t                        <link><![CDATA[{1}]]\></link>\t\t                        {2}                            </link_collection>                        </aggregate >                    </xs:add>',
Njl.id(),a.getName(),b?"<link><![CDATA["+b.getName()+"]]\></link>":"",c,d,e)),f);return E_FAIL},AppendG2BOND:function(a,b,c,d,e){for(var f="",g=0;g<a.length;++g){var h=CComQIPtr(a[g],"INetworkNIC");if(!h)return E_FAIL;f+="<link><![CDATA["+h.getName()+"]]\></link>"}if(b&&f!="")return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="aggregate" resource-type="Network">                       <aggregate>                            <mode><![CDATA[{2}]]\></mode>                            <policy><![CDATA[{3}]]\></policy>                            <primary><![CDATA[{4}]]\></primary>                            <link_collection>\t\t                        {1}                            </link_collection>                        </aggregate >                    </xs:add>',
Njl.id(),f,b,c,d?d.getName():"")),e);return E_FAIL},RemoveBOND:function(a,b){if(a=CComQIPtr(a,"INetworkBond"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{1}" resource-id="aggregate" resource-type="Network"/>',Njl.id(),a.getName())),b);return E_FAIL},AppendBONDNIC:function(a,b,c){a=CComQIPtr(a,"INetworkBond");b=CComQIPtr(b,"INetworkNIC");if(a&&b)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{1}" resource-id="aggregate_link" resource-type="Network">                        <link>{2}</link>                    </xs:add>',
Njl.id(),a.getName(),b.getName())),c);return E_FAIL},RemoveBONDNIC:function(a,b,c){a=CComQIPtr(a,"INetworkBond");b=CComQIPtr(b,"INetworkNIC");if(a&&b)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{1}" resource-id="aggregate_link" resource-type="Network">                        <link>{2}></link>                    </xs:delete>',Njl.id(),a.getName(),b.getName())),c);return E_FAIL},commitBOND:function(a,b){if(CComQIPtr(a,"INetworkBond")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="aggregate" resource-type="Network" >{1}</xs:set>',
Njl.id(),a.getXml().toString())),b)}return E_FAIL},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():E_FAIL},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Network/dnscollection");b.removeNode("DNS");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(CComQIPtr(a,"INetworkDNS")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL}},
IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){if(e=="xs:error-s"){b=CComQIPtr(new dpv.nmlerr,"INMLError");CComQIPtr(b,"IXDomNode").loadFromXml(a);this.Fire("OnNetworkError",[b])}else switch(c){case "aggregate":this.Fire("OnBONDCreated",[b]);break;case "vnic":this.Fire("OnVNICUpdated",[b]);break}return S_OK}},IXDomNode:{Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),"INotifySink").Advise(this,"Network");return E_FAIL},Update:function(a){return CComQIPtr(this,
"INetworkManager").updateNetworkInfo(a)},Commit:function(a){return CComQIPtr(this,"INetworkManager").commitNetworkInfo(a)},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");this.xmdns=a.selectSingleNode("Network/DNS_Settings");var c=a.selectSingleNode("Network/General_Settings");this.xiint=a.selectNodes("Network/Interface_Settings/Interface_List/Interface");var d=a.selectSingleNode("network_link_collection"),e=a.selectSingleNode("aggregate_collection");if(Njl.isAllDefined(c,this.xmdns,this.xiint)){this.x=
a;this.xstgs=CComQIPtr(new dpv.xprop(c),"IXPropertyList");b.removeAll();this.mdns=CComQIPtr(new dpv.dnsManager,"IXDomNode");this.mdns.loadFromXml(this.xmdns)==S_OK&&b.appendChild(this.mdns);this.eths=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xiint,function(f){var g=CComQIPtr(new dpv.eth,"IXDomNode");g.loadFromXml(f)==S_OK&&this.eths.appendChild(g)},this);b.appendChild(this.eths);return S_OK}else if(c){this.x=a;this.xstgs=CComQIPtr(new dpv.xprop(c),"IXPropertyList");if(a=a.selectSingleNode("Network/dnscollection")){a=
a.selectNodes("DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(a,function(f){var g=CComQIPtr(new dpv.dns(true),"IXDomNode");g.loadFromXml(f)==S_OK&&this.xdns.appendChild(g)},this);b.appendChild(this.xdns)}return S_OK}if(d){this.xn=a;d=a.selectNodes("network_link_collection/network_link");this.xnics&&b.removeChild(this.xnics);this.xnics=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(d,function(f){var g=CComQIPtr(new dpv.nic,"IXDomNode");g.loadFromXml(f)==
S_OK&&this.xnics.appendChild(g)},this);b.appendChild(this.xnics);return S_OK}if(e){this.xb=a;e=a.selectNodes("aggregate_collection/aggregate");this.xbonds&&b.removeChild(this.xbonds);this.xbonds=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(e,function(f){var g=CComQIPtr(new dpv.bond(true),"IXDomNode");g.loadFromXml(f)==S_OK&&this.xbonds.appendChild(g)},this);b.appendChild(this.xbonds);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.htdisk=Njl.inherit(CComObjectRoot,dpv.base,IHealthDisk,{constructor:function(){dpv.htdisk.superclass.constructor.apply(this,arguments)},IHealthDisk:{getLabel:function(){return dpv.gp(this.xprop,"label")},getName:function(){return dpv.gp(this.xprop,"device_name")},getId:function(){return dpv.gp(this.xprop,"device_id")},getResourceId:function(){return dpv.xa2t(this.x,"resource-id")},getModel:function(){return dpv.gp(this.xprop,"disk_model")},getTemperature:function(){return dpv.gp(this.xprop,"disk_temperature")},
getCapacity:function(){return parseInt(dpv.gp(this.xprop,"disk_capacity")||"0")},getStatus:function(){return dpv.gp(this.xprop,"disk_status")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
dpv.htfan=Njl.inherit(CComObjectRoot,dpv.base,IHealthFan,{constructor:function(){dpv.htfan.superclass.constructor.apply(this,arguments)},IHealthFan:{getLabel:function(){return dpv.gp(this.xprop,"label")},getName:function(){return dpv.gp(this.xprop,"device_name")},getId:function(){return dpv.gp(this.xprop,"device_id")},getSpeed:function(){return dpv.gp(this.xprop,"fan_speed")},getMinNormalSpeed:function(){return dpv.xa2t(this.x,"normal-min")},getMaxNormalSpeed:function(){return dpv.xa2t(this.x,"normal-max")},
getStatus:function(){return dpv.gp(this.xprop,"fan_status")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
dpv.httemp=Njl.inherit(CComObjectRoot,dpv.base,IHealthTemp,{constructor:function(){dpv.httemp.superclass.constructor.apply(this,arguments)},IHealthTemp:{getLabel:function(){return dpv.gp(this.xprop,"label")},getName:function(){return dpv.gp(this.xprop,"device_name")},getId:function(){return dpv.gp(this.xprop,"device_id")},getValue:function(){return dpv.gp(this.xprop,"temp_value")},getMinValue:function(){return dpv.gp(this.xprop,"min_value")},getMaxValue:function(){return dpv.gp(this.xprop,"max_value")},
getStatus:function(){return dpv.gp(this.xprop,"status")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
dpv.htups=Njl.inherit(CComObjectRoot,dpv.base,IHealthUPS,{constructor:function(){dpv.htups.superclass.constructor.apply(this,arguments)},IHealthUPS:{getLabel:function(){return dpv.gp(this.xprop,"label")},getName:function(){return dpv.gp(this.xprop,"device_name")},getId:function(){return dpv.gp(this.xprop,"device_id")},getStatus:function(){return dpv.gp(this.xprop,"ups_status")},getRawStatus:function(){return dpv.gp(this.xprop,"ups_raw_status")},getAlarm:function(){return dpv.gp(this.xprop,"ups_alarm")},
getModel:function(){return dpv.gp(this.xprop,"ups_model")},getCharge:function(){return dpv.gp(this.xprop,"battery_charge")},getRuntime:function(){return dpv.gp(this.xprop,"battery_runtime")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
dpv.htsumtemp=Njl.inherit(CComObjectRoot,dpv.base,IHealthSumTemp,{constructor:function(){dpv.htsumtemp.superclass.constructor.apply(this,arguments)},IHealthSumTemp:{getLabel:function(){return dpv.gp(this.xprop,"label")},getStatus:function(){return dpv.gp(this.xprop,"status")},getValue:function(){return dpv.gp(this.xprop,"value")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
dpv.htvolt=Njl.inherit(CComObjectRoot,dpv.base,IHealthVolt,{constructor:function(){dpv.htvolt.superclass.constructor.apply(this,arguments)},IHealthVolt:{getLabel:function(){return dpv.gp(this.xprop,"label")},getName:function(){return dpv.gp(this.xprop,"device_name")},getId:function(){return dpv.gp(this.xprop,"device_id")},getValue:function(){return dpv.gp(this.xprop,"volt_value")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList");return S_OK}}});
dpv.htpsu=Njl.inherit(CComObjectRoot,dpv.base,IHealthPSU,{constructor:function(){dpv.htpsu.superclass.constructor.apply(this,arguments)},IHealthPSU:{getLabel:function(){return dpv.gp(this.xprop,"label")},getName:function(){return dpv.gp(this.xprop,"device_name")},getId:function(){return dpv.gp(this.xprop,"device_id")},getStatus:function(){return dpv.gp(this.xprop,"status")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");
return S_OK}}});
dpv.htsmart=Njl.inherit(CComObjectRoot,dpv.base,IHealthDiskSmartInfo,{constructor:function(){dpv.htsmart.superclass.constructor.apply(this,arguments)},IHealthDiskSmartInfo:{getDevice:function(){return dpv.gp(this.xprop,"Device")},getController:function(){return dpv.gp(this.xprop,"Controller")},getChannel:function(){return dpv.gp(this.xprop,"Channel")},getModel:function(){return dpv.gp(this.xprop,"Model")},getSerial:function(){return dpv.gp(this.xprop,"Serial")},getFirmware:function(){return dpv.gp(this.xprop,"Firmware")},
getClass:function(){return dpv.gp(this.xprop,"Class")},getRPM:function(){return dpv.gp(this.xprop,"RPM")},getSectors:function(){return dpv.gp(this.xprop,"Sectors")},getPool:function(){return dpv.gp(this.xprop,"Pool")},getPoolType:function(){return dpv.gp(this.xprop,"PoolType")},getATAErrorCount:function(){return dpv.gp(this.xhprop,"ATAErrorCount")},getReallocatedSectors:function(){return dpv.gp(this.xhprop,"ReallocatedSectors")},getReallocationEvents:function(){return dpv.gp(this.xhprop,"ReallocationEvents")},
getSpinRetryCount:function(){return dpv.gp(this.xhprop,"SpinRetryCount")},getEndToEndErrors:function(){return dpv.gp(this.xhprop,"EndToEndErrors")},getCommandTimeouts:function(){return dpv.gp(this.xhprop,"CommandTimeouts")},getCurrentPendingSectorCount:function(){return dpv.gp(this.xhprop,"CurrentPendingSectorCount")},getUncorrectableSectorCount:function(){return dpv.gp(this.xhprop,"UncorrectableSectorCount")},getTemperature:function(){return dpv.gp(this.xhprop,"Temperature")},getStartStopCount:function(){return dpv.gp(this.xhprop,
"StartStopCount")},getPowerOnHours:function(){return dpv.gp(this.xhprop,"PowerOnHours")},getPowerCycleCount:function(){return dpv.gp(this.xhprop,"PowerCycleCount")},getLoadCycleCount:function(){return dpv.gp(this.xhprop,"LoadCycleCount")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.xprop=CComQIPtr(new dpv.xprop(a),"IXPropertyList");this.xhprop=CComQIPtr(new dpv.xprop(a.selectSingleNode("./HealthData")),"IXPropertyList");return S_OK}}});
dpv.htenc=Njl.inherit(CComObjectRoot,dpv.base,IHealthEnclosure,{constructor:function(){dpv.htenc.superclass.constructor.apply(this,arguments)},IHealthEnclosure:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):E_FAIL},getPortLabel:function(){return this.x?this.x.getAttributeText("port-label"):E_FAIL},getDisksHealth:function(){return this.disks?this.disks.getChildren():E_FAIL},getFansHealth:function(){return this.fans?this.fans.getChildren():E_FAIL},getTemperatureHealth:function(){return this.tmps?
this.tmps.getChildren():E_FAIL},getUPSHealth:function(){return this.ups?this.ups.getChildren():E_FAIL},getTemperatureSummary:function(){return this.xsumtemp?this.xsumtemp:E_FAIL},getVoltageHealth:function(){return this.volt?this.volt.getChildren():E_FAIL},getPSUHealth:function(){return this.psu?this.psu.getChildren():E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;a=CComQIPtr(this,"IXDomNode");a.removeAll();if(this.xups=this.x.selectNodes("UPS")){this.ups=CComQIPtr(new dpv.base,
"IXDomNode");Njl.each(this.xups,function(c){var d=CComQIPtr(new dpv.htups,"IXDomNode");d.loadFromXml(c)==S_OK&&this.ups.appendChild(d)},this);a.appendChild(this.ups)}if(this.xfans=this.x.selectNodes("Fan")){this.fans=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xfans,function(c){var d=CComQIPtr(new dpv.htfan,"IXDomNode");d.loadFromXml(c)==S_OK&&this.fans.appendChild(d)},this);a.appendChild(this.fans)}if(this.xdisks=this.x.selectNodes("Disk")){this.disks=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xdisks,
function(c){var d=CComQIPtr(new dpv.htdisk,"IXDomNode");d.loadFromXml(c)==S_OK&&this.disks.appendChild(d)},this);a.appendChild(this.disks)}if(this.xtmps=this.x.selectNodes("Temperature")){this.tmps=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xtmps,function(c){var d=CComQIPtr(new dpv.httemp,"IXDomNode");d.loadFromXml(c)==S_OK&&this.tmps.appendChild(d)},this);a.appendChild(this.tmps)}var b=this.x.selectSingleNode("Temperature_Summary");if(b){this.xsumtemp=CComQIPtr(new dpv.htsumtemp,"IXDomNode");
this.xsumtemp.loadFromXml(b)==S_OK&&a.appendChild(this.xsumtemp)}if(b=this.x.selectNodes("Voltage")){this.volt=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(b,function(c){var d=CComQIPtr(new dpv.htvolt,"IXDomNode");d.loadFromXml(c)==S_OK&&this.volt.appendChild(d)},this);a.appendChild(this.volt)}if(b=this.x.selectNodes("PSU")){this.psu=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(b,function(c){var d=CComQIPtr(new dpv.htpsu,"IXDomNode");d.loadFromXml(c)==S_OK&&this.psu.appendChild(d)},this);a.appendChild(this.psu)}return S_OK}}});
Njl.namespace("dpv");
dpv.htManager=Njl.inherit(CComEventsObjectRoot("IHealthManagerEvents"),dpv.base,IHealthManager,{constructor:function(){dpv.htManager.superclass.constructor.apply(this,arguments)},IHealthManager:{updateHealth:function(a){return!!!window.updatePwd&&this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="HealthInfo" resource-type="Health_Collection" />',Njl.id())),a)},getDisksHealth:function(){return this.firstenc?this.firstenc.getDisksHealth():E_FAIL},getFansHealth:function(){return this.firstenc?this.firstenc.getFansHealth():
E_FAIL},getTemperatureHealth:function(){return this.firstenc?this.firstenc.getTemperatureHealth():E_FAIL},getUPSHealth:function(){return this.ups?this.ups.getChildren():this.firstenc?this.firstenc.getUPSHealth():E_FAIL},getTemperatureSummary:function(){return this.firstenc?this.firstenc.getTemperatureSummary():E_FAIL},getVoltageHealth:function(){return this.firstenc?this.firstenc.getVoltageHealth():E_FAIL},getPSUHealth:function(){return this.firstenc?this.firstenc.getPSUHealth():E_FAIL},getEnclosures:function(){return this.encs?
this.encs.getChildren():E_FAIL},updateDiskSmartInfo:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Disk_SMART_Info" />',Njl.id(),b)),a)},getDiskSmartInfo:function(){return this.xhsmart}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){e=="xs:update-s"&&this.Fire("OnHealthUpdate");return S_OK}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IHealthManager").updateHealth(a)},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),
"INotifySink").Advise(this,"Health_Collection");return E_FAIL},loadFromXml:function(a){switch(a.getAttributeText("resource-type")){case "Health_Collection":this.x=a;var b=CComQIPtr(this,"IXDomNode");b.removeAll();var c=this.x.selectNodes("Health_Collection/Enclosure_Health");this.encs=CComQIPtr(new dpv.base,"IXDomNode");if(c&&c.length!=0)Njl.each(c,function(d){var e=CComQIPtr(new dpv.htenc,"IXDomNode");e.loadFromXml(d)==S_OK&&this.encs.appendChild(e)},this);else{c=CComQIPtr(new dpv.htenc,"IXDomNode");
c.loadFromXml(a.selectSingleNode("Health_Collection"))==S_OK&&this.encs.appendChild(c)}b.appendChild(this.encs);this.firstenc=this.encs.getChildren()[0];this.firstenc=CComQIPtr(this.firstenc,"IHealthEnclosure");this.ups=undefined;if((a=this.x.selectNodes("Health_Collection/Ups_Health/UPS"))&&a.length!=0){this.ups=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(a,function(d){var e=CComQIPtr(new dpv.htups,"IXDomNode");e.loadFromXml(d)==S_OK&&this.ups.appendChild(e)},this)}b.appendChild(this.ups);return S_OK;
case "Disk_SMART_Info":b=CComQIPtr(new dpv.htsmart,"IXDomNode");if(b.loadFromXml(a.selectSingleNode("DiskSMARTInfo"))==S_OK){this.xhsmart=CComQIPtr(b,"IHealthDiskSmartInfo");return S_OK}break}return E_FAIL}}});Njl.namespace("dpv");
dpv.log=Njl.inherit(CComEventsObjectRoot("ILogManagerEvents"),dpv.base,ILog,{constructor:function(){dpv.log.superclass.constructor.apply(this,arguments)},ILog:{getDate:function(){return dpv.gp(this.xlog,"date")},getLogTime:function(){return dpv.gp(this.xlog,"time")},getMessage:function(){return dpv.gp(this.xlog,"message")},getSeverity:function(){var a=dpv.gp(this.xlog,"severity");if(a==E_FAIL)a=this.x?this.x.getAttributeText("severity"):E_FAIL;return a},getId:function(){return this.x?this.x.getAttributeText("id"):
E_FAIL},getTime:function(){return this.x?this.x.getAttributeText("timestamp"):E_FAIL},getLocalTime:function(){return this.x?this.x.getAttributeText("localized_ts"):E_FAIL},getMessageTag:function(){return this.x?this.x.getAttributeText("message-tag"):E_FAIL},getCategory:function(){return this.x?this.x.getAttributeText("category"):E_FAIL},getArgs:function(){return this.args?this.args:E_FAIL},getDeviceTime:function(){var a=0;if(this.x&&(a=this.x.getAttributeText("year"))){var b=0;if(this.x&&(b=this.x.getAttributeText("month"))){var c=
0;if(this.x&&(c=this.x.getAttributeText("day"))){var d=0;if(this.x&&(d=this.x.getAttributeText("hr"))){var e=0;if(this.x&&(e=this.x.getAttributeText("min"))){var f=this.x?this.x.getAttributeText("sec"):0;return new Date(a,b-1,c,d,e,f,0)}}}}}return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xlog=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");if(a=a.selectSingleNode("args")){this.args=[];Njl.each(a.xmlDocument.attributes,function(b){this.args.push({name:b.name,
value:b.value})},this)}return S_OK}}});
dpv.lgManager=Njl.inherit(CComEventsObjectRoot("ILogManagerEvents"),dpv.base,ILogManager,{constructor:function(){dpv.lgManager.superclass.constructor.apply(this,arguments)},ILogManager:{updateLogs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Logs" resource-type="Log_Collection"/>',Njl.id())),a)},cleanLogs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="Logs" resource-type="Log_Collection"/>',Njl.id())),
a)},downloadAllLogs:function(a){return this.sendXml(dpv.xmlEnvelope('<xs:custom id="download" resource-id="Logs" resource-type="Log_Collection"/>'),a)},getLogs:function(){return this.logs?this.logs.getChildren():E_FAIL},getLogsCount:function(){return this.lcnt?this.lcnt:0},getInfoLogsCount:function(){return this.infocnt?this.infocnt:0},getWarnLogsCount:function(){return this.warncnt?this.warncnt:0},getErrorLogsCount:function(){return this.errcnt?this.errcnt:0},QueryLogs:function(a,b,c,d,e,f,g,h){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="Log_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}"/>                    </xs:qualifier>                    <xs:criterion>                    <xs:and>                        <xs:greater-equal property="TimeStamp" value="{3}"/>                        <xs:lesser-equal property="TimeStamp" value="{4}"/>'+
(c==""?"":'<xs:equal property="Severity_In" value="{5}"/>')+(d==""?"":'<xs:equal property="Category_In" value="{6}"/>')+(g==""?"":'<xs:equal property="Msg_Key" value="{7}"/>')+"</xs:and>                    </xs:criterion>                </xs:query>",Njl.id(),e,f,a,b,c,d,g)),h)},getAuditLogs:function(){return this.auditlogs},getAuditConnections:function(){return this.auditconnections},getAuditLogsCount:function(){return this.alcnt?this.alcnt:0},QueryAuditLogs:function(a,b,c,d,e,f,g,h,k,j,m){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="AuditLog_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}"/>                    </xs:qualifier>                    <xs:criterion>                    <xs:and>                        <xs:greater-equal property="TimeStamp" value="{3}"/>                        <xs:lesser-equal property="TimeStamp" value="{4}"/>'+
(e==""?"":'<xs:equal property="user" value="{5}"/>')+(f==""?"":'<xs:equal property="protocol" value="{6}"/>')+(g==""?"":'<xs:equal property="hostname" value="{7}"/>')+(h==""?"":'<xs:equal property="addr_ip" value="{8}"/>')+(k==""?"":'<xs:equal property="accessed_path" value="{9}"/>')+(j==""?"":'<xs:equal property="action" value="{10}"/>')+"</xs:and>                    </xs:criterion>                </xs:query>",Njl.id(),a,b,c,d,e,f,g,h,k,j)),m)},updateAuditConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Audit" resource-type="ActiveConnections"/>',
Njl.id())),a)},QueryAuditConnections:function(a,b,c,d,e,f,g){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="ActiveConnections">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}"/>                    </xs:qualifier>                    <xs:criterion>                    <xs:and>'+(c==""?"":'<xs:equal property="user" value="{3}"/>')+(d==""?"":'<xs:equal property="protocol" value="{4}"/>')+(e==""?"":'<xs:equal property="hostname" value="{5}"/>')+
(f==""?"":'<xs:equal property="src_ip" value="{6}"/>')+"</xs:and>                    </xs:criterion>                </xs:query>",Njl.id(),a,b,c,d,e,f)),g)},ArchiveAuditLogs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="Audit" resource-type="AuditLog_Collection"/>',Njl.id())),a)}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b){if(b&&b[0]){a=CComQIPtr(new dpv.log,"IXDomNode");a.loadFromXml(b[0])==S_OK&&this.Fire("OnDeviceAlarm",[CComQIPtr(a,"ILog")])}return S_OK}},
IXDomNode:{Update:function(a){return CComQIPtr(this,"ILogManager").updateLogs(a)},getXml:function(){return this.x},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),"INotifySink").Advise(this,"Log");return E_FAIL},loadFromXml:function(a){this.x=a;a=CComQIPtr(this,"IXDomNode");a.removeAll();if(this.xlogs=this.x.selectSingleNode("Log_Collection")){this.lcnt=parseInt(this.xlogs.getAttributeText("n_entries"));this.infocnt=parseInt(this.xlogs.getAttributeText("n_info_entries"));
this.warncnt=parseInt(this.xlogs.getAttributeText("n_warn_entries"));this.errcnt=parseInt(this.xlogs.getAttributeText("n_err_entries"));this.xlogs=this.x.selectNodes("Log_Collection/Log");this.logs=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xlogs,function(c){var d=CComQIPtr(new dpv.log,"IXDomNode");d.loadFromXml(c)==S_OK&&this.logs.appendChild(d)},this);a.appendChild(this.logs);return S_OK}if(this.xauditlogs=this.x.selectSingleNode("AuditLog_Collection")){this.alcnt=parseInt(this.xauditlogs.getAttributeText("n_entries"));
this.xauditlogs=this.x.selectNodes("AuditLog_Collection/AuditLog");this.auditlogs=[];Njl.each(this.xauditlogs,function(c){var d={};Njl.each([].slice.call(c.xmlDocument.attributes),function(e){d[e.name]=e.value},this);this.auditlogs.push(d)},this);return S_OK}if(this.xauditconnections=this.x.selectSingleNode("ActiveConnections")){this.xauditconnections=this.x.selectNodes("ActiveConnections/connection");this.auditconnections=[];var b=["host","user","protocol","src_ip","connect_time","connect_file",
"localized_ts"];Njl.each(this.xauditconnections,function(c){var d={};Njl.each(b,function(e){d[e]=c.selectSingleNode(e)&&c.selectSingleNode(e).getNodeText()},this);this.auditconnections.push(d)},this);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.sysinfo=Njl.inherit(CComObjectRoot,dpv.base,ISysInfo,{constructor:function(){dpv.sysinfo.superclass.constructor.apply(this,arguments)},ISysInfo:{getModel:function(){return dpv.gp(this.xpr,"Model")},getSerial:function(){return dpv.gp(this.xpr,"Serial")},getHostname:function(){return dpv.gp(this.xpr,"Hostname")},getFirmwareName:function(){return dpv.gp(this.xpr,"Firmware_Name")},getFirmwareVersion:function(){return dpv.gp(this.xpr,"Firmware_Version")},getFirmwareTime:function(){return dpv.gp(this.xpr,
"Firmware_Time")},getMemorySize:function(){return dpv.gp(this.xpr,"Memory")},getCPUNumber:function(){return dpv.gp(this.xpr,"CPU_Number")},getCPUFrequency:function(){return dpv.gp(this.xpr,"CPU_Frequency")},getMACAddress:function(){return dpv.gp(this.xpr,"MAC_Address")},getRaidLevel:function(){return dpv.gp(this.xpr,"Raid_Level")},getHDDVendor:function(){return dpv.gp(this.xpr,"HDD_Vendor")},getHDDModel:function(){return dpv.gp(this.xpr,"HDD_Model")},getHDDSerial:function(){return dpv.gp(this.xpr,
"HDD_Serial")},getHDDFirmware:function(){return dpv.gp(this.xpr,"HDD_Firmware")},getRegistered:function(){return dpv.gp(this.xpr,"Registered")},getRaidStatus:function(){return dpv.gp(this.xraid,"Status")},getRaidPercentage:function(){return dpv.gp(this.xraid,"Percentage")},getRaidSpeed:function(){return dpv.gp(this.xraid,"Speed")},getRaidCompletionTime:function(){return dpv.gp(this.xraid,"Completion-time")},getAntiVirusVersion:function(){return dpv.gp(this.xpr,"Anti-Virus-Def-Version")},getAntiVirusLastUpdated:function(){return dpv.gp(this.xpr,
"Anti-Virus-Last-Updated")},getRackmount:function(){return dpv.gp(this.xpr,"Rackmount")},getSafeMode:function(){return dpv.gp(this.xpr,"Safe_Mode")},getOSRootCorrupt:function(){return dpv.gp(this.xpr,"OS_Root_Corrupt")},getReadOnlyDataVolumes:function(){return dpv.gp(this.xpr,"Read-Only-Data-Volumes")},getSystemUptime:function(){return dpv.gp(this.xpr,"System_Uptime")}},IXDomNode:{loadFromXml:function(a){this.xpr=CComQIPtr(new dpv.xprop(a),"IXPropertyList");this.xraid=CComQIPtr(new dpv.xprop(a.selectSingleNode("./Raid")),
"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.sysManager=Njl.inherit(CComEventsObjectRoot("ISysManagerEvents"),dpv.base,ISysManager,IDeviceWebEventSinkEvents,{constructor:function(){dpv.sysManager.superclass.constructor.apply(this,arguments)},ISysManager:{updateClock:function(a){if(sessionStorage.getItem("wizard-update-pwd")!="1")return!!!window.updatePwd&&this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Clock" resource-type="System"/>',Njl.id())),a)},commitClock:function(a){if(this.clock){var b=this.clock.getXml().toString();
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Clock" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)}return S_FALSE},getClock:function(){return this.clock?this.clock:E_FAIL},updateTimeZone:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Timezone" resource-type="System"/>',Njl.id())),a)},commitTimeZone:function(a){if(this.timezone){var b=this.timezone.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Timezone" resource-type="System">{1}</xs:set>',
Njl.id(),b)),a)}return E_FALSE},updateNTPInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="NTPSettings" resource-type="System"/>',Njl.id())),a)},commitNTPInfo:function(a){if(this.ntp){var b=this.ntp.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="NTPSettings" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)}return E_FALSE},updateHourMapInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="TimeDateFormatSettings" resource-type="System"/>',
Njl.id())),a)},commitHourMapInfo:function(a){if(this.dateFormat){var b=this.dateFormat.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="TimeDateFormatSettings" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)}return E_FALSE},updateSysInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SystemInfo" resource-type="SystemInfo"></xs:get>',Njl.id())),a)},preLogout:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Logout" resource-type="Readynas-Logout"></xs:set>',
Njl.id())),a)},checkForUpdate:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Firmware" resource-type="FirmwareImage"></xs:get>',Njl.id())),a)},UpdateAdminPasswordRecovery:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AdminPasswordRecovery" resource-type="AdminPassword">                 </xs:get>',Njl.id(),Njl.id())),a)},getRecoveryEnabled:function(){return this.xAdminPasswordRecovery?dpv.gp(this.xAdminPasswordRecovery,
"Enabled"):E_FAIL},getRecoveryMethod:function(){return this.xAdminPasswordRecovery?dpv.gp(this.xAdminPasswordRecovery,"Method"):E_FAIL},UpdateAdminInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AdminInfo" resource-type="AdminPassword">                 </xs:get>',Njl.id(),Njl.id())),a)},getAdminShellAccess:function(){return this.xAdminInfo?dpv.gp(this.xAdminInfo,"ShellAccess"):E_FAIL},SetAdminPassword:function(a,b,c){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AdminPassword" resource-type="AdminPassword">                    <AdminPassword>                        <Password><![CDATA[{1}]]\></Password>                        <OldPassword><![CDATA[{2}]]\></OldPassword>                    </AdminPassword>                </xs:set>',
Njl.id(),a,b)),c)},SetAdminPasswordRecovery:function(a,b,c,d,e,f,g){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AdminPasswordRecovery" resource-type="AdminPassword">                    <AdminPasswordRecovery>                        <OldPassword><![CDATA[{1}]]\></OldPassword>                        <Enabled>{2}</Enabled>                        <Method>{3}</Method>                        <Question><![CDATA[{4}]]\></Question>                        <Answer><![CDATA[{5}]]\></Answer>                        <Email><![CDATA[{6}]]\></Email>                    </AdminPasswordRecovery>                </xs:set>',
Njl.id(),a,b?"1":"0",c,d,e,f)),g)},SetAdminPasswordInfo:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AdminInfo" resource-type="AdminPassword">                    <AdminInfo>                        <ShellAccess>{1}</ShellAccess>                    </AdminInfo>                </xs:set>',Njl.id(),a?"1":"0")),b)},updateRecoveryQuestion:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="PasswordRecoverQuestion" resource-type="System">                    <request id="{1}" method="pw.GetQuestion"/>                 </xs:get>',
Njl.id(),Njl.id())),a,b.getSourceRCVURL(),"FORM")},getRecoveryQuestion:function(){return this.rcvq?this.rcvq:E_FAIL},updateRecoveryEnable:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="PasswordRecoverEanble" resource-type="System">                    <request id="{1}" method="pw.IsRecoveryEnabled"/>                 </xs:get>',Njl.id(),Njl.id())),a,b.getSourceRCVURL(),"FORM")},getRecoveryEnable:function(){return this.rcve?
this.rcve:E_FAIL},RecoverPassword:function(a,b,c){var d=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="PasswordRecover" resource-type="System">                    <request id="{1}" method="pw.Recover">                        <param name="email">{2}</param>                        <param name="answer">{3}</param>                    </request>                </xs:get>',Njl.id(),Njl.id(),a,b)),c,d.getSourceRCVURL(),
"FORM")},ResetPassword:function(a,b){var c=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="ResetPassword" resource-type="System">                    <request id="{1}" method="pw.ToggleReset">                        <param name="enabled">1</param>                        <param name="method">reset</param>                        <param name="resetflag">{2}</param>                    </request>                </xs:get>',
Njl.id(),Njl.id(),a===1||a===true?1:0)),b,c.getSourceRCVURL(),"FORM")},updatesPasswordResetStatus:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="UpdatesPasswordResetStatus" resource-type="System">                    <request id="{1}" method="pw.GetResetStatus">                    </request>                </xs:get>',Njl.id(),Njl.id())),a,b.getSourceRCVURL(),"FORM")},getPasswordResetStatus:function(){return this.rcvst?
this.rcvst:E_FAIL},PerfomFactoryDefault:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="factory_default" resource-id="System" resource-type="System">                </xs:custom>',Njl.id())),a)},PerfomeFirmwareUpdateWithVersion:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update resource-id="Firmware" resource-type="FirmwareImage">                    <FirmwareImage resource-id="Firmware" resource-type="FirmwareImage">                        <Location>remote</Location>                        <Resource>{0}</Resource>                    </FirmwareImage>                </xs:update>',
a)),b)},getTimeZone:function(){return this.timezone?this.timezone:E_FAIL},getSysInfo:function(){return this.sysinfo?this.sysinfo:E_FAIL},getFirmwareInfo:function(){return this.fmw?this.fmw:E_FAIL},getLocaleManager:function(){return this._mngr_loc||(this._mngr_loc=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.locManager,"ISysLocaleManager")))},getPowerManager:function(){return this._mngr_power||(this._mngr_power=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.powerManager,"ISysPowerManager")))},
getUpdateManager:function(){return E_NOTIMPL},getAlertsManager:function(){return this._mngr_alerts||(this._mngr_alerts=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.alertsManager,"ISysAlertsManager")))},getNTPInfo:function(){return this.ntp?this.ntp:E_FAIL},getHourMapInfo:function(){return this.dateFormat?this.dateFormat:E_FAIL},updateChart:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Stats"/>',Njl.id(),a)),b)},getChart:function(a){return this.charts&&
this.charts[a]?this.charts[a]:E_FAIL},restoreSysConfig:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update resource-id="Restore" resource-type="ConfigBackup"/>')),a)},setMyPassword:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Protocols" resource-type="MyPassword">                    <MyPassword>                        <UserName>{1}</UserName>                        <OldPassword>{2}</OldPassword>                        <NewPassword>{3}</NewPassword>                    </MyPassword>                </xs:set>',
Njl.id(),a,b,c)),d)},updateDiskcache:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="performaceSetting" resource-type="System"/>',Njl.id())),a)},commitDiskcache:function(a,b){b=String.format('<performaceSetting disk_cache="{0}"> </performaceSetting>',b);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="performaceSetting" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)},getDiskcacheStatus:function(){return this.diskcachenode.getAttributeText("disk_cache")},
updateSupportedFeatures:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SupportedFeatures" resource-type="SupportedFeatures"/>',Njl.id())),a)},getSupportStatsVolume:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-volume"):E_FAIL},getSupportStatsNetwork:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-network"):E_FAIL},getSupportStatsUtilization:function(){return this.supportedFeatures?
this.supportedFeatures.getAttributeText("stats-utilization"):E_FAIL},getSupportStatsTemperature:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-temperature"):E_FAIL},getSupportBackupButton:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("backup-button"):E_FAIL},getSupportReadyDR:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-readydr"):E_FAIL},getSupportXRAID:function(){return this.supportedFeatures?
this.supportedFeatures.getAttributeText("xraid"):E_FAIL},getSupportFileSearch:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("file-search"):E_FAIL},getSupportAntiVirusSS:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("anti-virus-sche-scan"):E_FAIL},getSpinDown:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("spindown"):E_FAIL},getSupportAudit:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-audit"):
E_FAIL},getSupportAntiVirus:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("anti-virus"):E_FAIL},getSupportLunOver8TB:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-readydr"):E_FAIL},updateDeviceState:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DeviceState" resource-type="DeviceState"/>',Njl.id())),a)},commitDeviceState:function(a){if(this.deviceState){var b=this.deviceState.getXml().toString();
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update id="{0}" resource-id="DeviceState" resource-type="DeviceState">{1}</xs:update>',Njl.id(),b)),a)}return E_FAIL},getDeviceState:function(){return this.deviceState?this.deviceState:E_FAIL},updateCloudOwner:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="CloudOwner" resource-type="CloudOwner"/>',Njl.id())),a)},updateCloudNetConn:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="Network" resource-type="Network"><xs:command_name>CheckInternetConnection</xs:command_name></xs:command>',
Njl.id())),a)},getCloudNetConn:function(){return this.cloudNetConn},updateInsightAgent:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="InsightAgentStatus" resource-type="InsightAgentStatus"/>',Njl.id())),a)},getInsightAgent:function(){return this.insightAgent?this.insightAgent:E_FAIL},getCloudOwner:function(){return this.cloudOwner?this.cloudOwner:E_FAIL},registerCloudOwner:function(a,b,c){if(a=CComQIPtr(a,"IUser"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="CloudOwner" resource-type="CloudOwner">                            <User id="0" resource-id="0" resource-type="User" is-domain-member="0">                              <User_Name>{1}</User_Name>                              <Password>{2}</Password>                              <Confirm>{3}</Confirm>                            </User>                     </xs:set>',
Njl.id(),Njl.Utils.Base64.encode(a.getName()?a.getName():""),Njl.Utils.Base64.encode(a.getPassword()?a.getPassword():""),c?true:false)),b)},removeCloudOwner:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="CloudOwner" resource-type="CloudOwner">                    <User resource-type="User">                        <User_Name></User_Name>                        <Password></Password>                        <Keep_Home_Folder>{1}</Keep_Home_Folder>                    </User>                </xs:set>',
Njl.id(),b?"1":"0")),a)},cancelCloudOwner:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="CloudOwner" resource-type="CloudOwner">                        <xs:command_name>cancel</xs:command_name><xs:args/></xs:command>',Njl.id())),a)},UpdateCloudServer:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="CloudServer" resource-type="CloudServer"/>',Njl.id())),a)},CommitCloudServer:function(a){return this.xcloudserver?
this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="CloudServer" resource-type="CloudServer">                        {1}                    </xs:set>',Njl.id(),this.xcloudserver.getXml().toString())),a):E_FAIL},getCloudServerAddress:function(){return this.xcloudserver?dpv.gp(this.xcloudserver,"Address"):E_FAIL},putCloudServerAddress:function(a){return this.xcloudserver?dpv.pp(this.xcloudserver,"Address",a):E_FAIL},reboot:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown halt="false" fsck="{1}"/>                </xs:custom>',
Njl.id(),a)),b)},UpdateHomeFolderOptions:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get  id="{0}" resource-id="HomeFolderOptions" resource-type="HomeFolderOptions">                </xs:get>',Njl.id())),a)},CommitHomeFolderOptions:function(a,b){return(b=CComQIPtr(b||this.homeFolderOptions,"IXDomNode"))?this.sendXml(dpv.xmlEnvelope(String.format('<xs:set  id="{0}" resource-id="HomeFolderOptions" resource-type="HomeFolderOptions">                    {1}                </xs:set>',
Njl.id(),b.getXml().toString())),a):E_FAIL},updateShareConsumed:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="'+a+'" resource-type="Share_Consumed"/>',Njl.id())),b)},getHomeFolderOptions:function(){return this.homeFolderOptions?this.homeFolderOptions:E_FAIL},updateFanConfig:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FanConfig" resource-type="System">                </xs:get>',Njl.id())),a)},commitFanConfig:function(a,
b){b=String.format('<FanConfig mode="{0}"/>',b);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="FanConfig" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)},getFanConfig:function(){return this.fanconfig.getAttributeText("mode")},updateBluetooth:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="BluetoothUSBDevice" resource-type="BluetoothUSBDevice">                </xs:get>',Njl.id())),a)},getBluetooth:function(){return this.bluetooth?
this.bluetooth:E_FAIL},commitHotfixUpdate:function(a,b){b=String.format('<HotfixUpdate enable="{0}"/>',b);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="HotfixUpdate" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)},updateHotfixUpdate:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="HotfixUpdate" resource-type="System">                </xs:get>',Njl.id())),a)},getHotfixUpdate:function(){return this.hotfixUpdate?this.hotfixUpdate.getAttributeText("enable"):
E_FAIL},commitAutoFWUpdate:function(a,b,c,d,e){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AutoFWUpdate" resource-type="System">                    <AutoFWUpdate>                        <Enabled>{1}</Enabled>                        <Interval>                            <Minute>{2}</Minute>                            <Hour>{3}</Hour>                            <DayOfWeek>{4}</DayOfWeek>                        </Interval>                    </AutoFWUpdate>                </xs:set>',
Njl.id(),b,c,d,e)),a)},updateAutoFWUpdate:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AutoFWUpdate" resource-type="System" />',Njl.id())),a)},getAutoFWUpdate:function(){return this.AutoFWUpdateObj}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){switch(d){case "BluetoothUSBDevice":this.Fire("OnBluetoothPlugUnPlug",[c]);break;case "System":if(b&&b.length)switch(e){case "xs:custom-s":this.Fire("OnSysReboot",[b[0].getAttributeText("required")*
1]);break}case "Share_Consumed":b[0].getAttributeText("Files");b[0].getAttributeText("Folders");b[0].getAttributeText("Consumed_MB");this.Fire("OnShareConsumed",[b[0].getAttributeText("Files"),b[0].getAttributeText("Folders"),b[0].getAttributeText("Consumed_MB")]);break}return S_OK}},IXDomNode:{Update:function(a){var b=CComQIPtr(this,"ISysManager");return b.updateSysInfo(a)&&b.updateNTPInfo(a)&&b.updateClock(a)&&b.updateTimeZone(a)},Commit:function(a){var b=CComQIPtr(this,"ISysManager");return b.commitNTPInfo(a)&&
b.commitClock(a)&&b.commitTimeZone(a)},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),"INotifySink").Advise(this);return E_FAIL},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(!a)return E_FAIL;var c=a.getNodeName();this.cloudNetConn=0;if(c=="xs:command-s"){if(a.getAttributeText("resource-type")=="Network")this.cloudNetConn=a.selectSingleNode("Network/NetworkConnection").getNodeText();return S_OK}var d=a.getAttributeText("resource-id"),e=a.getAttributeText("resource-type"),
f=a.selectNodes("./*");switch(e){case "SystemService_Collection":this.xs=a;this.xservices&&b.removeChild(this.xservices);this.xservices=CComQIPtr(new dpv.base,"IXDomNode");a=a.selectNodes("SystemService_Collection/SystemService");Njl.each(a,function(g){var h=CComQIPtr(new dpv.sysservice,"IXDomNode");h.loadFromXml(g)==S_OK&&this.xservices.appendChild(h)},this);b.appendChild(this.xservices);return S_OK;case "Stats":if(!this.charts)this.charts=[];this.charts[d]=a.selectSingleNode("Stats_Chart").getNodeText();
return S_OK;case "SupportedFeatures":this.supportedFeatures=a.selectSingleNode("SupportedFeatures");return S_OK;case "DeviceState":a=a.selectSingleNode("DeviceState");this.deviceState=CComQIPtr(new dpv.devState,"IXDomNode");if(this.deviceState.loadFromXml(a)==S_OK){b.removeChild(b.getChildByTrait("IDeviceState"));b.appendChild(this.deviceState);return S_OK}break;case "InsightAgentStatus":b=a.selectSingleNode("Insight_Agent_Info");this.insightAgent=CComQIPtr(new dpv.insightagent,"IXDomNode");if(this.insightAgent.loadFromXml(b)==
S_OK)return S_OK;else this.insightAgent=null;break;case "CloudOwner":b=a.selectSingleNode("User");this.cloudOwner=CComQIPtr(new dpv.user,"IXDomNode");if(this.cloudOwner.loadFromXml(b)==S_OK)return S_OK;else this.cloudOwner=null;break;case "CloudServer":this.xcloudserver=CComQIPtr(new dpv.xprop(a.selectSingleNode("CloudServer")),"IXPropertyList");return S_OK;case "HomeFolderOptions":this.homeFolderOptions=CComQIPtr(new dpv.homeFolderOptions,"IXDomNode");if(this.homeFolderOptions.loadFromXml(a.selectSingleNode("HomeFolderOptions"))==
S_OK){this.homeFolderOptions=CComQIPtr(this.homeFolderOptions,"IHomeFolderOptions");return S_OK}else delete this.homeFolderOptions;break;case "BluetoothUSBDevice":this.bluetooth=CComQIPtr(new dpv.sysDongleBluetooth,"IXDomNode");CComQIPtr(this,"IXDomNode").appendChild(this.bluetooth);if(this.bluetooth.loadFromXml(a)==S_OK){this.bluetooth=CComQIPtr(this.bluetooth,"ISysDongleBluetooth");return S_OK}else delete this.bluetooth;break;default:if(f&&f.length||d=="UpdatesPasswordResetStatus"||d=="PasswordRecoverEanble"||
d=="PasswordRecoverQuestion"){f=f?f[0]:undefined;switch(d){case "Clock":this.clock=CComQIPtr(new dpv.sysClock,"IXDomNode");if(this.clock.loadFromXml(f)==S_OK){b.removeChild(b.getChildByTrait("ISysClock"));b.appendChild(this.clock);return S_OK}break;case "Timezone":this.timezone=CComQIPtr(new dpv.tmZone,"IXDomNode");if(this.timezone.loadFromXml(f)==S_OK){b.removeChild(b.getChildByTrait("ISysTZone"));b.appendChild(this.timezone);return S_OK}break;case "SystemInfo":this.sysinfo=CComQIPtr(new dpv.sysinfo,
"IXDomNode");if(this.sysinfo.loadFromXml(f)==S_OK){b.removeChild(b.getChildByTrait("ISysInfo"));b.appendChild(this.sysinfo);return S_OK}break;case "Firmware":this.fmw=CComQIPtr(new dpv.sysfmw,"IXDomNode");if(this.fmw.loadFromXml(f)==S_OK){b.removeChild(b.getChildByTrait("ISysFirmwareInfo"));b.appendChild(this.fmw);return S_OK}break;case "NTPSettings":this.ntp=CComQIPtr(new dpv.sysntp,"IXDomNode");if(this.ntp.loadFromXml(f)==S_OK){b.removeChild(b.getChildByTrait("ISysNTPInfo"));b.appendChild(this.ntp);
return S_OK}break;case "TimeDateFormatSettings":this.dateFormat=CComQIPtr(new dpv.hourmap,"IXDomNode");if(this.dateFormat.loadFromXml(f)==S_OK){b.appendChild(this.dateFormat);return S_OK}break;case "AdminInfo":this.xAdminInfo=CComQIPtr(new dpv.xprop(a.selectSingleNode("AdminInfo")),"IXPropertyList");return S_OK;case "AdminPasswordRecovery":this.xAdminPasswordRecovery=CComQIPtr(new dpv.xprop(a.selectSingleNode("AdminPasswordRecovery")),"IXPropertyList");return S_OK;case "PasswordRecoverQuestion":this.rcvq=
a.getNodeText();return S_OK;case "PasswordRecoverEanble":this.rcve=a.getNodeText();return S_OK;case "UpdatesPasswordResetStatus":this.rcvst=a.getNodeText();return S_OK;case "performaceSetting":this.diskcachenode=a.selectSingleNode("performaceSetting");return S_OK;case "FanConfig":this.fanconfig=a.selectSingleNode("FanConfig");return S_OK;case "HotfixUpdate":this.hotfixUpdate=a.selectSingleNode("HotfixUpdate");return S_OK;case "AutoFWUpdate":if(c=="xs:get-s")this.AutoFWUpdateObj={Enabled:a.selectSingleNode("AutoFWUpdate/Enabled").getNodeText()==
"1",Minute:a.selectSingleNode("AutoFWUpdate/Interval/Minute").getNodeText(),Hour:a.selectSingleNode("AutoFWUpdate/Interval/Hour").getNodeText(),DayOfWeek:a.selectSingleNode("AutoFWUpdate/Interval/DayOfWeek").getNodeText()};return S_OK}}}return E_FAIL}}});Njl.namespace("dpv");
dpv.sysClock=Njl.inherit(CComObjectRoot,dpv.base,ISysClock,{constructor:function(){dpv.sysClock.superclass.constructor.apply(this,arguments)},ISysClock:{getYear:function(){return this.x?this.x.getAttributeText("year"):E_FAIL},getMonth:function(){return this.x?this.x.getAttributeText("month"):E_FAIL},getDay:function(){return this.x?this.x.getAttributeText("day"):E_FAIL},getHour:function(){return this.x?this.x.getAttributeText("hour"):E_FAIL},getMinute:function(){return this.x?this.x.getAttributeText("minute"):
E_FAIL},getSecond:function(){return this.x?this.x.getAttributeText("second"):E_FAIL},putYear:function(a){return this.x?this.x.setAttributeText(a,"year"):E_FAIL},putMonth:function(a){return this.x?this.x.setAttributeText(a,"month"):E_FAIL},putDay:function(a){return this.x?this.x.setAttributeText(a,"day"):E_FAIL},putHour:function(a){return this.x?this.x.setAttributeText(a,"hour"):E_FAIL},putMinute:function(a){return this.x?this.x.setAttributeText(a,"minute"):E_FAIL},putSecond:function(a){return this.x?
this.x.setAttributeText(a,"second"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.tmZone=Njl.inherit(CComObjectRoot,dpv.base,ISysTZone,{constructor:function(){dpv.tmZone.superclass.constructor.apply(this,arguments)},ISysTZone:{getTimeZoneName:function(){return this.x?this.x.getAttributeText("name"):E_FAIL},putTimeZoneName:function(a){return this.x?this.x.setAttributeText(a,"name"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.loc=Njl.inherit(CComEventsObjectRoot("ISysLocaleEvents"),dpv.base,ISysLocale,{constructor:function(){dpv.loc.superclass.constructor.apply(this,arguments)},ISysLocale:{getLocale:function(){return this.x?this.x.getAttributeText("code"):E_FAIL},putLocale:function(a){return this.x?this.x.setAttributeText(a,"code"):E_FAIL},getAutoLocale:function(){return this.x?this.x.getAttributeText("auto"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.dic=Njl.inherit(CComEventsObjectRoot("ISysDictionaryEvents"),dpv.base,ISysDictionary,{constructor:function(){dpv.dic.superclass.constructor.apply(this,arguments)},ISysDictionary:{tr:function(a,b){if(this.x){var c=this.x.selectSingleNode("./Language[@code='"+b+"']/item[@key='"+a+"']");if(c)return c.getNodeText();if(this.xmlDictGaps)try{this.xmlDictGaps.selectSingleNode("./item[@key='"+a+"']")||this.xmlDictGaps.appendNode(new Njl.Xml.document('<item key="'+a+'"><![CDATA['+a+"]]\></item>"))}catch(d){_TRACE("Invalid localization key for locale: "+
b,a,_TRACE.WARNING)}b="en-us";if(c=this.x.selectSingleNode("./Language[@code='"+b+"']/item[@key='"+a+"']"))return c.getNodeText();return a}return E_FAIL},getLangs:function(){if(this.x){var a=this.x.selectNodes("./Language"),b=[];Njl.each(a,function(c){b.push({code:c.getAttributeText("code"),spell:c.getAttributeText("spell")})});return b}return E_FAIL},getLangSpell:function(a){if(this.x)if(a=this.x.selectSingleNode("./Language[@code='"+a+"']"))return a.getAttributeText("spell");return E_FAIL},getGaps:function(){if(this.xmlDictGaps)return this.xmlDictGaps.toString();
return""}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.locManager=Njl.inherit(CComEventsObjectRoot("ISysLocaleManagerEvents"),dpv.base,ISysLocaleManager,{constructor:function(){dpv.locManager.superclass.constructor.apply(this,arguments);dpv.__glocalizer=CComQIPtr(this,"ISysLocaleManager")},ISysLocaleManager:{updateDictionary:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Dictionary" resource-type="System"/>',Njl.id())),a)},updateLocale:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Locale" resource-type="System"/>',
Njl.id())),a)},commitLocale:function(a){if(this.loc){var b=this.loc.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Locale" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)}return S_FALSE},tr:function(a){if(this.dic){var b=CComQIPtr(this,"ISysLocaleManager").getLocale();if(b=="auto"){b=CComQIPtr(this,"ISysLocaleManager").getAutoLocale();if(b==E_FAIL){b="en-us";if(navigator)if(navigator.language)b=navigator.language;else if(navigator.systemLanguage)b=
navigator.systemLanguage;else if(navigator.browserLanguage)b=navigator.browserLanguage;else if(navigator.userLanguage)b=navigator.userLanguage}}return CComQIPtr(this.dic,"ISysDictionary").tr(a,b!=E_FAIL?b:"en-us")}return a},getLangs:function(){if(this.dic)return CComQIPtr(this.dic,"ISysDictionary").getLangs();return E_FAIL},getLocale:function(){if(this.loc)return CComQIPtr(this.loc,"ISysLocale").getLocale();return E_FAIL},getAutoLocale:function(){if(this.loc)return CComQIPtr(this.loc,"ISysLocale").getAutoLocale();
return E_FAIL},putLocale:function(a){if(this.loc)return CComQIPtr(this.loc,"ISysLocale").putLocale(a)||this.Fire("OnLanguageChanged",[a]);return E_FAIL},getLocaleSpell:function(){if(this.dic){var a=CComQIPtr(this,"ISysLocaleManager").getLocale();return CComQIPtr(this.dic,"ISysDictionary").getLangSpell(a!=E_FAIL?a:"en-us")}return E_FAIL},getDictionary:function(){return this.dic?CComQIPtr(this.dic,"ISysDictionary"):E_FAIL}},IXDomNode:{Update:function(a){var b=CComQIPtr(this,"ISysLocaleManager");return b.updateDictionary(a)&&
b.updateLocale(a)},Commit:function(a){return CComQIPtr(this,"ISysLocaleManager").commitLocale(a)},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a[0];switch(c){case "Dictionary":this.dic=CComQIPtr(new dpv.dic,"IXDomNode");if(this.dic.loadFromXml(a)==S_OK){b.removeChild(b.getChildByTrait("ISysDictionary"));b.appendChild(this.dic);return S_OK}break;case "Locale":this.loc=CComQIPtr(new dpv.loc,"IXDomNode");if(this.loc.loadFromXml(a)==
S_OK){b.removeChild(b.getChildByTrait("ISysLocale"));b.appendChild(this.loc);return S_OK}break}}return E_FAIL}}});dpv._TR=function(a){if(dpv.__glocalizer)return dpv.__glocalizer.tr((new String(a)).trim());return a};_TR=dpv._TR;Njl.namespace("dpv");
dpv.alertsManager=Njl.inherit(CComEventsObjectRoot("ISysAlertsManagerEvents"),dpv.base,ISysAlertsManager,{constructor:function(){dpv.alertsManager.superclass.constructor.apply(this,arguments);this.smtpservers=[]},ISysAlertsManager:{updateSMTPProviders:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SmtpProviders" resource-type="System"/>',Njl.id())),a)},updateCurrentOauth2EmailService:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="" resource-type="OAuth2VaultEmail"/>',
Njl.id())),a)},deleteCurrentOauth2EmailService:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="DeleteCurrentOauth2" resource-type="OAuth2VaultEmail"/>',Njl.id())),a)},updateCurrentOauth2Url:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OAuth2VaultEmail"><xs:command_name>GetAuthCodeURL</xs:command_name></xs:command>',Njl.id(),b)),a)},exchangeAuthentication:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OAuth2VaultEmail"><xs:command_name>Exchange</xs:command_name><xs:args><xs:arg><State>{2}</State></xs:arg><xs:arg><Code>{3}</Code></xs:arg></xs:args></xs:command>',
Njl.id(),b,c,d)),a)},updateConfig:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AlertConfig" resource-type="System"/>',Njl.id())),a)},updateSettings:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AlertSettings" resource-type="System"/>',Njl.id())),a)},commitConfig:function(a){if(this.config){var b=this.config.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AlertConfig" resource-type="System">{1}</xs:set>',
Njl.id(),b)),a)}return E_FAIL},commitSettings:function(a){if(this.settings){var b=this.settings.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AlertSettings" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)}return E_FAIL},sendTestMessage:function(a){if(this.config){var b=this.config.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="SendTestMessage" resource-id="AlertConfig" resource-type="System">{1}</xs:custom>',
Njl.id(),b)),a)}return E_FAIL},getConfig:function(){return this.config?this.config:E_FAIL},getSettings:function(){return this.settings?this.settings:E_FAIL},getSMTPProviders:function(){return this.smtps?this.smtps.getChildren():E_FAIL},updateSMTPServers:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SmtpServers:{1}" resource-type="System"/>',Njl.id(),b)),a)},getSMTPServers:function(a){return this.smtpservers[a]?this.smtpservers[a].getChildren():E_FAIL},
getCurrentOAuth2Service:function(){return this.currentOAuth2Service?this.currentOAuth2Service:E_FAIL},getCurrentOAuth2Url:function(){return this.currentOAuth2Url?this.currentOAuth2Url:E_FAIL},getCurrentOAuth2Token:function(){return this.currentOAuth2Token?this.currentOAuth2Token:E_FAIL}},IXDomNode:{Update:function(a){var b=CComQIPtr(this,"ISysAlertsManager");return b.updateSMTPProviders(a)&&b.updateConfig(a)&&b.updateSettings(a)},Commit:function(a){var b=CComQIPtr(this,"ISysAlertsManager");return b.commitConfig(a)&&
b.commitSettings(a)},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.getAttributeText("resource-id"),d=a.selectNodes("./*");if(d&&d.length){d=d[0];switch(c){case "SmtpProviders":b=d.selectNodes("./SmtpProvider");if(Njl.isDefined(b)){this.smtps=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(b,function(f){var g=CComQIPtr(new dpv.smtpp,"IXDomNode");g.loadFromXml(f)==S_OK&&this.smtps.appendChild(g)},this);return S_OK}break;case "AlertConfig":this.config=CComQIPtr(new dpv.aconfig,"IXDomNode");
if(this.config.loadFromXml(d)==S_OK){b.removeChild(b.getChildByTrait("ISysAlertsConfig"));b.appendChild(this.config);return S_OK}break;case "AlertSettings":this.settings=CComQIPtr(new dpv.asettings,"IXDomNode");if(this.settings.loadFromXml(d)==S_OK){b.removeChild(b.getChildByTrait("ISysAlertsSettings"));b.appendChild(this.asettings);return S_OK}break;case "DeleteCurrentOauth2":return S_OK}}if(c.indexOf("SmtpServers:")==0){var e=c.substr(12);this.smtpservers[e]=CComQIPtr(new dpv.base,"IXDomNode");
a=a.selectNodes("outgoingServer");Njl.isDefined(a)&&Njl.each(a,function(f){var g=CComQIPtr(new dpv.smtps,"IXDomNode");g.loadFromXml(f)==S_OK&&this.smtpservers[e].appendChild(g)},this);return S_OK}if(c=a.selectSingleNode("ActiveEmailService/Service")){this.currentOAuth2Service=c.getNodeText();return S_OK}if(c=a.selectSingleNode("Authorization_URL/URL")){this.currentOAuth2Url=c.getNodeText();return S_OK}c=a.selectSingleNode("OAuth2_Token/Email");a=a.selectSingleNode("OAuth2_Token/Id");if(c&&a){this.currentOAuth2Token=
{email:c.getNodeText(),id:a.getNodeText()};return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.aconfig=Njl.inherit(CComObjectRoot,dpv.base,ISysAlertsConfig,{constructor:function(){dpv.aconfig.superclass.constructor.apply(this,arguments)},ISysAlertsConfig:{getContact:function(){return this.x?this.x.getAttributeText("contact"):E_FAIL},getProvider:function(){return this.x?this.x.getAttributeText("provider"):E_FAIL},getUser:function(){return this.x?this.x.getAttributeText("user"):E_FAIL},getPassword:function(){return this.x?this.x.getAttributeText("pass"):E_FAIL},getServer:function(){return this.x?
this.x.getAttributeText("server"):E_FAIL},getPort:function(){return this.x?this.x.getAttributeText("port"):E_FAIL},getFromName:function(){return this.x?this.x.getAttributeText("from"):E_FAIL},getTLS:function(){return this.x?this.x.getAttributeText("tls"):E_FAIL},getAuth:function(){return this.x?this.x.getAttributeText("auth"):E_FAIL},putContact:function(a){return this.x?this.x.setAttributeText(a,"contact"):E_FAIL},putProvider:function(a){return this.x?this.x.setAttributeText(a,"provider"):E_FAIL},
putUser:function(a){return this.x?this.x.setAttributeText(a,"user"):E_FAIL},putPassword:function(a){return this.x?this.x.setAttributeText(a,"pass"):E_FAIL},putServer:function(a){return this.x?this.x.setAttributeText(a,"server"):E_FAIL},putPort:function(a){return this.x?this.x.setAttributeText(a,"port"):E_FAIL},putFromName:function(a){return this.x?this.x.setAttributeText(a,"from"):E_FAIL},putTLS:function(a){return this.x?this.x.setAttributeText(a,"tls"):E_FAIL},putAuth:function(a){return this.x?this.x.setAttributeText(a,
"auth"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.asettings=Njl.inherit(CComObjectRoot,dpv.base,ISysAlertsSettings,{constructor:function(){dpv.asettings.superclass.constructor.apply(this,arguments)},ISysAlertsSettings:{getOffonDiskFail:function(){return this.x?this.x.getAttributeText("off_on_disk_fail"):E_FAIL},getOffonDiskOverheat:function(){return this.x?this.x.getAttributeText("off_on_disk_overheat"):E_FAIL},getSeverity:function(){return this.x?this.x.getAttributeText("mail_severity"):E_FAIL},getMonitorVolume:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("volume"):
E_FAIL},getMonitorDiskFailure:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("disk_failure"):E_FAIL},getMonitorFan:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("fan"):E_FAIL},getMonitorPower:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("power"):E_FAIL},getMonitorBoardTemp:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("board_temp"):E_FAIL},getMonitorUPS:function(){return this.x?
this.x.selectSingleNode("./Monitor").getAttributeText("ups"):E_FAIL},getMonitorDiskFull:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("disk_full"):E_FAIL},getMonitorDiskTemp:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("disk_temp"):E_FAIL},getMonitorAntivirus:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("antivirus"):E_FAIL},getMonitorQuotaExceed:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("quota_exceed"):
E_FAIL},getMonitorBoardTemp:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("board_temp"):E_FAIL},getMonitorPSU:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("psu"):E_FAIL},getFirmwareUpdate:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("firmware_update"):E_FAIL},putOffonDiskFail:function(a){return this.x?this.x.setAttributeText(a,"off_on_disk_fail"):E_FAIL},putOffonDiskOverheat:function(a){return this.x?
this.x.setAttributeText(a,"off_on_disk_overheat"):E_FAIL},putSeverity:function(a){return this.x?this.x.setAttributeText(a,"mail_severity"):E_FAIL},putMonitorVolume:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"volume"):E_FAIL},putMonitorDiskFailure:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"disk_failure"):E_FAIL},putMonitorFan:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"fan"):E_FAIL},
putMonitorPower:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"power"):E_FAIL},putMonitorBoardTemp:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"board_temp"):E_FAIL},putMonitorUPS:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"ups"):E_FAIL},putMonitorDiskFull:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"disk_full"):E_FAIL},putMonitorDiskTemp:function(a){return this.x?
this.x.selectSingleNode("./Monitor").setAttributeText(a,"disk_temp"):E_FAIL},putMonitorAntivirus:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"antivirus"):E_FAIL},putMonitorQuotaExceed:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"quota_exceed"):E_FAIL},putMonitorBoardTemp:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"board_temp"):E_FAIL},putMonitorPSU:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,
"psu"):E_FAIL},putFirmwareUpdate:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"firmware_update"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.smtpp=Njl.inherit(CComObjectRoot,dpv.base,ISysAlertsSMTPProvider,{constructor:function(){dpv.smtpp.superclass.constructor.apply(this,arguments)},ISysAlertsSMTPProvider:{getName:function(){return this.x?this.x.getAttributeText("name"):E_FAIL},getServer:function(){return this.x?this.x.getAttributeText("server"):E_FAIL},getDomain:function(){return this.x?this.x.getAttributeText("domain"):E_FAIL},getPort:function(){return this.x?this.x.getAttributeText("port"):E_FAIL},getTLS:function(){return this.x?
this.x.getAttributeText("tls"):E_FAIL},getHelpURL:function(){return this.x?this.x.getAttributeText("help_url"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.smtps=Njl.inherit(CComObjectRoot,dpv.base,ISysAlertsSMTPServer,{constructor:function(){dpv.smtps.superclass.constructor.apply(this,arguments)},ISysAlertsSMTPServer:{getHostName:function(){return dpv.gp(this.xproptlist,"hostname")},getPort:function(){return dpv.gp(this.xproptlist,"port")},getSocketType:function(){return dpv.gp(this.xproptlist,"socketType")},getUserName:function(){return dpv.gp(this.xproptlist,"username")},getAuthentication:function(){return dpv.gp(this.xproptlist,"authentication")}},
IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(a),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.pwact=Njl.inherit(CComObjectRoot,dpv.base,ISysPowerAction,{constructor:function(a){dpv.pwact.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('<Action d="?" h="?" m="?" a="?"/>')).selectNodes("./*")[0])},ISysPowerAction:{getDayOfWeek:function(){return this.x?this.x.getAttributeText("d"):E_FAIL},getHour:function(){return this.x?this.x.getAttributeText("h"):E_FAIL},getMinute:function(){return this.x?this.x.getAttributeText("m"):E_FAIL},
getAction:function(){return this.x?this.x.getAttributeText("a"):E_FAIL},putDayOfWeek:function(a){return this.x?this.x.setAttributeText(a,"d"):E_FAIL},putHour:function(a){return this.x?this.x.setAttributeText(a,"h"):E_FAIL},putMinute:function(a){return this.x?this.x.setAttributeText(a,"m"):E_FAIL},putAction:function(a){return this.x?this.x.setAttributeText(a,"a"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.powerManager=Njl.inherit(CComEventsObjectRoot("ISysPowerManagerEvents"),dpv.base,ISysPowerManager,{constructor:function(){dpv.powerManager.superclass.constructor.apply(this,arguments)},ISysPowerManager:{updatePowerSchedule:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="PowerSchedule" resource-type="System"/>',Njl.id())),a)},commitPowerSchedule:function(a){if(this.x){var b=this.x.selectSingleNode("./PowerSchedule").toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="PowerSchedule" resource-type="System">{1}</xs:set>',
Njl.id(),b)),a)}return S_FALSE},getActions:function(){return this.pw?this.pw.getChildren():E_FAIL},getSpindownActions:function(){return this.sd?this.sd.getChildren():E_FAIL},getSwitchType:function(){if(this.x)return this.x.selectSingleNode("./PowerSchedule").getAttributeText("type");return E_FAIL},setSwitchType:function(a){if(this.x){this.x.selectSingleNode("./PowerSchedule").xmlDocument.setAttribute("type",a);return S_OK}return E_FAIL},getEnablePowerSchedule:function(){if(this.x)return this.x.selectSingleNode("./PowerSchedule").getAttributeText("enable");
return E_FAIL},EnablePowerSchedule:function(a){if(this.x){this.x.selectSingleNode("./PowerSchedule").setAttributeText(a,"enable");return S_OK}return E_FAIL},appendAction:function(a){if(a&&this.x){var b=this.x.selectSingleNode("./PowerSchedule");if(b){a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return S_OK}}return E_FAIL},appendActions:function(a){if(a){var b=this.x.selectSingleNode("./PowerSchedule");b&&Njl.each(a,
function(c){(c=CComQIPtr(c,"IXDomNode"))&&b.appendNode(c.getXml())},this);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},removeAction:function(a){if(a&&this.x)if(a=this.x.selectSingleNode("./PowerSchedule/*[@d='"+a.getDayOfWeek()+"' and @h='"+a.getHour()+"' and @m='"+a.getMinute()+"' and @a='"+a.getAction()+"']"))if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.x);return E_FAIL},removeActions:function(a){if(a){this.x.selectSingleNode("./PowerSchedule")&&
Njl.each(a,function(b){(b=this.x.selectSingleNode("./PowerSchedule/*[@d='"+b.getDayOfWeek()+"' and @h='"+b.getHour()+"' and @m='"+b.getMinute()+"' and @a='"+b.getAction()+"']"))&&b.removeNode()},this);return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},removeAllActions:function(){if(this.x){var a=this.x.selectSingleNode("./PowerSchedule"),b=a.selectSingleNode("..");if(a){var c=a.getAttributeText("enable");if(a.removeNode()){b.appendNode(new Njl.Xml.document('<PowerSchedule enable="'+
c+'"/>'));return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}return S_OK}return E_FAIL},appendSpindownAction:function(a){if(a&&this.x){var b=this.xsd;if(b){a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(this.xsd)}return S_OK}}return E_FAIL},appendSpindownActions:function(a){if(a){var b=this.xsd;b&&Njl.each(a,function(c){(c=CComQIPtr(c,"IXDomNode"))&&b.appendNode(c.getXml())},this);return CComQIPtr(this,"IXDomNode").loadFromXml(this.xsd)}return E_FAIL},
removeAllSpindownActions:function(){if(this.xsd)return this.xsd.removeNode("./Action");return E_FAIL},updateWakeOnLAN:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="WakeOnLAN" resource-type="System"/>',Njl.id())),a)},commitWakeOnLAN:function(a){if(this.xwl){var b=this.xwl.toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="WakeOnLAN" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)}return S_FALSE},getWakeOnLanStatus:function(){if(this.xwl)return this.xwl.getAttributeText("enable")==
"true";return E_FAIL},putWakeOnLanStatus:function(a){if(this.xwl){this.xwl.setAttributeText(a?"true":"false","enable");return S_OK}return E_FAIL},updateSpindown:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Spindown" resource-type="System"/>',Njl.id())),a)},commitSpindown:function(a){if(this.xsd){var b=this.xsd.toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Spindown" resource-type="System">{1}</xs:set>',Njl.id(),
b)),a)}return E_FAIL},getSpindownStatus:function(){if(this.xsd)return this.xsd.getAttributeText("enable")=="true";return E_FAIL},putSpindownStatus:function(a){if(this.xsd){this.xsd.setAttributeText(a,"enable");return S_OK}return E_FAIL},putSpinUpOnTakingSnap:function(a){if(this.xsd){this.xsd.setAttributeText(a?"true":"false","spinup_for_snapshot");return S_OK}return E_FAIL},getSpinUpOnTakingSnap:function(){if(this.xsd)return this.xsd.getAttributeText("spinup_for_snapshot")==="true";return E_FAIL},
getSpindownTime:function(){if(this.xsd)return this.xsd.getAttributeText("minute");return E_FAIL},putSpindownTime:function(a){if(this.xsd){this.xsd.setAttributeText(a,"minute");return S_OK}return E_FAIL}},IXDomNode:{Update:function(a){return CComQIPtr(this,"ISysPowerManager").updatePowerSchedule(a)},Commit:function(a){return CComQIPtr(this,"ISysPowerManager").commitPowerSchedule(a)},getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.getAttributeText("resource-id"),
d=a.selectNodes("./*");if(d&&d.length){d=d[0];switch(c){case "PowerSchedule":this.x=a;b.removeChild(this.pw);b.appendChild(this.pw=CComQIPtr(new dpv.base,"IXDomNode"));(a=d.selectNodes("./Action"))&&Njl.each(a,function(e){var f=CComQIPtr(new dpv.pwact(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.pw.appendChild(f)},this);return S_OK;case "WakeOnLAN":this.xwl=a.selectSingleNode("./WakeOnLAN");return S_OK;case "Spindown":this.xsd=a.selectSingleNode("./Spindown");b.removeChild(this.sd);if(a=this.xsd.selectNodes("./Action")){this.sd=
CComQIPtr(new dpv.base,"IXDomNode");Njl.each(a,function(e){var f=CComQIPtr(new dpv.pwact(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.sd.appendChild(f)},this);b.appendChild(this.sd)}return S_OK}}return E_FAIL}}});Njl.namespace("dpv");
dpv.sysfmw=Njl.inherit(CComObjectRoot,dpv.base,ISysFirmwareInfo,{constructor:function(){dpv.sysfmw.superclass.constructor.apply(this,arguments)},ISysFirmwareInfo:{getUpdateURL:function(){return dpv.gp(this.xpr,"FirmwareImage_url")},getDescription:function(){return dpv.gp(this.xpr,"FirmwareImage_description")},getVersion:function(){return dpv.gp(this.xpr,"FirmwareImage_version")},getSize:function(){return dpv.gp(this.xpr,"FirmwareImage_size")},getTime:function(){return dpv.gp(this.xpr,"FirmwareImage_timestamp")}},
IXDomNode:{loadFromXml:function(a){this.xpr=CComQIPtr(new dpv.xprop(a),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.backup=Njl.inherit(CComEventsObjectRoot("IBackupEvents"),dpv.base,IBackup,{constructor:function(a){dpv.backup.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <BackupJob resource-id="0" resource-type="BackupJob">\t                  <Job_Id>0</Job_Id>                      <Job_Name></Job_Name>                      <Speed>0</Speed>                      <Runtime>0</Runtime>                      <Transferred>0</Transferred>\t                  <BackupJob_Resource item="Source">\t                    <Type>local</Type>\t                    <Share_Name_Or_Protocol></Share_Name_Or_Protocol>\t                    <Path></Path>\t                    <Login></Login>\t                    <Password></Password>\t                    <Port>0</Port>                        <Eject>0</Eject>\t                  </BackupJob_Resource>\t                  <BackupJob_Resource item="Destination">\t                    <Type>local</Type>                        <Share_Name_Or_Protocol></Share_Name_Or_Protocol>\t                    <Path></Path>\t                    <Login></Login>\t                    <Password></Password>\t                    <Port>0</Port>                        <Eject>0</Eject>\t                  </BackupJob_Resource>\t                  <Schedule>                        <Enabled>1</Enabled>\t                    <Frequency></Frequency>\t                    <Start></Start>\t                    <End></End>\t                    <DayOfWeek></DayOfWeek>\t                  </Schedule>\t                  <Option>\t                    <Full_Backup_Frequency></Full_Backup_Frequency>\t                    <Remove_Previous_Backup></Remove_Previous_Backup>\t                    <Chown_To_Share_Owner></Chown_To_Share_Owner>\t                    <Rsync_Option></Rsync_Option>\t                    <Rsync_Exclude></Rsync_Exclude>\t                    <Email_This_To_Alert_Email></Email_This_To_Alert_Email>\t                    <Misc_Option></Misc_Option>\t                    <Wol_Address/>\t                  </Option>\t             </BackupJob>')).selectNodes("./*")[0])},IBackup:{getId:function(){return dpv.gp(this.xbackup,
"Job_Id")},getName:function(){return dpv.gp(this.xbackup,"Job_Name")},putName:function(a){return dpv.pp(this.xbackup,"Job_Name",a)},getSpeed:function(){return dpv.gp(this.xbackup,"Speed")},getRuntime:function(){return dpv.gp(this.xbackup,"Runtime")},getTransferred:function(){return dpv.gp(this.xbackup,"Transferred")},getStatus:function(){return dpv.gp(this.xbackup,"Status")},getStatusDate:function(){return dpv.gp(this.xbackup,"Status_Date")},getStatusResult:function(){return dpv.gp(this.xbackup,"Status_Result")},
getWakingRemainingTime:function(){return dpv.gp(this.xbackup,"Waking_Remaining_Time")},getSourceType:function(){return dpv.gp(this.xsrc,"Type")},putSourceType:function(a){return dpv.pp(this.xsrc,"Type",a)},getSourceShareNameOrProtocol:function(){return dpv.gp(this.xsrc,"Share_Name_Or_Protocol")},putSourceShareNameOrProtocol:function(a){return dpv.pp(this.xsrc,"Share_Name_Or_Protocol",a)},getSourcePath:function(){return dpv.gp(this.xsrc,"Path")},putSourcePath:function(a){return dpv.pp(this.xsrc,"Path",
a)},getSourceLogin:function(){return dpv.gp(this.xsrc,"Login")},putSourceLogin:function(a){return dpv.pp(this.xsrc,"Login",a)},getSourcePassword:function(){return dpv.gp(this.xsrc,"Password")},putSourcePassword:function(a){return dpv.pp(this.xsrc,"Password",a)},getSourcePort:function(){return dpv.gp(this.xsrc,"Port")},putSourcePort:function(a){return dpv.pp(this.xsrc,"Port",a)},getSourceEject:function(){return dpv.gp(this.xsrc,"Eject")},putSourceEject:function(a){return dpv.pp(this.xsrc,"Eject",a)},
getSourceEjectable:function(){return dpv.gp(this.xsrc,"Ejectable")},getDestinationType:function(){return dpv.gp(this.xdst,"Type")},putDestinationType:function(a){return dpv.pp(this.xdst,"Type",a)},getDestinationShareNameOrProtocol:function(){return dpv.gp(this.xdst,"Share_Name_Or_Protocol")},putDestinationShareNameOrProtocol:function(a){return dpv.pp(this.xdst,"Share_Name_Or_Protocol",a)},getDestinationPath:function(){return dpv.gp(this.xdst,"Path")},putDestinationPath:function(a){return dpv.pp(this.xdst,
"Path",a)},getDestinationLogin:function(){return dpv.gp(this.xdst,"Login")},putDestinationLogin:function(a){return dpv.pp(this.xdst,"Login",a)},getDestinationPassword:function(){return dpv.gp(this.xdst,"Password")},putDestinationPassword:function(a){return dpv.pp(this.xdst,"Password",a)},getDestinationPort:function(){return dpv.gp(this.xdst,"Port")},putDestinationPort:function(a){return dpv.pp(this.xdst,"Port",a)},getDestinationEject:function(){return dpv.gp(this.xdst,"Eject")},putDestinationEject:function(a){return dpv.pp(this.xdst,
"Eject",a)},getDestinationEjectable:function(){return dpv.gp(this.xdst,"Ejectable")},getSheduleEnabled:function(){return dpv.gp(this.xsch,"Enabled")},putSheduleEnabled:function(a){return dpv.pp(this.xsch,"Enabled",a)},getSheduleFrequency:function(){return dpv.gp(this.xsch,"Frequency")},putSheduleFrequency:function(a){return dpv.pp(this.xsch,"Frequency",a)},getSheduleStart:function(){return dpv.gp(this.xsch,"Start")},putSheduleStart:function(a){return dpv.pp(this.xsch,"Start",a)},getSheduleEnd:function(){return dpv.gp(this.xsch,
"End")},putSheduleEnd:function(a){return dpv.pp(this.xsch,"End",a)},getSheduleDayOfWeek:function(){return dpv.gp(this.xsch,"DayOfWeek")},putSheduleDayOfWeek:function(a){return dpv.pp(this.xsch,"DayOfWeek",a)},getFullBackupFrequency:function(){return dpv.gp(this.xopt,"Full_Backup_Frequency")},putFullBackupFrequency:function(a){return dpv.pp(this.xopt,"Full_Backup_Frequency",a)},getRemovePreviousBackup:function(){return dpv.gp(this.xopt,"Remove_Previous_Backup")},putRemovePreviousBackup:function(a){return dpv.pp(this.xopt,
"Remove_Previous_Backup",a)},getChownToShareOwner:function(){return dpv.gp(this.xopt,"Chown_To_Share_Owner")},putChownToShareOwner:function(a){return dpv.pp(this.xopt,"Chown_To_Share_Owner",a)},getRsyncOption:function(){return dpv.gp(this.xopt,"Rsync_Option")},putRsyncOption:function(a){return dpv.pp(this.xopt,"Rsync_Option",a)},getRsyncExclude:function(){return dpv.gp(this.xopt,"Rsync_Exclude")},putRsyncExclude:function(a){return dpv.pp(this.xopt,"Rsync_Exclude",a)},getEmailThisToAlertEmail:function(){return dpv.gp(this.xopt,
"Email_This_To_Alert_Email")},putEmailThisToAlertEmail:function(a){return dpv.pp(this.xopt,"Email_This_To_Alert_Email",a)},getMiscOption:function(){return dpv.gp(this.xopt,"Misc_Option")},putMiscOption:function(a){return dpv.pp(this.xopt,"Misc_Option",a)},getWolAddress:function(){return dpv.gp(this.xopt,"Wol_Address")},putWolAddress:function(a){return dpv.pp(this.xopt,"Wol_Address",a)},getTimeToWait:function(){return dpv.gp(this.xopt,"Time_To_Wait")},putTimeToWait:function(a){return dpv.pp(this.xopt,
"Time_To_Wait",a)},getProgress:function(){return dpv.gp(this.xprogress,"Percentage")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){switch(a.getAttributeText("resource-type")){case undefined:case "BackupJob":this.x=a;this.xbackup=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");this.xopt=CComQIPtr(new dpv.xprop(this.x.selectSingleNode("./Option")),"IXPropertyList");this.xsch=CComQIPtr(new dpv.xprop(this.x.selectSingleNode("./Schedule")),"IXPropertyList");this.xsrc=CComQIPtr(new dpv.xprop(this.x.selectSingleNode('./*[@item="Source"]')),
"IXPropertyList");this.xdst=CComQIPtr(new dpv.xprop(this.x.selectSingleNode('./*[@item="Destination"]')),"IXPropertyList");this.xprogress=CComQIPtr(new dpv.xprop(this.x.selectSingleNode("./Progress")),"IXPropertyList");return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.bktarget=Njl.inherit(CComObjectRoot,dpv.base,IBackupTarget,{constructor:function(){dpv.bktarget.superclass.constructor.apply(this,arguments)},IBackupTarget:{getType:function(){return dpv.gp(this.xtm,"Type")},getUSBSubType:function(){return dpv.gp(this.xtm,"USB_Sub_Type")},getShareNameOrProtocol:function(){return dpv.gp(this.xtm,"Share_Name_Or_Protocol")},getPath:function(){return dpv.gp(this.xtm,"Path")},getEjectable:function(){return dpv.gp(this.xtm,"Ejectable")},getRefId:function(){return this.x?
this.x.getAttributeText("resource-id"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xtm=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.bckManager=Njl.inherit(CComEventsObjectRoot("IBackupManagerEvents"),dpv.base,IBackupManager,{constructor:function(){dpv.bckManager.superclass.constructor.apply(this,arguments)},IBackupManager:{updateBackups:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="BackupJobs" resource-type="BackupJob_Collection"/>',Njl.id())),a)},getBackups:function(){return CComQIPtr(this,"IXDomNode").getChildren()},commitBackups:function(a,b){var c="";if(b&&b.length){for(var d=
0;d<b.length;++d)c+=CComQIPtr(b[d],"IXDomNode").getXml().toString();if(c)c="<BackupJob_Collection>"+c+"</BackupJob_Collection>"}else if(this.x)c=this.x.selectSingleNode("./BackupJob_Collection").toString();if(c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="BackupJobs" resource-type="BackupJob_Collection">{1}</xs:set>',Njl.id(),c)),a);return E_FAIL},deleteBackup:function(a,b){if(a&&CComQIPtr(a,"IBackup"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="BackupJob" c-resource-id="BackupJobs" c-resource-type="BackupJob_Collection"/>',
Njl.id(),a.getId())),b);return E_INVALIDARG},runBackups:function(a,b){var c="",d;if(a&&a.length)for(var e=0;e<a.length;++e){d=CComQIPtr(a[e],"IBackup");c+=String.format('<xs:command id="{0}" resource-id="{1}" resource-type="BackupJob">                            <xs:command_name>run</xs:command_name><xs:args/>                        </xs:command>',Njl.id(),d.getId())}if(c)return this.sendXml(dpv.xmlEnvelope(c),b);return E_INVALIDARG},cancelBackup:function(a,b){if(a&&CComQIPtr(a,"IBackup"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="BackupJob">                        <xs:command_name>cancel</xs:command_name><xs:args/></xs:command>',
Njl.id(),a.getId())),b);return E_INVALIDARG},addBackup:function(a,b){if(a&&CComQIPtr(a,"IBackup")){a=CComQIPtr(a,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:add id="{0}" resource-type="BackupJob" c-resource-id="BackupJobs" c-resource-type="BackupJob_Collection">{1}</xs:add>',Njl.id(),a)),b)}return E_INVALIDARG},appendBackup:function(a){if(a&&this.x){var b=this.x.selectSingleNode("BackupJob_Collection");if(b){a=CComQIPtr(a,"IXDomNode");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);
return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}}return E_FAIL},removeBackup:function(a){if(a&&this.x)if(a=this.x.selectSingleNode("BackupJob_Collection/*[@resource-id='"+a.getId()+"']"))if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.x);return E_FAIL},testBackupConnection:function(a,b,c){a=CComQIPtr(a,"IBackup");c=c||0;if(a)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="'+c+'" resource-type="BackupJob_Resource">                            <xs:command_name>test-connection</xs:command_name>                            <xs:args>                                <xs:arg>                                    <BackupJob_Resource>                                    <Type>remote</Type>                                    <Share_Name_Or_Protocol>{1}</Share_Name_Or_Protocol>                                    <Path><![CDATA[{2}]]\></Path>                                    <Login><![CDATA[{3}]]\></Login>                                    <Password><![CDATA[{4}]]\></Password>                                    <Port><![CDATA[{5}]]\></Port>                                    </BackupJob_Resource>                                </xs:arg>                            </xs:args>                        </xs:command>',
Njl.id(),a.getSourceShareNameOrProtocol(),a.getSourcePath(),a.getSourceLogin()?a.getSourceLogin():"",a.getSourcePassword()?a.getSourcePassword():"",a.getSourcePort())),b);return E_FAIL},updateButtonBackups:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="BackupButtonJobs" resource-type="BackupButtonJob_Collection"/>',Njl.id())),a)},getButtonBackups:function(){return this.bbt?this.bbt.getChildren():E_FAIL},appendButtonBackup:function(a){if(a&&this.bx){var b=
this.bx.selectSingleNode("BackupButtonJob_Collection");if(b){a=new Njl.Xml.document(String.format("<BackupButtonJob><Job_Id>{0}</Job_Id></BackupButtonJob>",a));b.appendNode(a);return CComQIPtr(this,"IXDomNode").loadFromXml(this.bx)}}return E_FAIL},removeButtonBackup:function(a){if(a&&this.bx)if(a=this.bx.selectSingleNode("BackupButtonJob_Collection/BackupButtonJob[Job_Id='"+a+"']"))if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.bx);return E_FAIL},commitButtonBackups:function(a,
b){if(this.bx){var c="";if(b){for(var d=0;d<b.length;++d)c+=CComQIPtr(b[d],"IXDomNode").getXml().toString();c="<BackupButtonJob_Collection>"+c+"</BackupButtonJob_Collection>"}else c=this.bx.selectSingleNode("./BackupButtonJob_Collection").toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="BackupButtonJobs" resource-type="BackupButtonJob_Collection">{1}</xs:set>',Njl.id(),c)),a)}return E_FAIL},updateButtonBackupsLog:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="BackupButtonLog" resource-type="BackupButtonLog"/>',
Njl.id())),a)},getButtonBackupsLog:function(){return this.log?this.log:E_FAIL},clearButtonBackupsLog:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:clear id="{0}" resource-id="BackupButtonLog" resource-type="BackupButtonLog"/>',Njl.id())),a)},updateLog:function(a,b){a=CComQIPtr(a,"IBackup");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BackupJobLog"/>',Njl.id(),a.getId())),b)},clearLog:function(a,b){a=CComQIPtr(a,"IBackup");
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:clear id="{0}" resource-id="{1}" resource-type="BackupJobLog"/>',Njl.id(),a.getId())),b)},updateBackupsTargets:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="BackupTargets" resource-type="BackupTarget_Collection"/>',Njl.id())),a)},getBackupSourceTargets:function(){return this.bsrct?this.bsrct.getChildren():E_FAIL},getBackupDestinationTargets:function(){return this.bdstt?this.bdstt.getChildren():E_FAIL},
updateTimeMachine:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Timemachine" resource-type="Timemachine"/>',Njl.id())),a)},commitTimeMachine:function(a){if(this.tm){var b=this.tm.getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Timemachine" resource-type="Timemachine">{1}</xs:set>',Njl.id(),b)),a)}return E_FAIL},getTimeMachine:function(){return this.tm?this.tm:E_FAIL},updateVaultStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="VaultSettings" resource-type="VaultSettings"/>',
Njl.id())),a)},commitVaultStatus:function(a,b,c){b=b?"true":"false";c=String.format('<VaultService enable="'+b+'"/>                     <Volume>{1}</Volume>',b,c);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="VaultService" resource-type="VaultService">{1}</xs:set>',Njl.id(),c)),a)},commitVaultAction:function(a,b,c,d,e){b=String.format("<Action>{0}</Action>                     <UserName>{1}</UserName>                     <UserPassword><![CDATA[{2}]]\></UserPassword>                     <DefaultJob>{3}</DefaultJob>",
b,c,d,e);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="VaultSettings" resource-type="VaultSettings">{1}</xs:set>',Njl.id(),b)),a)},getVault:function(){return this.xvault?this.xvault:E_FAIL},dowloadSSHKey:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="download" resource-id="BackupJobs" resource-type="BackupJob_Collection"/>',Njl.id())),a)},updateDropBoxProvisioningStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DropBoxProvisioning" resource-type="DropBox"/>',
Njl.id())),a)},commitDropBoxProvisioningStatus:function(a){if(this.xdropbox){var b=this.xdropbox.getXml();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="DropBoxProvisioning" resource-type="DropBox">{1}</xs:set>',Njl.id(),b)),a)}return E_FAIL},getDropBox:function(){return this.xdropbox?this.xdropbox:E_FAIL},updateDropBoxAuthURL:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DropBoxAuthorizeUrl" resource-type="DropBox"/>',
Njl.id())),a)},getDropBoxAuthURL:function(){return this.xdropboxurl?this.xdropboxurl.getAttributeText("authorize-url"):E_FAIL},updateDropBoxShareList:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SimpleShare" resource-type="Share_Collection"/>',Njl.id())),a)},getDropBoxShareList:function(){return this.xdropboxshares?this.xdropboxshares.getChildren():E_FAIL},syncDropBoxShare:function(a,b){b=String.format('<DropBoxConfiguration mode="bidir">                     <ShareId><![CDATA[{0}]]\></ShareId>                     </DropBoxConfiguration>',
b);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="DropBoxConfiguration" resource-type="DropBox">{1}</xs:set>',Njl.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AmazonDrive_Status_Collection" resource-type="AmazonDrive_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:E_FAIL},updateAmazonProvisioningStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AmazonDriveProvisioning" resource-type="AmazonDrive"/>',
Njl.id())),a)},commitAmazonProvisioningStatus:function(a){if(this.xamazon){var b=this.xamazon.getXml();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AmazonDriveProvisioning" resource-type="AmazonDrive">{1}</xs:set>',Njl.id(),b)),a)}return E_FAIL},getAmazon:function(){return this.xamazon?this.xamazon:E_FAIL},updateAmazonAuthURL:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AmazonDriveAuthorizeUrl" resource-type="AmazonDrive"/>',
Njl.id())),a)},getAmazonAuthURL:function(){return this.xamazonurl?this.xamazonurl.getAttributeText("authorize-url"):E_FAIL},updateAmazonShareList:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SimpleShare" resource-type="Share_Collection"/>',Njl.id())),a)},getAmazonShareList:function(){return this.xamazonshares?this.xamazonshares.getChildren():E_FAIL},syncAmazonShare:function(a,b,c){for(var d="",e=0;e<b.length;++e)d+=String.format("<ShareId><![CDATA[{0}]]\></ShareId>",
b[e]);b=String.format('<AmazonDriveConfiguration mode="bidir" serial="{1}">{0}</AmazonDriveConfiguration>',d,c);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AmazonDriveConfiguration" resource-type="AmazonDrive">{1}</xs:set>',Njl.id(),b)),a)},updateAmazonLogs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AmazonDriveLog" resource-type="AmazonDriveLog"/>',Njl.id())),a)},getAmazonLogs:function(){return this.amazonLogs?
this.amazonLogs.getChildren():E_FAIL},getAmazonLogsCount:function(){return this.lcnt?this.lcnt:E_FAIL},getAmazonTotalLogsCount:function(){return this.tlcnt?this.tlcnt:E_FAIL},updateMediaBackup:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="MbackupConf" resource-type="MbackupConf"/>',Njl.id())),a)},commitMediaBackup:function(a){if(this.xmedia)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="MbackupConf" resource-type="MbackupConf">{1}</xs:set>',
Njl.id(),this.xmedia.getXml())),a);return E_FAIL},getMediaBackup:function(){return this.xmedia?this.xmedia:E_FAIL},updateMediaBackupStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="MbackupStat" resource-type="MbackupStat"/>',Njl.id())),a)},getMediaBackupStatus:function(){return this.xmediastatus?this.xmediastatus:E_FAIL},getMediaBackupStatus:function(){return this.xmediastatus?this.xmediastatus:E_FAIL},updateRemoteDirectories:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="0" resource-type="BackupJob_Resource">                    <xs:command_name>BrowseShares</xs:command_name>                    <xs:args>                        <xs:arg>                            <BackupJob_Resource>                                <Type>{1}</Type>                                <Protocol>{2}</Protocol>                                <Host><![CDATA[{3}]]\></Host>                                <Share><![CDATA[{4}]]\></Share>                                <Subfolder><![CDATA[{5}]]\></Subfolder>                                <Login><![CDATA[{6}]]\></Login>                                <Password><![CDATA[{7}]]\></Password>                                <Port><![CDATA[{8}]]\></Port>                            </BackupJob_Resource>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),a.type,a.protocol,a.host,a.share,a.subfolder,a.login,a.password,a.port)),a.lp)},createRemoteDir:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="0" resource-type="BackupJob_Resource">                    <xs:command_name>CreateRemoteSubfolder</xs:command_name>                    <xs:args>                        <xs:arg>                            <BackupJob_Resource>                                <Type>{1}</Type>                                <Protocol>{2}</Protocol>                                <Host><![CDATA[{3}]]\></Host>                                <Share><![CDATA[{4}]]\></Share>                                <Subfolder><![CDATA[{5}]]\></Subfolder>                                <Login><![CDATA[{6}]]\></Login>                                <Password><![CDATA[{7}]]\></Password>                                <Port><![CDATA[{8}]]\></Port>                            </BackupJob_Resource>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),a.type,a.protocol,a.host,a.share,a.subfolder,a.login,a.password,a.port)),a.lp)},getRemoteDirectories:function(){return this.arrRemoteShares?this.arrRemoteShares:E_FAIL}},IXDomNode:{Update:function(a){var b=CComQIPtr(this,"IBackupManager");return b.updateButtonBackups(a)&&b.updateButtonBackupsLog(a)&&b.updateBackupsTargets(a)&&b.updateBackups(a)&&b.updateTimeMachine(a)&&b.updateVaultStatus(a)},Commit:function(a){var b=CComQIPtr(this,"IBackupManager");return b.commitBackups(a)&&b.commitButtonBackups(a)&&
b.commitTimeMachine(a)},getXml:function(){return this.x},loadFromXml:function(a,b){var c=CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var d=a.getAttributeText("resource-type");switch(d){case "BackupJob_Resource":if(a.selectSingleNode("BackupJob_Resource")){this.x=a;var e=a.selectNodes("BackupJob_Resource/Share_Name");this.arrRemoteShares=[];Njl.each(e,function(g){this.arrRemoteShares.push(g.getNodeText())},this)}return S_OK}return S_OK}else{d=a.getAttributeText("resource-type");
var f=a.getAttributeText("resource-id");if((e=a.selectNodes("./*"))&&e.length){e=e[0];switch(f){case "BackupJobs":this.x=a;c.removeAll();if(a=this.x.selectNodes("BackupJob_Collection")){a=this.x.selectNodes("BackupJob_Collection/BackupJob");Njl.each(a,function(g){var h=CComQIPtr(new dpv.backup(true),"IXDomNode");h.loadFromXml(g)==S_OK&&c.appendChild(h)},this);return S_OK}break;case "BackupButtonJobs":this.bx=a;if(a=this.bx.selectNodes("BackupButtonJob_Collection")){a=this.bx.selectNodes("BackupButtonJob_Collection/BackupButtonJob");
this.bbt=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(a,function(g){var h=CComQIPtr(new dpv.backup(true),"IXDomNode");h.loadFromXml(g)==S_OK&&this.bbt.appendChild(h)},this);return S_OK}break;case "BackupButtonLog":if(a=e.selectSingleNode("./Contents")){this.log=a.getNodeText();return S_OK}break;case "Timemachine":a=e;if(Njl.isDefined(a)){this.tm=CComQIPtr(new dpv.tm,"IXDomNode");if(this.tm.loadFromXml(a)==S_OK)return S_OK}break;case "BackupTargets":this.bdstt=this.bsrct=undefined;if(b=e.selectNodes("./Available_Source/BackupTarget")){this.bsrct=
CComQIPtr(new dpv.base,"IXDomNode");Njl.each(b,function(g){var h=CComQIPtr(new dpv.bktarget(true),"IXDomNode");h.loadFromXml(g)==S_OK&&this.bsrct.appendChild(h)},this)}if(e=e.selectNodes("./Available_Destination/BackupTarget")){this.bdstt=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(e,function(g){var h=CComQIPtr(new dpv.bktarget(true),"IXDomNode");h.loadFromXml(g)==S_OK&&this.bdstt.appendChild(h)},this)}return this.bsrct||this.bdstt?S_OK:E_FAIL;case "VaultSettings":a=e;if(Njl.isDefined(a)){this.xvault=
CComQIPtr(new dpv.vault,"IXDomNode");if(this.xvault.loadFromXml(a)==S_OK)return S_OK}break;case "DropBoxProvisioning":a=e;if(Njl.isDefined(a)){this.xdropbox=CComQIPtr(new dpv.dropbox,"IXDomNode");if(this.xdropbox.loadFromXml(a)==S_OK)return S_OK}break;case "DropBoxAuthorizeUrl":this.xdropboxurl=e;if(Njl.isDefined(this.xdropboxurl))return S_OK;break;case "SimpleShare":if(e=a.selectNodes("Share_Collection/*")){this.xdropboxshares=CComQIPtr(new dpv.base,"IXDomNode");this.xamazonshares=CComQIPtr(new dpv.base,
"IXDomNode");Njl.each(e,function(g){var h=CComQIPtr(new dpv.dropboxshare,"IXDomNode");h.loadFromXml(g)==S_OK&&this.xdropboxshares.appendChild(h);h=CComQIPtr(new dpv.amazonshare,"IXDomNode");h.loadFromXml(g)==S_OK&&this.xamazonshares.appendChild(h)},this)}return S_OK;case "AmazonDriveProvisioning":a=e;if(Njl.isDefined(a)){this.xamazon=CComQIPtr(new dpv.amazon,"IXDomNode");if(this.xamazon.loadFromXml(a)==S_OK)return S_OK}break;case "AmazonDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=
CComQIPtr(new dpv.cloudstatus,"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break;case "AmazonDriveAuthorizeUrl":this.xamazonurl=e;if(Njl.isDefined(this.xamazonurl))return S_OK;break;case "AmazonDriveLog":if(a=e.selectSingleNode("./Log_Collection")){this.lcnt=parseInt(a.getAttributeText("n_entries"));this.tlcnt=parseInt(a.getAttributeText("n_total_entries"));a=e.selectNodes("./Log_Collection/Log");this.amazonLogs=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(a,
function(g){var h=CComQIPtr(new dpv.log,"IXDomNode");h.loadFromXml(g)==S_OK&&this.amazonLogs.appendChild(h)},this);c.appendChild(this.amazonLogs);return S_OK}break;case "MbackupConf":a=e;if(Njl.isDefined(a)){this.xmedia=CComQIPtr(new dpv.mediabackup,"IXDomNode");if(this.xmedia.loadFromXml(a)==S_OK)return S_OK}break;case "MbackupStat":a=e;if(Njl.isDefined(a)){this.xmediastatus=CComQIPtr(new dpv.mediabackupstatus,"IXDomNode");if(this.xmediastatus.loadFromXml(a)==S_OK)return S_OK}break}switch(d){case "BackupJobLog":a=
e;if(Njl.isDefined(a))if(a=a.selectSingleNode("./Contents")){this.Fire("OnLogUpdate",[b,a.getNodeText()]);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv");
dpv.tm=Njl.inherit(CComObjectRoot,dpv.base,ITimeMachine,{constructor:function(){dpv.tm.superclass.constructor.apply(this,arguments)},ITimeMachine:{getEnable:function(){return dpv.gp(this.xtm,"Enabled")},putEnable:function(a){return dpv.pp(this.xtm,"Enabled",a)},getPassword:function(){return dpv.gp(this.xtm,"Password")},putPassword:function(a){return dpv.pp(this.xtm,"Password",a)},getCapacity:function(){return dpv.gp(this.xtm,"Capacity_MB")},putCapacity:function(a){return dpv.pp(this.xtm,"Capacity_MB",
a)},getProtocol:function(){return dpv.gp(this.xtm,"Protocol")},putProtocol:function(a){return dpv.pp(this.xtm,"Protocol",a)},getMaxCapacity:function(){return dpv.gp(this.xtm,"Max_Capacity_MB")},getUserName:function(){return dpv.gp(this.xtm,"User_Name")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xtm=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.vault=Njl.inherit(CComObjectRoot,dpv.base,IVault,{constructor:function(){dpv.vault.superclass.constructor.apply(this,arguments)},IVault:{getEnable:function(){return dpv.gp(this.xv,"VaultService")==="Enabled"?true:false},getVersion:function(){return dpv.gp(this.xv,"Version")},getHostname:function(){return dpv.gp(this.xv,"Hostname")},getUsername:function(){return dpv.gp(this.xv,"UserName")},getVolume:function(){return dpv.gp(this.xv,"Volume")},getDefaultJob:function(){return dpv.gp(this.xv,"DefaultJob")}},
IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xv=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.addon=Njl.inherit(CComObjectRoot,dpv.base,IAddon,{constructor:function(){dpv.addon.superclass.constructor.apply(this,arguments)},IAddon:{getName:function(){return dpv.gp(this.xad,"name")},getDispalyName:function(){return dpv.gp(this.xad,"friendly_name")},getversion:function(){return dpv.gp(this.xad,"version")},getMinRaidiatorVersion:function(){return dpv.gp(this.xad,"min_raidiator_version")},getAuthor:function(){return dpv.gp(this.xad,"author")},getDescription:function(){if(this.x){var a=CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IDevice").getSystemManager().getLocaleManager().getLocale();a=a!=E_FAIL?a:"en-us";if(a=this.x.selectSingleNode("./description/"+a))return a.getNodeText();else if(a=this.x.selectSingleNode("./description/en-us"))return a.getNodeText()}return E_FAIL},getCurrentUrl:function(){return dpv.gp(this.xad,"current_url")},getDetailUrl:function(){return dpv.gp(this.xad,"detail_url")},getDownloadUrl:function(){return dpv.gp(this.xad,"download_url")},getLaunchUrl:function(){return dpv.gp(this.xad,
"launch_url")},getIconUrl:function(){return dpv.gp(this.xad,"icon")},getStatus:function(){return dpv.gp(this.xad,"status")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xad=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
dpv.addManager=Njl.inherit(CComEventsObjectRoot("IAddonManagerEvents"),dpv.base,IAddonManager,{constructor:function(){dpv.addManager.superclass.constructor.apply(this,arguments)},IAddonManager:{updateAvailableAddons:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AvailableAddons" resource-type="addon_Collection"/>',Njl.id())),a)},updateInstalledAddons:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="InstalledAddons" resource-type="addon_Collection"/>',
Njl.id())),a)},installAddonRemotely:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update resource-id="{0}" resource-type="Addon">                    <Addon resource-id="{0}" resource-type="Addon">                        <Name>{1}</Name>                        <Location>remote</Location>                        <Resource>{2}</Resource>                        <Icon>{3}</Icon>                     </Addon>                  </xs:update>',Njl.id(),a,b,c)),d)},getInstalledAddons:function(){return this.iaddons?
this.iaddons.getChildren():E_FAIL},getAvailableAddons:function(){return this.paddons?this.paddons.getChildren():E_FAIL}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){switch(e){case "xs:add-s":this.Fire("OnInstall",[c]);break;case "xs:delete-s":this.Fire("OnRemove",[c]);break}return S_OK}},IXDomNode:{Update:function(a){var b=CComQIPtr(this,"IAddonManager");return b.updateAvailableAddons(a)&&b.updateInstalledAddons(a)},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),
"INotifySink").Advise(this,"Addon");return E_FAIL},getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a[0];switch(c){case "AvailableAddons":c=a.selectNodes("./addon");this.paddons=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(d){var e=CComQIPtr(new dpv.addon,"IXDomNode");e.loadFromXml(d)==S_OK&&this.paddons.appendChild(e)},this);b.appendChild(this.paddons);return S_OK;case "InstalledAddons":c=
a.selectNodes("./addon");this.iaddons=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(d){var e=CComQIPtr(new dpv.addon,"IXDomNode");e.loadFromXml(d)==S_OK&&this.iaddons.appendChild(e)},this);b.appendChild(this.iaddons);return S_OK}}return E_FAIL}}});Njl.namespace("dpv");
dpv.album=Njl.inherit(CComObjectRoot,dpv.base,IAddon,{constructor:function(){dpv.album.superclass.constructor.apply(this,arguments)},IAlbum:{getCoverUrl:function(){return dpv.gp(this.xad,"cover_url")},getTitle:function(){return dpv.gp(this.xad,"title")},getDescription:function(){return dpv.gp(this.xad,"description")},getOwnerName:function(){return dpv.gp(this.xad,"owner_name")},getOwnerFirstName:function(){return dpv.gp(this.xad,"owner_firstname")},getOwnerLastName:function(){return dpv.gp(this.xad,
"owner_lastname")},getPunlishedOn:function(){return dpv.gp(this.xad,"published_on")},getLastInvitation:function(){return dpv.gp(this.xad,"last_invitation")},getItemsCount:function(){return dpv.gp(this.xad,"n_item")},getGuestsCount:function(){return dpv.gp(this.xad,"n_guest")},getGuestsViewCount:function(){return dpv.gp(this.xad,"n_guest_view")},getLastGuestsViewCount:function(){return dpv.gp(this.xad,"last_guest_view")},getPublicViewCount:function(){return dpv.gp(this.xad,"n_public_view")},getLastPublicViewCount:function(){return dpv.gp(this.xad,
"last_public_view")},getAlbumURL:function(){return dpv.gp(this.xad,"album_url")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xad=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
dpv.albumManager=Njl.inherit(CComEventsObjectRoot("IAlbumManagerEvents"),dpv.base,IAlbumManager,{constructor:function(){dpv.albumManager.superclass.constructor.apply(this,arguments)},IAlbumManager:{updateAlbums:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Albums" resource-type="AlbumsCollection"/>',Njl.id())),a,b.getSourcePHURL(),"BIN","GET")},getAlbums:function(){return this.albums?this.albums.getChildren():
E_FAIL},getVersion:function(){return dpv.gp(this.xsummary,"version")},getCountOfAlbums:function(){return dpv.gp(this.xsummary,"n_album")},getCountOfSharedAlbums:function(){return dpv.gp(this.xsummary,"n_shared_album")},getCountOfPhotographers:function(){return dpv.gp(this.xsummary,"n_photographer")},getConfigURL:function(){return dpv.gp(this.xsummary,"config_url")},getLoginURL:function(){return dpv.gp(this.xsummary,"login_url")}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IAlbumManager").updateAlbums(a)},
getXml:function(){return this.x},loadFromXml:function(a){this.x=a;a=CComQIPtr(this,"IXDomNode");a.removeAll();this.xalbums=this.x.selectNodes("photos2/recent_shared_albums/album");this.xsum=this.x.selectSingleNode("photos2/summary");this.xsummary=CComQIPtr(new dpv.xprop(this.xsum),"IXPropertyList");if(this.xalbums||this.xsum){this.albums=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xalbums,function(b){var c=CComQIPtr(new dpv.album,"IXDomNode");c.loadFromXml(b)==S_OK&&this.albums.appendChild(c)},
this);a.appendChild(this.albums);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.sysntp=Njl.inherit(CComObjectRoot,dpv.base,ISysNTPInfo,{constructor:function(){dpv.sysntp.superclass.constructor.apply(this,arguments)},ISysNTPInfo:{getEnable:function(){return this.x?this.x.getAttributeText("enable"):E_FAIL},putEnable:function(a){return this.x?this.x.setAttributeText(a,"enable"):E_FAIL},getServers:function(){return this.x?[this.x.getAttributeText("server1"),this.x.getAttributeText("server2"),this.x.getAttributeText("server3")]:E_FAIL},putServers:function(a){if(this.x){this.x.setAttributeText(a[0]||
"","server1");this.x.setAttributeText(a[1]||"","server2");this.x.setAttributeText(a[2]||"","server3")}else return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.hourmap=Njl.inherit(CComObjectRoot,dpv.base,ISysHourMapInfo,{constructor:function(){dpv.hourmap.superclass.constructor.apply(this,arguments)},ISysHourMapInfo:{getEnable:function(){return this.x?this.x.getAttributeText("enable"):E_FAIL},putEnable:function(a){return this.x?this.x.setAttributeText(a,"enable"):E_FAIL},getFormatType:function(){return this.x?this.x.getAttributeText("date_format"):E_FAIL},putFormatType:function(a){return this.x?this.x.setAttributeText(a,"date_format"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.xdisk=Njl.inherit(CComObjectRoot,dpv.base,IXRaidVolumeDisk,{constructor:function(){dpv.xdisk.superclass.constructor.apply(this,arguments)},IXRaidVolumeDisk:{getId:function(){return this.xid},getSlotNumber:function(){return dpv.gp(this.xdisk,"Slot")},getSlotBusyState:function(){return dpv.gp(this.xdisk,"Type")},getUsage:function(){return dpv.gp(this.xdisk,"Usage")}},IXDomNode:{loadFromXml:function(a){this.x=a;this.xid=this.x.getAttributeText("id");this.xdisk=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");
return S_OK}}});Njl.namespace("dpv");
dpv.xvol=Njl.inherit(CComObjectRoot,dpv.base,IXRaidVolume,{constructor:function(){dpv.xvol.superclass.constructor.apply(this,arguments)},IXRaidVolume:{getId:function(){return this.xid},getName:function(){return dpv.gp(this.xvol,"Name")},getRaidLevel:function(){return dpv.gp(this.xvol,"RaidLevel")},getCapacity:function(){return dpv.gp(this.xvol,"Capacity")},getState:function(){return dpv.gp(this.xvol,"State")},getVolumeDisks:function(){return this.disks?this.disks.getChildren():E_FAIL},getTimeToComplete:function(){return this.xstt?
this.xstt.getAttributeText("Finish-Seconds"):E_FAIL},getPercentage:function(){return this.xstt?this.xstt.getAttributeText("Percentage-Completed"):E_FAIL},getSpeed:function(){return this.xstt?this.xstt.getAttributeText("Speed"):E_FAIL}},IXDomNode:{loadFromXml:function(a){this.x=a;a=CComQIPtr(this,"IXDomNode");a.removeAll();this.xid=this.x.getAttributeText("resource-id");this.xstt=this.x.selectSingleNode("./State");this.xvol=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");var b=this.x.selectNodes("Disk_collection/Disk");
if(b){this.disks=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(b,function(c){var d=CComQIPtr(new dpv.xdisk,"IXDomNode");d.loadFromXml(c)==S_OK&&this.disks.appendChild(d)},this);a.appendChild(this.disks)}return S_OK}}});Njl.namespace("dpv");
dpv.xrManager=Njl.inherit(CComEventsObjectRoot("IXRaidManagerEvents"),dpv.base,IXRaidManager,{constructor:function(){dpv.xrManager.superclass.constructor.apply(this,arguments)},IXRaidManager:{updateXRaidInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Volumes" resource-type="Volume_Collection"/>',Njl.id())),a)},getXRaidVolumes:function(){return this.vols?this.vols.getChildren():E_FAIL},getXRaidType:function(){return dpv.gp(this.xrprops,"Type")},getXRaidExpandble:function(){return dpv.gp(this.xrprops,
"Expandble")},getXRaidPermissibleDisksCount:function(){return dpv.gp(this.xrprops,"Permisible_Disks")},getXRaidInstalledDisksCount:function(){return dpv.gp(this.xrprops,"Installed_Disks")}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IXRaidManager").updateXRaidInfo(a)},loadFromXml:function(a){this.x=a;a=CComQIPtr(this,"IXDomNode");a.removeAll();this.xrprops=CComQIPtr(new dpv.xprop(this.x.selectSingleNode("Volume_Collection/Property_List")),"IXPropertyList");var b=this.x.selectNodes("Volume_Collection/Volume");
if(b){this.vols=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(b,function(c){var d=CComQIPtr(new dpv.xvol,"IXDomNode");d.loadFromXml(c)==S_OK&&this.vols.appendChild(d)},this);a.appendChild(this.vols)}return S_OK}}});Njl.namespace("dpv");
dpv.wevnt=Njl.inherit(CComEventsObjectRoot("IDeviceWebEventSinkEvents"),dpv.base,IDeviceWebEventSink,IDeviceWebEventSinkEvents,{constructor:function(){dpv.wevnt.superclass.constructor.apply(this,arguments);this.webSink=CComQIPtr(this,"IDeviceWebEventSink")},IDeviceWebEventSinkEvents:{OnDone:function(a){if(a!=S_OK){_TRACE("Web event sink establishment failed.","Will try to establish sink in 5 seconds...",_TRACE.WARNING,"IDeviceWebEventSink");if(!this.m_listenid)this.m_listenid=this.webSink.Listen.defer(5E3,
this);return S_OK}}},IDeviceWebEventSink:{Listen:function(){if(this.m_listenid){clearTimeout(this.m_listenid);this.m_listenid=undefined}this.m_active||CComQIPtr(this,"INotifySink").Advise(this);this.m_active=true;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:event-subscribe id="{0}" operation="*" resource-id="*" resource-type="*"/>',Njl.id())),"DPV_WEB_EVENTS")},StopListen:function(){if(this.m_listenid){clearTimeout(this.m_listenid);this.m_listenid=undefined}CComQIPtr(this,"INotifySink").Unadvise(this);
this.m_active=false;return S_OK}},IXDomNode:{loadFromXml:function(a){if(this.m_active){var b=a.getNodeName(),c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id"),e=a.selectNodes("./*");this.Fire("OnEvent",[a,e,d,c,b],c);if(!this.m_listenid)this.m_listenid=this.webSink.Listen.defer(5E3,this)}return S_OK}}});Njl.namespace("dpv");
dpv.device5200=Njl.inherit(dpv.CLSIDS.Device5200,dpv.device,{constructor:function(){dpv.device5200.superclass.constructor.apply(this,arguments);this.m_timeout=7E4;this.m_fwurl=document.fwbroker},IDevice:{getReplicateSystem:function(){return this._sys_repl||(this._sys_repl=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.repl,"IReplicate")))},getRepliSyncSystem:function(){return this._sys_replisync||(this._sys_replisync=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.replisync,"IRepliSync")))},
getZFSVolumesManager:function(){return this._mngr_zfsVols||(this._mngr_zfsVols=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.zfsVolsManager,"IZFSVolumesManager")))},getZFSDisksManager:function(){return this._mngr_zfsDisks||(this._mngr_zfsDisks=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.zfsDisksManager,"IZFSDisksManager")))},getZFSSnapshotsManager:function(){return this._mngr_zfsSnapshots||(this._mngr_zfsSnapshots=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.zfsSnapshotsManager,
"IZFSSnapshotsManager")))},getISCSIManager:function(){return this._mngr_iscsi||(this._mngr_iscsi=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.iscsimngr,"ISCSIManager")))},getUpsConfigManager:function(){return this._mngr_upsConfig||(this._mngr_upsConfig=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.upsConfigManager,"IUpsConfigManager")))},getFirmwareManager:function(){return this._mngr_fw||(this._mngr_fw=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.fwManager,"IFWManager")))},
getStatsManager:function(){return this._mngr_stats||(this._mngr_stats=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.statsManager,"IStatsManager")))},getVolumeScheduleManager:function(){return this._mngr_zfsVolSchedule||(this._mngr_zfsVolSchedule=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.zfsVolScheduleManager,"IZFSVolumeScheduleManager")))},getHFSnapshotsManager:function(){return this._mngr_hfSnapshots||(this._mngr_hfSnapshots=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.hfSnapshotsManager,
"IHFSnapshotsManager")))},getNetworkVLANManager:function(){return this._mngr_networkVLAN||(this._mngr_networkVLAN=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.networkVLANManager,"INetworkVLANManager")))},getNetworkProxyManager:function(){return this._mngr_netProxy||(this._mngr_netProxy=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.netProxyManager,"INetworkProxyManager")))},putSourceFWURL:function(a){this.m_fwurl=a;return S_OK},getSourceFWURL:function(){return this.m_fwurl}},
IXDomNode:{Update:function(a){return CComQIPtr(this,"IDevice").updateDeviceState(a)},Commit:function(a){return CComQIPtr(this,"IDevice").commitDeviceState(a)},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a?a[0]:undefined;switch(c){case "DeviceState":this.deviceState=CComQIPtr(new dpv.devState,"IXDomNode");if(this.deviceState.loadFromXml(a)==S_OK){b.removeChild(b.getChildByTrait("IDeviceState"));b.appendChild(this.deviceState);
return S_OK}break}}return E_FAIL}}});Njl.namespace("dpv");
dpv.zfsVolsManager=Njl.inherit(CComEventsObjectRoot("IZFSVolumesManagerEvents"),dpv.base,IZFSVolumesManager,IZFSVolumesManagerEvents,{constructor:function(){dpv.zfsVolsManager.superclass.constructor.apply(this,arguments);CComQIPtr(this,"INotifySink").Advise(this)},IZFSVolumesManager:{UpdateVolumes:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Volumes" resource-type="Volume_Collection"/>',Njl.id())),a)},getVolumes:function(){return this.volumes?CComQIPtr(this.volumes,
"IXDomNode").getChildren():E_FAIL},getActiveVolumes:function(){return this.activeVolumes?CComQIPtr(this.activeVolumes,"IXDomNode").getChildren():E_FAIL},getEjectableVolumes:function(){return this.ejectableVolumes?CComQIPtr(this.ejectableVolumes,"IXDomNode").getChildren():E_FAIL},getVolumeById:function(a){return this.volumes?this.volumes.hash[a]:null},AppendVolume:function(a,b){if(CComQIPtr(a,"IZFSVolume")){a=CComQIPtr(a,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:add id="{0}" resource-type="Volume" c-resource-id="Volumes" c-resource-type="Volume_Collection">{1}</xs:add>',
Njl.id(),a)),b)}return E_FAIL},RemoveVolume:function(a,b){var c=CComQIPtr(a,"IZFSVolume");if(c){var d=c.getVolumeId();if(c=CComQIPtr(this,"IZFSVolumesManager").getVolumeById(d)){b=Njl.isString(b)?new String(b):!b?{}:b;b.vid=d;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Volume" c-resource-id="Volumes" c-resource-type="Volume_Collection">                        {2}                        </xs:delete>',Njl.id(),d,CComQIPtr(a,"IXDomNode").getXml().toString())),
b)}}return E_FAIL},ReplaceVolumeDisk:function(a,b,c,d){a=CComQIPtr(a,"IZFSVolume");b=CComQIPtr(b,"IXDomNode");c=CComQIPtr(c,"IXDomNode");if(a&&b&&c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                          <xs:command_name>Replace</xs:command_name>                          <xs:args>                            <xs:arg>                              <Old_Device>                                {2}                              </Old_Device>                              <New_Device>                                {3}                              </New_Device>                            </xs:arg>                          </xs:args>                    </xs:command>',
Njl.id(),a.getVolumeName(),b.getXml().toString(),c.getXml().toString())),d);return E_FAIL},AttachVolumeDisk:function(a,b,c,d){a=CComQIPtr(a,"IZFSVolume");b=CComQIPtr(b,"IXDomNode");c=CComQIPtr(c,"IXDomNode");if(a&&b&&c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                          <xs:command_name>Attach</xs:command_name>                          <xs:args>                            <xs:arg>                              <Device>                                {2}                              </Device>                              <New_Device>                                {3}                              </New_Device>                            </xs:arg>                          </xs:args>                    </xs:command>',
Njl.id(),a.getVolumeName(),b.getXml().toString(),c.getXml().toString())),d);return E_FAIL},DetachVolumeDisk:function(a,b,c){a=CComQIPtr(a,"IZFSVolume");b=CComQIPtr(b,"IXDomNode");if(a&&b)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                        <xs:command_name>Detach</xs:command_name>                            <xs:args>                                <xs:arg>                                    <Device>{2}</Device>                                </xs:arg>                            </xs:args>                     </xs:command>',
Njl.id(),a.getVolumeName(),b.getXml().toString())),c);return E_FAIL},ExportVolume:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                            <xs:command_name>Export_Volume</xs:command_name>                         </xs:command>',Njl.id(),a.getVolumeName())),b);return E_FAIL},Export:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Export</xs:command_name>                    <xs:args>                        <xs:arg>                            <GUID>{2}</GUID>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),a.getVolumeId(),a.getGuid())),b);return E_FAIL},ImportVolume:function(a,b,c,d){if(CComQIPtr(volume,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                            <xs:command_name>Import_Volume</xs:command_name>                            <xs:args><xs:arg>                                <Force_Import>{3}</Force_Import>                                <New_Volume_Name>{2}</New_Volume_Name>                            </xs:arg></xs:args>                         </xs:command>',
Njl.id(),a,b,c?"true":"false")),d);return E_FAIL},RemoveVolumeDisk:function(a,b,c){if(a=CComQIPtr(a,"IZFSVolume")){var d="";if(Njl.isArray(b))Njl.each(b,function(e){e=CComQIPtr(e,"IXDomNode");d+=e.getXml().toString()});else if(b=CComQIPtr(b,"IXDomNode"))d+=b.getXml().toString();if(d!="")return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                        <xs:command_name>RemoveDisk_From_Volume</xs:command_name>                            <xs:args><xs:arg>                                <Device>{2}</Device>                            </xs:arg></xs:args>                     </xs:command>',
Njl.id(),a.getVolumeName(),d)),c)}return E_FAIL},ExpandCapacity:function(a,b,c,d){return this.ExpandVolume(a,b,c,"capacity",null,d)},ExpandRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,"raid_group",d,e)},ExpandNewRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,d?"concatenate":"stripe",null,e)},AddParity:function(a,b,c){a=CComQIPtr(a,"IZFSVolume");for(var d="",e,f=0;f<b.length;++f)if(e=CComQIPtr(b[f],"IXDomNode"))d+=e.getXml().toString();if(a&&d)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                        <xs:command_name>Add_Parity</xs:command_name>                        <xs:args>                            <xs:arg>                                {2}                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),a.getVolumeName(),d)),c);return E_FAIL},UpdateVolumeIOStat:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>IOStat</xs:command_name>                </xs:command>',Njl.id(),a.getVolumeId())),b);return E_FAIL},RemoveRaidGroup:function(a,b,c){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Remove_RAID_Group</xs:command_name>                    <xs:args>                        <xs:arg>                            <VDEV_ID>{2}</VDEV_ID>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),a.getVolumeId(),b)),c);return E_FAIL},UpdateVolume:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:get id="{0}" resource-id="{1}" resource-type="Volume"/>',Njl.id(),a.getVolumeId())),b);return E_FAIL},CommitVolume:function(a,b){if(a=CComQIPtr(a,"IXDomNode").getXml())return this.sendXml(dpv.xmlEnvelope(String.format('<xs:update id="{0}" resource-type="Volume" c-resource-id="Volumes" c-resource-type="Volume_Collection">{1}</xs:update>',Njl.id(),
a.toString())),b);return E_FAIL},StartVolumeScrub:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Scrub_Volume</xs:command_name>                    <xs:args>                        <xs:arg>                            <Stop_Scrub>false</Stop_Scrub>                        </xs:arg>                    </xs:args>                </xs:command>',Njl.id(),a.getVolumeId())),
b);return E_FAIL},StopVolumeScrub:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Scrub_Volume</xs:command_name>                    <xs:args>                        <xs:arg>                            <Stop_Scrub>true</Stop_Scrub>                        </xs:arg>                    </xs:args>                </xs:command>',Njl.id(),a.getVolumeId())),b);
return E_FAIL},DefragVolume:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Defrag_Volume</xs:command_name>                </xs:command>',Njl.id(),a.getVolumeId())),b);return E_FAIL},TrimVolume:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>SSD_Trim_Volume</xs:command_name>                </xs:command>',
Njl.id(),a.getVolumeId())),b);return E_FAIL},StartVolumeBalance:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Balance_Volume</xs:command_name>                </xs:command>',Njl.id(),a.getVolumeId())),b);return E_FAIL},StartVolumeDiskTest:function(a,b){if(a=CComQIPtr(a,"IZFSVolume"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Disk_Test</xs:command_name>                </xs:command>',
Njl.id(),a.getVolumeId())),b);return E_FAIL}},ExpandVolume:function(a,b,c,d,e,f){b=CComQIPtr(b,"IZFSVolume");var g="",h="";if(b&&c){var k="";Njl.each(c,function(j){k+=String.format('<Disk resource-id="{0}" />',j.getDiskId())});if(d=="raid_group")g=String.format("<xs:arg><Expansion_Target>{0}</Expansion_Target></xs:arg>",e);if(f)h=String.format('<xs:arg><Encryption enabled="{0}" mount="{1}" /></xs:arg>',f?"1":"0",f||"");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Expand</xs:command_name>                    <xs:args>                        <xs:arg>                            <Expansion_Type>{2}</Expansion_Type>                        </xs:arg>                        {3}                        <xs:arg>                            <Disks_List>{4}</Disks_List>                        </xs:arg>                        {5}                    </xs:args>                </xs:command>',
Njl.id(),b.getVolumeName(),d,g,k,h)),a)}return E_FAIL},IZFSVolumesManagerEvents:{OnDone:function(a,b,c){if(a==S_OK&&c.vid){a=CComQIPtr(this,"IZFSVolumesManager").getVolumeById(c.vid);this.volumes.removeChild(CComQIPtr(a,"IXDomNode"))}}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){var f;switch(e){case "xs:add-s":c&&this.Fire("OnVolumeAdd",[c]);break;case "xs:update-s":if(b&&b[0]||c){if(a=b&&b[0]?b[0].getAttributeText("resource-id"):c)if((f=CComQIPtr(this,"IZFSVolumesManager").getVolumeById(a))&&
b&&b[0])if(CComQIPtr(f,"IXDomNode").loadFromXml(b[0])!=S_OK)f=undefined;this.Fire("OnVolumeUpdate",[f])}break}return S_OK}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IZFSVolumesManager").UpdateVolumes(a)},getXml:function(){return this.x},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),"INotifySink").Advise(this,"Volume");return E_FAIL},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(this.xvolumes=a.selectNodes("Volume_Collection")){this.x=
a;this.xvolumes=a.selectNodes("Volume_Collection/Volume");b.removeChild(b.getChildByTrait("IZFSVolume"));this.volumes=CComQIPtr(new dpv.base,"IXDomNode");this.volumes.hash=[];this.activeVolumes=CComQIPtr(new dpv.base,"IXDomNode");this.ejectableVolumes=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(this.xvolumes,function(f){var g=CComQIPtr(new dpv.zfsVol(true),"IXDomNode");if(g.loadFromXml(f)==S_OK){var h=CComQIPtr(g,"IZFSVolume");h.getEjectable()?this.ejectableVolumes.appendChild(g):this.volumes.appendChild(g);
this.volumes.hash[h.getVolumeId()]=h;if(!h.getEjectable()&&h.getState()!="INACTIVE"){g=CComQIPtr(new dpv.zfsVol(true),"IXDomNode");g.loadFromXml(f);this.activeVolumes.appendChild(g)}}},this);return S_OK}if(a.getAttributeText("resource-type")=="Volume"){b=a.getNodeName();var c=this.volumes.hash[a.getAttributeText("resource-id")];if(b=="xs:command-s"){var d=a.selectSingleNode("Volume_IOStat");if(c&&d){var e=CComQIPtr(new dpv.zfsVolStat,"IXDomNode");e.loadFromXml(d)==S_OK&&c.putIOStat(CComQIPtr(e,"IZFSVolumeIOStat"))}}b==
"xs:get-s"&&c&&CComQIPtr(c,"IXDomNode").loadFromXml(a.selectSingleNode("Volume"));return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.zfsVol=Njl.inherit(CComEventsObjectRoot("IZFSVolumeEvents"),dpv.base,IZFSVolume,{constructor:function(a){dpv.zfsVol.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Volume resource-id="" resource-type="Volume">                    <Property_List>                        <Volume_Name></Volume_Name>                        <Quota>off</Quota>                        <CreateDefaultShare >0</CreateDefaultShare >                        <Encryption enabled="0" mount="" allow_overwrite_key="" email_encryption_key=""></Encryption>                    </Property_List>                    <vdev_list>                    </vdev_list>                </Volume>')).selectNodes("./*")[0])},IZFSVolume:{getVolumeId:function(){return this.x?
this.x.getAttributeText("resource-id"):E_FAIL},getEjectable:function(){return this.x?this.x.getAttributeText("ejectable")=="true":E_FAIL},getVolumeName:function(){return dpv.gp(this.xproptlist,"Volume_Name")},putVolumeName:function(a){return dpv.pp(this.xproptlist,"Volume_Name",a)},getAltRoot:function(){return dpv.gp(this.xproptlist,"AltRoot")},getDeDup:function(){return dpv.gp(this.xproptlist,"DeDup")},getAutoExpand:function(){return dpv.gp(this.xproptlist,"AutoExpand")},getDiscardable:function(){return dpv.gp(this.xproptlist,
"Discardable")},getXRaidExpanded:function(){return dpv.gp(this.xproptlist,"XRaidExpanded")},getMetadataAllocated:function(){return dpv.gp(this.xproptlist,"MetadataAllocatedKB")},getMetadataUsed:function(){return dpv.gp(this.xproptlist,"MetadataUsedKB")},getDataAllocated:function(){return dpv.gp(this.xproptlist,"DataAllocatedKB")},getDataUsed:function(){return dpv.gp(this.xproptlist,"DataUsedKB")},getUnallocated:function(){return dpv.gp(this.xproptlist,"UnallocatedKB")},getAutoReplace:function(){return dpv.gp(this.xproptlist,
"AutoReplace")},getCacheFile:function(){return dpv.gp(this.xproptlist,"CacheFile")},getDelegation:function(){return dpv.gp(this.xproptlist,"Delegation")},getListSnapshots:function(){return dpv.gp(this.xproptlist,"ListSnapshots")},getVersion:function(){return dpv.gp(this.xproptlist,"Version")},getAllocated:function(){return dpv.gp(this.xproptlist,"Allocated")},getCapacity:function(){return dpv.gp(this.xproptlist,"Capacity")},getFree:function(){return dpv.gp(this.xproptlist,"Free")},getAvailable:function(){return dpv.gp(this.xproptlist,
"Available")},getUsedBySnapshotKB:function(){return dpv.gp(this.xproptlist,"UsedBySnapShotKB")},getReserved:function(){var a=dpv.gp(this.xproptlist,"Reserved_Space");return a==E_FAIL?0:a},getGuid:function(){return dpv.gp(this.xproptlist,"GUID")},getState:function(){return dpv.gp(this.xproptlist,"Health")},getSize:function(){return dpv.gp(this.xproptlist,"Size")},getScrubProgress:function(){return dpv.gp(this.xproptlist,"ScrubProgress")},getResilverProgress:function(){return dpv.gp(this.xproptlist,
"ResilverProgress")},getBalanceProgress:function(){return dpv.gp(this.xproptlist,"BalanceProgress")},getBalanceType:function(){return dpv.gp(this.xproptlist,"BalanceType")},getRemoveRAIDGroupProgress:function(){return dpv.gp(this.xproptlist,"RemoveRAIDGroupProgress")},getDisktestProgress:function(){return dpv.gp(this.xproptlist,"DisktestProgress")},getResilverRemaining:function(){return dpv.gp(this.xproptlist,"ResilverTimeRemainingInMinutes")},getVolumeMode:function(){return dpv.gp(this.xproptlist,
"Volume_Mode")},putVolumeMode:function(a){return dpv.pp(this.xproptlist,"Volume_Mode",a)},getChecksum:function(){return dpv.gp(this.xproptlist,"Checksum")},putChecksum:function(a){return dpv.pp(this.xproptlist,"Checksum",a)},getQuota:function(){return dpv.gp(this.xproptlist,"Quota")},putQuota:function(a){return dpv.pp(this.xproptlist,"Quota",a)},getCreateDefaultShare:function(){return dpv.gp(this.xproptlist,"CreateDefaultShare")},putCreateDefaultShare:function(a){return dpv.pp(this.xproptlist,"CreateDefaultShare",
a)},getConcatenated:function(){return dpv.gp(this.xproptlist,"Concatenated")=="1"},putConcatenated:function(a){return dpv.pp(this.xproptlist,"Concatenated",a?"1":"0")},getEncryptionKeyMissing:function(){return this.xenc?this.xenc.getAttributeText("KeyMissing"):E_FAIL},getEncryptionEnabled:function(){return this.xenc?this.xenc.getAttributeText("enabled"):E_FAIL},putEncryptionEnabled:function(a){return this.xenc?this.xenc.setAttributeText(a?"1":"0","enabled"):E_FAIL},getEncryptionMount:function(){return this.xenc?
this.xenc.getAttributeText("mount"):E_FAIL},putEncryptionMount:function(a){return this.xenc?this.xenc.setAttributeText(a,"mount"):E_FAIL},getEncryptionEmail:function(){return this.xenc?this.xenc.getAttributeText("email_encryption_key"):E_FAIL},putEncryptionEmail:function(a){return this.xenc?this.xenc.setAttributeText(a,"email_encryption_key"):E_FAIL},getEncryptionAllowOverwriteKey:function(){return this.xenc?this.xenc.getAttributeText("allow_overwrite_key"):E_FAIL},putEncryptionAllowOverwriteKey:function(a){return this.xenc?
this.xenc.setAttributeText(a,"allow_overwrite_key"):E_FAIL},getImportInProgress:function(){return this.ximport?this.ximport.getAttributeText("active")=="1":false},getImportPath:function(){return this.ximport?this.ximport.getNodeText():""},getImportProcessId:function(){return this.ximport?this.ximport.getAttributeText("id"):E_FAIL},getSnapshotPruneThreshold:function(){return dpv.gp(this.xproptlist,"SnapshotPruneThreshold")},putSnapshotPruneThreshold:function(a){return dpv.pp(this.xproptlist,"SnapshotPruneThreshold",
a)},getTierType:function(){return dpv.gp(this.xproptlist,"TierType")},putTierType:function(a){return dpv.pp(this.xproptlist,"TierType",a)},getTierDataMigrationThreshold:function(){return dpv.gp(this.xproptlist,"TierDataMigrationThreshold")},putTierDataMigrationThreshold:function(a){return dpv.pp(this.xproptlist,"TierDataMigrationThreshold",a)},getVirtualDevices:function(){return this.vdevs?CComQIPtr(this.vdevs,"IXDomNode").getChildren():E_FAIL},getDisksCount:function(){var a=this.x.selectNodes("vdev_list/*/Disk");
return this.x?a?a.length:0:E_FAIL},getRAIDLevel:function(){return dpv.gp(this.xproptlist,"RAID_Level")},getReadOnly:function(){return dpv.gp(this.xproptlist,"Read_Only")},AppendVirtualDevices:function(a){if(this.x&&a){var b=this.x.selectSingleNode("vdev_list");if(b){if(Njl.isArray(a))Njl.each(a,function(d){if(CComQIPtr(d,"IZFSVirtualDevice")){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)}});else if(CComQIPtr(a,"IZFSVirtualDevice")){a=CComQIPtr(a,"IXDomNode");var c=
b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}}return E_FAIL},getIOStat:function(){return this.iostat?this.iostat:E_FAIL},putIOStat:function(a){this.iostat=a;return S_OK}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){if(a){var b=a.getNodeName();if(a.getAttributeText("resource-type")=="Volume"&&b=="xs:get-s"){a=a.selectSingleNode("Volume");b=a.getNodeName()}if(b=="Volume"){this.x=a;a=this.x.selectSingleNode("Property_List");
this.xproptlist=CComQIPtr(new dpv.xprop(a),"IXPropertyList");this.xenc=this.x.selectSingleNode("Property_List/Encryption");this.ximport=this.x.selectSingleNode("ImportDatasetFrom");this.xvolume=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");if(this.x.selectSingleNode("vdev_list")){a=CComQIPtr(this,"IXDomNode");a.removeAll();this.vdevs=CComQIPtr(new dpv.base,"IXDomNode");a.appendChild(this.vdevs);a=this.x.selectNodes("vdev_list/*");Njl.each(a,function(c){var d=CComQIPtr(new dpv.zfsvDev(true),"IXDomNode");
this.vdevs.appendChild(d);d.loadFromXml(c)!=S_OK&&this.vdevs.removeChild(d)},this)}return S_OK}}return E_FAIL}}});Njl.namespace("dpv");
dpv.zfsvDev=Njl.inherit(CComEventsObjectRoot("IZFSVirtualDeviceEvents"),dpv.base,IZFSVirtualDevice,{constructor:function(a){dpv.zfsvDev.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <RAID LEVEL="0" groups=""></RAID>')).selectNodes("./*")[0])},IZFSVirtualDevice:{getType:function(){return this.x?this.x.getNodeName():E_FAIL},putType:function(a){a!="RAID"&&CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                    <"+
a+"></"+a+">")).selectNodes("./*")[0])},getVirtualDeviceId:function(){return this.x?this.x.getAttributeText("ID"):E_FAIL},getLevel:function(){return this.x?this.x.getAttributeText("LEVEL"):E_FAIL},putLevel:function(a){return this.x?this.x.setAttributeText(a,"LEVEL"):E_FAIL},putGroupsNumber:function(a){return this.x?this.x.setAttributeText(a,"groups"):E_FAIL},getDisks:function(){return this.disks?CComQIPtr(this.disks,"IXDomNode").getChildren():E_FAIL},getMetadataAllocated:function(){return this.x?
this.x.getAttributeText("METADATA_ALLOCATED_KB"):E_FAIL},getDataAllocated:function(){return this.x?this.x.getAttributeText("DATA_ALLOCATED_KB"):E_FAIL},getUnallocated:function(){return this.x?this.x.getAttributeText("UNALLOCATED_KB"):E_FAIL},getTierType:function(){return this.x?this.x.getAttributeText("TYPE"):E_FAIL},AppendDisks:function(a){if(this.x&&a){var b=this.x;if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(CComQIPtr(a,
"IZFSDisk")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},RemoveDisk:function(a){if(this.x&&a)if(a=CComQIPtr(a,"IZFSDisk"))if(a=this.x.selectSingleNode("./Disk[@resource-id='"+a.getDiskId()+"']"))if(a.removeNode())return CComQIPtr(this,"IXDomNode").loadFromXml(this.x);return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;var b=(a=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),
"IDevice"))?a.getZFSDisksManager():null;a=CComQIPtr(this,"IXDomNode");a.removeAll();var c=this.x.selectNodes("./Disk");if(c&&c.length){this.disks=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(d){var e=b?b.getDiskById(d.getAttributeText("resource-id")):null;if(e)this.disks.appendChild(CComQIPtr(e,"IXDomNode").clone());else{e=CComQIPtr(new dpv.zfsdisk(true),"IXDomNode");e.loadFromXml(d)==S_OK&&this.disks.appendChild(e)}},this);a.appendChild(this.disks);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.zfsdisk=Njl.inherit(CComEventsObjectRoot("IZFSDiskEvents"),dpv.base,IZFSDisk,{constructor:function(){dpv.zfsdisk.superclass.constructor.apply(this,arguments)},IZFSDisk:{getDiskId:function(){return this.x?this.x.getAttributeText("resource-id"):E_FAIL},getPresent:function(){return this.x?this.x.getAttributeText("Present "):E_FAIL},getModel:function(){return this.x?this.x.getAttributeText("Model"):E_FAIL},getSerial:function(){return this.x?this.x.getAttributeText("Serial"):E_FAIL},getFirmwareVersion:function(){return this.x?
this.x.getAttributeText("FirmwareVersion"):E_FAIL},getRPM:function(){return this.x?this.x.getAttributeText("RPM"):E_FAIL},getSectors:function(){return this.x?this.x.getAttributeText("Sectors"):E_FAIL},getCapacity:function(){return this.x?this.x.getAttributeText("Capacity"):E_FAIL},getTemperature:function(){return this.x?this.x.getAttributeText("Temperature"):E_FAIL},getATAError:function(){return this.x?this.x.getAttributeText("ATAError"):E_FAIL},getSlotName:function(){return this.x?this.x.getAttributeText("SlotName"):
E_FAIL},getHardwareInterface:function(){return this.x?this.x.getAttributeText("HardwareInterface"):E_FAIL},getVolumeName:function(){return this.x?this.x.getAttributeText("PoolName"):E_FAIL},getVolumeType:function(){return this.x?this.x.getAttributeText("PoolType"):E_FAIL},getVolumeState:function(){return this.x?this.x.getAttributeText("PoolState"):E_FAIL},getVolumeHostId:function(){return this.x?this.x.getAttributeText("PoolHostId"):E_FAIL},getDiskState:function(){return this.x?this.x.getAttributeText("DiskState"):
E_FAIL},getChannelID:function(){return this.x?this.x.getAttributeText("Channel"):E_FAIL},getSignedByNetgear:function(){return this.x?this.x.getAttributeText("IsSignedByNetgear"):E_FAIL},getFormattable:function(){return this.x?this.x.getAttributeText("Formatable"):E_FAIL},getPartitions:function(){return this.x?this.x.getAttributeText("Partitions"):E_FAIL},getEnclosureId:function(){return this.x?this.x.getAttributeText("DiskEnclosureId"):E_FAIL},getIsGlobalSpare:function(){return this.x?this.x.getAttributeText("IsGlobalSpare"):
E_FAIL},getClass:function(){return this.x?this.x.getAttributeText("Class"):E_FAIL},getType:function(){return this.x?this.x.getAttributeText("Type"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.zdenc=Njl.inherit(CComObjectRoot,dpv.base,IZFSDiskEnclosure,{constructor:function(){dpv.zdenc.superclass.constructor.apply(this,arguments)},IZFSDiskEnclosure:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):E_FAIL},getName:function(){return this.x?this.x.getAttributeText("name"):E_FAIL},getPortName:function(){return this.x?this.x.getAttributeText("PortName"):E_FAIL},getDisks:function(){return this.disks?CComQIPtr(this.disks,"IXDomNode").getChildren():E_FAIL},getDiskById:function(a){return this.disks?
this.disks.hash[a]:null},getRowsCount:function(){return this.xCol?this.xCol.getAttributeText("rows"):E_FAIL},getColmsCount:function(){return this.xCol?this.xCol.getAttributeText("columns"):E_FAIL},getRackAlignment:function(){return this.xCol?this.xCol.getAttributeText("IsSlotHorizontal"):E_FAIL},getSafeModeStatus:function(){var a="1",b=this.disks.getChildren();if(b.length==0)a="0";else Njl.each(b,function(c){c=CComQIPtr(c,"IZFSDisk");if(+c.getPartitions()>0&&c.getFormattable()=="1")a="2"},this);return a}},
IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;var b=CComQIPtr(this,"IXDomNode");if(this.xCol=a.selectSingleNode("Disk_Collection")){a=this.xCol.selectNodes("Disk");b.removeAll();this.disks=CComQIPtr(new dpv.base,"IXDomNode");this.disks.hash=[];Njl.each(a,function(c){var d=CComQIPtr(new dpv.zfsdisk,"IXDomNode");this.disks.appendChild(d);if(d.loadFromXml(c)!=S_OK)this.disks.removeChild(d);else{c=CComQIPtr(d,"IZFSDisk");this.disks.hash[c.getDiskId()]=c;this.disks.appendChild(d)}},
this);b.appendChild(this.disks);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.zfsDisksManager=Njl.inherit(CComEventsObjectRoot("IZFSDisksManagerEvents"),dpv.base,IZFSDisksManager,{constructor:function(){dpv.zfsDisksManager.superclass.constructor.apply(this,arguments)},IZFSDisksManager:{updateDiskEnclosures:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DiskEnclosure" resource-type="DiskEnclosure_Collection"/>',Njl.id())),a)},getDiskEnclosures:function(){return this.dsenc?CComQIPtr(this.dsenc,"IXDomNode").getChildren():E_FAIL},
getDiskEnclosureById:function(a){return this.dsenc?this.dsenc.hash[a]:null},getDiskById:function(a){if(this.dsenc){i=0;for(l=this.dsenc.hash.length;i<l;++i){var b=this.dsenc.hash[this.dsenc.hash[i]].getDiskById(a);if(b)return b}}return null},getHeadEnclosure:function(){i=0;for(l=this.dsenc.hash.length;i<l;++i){var a=this.dsenc.hash[this.dsenc.hash[i]],b=a.getName();if(b&&b.indexOf("Jbod")==-1)return a}return null},MakeSpare:function(a,b){var c="";Njl.each(a,function(d){c+=String.format('<Disk resource-id="{0}" />',
d.getDiskId())});return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="Disk" resource-type="Disk_Collection">                    <xs:command_name>MakeGlobalSpare</xs:command_name>                    <xs:args>                        <xs:arg>                            <Disks>{1}</Disks>                        </xs:arg>                    </xs:args>                </xs:command>',Njl.id(),c)),b)},FormatDisks:function(a,b){var c="";Njl.each(a,function(d){c+=String.format('<Disk resource-id="{0}" />',
d.getDiskId())});return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="Disk" resource-type="Disk_Collection">                    <xs:command_name>Format</xs:command_name>                        <xs:args>                            <xs:arg>                                <Disks>{1}</Disks>                            </xs:arg>                        </xs:args>                    </xs:command>',Njl.id(),c)),b)}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){if(b&&
b[0]){if(a=c||b[0].getAttributeText("resource-id")){a=CComQIPtr(this,"IZFSDisksManager").getDiskById(a);switch(e){case "xs:delete-s":a&&CComQIPtr(a,"IXDomNode").loadFromXml(b[0])==S_OK&&this.Fire("OnDiskRemove",[a]);break;case "xs:update-s":a&&CComQIPtr(a,"IXDomNode").loadFromXml(b[0])==S_OK&&this.Fire("OnDiskUpdate",[a]);break;case "xs:add-s":if(a)CComQIPtr(a,"IXDomNode").loadFromXml(b[0])==S_OK&&this.Fire("OnDiskAdd",[a]);else{a=CComQIPtr(new dpv.zfsdisk,"IXDomNode");if(a.loadFromXml(b[0])==S_OK){b=
CComQIPtr(a,"IZFSDisk").getEnclosureId();if(b=CComQIPtr(this,"IZFSDisksManager").getDiskEnclosureById(b)){b=CComQIPtr(b,"IXDomNode");b.appendNode(a.getXml());b.loadFromXml(b.getXml());this.Fire("OnDiskAdd",[CComQIPtr(a,"IZFSDisk")])}}}break}}}else e=="xs:update-s"&&this.Fire("OnDiskUpdate");return S_OK}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IZFSDisksManager").updateDiskEnclosures(a)},getXml:function(){return this.x},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),
"INotifySink").Advise(this,"Disk");return E_FAIL},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");this.x=a.selectSingleNode("DiskEnclosure_Collection");if(a=this.x.selectNodes("DiskEnclosure")){this.dsenc=CComQIPtr(new dpv.base,"IXDomNode");this.dsenc.hash=[];b.removeAll();Njl.each(a,function(c){var d=CComQIPtr(new dpv.zdenc,"IXDomNode");this.dsenc.appendChild(d);if(d.loadFromXml(c)!=S_OK)this.dsenc.removeChild(d);else{c=CComQIPtr(d,"IZFSDiskEnclosure");this.dsenc.hash[c.getId()]=c;this.dsenc.hash.push(c.getId())}},
this);b.appendChild(this.dsenc);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.trans=Njl.inherit(dpv.CLSIDS.Transaction,CComEventsObjectRoot("ITransactionEvents"),ITransaction,IXDomNode,IProtocolEvents,{constructor:function(){dpv.trans.superclass.constructor.apply(this,arguments);this.__xid=Njl.id("t_");this.ignore=this.async=false;this.cmds=[];this.cmds.hash={};this.cmds.cursor=-1;this.cmds.append=function(a){this.hash[a.getXDomId()]=this.length;this.push(a)};this.cmds.getItemBy=function(a){return this[this.hash[a]]};this.cmds.removeItemBy=function(a){var b=this.hash[a];
if(b){this.splice(b,1);this.hash[a]=undefined;return true}return false};this.cmds.clear=function(){this.splice(0,this.length);this.hash={};this.cmds.cursor=-1};this.cmds.begin=function(){this.cursor=-1;return this[++this.cursor]};this.cmds.next=function(){return this[++this.cursor]};this.cmds.cur=function(){return this[this.cursor]};this.cmds.end=function(){this.cursor=this.length-2;return this[++this.cursor]}},IProtocolEvents:{OnNTFailed:function(){return E_NOTIMPL},OnNTReady:function(){return E_NOTIMPL},
OnNTPending:function(){return E_NOTIMPL},OnFailed:function(){return E_NOTIMPL},OnReady:function(){return E_NOTIMPL},OnPending:function(){return E_NOTIMPL},OnDone:function(){return E_NOTIMPL}},IXDomNode:{getXDomId:function(){return this.__xid},Update:function(){if(CComQIPtr(this,"ITransaction").getPendingState())return E_PENDING;if(this.cmds.begin())return this.cmds.cur().cmd.Update(this.cmds.cur().lparam);return E_FAIL},Commit:function(){if(CComQIPtr(this,"ITransaction").getPendingState())return E_PENDING;
if(this.cmds.begin())return this.cmds.cur().cmd.Commit(this.cmds.cur().lparam);return E_FAIL}},ITransaction:{putAsyncMode:function(a){this.async=a;return S_OK},putIgnoreFails:function(a){this.ignore=a;return S_OK},getPendingState:function(){if(this.cmds.cur()){var a=CComQIPtr(this.cmds.cur(),"IProtocol");if(a)return a.getPendingState()}return false},Append:function(a,b){if(a=CComQIPtr(a,"IXDomNode")){CComQIPtr(a,"INotifySink").Advise(this);this.cmds.append({cmd:a,lparam:b});return S_OK}return E_FAIL},
Abort:function(){if(this.cmds.cur()){var a=CComQIPtr(this.cmds.cur(),"IProtocol");if(a)return a.Abort()}return E_FAIL},Remove:function(a){if(a=CComQIPtr(a,"IXDomNode"))if(this.cmds.removeItemBy(a.getXDomId())){CComQIPtr(a,"INotifySink").Unadvise(this);return S_OK}return E_FAIL},RemoveAll:function(){CComQIPtr(this,"ITransaction").Abort();Njl.each(this.cmds,function(a){CComQIPtr(a,"INotifySink").Unadvise(this)},this);this.cmds.clear();return S_OK},Update:function(a){return CComQIPtr(this,"IXDomNode").Update(a)},
Commit:function(a){return CComQIPtr(this,"IXDomNode").Commit(a)}}});Njl.namespace("dpv");
dpv.zfsVolStat=Njl.inherit(CComEventsObjectRoot("IZFSVolumeIOStatEvents"),dpv.base,IZFSVolumeIOStat,{constructor:function(){dpv.zfsVolStat.superclass.constructor.apply(this,arguments)},IZFSVolumeIOStat:{getReadCount:function(){return dpv.gp(this.xoperations,"Read")},getWriteCount:function(){return dpv.gp(this.xoperations,"Write")},getBandwidthReadCount:function(){return dpv.gp(this.xbandwidth,"Read")},getBandwidthWriteCount:function(){return dpv.gp(this.xbandwidth,"Write")}},IXDomNode:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;a=this.x.selectSingleNode("Operations");this.xoperations=CComQIPtr(new dpv.xprop(a),"IXPropertyList");a=this.x.selectSingleNode("Bandwidth");this.xbandwidth=CComQIPtr(new dpv.xprop(a),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.zfssnapshot=Njl.inherit(CComEventsObjectRoot("IZFSSnapshotEvents"),dpv.base,IZFSSnapshot,{constructor:function(){dpv.zfssnapshot.superclass.constructor.apply(this,arguments)},IZFSSnapshot:{getName:function(){return dpv.gp(this.xsnapshot,"Snapshot_Name")},getVolumeName:function(){return dpv.gp(this.xsnapshot,"Volume_Name")},getCreationDate:function(){return dpv.gp(this.xsnapshot,"Snapshot_CreatedOn")},getShareName:function(){return dpv.gp(this.xsnapshot,"Share_Name")},getUsedSpace:function(){return dpv.gp(this.xsnapshot,
"Snapshot_Used_Space")},getType:function(){return dpv.gp(this.xsnapshot,"Snapshot_Type")},getCloneShareCount:function(){if(this.x){var a=this.x.selectNodes("./Clone");return a?a.length:0}return 0},getPath:function(){return dpv.gp(this.xsnapshot,"Snapshot_Path")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsnapshot=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.zfsSnapshotsManager=Njl.inherit(CComEventsObjectRoot("IZFSSnapshotsManagerEvents"),dpv.base,IZFSSnapshotsManager,{constructor:function(){dpv.zfsSnapshotsManager.superclass.constructor.apply(this,arguments)},IZFSSnapshotsManager:{updateSnapshotsByDateRange:function(a,b,c,d,e,f){a=!a?0:a;d=Njl.isString(d)?d=="*"?"":"":d;e=Njl.isString(e)?e=="*"?"":"":e;b=Njl.isString(b)?b=="*"?"":b:b.getVolumeName();c=Njl.isString(c)?c=="*"?"":c:c.getName();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-id="SnapshotsByDateRange" resource-type="Snapshot">                    <xs:criterion>                        <xs:and>                            <xs:equal property="Volume_Name" value="{1}"/>                            <xs:equal property="Share_Name" value="{2}"/>                            <xs:equal property="Snapshot_Type" value="{3}"/>                            <xs:greater-equal property="Created_From" value="{4}"/>                            <xs:lesser-equal property="Created_To" value="{5}"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
Njl.id(),b,c,a,d,e)),f)},updateSnapshotsCountByDateRange:function(a,b,c,d,e,f){a=!a?0:a;d=Njl.isString(d)?d=="*"?"":"":d;e=Njl.isString(e)?e=="*"?"":"":e;b=Njl.isString(b)?b=="*"?"":b:b.getVolumeName();c=Njl.isString(c)?c=="*"?"":c:c.getName();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-id="SnapshotCount" resource-type="Snapshot">                    <xs:criterion>                        <xs:and>                            <xs:equal property="Volume_Name" value="{1}"/>                            <xs:equal property="Share_Name" value="{2}"/>                            <xs:equal property="Snapshot_Type" value="{3}"/>                            <xs:greater-equal property="Created_From" value="{4}"/>                            <xs:lesser-equal property="Created_To" value="{5}"/>                        </xs:and>                    </xs:criterion>                    <xs:modifier>                        <xs:count/>                    </xs:modifier>                </xs:query>',
Njl.id(),b,c,a,d,e)),f)},updateSnapshotSummary:function(a,b,c){a=Njl.isString(a)?a:a.getVolumeName();b=Njl.isString(b)?b:b.getName();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="SnapshotSummary" resource-type="Snapshot">                    <xs:command_name>Snapshot_Summary</xs:command_name>                    <xs:args>                        <xs:arg>                            <Snapshot>                            <Volume_Name>{1}</Volume_Name>                            <Share_Name>{2}</Share_Name>                            </Snapshot>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),a,b)),c)},CreateSnapshot:function(a,b,c,d){a=Njl.isString(a)?a:a.getVolumeName();b=Njl.isString(b)?b:b.getName();if(a&&b&&c)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="Snapshot" resource-type="Snapshot">                        <Snapshot>                            <Volume_Name>{1}</Volume_Name>                            <Share_Name>{2}</Share_Name>                            <Snapshot_Name>{3}</Snapshot_Name>                            <Snapshot_Type>2</Snapshot_Type>                        </Snapshot>                    </xs:add>',
Njl.id(),a,b,c)),d);return E_INVALIDARG},RollbackSnapshot:function(a,b,c,d,e,f){zv=Njl.isString(b)?b:b.getVolumeName();c=Njl.isString(c)?c:c.getName();sn=Njl.isString(d)?d:d.getName();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="RollbackSnapshot" resource-type="Snapshot">                    <xs:command_name>Rollback_Snapshot</xs:command_name>                      <xs:args>                        <xs:arg>                          <Snapshot>                            <Volume_Name>{1}</Volume_Name>                            <Share_Name>{2}</Share_Name>                            <Snapshot_Name>{3}</Snapshot_Name>                            <Snapshot_Type>{4}</Snapshot_Type>                          </Snapshot>                          <Recursive_Delete>{5}</Recursive_Delete>                        </xs:arg>                      </xs:args>                 </xs:command>',
Njl.id(),zv,c,sn,a,e)),f,undefined,undefined,undefined,3E5)},DeleteSnapshot:function(a,b,c,d,e,f){zv=Njl.isString(b)?b:b.getVolumeName();c=Njl.isString(c)?c:c.getName();sn=Njl.isString(d)?d:d.getName();return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:delete id="{0}" resource-id="DeleteSnapshot" resource-type="Snapshot">                      <Snapshot>                        <Volume_Name>{1}</Volume_Name>                        <Share_Name>{2}</Share_Name>                        <Snapshot_Name>{3}</Snapshot_Name>                        <Snapshot_Type>{4}</Snapshot_Type>                      </Snapshot>                      <Recursive_Delete>{5}</Recursive_Delete>                  </xs:delete>',
Njl.id(),zv,c,sn,a,e)),f,undefined,undefined,undefined,3E5)},CloneSnapshot:function(a,b,c,d,e,f,g){zv=Njl.isString(b)?b:b.getVolumeName();c=Njl.isString(c)?c:c.getName();sn=Njl.isString(d)?d:d.getName();nv=Njl.isString(e)?e:e.getVolumeName();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="CloneSnapshot" resource-type="Snapshot">                  <xs:command_name>Clone_Snapshot</xs:command_name>                  <xs:args>                    <xs:arg>                      <Snapshot>                        <Volume_Name>{1}</Volume_Name>                        <Share_Name>{2}</Share_Name>                        <Snapshot_Name>{3}</Snapshot_Name>                        <Snapshot_Type>{4}</Snapshot_Type>                      </Snapshot>                      <New_Share>                        <Volume_Name>{5}</Volume_Name>                        <Share_Name>{6}</Share_Name>                      </New_Share>                    </xs:arg>                  </xs:args>                </xs:command>',
Njl.id(),zv,c,sn,a,nv,f)),g,undefined,undefined,undefined,3E5)},PromoteSnapshot:function(a,b,c,d,e,f){zv=Njl.isString(b)?b:b.getVolumeName();c=Njl.isString(c)?c:c.getName();d=Njl.isString(d)?d:d.getName();return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:command id="{0}" resource-id="PromoteSnapshot" resource-type="Snapshot">                <xs:command_name>Promote_Snapshot</xs:command_name>                <xs:args>                <xs:arg>                    <Snapshot>                        <Volume_Name>{1}</Volume_Name>                        <Original_Share_Name>{2}</Original_Share_Name>                        <New_Share_Name>{3}</New_Share_Name>                        <Snapshot_Name>{4}</Snapshot_Name>                        <Snapshot_Type>{5}</Snapshot_Type>                    </Snapshot>                </xs:arg>                </xs:args>            </xs:command>',
Njl.id(),zv,c,d,e,a)),f,undefined,undefined,undefined,3E5)},getSnapshots:function(){return this.snapshots?CComQIPtr(this.snapshots,"IXDomNode").getChildren():E_FAIL},getSnapshotByName:function(a){return this.snapshots?this.snapshots.hash[a]:null},getSnapshotCountByType:function(a){return this.cntSN?this.cntSN[a]:E_FAIL},getSnapshotsDateRangeByType:function(a){return this.cntSN?this.cntSN[a]:E_FAIL},getSNSTotalCount:function(){return this.snsumm?this.snsumm.total:E_FAIL},getSNSManualTotalCount:function(){return this.snsumm?
this.snsumm.motal:E_FAIL},getSNSContinuousTotalCount:function(){return this.snsumm?this.snsumm.cotal:E_FAIL},getSNSFirstSnapshotTime:function(){return this.snsumm?this.snsumm.fdate:E_FAIL},getSNSLastSnapshotTime:function(){return this.snsumm?this.snsumm.ldate:E_FAIL}},IXDomNode:{Update:function(a){return CComQIPtr(this,"IZFSSnapshotsManager").updateSnapshots(a)},getXml:function(){return this.x},loadFromXml:function(a){rtype=a.getAttributeText("resource-id");switch(rtype){case "CloneSnapshot":case "PromoteSnapshot":case "DeleteSnapshot":case "RollbackSnapshot":return S_OK;
case "SnapshotCount":var b=a.selectSingleNode("Snapshot_Count");if(b){b.getAttributeText("Snapshot_Type");this.cntSN={};a=b.getAttributeText("Count");this.cntSN[0]={};this.cntSN[0].count=a==E_FAIL?0:a;a=b.getAttributeText("Snapshot_Continuous_Count");var c=b.getAttributeText("Continuous_FirstSnapshotCreatedOn"),d=b.getAttributeText("Continuous_LastSnapshotCreatedOn");this.cntSN[1]={};this.cntSN[1].count=a==E_FAIL?0:a;this.cntSN[1].sdate=c==E_FAIL?0:c*1E3;this.cntSN[1].edate=d==E_FAIL?0:d*1E3;a=b.getAttributeText("Snapshot_Manual_Count");
c=b.getAttributeText("Manual_FirstSnapshotCreatedOn");d=b.getAttributeText("Manual_LastSnapshotCreatedOn");this.cntSN[2]={};this.cntSN[2].count=a==E_FAIL?0:a;this.cntSN[2].sdate=c==E_FAIL?0:c*1E3;this.cntSN[2].edate=d==E_FAIL?0:d*1E3;a=b.getAttributeText("Snapshot_Replicate_Count");c=b.getAttributeText("Replicate_FirstSnapshotCreatedOn");d=b.getAttributeText("Replicate_LastSnapshotCreatedOn");this.cntSN[3]={};this.cntSN[3].count=a==E_FAIL?0:a;this.cntSN[3].sdate=c==E_FAIL?0:c*1E3;this.cntSN[3].edate=
d==E_FAIL?0:d*1E3;a=b.getAttributeText("Snapshot_Readyrecover_Count");c=b.getAttributeText("Readyrecover_FirstSnapshotCreatedOn");d=b.getAttributeText("Readyrecover_LastSnapshotCreatedOn");this.cntSN[4]={};this.cntSN[4].count=a==E_FAIL?0:a;this.cntSN[4].sdate=c==E_FAIL?0:c*1E3;this.cntSN[4].edate=d==E_FAIL?0:d*1E3;return S_OK}break;case "SnapshotSummary":if(b=a.selectSingleNode("Snapshot_Summary")){this.snsumm={vname:dpv.xprop.prototype.getPropertyAbsolute(b,"Volume_Name"),sname:dpv.xprop.prototype.getPropertyAbsolute(b,
"Share_Name"),total:dpv.xprop.prototype.getPropertyAbsolute(b,"Snapshot_Total_Count"),motal:dpv.xprop.prototype.getPropertyAbsolute(b,"Snapshot_Manual_Count"),cotal:dpv.xprop.prototype.getPropertyAbsolute(b,"Snapshot_Continuous_Count"),fdate:dpv.xprop.prototype.getPropertyAbsolute(b,"First_Snapshot_Created_On"),ldate:dpv.xprop.prototype.getPropertyAbsolute(b,"Latest_Snapshot_Created_On")};return S_OK}break;case "SnapshotsByDateRange":b=CComQIPtr(this,"IXDomNode");if(this.xCol=a.selectNodes("Snapshot_Collection")){this.x=
a;this.xCol=this.xCol[0];a=a.selectNodes("Snapshot_Collection/Snapshot");b.removeAll();this.snapshots=CComQIPtr(new dpv.base,"IXDomNode");this.snapshots.hash=[];Njl.each(a,function(e){var f=CComQIPtr(new dpv.zfssnapshot,"IXDomNode");if(f.loadFromXml(e)==S_OK){e=CComQIPtr(f,"IZFSSnapshot");this.snapshots.hash[e.getName()]=e;this.snapshots.appendChild(f)}},this);b.appendChild(this.snapshots);return S_OK}break}return E_FAIL}}});Njl.namespace("dpv");
dpv.iscsimngr=Njl.inherit(CComEventsObjectRoot("ISCSIManagerEvents"),dpv.base,ISCSIManager,{constructor:function(){dpv.iscsimngr.superclass.constructor.apply(this,arguments)},ISCSIManager:{updateLUNGroups:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="iscsi_lun_group_collection"/>',Njl.id())),a)},getLUNGroups:function(){return this.xlgs?this.xlgs.getChildren():E_FAIL},AppendLUNGroup:function(a,b){if(CComQIPtr(a,"ILUNGroup")){a=CComQIPtr(a,"IXDomNode");
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="iscsi_lun_group">                       {1}                    </xs:add>',Njl.id(),a.getXml().toString())),b)}return E_FAIL},CommitLUNGroup:function(a,b){if(CComQIPtr(a,"ILUNGroup")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="iscsi_lun_group">                       {1}                    </xs:set>',Njl.id(),a.getXml().toString())),b)}return E_FAIL},
RemoveLUNGroup:function(a,b){if(CComQIPtr(a,"ILUNGroup")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-type="iscsi_lun_group">                       {1}                    </xs:delete>',Njl.id(),a.getXml().toString())),b)}return E_FAIL},updateHosts:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="iscsi_host_collection"/>',Njl.id())),a)},getHosts:function(){return this.xhs?this.xhs.getChildren():
E_FAIL},AppendHost:function(a,b){if(CComQIPtr(a,"ISCSIHost")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="iscsi_host">                       {1}                    </xs:add>',Njl.id(),a.getXml().toString())),b)}return E_FAIL},CommitHost:function(a,b){if(CComQIPtr(a,"ISCSIHost")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="iscsi_host">                       {1}                    </xs:set>',
Njl.id(),a.getXml().toString())),b)}return E_FAIL},RemoveHost:function(a,b){if(CComQIPtr(a,"ISCSIHost")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-type="iscsi_host">                       {1}                    </xs:delete>',Njl.id(),a.getXml().toString())),b)}return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.selectSingleNode("LUN_Group_Collection")){this.x=a;this.xlgs&&
b.removeChild(this.xlgs);this.xlgs=CComQIPtr(new dpv.base,"IXDomNode");a=a.selectNodes("LUN_Group_Collection/LUN_Group");Njl.each(a,function(c){var d=CComQIPtr(new dpv.lungroup(true),"IXDomNode");d.loadFromXml(c)==S_OK&&this.xlgs.appendChild(d)},this);b.appendChild(this.xlgs);return S_OK}if(a.selectSingleNode("Host_Collection")){this.xh=a;this.xhs&&b.removeChild(this.xhs);this.xhs=CComQIPtr(new dpv.base,"IXDomNode");a=a.selectNodes("Host_Collection/Host");Njl.each(a,function(c){var d=CComQIPtr(new dpv.scsihost(true),
"IXDomNode");d.loadFromXml(c)==S_OK&&this.xhs.appendChild(d)},this);b.appendChild(this.xhs);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.nic=Njl.inherit(CComEventsObjectRoot,dpv.base,INetworkNIC,{constructor:function(){dpv.nic.superclass.constructor.apply(this,arguments)},INetworkNIC:{getName:function(){return dpv.gp(this.xnic,"link")},putName:function(a){return dpv.pp(this.xnic,"link",a)},getMTU:function(){return dpv.gp(this.xnic,"mtu")},putMTU:function(a){return dpv.pp(this.xnic,"mtu",a)},getState:function(){return dpv.gp(this.xnic,"state")},getBridge:function(){return dpv.gp(this.xnic,"bridge")},getIPAddress:function(){return dpv.gp(this.xnic,
"ip")},putIPAddress:function(a){return dpv.pp(this.xnic,"ip",a)},getDomainName:function(){return this.domainName},putDomainName:function(a){this.domainCollection.removeNode("DOMAIN");var b="";a=a.split(" ");Njl.each(a,function(c){if(c!="")b+="<Domain_Name>"+c+"</Domain_Name>"},this);b!=""&&this.domainCollection.appendNode(new Njl.Xml.document("<DOMAIN>"+b+"</DOMAIN>"))},getIPv6Address:function(){return dpv.gp(this.xnic,"ipv6")},putIPv6Address:function(a){return dpv.pp(this.xnic,"ipv6",a)},getIPv6AddressLocal:function(){return dpv.gp(this.xnic,
"ipv6_link")},getMACAddress:function(){return dpv.gp(this.xnic,"mac")},getSpeed:function(){return dpv.gp(this.xnic,"speed")},putSpeed:function(a){return dpv.pp(this.xnic,"speed",a)},getDuplex:function(){return dpv.gp(this.xnic,"duplex")},putDuplex:function(a){return dpv.pp(this.xnic,"duplex",a)},getGateway:function(){return dpv.gp(this.xnic,"gateway")},getMACAddressType:function(){return dpv.gp(this.xnic,"macaddrtype")},getVNICS:function(){return this.xnics?this.xnics.getChildren():E_FAIL},getPath:function(){return dpv.gp(this.xnic,
"path")},putPath:function(a){return dpv.pp(this.xnic,"path",a)},getOver:function(){return dpv.gp(this.xnic,"over")},putOver:function(a){return dpv.pp(this.xnic,"over",a)},getVID:function(){return dpv.gp(this.xnic,"vid")},putVID:function(a){return dpv.pp(this.xnic,"vid",a)},getIPType:function(){return dpv.gp(this.xnic,"iptype")},putIPType:function(a){return dpv.pp(this.xnic,"iptype",a)},getIPv6Type:function(){return dpv.gp(this.xnic,"ipv6type")},putIPv6Type:function(a){return dpv.pp(this.xnic,"ipv6type",
a)},getRouter:function(){return dpv.gp(this.xnic,"router")},putRouter:function(a){return dpv.pp(this.xnic,"router",a)},getRouterv6:function(){return dpv.gp(this.xnic,"router6")},putRouterv6:function(a){return dpv.pp(this.xnic,"router6",a)},getSubnet:function(){return dpv.gp(this.xnic,"subnet")},putSubnet:function(a){return dpv.pp(this.xnic,"subnet",a)},getPrefixLength:function(){return dpv.gp(this.xnic,"prefixlength")},putPrefixLength:function(a){return dpv.pp(this.xnic,"prefixlength",a)},getPrefixLengthLocal:function(){return dpv.gp(this.xnic,
"prefixlength_link")},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():E_FAIL},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("dnscollection");b.removeNode("DNS");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(CComQIPtr(a,"INetworkDNS")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},
getRoutes:function(){return this.xroutes?this.xroutes.getChildren():E_FAIL},putRoutes:function(a){if(this.x&&a){var b=this.x.selectSingleNode("routecollection");b.removeNode("Route");Njl.each(a,function(c){c=CComQIPtr(c,"IXDomNode");var d=b.appendNode(c.getXml());d&&c.loadFromXml(d)});return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xnic=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");var b=CComQIPtr(this,
"IXDomNode"),c=a.selectNodes("vnic_collection/vnic");if(c){this.xn=a;b.removeChild(b.getChildByTrait("INetworkVNIC"));this.xnics=CComQIPtr(new dpv.vnic(true),"IXDomNode");Njl.each(c,function(e){var f=CComQIPtr(new dpv.vnic(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xnics.appendChild(f)},this);b.appendChild(this.xnics)}if(c=a.selectSingleNode("dnscollection")){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(e){var f=
CComQIPtr(new dpv.dns(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xdns.appendChild(f)},this);b.appendChild(this.xdns)}if(c=a.selectSingleNode("routecollection")){c=a.selectNodes("routecollection/Route");this.xroutes&&b.removeChild(this.xroutes);this.xroutes=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(e){var f=CComQIPtr(new dpv.nroute(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xroutes.appendChild(f)},this);b.appendChild(this.xroutes)}this.domainCollection=a.selectSingleNode("domaincollection");
this.domainName="";a=a.selectNodes("domaincollection/DOMAIN/Domain_Name");var d=[];Njl.each(a,function(e){d.push(e.getNodeText())},this);if(d.length>0)this.domainName=d.join(" ");return S_OK}}});Njl.namespace("dpv");
dpv.vnic=Njl.inherit(CComEventsObjectRoot,dpv.base,INetworkVNIC,{constructor:function(a){dpv.vnic.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("<vnic>                  <link></link>                  <over></over>                  <speed></speed>                  <macaddrtype></macaddrtype>                  <vid>0</vid>                  <iptype>ipv4dhcp</iptype>                  <priority>0</priority>                  <prefixlength>0</prefixlength>                  <router></router>                  <mtu>1500</mtu>                  <state>up</state>                  <iptype>ipv4dhcp</iptype>                  <ip></ip>                  <ipv6></ipv6>                  <ipv6global></ipv6global>                  <prefixglobal></prefixglobal>                  <mac></mac>                  <subnet></subnet>                  <dnscollection/>               </vnic>")).selectNodes("./*")[0])},INetworkVNIC:{getName:function(){return dpv.gp(this.xvnic,
"link")},putName:function(a){return dpv.pp(this.xvnic,"link",a)},getState:function(){return dpv.gp(this.xvnic,"state")},getMTU:function(){return dpv.gp(this.xvnic,"mtu")},putMTU:function(a){return dpv.pp(this.xvnic,"mtu",a)},getOver:function(){return dpv.gp(this.xvnic,"over")},putOver:function(a){return dpv.pp(this.xvnic,"over",a)},getIPAddress:function(){return dpv.gp(this.xvnic,"ip")},putIPAddress:function(a){return dpv.pp(this.xvnic,"ip",a)},getIPv6Address:function(){return dpv.gp(this.xvnic,"ipv6")},
putIPv6Address:function(a){return dpv.pp(this.xvnic,"ipv6",a)},getIPv6GlobalAddress:function(){return dpv.gp(this.xvnic,"ipv6global")},putIPv6GlobalAddress:function(a){return dpv.pp(this.xvnic,"ipv6global",a)},getPrefixGlobal:function(){return dpv.gp(this.xvnic,"prefixglobal")},putPrefixGlobal:function(a){return dpv.pp(this.xvnic,"prefixglobal",a)},getMACAddress:function(){return dpv.gp(this.xvnic,"mac")},getSpeed:function(){return dpv.gp(this.xvnic,"speed")},putSpeed:function(a){return dpv.pp(this.xvnic,
"speed",a)},getMACAddressType:function(){return dpv.gp(this.xvnic,"macaddrtype")},getVID:function(){return dpv.gp(this.xvnic,"vid")},putVID:function(a){return dpv.pp(this.xvnic,"vid",a)},getIPType:function(){return dpv.gp(this.xvnic,"iptype")},putIPType:function(a){return dpv.pp(this.xvnic,"iptype",a)},getGateway:function(){return dpv.gp(this.xvnic,"router")},putGateway:function(a){return dpv.pp(this.xvnic,"router",a)},getSubnet:function(){return dpv.gp(this.xvnic,"subnet")},putSubnet:function(a){return dpv.pp(this.xvnic,
"subnet",a)},getPrefixLength:function(){return dpv.gp(this.xvnic,"prefixlength")},putPrefixLength:function(a){return dpv.pp(this.xvnic,"prefixlength",a)},getPrimaryRouter:function(){return dpv.gp(this.xvnic,"primaryrouter")=="true"},putPrimaryRouter:function(a){return dpv.pp(this.xvnic,"primaryrouter",a)},getEffectiveRouter:function(){return dpv.gp(this.xvnic,"effectiverouter")=="true"},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():E_FAIL},putDNSRecords:function(a){if(this.x&&
a){var b=this.x.selectSingleNode("dnscollection");b.removeNode("DNS");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(CComQIPtr(a,"INetworkDNS")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");this.x=a;this.xvnic=CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList");var c=a.selectSingleNode("dnscollection");if(c){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(d){var e=CComQIPtr(new dpv.dns(true),"IXDomNode");e.loadFromXml(d)==S_OK&&this.xdns.appendChild(e)},this);b.appendChild(this.xdns)}return S_OK}}});Njl.namespace("dpv");
dpv.bond=Njl.inherit(CComEventsObjectRoot,dpv.base,INetworkBond,{constructor:function(){dpv.bond.superclass.constructor.apply(this,arguments)},INetworkBond:{getName:function(){return dpv.gp(this.xbond,"link")},putName:function(a){return dpv.pp(this.xbond,"link",a)},getMode:function(){return dpv.gp(this.xbond,"mode")},putMode:function(a){return dpv.pp(this.xbond,"mode",a)},getPolicy:function(){return dpv.gp(this.xbond,"policy")},putPolicy:function(a){return dpv.pp(this.xbond,"policy",a)},getAddrPolicy:function(){return dpv.gp(this.xbond,
"addrpolicy")},getLACPActivity:function(){return dpv.gp(this.xbond,"lacpactivity")},putLACPActivity:function(a){return dpv.pp(this.xbond,"lacpactivity",a)},getLACPTimer:function(){return dpv.gp(this.xbond,"lacptimer")},putLACPTimer:function(a){return dpv.pp(this.xbond,"lacptimer",a)},getFlags:function(){return dpv.gp(this.xbond,"flags")},getMTU:function(){return dpv.gp(this.xbond,"mtu")},putMTU:function(a){return dpv.pp(this.xbond,"mtu",a)},getState:function(){return dpv.gp(this.xbond,"state")},getOver:function(){return dpv.gp(this.xbond,
"over")},getIPAddress:function(){return dpv.gp(this.xbond,"ip")},putIPAddress:function(a){return dpv.pp(this.xbond,"ip",a)},getDomainName:function(){return this.domainName},putDomainName:function(a){this.domainCollection.removeNode("DOMAIN");var b="";a=a.split(" ");Njl.each(a,function(c){if(c!="")b+="<Domain_Name>"+c+"</Domain_Name>"},this);b!=""&&this.domainCollection.appendNode(new Njl.Xml.document("<DOMAIN>"+b+"</DOMAIN>"))},getIPv6Address:function(){return dpv.gp(this.xbond,"ipv6")},putIPv6Address:function(a){return dpv.pp(this.xbond,
"ipv6",a)},getIPv6AddressLocal:function(){return dpv.gp(this.xbond,"ipv6_link")},getMACAddress:function(){return dpv.gp(this.xbond,"mac")},getVNICS:function(){return this.xvnics?this.xvnics.getChildren():E_FAIL},getIPType:function(){return dpv.gp(this.xbond,"iptype")},putIPType:function(a){return dpv.pp(this.xbond,"iptype",a)},getIPv6Type:function(){return dpv.gp(this.xbond,"ipv6type")},putIPv6Type:function(a){return dpv.pp(this.xbond,"ipv6type",a)},getRouter:function(){return dpv.gp(this.xbond,"router")},
putRouter:function(a){return dpv.pp(this.xbond,"router",a)},getRouterv6:function(){return dpv.gp(this.xbond,"router6")},putRouterv6:function(a){return dpv.pp(this.xbond,"router6",a)},getSubnet:function(){return dpv.gp(this.xbond,"subnet")},putSubnet:function(a){return dpv.pp(this.xbond,"subnet",a)},getPrefixLength:function(){return dpv.gp(this.xbond,"prefixlength")},putPrefixLength:function(a){return dpv.pp(this.xbond,"prefixlength",a)},getPrefixLengthLocal:function(){return dpv.gp(this.xbond,"prefixlength_link")},
getVID:function(){return dpv.gp(this.xbond,"vid")},putVID:function(a){return dpv.pp(this.xbond,"vid",a)},getJumboFrames:function(){return dpv.gp(this.xbond,"jumbo")},putJumboFrames:function(a){return dpv.pp(this.xbond,"jumbo",a)},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():E_FAIL},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("dnscollection");b.removeNode("DNS");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());
e&&d.loadFromXml(e)});else if(CComQIPtr(a,"INetworkDNS")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},getBackupPrimary:function(){return dpv.gp(this.xbond,"primary")},putBackupPrimary:function(a){return dpv.pp(this.xbond,"primary",a)},getRoutes:function(){return this.xroutes?this.xroutes.getChildren():E_FAIL},putRoutes:function(a){if(this.x&&a){var b=this.x.selectSingleNode("routecollection");b.removeNode("Route");
Njl.each(a,function(c){c=CComQIPtr(c,"IXDomNode");var d=b.appendNode(c.getXml());d&&c.loadFromXml(d)});return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xbond=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");var b=CComQIPtr(this,"IXDomNode"),c=a.selectNodes("vnic_collection/vnic");if(c){this.xn=a;b.removeChild(b.getChildByTrait("INetworkVNIC"));this.xvnics=CComQIPtr(new dpv.vnic(true),"IXDomNode");
Njl.each(c,function(e){var f=CComQIPtr(new dpv.vnic(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xvnics.appendChild(f)},this);b.appendChild(this.xvnics)}if(c=a.selectSingleNode("dnscollection")){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(e){var f=CComQIPtr(new dpv.dns(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xdns.appendChild(f)},this);b.appendChild(this.xdns)}if(c=a.selectSingleNode("routecollection")){c=
a.selectNodes("routecollection/Route");this.xroutes&&b.removeChild(this.xroutes);this.xroutes=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(e){var f=CComQIPtr(new dpv.nroute(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xroutes.appendChild(f)},this);b.appendChild(this.xroutes)}this.domainCollection=a.selectSingleNode("domaincollection");this.domainName="";a=a.selectNodes("domaincollection/DOMAIN/Domain_Name");var d=[];Njl.each(a,function(e){d.push(e.getNodeText())},this);if(d.length>0)this.domainName=
d.join(" ");return S_OK}}});Njl.namespace("dpv");
dpv.scsitarget=Njl.inherit(CComEventsObjectRoot,dpv.base,ISCSITarget,{constructor:function(a){dpv.scsitarget.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Target Node_Name=""/>')).selectNodes("./*")[0])},ISCSITarget:{getName:function(){return this.x?this.x.getAttributeText("Node_Name"):E_FAIL},putName:function(a){return this.x?this.x.setAttributeText(a,"Node_Name"):E_FAIL},getSessionsCount:function(){return this.x?this.x.getAttributeText("Sessions"):
E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.scsihost=Njl.inherit(CComEventsObjectRoot,dpv.base,ISCSIHost,{constructor:function(a){dpv.scsihost.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Host Node_Name="" chapSecret="" chapSecretValueBase64=""/>')).selectNodes("./*")[0])},ISCSIHost:{getName:function(){return this.x?this.x.getAttributeText("Node_Name"):E_FAIL},putName:function(a){return this.x?this.x.setAttributeText(a,"Node_Name"):E_FAIL},putChapSecretValueBase64:function(a){return this.x?
this.x.setAttributeText(a,"chapSecretValueBase64"):E_FAIL},getChapSecret:function(){return this.x?this.x.getAttributeText("chapSecret"):E_FAIL},putChapSecret:function(a){a=a==false||a==="0"?"0":"1";return this.x?this.x.setAttributeText(a,"chapSecret"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.lun=Njl.inherit(CComObjectRoot,dpv.base,ILUN,{constructor:function(a){dpv.lun.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <LUN id="0" resource-type="LUN">                    <Comment></Comment>                    <Size></Size>                    <BlockSize>65536</BlockSize>                    <Available></Available>                    <Allocated></Allocated>                    <Volume_Id></Volume_Id>                    <Name></Name>                    <Sparse>false</Sparse>                    <LUN_Group/>                    <Compression>off</Compression>                    <BitRotProtection>off</BitRotProtection>                    <Logbias/>                    <Dedup>off</Dedup>                    <ThinLunAlertThreshold></ThinLunAlertThreshold>                    <Snapshot_Schedule id="0" resource-id="0" resource-type="snapshot-schedule" enabled="1" minute="0" hour="0" day-of-month="*" day-of-week="0" month="0" last-taken="0" purge-manual-snapshot="0" smart-snapshot="1"/>                </LUN>')).selectNodes("./*")[0])},
ILUN:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):E_FAIL},getComment:function(){return dpv.gp(this.xlun,"Comment")},putComment:function(a){return dpv.pp(this.xlun,"Comment",a)},getSize:function(){return dpv.gp(this.xlun,"Size")},putSize:function(a){return dpv.pp(this.xlun,"Size",a)},getBlockSize:function(){return dpv.gp(this.xlun,"BlockSize")},putBlockSize:function(a){return dpv.pp(this.xlun,"BlockSize",a)},getAlertThreshold:function(){return dpv.gp(this.xlun,"ThinLunAlertThreshold")},
putAlertThreshold:function(a){return dpv.pp(this.xlun,"ThinLunAlertThreshold",a)},getAvailable:function(){return dpv.gp(this.xlun,"Available")},getAllocated:function(){return dpv.gp(this.xlun,"Allocated")},getUsedByDataset:function(){return dpv.gp(this.xlun,"UsedByDataset")},getUsedBySnapshots:function(){return dpv.gp(this.xlun,"UsedBySnapshots")},getUsedByRefReservation:function(){return dpv.gp(this.xlun,"UsedByRefReservation")},getVolumeId:function(){return dpv.gp(this.xlun,"Volume_Id")},putVolumeId:function(a){return dpv.pp(this.xlun,
"Volume_Id",a)},getName:function(){return dpv.gp(this.xlun,"Name")},putName:function(a){return dpv.pp(this.xlun,"Name",a)},getSparse:function(){return dpv.gp(this.xlun,"Sparse")=="true"},putSparse:function(a){return dpv.pp(this.xlun,"Sparse",a?"true":"false")},getBlockSize:function(){return dpv.gp(this.xlun,"BlockSize")},putBlockSize:function(a){return dpv.pp(this.xlun,"BlockSize",a)},getLUNGroupName:function(){return dpv.gp(this.xlun,"LUN_Group")},putLUNGroupName:function(a){return dpv.pp(this.xlun,
"LUN_Group",a)},getCompression:function(){return dpv.gp(this.xlun,"Compression")},putCompression:function(a){return dpv.pp(this.xlun,"Compression",a?"on":"off")},getBitRotProtection:function(){return dpv.gp(this.xlun,"BitRotProtection")},putBitRotProtection:function(a){return dpv.pp(this.xlun,"BitRotProtection",a?"on":"off")},getAutoDefrag:function(){return dpv.gp(this.xlun,"AutoDefrag")},putAutoDefrag:function(a){return dpv.pp(this.xlun,"AutoDefrag",a?"on":"off")},getCompressRatio:function(){return dpv.gp(this.xlun,
"CompressRatio")},getLogbias:function(){return dpv.gp(this.xlun,"Logbias")},putLogbias:function(a){return dpv.pp(this.xlun,"Logbias",a)},getDedup:function(){return dpv.gp(this.xlun,"Dedup")},putDedup:function(a){return dpv.pp(this.xlun,"Dedup",a?"on":"off")},getCountOfContinuousSnapshots:function(){return parseInt(dpv.gp(this.xlun,"Snapshot_Continuous_Count"))},getCountOfManualSnapshots:function(){return parseInt(dpv.gp(this.xlun,"Snapshot_Manual_Count"))},getShared:function(){return dpv.gp(this.xlun,
"Shared")=="true"},putShared:function(a){return dpv.pp(this.xlun,"Shared",a?"true":"false")},getEnableProtection:function(){return this.xsnapshdlr.getAttributeText("enabled")=="1"?true:false},putEnableProtection:function(a){this.xsnapshdlr.setAttributeText(a?"1":"0","enabled")},getEnableSmartSnapshot:function(){return this.xsnapshdlr.getAttributeText("smart-snapshot")=="1"?true:false},putEnableSmartSnapshot:function(a){this.xsnapshdlr.setAttributeText(a?"1":"0","smart-snapshot")},getSnapshotScheduleInterval:function(){for(var a=
{hour:"hourly","day-of-week":"daily","day-of-month":"weekly",month:"monthly"},b=["hour","day-of-week","day-of-month","month"],c,d=0;d<b.length;++d){c=this.xsnapshdlr.getAttributeText(b[d]);if(c=="*")return a[b[d]]}return""},getFirstSnapshotCreationTime:function(){return parseInt(dpv.gp(this.xlun,"First_Snapshot_Created_On"))},getLastSnapshotCreationTime:function(){return parseInt(dpv.gp(this.xlun,"Latest_Snapshot_Created_On"))},putSnapshotScheduleInterval:function(a){var b=["minute","hour","day-of-week",
"day-of-month","month"];a={hourly:"hour",daily:"day-of-week",weekly:"day-of-month",monthly:"month"}[a];for(var c=false,d=0;d<b.length;++d){if(!c&&a==b[d])c=true;this.xsnapshdlr.setAttributeText(c?"*":"0",b[d])}},getCustomSnapshotManagement:function(){return dpv.gp(this.xlun,"CustomSnapshotManagement")=="1"},putCustomSnapshotManagement:function(a){return dpv.pp(this.xlun,"CustomSnapshotManagement",a?"1":"0")},getNonEmptySnapshots:function(){return dpv.gp(this.xlun,"NonEmptySnapshots")=="1"},putNonEmptySnapshots:function(a){return dpv.pp(this.xlun,
"NonEmptySnapshots",a?"1":"0")},getCustomSnapshotSchedule:function(){return this.xsched?this.xsched.getConfig():E_FAIL},putCustomSnapshotSchedule:function(a){return this.xsched?this.xsched.putConfig(a):E_FAIL},getSnapshotRetentionType:function(){return dpv.gp(this.xlun,"SnapshotRetention/type")},putSnapshotRetentionType:function(a){return dpv.pp(this.xlun,"SnapshotRetention/type",a)},getSnapshotRetentionNumber:function(){return dpv.gp(this.xlun,"SnapshotRetention/number")},putSnapshotRetentionNumber:function(a){return dpv.pp(this.xlun,
"SnapshotRetention/number",a)},getSnapshotRetentionLifeTime:function(){return dpv.gp(this.xlun,"SnapshotRetention/lifetime")},putSnapshotRetentionLifeTime:function(a){return dpv.pp(this.xlun,"SnapshotRetention/lifetime",a)},getMigration:function(){return dpv.gp(this.xlun,"Migration")=="1"},getExportInProgress:function(){return this.xexport?this.xexport.getAttributeText("active")=="1":false},getExportPath:function(){return this.xexport?this.xexport.getNodeText():""},getExportProcessId:function(){return this.xexport?
this.xexport.getAttributeText("id"):E_FAIL},getImportInProgress:function(){return this.ximport?this.ximport.getAttributeText("active")=="1":false},getImportPath:function(){return this.ximport?this.ximport.getNodeText():""},getImportProcessId:function(){return this.ximport?this.ximport.getAttributeText("id"):E_FAIL},getOriginClone:function(){return this.xcloneinfo.getAttributeText("origin")},getCloneState:function(){if(this.xcloneinfo&&this.xcloneinfo.getAttributeText("snapshot")){var a=this.xcloneinfo.getAttributeText("snapshot");
return this.xcloneinfo.getAttributeText("origin")?this.xcloneinfo.getAttributeText("origin")+"@"+a.substr(a.indexOf("_")+1):this.xcloneinfo.getAttributeText("origin")}return E_FAIL},getSnapshotClone:function(){return this.xcloneinfo.getAttributeText("snapshot")},getUseReplicate:function(){return dpv.gp(this.xlun,"Use_List/Use/Replicate")},getReplicateJobId:function(){return dpv.gp(CComQIPtr(new dpv.xprop(this.x),"IXPropertyList"),"Use_List/Use/Replicate/JobId")},getReplicateJobName:function(){return dpv.gp(CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList"),"Use_List/Use/Replicate/JobName")},getIsReplicateSource:function(){var a=dpv.gp(CComQIPtr(new dpv.xprop(this.x),"IXPropertyList"),"Use_List/Use/Replicate/Source");return a=="true"||a==E_FAIL},getSync:function(){return dpv.gp(this.xlun,"Sync")},putSync:function(a){return dpv.pp(this.xlun,"Sync",a)},isReadyDRShare:function(){return E_NOTIMPL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xlun=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");this.xsnapshdlr=
this.x.selectSingleNode("Snapshot_Schedule");this.xcloneinfo=this.x.selectSingleNode("CloneInfo");this.xexport=this.x.selectSingleNode("ExportDatasetTo");this.ximport=this.x.selectSingleNode("ImportDatasetFrom");a=this.x.selectSingleNode("Custom_Snapshot_Schedule");delete this.xsched;if(a){var b=CComQIPtr(new dpv.snapsched,"IXDomNode");if(b.loadFromXml(a)==S_OK)this.xsched=CComQIPtr(b,"ISnapshotSchedule")}return S_OK}}});Njl.namespace("dpv");
dpv.lungroup=Njl.inherit(CComObjectRoot,dpv.base,ILUNGroup,{constructor:function(a){dpv.lungroup.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <LUN_Group resource-id="" chapAuth="0" chapSecret="" chapSecretValueBase64="" >                    <Name></Name>                    <Secret></Secret>                    <Target_Group Name="" />                    <Host_Group Name="" />                </LUN_Group>')).selectNodes("./*")[0])},
ILUNGroup:{getName:function(){return dpv.gp(this.xlungroup,"Name")},putName:function(a){return dpv.pp(this.xlungroup,"Name",a)},getChapAuth:function(){return this.x?this.x.getAttributeText("chapAuth"):E_FAIL},putChapAuth:function(a){a=a==false||a==="0"?"0":"1";return this.x?this.x.setAttributeText(a,"chapAuth"):E_FAIL},putChapSecretValueBase64:function(a){return this.x?this.x.setAttributeText(a,"chapSecretValueBase64"):E_FAIL},getChapSecret:function(){return this.x?this.x.getAttributeText("chapSecret"):
E_FAIL},putChapSecret:function(a){a=a==false||a==="0"?"0":"1";return this.x?this.x.setAttributeText(a,"chapSecret"):E_FAIL},getAllHosts:function(){return dpv.gp(this.xlungroup,"AllHosts")=="true"},putAllHosts:function(a){return dpv.pp(this.xlungroup,"AllHosts",a?"true":"false")},getTargets:function(){return this.xtrs?this.xtrs.getChildren():E_FAIL},putTargets:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Target_Group");b.removeNode("Target");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,
"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(CComQIPtr(a,"ISCSITarget")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},getDedicatedLink:function(){return this.dedicatedLink?this.dedicatedLink:E_FAIL},putDedicatedLink:function(a){if(this.x){var b=this.x.selectSingleNode("Link_Group");b.removeNode("Interface_Name");a&&b.appendNode(new Njl.Xml.document("<Interface_Name>"+
a+"</Interface_Name>"))}},getHosts:function(){return this.xinits?this.xinits.getChildren():E_FAIL},putHosts:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Host_Group");b.removeNode("Host");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(CComQIPtr(a,"ISCSIHost")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL}},
IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xlungroup=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");var b=a.selectNodes("Target_Group"),c=a.selectNodes("Host_Group"),d=CComQIPtr(this,"IXDomNode"),e=a.selectSingleNode("Link_Group/Interface_Name");if(e)this.dedicatedLink=e.getNodeText();if(b&&c){this.xtrs&&d.removeChild(this.xtrs);this.xtrs=CComQIPtr(new dpv.base,"IXDomNode");b=a.selectNodes("Target_Group/Target");Njl.each(b,function(f){var g=CComQIPtr(new dpv.scsitarget(true),
"IXDomNode");g.loadFromXml(f)==S_OK&&this.xtrs.appendChild(g)},this);d.appendChild(this.xtrs);this.xinits&&d.removeChild(this.xinits);this.xinits=CComQIPtr(new dpv.base,"IXDomNode");a=a.selectNodes("Host_Group/Host");Njl.each(a,function(f){var g=CComQIPtr(new dpv.scsihost(true),"IXDomNode");g.loadFromXml(f)==S_OK&&this.xinits.appendChild(g)},this);d.appendChild(this.xinits);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.serviceManager=Njl.inherit(CComEventsObjectRoot("ISysServiceManagerEvents"),dpv.base,ISysServiceManager,{constructor:function(){dpv.serviceManager.superclass.constructor.apply(this,arguments)},ISysServiceManager:{updateSystemServiceInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Protocols" resource-type="Protocol_Collection"/>',Njl.id())),a)},commitSystemService:function(a){if(this.x)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Protocols" resource-type="Protocol_Collection">{1}</xs:set>',
Njl.id(),this.x)),a);return S_FALSE},getSystemServices:function(){return this.xprotocols?this.xprotocols.getChildren():E_FAIL},getSystemServiceByName:function(a){if(this.xprotocols)for(var b=this.xprotocols.getChildren(),c=0;c<b.length;++c){var d=CComQIPtr(b[c],"ISysService");if(d.getName()==a)return d}return null},getTIVOInfo:function(){return this.tivocfg?this.tivocfg:E_FAIL},getTIVOList:function(){return this.tivos?this.tivos.getChildren():E_FAIL},activateTIVO:function(a,b,c){b=String.format('<Activate name="{0}" active="true" key="{1}"/>',
b,c);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="TIVOActivate" resource-type="TIVOSettings">{1}</xs:set>',Njl.id(),b)),a)},deactivateTIVO:function(a,b){b=String.format('<Activate name="{0}" active="false" key="{1}"/>',b,"");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="TIVOActivate" resource-type="TIVOSettings">{1}</xs:set>',Njl.id(),b)),a)},updateTIVOStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="TIVOSettings" resource-type="TIVOSettings"/>',
Njl.id())),a)},commitTIVOConfig:function(a,b,c,d,e,f){b=String.format(' <TIVO_Setting><TIVO folder="{0}" fast_transfer="{4}"/>                                    <Schedule hour="{1}" minute="{2}" days="{3}"/> </TIVO_Setting>',b,c,d,e,f);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="TIVO_Setting" resource-type="TIVOSettings">{1}</xs:set>',Njl.id(),b)),a)},updateRemoteSSH:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="RemoteAccessSSH" resource-type="System"/>',
Njl.id())),a)},commitRemoteSSH:function(a,b,c,d){b=String.format('<RemoteAccessSSH enable="{0}" comment="{1}" port="{2}"/>',b,c,d);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="RemoteAccessSSH" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)},getRemoteSSHPort:function(){return this.remotessh?this.remotessh.getAttributeText("port"):E_FAIL},getRemoteSSHComment:function(){return this.remotessh?this.remotessh.getAttributeText("comment"):E_FAIL},getRemoteSSHStatus:function(){return this.remotessh?
this.remotessh.getAttributeText("enable")=="true"?true:false:E_FAIL},updateGASetting:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="ReadynasFeedback" resource-type="System"/>',Njl.id())),a)},commitGASetting:function(a,b){b=String.format('<ReadynasFeedback  enable="{0}"/>',b);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="ReadynasFeedback" resource-type="System">{1}</xs:set>',Njl.id(),b)),a)},getGASetting:function(){return this.gasetting?
this.gasetting.getAttributeText("enable"):E_FAIL},updateFileSearchStats:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FileSearch" resource-type="FileSearch" />',Njl.id())),a)},getFileSearchStats:function(){return this.xIndexStat},resetFileSearchIndex:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol"><xs:command_name>file-search-reset</xs:command_name></xs:command>',Njl.id())),
a)},pauseFileSearchIndex:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol"><xs:command_name>file-search-pause</xs:command_name></xs:command>',Njl.id())),a)},resumeFileSearchIndex:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol"><xs:command_name>file-search-resume</xs:command_name></xs:command>',Njl.id())),a)}},IXDomNode:{Update:function(a){return CComQIPtr(this,
"ISysServiceManager").updateSystemServiceInfo(a)},Commit:function(a){return CComQIPtr(this,"ISysServiceManager").commitSystemService(a)},getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.getAttributeText("resource-id"),d=a.getAttributeText("resource-type"),e=a.selectNodes("./*");if(e&&e.length){var f=e[0];if(f&&f.getNodeName()=="RemoteAccessSSH"){this.remotessh=f;return S_OK}if(f&&f.getNodeName()=="ReadynasFeedback"){this.gasetting=f;return S_OK}}switch(d){case "Protocol_Collection":if(e&&
e.length){this.x=e[0];this.xprotocols&&b.removeChild(this.xprotocols);this.xprotocols=CComQIPtr(new dpv.base,"IXDomNode");a=a.selectNodes("Protocol_Collection/Protocol");Njl.each(a,function(g){var h=CComQIPtr(new dpv.service,"IXDomNode");this.xprotocols.appendChild(h);h.loadFromXml(g)!=S_OK&&this.xprotocols.removeChild(h)},this);b.appendChild(this.xprotocols);return S_OK}case "TIVOSettings":if(c=="TIVOSettings"){this.tivos&&b.removeChild(this.tivos);this.tivos=CComQIPtr(new dpv.base,"IXDomNode");
c=a.selectNodes("TIVOSettings/TIVO_List/TIVO");Njl.each(c,function(g){var h=CComQIPtr(new dpv.tivolist,"IXDomNode");this.tivos.appendChild(h);h.loadFromXml(g)!=S_OK&&this.tivos.removeChild(h)},this);b.appendChild(this.tivos);b=a.selectSingleNode("TIVOSettings/TIVO_Setting");if(Njl.isDefined(b)){this.tivocfg=CComQIPtr(new dpv.tivoinfo,"IXDomNode");if(this.tivocfg.loadFromXml(b)==S_OK)return S_OK}}else this.tivoAct=a.selectSingleNode("TIVOSettings");return S_OK;case "FileSearch":if(c=="FileSearch"){b=
a.selectSingleNode("IndexStat");a=CComQIPtr(new dpv.indexstat,"IXDomNode");if(a.loadFromXml(b)==S_OK){this.xIndexStat=CComQIPtr(a,"ISysIndexStat");return S_OK}}}return E_FAIL}}});Njl.namespace("dpv");
dpv.service=Njl.inherit(CComEventsObjectRoot("ISysServiceEvents"),dpv.base,ISysService,{constructor:function(){dpv.service.superclass.constructor.apply(this,arguments)},ISysService:{getName:function(){return this.x?this.x.getAttributeText("id"):E_FAIL},getEnable:function(){return this.x?!!parseInt(this.x.getAttributeText("enabled")):E_FAIL},putEnable:function(a){return this.x?this.x.setAttributeText(a?"1":"0","enabled"):E_FAIL},getStatus:function(){return this.x?this.x.getAttributeText("status"):
E_FAIL},getNFSThreads:function(){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.getAttributeText("threads"):E_FAIL},putNFSThreads:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"threads"):E_FAIL},getManageGids:function(){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.getAttributeText("manage-gids"):E_FAIL},putManageGids:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"manage-gids"):E_FAIL},getNFSV4:function(){return this.xoptions&&
this.nodeId==="nfs"?this.xoptions.getAttributeText("nfsv4-enable"):E_FAIL},putNFSV4:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"nfsv4-enable"):E_FAIL},getNFSV4Domain:function(){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.getAttributeText("nfsv4-domain"):E_FAIL},putNFSV4Domain:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"nfsv4-domain"):E_FAIL},getNFSHomeShareState:function(){return this.xoptions&&this.nodeId===
"nfs"?!!parseInt(this.xoptions.getAttributeText("user-home-directory")):E_FAIL},putNFSHomeShareState:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a?"1":"0","user-home-directory"):E_FAIL},getFTPSEnable:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("ftps")):E_FAIL},putFTPSEnable:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","ftps"):E_FAIL},getFTPLogEnable:function(){return this.xoptions&&
this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("server-transfer-log")):E_FAIL},putFTPLogEnable:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","server-transfer-log"):E_FAIL},getFTPPort:function(){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.getAttributeText("port"):E_FAIL},putFTPPort:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"port"):E_FAIL},getFTPAuthMode:function(){return this.xoptions&&
this.nodeId==="ftp"?this.xoptions.getAttributeText("auth-mode"):E_FAIL},putFTPAuthMode:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"auth-mode"):E_FAIL},getFTPPassiveRangeMin:function(){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.getAttributeText("passive-range-min"):E_FAIL},putFTPPassiveRangeMin:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"passive-range-min"):E_FAIL},getFTPPassiveRangeMax:function(){return this.xoptions&&
this.nodeId==="ftp"?this.xoptions.getAttributeText("passive-range-max"):E_FAIL},putFTPPassiveRangeMax:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"passive-range-max"):E_FAIL},getFTPMasqAddr:function(){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.getAttributeText("masquerade-address"):E_FAIL},putFTPMasqAddr:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"masquerade-address"):E_FAIL},getFTPMaxUploadRate:function(){return this.xoptions&&
this.nodeId==="ftp"?parseInt(this.xoptions.getAttributeText("max-upload-rate")||"0"):E_FAIL},putFTPMaxUploadRate:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"max-upload-rate"):E_FAIL},getFTPMaxDownloadRate:function(){return this.xoptions&&this.nodeId==="ftp"?parseInt(this.xoptions.getAttributeText("max-download-rate")||"0"):E_FAIL},putFTPMaxDownloadRate:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"max-download-rate"):
E_FAIL},getFTPMasqEnable:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("enable-masquerade")):E_FAIL},putFTPMasqEnable:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","enable-masquerade"):E_FAIL},getFTPUploadResumeState:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("allow-upload-resume")):E_FAIL},putFTPUploadResumeState:function(a){return this.xoptions&&this.nodeId===
"ftp"?this.xoptions.setAttributeText(a?"1":"0","allow-upload-resume"):E_FAIL},getFTPHomeShareState:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("user-home-directory")):E_FAIL},putFTPHomeShareState:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","user-home-directory"):E_FAIL},getFTPForceFTPS:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("force-ftps")):E_FAIL},
putFTPForceFTPS:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","force-ftps"):E_FAIL},getDAAPShareName:function(){return this.xoptions&&this.nodeId==="daap"?this.xoptions.getAttributeText("sharename"):E_FAIL},putDAAPShareName:function(a){return this.xoptions&&this.nodeId==="daap"?this.xoptions.setAttributeText(a,"sharename"):E_FAIL},getDAAPPassword:function(){return this.xoptions&&this.nodeId==="daap"?this.xoptions.getAttributeText("password"):E_FAIL},
putDAAPPassword:function(a){return this.xoptions&&this.nodeId==="daap"?this.xoptions.setAttributeText(a,"password"):E_FAIL},getDAAPDirectory:function(){return this.xoptions&&this.nodeId==="daap"?this.xoptions.getAttributeText("directory"):E_FAIL},putDAAPDirectory:function(a){return this.xoptions&&this.nodeId==="daap"?this.xoptions.setAttributeText(a,"directory"):E_FAIL},getDLNAAutoScanState:function(){return this.xoptions&&this.nodeId==="dlna"?!!parseInt(this.xoptions.getAttributeText("auto-scan")):
E_FAIL},putDLNAAutoScanState:function(a){return this.xoptions&&this.nodeId==="dlna"?this.xoptions.setAttributeText(a?"1":"0","auto-scan"):E_FAIL},getDLNATivoServerState:function(){return this.xoptions&&this.nodeId==="dlna"?!!parseInt(this.xoptions.getAttributeText("enable-tivo-server")):E_FAIL},putDLNATivoServerState:function(a){return this.xoptions&&this.nodeId==="dlna"?this.xoptions.setAttributeText(a?"1":"0","enable-tivo-server"):E_FAIL},rescanDLNA:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol">                        <xs:command_name>rescan-dlna</xs:command_name>                        <xs:args/>                        </xs:command>',
Njl.id())),a)},getDLNATivoArchiverState:function(){return this.xoptions&&this.nodeId==="dlna"?!!parseInt(this.xoptions.getAttributeText("enable-tivo-archiver")):E_FAIL},putDLNATivoArchiverState:function(a){return this.xoptions&&this.nodeId==="dlna"?this.xoptions.setAttributeText(a?"1":"0","enable-tivo-archiver"):E_FAIL},getBonjourCIFSState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("cifs")):E_FAIL},putBonjourCIFSState:function(a){return this.xoptions&&
this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","cifs"):E_FAIL},getBonjourAFPState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("afp")):E_FAIL},putBonjourAFPState:function(a){return this.xoptions&&this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","afp"):E_FAIL},getBonjourFrontviewState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("frontview")):E_FAIL},putBonjourFrontviewState:function(a){return this.xoptions&&
this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","frontview"):E_FAIL},getBonjourReadynasState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("readynas")):E_FAIL},putBonjourReadynasState:function(a){return this.xoptions&&this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","readynas"):E_FAIL},getBonjourTimeMachineState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("timemachine")):
E_FAIL},putBonjourTimeMachineState:function(a){return this.xoptions&&this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","timemachine"):E_FAIL},getHTTPLoginEnableState:function(){return this.xoptions&&this.nodeId==="http"?!!parseInt(this.xoptions.getAttributeText("login-enabled")):E_FAIL},putHTTPLoginEnableState:function(a){return this.xoptions&&this.nodeId==="http"?this.xoptions.setAttributeText(a?"1":"0","login-enabled"):E_FAIL},getHTTPSelectedShareName:function(){return this.xoptions&&
this.nodeId==="http"?this.xoptions.getAttributeText("share-name"):E_FAIL},putHTTPSelectedShareName:function(a){return this.xoptions&&this.nodeId==="http"?this.xoptions.setAttributeText(a,"share-name"):E_FAIL},getHTTPAdminEnabled:function(){return this.xoptions&&this.nodeId==="http"?this.xoptions.getAttributeText("http-admin"):E_FAIL},putHTTPAdminEnabled:function(a){return this.xoptions&&this.nodeId==="http"?this.xoptions.setAttributeText(a,"http-admin"):E_FAIL},getHTTPShareList:function(){return this.xhttpsl&&
this.nodeId==="http"?this.xhttpsl:E_FAIL},getHTTPSPort:function(){return this.xoptions&&this.nodeId==="https"?this.xoptions.getAttributeText("port"):E_FAIL},putHTTPSPort:function(a){return this.xoptions&&this.nodeId==="https"?this.xoptions.setAttributeText(a,"port"):E_FAIL},getHTTPSSslKeyHost:function(){return this.xoptions&&this.nodeId==="https"?this.xoptions.getAttributeText("ssl-key-host"):E_FAIL},putHTTPSSslKeyHost:function(a){return this.xoptions&&this.nodeId==="https"?this.xoptions.setAttributeText(a,
"ssl-key-host"):E_FAIL},getSNMPAllowHost:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("allow-host"):E_FAIL},putSNMPAllowHost:function(a){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.setAttributeText(a,"allow-host"):E_FAIL},getSNMPCommunity:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("community"):E_FAIL},putSNMPCommunity:function(a){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.setAttributeText(a,
"community"):E_FAIL},getSNMPTrapDest:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("trap-destination"):E_FAIL},putSNMPTrapDest:function(a){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.setAttributeText(a,"trap-destination"):E_FAIL},getSNMPMibUrl:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("mib-url"):E_FAIL},getSNMPContact:function(){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&this.xoptionsProps!=
E_FAIL)return dpv.gp(this.xoptionsProps,"Contact");return E_FAIL},putSNMPContact:function(a){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&this.xoptionsProps!=E_FAIL)return dpv.pp(this.xoptionsProps,"Contact",a);return E_FAIL},getSNMPLocation:function(){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&this.xoptionsProps!=E_FAIL)return dpv.gp(this.xoptionsProps,"Location");return E_FAIL},putSNMPLocation:function(a){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&
this.xoptionsProps!=E_FAIL)return dpv.pp(this.xoptionsProps,"Location",a);return E_FAIL},getSSHPort:function(){return this.xoptions&&this.nodeId==="ssh"?this.xoptions.getAttributeText("port"):E_FAIL},putSSHPort:function(a){return this.xoptions&&this.nodeId==="ssh"?this.xoptions.setAttributeText(a,"port"):E_FAIL},getSSHPswdAuthEnable:function(){return this.xoptions&&this.nodeId==="ssh"?this.xoptions.getAttributeText("password-authentication"):E_FAIL},putSSHPswdAuthEnable:function(a){return this.xoptions&&
this.nodeId==="ssh"?this.xoptions.setAttributeText(a,"password-authentication"):E_FAIL},getReplicateOwner:function(){return this.xreplicateAuth&&this.nodeId==="replicate"?dpv.gp(this.xreplicateAuth,"Owner"):E_FAIL},putReplicateOwner:function(a){return this.xreplicateAuth&&this.nodeId==="replicate"?dpv.pp(this.xreplicateAuth,"Owner",a):E_FAIL},getReplicatePassword:function(){return this.xreplicateAuth&&this.nodeId==="replicate"?dpv.gp(this.xreplicateAuth,"Password"):E_FAIL},putReplicatePassword:function(a){return this.xreplicateAuth&&
this.nodeId==="replicate"?dpv.pp(this.xreplicateAuth,"Password",a):E_FAIL},getGenieHost:function(){return this.xoptions&&this.nodeId==="smartnetwork"?this.xoptions.getAttributeText("hostname"):E_FAIL},getIndexContent:function(){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.getAttributeText("index-content")=="1":E_FAIL},putIndexContent:function(a){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.setAttributeText(a?"1":"0","index-content"):E_FAIL},getIgnoreNumbers:function(){return this.xoptions&&
this.nodeId==="file-search"?this.xoptions.getAttributeText("fts-ignore-numbers")=="1":E_FAIL},putIgnoreNumbers:function(a){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.setAttributeText(a?"1":"0","fts-ignore-numbers"):E_FAIL},putNeedResetIndex:function(a){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.setAttributeText(a?"1":"","need-reset-index"):E_FAIL},getExcludedFiles:function(){if(this.xoptions&&this.nodeId==="file-search"){var a=this.xoptions.selectNodes("./Ignorefile_List/Ignorefile"),
b=[];Njl.each(a,function(c){b.push(c.getNodeText())},this);return b}return E_FAIL},putExcludedFiles:function(a){if(this.xoptions&&this.nodeId==="file-search"){var b=this.xoptions.selectSingleNode("./Ignorefile_List"),c="";b&&b!=E_FAIL&&b.removeNode();Njl.each(a,function(d){if(d)c+="<Ignorefile><![CDATA["+d+"]]\></Ignorefile>"},this);return this.xoptions.appendNode(new Njl.Xml.document("<Ignorefile_List>"+c+"</Ignorefile_List>"))}return E_FAIL},getExcludedFolders:function(){if(this.xoptions&&this.nodeId===
"file-search"){var a=this.xoptions.selectNodes("./Ignoredir_List/Ignoredir"),b=[];Njl.each(a,function(c){b.push(c.getNodeText())},this);return b}return E_FAIL},putExcludedFolders:function(a){if(this.xoptions&&this.nodeId==="file-search"){var b=this.xoptions.selectSingleNode("./Ignoredir_List"),c="";b&&b!=E_FAIL&&b.removeNode();Njl.each(a,function(d){if(d)c+="<Ignoredir><![CDATA["+d+"]]\></Ignoredir>"},this);return this.xoptions.appendNode(new Njl.Xml.document("<Ignoredir_List>"+c+"</Ignoredir_List>"))}return E_FAIL},
getCifsSmbEncrypt:function(){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.getAttributeText("smb-encrypt"):""},putCifsSmbEncrypt:function(a){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.xmlDocument.setAttribute("smb-encrypt",a):E_FAIL},removeCifsSmbEncrypt:function(){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.getAttribute("smb-encrypt")&&this.xoptions.xmlDocument.attributes.removeNamedItem("smb-encrypt"):E_FAIL},getCifsEnhanceMacOS:function(){return this.xoptions&&
this.nodeId==="cifs"?this.xoptions.getAttributeText("enhance-macos")=="1":E_FAIL},putCifsEnhanceMacOS:function(a){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.setAttributeText(a?"1":"0","enhance-macos"):E_FAIL},getCifsWindowsDiscovery:function(){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.getAttributeText("legacy-support")=="1":E_FAIL},putCifsWindowsDiscovery:function(a){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.setAttributeText(a?"1":"0","legacy-support"):
E_FAIL},getISNSServer:function(){return this.xoptions&&this.nodeId==="isns"?this.xoptions.getAttributeText("server-address"):E_FAIL},putISNSServer:function(a){return this.xoptions&&this.nodeId==="isns"?this.xoptions.setAttributeText(a,"server-address"):E_FAIL},getAuditLoginAttempts:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("enabled_login_attempts"):E_FAIL},putAuditLoginAttempts:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,
"enabled_login_attempts"):E_FAIL},getAuditAccessLevelC:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("enabled_access_level"):E_FAIL},putAuditAccessLevelC:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"enabled_access_level"):E_FAIL},getAuditAccessLevelT:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("audit_access_level"):E_FAIL},putAuditAccessLevelT:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"audit_access_level"):E_FAIL},getAuditPath:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("archive_path"):E_FAIL},putAuditPath:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"archive_path"):E_FAIL},getAuditCompress:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("archive_compress"):E_FAIL},putAuditCompress:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"archive_compress"):E_FAIL},getAuditSize:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("retention_size_mb"):E_FAIL},putAuditSize:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"retention_size_mb"):E_FAIL},getAuditLines:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("retention_lines"):E_FAIL},putAuditLines:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"retention_lines"):E_FAIL},getAuditEnableTime:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("enabled_time"):E_FAIL},putAuditEnableTime:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"enabled_time"):E_FAIL},getAuditDay:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("retention_time_length_day"):E_FAIL},putAuditDay:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"retention_time_length_day"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.nodeId=this.x.getAttributeText("id");this.xoptions=this.x.selectSingleNode("./Options");this.xoptionsProps=CComQIPtr(new dpv.xprop(this.xoptions),"IXPropertyList");a=this.x.selectNodes("./Share_Collection/Share");if(this.xreplicateAuth=this.x.selectSingleNode("./Authentication"))this.xreplicateAuth=CComQIPtr(new dpv.xprop(this.xreplicateAuth),
"IXPropertyList");if(a){this.xhttpsl=[];Njl.each(a,function(b){b=CComQIPtr(new dpv.xprop(b),"IXPropertyList");this.xhttpsl.push(dpv.gp(b,"Name"))},this)}return S_OK}}});Njl.namespace("dpv");
dpv.tivoinfo=Njl.inherit(CComObjectRoot,dpv.base,ISysTIVOInfo,{constructor:function(){dpv.tivoinfo.superclass.constructor.apply(this,arguments)},ISysTIVOInfo:{getSharedFolderList:function(){return this.x.selectSingleNode("DLNA").getAttributeText("folderList")},getTIVOFolder:function(){return this.x.selectSingleNode("TIVO").getAttributeText("folder")},getHour:function(){return this.x.selectSingleNode("Schedule ").getAttributeText("hour")},getMinute:function(){return this.x.selectSingleNode("Schedule ").getAttributeText("minute")},
getDays:function(){return this.x.selectSingleNode("Schedule ").getAttributeText("days")},getFastTransfer:function(){return this.x.selectSingleNode("TIVO").getAttributeText("fast_transfer")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.tivolist=Njl.inherit(CComObjectRoot,dpv.base,ISysTIVOList,{constructor:function(){dpv.tivolist.superclass.constructor.apply(this,arguments)},ISysTIVOList:{getName:function(){return this.name},isActivated:function(){return this.isactive},getStatus:function(){return this.status}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.name=this.x.getAttributeText("name");this.isactive=this.x.getAttributeText("active");this.status=this.x.getAttributeText("status");return S_OK}}});
Njl.namespace("dpv");
dpv.indexstat=Njl.inherit(CComObjectRoot,dpv.base,ISysIndexStat,{constructor:function(){dpv.indexstat.superclass.constructor.apply(this,arguments)},ISysIndexStat:{getStatus:function(){return dpv.gp(this.xproptlist,"Status")},getFilesNumber:function(){return dpv.gp(this.xproptlist,"n_files")},getFoldersNumber:function(){return dpv.gp(this.xproptlist,"n_folders")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");
return S_OK}}});Njl.namespace("dpv");
dpv.fwManager=Njl.inherit(CComEventsObjectRoot("IFWManagerEvents"),dpv.base,IFWManager,IDeviceWebEventSinkEvents,{constructor:function(){dpv.fwManager.superclass.constructor.apply(this,arguments);this.isJustUpdated="0";this.updateChannel=""},IFWManager:{checkForUpdate:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FW_Broker" resource-type="FirmwareImage"></xs:get>',Njl.id())),a,b.getSourceFWURL(),
"FORM")},getFirmwareInfo:function(){return this.fmw?this.fmw:E_FAIL},PerfomeLastFirmwareUpdate:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="FW_Broker" resource-type="FirmwareUpdate">                        <xs:command_name>FirmwareUpdate</xs:command_name>                    </xs:command>',Njl.id())),a,b.getSourceFWURL(),"FORM")},updateFirmwareDownloadProgress:function(a){var b=CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FW_Broker" resource-type="FirmwareProgress"></xs:get>',Njl.id())),a,b.getSourceFWURL(),"FORM")},getDownloadState:function(){return this.firms?this.firms:E_FAIL},getDownloadProgress:function(){return this.firmv?this.firmv:E_FAIL},cancelFirmwareDownload:function(a){var b=CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="FW_Broker" resource-type="FirmwareCancel"><xs:command_name>FirmwareCancel</xs:command_name></xs:command>',
Njl.id())),a,b.getSourceFWURL(),"FORM")},updateFirmWareUpdateStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="SystemStatusForAdminGui" resource-type="SystemStatusForGui"></xs:get>',Njl.id())),a)},getFirmWareUpdateStatus:function(){return this.isJustUpdated==="1"},getUpdateChannelNML:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="UpdateChannel" resource-type="System"></xs:get>',Njl.id())),a)},getUpdateChannel:function(){return this.updateChannel},
setUpdateChannel:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="UpdateChannel" resource-type="System">                    <UpdateChannel>{1}</UpdateChannel>                </xs:set>',Njl.id(),b)),a)}},IDeviceWebEventSinkEvents:{OnEvent:function(){return S_OK}},IXDomNode:{loadFromXml:function(a){switch(a.getAttributeText("resource-type")){case "FirmwareProgress":if(a=a.selectSingleNode("FirmwareProgress")){this.firms=a.getAttributeText("state");this.firmv=
a.getAttributeText("value");var b=CComQIPtr(this,"IXDomNode");if(a=a.selectSingleNode("FirmwareImage")){var c=CComQIPtr(new dpv.sysfmw,"IXDomNode");if(c.loadFromXml(a)==S_OK){this.fmw&&b.removeChild(this.fmw);this.fmw=c;b.appendChild(this.fmw);return S_OK}}return S_OK}break;case "FirmwareCancel":case "FirmwareUpdate":return S_OK;case "FirmwareImage":b=CComQIPtr(this,"IXDomNode");if(a=a.selectSingleNode("FirmwareImage")){c=CComQIPtr(new dpv.sysfmw,"IXDomNode");if(c.loadFromXml(a)==S_OK){this.fmw&&
b.removeChild(this.fmw);this.fmw=c;b.appendChild(this.fmw);return S_OK}}break;case "SystemStatusForGui":if(a=a.selectSingleNode("SystemStatusForAdminGui"))if(a=a.selectSingleNode("FirmwareUpdateFlag"))this.isJustUpdated=a.getNodeText();return S_OK;case "System":if(b=a.selectSingleNode("UpdateChannel"))this.updateChannel=b.getNodeText()||"";return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.sprotohost=Njl.inherit(CComEventsObjectRoot(),dpv.base,IShareProtocolHost,{constructor:function(a){dpv.sprotohost.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Host id="0" resource-id="0" resource-type="Host">                    <Access/>                    <Host_Name/>                    <Root_Privilege/>                </Host>')).selectNodes("./*")[0])},IShareProtocolHost:{getUIId:function(){return this.x?this.x.getAttributeText("id"):
E_FAIL},putUIId:function(a){return this.x.setAttributeText(a,"id")},getId:function(){return this.x?this.x.getAttributeText("resource-id"):E_FAIL},getAccess:function(){return dpv.gp(this.xsprotohost,"Access")},putAccess:function(a){return dpv.pp(this.xsprotohost,"Access",a)},getHostName:function(){return dpv.gp(this.xsprotohost,"Host_Name")},putHostName:function(a){return dpv.pp(this.xsprotohost,"Host_Name",a)},getRootPrivilege:function(){return dpv.gp(this.xsprotohost,"Root_Privilege")=="true"},putRootPrivilege:function(a){return dpv.pp(this.xsprotohost,
"Root_Privilege",a?"true":"false")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsprotohost=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.adsprogress=Njl.inherit(CComObjectRoot,dpv.base,IADSProgress,{constructor:function(){dpv.adsprogress.superclass.constructor.apply(this,arguments)},IADSProgress:{getState:function(){return dpv.gp(this.xadsprogress,"State")},getPercent:function(){return dpv.gp(this.xadsprogress,"Percent")},getTotalUser:function(){return dpv.gp(this.xadsprogress,"TotalUser")},getCurrUser:function(){return dpv.gp(this.xadsprogress,"CurrUser")},getTotalGroup:function(){return dpv.gp(this.xadsprogress,"TotalGroup")},
getCurrGroup:function(){return dpv.gp(this.xadsprogress,"CurrGroup")},getStartAt:function(){return dpv.gp(this.xadsprogress,"StartAt")},getDoneAt:function(){return dpv.gp(this.xadsprogress,"DoneAt")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){CComQIPtr(this,"IXDomNode");this.x=a;this.xadsprogress=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.sclone=Njl.inherit(CComObjectRoot,dpv.base,IShareClone,{constructor:function(){dpv.sclone.superclass.constructor.apply(this,arguments)},IShareClone:{getId:function(){return this.x?this.x.getAttributeText("id"):E_FAIL},getShareId:function(){return this.x?this.x.getAttributeText("resource-id"):E_FAIL},getClonedShareName:function(){return this.x?this.x.getAttributeText("ClonedShareName "):E_FAIL},getParentSnapshotName:function(){return this.x?this.x.getAttributeText("ParentSnapshotName"):E_FAIL}},
IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.squota=Njl.inherit(CComObjectRoot,dpv.base,IShareQuota,{constructor:function(){dpv.squota.superclass.constructor.apply(this,arguments)},IShareQuota:{getHardLimitMB:function(){return this.x?this.x.getAttributeText("hardlimit-mb"):E_FAIL},putHardLimitMB:function(a){return this.x?this.x.setAttributeText(a,"hardlimit-mb"):E_FAIL},getUsedMB:function(){return this.x?this.x.getAttributeText("used-mb"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});
dpv.suquota=Njl.inherit(dpv.squota,IShareUserQuota,{constructor:function(a){dpv.suquota.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Quota user-id="" hardlimit-mb="0" />')).selectNodes("./*")[0])},IShareUserQuota:{getUserId:function(){return this.x?this.x.getAttributeText("user-id"):E_FAIL},putUserId:function(a){return this.x?this.x.setAttributeText(a,"user-id"):E_FAIL},getUserName:function(){return this.x?this.x.getAttributeText("user-name"):
E_FAIL},putUserName:function(){return this.x?this.x.setAttributeText(id,"user-name"):E_FAIL}}});
dpv.sgquota=Njl.inherit(dpv.squota,IShareGroupQuota,{constructor:function(a){dpv.sgquota.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Quota group-id="" hardlimit-mb="0" />')).selectNodes("./*")[0])},IShareGroupQuota:{getGroupId:function(){return this.x?this.x.getAttributeText("group-id"):E_FAIL},putGroupId:function(a){return this.x?this.x.setAttributeText(a,"group-id"):E_FAIL},getGroupName:function(){return this.x?
this.x.getAttributeText("group-name"):E_FAIL},putGroupName:function(a){return this.x?this.x.setAttributeText(a,"group-name"):E_FAIL}}});Njl.namespace("dpv");
dpv.localapp=Njl.inherit(CComEventsObjectRoot("ISmartLocalAppEvents"),dpv.base,ISmartLocalApp,{constructor:function(){dpv.localapp.superclass.constructor.apply(this,arguments)},ISmartLocalApp:{getId:function(){return this.x?dpv.xa2t(this.x,"resource-id"):E_FAIL},getStatus:function(){return this.x?dpv.xa2t(this.x,"state"):E_FAIL},isPreinstalled:function(){return this.x?dpv.xa2t(this.x,"is-preinstalled"):E_FAIL},isLocalApp:function(){return this.x?dpv.xa2t(this.x,"is-localapp"):E_FAIL},isUninitialized:function(){return this.x?
dpv.xa2t(this.x,"is-uninitialized"):E_FAIL},isInstalled:function(){return this.x?dpv.xa2t(this.x,"is-uninitialized")==="0":false},getAppId:function(){return dpv.gp(this.xproptlist,"AppID")},getName:function(){return dpv.gp(this.xproptlist,"Name")},getAuthor:function(){return dpv.gp(this.xproptlist,"Author")},getVersion:function(){return dpv.gp(this.xproptlist,"Version")},getCategory:function(){return dpv.gp(this.xproptlist,"Category")},getConfigURL:function(){return dpv.gp(this.xproptlist,"ConfigURL")},
getLaunchURL:function(){return dpv.gp(this.xproptlist,"LaunchURL")},getInfoURL:function(){return dpv.gp(this.xproptlist,"InfoURL")},getDebianPackageName:function(){return dpv.gp(this.xproptlist,"DebianPackage")},getServiceName:function(){return dpv.gp(this.xproptlist,"ServiceName")},getDescription:function(){return dpv.gp(this.xproptlist,"Description")},getMinFirmwareVer:function(){return dpv.gp(this.xproptlist,"MinFirmwareVer")},getNewAppVersion:function(){return dpv.gp(this.xproptlist,"NewerVersion")},
getAppType:function(){return"local"},getProcessId:function(){return this.pid?this.pid:E_FAIL},getAppBackgroundProcessStatus:function(){return this.pidStatus?this.pidStatus:E_FAIL},uninstallAppDryRun:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="LocalApp">                    <LocalApp>                        <dry-run>1</dry-run>                    </LocalApp>                </xs:delete>',Njl.id(),b)),a)},getUnInstallRelativeApps:function(){return this.uninstallRNodes},
uninstallApp:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="'+b+'" resource-type="LocalApp"/>',Njl.id())),a)},updateAppBackgroundProcessStatus:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BgProcess"/>',Njl.id(),b)),a)},updateServiceProcessStatus:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="unit:{1}" resource-type="Systemd"/>',Njl.id(),
b)),a)},getServiceActiveState:function(){return this.serviceActiveState?this.serviceActiveState:E_FAIL},getServiceSubState:function(){return this.serviceSubState?this.serviceSubState:E_FAIL},getServiceStateProgress:function(){return this.serviceStateProgress?this.serviceStateProgress:E_FAIL},commitAppUpgrade:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><AppName>{1}</AppName></xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b)),a)},installAppDryRun:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><AppName>{1}</AppName></xs:arg>                        <xs:arg><DryRun>1</DryRun></xs:arg>                    </xs:args>                </xs:command>',Njl.id(),b)),a)},getInstallRelativeApps:function(){return this.installRNodes},
getBrokenState:function(){return this.brokenstate},commitAppInstall:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><AppName>{1}</AppName></xs:arg>                    </xs:args>                </xs:command>',Njl.id(),b)),a)},commitAppState:function(a,b,c){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="{1}" resource-type="LocalApp">                    <Application resource-type="LocalApp" resource-id="{1}" state="{2}"/>                </xs:set>',
Njl.id(),b,c)),a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){a.getAttributeText("resource-id");var b=a.getAttributeText("resource-type"),c=this.uninstallRNodes=[],d=this.installRNodes=[];this.brokenstate="";if(b=="LocalApp"){$_(a.selectNodes("LocalApp_Collection/Application")).forEach(function(e){if(a.getNodeName()=="xs:delete-s")c.push(e.selectSingleNode("Name").getNodeText());else a.getNodeName()=="xs:command-s"&&d.push({id:e.getAttributeText("resource-id"),name:e.selectSingleNode("Name").getNodeText(),
version:e.selectSingleNode("Version").getNodeText(),debianpackage:e.selectSingleNode("DebianPackage").getNodeText()})});if(b=a.selectSingleNode("LocalApp_Collection/BrokenState"))this.brokenstate=b.getNodeText()}else switch(b){case "Systemd":this.serviceActiveState=a.selectSingleNode("SystemdUnit").getAttributeText("active-state");this.serviceSubState=a.selectSingleNode("SystemdUnit").getAttributeText("sub-state");this.serviceStateProgress=a.selectSingleNode("SystemdUnit").getAttributeText("status-text");
break;case "BgProcess":this.pidStatus=a.selectSingleNode("BgProcessStatus").getAttributeText("status");break;default:this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");if(this.x.selectSingleNode("NewerVersion"))this.xminv=this.x.selectSingleNode("NewerVersion").getAttributeText("MinFirmwareVer");break}return S_OK}}});Njl.namespace("dpv");
dpv.smartlocalappManager=Njl.inherit(CComEventsObjectRoot("ISmartLocalAppManagerEvents"),dpv.base,ISmartLocalAppManager,IDeviceWebEventSinkEvents,{constructor:function(){dpv.smartlocalappManager.superclass.constructor.apply(this,arguments)},ISmartLocalAppManager:{updateLocalApps:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="LocalApp" resource-type="LocalApp_Collection"/>',Njl.id())),a)},getLocalApps:function(){return this.LocalApp?this.LocalApp.getChildren():
E_FAIL},updateLocalAvailableApps:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="LocalAvailable" resource-type="LocalApp_Collection"/>',Njl.id())),a)},getLocalAvailableApps:function(){return this.LocalAvailable?this.LocalAvailable.getChildren():E_FAIL},updateEOLApps:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="EolApp" resource-type="LocalApp_Collection"/>',Njl.id())),a)},getEOLApps:function(){return this.EOLApps},
updateFeaturedApps:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FeaturedApp" resource-type="LocalApp_Collection"/>',Njl.id())),a)},getFeaturedApps:function(){return this.FeaturedApp?this.FeaturedApp.getChildren():E_FAIL},updateFeaturedAppsVisible:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FeaturedApps" resource-type="System"/>',Njl.id())),a)},getFeaturedAppsVisible:function(){return this.featuredAppsVisabile!==
undefined?this.featuredAppsVisabile:E_FAIL},updateLocalInstalledApps:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="LocalInstalled" resource-type="LocalApp_Collection"/>',Njl.id())),a)},getLocalInstalledApps:function(){return this.LocalInstalled?this.LocalInstalled.getChildren():E_FAIL},updateLocalGenieApps:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AllApp" resource-type="LocalApp_Collection"/>',Njl.id())),
a)},getLocalGenieApps:function(){return this.AllApp?this.AllApp.getChildren():E_FAIL},updateLocalLaunchableApps:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="LaunchableApp" resource-type="LocalApp_Collection"/>',Njl.id())),a)},getLocalLaunchableApps:function(){return this.LaunchableApp?this.LaunchableApp.getChildren():E_FAIL},updateLocalApp:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="LocalApp"/>',
Njl.id(),b)),a)},getAppBackgroundProcessStatus:function(){return this.pidStatus?this.pidStatus:E_FAIL},updateAppBackgroundProcessStatus:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BgProcess"/>',Njl.id(),b)),a)},updateServiceProcessStatus:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="unit:{1}.service" resource-type="Systemd"/>',Njl.id(),b)),a)},getServiceActiveState:function(){return this.serviceActiveState?
this.serviceActiveState:E_FAIL},getServiceSubState:function(){return this.serviceSubState?this.serviceSubState:E_FAIL},getServiceStateProgress:function(){return this.serviceStateProgress?this.serviceStateProgress:E_FAIL},commitCheckUpdate:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>apt-update</xs:command_name>                </xs:command>',Njl.id())),a)},installAppDryRun:function(a,
b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><DebFile>/tmp/{1}</DebFile></xs:arg>                        <xs:arg><DryRun>1</DryRun></xs:arg>                    </xs:args>                </xs:command>',Njl.id(),b)),a)},getInstallRelativeApps:function(){return this.installRNodes},getBrokenState:function(){return this.brokenstate},
commitAppInstall:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                 <xs:command_name>app-install</xs:command_name>                  <xs:args>                    <xs:arg><DebFile>/tmp/{1}</DebFile></xs:arg>                  </xs:args>                </xs:command>',Njl.id(),b)),a)},commitFeaturedAppsVisible:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="FeaturedApps" resource-type="System">                    <Is_Visible>{1}</Is_Visible>                </xs:set>',
Njl.id(),b?"1":"0")),a)}},IDeviceWebEventSinkEvents:{OnEvent:function(a,b,c,d,e){if(e=="xs:update-s"){a=CComQIPtr(new dpv.localprogress,"IXDomNode");if(a.loadFromXml(b[0])==S_OK)var f=CComQIPtr(a,"ISmartProgress");f.getStatusString()==="ABORT"?this.Fire("OnInstallationAbort",[f]):this.Fire("OnReceiveProgressData",[f])}return S_OK}},IXDomNode:{getXml:function(){return this.x},Initialize:function(a){if(a=CComQIPtr(a,"IDevice"))return CComQIPtr(a.getWebEventSink(),"INotifySink").Advise(this,"LocalApp");
return E_FAIL},loadFromXml:function(a,b){CComQIPtr(this,"IXDomNode");var c=a.getAttributeText("resource-id"),d=a.getAttributeText("resource-type"),e=this.installRNodes=[],f=this.EOLApps=[];this.brokenstate="";switch(d){case "BgProcess":this.pidStatus=a.selectSingleNode("BgProcessStatus").getAttributeText("status");break;case "Systemd":this.serviceActiveState=a.selectSingleNode("SystemdUnit").getAttributeText("active-state");this.serviceSubState=a.selectSingleNode("SystemdUnit").getAttributeText("sub-state");
this.serviceStateProgress=a.selectSingleNode("SystemdUnit").getAttributeText("status-text");break;case "System":this.featuredAppsVisabile=(c=CComQIPtr(new dpv.xprop(a),"IXPropertyList"))&&c.getProperty("Is_Visible")==="1";break;case "LocalApp":if(a.getNodeName()=="xs:command-s"){$_(a.selectNodes("LocalApp_Collection/Application")).forEach(function(h){a.getNodeName()=="xs:command-s"&&e.push({id:h.getAttributeText("resource-id"),name:h.selectSingleNode("Name").getNodeText(),version:h.selectSingleNode("Version").getNodeText(),
debianpackage:h.selectSingleNode("DebianPackage").getNodeText()})});if(c=a.selectSingleNode("LocalApp_Collection/BrokenState"))this.brokenstate=c.getNodeText()}else{d=CComQIPtr(new dpv.localapp,"IXDomNode");if(d.loadFromXml(a.selectSingleNode("Application"))==S_OK){CComQIPtr(this,"IXDomNode").appendChild(d);this.Fire("OnUpdateLocalApp",[this,b,CComQIPtr(d,"ISmartLocalApp")])}}break;case "LocalApp_Collection":if(c==="LocalApp"||c==="LocalAvailable"||c==="LocalInstalled"||c==="AllApp"||c==="LaunchableApp"||
c==="FeaturedApp"){d=CComQIPtr(this,"IXDomNode");this[c]&&d.removeChild(this[c]);this[c]=CComQIPtr(new dpv.base,"IXDomNode");b=a.selectNodes("LocalApp_Collection/*");d.appendChild(this[c]);for(var g in b)if(!Njl.isFunction(b[g])){d=CComQIPtr(new dpv.localapp,"IXDomNode");this[c].appendChild(d);d.loadFromXml(b[g])!=S_OK&&this[c].removeChild(d)}}else c==="EolApp"&&$_(a.selectNodes("LocalApp_Collection/Application")).forEach(function(h){f.push({Name:h.selectSingleNode("Name").getNodeText(),UnSupportedSystype:h.selectSingleNode("UnSupportedSystype")?
h.selectSingleNode("UnSupportedSystype").getNodeText():"*"})});break;default:break}return S_OK}}});Njl.namespace("dpv");
dpv.localprogress=Njl.inherit(CComEventsObjectRoot("ISmartProgressEvents"),dpv.base,ISmartProgress,{constructor:function(){dpv.localprogress.superclass.constructor.apply(this,arguments)},ISmartProgress:{getId:function(){return this.x?dpv.xa2t(this.x,"resource-id"):E_FAIL},getType:function(){return this.x?dpv.xa2t(this.x,"resource-type"):E_FAIL},getPackageName:function(){return this.x?dpv.xa2t(this.x,"pkgname"):E_FAIL},getPID:function(){return dpv.gp(this.xproptlist,"id")},getStatusString:function(){return dpv.gp(this.xproptlist,
"status")},getStatusMsgString:function(){return dpv.gp(this.xproptlist,"status_msg")},getLogMsg:function(){return dpv.gp(this.xproptlist,"logmsgtag")},getElapsedSeconds:function(){return dpv.gp(this.xproptlist,"elapsed-seconds")},getRemainingSeconds:function(){return dpv.gp(this.xproptlist,"remaining-seconds")},getProgressPercentage:function(){return dpv.gp(this.xproptlist,"progress-percent")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.p2pManager=Njl.inherit(CComEventsObjectRoot("IP2PManagerEvents"),dpv.base,IP2PManager,{constructor:function(){dpv.p2pManager.superclass.constructor.apply(this,arguments)},IP2PManager:{updateP2PConfigurations:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="P2P" resource-type="P2P:App"/>',Njl.id())),a)},commitP2PConfigurations:function(a){if(this.xconfig)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="P2P" resource-type="P2P:App">{1}</xs:set>',Njl.id(),
this.xconfig)),a);return E_FAIL},getDeviceId:function(){return dpv.gp(this.xacctinfo,"Username")},getP2PStatus:function(){return this.xconfig?!!parseInt(this.xconfig.getNodeText("Status")):E_FAIL},getNetworkConn:function(){return this.xconfig?!!parseInt(this.xconfig.getNodeText("NetworkConnection")):E_FAIL},getP2PState:function(){return dpv.xa2t(this.xstate,"value")?dpv.xa2t(this.xstate,"value"):E_FAIL},getProxyServerEnableStatus:function(){return dpv.gp(this.xconnsettings,"UseProxy")==="False"?false:
true},putProxyServerEnableStatus:function(a){return a?dpv.pp(this.xconnsettings,"UseProxy","True"):dpv.pp(this.xconnsettings,"UseProxy","False")},getProxyType:function(){return this.xproxytype?this.xproxytype.getAttributeText("Value"):E_FAIL},putProxyType:function(a){return this.xproxytype?this.xproxytype.setAttributeText(a,"Value"):E_FAIL},getProxyAddr:function(){return this.xproxytype?this.xproxytype.getAttributeText("Address"):E_FAIL},putProxyAddr:function(a){return this.xproxytype?this.xproxytype.setAttributeText(a,
"Address"):E_FAIL},getProxyPort:function(){return this.xproxytype?this.xproxytype.getAttributeText("Port"):E_FAIL},putProxyPort:function(a){return this.xproxytype?this.xproxytype.setAttributeText(a,"Port"):E_FAIL},getProxyUsername:function(){return dpv.gp(this.xproxytypeprop,"Username")},putProxyUsername:function(a){return dpv.pp(this.xproxytypeprop,"Username",a)},getProxyPass:function(){return dpv.gp(this.xproxytypeprop,"Password")},putProxyPass:function(a){return dpv.pp(this.xproxytypeprop,"Password",
a)},getSpecConnEnableStatus:function(){return dpv.gp(this.xconnsettings,"UsePortForwarding")==="False"?false:true},putSpecConnEnableStatus:function(a){return a?dpv.pp(this.xconnsettings,"UsePortForwarding","True"):dpv.pp(this.xconnsettings,"UsePortForwarding","False")},getSpecConnProtocol:function(){return this.xspec?this.xspec.getAttributeText("Protocol"):E_FAIL},putSpecConnProtocol:function(a){return this.xspec?this.xspec.setAttributeText(a,"Protocol"):E_FAIL},getSpecConnPort:function(){return this.xspec?
this.xspec.getAttributeText("Port"):E_FAIL},putSpecConnPort:function(a){return this.xspec?this.xspec.setAttributeText(a,"Port"):E_FAIL},getSecEncryptEnableStatus:function(){return!!parseInt(dpv.gp(this.xsettings,"Encryption"))},putSecEncryptEnableStatus:function(a){return dpv.pp(this.xsettings,"Encryption",a?"1":"0")},getSecFirewallEnableStatus:function(){return!!parseInt(dpv.gp(this.xsettings,"Firewall"))},putSecFirewallEnableStatus:function(a){return dpv.pp(this.xsettings,"Firewall",a?"1":"0")},
getLogDebugLevel:function(){return dpv.gp(this.xsettings,"Debug")},putLogDebugLevel:function(a){return dpv.pp(this.xsettings,"Debug",a)},getLogMaxEntries:function(){return dpv.gp(this.xsettings,"LogEntryLimit")},putLogMaxEntries:function(a){return dpv.pp(this.xsettings,"LogEntryLimit",a)},getLogFlushEntries:function(){return dpv.gp(this.xsettings,"LogEntryFlush")},putLogFlushEntries:function(a){return dpv.pp(this.xsettings,"LogEntryFlush",a)},restartP2P:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="P2P" resource-type="P2P:App">                    <xs:command_name>Restart</xs:command_name>                    <xs:args/>                 </xs:command>',
Njl.id())),a)},updateRemoteAccessList:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Remote" resource-type="Remote:App"/>',Njl.id())),a)},commitRemoteAccessList:function(a){if(this.xremote)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Remote" resource-type="Remote:App">{1}</xs:set>',Njl.id(),this.xremote)),a);return E_FAIL},getP2PRemoteUsers:function(){return this.xaccesslist?this.xaccesslist.getChildren():E_FAIL},appendP2PRemoteUser:function(a,
b){b=b?new Njl.Xml.document(String.format('<User FullName="*email invite*" UserName="{0}"/>',a)):new Njl.Xml.document(String.format('<User FullName="" UserName="{0}"/>',a));if(this.xremote&&b){var c=this.xremote.selectSingleNode("Shares/Share/AccessList");if(c){a=CComQIPtr(new dpv.p2pRemoteUser,"IXDomNode");a.loadFromXml(b);if(b=c.appendNode(a.getXml())){a.loadFromXml(b);return S_OK}}}return E_FAIL},removeP2PRemoteUser:function(a){if(this.xremote&&a)if(a=this.xremote.selectSingleNode("Shares/Share/AccessList/*[@UserName='"+
a+"']"))if(a.removeNode())return S_OK;return E_FAIL},queryP2PRemoteUsers:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="Contact:P2P:App">                    <xs:qualifier/>                    <xs:criterion>                       <xs:like property="Email" value="{1}"/>                    </xs:criterion>                 </xs:query>',Njl.id(),b)),a)},getP2PQueryUsers:function(){return this.xqueryusers?this.xqueryusers.getChildren():E_FAIL},startP2P:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="P2P" resource-type="P2P:App">                    <xs:command_name>Start</xs:command_name>                    <xs:args/>                 </xs:command>',
Njl.id())),a)},stopP2P:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="P2P" resource-type="P2P:App">                    <xs:command_name>Stop</xs:command_name>                    <xs:args/>                 </xs:command>',Njl.id())),a)},updateReadyDropStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="ReadyDrop" resource-type="ReadyDrop:App"/>',Njl.id())),a)},getReadyDropStatus:function(){return this.rdStatus?
this.rdStatus:E_FAIL},getReadyDropVolume:function(){return this.rdVolume?this.rdVolume:E_FAIL},commitReadyDropVolume:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="ReadyDrop" resource-type="ReadyDrop:App">                    <Volume>{1}</Volume>                </xs:set>',Njl.id(),a)),b)},commitReadyDropStatus:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="ReadyDrop" resource-type="ReadyDrop:App">                    <xs:command_name>{1}</xs:command_name>                </xs:command>',
Njl.id(),a=="on"?"Start":a=="off"?"Stop":"Restart")),b,undefined,undefined,undefined,36E4)},updateDiscoverServiceStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DiscoverService" resource-type="DiscoverService:App"/>',Njl.id())),a)},getDiscoverServiceStatus:function(){return this.dsStatus?this.dsStatus:E_FAIL},commitDiscoverServiceStatus:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="DiscoverService" resource-type="DiscoverService:App">                    <xs:command_name>{1}</xs:command_name>                </xs:command>',
Njl.id(),a=="on"?"Start":a=="off"?"Stop":"")),b,undefined,undefined,undefined,36E4)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=a.getAttributeText("resource-type"),c=a.selectNodes("./*");if(b==="P2P:App"){this.xconfig=this.x=c[0];this.xstate=this.xconfig.selectSingleNode("State");this.xacctinfo=this.xconfig.selectSingleNode("Configuration/AccountInformation");this.xsettings=this.xconfig.selectSingleNode("Configuration/Settings");this.xconnsettings=this.xconfig.selectSingleNode("Configuration/ConnectionSettings");
this.xproxytype=this.xconfig.selectSingleNode("Configuration/ConnectionSettings/ProxyType");this.xspec=this.xconfig.selectSingleNode("Configuration/ConnectionSettings/PortForwarding");this.xacctinfo=CComQIPtr(new dpv.xprop(this.xacctinfo),"IXPropertyList");this.xsettings=CComQIPtr(new dpv.xprop(this.xsettings),"IXPropertyList");this.xconnsettings=CComQIPtr(new dpv.xprop(this.xconnsettings),"IXPropertyList");this.xproxytypeprop=CComQIPtr(new dpv.xprop(this.xproxytype),"IXPropertyList")}else if(b===
"Remote:App"){this.xremote=this.x=c[0];a=CComQIPtr(this,"IXDomNode");this.xaccesslist&&a.removeChild(this.xaccesslist);this.xaccesslist=CComQIPtr(new dpv.base,"IXDomNode");var d=this.xremote.selectNodes("Shares/Share/AccessList/*");if(d){a.appendChild(this.xaccesslist);for(var e in d)if(!Njl.isFunction(d[e])){a=CComQIPtr(new dpv.p2pRemoteUser,"IXDomNode");this.xaccesslist.appendChild(a);a.loadFromXml(d[e])!=S_OK&&this.xaccesslist.removeChild(a)}}}else if(b==="Contact:P2P:App"){this.xcontact=this.x=
c[0];a=CComQIPtr(this,"IXDomNode");this.xqueryusers&&a.removeChild(this.xqueryusers);this.xqueryusers=CComQIPtr(new dpv.base,"IXDomNode");if(e=this.xcontact.selectNodes("./*")){a.appendChild(this.xqueryusers);for(d in e)if(!Njl.isFunction(e[d])){a=CComQIPtr(new dpv.p2pQueryUser,"IXDomNode");this.xqueryusers.appendChild(a);a.loadFromXml(e[d])!=S_OK&&this.xqueryusers.removeChild(a)}}}else if(b==="ReadyDrop:App"){e=a.getNodeName();if(e=="xs:get-s"){this.rdStatus=a.selectSingleNode("Properties/state").getNodeText();
this.rdVolume=a.selectSingleNode("Properties/volume").getNodeText()}}else if(b==="DiscoverService:App"){e=a.getNodeName();if(e=="xs:get-s")this.dsStatus=a.selectSingleNode("Properties/state").getNodeText()}return S_OK}}});Njl.namespace("dpv");
dpv.upsConfigManager=Njl.inherit(CComEventsObjectRoot("IUpsConfigManagerEvents"),dpv.base,IUpsConfigManager,{constructor:function(){dpv.upsConfigManager.superclass.constructor.apply(this,arguments)},IUpsConfigManager:{UpdateUpsConfigs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="UpsConfig_Collection" resource-type="UpsConfig_Collection"/>',Njl.id())),a)},getUpsConfigs:function(){return this.upsconfigs?this.upsconfigs.getChildren():E_FAIL},AddLocalUpsConfig:function(a,
b,c,d,e,f){var g=CComQIPtr(new dpv.upsconfig,"IUpsConfig");g.putName(b);g.putDescription(c);g.putType("local");g.putLocalAddress(d);g.putLocalEnabled(e);g.putShutDownThreshold(f);b=CComQIPtr(g,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="UpsConfig">{1}</xs:add>',Njl.id(),b)),a)},AddSnmpUpsConfig:function(a,b,c,d,e,f,g){var h=CComQIPtr(new dpv.upsconfig,"IUpsConfig");h.putName(b);h.putDescription(c);h.putType("snmp");h.putSnmpAddress(d);
h.putSnmpCommunity(e);h.putSnmpMibs(f);h.putShutDownThreshold(g);b=CComQIPtr(h,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="UpsConfig">{1}</xs:add>',Njl.id(),b)),a,null,null,null,3E5)},AddRemoteUpsConfig:function(a,b,c,d,e,f,g){var h=CComQIPtr(new dpv.upsconfig,"IUpsConfig");h.putName(b);h.putDescription(c);h.putType("remote");h.putRemoteAddress(d);h.putRemoteUserName(e);h.putRemotePassword(f);h.putShutDownThreshold(g);b=CComQIPtr(h,
"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="UpsConfig">{1}</xs:add>',Njl.id(),b)),a,null,null,null,3E5)},CommitUpsConfig:function(a,b){b=CComQIPtr(b,"IUpsConfig");b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="UpsConfig">{1}</xs:set>',Njl.id(),b)),a,null,null,null,3E5)},DeleteUpsConfig:function(a,b){b=CComQIPtr(b,"IUpsConfig");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="UpsConfig"/>',
Njl.id(),b.getId())),a,null,null,null,3E5)}},IXDomNode:{loadFromXml:function(a){this.x=a;a=CComQIPtr(this,"IXDomNode");if(this.x.selectSingleNode("UpsConfig_Collection")){this.upsconfigs&&a.removeChild(this.upsconfigs);this.upsconfigs=CComQIPtr(new dpv.base,"IXDomNode");var b=this.x.selectNodes("UpsConfig_Collection/UpsConfig");b&&b.length!=0&&Njl.each(b,function(c){var d=CComQIPtr(new dpv.upsconfig,"IXDomNode");d.loadFromXml(c)==S_OK&&this.upsconfigs.appendChild(d)},this);a.appendChild(this.upsconfigs)}return S_OK}}});
dpv.upsconfig=Njl.inherit(dpv.base,IUpsConfig,{constructor:function(a){dpv.upsconfig.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <UpsConfig resource-id="" resource-type="UpsConfig">                    <Name />                    <Description />                    <Type />                    <SnmpAddress />                    <SnmpCommunity />                    <SnmpMibs />                    <ShutDownThreshold />                    <RemoteUserName />                    <RemotePassword />                    <RemoteAddress />                    <Share_enabled />                    <List1 />                </UpsConfig>')).selectNodes("./*")[0])},
IUpsConfig:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):E_FAIL},getName:function(){return dpv.gp(this.xupsconfig,"Name")},putName:function(a){return dpv.pp(this.xupsconfig,"Name",a)},getDescription:function(){return dpv.gp(this.xupsconfig,"Description")},putDescription:function(a){return dpv.pp(this.xupsconfig,"Description",a)},getType:function(){return dpv.gp(this.xupsconfig,"Type")},putType:function(a){return dpv.pp(this.xupsconfig,"Type",a)},getSnmpAddress:function(){return dpv.gp(this.xupsconfig,
"SnmpAddress")},putSnmpAddress:function(a){return dpv.pp(this.xupsconfig,"SnmpAddress",a)},getSnmpCommunity:function(){return dpv.gp(this.xupsconfig,"SnmpCommunity")},putSnmpCommunity:function(a){return dpv.pp(this.xupsconfig,"SnmpCommunity",a)},getSnmpMibs:function(){return dpv.gp(this.xupsconfig,"SnmpMibs")},putSnmpMibs:function(a){return dpv.pp(this.xupsconfig,"SnmpMibs",a)},getShutDownThreshold:function(){return dpv.gp(this.xupsconfig,"ShutDownThreshold")},putShutDownThreshold:function(a){return dpv.pp(this.xupsconfig,
"ShutDownThreshold",a)},getRemoteUserName:function(){return dpv.gp(this.xupsconfig,"RemoteUserName")},putRemoteUserName:function(a){return dpv.pp(this.xupsconfig,"RemoteUserName",a)},getRemotePassword:function(){return dpv.gp(this.xupsconfig,"RemotePassword")},putRemotePassword:function(a){return dpv.pp(this.xupsconfig,"RemotePassword",a)},getRemoteAddress:function(){return dpv.gp(this.xupsconfig,"RemoteAddress")},putRemoteAddress:function(a){return dpv.pp(this.xupsconfig,"RemoteAddress",a)},getLocalAddress:function(){return dpv.gp(this.xupsconfig,
"List1")},putLocalAddress:function(a){return dpv.pp(this.xupsconfig,"List1",a)},getLocalEnabled:function(){return dpv.gp(this.xupsconfig,"Share_enabled")},putLocalEnabled:function(a){return dpv.pp(this.xupsconfig,"Share_enabled",a?"1":"0")},getShutdownThreshold:function(){return dpv.gp(this.xupsconfig,"ShutDownThreshold")},putShutdownThreshold:function(a){return dpv.pp(this.xupsconfig,"ShutDownThreshold",a)},getUpsStatus:function(){return dpv.gp(this.xupsconfig,"ups_status")},getUpsRawStatus:function(){return dpv.gp(this.xupsconfig,
"ups_raw_status")},getAlarm:function(){return dpv.gp(this.xupsconfig,"ups_alarm")},getUpsModel:function(){return dpv.gp(this.xupsconfig,"UpsModel")},getUpsMfr:function(){return dpv.gp(this.xupsconfig,"UpsMfr")},getUpsSerial:function(){return dpv.gp(this.xupsconfig,"UpsSerial")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xupsconfig=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.fwpackage=Njl.inherit(CComObjectRoot,dpv.base,IFWPackage,{constructor:function(){dpv.fwpackage.superclass.constructor.apply(this,arguments)},IFWPackage:{getName:function(){return this.x?this.x.getAttributeText("name"):E_FAIL},getVersion:function(){return this.x?this.x.getAttributeText("version"):E_FAIL},getStatus:function(){return this.x?this.x.getAttributeText("status"):E_FAIL}},IXDomNode:{loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.p2pQueryUser=Njl.inherit(CComEventsObjectRoot,dpv.base,IP2PQueryUser,{constructor:function(){dpv.p2pQueryUser.superclass.constructor.apply(this,arguments)},IP2PQueryUser:{getUserId:function(){return dpv.gp(this.xqprop,"Id")},getUserName:function(){return dpv.gp(this.xqprop,"UserName")},getFirstName:function(){return dpv.gp(this.xqprop,"FirstName")},getLastName:function(){return dpv.gp(this.xqprop,"LastName")},getEmail:function(){return dpv.gp(this.xqprop,"Email")},getType:function(){return dpv.gp(this.xqprop,
"Type")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xqprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.p2pRemoteUser=Njl.inherit(CComEventsObjectRoot,dpv.base,IP2PRemoteUser,{constructor:function(){dpv.p2pRemoteUser.superclass.constructor.apply(this,arguments)},IP2PRemoteUser:{getFullName:function(){return this.x?this.x.getAttributeText("FullName"):E_FAIL},getUserName:function(){return this.x?this.x.getAttributeText("UserName"):E_FAIL},getChannel:function(){return this.x?this.x.getAttributeText("Channel"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});
Njl.namespace("dpv");
dpv.sprotodfs=Njl.inherit(CComEventsObjectRoot(),dpv.base,IShareProtocolHost,{constructor:function(a){dpv.sprotohost.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <DFS_folder>                    <Name></Name>                    <Address></Address>                    <Remote_Share></Remote_Share>                </DFS_folder>")).selectNodes("./*")[0])},IShareProtocolDFS:{getName:function(){return dpv.gp(this.xsprotodfs,"Name")},
getAddress:function(){return dpv.gp(this.xsprotodfs,"Address")},getRemoteShare:function(){return dpv.gp(this.xsprotodfs,"Remote_Share")},putName:function(a){return dpv.pp(this.xsprotodfs,"Name",a)},putAddress:function(a){return dpv.pp(this.xsprotodfs,"Address",a)},putRemoteShare:function(a){return dpv.pp(this.xsprotodfs,"Remote_Share",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsprotodfs=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});
Njl.namespace("dpv");dpv.dropbox=Njl.inherit(CComObjectRoot,dpv.base,IDropBox,{constructor:function(){dpv.dropbox.superclass.constructor.apply(this,arguments)},IDropBox:{getDropBoxState:function(){return this.x?this.x.getAttributeText("state"):E_FAIL},putDropBoxState:function(a){return this.x?this.x.setAttributeText(a,"state"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.dropboxshare=Njl.inherit(CComObjectRoot,dpv.base,IDropBoxShare,{constructor:function(){dpv.dropboxshare.superclass.constructor.apply(this,arguments)},IDropBoxShare:{getDropBoxShareId:function(){return this.x?this.x.getAttributeText("id"):E_FAIL},getDropBoxShareName:function(){return this.x?this.x.getAttributeText("share-name"):E_FAIL},getSelectedShare:function(){return this.x?this.x.getAttributeText("used-by-fvdropbox"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;return S_OK}}});Njl.namespace("dpv");dpv.amazon=Njl.inherit(CComObjectRoot,dpv.base,IAmazon,{constructor:function(){dpv.amazon.superclass.constructor.apply(this,arguments)},IAmazon:{getAmazonState:function(){return this.x?this.x.getAttributeText("state"):E_FAIL},putAmazonState:function(a){return this.x?this.x.setAttributeText(a,"state"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv");
dpv.amazonshare=Njl.inherit(CComObjectRoot,dpv.base,IAmazonShare,{constructor:function(){dpv.amazonshare.superclass.constructor.apply(this,arguments)},IAmazonShare:{getAmazonShareId:function(){return this.x?this.x.getAttributeText("id"):E_FAIL},getAmazonShareName:function(){return this.x?this.x.getAttributeText("share-name"):E_FAIL},getSelectedShare:function(){return this.x?this.x.getAttributeText("used-by-fvamazon"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;return S_OK}}});Njl.namespace("dpv");
dpv.mediabackup=Njl.inherit(CComObjectRoot,dpv.base,IMediaBackup,{constructor:function(){dpv.mediabackup.superclass.constructor.apply(this,arguments)},IMediaBackup:{getEnabled:function(){return dpv.gp(this.xm,"Enabled")==="1"?true:false},putEnabled:function(a){return dpv.pp(this.xm,"Enabled",a?1:0)},getDeleteSource:function(){return dpv.gp(this.xm,"DelSrc")==="1"?true:false},putDeleteSource:function(a){return dpv.pp(this.xm,"DelSrc",a?1:0)},getRoot:function(){return dpv.gp(this.xm,"RootDir")},putRoot:function(a){return dpv.pp(this.xm,
"RootDir",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xm=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.mediabackupstatus=Njl.inherit(CComObjectRoot,dpv.base,IMediaBackupStatus,{constructor:function(){dpv.mediabackupstatus.superclass.constructor.apply(this,arguments)},IMediaBackupStatus:{getStatus:function(){return dpv.gp(this.xm,"Status")},getStatusResult:function(){return dpv.gp(this.xm,"Status_Result")},getTotalBytes:function(){return dpv.gp(this.xp,"Total_In_Bytes")},getTotalFiles:function(){return dpv.gp(this.xp,"Total_Num_Of_Files")},getCopiedFiles:function(){return dpv.gp(this.xp,"Copied_Num_Of_Files")},
getSpeed:function(){return dpv.gp(this.xp,"Speed_In_Bytes_Per_Second")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xm=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");this.xp=CComQIPtr(new dpv.xprop(a.selectSingleNode("Progress")),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.statsManager=Njl.inherit(CComEventsObjectRoot("IStatsManagerEvents"),dpv.base,IStatsManager,{constructor:function(){dpv.statsManager.superclass.constructor.apply(this,arguments)},IStatsManager:{UpdateZfsArcStats:function(a,b,c,d,e){CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IDevice");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="opid" resource-id="{0}" resource-type="zfs_arc_stats">                    <xs:command_name>get_graph</xs:command_name>                    <xs:args>                        <xs:arg>                            <options graph_type="{1}" period="{2}" width="{3}" height="{4}"/>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),a,b,c,d)),e)}},IXDomNode:{loadFromXml:function(a,b){switch(a.getAttributeText("resource-type")){case "zfs_arc_stats":if((a=a.selectSingleNode("zfs_arc_graph"))&&a!=E_FAIL){(a=a.getAttributeText("image"))&&a!=E_FAIL&&this.Fire("OnZfsArcStatsUpdate",[b,a]);return S_OK}break}return E_FAIL}}});Njl.namespace("dpv");
dpv.zfsVolScheduleManager=Njl.inherit(CComEventsObjectRoot("IZFSVolumeScheduleManagerEvents"),dpv.base,IZFSVolumeScheduleManager,{constructor:function(){dpv.zfsVolScheduleManager.superclass.constructor.apply(this,arguments)},IZFSVolumeScheduleManager:{UpdateSchedules:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="VolumeScheduleCollection" resource-type="VolumeScheduleCollection"/>',Njl.id())),a)},getSchedules:function(){return this.schedules?CComQIPtr(this.schedules,
"IXDomNode").getChildren():E_FAIL},AddSchedule:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="VolumeSchedule">                    <Volume_Schedule_Collection>                        {1}                    </Volume_Schedule_Collection>                </xs:add>',Njl.id(),CComQIPtr(a,"IXDomNode").getXml().toString())),b)},CommitSchedule:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="VolumeSchedule">                    <Volume_Schedule_Collection>                        {1}                    </Volume_Schedule_Collection>                </xs:set>',
Njl.id(),CComQIPtr(a,"IXDomNode").getXml().toString())),b)},RemoveSchedule:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-type="VolumeSchedule">                    <Volume_Schedule_Collection>                        {1}                    </Volume_Schedule_Collection>                </xs:delete>',Njl.id(),CComQIPtr(a,"IXDomNode").getXml().toString())),b)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),
c=a.selectNodes("Volume_Schedule_Collection");if(c){this.x=a;c=a.selectNodes("Volume_Schedule_Collection/Volume_Schedule");this.schedules&&b.removeChild(this.schedules);this.schedules=CComQIPtr(new dpv.base,"IXDomNode");this.schedules.hash=[];b.appendChild(this.schedules);Njl.each(c,function(d){var e=CComQIPtr(new dpv.zfsVolSchedule(true),"IXDomNode");if(e.loadFromXml(d)==S_OK){d=CComQIPtr(e,"IZFSVolumeSchedule");this.schedules.appendChild(e);this.schedules.hash[d.getId()]=d}},this);return S_OK}return E_FAIL}}});
Njl.namespace("dpv");
dpv.zfsVolSchedule=Njl.inherit(CComEventsObjectRoot("IZFSVolumeScheduleEvents"),dpv.base,IZFSVolumeSchedule,{constructor:function(a){dpv.zfsVolSchedule.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('<Volume_Schedule resource-id="unknown" resource-type="VolumeSchedule">                    <VolumeName>data</VolumeName>                    <JobID></JobID>                    <Action></Action>                    <Enabled>1</Enabled>                    <Interval>                        <Minute>*</Minute>                        <Hour>*</Hour>                        <DayOfMonth>*</DayOfMonth>                        <Month>*</Month>                        <DayOfWeek>*</DayOfWeek>                    </Interval>                </Volume_Schedule>')).selectNodes("./*")[0]);this.mask=
0},IZFSVolumeSchedule:{IsDirty:function(){return this.mask!==0},IsMarkedToDelete:function(){return(this.mask&8)===8},MarkToDelete:function(){this.mask=(this.mask&8)===8?this.mask&-9:this.mask|8;return S_OK},getId:function(){return dpv.gp(this.xproptlist,"JobID")},putId:function(a){return dpv.pp(this.xproptlist,"JobID",a)},getAction:function(){return dpv.gp(this.xproptlist,"Action")},putAction:function(a){this.mask=(this.mask&2)===2?this.mask&-3:this.mask|2;return dpv.pp(this.xproptlist,"Action",a)},
getEnabled:function(){return dpv.gp(this.xproptlist,"Enabled")},putEnabled:function(a){this.mask=(this.mask&4)===4?this.mask&-5:this.mask|4;return dpv.pp(this.xproptlist,"Enabled",a)},getVolumeName:function(){return dpv.gp(this.xproptlist,"VolumeName")},putVolumeName:function(a){this.mask=(this.mask&16)===16?this.mask&-17:this.mask|16;return dpv.pp(this.xproptlist,"VolumeName",a)},getIntervalMinute:function(){return dpv.gp(this.intervalproptlist,"Minute")},putIntervalMinute:function(a){this.mask=
(this.mask&32)===32?this.mask&-33:this.mask|32;return dpv.pp(this.intervalproptlist,"Minute",a)},getIntervalHour:function(){return dpv.gp(this.intervalproptlist,"Hour")},putIntervalHour:function(a){this.mask=(this.mask&64)===64?this.mask&-65:this.mask|64;return dpv.pp(this.intervalproptlist,"Hour",a)},getIntervalDayOfMonth:function(){return dpv.gp(this.intervalproptlist,"DayOfMonth")},putIntervalDayOfMonth:function(a){this.mask=(this.mask&128)===128?this.mask&-129:this.mask|128;return dpv.pp(this.intervalproptlist,
"DayOfMonth",a)},getIntervalMonth:function(){return dpv.gp(this.intervalproptlist,"Month")},putIntervalMonth:function(a){this.mask=(this.mask&256)===256?this.mask&-257:this.mask|256;return dpv.pp(this.intervalproptlist,"Month",a)},getIntervalDayOfWeek:function(){return dpv.gp(this.intervalproptlist,"DayOfWeek")},putIntervalDayOfWeek:function(a){this.mask=(this.mask&512)===512?this.mask&-513:this.mask|512;return dpv.pp(this.intervalproptlist,"DayOfWeek",a)}},IXDomNode:{getXml:function(){return this.x},
loadFromXml:function(a){if(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");this.intervalproptlist=CComQIPtr(new dpv.xprop(this.x.selectSingleNode("Interval")),"IXPropertyList");return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.homeFolderOptions=Njl.inherit(dpv.share,IHomeFolderOptions,{constructor:function(){dpv.homeFolderOptions.superclass.constructor.apply(this,arguments)},IHomeFolderOptions:{},IXDomNode:{loadFromXml:function(){dpv.homeFolderOptions.superclass.IXDomNode.loadFromXml.apply(this,arguments);return Njl.isAllDefined(this.xprotlist,this.xproptlist)?S_OK:E_FAIL}}});Njl.namespace("dpv");
dpv.sacl=Njl.inherit(CComEventsObjectRoot(),dpv.base,IShareAcl,{constructor:function(a){dpv.sacl.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('<acl account="" name="" tag="" perm="" />')).selectNodes("./*")[0])},IShareAcl:{getId:function(){return this.x?this.x.getAttributeText("account"):E_FAIL},putId:function(a){return this.x?this.x.setAttributeText(a,"account"):E_FAIL},getName:function(){return this.x?this.x.getAttributeText("name"):
E_FAIL},putName:function(a){return this.x?this.x.setAttributeText(a,"name"):E_FAIL},getType:function(){return this.x?this.x.getAttributeText("tag"):E_FAIL},putType:function(a){return this.x?this.x.setAttributeText(a,"tag"):E_FAIL},getPermissions:function(){return this.x?this.x.getAttributeText("perm"):E_FAIL},putPermissions:function(a){return this.x?this.x.setAttributeText(a,"perm"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsacl=CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.sacllist=Njl.inherit(CComObjectRoot,dpv.base,IShareAclList,{constructor:function(a){dpv.sacllist.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                    <Acl_List>                        <acl tag="user-obj" perm="7"/>                        <acl account="98" name="admin" tag="user" perm="7"/>                        <acl account="99" name="guest" tag="user" perm="7"/>                        <acl tag="group-obj" perm="7"/>                        <acl account="98" name="admin" tag="group" perm="7"/>                        <acl account="99" name="guest" tag="group" perm="7"/>                        <acl tag="mask" perm="7"/>                        <acl tag="other" perm="7"/>                    </Acl_List>')).selectNodes("./*")[0])},IShareAclList:{getUserAcls:function(){return this.xusers?
this.xusers.getChildren():E_FAIL},getUserAclById:function(a){return this.xusers?this.xusers.idHash[a]:E_FAIL},getUserAclByName:function(a){return this.xusers?this.xusers.nameHash[a]:E_FAIL},getGroupAcls:function(){return this.xgroups?this.xgroups.getChildren():E_FAIL},getGroupAclById:function(a){return this.xgroups?this.xgroups.idHash[a]:E_FAIL},getGroupAclByName:function(a){return this.xgroups?this.xgroups.nameHash[a]:E_FAIL},getUserOwnerAcl:function(){return this.xuserowner},getGroupOwnerAcl:function(){return this.xgroupowner},
getMaskAcl:function(){return this.xmask},getOtherAcl:function(){return this.xother},addAcl:function(a){a=CComQIPtr(a,"IXDomNode");var b=CComQIPtr(this,"IXDomNode").getXml().appendNode(a.getXml());a.loadFromXml(b);return CComQIPtr(this,"IXDomNode").loadFromXml(CComQIPtr(this,"IXDomNode").getXml())},removeAcl:function(a){CComQIPtr(a,"IXDomNode").getXml().removeNode();return CComQIPtr(this,"IXDomNode").loadFromXml(CComQIPtr(this,"IXDomNode").getXml())}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;delete this.xuserowner;delete this.xgroupowner;delete this.xmask;delete this.xother;this.xusers=CComQIPtr(new dpv.base,"IXDomNode");this.xusers.idHash={};this.xusers.nameHash={};this.xgroups=CComQIPtr(new dpv.base,"IXDomNode");this.xgroups.idHash={};this.xgroups.nameHash={};var b=a.selectNodes("acl[@tag='user']");Njl.each(b,function(d){var e=CComQIPtr(new dpv.sacl,"IXDomNode");if(e.loadFromXml(d)==S_OK){this.xusers.appendChild(e);e=CComQIPtr(e,"IShareAcl");this.xusers.idHash[e.getId()]=e;this.xusers.nameHash[e.getName()]=
e}},this);b=a.selectNodes("acl[@tag='group']");Njl.each(b,function(d){var e=CComQIPtr(new dpv.sacl,"IXDomNode");if(e.loadFromXml(d)==S_OK){this.xgroups.appendChild(e);e=CComQIPtr(e,"IShareAcl");this.xgroups.idHash[e.getId()]=e;this.xgroups.nameHash[e.getName()]=e}},this);if(b=a.selectSingleNode("acl[@tag='user-obj']")){var c=CComQIPtr(new dpv.sacl,"IXDomNode");if(c.loadFromXml(b)==S_OK)this.xuserowner=CComQIPtr(c,"IShareAcl")}if(!this.xuserowner){this.xuserowner=CComQIPtr(CComQIPtr(new dpv.sacl,"IXDomNode"),
"IShareAcl");this.xuserowner.putType("user-obj");this.xuserowner.putPermissions("0");b=CComQIPtr(this.xuserowner,"IXDomNode");c=CComQIPtr(this,"IXDomNode").getXml().appendNode(b.getXml());b.loadFromXml(c)}if(b=a.selectSingleNode("acl[@tag='group-obj']")){c=CComQIPtr(new dpv.sacl,"IXDomNode");if(c.loadFromXml(b)==S_OK)this.xgroupowner=CComQIPtr(c,"IShareAcl")}if(!this.xgroupowner){this.xgroupowner=CComQIPtr(CComQIPtr(new dpv.sacl,"IXDomNode"),"IShareAcl");this.xgroupowner.putType("group-obj");this.xgroupowner.putPermissions("0");
b=CComQIPtr(this.xgroupowner,"IXDomNode");c=CComQIPtr(this,"IXDomNode").getXml().appendNode(b.getXml());b.loadFromXml(c)}if(b=a.selectSingleNode("acl[@tag='mask']")){c=CComQIPtr(new dpv.sacl,"IXDomNode");if(c.loadFromXml(b)==S_OK)this.xmask=CComQIPtr(c,"IShareAcl")}if(!this.xmask){this.xmask=CComQIPtr(CComQIPtr(new dpv.sacl,"IXDomNode"),"IShareAcl");this.xmask.putType("mask");this.xmask.putPermissions("0");b=CComQIPtr(this.xmask,"IXDomNode");c=CComQIPtr(this,"IXDomNode").getXml().appendNode(b.getXml());
b.loadFromXml(c)}if(a=a.selectSingleNode("acl[@tag='other']")){b=CComQIPtr(new dpv.sacl,"IXDomNode");if(b.loadFromXml(a)==S_OK)this.xother=CComQIPtr(b,"IShareAcl")}if(!this.xother){this.xother=CComQIPtr(CComQIPtr(new dpv.sacl,"IXDomNode"),"IShareAcl");this.xother.putType("other");this.xother.putPermissions("0");b=CComQIPtr(this.xother,"IXDomNode");c=CComQIPtr(this,"IXDomNode").getXml().appendNode(b.getXml());b.loadFromXml(c)}return S_OK}}});Njl.namespace("dpv");
dpv.userhf=Njl.inherit(dpv.base,IUserHomeFolder,{constructor:function(a){dpv.userhf.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <Home_Folder>                    <Size_Limit>0</Size_Limit>                    <VisibleSnapshot>0</VisibleSnapshot>                    <VisibleSnapFolder></VisibleSnapFolder>                    <Snapshot_Protection>                        <Enabled>0</Enabled>                    </Snapshot_Protection>                </Home_Folder>")).selectNodes("./*")[0])},
IUserHomeFolder:{getSizeLimit:function(){return dpv.gp(this.xprop,"Size_Limit")},putSizeLimit:function(a){return dpv.pp(this.xprop,"Size_Limit",a)},getSizeUsed:function(){return dpv.gp(this.xprop,"Size_Used")},getSnapProtectionEnabled:function(){return dpv.gp(this.xpropsnpr,"Enabled")},putSnapProtectionEnabled:function(a){return dpv.pp(this.xpropsnpr,"Enabled",a)},getVisibleSnapshot:function(){return dpv.gp(this.xprop,"VisibleSnapshot")},putVisibleSnapshot:function(a){return dpv.pp(this.xprop,"VisibleSnapshot",
a)},getVisibleSnapFolder:function(){return dpv.gp(this.xprop,"VisibleSnapFolder")},putVisibleSnapFolder:function(a){return dpv.pp(this.xprop,"VisibleSnapFolder",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");a=a.selectSingleNode("Snapshot_Protection");this.xpropsnpr=CComQIPtr(new dpv.xprop(a),"IXPropertyList");return a?S_OK:E_FAIL}}});Njl.namespace("dpv");
dpv.usertm=Njl.inherit(dpv.base,IUserTimeMachine,{constructor:function(a){dpv.usertm.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <Private_Time_Machine>                    <Enabled>0</Enabled>                    <Size_Limit>0</Size_Limit>                </Private_Time_Machine>")).selectNodes("./*")[0])},IUserTimeMachine:{getEnabled:function(){return dpv.gp(this.xprop,"Enabled")},putEnabled:function(a){return dpv.pp(this.xprop,
"Enabled",a)},getSizeLimit:function(){return dpv.gp(this.xprop,"Size_Limit")},putSizeLimit:function(a){return dpv.pp(this.xprop,"Size_Limit",a)},getUsedGB:function(){return dpv.gp(this.xprop,"Used_GB")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.hfsnapshot=Njl.inherit(dpv.base,IHFSnapshot,{constructor:function(a){dpv.hfsnapshot.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <HF_Snapshot>                    <Snapshot_Id />                    <Snapshot_Name />                    <User_Id />                    <User_Name />                    <Snapshot_Type />                    <Snapshot_CreatedOn />                </HF_Snapshot>")).selectNodes("./*")[0])},
IHFSnapshot:{getId:function(){return dpv.gp(this.xprop,"Snapshot_Id")},getName:function(){return dpv.gp(this.xprop,"Snapshot_Name")},putName:function(a){return dpv.pp(this.xprop,"Snapshot_Name",a)},getUserId:function(){return dpv.gp(this.xprop,"User_Id")},putUserId:function(a){return dpv.pp(this.xprop,"User_Id",a)},getUserName:function(){return dpv.gp(this.xprop,"User_Name")},getType:function(){return dpv.gp(this.xprop,"Snapshot_Type")},getCreationDate:function(){return dpv.gp(this.xprop,"Snapshot_CreatedOn")},
getPath:function(){return dpv.gp(this.xprop,"Snapshot_Path")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.hfSnapshotsManager=Njl.inherit(CComEventsObjectRoot("IHFSnapshotsManagerEvents"),dpv.base,IHFSnapshotsManager,{constructor:function(){dpv.hfSnapshotsManager.superclass.constructor.apply(this,arguments)},IHFSnapshotsManager:{UpdateSnapshots:function(a,b){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_userId=b;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:query id="{0}" resource-type="HF_Snapshot_Collection">                    <xs:criterion>                        <xs:and>                            <xs:equal property="User_Id" value="{1}"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
Njl.id(),b)),a)},createSnapshot:function(){return CComQIPtr(new dpv.hfsnapshot,"IHFSnapshot")},AddSnapshot:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="HF_Snapshot">                    {1}                </xs:add>',Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a)},RollbackSnapshot:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="HF_Snapshot">                    <xs:command_name>Rollback_Snapshot</xs:command_name>                      <xs:args>                        <xs:arg>                          {1}                        </xs:arg>                      </xs:args>                 </xs:command>',
Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a,null,null,null,3E5)},DeleteSnapshot:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format(' <xs:delete id="{0}" resource-type="HF_Snapshot">                      {1}                  </xs:delete>',Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a,null,null,null,3E5)}},IXDomNode:{loadFromXml:function(a,b){if(a.getAttributeText("resource-type")=="HF_Snapshot_Collection"){a=a.selectNodes("HF_Snapshot_Collection/HF_Snapshot");
var c=[];Njl.each(a,function(d){var e=CComQIPtr(new dpv.hfsnapshot,"IXDomNode");e.loadFromXml(d)==S_OK&&c.push(CComQIPtr(e,"IHFSnapshot"))},this);a=b._dpv_userId;delete b._dpv_userId;a&&this.Fire("OnSnapshotsUpdate",[this,b,c,a])}return S_OK}}});Njl.namespace("dpv");
dpv.vlan=Njl.inherit(CComObjectRoot,dpv.base,INetworkVLAN,{constructor:function(a){dpv.vlan.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <vlan>                    <vlanid/>                    <vlanbase/>                </vlan>")).selectNodes("./*")[0])},INetworkVLAN:{getId:function(){return dpv.gp(this.xprop,"vlanid")},putId:function(a){return dpv.pp(this.xprop,"vlanid",a)},getName:function(){return dpv.gp(this.xprop,
"link")},putName:function(a){return dpv.pp(this.xprop,"link",a)||dpv.pp(this.xprop,"ifname",a)},getBase:function(){return dpv.gp(this.xprop,"vlanbase")},putBase:function(a){return dpv.pp(this.xprop,"vlanbase",a)},getMACAddress:function(){return dpv.gp(this.xprop,"mac")},getState:function(){return dpv.gp(this.xprop,"state")},getMTU:function(){return dpv.gp(this.xprop,"mtu")},putMTU:function(a){return dpv.pp(this.xprop,"mtu",a)},getSpeed:function(){return dpv.gp(this.xprop,"speed")},putSpeed:function(a){return dpv.pp(this.xprop,
"speed",a)},getIPType:function(){return dpv.gp(this.xprop,"iptype")},putIPType:function(a){return dpv.pp(this.xprop,"iptype",a)},getIPAddress:function(){return dpv.gp(this.xprop,"ip")},putIPAddress:function(a){return dpv.pp(this.xprop,"ip",a)},getDomainName:function(){return this.domainName},putDomainName:function(a){this.domainCollection.removeNode("DOMAIN");var b="";a=a.split(" ");Njl.each(a,function(c){if(c!="")b+="<Domain_Name>"+c+"</Domain_Name>"},this);b!=""&&this.domainCollection.appendNode(new Njl.Xml.document("<DOMAIN>"+
b+"</DOMAIN>"))},getRouter:function(){return dpv.gp(this.xprop,"router")},putRouter:function(a){return dpv.pp(this.xprop,"router",a)},getSubnet:function(){return dpv.gp(this.xprop,"subnet")},putSubnet:function(a){return dpv.pp(this.xprop,"subnet",a)},getIPv6Type:function(){return dpv.gp(this.xprop,"ipv6type")},putIPv6Type:function(a){return dpv.pp(this.xprop,"ipv6type",a)},getIPv6Address:function(){return dpv.gp(this.xprop,"ipv6")},putIPv6Address:function(a){return dpv.pp(this.xprop,"ipv6",a)},getRouterv6:function(){return dpv.gp(this.xprop,
"router6")},putRouterv6:function(a){return dpv.pp(this.xprop,"router6",a)},getPrefixLength:function(){return dpv.gp(this.xprop,"prefixlength")},putPrefixLength:function(a){return dpv.pp(this.xprop,"prefixlength",a)},getIPv6AddressLocal:function(){return dpv.gp(this.xprop,"ipv6_link")},getPrefixLengthLocal:function(){return dpv.gp(this.xprop,"prefixlength_link")},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():E_FAIL},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("dnscollection");
b.removeNode("DNS");if(Njl.isArray(a))Njl.each(a,function(d){d=CComQIPtr(d,"IXDomNode");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(CComQIPtr(a,"INetworkDNS")){a=CComQIPtr(a,"IXDomNode");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL},getRoutes:function(){return this.xroutes?this.xroutes.getChildren():E_FAIL},putRoutes:function(a){if(this.x&&a){var b=this.x.selectSingleNode("routecollection");b.removeNode("Route");
Njl.each(a,function(c){c=CComQIPtr(c,"IXDomNode");var d=b.appendNode(c.getXml());d&&c.loadFromXml(d)});return CComQIPtr(this,"IXDomNode").loadFromXml(this.x)}return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");var b=CComQIPtr(this,"IXDomNode"),c=a.selectSingleNode("dnscollection");if(c){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=CComQIPtr(new dpv.base,"IXDomNode");
Njl.each(c,function(e){var f=CComQIPtr(new dpv.dns(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xdns.appendChild(f)},this);b.appendChild(this.xdns)}if(c=a.selectSingleNode("routecollection")){c=a.selectNodes("routecollection/Route");this.xroutes&&b.removeChild(this.xroutes);this.xroutes=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(c,function(e){var f=CComQIPtr(new dpv.nroute(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xroutes.appendChild(f)},this);b.appendChild(this.xroutes)}this.domainCollection=
a.selectSingleNode("domaincollection");this.domainName="";a=a.selectNodes("domaincollection/DOMAIN/Domain_Name");var d=[];Njl.each(a,function(e){d.push(e.getNodeText())},this);if(d.length>0)this.domainName=d.join(" ");return S_OK}}});Njl.namespace("dpv");
dpv.networkVLANManager=Njl.inherit(CComEventsObjectRoot("INetworkVLANManagerEvents"),dpv.base,INetworkVLANManager,{constructor:function(){dpv.networkVLANManager.superclass.constructor.apply(this,arguments)},INetworkVLANManager:{UpdateVLANs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="vlan_collection" resource-type="vlan_collection" />',Njl.id())),a)},getVLANs:function(){return this.xvlans?this.xvlans:E_FAIL},createVLAN:function(){return CComQIPtr(new dpv.vlan,
"INetworkVLAN")},AddVLAN:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="vlan" resource-type="Network" >                            <ifname>{1}</ifname>                            <vlanid>{2}</vlanid>                        </xs:add>',Njl.id(),b.getBase(),b.getId())),a)},CommitVLAN:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="vlan" resource-type="Network">                            {1}                        </xs:set>',
Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a)},RemoveVLAN:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="vlan" resource-type="Network" />',b.getName())),a)}},IXDomNode:{loadFromXml:function(a){if(a.getAttributeText("resource-type")=="vlan_collection"){this.xvlans=[];a=a.selectNodes("vlan_collection/vlan");Njl.each(a,function(b){var c=CComQIPtr(new dpv.vlan(true),"IXDomNode");c.loadFromXml(b)==S_OK&&this.xvlans.push(CComQIPtr(c,"INetworkVLAN"))},
this);return S_OK}}}});Njl.namespace("dpv");
dpv.nroute=Njl.inherit(CComObjectRoot,dpv.base,INetworkRoute,{constructor:function(a){dpv.nroute.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("               <Route>                  <Dest_CIDR_Address/>               </Route>")).selectNodes("./*")[0])},INetworkRoute:{getDestCIDRAddress:function(){return dpv.gp(this.xprop,"Dest_CIDR_Address")},putDestCIDRAddress:function(a){return dpv.pp(this.xprop,"Dest_CIDR_Address",a)}},IXDomNode:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.ssh=Njl.inherit(CComEventsObjectRoot("ISSHEvents"),dpv.base,ISSH,{constructor:function(a){dpv.ssh.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('<SshPublicKey id="0" resource-id="0" resource-type="SshPublicKey" is-domain-member="0"><Id></Id><UserId></UserId><Title></Title><ServeFor></ServeFor><Type></Type><Key></Key><Comment></Comment><Fingerprint></Fingerprint><FileName></FileName></SshPublicKey>')).selectNodes("./*")[0]);this.mask=
0},ISSH:{IsDirty:function(){return this.mask!==0},IsMarkedToDelete:function(){return(this.mask&8)===8},MarkToDelete:function(){this.mask=(this.mask&8)===8?this.mask&-9:this.mask|8;return S_OK},getId:function(){return dpv.gp(this.xuser,"Id")},getUserId:function(){return dpv.gp(this.xuser,"UserId")},putUserId:function(a){return dpv.pp(this.xuser,"UserId",a)},getReadOnly:function(){if(dpv.gp(this.xuser,"ServeFor")==="rsync")return true;return false},putReadOnly:function(a){this.mask=(this.mask&2)===
2?this.mask&-3:this.mask|2;return a?dpv.pp(this.xuser,"ServeFor","rsync"):dpv.pp(this.xuser,"ServeFor","all")},getComment:function(){return dpv.gp(this.xuser,"Comment")},getTitle:function(){return dpv.gp(this.xuser,"Title")},putTitle:function(a){this.mask=(this.mask&4)===4?this.mask&-5:this.mask|4;return dpv.pp(this.xuser,"Title",a)},getType:function(){return dpv.gp(this.xuser,"Type")},getFingerPrint:function(){return dpv.gp(this.xuser,"Fingerprint")},getKey:function(){return dpv.gp(this.xuser,"Key")},
getFilePath:function(){return dpv.gp(this.xuser,"FileName")},putFilePath:function(a){return dpv.pp(this.xuser,"FileName",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.sshManager=Njl.inherit(CComEventsObjectRoot("ISSHManagerEvents"),dpv.base,ISSHManager,{constructor:function(){dpv.sshManager.superclass.constructor.apply(this,arguments)},ISSHManager:{createKey:function(){return CComQIPtr(new dpv.ssh,"ISSH")},updateKeys:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="rsync" resource-type="SshPublicKeys"/>',Njl.id())),a)},getKeys:function(){if(this.sshc)return CComQIPtr(this.sshc,"IXDomNode").getChildren();return E_FAIL},
getKeyById:function(a){return this.sshc?this.sshc.hash[a]:null},deleteKey:function(a,b){if(CComQIPtr(a,"ISSH")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-type="SshPublicKeys">                       {1}                    </xs:delete>',Njl.id(),a.getXml().toString())),b)}return E_FAIL},editKey:function(a,b){if(CComQIPtr(a,"ISSH")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="SshPublicKeys">                       {1}                    </xs:set>',
Njl.id(),a.getXml().toString())),b)}return E_FAIL},addKey:function(a,b){if(CComQIPtr(a,"ISSH")){a=CComQIPtr(a,"IXDomNode");return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="SshPublicKeys">                        {1}                    </xs:add>',Njl.id(),a.getXml().toString())),b)}return E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.selectSingleNode("SshPublicKey_Collection")){this.x=a;this.sshc&&
b.removeChild(this.sshc);this.sshc=CComQIPtr(new dpv.base,"IXDomNode");this.sshc.hash=[];a=a.selectNodes("SshPublicKey_Collection/SshPublicKey");Njl.each(a,function(c){var d=CComQIPtr(new dpv.ssh(true),"IXDomNode");if(d.loadFromXml(c)==S_OK){c=CComQIPtr(d,"ISSH");this.sshc.hash[c.getId()]=c;this.sshc.appendChild(d)}},this);b.appendChild(this.sshc);return S_OK}return E_FAIL}}});Njl.namespace("dpv");
dpv.snapsched=Njl.inherit(dpv.base,ISnapshotSchedule,{constructor:function(){dpv.snapsched.superclass.constructor.apply(this,arguments)},ISnapshotSchedule:{getConfig:function(){var a=E_FAIL,b,c,d,e,f,g,h;if(this.x){a=[];if((b=this.x.selectNodes("schedule"))&&b!=E_FAIL&&b.length)for(c=0;c<b.length;++c){d=b[c].getAttributeText("wday");h=b[c].getAttributeText("hours");if(d&&d!=E_FAIL&&d.length==1&&h&&h!=E_FAIL&&h.length==24){e=+d;if(Njl.isNumber(e)&&e>=0&&e<=6){g=[];for(d=0;d<h.length;++d){f=+h[d];if(Njl.isNumber(f)&&
f==0||f==1)g.push(f)}if(g.length==24)a[e]=g}}}if(a.length!=7)a=E_FAIL}return a},putConfig:function(a){var b;if(this.x&&a&&a.length==7){this.x.removeNode("schedule");this.x.setNodeText("");for(b=0;b<a.length;++b)this.x.appendNode(new Njl.Xml.document('<schedule wday="'+b+'" hours="'+a[b].join("")+'" />'));return S_OK}else return E_FAIL}},IXDomNode:{loadFromXml:function(a){if(a&&a!=E_FAIL){this.x=a;return S_OK}else{delete this.x;return E_FAIL}}}});Njl.namespace("dpv");
dpv.simpleshare=Njl.inherit(CComObjectRoot,dpv.base,ISimpleShare,{constructor:function(){dpv.simpleshare.superclass.constructor.apply(this,arguments)},ISimpleShare:{getId:function(){return this.x?this.x.getAttributeText("id"):E_FAIL},getName:function(){return this.x?this.x.getAttributeText("share-name"):E_FAIL},getType:function(){return this.x?this.x.getAttributeText("share-type"):E_FAIL},getUsedBy:function(){return this.x?this.x.getAttributeText("rdr-used-by"):E_FAIL},getProtocols:function(){return this.x?
this.x.getAttributeText("protocols"):E_FAIL},isLUN:function(){return CComQIPtr(this,"ISimpleShare").getType()=="zvol"},isReadyDRShare:function(){return CComQIPtr(this,"ISimpleShare").getType()=="readonly"}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.amazons3=Njl.inherit(CComEventsObjectRoot("ICloudStorageManagerEvents"),dpv.base,ICloudStorageManager,{constructor:function(){dpv.cloudstorage.amazons3.superclass.constructor.apply(this,arguments);this.buckets=[];this.bucketDirs=[];this.locations=[]},ICloudStorageManager:{updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="S3_Status_Collection" resource-type="S3_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?
this.cloudStatus:E_FAIL},updateConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="S3_Connection_Collection" resource-type="S3_Connection_Collection"/>',Njl.id())),a)},getConnections:function(){return CComQIPtr(this,"IXDomNode").getChildren()},deleteConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="S3_Connection_Collection" resource-type="S3_Connection_Collection"/>',Njl.id())),a)},createConnection:function(){return CComQIPtr(new dpv.cloudstorage.connection,
"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="S3_Connection" resource-type="S3_Connection">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="S3_Connection" resource-type="S3_Connection">{1}</xs:set>',
Njl.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="S3_Connection"/>',Njl.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return CComQIPtr(new dpv.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=
CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="S3_Session" resource-type="S3_Session">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="S3_Session" resource-type="S3_Session">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},
deleteSession:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageSession"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="S3_Session"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="S3_Connection_Log"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?
this.log:E_FAIL},updateBuckets:function(a,b,c,d,e){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="S3_Connection">                    <xs:command_name>list_buckets</xs:command_name>                    <xs:args>                        <xs:arg>                            <S3_Param>                            <Server_URL><![CDATA[{1}]]\></Server_URL>                            <Access_Key><![CDATA[{2}]]\></Access_Key>                            <Secret_Key><![CDATA[{3}]]\></Secret_Key>                            <Region_Name><![CDATA[{4}]]\></Region_Name>                            </S3_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c,d,e)),a)},getBuckets:function(){return this.buckets},addBucket:function(a,b,c,d,e,f,g){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="S3_Connection">                    <xs:command_name>create_bucket</xs:command_name>                    <xs:args>                        <xs:arg>                            <S3_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                                <Bucket_Name><![CDATA[{4}]]\></Bucket_Name>                                <Location><![CDATA[{5}]]\></Location>                                <Region_Name><![CDATA[{6}]]\></Region_Name>                            </S3_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c,d,e,f,g)),a)},updateDirectories:function(a,b,c){if((b=CComQIPtr(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="S3_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <S3_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Parent_Path><![CDATA[{3}]]\></Parent_Path>                                </S3_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),b.getBucketName(),c)),a)}return E_FAIL},getDirectories:function(){return this.bucketDirs},addDirectory:function(a,b,c){if((b=CComQIPtr(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="S3_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <S3_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Remote_Path><![CDATA[{3}]]\></Remote_Path>                                </S3_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),b.getBucketName(),c)),a)}return E_FAIL},updateBucketLocations:function(a,b,c,d,e){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="S3_Connection">                        <xs:command_name>list_locations</xs:command_name>                        <xs:args>                            <xs:arg>                              <S3_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                                <Region_Name><![CDATA[{4}]]\></Region_Name>                              </S3_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b,c,d,e)),a)},getBucketLocations:function(){return this.locations}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "S3_Connection":c=null;if(c=a.selectSingleNode("./Bucket_List")){this.buckets.splice(0);
if(a=c.selectNodes("Bucket")){Njl.each(a,function(f){this.buckets.push({bucket:this.getValue(f)})},this);return S_OK}}else if(c=a.selectSingleNode("./Folder_List")){this.bucketDirs.splice(0);if(a=c.selectNodes("Folder")){Njl.each(a,function(f){this.bucketDirs.push({folder:this.getValue(f)})},this);return S_OK}}else if(c=a.selectSingleNode("./Location_List")){this.locations.splice(0);if(a=c.selectNodes("Location")){Njl.each(a,function(f){this.locations.push({id:this.getValue(f.selectSingleNode("./Id")),
name:this.getValue(f.selectSingleNode("./Name"))})},this);return S_OK}}break}return S_OK}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "S3_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");Njl.each(a,function(f){var g=CComQIPtr(new dpv.cloudstorage.connection(true),"IXDomNode");g.loadFromXml(f)==S_OK&&b.appendChild(g)},
this);return S_OK}break;case "S3_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=CComQIPtr(new dpv.cloudstatus,"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break}switch(c){case "S3_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=
e.selectNodes("./Log_Collection/Log");Njl.each(c,function(f){var g=CComQIPtr(new dpv.log,"IXDomNode");g.loadFromXml(f)==S_OK&&this.log.logs.push(CComQIPtr(g,"ILog"))},this);b.appendChild(this.log.logs);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.wasabi=Njl.inherit(CComEventsObjectRoot("ICloudStorageManagerEvents"),dpv.base,ICloudStorageManager,{constructor:function(){dpv.cloudstorage.wasabi.superclass.constructor.apply(this,arguments);this.buckets=[];this.bucketDirs=[];this.locations=[]},ICloudStorageManager:{updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Wasabi_Status_Collection" resource-type="Wasabi_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?
this.cloudStatus:E_FAIL},updateConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Wasabi_Connection_Collection" resource-type="Wasabi_Connection_Collection"/>',Njl.id())),a)},getConnections:function(){return CComQIPtr(this,"IXDomNode").getChildren()},deleteConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="Wasabi_Connection_Collection" resource-type="Wasabi_Connection_Collection"/>',Njl.id())),
a)},createConnection:function(){return CComQIPtr(new dpv.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="Wasabi_Connection" resource-type="Wasabi_Connection">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=
CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Wasabi_Connection" resource-type="Wasabi_Connection">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Wasabi_Connection"/>',Njl.id(),
b.getId())),a)}return E_INVALIDARG},createSession:function(){return CComQIPtr(new dpv.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="Wasabi_Session" resource-type="Wasabi_Session">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=
CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Wasabi_Session" resource-type="Wasabi_Session">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageSession"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Wasabi_Session"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&
CComQIPtr(b,"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Wasabi_Connection_Log"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:E_FAIL},updateBuckets:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="Wasabi_Connection">                    <xs:command_name>list_buckets</xs:command_name>                    <xs:args>                        <xs:arg>                            <Wasabi_Param>                            <Server_URL><![CDATA[{1}]]\></Server_URL>                            <Access_Key><![CDATA[{2}]]\></Access_Key>                            <Secret_Key><![CDATA[{3}]]\></Secret_Key>                            </Wasabi_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c,d)),a)},getBuckets:function(){return this.buckets},addBucket:function(a,b,c,d,e,f){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="Wasabi_Connection">                    <xs:command_name>create_bucket</xs:command_name>                    <xs:args>                        <xs:arg>                            <Wasabi_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                                <Bucket_Name><![CDATA[{4}]]\></Bucket_Name>                                <Location><![CDATA[{5}]]\></Location>                            </Wasabi_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c,d,e,f)),a)},updateDirectories:function(a,b,c){if((b=CComQIPtr(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Wasabi_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <Wasabi_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Parent_Path><![CDATA[{3}]]\></Parent_Path>                                </Wasabi_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),b.getBucketName(),c)),a)}return E_FAIL},getDirectories:function(){return this.bucketDirs},addDirectory:function(a,b,c){if((b=CComQIPtr(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Wasabi_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <Wasabi_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Remote_Path><![CDATA[{3}]]\></Remote_Path>                                </Wasabi_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),b.getBucketName(),c)),a)}return E_FAIL},updateBucketLocations:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="Wasabi_Connection">                        <xs:command_name>list_locations</xs:command_name>                        <xs:args>                            <xs:arg>                              <Wasabi_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                              </Wasabi_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b,c,d)),a)},getBucketLocations:function(){return this.locations}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "Wasabi_Connection":c=null;if(c=a.selectSingleNode("./Bucket_List")){this.buckets.splice(0);
if(a=c.selectNodes("Bucket")){Njl.each(a,function(f){this.buckets.push({bucket:this.getValue(f)})},this);return S_OK}}else if(c=a.selectSingleNode("./Folder_List")){this.bucketDirs.splice(0);if(a=c.selectNodes("Folder")){Njl.each(a,function(f){this.bucketDirs.push({folder:this.getValue(f)})},this);return S_OK}}else if(c=a.selectSingleNode("./Location_List")){this.locations.splice(0);if(a=c.selectNodes("Location")){Njl.each(a,function(f){this.locations.push({id:this.getValue(f.selectSingleNode("./Id")),
name:this.getValue(f.selectSingleNode("./Name"))})},this);return S_OK}}break}return S_OK}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "Wasabi_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");Njl.each(a,function(f){var g=CComQIPtr(new dpv.cloudstorage.connection(true),"IXDomNode");g.loadFromXml(f)==S_OK&&b.appendChild(g)},
this);return S_OK}break;case "Wasabi_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=CComQIPtr(new dpv.cloudstatus,"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break}switch(c){case "Wasabi_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=
[];c=e.selectNodes("./Log_Collection/Log");Njl.each(c,function(f){var g=CComQIPtr(new dpv.log,"IXDomNode");g.loadFromXml(f)==S_OK&&this.log.logs.push(CComQIPtr(g,"ILog"))},this);b.appendChild(this.log.logs);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.azure=Njl.inherit(CComEventsObjectRoot("ICloudStorageManagerEvents"),dpv.base,ICloudStorageManager,{constructor:function(){dpv.cloudstorage.azure.superclass.constructor.apply(this,arguments);this.buckets=[];this.bucketDirs=[];this.locations=[]},ICloudStorageManager:{updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AzureSSB_Status_Collection" resource-type="AzureSSB_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?
this.cloudStatus:E_FAIL},updateConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AzureSSB_Connection_Collection" resource-type="AzureSSB_Connection_Collection"/>',Njl.id())),a)},getConnections:function(){return CComQIPtr(this,"IXDomNode").getChildren()},deleteConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="AzureSSB_Connection_Collection" resource-type="AzureSSB_Connection_Collection"/>',
Njl.id())),a)},createConnection:function(){return CComQIPtr(new dpv.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();b="<Connection>                            <Name><![CDATA["+c.getName()+"]]\></Name>                            <Access_Key><![CDATA["+c.getSKey()+"]]\></Access_Key>                            <Account><![CDATA["+c.getAKey()+"]]\></Account>                            <Container_Name><![CDATA["+
c.getContainerName()+"]]\></Container_Name>                            <Region><![CDATA["+c.getRegion()+"]]\></Region>                            <Polling_Sec>"+c.getPollingSec()+"</Polling_Sec>                            <Max_Upload_Kbs>"+c.getMaxUploadKBS()+"</Max_Upload_Kbs>                            <Max_Download_Kbs>"+c.getMaxDownloadKBS()+"</Max_Download_Kbs>                        </Connection>";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="AzureSSB_Connection" resource-type="AzureSSB_Connection">{1}                    </xs:add>',
Njl.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();b="<Connection>                            <Id><![CDATA["+c.getId()+"]]\></Id>                            <Name><![CDATA["+c.getName()+"]]\></Name>                            <Polling_Sec>"+c.getPollingSec()+"</Polling_Sec>                            <Max_Upload_Kbs>"+c.getMaxUploadKBS()+"</Max_Upload_Kbs>                            <Max_Download_Kbs>"+
c.getMaxDownloadKBS()+"</Max_Download_Kbs>                        </Connection>";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AzureSSB_Connection" resource-type="AzureSSB_Connection">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection"/>',
Njl.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return CComQIPtr(new dpv.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="AzureSSB_Session" resource-type="AzureSSB_Session">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=
CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AzureSSB_Session" resource-type="AzureSSB_Session">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageSession"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AzureSSB_Session"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&
CComQIPtr(b,"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection_Log"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:E_FAIL},updateBuckets:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="AzureSSB_Connection">                    <xs:command_name>list_containers</xs:command_name>                    <xs:args>                        <xs:arg>                            <AzureSSB_Param>                                <Access_Key><![CDATA[{1}]]\></Access_Key>                                <Account><![CDATA[{2}]]\></Account>                                <Region><![CDATA[{3}]]\></Region>                            </AzureSSB_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),c,b,d)),a)},getBuckets:function(){return this.buckets},addBucket:function(a,b,c,d,e){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="" resource-type="AzureSSB_Connection">                    <xs:command_name>create_container</xs:command_name>                    <xs:args>                        <xs:arg>                            <AzureSSB_Param>                                <Container_Name><![CDATA[{1}]]\></Container_Name>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Account><![CDATA[{3}]]\></Account>                                <Region><![CDATA[{4}]]\></Region>                            </AzureSSB_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),d,c,b,e)),a)},updateDirectories:function(a,b,c){if((b=CComQIPtr(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AzureSSB_Param>                                    <Container_Name><![CDATA[{2}]]\></Container_Name>                                    <Parent_Path><![CDATA[{3}]]\></Parent_Path>                                </AzureSSB_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),b.getContainerName(),c)),a)}return E_FAIL},getDirectories:function(){return this.bucketDirs},addDirectory:function(a,b,c){if((b=CComQIPtr(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AzureSSB_Param>                                    <Container_Name><![CDATA[{2}]]\></Container_Name>                                    <Remote_Path><![CDATA[{3}]]\></Remote_Path>                                </AzureSSB_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),b.getContainerName(),c)),a)}return E_FAIL}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "AzureSSB_Connection":c=null;if(c=a.selectSingleNode("./Container_List")){this.buckets.splice(0);
if(a=c.selectNodes("Container")){Njl.each(a,function(f){this.buckets.push({bucket:this.getValue(f)})},this);return S_OK}}else if(c=a.selectSingleNode("./Folder_List")){this.bucketDirs.splice(0);if(a=c.selectNodes("Folder")){Njl.each(a,function(f){this.bucketDirs.push({folder:this.getValue(f)})},this);return S_OK}}else if(c=a.selectSingleNode("./Location_List")){this.locations.splice(0);if(a=c.selectNodes("Location")){Njl.each(a,function(f){this.locations.push({id:this.getValue(f.selectSingleNode("./Id")),
name:this.getValue(f.selectSingleNode("./Name"))})},this);return S_OK}}break}return S_OK}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "AzureSSB_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");Njl.each(a,function(f){var g=CComQIPtr(new dpv.cloudstorage.connection(true),"IXDomNode");g.loadFromXml(f)==S_OK&&b.appendChild(g)},
this);return S_OK}break;case "AzureSSB_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=CComQIPtr(new dpv.cloudstatus,"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break}switch(c){case "AzureSSB_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=
[];c=e.selectNodes("./Log_Collection/Log");Njl.each(c,function(f){var g=CComQIPtr(new dpv.log,"IXDomNode");g.loadFromXml(f)==S_OK&&this.log.logs.push(CComQIPtr(g,"ILog"))},this);b.appendChild(this.log.logs);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.onedrive=Njl.inherit(CComEventsObjectRoot("ICloudStorageManagerEvents"),dpv.base,ICloudStorageManager,{constructor:function(){dpv.cloudstorage.onedrive.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="OneDrive_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',Njl.id())),
a)},getAuthURL:function(){return this.authURL?this.authURL:E_FAIL},setAuthCode:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="OneDrive_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <OneDrive_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </OneDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="OneDrive_Status_Collection" resource-type="OneDrive_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:E_FAIL},updateConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="OneDrive_Connection_Collection" resource-type="OneDrive_Connection_Collection"/>',Njl.id())),
a)},getConnections:function(){return CComQIPtr(this,"IXDomNode").getChildren()},deleteConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="OneDrive_Connection_Collection" resource-type="OneDrive_Connection_Collection"/>',Njl.id())),a)},createConnection:function(){return CComQIPtr(new dpv.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="OneDrive_Connection" resource-type="OneDrive_Connection">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="OneDrive_Connection" resource-type="OneDrive_Connection">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},
deleteConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="OneDrive_Connection"/>',Njl.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return CComQIPtr(new dpv.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="OneDrive_Session" resource-type="OneDrive_Session">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="OneDrive_Session" resource-type="OneDrive_Session">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,
b){if(b&&CComQIPtr(b,"ICloudStorageSession"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="OneDrive_Session"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="OneDrive_Connection_Log"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?
this.log:E_FAIL},updateDirectories:function(a,b,c){if(b=CComQIPtr(b,"ICloudStorageConnection"))return c?this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OneDrive_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <OneDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                </OneDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),c)),a):this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OneDrive_Connection">                        <xs:command_name>get_root_dir</xs:command_name>                        <xs:args/>                    </xs:command>',Njl.id(),b.getId())),a);return E_FAIL},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=CComQIPtr(b,"ICloudStorageConnection");c=c.split("/");c=c[c.length-1]||c[c.length-2];if(b)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OneDrive_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <OneDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </OneDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),d,c)),a);return E_FAIL}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "OneDrive_Connection":c=null;if(c=a.selectSingleNode("./Authorization_URL/URL")){this.authURL=
c.getNodeText();return S_OK}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return S_OK}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);if(a=c.selectNodes("Folder")){Njl.each(a,function(f){this.dirs.push({folder:this.getValue(f.selectSingleNode("Name")),id:this.getValue(f.selectSingleNode("Id"))})},this);return S_OK}}break}return S_OK}else{c=a.getAttributeText("resource-type");
d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "OneDrive_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");Njl.each(a,function(f){var g=CComQIPtr(new dpv.cloudstorage.connection(true),"IXDomNode");g.loadFromXml(f)==S_OK&&b.appendChild(g)},this);return S_OK}break;case "OneDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=CComQIPtr(new dpv.cloudstatus,
"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break}switch(c){case "OneDrive_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");Njl.each(c,function(f){var g=CComQIPtr(new dpv.log,"IXDomNode");g.loadFromXml(f)==S_OK&&
this.log.logs.push(CComQIPtr(g,"ILog"))},this);b.appendChild(this.log.logs);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.amazondrive=Njl.inherit(CComEventsObjectRoot("ICloudStorageManagerEvents"),dpv.base,ICloudStorageManager,{constructor:function(){dpv.cloudstorage.amazondrive.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="AmazonDrive_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',Njl.id())),
a)},getAuthURL:function(){return this.authURL?this.authURL:E_FAIL},setAuthCode:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="AmazonDrive_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <AmazonDrive_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </AmazonDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AmazonDrive_Status_Collection" resource-type="AmazonDrive_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:E_FAIL},updateConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="AmazonDrive_Connection_Collection" resource-type="AmazonDrive_Connection_Collection"/>',
Njl.id())),a)},getConnections:function(){return CComQIPtr(this,"IXDomNode").getChildren()},deleteConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="AmazonDrive_Connection_Collection" resource-type="AmazonDrive_Connection_Collection"/>',Njl.id())),a)},createConnection:function(){return CComQIPtr(new dpv.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=
CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="AmazonDrive_Connection" resource-type="AmazonDrive_Connection">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AmazonDrive_Connection" resource-type="AmazonDrive_Connection">{1}</xs:set>',
Njl.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection"/>',Njl.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return CComQIPtr(new dpv.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=
CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="AmazonDrive_Session" resource-type="AmazonDrive_Session">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="AmazonDrive_Session" resource-type="AmazonDrive_Session">{1}</xs:set>',
Njl.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageSession"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AmazonDrive_Session"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},deleteACDSession:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AmazonDrive_Session"/>',Njl.id(),b)),a)},updateConnectionLog:function(a,b){if(b&&CComQIPtr(b,
"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection_Log"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:E_FAIL},updateDirectories:function(a,b,c){if(b=CComQIPtr(b,"ICloudStorageConnection"))return c?this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AmazonDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                </AmazonDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),c)),a):this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection">                        <xs:command_name>get_root_dir</xs:command_name>                        <xs:args/>                    </xs:command>',Njl.id(),b.getId())),a);return E_FAIL},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=CComQIPtr(b,"ICloudStorageConnection");c.split("/");c[0]=="/"&&(c=c.substring(1));if(b)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AmazonDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </AmazonDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),d,c)),a);return E_FAIL},getAmazonSessions:function(){return this.amazonSessions}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "AmazonDrive_Connection":c=null;if(c=
a.selectSingleNode("./Authorization_URL/URL")){this.authURL=c.getNodeText();return S_OK}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return S_OK}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);if(a=c.selectNodes("Folder")){Njl.each(a,function(g){this.dirs.push({folder:this.getValue(g.selectSingleNode("Name")),id:this.getValue(g.selectSingleNode("Id"))})},
this);return S_OK}}break}return S_OK}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "AmazonDrive_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");Njl.each(a,function(g){var h=CComQIPtr(new dpv.cloudstorage.connection(true),"IXDomNode");h.loadFromXml(g)==S_OK&&b.appendChild(h)},this);var f=["Id","Local_Path","Remote_Path",
"Sync_Direction"];d=this.x.selectNodes("Connections/Connection/Sessions/Session");this.amazonSessions=[];Njl.each(d,function(g){var h={};Njl.each(f,function(k){var j=g.selectSingleNode(k);h[k]=j&&this.getValue(j)},this);this.amazonSessions.push(h)},this);return S_OK}break;case "AmazonDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=CComQIPtr(new dpv.cloudstatus,"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break}switch(c){case "AmazonDrive_Connection_Log":c=
e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");Njl.each(c,function(g){var h=CComQIPtr(new dpv.log,"IXDomNode");h.loadFromXml(g)==S_OK&&this.log.logs.push(CComQIPtr(h,"ILog"))},this);b.appendChild(this.log.logs);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.googledrive=Njl.inherit(CComEventsObjectRoot("ICloudStorageManagerEvents"),dpv.base,ICloudStorageManager,{constructor:function(){dpv.cloudstorage.googledrive.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="GoogleDrive_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',Njl.id())),
a)},getAuthURL:function(){return this.authURL?this.authURL:E_FAIL},setAuthCode:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="GoogleDrive_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <GoogleDrive_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </GoogleDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="GoogleDrive_Status_Collection" resource-type="GoogleDrive_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:E_FAIL},updateConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="GoogleDrive_Connection_Collection" resource-type="GoogleDrive_Connection_Collection"/>',
Njl.id())),a)},getConnections:function(){return CComQIPtr(this,"IXDomNode").getChildren()},deleteConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="GoogleDrive_Connection_Collection" resource-type="GoogleDrive_Connection_Collection"/>',Njl.id())),a)},createConnection:function(){return CComQIPtr(new dpv.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=
CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="GoogleDrive_Connection" resource-type="GoogleDrive_Connection">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="GoogleDrive_Connection" resource-type="GoogleDrive_Connection">{1}</xs:set>',
Njl.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection"/>',Njl.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return CComQIPtr(new dpv.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=
CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="GoogleDrive_Session" resource-type="GoogleDrive_Session">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="GoogleDrive_Session" resource-type="GoogleDrive_Session">{1}</xs:set>',
Njl.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageSession"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="GoogleDrive_Session"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection_Log"/>',Njl.id(),b.getId())),
a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:E_FAIL},updateDirectories:function(a,b,c){if(b=CComQIPtr(b,"ICloudStorageConnection"))return c?this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <GoogleDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                </GoogleDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),c)),a):this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection">                        <xs:command_name>get_root_dir</xs:command_name>                    </xs:command>',Njl.id(),b.getId())),a);return E_FAIL},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=CComQIPtr(b,"ICloudStorageConnection");c=c.split("/");c=c[c.length-1]||c[c.length-2];if(b)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <GoogleDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </GoogleDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),d,c)),a);return E_FAIL}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "GoogleDrive_Connection":c=null;if(c=a.selectSingleNode("./Authorization_URL/URL")){this.authURL=
c.getNodeText();return S_OK}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return S_OK}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);if(a=c.selectNodes("Folder")){Njl.each(a,function(f){this.dirs.push({folder:this.getValue(f.selectSingleNode("Name")),id:this.getValue(f.selectSingleNode("Id"))})},this);return S_OK}}break}return S_OK}else{c=a.getAttributeText("resource-type");
d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "GoogleDrive_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");Njl.each(a,function(f){var g=CComQIPtr(new dpv.cloudstorage.connection(true),"IXDomNode");g.loadFromXml(f)==S_OK&&b.appendChild(g)},this);return S_OK}break;case "GoogleDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=CComQIPtr(new dpv.cloudstatus,
"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break}switch(c){case "GoogleDrive_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");Njl.each(c,function(f){var g=CComQIPtr(new dpv.log,"IXDomNode");g.loadFromXml(f)==S_OK&&
this.log.logs.push(CComQIPtr(g,"ILog"))},this);b.appendChild(this.log.logs);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.dropbox=Njl.inherit(CComEventsObjectRoot("ICloudStorageManagerEvents"),dpv.base,ICloudStorageManager,{constructor:function(){dpv.cloudstorage.dropbox.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="Dropbox_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',Njl.id())),a)},
getAuthURL:function(){return this.authURL?this.authURL:E_FAIL},setAuthCode:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="Dropbox_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <Dropbox_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </Dropbox_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Dropbox_Status_Collection" resource-type="Dropbox_Status_Collection"/>',Njl.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:E_FAIL},updateConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="Dropbox_Connection_Collection" resource-type="Dropbox_Connection_Collection"/>',Njl.id())),
a)},getConnections:function(){return CComQIPtr(this,"IXDomNode").getChildren()},deleteConnections:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="Dropbox_Connection_Collection" resource-type="Dropbox_Connection_Collection"/>',Njl.id())),a)},createConnection:function(){return CComQIPtr(new dpv.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="Dropbox_Connection" resource-type="Dropbox_Connection">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){b=CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Dropbox_Connection" resource-type="Dropbox_Connection">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},
deleteConnection:function(a,b){var c=null;if(b&&(c=CComQIPtr(b,"ICloudStorageConnection"))){CComQIPtr(c,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Dropbox_Connection"/>',Njl.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return CComQIPtr(new dpv.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="Dropbox_Session" resource-type="Dropbox_Session">{1}</xs:add>',Njl.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=CComQIPtr(b,"ICloudStorageSession"))){b=CComQIPtr(b,"IXDomNode").getXml().toString();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-id="Dropbox_Session" resource-type="Dropbox_Session">{1}</xs:set>',Njl.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,
b){if(b&&CComQIPtr(b,"ICloudStorageSession"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Dropbox_Session"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&CComQIPtr(b,"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Dropbox_Connection_Log"/>',Njl.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?
this.log:E_FAIL},updateDirectories:function(a,b,c){if(b=CComQIPtr(b,"ICloudStorageConnection"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Dropbox_Connection">                    <xs:command_name>list_dir</xs:command_name>                    <xs:args>                        <xs:arg>                            <Dropbox_Param>                                <Directory_Id><![CDATA[{2}]]\></Directory_Id>                            </Dropbox_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId(),c)),a);return E_FAIL},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=CComQIPtr(b,"ICloudStorageConnection");c=c.split("/");c=c[c.length-1]||c[c.length-2];if(b)return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Dropbox_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <Dropbox_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </Dropbox_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getId(),d,c)),a);return E_FAIL},cancelMigration:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="Dropbox_Connection">                        <xs:command_name>no_migration</xs:command_name>                    </xs:command>',Njl.id())),a)}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){var b=
CComQIPtr(this,"IXDomNode");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "Dropbox_Connection":c=null;if(c=a.selectSingleNode("./Authorization_URL/URL")){this.authURL=c.getNodeText();return S_OK}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return S_OK}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);
if(a=c.selectNodes("Folder")){Njl.each(a,function(f){this.dirs.push({folder:this.getValue(f.selectSingleNode("Name")),id:this.getValue(f.selectSingleNode("Id"))})},this);return S_OK}}break}return S_OK}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "Dropbox_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");Njl.each(a,function(f){var g=
CComQIPtr(new dpv.cloudstorage.connection(true),"IXDomNode");g.loadFromXml(f)==S_OK&&b.appendChild(g)},this);return S_OK}break;case "Dropbox_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=CComQIPtr(new dpv.cloudstatus,"IXDomNode");if(this.cloudStatus.loadFromXml(a)==S_OK)return S_OK;else this.cloudStatus=null;break}switch(c){case "Dropbox_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));
this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");Njl.each(c,function(f){var g=CComQIPtr(new dpv.log,"IXDomNode");g.loadFromXml(f)==S_OK&&this.log.logs.push(CComQIPtr(g,"ILog"))},this);b.appendChild(this.log.logs);return S_OK}break}}}return E_FAIL}}});Njl.namespace("dpv.cloudstorage");
dpv.cloudstorage.connection=Njl.inherit(CComObjectRoot,dpv.base,ICloudStorageConnection,{constructor:function(){dpv.cloudstorage.connection.superclass.constructor.apply(this,arguments);CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("            <Connection>              <Id></Id>              <Name></Name>              <Access_Key></Access_Key>              <Secret_Key></Secret_Key>              <Bucket_Name></Bucket_Name>              <Container_Name></Container_Name>              <Server_URL></Server_URL>              <Storage_Class>STANDARD</Storage_Class>              <Part_Size_MB>64</Part_Size_MB>              <Polling_Sec>30</Polling_Sec>              <Max_Upload_Kbs>0</Max_Upload_Kbs>              <Max_Download_Kbs>0</Max_Download_Kbs>              <Server_Encryption>0</Server_Encryption>            </Connection>")).selectNodes("./*")[0]);
this.sessions=CComQIPtr(new dpv.base,"IXDomNode")},ICloudStorageConnection:{getId:function(){return dpv.gp(this.xprop,"Id")},putId:function(a){return dpv.pp(this.xprop,"Id",a)},getName:function(){return dpv.gp(this.xprop,"Name")},putName:function(a){return dpv.pp(this.xprop,"Name",a)},getAKey:function(){return dpv.gp(this.xprop,"Access_Key")},putAKey:function(a){return dpv.pp(this.xprop,"Access_Key",a)},getSKey:function(){return dpv.gp(this.xprop,"Secret_Key")},putSKey:function(a){return dpv.pp(this.xprop,
"Secret_Key",a)},getBucketName:function(){return dpv.gp(this.xprop,"Bucket_Name")},putBucketName:function(a){return dpv.pp(this.xprop,"Bucket_Name",a)},getRegion:function(){return dpv.gp(this.xprop,"Region")},putRegion:function(a){return dpv.pp(this.xprop,"Region",a)},getContainerName:function(){return dpv.gp(this.xprop,"Container_Name")},putContainerName:function(a){return dpv.pp(this.xprop,"Container_Name",a)},getServer:function(){return dpv.gp(this.xprop,"Server_URL")},putServer:function(a){return dpv.pp(this.xprop,
"Server_URL",a)},getStorageClass:function(){return dpv.gp(this.xprop,"Storage_Class")},putStorageClass:function(a){return dpv.pp(this.xprop,"Storage_Class",a)},getPartSizeMB:function(){return dpv.gp(this.xprop,"Part_Size_MB")},putPartSizeMB:function(a){return dpv.pp(this.xprop,"Part_Size_MB",a)},getPollingSec:function(){return dpv.gp(this.xprop,"Polling_Sec")},putPollingSec:function(a){return dpv.pp(this.xprop,"Polling_Sec",a)},getMaxUploadKBS:function(){return dpv.gp(this.xprop,"Max_Upload_Kbs")},
putMaxUploadKBS:function(a){return dpv.pp(this.xprop,"Max_Upload_Kbs",a)},getMaxDownloadKBS:function(){return dpv.gp(this.xprop,"Max_Download_Kbs")},putMaxDownloadKBS:function(a){return dpv.pp(this.xprop,"Max_Download_Kbs",a)},getServerEncryption:function(){return dpv.gp(this.xprop,"Server_Encryption")=="1"},putServerEncryption:function(a){return dpv.pp(this.xprop,"Server_Encryption",a?"1":"0")},getSessions:function(){return this.sessions?this.sessions.getChildren():E_FAIL},getS3Region:function(){return dpv.gp(this.xprop,
"Region_Name")},putS3Region:function(a){return dpv.pp(this.xprop,"Region_Name",a)},getS3Server_Category:function(){return dpv.gp(this.xprop,"Server_CATEGORY")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");delete this.sessions;this.sessions=CComQIPtr(new dpv.base,"IXDomNode");if(a=a.selectNodes("Sessions")){a=this.x.selectNodes("Sessions/Session");Njl.each(a,function(b){var c=CComQIPtr(new dpv.cloudstorage.session,
"IXDomNode");c.loadFromXml(b)==S_OK&&this.sessions.appendChild(c)},this)}return S_OK}}});Njl.namespace("dpv");
dpv.cloudstorage.session=Njl.inherit(CComObjectRoot,dpv.base,ICloudStorageSession,{constructor:function(){dpv.cloudstorage.session.superclass.constructor.apply(this,arguments);CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("            <Session>                <Id></Id>                <Connection_Id></Connection_Id>                <Local_Path></Local_Path>                <Remote_Path></Remote_Path>                <Sync_Direction>bidirection</Sync_Direction>            </Session>")).selectNodes("./*")[0])},ICloudStorageSession:{getId:function(){return dpv.gp(this.as3,
"Id")},getConnectionId:function(){return dpv.gp(this.as3,"Connection_Id")},putConnectionId:function(a){return dpv.pp(this.as3,"Connection_Id",a)},getLocalPath:function(){return dpv.gp(this.as3,"Local_Path")},putLocalPath:function(a){return dpv.pp(this.as3,"Local_Path",a)},getRemotePath:function(){return dpv.gp(this.as3,"Remote_Path")},putRemotePath:function(a){return dpv.pp(this.as3,"Remote_Path",a)},getSyncDirection:function(){return dpv.gp(this.as3,"Sync_Direction")},putSyncDirection:function(a){return dpv.pp(this.as3,
"Sync_Direction",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.as3=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.cloudstatus=Njl.inherit(CComObjectRoot,dpv.base,ICloudStatus,{constructor:function(a){dpv.cloudstatus.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <Statuses>                <Joined>0</Joined>                <Enabled>0</Enabled>                <Status>                  <Conn_Id></Conn_Id>                  <Conn_Type></Conn_Type>                  <Status></Status>                  <User_Name/>                  <Used></Used>                  <Capacity></Capacity>                  <Fail_Code></Fail_Code>                </Status>              </Statuses>")).selectNodes("./*")[0])},ICloudStatus:{getJoined:function(){return dpv.gp(this.xstatuses,
"Joined")},getEnabled:function(){return dpv.gp(this.xstatuses,"Enabled")},getConn_Id:function(){return this.xstatus&&dpv.gp(this.xstatus,"Conn_Id")},getConn_Type:function(){return this.xstatus&&dpv.gp(this.xstatus,"Conn_Type")},getStatus:function(){return this.xstatus&&dpv.gp(this.xstatus,"Status")},getUser_Name:function(){return this.xstatus&&dpv.gp(this.xstatus,"User_Name")},getUsed:function(){return this.xstatus&&dpv.gp(this.xstatus,"Used")},getCapacity:function(){return this.xstatus&&dpv.gp(this.xstatus,
"Capacity")},getFail_Code:function(){return this.xstatus&&dpv.gp(this.xstatus,"Failed_Code")},getFail_Info:function(){return this.xstatus&&dpv.gp(this.xstatus,"Failed_Info")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xstatuses=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");if(a=a.selectSingleNode("Status"))this.xstatus=CComQIPtr(new dpv.xprop(a),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.insightagent=Njl.inherit(CComObjectRoot,dpv.base,IInsightAgent,{constructor:function(a){dpv.insightagent.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <Insight_Agent_Info>                    <Registered>0</Registered>                    <Connected>0</Connected>                    <User_Name/>                </Insight_Agent_Info>")).selectNodes("./*")[0])},IInsightAgent:{getRegistered:function(){return dpv.gp(this.xuser,
"Registered")},getRConnected:function(){return dpv.gp(this.xuser,"Connected")},getUserName:function(){return dpv.gp(this.xuser,"User_Name")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.netProxyServer=Njl.inherit(CComObjectRoot,dpv.base,INetworkProxyServer,{constructor:function(a){dpv.netProxyServer.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <Server>                    <Protocol></Protocol>                    <Address><![CDATA[]]\></Address>                    <Port></Port>                    <Username><![CDATA[]]\></Username>                    <Password><![CDATA[]]\></Password>                </Server>            ")).selectNodes("./*")[0])},INetworkProxyServer:{getId:function(){return dpv.gp(this.xprop,
"Id")},getProtocol:function(){return dpv.gp(this.xprop,"Protocol")},putProtocol:function(a){return dpv.pp(this.xprop,"Protocol",a)},getAddress:function(){return dpv.gp(this.xprop,"Address")},putAddress:function(a){return dpv.pp(this.xprop,"Address",a)},getPort:function(){return dpv.gp(this.xprop,"Port")},putPort:function(a){return dpv.pp(this.xprop,"Port",a)},getUsername:function(){return dpv.gp(this.xprop,"Username")},putUsername:function(a){return dpv.pp(this.xprop,"Username",a)},getPassword:function(){return dpv.gp(this.xprop,
"Password")},putPassword:function(a){return dpv.pp(this.xprop,"Password",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv");
dpv.netProxyManager=Njl.inherit(CComEventsObjectRoot("INetworkProxyManagerEvents"),dpv.base,INetworkProxyManager,{constructor:function(){dpv.netProxyManager.superclass.constructor.apply(this,arguments)},INetworkProxyManager:{UpdateServers:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="ProxyServer_Collection" resource-type="ProxyServer_Collection" />',Njl.id())),a)},getServers:function(){return this.xservers?this.xservers:E_FAIL},createServer:function(){return CComQIPtr(new dpv.netProxyServer,
"INetworkProxyServer")},AddServer:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-id="ProxyServer_Collection" resource-type="ProxyServer_Collection" >                            <Server_Collection>{1}</Server_Collection>                        </xs:add>',Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a)},CommitServer:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="ProxyServer">                            {1}                        </xs:set>',
Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a)},RemoveServer:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ProxyServer" />',Njl.id(),b.getId())),a)},RemoveAllServers:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="ProxyServer_Collection" resource-type="ProxyServer_Collection" />',Njl.id())),a)},TestConnection:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="ProxyServer">                            <xs:command_name>test_proxy_connection</xs:command_name>                            <xs:args>                                <xs:arg>                                    {1}                                </xs:arg>                            </xs:args>                        </xs:command>',
Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString().replace(/Server/g,"ProxyServer_Param"))),a)}},IXDomNode:{loadFromXml:function(a,b){var c=a.getNodeName(),d=a.getAttributeText("resource-type");if(d=="ProxyServer_Collection"){this.xservers=[];Njl.each(a.selectNodes("Servers/Server"),function(e){var f=CComQIPtr(new dpv.netProxyServer(true),"IXDomNode");f.loadFromXml(e)==S_OK&&this.xservers.push(CComQIPtr(f,"INetworkProxyServer"))},this);return S_OK}else if(c=="xs:command-s"&&d=="ProxyServer"){c=
a.selectSingleNode("Test_Result/Connection");a=a.selectSingleNode("Test_Result/Response_Code");if(c&&c.getNodeText()){this.Fire("OnTestConnection",[this,b,c.getNodeText()=="1",a?a.getNodeText():null]);return S_OK}}}}});Njl.namespace("dpv");
dpv.IRCApplication=Njl.inherit(IUnknown,{getRCDeviceManager:function(){return E_NOTIMPL},getRCNetworkManager:function(){return E_NOTIMPL},getRCUserManager:function(){return E_NOTIMPL},getRCSessionManager:function(){return E_NOTIMPL},getRCLinkManager:function(){return E_NOTIMPL},getRCLinkFSManager:function(){return E_NOTIMPL},putSourceProxyURL:function(){return E_NOTIMPL},getSourceProxyURL:function(){return E_NOTIMPL},putSourcePublicURL:function(){return E_NOTIMPL},getSourcePublicURL:function(){return E_NOTIMPL}});
IRCApplication=dpv.IRCApplication;Njl.namespace("dpv");
dpv.IRCUserManager=Njl.inherit(IUnknown,{IRCUserManager:{UpdateCurrentUser:function(){return E_NOTIMPL},getCurrentUser:function(){return E_NOTIMPL},AddUser:function(){return E_NOTIMPL},AddInvitedUser:function(){return E_NOTIMPL},changeAccount:function(){return E_NOTIMPL},QueryUsers:function(){return E_NOTIMPL},getQueryUsers:function(){return E_NOTIMPL},recoverUserId:function(){return E_NOTIMPL},recoverUserPassword:function(){return E_NOTIMPL},changeUserPassword:function(){return E_NOTIMPL},removeAccount:function(){return E_NOTIMPL},
AddRemoteUserToDevice:function(){return E_NOTIMPL},UpdateRemoteUserOnDevice:function(){return E_NOTIMPL},RemoveRemoteUserFromDevice:function(){return E_NOTIMPL},UpdateInvitedUser:function(){return E_NOTIMPL},getInvitedUser:function(){return E_NOTIMPL}}});var IRCUserManager=dpv.IRCUserManager;dpv.IRCUserManagerEvents=Njl.inherit(IProtocolEvents,{IRCUserManagerEvents:{}});var IRCUserManagerEvents=dpv.IRCUserManagerEvents;Njl.namespace("dpv");
dpv.IRCUser=Njl.inherit(IUnknown,{IRCUser:{getId:function(){return E_NOTIMPL},putId:function(){return E_NOTIMPL},getUserName:function(){return E_NOTIMPL},putUserName:function(){return E_NOTIMPL},getFirstName:function(){return E_NOTIMPL},putFirstName:function(){return E_NOTIMPL},getLastName:function(){return E_NOTIMPL},putLastName:function(){return E_NOTIMPL},getPassword:function(){return E_NOTIMPL},putPassword:function(){return E_NOTIMPL},getEmail:function(){return E_NOTIMPL},putEmail:function(){return E_NOTIMPL}}});
var IRCUser=dpv.IRCUser;Njl.namespace("dpv");
dpv.IRCDevice=Njl.inherit(IUnknown,{IRCDevice:{getId:function(){return E_NOTIMPL},putId:function(){return E_NOTIMPL},getSerial:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getSMBName:function(){return E_NOTIMPL},getP2PName:function(){return E_NOTIMPL},getAlias:function(){return E_NOTIMPL},getBase64:function(){return E_NOTIMPL},getOnline:function(){return E_NOTIMPL},getOwner:function(){return E_NOTIMPL},getModel:function(){return E_NOTIMPL},isRouter:function(){return E_NOTIMPL},
getFirmwareName:function(){return E_NOTIMPL},getFirmwareVersion:function(){return E_NOTIMPL},getFirmwareTime:function(){return E_NOTIMPL},isLocalSessionInitialized:function(){return!!(this.localSession&&this.localSession.token)},getLocalIP:function(){return E_NOTIMPL},tryLocalIP:function(){return E_NOTIMPL},putLocalIP:function(){return E_NOTIMPL},generateLocalSessionUrl:function(){return E_NOTIMPL}}});var IRCDevice=dpv.IRCDevice;
dpv.IRCDeviceEvents=Njl.inherit(IDeviceEvents,{IRCDeviceEvents:{OnLocalSessionInit:function(){return E_NOTIMPL},OnLocalSessionError:function(){return E_NOTIMPL}}});var IRCDeviceEvents=dpv.IRCDeviceEvents;
dpv.IRCDeviceCapabilities=Njl.inherit(IUnknown,{IRCDeviceCapabilities:{getFileVersions:function(){return E_NOTIMPL},getUpgradeFirmware:function(){return E_NOTIMPL},getAntivirus:function(){return E_NOTIMPL},getFilePreview:function(){return E_NOTIMPL},getSnapshots:function(){return E_NOTIMPL},getEventsSink:function(){return E_NOTIMPL},getHomeFolders:function(){return E_NOTIMPL},getSharing:function(){return E_NOTIMPL},getShareDeletion:function(){return E_NOTIMPL},getFileSearch:function(){return E_NOTIMPL}}});
var IRCDeviceCapabilities=dpv.IRCDeviceCapabilities;Njl.namespace("dpv");dpv.IRCDeviceManager=Njl.inherit(IUnknown,{IRCDeviceManager:{UpdateDevices:function(){return E_NOTIMPL},getDevices:function(){return E_NOTIMPL},getDeviceById:function(){return E_NOTIMPL},RegisterDevice:function(){return E_NOTIMPL},RemoveDevice:function(){return E_NOTIMPL},RemoveFriendDevice:function(){return E_NOTIMPL}}});var IRCDeviceManager=dpv.IRCDeviceManager;dpv.IRCDeviceManagerEvents=Njl.inherit(IProtocolEvents,{IRCDeviceManagerEvents:{OnRegisterDevice:function(){return E_NOTIMPL}}});
var IRCDeviceManagerEvents=dpv.IRCDeviceManagerEvents;Njl.namespace("dpv");dpv.IRCNetworkManager=Njl.inherit(IUnknown,{IRCNetworkManager:{UpdateMessages:function(){return E_NOTIMPL},getMessages:function(){return E_NOTIMPL},UpdateMessageByToken:function(){return E_NOTIMPL},InviteMember:function(){return E_NOTIMPL},ConfirmInvite:function(){return E_NOTIMPL}}});var IRCNetworkManager=dpv.IRCNetworkManager;dpv.IRCNetworkManagerEvents=Njl.inherit(IProtocolEvents,{IRCNetworkManagerEvents:{OnMessageUpdate:function(){}}});
var IRCNetworkManagerEvents=dpv.IRCNetworkManagerEvents;Njl.namespace("dpv");dpv.IRCDiscoverDevice=Njl.inherit(IUnknown,{});IRCDiscoverDevice=dpv.IRCDiscoverDevice;Njl.namespace("dpv");
dpv.IRCMessage=Njl.inherit(IUnknown,{IRCMessage:{getId:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},getOwnerName:function(){return dpv.gp(this.xproptlist,"OwnerName")},getMemberName:function(){return dpv.gp(this.xproptlist,"MemberName")},getMemberLogin:function(){return dpv.gp(this.xproptlist,"MemberLogin")},getDeviceAlias:function(){return dpv.gp(this.xproptlist,"DeviceAlias")},getDeviceLogin:function(){return dpv.gp(this.xproptlist,"DeviceLogin")}}});var IRCMessage=dpv.IRCMessage;
Njl.namespace("dpv");dpv.IRCDiscoverDeviceEvents=Njl.inherit(IProtocolEvents,{IRCDiscoverDeviceEvents:{}});var IRCDiscoverDeviceEvents=dpv.IRCDiscoverDeviceEvents;Njl.namespace("dpv");dpv.IRCDiscoverManager=Njl.inherit(IUnknown,{IRCDiscoverManager:{updateDevices:function(){return E_NOTIMPL},getDevices:function(){return E_NOTIMPL},updateDeviceBySerial:function(){return E_NOTIMPL},getDeviceBySerial:function(){return E_NOTIMPL}}});var IRCDiscoverManager=dpv.IRCDiscoverManager;
dpv.IRCDiscoverManagerEvents=Njl.inherit(IProtocolEvents,{IRCDiscoverManagerEvents:{}});var IRCDiscoverManagerEvents=dpv.IRCDiscoverManagerEvents;Njl.namespace("dpv");dpv.IRCSession=Njl.inherit(IUnknown,{IRCSession:{getToken:function(){return E_NOTIMPL},getUrl:function(){return E_NOTIMPL}}});var IRCSession=dpv.IRCSession;Njl.namespace("dpv");dpv.IRCSessionManager=Njl.inherit(IUnknown,{IRCSessionManager:{InitUploadSession:function(){return E_NOTIMPL},InitLocalSession:function(){return E_NOTIMPL}}});
var IRCSessionManager=dpv.IRCSessionManager;dpv.IRCSessionManagerEvents=Njl.inherit(IProtocolEvents,{IRCSessionManagerEvents:{OnUploadSessionInit:function(){return E_NOTIMPL},OnLocalSessionInit:function(){return E_NOTIMPL}}});var IRCSessionManagerEvents=dpv.IRCSessionManagerEvents;Njl.namespace("dpv");
dpv.IRCLink=Njl.inherit(IUnknown,{IRCLink:{getId:function(){return E_NOTIMPL},getDeviceId:function(){return E_NOTIMPL},getVisitCount:function(){return E_NOTIMPL},putVisitCount:function(){return E_NOTIMPL},getExpireDate:function(){return E_NOTIMPL},putExpireDate:function(){return E_NOTIMPL},getNotifyWhenAcessed:function(){return E_NOTIMPL},putNotifyWhenAcessed:function(){return E_NOTIMPL},getPasswordRequired:function(){return E_NOTIMPL},putPassword:function(){return E_NOTIMPL},getToken:function(){return E_NOTIMPL},
getDownloadUrl:function(){return E_NOTIMPL},getEmails:function(){return E_NOTIMPL},getCreateDate:function(){return E_NOTIMPL},getOwner:function(){return E_NOTIMPL},getOwnerUsername:function(){return E_NOTIMPL},getOwnerEmail:function(){return E_NOTIMPL},getOwnerId:function(){return E_NOTIMPL},getPath:function(){return E_NOTIMPL},getSize:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},getUrl:function(){return E_NOTIMPL},getExpired:function(){return E_NOTIMPL},getVisitCountComplete:function(){return E_NOTIMPL}}});
var IRCLink=dpv.IRCLink;Njl.namespace("dpv");dpv.IRCLinkGroup=Njl.inherit(IUnknown,{IRCLinkGroup:{putDeviceId:function(){return E_NOTIMPL},putVisitCount:function(){return E_NOTIMPL},putExpireDate:function(){return E_NOTIMPL},putNotifyWhenAcessed:function(){return E_NOTIMPL},putPassword:function(){return E_NOTIMPL},putPersonalMessage:function(){return E_NOTIMPL},putEmails:function(){return E_NOTIMPL},putFSResources:function(){return E_NOTIMPL}}});var IRCLinkGroup=dpv.IRCLinkGroup;Njl.namespace("dpv");
dpv.IRCLinkFSResource=Njl.inherit(IUnknown,{IRCLinkFSResource:{putPath:function(){return E_NOTIMPL},putSize:function(){return E_NOTIMPL},putPreview:function(){return E_NOTIMPL},putType:function(){return E_NOTIMPL}}});var IRCLinkFSResource=dpv.IRCLinkFSResource;Njl.namespace("dpv");
dpv.IRCLinkManager=Njl.inherit(IUnknown,{IRCLinkManager:{UpdateLinks:function(){return E_NOTIMPL},getLinks:function(){return E_NOTIMPL},createLinkGroup:function(){return E_NOTIMPL},AddLinkGroup:function(){return E_NOTIMPL},AddWebLinkGroup:function(){return E_NOTIMPL},createLinkFSResource:function(){return E_NOTIMPL},UpdateLink:function(){return E_NOTIMPL},UpdateFolderLink:function(){return E_NOTIMPL},RemoveLink:function(){return E_NOTIMPL}}});var IRCLinkManager=dpv.IRCLinkManager;
dpv.IRCLinkManagerEvents=Njl.inherit(IProtocolEvents,{IRCLinkManagerEvents:{OnLinkUpdate:function(){return E_NOTIMPL},OnLinksCreate:function(){return E_NOTIMPL}}});var IRCLinkManagerEvents=dpv.IRCLinkManagerEvents;Njl.namespace("dpv");dpv.IRCLinkFSManager=Njl.inherit(IUnknown,{IRCLinkFSManager:{updateFsTreeNode:function(){return E_NOTIMPL},updatePreview:function(){return E_NOTIMPL}}});var IRCLinkFSManager=dpv.IRCLinkFSManager;
dpv.IRCLinkFSManagerEvents=Njl.inherit(IProtocolEvents,{IRCLinkFSManagerEvents:{OnFSTNodeReady:function(){return E_NOTIMPL},OnPreviewReady:function(){return E_NOTIMPL}}});IRCLinkManagerEvents=dpv.IRCLinkFSManagerEvents;Njl.namespace("dpv");
dpv.IRCSSOManager=Njl.inherit(IUnknown,{IRCSSOManager:{AddUser:function(){return E_NOTIMPL},SendEmailConfirmation:function(){return E_NOTIMPL},ConfirmEmail:function(){return E_NOTIMPL},ModifyUser:function(){return E_NOTIMPL},ChangePassword:function(){return E_NOTIMPL},ChangeEmail:function(){return E_NOTIMPL},RequestRecoverPassword:function(){return E_NOTIMPL},RecoverPassword:function(){return E_NOTIMPL},CheckMigration:function(){return E_NOTIMPL},BindP2PAccountToSSO:function(){return E_NOTIMPL},MirgateP2PAccountToSSO:function(){return E_NOTIMPL},
SendMigrationEmailConfirmation:function(){return E_NOTIMPL},ConfirmMigrationEmail:function(){return E_NOTIMPL},LookupSSOUser:function(){return E_NOTIMPL},InviteUserToDevice:function(){return E_NOTIMPL},NotifyUserAboutPermissionsChanges:function(){return E_NOTIMPL},CheckInvitationToken:function(){return E_NOTIMPL},ConfirmInvitation:function(){return E_NOTIMPL},ConfirmEmailByInvitationToken:function(){return E_NOTIMPL}}});var IRCSSOManager=dpv.IRCSSOManager;
dpv.IRCSSOManagerEvents=Njl.inherit(IProtocolEvents,{IRCSSOManagerEvents:{OnMigrationChecked:function(){return E_NOTIMPL},OnLookupSSOUser:function(){return E_NOTIMPL},OnCheckInvitation:function(){return E_NOTIMPL}}});var IRCSSOManagerEvents=dpv.IRCSSOManagerEvents;Njl.namespace("dpv");
dpv.rcapp=Njl.inherit(dpv.CLSIDS.RCApplication,dpv.reqroot,IRCApplication,ISingleTone,{constructor:function(){dpv.rcapp.superclass.constructor.apply(this,arguments);this.m_url=document.rcserver;this.m_proxyurl=document.rcserver_soap_proxy_url;this.m_publicurl=document.rcserver_public;this.jsonp_url=document.rcserver_jsonp_public},IRCApplication:{getRCDeviceManager:function(){return this._mngr_device||(this._mngr_device=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.deviceManager,"IRCDeviceManager")))},
getRCDiscoverManager:function(){return this._mngr_discover||(this._mngr_discover=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.discoverManager,"IRCDiscoverManager")))},getRCNetworkManager:function(){return this._mngr_network||(this._mngr_network=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.networkManager,"IRCNetworkManager")))},getRCUserManager:function(){return this._mngr_user||(this._mngr_user=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.userManager,
"IRCUserManager")))},getRCSessionManager:function(){return this._mngr_session||(this._mngr_session=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.sessionManager,"IRCSessionManager")))},getRCLinkManager:function(){return this._mngr_link||(this._mngr_link=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.linkManager,"IRCLinkManager")))},getRCLinkFSManager:function(){return this._mngr_linkfs||(this._mngr_linkfs=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.linkFSManager,
"IRCLinkFSManager")))},getRCSSOManager:function(){return this._mngr_sso||(this._mngr_sso=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.rc.ssoManager,"IRCSSOManager")))},putSourceProxyURL:function(a){this.m_proxyurl=a;return S_OK},getSourceProxyURL:function(){return this.m_proxyurl},putSourcePublicURL:function(a){this.m_publicurl=a;return S_OK},getSourcePublicURL:function(){return this.m_publicurl}},IRequestRoot:{getXmlRequest:function(){var a=dpv.rcapp.superclass.IRequestRoot.getXmlRequest.apply(this,
arguments);a.withCredentials=true;return a}}});Njl.namespace("dpv.rc");
dpv.rc.userManager=Njl.inherit(CComEventsObjectRoot("IRCUserManagerEvents"),dpv.base,IRCUserManager,{constructor:function(){dpv.rc.userManager.superclass.constructor.apply(this,arguments)},IRCUserManager:{UpdateCurrentUser:function(a){return this.sendXml('<request moniker="/root" method="getuser">                        <body type="void"/>                    </request>',a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/getuser","FORM")},getCurrentUser:function(){return this.xuser?
CComQIPtr(this.xuser,"IRCUser"):E_FAIL},AddUser:function(a,b,c,d,e,f){return this.sendXml(String.format('<request moniker="/root" method="adduser">                        <body type="addRemoteUser">                            <User_Name>{0}</User_Name>                            <First_Name>{1}</First_Name>                            <Last_Name>{2}</Last_Name>                            <Email_Address>{3}</Email_Address>                            <Password><![CDATA[{4}]]\></Password>                        </body>                    </request>',
a,b,c,d,e),f,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/adduser","FORM")},AddInvitedUser:function(a,b,c,d,e,f,g,h,k){return this.sendXml(String.format('<request moniker="/root" method="addinviteduser">                        <body type="addRemoteInvitedUserRequest">                            <Token>{0}</Token>                            <Temp_User_Name>{1}</Temp_User_Name>                            <Temp_Password><![CDATA[{2}]]\></Temp_Password>                            <User_Name>{3}</User_Name>                            <First_Name>{4}</First_Name>                            <Last_Name>{5}</Last_Name>                            <Email_Address>{6}</Email_Address>                            <Password><![CDATA[{7}]]\></Password>                        </body>                    </request>',
a,b,c,d,e,f,g,h),k,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/addinviteduser","FORM")},QueryUsers:function(a,b,c,d,e){var f="";if(b)f="<email>"+b+"</email>";else if(c)f="<username>"+c+"</username>";else if(d||e)f="<fname>"+d+"</fname><lname>"+e+"</lname>";return this.sendXml(String.format('<request moniker="" method="lookupContacts">                        <body type="lookupContactsRequest">                            <Contact>{0}</Contact>                        </body>                    </request>',
f),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+"/lookupContacts","FORM")},getQueryUsers:function(){return this.users?CComQIPtr(this.users,"IXDomNode").getChildren():E_FAIL},recoverUserId:function(a,b){return this.sendXml(String.format('<request>                        <body type="recoverp2pusername">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                        </body>                    </request>',a),b,CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/recoverp2pusername","FORM")},recoverUserPassword:function(a,b){return this.sendXml(String.format('<request>                        <body type="recoverP2PPassword">                            <Name><![CDATA[{0}]]\></Name>                         </body>                    </request>',a),b,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/recoverp2ppassword","FORM")},changeUserPassword:function(a,
b,c){return this.sendXml(String.format('<request>                        <body type="changepasswordonreset">                            <New_Password><![CDATA[{0}]]\></New_Password>                            <Token>{1}</Token>                        </body>                    </request>',a,b),c,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/changep2ppasswordonrecovering","FORM")},changeAccount:function(a,b,c,d,e,f){return this.sendXml(String.format('<request moniker="/root" method="updateUser">                        <body type="updateUserRequest">                            <User_Name>{0}</User_Name>                            <First_Name>{1}</First_Name>                            <Last_Name>{2}</Last_Name>                            <Email_Address>{3}</Email_Address>                            <Password><![CDATA[{4}]]\></Password>                        </body>                    </request>',
a,b,c,d,e),f,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/updateUser","FORM")},removeAccount:function(a){return this.sendXml('<request moniker="/root" method="removeaccount">                    <body type="removeAccount">                    </body>                </request>',a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/removeaccount","FORM")},AddRemoteUserToDevice:function(a,b,c){return this.sendXml(String.format('<request moniker="" method="addRemoteUser">                        <body type="addRemoteUserRequest">                            <device>{0}</device>                            <remoteuser>{1}</remoteuser>                        </body>                    </request>',
a,b),c,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+"/addRemoteUser","FORM")},UpdateRemoteUserOnDevice:function(a,b,c,d,e){return this.sendXml(String.format('<request moniker="" method="updateRemoteUser">                        <body type="updateRemoteUserRequest">                            <device>{0}</device>                            <remoteuser>{1}</remoteuser>                            <share>{2}</share>                            <access>{3}</access>                        </body>                    </request>',
a,b,c,d),e,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+"/updateRemoteUser","FORM")},RemoveRemoteUserFromDevice:function(a,b,c){return this.sendXml(String.format('<request moniker="" method="deleteRemoteUser">                        <body type="deleteRemoteUserRequest">                            <device>{0}</device>                            <remoteuser>{1}</remoteuser>                        </body>                    </request>',a,b),c,CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+"/deleteRemoteUser","FORM")},UpdateInvitedUser:function(a,b,c){return this.sendXml(String.format('<request moniker="/root" method="getinviteduserinfo">                        <body type="getInvitedUserInfoRequest">                            <Temp_User_Name>{0}</Temp_User_Name>                            <Temp_Password><![CDATA[{1}]]\></Temp_Password>                        </body>                    </request>',b,c),a,CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/getinviteduserinfo","FORM")},getInvitedUser:function(){return this.xiuser?CComQIPtr(this.xiuser,"IRCUser"):E_FAIL}},IXDomNode:{loadFromXml:function(a){var b=CComQIPtr(this,"IXDomNode"),c=a.selectSingleNode("User_Collection"),d=a.selectSingleNode("User");if(c){c=c.selectNodes("User");this.users&&b.removeChild(this.users);this.users=CComQIPtr(new dpv.base,"IXDomNode");b.appendChild(this.users);Njl.each(c,function(e){var f=CComQIPtr(new dpv.rc.user(true),
"IXDomNode");f.loadFromXml(e)==S_OK&&this.users.appendChild(f)},this)}else if(d)if(a.getAttributeText("resource-type")=="Invited_Contact"){delete this.xiuser;a=CComQIPtr(new dpv.rc.user(true),"IXDomNode");if(a.loadFromXml(d)==S_OK)this.xiuser=a}else{delete this.xuser;a=CComQIPtr(new dpv.rc.user(true),"IXDomNode");if(a.loadFromXml(d)==S_OK)this.xuser=a}return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.user=Njl.inherit(dpv.base,IRCUser,{constructor:function(a){dpv.rc.user.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <User>                    <User_Id></User_Id>                    <User_Name></User_Name>                    <First_Name></First_Name>                    <Last_Name></Last_Name>                    <Password></Password>                    <Email_Address></Email_Address>                </User>")).selectNodes("./*")[0])},
IRCUser:{getId:function(){return dpv.gp(this.xuser,"User_Id")},putId:function(a){return dpv.pp(this.xuser,"User_Id",a)},getUserName:function(){return dpv.gp(this.xuser,"User_Name")},putUserName:function(a){return dpv.pp(this.xuser,"User_Name",a)},getFirstName:function(){return dpv.gp(this.xuser,"First_Name")},putFirstName:function(a){return dpv.pp(this.xuser,"First_Name",a)},getLastName:function(){return dpv.gp(this.xuser,"Last_Name")},putLastName:function(a){return dpv.pp(this.xuser,"Last_Name",
a)},getPassword:function(){return dpv.gp(this.xuser,"Password")},putPassword:function(a){return dpv.pp(this.xuser,"Password",a)},getEmail:function(){return dpv.gp(this.xuser,"Email_Address")},putEmail:function(a){return dpv.pp(this.xuser,"Email_Address",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.device=Njl.inherit(dpv.CLSIDS.RCDevice,CComEventsObjectRoot("IRCDeviceEvents"),dpv.device5200,IRCDevice,IRCDeviceCapabilities,{constructor:function(a){dpv.rc.device.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document('                <Device resource-id="unknown" resource-type="Device">                    <alias></alias>                    <base64></base64>                    <id></id>                    <online></online>                    <serial></serial>                    <username></username>                </Device>')).selectNodes("./*")[0]);
this.m_ls_url_pattern="{0}/{1}/{2}/{3}";this.m_ls_url_pattern_router="/cgi-bin/rccommand.cgi?at={1}&ts={2}&path={0}/{3}";this.spRCApp=CComQIPtr(CoCreateInstance(dpv.CLSIDS.RCApplication),"IRCApplication");this.spRCAppRequestRoot=CComQIPtr(this.spRCApp,"IRequestRoot");this.spRCDevice=CComQIPtr(this,"IRCDevice")},ISingleTone:{getSingleToneState:function(a){a.res=false;return S_OK}},IRequestRoot:{getXmlRequest:function(){var a=dpv.rc.device.superclass.IRequestRoot.getXmlRequest.apply(this,arguments);
if(this.spRCDevice.isLocalSessionInitialized()){a.originalUrl=a.url;a.isLocalSessionRequest=true;if(this.csrf){a.headers=a.headers||{};a.headers.csrfpId=this.csrf}a.url=this.spRCDevice.generateLocalSessionUrl(a.url)}else{a.params.request=Njl.Utils.Base64.encode(a.params.request);a.url=this.spRCAppRequestRoot.getSourceURL()+"/sendnml/"+this.spRCDevice.getId()+a.url;a.withCredentials=true;a.headers=a.headers||{};a.headers["Content-Type"]="text/plain; charset=UTF-8";a.type="BIN"}return a}},IRCDevice:{getId:function(){return dpv.gp(this.xproptlist,
"id")},putId:function(a){return dpv.pp(this.xproptlist,"id",a)},getSerial:function(){return dpv.gp(this.xproptlist,"serial")},getName:function(){return dpv.gp(this.xproptlist,"username")},getSMBName:function(){return dpv.gp(this.xproptlist,"smb_username")},getP2PName:function(){return dpv.gp(this.xproptlist,"p2p_username")},getAlias:function(){return dpv.gp(this.xproptlist,"alias")},getBase64:function(){return dpv.gp(this.xproptlist,"base64")},getOnline:function(){return dpv.gp(this.xproptlist,"online")==
"true"},getOwner:function(){return this.xowner?CComQIPtr(this.xowner,"IRCUser"):E_FAIL},getModel:function(){return dpv.gp(this.xproptlist,"model")},isRouter:function(){var a=this.spRCDevice.isNAS();return a==E_FAIL?E_FAIL:!a},isNAS:function(){var a=this.spRCDevice.getModel();if(a&&a!=E_FAIL){a=(a+"").toLowerCase().replace(/\s/g,"");return a.indexOf("readynas")==0}else return E_FAIL},getFirmwareName:function(){return dpv.gp(this.xproptlist,"firmware_name")},getFirmwareVersion:function(){return dpv.gp(this.xproptlist,
"firmware_id")},getFirmwareTime:function(){return dpv.gp(this.xproptlist,"firmware_time")},isLocalSessionInitialized:function(){return!!(this.localSession&&this.localSession.token)},getLocalIP:function(){return this.localSession&&this.localSession.ip?this.localSession.ip:""},tryLocalIP:function(a,b,c,d){var e=this.spRCDevice,f=e.getSerial();if(f&&a&&(window.location.protocol=="http:"||window.location.protocol=="file:")){if(!e.getLocalIP()||d)if(e.isNAS()){if(!this.csrf||+new Date>=this.csrfExpiredTime)Njl.lib.Ajax.request("GET",
"http://"+a+"/csrf.html",{success:function(g){if(g&&g.responseText){g=g.responseText.match(/(csrfpId\", \"(.*?));/g);if(g.length>0){this.csrf=g[0].replace('csrfpId", "',"").replace('");',"");this.csrfExpiredTime=+new Date+36E5}}},scope:this,timeout:b});Njl.lib.Ajax.request("GET","http://"+a+":10000/nasService.xml",{success:function(g){var h=false;if(!e.getLocalIP())if(g&&g.responseText)if((g=(new Njl.Xml.document(g.responseText.replace('xmlns="urn:schemas-upnp-org:device-1-0"',""))).selectSingleNode("root/device/serialNumber"))&&
f==g.getNodeText()){e.putLocalIP(a,c);h=true}h||this.Fire("OnLocalSessionError",[e,a])},failure:function(){this.Fire("OnLocalSessionError",[e,a])},scope:this,timeout:b})}else Njl.lib.Ajax.request("GET","http://"+a+":10000/check_serial?sn="+f,{success:function(){e.getLocalIP()?this.Fire("OnLocalSessionError",[e,a]):e.putLocalIP(a,c)},failure:function(){this.Fire("OnLocalSessionError",[e,a])},scope:this,timeout:b})}else this.Fire("OnLocalSessionError",[e,a])},putLocalIP:function(a,b){if(!this.spRCSessionManager)this.spRCSessionManager=
this.spRCApp.getRCSessionManager();this.localSession={ip:a};CComQIPtr(this.spRCSessionManager,"INotifySink").Advise(this);var c=new String("dpv-init-localsession");c.device=this;c.ip=a;this.spRCSessionManager.InitLocalSession(c,this.spRCDevice.getId(),b)},generateLocalSessionUrl:function(a,b,c,d){if(this.localSession){var e=document.lan_direct_connection_map,f=this.spRCDevice.isNAS()?this.m_ls_url_pattern:this.m_ls_url_pattern_router;a=a||"";a=e&&e[a]?e[a]:a;e=(new Date).getTime();if(this.localSession.time>=
e)e=this.localSession.time+1;this.localSession.time=e;e=e.toString(16);a=a[a.length-1]=="/"?a.substr(0,a.length-1):a;b=(b&&b[0]=="/"?b.substr(1):b)||"";c=(c&&c[0]=="/"?c.substr(1):c)||"";b=Njl.Utils.MD5(this.localSession.token+(d?b:"")+e);sessionStorage.setItem("md5",b);a=String.format(f,a,b,e,c);a="http://"+this.spRCDevice.getLocalIP()+(document.lan_direct_connection_router_port&&this.spRCDevice.isNAS()?"":":"+document.lan_direct_connection_router_port)+a}else a="";return a},onLocalSessionRequestFailed:function(){if(this.localSession&&
this.localSession.ip){this.localSession.countFailed=(this.localSession.countFailed||0)+1;if(this.localSession.countFailed==2){this.spRCDevice.tryLocalIP(this.localSession.ip);delete this.localSession}}}},IRCDeviceCapabilities:{getFileVersions:function(){return this.spRCDevice.isNAS()},getUpgradeFirmware:function(){return this.spRCDevice.isNAS()},getAntivirus:function(){return this.spRCDevice.isNAS()},getFilePreview:function(){return this.spRCDevice.isNAS()},getSnapshots:function(){return this.spRCDevice.isNAS()},
getEventsSink:function(){return this.spRCDevice.isNAS()},getHomeFolders:function(){return this.spRCDevice.isNAS()},getSharing:function(){return this.spRCDevice.isNAS()},getShareDeletion:function(){return this.spRCDevice.isNAS()},getFileSearch:function(){return this.spRCDevice.isNAS()}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){dpv.rc.device.superclass.IXDomNode.loadFromXml.apply(this,arguments);this.x=a;if(a.getNodeName()=="Device"){this.xproptlist=CComQIPtr(new dpv.xprop(a),
"IXPropertyList");delete this.xowner;var b=a.selectSingleNode("owner"),c=CComQIPtr(new dpv.rc.user(true),"IXDomNode");if(c.loadFromXml(b)==S_OK)this.xowner=c}return S_OK}},IRCSessionManagerEvents:{OnReady:function(){return S_OK},OnLocalSessionInit:function(a,b){if(a=="dpv-init-localsession")if(this.localSession&&a.device===this&&this.localSession.ip===a.ip){var c=b.getToken();if(c){this.localSession.token=c;this.Fire("OnLocalSessionInit",[this.spRCDevice,a.ip,b])}else this.Fire("OnLocalSessionError",
[this.spRCDevice,a.ip])}return S_OK},OnDone:function(a,b,c){if(c=="dpv-init-localsession")if(this.localSession&&c.device===this&&this.localSession.ip===c.ip){a!=S_OK&&this.Fire("OnLocalSessionError",[this.spRCDevice,c.ip]);this.spRCSessionManager&&CComQIPtr(this.spRCSessionManager,"INotifySink").Unadvise(this)}}}});Njl.namespace("dpv.rc");
dpv.rc.deviceManager=Njl.inherit(CComEventsObjectRoot("IRCDeviceManagerEvents"),dpv.base,IRCDeviceManager,{constructor:function(){dpv.rc.deviceManager.superclass.constructor.apply(this,arguments)},IRCDeviceManager:{UpdateDevices:function(a){return this.sendXml('<request moniker="/root" method="getalldevices">                    <body type="void"/>                </request>',a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/getalldevices","FORM")},getDevices:function(){return this.xdevices?
this.xdevices.slice():E_FAIL},getDeviceById:function(a){return this.hash&&this.hash[a]?this.hash[a]:null},RegisterDevice:function(a,b){return this.sendXml(String.format('<request moniker="/root/devices/{0}" method="register">                        <body type="void"/>                    </request>',b.getId()),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/register","FORM")},RemoveDevice:function(a,b){return this.sendXml(String.format('<request moniker="/root/devices/{0}" method="unregister">                        <body type="void"/>                    </request>',
a.getId()),b,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/unregister","FORM")},RemoveFriendDevice:function(a,b){return this.sendXml(String.format('<request moniker="" method="deleteFriendDevice">                        <body type="deleteFriendDeviceRequest">                            <id>{0}</id>                        </body>                    </request>',a.getId()),b,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/deleteFriendDevice",
"FORM")}},IXDomNode:{loadFromXml:function(a,b){var c=a.selectSingleNode("Device_Collection");a=a.selectSingleNode("Device");if(c){this.xdevices=[];this.hash=[];if(b=c.selectNodes("Device"))for(a=0;a<b.length;++a){c=CComQIPtr(new dpv.rc.device(true),"IXDomNode");if(c.loadFromXml(b[a])==S_OK){this.xdevices.push(c);c=CComQIPtr(c,"IRCDevice");this.hash[c.getId()]=c}}}else if(a){c=CComQIPtr(new dpv.rc.device(true),"IXDomNode");c.loadFromXml(a)==S_OK&&this.Fire("OnRegisterDevice",[b,CComQIPtr(c,"IRCDevice")])}return S_OK}}});
Njl.namespace("dpv.rc");
dpv.rc.networkManager=Njl.inherit(CComEventsObjectRoot("IRCNetworkManagerEvents"),dpv.base,IRCNetworkManager,{constructor:function(){dpv.rc.networkManager.superclass.constructor.apply(this,arguments)},IRCNetworkManager:{UpdateMessages:function(a){return this.sendXml(String.format('<request moniker="" method="getmessages">                        <body type="getMessagesRequest">                        </body>                    </request>'),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+
"/getmessages","FORM")},getMessages:function(){return this.messages?CComQIPtr(this.messages,"IXDomNode").getChildren():E_FAIL},UpdateMessageByToken:function(a,b){return this.sendXml(String.format('<request>                        <body type="getMemberInvitation">                            <token>{0}</token>                        </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+"/getMemberInvitation","FORM")},InviteMember:function(a,
b,c){return this.sendXml(String.format('<request moniker="" method="inviteNetworkMemberByEmail">                        <body type="inviteNetworkMemberByEmailRequest">                            <device>{0}</device>                            <email>{1}</email>                        </body>                    </request>',a,b),c,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+"/inviteNetworkMemberByEmail","FORM")},ConfirmInvite:function(a,b){return this.sendXml(String.format('<request moniker="" method="confirminvitation">                        <body type="confirmInvitationRequest">                            <token>{0}</token>                        </body>                    </request>',
a),b,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourceProxyURL()+"/confirminvitation","FORM")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a,b){this.x=a;CComQIPtr(this,"IXDomNode");var c=a.selectSingleNode("Messages_Collection");if(c){this.messages=CComQIPtr(new dpv.base,"IXDomNode");b=c.selectNodes("Message");Njl.each(b,function(d){var e=CComQIPtr(new dpv.rc.message(true),"IXDomNode");e.loadFromXml(d)==S_OK&&this.messages.appendChild(e)},this)}else if(a=
a.selectSingleNode("Message")){c=CComQIPtr(new dpv.rc.message(true),"IXDomNode");c.loadFromXml(a)==S_OK&&this.Fire("OnMessageUpdate",[b,CComQIPtr(c,"IRCMessage")])}return S_OK}}});Njl.namespace("dpv","dpv.rc");
dpv.rc.discoverdevice=Njl.inherit(CComObjectRoot,{constructor:function(){dpv.rc.discoverdevice.superclass.constructor.apply(this,arguments)},IRCDiscoverDevice:{getFiendlyName:function(){return this.x.hostname},getModelName:function(){return this.x.model},getIndex:function(){return this.x.index},getPresentationURL:function(){for(var a=E_FAIL,b=0;b<this.x.network.length;b++)if(a=this.x.network[b].IPv4_Address)return a;return a},getPresentationURLs:function(){for(var a=[],b=0;b<this.x.network.length;b++)this.x.network[b].IPv4_Address&&
a.push(this.x.network[b].IPv4_Address);return a},getMACAddress:function(){for(var a=E_FAIL,b=0;b<this.x.network.length;b++)if(a=this.x.network[b].MAC_Address)return a;return a},getPresentationIPv4URL:function(){},getPresentationIPv6URL:function(){},getStatus:function(){return this.x.status},getCloudRegistered:function(){return this.x.registered},getWizardManaged:function(){return this.x.managed},getForced:function(){return this.x.forced}},loadFromJSON:function(a){this.x=a;return S_OK}});Njl.namespace("dpv.rc");
dpv.rc.discoverManager=Njl.inherit(CComEventsObjectRoot("IRCDiscoverManagerEvents"),IXDomNode,IRCDiscoverManager,{constructor:function(){dpv.rc.discoverManager.superclass.constructor.apply(this,arguments);this.server=document.discoverserver},IRCDiscoverManager:{updateDevices:function(a){var b=new Njl.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);this.Fire("OnPending",[CComQIPtr(this,"IUnknown"),a]);var c=this.__i?this.__i.substr(0,this.__i.length-
6):"Unknown";_TRACE("WebCall [lparam = "+a+"]","updateDevices",_TRACE.INFO,c);b.request({url:this.server,method:"GET",scriptTag:true,argument:{method:"updateDevices",lparam:a}});return S_OK},getDevices:function(){return this.xdevices?this.xdevices.slice():E_FAIL},getReducedDevices:function(){return this.xrdevices?this.xrdevices.slice():E_FAIL},updateDeviceBySerial:function(a,b){var c=new Njl.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);this.Fire("OnPending",
[CComQIPtr(this,"IUnknown"),b]);var d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_TRACE("WebCall [lparam = "+b+"]","updateDeviceBySerial",_TRACE.INFO,d);c.request({url:this.server+"?id="+a,method:"GET",scriptTag:true,argument:{method:"updateDeviceBySerial",lparam:b}});return S_OK},getDeviceBySerial:function(){return this.xserialdevice&&this.xserialdevice.x?this.xserialdevice:E_FAIL},getDeviceBySerialWithoutForced:function(){return this.xserialdeviceforced&&this.xserialdeviceforced.x?
this.xserialdeviceforced:E_FAIL}},onDone:function(a,b,c){a=c.argument.method;if(b.responseText&&b.responseText.length<102400){var d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_TRACE("WebResp [lparam = "+c.argument.lparam+"]",Njl.util.Format.htmlEncode(b.responseText),_TRACE.INFO,d)}else if(b.responseText&&b.responseText.length){d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_TRACE("WebResp [lparam = "+c.argument.lparam+"]","Message > 100k has been omitted",_TRACE.INFO,d)}switch(a){case "updateDevices":this.xdevices=
[];this.xrdevices=[];a=b.responseObject.data.items;for(d=0;d<a.length;++d){b=new dpv.rc.discoverdevice;if(b.loadFromJSON(a[d])==S_OK){this.xdevices.push(b);b.x&&b.x.forced==false&&this.xrdevices.push(b)}}this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.argument.lparam]);this.Fire("OnDone",[S_OK,CComQIPtr(this,"IUnknown"),c.argument.lparam]);break;case "updateDeviceBySerial":delete this.xserialdevice;delete this.xserialdeviceforced;a=b.responseObject.data.items[0];b=new dpv.rc.discoverdevice;if(b.loadFromJSON(a)==
S_OK)if(b.x){this.xserialdeviceforced=b;if(b.x.forced==false)this.xserialdevice=b}this.Fire("OnReady",[CComQIPtr(this,"IUnknown"),c.argument.lparam]);this.Fire("OnDone",[S_OK,CComQIPtr(this,"IUnknown"),c.argument.lparam]);break}return S_OK},onFailed:function(a,b,c,d){a=c.argument.method;if(b.responseText&&b.responseText.length<102400){var e=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_TRACE("WebResp [lparam = "+c.argument.lparam+"]",Njl.util.Format.htmlEncode(b.responseText),_TRACE.ERROR,
e)}else if(b.responseText&&b.responseText.length){e=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_TRACE("WebResp [lparam = "+c.argument.lparam+"]","Message > 100k has been omitted",_TRACE.ERROR,e)}switch(a){case "updateDevices":this.Fire("OnDone",[d,CComQIPtr(this,"IUnknown"),c.argument.lparam]);break;case "updateDeviceBySerial":this.Fire("OnDone",[d,CComQIPtr(this,"IUnknown"),c.argument.lparam]);break}}});Njl.namespace("dpv.rc");
dpv.rc.message=Njl.inherit(dpv.base,IRCMessage,{constructor:function(){dpv.rc.message.superclass.constructor.apply(this,arguments)},IRCMessage:{getId:function(){return dpv.gp(this.xproptlist,"uuid")},getType:function(){return this.x?this.x.getAttributeText("resource-type"):E_FAIL},getOwnerName:function(){return dpv.gp(this.xproptlist,"OwnerName")},getMemberName:function(){return dpv.gp(this.xproptlist,"MemberName")},getMemberLogin:function(){return dpv.gp(this.xproptlist,"MemberLogin")},getDeviceAlias:function(){return dpv.gp(this.xproptlist,
"DeviceAlias")},getDeviceLogin:function(){return dpv.gp(this.xproptlist,"DeviceLogin")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.session=Njl.inherit(dpv.base,IRCSession,{constructor:function(){dpv.rc.session.superclass.constructor.apply(this,arguments)},IRCSession:{getToken:function(){return dpv.gp(this.xproptlist,"Token")},getUrl:function(){return dpv.gp(this.xproptlist,"Url")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.sessionManager=Njl.inherit(CComEventsObjectRoot("IRCSessionManagerEvents"),dpv.base,IRCSessionManager,{constructor:function(){dpv.rc.sessionManager.superclass.constructor.apply(this,arguments)},IRCSessionManager:{InitUploadSession:function(a,b,c){var d="";Njl.each(c,function(e){d+="<File_Path><![CDATA["+e+"]]\></File_Path>"});return this.sendXml(String.format('<request><body type="initUpload"><Device_ID>{0}</Device_ID><File_Paths>{1}</File_Paths></body></request>',b,d),a,CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/initUpload","FORM")},InitLocalSession:function(a,b,c){return this.sendXml(String.format('<request><body type="initLocalSession"><Device_ID>{0}</Device_ID><Expires>{1}</Expires></body></request>',b,c===false?"False":"True"),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/initlocalsession","FORM")}},IXDomNode:{loadFromXml:function(a,b){var c=a.getAttributeText("resource-type");if(c=="IO_Session"){if(a=a.selectSingleNode("Session")){c=
CComQIPtr(new dpv.rc.session,"IXDomNode");if(c.loadFromXml(a)==S_OK)(c=CComQIPtr(c,"IRCSession"))&&this.Fire("OnUploadSessionInit",[b,c])}}else if(c=="LocalSession")if(a=a.selectSingleNode("LocalSession")){c=CComQIPtr(new dpv.rc.session,"IXDomNode");if(c.loadFromXml(a)==S_OK)(c=CComQIPtr(c,"IRCSession"))&&this.Fire("OnLocalSessionInit",[b,c])}return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.link=Njl.inherit(dpv.base,IRCLink,{constructor:function(a){dpv.rc.link.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <SharedLink>                    <id />                    <DeviceId />                    <VisitCount />                    <ExpireDate />                    <NotifyWhenAccessed />                    <Password />                    <PasswordRequired />                    <MailList />                    <FsResource>                        <Path />                        <Size />                        <Type />                    </FsResource>                </SharedLink>")).selectNodes("./*")[0])},
IRCLink:{getId:function(){return dpv.gp(this.xproptlist,"id")},getDeviceId:function(){return dpv.gp(this.xproptlist,"DeviceId")},getVisitCount:function(){return dpv.gp(this.xproptlist,"VisitCount")},putVisitCount:function(a){return dpv.pp(this.xproptlist,"VisitCount",a)},getExpireDate:function(){return dpv.gp(this.xproptlist,"ExpireDate")},putExpireDate:function(a){return dpv.pp(this.xproptlist,"ExpireDate",a)},getNotifyWhenAcessed:function(){var a=dpv.gp(this.xproptlist,"NotifyWhenAccessed");return a==
"True"||a=="true"},putNotifyWhenAcessed:function(a){return dpv.pp(this.xproptlist,"NotifyWhenAccessed",a?"True":"False")},getPasswordRequired:function(){var a=dpv.gp(this.xproptlist,"PasswordRequired");return a=="True"||a=="true"},putPassword:function(a){return dpv.pp(this.xproptlist,"Password",a)},getToken:function(){return dpv.gp(this.xproptlist,"Token")},getDownloadUrl:function(){return dpv.gp(this.xproptlist,"DownloadUrl")},getEmails:function(){var a=this.x.selectNodes("MailList/email"),b=[];
Njl.each(a,function(c){(c=c.getNodeText())&&b.push(c)},this);return b},getCreateDate:function(){return dpv.gp(this.xproptlist,"CreateDate")},getOwner:function(){return dpv.gp(this.xproptlist,"Owner")},getOwnerUsername:function(){return dpv.gp(this.xproptlist,"OwnerUsername")},getOwnerEmail:function(){return dpv.gp(this.xproptlist,"OwnerEmail")},getOwnerId:function(){return dpv.gp(this.xproptlist,"OwnerId")},getPath:function(){return dpv.gp(this.xproptlist,"FsResource/Path")},getSize:function(){return dpv.gp(this.xproptlist,
"FsResource/Size")},getType:function(){return dpv.gp(this.xproptlist,"FsResource/Type")},getUrl:function(){return dpv.gp(this.xproptlist,"Uri")},getExpired:function(){var a=dpv.gp(this.xproptlist,"Expired");return a=="True"||a=="true"},getVisitCountComplete:function(){return dpv.gp(this.xproptlist,"VisitCountComplete")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.linkgroup=Njl.inherit(dpv.base,IRCLinkGroup,{constructor:function(a){dpv.rc.linkgroup.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <SharedLinkGroup>                    <CommonData>                        <DeviceId />                        <VisitCount />                        <ExpireDate />                        <PersonalMessage />                        <NotifyWhenAccessed />                        <Password />                        <MailList />                    </CommonData>                    <FsResourceList />                </SharedLinkGroup>")).selectNodes("./*")[0])},
IRCLinkGroup:{putDeviceId:function(a){return dpv.pp(this.xproptlist,"CommonData/DeviceId",a)},putVisitCount:function(a){return dpv.pp(this.xproptlist,"CommonData/VisitCount",a)},putExpireDate:function(a){return dpv.pp(this.xproptlist,"CommonData/ExpireDate",a)},putNotifyWhenAcessed:function(a){return dpv.pp(this.xproptlist,"CommonData/NotifyWhenAccessed",a?"True":"False")},putPassword:function(a){return dpv.pp(this.xproptlist,"CommonData/Password",a)},putPersonalMessage:function(a){return dpv.pp(this.xproptlist,
"CommonData/PersonalMessage",a)},putEmails:function(a){var b=this.x.selectSingleNode("CommonData/MailList");b.removeNode("*");for(var c=0;c<a.length;++c)b.appendNode("email").setNodeText(a[c]);return S_OK},putFSResources:function(a){var b=this.x.selectSingleNode("FsResourceList");b.removeNode("*");for(var c=0;c<a.length;++c)b.appendNode(CComQIPtr(a[c],"IXDomNode").getXml());return S_OK}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),
"IXPropertyList");return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.linkFSResource=Njl.inherit(dpv.base,IRCLinkFSResource,{constructor:function(a){dpv.rc.linkFSResource.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <FsResource>                    <Path />                    <Size>0</Size>                    <Preview />                    <Type>file</Type>                </FsResource>")).selectNodes("./*")[0])},IRCLinkFSResource:{putPath:function(a){return dpv.pp(this.xproptlist,"Path",
a)},putSize:function(a){return dpv.pp(this.xproptlist,"Size",a)},putPreview:function(a){this.x.removeNode("Preview");return this.x.appendNode(new Njl.Xml.document("<Preview><![CDATA["+a+"]]\></Preview>"))},putType:function(a){return dpv.pp(this.xproptlist,"Type",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.linkManager=Njl.inherit(CComEventsObjectRoot("IRCLinkManagerEvents"),dpv.base,IRCLinkManager,{constructor:function(){dpv.rc.linkManager.superclass.constructor.apply(this,arguments)},IRCLinkManager:{UpdateLinks:function(a,b){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_devId=b;return this.sendXml(String.format('<request>                        <body type="getSharedLinksRequest">                            <deviceId>{0}</deviceId>                        </body>                    </request>',
b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/getsharedlinks","FORM")},getLinks:function(a){return this.links&&this.links[a]?CComQIPtr(this.links[a],"IXDomNode").getChildren():E_FAIL},createLinkGroup:function(){return CComQIPtr(new dpv.rc.linkgroup,"IRCLinkGroup")},AddLinkGroup:function(a,b){return this.sendXml(String.format('<request>                        <body type="createSharedLinks">                            {0}                        </body>                    </request>',
CComQIPtr(b,"IXDomNode").getXml().toString()),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/createsharedlinks","FORM")},AddWebLinkGroup:function(a,b){return this.sendXml(String.format('<request>                        <body type="createSharedLinksAdvanced">                            {0}                        </body>                    </request>',CComQIPtr(b,"IXDomNode").getXml().toString()),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+
"/createsharedlinksadvanced","FORM")},createLinkFSResource:function(){return CComQIPtr(new dpv.rc.linkFSResource,"IRCLinkFSResource")},UpdateLink:function(a,b,c){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_linkId=b;return this.sendXml(String.format('<request>                        <body type="sharedLinkRequest">                            <id>{0}</id>                            <Password>{1}</Password>                        </body>                    </request>',b,c||""),a,CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/getpublicsharedlink","FORM")},UpdateFolderLink:function(a,b,c){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_linkId=b;return this.sendXml(String.format('<request>                        <body type="getFolderPageToken">                            <SharedFolderToken>{0}</SharedFolderToken>                            <Password>{1}</Password>                        </body>                    </request>',b,c||""),a,CComQIPtr(CComQIPtr(this,
"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/shared/folder/getpagetoken","FORM")},RemoveLink:function(a,b){return this.sendXml(String.format('<request>                        <body type="sharedLinkRequest">                            <id>{0}</id>                        </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/deletesharedlink","FORM")}},IXDomNode:{loadFromXml:function(a,b){this.x=a;var c=a.selectSingleNode("SharedLinks_Collection"),
d=a.selectSingleNode("CreatedSharedLinks_Collection");if(c){var e=b._dpv_devId;if(e){this.links=this.links||{};this.links[e]=CComQIPtr(new dpv.base,"IXDomNode");var f=c.selectNodes("SharedLink");Njl.each(f,function(g){var h=CComQIPtr(new dpv.rc.link(true),"IXDomNode");h.loadFromXml(g)==S_OK&&this.links[e].appendChild(h)},this)}}else if(d){f=[];Njl.each(d.selectNodes("SharedLink"),function(g){var h=CComQIPtr(new dpv.rc.link(true),"IXDomNode");h.loadFromXml(g)==S_OK&&f.push(CComQIPtr(h,"IRCLink"))},
this);this.Fire("OnLinksCreate",[b,f])}else{c=b._dpv_linkId;delete b._dpv_linkId;if(c){d=CComQIPtr(new dpv.rc.link,"IXDomNode");if(a=a.selectSingleNode("SharedLink"))if(d.loadFromXml(a)==S_OK)(d=CComQIPtr(d,"IRCLink"))&&this.Fire("OnLinkUpdate",[b,c,d])}}return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.linkFSManager=Njl.inherit(CComEventsObjectRoot("IRCLinkFSManagerEvents"),dpv.base,IRCLinkFSManager,{constructor:function(){dpv.rc.linkManager.superclass.constructor.apply(this,arguments)},make_quoted:function(a){if(Njl.isString(a)){var b=function(c){if(c=="<")return"&lt;";else if(c==">")return"&gt;";else if(c=='"')return"&quot;";else if(c=="&")return"&amp;"};return a.replace(/[<>"&]/g,function(c){return b(c)})}return a},IRCLinkFSManager:{updateFsTreeNode:function(a,b,c){b=this.make_quoted(b);
return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSGrabNode" resource-type="FSGrabNode">                    <request id="{0}" method="fs.grab">                        <param name="path">{1}</param>                        <param name="attr">2</param>                    </request>                </xs:get>',Njl.id(),b)),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/shared/folder/grab?t="+c,"FORM")},updatePreview:function(a,
b,c,d,e){b=this.make_quoted(b);return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="FSFilePreview" resource-type="FSFilePreview">                    <request id="{0}" method="fs.preview">                        <param name="path">{1}</param>                        <param name="height">{2}</param>                        <param name="width">{3}</param>                    </request>                </xs:get>',Njl.id(),b,c,d)),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),
"IRCApplication").getSourcePublicURL()+"/shared/folder/preview?t="+e,"FORM")}},IXDomNode:{loadFromXml:function(a,b){switch(a.getAttributeText("resource-type")){case "FSGrabNode":this.Fire("OnFSTNodeReady",[a,b]);break;case "FSFilePreview":this.Fire("OnPreviewReady",[a.getNodeText(),b]);break;default:break}return S_OK}}});Njl.namespace("dpv.rc");
dpv.rc.ssoManager=Njl.inherit(CComEventsObjectRoot("IRCSSOManagerEvents"),dpv.base,IRCSSOManager,{constructor:function(){dpv.rc.ssoManager.superclass.constructor.apply(this,arguments)},IRCSSOManager:{AddUser:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="addRemoteUser">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                            <First_Name><![CDATA[{1}]]\></First_Name>                            <Last_Name><![CDATA[{2}]]\></Last_Name>                            <Password><![CDATA[{3}]]\></Password>                            <Skip_Confirmation_Email>{4}</Skip_Confirmation_Email>                        </body>                    </request>',
b.getEmail(),b.getFirstName(),b.getLastName(),b.getPassword(),(!!c).toString()),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/adduser","FORM")},SendEmailConfirmation:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="ssoCredentials">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                            <Password><![CDATA[{1}]]\></Password>                        </body>                    </request>',
b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/sendemailconfirmation","FORM")},ConfirmEmail:function(a,b){return this.sendXml(String.format('<request>                        <body type="confirmEmail">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/confirmemail","FORM")},ModifyUser:function(a,
b){return this.sendXml(String.format('<request>                        <body type="updateprofile">                            <First_Name><![CDATA[{0}]]\></First_Name>                            <Last_Name><![CDATA[{1}]]\></Last_Name>                        </body>                    </request>',b.getFirstName(),b.getLastName()),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/updateprofile","FORM")},ChangePassword:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="updatepassword">                            <Current_Password><![CDATA[{0}]]\></Current_Password>                            <New_Password><![CDATA[{1}]]\></New_Password>                        </body>                    </request>',
b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/updatepassword","FORM")},ChangeEmail:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="updateemail">                            <Current_Password><![CDATA[{0}]]\></Current_Password>                            <New_Email_Address><![CDATA[{1}]]\></New_Email_Address>                        </body>                    </request>',b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),
"IRequestRoot").getSourceURL()+"/updateemail","FORM")},RequestRecoverPassword:function(a,b){return this.sendXml(String.format('<request>                        <body type="emailAddress">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                         </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/resetpassword","FORM")},RecoverPassword:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="changepasswordonreset">                            <Token><![CDATA[{0}]]\></Token>                            <New_Password><![CDATA[{1}]]\></New_Password>                         </body>                    </request>',
b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/changepasswordonreset","FORM")},CheckMigration:function(a,b,c,d){return this.sendXml(String.format('<request>                        <body type="migrationCheck">                            <P2P_Credentials>                                <User_Name><![CDATA[{0}]]\></User_Name>                                <Password><![CDATA[{1}]]\></Password>                            </P2P_Credentials>                            <Custom_Email>{2}</Custom_Email>                        </body>                    </request>',
b,c,d||""),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/migration/check","FORM")},BindP2PAccountToSSO:function(a,b,c,d,e){return this.sendXml(String.format('<request>                        <body type="migrationBind">                            <P2P_Credentials>                                <User_Name><![CDATA[{0}]]\></User_Name>                                <Password><![CDATA[{1}]]\></Password>                            </P2P_Credentials>                            <SSO_Credentials>                                <Email_Address><![CDATA[{2}]]\></Email_Address>                                <Password><![CDATA[{3}]]\></Password>                            </SSO_Credentials>                        </body>                    </request>',
b,c,d,e),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/migration/bindtosso","FORM")},BindSSOAccountToP2P:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="bindToP2P">                            <User_Name><![CDATA[{0}]]\></User_Name>                            <Password><![CDATA[{1}]]\></Password>                        </body>                    </request>',b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),
"IRequestRoot").getSourceURL()+"/migration/bindtop2p","FORM")},MirgateP2PAccountToSSO:function(a,b,c,d){return this.sendXml(String.format('<request>                        <body type="migrationToNewSSO">                            <P2P_Credentials>                                <User_Name><![CDATA[{0}]]\></User_Name>                                <Password><![CDATA[{1}]]\></Password>                            </P2P_Credentials>                            <SSO_Account>                                <Email_Address><![CDATA[{2}]]\></Email_Address>                                <First_Name><![CDATA[{3}]]\></First_Name>                                <Last_Name><![CDATA[{4}]]\></Last_Name>                                <Password><![CDATA[{5}]]\></Password>                            </SSO_Account>                        </body>                    </request>',
b,c,d.getEmail(),d.getFirstName(),d.getLastName(),d.getPassword()),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/migration/newsso","FORM")},SendMigrationEmailConfirmation:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="migrationSendEmailConfirmation">                            <SSO_Credentials>                                <Email_Address><![CDATA[{0}]]\></Email_Address>                                <Password><![CDATA[{1}]]\></Password>                            </SSO_Credentials>                        </body>                    </request>',
b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/migration/sendemailconfirmation","FORM")},ConfirmMigrationEmail:function(a,b){return this.sendXml(String.format('<request>                        <body type="confirmMigrationEmail">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/migration/confirmemail",
"FORM")},LookupSSOUser:function(a,b){return this.sendXml(String.format('<request>                        <body type="lookupSSOUserRequest">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                        </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/lookupssouser","FORM")},InviteUserToDevice:function(a,b,c){return this.sendXml(String.format('<request>                         <body type="inviteSSOUserToDevice">                             <Device_Id>{0}</Device_Id>                             <Email_Address><![CDATA[{1}]]\></Email_Address>                         </body>                     </request>',
b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/inviteSSOUserToDevice","FORM")},RemoveUserFromDevice:function(a,b,c){return this.sendXml(String.format('<request>                         <body type="deleteSSOUserFromDevice">                             <Device_Id>{0}</Device_Id>                             <Email_Address><![CDATA[{1}]]\></Email_Address>                         </body>                     </request>',b,c),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),
"IRequestRoot").getSourceURL()+"/deleteSSOUserFromDevice","FORM")},NotifyUserAboutPermissionsChanges:function(a,b,c,d,e){return this.sendXml(String.format('<request>                        <body type="notifyUserAboutSharedPermissionsChanges">                            <Device_Id>{0}</Device_Id>                            <Email_Address><![CDATA[{1}]]\></Email_Address>                            <Share>{2}</Share>                            <Access>{3}</Access>                        </body>                    </request>',
b,c,d,e),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/notifyUserAboutSharedPermissionsChanges","FORM")},CheckInvitationToken:function(a,b){return this.sendXml(String.format('<request>                        <body type="checkInvitationToken">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRCApplication").getSourcePublicURL()+"/checkInvitationToken",
"FORM")},ConfirmInvitation:function(a,b){return this.sendXml(String.format('<request>                        <body type="confirmInvitation">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/confirmInvitation","FORM")},ConfirmEmailByInvitationToken:function(a,b,c,d){return this.sendXml(String.format('<request>                        <body type="confirmemailbyinvitation">                            <SSO_Credentials>                                <Email_Address><![CDATA[{0}]]\></Email_Address>                                <Password><![CDATA[{1}]]\></Password>                            </SSO_Credentials>                            <Token>{2}</Token>                        </body>                    </request>',
b,c,d),a,CComQIPtr(CComQIPtr(this,"IXDomNode").getRoot(),"IRequestRoot").getSourceURL()+"/confirmemailbyinvitation","FORM")}},IXDomNode:{loadFromXml:function(a,b){var c=a.getAttributeText("resource-type");if(c=="migrationCheck"){c=a.selectSingleNode("status/Code");a=a.selectSingleNode("status/User");if(c&&a){var d=CComQIPtr(new dpv.rc.user(true),"IXDomNode");c=c.getNodeText();if(d.loadFromXml(a)==S_OK&&c){this.Fire("OnMigrationChecked",[this,b,c,CComQIPtr(d,"IRCUser")]);return S_OK}}return E_FAIL}else if(c==
"Lookup_SSO_User"){if(a=a.selectSingleNode("SSO_Lookup")){a=a.getAttributeText("exists");if(a=="true"||a=="false"){this.Fire("OnLookupSSOUser",[this,b,a=="true"]);return S_OK}}return E_FAIL}else if(c=="checkInvitationToken"){d=a.selectSingleNode("Check_Token/Email_Address");c=a.selectSingleNode("Check_Token/Device_Id");a=a.selectSingleNode("Check_Token/Email_Usage");if(d&&c&&a){d=d.getNodeText();c=c.getNodeText();a=a.getNodeText();if(d&&c&&(a=="true"||a=="false")){this.Fire("OnCheckInvitation",[this,
b,d,a=="true",c]);return S_OK}}return E_FAIL}return S_OK}}});Njl.namespace("dpv");dpv.IReplicate=Njl.inherit(IUnknown,{IReplicate:{getJobsManager:function(){return E_NOTIMPL},getCertificatesManager:function(){return E_NOTIMPL},getFSManager:function(){return E_NOTIMPL},getSnapshotsManager:function(){return E_NOTIMPL},getSysInfoManager:function(){return E_NOTIMPL}}});var IReplicate=dpv.IReplicate;Njl.namespace("dpv");
dpv.IReplCertificate=Njl.inherit(IUnknown,{IReplCertificate:{getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getKey:function(){return E_NOTIMPL},putKey:function(){return E_NOTIMPL}}});var IReplCertificate=dpv.IReplCertificate;Njl.namespace("dpv");
dpv.IReplCertificatesManager=Njl.inherit(IUnknown,{IReplCertificatesManager:{UpdateOwnCertificate:function(){return E_NOTIMPL},getOwnCertificate:function(){return E_NOTIMPL},UpdateCertificates:function(){return E_NOTIMPL},getCertificates:function(){return E_NOTIMPL},AddCertificate:function(){return E_NOTIMPL},RemoveCertificate:function(){return E_NOTIMPL}}});var IReplCertificatesManager=dpv.IReplCertificatesManager;dpv.IReplCertificatesManagerEvents=Njl.inherit(IProtocolEvents,{IReplCertificatesManagerEvents:{}});
var IReplCertificatesManagerEvents=dpv.IReplCertificatesManagerEvents;Njl.namespace("dpv");
dpv.IReplJob=Njl.inherit(IUnknown,{IReplJob:{getId:function(){return E_NOTIMPL},getPeer:function(){return E_NOTIMPL},putPeer:function(){return E_NOTIMPL},getAccess:function(){return E_NOTIMPL},putAccess:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},putType:function(){return E_NOTIMPL},getIniState:function(){return E_NOTIMPL},putIniState:function(){return E_NOTIMPL},getDatasetType:function(){return E_NOTIMPL},
putDatasetType:function(){return E_NOTIMPL},getP2PSrc:function(){return E_NOTIMPL},putP2PSrc:function(){return E_NOTIMPL},getP2PDst:function(){return E_NOTIMPL},putP2PDst:function(){return E_NOTIMPL},getP2PNet:function(){return E_NOTIMPL},putP2PNet:function(){return E_NOTIMPL},getSrcDataset:function(){return E_NOTIMPL},putSrcDataset:function(){return E_NOTIMPL},getDstDataset:function(){return E_NOTIMPL},putDstDataset:function(){return E_NOTIMPL},getSrcAddress:function(){return E_NOTIMPL},putSrcAddress:function(){return E_NOTIMPL},
getDstAddress:function(){return E_NOTIMPL},putDstAddress:function(){return E_NOTIMPL},getDstFqdn:function(){return E_NOTIMPL},putDstFqdn:function(){return E_NOTIMPL},getP2PFallback:function(){return E_NOTIMPL},putP2PFallback:function(){return E_NOTIMPL},getCompress:function(){return E_NOTIMPL},putCompress:function(){return E_NOTIMPL},getCompressRatio:function(){return E_NOTIMPL},putCompressRatio:function(){return E_NOTIMPL},getEncrypt:function(){return E_NOTIMPL},putEncrypt:function(){return E_NOTIMPL},
getEncryptKey:function(){return E_NOTIMPL},putEncryptKey:function(){return E_NOTIMPL},getDedup:function(){return E_NOTIMPL},putDedup:function(){return E_NOTIMPL},getSchedule:function(){return E_NOTIMPL},putSchedule:function(){return E_NOTIMPL},getSeedSnapshot:function(){return E_NOTIMPL},putSeedSnapshot:function(){return E_NOTIMPL},getEstimate:function(){return E_NOTIMPL},putEstimate:function(){return E_NOTIMPL},getScope:function(){return E_NOTIMPL},putScope:function(){return E_NOTIMPL},putReport:function(){return E_NOTIMPL},
getReport:function(){return E_NOTIMPL},putRecover:function(){return E_NOTIMPL},getRecover:function(){return E_NOTIMPL},putCompressed:function(){return E_NOTIMPL},getCompressed:function(){return E_NOTIMPL},putBlockSize:function(){return E_NOTIMPL},getBlockSize:function(){return E_NOTIMPL}}});var IReplJob=dpv.IReplJob;Njl.namespace("dpv");
dpv.IReplJobsManager=Njl.inherit(IUnknown,{IReplJobsManager:{AddJob:function(){},UpdateSourceJobs:function(){return E_NOTIMPL},getSourceJobs:function(){return E_NOTIMPL},UpdateDestinationJobs:function(){return E_NOTIMPL},getDestinationJobs:function(){return E_NOTIMPL},RunSourceJob:function(){return E_NOTIMPL},CancelSourceJob:function(){return E_NOTIMPL},DisableSourceJob:function(){return E_NOTIMPL},EnableSourceJob:function(){return E_NOTIMPL},UpdateLastReport:function(){return E_NOTIMPL},GetLastReport:function(){return E_NOTIMPL},
RemoveSourceJob:function(){return E_NOTIMPL},RemoveDestinationJob:function(){return E_NOTIMPL},UpdateSourceJobStat:function(){return E_NOTIMPL},getSourceJobStat:function(){return E_NOTIMPL}}});var IReplJobsManager=dpv.IReplJobsManager;dpv.IReplJobsManagerEvents=Njl.inherit(IProtocolEvents,{IReplJobsManagerEvents:{}});var IReplJobsManagerEvents=dpv.IReplJobsManagerEvents;Njl.namespace("dpv");
dpv.IReplFSManager=Njl.inherit(IUnknown,{IReplFSManager:{UpdateLocalFileSystem:function(){return E_NOTIMPL},getLocalFileSystem:function(){return E_NOTIMPL},UpdateRemoteFileSystem:function(){return E_NOTIMPL},getRemoteFileSystem:function(){return E_NOTIMPL}}});var IReplFSManager=dpv.IReplFSManager;dpv.IReplFSManagerEvents=Njl.inherit(IProtocolEvents,{IReplFSManagerEvents:{}});var IReplFSManagerEvents=dpv.IReplFSManagerEvents;Njl.namespace("dpv");
dpv.IReplJobStat=Njl.inherit(IUnknown,{IReplJobStat:{getState:function(){return E_NOTIMPL},getStartTime:function(){return E_NOTIMPL},getStartOffset:function(){return E_NOTIMPL},getFinishTime:function(){return E_NOTIMPL},getFinishOffset:function(){return E_NOTIMPL},getDelta:function(){return E_NOTIMPL},getSpeed:function(){return E_NOTIMPL},getEtl:function(){return E_NOTIMPL},getDataSize:function(){return E_NOTIMPL},getDataSent:function(){return E_NOTIMPL}}});var IReplJobStat=dpv.IReplJobStat;Njl.namespace("dpv");
dpv.IReplJobReport=Njl.inherit(IUnknown,{IReplJobReport:{getReport:function(){return E_NOTIMPL}}});var IReplJobReport=dpv.IReplJobReport;Njl.namespace("dpv");dpv.IReplSnapshotsManager=Njl.inherit(IUnknown,{IReplSnapshotsManager:{UpdateLocalSnapshots:function(){return E_NOTIMPL},getLocalSnapshots:function(){return E_NOTIMPL},UpdateRemoteSnapshots:function(){return E_NOTIMPL},getRemoteSnapshots:function(){return E_NOTIMPL}}});var IReplSnapshotsManager=dpv.IReplSnapshotsManager;
dpv.IReplSnapshotsManagerEvents=Njl.inherit(IProtocolEvents,{IReplSnapshotsManagerEvents:{}});var IReplSnapshotsManagerEvents=dpv.IReplSnapshotsManagerEvents;Njl.namespace("dpv");dpv.IReplSysInfoManager=Njl.inherit(IUnknown,{IReplSysInfoManager:{UpdateLocalSysInfo:function(){return E_NOTIMPL},getLocalSysInfo:function(){return E_NOTIMPL},UpdateRemoteSysInfo:function(){return E_NOTIMPL},getRemoteSysInfo:function(){return E_NOTIMPL}}});var IReplSysInfoManager=dpv.IReplSysInfoManager;
dpv.IReplSysInfoManagerEvents=Njl.inherit(IProtocolEvents,{IReplSysInfoManagerEvents:{}});var IReplSysInfoManagerEvents=dpv.IReplSysInfoManagerEvents;Njl.namespace("dpv.repl");
dpv.repl=Njl.inherit(CComObjectRoot,dpv.base,IReplicate,{constructor:function(){dpv.repl.superclass.constructor.apply(this,arguments)},IReplicate:{getJobsManager:function(){return this._mngr_jobs||(this._mngr_jobs=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.repl.jobs,"IReplJobsManager")))},getCertificatesManager:function(){return this._mngr_certificates||(this._mngr_certificates=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.repl.certificates,"IReplCertificatesManager")))},
getFSManager:function(){return this._mngr_filesys||(this._mngr_filesys=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.repl.filesys,"IReplFSManager")))},getSnapshotsManager:function(){return this._mngr_snaps||(this._mngr_snaps=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.repl.snaps,"IReplSnapshotsManager")))},getSysInfoManager:function(){return this._mngr_sysinfs||(this._mngr_sysinfs=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.repl.sysinfs,"IReplSysInfoManager")))}}});
Njl.namespace("dpv.repl");
dpv.repl.certificate=Njl.inherit(CComObjectRoot,dpv.base,IReplCertificate,{constructor:function(a){dpv.repl.certificate.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("<AccessInfo>                    <name></name>                    <key></key>                </AccessInfo>")).selectNodes("./*")[0])},IReplCertificate:{getName:function(){return dpv.gp(this.xproplist,"name")},putName:function(a){return dpv.pp(this.xproplist,"name",a)},getKey:function(){return dpv.gp(this.xproplist,
"key")},putKey:function(a){return dpv.pp(this.xproplist,"key",a)}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproplist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.repl");
dpv.repl.certificates=Njl.inherit(CComEventsObjectRoot("IReplCertificatesManagerEvents"),dpv.base,IReplCertificatesManager,{constructor:function(){dpv.repl.certificates.superclass.constructor.apply(this,arguments)},IReplCertificatesManager:{UpdateOwnCertificate:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="exportAccessInfo" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',Njl.id())),
a)},getOwnCertificate:function(){return this.xowncert?CComQIPtr(this.xowncert,"IReplCertificate"):E_FAIL},UpdateCertificates:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="listAccessInfo" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id())),a)},getCertificates:function(){return this.xcerts?this.xcerts.getChildren():E_FAIL},AddCertificate:function(a,b){if(b=CComQIPtr(b,"IReplCertificate"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="importAccessInfo" guid="">                                <body type="AccessInfo">                                    <name>{1}</name>                                    <key>{2}</key>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getName(),b.getKey())),a);return E_FAIL},RemoveCertificate:function(a,b){if(b=CComQIPtr(b,"IReplCertificate"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="deleteAccessInfo" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getName())),a);return E_FAIL}},IXDomNode:{loadFromXml:function(a){var b=a.selectSingleNode("message");if(b&&b!=E_FAIL){var c=b.selectSingleNode("body");if(c&&c!=E_FAIL){a=CComQIPtr(this,"IXDomNode");switch(b.getAttributeText("method")){case "exportAccessInfo":b=c.selectSingleNode("name");c=c.selectSingleNode("key");this.xowncert&&a.removeChild(this.xowncert);this.xowncert=CComQIPtr(new dpv.repl.certificate(false),"IXDomNode");a.appendChild(this.xowncert);a=CComQIPtr(this.xowncert,"IReplCertificate");
a.putName(b.getNodeText());a.putKey(c.getNodeText());return S_OK;case "listAccessInfo":b=c.selectNodes("AccessInfo");this.xcerts&&a.removeChild(this.xcerts);this.xcerts=CComQIPtr(new dpv.base,"IXDomNode");a.appendChild(this.xcerts);Njl.each(b,function(d){var e=CComQIPtr(new dpv.repl.certificate(true),"IXDomNode");e.loadFromXml(d)==S_OK&&this.xcerts.appendChild(e)},this);return S_OK;case "importAccessInfo":return S_OK;case "deleteAccessInfo":return S_OK}}}return E_FAIL}}});Njl.namespace("dpv.repl");
dpv.repl.job=Njl.inherit(CComObjectRoot,dpv.base,IReplJob,{constructor:function(a){dpv.repl.job.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("<Job>\t\t\t\t\t<id></id>\t\t\t\t\t<name></name>\t\t\t\t\t<type></type>\t\t\t\t\t<inistate></inistate>\t\t\t\t\t<datasettype></datasettype>\t\t\t\t\t<p2psrc></p2psrc>\t\t\t\t\t<p2pdst></p2pdst>\t\t\t\t\t<p2pnet></p2pnet>\t\t\t\t\t<srcdataset></srcdataset>\t\t\t\t\t<dstdataset></dstdataset>\t\t\t\t\t<srcaddress></srcaddress>\t\t\t\t\t<dstaddress></dstaddress>\t\t\t\t\t<dstfqdn></dstfqdn>\t\t\t\t\t<p2pfallback></p2pfallback>\t\t\t\t\t<compress></compress>\t\t\t\t\t<compressratio></compressratio>\t\t\t\t\t<encrypt></encrypt>\t\t\t\t\t<encryptkey></encryptkey>\t\t\t\t\t<dedup></dedup>\t\t\t\t\t<schedule></schedule>\t\t\t\t\t<seedsnapshot></seedsnapshot>\t\t\t\t\t<estimate></estimate>\t\t\t\t\t<scope></scope>                    <recover></recover>                    <blocksize></blocksize>                    <dscompress></dscompress>\t\t\t\t</Job>")).selectNodes("./*")[0])},
IReplJob:{getId:function(){return dpv.gp(this.xproplist,"id")},getPeer:function(){return this.peer?this.peer:E_FAIL},putPeer:function(a){return this.peer=a},getAccess:function(){return this.access?this.access:E_FAIL},putAccess:function(a){this.access=a},getName:function(){return dpv.gp(this.xproplist,"name")},putName:function(a){return dpv.pp(this.xproplist,"name",a)},getType:function(){return dpv.gp(this.xproplist,"type")},putType:function(a){return dpv.pp(this.xproplist,"type",a)},getIniState:function(){return dpv.gp(this.xproplist,
"inistate")},putIniState:function(a){return dpv.pp(this.xproplist,"inistate",a)},getDatasetType:function(){return dpv.gp(this.xproplist,"datasettype")},putDatasetType:function(a){return dpv.pp(this.xproplist,"datasettype",a)},getP2PSrc:function(){return dpv.gp(this.xproplist,"p2psrc")},putP2PSrc:function(a){return dpv.pp(this.xproplist,"p2psrc",a)},getP2PDst:function(){return dpv.gp(this.xproplist,"p2pdst")},putP2PDst:function(a){return dpv.pp(this.xproplist,"p2pdst",a)},getP2PNet:function(){return dpv.gp(this.xproplist,
"p2pnet")},putP2PNet:function(a){return dpv.pp(this.xproplist,"p2pnet",a)},getSrcDataset:function(){return dpv.gp(this.xproplist,"srcdataset")},putSrcDataset:function(a){return dpv.pp(this.xproplist,"srcdataset",a)},getDstDataset:function(){return dpv.gp(this.xproplist,"dstdataset")},putDstDataset:function(a){return dpv.pp(this.xproplist,"dstdataset",a)},getSrcAddress:function(){return dpv.gp(this.xproplist,"srcaddress")},putSrcAddress:function(a){return dpv.pp(this.xproplist,"srcaddress",a)},getDstAddress:function(){return dpv.gp(this.xproplist,
"dstaddress")},putDstAddress:function(a){return dpv.pp(this.xproplist,"dstaddress",a)},getDstFqdn:function(){return dpv.gp(this.xproplist,"dstfqdn")},putDstFqdn:function(a){return dpv.pp(this.xproplist,"dstfqdn",a)},getP2PFallback:function(){return dpv.gp(this.xproplist,"p2pfallback")},putP2PFallback:function(a){return dpv.pp(this.xproplist,"p2pfallback",a)},getCompress:function(){return dpv.gp(this.xproplist,"compress")},putCompress:function(a){return dpv.pp(this.xproplist,"compress",a)},getCompressRatio:function(){return dpv.gp(this.xproplist,
"compressratio")},putCompressRatio:function(a){return dpv.pp(this.xproplist,"compressratio",a)},getEncrypt:function(){return dpv.gp(this.xproplist,"encrypt")},putEncrypt:function(a){return dpv.pp(this.xproplist,"encrypt",a)},getEncryptKey:function(){return dpv.gp(this.xproplist,"encryptkey")},putEncryptKey:function(a){return dpv.pp(this.xproplist,"encryptkey",a)},getDedup:function(){return dpv.gp(this.xproplist,"dedup")},putDedup:function(a){return dpv.pp(this.xproplist,"dedup",a)},getSchedule:function(){return dpv.gp(this.xproplist,
"schedule")},putSchedule:function(a){return dpv.pp(this.xproplist,"schedule",a)},getSeedSnapshot:function(){return dpv.gp(this.xproplist,"seedsnapshot")},putSeedSnapshot:function(a){return dpv.pp(this.xproplist,"seedsnapshot",a)},getEstimate:function(){return dpv.gp(this.xproplist,"estimate")},putEstimate:function(a){return dpv.pp(this.xproplist,"estimate",a)},getScope:function(){return dpv.gp(this.xproplist,"scope")},putScope:function(a){return dpv.pp(this.xproplist,"scope",a)},putReport:function(a){this.report=
a;return S_OK},getReport:function(){return this.report},putRecover:function(a){return dpv.pp(this.xproplist,"recover",a)},getRecover:function(){return dpv.gp(this.xproplist,"recover")},putCompressed:function(a){return dpv.pp(this.xproplist,"dscompress",a)},getCompressed:function(){return dpv.gp(this.xproplist,"dscompress")},putBlockSize:function(a){return dpv.pp(this.xproplist,"blocksize",a)},getBlockSize:function(){return dpv.gp(this.xproplist,"blocksize")}},IXDomNode:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;this.xproplist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.repl");
dpv.repl.jobs=Njl.inherit(CComEventsObjectRoot("IReplJobsManagerEvents"),dpv.base,IReplJobsManager,{constructor:function(){dpv.repl.jobs.superclass.constructor.apply(this,arguments);this.xjobstat=[];this.timeout=3E5},IReplJobsManager:{AddJob:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="createJob" guid="">                                <body type="createJob">                                    <access>{1}</access>                                    <peer>{2}</peer>                                    <job>                                      <name>{3}</name>                                      <type>{4}</type>                                      <inistate>{5}</inistate>                                      <datasettype>{6}</datasettype>                                      <p2psrc>{7}</p2psrc>                                      <p2pdst>{8}</p2pdst>                                      <p2pnet>{9}</p2pnet>                                      <srcdataset>{10}</srcdataset>                                      <dstdataset>{11}</dstdataset>                                      <srcaddress>{12}</srcaddress>                                      <dstaddress>{13}</dstaddress>                                      <dstfqdn>{14}</dstfqdn>                                      <p2pfallback>{15}</p2pfallback>                                      <compress>{16}</compress>                                      <compressratio>{17}</compressratio>                                      <encrypt>{18}</encrypt>                                      <dedup>{19}</dedup>                                      <schedule>{20}</schedule>                                      <seedsnapshot>{21}</seedsnapshot>                                      <estimate>{22}</estimate>                                      <recover>{23}</recover>                                      <blocksize>{24}</blocksize>                                      <dscompress>{25}</dscompress>                                    </job>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',Njl.id(),
b.getAccess(),b.getPeer(),b.getName(),b.getType(),b.getIniState(),b.getDatasetType(),b.getP2PSrc(),b.getP2PDst(),b.getP2PNet(),b.getSrcDataset(),b.getDstDataset(),b.getSrcAddress(),b.getDstAddress(),b.getDstFqdn(),b.getP2PFallback(),b.getCompress(),b.getCompressRatio(),b.getEncrypt(),b.getDedup(),b.getSchedule(),b.getSeedSnapshot(),b.getEstimate(),b.getRecover(),b.getBlockSize(),b.getCompressed())),a,undefined,undefined,undefined,this.timeout);return E_FAIL},UpdateSourceJobs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getSourceJobs" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id())),a)},getSourceJobs:function(){return this.xsjobs?this.xsjobs.getChildren():E_FAIL},UpdateDestinationJobs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getDestinationJobs" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id())),a,undefined,undefined,undefined,this.timeout)},getDestinationJobs:function(){return this.xdjobs?this.xdjobs.getChildren():E_FAIL},RunSourceJob:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="runSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a);return E_FAIL},CancelSourceJob:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="cancelSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a);return E_FAIL},DisableSourceJob:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="disableSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a);return E_FAIL},EnableSourceJob:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="enableSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a);return E_FAIL},RemoveSourceJob:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="deleteSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a);return E_FAIL},RemoveDestinationJob:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="deleteDestinationJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a,undefined,undefined,undefined,this.timeout);return E_FAIL},UpdateSourceJobStat:function(a,b){if(b=CComQIPtr(b,"IReplJob")){a=Njl.isString(a)?new String(a):!a?{}:a;a.__dpv_jobid=b.getId();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getStat" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a)}return E_FAIL},getSourceJobStat:function(a,b){if(b=CComQIPtr(b,"IReplJob"))return this.xjobstat[b.getId()]?this.xjobstat[b.getId()]:E_FAIL;return E_FAIL},UpdateLastReport:function(a,b){if(b=CComQIPtr(b,"IReplJob")){a=Njl.isString(a)?new String(a):!a?{}:a;a.__dpv_jobid=b.getId();return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getLastReport" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b.getId())),a)}return E_FAIL},GetLastReport:function(a){if(a=CComQIPtr(a,"IReplJob"))return a.getReport();return E_FAIL}},IXDomNode:{loadFromXml:function(a,b){var c=a.selectSingleNode("message");if(c&&c!=E_FAIL)if((a=c.selectSingleNode("body"))&&a!=E_FAIL){var d=CComQIPtr(this,"IXDomNode");switch(c.getAttributeText("method")){case "getSourceJobs":a=a.selectNodes("Job");this.xsjobs&&d.removeChild(this.xsjobs);this.xsjobs=CComQIPtr(new dpv.base,"IXDomNode");d.appendChild(this.xsjobs);Njl.each(a,
function(f){var g=CComQIPtr(new dpv.repl.job(true),"IXDomNode");g.loadFromXml(f)==S_OK&&this.xsjobs.appendChild(g)},this);return S_OK;case "getDestinationJobs":a=a.selectNodes("Job");this.xdjobs&&d.removeChild(this.xdjobs);this.xdjobs=CComQIPtr(new dpv.base,"IXDomNode");d.appendChild(this.xdjobs);Njl.each(a,function(f){var g=CComQIPtr(new dpv.repl.job(true),"IXDomNode");g.loadFromXml(f)==S_OK&&this.xdjobs.appendChild(g)},this);return S_OK;case "runSourceJob":return S_OK;case "cancelSourceJob":return S_OK;
case "disableSourceJob":return S_OK;case "enableSourceJob":return S_OK;case "deleteSourceJob":return S_OK;case "deleteDestinationJob":return S_OK;case "getStat":if(b.__dpv_jobid){d=CComQIPtr(new dpv.repl.jobstat(true),"IXDomNode");if(d.loadFromXml(new Njl.Xml.document(a.selectSingleNode("value").getNodeText()))==S_OK)this.xjobstat[b.__dpv_jobid]=CComQIPtr(d,"IReplJobStat");delete b.__dpv_jobid}return S_OK;case "getLastReport":if(b.__dpv_jobid){d=CComQIPtr(new dpv.repl.jobreport(true),"IXDomNode");
if(d.loadFromXml(a.selectSingleNode("value").getNodeText())==S_OK){a=this.xsjobs.getChildren();for(c=0;c<a.length;c++)if(a[c]&&a[c]!=E_FAIL){var e=CComQIPtr(a[c],"IReplJob");e.getId()==b.__dpv_jobid&&e.putReport(CComQIPtr(d,"IReplJobReport"))}}delete b.__dpv_jobid}return S_OK;default:if(a.selectSingleNode("value").getNodeText()=="true")return S_OK}}return E_FAIL}}});Njl.namespace("dpv.repl");
dpv.repl.filesys=Njl.inherit(CComEventsObjectRoot("IReplFSManagerEvents"),dpv.base,IReplFSManager,{constructor:function(){dpv.repl.filesys.superclass.constructor.apply(this,arguments);this.xrfilesys=[]},IReplFSManager:{UpdateLocalFileSystem:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getFsLocal" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id())),a)},getLocalFileSystem:function(){return this.xlfilesys?this.xlfilesys:E_FAIL},UpdateRemoteFileSystem:function(a,b,c){if(b=CComQIPtr(b,"IReplCertificate")){a=Njl.isString(a)?new String(a):!a?{}:a;a.__dpv_peer=c;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                        <xs:command_name>rlctl</xs:command_name>                        <xs:args>                            <xs:arg>                                <request method="getFsRemote" guid="">                                    <body type="RemoteCall">                                        <access>{1}</access>                                        <peer>{2}</peer>                                        <request method="getFsLocal" guid="">                                            <body type="void"/>                                        </request>                                    </body>                                </request>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getName(),c)),a)}return E_FAIL},getRemoteFileSystem:function(a){return this.xrfilesys[a]?this.xrfilesys[a]:E_FAIL}},IXDomNode:{loadFromXml:function(a,b){if((a=a.selectSingleNode("message"))&&a!=E_FAIL){var c=a.selectSingleNode("body");if(c&&c!=E_FAIL){CComQIPtr(this,"IXDomNode");switch(a.getAttributeText("method")){case "getFsLocal":a=c.selectSingleNode("value").getNodeText();if(b.__dpv_peer){this.xrfilesys[b.__dpv_peer]=a;delete b.__dpv_peer}else this.xlfilesys=a;return S_OK}}}return E_FAIL}}});
Njl.namespace("dpv.repl");
dpv.repl.jobstat=Njl.inherit(CComObjectRoot,dpv.base,IReplJobStat,{constructor:function(){dpv.repl.jobstat.superclass.constructor.apply(this,arguments)},IReplJobStat:{getState:function(){return dpv.gp(this.xproplist,"state")},getStartTime:function(){return this.xmrk?this.xmrk.getAttributeText("start_time"):E_FAIL},getStartOffset:function(){return this.xmrk?this.xmrk.getAttributeText("start_offset"):E_FAIL},getFinishTime:function(){return this.xmrk?this.xmrk.getAttributeText("finish_time"):E_FAIL},
getFinishOffset:function(){return this.xmrk?this.xmrk.getAttributeText("finish_offset"):E_FAIL},getDelta:function(){return this.xmrk?this.xmrk.getAttributeText("delta"):E_FAIL},getSpeed:function(){return this.xprg?this.xprg.getAttributeText("speed"):E_FAIL},getEtl:function(){return this.xprg?this.xprg.getAttributeText("etl"):E_FAIL},getDataSize:function(){return this.xprg?this.xprg.getAttributeText("size"):E_FAIL},getDataSent:function(){return this.xprg?this.xprg.getAttributeText("sent"):E_FAIL}},
IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a.selectSingleNode("stat");this.xmrk=this.x.selectSingleNode("mrk");this.xprg=this.x.selectSingleNode("prg");this.xproplist=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.repl");
dpv.repl.jobreport=Njl.inherit(CComObjectRoot,dpv.base,IReplJobReport,{constructor:function(){dpv.repl.jobreport.superclass.constructor.apply(this,arguments)},IReplJobReport:{getReport:function(){return this.xproplist&&this.xproplist!=E_FAIL&&this.xproplist.length>0?this.xproplist:E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.xproplist=a;return S_OK}}});Njl.namespace("dpv.repl");
dpv.repl.snaps=Njl.inherit(CComEventsObjectRoot("IReplSnapshotsManagerEvents"),dpv.base,IReplSnapshotsManager,{constructor:function(){dpv.repl.snaps.superclass.constructor.apply(this,arguments);this.xsnaps=[];this.ppsplitter=":|::|:"},IReplSnapshotsManager:{UpdateLocalSnapshots:function(a,b){a=Njl.isString(a)?new String(a):!a?{}:a;a.__dpv_path=b;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getSnapshotsLocal" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b)),a)},getLocalSnapshots:function(a){return this.xsnaps[a]?this.xsnaps[a].getChildren():E_FAIL},UpdateRemoteSnapshots:function(a,b,c,d){if(b=CComQIPtr(b,"IReplCertificate")){a=Njl.isString(a)?new String(a):!a?{}:a;a.__dpv_peer=c;a.__dpv_path=d;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                        <xs:command_name>rlctl</xs:command_name>                        <xs:args>                            <xs:arg>                                <request method="getSnapshotsRemote" guid="">                                    <body type="RemoteCall">                                        <access>{1}</access>                                        <peer>{2}</peer>                                        <request method="getSnapshotsLocal" guid="">                                            <body type="text">                                                <value>{3}</value>                                            </body>                                        </request>                                    </body>                                </request>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getName(),c,d)),a)}return E_FAIL},getRemoteSnapshots:function(a,b){a=a+this.ppsplitter+b;return this.xsnaps[a]?this.xsnaps[a].getChildren():E_FAIL}},IXDomNode:{loadFromXml:function(a,b){if((a=a.selectSingleNode("message"))&&a!=E_FAIL){var c=a.selectSingleNode("body");if(c&&c!=E_FAIL){CComQIPtr(this,"IXDomNode");switch(a.getAttributeText("method")){case "getSnapshotsLocal":if(b.__dpv_path){a=(new Njl.Xml.document(c.selectSingleNode("value").getNodeText())).selectSingleNode("snapshots");
a=a.selectNodes("Snapshot");var d=b.__dpv_peer?b.__dpv_peer+this.ppsplitter+b.__dpv_path:b.__dpv_path;this.xsnaps[d]=CComQIPtr(new dpv.base,"IXDomNode");Njl.each(a,function(e){var f=CComQIPtr(new dpv.zfssnapshot,"IXDomNode");f.loadFromXml(e)==S_OK&&this.xsnaps[d].appendChild(f)},this);delete b.__dpv_peer;delete b.__dpv_path}return S_OK}}}return E_FAIL}}});Njl.namespace("dpv.repl");
dpv.repl.sysinfs=Njl.inherit(CComEventsObjectRoot("IReplSysInfoManagerEvents"),dpv.base,IReplSysInfoManager,{constructor:function(){dpv.repl.sysinfs.superclass.constructor.apply(this,arguments);this.xrsysinfs=[]},IReplSysInfoManager:{UpdateLocalSysInfo:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getInfo" guid="">                                <body type="void">                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id())),a)},getLocalSysInfo:function(){return this.xlsysinf?CComQIPtr(this.xlsysinf,"ISysInfo"):E_FAIL},UpdateRemoteSysInfo:function(a,b,c){if(b=CComQIPtr(b,"IReplCertificate")){a=Njl.isString(a)?new String(a):!a?{}:a;a.__dpv_peer=c;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                        <xs:command_name>rlctl</xs:command_name>                        <xs:args>                            <xs:arg>                                <request method="getInfoRemote" guid="">                                    <body type="RemoteCall">                                        <access>{1}</access>                                        <peer>{2}</peer>                                        <request method="getInfo" guid="">                                            <body type="void">                                            </body>                                        </request>                                    </body>                                </request>                            </xs:arg>                        </xs:args>                    </xs:command>',
Njl.id(),b.getName(),c)),a)}return E_FAIL},getRemoteSysInfo:function(a){return this.xrsysinfs[a]?CComQIPtr(this.xrsysinfs[a],"ISysInfo"):E_FAIL}},IXDomNode:{loadFromXml:function(a,b){var c=a.selectSingleNode("message");if(c&&c!=E_FAIL)if((a=c.selectSingleNode("body"))&&a!=E_FAIL){CComQIPtr(this,"IXDomNode");switch(c.getAttributeText("method")){case "getInfo":c=CComQIPtr(new dpv.sysinfo,"IXDomNode");a=new Njl.Xml.document(a.selectSingleNode("value").getNodeText());a=a.selectSingleNode("SystemInfo");
if(c.loadFromXml(a)==S_OK)if(b.__dpv_peer){this.xrsysinfs[b.__dpv_peer]=c;delete b.__dpv_peer}else this.xlsysinf=c;return S_OK}}return E_FAIL}}});Njl.namespace("dpv");dpv.IRepliSync=Njl.inherit(IUnknown,{IRepliSync:{getKeysManager:function(){return E_NOTIMPL},getJobsManager:function(){return E_NOTIMPL},getRemoteBrowseManager:function(){return E_NOTIMPL}}});var IRepliSync=dpv.IRepliSync;Njl.namespace("dpv");
dpv.IRepliSyncKey=Njl.inherit(IUnknown,{IRepliSyncKey:{getId:function(){return E_NOTIMPL},getTitle:function(){return E_NOTIMPL},putTitle:function(){return E_NOTIMPL},getKey:function(){return E_NOTIMPL},getType:function(){return E_NOTIMPL},getComment:function(){return E_NOTIMPL},getFingerPrint:function(){return E_NOTIMPL}}});var IRepliSyncKey=dpv.IRepliSyncKey;Njl.namespace("dpv");
dpv.IRepliSyncKeysManager=Njl.inherit(IUnknown,{IRepliSyncKeysManager:{UpdateKeys:function(){return E_NOTIMPL},getKeys:function(){return E_NOTIMPL},AddKey:function(){return E_NOTIMPL},CommitKey:function(){return E_NOTIMPL},RemoveKey:function(){return E_NOTIMPL}}});var IRepliSyncKeysManager=dpv.IRepliSyncKeysManager;dpv.IRepliSyncKeysManagerEvents=Njl.inherit(IProtocolEvents,{IRepliSyncKeysManagerEvents:{}});var IRepliSyncKeysManagerEvents=dpv.IRepliSyncKeysManagerEvents;Njl.namespace("dpv");
dpv.IRepliSyncJob=Njl.inherit(IUnknown,{IRepliSyncJob:{getId:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},putName:function(){return E_NOTIMPL},getEnabled:function(){return E_NOTIMPL},putEnabled:function(){return E_NOTIMPL},getSourceHost:function(){return E_NOTIMPL},putSourceHost:function(){return E_NOTIMPL},getSourcePort:function(){return E_NOTIMPL},putSourcePort:function(){return E_NOTIMPL},getSourcePath:function(){return E_NOTIMPL},putSourcePath:function(){return E_NOTIMPL},
getDestHost:function(){return E_NOTIMPL},putDestHost:function(){return E_NOTIMPL},getDestPort:function(){return E_NOTIMPL},putDestPort:function(){return E_NOTIMPL},getDestPath:function(){return E_NOTIMPL},putDestPath:function(){return E_NOTIMPL},getInterval:function(){return E_NOTIMPL},putInterval:function(){return E_NOTIMPL},getBwLimit:function(){return E_NOTIMPL},putBwLimit:function(){return E_NOTIMPL},getEncrypt:function(){return E_NOTIMPL},putEncrypt:function(){return E_NOTIMPL},getCompress:function(){return E_NOTIMPL},
putCompress:function(){return E_NOTIMPL},getSchedule:function(){return E_NOTIMPL},putSchedule:function(){return E_NOTIMPL},getLastRunningTimestamp:function(){return E_NOTIMPL},getLastRunningTime:function(){return E_NOTIMPL},getLastResult:function(){return E_NOTIMPL}}});var IRepliSyncJob=dpv.IRepliSyncJob;Njl.namespace("dpv");
dpv.IRepliSyncJobsManager=Njl.inherit(IUnknown,{IRepliSyncJobsManager:{UpdateJobs:function(){return E_NOTIMPL},getJobs:function(){return E_NOTIMPL},createJob:function(){return E_NOTIMPL},AddJob:function(){return E_NOTIMPL},CommitJob:function(){return E_NOTIMPL},RemoveJob:function(){return E_NOTIMPL},StartJob:function(){return E_NOTIMPL},CancelJob:function(){return E_NOTIMPL},UpdateStatuses:function(){return E_NOTIMPL},getStatusByJobName:function(){return E_NOTIMPL},UpdateLogs:function(){return E_NOTIMPL},
ExportSeeding:function(){return E_NOTIMPL},ImportSeeding:function(){return E_NOTIMPL},UpdateExportSeedingStatus:function(){return E_NOTIMPL}}});var IRepliSyncJobsManager=dpv.IRepliSyncJobsManager;dpv.IRepliSyncJobsManagerEvents=Njl.inherit(IProtocolEvents,{IRepliSyncJobsManagerEvents:{OnLogsUpdate:function(){return E_NOTIMPL},OnExportSeedingStatusUpdate:function(){return E_NOTIMPL}}});var IRepliSyncJobsManagerEvents=dpv.IRepliSyncJobsManagerEvents;Njl.namespace("dpv");
dpv.IRepliSyncJobStatus=Njl.inherit(IUnknown,{IRepliSyncJobStatus:{getJobName:function(){return E_NOTIMPL},getStatus:function(){return E_NOTIMPL},getSpeed:function(){return E_NOTIMPL},getRuntime:function(){return E_NOTIMPL},getTransferred:function(){return E_NOTIMPL}}});var IRepliSyncJobStatus=dpv.IRepliSyncJobStatus;Njl.namespace("dpv");
dpv.IRepliSyncJobLog=Njl.inherit(IUnknown,{IRepliSyncJobLog:{getJobName:function(){return E_NOTIMPL},getSnapshot:function(){return E_NOTIMPL},getName:function(){return E_NOTIMPL},getRole:function(){return E_NOTIMPL},getStartTime:function(){return E_NOTIMPL},getYear:function(){return E_NOTIMPL},getMonth:function(){return E_NOTIMPL},getDay:function(){return E_NOTIMPL},getHour:function(){return E_NOTIMPL},getMinute:function(){return E_NOTIMPL},getSecond:function(){return E_NOTIMPL},getDuration:function(){return E_NOTIMPL},
getResult:function(){return E_NOTIMPL},getCode:function(){return E_NOTIMPL},getLog:function(){return E_NOTIMPL}}});var IRepliSyncJobLog=dpv.IRepliSyncJobLog;Njl.namespace("dpv");dpv.IRepliSyncRemoteBrowseManager=Njl.inherit(IUnknown,{IRepliSyncRemoteBrowseManager:{UpdateSources:function(){return E_NOTIMPL},UpdateDestinations:function(){return E_NOTIMPL},CreateShare:function(){return E_NOTIMPL}}});var IRepliSyncRemoteBrowseManager=dpv.IRepliSyncRemoteBrowseManager;
dpv.IRepliSyncRemoteBrowseManagerEvents=Njl.inherit(IProtocolEvents,{IRepliSyncRemoteBrowseManagerEvents:{OnSourcesUpdate:function(){return E_NOTIMPL},OnDestinationsUpdate:function(){return E_NOTIMPL}}});var IRepliSyncRemoteBrowseManagerEvents=dpv.IRepliSyncRemoteBrowseManagerEvents;Njl.namespace("dpv.replisync");
dpv.replisync=Njl.inherit(CComObjectRoot,dpv.base,IRepliSync,{constructor:function(){dpv.replisync.superclass.constructor.apply(this,arguments)},IRepliSync:{getKeysManager:function(){return this._mngr_keys||(this._mngr_keys=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.replisync.keys,"IRepliSyncKeysManager")))},getJobsManager:function(){return this._mngr_jobs||(this._mngr_jobs=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.replisync.jobs,"IRepliSyncJobsManager")))},getRemoteBrowseManager:function(){return this._mngr_rb||
(this._mngr_rb=CComQIPtr(this,"IXDomNode").appendChild(CComQIPtr(new dpv.replisync.remotebrowse,"IRepliSyncRemoteBrowseManager")))}}});Njl.namespace("dpv.replisync");
dpv.replisync.key=Njl.inherit(CComObjectRoot,dpv.base,IRepliSyncKey,{constructor:function(){dpv.replisync.key.superclass.constructor.apply(this,arguments)},IRepliSyncKey:{getId:function(){return dpv.gp(this.xprop,"Id")},getTitle:function(){return dpv.gp(this.xprop,"Title")},putTitle:function(a){return dpv.pp(this.xprop,"Title",a)},getKey:function(){return dpv.gp(this.xprop,"Key")},getType:function(){return dpv.gp(this.xprop,"Type")},getComment:function(){return E_NOTIMPL},getFingerPrint:function(){return dpv.gp(this.xprop,
"Fingerprint")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.replisync");
dpv.replisync.keys=Njl.inherit(CComEventsObjectRoot("IRepliSyncKeysManagerEvents"),dpv.base,IRepliSyncKeysManager,{constructor:function(){dpv.replisync.keys.superclass.constructor.apply(this,arguments)},IRepliSyncKeysManager:{UpdateKeys:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="ReplisyncKeys" />',Njl.id())),a)},getKeys:function(){return this.xkeys?this.xkeys:E_FAIL},AddKey:function(a,b,c){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="ReplisyncKeys">                    <ReplisyncKey>                        <Title>{1}</Title>                        <FileName>{2}</FileName>                    </ReplisyncKey>                </xs:add>',
Njl.id(),b,c)),a)},CommitKey:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="ReplisyncKeys">                            {1}                        </xs:set>',Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a)},RemoveKey:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ReplisyncKeys" />',Njl.id(),b)),a)}},IXDomNode:{loadFromXml:function(a){if(a.getAttributeText("resource-type")==
"ReplisyncKeys"){this.xkeys=[];a=a.selectNodes("ReplisyncKey_Collection/ReplisyncKey");Njl.each(a,function(b){var c=CComQIPtr(new dpv.replisync.key,"IXDomNode");c.loadFromXml(b)==S_OK&&this.xkeys.push(CComQIPtr(c,"IRepliSyncKey"))},this);return S_OK}return E_FAIL}}});Njl.namespace("dpv.replisync");
dpv.replisync.job=Njl.inherit(CComObjectRoot,dpv.base,IRepliSyncJob,{constructor:function(a){dpv.replisync.job.superclass.constructor.apply(this,arguments);a||CComQIPtr(this,"IXDomNode").loadFromXml((new Njl.Xml.document("                <ReplisyncJob>                    <Job_Id />                    <Job_Name />                    <Enabled>1</Enabled>                    <Source_Host />                    <Source_Port />                    <Source_Path />                    <Dest_Host />                    <Dest_Port />                    <Dest_Path />                    <Interval />                    <Bw_Limit>500</Bw_Limit>                    <Encrypt>0</Encrypt>                    <Compress>1</Compress>                    <Schedule />                    <Status_TimeStamp />                    <Status_Date />                    <Last_Result />                    <Email_Alert />                </ReplisyncJob>")).selectNodes("./*")[0])},IRepliSyncJob:{getId:function(){return dpv.gp(this.xprop,
"Job_Id")},getName:function(){return dpv.gp(this.xprop,"Job_Name")},putName:function(a){return dpv.pp(this.xprop,"Job_Name",a)},getEnabled:function(){return dpv.gp(this.xprop,"Enabled")},putEnabled:function(a){return dpv.pp(this.xprop,"Enabled",a)},getSourceHost:function(){return dpv.gp(this.xprop,"Source_Host")},putSourceHost:function(a){return dpv.pp(this.xprop,"Source_Host",a)},getSourcePort:function(){return dpv.gp(this.xprop,"Source_Port")},putSourcePort:function(a){return dpv.pp(this.xprop,
"Source_Port",a)},getSourcePath:function(){return dpv.gp(this.xprop,"Source_Path")},putSourcePath:function(a){return dpv.pp(this.xprop,"Source_Path",a)},getDestHost:function(){return dpv.gp(this.xprop,"Dest_Host")},putDestHost:function(a){return dpv.pp(this.xprop,"Dest_Host",a)},getDestPort:function(){return dpv.gp(this.xprop,"Dest_Port")},putDestPort:function(a){return dpv.pp(this.xprop,"Dest_Port",a)},getDestPath:function(){return dpv.gp(this.xprop,"Dest_Path")},putDestPath:function(a){return dpv.pp(this.xprop,
"Dest_Path",a)},getInterval:function(){return dpv.gp(this.xprop,"Interval")},putInterval:function(a){return dpv.pp(this.xprop,"Interval",a)},getCompletionSend:function(){return dpv.gp(this.xprop,"Email_Alert")},putCompletionSend:function(a){return dpv.pp(this.xprop,"Email_Alert",a)},getBwLimit:function(){return dpv.gp(this.xprop,"Bw_Limit")},putBwLimit:function(a){return dpv.pp(this.xprop,"Bw_Limit",a)},getEncrypt:function(){return dpv.gp(this.xprop,"Encrypt")},putEncrypt:function(a){return dpv.pp(this.xprop,
"Encrypt",a)},getCompress:function(){return dpv.gp(this.xprop,"Compress")},putCompress:function(a){return dpv.pp(this.xprop,"Compress",a)},getSchedule:function(){return dpv.gp(this.xprop,"Schedule")},putSchedule:function(a){return dpv.pp(this.xprop,"Schedule",a)},getWolAddress:function(){return dpv.gp(this.xprop,"Wol_Address")},putWolAddress:function(a){return dpv.pp(this.xprop,"Wol_Address",a)},getTimeToWait:function(){return dpv.gp(this.xprop,"Time_To_Wait")},putTimeToWait:function(a){return dpv.pp(this.xprop,
"Time_To_Wait",a)},getLastRunningTimestamp:function(){return dpv.gp(this.xprop,"Status_TimeStamp")},getLastRunningTime:function(){return dpv.gp(this.xprop,"Status_Date")},getLastResult:function(){return dpv.gp(this.xprop,"Last_Result")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.replisync");
dpv.replisync.jobs=Njl.inherit(CComEventsObjectRoot("IRepliSyncJobsManagerEvents"),dpv.base,IRepliSyncJobsManager,{constructor:function(){dpv.replisync.jobs.superclass.constructor.apply(this,arguments)},IRepliSyncJobsManager:{UpdateJobs:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="ReplisyncJobs" resource-type="ReplisyncJob_Collection" />',Njl.id())),a)},getJobs:function(){return this.xjobs?this.xjobs:E_FAIL},createJob:function(){return CComQIPtr(new dpv.replisync.job,
"IRepliSyncJob")},AddJob:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:add id="{0}" resource-type="ReplisyncJob" c-resource-id="ReplisyncJobs" c-resource-type="ReplisyncJob_Collection">                    {1}                </xs:add>',Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a)},CommitJob:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:set id="{0}" resource-type="ReplisyncJob" c-resource-id="ReplisyncJobs" c-resource-type="ReplisyncJob_Collection">                            {1}                        </xs:set>',
Njl.id(),CComQIPtr(b,"IXDomNode").getXml().toString())),a)},RemoveJob:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ReplisyncJob" c-resource-id="ReplisyncJobs" c-resource-type="ReplisyncJob_Collection" />',Njl.id(),b)),a)},StartJob:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="ReplisyncJob">\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0                      <xs:command_name>Start</xs:command_name>\u00a0\u00a0\u00a0\u00a0                    </xs:command>',
Njl.id(),b)),a)},CancelJob:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="ReplisyncJob">                          <xs:command_name>Cancel</xs:command_name>                          <xs:args/>                        </xs:command>',Njl.id(),b)),a)},UpdateStatuses:function(a){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-type="ReplisyncStatus_Collection" />',Njl.id())),a)},getStatusByJobName:function(a){return this.xstatuses?
this.xstatuses[a]:E_FAIL},UpdateLogs:function(a,b){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_jobId=b;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="ReplisyncLog_Collection" />',Njl.id(),b)),a)},ExportSeeding:function(a,b,c,d){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="export" resource-id="{1}" resource-type="ReplisyncSeeding">                    <Seeding>                        <Path>{2}</Path>                        <Compress>{3}</Compress>                    </Seeding>                </xs:custom>',
Njl.id(),b,c,d)),a)},ImportSeeding:function(a,b,c){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:custom id="{0}" name="import" resource-id="{1}" resource-type="ReplisyncSeeding">                    <Seeding>                        <Path>{2}</Path>                    </Seeding>                </xs:custom>',Njl.id(),b,c)),a)},UpdateExportSeedingStatus:function(a,b){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BgProcess"/>',Njl.id(),b)),
a)},ClearHistory:function(a,b){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_jobId=b;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ReplisyncLog_Collection"/>',Njl.id(),b)),a)}},IXDomNode:{loadFromXml:function(a,b){var c=a.getAttributeText("resource-type");if(c=="ReplisyncJob_Collection"){this.xjobs=[];b=a.selectNodes("ReplisyncJob_Collection/ReplisyncJob");Njl.each(b,function(e){var f=CComQIPtr(new dpv.replisync.job(true),"IXDomNode");f.loadFromXml(e)==
S_OK&&this.xjobs.push(CComQIPtr(f,"IRepliSyncJob"))},this);return S_OK}else if(c=="ReplisyncStatus_Collection"){this.xstatuses={};b=a.selectNodes("ReplisyncStatus_Collection/ReplisyncStatus");Njl.each(b,function(e){var f=CComQIPtr(new dpv.replisync.jobstatus,"IXDomNode");if(f.loadFromXml(e)==S_OK){f=CComQIPtr(f,"IRepliSyncJobStatus");this.xstatuses[f.getJobName()]=f}},this);return S_OK}else if(c=="ReplisyncLog_Collection"){c=b._dpv_jobId;delete b._dpv_jobId;if(c){var d=[];a=a.selectNodes("ReplisyncJobLog_Collection/Log");
Njl.each(a,function(e){var f=CComQIPtr(new dpv.replisync.joblog,"IXDomNode");f.loadFromXml(e)==S_OK&&d.push(CComQIPtr(f,"IRepliSyncJobLog"))},this);this.Fire("OnLogsUpdate",[b,d,c])}return S_OK}else if(c=="BgProcess"){(c=a.selectSingleNode("BgProcessStatus"))&&this.Fire("OnExportSeedingStatusUpdate",[b,c.getAttributeText("status"),a.getAttributeText("resource-id")]);return S_OK}return E_FAIL}}});Njl.namespace("dpv.replisync");
dpv.replisync.jobstatus=Njl.inherit(CComObjectRoot,dpv.base,IRepliSyncJobStatus,{constructor:function(){dpv.replisync.jobstatus.superclass.constructor.apply(this,arguments)},IRepliSyncJobStatus:{getJobName:function(){return dpv.gp(this.xprop,"JobName")},getStatus:function(){return dpv.gp(this.xprop,"Status")},getSpeed:function(){return dpv.gp(this.xprop,"Speed")},getRuntime:function(){return dpv.gp(this.xprop,"Runtime")},getTransferred:function(){return dpv.gp(this.xprop,"Transferred")},getWakingRemainingTime:function(){return dpv.gp(this.xprop,
"Waking_Remaining_Time")}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=CComQIPtr(new dpv.xprop(this.x),"IXPropertyList");return S_OK}}});Njl.namespace("dpv.replisync");
dpv.replisync.joblog=Njl.inherit(CComObjectRoot,dpv.base,IRepliSyncJobLog,{constructor:function(){dpv.replisync.joblog.superclass.constructor.apply(this,arguments)},IRepliSyncJobLog:{getJobName:function(){return this.x?this.x.getAttributeText("job_name"):E_FAIL},getSnapshot:function(){return this.x?this.x.getAttributeText("snapshot"):E_FAIL},getName:function(){return this.x?this.x.getAttributeText("name"):E_FAIL},getRole:function(){return this.x?this.x.getAttributeText("role"):E_FAIL},getStartTime:function(){return this.x?
this.x.getAttributeText("start_time"):E_FAIL},getYear:function(){return this.x?this.x.getAttributeText("year"):E_FAIL},getMonth:function(){return this.x?this.x.getAttributeText("month"):E_FAIL},getDay:function(){return this.x?this.x.getAttributeText("day"):E_FAIL},getHour:function(){return this.x?this.x.getAttributeText("hr"):E_FAIL},getMinute:function(){return this.x?this.x.getAttributeText("min"):E_FAIL},getSecond:function(){return this.x?this.x.getAttributeText("sec"):E_FAIL},getDuration:function(){return this.x?
this.x.getAttributeText("duration"):E_FAIL},getResult:function(){return this.x?this.x.getAttributeText("result"):E_FAIL},getCode:function(){return this.x?this.x.getAttributeText("code"):E_FAIL},getLog:function(){return this.x?this.x.getAttributeText("log"):E_FAIL}},IXDomNode:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return S_OK}}});Njl.namespace("dpv.replisync");
dpv.replisync.remotebrowse=Njl.inherit(CComEventsObjectRoot("IRepliSyncRemoteBrowseManagerEvents"),dpv.base,IRepliSyncRemoteBrowseManager,{constructor:function(){dpv.replisync.remotebrowse.superclass.constructor.apply(this,arguments)},IRepliSyncRemoteBrowseManager:{UpdateSources:function(a,b,c){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_address=b;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>GetRemoteSources</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host>{1}</Host>                            <Port>{2}</Port>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c)),a)},UpdateDestinations:function(a,b,c){a=Njl.isString(a)?new String(a):!a?{}:a;a._dpv_address=b;return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>GetRemoteDestinations</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host>{1}</Host>                            <Port>{2}</Port>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c)),a)},CreateShare:function(a,b,c,d,e){return this.sendXml(dpv.xmlEnvelope(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>CreateRemoteReadyDRShare</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host>{1}</Host>                            <ShareName>{2}/{3}</ShareName>                            <Port>{4}</Port>                        </xs:arg>                    </xs:args>                </xs:command>',
Njl.id(),b,c,d,e)),a)}},IXDomNode:{loadFromXml:function(a,b){var c=a.selectSingleNode("GetRemoteSources");a=a.selectSingleNode("GetRemoteDestinations");var d=b._dpv_address,e,f,g,h;delete b._dpv_address;if(d){if(c){e=c.selectNodes("Share_Collection/Share");g=c.selectNodes("Volume_Collection/Volume")}else if(a){e=a.selectNodes("Share_Collection/Share");g=a.selectNodes("Volume_Collection/Volume")}if(e){f=[];Njl.each(e,function(k){var j=CComQIPtr(new dpv.simpleshare,"IXDomNode");j.loadFromXml(k)==S_OK&&
f.push(CComQIPtr(j,"ISimpleShare"))},this)}if(g){h=[];Njl.each(g,function(k){var j=CComQIPtr(new dpv.zfsVol,"IXDomNode");j.loadFromXml(k)==S_OK&&h.push(CComQIPtr(j,"IZFSVolume"))},this)}if(c){this.Fire("OnSourcesUpdate",[b,d,f,h]);return S_OK}else if(a){this.Fire("OnDestinationsUpdate",[b,d,f,h]);return S_OK}}return E_FAIL}}});
if(typeof Ext=="undefined")throw"Ext library is not found. Please include Extjs library before uilib";if(typeof Njl=="undefined")throw"Njl library is not found. Please include Extjs library before uilib";_TR=typeof _TR!="undefined"?_TR:function(a){return a};Njl.namespace("Ext.UI","Njl.CLSIDS","Njl.CLSIDS.UI");Njl.CLSIDS.UI.Window="UI.Window";Njl.CLSIDS.UI.SyncResizeEventer="UI.SyncResizeEventer";Ext.UI.ISyncWindowResizeEvent=Njl.inherit(IUnknown,{ISyncWindowResizeEvent:{OnResize:function(){return E_NOTIMPL}}});
var ISyncWindowResizeEvent=Ext.UI.ISyncWindowResizeEvent;
Ext.UI.SyncResizeEventer=Njl.inherit(Njl.CLSIDS.UI.SyncResizeEventer,CComEventsObjectRoot("ISyncWindowResizeEvent"),ISingleTone,{constructor:function(){Ext.UI.SyncResizeEventer.superclass.constructor.call(this,arguments);Ext.EventManager.addListener(window,"resize",function(){this.spSink=this.spSink?this.spSink:CComQIPtr(CoCreateInstance(Njl.CLSIDS.UI.SyncResizeEventer),"INotifySink").__s;this.spSink.Fire("OnResize",arguments)},this);Ext.EventManager.addListener(window,"orientationchange",function(){this.spSink=
this.spSink?this.spSink:CComQIPtr(CoCreateInstance(Njl.CLSIDS.UI.SyncResizeEventer),"INotifySink").__s;this.spSink.Fire("OnResize",arguments)},this)}});Ext.Element.prototype.getAttribute=Ext.isIE&&!Njl.isIE9?Ext.Element.prototype.getAttribute:function(a,b){var c=this.dom;return c.getAttributeNS(b,a)||c.getAttribute(b+":"+a)||c.getAttribute(a)||c[a]};
function createContextualFragment(a){var b=document.createElement("div"),c=document.createDocumentFragment(),d=0;b.innerHTML=a;b=b.childNodes;for(a=b.length;d<a;d++)c.appendChild(b[d].cloneNode(true));return c}
ie9Patch_createContextualFragment=function(){if(!Ext.isDefined(Ext.isTextNode))Ext.isTextNode=function(a){return a?a.nodeName==="#text":false};if(Ext.isDefined(Ext.DomHelper.insertHtml))Ext.DomHelper.insertHtml=function(a,b,c){function d(m,n,x,A){g.innerHTML=[n,x,A].join("");x=-1;for(n=g;++x<m;)n=n.firstChild;if(n.nextSibling){for(x=document.createDocumentFragment();n;){m=n.nextSibling;x.appendChild(n);n=m}n=x}return n}function e(m,n,x,A){var B;g=g||document.createElement("div");if(!(m=="td"&&(n==
l||n==w)||!h.test(m)&&(n==t||n==u))){B=n==t?x:n==u?x.nextSibling:n==l?x.firstChild:null;if(n==t||n==u)x=x.parentNode;m=m=="td"||m=="tr"&&(n==w||n==l)?d(4,z,A,f):m=="tbody"&&(n==w||n==l)||m=="tr"&&(n==t||n==u)?d(3,k,A,s):d(2,y,A,v);x.insertBefore(m,B);return m}}var g=null,j=/^table|tbody|tr|td$/i,h=/td|tr|tbody/i,q=/end/i,l="afterbegin",u="afterend",t="beforebegin",w="beforeend",y="<table>",v="</table>",k=y+"<tbody>",s="</tbody>"+v,z=k+"<tr>",f="</tr>"+s,i={},p;a=a.toLowerCase();i[t]=["BeforeBegin",
"previousSibling"];i[u]=["AfterEnd","nextSibling"];if(b.insertAdjacentHTML){if(j.test(b.tagName)&&(p=e(b.tagName.toLowerCase(),a,b,c)))return p;i[l]=["AfterBegin","firstChild"];i[w]=["BeforeEnd","lastChild"];if(i=i[a]){b.insertAdjacentHTML(i[0],c);return b[i[1]]}}else{if(Ext.isTextNode(b)){a=a==="afterbegin"?"beforebegin":a;a=a==="beforeend"?"afterend":a}j=Ext.supports.CreateContextualFragment?b.ownerDocument.createRange():undefined;q="setStart"+(q.test(a)?"After":"Before");if(i[a]){if(j){j[q](b);
c=j.createContextualFragment(c)}else c=createContextualFragment(c);b.parentNode.insertBefore(c,a==t?b:b.nextSibling);return b[(a==t?"previous":"next")+"Sibling"]}else{i=(a==l?"first":"last")+"Child";if(b.firstChild){if(j){j[q](b[i]);c=j.createContextualFragment(c)}else c=createContextualFragment(c);a==l?b.insertBefore(c,b.firstChild):b.appendChild(c)}else b.innerHTML=c;return b[i]}}throw'Illegal insertion point -> "'+a+'"';}}();Ext.UI.isTouchCapable=Njl.isAndroid||Njl.isiOS;
Ext.UI.isTouchCapable&&Ext.onReady(function(){Ext.getBody().addClass("x-ui-touchcapable")});var OLD_ADD_LISTENER=Ext.EventManager.addListener;
Ext.EventManager.addListener=function(a,b,c,d,e){if(Ext.UI.isTouchCapable){var g=function(h,q,l,u){var t=document.createEvent("MouseEvent");t.initMouseEvent(h,true,true,window,0,0,0,l,u);Ext.getDom(q||a).dispatchEvent(t)};switch(b){case "mousedown":OLD_ADD_LISTENER(a,"mousedown",c,d,e);OLD_ADD_LISTENER(a,"touchstart",function(h){var q=0,l=0,u=undefined;if(h.browserEvent.touches)if(h=h.browserEvent.touches.item(0)){q=h.clientX;l=h.clientY;u=h.target}g("mousedown",u,q,l)});break;case "mousemove":OLD_ADD_LISTENER(a,
"mousemove",c,d,e);OLD_ADD_LISTENER(a,"touchmove",function(h){var q=0,l=0,u=undefined;if(h.browserEvent.touches)if(h=h.browserEvent.touches.item(0)){q=h.clientX;l=h.clientY;u=h.target}g("mousemove",u,q,l)});break;case "mouseup":OLD_ADD_LISTENER(a,"mouseup",c,d,e);OLD_ADD_LISTENER(a,"touchend",function(h){var q=0,l=0,u=undefined;if(h.browserEvent.touches)if(h=h.browserEvent.touches.item(0)){q=h.clientX;l=h.clientY;u=h.target}g("mouseup",u,q,l)});break;case "click":OLD_ADD_LISTENER(a,"click",function(){});
OLD_ADD_LISTENER(a,"touchstart",function(){Ext.EventManager.isTouchMove=false;Ext.EventManager.isContextMenu=false});OLD_ADD_LISTENER(a,"touchmove",function(){(function(){Ext.EventManager.isTouchMove=true}).defer(500,this)});OLD_ADD_LISTENER(a,"touchend",function(h,q,l){if(!Ext.EventManager.isTouchMove&&!Ext.EventManager.isContextMenu){h.button=0;c.apply(this,[h,q,l])}},d,e);break;case "contextmenu":var j;OLD_ADD_LISTENER(a,"contextmenu",function(){return false},d,e);OLD_ADD_LISTENER(a,"touchstart",
function(h,q,l){h.preventDefault();j=setTimeout(function(){Ext.EventManager.isContextMenu=true;c.apply(d,[h,q,l])},500)},d,e);OLD_ADD_LISTENER(a,"touchmove",function(){clearTimeout(j)});OLD_ADD_LISTENER(a,"touchend",function(){clearTimeout(j)});break;default:OLD_ADD_LISTENER(a,b,c,d,e)}}else OLD_ADD_LISTENER(a,b,c,d,e)};Ext.EventManager.on=Ext.EventManager.addListener;Njl.CLSIDS.UI.iOSShakeEventer="UI.iOSShakeEventer";Ext.UI.IiOSShakeEvent=Njl.inherit(IUnknown,{IiOSShakeEvent:{OnShake:function(){return E_NOTIMPL}}});
var IiOSShakeEvent=Ext.UI.IiOSShakeEvent;
Ext.UI.iOSShakeEventer=Njl.inherit(Njl.CLSIDS.UI.iOSShakeEventer,CComEventsObjectRoot("IiOSShakeEvent"),ISingleTone,{constructor:function(){Ext.UI.iOSShakeEventer.superclass.constructor.call(this,arguments);var a={sensibility:12,timeout:0,callback:null},b={x:null,y:null,z:null},c=new Date;Ext.EventManager.addListener(window,"devicemotion",function(d){var e=d.browserEvent.accelerationIncludingGravity;if(b.x!==null||b.y!==null||b.z!==null){var g=Math.abs(b.x-e.x),j=Math.abs(b.y-e.y),h=Math.abs(b.z-
e.z);if(g>a.sensibility&&j>a.sensibility||g>a.sensibility&&h>a.sensibility||j>a.sensibility&&h>a.sensibility)if((new Date).getTime()-c.getTime()>3E3){c=new Date;b={x:null,y:null,z:null};this.spSink=this.spSink?this.spSink:CComQIPtr(CoCreateInstance(Njl.CLSIDS.UI.iOSShakeEventer),"INotifySink").__s;this.spSink.Fire("OnShake",arguments)}}b.x=e.x;b.y=e.y;b.z=e.z},this)}});
Ext.UI.isTouchCapable&&function(){var a=[0,0],b=function(c){if(c=c.browserEvent.touches.item(0))a=[c.clientX,c.clientY];return function(){return a}};Ext.Resizable.Handle=Ext.extend(Ext.Resizable.Handle,{constructor:function(){Ext.Resizable.Handle.superclass.constructor.apply(this,arguments);this.el.un("mousedown",this.onMouseDown,this);this.el.on("touchstart",function(d){d.getXY=b(d);this.rz.onMouseDown(this,d);d.stopEvent();Ext.getBody().on("touchend",c,this)},this);this.el.on("touchmove",function(d){d.getXY=
b(d);this.rz.onMouseMove(d);d.stopEvent()},this);var c=function(d){d.getXY=b(d);this.rz.onMouseUp(d);d.stopEvent();Ext.getBody().un("touchend",c,this)};this.el.on("touchend",c,this)}})}();Ext.UI.isCSSAnimationSupported=function(){var a=false,b="Webkit Moz O ms Khtml".split(" "),c="";c=Ext.getBody().dom;if(c.style.animationName!==undefined)a=true;if(a===false)for(var d=0;d<b.length;d++)if(c.style[b[d]+"AnimationName"]!==undefined){c=b[d];c.toLowerCase();a=true;break}return a}();Ext.namespace("Ext.UI");
Ext.UI.FocusManager=Ext.extend(Ext.util.Observable,{handlers:{},procEvents:{},focusEl:undefined,constructor:function(){Ext.UI.FocusManager.superclass.constructor.apply(this,arguments)},onDocEvent:function(a){var b=this.focusEl;b&&b.id&&this.handlers[b.id]&&this.handlers[b.id].fireEvent(a.type,a)},reg:function(a,b,c){if(!a)return false;if(!a.id)a.id=Ext.id();if(Ext.isFunction(b))b={keypress:b};this.handlers[a.id]||(this.handlers[a.id]=new Ext.util.Observable);var d=this.handlers[a.id];for(var e in b){if(!this.procEvents[e]){this.procEvents[e]=
e;Ext.EventManager.on(Ext.getBody(),e,this.onDocEvent,this)}d.on(e,b[e],c)}a.on("mouseup",function(g){if(this.focusEl){var j=a.child("#"+this.focusEl.id);g=this.focusEl.child("#"+Ext.get(g.target).id)||this.focusEl.dom==g.target;if(!j||!g)this.setActive(a)}else this.setActive(a)},this)},setActive:function(a){if(a&&a.id&&(!this.focusEl||this.focusEl!=a)){this.focusEl&&this.handlers[this.focusEl.id]&&this.handlers[this.focusEl.id].fireEvent("deactivate");var b=this.focusEl;this.focusEl=a;this.handlers[a.id]&&
this.handlers[a.id].fireEvent("activate",this.focusEl,b)}},pushActive:function(a){this.oldFocusEl=this.focusEl;this.setActive(a)},popActive:function(){if(this.oldFocusEl){this.setActive(this.oldFocusEl);this.oldFocusEl=undefined}}});FocusManager=Ext.UI.FocusManager=new Ext.UI.FocusManager;
Ext.ux.Spinner=Ext.extend(Ext.util.Observable,{incrementValue:1,alternateIncrementValue:5,triggerClass:"x-form-spinner-trigger",splitterClass:"x-form-spinner-splitter",alternateKey:Ext.EventObject.shiftKey,defaultValue:0,accelerate:false,constructor:function(a){Ext.ux.Spinner.superclass.constructor.call(this,a);Ext.apply(this,a);this.mimicing=false},init:function(a){this.field=a;a.afterMethod("onRender",this.doRender,this);a.afterMethod("onEnable",this.doEnable,this);a.afterMethod("onDisable",this.doDisable,
this);a.afterMethod("onResize",this.doResize,this);a.afterMethod("onFocus",this.doFocus,this);a.beforeMethod("onDestroy",this.doDestroy,this)},doRender:function(){var a=this.el=this.field.getEl(),b=this.field;if(b.wrap)this.wrap=b.wrap.addClass("x-form-field-wrap");else b.wrap=this.wrap=a.wrap({cls:"x-form-field-wrap"});this.trigger=this.wrap.createChild({tag:"div",cls:"x-form-trigger "+this.triggerClass});b.width||this.wrap.setWidth(a.getWidth()+this.trigger.getWidth());this.splitter=this.wrap.createChild({tag:"div",
cls:this.splitterClass,style:"width:13px; height:2px;"});this.splitter.setRight(Ext.isIE?1:2).setTop(10).show();this.proxy=this.trigger.createProxy("",this.splitter,true);this.proxy.addClass("x-form-spinner-proxy");this.proxy.setStyle("left","0px");this.proxy.setSize(14,1);this.proxy.hide();this.dd=new Ext.dd.DDProxy(this.splitter.dom.id,"SpinnerDrag",{dragElId:this.proxy.id});this.initTrigger();this.initSpinner()},doEnable:function(){this.wrap&&this.wrap.removeClass(this.field.disabledClass)},doDisable:function(){if(this.wrap){this.wrap.addClass(this.field.disabledClass);
this.el.removeClass(this.field.disabledClass)}},doResize:function(a){typeof a=="number"&&this.el.setWidth(a-this.trigger.getWidth());this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},doFocus:function(){if(!this.mimicing){this.wrap.addClass("x-trigger-wrap-focus");this.mimicing=true;Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this,{delay:10});this.el.on("keydown",this.checkTab,this)}},checkTab:function(a){a.getKey()==a.TAB&&this.triggerBlur()},mimicBlur:function(a){!this.wrap.contains(a.target)&&
this.field.validateBlur(a)&&this.triggerBlur()},triggerBlur:function(){this.mimicing=false;Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this);this.el.un("keydown",this.checkTab,this);this.field.beforeBlur();this.wrap.removeClass("x-trigger-wrap-focus");this.field.onBlur.call(this.field)},initTrigger:function(){this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},initSpinner:function(){this.field.addEvents({spin:true,spinup:true,
spindown:true});this.keyNav=new Ext.KeyNav(this.el,{up:function(a){a.preventDefault();this.onSpinUp()},down:function(a){a.preventDefault();this.onSpinDown()},pageUp:function(a){a.preventDefault();this.onSpinUpAlternate()},pageDown:function(a){a.preventDefault();this.onSpinDownAlternate()},scope:this});this.repeater=new Ext.util.ClickRepeater(this.trigger,{accelerate:this.accelerate});this.field.mon(this.repeater,"click",this.onTriggerClick,this,{preventDefault:true});this.field.mon(this.trigger,{mouseover:this.onMouseOver,
mouseout:this.onMouseOut,mousemove:this.onMouseMove,mousedown:this.onMouseDown,mouseup:this.onMouseUp,scope:this,preventDefault:true});this.field.mon(this.wrap,"mousewheel",this.handleMouseWheel,this);this.dd.setXConstraint(0,0,10);this.dd.setYConstraint(1500,1500,10);this.dd.endDrag=this.endDrag.createDelegate(this);this.dd.startDrag=this.startDrag.createDelegate(this);this.dd.onDrag=this.onDrag.createDelegate(this)},onMouseOver:function(){if(!this.disabled){var a=this.getMiddle();this.tmpHoverClass=
Ext.EventObject.getPageY()<a?"x-form-spinner-overup":"x-form-spinner-overdown";this.trigger.addClass(this.tmpHoverClass)}},onMouseOut:function(){this.trigger.removeClass(this.tmpHoverClass)},onMouseMove:function(){if(!this.disabled){var a=this.getMiddle();Ext.EventObject.getPageY()>a&&this.tmpHoverClass=="x-form-spinner-overup"||Ext.EventObject.getPageY()}},onMouseDown:function(){if(!this.disabled){var a=this.getMiddle();this.tmpClickClass=Ext.EventObject.getPageY()<a?"x-form-spinner-clickup":"x-form-spinner-clickdown";
this.trigger.addClass(this.tmpClickClass)}},onMouseUp:function(){this.trigger.removeClass(this.tmpClickClass)},onTriggerClick:function(){if(!(this.disabled||this.el.dom.readOnly)){var a=this.getMiddle();this["onSpin"+(Ext.EventObject.getPageY()<a?"Up":"Down")]()}},getMiddle:function(){var a=this.trigger.getTop(),b=this.trigger.getHeight();return a+b/2},isSpinnable:function(){if(this.disabled||this.el.dom.readOnly){Ext.EventObject.preventDefault();return false}return true},handleMouseWheel:function(a){if(this.wrap.hasClass("x-trigger-wrap-focus")!=
false){var b=a.getWheelDelta();if(b>0){this.onSpinUp();a.stopEvent()}else if(b<0){this.onSpinDown();a.stopEvent()}}},startDrag:function(){this.proxy.show();this._previousY=Ext.fly(this.dd.getDragEl()).getTop()},endDrag:function(){this.proxy.hide()},onDrag:function(){if(!this.disabled){var a=Ext.fly(this.dd.getDragEl()).getTop(),b="";if(this._previousY>a)b="Up";if(this._previousY<a)b="Down";b!=""&&this["onSpin"+b]();this._previousY=a}},onSpinUp:function(){if(this.isSpinnable()!=false)if(Ext.EventObject.shiftKey==
true)this.onSpinUpAlternate();else{this.spin(false,false);this.field.fireEvent("spin",this);this.field.fireEvent("spinup",this)}},onSpinDown:function(){if(this.isSpinnable()!=false)if(Ext.EventObject.shiftKey==true)this.onSpinDownAlternate();else{this.spin(true,false);this.field.fireEvent("spin",this);this.field.fireEvent("spindown",this)}},onSpinUpAlternate:function(){if(this.isSpinnable()!=false){this.spin(false,true);this.field.fireEvent("spin",this);this.field.fireEvent("spinup",this)}},onSpinDownAlternate:function(){if(this.isSpinnable()!=
false){this.spin(true,true);this.field.fireEvent("spin",this);this.field.fireEvent("spindown",this)}},spin:function(a,b){var c=parseFloat(this.field.getValue());b=b==true?this.alternateIncrementValue:this.incrementValue;a==true?(c-=b):(c+=b);c=isNaN(c)?this.defaultValue:c;c=this.fixBoundries(c);this.field.setRawValue(c)},fixBoundries:function(a){a=a;if(this.field.minValue!=undefined&&a<this.field.minValue)a=this.field.minValue;if(this.field.maxValue!=undefined&&a>this.field.maxValue)a=this.field.maxValue;
return this.fixPrecision(a)},fixPrecision:function(a){var b=isNaN(a);if(!this.field.allowDecimals||this.field.decimalPrecision==-1||b||!a)return b?"":a;return parseFloat(parseFloat(a).toFixed(this.field.decimalPrecision))},doDestroy:function(){this.trigger&&this.trigger.remove();if(this.wrap){this.wrap.remove();delete this.field.wrap}this.splitter&&this.splitter.remove();if(this.dd){this.dd.unreg();this.dd=null}this.proxy&&this.proxy.remove();this.repeater&&this.repeater.purgeListeners()}});
Ext.form.Spinner=Ext.ux.Spinner;Ext.ns("Ext.ux.form");
Ext.ux.form.SpinnerField=Ext.extend(Ext.form.NumberField,{actionMode:"wrap",deferHeight:true,autoSize:Ext.emptyFn,onBlur:Ext.emptyFn,adjustSize:Ext.BoxComponent.prototype.adjustSize,constructor:function(a){var b=Ext.copyTo({},a,"incrementValue,alternateIncrementValue,accelerate,defaultValue,triggerClass,splitterClass");b=this.spinner=new Ext.ux.Spinner(b);b=a.plugins?Ext.isArray(a.plugins)?a.plugins.push(b):[a.plugins,b]:b;Ext.ux.form.SpinnerField.superclass.constructor.call(this,Ext.apply(a,{plugins:b}))},
getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},validateBlur:function(){return true}});Ext.reg("spinnerfield",Ext.ux.form.SpinnerField);Ext.form.SpinnerField=Ext.ux.form.SpinnerField;
Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:false,buttonOffset:3,readOnly:true,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(a,b){Ext.ux.form.FileUploadField.superclass.onRender.call(this,a,b);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"});this.el.addClass("x-form-file-text");this.el.dom.removeAttribute("name");this.createFileInput();
a=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(a,{renderTo:this.wrap,cls:"x-form-file-btn"+(a.iconCls?" x-btn-icon":"")}));if(this.buttonOnly){this.el.hide();this.wrap.setWidth(this.button.getEl().getWidth())}this.bindListeners();this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(["x-btn-over","x-btn-focus"])},mouseleave:function(){this.button.removeClass(["x-btn-over",
"x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},change:function(){var a=this.fileInput.dom.value;this.setValue(a);this.fireEvent("fileselected",this,a)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",type:"file",size:1})},reset:function(){this.fileInput.remove();this.createFileInput();
this.bindListeners();Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+"-file"},onResize:function(a,b){Ext.ux.form.FileUploadField.superclass.onResize.call(this,a,b);this.wrap.setWidth(a);if(!this.buttonOnly){a=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset;this.el.setWidth(a)}},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this);
this.doDisable(true)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this);this.doDisable(false)},doDisable:function(a){this.fileInput.dom.disabled=a;this.button.setDisabled(a)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}});Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField);Ext.form.FileUploadField=Ext.ux.form.FileUploadField;
Ext.EventObject.getXY=function(){if(this.xy[0]==0&&this.xy[1]==0){var a;if(this.browserEvent.touches&&this.browserEvent.touches.length)a=this.browserEvent.touches;else if(this.browserEvent.changedTouches&&this.browserEvent.changedTouches.length)a=this.browserEvent.changedTouches;if(a){a=a.item(0);this.xy=[a.clientX,a.clientY]}}return this.xy};Ext.Container.prototype.bufferResize=0;
Njl.getAttribute=function(){var a=document.createElement("table"),b=false,c=/undefined|unknown/;if("getAttribute"in a){try{a.getAttribute("ext:qtip")}catch(d){b=true}return function(e,g,j){e=e.dom;var h;if(e.getAttributeNS)h=e.getAttributeNS(j,g)||null;if(h==null)if(j)if(b&&e.tagName.toUpperCase()=="TABLE")try{h=e.getAttribute(j+":"+g)}catch(q){h=""}else h=e.getAttribute(j+":"+g);else h=e.getAttribute(g)||e[g];return h||""}}else return function(e,g,j){e=e.om;if(j){g=e[j+":"+g];g=c.test(typeof g)?
undefined:g}else g=e[g];return g||""}}();Ext.namespace("Ext.UI");
Ext.UI.Checkbox=Ext.extend(Ext.form.Checkbox,{uicls:"ui-checkbox",defaultAutoCreate:{tag:"div"},onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.checkedClass=this.uicls+"-checked";Ext.UI.Checkbox.superclass.onRender.call(this,a,b);this.anchor=this.wrap.createChild({tag:"a",href:"#",cls:"x-el-focus",html:" "});this.anchor.on("focus",function(){this.el.dom.disabled||this.wrap.addClass(this.uicls+"-focused")},this);this.anchor.on("blur",function(){this.wrap.removeClass(this.uicls+
"-focused")},this);this.anchor.on("keydown",function(c){if(!this.el.dom.disabled&&c.getKey()==c.SPACE){c.stopEvent();this.setValue(!this.getValue())}},this);(a=this.wrap.child("label"))&&a.on("click",this.onClick,this);this.wrap.addClass(this.uicls);this.wrap.addClass(this.wrapCls);this.checked&&this.wrap.addClass(this.checkedClass);this.el.dom.checked=!Ext.isEmpty(this.initialConfig.value)?this.initialConfig.value:!Ext.isEmpty(this.initialConfig.checked)?this.initialConfig.checked:false},render:function(a,
b){if(this.cls){this.wrapCls=this.cls;delete this.cls}Ext.UI.Checkbox.superclass.render.call(this,a,b)},showValidateTooltip:function(a){var b=Ext.UI.Checkbox._validate_tooltip;if(!b){var c=function(){Ext.UI.Checkbox._validate_tooltip.hide()},d=function(e){e.stopPropagation()};b=Ext.UI.Checkbox._validate_tooltip=new Ext.UI.ToolTip(this.wrap,{enabled:true,width:300,html:"",attachPosition:Ext.UI.ToolTip.CENTER,delay:0});b.on("show",function(){Ext.EventManager.addListener(b.el,"mousedown",d);Ext.EventManager.addListener(Ext.getBody(),
"mousedown",c);Ext.UI.Checkbox._validate_tooltip.field.wrap.addClass("ui-checkbox-invalid")});b.on("hide",function(){Ext.EventManager.removeListener(b.el,"mousedown",d);Ext.EventManager.removeListener(Ext.getBody(),"mousedown",c);Ext.UI.Checkbox._validate_tooltip.field.wrap.removeClass("ui-checkbox-invalid")})}b.initTarget(this.wrap);b.destroyEvents(true);b.update(a);b.field=this;b.show()},hideValidateTooltip:function(){Ext.UI.Checkbox._validate_tooltip&&Ext.UI.Checkbox._validate_tooltip.hide()},
onClick:function(){if(!this.disabled){this.focus();this.setValue(!this.checked)}},onDisable:function(){this.el.addClass(this.disabledClass);this.el.dom.disabled=true;Ext.get(this.wrap.query(".x-form-cb-label")).addClass(this.disabledClass)},onEnable:function(){this.el.removeClass(this.disabledClass);this.el.dom.disabled=false;Ext.get(this.wrap.query(".x-form-cb-label")).removeClass(this.disabledClass)},updateUI:function(a){if(this.rendered)a?this.wrap.addClass(this.checkedClass):this.wrap.removeClass(this.checkedClass)},
setValue:function(a,b){var c=this.checked,d=this.inputValue;this.checked=a===true||a==="true"||a=="1"||(d?a==d:String(a).toLowerCase()=="on");if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked}if(c!=this.checked)if(b!=true){this.fireEvent("check",this,this.checked);if(this.handler)this.handler.call(this.scope||this,this,this.checked)}this.updateUI(this.checked);return this},reset:function(){Ext.UI.Checkbox.superclass.reset.call(this);this.updateUI(this.checked)},
getVisibilityEl:function(){return this.hideParent?this.container:this.wrap},getLabel:function(){return this.boxLabel},setLabel:function(a){if(Ext.isString(a)){this.boxLabel=a;if(this.rendered){var b=this.wrap.query(".x-form-cb-label");if(b.length>0)b[0].innerHTML=a}}},focus:function(){this.anchor.focus()}});Ext.reg("uicheckbox",Ext.UI.Checkbox);
Ext.UI.CheckColumn=Ext.extend(Ext.grid.Column,{processEvent:function(a,b,c,d,e){if(a=="mousedown"&&c.getColumnModel().config[e].editable!=false){var g=c.store.getAt(d);g.set(this.dataIndex,!g.data[this.dataIndex]);c.fireEvent("cellclick",c,d,e,this.dataIndex,b);return false}else return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)},renderer:function(a){return String.format('<div class="{0} {1}"><div class="x-form-field {2}"></div></div>',this.uicls,a?this.uicls+"-checked":"",
this.editable==false?this.uicls+"-disabled":"")},setDisabled:function(a){this.editable=a?false:true},init:Ext.emptyFn});Ext.preg("checkcolumn",Ext.UI.CheckColumn);Ext.grid.CheckColumn=Ext.UI.CheckColumn;Ext.grid.Column.types.checkcolumn=Ext.UI.CheckColumn;
Ext.UI.PartialCheckbox=Ext.extend(Ext.UI.Checkbox,{onRender:function(){Ext.UI.PartialCheckbox.superclass.onRender.apply(this,arguments);this.partialCls=this.uicls+"-partial"},setValue:function(a){if(a==="partial"){this.wrap.addClass(this.partialCls)||this.wrap.addClass(this.partialCls);a=true}else this.wrap.removeClass(this.partialCls);Ext.UI.PartialCheckbox.superclass.setValue.apply(this,arguments);return this}});Ext.namespace("Ext.UI");
Ext.UI.ToolTip=Ext.extend(Ext.util.Observable,{uicls:"ui-tooltip",width:0,height:0,minWidth:150,minHeight:30,hidden:true,rendered:false,enabled:true,target:null,html:undefined,cls:undefined,style:undefined,destroyed:false,anchored:true,el:null,body:null,renderTo:null,scroller:null,animProcId:-1,CUR_OPACITY:0,MAX_OPACITY:100,MIN_OPACITY:0,autoheight:true,autowidth:true,MAX_HEIGHT:0.25,MAX_WIDTH:0.2,delay:0,constructor:function(a,b){this.attachPosition=Ext.UI.ToolTip.CENTER;Ext.UI.ToolTip.superclass.constructor.call(this);
Ext.apply(this,b);this.addEvents("beforeshow","show","beforehide","hide","beforerender","render","afterrender","resize");this.renderTo=Ext.get(this.renderTo||document.body);this.target=Ext.get(a);this.initComponent()},initComponent:function(){this.render()},initTarget:function(a){if(a=Ext.get(a)){a.on("mousemove",this.onTagerMouseMove,this);this.target&&this.target.un("mousemove",this.onTagerMouseMove,this);this.target=a}},resetTarget:function(){if(this.target){this.renderTo.un("mousemove",this.onparent_mousemove,
this);this.target.un("mousemove",this.onTagerMouseMove,this);this.target=null}},render:function(){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){this.rendered=true;this.onRender();if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}this.fireEvent("render",this);if(this.html){this.body.update(this.html);delete this.html}this.afterRender();if(this.hidden){this.el.addClass("x-hide-display");this.scroller&&this.scroller.hide(false)}this.fireEvent("afterrender",
this)}return this},destroy:function(){this.destroyEvents();this.scroller&&this.scroller.destroy();this.el.remove();this.destroyed=true},destroyEvents:function(){if(this.target){this.target.un("mousemove",this.onTagerMouseMove,this);this.target.un("touchstart",this.onTagerMouseMove,this)}this.renderTo.un("mousemove",this.onparent_mousemove,this);this.renderTo.un("touchstart",this.onparent_touchstart,this);this.km.disable()},onRender:function(){var a=this.uicls;this.el=this.renderTo.createChild({cls:a});
this.el.addClass("ui-shadow");this.anchor=this.el.createChild({cls:a+"-anchor"});this.body=this.el.createChild({cls:a+"-body"});if(this.target){this.target.on("mousemove",this.onTagerMouseMove,this);this.target.on("touchstart",this.onTagerMouseMove,this)}this.el.setStyle("z-index",3E4);this.km=new Ext.KeyMap(document);this.km.on(Ext.EventObject.ESC,this.onEscPressed,this);this.km.disable()},onTagerMouseMove:function(){clearInterval(this.deferId);if(this.hidden){if(this.delay==0)this.show(false);else this.deferId=
this.show.defer(this.delay,this,[false]);this.renderTo.on("mousemove",this.onparent_mousemove,this);this.renderTo.on("touchstart",this.onparent_touchstart,this);this.km.enable();Ext.EventManager.on(window,"orientationchange",this.onOrientationChange,this)}},afterRender:function(){this.setSize(this.width,this.height);if(this.scroller!==false){this.scroller=new Ext.UI.Scroller({dom:this.body.dom,type:"vertical",dynamic:false,margins:{top:2,right:3,bottom:2,left:2}});this.scroller.reg()}},addClass:function(a){if(this.el)this.el.addClass(a);
else this.cls=this.cls?this.cls+" "+a:a;return this},removeClass:function(a){if(this.el)this.el.removeClass(a);else if(this.cls)this.cls=this.cls.split(" ").remove(a).join(" ");return this},getEl:function(){return this.el},update:function(a){this.body.update(a)},show:function(a,b){this.deferId=null;if(this.fireEvent("beforeshow",this)!==false&&this.enabled){this.hidden=false;this.rendered&&this.onShow(a,b);this.fireEvent("show",this)}return this},onShow:function(a,b){if(a){var c=this.getOpacity(),
d=this;clearInterval(this.animProcId);this.animProcId=setInterval(function(){c+=25;d.setOpacity(c);if(c>=d.MAX_OPACITY){d.showScroller();clearInterval(d.animProcId)}},35)}else this.setOpacity(this.MAX_OPACITY);this.el.removeClass("x-hide-display");this.autowidth&&this.calcAutoWidth();this.autoheight&&this.calcAutoHeight();this.calcPosition(b);a||this.showScroller()},calcPosition:function(a){this.target=!this.target?a:this.target;var b=this.renderTo.getXY(),c=this.target.getXY();a=this.target.getWidth()/
2;var d=c[0]-b[0]+a,e=this.target.getHeight()/2;b=c[1]-b[1]+e;var g=c[1]-this.el.getHeight()>0?false:true;c=this.renderTo.getWidth()-c[0]>this.el.getWidth()?true:false;this.anchored?this.showAnchor(g,c):this.hideAnchor();d-=c?40:this.getWidth()-13;switch(this.attachPosition){case Ext.UI.ToolTip.BORDER:b-=g?e:this.getHeight()+33+e;break;case Ext.UI.ToolTip.RIGHT:d-=c?-a-50:this.el.getWidth()/2;b-=g?-e-6:this.el.getHeight()/2;break;default:b-=g?-e-6:this.el.getHeight()+16;break}this.setPosition(d,b)},
setPosition:function(a,b){this.el.applyStyles("left:"+a+"px; top:"+b+"px")},calcAutoHeight:function(){this.setHeight("auto");var a=this.body.dom.scrollHeight-this.body.getHeight();a=this.getHeight()+a;var b=document.body.clientHeight*this.MAX_HEIGHT;if(a>b)a=b;else if(a<this.minHeight)a=this.minHeight;this.setHeight(a)},calcAutoWidth:function(){var a=this.minWidth;this.setWidth(document.body.clientWidth*this.MAX_WIDTH);for(var b=this.body.dom.scrollHeight,c=this.getWidth()/2;c>5;){var d=this.getWidth();
this.setWidth(d-c);if(b!=this.body.dom.scrollHeight||d-c<a){this.setWidth(d);c/=2}}},showAnchor:function(a,b){var c=24,d=this.uicls;this.anchor.removeClass(d+"-anchor-top");this.anchor.removeClass(d+"-anchor-bottom");if(this.attachPosition==Ext.UI.ToolTip.RIGHT){this.anchor.addClass(d+"-anchor-left");this.anchor.applyStyles("top:"+this.getHeight()/2+"px;")}else{a?this.anchor.addClass(d+"-anchor-top"):this.anchor.addClass(d+"-anchor-bottom");b||(c=this.getWidth()-28);this.anchor.applyStyles("left:"+
c+"px")}},hideAnchor:function(){this.anchor.applyStyles("top:-10000px;left:-10000px")},showScroller:function(){this.scroller&&this.scroller.show(false)},hide:function(a){clearInterval(this.deferId);this.deferId=null;if(this.fireEvent("beforehide",this)!==false){this.hidden=true;this.rendered&&this.onHide(a);this.renderTo.un("mousemove",this.onparent_mousemove,this);this.renderTo.un("touchstart",this.onparent_touchstart,this);this.km.disable();Ext.EventManager.un(window,"orientationchange",this.onOrientationChange,
this);this.fireEvent("hide",this)}return this},onHide:function(a){if(a){var b=this.getOpacity(),c=this;clearInterval(this.animProcId);this.animProcId=setInterval(function(){b-=25;c.setOpacity(b);if(b<=c.MIN_OPACITY){clearInterval(c.animProcId);c.el.addClass("x-hide-display")}},25)}else{this.setOpacity(this.MAX_OPACITY);this.el.addClass("x-hide-display")}this.scroller&&this.scroller.hide(false)},setVisible:function(a){return this[a?"show":"hide"]()},setSize:function(a,b){if(Ext.isDefined(a)&&Ext.isDefined(this.minWidth)&&
a<this.minWidth)a=this.minWidth;if(Ext.isDefined(b)&&Ext.isDefined(this.minHeight)&&b<this.minHeight)b=this.minHeight;if(!this.rendered){this.width=a;this.height=b;return this}if(this.lastSize&&this.lastSize.width==a&&this.lastSize.height==b)return this;this.lastSize={width:a,height:b};if(Ext.isDefined(a)||Ext.isDefined(b)){if(Ext.isDefined(a)&&Ext.isDefined(b))this.body.setSize(a,b);else if(Ext.isDefined(a))this.body.setWidth(a);else Ext.isDefined(b)&&this.body.setHeight(b);this.onResize(a,b);this.fireEvent("resize",
this,a,b)}return this},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.body.getWidth()},getHeight:function(){return this.body.getHeight()},onResize:function(){if(this.rendered&&this.target){this.calcPosition();this.scroller&&this.scroller.resize()}},setOpacity:function(a){this.CUR_OPACITY=a>this.MAX_OPACITY?this.MAX_OPACITY:a;this.CUR_OPACITY=
a<this.MIN_OPACITY?this.MIN_OPACITY:this.CUR_OPACITY;if(!Ext.isIE6&&!Ext.isIE7&&!Ext.isIE8){this.el.dom.style.filter="alpha(opacity="+this.CUR_OPACITY+")";this.el.dom.style.opacity=this.CUR_OPACITY/100}},getOpacity:function(){this.setOpacity(this.CUR_OPACITY);return this.CUR_OPACITY},checkOut:function(a,b,c){var d=a.dom?a.dom.scrollWidth:0,e=a.dom?a.dom.scrollHeight:0;if(!d||!e)return true;var g=a.getXY();a=g[0];g=g[1];if(b<a||b>a+d||c<g-2||c>g+e+2)return true;return false},onparent_mousemove:function(a){if(!this.hidden||
this.deferId!=null){var b=a.xy[0];a=a.xy[1];if(this.checkOut(this.el,b,a)&&this.checkOut(this.target,b,a)){clearInterval(this.deferId);this.deferId=null;this.hide(false)}}},onparent_touchstart:function(a){if(!this.hidden||this.deferId!=null){var b=a.browserEvent.touches.item(0);a=b.clientX;b=b.clientY;if(this.checkOut(this.el,a,b)&&this.checkOut(this.target,a,b)){clearInterval(this.deferId);this.deferId=null;this.hide(false)}}},onEscPressed:function(){this.hide(false)},onOrientationChange:function(){this.hide(false)}});
Ext.UI.ToolTip.CENTER=0;Ext.UI.ToolTip.BORDER=1;Ext.UI.ToolTip.RIGHT=2;Ext.namespace("Ext.UI");
Ext.UI.TextField=Ext.extend(Ext.form.TextField,{uicls:"ui-textfield",width:undefined,ui_disabled:null,baseTooltipCfg:{enabled:false,width:200,html:"",attachPosition:Ext.UI.ToolTip.BORDER,delay:500},hideTooltip:function(a){this.wrap.addClass(this.uicls+"-focus");a.tooltip&&a.tooltip.hide()},onRender:function(a,b){this.addEvents("beforeclear");this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.on({specialkey:function(c,d){d.getKey()==d.ESC&&c.setValue(c.startValue)},focus:this.hideTooltip,
click:this.hideTooltip,blur:function(){this.wrap.removeClass(this.uicls+"-focus")},scope:this});Ext.UI.TextField.superclass.onRender.call(this,a,b);this.inputMaxLength&&this.el.set({maxlength:this.inputMaxLength});this.el.set({autocapitalize:"off"});this.wrap=this.el.wrap({cls:this.uicls});this.wrap.addClassOnOver(this.overCls);this.wrap.addClass(this.wrapCls);a=this.el.wrap({cls:this.uicls+"-mc"});a.wrap({cls:this.uicls+"-mr"}).wrap({cls:this.uicls+"-ml"});this.ui_disabled=a.createChild({tag:"div",
cls:this.fieldClass+"-disabled",style:"display:none;"});b="";if(this.readOnly){this.wrap.addClass(this.uicls+"-readonly");b=" "+this.uicls+"-hidden"}this.ui_clear=a.createChild({tag:"div",cls:this.uicls+"-clear"+b});this.ui_clear.on("click",function(c){if(this.fireEvent("beforeclear",this,c)){c=this.getValue();this.setValue("");c!=""&&this.fireEvent("change",this,"",c)}},this);this.positionEl=this.wrap;if(this.tooltipCfg){Ext.apply(this.baseTooltipCfg,this.tooltipCfg);this.tooltip=new Ext.UI.ToolTip(this.el,
this.baseTooltipCfg)}},onFocus:function(a){this.preFocus();this.focusClass&&this.el.addClass(this.focusClass);if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this,a)}},render:function(a,b){if(this.cls){this.wrapCls=this.cls;delete this.cls}Ext.UI.TextField.superclass.render.call(this,a,b)},onDisable:function(){var a=this.getActionEl().getWidth();a>0?this.ui_disabled.setWidth(a-10):this.ui_disabled.setWidth(this.width-10);this.getActionEl().setDisplayed(false);
this.ui_disabled.setDisplayed(true);a=Ext.util.Format.htmlEncode(this.getActionEl().getValue());if(this.inputType=="password"){a="";for(var b=0,c=this.getActionEl().getValue().length;b<c;++b)a+="&#x25CF;"}this.ui_disabled.update("<nobr>"+(a||"")+"</nobr>");this.wrap.addClass(this.disabledClass)},setReadOnly:function(a){if(this.rendered){this.el.dom.readOnly=a;if(this.readOnly!=a)if(a){this.wrap.addClass(this.uicls+"-readonly");this.ui_clear.addClass(this.uicls+"-hidden")}else{this.wrap.removeClass(this.uicls+
"-readonly");this.ui_clear.removeClass(this.uicls+"-hidden")}}this.readOnly=a},onEnable:function(){this.ui_disabled.setDisplayed(false);this.getActionEl().setDisplayed(true);this.wrap.removeClass(this.disabledClass)},setValue:function(a){var b=Ext.UI.TextField.superclass.setValue.call(this,a),c=Ext.util.Format.htmlEncode(a);if(this.rendered){if(this.inputType=="password"&&a){c="";for(var d=0;d<a.length;++d)c+="&#x25CF;"}this.ui_disabled.update("<nobr>"+(c||"")+"</nobr>")}return b},getVisibilityEl:function(){return this.hideParent?
this.container:this.wrap},setWidth:function(a){if(this.rendered){this.el.setWidth(a-10);this.ui_disabled.setWidth(a-10);this.wrap.setWidth(a)}else Ext.UI.TextField.superclass.setWidth.apply(this,arguments)}});Ext.reg("uitextfield",Ext.UI.TextField);
Ext.form.TextField.prototype.showValidateTooltip=function(a){var b=Ext.form.TextField._validate_tooltip;if(!b){var c=function(){Ext.form.TextField._validate_tooltip.hide()},d=function(e){e.stopPropagation()};b=Ext.form.TextField._validate_tooltip=new Ext.UI.ToolTip(this.wrap,{enabled:true,width:300,minHeight:0,html:"",attachPosition:Ext.UI.ToolTip.CENTER,delay:0});b.on("show",function(){Ext.EventManager.addListener(b.el,"mousedown",d);Ext.EventManager.addListener(Ext.getBody(),"mousedown",c);Ext.form.TextField._validate_tooltip.field.wrap.addClass("ui-field-invalid")});
b.on("hide",function(){Ext.EventManager.removeListener(b.el,"mousedown",d);Ext.EventManager.removeListener(Ext.getBody(),"mousedown",c);Ext.form.TextField._validate_tooltip.field.wrap.removeClass("ui-field-invalid")})}b.initTarget(this.wrap);b.destroyEvents(true);b.update(a);b.field=this;b.show()};Ext.form.TextField.prototype.hideValidateTooltip=function(){Ext.form.TextField._validate_tooltip&&Ext.form.TextField._validate_tooltip.hide()};Ext.namespace("Ext.UI");
Ext.UI.TextArea=Ext.extend(Ext.BoxComponent,{uicls:"ui-textarea",value:"",readonly:false,initComponent:function(){Ext.UI.TextArea.superclass.initComponent.call(this);this.addEvents("blur","focus")},onRender:function(a,b){Ext.UI.TextArea.superclass.onRender.call(this,a,b);a=Ext.id();b=Ext.id();var c=Ext.id();this.el.dom.innerHTML=String.format('<div class="{0}-tml"><div class="{0}-tmr"><div class="{0}-tmc" >&#160;</div></div></div>\t\t\t<div id="{1}" class="{0}-mc" ><textarea id="{2}" class="ui-textarea-txt" autocomplete="off" {5}>{4}</textarea><div id="{3}" class="{0}-clear"></div></div>            <div class="{0}-bml"><div class="{0}-bmr"><div class="{0}-bmc" >&#160;</div></div></div>',
this.uicls,a,b,c,Ext.util.Format.htmlEncode(this.value),this.readonly?'readonly="readonly"':"");this.edit=Ext.get(b);this.edit.on("focus",function(){this.fireEvent("focus",this)},this);this.edit.on("blur",function(){this.fireEvent("blur",this)},this);Ext.get(c).on("click",function(){this.setValue("")},this);this.height&&this.edit.setHeight(this.height-16);this.on("afterrender",function(d){if(Njl.isiOS||Njl.isAndroid)this.edit.setStyle("overflow","auto");else{this.scroller=new Ext.UI.Scroller({dom:d.edit,
type:"vertical",margins:{right:0,bottom:1,top:1}});this.scroller.reg()}},this)},setValue:function(a){if(this.edit)this.edit.dom.value=a;else this.value=a},getValue:function(){return this.edit?this.edit.dom.value:this.value},selectText:function(a,b){var c=this.getValue();if(c.length>0){a=a===undefined?0:a;b=b===undefined?c.length:b;var d=this.edit.dom;if(d.setSelectionRange)d.setSelectionRange(a,b);else if(d.createTextRange){d=d.createTextRange();d.moveStart("character",a);d.moveEnd("character",b-
c.length);d.select()}}this.edit.dom.focus()},blur:function(){this.edit.dom.blur()},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.edit.dom.readOnly=true;this.edit.on("focus",this.blur,this)},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.edit.dom.readOnly=false;this.edit.un("focus",this.blur,this)}});Ext.reg("uitextarea",Ext.UI.TextArea);Ext.namespace("Ext.UI");
Ext.UI.ComboBox=Ext.extend(Ext.form.ComboBox,{uicls:"ui-combobox",width:200,editable:false,ui_disabled:null,handleHeight:0,shadow:false,baseTooltipCfg:{enabled:false,width:200,html:"",attachPosition:Ext.UI.ToolTip.BORDER,delay:500},hideTooltip:function(a){a.tooltip&&a.tooltip.hide()},initComponent:function(){this.listWidth=this.width;Ext.UI.ComboBox.superclass.initComponent.call(this);this.triggerConfig={tag:"div",cls:"x-form-trigger "+this.triggerClass};this.on({afterrender:this.onAfterRender,collapse:this.onCollapse,
scope:this})},onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.listClass=this.uicls+"-list";var c=Ext.id(),d=Ext.id(),e=Ext.id();Ext.UI.ComboBox.superclass.onRender.call(this,a,b);this.wrap.dom.innerHTML='<table cellpadding=0 cellspacing=0 border=0 ><tr><td style="width:100%;vertical-align:top"><div class="'+this.uicls+'-ml"><div id="'+d+'" class="'+this.uicls+'-mc" ><div id="'+c+'" class="x-form-field-disabled" style="display:none;" ></div></div></div></td><td id="'+
e+'" style="height: 22px"></td></tr></table>';this.wrap.addClass(this.uicls);this.wrap.addClass(this.wrapCls);this.wrap.addClassOnOver(this.overCls);Ext.get(d).appendChild(this.el);Ext.get(e).appendChild(this.trigger);this.ui_disabled=Ext.get(c);if(this.tooltipCfg){Ext.apply(this.baseTooltipCfg,this.tooltipCfg);this.tooltip=new Ext.UI.ToolTip(this.el,this.baseTooltipCfg)}this.on({focus:this.hideTooltip,collapse:this.hideTooltip,expand:this.hideTooltip});if(this.cls){this.wrap.addClass(this.cls);this.el.removeClass(this.cls);
delete this.cls}if(this.style){this.wrap.applyStyles(this.style);delete this.style}this.overCls&&this.wrap.addClassOnOver(this.overCls)},onDisable:function(){this.el.setDisplayed(false);this.ui_disabled.setDisplayed(true);this.ui_disabled.update(this.el.getValue());this.wrap.addClass(this.disabledClass)},onEnable:function(){this.ui_disabled.setDisplayed(false);this.el.setDisplayed(true);this.wrap.removeClass(this.disabledClass)},initList:function(){Ext.UI.ComboBox.superclass.initList.call(this);this.list.createChild({cls:"x-combo-list-footer-ml"}).createChild({cls:"x-combo-list-footer-mr"}).createChild({cls:"x-combo-list-footer-mc"});
if(!this.scroller){this.scroller=new Ext.UI.Scroller({dom:this.innerList.dom,type:"vertical"});this.scroller.reg()}},onAfterRender:function(){this.wrap.setStyle("width",this.width?this.width+"px":"auto");this.el.setStyle("width",this.width?this.width-31+"px":"100%");this.ui_disabled.setStyle("width",this.width?this.width-31+"px":"100%")},onCollapse:function(a){a.scroller&&a.scroller.hide()},collapse:function(){if(this.isExpanded()){this.list.hide();Ext.getDoc().un("mousewheel",this.collapseIf,this);
Ext.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)}},collapseIf:function(a){var b=this.list.getRegion();!this.isDestroyed&&!a.within(this.wrap)&&!a.within(this.list)&&!(a.xy[0]>b.left&&a.xy[0]<b.right&&a.xy[1]>b.top&&a.xy[1]<b.bottom)&&this.collapse()},expand:function(){if(!(this.isExpanded()||!this.hasFocus)){if(this.title||this.pageSize){this.assetHeight=0;if(this.title)this.assetHeight+=this.header.getHeight();if(this.pageSize)this.assetHeight+=this.footer.getHeight()}if(this.bufferSize){this.doResize(this.bufferSize);
delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.setZIndex(this.getZIndex());this.list.show();Ext.isGecko2&&this.innerList.setOverflow("auto");this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent("expand",this)}},setValue:function(a){a=Ext.UI.ComboBox.superclass.setValue.call(this,a);this.rendered&&this.ui_disabled.update("<nobr>"+this.el.getValue()+"</nobr>");return a},getVisibilityEl:function(){return this.hideParent?
this.container:this.wrap},destroy:function(){if(this.scroller){this.scroller.destroy();delete this.scroller}}});Ext.reg("uicombo",Ext.UI.ComboBox);Ext.namespace("Ext.UI");
Ext.UI.Button=Ext.extend(Ext.Button,{uicls:"ui-button",acceptcls:"ui-button-accept",width:100,expandToText:false,ui_disabled:null,onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.clickClass=this.uicls+"-click";Ext.UI.Button.superclass.onRender.call(this,a,b);this.btn=this.el.child("button");this.edge=this.getWidth()-this.btn.getWidth();if(!this.edge||this.edge<14)this.edge=14;this.btn.setStyle("width",this.width-this.edge+"px");this.ui_disabled=
this.btn.up("").createChild({tag:"div",cls:"x-btn-text",style:"width:"+(this.width-this.edge)+"px;display:none;"});this.el.addClass(this.uicls);this.acceptbtn&&this.el.addClass(this.uicls+"-accept");this.btnEl.addClass("x-btn-text");this.el.removeClass("x-btn");this.btnEl.update("<span class="+(this.uicls+"-text")+">"+this.text+"</span>");if(this.expandToText&&this.btnEl.getComputedWidth()<this.btnEl.down("span").getTextWidth()+this.btnEl.down("span").getPadding("lr")){a=this.btnEl.down("span").getTextWidth()+
this.btnEl.down("span").getPadding("lr");this.setWidth(a+this.edge);this.btn.setStyle("width",a+"px");this.ui_disabled.setWidth(a)}this.setIconClass(this.iconCls);this.applyTextChanges()},onDisable:function(){this.btn.setDisplayed(false);this.ui_disabled.setDisplayed(true);this.ui_disabled.update("<span class="+(this.uicls+"-text")+">"+this.text+"</span>");this.addClass(this.disabledClass)},onEnable:function(){this.ui_disabled.setDisplayed(false);this.btn.setDisplayed(true);this.removeClass(this.disabledClass)},
onMouseDown:function(a){if(!this.disabled&&a.button===0){this.getClickEl(a).addClass(this.clickClass);this.doc.on("mouseup",this.onMouseUp,this)}},onMouseUp:function(a){if(a.button===0){this.getClickEl(a,true).removeClass(this.clickClass);this.doc.un("mouseup",this.onMouseUp,this)}},setText:function(){var a=Ext.UI.Button.superclass.setText.apply(this,arguments);this.applyTextChanges();return a},setIconClass:function(a){this.iconCls=a;var b;if(this.el){if(this.iconSelector&&(b=this.el.child(this.iconSelector))){this.btnEl.dom.className=
"";this.btnEl.addClass("x-btn-text");this.setButtonClass();b.dom.className="";b.addClass(a||"")}else{this.btnEl.dom.className="";this.btnEl.addClass(["x-btn-text",a||""])}this.setButtonClass()}return this},setButtonClass:function(){if(this.useSetClass){Ext.isEmpty(this.oldCls)||this.el.removeClass([this.oldCls,"x-btn-pressed"]);this.oldCls=this.iconCls&&!this.iconSelector||this.icon?this.text?"x-btn-text-icon":"x-btn-icon":"x-btn-noicon";this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":
null])}},onFocus:function(){this.disabled||this.el.addClass(this.uicls+"-focused")},onBlur:function(){this.el.removeClass(this.uicls+"-focused")},applyTextChanges:function(){if(this.btnEl){this.btnEl.set({title:this.text});this.expandToText||this.setEllipsis(this.btnEl)}if(this.ui_disabled){this.ui_disabled.set({title:this.text});this.expandToText||this.setEllipsis(this.ui_disabled)}},setEllipsis:function(a){a.addClass("x-ellipsis").setStyle("text-align","center");var b=a.down("span");b&&b.dom.offsetWidth>
a.dom.offsetWidth&&a.setStyle("text-align","left")}});Ext.reg("uibutton",Ext.UI.Button);Ext.namespace("Ext.UI");
Ext.UI.ButtonOnOff=Ext.extend(Ext.BoxComponent,{uicls:"ui-buttononoff-small",textOn:"ON",textOff:"OFF",ison:false,labelwidth:0,onRender:function(a,b){this.addEvents("valuechanged");this.addEvents("click","beforeclick");this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";Ext.UI.ButtonOnOff.superclass.onRender.call(this,a,b);this.tblBtnId=Ext.id();this.lBtnId=Ext.id();this.cBtnId=Ext.id();this.rBtnId=Ext.id();this.el.addClass(this.uicls);this.el.addClassOnOver(this.overCls);a=
this.el.createChild({cls:this.uicls+"-ml"});b=a.createChild({cls:this.uicls+"-mr"});var c=String.format('<table id="{5}" class="ui-buttononoff-tbl" cellpadding=0 cellspacing=0 border=0 ><tr><td style="padding: 0px 3px" id={3}>{0}</td><td class="{2}-btn" id={6}></td><td style="padding: 0px 3px" id={4}>{1}</td></tr></table>',this.textOn,this.textOff,this.uicls,this.lBtnId,this.rBtnId,this.tblBtnId,this.cBtnId);b.createChild({cls:this.uicls+"-mc",html:c});this.delta=Math.max(this.getBtnWidth(this.lBtnId,
this.textOn),this.getBtnWidth(this.rBtnId,this.textOff),this.labelwidth);Ext.get(this.lBtnId).setWidth(this.delta);Ext.get(this.rBtnId).setWidth(this.delta);c=Math.max(30,Ext.get(this.cBtnId).getComputedWidth());Ext.get(this.tblBtnId).setWidth(2*this.delta+c);this.el.setWidth(this.delta+c+a.getPadding("l")+b.getPadding("r"));this.on("afterrender",this.onRendered,this);this.mon(this.el,"click",this.onClick,this)},getBtnWidth:function(a,b){a=Ext.fly(a);return a.getPadding("l")+a.getTextWidth(b)+a.getPadding("r")},
onDisable:function(){this.addClass(this.disabledClass)},onEnable:function(){this.removeClass(this.disabledClass)},onClick:function(){if(!this.disabled)if(this.fireEvent("beforeclick",this)!=false){this.setValue(!this.isOff());this.fireEvent("click",this)}},onRendered:function(){this.ison||this.changeUI(!this.ison,false)},setValue:function(a){if(a!=this.isOff()){this.changeUI(a,true);this.fireEvent("valuechanged",this)}},changeUI:function(a,b){if(this.rendered){if(a!=this.isOff()){a=Ext.get(this.tblBtnId);
a.stopFx(true);var c=a.getLeft();this.delta*=-1;c+=this.delta;b!==false?a.shift({stopFx:true,duration:0,x:c,easing:"backOut"}):a.setX(c);this.ison=!this.isOff()}}else this.ison=!a},isOff:function(){return this.delta<0}});Ext.reg("uibuttononoff",Ext.UI.ButtonOnOff);Ext.namespace("Ext.UI");
Ext.UI.Radio=Ext.extend(Ext.form.Radio,{uicls:"ui-radio",defaultAutoCreate:{tag:"div"},constructor:function(){Ext.UI.Radio.superclass.constructor.apply(this,arguments);this.addEvents("beforechange")},onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.checkedClass=this.uicls+"-checked";Ext.UI.Radio.superclass.onRender.call(this,a,b);this.anchor=this.wrap.createChild({tag:"a",href:"#",cls:"x-el-focus",html:" "});this.anchor.on("focus",function(){this.el.dom.disabled||
this.wrap.addClass(this.uicls+"-focused")},this);this.anchor.on("blur",function(){this.wrap.removeClass(this.uicls+"-focused")},this);this.anchor.on("keydown",function(c){if(!this.el.dom.disabled&&(c.getKey()==c.ENTER||c.getKey()==c.SPACE)){c.stopEvent();this.setValue(true)}},this);(a=this.wrap.child("label"))&&a.on("click",this.onClick,this);this.wrap.addClass(this.uicls);this.wrap.addClass(this.wrapCls);this.checked&&this.wrap.addClass(this.checkedClass)},render:function(a,b){if(this.cls){this.wrapCls=
this.cls;delete this.cls}Ext.UI.Radio.superclass.render.call(this,a,b)},onClick:function(){this.disabled||this.focus();this.checked||this.disabled||this.fireEvent("beforechange",this,true)!==false&&this.getCheckEl().select("div[name="+this.name+"]").each(function(a){a.dom.id==this.id?this.setValue(true):Ext.getCmp(a.dom.id).setValue(false)},this)},focus:function(){this.anchor.focus()},onDisable:function(){this.el.addClass(this.disabledClass);this.el.dom.disabled=true},onEnable:function(){this.el.removeClass(this.disabledClass);
this.el.dom.disabled=false},getVisibilityEl:function(){return this.hideParent?this.container:this.wrap},setValue:function(a){var b;if(typeof a=="boolean"){Ext.form.Radio.superclass.setValue.call(this,a);if(this.rendered)a?this.wrap.addClass(this.checkedClass):this.wrap.removeClass(this.checkedClass)}else if(this.rendered){b=this.getCheckEl();(a=b.child("div[name="+this.name+"][value="+a+"]",true))&&Ext.getCmp(a.id).setValue(true)}if(this.rendered&&this.checked){b=b||this.getCheckEl();b=this.getCheckEl().select("div[name="+
this.name+"]");b.each(function(c){c.dom.id!=this.id&&Ext.getCmp(c.dom.id).setValue(false)},this)}return this}});Ext.reg("uiradio",Ext.UI.Radio);Ext.namespace("Ext.UI");
Ext.UI.LedButton=Ext.extend(Ext.UI.Button,{uicls:"ui-ledbutton",width:150,iconAlign:"right",state:"on",disableToggle:false,buttonClick:null,getState:function(){return this.state},setState:function(a){if(this.state!=a){this.ui_disabled.removeClass(this.uicls+"-"+this.state);this.el.removeClass(this.uicls+"-"+this.state);this.state=a;this.fireEvent("statechanged",this,a);this.el.addClass(this.uicls+"-"+this.state);this.ui_disabled.addClass(this.uicls+"-"+this.state)}},toggleState:function(){this.disableToggle||
(this.state=="on"?this.setState("off"):this.setState("on"))},initComponent:function(){Ext.UI.LedButton.superclass.initComponent.call(this);this.addEvents("statechanged");this.on({click:this.onButtonClick,scope:this})},onRender:function(a,b){Ext.UI.LedButton.superclass.onRender.call(this,a,b);this.btnEl.applyStyles("width:"+(this.width-15)+"px");this.ui_disabled.applyStyles("width:"+(this.width-15)+"px");this.el.addClass(this.uicls+"-"+this.state);this.ui_disabled.addClass(this.uicls+"-"+this.state)},
onButtonClick:function(a,b){this.buttonClick==null||b.browserEvent.offsetX>a.getEl().getWidth()?this.toggleState():this.buttonClick()}});Ext.reg("uiledbutton",Ext.UI.LedButton);Ext.namespace("Ext.UI");
Ext.UI.SegmentedControl=Ext.extend(Ext.Container,{uicls:"ui-segmentedcontrol",wrapCls:"ui-segmentedcontrol-wrap",autoHeight:true,disabledClass:"",initComponent:function(){this.control=new Ext.Container({style:"position: absolute;",listeners:{beforerender:function(a){if(a.items.first())a.items.first().left=true;if(a.items.last())a.items.last().right=true;var b=false;this.control.items.each(function(c){if(c.checked&&c.getXType()=="uisegmentedbutton")if(b)c.checked=false;else b=true});if(!b&&this.control.items.first()&&
this.control.items.first().getXType()=="uisegmentedbutton")this.control.items.first().checked=true;this.setDisabled(!!this.disabled)},afterrender:function(){this.control.el.addClass(this.uicls);this.updateWidth()},scope:this}});this.control.resetCheck=function(a){this.control.items.each(function(b){if(b.checked){b.checked=false;b.removeClass(b.checkedClass);this.fireEvent("buttonunchecked",b);return false}},this);this.fireEvent("buttonchecked",a)}.createDelegate(this);Ext.UI.SegmentedControl.superclass.initComponent.call(this,
arguments);Ext.UI.SegmentedControl.superclass.removeAll.call(this)},updateWidth:function(){if(this.control.rendered){var a=0;this.control.items.each(function(b){a+=b.width});if(!this.fixedWidth)if(this.width)this.fixedWidth=this.width;this.control.setWidth(a);Ext.UI.SegmentedControl.superclass.setWidth.call(this,this.fixedWidth?Math.min(this.fixedWidth,a):a);if(this.fixedWidth&&this.fixedWidth<a){if(this.scrolIndex>-1){this.wrapcontrol.setWidth(this.fixedWidth-46);this.scroll.show()}else this.wrapcontrol.setWidth(this.fixedWidth-
23);-(this.control.el.getLeft(true)-this.control.items.items[this.scrolIndex+1].el.getWidth())<a?this.scrolr.show():this.wrapcontrol.setWidth(this.fixedWidth-23)}else{this.scroll.hide();this.scrolr.hide();this.wrapcontrol.setWidth(a);this.scrolIndex=-1;this.control.el.setLeft(0)}}},onRender:function(a,b){this.items.add(this.scroll=new Ext.BoxComponent({cls:"ui-segmentedcontrol-scroll",hidden:true,listeners:{afterrender:function(c){c.el.on("click",this.onLScrollClick,this)},scope:this}}));this.wrapcontrol=
new Ext.Container({cls:this.wrapCls,items:[this.control]});this.items.add(this.wrapcontrol);this.scrolIndex=-1;this.items.add(this.scrolr=new Ext.BoxComponent({cls:"ui-segmentedcontrol-scrolr",hidden:true,listeners:{afterrender:function(c){c.el.on("click",this.onRScrollClick,this)},scope:this}}));this.addEvents("buttonchecked","buttonunchecked");Ext.UI.SegmentedControl.superclass.onRender.call(this,a,b)},getPressedButton:function(){for(var a=0;a<this.control.items.length;a++)if(this.control.items.itemAt(a).checked)return this.control.items.itemAt(a)},
setPressedButton:function(a,b){this.control.items.length>a&&a>=0&&this.control.items.itemAt(a).press(b)},itemAt:function(a){if(a<this.control.items.length&&this.control.items.length>0)return this.control.items.itemAt(a);return null},count:function(){return this.control.items.length},add:function(a){if(this.control.rendered){if(this.control.items.length==0)a.left=true;else{var b=this.control.items.last();b.mr.removeClass(b.uicls+"-rmr");b.mr.addClass(b.uicls+"-mr")}a.right=true}this.control.add(a);
this.updateWidth()},remove:function(a){if(a){this.control.remove(a);if(this.control.rendered){a=this.control.items.last();a.mr.removeClass(a.uicls+"-mr");a.mr.addClass(a.uicls+"-rmr");a.right=true}this.updateWidth()}},removeAll:function(){this.scroll.hide();this.scrolr.hide();if(this.control){this.control.el.setLeft(0);this.control.removeAll()}this.scrolIndex=-1;this.updateWidth()},setWidth:function(a){this.fixedWidth=a;this.updateWidth()},setDisabled:function(a){for(var b=0;b<this.control.items.length;b++)this.control.items.itemAt(b).setDisabled(a)},
onLScrollClick:function(){this.scrolr.show();this.wrapcontrol.setWidth(this.fixedWidth-46);if(--this.scrolIndex==-1){this.scroll.hide();this.wrapcontrol.setWidth(this.fixedWidth-23)}this.control.el.setLeft(this.control.el.getLeft(true)+this.control.items.items[this.scrolIndex+1].el.getWidth())},onRScrollClick:function(){this.scroll.show();this.wrapcontrol.setWidth(this.fixedWidth-46);this.control.el.setLeft(this.control.el.getLeft(true)-this.control.items.items[++this.scrolIndex].el.getWidth());if(this.control.el.getLeft(true)+
24<this.fixedWidth-this.control.getWidth()||-(this.control.el.getLeft(true)-this.control.items.items[this.scrolIndex+1].el.getWidth())>=this.control.getWidth()){this.scrolr.hide();this.wrapcontrol.setWidth(this.fixedWidth-23)}},onParentResize:function(a,b){this.setWidth(b)},doResize:function(){if(this.rendered){var a=Ext.get(this.el.findParentNode(""));a&&this.setWidth(a.getWidth()-a.getPadding("l")-a.getPadding("r"))}}});Ext.reg("uisegmentedcontrol",Ext.UI.SegmentedControl);
Ext.UI.SegmentedButton=Ext.extend(Ext.BoxComponent,{uicls:"ui-segmentedbutton",text:"",image:"",checked:false,width:100,imagetype:undefined,initComponent:function(){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";Ext.UI.SegmentedButton.superclass.initComponent.call(this);this.checkedClass=this.uicls+"-checked";this.addEvents("click","afterclick");this.click&&this.on("click",this.click,this.scope)},press:function(a){this.ownerCt.resetCheck(this);this.checked=true;this.addClass(this.checkedClass);
a||this.fireEvent("afterclick",this)},onClick:function(a){a.stopEvent();!this.checked&&!this.disabled&&this.fireEvent("click",this,a)&&this.press()},onRender:function(a,b){Ext.UI.SegmentedButton.superclass.onRender.call(this,a,b);this.el.un("click",this.onClick,this);this.checked&&this.addClass(this.checkedClass);a=this.left?this.el.createChild({cls:this.uicls+"-lml"}):this.el.createChild({cls:this.uicls+"-ml"});this.mr=a=this.right?a.createChild({cls:this.uicls+"-rmr"}):a.createChild({cls:this.uicls+
"-mr"});a=this.elTxt=a.createChild({cls:this.uicls+"-mc"}).createChild({html:this.text,cls:this.uicls+"-txt x-ellipsis"});a.setWidth(this.width-12);this.imagetype&&a.addClass(this.uicls+"-"+this.imagetype);this.mon(this.el,"click",this.onClick,this);this.el.addClass(this.uicls)},onDisable:function(){this.addClass(this.disabledClass)},onEnable:function(){this.removeClass(this.disabledClass)},setText:function(a){this.elTxt.update(a)}});Ext.reg("uisegmentedbutton",Ext.UI.SegmentedButton);
Ext.UI.SegmentedChkButton=Ext.extend(Ext.UI.SegmentedButton,{press:function(){(this.checked=!this.checked)?this.addClass(this.checkedClass):this.removeClass(this.checkedClass);this.fireEvent("afterclick",this)},afterRender:function(){Ext.UI.SegmentedChkButton.superclass.afterRender.apply(this,arguments);this.addClass("ui-segmentedbutton-chk")},onClick:function(a){a.stopEvent();this.disabled||this.fireEvent("click",this,a)&&this.press()}});Ext.reg("uisegmentedchkbutton",Ext.UI.SegmentedChkButton);
Ext.UI.SegmentedLedControl=Ext.extend(Ext.UI.SegmentedControl,{wrapCls:"ui-segmentedcontrol-led-wrap",afterRender:function(){Ext.UI.SegmentedLedControl.superclass.afterRender.apply(this,arguments);this.addClass("ui-segmentedcontrol-led")}});
Ext.UI.SegmentedLedButton=Ext.extend(Ext.UI.SegmentedButton,{initComponent:function(){Ext.UI.SegmentedLedButton.superclass.initComponent.apply(this,arguments);this.overCls="ui-segmentedbutton-led-over";this.disabledClass="ui-segmentedbutton-led-disabled";this.checkedClass="ui-segmentedbutton-led-checked"},afterRender:function(){Ext.UI.SegmentedLedButton.superclass.afterRender.apply(this,arguments);this.addClass("ui-segmentedbutton-led")},setEnabledLed:function(a){(this.enabledLed=a)?this.addClass("ui-segmentedbutton-led-on"):
this.removeClass("ui-segmentedbutton-led-on")}});Ext.reg("uisegmentedledbutton",Ext.UI.SegmentedLedButton);Ext.namespace("Ext.UI");
Ext.UI.Menu=Ext.extend(Ext.menu.Menu,{uicls:"ui-menu",shadow:false,autoWidth:true,initComponent:function(){Ext.UI.Menu.superclass.initComponent.call(this);this.on("show",this.onAfterShow,this);this.on("afterrender",this.onAfterRender,this)},onAfterShow:function(){for(var a=this.el.dom.getElementsByTagName("a"),b=0;b<a.length;b++)a[b].disabled=false},onAfterRender:function(){this.el.addClass(this.uicls);var a=this.el.child(".x-menu-list");a?a.addClass(" ui-shadow"):this.el.addClass(" ui-shadow");if(this.enableScrolling){this.scroller=
new Ext.UI.Scroller({dom:this.ul.dom,cls:"x-ui-menu-scroller",type:"vertical",showPer:0.6,margins:{top:0,right:0,bottom:0,left:0}});this.scroller.reg();this.on("hide",function(){this.scroller.hide()},this);this.on("beforehide",function(){return!this.scroller.scrolling},this)}},showAt:function(a,b){if(this.fireEvent("beforeshow",this)!==false){this.parentMenu=b;this.el||this.render();if(this.enableScrolling){this.el.setXY(a);this.constrainScroll(a[1]);a=[this.el.adjustForConstraints(a)[0],a[1]]}else a=
this.el.adjustForConstraints(a);this.el.setXY(a);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE){this.fireEvent("autosize",this);Ext.isIE8||this.el.repaint()}this.hidden=false;this.focus();this.fireEvent("show",this)}},destroy:function(){Ext.UI.Menu.superclass.destroy.apply(this,arguments);this.scroller&&this.scroller.destroy()}});Ext.reg("uimenu",Ext.UI.Menu);Ext.namespace("Ext.UI");
Ext.UI.Window=Njl.inherit(Njl.CLSIDS.UI.Window,Njl.JSCom.CComObjectRoot,Ext.Window,ISyncWindowResizeEvent,{uicls:"ui-window",closable:true,shadow:false,selectable:true,constrain:true,autoWidth:false,cancelbtn:null,closeAction:"hide",keyHandling:true,shim:false,title:"&nbsp;",constructor:function(a){this.acceptbtns=[];Ext.UI.Window.superclass.constructor.call(this,a);this.selectable||this.addClass("x-unselectable");this.keys=[{key:[Ext.EventObject.ENTER],scope:this,handler:this.onkeyenter},{key:[Ext.EventObject.ESC],
scope:this,handler:this.onkeycancel}];this.autoWidth&&this.on("beforeshow",this.onFirstShow,this)},onFirstShow:function(){this.body.dom.style.width="0px";var a=this.body.dom.scrollWidth+this.body.getComputedWidth();if(!this.width||a>this.width)this.setWidth(a-30+2);this.body.dom.style.width="auto";this.center();this.un("beforeshow",this.onFirstShow,this)},adjustSize:function(a,b){if(this.autoWidth){if(this.autoHeight)b="auto";return{width:a,height:b}}else return Ext.UI.Window.superclass.adjustSize.apply(this,
arguments)},fillBackGroundIE8:function(a,b,c,d,e,g,j,h){if(this.modal){if(Ext.isEmpty(this.raf))this.raf=Raphael(this.mask.id);this.raf.setSize(j,h);this.raf.clear();return this.raf.set(this.raf.ellipse(a,b,c,d).attr({fill:String.format("r({0}, {1})#ffffff-#010202",e>0?e:0,g>0?g:0),stroke:"none",opacity:0}))}},prepBk:function(a){if(Njl.isIE)a.innerHTML=document.shadowMask.toString();else{var b=document.shadowMask.xmlDocument.documentElement.cloneNode(true);Ext.isEmpty(a.firstChild)?a.appendChild(b):
a.replaceChild(b,a.firstChild)}},removeSVG:function(a){a&&a.removeChild(a.firstChild)},fillBackGround:function(a,b,c,d,e){if(this.mask&&this.mask.dom){document.getElementById(this.mask.id).style.display="none";var g=document.getElementById("svg_shadow");if(g){g.setAttribute("width",d);g.setAttribute("height",e);g=document.getElementById("shadow_gradient");g.setAttribute("cx",a);g.setAttribute("cy",b);g.setAttribute("r",c);a=document.getElementById("shadow_rect");a.setAttribute("width",d);a.setAttribute("height",
e)}document.getElementById(this.mask.id).style.display="block"}},drowBackGround:function(a){var b=Ext.lib.Dom.getViewWidth(true),c=Ext.lib.Dom.getViewHeight(true),d=a.left+(a.right-a.left)/2;a=a.top+(a.bottom-a.top)/2;var e=b>c?b:c;e=e/2+Math.abs(e/2-(b>c?d:a));this.fillBackGround(d,a,e,b,c)},centerTo:function(a){a=this.el.getAlignToXY(a,"c-c");this.setPagePosition(a[0],a[1]);return this},ISyncWindowResizeEvent:{OnResize:function(){this.drowBackGround(this.el.dom.getClientRects()[0]);return S_OK}},
initDraggable:function(){this.dd=new Ext.Window.DDExt(this)},onkeyenter:function(a,b){if(this.keyHandling)if(!b.target||(b.target.tagName||"").toLowerCase()!="textarea"){var c;for(a=0;a<this.acceptbtns.length;++a){var d=this.acceptbtns[a];if(d&&!d.disabled&&d.isVisible()){c=d;break}}if(c)if(c.handler)c.handler.apply(c.scope?c.scope:c,[c,b]);else c.fireEvent&&c.fireEvent("click",c,b)}},onkeycancel:function(a){if(this.keyHandling)if(this.cancelbtn&&!this.cancelbtn.disabled)if(this.cancelbtn.handler)this.cancelbtn.handler.apply(this.cancelbtn.scope?
this.cancelbtn.scope:this.cancelbtn,[this.cancelbtn,a]);else this.cancelbtn.fireEvent&&this.cancelbtn.fireEvent("click",this.cancelbtn,a);else!this.cancelbtn&&this[this.closeAction]&&this[this.closeAction]()},onRender:function(a,b){Ext.UI.Window.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls);this.el.addClass("ui-shadow");this.resizable&&this.el.addClass(this.uicls+"-resizable");if(!this.selectable){this.el.dom.setAttribute("onselectstart","return false;");this.el.dom.setAttribute("unselectable",
"on");if(!Ext.isEmpty(this.mask)){this.mask.dom.setAttribute("onselectstart","return false;");this.mask.dom.setAttribute("unselectable","on")}}this.header.addClass("x-ellipsis");this.header.on("touchstart",function(c){c=c.browserEvent.touches.item(0);this.touchY=c.clientY-this.y;this.touchX=c.clientX-this.x;return false},this);this.header.on("touchmove",function(c){c.preventDefault();c.stopEvent();c=c.browserEvent.touches.item(0);this.setPosition(c.clientX-this.touchX,c.clientY-this.touchY);this.drowBackGround(this.el.dom.getClientRects()[0]);
return false},this);for(a=0;this.buttons&&a<this.buttons.length;++a){this.buttons[a].acceptbtn&&this.acceptbtns.push(this.buttons[a]);if(this.buttons[a].cancelbtn)this.cancelbtn=this.buttons[a]}},ghost:function(a){var b=this.uicls+"-ghost";a=Ext.isDefined(a)?b+" "+a:b;a=this.createGhost(a);a.last().setHeight(a.last().getHeight()-15-(Ext.isIE?4:0));a.createChild({tag:"div",cls:b+"-bl"}).createChild({tag:"div",cls:b+"-br"}).createChild({tag:"div",cls:b+"-bc"});b=this.getBox(true);a.setLeftTop(b.x,b.y);
a.setWidth(b.width);this.el.hide();return this.activeGhost=a},beforeShow:function(){Ext.UI.Window.superclass.beforeShow.call(this);if(this.modal){Ext.getBody().addClass("x-body-masked");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.prepBk(document.getElementById(this.mask.id));this.drowBackGround(this.el.dom.getClientRects()[0]);this.mask.show();CComQIPtr(CoCreateInstance(Njl.CLSIDS.UI.SyncResizeEventer),"INotifySink").Advise(this)}},afterShow:function(){Ext.UI.Window.superclass.afterShow.call(this);
this.modal&&FocusManager.pushActive(this.el)},hide:function(){Ext.dd.DragDropMgr.stopDrag();Ext.UI.Window.superclass.hide.apply(this,arguments)},afterHide:function(){Ext.UI.Window.superclass.afterHide.call(this);CComQIPtr(CoCreateInstance(Njl.CLSIDS.UI.SyncResizeEventer),"INotifySink").Unadvise(this);this.mask&&this.removeSVG(document.getElementById(this.mask.id));this.modal&&FocusManager.popActive()}});
Ext.Window.DDExt=Ext.extend(Ext.Window.DD,{constructor:function(a){Ext.Window.DDExt.superclass.constructor.call(this,a)},onDrag:function(a){Ext.Window.DDExt.superclass.onDrag.call(this,a);this.win.drowBackGround(this.win.activeGhost.dom.getClientRects()[0])}});Ext.UI.Window.ShadowSVG=function(){if(!Njl.isDefined(document.shadowMask))document.shadowMask=new Njl.Xml.document('<svg version="1.1" id="svg_shadow" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="0" height="0"  xml:space="preserve"><defs><radialGradient id="shadow_gradient" cx="0" cy="0" r="0" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#020202;stop-opacity: 0.1"></stop><stop offset="1" style="stop-color:#020202;stop-opacity: 0.5"></stop></radialGradient></defs><rect  id="shadow_rect" x="0" y="0" opacity="0.8" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="0" height="0"></rect></svg>')}();
Ext.reg("uiwindow",Ext.UI.Window);Ext.namespace("Ext.UI");
Ext.UI.SpinnerField=Ext.extend(Ext.form.SpinnerField,{boxLabel:null,uicls:"ui-spinnerfield",disabledClass:"ui-spinnerfield-disabled",fnFormat:function(a){return a},initEvents:function(){Ext.UI.SpinnerField.superclass.initEvents.call(this);this.on("afterrender",function(){var a=Ext.id(),b=Ext.id(),c=Ext.id();if(this.cls){this.getEl().removeClass(this.cls);this.wrap.addClass(this.cls)}this.wrap.addClassOnOver(this.uicls+"-over");this.wrap.setStyle("width",this.width?this.width+"px":"auto");this.el.setStyle("width",
this.width?this.width-24+"px":"100%");this.wrap.addClass(this.uicls);this.wrap.dom.innerHTML='<div class="'+this.uicls+'-ml"><div class="'+this.uicls+'-mr"><div class="'+this.uicls+'-mc" ><table cellpadding=0 cellspacing=0 border=0 style="table-layout: fixed;"><tr><td id="'+b+'" style="width:100%;margin: 0;vertical-align: top;"><div id="'+a+'" class="ui-spinnerfield-dis" style="display:none;" ></div></td><td id="'+c+'" class="ui-spinnerfield-trigtd"></td></tr></table></div></div></div>';Ext.get(b).appendChild(this.el);
Ext.get(c).appendChild(this.spinner.trigger);this.ui_disabled=Ext.get(a);this.setRawValue(this.getValue());this.disabled&&this.ui_disabled.setDisplayed(true)},this);this.el.on("focus",function(){this.setValue(this.getValue())},this);this.on("valid",function(){this.setRawValue(this.getValue())},this);this.on("invalid",function(){var a=this.getValue();if(a>this.maxValue)this.setRawValue(this.maxValue);else a<this.minValue?this.setRawValue(this.minValue):this.setRawValue(this.value)},this)},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},
setRawValue:function(a){a=this.rendered?(this.el.dom.value=Ext.isEmpty(a)?"":this.fnFormat(a)+(this.boxLabel?" "+this.boxLabel:"")):"";this.ui_disabled&&this.ui_disabled.update(a);return a},onDisable:function(){this.el.setDisplayed(false);if(this.ui_disabled!=undefined){this.ui_disabled.setDisplayed(true);this.ui_disabled.update(this.el.getValue())}this.spinner.disabled=true},onEnable:function(){this.ui_disabled.setDisplayed(false);this.el.setDisplayed(true);this.spinner.disabled=false}});
Ext.reg("uispinnerfield",Ext.UI.SpinnerField);Ext.namespace("Ext.UI");
Ext.UI.FileUploadField=Ext.extend(Ext.BoxComponent,{buttonText:"Browse...",buttonCls:"ui-button-style1",inputCls:"ui-textfield-style1",initComponent:function(){Ext.UI.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(a,b){Ext.UI.FileUploadField.superclass.onRender.call(this,a,b);tfid=Ext.id();btnid=Ext.id();fileid=Ext.id();this.el.dom.innerHTML='<table cellpadding=0 cellspacing=0 border=0 class="uifile"><tr><td id="'+tfid+'" style="vertical-align:top;width:100%"></td><td id="'+
btnid+'" style="vertical-align:top;"><input id="'+fileid+'" class="uifile-file" type=file size=1></td></tr></table>';this.textfield=new Ext.UI.TextField({cls:"uifile-textfield",width:200,renderTo:tfid});this.button=new Ext.UI.Button({cls:"uifile-btn",text:this.buttonText,renderTo:btnid});this.fileInput=Ext.get(fileid);this.fileInput.setWidth(this.button.getWidth());this.fileInput.setHeight(this.button.getHeight());this.bindListeners()},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.getEl().addClass(this.button.overCls)},
mouseleave:function(){this.button.getEl().removeClass(this.button.overCls)},mousedown:function(){this.button.getEl().addClass(this.button.clickClass)},mouseup:function(){this.button.getEl().removeClass([this.button.overCls,this.button.clickClass])},change:function(){var a=this.fileInput.dom.value,b=String(a).lastIndexOf("\\");a=b!=-1?a.substr(b+1,a.length):a;this.textfield.setValue(a);this.fireEvent("fileselected",this,a)}})},setValue:function(a){this.textfield.setValue(a)},getValue:function(){this.textfield.getValue()},
onDestroy:function(){Ext.UI.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.textfield,this.button,this.wrap)},onDisable:function(){this.doDisable(true)},onEnable:function(){this.doDisable(false)},doDisable:function(a){this.fileInput.dom.disabled=a;this.textfield.setDisabled(a);this.button.setDisabled(a)}});Ext.reg("uifileuploadfield",Ext.UI.FileUploadField);Ext.namespace("Ext.UI");
Ext.UI.GridPanel=Ext.extend(Ext.grid.GridPanel,{uicls:"ui-gridview",autoHeight:false,enableHdMenu:false,trackMouseOver:false,disableScroll:false,initComponent:function(){Ext.UI.GridPanel.superclass.initComponent.call(this);this.on("afterrender",function(a){this.disableScroll||ScrollManager.reg(a.el.child(".x-grid3-scroller").dom)},this)},onRender:function(a,b){Ext.UI.GridPanel.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls)},getView:function(){if(!this.view)this.view=new Ext.UI.GridView(this.viewConfig);
return this.view},getVisibilityEl:function(){return this.hideParent?this.container:this.wrap}});Ext.reg("uigridpanel",Ext.UI.GridPanel);Ext.UI.EditorGridPanel=Ext.extend(Ext.grid.EditorGridPanel,{uicls:"ui-gridview",autoHeight:true,onRender:function(a,b){Ext.UI.EditorGridPanel.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls)},getView:function(){if(!this.view)this.view=new Ext.UI.GridView(this.viewConfig);return this.view}});Ext.reg("uieditorgridpanel",Ext.UI.EditorGridPanel);Ext.namespace("Ext.UI");
Ext.grid.GridView.UIColumnDragZone=Ext.extend(Ext.grid.GridView.ColumnDragZone,{afterRepair:function(){this.dragging=false}});
Ext.UI.GridView=Ext.extend(Ext.grid.GridView,{markDirty:false,scrollOffset:0,forceFit:true,getRowClass:function(a,b){if(b%2==1)return"x-grid3-row-odd";return"x-grid3-row-even"},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(a.enableColumnResize!==false)this.splitZone=
new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom);if(a.enableColumnMove){this.columnDrag=new Ext.grid.GridView.UIColumnDragZone(a,this.innerHd);this.columnDrag.getProxy().ghost.addClass(this.grid.uicls);this.columnDrag.getProxy().el.shadow=false;this.columnDrag.getProxy().animRepair=false;this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}if(a.enableHdMenu!==false){this.hmenu=new Ext.UI.Menu({id:a.id+"-hctx"});this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},
{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(a.enableColumnHide!==false){this.colMenu=new Ext.UI.Menu({id:a.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add("-",{itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}a.trackMouseOver&&this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut});
if(a.enableDragDrop||a.enableDrag)this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||"GridDD"});this.updateHeaderSortState()},beforeColMenuShow:function(){var a=this.cm,b=a.getColumnCount(),c=this.colMenu,d;c.removeAll();for(d=0;d<b;d++)a.config[d].hideable!==false&&c.add(new Ext.menu.CheckItem({text:a.getColumnHeader(d),itemId:"col-"+a.getColumnId(d),checked:!a.isHidden(d),disabled:a.config[d].hideable===false,hideOnClick:false}))},getTotalWidth:function(){return Math.max(this.cm.getTotalWidth(),
this.getGridInnerWidth())+"px"}});Ext.reg("uigridview",Ext.UI.GridView);Ext.namespace("Ext.UI");
Ext.UI.ProgressIndicator=Ext.extend(Ext.ProgressBar,{uicls:"ui-progressindicator",undetermine:false,onRender:function(a,b){Ext.UI.ProgressIndicator.superclass.onRender.call(this,a,b);this.progressBar.setStyle("height","");this.el.down("div").wrap({cls:this.uicls+"-mr"}).wrap({cls:this.uicls+"-ml"});this.el.addClass(this.uicls);this.undetermine&&this.progressBar.addClass("x-progressindicator-barber-pole")},updateProgress:function(a,b){this.value=a||0;b&&this.updateText(b);if(this.rendered&&!this.isDestroyed){this.width=
this.getWidth()||this.width;var c=Math.floor(a*(this.width-6));this.progressBar.setStyle("width",c+"px");this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(c)}this.fireEvent("update",this,a,b);return this}});Ext.reg("uiprogressindicator",Ext.UI.ProgressIndicator);Ext.namespace("Ext.UI");
Ext.UI.RoundButton=Ext.extend(Ext.BoxComponent,{uicls:"ui-roundbutton",iconCls:"",title:"",disabled:false,initComponent:function(){Ext.UI.RoundButton.superclass.initComponent.call(this);this.addEvents("click")},onRender:function(a,b){Ext.UI.RoundButton.superclass.onRender.call(this,a,b);a={cls:this.uicls+"-icon "+this.iconCls};this.title&&(a.title=this.title);a=this.el.createChild(a);a.setWidth(this.width);a.setHeight(this.height);this.el.addClass(this.uicls);this.el.on("click",this.onClick,this)},
onClick:function(a){this.disabled||this.fireEvent("click",this,a)}});Ext.reg("uiroundbutton",Ext.UI.RoundButton);Ext.namespace("Ext.UI");
Ext.UI.LoadMask=Njl.inherit(Njl.JSCom.CComObjectRoot,ISyncWindowResizeEvent,{constructor:function(a,b){this.isInitialized=false;this.el=Ext.isEmpty(a)?Ext.get(document.body):Ext.get(a);this.config=Ext.isDefined(b)?b:{};this.config=Ext.apply({intervalId:undefined,delay:Ext.UI.LoadMask.DELAY,msgCls:"ui-mask-style1",msg:"",spinner:null,hidden:true,type:0,background:true,frame:true},this.config);Ext.UI.LoadMask.superclass.constructor.call(this,this.config);if(!(Ext.UI.LoadMask.DISABLE||Ext.UI.LoadMask.DISABLELARGE&&
b.type==Ext.UI.LoadMask.LARGE||Ext.UI.LoadMask.DISABLEMIDDLE&&b.type==Ext.UI.LoadMask.MIDDLE||Ext.UI.LoadMask.DISABLESMALL&&b.type==Ext.UI.LoadMask.SMALL)){(a=CoCreateInstance(Njl.CLSIDS.UI.SyncResizeEventer))&&CComQIPtr(a,"INotifySink").Advise(this);this.addEvents("beforeload","resize")}},initComponent:function(){if(!this.isInitialized){this.el=Ext.get(this.el);if(this.store){this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad});this.removeMask=Ext.value(this.removeMask,
false)}else{var a=this.el.getUpdater();a.showLoadIndicator=false;a.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad});this.removeMask=Ext.value(this.removeMask,true)}this.isInitialized=true}},destroy:function(){if(this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoad,this)}else{var a=this.el.getUpdater();a.un("beforeupdate",this.onBeforeLoad,this);a.un("update",this.onLoad,this);
a.un("failure",this.onLoad,this)}},fillBackGroundIE8:function(a,b,c,d,e,g,j,h){this.raf&&this.raf.clear();this.raf=Raphael(this.mask.id);this.raf.setSize(j,h);return this.raf.set(this.raf.ellipse(a,b,c,d).attr({fill:String.format("r({0}, {1})#ffffff-#010202",e>0?e:0,g>0?g:0),stroke:"none",opacity:0}))},prepBk:function(a){this.shadowId=Ext.id();this.gradientId=Ext.id();this.rectId=Ext.id();var b=new Njl.Xml.document('<svg version="1.1" id="'+this.shadowId+'" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="0" height="0"  xml:space="preserve"><defs><radialGradient id="'+
this.gradientId+'" cx="0" cy="0" r="0" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#020202;stop-opacity: 0.1"></stop><stop offset="1" style="stop-color:#020202;stop-opacity: 0.5"></stop></radialGradient></defs><rect  id="'+this.rectId+'" x="0" y="0" fill-rule="" clip-ruleevenodd="evenodd" opacity="0.8" fill="#FFFFFF" width="0" height="0"></rect></svg>');if(Njl.isIE)a.innerHTML=b.toString();else{b=b.xmlDocument.documentElement.cloneNode(true);Ext.isEmpty(a.firstChild)?a.appendChild(b):
a.replaceChild(b,a.firstChild)}},fillBackGround:function(a,b,c,d,e){if(this.mask&&this.mask.dom){this.mask.dom.style.display="none";var g=document.getElementById(this.shadowId);if(g){g.setAttribute("width",d);g.setAttribute("height",e);g=document.getElementById(this.gradientId);g.setAttribute("cx",a);g.setAttribute("cy",b);g.setAttribute("r",c);a=document.getElementById(this.rectId);a.setAttribute("width",d);a.setAttribute("height",e)}this.mask.dom.style.display="block"}},drowBackGround:function(a){if(this.config.background){var b=
this.el.getWidth();if(b==0)b=Ext.lib.Dom.getViewWidth(true);var c=this.el.dom.scrollHeight;if(c==0)c=Ext.lib.Dom.getViewHeight(true);var d=a.offsetWidth/2;a=a.offsetHeight/2;var e=b>c?b:c;e=e/2+Math.abs(e/2-(b>c?d:a));this.fillBackGround(d,a,e,b,c);this.mask&&this.mask.on("mousewheel",function(g){g.stopEvent()})}},ISyncWindowResizeEvent:{OnResize:function(){if(this.mask&&this.mask.dom)if(!this.config.hidden){this.drowBackGround(this.el.dom);this.maskMsg&&this.maskMsg.center(this.el);this.fireEvent("resize",
this)}return S_OK}},show:function(a,b){if(this.config.hidden){clearInterval(this.deferId);if(!(Ext.UI.LoadMask.DISABLE||Ext.UI.LoadMask.DISABLELARGE&&this.config.type==Ext.UI.LoadMask.LARGE||Ext.UI.LoadMask.DISABLEMIDDLE&&this.config.type==Ext.UI.LoadMask.MIDDLE||Ext.UI.LoadMask.DISABLESMALL&&this.config.type==Ext.UI.LoadMask.SMALL)){if(b==0||this.config.delay==0)this.showInDelay(a);else this.deferId=this.showInDelay.defer(b?b:this.config.delay,this,[a]);this.config.hidden=false;this.fireEvent("show",
this)}}},showInDelay:function(a){if(!Ext.isEmpty(a))this.el=a;this.initComponent();this.onBeforeLoad();this.config.hidden=false},hide:function(){clearInterval(this.deferId);if(this.mask){this.onLoad();clearInterval(this.config.intervalId)}this.config.hidden=true;this.fireEvent("hide",this)},setVisible:function(a){if(!Ext.isEmpty(this.el)&&!Ext.isEmpty(this.el.setVisible)){this.el.setVisible(a);this.config.hidden=a}},getSpinner:function(){try{for(var a=this.el.dom.getElementsByTagName("div"),b=this.getMsgCls(),
c=0;c<a.length;c++)if(a[c].className.indexOf(b)!=-1)return new Ext.Element(a[c].firstChild)}catch(d){}return null},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled&&this.el){this.mask=this.el.mask(this.config.msg,this.getMsgCls());var a=this.getSpinner();this.maskMsg=a.parent();if(this.config.spinner===false)this.maskMsg.addClass(this.config.msgCls+"-nospinner");else this.config.spinner=a;this.config.frame||this.maskMsg.addClass(this.config.msgCls+"-transparent");
this.prepBk(this.mask.dom);this.drowBackGround(this.el.dom);this.mask.on("mousemove",function(b){b.stopEvent()},this)}this.fireEvent("beforeload",this)},getMsgCls:function(){switch(this.config.type){case Ext.UI.LoadMask.SMALL:return this.config.msgCls+"-small";case Ext.UI.LoadMask.MIDDLE:return this.config.msgCls+"-middle";case Ext.UI.LoadMask.LARGE:case Ext.UI.LoadMask.LSPECIAL:default:return this.config.msgCls+"-large"}},getStep:function(){switch(this.config.type){case Ext.UI.LoadMask.SMALL:return 16;
case Ext.UI.LoadMask.MIDDLE:return 24;case Ext.UI.LoadMask.LARGE:case Ext.UI.LoadMask.LSPECIAL:default:return 32}}});Ext.UI.LoadMask.LARGE=0;Ext.UI.LoadMask.MIDDLE=1;Ext.UI.LoadMask.SMALL=2;Ext.UI.LoadMask.LSPECIAL=3;Ext.UI.LoadMask.DELAY=0;Ext.UI.LoadMask.DISABLE=false;Ext.UI.LoadMask.DISABLELARGE=false;Ext.UI.LoadMask.DISABLEMIDDLE=false;Ext.UI.LoadMask.DISABLESMALL=false;
Ext.UI.MessageBox=function(){var a,b,c,d,e,g,j,h,q,l,u,t,w="",y="",v=["ok","yes","no","cancel"],k=function(f){l[f].blur();if(a.isVisible()){a.hide();s();Ext.callback(b.fn,b.scope||window,[f,u.dom.value,b],1)}},s=function(){b&&b.cls&&a.el.removeClass(b.cls);h.reset()},z=function(f){var i=0,p;if(!f){Ext.each(v,function(m){l[m].hide()});return i}a.footer.dom.style.display="";Ext.iterate(l,function(m,n){if(p=f[m]){n.show();n.setText(Ext.isString(p)?p:Ext.UI.MessageBox.buttonText[m]);i+=n.getEl().getWidth()+
15}else n.hide()});return i};return{getDialog:function(f){if(!a){var i=[];l={};Ext.each(v,function(p){i.push(l[p]=new Ext.UI.Button({width:100,text:this.buttonText[p],handler:k.createCallback(p),hideMode:"offsets",uicls:"ui-button",acceptbtn:p=="yes"||p=="ok"}))},this);a=new Ext.UI.Window({autoCreate:true,title:f,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"right",width:400,height:100,minHeight:80,plain:true,
footer:true,closable:true,close:function(){b&&b.buttons&&b.buttons.no&&!b.buttons.cancel?k("no"):k("cancel")},fbar:new Ext.Toolbar({items:i,enableOverflow:false})});a.render(document.body);a.getEl().addClass("x-window-dlg");c=a.mask;d=a.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'});q=Ext.get(d.dom.firstChild);
f=d.dom.childNodes[1];e=Ext.get(f.firstChild);g=Ext.get(f.childNodes[2].firstChild);g.enableDisplayMode();g.addKeyListener([10,13],function(){if(a.isVisible()&&b&&b.buttons)if(b.buttons.ok)k("ok");else b.buttons.yes&&k("yes")});j=Ext.get(f.childNodes[2].childNodes[1]);j.enableDisplayMode();h=new Ext.ProgressBar({renderTo:d});d.createChild({cls:"x-clear"})}return a},updateText:function(f){!a.isVisible()&&!b.width&&a.setSize(this.maxWidth,100);e.update(f?f+" ":"&#160;");var i=y!=""?q.getWidth()+q.getMargins("lr"):
0,p=e.getWidth()+e.getMargins("lr"),m=a.getFrameWidth("lr"),n=a.body.getFrameWidth("lr");p=Math.max(Math.min(b.width||i+p+m+n,b.maxWidth||this.maxWidth),Math.max(b.minWidth||this.minWidth,t||0));b.prompt===true&&u.setWidth(p-i-m-n);if(b.progress===true||b.wait===true)h.setSize(p-i-m-n);if(Ext.isIE&&p==t)p+=4;e.update(f||"&#160;");a.setSize(p,"auto").center();return this},updateProgress:function(f,i,p){h.updateProgress(f,i);p&&this.updateText(p);return this},isVisible:function(){return a&&a.isVisible()},
hide:function(){var f=a?a.activeGhost:null;if(this.isVisible()||f){a.hide();s();f&&a.unghost(false,false)}return this},show:function(f){this.isVisible()&&this.hide();if(!this.buttonText)this.buttonText=_TR?{ok:_TR("OK"),cancel:_TR("CANCEL"),yes:_TR("YES"),no:_TR("NO")}:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"};b=f;var i=this.getDialog(b.title||"&#160;");i.setTitle(b.title||"&#160;");var p=b.closable!==false&&b.progress!==true&&b.wait!==true;i.tools.close.setDisplayed(p);u=g;b.prompt=b.prompt||(b.multiline?
true:false);if(b.prompt)if(b.multiline){g.hide();j.show();j.setHeight(Ext.isNumber(b.multiline)?b.multiline:this.defaultTextHeight);u=j}else{g.show();j.hide()}else{g.hide();j.hide()}u.dom.value=b.value||"";if(b.prompt)i.focusEl=u;else{f=b.buttons;var m=null;if(f&&f.ok)m=l.ok;else if(f&&f.yes)m=l.yes;if(m)i.focusEl=m}Ext.isDefined(b.iconCls)&&i.setIconClass(b.iconCls);this.setIcon(Ext.isDefined(b.icon)?b.icon:w);t=z(b.buttons);h.setVisible(b.progress===true||b.wait===true);this.updateProgress(0,b.progressText);
this.updateText(b.msg);b.cls&&i.el.addClass(b.cls);b.centerEl&&i.centerTo(b.centerEl);i.proxyDrag=b.proxyDrag===true;i.modal=b.modal!==false;i.mask=b.modal!==false?c:false;if(!i.isVisible()){document.body.appendChild(a.el.dom);i.setAnimateTarget(b.animEl);i.on("show",function(){p===true?i.keyMap.enable():i.keyMap.disable()},this,{single:true});i.show(b.animEl)}b.wait===true&&h.wait(b.waitConfig);return this},setIcon:function(f){if(a){w=undefined;if(f&&f!=""){q.removeClass("x-hidden");q.replaceClass(y,
f);d.addClass("x-dlg-icon");y=f}else{q.replaceClass(y,"x-hidden");d.removeClass("x-dlg-icon");y=""}return this}else w=f},progress:function(f,i,p){this.show({title:f,msg:i,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:p});return this},wait:function(f,i,p){this.show({title:i,msg:f,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:p});return this},info:function(f){this.show({title:f.title?f.title:_TR("MESSAGEBOX_INFO"),
msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.QUESTION,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.OK,fn:f.fn?f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},warning:function(f){this.show({title:f.title?f.title:_TR("MESSAGEBOX_WARNING"),msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.WARNING,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.OK,fn:f.fn?
f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},error:function(f){this.show({title:f.title?f.title:_TR("MESSAGEBOX_ERROR"),msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.ERROR,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.OK,fn:f.fn?f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},confirm:function(f){this.show({title:f.title?
f.title:"",msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.QUESTION,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.YESNO,fn:f.fn?f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},prompt:function(f,i,p,m,n,x){this.show({title:f,msg:i,buttons:options.buttons?options.buttons:this.OKCANCEL,fn:p,minWidth:this.minPromptWidth,scope:m,prompt:true,multiline:n,value:x});return this},OK:{ok:true},CANCEL:{cancel:true},
OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:null}}();Ext.namespace("Ext.UI");
Ext.UI.Scroller=Ext.extend(Ext.util.Observable,{target:null,container:null,rendered:false,dynamic:true,hidden:false,destroyed:false,type:"vertical",margins:{top:2,right:2,bottom:2,left:2},CUR_OPACITY:0,MAX_OPACITY:100,MIN_OPACITY:0,scrolling:false,wheeling:false,touching:false,scrollY:0,scrollX:0,showPer:0.8,wheelProcId:-1,animProcId:-1,touchProcId:-1,correctionCoef:0,notAppliedPart:0,constructor:function(a){if(!a.dom)return null;Ext.UI.Scroller.superclass.constructor.call(this,a);Ext.apply(this,
a);this.target=Ext.get(this.dom);this.container=Ext.get(this.renderTo||document.body);this.addEvents("scroll","mousewheel");ScrollManager.regItem(this)},getId:function(){return Ext.id(this.dom)},reg:function(){this.render()},unreg:function(){},render:function(){if(!this.rendered){var a="scroller-"+this.type+"-";this.rendered=true;this.el={};this.el.root=this.container.createChild({tag:"div",cls:a+"root "+(this.cls||"")});this.el.slider=this.el.root.createChild({tag:"div",cls:a+"slider"});if(Njl.isWebKit){this.type==
"vertical"?this.target.setStyle({"overflow-y":"auto"}):this.target.setStyle({"overflow-x":"auto"});this.el.root.setStyle("display","none");this.el.slider.setStyle("display","none");var b=this,c=function(){b.fireEvent("scroll",b)};this.target.on("scroll",c);this.on("destroy",function(){b.target.un("scroll",c)})}else{this.target.setStyle("overflow","hidden");this.initEvents();if(this.dynamic)this.onHide();else{this.setOpacity(this.MAX_OPACITY);this.onShow();this.resize()}}}},destroy:function(){this.destroyEvents();
this.el.root.remove();this.destroyed=true},destroyEvents:function(){},show:function(a){if(this.rendered&&this.hidden){this.hidden=false;if(a){var b=this.getOpacity(),c=this;clearInterval(this.animProcId);this.animProcId=setInterval(function(){b+=25;c.setOpacity(b);b>=c.MAX_OPACITY&&clearInterval(c.animProcId)},350)}this.resize()}},onShow:function(){this.hidden=false;this.rendered&&this.el.root.setStyle("visibility","visible")},hide:function(a){if(this.rendered&&!this.hidden){this.hidden=true;if(a){clearInterval(this.animProcId);
this.setOpacity(this.MIN_OPACITY)}this.el.root.setStyle("visibility","hidden")}},onHide:function(){this.hidden=true;this.rendered&&this.el.root.setStyle("visibility","hidden")},resize:function(){if(this.target.getHeight()*this.target.getWidth()){var a=this.target.getXY();if(this.type=="horizontal"){var b=a[0]+this.margins.left;a=a[1]+this.target.getHeight()-this.el.root.getHeight()-this.margins.bottom;this.el.root.setStyle("left",b+"px");this.el.root.setStyle("top",a+"px");a=this.target.getWidth()-
this.margins.left-this.margins.right;this.el.root.setStyle("width",a+"px");b=this.target.getWidth()/this.target.dom.scrollWidth;b<1?this.onShow():this.onHide();this.el.slider.setStyle("width",a*b+"px");b=this.target.dom.scrollLeft/this.target.dom.scrollWidth;this.el.slider.setStyle("left",a*b+"px")}else{b=a[0]+this.target.getWidth()-this.el.root.getWidth()-this.margins.right;a=a[1]+this.margins.top;this.el.root.setStyle("left",b+"px");this.el.root.setStyle("top",a+"px");a=this.target.getHeight()-
this.margins.top-this.margins.bottom;this.el.root.setStyle("height",a+"px");b=this.target.getHeight()/this.target.dom.scrollHeight;b<1?this.onShow():this.onHide();b=a*b;this.correctionCoef=0;if(b<5){this.correctionCoef=b-5;b=5}this.el.slider.setStyle("height",b+"px");b=this.target.dom.scrollTop/this.target.dom.scrollHeight;this.el.slider.setStyle("top",a*b+this.correctionCoef*b+"px")}this.el.root.setStyle("z-index",this.getParentZIndex(this.target))}else this.hidden||this.onHide()},scroll:function(a){a+=
this.notAppliedPart;this.notAppliedPart=a-parseInt(a);a=parseInt(a);if(this.type=="horizontal")this.target.dom.scrollLeft+=a;else this.target.dom.scrollTop+=a;this.resize();this.fireEvent("scroll",this)},addRelation:function(a){a.on("scroll",function(){!this.hidden&&this.resize()},this)},setOpacity:function(a){this.CUR_OPACITY=a>this.MAX_OPACITY?this.MAX_OPACITY:a;this.CUR_OPACITY=a<this.MIN_OPACITY?this.MIN_OPACITY:this.CUR_OPACITY;if(this.rendered){this.el.root.setStyle("filter","alpha(opacity="+
this.CUR_OPACITY+")");this.el.root.setStyle("opacity",this.CUR_OPACITY/100)}},getOpacity:function(){this.setOpacity(this.CUR_OPACITY);return this.CUR_OPACITY},initEvents:function(){function a(k){var s=t.target.getXY(),z=k.xy[0];k=k.xy[1];if(z>=s[0]+t.target.getWidth()||z<=s[0]||k>=s[1]+t.target.getHeight()||k<=s[1])return false;return true}function b(){this.scrolling=false}function c(k){if(!this.touching){if(this.scrolling)if(this.type=="horizontal"){var s=this.el.root.getWidth()/this.target.dom.scrollWidth;
this.scroll((k.xy[0]-this.scrollX)/s);this.scrollX=k.xy[0]}else{s=this.el.root.getHeight()/this.target.dom.scrollHeight;this.scroll((k.xy[1]-this.scrollY)/s);this.scrollY=k.xy[1]}!a(k)&&!this.scrolling&&this.dynamic&&this.hide(false)}}function d(k){var s=k.xy[0];k=k.xy[1];if(s>=document.body.offsetWidth||s<=0||k>=document.body.offsetHeight||k<=0)this.scrolling=false}function e(k){this.scrolling=true;this.scrollX=k.xy[0];this.scrollY=k.xy[1]}function g(k){if(!(!this.dynamic||this.touching)){var s=
this.target.getXY();k=this.type=="horizontal"?(k.xy[1]-s[1])/this.target.getHeight():(k.xy[0]-s[0])/this.target.getWidth();if(k>this.showPer&&k<1)this.show(false);else!this.wheeling&&!this.scrolling&&this.dynamic&&this.hide(false)}}function j(k){var s=k.browserEvent;s=s.detail?s.detail*-1:s.wheelDelta/40;s=s>0?-100:100;this.wheeling=true;this.dynamic&&this.show(false);this.scroll(s);clearInterval(this.wheelProcId);this.wheelProcId=function(){this.wheeling=false;a(k)&&g.createDelegate(this,[k])}.defer(750,
this);if(this.fireEvent("mousewheel",k,this)!==false)if(this.type=="vertical"&&this.target.dom.scrollTop&&this.target.dom.clientHeight+this.target.dom.scrollTop<this.target.dom.scrollHeight||this.type=="horizontal"&&this.target.dom.scrollLeft&&this.target.dom.clientWidth+this.target.dom.scrollLeft<this.target.dom.scrollWidth)k.stopEvent()}function h(k){this.touching=true;clearInterval(this.touchProcId);k=k.browserEvent.touches.item(0);this.scrollY=k.clientY+this.target.dom.scrollTop;this.scrollX=
k.clientX+this.target.dom.scrollLeft}function q(k){this.dynamic&&this.show(false);k=k.browserEvent.touches.item(0);if(this.type=="horizontal")this.target.dom.scrollLeft=this.scrollX-k.clientX;else this.target.dom.scrollTop=this.scrollY-k.clientY;this.resize();this.fireEvent("scroll",this);return false}function l(){this.touchProcId=function(){this.dynamic&&this.hide(false)}.defer(500,this)}function u(){this.dynamic&&this.hide(false)}var t=this;this.target_mouseWheel=j;var w=Ext.get(document.body);
w.on("mouseup",b,this);w.on("mousemove",c,this);w.on("mouseout",d,this);var y=this.el.slider;y.on("mousedown",e,this);var v=this.target;v.on("mousemove",g,this);v.on("mousewheel",j,this);v.on("touchstart",h,this);v.on("touchmove",q,this);v.on("touchend",l,this);Ext.EventManager.on(window,"resize",u,this);this.destroyEvents=function(){w.un("mouseup",b,t);w.un("mousemove",c,t);w.un("mouseout",d,t);y.un("mousedown",e,t);v.un("mousemove",g,t);v.un("mousewheel",j,t);v.un("touchstart",h,t);v.un("touchmove",
q,t);v.un("touchend",l,t);Ext.EventManager.un(window,"resize",u,t)}},getParentZIndex:function(a){a=Ext.getDom(a);for(var b,c=0;a;){b=parseInt(Ext.fly(a).getStyle("z-index"));if(!isNaN(b)&&b>c)c=b;a=a.offsetParent}return c}});
Ext.UI.ScrollManager=Ext.extend(Ext.util.Observable,{VERTICAL:0,HORIZONTAL:1,OVERALL:2,targets:{},items:[],constructor:function(a){Ext.UI.ScrollManager.superclass.constructor.call(this,a)},reg:function(a,b){a=Ext.getDom(a);b=b||this.VERTICAL;if(a&&!this.targets[a.id]){var c=[];if(b==0)c.push(new Ext.UI.Scroller({dom:a,type:"vertical"}));else if(b==1)c.push(new Ext.UI.Scroller({dom:a,type:"horizontal"}));else{c.push(new Ext.UI.Scroller({dom:a,type:"vertical"}));c.push(new Ext.UI.Scroller({dom:a,type:"horizontal",
margins:{right:13,bottom:2,left:2}}))}for(b=0;b<c.length;b++)c[b].reg();this.targets[a.id]=c}return null},unreg:function(){},regItem:function(a){for(var b=a.target.dom;b;){this.checkTreeRelation(b,a);b=b.parentNode}this.items.push(a)},checkTreeRelation:function(a,b){for(var c=0;c<this.items.length;++c)this.items[c].target.dom==a&&b.addRelation(this.items[c])}});Ext.UI.ScrollManager=new Ext.UI.ScrollManager;ScrollManager=Ext.UI.ScrollManager;Ext.namespace("Ext.UI");
Ext.UI.DatePicker=Ext.extend(Ext.DatePicker,{uicls:"ui-datepicker",initComponent:function(){this.setLocText();Ext.UI.DatePicker.superclass.initComponent.call(this);var a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");if(a){this.spLCManager=a.getSystemManager().getLocaleManager();CComQIPtr(this.spLCManager,"INotifySink").Advise(this)}},setLocText:function(){var a=function(b,c){var d=_TR(b);if(d==b)d=c;return d};this.monthNames=Date.monthNames=[_TR("JANUARY"),_TR("FEBRUARY"),_TR("MARCH"),
_TR("APRIL"),_TR("MAY"),_TR("JUNE"),_TR("JULY"),_TR("AUGUST"),_TR("SEPTEMBER"),_TR("OCTOBER"),_TR("NOVEMBER"),_TR("DECEMBER")];Date.monthShortNames=[a("S_JANUARY","Jan"),a("S_FEBRUARY","Feb"),a("S_MARCH","Mar"),a("S_APRIL","Apr"),a("S_MAY","May"),a("S_JUNE","Jun"),a("S_JULY","Jul"),a("S_AUGUST","Aug"),a("S_SEPTEMBER","Sep"),a("S_OCTOBER","Oct"),a("S_NOVEMBER","Nov"),a("S_DECEMBER","Dec")];Date.getShortMonthName=function(b){return Date.monthShortNames[b]};this.dayNames=[_TR("SU"),_TR("MO"),_TR("TU"),
_TR("WE"),_TR("TH"),_TR("FR"),_TR("SA")];this.todayText=_TR("TODAY");this.okText=_TR("OK");this.cancelText=_TR("CANCEL");this.todayTip="{0} ("+_TR("SPACEBAR")+")";this.minText=_TR("DATE_BEFORE_MIN");this.maxText=_TR("DATE_AFTER_MAX");this.format=a("DATE_FORMAT","m/d/y");this.longFormat=a("DATE_LONG_FORMAT","M d, Y");this.withoutDayFormat=a("DATE_WITHOUTDAY_FORMAT","F Y");this.disabledDaysText=_TR("DISABLED");this.disabledDatesText=_TR("DISABLED");this.nextText=_TR("MONTH_NEXT");this.prevText=_TR("MONTH_PREV");
this.monthYearText=_TR("MONTH_CHOOSE")},onRender:function(a,b){var c=['<table style="overflow: hidden;" cellpadding=0 cellspacing=0 border=0>',this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'<tr><td class="x-date-left" align=right valign=middle><a href="#" title="',this.prevText,'">&#160;</a></td><td colspan="1"><table style="padding:10px;" class="x-date-inner" cellspacing="1">','<thead><tr><td class="x-date-middle" colspan="7"></td></tr><tr>'],d=this.dayNames,
e;for(e=0;e<7;e++){var g=this.startDay+e;if(g>6)g-=7;c.push("<th><span>",d[g].substr(0,2),"</span></th>")}c[c.length]="</tr></thead><tbody><tr>";for(e=0;e<42;e++){if(e%7===0&&e!==0)c[c.length]="</tr><tr>";c[c.length]=e%7==0||(e-6)%7==0?'<td><a href="#" hidefocus="on" class="x-date-date weekends" tabIndex="1"><em><span></span></em></a></td>':'<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>'}c.push('</tr></tbody></table></td><td class="x-date-right" align=left valign=middle><a href="#" title="',
this.nextText,'">&#160;</a></td></tr>','</table><div id="'+(this.monthPickerId=Ext.id())+'" class="x-date-mp"></div>');d=document.createElement("div");d.className="x-date-picker "+this.uicls;d.innerHTML=c.join("");a.dom.insertBefore(d,b);this.el=Ext.get(d);this.eventEl=Ext.get(d.firstChild);this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),
{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.monthPicker=Ext.get(this.monthPickerId);this.monthPicker.enableDisplayMode("block");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(j){j.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(j){j.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(j){j.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(j){j.ctrlKey?
this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(){this.showNextMonth()},pageDown:function(){this.showPrevMonth()},enter:function(j){j.stopPropagation();return true},scope:this});this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.el.select("table.x-date-inner tbody td.x-date-prevday");this.mbtn=new Ext.form.Label({renderTo:this.el.child("table.x-date-inner thead td.x-date-middle",
true)});if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);a=this.todayDate.dateFormat(this.format);b=this.todayDate.dateFormat(this.longFormat);c=this.spLCManager.getLocale();if(c=="zh-cn")b=this.todayDate.getMonth()>=9?b.substr(0,7)+b.substr(9):b.substr(0,6)+b.substr(8);else if(c=="zh-tw")b=this.todayDate.getMonth()>=9?b.substr(0,9)+b.substr(11):b.substr(0,8)+b.substr(10);this.todayBtn=new Ext.UI.Button({width:170,renderTo:this.el.child("td.x-date-bottom",
true),text:String.format(this.todayText+", "+b,a),tooltip:String.format(this.todayTip,a),handler:this.selectToday,scope:this})}this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this);this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.mon(this.eventEl,"mouseover",this.handleDateHover,this,{delegate:"a.x-date-date"});this.mon(this.eventEl,"mouseout",this.handleDateHoverOut,this,{delegate:"a.x-date-date"});this.onEnable(true)},todayDate:new Date,setTodayDate:function(){if(this.todayBtn){var a=
this.todayDate.dateFormat(this.format),b=this.todayDate.dateFormat(this.longFormat),c=this.spLCManager.getLocale();if(c=="zh-cn")b=this.todayDate.getMonth()>=9?b.substr(0,7)+b.substr(9):b.substr(0,6)+b.substr(8);else if(c=="zh-tw")b=this.todayDate.getMonth()>=9?b.substr(0,9)+b.substr(11):b.substr(0,8)+b.substr(10);this.todayBtn.setText(String.format(this.todayText+", "+b,a));this.todayBtn.setTooltip(String.format(this.todayTip,a));this.value=this.todayDate.clearTime(true);this.update(this.value,true)}},
selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(this.todayDate.clearTime());this.fireEvent("select",this,this.value)}},update:function(a,b){if(this.rendered){var c=this.activeDate,d=this.isVisible();this.activeDate=a;if(!b&&c&&this.el){var e=a.getTime();if(c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear()){this.cells.removeClass("x-date-selected");this.cells.each(function(p){if(p.dom.firstChild.dateValue==e){p.addClass("x-date-selected");d&&!this.cancelFocus&&
Ext.fly(p.dom.firstChild).focus(50);return false}},this);return}}var g=a.getDaysInMonth(),j=a.getFirstDateOfMonth().getDay()-this.startDay;if(j<0)j+=7;g+=j;var h=a.add("mo",-1),q=h.getDaysInMonth()-j;b=this.cells.elements;c=this.textNodes;var l=new Date(h.getFullYear(),h.getMonth(),q,this.initHour),u=this.todayDate.clearTime().getTime(),t=a.clearTime(true).getTime(),w=this.minDate?this.minDate.clearTime(true):Number.NEGATIVE_INFINITY,y=this.maxDate?this.maxDate.clearTime(true):Number.POSITIVE_INFINITY,
v=this.disabledDatesRE,k=this.disabledDatesText,s=this.disabledDays?this.disabledDays.join(""):false,z=this.disabledDaysText,f=this.format;if(this.showToday){h=this.todayDate.clearTime();h=h<w||h>y||v&&f&&v.test(h.dateFormat(f))||s&&s.indexOf(h.getDay())!=-1;if(!this.disabled){this.todayBtn.setDisabled(h);this.todayKeyListener[h?"disable":"enable"]()}}h=function(p,m){m.title="";var n=l.clearTime(true).getTime();m.firstChild.dateValue=n;if(n==u){m.className+=" x-date-today";m.title=p.todayText}if(n==
t){m.className+=" x-date-selected";d&&Ext.fly(m.firstChild).focus(50)}if(n<w){m.className=" x-date-disabled";m.title=p.minText}else if(n>y){m.className=" x-date-disabled";m.title=p.maxText}else{if(s)if(s.indexOf(l.getDay())!=-1){m.title=z;m.className=" x-date-disabled"}if(v&&f){p=l.dateFormat(f);if(v.test(p)){m.title=k.replace("%0",p);m.className=" x-date-disabled"}}}};for(var i=0;i<j;i++){c[i].innerHTML=++q;l.setDate(l.getDate()+1);b[i].className="x-date-prevday";h(this,b[i])}for(;i<g;i++){c[i].innerHTML=
i-j+1;l.setDate(l.getDate()+1);b[i].className="x-date-active";h(this,b[i])}for(g=0;i<42;i++){c[i].innerHTML=++g;l.setDate(l.getDate()+1);b[i].className="x-date-nextday";h(this,b[i])}this.mbtn.setText(a.format(this.withoutDayFormat))}},handleDateHover:function(a,b){a.stopEvent();!this.disabled&&b.dateValue&&Ext.fly(b.parentNode).addClass("x-date-hover")},handleDateHoverOut:function(a,b){a.stopEvent();!this.disabled&&b.dateValue&&Ext.fly(b.parentNode).removeClass("x-date-hover")}});
Ext.reg("uidatepicker",Ext.UI.DatePicker);Ext.namespace("Ext.UI");
Ext.UI.PieChart=Njl.inherit(Ext.Component,{constructor:function(){Ext.UI.PieChart.superclass.constructor.apply(this,arguments);this.on("afterrender",this.onAfterRender,this)},onAfterRender:function(){this.el.addClass("ui-piechart");this.el.update(String.format('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 40 40" style="width: 100%;height: 100%;">            <circle cx="20" cy="20" r="20" fill="#28a6ed" stroke="none"></circle>{0}</svg>',this.renderSectors()))},refresh:function(){},
renderSectors:function(){var a=90,b="";if(this.total&&this.sectors&&this.sectors.length)for(var c=0;c<this.sectors.length;c++){var d=this.sectors[c],e=d.value/this.total*360;b+=this.drawPath(a,e,'fill="'+d.color+'" stroke="none"');a+=e}return b},drawPath:function(a,b,c){var d=cy=r=20,e=Math.PI/180,g=(d-r*Math.cos(-a*e)).toFixed(8);d=(d-r*Math.cos(-(a+b)*e)).toFixed(8);var j=(cy+r*Math.sin(-a*e)).toFixed(8);a=(cy+r*Math.sin(-(a+b)*e)).toFixed(8);return b>359.5?'<circle cx="20" cy="20" r="20" '+c+"></circle>":
String.format('<path d="M20,20 L{0},{1} A20,20 0 {2},1 {3},{4} z" {5}/>',g,j,b>180?1:0,d,a,c)}});Ext.reg("uipiechart",Ext.UI.PieChart);Ext.namespace("Ext.UI");
Ext.UI.Chart=Ext.extend(Ext.BoxComponent,{_paperRaphael:null,width:120,height:120,values:[],axisX:1,axisY:1,originX:0,originY:0,constructor:function(a){Ext.UI.Chart.superclass.constructor.call(this,a);this.on("afterrender",this.onAfterRender,this)},onAfterRender:function(){this.renderLines()},updateValues:function(a){this.values=a;this.renderLines()},refresh:function(){this.renderLines()},renderLines:function(){this._paperRaphael=this._paperRaphael||Raphael(this.el.dom,this.width,this.height);this._paperRaphael.clear();
if(this.values.length){for(var a=(this.values[0][0]-this.originX)/this.axisX*this.width+","+this.height,b="M"+a,c=0;c<this.values.length;++c){var d=(this.values[c][0]-this.originX)/this.axisX*this.width,e=d+","+(this.height-(this.values[c][1]-this.originY)/this.axisY*this.height);b+="C"+a+","+e+","+e;a=e}c=d+","+this.height;b+="C"+a+","+c+","+c+"z";this._paperRaphael.path(b).attr({fill:"#9e99ff",stroke:"none"})}}});Ext.reg("uichart",Ext.UI.Chart);Ext.namespace("Ext.UI");
Ext.UI.TabMenu=Ext.extend(Ext.Container,{uicls:"ui-tabmenu-style1",initComponent:function(){this.items=[];this.addEvents("itemselect","itemdeselect");Ext.UI.TabMenu.superclass.initComponent.call(this)},onRender:function(a,b){Ext.UI.TabMenu.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls);this.scroll=this.el.createChild({cls:this.uicls+"-scroll "+this.uicls+"-scroll-out",style:"display:none"});this.scroll.setVisibilityMode(Ext.Element.DISPLAY);this.initEvents()},onLayout:function(){this.checkMenuItems()},
initEvents:function(){for(var a=0;a<this.items.length;++a)this.items.get(a).on("select",this.onItemSelect,this);this.scroll.on("mouseover",this.onScrollMouseOver,this);this.scroll.on("mouseout",this.onScrollMouseOut,this);this.scroll.on("mousedown",this.onScrollMouseDown,this);this.scroll.on("mouseup",this.onScrollMouseUp,this);Ext.EventManager.on(window,"resize",this.onWindowResize,this)},onItemSelect:function(a){for(var b=null,c=0;c<this.items.length;++c){b=this.items.get(c);if(b!=a&&b.checked){b.deselect();
this.fireEvent("itemdeselect",this,b)}b==a&&!localStorage.getItem("is403LogOut")&&localStorage.setItem("fromTab",c)}this.fireEvent("itemselect",this,a)},select:function(a){(a=this.items.get(a))&&a.select()},onWindowResize:function(){this.checkMenuItems.defer(50,this)},checkMenuItems:function(){this.scroll.hide();var a=this.el.dom.offsetTop;this.scrollItems=[];for(var b=0,c=0;c<this.items.length;++c){if(!this.items.get(c).rendered)return;if(this.items.get(c).el.dom.offsetTop!=a)this.scrollItems.push(this.items.get(c));
else b+=this.items.get(c).el.getWidth()+1}if(this.scrollItems.length&&this.getWidth()<b+this.scroll.getComputedWidth()-(Njl.isIE?0:1))this.scrollItems.splice(0,0,this.items.get(this.items.length-this.scrollItems.length-1));if(this.scrollItems.length&&this.scrollItems.length!=this.items.length){this.scroll.insertBefore(this.scrollItems[0].el.prev());this.scroll.show()}this.scrollItems.length>0?this.scroll.show():this.scroll.hide()},onScrollMouseOver:function(){this.scroll.addClass(this.uicls+"-scroll-over")},
onScrollMouseOut:function(){this.scroll.removeClass(this.uicls+"-scroll-over");this.scroll.removeClass(this.uicls+"-scroll-click")},onScrollMouseDown:function(){this.scroll.addClass(this.uicls+"-scroll-click")},onScrollMouseUp:function(){this.scroll.removeClass(this.uicls+"-scroll-click");this.showScrollMenu()},showScrollMenu:function(){if(!this.scrollMenu)this.scrollMenu=new Ext.UI.Menu({cls:"x-tabmenu-menu"});var a=this.scrollItems;this.scrollMenu.removeAll();for(var b=0;b<a.length;++b)this.scrollMenu.add({xtype:"menutextitem",
text:a[b].text,value:a[b],listeners:{scope:this,click:this.onScrollMenuCheck}});this.scrollMenu.show(this.scroll)},onScrollMenuCheck:function(a,b){if(b){a.value.select();return true}return false}});Ext.reg("uitabmenu",Ext.UI.TabMenu);
Ext.UI.TabMenuItem=Ext.extend(Ext.BoxComponent,{uicls:"ui-tabmenuitem-style1",checked:false,initComponent:function(){this.addEvents("select","deselect")},onRender:function(a){this.el=a.createChild({id:this.id,cls:this.uicls+"-item",html:'<div class="'+this.uicls+'-item-mr"><div class="'+this.uicls+'-item-mc"><span class="'+this.uicls+'-item-txt">'+this.text+"</span></div></div>"});a.createChild({cls:this.uicls+"-border"});this.initEvents()},initEvents:function(){this.el.on("mouseover",this.onMouseOver,
this);this.el.on("mouseout",this.onMouseOut,this);this.el.on("click",this.onClick,this)},onMouseOver:function(){this.checked||this.el.addClass(this.uicls+"-item-over")},onMouseOut:function(){this.el.removeClass(this.uicls+"-item-over")},onClick:function(){this.checked||this.select()},select:function(){this.el.addClass(this.uicls+"-item-click");this.checked=true;this.fireEvent("select",this)},deselect:function(){this.el.removeClass(this.uicls+"-item-click");this.checked=false;this.fireEvent("deselect",
this)}});Ext.reg("uitabmenuitem",Ext.UI.TabMenuItem);Ext.namespace("Ext.UI");
Ext.apply(Ext.Element.prototype,{scrollIntoView:function(a,b,c){a=Ext.getDom(a)||Ext.getBody().dom;var d=this.dom,e=this.getOffsetsTo(a),g=e[0]+a.scrollLeft;e=e[1]+a.scrollTop;var j=e+d.offsetHeight,h=g+d.offsetWidth,q=a.clientHeight,l=parseInt(a.scrollTop,10),u=parseInt(a.scrollLeft,10),t=l+q,w=u+a.clientWidth;if(d.offsetHeight>q||e<l)a.scrollTop=e-(c!==true?0:this.getMargins("t"));else if(j>t)a.scrollTop=j-q+(c!==true?0:this.getMargins("b"));a.scrollTop=a.scrollTop;if(b!==false){if(d.offsetWidth>
a.clientWidth||g<u)a.scrollLeft=g-(c!==true?0:this.getMargins("l"));else if(h>w)a.scrollLeft=h-a.clientWidth+(c!==true?0:this.getMargins("r"));a.scrollLeft=a.scrollLeft}return this}});
Ext.UI.DataView=Ext.extend(Ext.DataView,{autoScroll:false,scroller:true,constructor:function(a){this.selectedIndex=0;Ext.UI.DataView.superclass.constructor.call(this,a)},initComponent:function(){Ext.UI.DataView.superclass.initComponent.call(this);this.addEvents("itemselect","itementer","itemdelete","goback");this.on("afterrender",this.onrendered,this);this.on("containerclick",this.oncontainerclick,this);this.on("click",this.onlistviewclicked,this);this.on("dblclick",this.onlistviewdbclicked,this)},
getLowerSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));a=a+d;if(a>=0&&a<b.length)return a}return b.length-1},getUpperSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+
d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));a=a-d;if(a>=0&&a<b.length)return a}return 0},retainFocus:function(){this.doRetainFocus.defer(50,this)},doRetainFocus:function(){this.focusEl&&this.focusEl.focus()},scrollSelectedIntoView:function(){var a=this.getSelectedNodes();a.length>0&&Ext.get(a[a.length-1]).scrollIntoView(this.el,true,true)},getPageStep:function(){return Math.ceil(this.store.getCount()*0.2)},onlistviewclicked:function(a,b,c,d){this.selectedIndex=b;this.retainFocus();
this.fireEvent("itemselect",b,d)},onlistviewdbclicked:function(a,b,c,d){this.selectedIndex=b;this.retainFocus();this.fireEvent("itementer",b,d)},oncontainerclick:function(){this.retainFocus();return false},onkeydown:function(a){this.selectedIndex=this.getLowerSibling(this.selectedIndex);this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyup:function(a){this.selectedIndex=this.getUpperSibling(this.selectedIndex);this.select(this.selectedIndex);
this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyleft:function(a){this.select(this.selectedIndex>0?--this.selectedIndex:0);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyright:function(a){this.select(this.selectedIndex<this.store.getCount()-1?++this.selectedIndex:this.store.getCount()-1);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyEnter:function(a){this.retainFocus();this.fireEvent("itementer",
this.selectedIndex,a)},onkeyDelete:function(a){this.retainFocus();this.fireEvent("itemdelete",this.selectedIndex,a)},onKeyPageUp:function(a){this.selectedIndex=this.selectedIndex-this.getPageStep()>=0?this.selectedIndex-this.getPageStep():0;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onKeyPageDown:function(a){this.selectedIndex=this.selectedIndex+this.getPageStep()<this.store.getCount()?this.selectedIndex+this.getPageStep():this.store.getCount()-
1;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onKeyBack:function(a,b){this.fireEvent("goback",this.selectedIndex,b)},onrendered:function(a){if(a.focusEl)a.focusEl=Ext.get(a.focusEl);else{a.focusEl=a.el.createChild({tag:"a",href:"#",cls:"x-hidden-focus",tabIndex:"-1"});a.focusEl.insertBefore(a.el);a.focusEl.swallowEvent("click",true)}if(a.focusEl){new Ext.KeyMap(a.focusEl,{key:Ext.EventObject.BACKSPACE,fn:a.onKeyBack,scope:a});this.rowNav=
new Ext.KeyNav(a.focusEl,{forceKeyDown:true,up:a.onkeyup,down:a.onkeydown,left:a.onkeyleft,right:a.onkeyright,enter:a.onkeyEnter,del:a.onkeyDelete,pageUp:a.onKeyPageUp,pageDown:a.onKeyPageDown,scope:a})}this.scroller&&ScrollManager.reg(a.el)}});Ext.reg("uidataview",Ext.UI.DataView);Ext.namespace("Ext.UI");
Ext.UI.ChainDataView=Ext.extend(Ext.UI.DataView,{prevDataview:undefined,nextDataview:undefined,keyHandlers:true,scroller:false,constructor:function(){Ext.UI.ChainDataView.superclass.constructor.apply(this,arguments)},setNextDataView:function(a){this.nextDataview=a;a.on("selectionchange",function(){this.clearSelections(true);for(var b=this.prevDataview;b;){b.clearSelections(true);b=b.prevDataview}},this)},setPrevDataView:function(a){this.prevDataview=a;a.on("selectionchange",function(){this.clearSelections(true);
for(var b=this.nextDataview;b;){b.clearSelections(true);b=b.nextDataview}},this)},onkeydown:function(a,b){a=this.getLowerSibling(this.selectedIndex);if(a===undefined){for(var c=this.nextDataview;c;)if(c.getNodes().length){if(c.selectItemInFirstRow(this.selectedIndex)){this.clearSelections(true);break}}else c=c.nextDataview;c||(a=this.getNodes().length-1)}if(a!==undefined){this.selectedIndex=a;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,
b)}},onkeyup:function(a,b){a=this.getUpperSibling(this.selectedIndex);if(a===undefined){for(var c=this.prevDataview;c;)if(c.getNodes().length){if(c.selectItemInLastRow(this.selectedIndex)){this.clearSelections(true);break}}else c=c.prevDataview;c||(a=0)}if(a!==undefined){this.selectedIndex=a;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,b)}},onkeyleft:function(a,b){if(this.selectedIndex>0){this.select(--this.selectedIndex);this.scrollSelectedIntoView();
this.fireEvent("itemselect",this.selectedIndex,b)}else for(a=this.prevDataview;a;)if(a.getNodes().length){if(a.selectItemInLastRow(1E3)){this.clearSelections(true);break}}else a=a.prevDataview},onkeyright:function(a,b){if(this.selectedIndex<this.store.getCount()-1){this.select(++this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,b)}else for(a=this.nextDataview;a;)if(a.getNodes().length){if(a.selectItemInFirstRow(0)){this.clearSelections(true);break}}else a=
a.nextDataview},getLowerSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));c=a+d;if(c>=b.length&&Math.floor((b.length-1)/d)>Math.floor(a/d))c=b.length-1;if(c>=0&&c<b.length)return c}},getUpperSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);
c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));a=a-d;if(a>=0&&a<b.length)return a}},selectItemInLastRow:function(a){var b=this.getNodes();if(b&&b.length>0){var c=Ext.get(this.el),d=Ext.get(b[b.length-1]);c=Math.floor((c.getWidth()-(c.getPadding("r")+c.getPadding("l")))/(d.getWidth()+(d.getMargins("l")+d.getMargins("r"))));a=b.length%c?Math.floor(b.length/c)*c+a:(Math.floor(b.length/c)-1)*c+a;a=a>=b.length?
b.length-1:a;this.select(a);this.selectedIndex=a;this.scrollSelectedIntoView();this.retainFocus();return true}},selectItemInFirstRow:function(a){var b=this.getNodes();if(b&&b.length>0){var c=Ext.get(this.el),d=Ext.get(b[b.length-1]);c=Math.floor((c.getWidth()-(c.getPadding("r")+c.getPadding("l")))/(d.getWidth()+(d.getMargins("l")+d.getMargins("r"))));a=a%c;a=a>=b.length?b.length-1:a;this.select(a);this.selectedIndex=a;this.scrollSelectedIntoView();this.retainFocus();return true}},onrendered:function(){if(this.keyHandlers)Ext.UI.ChainDataView.superclass.onrendered.apply(this,
arguments);else this.scroller&&ScrollManager.reg(o.el)}});Njl.namespace("Ext.UI");
Ext.UI.HorMenu=Njl.inherit(Ext.UI.Menu,{uicls:"ui-hormenu",enableScrolling:false,defaultType:"uihormenuitem",constructor:function(){Ext.UI.HorMenu.superclass.constructor.apply(this,arguments)},afterRender:function(){Ext.UI.HorMenu.superclass.afterRender.apply(this,arguments);this.tcAnchor=this.el.createChild({tag:"div",cls:this.uicls+"-tc-anchor"},this.ul);this.bcAnchor=this.el.createChild({tag:"div",cls:this.uicls+"-bc-anchor"})},show:function(a,b){Ext.UI.HorMenu.superclass.show.call(this,a,b);b=
Ext.fly(a).getY()<this.el.getY();this.tcAnchor.setVisible(b);this.bcAnchor.setVisible(!b);this.el.setY(this.el.getY()+(b?-1:1));b=Math.min(Ext.fly(a).getWidth(),this.el.getWidth());a=Ext.fly(a).getX()-this.el.getX();if(a<0){this.tcAnchor.applyStyles("background-position: 0 0");this.bcAnchor.applyStyles("background-position: 0 0")}else{this.tcAnchor.applyStyles("background-position: "+(a+b/2-15)+"px 0");this.bcAnchor.applyStyles("background-position: "+(a+b/2-15)+"px 0")}},showAt:function(a,b){Ext.UI.HorMenu.superclass.showAt.call(this,
a,b);if(a[1]>this.getPosition()[1]){Ext.UI.HorMenu.superclass.showAt.call(this,[a[0],a[1]-this.getHeight()],b);this.tcAnchor.setVisible(false);this.bcAnchor.setVisible(true)}else{this.tcAnchor.setVisible(true);this.bcAnchor.setVisible(false)}}});Ext.reg("uihormenu",Ext.UI.HorMenu);
Ext.UI.HorMenuItem=Njl.inherit(Ext.menu.Item,{disabledClass:"ui-hormenu-item-disabled",itemTpl:new Ext.XTemplate('<div class="x-menu-list-item-l">','<div class="x-menu-list-item-r">','<div class="x-menu-list-item-c">','<a id="{id}" class="x-menu-item x-unselectable x-ellipsis" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<span class="x-menu-item-text">{text}</span>',"</a>","</div>","</div>","</div>"),constructor:function(){Ext.UI.HorMenu.superclass.constructor.apply(this,
arguments)}});Ext.reg("uihormenuitem",Ext.UI.HorMenuItem);Ext.namespace("Ext.UI");
Ext.UI.SideBar=Ext.extend(Ext.BoxComponent,{uicls:"ui-sidebar",constructor:function(){Ext.UI.SideBar.superclass.constructor.apply(this,arguments);this.addEvents("select");this.addEvents("contextmenu")},afterRender:function(){Ext.UI.SideBar.superclass.afterRender.apply(this,arguments);this.el.update('<table><tr><td class="'+this.uicls+'-leftside"><div id="'+(this.labelsId=Ext.id())+'"></div></td><td class="'+this.uicls+'-rightside"><div id="'+(this.contentsId=Ext.id())+'"></div></td></tr></table>');
this.tabs=[];this.labels=Ext.get(this.labelsId);this.contents=Ext.get(this.contentsId)},addTab:function(a,b,c){var d=new Ext.Component({html:'<div class="'+this.uicls+'-leftside-item-ml"><div class="'+this.uicls+'-leftside-item-mr"><div class="'+this.uicls+'-leftside-item-mc x-ellipsis"><span title="'+a+'">'+a+"</span></div></div></div>",cls:this.uicls+"-leftside-item"});d.render(this.labels);b.render(this.contents);b.hide();var e={label:d,component:b};this.tabs.push(e);this.tabs.length==1&&this.selectTab(e);
d.el.on("click",function(){this.selectTab(e)},this);d.el.on("contextmenu",function(g){g.preventDefault();this.fireEvent("contextmenu",d,c)},this)},selectTab:function(a){if(Njl.isNumber(a))a=this.tabs.length>a?this.tabs[a]:null;if(a&&a!=this.selectedtab){if(this.selectedtab){this.selectedtab.label.removeClass(this.uicls+"-leftside-item-selected");this.selectedtab.component.hide()}a.label.addClass(this.uicls+"-leftside-item-selected");a.component.show();this.selectedtab=a;this.fireEvent("select",this,
a,this.tabs.indexOf(a))}},hideTab:function(a){if(Njl.isNumber(a))a=this.tabs.length>a?this.tabs[a]:null;if(a){a.label.hide();a.component.hide()}},showTab:function(a){if(Njl.isNumber(a))a=this.tabs.length>a?this.tabs[a]:null;if(a){a.label.show();a==this.selectedtab&&a.component.show()}}});Njl.namespace("Ext.UI");
Ext.UI.VerticalMenu=Njl.inherit(Ext.Component,{constructor:function(){Njl.apply(this,{uicls:"ui-vertmenu",enableScrolling:true,hidden:true,defaultType:"uivertmenuitem",renderTo:Ext.getBody()});Ext.UI.VerticalMenu.superclass.constructor.apply(this,arguments)},afterRender:function(){Ext.UI.VerticalMenu.superclass.afterRender.apply(this,arguments);this.el.addClass(this.uicls);this.anchor=this.el.createChild({tag:"div",cls:this.uicls+"-tc-anchor"});this.mc=this.el.createChild({tag:"div",cls:this.uicls+
"-mc ui-shadow"});for(var a=0;a<this.items.length;++a){var b=this.items[a];b.events||(b=b.xtype=="menutextitem"?new Ext.Component({html:b.text||"",cls:"ui-vertmenu-item-title x-ellipsis"}):this.createComponent(b));b.parent=this;b.render(this.mc);b.el.on("click",function(){this.fireEvent("click",this);this.fireEvent("checkchange",this);this.parent.hide()},b)}if(this.enableScrolling){this.scroller=new Ext.UI.Scroller({dom:this.mc.dom,cls:"x-ui-menu-scroller",type:"vertical",showPer:0.6,margins:{top:2,
right:2,bottom:3,left:0}});this.scroller.reg();this.on("hide",function(){this.scroller.hide()},this);this.on("beforehide",function(){return!this.scroller.scrolling},this)}},onShow:function(){Ext.UI.VerticalMenu.superclass.onShow.apply(this,arguments);this.active=true;Ext.getDoc().on("mousedown",this.onMouseDown,this)},doHide:function(){Ext.UI.VerticalMenu.superclass.doHide.apply(this,arguments);this.active&&Ext.getDoc().un("mousedown",this.onMouseDown);this.active=false},show:function(a){Ext.UI.VerticalMenu.superclass.show.apply(this,
arguments);this.el.anchorTo(a,"t-b");var b=this.margins&&this.margins.right?this.margins.right:0,c=(this.margins&&this.margins.left?this.margins.left:0)-this.el.getLeft();b=Ext.getBody().getWidth()-b-this.el.getLeft()-this.el.getWidth();if(c>0){this.el.anchorTo(a,"t-b",[c,0]);this.anchor.applyStyles("background-position: "+(this.mc.getWidth()/2-c-15)+"px 0px")}else if(b<0){this.el.anchorTo(a,"t-b",[b,0]);this.anchor.applyStyles("background-position: "+(this.mc.getWidth()/2-b-15)+"px 0px")}else this.anchor.applyStyles("background-position: "+
(this.mc.getWidth()/2-15)+"px 0px")},createComponent:function(a,b){if(a.render)return a;b=Ext.create(Ext.apply({ownerCt:this},a),b||this.defaultType);b.data=b.data||{};Njl.apply(b.data,a);delete b.initialConfig.ownerCt;delete b.ownerCt;return b},onMouseDown:function(a){a.getTarget("."+this.uicls)||this.hide()}});Ext.reg("uivertmenu",Ext.UI.VerticalMenu);
Ext.UI.VerticalMenuItem=Njl.inherit(Ext.Component,{disabledClass:"ui-vertmenu-item-disabled",tpl:new Ext.XTemplate('<div class="ui-vertmenu-item-image','<tpl if="!!cls">'," {cls}","</tpl>",'"></div>','<div class="ui-vertmenu-item-text x-unselectable x-ellipsis">{text}</div>','<a id="{id}" class="x-unselectable" style="display:none;" hidefocus="true" unselectable="on" href="#"></a>'),constructor:function(a){if(a&&a.cls){this.imageCls=a.cls;delete a.cls}Ext.UI.VerticalMenuItem.superclass.constructor.apply(this,
arguments);this.addClass("ui-vertmenu-item")}});Ext.reg("uivertmenuitem",Ext.UI.VerticalMenuItem);Ext.namespace("Ext.UI");
Ext.UI.DateField=Ext.extend(Ext.UI.TextField,{readOnly:true,constructor:function(a){a=a||{};this.emptyText=a.emptyText||_TR("mm/dd/yyyy");Ext.UI.DateField.superclass.constructor.apply(this,arguments);if(!Ext.UI.DateField.wnd)Ext.UI.DateField.wnd=new Ext.UI.Window({resizable:false,title:_TR("DATE"),modal:true,autoWidth:true,items:[Ext.UI.DateField.wndDatePicker=new Ext.UI.DatePicker({})],fbar:["->",new Ext.UI.Button({xtype:"uibutton",width:80,text:_TR("OK"),handler:function(){Ext.UI.DateField.wnd.fireEvent("applyclick",
Ext.UI.DateField.wnd,Ext.UI.DateField.wndDatePicker.getValue());Ext.UI.DateField.wnd.hide()},acceptbtn:true}),new Ext.UI.Button({xtype:"uibutton",width:80,text:_TR("CLEAR"),handler:function(){Ext.UI.DateField.wnd.fireEvent("applyclick",Ext.UI.DateField.wnd,null);Ext.UI.DateField.wnd.hide()}}),new Ext.UI.Button({xtype:"uibutton",width:80,text:_TR("CANCEL"),handler:function(){Ext.UI.DateField.wnd.hide()},cancelbtn:true})]});this.wrap.on("click",function(){if(!this.disabled){Ext.UI.DateField.wnd.on("applyclick",
this.onWndApplyClick,this);Ext.UI.DateField.wnd.on("hide",this.onWndHide,this);Ext.UI.DateField.wnd.show();Ext.UI.DateField.wndDatePicker.setMinDate(this.minDate);Ext.UI.DateField.wndDatePicker.setMaxDate(this.maxDate);Ext.UI.DateField.wndDatePicker.setValue(this.selectedDate||new Date)}},this)},onWndApplyClick:function(a,b){this.setDateValue(b);this.fireEvent("change",this,this.selectedDate)},onWndHide:function(){Ext.UI.DateField.wnd.un("applyclick",this.onWndApplyClick,this);Ext.UI.DateField.wnd.un("hide",
this.onWndHide,this)},getDateValue:function(){return this.selectedDate},setDateValue:function(a){this.selectedDate=a;this.setValue(a?a.format("m/d/Y"):"");return this.selectedDate}});Ext.reg("uidatefield",Ext.UI.DateField);
Njl.namespace("Njl","Njl.CLSIDS","Njl.CLSIDS.ConnectRepair");Njl.CLSIDS.ConnectRepair.ConnectRepairWindow="ConnectRepair.ConnectRepairWindow";Ext.namespace("Ext.ConnectRepair");
Ext.ConnectRepair.ConnectRepairWindow=Njl.inherit(Njl.CLSIDS.ConnectRepair.ConnectRepairWindow,Njl.JSCom.CComObjectRoot,Ext.Component,ISingleTone,IExtNative,IDeviceEvents,ISysManagerEvents,IConnectRepair,{POLL_CURRENT_HOST_DELAY:2E3,POLL_DISCOVER_HOST_DELAY:2E4,POLL_HOST_RANGE_DELAY:6E4,POLL_TIMEOUT:5E3,WAIT_DELAY:5E3,WAIT_RESTORE_TIMEOUT:3E4,RESTORE_CYCLE_LIFETIME:18E4,REBOOT_CYCLE_LIFETIME:3E5,UPGRADE_CYCLE_LIFETIME:6E5,firmware:false,factory:false,protocol:undefined,host:undefined,ip:undefined,
sn:undefined,processed:false,constructor:function(a){Ext.ConnectRepair.ConnectRepairWindow.superclass.constructor.call(this,a);this.protocol=window.location.protocol;this.host=window.location.hostname;this.ip=this.isIP(this.host)?this.host:undefined},getSerialNumber:function(){if(!this.sn)this.sn=Ext.util.Cookies.get("sn");return this.sn},setSerialNumber:function(a){Ext.util.Cookies.set("sn",a,new Date((new Date).getTime()+26784E5));this.sn=a},setFirmwareMode:function(a){this.firmware=a},setFactoryMode:function(a){this.factory=
a},afterRender:function(a){Ext.ConnectRepair.ConnectRepairWindow.superclass.afterRender.call(this,a);Ext.fly(document.body).addClass("repair-mode");this.el.addClass("repair-conn");this.bSafeModeNextIds={sm0:{btnId:Ext.id()},sm1:{btnId:Ext.id()},sm2:{btnId:Ext.id()},sm3:{btnId:Ext.id()},sm4:{btnId:Ext.id()}};a=new Ext.Template('<div class="repair-block repair-elsm{status} x-hide-display repair-sm-block"><div><div class="x-system-update-error repair-sm-icon"></div><div class="repair-sm-title-block"><div class="repair-title">{title}</div><div class="repair-message repair-secondTitle">{secondTitle}</div></div></div><div class="repair-message repair-sm-content-block">{content}</div><div><div class="repair-sm-content-btn" id="{btnId}"></div><div style="clear:both;"></div></div></div>',
{compiled:true,disableFormats:true});this.el.update('<div class="repair-wrap"><div class="repair-header"><div class="x-frontview-header-logo"><div class="x-frontview-header-logo-readynas"></div></div></div><div class="repair-body"><div class="repair-block repair-polling"><div class="repair-message"></div><div class="repair-progress"><div class="repair-progress-line"></div></div></div><div class="repair-block repair-shutdown"><div class="repair-message">'+this.TR("CONNECTREPAIR_SHUTDOWN_DESC")+'</div></div><div class="repair-block repair-fail"><div class="repair-title">'+
this.TR("CONNECTREPAIR_FAIL_TITLE")+'</div><div style="font" class="repair-message">'+this.TR("CONNECTREPAIR_FAIL_DESC")+'</div></div><div class="repair-block repair-logout" style="top:15%"><div class="repair-title">'+this.TR("CONNECTREPAIR_LOGOUT_TITLE")+'</div><div style="text-align:left" class="repair-message">'+this.TR("CONNECTREPAIR_LOGOUT_DESC")+'</div><div><div class="repair-sm-content-btn" id="'+(this.bLogInId=Ext.id())+'"></div><div style="clear:both;"></div></div></div>'+a.apply({status:"0",
title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_0_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_0_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_0_CONTENT"),btnId:this.bSafeModeNextIds.sm0.btnId})+a.apply({status:"1",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_1_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_1_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_1_CONTENT"),btnId:this.bSafeModeNextIds.sm1.btnId})+a.apply({status:"2",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_2_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_2_SECOND_TITLE"),
content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_2_CONTENT"),btnId:this.bSafeModeNextIds.sm2.btnId})+a.apply({status:"3",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_3_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_3_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_3_CONTENT"),btnId:this.bSafeModeNextIds.sm3.btnId})+a.apply({status:"4",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_4_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_4_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_4_CONTENT"),
btnId:this.bSafeModeNextIds.sm4.btnId})+"</div></div>");this.bLogIn=new Ext.UI.Button({text:_TR("LOGIN"),acceptbtn:true,handler:this.onLogInClick,scope:this,renderTo:this.bLogInId});this.elpoll=Ext.get(this.el.query(".repair-polling")[0]);this.elpollmsg=Ext.get(this.elpoll.query(".repair-message")[0]);this.elprogress=Ext.get(this.elpoll.query(".repair-progress-line")[0]);this.elshutdown=Ext.get(this.el.query(".repair-shutdown")[0]);this.elfail=Ext.get(this.el.query(".repair-fail")[0]);this.ellogout=
Ext.get(this.el.query(".repair-logout")[0]);this.elsm0=Ext.get(this.el.query(".repair-elsm0")[0]);this.elsm1=Ext.get(this.el.query(".repair-elsm1")[0]);this.elsm2=Ext.get(this.el.query(".repair-elsm2")[0]);this.elsm3=Ext.get(this.el.query(".repair-elsm3")[0]);this.elsm4=Ext.get(this.el.query(".repair-elsm4")[0]);(a=Ext.get(this.elfail.query(".repair-retry")[0]))&&a.on("click",this.onReconnectClick,this);a={text:_TR("NEXT"),acceptbtn:true,width:125,disabled:false,renderTo:this.bSafeModeNextIds.sm0.btnId,
handler:function(d){switch(d.id){case this.bApply0.id:case this.bApply1.id:case this.bApply2.id:if(this.safeModeIntervalID){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}localStorage.fromSafeMode=1;document.location.href="./wizard.html";break;case this.bApply3.id:case this.bApply4.id:if(this.safeModeIntervalID){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}this.el.remove();d=CComQIPtr(CoCreateInstance(Njl.CLSIDS.System.Frame),
"IExtNative").getNative().alarmbar;d.bShow.setVisible(false);d.bClose.setVisible(false);CComQIPtr(d,"IAlarmReporter").reportAlarm("Settings will save to disk once a volume is created.",1);break}},scope:this};for(var c=0;c<5;++c)this["bApply"+c]=new Ext.UI.Button(Ext.apply(a,{text:_TR("NEXT"),renderTo:this.bSafeModeNextIds["sm"+c].btnId}))},onLogInClick:function(){this.fromLogOutFun||window.location.reload()},onReconnectClick:function(a){a.preventDefault();this.setRestoreMode("polling",this.TR("CONNECTREPAIR_POLL_ATTEMPT"),
this.RESTORE_CYCLE_LIFETIME)},updateElement:function(a){if(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_TITLE")=="CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_TITLE")setTimeout(function(){this.updateElement(a)}.bind(this),100);else{a==3||a==4?this["bApply"+a].setText(_TR("CONTINUE")):this["bApply"+a].setText(_TR("NEXT"));Ext.get(Ext.get(this["elsm"+a].query(".repair-title")[0])).update(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_TITLE"));Ext.get(Ext.get(this["elsm"+a].query(".repair-secondTitle")[0])).update(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+
a+"_SECOND_TITLE"));Ext.get(Ext.get(this["elsm"+a].query(".repair-sm-content-block")[0])).update(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_CONTENT"));this["elsm"+a].removeClass("x-hide-display")}},logOut:function(a){var c=(new Date).getTime().toString(),d=!a?this.spSecurityManager.getLoginUserName():c;!a&&(a=location.href);if(Njl.isIE){document.execCommand("ClearAuthenticationCache","false");location.href=a}else(function(b){if(b){isTimeOut=false;b.open("GET",a,true,Njl.isSafari?"":d,c);b.send("");b.onreadystatechange=
function(){if(b.readyState==4){isTimeOut=true;location.href=a}};return 1}})(window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null)},setRestoreMode:function(a,c,d){this.rendered||this.render(document.body);this.elpoll.addClass("x-hide-display");this.elshutdown.addClass("x-hide-display");this.elfail.addClass("x-hide-display");this.ellogout.addClass("x-hide-display");for(var b=0;b<5;++b)this["elsm"+b].addClass("x-hide-display");switch(a){case "polling":this.elpoll.removeClass("x-hide-display");
this.startRestore(c,d);break;case "shutdown":this.elshutdown.removeClass("x-hide-display");break;case "fail":this.elfail.removeClass("x-hide-display");break;case "logout":this.ellogout.removeClass("x-hide-display");c=="1"?this.spSysManager.preLogout("pre-log-out"):this.logOut();break;case "elsm0":this.updateElement(0);break;case "elsm1":this.updateElement(1);break;case "elsm2":this.updateElement(2);break;case "elsm3":this.updateElement(3);break;case "elsm4":this.updateElement(4);break;default:break}},
startRestore:function(a,c){clearTimeout(this.finishProcId);this.finishProcId=setTimeout(function(){this.finishRestore(undefined)}.bind(this),c);this.elpollmsg.update(a);var d=100/c*1E3,b=0,e=this.elprogress.dom;clearInterval(this.restoreProcId);e.style.left="-100%";this.restoreProcId=setInterval(function(){b+=d;if(b<=100)e.style.left=b-100+"%"},1E3);this.waitRestore()},finishRestore:function(a,c){clearTimeout(this.waitRestoreProcId);clearTimeout(this.forceRestoreProcId);clearInterval(this.restoreProcId);
this.elprogress.dom.style.left=0;if(a)this.logOut(this.protocol+"//"+a+"/admin/index.html");else c||this.setRestoreMode("fail")},waitRestore:function(){this.forceRestoreProcId=setTimeout(function(){this.startFirstRestoreStep()}.bind(this),this.WAIT_RESTORE_TIMEOUT);this.updateDevstate("repair-wait-devstate")},startFirstRestoreStep:function(){clearTimeout(this.waitRestoreProcId);clearTimeout(this.forceRestoreProcId);setTimeout(function(){this.pollCurrentHost();this.startSecondRestoreStep()}.bind(this),
this.WAIT_DELAY)},startSecondRestoreStep:function(){this.pollDiscoverHost();this.startThirdRestoreStep()},startThirdRestoreStep:function(){this.pollHostRange()},pollCurrentHost:function(){clearTimeout(this.pollCurrentHostProcId);this.pollCurrentHostProcId=setTimeout(function(){!this.factory&&this.updateDevstate("repair-update-devstate")}.bind(this),this.POLL_CURRENT_HOST_DELAY)},pollDiscoverHost:function(){clearTimeout(this.pollDiscoverHostProcId);this.pollDiscoverHostProcId=setTimeout(function(){this.getSerialNumber()?
this.discover(this.getSerialNumber(),function(a){this.checkHosts(a,this.getSerialNumber(),function(c,d){d?this.finishRestore(c):this.pollDiscoverHost()}.bind(this))}.bind(this)):this.pollDiscoverHost()}.bind(this),this.POLL_DISCOVER_HOST_DELAY)},pollHostRange:function(){clearTimeout(this.pollHostRangeProcId);this.pollHostRangeProcId=setTimeout(function(){this.checkHosts(this.getIPRange(this.ip,!this.factory),this.getSerialNumber(),function(a,c){c?this.finishRestore(a):this.pollHostRange()}.bind(this))}.bind(this),
this.POLL_HOST_RANGE_DELAY)},processRestore:function(){this.process("polling",this.TR("CONNECTREPAIR_POLL_CONNECT"),false,this.RESTORE_CYCLE_LIFETIME)},processReboot:function(){if(this.firmware)this.process("polling",this.TR("CONNECTREPAIR_POLL_UPGRADE"),false,this.UPGRADE_CYCLE_LIFETIME);else if(this.factory){this.process("polling",this.TR("CONNECTREPAIR_POLL_FACTORY"),false,this.UPGRADE_CYCLE_LIFETIME);isTimeOut=true}else this.process("polling",this.TR("CONNECTREPAIR_POLL_RESTART"),false,this.REBOOT_CYCLE_LIFETIME)},
processShutdown:function(){this.process("shutdown",undefined,true)},process:function(a,c,d,b){if(!this.processed||d){this.processed=true;this.setRestoreMode(a,c,b)}},checkApache:function(a){Njl.lib.Ajax.request("GET",this.protocol+"//"+this.host,{success:function(){a(true)},failure:function(){a(false)},timeout:this.POLL_TIMEOUT})},checkIframe:function(a){if(Njl.isSecure){var c,d=Ext.id(),b=document.createElement("iframe"),e=function(f){clearTimeout(c);b.onload=b.onerror=undefined;document.body.removeChild(b);
a(f)};b.id=d;b.name=d;b.style.width="0px";b.style.height="0px";b.style.zIndex=-110;b.style.left="100px";b.style.top="100px";b.style.position="fixed";b.src="https://"+this.host+"/?_="+Date.now();b.onload=function(){try{b.contentDocument&&b.contentDocument.title=="NETGEAR ReadyNAS"?e(true):e(false)}catch(f){e(false)}};b.onerror=function(){e(false)};document.body.appendChild(b);c=setTimeout(function(){e(false)},this.POLL_TIMEOUT)}else a(false)},checkHosts:function(a,c,d){if(a.length>0)for(var b=this.checkHost,
e=0,f=a.length;e<f;++e)(function(g){setTimeout(function(){b(g,c,d)},e*50)})(a[e]);else d(undefined,false)},checkHost:function(a,c,d){Njl.isSecure?d(a,false):Njl.lib.Ajax.request("GET","http://"+a+":10000/nasService.xml",{success:function(b){b=(new Njl.Xml.document(b.responseText.replace('xmlns="urn:schemas-upnp-org:device-1-0"',""))).selectSingleNode("root/device/serialNumber");d(a,b&&c==b.getNodeText())},failure:function(){d(a,false)},timeout:this.POLL_TIMEOUT})},updateDevstate:function(a){this.spDevice.__s.sendXml(dpv.xmlEnvelope(String.format('<xs:get id="{0}" resource-id="DeviceState" resource-type="DeviceState"/>',
Njl.id())),a,undefined,undefined,undefined,this.POLL_TIMEOUT)},discover:function(a,c){if(Njl.isSecure)c([]);else{var d=new Njl.Crx.Connection;d.on("requestcomplete",function(b,e){b=(b=e?e.responseObject:undefined)?b.data:undefined;b=(b?b.items:[])[0];e=[];var f;if(b&&b.network)for(var g=0,h=b.network.length;g<h;++g)(f=b.network[g].IPv4_Address)&&e.push(f);c(e)}.bind(this));d.on("requestexception",function(){c([])}.bind(this));d.request({method:"GET",url:"https://test-radar.io.netgear.com/radar/v1/info?id="+
a,scriptTag:true,timeout:this.POLL_TIMEOUT})}},getIPRange:function(a,c){var d=[];if(this.isIP(a))for(var b=a.match(/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.)\d{1,3}$/)[1],e,f=0;f<255;++f){e=b+f;c&&e==a||d.push(e)}return d},isIP:function(a){return Njl.Utils.isValidIPAddress(a)},exclude:function(a,c){for(var d=[],b,e=0,f=a.length;e<f;++e){b=a[e];b!=c&&d.push(b)}return d},TR:function(a){var c=this.translate(a);if(a=="CONNECTREPAIR_FAIL_DESC"){a=document.links_cloud;var d;if(Njl.isWindows)d="RAIDar.exe";else if(Njl.isMac)d=
"RAIDar.dmg";c=String.format(c,"#reconnect",d?a+"/client/install/"+d:"http://www.readynas.com/downloads","https://kb.netgear.com/26883/ReadyNAS-OS-6-Admin-Page-is-offline")}return c},translate:function(a){var c=_TR(a);if(c==a)switch(a){case "CONNECTREPAIR_POLL_ATTEMPT":return"Attempting to reconnect to the ReadyNAS Admin Page...";case "CONNECTREPAIR_POLL_CONNECT":return"Connecting to the ReadyNAS Admin Page...";case "CONNECTREPAIR_POLL_RESTART":return"Wait while your ReadyNAS system is restarting.";
case "CONNECTREPAIR_POLL_UPGRADE":return"Wait while your ReadyNAS system is restarting and updating firmware.<br/>Warning: Do not power off your system during this process.";case "CONNECTREPAIR_POLL_FACTORY":return"Wait while your ReadyNAS system is restarting and being re-initialized to its factory default state.<br/>Warning: Do not power off your system during this process.";case "CONNECTREPAIR_SHUTDOWN_DESC":return"Your ReadyNAS is powering down now.<br/>Close this window and wait for system LEDs to turn off.";
case "CONNECTREPAIR_FAIL_TITLE":return"ReadyNAS Admin Page is offline";case "CONNECTREPAIR_FAIL_DESC":return'This error message means that the browser can\'t access your ReadyNAS storage system.<br/><br/>Check for these possible problems:<ul><li>Your ReadyNAS storage system is turned off. Check if the Power LED is lit. If it is not, turn the unit on and try again.</li><li>Your ReadyNAS system is still booting. Wait until the Power LED stops blinking.</li><li>Your ReadyNAS storage system is very busy, perhaps with scheduled backup jobs, snapshots, running apps or heavy user demands. If this is the case, try later when scheduled tasks are complete, when no apps are running, or when fewer users are accessing the storage system.</li><li>If none of the above applies, you can find <a href="{2}" target="_blank">help online</a>.</li></ul>';
case "CONNECTREPAIR_LOGOUT_TITLE":return"Your Admin Page session has ended.";case "CONNECTREPAIR_LOGOUT_DESC":return"Your ReadyNAS Admin Page session has ended either because you logged out or the Admin Page was idl for an hour.To log back into the Admin Page,click <strong>Login</strong>.";default:return a}return c},showSafeModePopUp:function(a){if(a==""){localStorage.removeItem("safeMode");if(this.safeModeIntervalID){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}}else{localStorage.safeMode=
1;localStorage.fromSafeMode!="1"&&localStorage.fromSafeModeWizard!="1"&&this.setRestoreMode("elsm"+a)}},IDeviceEvents:{OnConnectionLost:function(a,c){if(!this.processed&&(!c.__s.xmlResponse||c.__s.xmlResponse.status!=200&&c.__s.xmlResponse.status!=-1||!c.__s.xmlResponse.isAbort))this.updateDevstate("repair-confirm-devstate")},OnDeviceHalt:function(){this.processShutdown()},OnDeviceReboot:function(){this.processReboot()},OnDone:function(a,c,d){if(d=="repair-update-devstate")a==S_OK?this.finishRestore(this.host):
this.pollCurrentHost();else if(d=="repair-wait-devstate")if(a==S_OK){clearTimeout(this.waitRestoreProcId);this.waitRestoreProcId=setTimeout(function(){this.updateDevstate("repair-wait-devstate")}.bind(this),this.POLL_CURRENT_HOST_DELAY)}else this.startFirstRestoreStep();else d=="repair-confirm-devstate"&&a!=S_OK&&this.processRestore()}},ISysManagerEvents:{OnReady:function(a,c){if(c=="repair-update-sysinfo"){var d=CComQIPtr(this.spSysManager.getSysInfo(),"ISysInfo");this.setSerialNumber(d.getSerial());
a=d.getSafeMode();var b=d.getOSRootCorrupt();d=d.getReadOnlyDataVolumes();var e="";if(a=="1")if(b=="1"&&d=="1")e="4";else if(b=="1")e="3";else this.zfsDisksManager.updateDiskEnclosures("sync-update-zfsdisks-safemode");if(e!=""){this.showSafeModePopUp(e);if(typeof this.putDeviceCallBackFun=="function"){this.putDeviceCallBackFun();this.putDeviceCallBackFun=null}}}if(c=="home-update-hourmap"){this.hourmapManager=CComQIPtr(this.spSysManager.getHourMapInfo(),"ISysHourMapInfo");localStorage.setItem("enable24Hour",
this.hourmapManager.getEnable());localStorage.setItem("dataFormatType",this.hourmapManager.getFormatType())}c=="pre-log-out"&&this.logOut()}},IZFSDisksManagerEvents:{OnReady:function(a,c){a="";if(c=="sync-update-zfsdisks-safemode"){c=this.zfsDisksManager.getDiskEnclosures();for(var d=0;d<c.length;d++){var b=CComQIPtr(c[d],"IZFSDiskEnclosure").getSafeModeStatus();if(b=="2"){a="2";break}else switch(b){case "0":if(a!="1")a="0";break;case "1":a="1";break}}}a!=""&&this.showSafeModePopUp(a);return S_OK}},
IConnectRepair:{putDevice:function(a,c){if(typeof c=="function")this.putDeviceCallBackFun=c;this.spDevice&&CComQIPtr(this.spDevice,"INotifySink").Unadvise(this);this.spDevice=a;CComQIPtr(a,"INotifySink").Advise(this);this.spSysManager&&CComQIPtr(this.spSysManager,"INotifySink").Unadvise(this);this.spSysManager=a.getSystemManager();CComQIPtr(this.spSysManager,"INotifySink").Advise(this);this.zfsDisksManager=a.getZFSDisksManager();CComQIPtr(this.zfsDisksManager,"INotifySink").Advise(this);this.spSecurityManager=
a.getSecurityManager();CComQIPtr(this.spSecurityManager,"INotifySink").Advise(this);this.spSysManager.updateSysInfo("repair-update-sysinfo");this.spSysManager.updateHourMapInfo("home-update-hourmap");if(localStorage.fromSafeMode!="1"&&localStorage.fromSafeModeWizard!="1"&&!localStorage.safeModeIntervalID){var d=this.spSysManager;localStorage.safeModeIntervalID=this.safeModeIntervalID=setInterval(function(){if(localStorage.safeMode!="1"){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}else d.updateSysInfo("repair-update-sysinfo")},
5E3)}},displayDeviceHalt:function(){this.processShutdown()},displayDeviceReboot:function(){this.processReboot()}}});Ext.namespace("Ext.ConnectRepair");Ext.ConnectRepair.IConnectRepair=Njl.inherit(IExtNative,{IConnectRepair:{putDevice:function(){return E_NOTIMPL},displayDeviceHalt:function(){return E_NOTIMPL},displayDeviceReboot:function(){return E_NOTIMPL}}});var IConnectRepair=Ext.ConnectRepair.IConnectRepair;
Ext.namespace("Ext.Controls");Ext.Controls.IDateTimeWindow=Njl.inherit(IPromptWindow,{IDateTimeWindow:{Show:function(){return E_NOTIMPL},Hide:function(){return E_NOTIMPL},putDevice:function(){return E_NOTIMPL}}});var IDateTimeWindow=Ext.Controls.IDateTimeWindow;Ext.Controls.IDateTimeWindowEvents=Njl.inherit(IPromptWindowEvents,{IDateTimeWindowEvents:{OnTick:function(){return E_NOTIMPL}}});var IDateTimeWindowEvents=Ext.Controls.IDateTimeWindowEvents;Ext.namespace("Ext.Controls");
Ext.Controls.IPromptWindow=Njl.inherit(IExtNative,{IPromptWindow:{Show:function(){return E_NOTIMPL},Hide:function(){return E_NOTIMPL}}});var IPromptWindow=Ext.Controls.IPromptWindow;Ext.Controls.IPromptWindowEvents=Njl.inherit(IUnknown,{IPromptWindowEvents:{OnClosing:function(){return E_NOTIMPL},OnClosed:function(){return E_NOTIMPL},OnValidate:function(){return E_NOTIMPL}}});var IPromptWindowEvents=Ext.Controls.IPromptWindowEvents;Ext.namespace("Ext.Controls");
Ext.Controls.ILogDownloader=Njl.inherit(IExtNative,{ILogDownloader:{Initialize:function(){return E_NOTIMPL},Start:function(){return E_NOTIMPL},Stop:function(){return E_NOTIMPL}}});var ILogDownloader=Ext.Controls.ILogDownloader;Ext.namespace("Ext.Controls");Ext.Controls.IVersionTracker=Njl.inherit(IExtNative,{IVersionTracker:{CompareVersion:function(){return E_NOTIMPL}}});var IVersionTracker=Ext.Controls.IVersionTracker;Ext.namespace("Ext.Controls");
Ext.Controls.IRCRemoteAPI=Njl.inherit(IExtNative,{IRCRemoteAPI:{Initialize:function(){return E_NOTIMPL},IsInstalled:function(){return E_NOTIMPL},IsLogged:function(){return E_NOTIMPL},ConnectToDevice:function(){return E_NOTIMPL},OpenDevice:function(){return E_NOTIMPL},MapNetworkDrive:function(){return E_NOTIMPL},UnMapNetworkDrive:function(){return E_NOTIMPL},GetNetworkDrives:function(){return E_NOTIMPL},GetIP:function(){return E_NOTIMPL}}});var IRCRemoteAPI=Ext.Controls.IRCRemoteAPI;
Ext.Controls.IRCRemoteAPIEvents=Njl.inherit(IUnknown,{IRCRemoteAPIEvents:{OnStateChange:function(){return E_NOTIMPL}}});var IRCRemoteAPIEvents=Ext.Controls.IRCRemoteAPIEvents;Njl.namespace("Njl","Njl.CLSIDS","Njl.CLSIDS.Controls");Njl.CLSIDS.Controls.ControlsBar="Controls.ControlsBar";Njl.CLSIDS.Controls.PromptWindow="Controls.PromptWindow";Njl.CLSIDS.Controls.DateTimeWindow="Controls.DateTimeWindow";Njl.CLSIDS.Controls.AlarmBar="Controls.AlarmBar";Njl.CLSIDS.Controls.LogDownloader="Controls.LogDownloader";
Njl.CLSIDS.Controls.AuditLogDownloader="Controls.AuditLogDownloader";Njl.CLSIDS.Controls.VersionTracker="Controls.VersionTracker";Njl.CLSIDS.Controls.FirmwareWindow="Controls.FirmwareWindow";Njl.CLSIDS.Controls.LangMenuItems="Controls.LangMenuItems";Njl.CLSIDS.Controls.RCLangMenuItems="Controls.RCLangMenuItems";Njl.CLSIDS.Controls.RCThemeMenuItems="Controls.RCThemeMenuItems";Njl.CLSIDS.Controls.PowerMenuItems="Controls.PowerMenuItems";Njl.CLSIDS.Controls.UserMenuItems="Controls.UserMenuItems";
Njl.CLSIDS.Controls.SSHKeyDownload="Controls.SSHKeyDownload";Njl.CLSIDS.Controls.RCRemoteAPI="Controls.RCRemoteAPI";Njl.CLSIDS.Controls.BackupDownloader="Controls.BackupDownloader";Njl.CLSIDS.Controls.ADSIDMapDownloader="Controls.ADSIDMapDownloader";Ext.namespace("Ext.Controls");
Ext.Controls.DateTimeWindow=Njl.inherit(Njl.CLSIDS.Controls.DateTimeWindow,CComEventsObjectRoot("IDateTimeWindowEvents"),Ext.UI.Window,IDateTimeWindow,ISingleTone,ISysManagerEvents,{help:"common_wnd_datetime",constructor:function(a){this.config=Ext.isDefined(a)?a:{};this.dtModHour=new Ext.UI.SpinnerField({width:48,minValue:1,maxValue:12,selectOnFocus:true,listeners:{scope:this,spin:this.stopClock},fnFormat:function(b){return b<10?"0"+b:b}});this.dtModMin=new Ext.UI.SpinnerField({width:48,minValue:0,
maxValue:59,selectOnFocus:true,listeners:{scope:this,spin:this.stopClock},fnFormat:function(b){return b<10?"0"+b:b}});this.dtModSec=new Ext.UI.SpinnerField({width:48,minValue:0,maxValue:59,selectOnFocus:true,listeners:{scope:this,spin:this.stopClock},fnFormat:function(b){return b<10?"0"+b:b}});this.dtModAMPM=new Ext.UI.ComboBox({cellCls:"x-datetimewindow-newpref-cell",width:55,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id",
"text"],data:[[0,_TR("AM")],[1,_TR("PM")]]}),valueField:"id",displayField:"text",value:0,listeners:{scope:this,select:this.stopClock}});this.sysDate=new Ext.UI.DatePicker({listeners:{scope:this,select:function(){this.isDateChanged=true}}});this.dtUse24Format=new Ext.UI.Checkbox({boxLabel:_TR("USE_24HOUR_FORMAT"),listeners:{scope:this,check:function(b,c){this.dtModHour.maxValue=c?23:12;this.dtModHour.minValue=c?0:1;b=+this.dtModHour.getValue();b=!c&&b>12?b-12:this.dtModAMPM.getValue()==1&&b!=12?b+
12:b;this.dtModHour.setValue(b);this.dtModAMPM.setVisible(!c);Ext.getDom(this.ampmId).className=c?"":this.isAM?"x-datetimewindow-watch-AM":"x-datetimewindow-watch-PM"}}});a=new Date;a.format("M d, Y");a.format("d M Y");a.format("Y M d");this.dtFormatType=new Ext.UI.ComboBox({cellCls:"x-datetimewindow-newpref-cell",width:206,typeAhead:true,triggerAction:"all",mode:"local",store:new Ext.data.ArrayStore({fields:["id","text"],data:[[1,"mm dd,yyyy"],[2,"dd mm yyyy"],[3,"yyyy mm dd"]]}),valueField:"id",
displayField:"text",listeners:{scope:this}});this.dtModTZ=new Ext.UI.ComboBox({cellCls:"x-datetimewindow-newpref-cell",width:288,typeAhead:true,triggerAction:"all",lazyRender:false,mode:"local",autoSelect:true,resizable:true,tpl:'<tpl for="."><div title="{text}" class="x-combo-list-item">{text}</div></tpl>',store:Njl.TimeZoneArray(),valueField:"id",displayField:"text",value:"US/Pacific",listeners:{select:this.tzChanged,scope:this}});this.dtModSyncNTP=new Ext.UI.Checkbox({boxLabel:_TR("FRONTVIEW_DATETIME_SYNCCLOCK"),
checked:true,listeners:{scope:this,check:function(){this.ntpChanged();this.updateTimeComStatus()}}});this.dtModServerNTP1=new Ext.UI.TextField({cls:"x-datetimewindow-ntpserver",width:220,listeners:{scope:this,change:this.ntpChanged}});this.dtModServerNTP2=new Ext.UI.TextField({cls:"x-datetimewindow-ntpserver",width:220,listeners:{scope:this,change:this.ntpChanged}});this.dtModServerNTP3=new Ext.UI.TextField({cls:"x-datetimewindow-ntpserver",width:220,listeners:{scope:this,change:this.ntpChanged}});
this.config=Ext.apply({bufferResize:0,title:_TR("FRONTVIEW_DATETIME_SETTINGS"),modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,stateful:false,onEsc:this.hide,closeAction:"hide",fbar:[{xtype:"uibutton",text:_TR("APPLY"),listeners:{scope:this,click:this.applyDateTimeChanges},acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),listeners:{scope:this,click:function(){this.runClock=true;this.isDateChanged=this.isTZChanged=this.isNTPChanged=false;this.hide()}},cancelbtn:true}],
items:[{xtype:"container",layout:"table",layoutConfig:{columns:3},items:[{xtype:"container",layout:"table",items:[this.sysDate]},{xtype:"box",width:25},{xtype:"container",layout:"table",layoutConfig:{columns:1},items:[{xtype:"container",id:this.clockId=Ext.id(),width:222,height:66,style:{paddingTop:"13px",paddingLeft:"13px"},cls:"x-datetimewindow-clock-bg",html:'<div id="'+(this.hourId0=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style=""></div><div id="'+(this.hourId1=
Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 4px"></div><div id="'+(this.minId0=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 12px"></div><div id="'+(this.minId1=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 4px"></div><div id="'+(this.secId0=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 12px"></div><div id="'+
(this.secId1=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 4px"></div><div id="'+(this.ampmId=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-timeAM" style="padding-left: 10px"></div>'},{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 10px 0px 17px 0px; border-spacing: 5px;"},columns:4},items:[this.dtModHour,this.dtModMin,this.dtModSec,this.dtModAMPM]},{xtype:"container",layout:"table",layoutConfig:{columns:1},
items:[this.dtUse24Format,{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:""},columns:2},items:[{xtype:"box",html:_TR("DATE_FORMAT_LABEL")+_TR("COLON"),style:"padding-left:0",cls:"x-datetimewindow-ntpserver-label"},this.dtFormatType]},{xtype:"box",html:_TR("TIME_ZONE_UC")+_TR("COLON"),style:"text-align: left",cls:"x-datetimewindow-label-timezone"},this.dtModTZ,{xtype:"box",height:15},this.dtModSyncNTP,{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:""},columns:2},
items:[{xtype:"box",html:_TR("NTPSERVER1")+_TR("COLON"),cls:"x-datetimewindow-ntpserver-label"},this.dtModServerNTP1,{xtype:"box",html:_TR("NTPSERVER2")+_TR("COLON"),cls:"x-datetimewindow-ntpserver-label"},this.dtModServerNTP2,{xtype:"box",html:_TR("NTPSERVER3")+_TR("COLON"),cls:"x-datetimewindow-ntpserver-label"},this.dtModServerNTP3]}]}]}]}]},this.config);Ext.Controls.DateTimeWindow.superclass.constructor.call(this,this.config)},initComponent:function(){Ext.Controls.DateTimeWindow.superclass.initComponent.apply(this,
arguments);this.on("close",this.onclosed,this);this.on("show",this.onshowed,this);this.on("hide",this.onhidden,this);this.on("afterrender",this.onrendered,this);this.initializeClock=true;this.startClock()},ISysManagerEvents:{OnNTPending:function(){return S_OK},OnNTFailed:function(a,b,c){switch(c){case "datetimewnd-update-datetime":_TRACE("Failed to update system clock from device.","Ext.Controls.DateTimeWindow::ISysManagerEvents",_TRACE.ERROR);break;case "datetimewnd-commit-datetime":_TRACE("Failed to commit system clock from device.",
"Ext.Controls.DateTimeWindow::ISysManagerEvents",_TRACE.ERROR);break;case "datetimewnd-update-timezone":_TRACE("Failed to update timezone from device.","Ext.Controls.DateTimeWindow::ISysManagerEvents",_TRACE.ERROR);break;case "datetimewnd-commit-timezone":_TRACE("Failed to commit timezone from device.","Ext.Controls.DateTimeWindow::ISysManagerEvents",_TRACE.ERROR);break;case "datetimewnd-update-ntp":_TRACE("Failed to update ntp from device.","Ext.Controls.DateTimeWindow::ISysManagerEvents",_TRACE.ERROR);
break;case "datetimewnd-commit-ntp":_TRACE("Failed to commit ntp from device.","Ext.Controls.DateTimeWindow::ISysManagerEvents",_TRACE.ERROR);break}return S_OK},OnReady:function(a,b){switch(b){case "datetimewnd-update-datetime":this.clockManager=CComQIPtr(this.spSysManager.getClock(),"ISysClock");this.clockReady=true;this.dtYear=this.clockManager.getYear();this.dtMonthDigit=this.clockManager.getMonth();this.dtMonth=this.getMonthString(this.dtMonthDigit);this.dtDay=this.clockManager.getDay();this.dtHour=
this.clockManager.getHour();this.dtMin=this.clockManager.getMinute();this.dtSec=this.clockManager.getSecond();this.sysDate.todayDate=new Date(this.dtYear,this.dtMonthDigit-1,this.dtDay);this.isAM=true;a=_TR("AM");if(this.dtHour>12){this.dtHour%=12;this.isAM=false;a=_TR("PM")}else if(this.dtHour==12){this.isAM=false;a=_TR("PM")}else if(this.dtHour==0)this.dtHour=12;this.updateDigiClock();break;case "datetimewnd-commit-datetime":document.getElementById("csrfIW")&&document.getElementById("csrfIW").contentWindow.location.reload();
setTimeout(function(){this.spSysManager.updateClock("datetimewnd-update-datetime");this.callNextMethod()}.bind(this),1E3);break;case "datetimewnd-update-timezone":this.tzManager=CComQIPtr(this.spSysManager.getTimeZone(),"ISysTZone");if(this.options.tz!=undefined)this.dtModTZ.setValue(this.options.tz);else{a=this.tzManager.getTimeZoneName();a=a=="Kwajalein"?"Pacific/Kwajalein":a;this.dtModTZ.setValue(a)}break;case "datetimewnd-commit-timezone":this.spSysManager.updateClock("datetimewnd-update-datetime");
this.callNextMethod();break;case "datetimewnd-update-hourmap":this.hourmapManager=CComQIPtr(this.spSysManager.getHourMapInfo(),"ISysHourMapInfo");this.dtUse24Format.setValue(this.hourmapManager.getEnable()=="true");a=this.hourmapManager.getFormatType();this.dtFormatType.setValue(a=="0"?1:+a);break;case "datetimewnd-update-ntp":this.ntpManager=CComQIPtr(this.spSysManager.getNTPInfo(),"ISysNTPInfo");if(this.options.syncNTP!=undefined){this.dtModSyncNTP.checked=this.options.syncNTP;this.dtModSyncNTP.setValue(this.options.syncNTP);
this.isNTPChanged=true}else if(this.ntpManager.getEnable()=="true"){this.dtModSyncNTP.checked=true;this.dtModSyncNTP.setValue(true);a=this.ntpManager.getServers();this.dtModServerNTP1.setValue(a[0]==E_FAIL?"":a[0]);this.dtModServerNTP2.setValue(a[1]==E_FAIL?"":a[1]);this.dtModServerNTP3.setValue(a[2]==E_FAIL?"":a[2])}else{this.dtModSyncNTP.checked=false;this.dtModSyncNTP.setValue(false);this.dtModServerNTP1.setValue("");this.dtModServerNTP2.setValue("");this.dtModServerNTP3.setValue("")}this.updateTimeComStatus();
break;case "datetimewnd-commit-ntp":this.spSysManager.updateClock("datetimewnd-update-datetime");this.callNextMethod();break}return S_OK},OnDone:function(a,b,c){switch(c){case "datetimewnd-update-datetime":case "datetimewnd-commit-datetime":case "datetimewnd-update-timezone":case "datetimewnd-commit-timezone":case "datetimewnd-update-ntp":case "datetimewnd-commit-ntp":case "datetimewnd-update-hourmap":case "datetimewnd-commit-hourmap":if(a!=S_OK)(b=CComQIPtr(b,"IProtocol").getLastNMLError())&&Ext.UI.MessageBox.show({title:_TR("ERROR"),
msg:_TR(b.getErrorCode()),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300});break;default:break}if(c=="datetimewnd-commit-hourmap"&&a==S_OK){localStorage.setItem("enable24Hour",this.dtUse24Format.getValue());localStorage.setItem("dataFormatType",this.dtFormatType.getValue())}return S_OK}},applyDateTimeChanges:function(){this.isTZChanged?Ext.UI.MessageBox.info({title:_TR("I_SYSTEM_TZ"),msg:_TR("I_SYSTEM_TZ_WARNING"),fn:function(){this.applyDateTimeChanges2()},scope:this}):this.applyDateTimeChanges2()},
applyDateTimeChanges2:function(){this.seqCallArray=[];this.seqCallArray.push("commitHourMapInfo");this.isNTPChanged&&this.seqCallArray.push("commitNTP");this.isTZChanged&&this.seqCallArray.push("commitTimeZone");if(this.isDateChanged||!this.runClock)this.seqCallArray.push("commitTime");this.callNextMethod();this.runClock=true;this.isDateChanged=this.isTZChanged=this.isNTPChanged=false;this.apply(new Ext.Controls.PromptWindowEventArgs({syncNTP:this.dtModSyncNTP.getValue(),tz:this.dtModTZ.getValue()}))},
callNextMethod:function(){for(;this.seqCallArray&&this.seqCallArray.length>0;)this[this.seqCallArray.shift()]()},commitTime:function(){this.clockManager.putYear(this.sysDate.getValue().getFullYear());this.clockManager.putMonth(this.sysDate.getValue().getMonth()+1);this.clockManager.putDay(this.sysDate.getValue().getDate());var a=this.dtModHour.getValue();if(this.dtUse24Format.getValue())this.clockManager.putHour(a);else if(this.dtModAMPM.getValue()==0)a==12?this.clockManager.putHour(0):this.clockManager.putHour(a);
else a==12?this.clockManager.putHour(a):this.clockManager.putHour(a+12);this.clockManager.putMinute(this.dtModMin.getValue());this.clockManager.putSecond(this.dtModSec.getValue());this.spSysManager.commitClock("datetimewnd-commit-datetime")},commitTimeZone:function(){this.tzManager.putTimeZoneName(this.dtModTZ.getValue());this.spSysManager.commitTimeZone("datetimewnd-commit-timezone")},commitNTP:function(){if(this.dtModSyncNTP.getValue()){this.ntpManager.putEnable("true");this.ntpManager.putServers([this.dtModServerNTP1.getValue(),
this.dtModServerNTP2.getValue(),this.dtModServerNTP3.getValue()])}else{this.ntpManager.putEnable("false");this.ntpManager.putServers("","","")}this.spSysManager.commitNTPInfo("datetimewnd-commit-ntp")},commitHourMapInfo:function(){this.hourmapManager.putEnable(this.dtUse24Format.getValue()+"");this.hourmapManager.putFormatType(this.dtFormatType.getValue());this.spSysManager.commitHourMapInfo("datetimewnd-commit-hourmap")},tzChanged:function(){this.isTZChanged=true},ntpChanged:function(){this.isNTPChanged=
true},updateTimeComStatus:function(){var a=this.dtModSyncNTP.getValue();this.dtModHour.setDisabled(a);this.dtModMin.setDisabled(a);this.dtModSec.setDisabled(a);this.dtModAMPM.setDisabled(a);this.sysDate.setDisabled(a);this.dtModServerNTP1.setDisabled(!a);this.dtModServerNTP2.setDisabled(!a);this.dtModServerNTP3.setDisabled(!a)},fillZeroDigit:function(a){a=a||"00";return a.toString().length==2?a:"0"+a},updateDigiClock:function(){if(this.rendered){var a=this.dtUse24Format.getValue(),b=this.dtHour.toString(),
c=this.dtMin.toString(),d=this.dtSec.toString();if(a)if(this.isAM){if(b==12&&this.preHour!="11")b="00"}else if(b==12&&c=="0"&&d=="0"&&this.preHour!="12")b="00";else if(b!=12)b=+b+12+"";b=("00"+b).substr(-2);Ext.getDom(this.hourId0).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+b[0];Ext.getDom(this.hourId1).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+b[1];Ext.getDom(this.minId0).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+
(c&&c.length==2?c[0]:"0");Ext.getDom(this.minId1).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+c[c&&c.length==2?1:0];Ext.getDom(this.secId0).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+(d&&d.length==2?d[0]:"0");Ext.getDom(this.secId1).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+d[d&&d.length==2?1:0];Ext.getDom(this.ampmId).className=a?"":this.isAM?"x-datetimewindow-watch-AM":"x-datetimewindow-watch-PM";if(this.runClock){this.dtModHour.maxValue=
a?23:12;this.dtModHour.minValue=a?0:1;var e=+this.dtHour;if(a)if(this.isAM){if(e==12&&this.preHour!="11")e=0}else if(e==12&&c=="0"&&d=="0"&&this.preHour!="12")e=0;else if(e!=12)e+=12;this.dtModHour.setValue(e);this.dtModMin.setValue(this.dtMin);this.dtModSec.setValue(this.dtSec);this.dtModAMPM.setVisible(!a);if(this.isAM)if(this.dtModAMPM.disabled){this.dtModAMPM.setDisabled(false);this.dtModAMPM.setValue(0);this.dtModAMPM.setDisabled(true)}else this.dtModAMPM.setValue(0);else if(this.dtModAMPM.disabled){this.dtModAMPM.setDisabled(false);
this.dtModAMPM.setValue(1);this.dtModAMPM.setDisabled(true)}else this.dtModAMPM.setValue(1)}this.preHour=b}},apply:function(a){if(a.args){a.args.delegatename=this.options.delegatename;a.args.delegateparam=this.options.delegateparam}else a.setArgs({delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this.onclosing(a)},IDateTimeWindow:{Show:function(a,b){this.options=b;this.type=a;this.show();this.center();return S_OK},Hide:function(){this.apply(new Ext.ShareSubSys.PromptWindowEventArgs);
return S_OK},putDevice:function(a){this.spDevice&&CComQIPtr(this.spDevice.getSystemManager(),"INotifySink").Unadvise(this);if(this.spDevice=a){this.spSysManager=this.spDevice.getSystemManager();CComQIPtr(this.spSysManager,"INotifySink").Advise(this)}}},clockTick:function(){if(this.initializeClock){this.dtSec=0;this.spSysManager&&this.spSysManager.updateClock("datetimewnd-update-datetime");this.initializeClock=false}else{this.dtSec++;if(this.dtSec==60){setTimeout(function(){this.spSysManager&&this.spSysManager.updateClock("datetimewnd-update-datetime")}.bind(this),
100);this.dtSec=0;this.dtMin++;if(this.dtMin==60){this.dtMin=0;this.dtHour++;if(this.dtHour==24){var a=this.sysDate.getValue().add(Date.DAY,1);this.dtMonth=this.getMonthString(a.format("m"));this.sysDate.setValue(a);this.dtHour=0}}}if(this.clockReady){this.updateDigiClock();a=_TR("AM");this.isAM||(a=_TR("PM"));this.Fire("OnTick",[new Ext.Controls.PromptWindowEventArgs({year:this.dtYear,month:this.dtMonth,monthDigit:this.dtMonthDigit,day:this.dtDay,hour:this.dtHour,min:this.fillZeroDigit(this.dtMin),
sec:this.fillZeroDigit(this.dtSec),ampm:a})])}}},startClock:function(){var a=this;this.clockInterval=setInterval(function(){a.clockTick()},1E3)},stopClock:function(){this.runClock=false},getMonthString:function(a){switch(a){case "1":return _TR("JANUARY");case "2":return _TR("FEBRUARY");case "3":return _TR("MARCH");case "4":return _TR("APRIL");case "5":return _TR("MAY");case "6":return _TR("JUNE");case "7":return _TR("JULY");case "8":return _TR("AUGUST");case "9":return _TR("SEPTEMBER");case "10":return _TR("OCTOBER");
case "11":return _TR("NOVEMBER");case "12":return _TR("DECEMBER")}},onrendered:function(){this.runClock=true;this.isDateChanged=this.isNTPChanged=this.isTZChanged=false;this.sysDate.setTodayDate();this.sysDate.setValue(new Date(this.dtYear,this.dtMonthDigit-1,this.dtDay))},onshowed:function(){this.spSysManager&&this.spSysManager.updateTimeZone("datetimewnd-update-timezone");this.spSysManager&&this.spSysManager.updateNTPInfo("datetimewnd-update-ntp");this.spSysManager&&this.spSysManager.updateHourMapInfo("datetimewnd-update-hourmap")},
onclosing:function(a){this.Fire("OnClosing",[a]);a.getResult()==true&&this.hide()},onclosed:function(){this.Fire("OnClosed",[this])},onhidden:function(){this.Fire("OnClosed",[this])}});Ext.Controls.DateTimeWindow.DATETIME="DATETIME";Ext.namespace("Ext.Controls");
Ext.Controls.PromptWindow=Njl.inherit(Njl.CLSIDS.Controls.PromptWindow,CComEventsObjectRoot("IPromptWindowEvents"),Ext.UI.Window,IPromptWindow,{width:410,constructor:function(a){this.config=Ext.isDefined(a)?a:{};this.messageTmpl=new Ext.XTemplate('<table style="width: 100%;" cellspacing=0 cellpadding=0 border=0 >',"<tr>",'<td rowspan="2" valign=top style="width: 60px;" ><div id="'+(this.iconId=Ext.id())+'" class="{icon_class}"/></td>','<td valign=top id="'+(this.messagecntId=Ext.id())+'" class="{textwrap}" ><span id="'+
(this.messageId=Ext.id())+'" class="x-controls-prompt-message">{message_text}</span></td>',"</tr>","</table>");this.messageTmpl.compile();this.tooltipmessageTmpl=new Ext.XTemplate('<span id="'+(this.tooltipId=Ext.id())+'">{tooltip_message}</span>');this.tooltipmessageTmpl.compile();this.config=Ext.apply({bufferResize:0,title:_TR("SHARES"),width:this.width,minHeight:100,minWidth:300,boxMaxWidth:600,resizable:false,modal:true,closeAction:"hide",buttonAlign:"left",listeners:{scope:this,activate:this.onactivated},
keys:[{key:[Ext.EventObject.ENTER],scope:this,fn:this.onkeyenter},{key:[Ext.EventObject.ESC],scope:this,fn:this.oncancel}],fbar:[this.indicator=new Ext.BoxComponent({cls:"x-controls-prompt-progress-bg"}),"->",this.okBtn=new Ext.UI.Button({text:_TR("APPLY"),width:100,scope:this,handler:this.onapply,acceptbtn:true}),this.cancelBtn=new Ext.UI.Button({text:_TR("CANCEL"),width:100,listeners:{scope:this,click:this.oncancel},cancelbtn:true})],bodyCssClass:"x-promptwindow-body",layout:{type:"card",layoutOnCardChange:true},
activeItem:0,items:[this.message_error_warning_Container(),this.resetPassword()]},this.config);Ext.Controls.PromptWindow.superclass.constructor.call(this,this.config)},initComponent:function(){Ext.Controls.PromptWindow.superclass.initComponent.apply(this,arguments);this.on("close",this.onclosed,this);this.on("hide",this.onhidden,this)},initToolTip:function(a){if(Ext.isEmpty(this.errorTip))this.errorTip=new Ext.UI.ToolTip(null,{width:200,html:a})},message_error_warning_Container:function(){return this.message=
new Ext.BoxComponent({innerId:Ext.Controls.PromptWindow.MESSAGE,bufferResize:0,layout:"fit",html:this.messageTmpl.apply({icon_class:"",textwrap:"x-wrapword-spl",message_text:"",restart_check:"x-controls-prompt-restartcheck-disable"})})},resetPassword:function(){return{innerId:Ext.Controls.PromptWindow.RESETPSWD,bufferResize:0,xtype:"container",items:[this.pswdlbl=new Ext.BoxComponent({html:_TR("PASSWORD")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),
this.pswdText=new Ext.UI.TextField({width:183,inputType:"password",typeAhead:true,enableKeyEvents:true,eventId:"applyPswd",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.repswdlbl=new Ext.BoxComponent({html:_TR("RE_PASSWORD")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.repswdText=new Ext.UI.TextField({width:183,
inputType:"password",typeAhead:true,enableKeyEvents:true,eventId:"applyRePswd",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.questionlbl=new Ext.BoxComponent({html:_TR("RECOVERY_QUESTION")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.questionText=new Ext.UI.TextField({width:183,typeAhead:true,enableKeyEvents:true,
eventId:"applyQwest",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.answerlbl=new Ext.BoxComponent({html:_TR("RECOVERY_ANSWER")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.answerText=new Ext.UI.TextField({width:183,typeAhead:true,enableKeyEvents:true,eventId:"applyAnswer",listeners:{beforeclear:this.resetInvalidMark,
keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.emaillbl=new Ext.BoxComponent({html:_TR("RECOVERY_EMAIL")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.emailText=new Ext.UI.TextField({width:183,typeAhead:true,enableKeyEvents:true,eventId:"applyEmail",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},
cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.alertsAvailLabel=new Ext.BoxComponent({html:_TR("RECOVERY_WARNING"),cls:"x-controls-prompt-alerts-not-avail",colspan:2})],layout:"table",layoutConfig:{tableAttrs:{style:{width:"100%"}},columns:2}}},showIndicator:function(){if(Ext.isEmpty(this.progress))this.progress=new Ext.UI.LoadMask(this.indicator.el,{type:Ext.UI.LoadMask.MIDDLE,background:false,frame:false,msgCls:"ui-mask-style1"});this.progress.show()},hideIndicator:function(){Ext.isEmpty(this.progress)||
this.progress.hide()},disableCntrBtn:function(a,b){a?this.okBtn.disable():this.okBtn.enable();b?this.cancelBtn.disable():this.cancelBtn.enable()},getItemIndex:function(a){for(var b=0;b<this.items.length;b++)if(this.items.items[b].innerId==a)return b;return 0},setActiveItem:function(a){Ext.isNumber(a)||(a=this.getItemIndex(a));if(this.rendered)this.layout.setActiveItem(a);else this.activeItem=this.config.activeItem=a},setPromptMessage:function(a,b,c){c=c?"x-controls-prompt-restartcheck-disable":"x-controls-prompt-restartcheck-enable";
if(this.rendered){document.getElementById(this.iconId).className="x-controls-prompt-icon-"+a;document.getElementById(this.messagecntId).className=b.textwrap;document.getElementById(this.messageId).innerHTML=b.message}else this.message.html=this.message.initialConfig.html=this.messageTmpl.apply({icon_class:"x-controls-prompt-icon-"+a,textwrap:!Ext.isEmpty(b.textwrap)?b.textwrap:"x-wrapword-spl",message_text:b.message,restart_check:c})},setPromptButton:function(a,b,c,d){this.okBtn.setText(a);this.okBtn.setVisible(b);
this.cancelBtn.setText(c);this.cancelBtn.setVisible(d)},disablePromptButton:function(a,b){this.okBtn.setDisabled(a);this.cancelBtn.setDisabled(b)},restoreSize:function(){this.rendered&&this.setWidth(this.initialConfig.width)},reset:function(){this.resetInvalidMark();this.pswdText.clearInvalid();this.pswdText.reset();this.repswdText.clearInvalid();this.repswdText.reset();this.questionText.clearInvalid();this.questionText.reset();this.answerText.clearInvalid();this.answerText.reset();this.emailText.clearInvalid();
this.emailText.reset()},resetInvalidMark:function(){this.pswdlbl.removeClass("x-controls-prompt-label-error");this.repswdlbl.removeClass("x-controls-prompt-label-error");this.questionlbl.removeClass("x-controls-prompt-label-error");this.answerlbl.removeClass("x-controls-prompt-label-error");this.emaillbl.removeClass("x-controls-prompt-label-error");Ext.isEmpty(this.errorTip)||this.errorTip.resetTarget()},initMark:function(a){var b=Ext.get(this.tooltipId);b?this.tooltipmessageTmpl.overwrite(b,{tooltip_message:a.getMessage()}):
this.initToolTip(this.tooltipmessageTmpl.apply({tooltip_message:a.getMessage()}));return S_OK},initTipTarget:function(a){Ext.isEmpty(this.errorTip)||this.errorTip.initTarget(a)},assignMark:function(a){switch(this.type){case "RESETPSWD":if(a.getElementName()=="arg1"){this.pswdlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.pswdlbl.id)}if(a.getElementName()=="arg2"){this.repswdlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.repswdlbl.id)}if(a.getElementName()==
"arg3"&&this.options.isAlertAvailable){this.questionlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.questionlbl.id)}if(a.getElementName()=="arg4"&&this.options.isAlertAvailable){this.answerlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.answerlbl.id)}if(a.getElementName()=="arg5"&&this.options.isAlertAvailable){this.emaillbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.emaillbl.id)}break}return a},initPrompt:function(){var a=this.options.okbtn&&
this.options.okbtn.length>0?this.options.okbtn:_TR("YES"),b=this.options.cancelbtn&&this.options.cancelbtn.length>0?this.options.cancelbtn:_TR("NO");switch(this.type){case "QUESTION":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,true,b,true);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break;case "SHUTDOWN":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,false);this.setPromptButton(a,true,
b,!this.options.isreguired);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break;case "WARNING":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break;case "ERROR":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break;
case "MESSAGE":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break;case "RESTART":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,false);this.setPromptButton(a,true,b,!this.options.isreguired);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break;case "SYSUPDATE":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,
this.options,true);this.setPromptButton(_TR("UPDATE_ACT"),true,_TR("CANCEL"),true);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break;case "RESETPSWD":this.setTitle(this.options.caption,"");this.setPromptButton(_TR("APPLY"),true,_TR("CANCEL"),true);this.setActiveItem(Ext.Controls.PromptWindow.RESETPSWD);this.alertsAvailLabel.setVisible(!this.options.isAlertAvailable);this.questionText.setDisabled(!this.options.isAlertAvailable);this.answerText.setDisabled(!this.options.isAlertAvailable);
this.emailText.setDisabled(!this.options.isAlertAvailable);this.setWidth(480);break;case "SMARTAPP":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(Ext.Controls.PromptWindow.MESSAGE);break}},apply:function(a,b){switch(this.type){case "QUESTION":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "SHUTDOWN":a.setArgs({validatefunc:this.options.validatefunc,
delegatename:this.options.delegatename,delegateparam:this.options.delegateparam,arg1:false});this[b](a);break;case "WARNING":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "ERROR":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "MESSAGE":a.setArgs({validatefunc:this.options.validatefunc,
delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "RESTART":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam,arg1:false});this[b](a);break;case "SYSUPDATE":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "RESETPSWD":a.setArgs({validatefunc:this.options.validatefunc,
delegatename:this.options.delegatename,delegateparam:this.options.delegateparam,isAlertAvailable:this.options.isAlertAvailable,arg1:this.pswdText.getValue(),arg2:this.repswdText.getValue(),arg3:this.questionText.getValue(),arg4:this.answerText.getValue(),arg5:this.emailText.getValue()});this[b](a);break;case "SMARTAPP":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break}},beforeshow:function(a,b){this.options=
b;this.type=a;this.restoreSize();this.reset();this.initPrompt()},aftershow:function(a){switch(a){case "SMARTAPP":this.disablePromptButton(true,true);this.showIndicator();break}},initfocus:function(){},IPromptWindow:{Show:function(a,b){this.beforeshow(a,b);this.show();this.aftershow(a,b);this.center();Njl.isIE&&this.reset();this.pswdText&&this.pswdText.focus(false,true);return S_OK},Hide:function(){this.resetInvalidMark();this.apply(new Ext.Controls.PromptWindowEventArgs,"onclosing");return S_OK}},
onclose:function(){this.Fire("OnClosed",[this])},oncancel:function(){this.hide()},onkeyenter:function(){this.resetInvalidMark();this.onapply()},onapply:function(){this.resetInvalidMark();this.apply(new Ext.Controls.PromptWindowEventArgs,"onclosing")},onclosing:function(a){this.Fire("OnValidate",[a]);if(a.getResult()==true){this.Fire("OnClosing",[a]);this.hide()}else{this.initMark(a);this.assignMark(a)}return true},onvalidate:function(a){this.resetInvalidMark();this.Fire("OnValidate",[a]);if(a.getResult()!=
true){this.initMark(a);this.assignMark(a)}},onclosed:function(){this.onclose()},onhidden:function(){this.onclose()},onactivated:function(){this.initfocus.defer(1E3,this,[])},onspkeypress:function(a,b){switch(b.getKey()){case b.ESC:break}},onkeypress:function(){this.apply(new Ext.Controls.PromptWindowEventArgs,"onvalidate")}});Ext.Controls.PromptWindow.MESSAGE="MESSAGE";Ext.Controls.PromptWindow.WARNING="WARNING";Ext.Controls.PromptWindow.QUESTION="QUESTION";Ext.Controls.PromptWindow.SHUTDOWN="SHUTDOWN";
Ext.Controls.PromptWindow.ERROR="ERROR";Ext.Controls.PromptWindow.RESTART="RESTART";Ext.Controls.PromptWindow.SYSUPDATE="SYSUPDATE";Ext.Controls.PromptWindow.RESETPSWD="RESETPSWD";Ext.Controls.PromptWindow.SMARTAPP="SMARTAPP";
Ext.Controls.PromptWindowEventArgs=Ext.extend(Ext.util.Observable,{constructor:function(a){Ext.Controls.PromptWindowEventArgs.superclass.constructor.call(this);this.args=!Ext.isEmpty(a)?a:null;this.argName=this.message="";this.result=true},clear:function(){this.args=null;this.message="";this.result=true},getArgs:function(){return this.args},setArgs:function(a){return this.args=a},setMessage:function(a,b){this.argName=b;this.message=a},getMessage:function(){return this.message},getElementName:function(){return this.argName},
getResult:function(){return this.result},setResult:function(a){return this.result=a}});var PromptWindowEventArgs=Ext.Controls.PromptWindowEventArgs;Ext.namespace("Ext.Controls");
Ext.Controls.ControlsBar=Njl.inherit(Njl.CLSIDS.Controls.ControlsBar,Njl.JSCom.CComEventsObjectRoot,Ext.Component,IExtNative,IPromptWindowEvents,ISysManagerEvents,ISysAlertsManagerEvents,{constructor:function(a){this.html='<table style="display:none;" class="x-controlsbar" cellpadding="0" cellspacing="0"><tr><td id="'+(this.communityId="readynas-community-btn")+'" valign="middle" class="x-controlsbar-cell-community"><span class="x-controlsbar-cell-community-text">'+_TR("COMM_TITLE")+'</span></td><td id="'+
(this.profileId="profile-btn")+'" valign="middle" class="x-controlsbar-cell-profile"><span class="x-controlsbar-cell-profile-text">'+_TR("RC_ADMIN_PASSWORD")+'</span></td><td id="'+(this.langId="language-btn")+'" valign="middle" class="x-controlsbar-cell-lang"><span class="x-controlsbar-cell-lang-text">'+_TR("LANGUAGE")+'</span></td></tr></table><table id="'+(this.quickSearchTId=Ext.id())+'" cellpadding="0" cellspacing="0"><tr><td><div id="'+(this.quickSearchId=Ext.id())+'" class="x-controlsbar-search-input"></div><div id="'+
(this.quickSearchBtnId=Ext.id())+'" class="x-controlsbar-search-icon"></div></td></tr></table><table class="x-controlsbar-btns" cellpadding="0" cellspacing="0"><tr><td valign="bottom" class="x-controlsbar-cell-info"><div id="'+(this.welcomeId=Ext.id())+'" class="x-controlsbar-cell-welcome"></div></td><td style="display:none;" valign="middle" class="x-controlsbar-cell-info"><div id="'+(this.infoId="readynas-help-btn")+'" class="x-controlsbar-cell-info-icon"></div></td><td valign="middle" class="x-controlsbar-cell-info"><div id="'+
(this.userId="readynas-user-btn")+'" class="x-controlsbar-cell-user-icon"><div></div></div></td><td valign="middle" class="x-controlsbar-cell-info"><div id="'+(this.shutdownId="power-menu-btn")+'" class="x-controlsbar-cell-shutdown-icon"><div></div></div></td></tr></table>';a&&Njl.apply(this,a);Ext.Controls.ControlsBar.superclass.constructor.call(this);this.on("afterrender",function(){var b=Ext.EventManager.on;b(Ext.get(this.communityId),"click",this.onCommunityClicked,this);b(Ext.get(this.profileId),
"click",this.onProfileClicked,this);b(Ext.get(this.langId),"click",this.onLangClicked,this);Ext.HelpContext?Ext.HelpContext.reg(Ext.get(this.infoId)):b(Ext.get(this.infoId),"click",this.onInfoClicked,this);b(Ext.get(this.shutdownId),"click",this.onShutdownClicked,this);b(Ext.get(this.userId),"click",this.onUserClicked,this);new Ext.UI.ToolTip(this.communityId,{width:300,autowidth:false,html:_TR("COMM_DESC")});this.quickSearch=new Ext.UI.TextField({width:300,renderTo:this.quickSearchId,listeners:{blur:function(){setTimeout(function(){Ext.fly("divSearchBar").hide()},
150)},focus:function(d){d=Njl.Utils.Format.htmlEncode(d.el.dom.value);for(var e=Ext.fly("divSearchBar").select("span.x-controlsbar-search-span").elements,f=0,g=e.length;f<g;++f)e[f].innerHTML=d;localStorage.setItem("quickSearchValue",d);d.length>0&&Ext.fly("divSearchBar").show()},scope:this}});b(Ext.fly(this.quickSearchBtnId),"click",function(){this.quickSearch.getValue().length>0?this.quickSearch.focus():Ext.fly("divSearchBar").hide()},this);var c=this.spSYSManager.getSupportFileSearch();Rx.Observable.fromEvent(Ext.fly(this.quickSearchId).child("input").dom,
"keyup").filter(function(d){d=Njl.Utils.Format.htmlEncode(d.target.value);d.length<1?Ext.fly("divSearchBar").hide()&&localStorage.removeItem("quickSearchValue"):Ext.fly("divSearchBar").show();return d.length>0}).map(function(d){return d.target}).subscribe(function(d){var e=Ext.fly("divSearchBar").select("span.x-controlsbar-search-span").elements;d=Njl.Utils.Format.htmlEncode(d.value);for(var f=0,g=e.length;f<g;++f)e[f].innerHTML=d;localStorage.setItem("quickSearchValue",d);if(c!="1")Ext.get("divSearchBar-FS").dom.style.display=
"none"});localStorage.removeItem("quickSearchValue");localStorage.setItem("quickSearchId",this.quickSearchId)},this)},initComponent:function(){if(this.spDevice=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice")){this.spSYSManager=this.spDevice.getSystemManager();CComQIPtr(this.spSYSManager,"INotifySink").Advise(this)}Ext.Controls.ControlsBar.superclass.initComponent.call(this);this.createLangPopUpMenu();this.spAlertsManager=this.spSYSManager.getAlertsManager();CComQIPtr(this.spAlertsManager,
"INotifySink").Advise(this);this.spAlertsManager.updateConfig("query-alerts-config");this.spSecurityManager=this.spDevice.getSecurityManager();CComQIPtr(this.spSecurityManager,"INotifySink").Advise(this);this.spSecurityManager.UpdateLoginUserName("controlsbar-update-login-user-name")},onInfoClicked:function(){window.open(_TR("DOCS_URL"))},onUserClicked:function(){var a=Ext.get(this.userId).child("div");if(!this.userpopupmenu){var b=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.UserMenuItems),"IUserMenuItems");
b.setRenderDom(a);b.setHelpBtnId(this.infoId);this.userpopupmenu=new Ext.UI.Menu({cls:"x-system-menu",items:b.getItems()})}this.userpopupmenu.show(a)},onShutdownClicked:function(){if(!this.powerpopupmenu)this.powerpopupmenu=new Ext.UI.Menu({cls:"x-system-menu",items:CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.PowerMenuItems),"IPowerMenuItems").getItems()});this.powerpopupmenu.show(Ext.get(this.shutdownId).child("div"))},onExitClicked:function(){try{document.execCommand("ClearAuthenticationCache",
false)}catch(a){}Njl.lib.Ajax.request("GET",document.logouturl,{success:function(){this.clearAuthentication()}.bind(this),failure:function(){this.clearAuthentication()}.bind(this)},null,{headers:{}})},clearAuthentication:function(){try{window.location.reload(false)}catch(a){window.location.href=window.location.href}},onCommunityClicked:function(){window.open(_TR("COMM_URL"),"_blank")},onProfileClicked:function(){if(!this.secTab)this.secTab=CoCreateInstance(Njl.CLSIDS.Security.SecurityTab);CComQIPtr(this.secTab,
"IExtNative").getNative().on("tabactivate",this.onSecurityTabActivate,this);var a=CComQIPtr(CoCreateInstance(Njl.CLSIDS.System.Frame),"ISystemFrame");a&&a.activateTab(this.secTab)},onSecurityTabActivate:function(){if(this.secTab){var a=CComQIPtr(this.secTab,"IExtNative").getNative();a.un("tabactivate",this.onSecurityTabActivate,this);if(!this.usersTab)this.usersTab=CoCreateInstance(Njl.CLSIDS.Security.UsersTab);CComQIPtr(this.usersTab,"IExtNative").getNative().on("tabactivate",this.onUsersSubTabActivate,
this);a.selectTab(this.usersTab)}},onUsersSubTabActivate:function(){var a=CComQIPtr(this.usersTab,"IExtNative").getNative();a.un("tabactivate",this.onUsersSubTabActivate,this);a.getPanelByIndex(0).showAdminProperties(0)},createLangPopUpMenu:function(){for(var a=[],b=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.LangMenuItems),"ILangMenuItems").getItems(),c=0;c<b.length;++c)a.push(b[c]);this.langpopupmenu=new Ext.UI.Menu({cls:"x-system-menu x-controlsbar-langmenu",items:a})},onLangClicked:function(a){this.langpopupmenu.show(this.langId);
a.stopEvent();return false},IPromptWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a)},OnClosed:function(a){CComQIPtr(a,"INotifySink").Unadvise(this);return S_OK},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}},ISysManagerEvents:{OnDone:function(a,b,c){switch(c){case "refreshpswd":break}return S_OK}},ISysAlertsManagerEvents:{OnReady:function(a,b){a=CComQIPtr(a,"ISysAlertsManager");switch(b){case "query-alerts-config":a=
CComQIPtr(a.getConfig(),"ISysAlertsConfig");b=a.getServer();a=a.getFromName();this.isAlertAvailable=!!b&&b.length>0&&!!a&&a.length>0;break}return S_OK}},ISecurityManagerEvents:{OnReady:function(a,b){switch(b){case "controlsbar-update-login-user-name":Ext.get(this.welcomeId).update(_TR("WELCOME")+" "+this.spSecurityManager.getLoginUserName());break}return S_OK}}});Ext.namespace("Ext.Controls","Ext.Controls.Utils");
Ext.Controls.Utils.fileSize=function(a,b){try{b=b?1/b:10;if(Ext.Controls.Utils.fileSize.cache[a+"|"+b])return Ext.Controls.Utils.fileSize.cache[a+"|"+b];var c=Math.round(Math.log(b)/Math.log(10)),d=a;if(a<=0)d=a+"";else{var e=a/1024;if(e<1)d=a+" "+_TR("BYTES");else{var f=e/1024;if(f<1)d=e.toFixed(c)+" "+_TR("KB");else{e=f/1024;if(e<1)d=f.toFixed(c)+" "+_TR("MB");else{f=e/1024;d=f<1?e.toFixed(c)+" "+_TR("GB"):f.toFixed(c)+" "+_TR("TB")}}}}}catch(g){}return Ext.Controls.Utils.fileSize.cache[a+"|"+b]=
d};Ext.Controls.Utils.fileSize.cache={};
Ext.Controls.Utils.unixTime=function(a,b){try{b=b?1/b:1;var c=a/60;if(c<1){if(c>0)return a+" "+_TR("UNIXTIME_SECS");return a+""}var d=c/60;if(d<1)return Math.round(c*b)/b+" "+_TR("UNIXTIME_MINS");c=d/24;if(c<1)return Math.round(d*b)/b+" "+_TR("UNIXTIME_HOURS");var e=c/7;if(e<1)return Math.round(c*b)/b+" "+_TR("UNIXTIME_DAYS");d=c/30;if(d<1)return Math.round(e*b)/b+" "+_TR("UNIXTIME_WEEKS");c=c/365;if(c<1)return Math.round(d*b)/b+" "+_TR("UNIXTIME_MONTHS");return Math.round(c*b)/b+" "+_TR("UNIXTIME_YEARS")}catch(f){}return a};
Ext.Controls.Utils.isValidIQN=function(a){if(a.length<12)return false;var b,c;c=a.substring(0,11);a=a.substring(12);b=/^iqn\.\d{4}\-\d{2}$/;if(c.replace(b,"")!="")return false;b=c.substring(9,11);b=parseInt(b);if(b===NaN||b===undefined||b===null||b<0||b>12)return false;b=/[a-zA-Z0-9\-\.:]/g;c=/[\-\.:]/g;if(a.replace(b,"")!=""||a.replace(c,"")=="")return false;return true};
Ext.Controls.Utils.getDeviceCls=function(a,b,c){var d={readynaspro2:"x-controls-device-pro2",readynaspro4:"x-controls-device-pro4",readynaspro6:"x-controls-device-pro6",readynas102:"x-controls-device-pro2",readynas104:"x-controls-device-pro4",readynas202:"x-controls-device-pro2",readynas204:"x-controls-device-pro4",readynas214:"x-controls-device-pro4",readynas312:"x-controls-device-pro2",readynas314:"x-controls-device-pro4",readynas316:"x-controls-device-516",readynas422:"x-controls-device-526",readynas424:"x-controls-device-526",
readynas426:"x-controls-device-526",readynas428:"x-controls-device-526",readynas516:"x-controls-device-516",readynas716:"x-controls-device-516",readynas524x:"x-controls-device-526",readynas526x:"x-controls-device-526",readynas528x:"x-controls-device-526",readynas624x:"x-controls-device-526",readynas626x:"x-controls-device-526",readynas628x:"x-controls-device-526",readynas2120:"x-controls-device-5200",readynas2120v2:"x-controls-device-5200",readynas2304:"x-controls-device-5200",readynas2312:"x-controls-device-rr2312",
readynas3130:"x-controls-device-5200",readynas3138:"x-controls-device-5200",readynas3220:"x-controls-device-3200",readynas3312:"x-controls-device-3200",readynas3312v2:"x-controls-device-3200",readynasrr3312:"x-controls-device-3200",readynas4220:"x-controls-device-3200",readynas4220s:"x-controls-device-3200",readynas4220x:"x-controls-device-3200",readynas4312:"x-controls-device-3200",readynas4312v2:"x-controls-device-3200",readynasrr4312:"x-controls-device-3200",readynas4312s:"x-controls-device-3200",
readynasrr4312s:"x-controls-device-3200",readynas4312x:"x-controls-device-3200",readynasrr4312x:"x-controls-device-3200",readynasrr4360:"x-controls-device-rr4360",readynasrr4360s:"x-controls-device-rr4360",readynasrr4360x:"x-controls-device-rr4360",r6100:"x-controls-device-r6300",r6220:"x-controls-device-r6300",r6250:"x-controls-device-r6300",r6300v2:"x-controls-device-r6300",r6400:"x-controls-device-r7000",r6400v2:"x-controls-device-r7000",r6700:"x-controls-device-r6300",r6700v2:"x-controls-device-r7000",
r6800:"x-controls-device-r7000",r6900:"x-controls-device-r7000",r6900p:"x-controls-device-r7000",d6400:"x-controls-device-r6300",r7000:"x-controls-device-r7000",r7000p:"x-controls-device-r7000",r7100lg:"x-controls-device-r7000",r7300:"x-controls-device-r7000",d7000:"x-controls-device-r7000",d7000v2:"x-controls-device-r7000",r7500:"x-controls-device-r7500",r7500v2:"x-controls-device-r7500",r7800:"x-controls-device-r7500",d7800:"x-controls-device-r7500",r7900:"x-controls-device-r8000",r7900p:"x-controls-device-r8000",
r8000:"x-controls-device-r8000",r8000p:"x-controls-device-r8000",gr8000p:"x-controls-device-gr8000p",r8300:"x-controls-device-r8500",r8500:"x-controls-device-r8500",d8500:"x-controls-device-r8500",r8900:"x-controls-device-r9000",r9000:"x-controls-device-r9000",r9500:"x-controls-device-r9500",defaultCls:"x-controls-device-pro2"};if(a){a=(a+"").toLowerCase().replace(/\s/g,"");a.indexOf("readynas")==-1&&(d.defaultCls="x-controls-device-r7000")}b||(b=128);a=d[a||""]||d.defaultCls;a+="-"+b;if(c=="backup")a=
"x-controls-device-backup "+a;else if(c=="hoverable")a="x-controls-device-h "+a;else if(c=="blue")a="x-controls-device-b "+a;return a};Ext.Controls.Utils.isDeviceRackmount=function(a){a=Ext.Controls.Utils.getDeviceCls(a,128);return a=="x-controls-device-5200-128"||a=="x-controls-device-3200-128"||a=="x-controls-device-rr4360-128"||a=="x-controls-device-rr2312-128"};Ext.Controls.Utils.saveToStorage=function(a,b){window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem(a,b)};
Ext.Controls.Utils.loadFromStorage=function(a){var b="";if(window.localStorage&&window.localStorage.getItem)b=window.localStorage.getItem(a);return b};
Ext.Controls.BackupDownloader=Njl.inherit(Njl.CLSIDS.Controls.BackupDownloader,Njl.JSCom.CComObjectRoot,Ext.data.Connection,ILogDownloader,ISingleTone,{constructor:function(){Ext.Controls.BackupDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadbackups" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="" name="download" resource-id="Backup" resource-type="ConfigBackup"&gt;','&lt;everything enable="{everything}"/&gt;','&lt;shares enable="{shares}"/&gt;','&lt;services enable="{services}"/&gt;','&lt;user_group enable="{user_group}"/&gt;','&lt;network enable="{network}"/&gt;','&lt;misc enable="{misc}"/&gt;','&lt;data enable="{data}"/&gt;',"&lt;/xs:custom&gt;","&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+
'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD BACKUPS" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a,b){function c(){var f=this;Ext.EventManager.removeListener(f.frame,"load",c,f);setTimeout(function(){Ext.removeNode(f.frame);Ext.removeNode(f.form)},100)}this.StopFrame();b=b||{};if(b.everything!==true)b.everything=false;var d=false;for(var e in b)if(b.everything===true)d=b[e]=true;else if(b[e]!==true)b[e]=false;else d=true;if(d){d=document;e=Ext.id();
this.frame=d.createElement("iframe");d.body.appendChild(this.frame);Ext.fly(this.frame).set({id:e,name:e,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[e].name=e;this.form=d.createElement("form");d.body.appendChild(this.form);Ext.fly(this.form).set({target:e,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply(b);Ext.EventManager.on(this.frame,"load",c,this);this.form.submit();return e}},Stop:function(){this.StopFrame();
return S_OK}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
Ext.Controls.LogDownloader=Njl.inherit(Njl.CLSIDS.Controls.LogDownloader,Njl.JSCom.CComObjectRoot,Ext.data.Connection,ILogDownloader,ISingleTone,{constructor:function(){Ext.Controls.LogDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadlogs" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="opid" name="download" resource-id="Logs" resource-type="Log_Collection"/&gt;',"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD LOGS" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a){function b(){var e=this;Ext.EventManager.removeListener(e.frame,"load",b,e);setTimeout(function(){Ext.removeNode(e.frame);
Ext.removeNode(e.form)},100)}this.StopFrame();var c=document,d=Ext.id();this.frame=c.createElement("iframe");c.body.appendChild(this.frame);Ext.fly(this.frame).set({id:d,name:d,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[d].name=d;this.form=c.createElement("form");c.body.appendChild(this.form);Ext.fly(this.form).set({target:d,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply();Ext.EventManager.on(this.frame,
"load",b,this);this.form.submit();return d},Stop:function(){this.StopFrame();return S_OK}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
Ext.Controls.AuditLogDownloader=Njl.inherit(Njl.CLSIDS.Controls.AuditLogDownloader,Njl.JSCom.CComObjectRoot,Ext.data.Connection,ILogDownloader,ISingleTone,{constructor:function(){Ext.Controls.AuditLogDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadauditlogs" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="download" resource-id="Audit" resource-type="AuditLog_Collection"/&gt;',"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD AUDIT LOGS" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a){function b(){var e=this;Ext.EventManager.removeListener(e.frame,"load",b,e);setTimeout(function(){Ext.removeNode(e.frame);
Ext.removeNode(e.form)},100)}this.StopFrame();var c=document,d=Ext.id();this.frame=c.createElement("iframe");c.body.appendChild(this.frame);Ext.fly(this.frame).set({id:d,name:d,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[d].name=d;this.form=c.createElement("form");c.body.appendChild(this.form);Ext.fly(this.form).set({target:d,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply();Ext.EventManager.on(this.frame,
"load",b,this);this.form.submit();return d},Stop:function(){this.StopFrame();return S_OK}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
Ext.Controls.ADSIDMapDownloader=Njl.inherit(Njl.CLSIDS.Controls.ADSIDMapDownloader,Njl.JSCom.CComObjectRoot,Ext.data.Connection,ILogDownloader,ISingleTone,{constructor:function(){Ext.Controls.ADSIDMapDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadadsidmap" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="opid" name="download" resource-id="AdsIdmapBackup" resource-type="AdsIdmapBackup"/&gt;',"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD ADS ID Map" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a){function b(){var e=this;Ext.EventManager.removeListener(e.frame,"load",b,e);setTimeout(function(){Ext.removeNode(e.frame);
Ext.removeNode(e.form)},100)}this.StopFrame();var c=document,d=Ext.id();this.frame=c.createElement("iframe");c.body.appendChild(this.frame);Ext.fly(this.frame).set({id:d,name:d,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[d].name=d;this.form=c.createElement("form");c.body.appendChild(this.form);Ext.fly(this.form).set({target:d,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply();Ext.EventManager.on(this.frame,
"load",b,this);this.form.submit();return d},Stop:function(){this.StopFrame();return S_OK}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
Ext.Controls.VersionTracker=Njl.inherit(Njl.CLSIDS.Controls.VersionTracker,Njl.JSCom.CComObjectRoot,Ext.util.Observable,IVersionTracker,ISingleTone,{constructor:function(){Ext.Controls.VersionTracker.superclass.constructor.call(this,arguments)},IVersionTracker:{CompareVersion:function(a,b,c,d){return this.compareversion(a,b,c,d)}},basecompare:function(a,b){var c="EQ";if(b!=a){b=b.split(".");a=a.split(".");for(var d=Math.min(b.length,a.length),e=0;e<d;e++){try{us=parseInt(b[e])}catch(f){c="UNDETERMINED";
break}try{os=parseInt(a[e])}catch(g){c="UNDETERMINED";break}if(us<os){c="LT";break}else if(us>os){c="GT";break}}if(c=="EQ")if(b.length>a.length)c="GT";else if(b.length<a.length)c="LT"}return c},getFWVersionType:function(a){var b=["t","-t","beta","-beta","rc","-rc"],c="PRODUCTION",d=[];a=a.toLowerCase();for(var e=0;e<b.length;e++)if(a.match(new RegExp(b[e],"g"))){c="TRIAL";d=a.split(b[e]);break}return{type:c,tokens:d}},compareversion:function(a,b,c,d){var e=false,f,g=this.getFWVersionType(a),h=g.type;
g=g.tokens;var i=this.getFWVersionType(b),j=i.type;i=i.tokens;if(h=="TRIAL"&&j=="TRIAL")f=this.basecompare(g[0],i[0]);else if(h=="PRODUCTION"&&j=="TRIAL")f=this.basecompare(a,i[0]);else if(h=="TRIAL"&&j=="PRODUCTION")f=this.basecompare(g[0],b);else if(h=="PRODUCTION"&&j=="PRODUCTION")f=this.basecompare(a,b);if(f=="GT")e=true;else if(f=="EQ"&&c<d)e=true;return e}});Ext.namespace("Ext.Controls");
Ext.Controls.FirmwareWindow=Njl.inherit(Njl.CLSIDS.Controls.FirmwareWindow,Ext.Controls.PromptWindow,ISingleTone,{help:"common_wnd_firmware",constructor:function(a){Ext.Controls.FirmwareWindow.superclass.constructor.call(this,a)},initComponent:function(){Ext.Controls.FirmwareWindow.superclass.initComponent.apply(this,arguments);this.filebrowse=new Ext.XTemplate('<div id="'+(this.filebrowserfakeId=Ext.id())+'" class="x-controls-prompt-browse-btn-bg" ></div>',Njl.isiOS?"":'<input type="file" name="file" class="'+
(Ext.isGecko?"x-controls-prompt-fileinputnative-gecko":"x-controls-prompt-fileinputnative")+'" id="'+(this.filebrowserId=Ext.id())+'" size=1 onchange="this.scope.onchanged();" onmouseout="this.scope.onouted(event, this);" onmouseover="this.scope.onovered(event, this);" onclick="if (this.uidisabled){ return false; } return true;"/>');this.filebrowse.compile();this.fieldname=new Ext.XTemplate("{field_name}");this.fieldname.compile();this.createBrowseButton();this.add(this.addingAddonContainer());this.on("afterrender",
this.onrendered,this)},addingAddonContainer:function(){return this.form=new Ext.form.FormPanel({innerId:Ext.Controls.FirmwareWindow.ADDON,bufferResize:0,frame:false,header:false,border:false,collapsible:false,fileUpload:true,baseCls:"x-plain",cls:"x-controls-prompt-filebrowse-bg",items:{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"width:100%"},columns:3},items:[this.addonnamelbl=new Ext.BoxComponent({html:this.fieldname.apply({field_name:_TR("ADDON_NAME")+_TR("COLON")}),cls:"x-controls-prompt-label",
cellCls:"x-controls-prompt-label-cell"}),this.addonname=new Ext.UI.TextField({typeAhead:true,enableKeyEvents:true,eventId:"applyAddonName",width:180,listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.addonnamelbtn=new Ext.BoxComponent({html:this.filebrowse.apply(),cls:"x-controls-prompt-browse-btn-cont",height:31}),new Ext.BoxComponent({html:'<div style="height:5px; width:100%;">&nbsp;</div>',
colspan:3}),this.csrfKey=new Ext.BoxComponent({html:'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>'}),this.rememberme=new Ext.UI.Checkbox({boxLabel:_TR("REMEMBER_USB_ENCRYPTION_KEY"),hidden:true,colspan:2,cellCls:"x-controls-prompt-text-cell"})]}})},setFieldName:function(a){if(this.rendered)this.fieldname.overwrite(this.addonnamelbl.el,{field_name:!Ext.isEmpty(a)?_TR(a):_TR("ADDON_NAME")+_TR("COLON")});else this.addonnamelbl.html=this.addonnamelbl.initialConfig.html=this.fieldname.apply({field_name:!Ext.isEmpty(a)?
_TR(a):_TR("ADDON_NAME")+_TR("COLON")})},reset:function(){Ext.Controls.FirmwareWindow.superclass.reset.call(this);this.addonname.clearInvalid();this.addonname.reset()},resetInvalidMark:function(){Ext.Controls.FirmwareWindow.superclass.resetInvalidMark.call(this);this.addonnamelbl.removeClass("x-controls-prompt-label-error")},assignMark:function(a){a=Ext.Controls.FirmwareWindow.superclass.assignMark.call(this,a);switch(this.type){case Ext.Controls.FirmwareWindow.ADDON:this.addonnamelbl.addClass("x-controls-prompt-label-error");
this.initTipTarget(this.addonnamelbl.id);break}return a},initPrompt:function(){Ext.Controls.FirmwareWindow.superclass.initPrompt.call(this);switch(this.type){case Ext.Controls.FirmwareWindow.ADDON:this.isuploaded=false;this.setTitle(this.options.caption,"");this.setFieldName(this.options.fieldname);this.setPromptButton(!Ext.isEmpty(this.options.okbtn)?_TR(this.options.okbtn):_TR("UPLOAD"),true,_TR("CANCEL"),true);this.setActiveItem(this.type);this.updateFieldText();this.options.showremember&&this.rememberme.show();
this.options.showremember&&this.form.setHeight(56);break}},apply:function(a,b){switch(this.type){case Ext.Controls.FirmwareWindow.ADDON:if(a.getArgs()){a.getArgs().fsize=this.getFSize();a.getArgs().fname=this.addonname.getValue();this.options.showremember&&(a.getArgs().rememberme=this.rememberme.getValue()?"1":"0");this[b](a);break}}Ext.Controls.FirmwareWindow.superclass.apply.call(this,a,b)},createBrowseButton:function(){this.browseBtn=new Ext.UI.Button({text:_TR("BROWSE"),width:80,cls:"x-controls-prompt-browse-btn"})},
showFileInfoPnl:function(a){this.type=Ext.Controls.PromptWindow.QUESTION;this.setPromptButton(_TR("INSTALL"),true,_TR("CANCEL"),true);if(a){this.type=Ext.Controls.PromptWindow.ERROR;this.setPromptButton(_TR("INSTALL"),false,_TR("CANCEL"),true)}this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setActiveItem(this.type)},responseSuccess:function(a,b){this.hideIndicator();if(Ext.isEmpty(b.result)){b.result={description:_TR("COMM_ERROR"),cause:_TR("ERROR")};
this.responseFailure(a,b)}else{this.isuploaded=true;this.options.version=b.result.version;this.apply(new Ext.Controls.PromptWindowEventArgs(this.options),"onclosing")}},responseFailure:function(a,b){this.hideIndicator();this.options.message=_TR(b.result.description);this.options.caption=_TR("ERROR");this.showFileInfoPnl(true);this.isuploaded=false},disableUI:function(a){var b=document.getElementById(this.filebrowserId);if(b)b.uidisabled=a;if(a){this.browseBtn.disable();this.addonname.disable();this.disableCntrBtn(true,
false)}else{this.browseBtn.enable();this.addonname.enable();this.disableCntrBtn(false,false)}},showIndicator:function(){this.disableUI(true);Ext.Controls.FirmwareWindow.superclass.showIndicator.call(this)},hideIndicator:function(){this.disableUI(false);Ext.Controls.FirmwareWindow.superclass.hideIndicator.call(this)},updateFieldText:function(){var a=document.getElementById(this.filebrowserId);if(a){var b=String(a.value).lastIndexOf("\\");this.addonname.setValue(b!=-1?a.value.substr(b+1,a.value.length):
a.value)}},getFSize:function(){var a=document.getElementById(this.filebrowserId);if(a)if(!a.files||!a.files[0])try{return(new ActiveXObject("Scripting.FileSystemObject")).getFile(a.value).size}catch(b){}else try{return a.files[0].size}catch(c){}return 0},stopUpload:function(a){if(a){if(a.document&&a.document.execCommand)a.document.execCommand("Stop");else a.contentWindow&&a.contentWindow.stop&&a.contentWindow.stop();Ext.removeNode(a)}},resetForm:function(){var a=this.form.getForm();if(a.isValid()){this.stopUpload(document.getElementById(a.abortId));
a.el.dom.reset();this.hideIndicator();a.abortId=null;this.options.showremember&&this.rememberme.hide();this.form.setHeight("auto")}},onuploading:function(a){this.Fire("OnValidate",[a]);if(a.getResult()==true){var b="none";Ext.isEmpty(a.getArgs().params)||(b=a.getArgs().params);var c="nvxsubmit";Ext.isEmpty(a.getArgs().submittype)||(c=a.getArgs().submittype);var d=this.form.getForm();if(d.isValid()){this.showIndicator();d.doAction(c,{url:a.getArgs().upurl,scope:this,params:b,success:this.responseSuccess,
failure:this.responseFailure});a.setResult(false)}}},onrendered:function(){var a=document.getElementById(this.filebrowserId);if(a)a.scope=this;this.browseBtn.rendered||this.browseBtn.render(this.filebrowserfakeId)},onreleaseurlclicked:function(a){!Ext.isEmpty(a)&&a!="N/A"&&window.open(a)},onclose:function(){this.resetForm();Ext.Controls.FirmwareWindow.superclass.onclose.call(this,arguments)},onchanged:function(){this.updateFieldText()},onapply:function(){if(this.addonname.getValue()!=""){this.resetInvalidMark();
this.apply(new Ext.Controls.PromptWindowEventArgs(this.options),this.isuploaded==true?"onclosing":"onuploading")}},onouted:function(){this.browseBtn.el.removeClass(this.browseBtn.overCls)},onovered:function(){this.browseBtn.el.addClass(this.browseBtn.overCls)}});Ext.Controls.FirmwareWindow.ADDON="ADDON";Ext.Controls.FirmwareWindow.ADDONLERROR="ADDONLERROR";
Ext.override(Ext.data.Connection,{doFormUpload:function(a,b,c){function d(){function l(o,q,r){Ext.isFunction(o)&&o.apply(q,r)}var k={responseText:"",responseXML:null,argument:a.argument},m,p;try{if(m=g.contentWindow.document||g.contentDocument||WINDOW.frames[e].document){if(m.body)k.responseText=/textarea/i.test((p=m.body.firstChild||{}).tagName)?p.value:m.body.innerHTML;k.responseXML=m.XMLDocument||m}}catch(s){}Ext.EventManager.removeListener(g,"load",d,this);this.fireEvent("requestcomplete",this,
k,a);l(a.success,a.scope,[k,a]);l(a.callback,a.scope,[a,true,k]);this.debugUploads||setTimeout(function(){Ext.removeNode(g)},100)}var e=Ext.id(),f=document,g=f.createElement("iframe"),h=Ext.getDom(a.form),i=[],j,n={target:h.target,method:h.method,encoding:h.encoding,enctype:h.enctype,action:h.action};Ext.fly(g).set({id:e,name:e,cls:"x-hidden",src:Ext.SSL_SECURE_URL});f.body.appendChild(g);if(Ext.isIE)document.frames[e].name=e;Ext.fly(h).set({target:e,method:"POST",enctype:"multipart/form-data",encoding:"multipart/form-data",
action:c||n.action});Ext.iterate(Ext.urlDecode(b,false),function(l,k){j=f.createElement("input");Ext.fly(j).set({type:"hidden",value:k,name:l});h.insertBefore(j,h.firstChild);i.push(j)});Ext.EventManager.on(g,"load",d,this);h.submit();Ext.fly(h).set(n);Ext.each(i,function(l){Ext.removeNode(l)})}});
Ext.Controls.FirmwareWindow.Submit=Ext.extend(Ext.form.Action.Submit,{type:"nvxsubmit",handleResponse:function(a){try{if(!Ext.isEmpty(a.responseXML)){var b="";if(Njl.isIE||Njl.isGecko||Njl.isSafari||Njl.isChrome)b="xs:";Njl.isEdge&&(b="");var c=a.responseXML.getElementsByTagName(b+"response");if(c&&c.length==0&&!b)c=a.responseXML.getElementsByTagName("xs:response");if(!Ext.isEmpty(c)&&c.length>0)if(c[0].getAttribute("status")=="failure"){var d=a.responseXML.getElementsByTagName(b+"error-code")[0].childNodes[0].nodeValue,
e=a.responseXML.getElementsByTagName(b+"error-cause")[0].childNodes[0].nodeValue,f=a.responseXML.getElementsByTagName(b+"error-details")[0].childNodes[0].nodeValue;return{success:false,errors:true,code:d,cause:e,description:f,releaseurl:"",isreboot:false}}else{var g=a.responseXML.getElementsByTagName("FirmwareImage_name").length>0?a.responseXML.getElementsByTagName("FirmwareImage_name")[0].childNodes[0].nodeValue:"",h=a.responseXML.getElementsByTagName("FirmwareImage_version").length>0?a.responseXML.getElementsByTagName("FirmwareImage_version")[0].childNodes[0].nodeValue:
"",i=a.responseXML.getElementsByTagName("FirmwareImage_size").length>0?a.responseXML.getElementsByTagName("FirmwareImage_size")[0].childNodes[0].nodeValue:"",j=a.responseXML.getElementsByTagName("FirmwareImage_description").length>0?a.responseXML.getElementsByTagName("FirmwareImage_description")[0].childNodes[0].nodeValue:"",n=a.responseXML.getElementsByTagName("FirmwareImage_url").length>0?a.responseXML.getElementsByTagName("FirmwareImage_url")[0].childNodes[0].nodeValue:"",l=a.responseXML.getElementsByTagName("FirmwareImage_reboot").length>
0?a.responseXML.getElementsByTagName("FirmwareImage_reboot")[0].childNodes[0].nodeValue:"";return{success:true,errors:false,fwname:g,version:h,size:i,description:j,releaseurl:n,isreboot:l==1?true:false}}}}catch(k){return{success:false,errors:true,code:0,cause:_TR("EXCEPTION"),description:k.message,releaseurl:"",isreboot:false}}return{success:false,errors:true,code:0,cause:_TR("ERROR"),description:_TR("ERROR_SERV_UNREC"),releaseurl:"",isreboot:false}}});
Ext.Controls.FirmwareWindow.Submit2=Ext.extend(Ext.form.Action.Submit,{type:"sshsubmit",handleResponse:function(a){try{var b=JSON.parse(a.responseXML.body.textContent);return{success:b.success,errors:b.error,code:0,cause:_TR("ERROR"),description:""}}catch(c){return{success:false,errors:true,code:0,cause:_TR("EXCEPTION"),description:_TR("UPLOAD_MESG_INTERNAL_ERROR")}}}});
Ext.Controls.FirmwareWindow.ADSSubmit=Ext.extend(Ext.form.Action.Submit,{type:"adssubmit",handleResponse:function(a){try{if(!Ext.isEmpty(a.responseXML)){var b="";if(Njl.isIE||Njl.isGecko||Njl.isSafari||Njl.isChrome)b="xs:";var c=a.responseXML.getElementsByTagName(b+"response");if(!Ext.isEmpty(c)&&c.length>0)if(c[0].getAttribute("status")=="failure"){var d=a.responseXML.getElementsByTagName(b+"error-code")[0].childNodes[0].nodeValue,e=a.responseXML.getElementsByTagName(b+"error-cause")[0].childNodes[0].nodeValue,
f=a.responseXML.getElementsByTagName(b+"error-details")[0].childNodes[0].nodeValue;return{success:false,errors:true,code:d,cause:e,description:f}}else return{success:true,errors:false}}}catch(g){return{success:false,errors:true,code:0,cause:_TR("EXCEPTION"),description:g.message}}return{success:false,errors:true,code:0,cause:_TR("ERROR"),description:_TR("ERROR_SERV_UNREC")}}});Ext.form.Action.ACTION_TYPES.nvxsubmit=Ext.Controls.FirmwareWindow.Submit;Ext.form.Action.ACTION_TYPES.sshsubmit=Ext.Controls.FirmwareWindow.Submit2;
Ext.form.Action.ACTION_TYPES.adssubmit=Ext.Controls.FirmwareWindow.ADSSubmit;Njl.namespace("Ext.Controls");ILangMenuItems=Njl.inherit(ISingleTone,{ILangMenuItems:{getItems:function(){return E_NOTIMPL}}});
Njl.inherit(Njl.CLSIDS.Controls.LangMenuItems,Njl.JSCom.CComEventsObjectRoot,ILangMenuItems,ISysLocaleManagerEvents,{constructor:function(a){this.superclass.constructor.call(this,a);if(a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice")){this.spLCManager=a.getSystemManager().getLocaleManager();CComQIPtr(this.spLCManager,"INotifySink").Advise(this);this.createMenuItems()}},createMenuItems:function(){this.mitems=[];this.msitems=[];if(this.spLCManager){var a=document.__DEBUG&&(new Ext.state.CookieProvider).get("no-language")==
"no-language",b=this.spLCManager.getLangs(),c=this.spLCManager.getLocale();if(b!=E_FAIL){for(var d=0;d<b.length;++d){var e=b[d];e={clickHideDelay:0,cls:e.code!="auto"?"x-controlsbar-menu-flag x-controlsbar-menu-flag-"+e.code:"",text:e.spell,checked:e.code==c&&!a,value:e.code,listeners:{scope:this,checkchange:this.onLangItemClick}};this.mitems.push(e);this.msitems.push(e)}if(document.__DEBUG){e={clickHideDelay:0,text:"no-language",checked:a,value:"no-language",listeners:{scope:this,checkchange:function(){(new Ext.state.CookieProvider).set("no-language",
"no-language");window.location.reload()}}};this.mitems.push(e);this.msitems.push(e)}}}},onLangItemClick:function(a){(new Ext.state.CookieProvider).clear("no-language");if(this.spLCManager.getLocaleSpell()!=a.textvalue){this.spLCManager.putLocale(a.value);this.spLCManager.commitLocale("controlsbar-commit-locale")}},ILangMenuItems:{getItems:function(a){return a?this.msitems:this.mitems}},ISysLocaleManagerEvents:{OnReady:function(a,b){b=="controlsbar-commit-locale"&&window.location.reload();return S_OK}}});
if(document.__DEBUG)_TR=function(){_TR=(new Ext.state.CookieProvider).get("no-language")=="no-language"?function(a){return(new String(a)).trim()}:dpv._TR;return _TR.apply(this,arguments)};Njl.namespace("Ext.Controls");IPowerMenuItems=Njl.inherit(IUnknown,{IPowerMenuItems:{getItems:function(){return E_NOTIMPL}}});
Njl.inherit(Njl.CLSIDS.Controls.PowerMenuItems,Njl.JSCom.CComEventsObjectRoot,IExtNative,IPowerMenuItems,IPromptWindowEvents,ISCSIManagerEvents,{constructor:function(){this.superclass.constructor.apply(this,arguments);if(this.spDevice=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice")){this.spISCSIManager=this.spDevice.getISCSIManager();CComQIPtr(this.spISCSIManager,"INotifySink").Advise(this)}this.createMenuItems();this.prompt=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.PromptWindow),
"IPromptWindow")},createMenuItems:function(){this.mitems=[new Ext.menu.Item({ctCls:"x-controlsbar-menu-shutdown",text:_TR("SHUT_DOWN"),value:"shutdown",caption:_TR("SHUTDOWN_SYSTEM"),listeners:{scope:this,click:this.onPowerItemClick}}),new Ext.menu.Item({ctCls:"x-controlsbar-menu-restart",text:_TR("RESTART"),value:"restart",caption:_TR("REBOOT_SYSTEM"),listeners:{scope:this,click:this.onPowerItemClick}})]},onPowerItemClick:function(a){if(!this.waitLun){var b={caption:a.caption?a.caption:_TR("SHUT_AND_REBOOT"),
isreguired:false,confirmed:!!a.confirmed};if(a.value=="shutdown"){b.delegatename="shoutdownSystem";b.message=!Ext.isEmpty(a.message)?a.message:_TR("Q_SYSTEM_SHUT");if(localStorage.safeMode=="1")b.message=_TR("Q_SYSTEM_SHUT_SAFEMODE");b.type=Ext.Controls.PromptWindow.SHUTDOWN}else{b.delegatename="restartSystem";b.message=!Ext.isEmpty(a.message)?a.message:_TR("Q_SYSTEM_REB");if(localStorage.safeMode=="1")b.message=_TR("Q_SYSTEM_REB_SAFEMODE");b.type=Ext.Controls.PromptWindow.RESTART}this.spISCSIManager.updateLUNGroups({wnd:b,
callid:this.callid=Ext.id(),toString:function(){return"controlsbar-update-lungroups"}})}},shoutdownSystem:function(a){this.wndConnectRepair=this.wndConnectRepair||CComQIPtr(CoCreateInstance(Njl.CLSIDS.ConnectRepair.ConnectRepairWindow),"IConnectRepair");this.wndConnectRepair.displayDeviceHalt();this.spDevice.shutdown(a.getArgs().arg1,{cmd:"systemshoutdown",msg:_TR("DEVICE_IN_SHTDWN")});return true},restartSystem:function(a){this.wndConnectRepair=this.wndConnectRepair||CComQIPtr(CoCreateInstance(Njl.CLSIDS.ConnectRepair.ConnectRepairWindow),
"IConnectRepair");this.wndConnectRepair.displayDeviceReboot();this.spDevice.reboot(a.getArgs().arg1,{cmd:"systemreboot",msg:_TR("DEVICE_IN_REBOOT")});return true},IPowerMenuItems:{getItems:function(){return this.mitems}},IPromptWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a)},OnClosed:function(a){CComQIPtr(a,"INotifySink").Unadvise(this);return S_OK},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}},
ISCSIManagerEvents:{OnDone:function(a,b,c){if(!(c!="controlsbar-update-lungroups"||c.callid!=this.callid)){if(a==S_OK&&this.spISCSIManager){var d=0;a=this.spISCSIManager.getLUNGroups();Njl.each(a,function(e){if(e=CComQIPtr(e,"ILUNGroup")){e=e.getTargets();Njl.each(e,function(f){if(f=CComQIPtr(f,"ISCSITarget"))d+=parseInt(f.getSessionsCount()==E_FAIL?"0":f.getSessionsCount())},this)}},this);if(d>0){c.wnd.confirmed=false;c.wnd.message=String.format("<br/><b>"+_TR("Q_SYSTEM_SESSIONS")+"</b>",d)}}CComQIPtr(this.prompt,
"INotifySink").Advise(this);this.prompt.Show(c.wnd.type,c.wnd);c.wnd.confirmed&&this.prompt.__s.onapply();return S_OK}}}});Njl.namespace("Ext.Controls");IUserMenuItems=Njl.inherit(IUnknown,{IUserMenuItems:{getItems:function(){return E_NOTIMPL},setRenderDom:function(){return E_NOTIMPL},setHelpBtnId:function(){return E_NOTIMPL}}});
Njl.inherit(Njl.CLSIDS.Controls.UserMenuItems,Njl.JSCom.CComEventsObjectRoot,IExtNative,IUserMenuItems,ISysManagerEvents,{constructor:function(){this.superclass.constructor.apply(this,arguments);if(this.spDevice=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice")){this.spLCManager=this.spDevice.getSystemManager().getLocaleManager();CComQIPtr(this.spLCManager,"INotifySink").Advise(this);this.spSecurityManager=this.spDevice.getSecurityManager();CComQIPtr(this.spSecurityManager,"INotifySink").Advise(this);
this.spSysManager=this.spDevice.getSystemManager();CComQIPtr(this.spSysManager,"INotifySink").Advise(this)}this.createMenuItems()},loadArgs:function(a){console.log(a)},createMenuItems:function(){var a=this.spLCManager.getLocale();a="x-menu-item"+(a!="auto"?" x-controlsbar-menu-rcflag x-controlsbar-menu-flag-"+a:" x-controlsbar-menu-noimage");this.mitems=[new Ext.menu.Item({ctCls:"x-controlsbar-menu-password",text:_TR("PASSWORD"),value:"password",caption:"Password",listeners:{scope:this,click:this.onUserItemClick}}),
new Ext.menu.Item({ctCls:"x-controlsbar-menu-logout",text:_TR("LOGOUT_CPT"),value:"logout",caption:_TR("LOGOUT_CPT"),listeners:{scope:this,click:this.onUserItemClick}}),new Ext.menu.Item({ctCls:"x-controlsbar-menu-community",text:_TR("COMMUNITY"),value:"community",caption:"Community",listeners:{scope:this,click:this.onUserItemClick}}),new Ext.menu.Item({ctCls:"x-controlsbar-menu-help",text:_TR("CONTEXT_HELP"),value:"help",caption:"Help",listeners:{scope:this,click:this.onUserItemClick}}),new Ext.menu.Item({itemCls:a,
ctCls:"x-controlsbar-menu-language",text:_TR("LANGUAGE"),value:"language",caption:"Language",menu:new Ext.UI.Menu({cls:"x-system-menu x-controlsbar-langmenu",items:CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.LangMenuItems),"ILangMenuItems").getItems()}),listeners:{scope:this}})]},onSecurityTabActivate:function(){if(this.secTab){var a=CComQIPtr(this.secTab,"IExtNative").getNative();a.un("tabactivate",this.onSecurityTabActivate,this);if(!this.usersTab)this.usersTab=CoCreateInstance(Njl.CLSIDS.Security.UsersTab);
CComQIPtr(this.usersTab,"IExtNative").getNative().on("tabactivate",this.onUsersSubTabActivate,this);a.selectTab(this.usersTab)}},onUsersSubTabActivate:function(){var a=CComQIPtr(this.usersTab,"IExtNative").getNative();a.un("tabactivate",this.onUsersSubTabActivate,this);a=a.getPanelByIndex(0);this.spSecurityManager.getLoginUserName()=="admin"?a.showAdminProperties(0):a.showLoginUserProperties(0)},wrapUpdatingPwd:function(){var a=CComQIPtr(this.spSysManager.getCloudOwner(),"IUser").getName(),b=this.spSecurityManager.getLoginUserName();
if(a==b)Ext.UI.MessageBox.warning({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("UPDATE_PWD_WARNING_MESSAGE"),scope:this});else{if(!this.secTab)this.secTab=CoCreateInstance(Njl.CLSIDS.Security.SecurityTab);CComQIPtr(this.secTab,"IExtNative").getNative().on("tabactivate",this.onSecurityTabActivate,this);(a=CComQIPtr(CoCreateInstance(Njl.CLSIDS.System.Frame),"ISystemFrame"))&&a.activateTab(this.secTab)}},onUserItemClick:function(a){switch(a.value){case "password":this.spSysManager.updateCloudOwner("cloud-users-update-pw");
break;case "logout":localStorage.setItem("isFromLogOut","1");CComQIPtr(CoCreateInstance(Njl.CLSIDS.ConnectRepair.ConnectRepairWindow),"IExtNative").getNative().setRestoreMode("logout",1);break;case "community":window.open(_TR("COMM_URL"),"_blank");break;case "help":Ext.get(this.helpId).dom.click();break}},IUserMenuItems:{getItems:function(){return this.mitems},setRenderDom:function(a){this.renderEle=a},setHelpBtnId:function(a){this.helpId=a}},showIndicator:function(){if(!this.indicator)this.indicator=
new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LSPECIAL,msgCls:"ui-mask-style1"});this.indicator.show()},hideIndicator:function(){this.indicator&&this.indicator.hide()},ISysManagerEvents:{OnNTPending:function(a,b){b=="cloud-users-update-pw"&&this.showIndicator();return S_OK},OnReady:function(a,b){b=="cloud-users-update-pw"&&this.wrapUpdatingPwd();return S_OK},OnDone:function(a,b,c){c=="cloud-users-update-pw"&&this.hideIndicator();return S_OK}}});
Ext.Controls.SSHKeyDownload=Njl.inherit(Njl.CLSIDS.Controls.SSHKeyDownload,Njl.JSCom.CComObjectRoot,Ext.data.Connection,ILogDownloader,ISingleTone,{resource:{downloadId:"downloadsshkey",downloadType:"DOWNLOAD SSHKey",resourceId:"BackupJobs",resourceType:"BackupJob_Collection"},constructor:function(){Ext.Controls.SSHKeyDownload.superclass.constructor.call(this,arguments);Ext.id()},ILogDownloader:{Initialize:function(a){if(a){if(a.downloadId)this.resource.downloadId=a.downloadId;if(a.downloadType)this.resource.downloadType=
a.downloadType;if(a.resourceId)this.resource.resourceId=a.resourceId;if(a.resourceType)this.resource.resourceType=a.resourceType}},Start:function(a){function b(){var f=this;Ext.EventManager.removeListener(f.frame,"load",b,f);setTimeout(function(){Ext.removeNode(f.frame);Ext.removeNode(f.form)},100);f.resource={downloadId:"downloadsshkey",downloadType:"DOWNLOAD SSHKey",resourceId:"BackupJobs",resourceType:"BackupJob_Collection"}}var c=new Ext.XTemplate(String.format('<textarea id="Textarea1" name="{0}" rows="20" cols="100">',
this.resource.downloadId),'&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;','&lt;xs:transaction id=""&gt;',String.format('&lt;xs:custom id="opid" name="download" resource-id="{0}" resource-type="{1}"/&gt;',this.resource.resourceId,this.resource.resourceType),"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",String.format('<input name="csrfpId" value="{0}" type="hidden"/>',
window.csrfId),String.format('<input name="downloadinput" value="{0}" type="submit"/>',this.resource.downloadType));c.compile();this.StopFrame();var d=document,e=Ext.id();this.frame=d.createElement("iframe");d.body.appendChild(this.frame);Ext.fly(this.frame).set({id:e,name:e,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[e].name=e;this.form=d.createElement("form");d.body.appendChild(this.form);Ext.fly(this.form).set({target:e,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",
cls:"x-hidden",action:a});this.form.innerHTML=c.apply();Ext.EventManager.on(this.frame,"load",b,this);this.form.submit();return e},Stop:function(){this.resource={downloadId:"downloadsshkey",downloadType:"DOWNLOAD SSHKey",resourceId:"BackupJobs",resourceType:"BackupJob_Collection"};this.StopFrame();return S_OK}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&
!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});Njl.namespace("Ext.Controls");IRCLangMenuItems=Njl.inherit(ISingleTone,{IRCLangMenuItems:{setDictionary:function(){return E_NOTIMPL},getItems:function(){return E_NOTIMPL}}});
Njl.inherit(Njl.CLSIDS.Controls.RCLangMenuItems,Njl.JSCom.CComEventsObjectRoot,IRCLangMenuItems,{constructor:function(a){this.superclass.constructor.call(this,a)},createMenuItems:function(){this.mitems=[];this.msitems=[];if(this.dictionary){this.selectedLang=this.dictionary.getLanguage();this.langs=this.dictionary.getLanguages();for(var a in this.langs){var b=this.langs[a],c={clickHideDelay:0,language:a,cls:(a!="auto"?"x-controlsbar-menu-rcflag x-controlsbar-menu-flag-"+a:"")||"",text:b.languageName,
checked:a==this.selectedLang,listeners:{scope:this,checkchange:this.onLangItemClick}};this.mitems.push(c);this.msitems.push(c);b.l=="auto"&&this.msitems.push({xtype:"menuseparator"})}}},onLangItemClick:function(a){this.dictionary.setLanguage(a.language)},IRCLangMenuItems:{setDictionary:function(a){this.dictionary=a;this.createMenuItems()},getItems:function(a){return a?this.msitems:this.mitems}}});Njl.namespace("Ext.Controls");IRCThemeMenuItems=Njl.inherit(ISingleTone,{IRCThemeMenuItems:{getItems:function(){return E_NOTIMPL}}});
Njl.inherit(Njl.CLSIDS.Controls.RCThemeMenuItems,Njl.JSCom.CComEventsObjectRoot,IRCThemeMenuItems,IExtNative,{constructor:function(a){this.superclass.constructor.call(this,a);this.themeCookie="UI_THEME";this.themes=[{title:_TR("THEME_BLACK"),value:"ui-black",opacity:"0.9"},{title:_TR("THEME_SILVER"),value:"ui-white",opacity:"0.5"}];this.initTheme()},createMenuItems:function(){this.mitems=[];for(var a=0;a<this.themes.length;++a)this.mitems.push(new Ext.menu.CheckItem({clickHideDelay:0,text:this.themes[a].title,
value:this.themes[a],checked:this.theme==this.themes[a].value,listeners:{scope:this,click:this.onThemeItemClick}}))},initTheme:function(){if(this.theme=Ext.util.Cookies.get(this.themeCookie))Ext.util.Cookies.set(this.themeCookie,this.theme,new Date((new Date).getTime()+26784E5));else this.theme=this.themes[1].value;for(var a=Ext.getBody(),b=0;b<this.themes.length;++b)a.removeClass(this.themes[b].value);a.addClass(this.theme);this.createMenuItems()},onThemeItemClick:function(a){if(a.checked){this.parentMenu.hide();
return false}Ext.util.Cookies.set(this.themeCookie,a.value.value,new Date((new Date).getTime()+26784E5));for(var b=Ext.getBody(),c=0;c<this.themes.length;++c)b.removeClass(this.themes[c].value);for(c=0;c<this.mitems.length;++c){var d=this.mitems[c];d!=a&&d.setChecked(false,true)}b.addClass(a.value.value)},IRCThemeMenuItems:{getItems:function(){return this.mitems}}});
Ext.Controls.RCRemoteAPI=Njl.inherit(Njl.CLSIDS.Controls.RCRemoteAPI,CComEventsObjectRoot("IRCRemoteAPIEvents"),Ext.util.Observable,ISingleTone,IExtNative,IRCRemoteAPI,{m_port:8080,m_timeout:5E3,m_szurl:"http://localhost",userid:"",password:"",installed:S_PENDING,logged:S_PENDING,firstTime:true,m_dNamesMy:null,m_dNamesFr:null,m_clearFr:false,forceOpenPath:null,forceOpenDeviceId:null,maxTries:4,constructor:function(){var a=Ext.isDefined(a)?a:{};a.pidx=0;a.rlim=0;a.mxat=10;a.path="";Ext.apply(this,
a);this.m_dNamesMy=[];this.m_dNamesFr=[];this.addEvents("completed","failure")},IRCRemoteAPI:{Initialize:function(a,b){this.putCredentials(a,b);this.init()},IsInstalled:function(){return this.installed},IsLogged:function(){return this.logged},ConnectToDevice:function(a){this.connect(a)},OpenDevice:function(a,b){this.open(a,b)},MapNetworkDrive:function(a,b,c){this.mapNetworkDrive(a,b,c)},GetIP:function(a){this.getIP(a)},GetNetworkDrives:function(){this.getNetworkDrives()},UnMapNetworkDrive:function(a,
b){this.unmapNetworDrive(a,b)}},onFailed:function(a,b,c){a=c.argument.method;_TRACE("Remote.API - "+a+" - failed","Cross domain call failed. <br/>host = "+this.m_szurl+":"+this.m_port,_TRACE.INFO,"Remote API");switch(a){case "init":if(this.pidx<10){++this.pidx;this.init(this.m_szurl,this.m_port+1,2E3)}else{_TRACE("Remote.API - Detect failed","Failed to locate ReadyNas Remote local stuff. Pls install Redynas Remote locally.",_TRACE.INFO,"Remote API");this.logged=this.installed=false;this.Fire("OnStateChange")}break;
case "login":this.isLogged.defer(2E3,this,[this.userid]);break;case "connect":this.isConnected.defer(2E3,this,[this.deviceid]);break;case "logout":this.isLogged.defer(2E3,this,[this.userid]);break;case "open":this.isOpened.defer(2E3,this,[this.deviceid,this.path]);break;case "mapnetworkdrive":this.isMapped.defer(2E3,this,[this.deviceid,this.volname,this.path]);break;case "isconnected":if(++this.rlim<this.mxat)this.isConnected.defer(2E3,this,[this.deviceid]);else{_TRACE("Remote.API - Local stuff is not responded.",
"Check system task manager or restart service manually",_TRACE.INFO,"Remote API");this.fireEvent("failure",a,this)}break;case "islogged":if(++this.rlim<this.mxat)this.isLogged.defer(2E3,this,[this.userid]);else{_TRACE("Remote.API - Local stuff is not responded.","Check system task manager or restart service manually",_TRACE.INFO,"Remote API");this.fireEvent("failure",a,this)}break;case "isopened":if(++this.rlim<this.mxat)this.isOpened.defer(2E3,this,[this.deviceid,this.path]);else{_TRACE("Remote.API - Local stuff is not responded.",
"Check system task manager or restart service manually",_TRACE.INFO,"Remote API");this.fireEvent("failure",a,this)}break;case "ismapped":if(++this.rlim<this.mxat)this.isMapped.defer(2E3,this,[this.deviceid,this.volname,this.path]);else{Ext.UI.MessageBox.error({title:_TR("AGENT_ERROR"),msg:_TR("AGENT_ERROR_MSG")});this.fireEvent("failure",a,this)}break}},onDone:function(a,b,c){a=c.argument.method;b=Njl.decode(b.responseText);c=Ext.isDefined(b.args.deviceid)?"("+b.args.deviceid+") ":"";this.rlim=0;
_TRACE("Remote.API "+c+"- "+a,"Error = "+b.error+"<br/>Result = "+JSON.stringify(b.result)+"<br/>host = "+this.m_szurl+":"+this.m_port,b.error==0?_TRACE.INFO:_TRACE.INFO,"Remote API");switch(a){case "init":if(b.meta&&b.meta.code==200&&b.result){_TRACE("Remote.API "+c+"- Local stuff is detected.","<br/>host = "+this.m_szurl+":"+this.m_port+"<br/>version="+b.result.version,_TRACE.INFO,"Remote API");this.installed=true;this.Fire("OnStateChange");this.userid&&this.password&&this.login(this.userid,this.password)}else{_TRACE("Remote.API "+
c+"- Detect failed","Failed to locate ReadyNas Remote local stuff. Pls install Redynas Remote locally.",_TRACE.INFO,"Remote API");this.fireEvent("failure",a,this,b)}break;case "login":b.error==0&&this.isLogged(this.userid);break;case "logout":b.error==0&&this.isLogged(this.userid);break;case "islogged":if(b.error==0&&b.result=="In")if(this.logged===true)this.forceOpenDeviceId?this.open.defer(8E3,this,[this.forceOpenDeviceId,this.forceOpenPath]):this.isConnected(this.deviceid);else{this.logged=true;
this.Fire("OnStateChange")}else if(b.error==0&&b.result=="Pending")this.isLogged.defer(2E3,this,[this.userid]);else if(b.error==0&&b.result=="AlreadyLogged"){this.logged=false;this.Fire("OnStateChange");this.logout()}else if(b.error==0&&b.result=="Out")this.login(this.userid,this.password);else if(b.error==0&&b.result=="Failed"){_TRACE("Remote.API "+c+"- Login failed","Please check account information. Username or password is invalid.",_TRACE.INFO,"Remote API");this.logged=false;this.Fire("OnStateChange")}break;
case "connect":this.isConnected.defer(2E3,this,[this.deviceid]);break;case "mapnetworkdrive":this.isMapped.defer(2E3,this,[this.deviceid,this.volname,this.path]);break;case "isconnected":if(b.error==0&&b.result=="Connected"){if(b.args.deviceid){this.open(b.args.deviceid,this.path);this.isOpened(b.args.deviceid,this.path)}}else if(b.error==0&&b.result=="Pending")this.isConnected.defer(2E3,this,[b.args.deviceid]);else if(b.error==0&&b.result=="NotANetworkMember"){_TRACE("Remote.API "+c+"- Device is not a member of the users network.",
"Looks like device from other network.",_TRACE.INFO,"Remote API");this.fireEvent("failure",a,this,b)}else if(b.error==0&&b.result=="LoggedOut")this.isLogged(this.userid);else if(b.error==0&&b.result=="Disconnected"){_TRACE("Remote.API "+c+"- Device disconnected","Could not establish p2p tunnel, please check device side p2p stuff or restart device.",_TRACE.INFO,"Remote API");this.fireEvent("failure",a,this,b)}break;case "isopened":if(b.error==0&&b.result=="Succeed"){_TRACE("Remote.API "+c+'- Location " '+
b.args.path+' " opened.',_TRACE.INFO,"Remote API");forceOpenDeviceId=forceOpenPath=null;this.fireEvent("completed",a,this,b)}else if(b.error==0&&b.result=="Pending")this.isOpened.defer(2E3,this,[b.args.deviceid,b.args.path]);else if(b.error==0&&b.result=="Failed"){_TRACE("Remote.API "+c+'- Explorer failed to open location "'+b.args.path+' ")','Could not open SMB location "'+b.args.location+'", please check device side p2p stuff or restart '+b.args.deviceid+" device.",_TRACE.INFO,"Remote API");this.forceOpenPath=
b.args.path;this.forceOpenDeviceId=b.args.deviceid;this.fireEvent("failure",a,this,b)}break;case "ismapped":if(b.error==0&&b.result=="Succeed")this.fireEvent("completed",a,this,b);else if(b.error==0&&b.result=="Pending")this.isMapped.defer(2E3,this,[b.args.deviceid,b.args.volname,b.args.path]);else if(b.error==0&&b.result=="Failed"){_TRACE("Remote.API "+c+'- Mapping network drive failed "'+b.args.path+' ")'+b.args.deviceid+" device.",_TRACE.INFO,"Remote API");this.fireEvent("failure",a,this,b)}break;
case "open":if(b.error==0&&b.result=="True"){this.isOpened.defer(500,this,[b.args.deviceid,b.args.path]);this.maxTries=4}else if(b.error!=0||b.result=="False"){this.forceOpenPath=b.args.path;this.forceOpenDeviceId=b.args.deviceid;this.fireEvent("failure",a,this,b)}break;case "getip":b.error==0&&b.result&&this.Fire("OnIPGetted",[b.args.deviceid,b.result]);break;case "getip":b.error==0&&b.result&&this.Fire("OnIPGetted",[b.args.deviceid,b.result]);break;case "getnetworkdrives":b.error==0&&b.result&&
this.Fire("OnNetworkGet",[b.args.deviceid,b.result]);break}},init:function(a,b,c){this.m_port=Ext.isDefined(b)?b:this.m_port;this.m_szurl=Ext.isDefined(a)?a:this.m_szurl;a=this.m_szurl+":"+this.m_port+"/getinfo.js";c=Ext.isDefined(c)?c:this.m_timeout;b=new Njl.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,callbackParam:"jasonCallback",argument:{method:"init"}});return S_OK},login:function(a,
b,c){c=Ext.isDefined(c)?c:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/login.js?userid="+a+"&pwd="+b;b=new Njl.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,callbackParam:"jasonCallback",argument:{method:"login"}});return S_OK},connect:function(a,b){this.deviceid=a;b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/connect.js?deviceid="+a;var c=new Njl.Crx.Connection;c.on("requestcomplete",
this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"connect"}});return S_OK},open:function(a,b,c){this.deviceid=a;this.path=b;c=Ext.isDefined(c)?c:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/open.js?deviceid="+a+"&path="+b;b=new Njl.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,
callbackParam:"jasonCallback",argument:{method:"open"}});return S_OK},disconnect:function(a,b){this.deviceid=a;b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/disconnect.js?deviceid="+a;var c=new Njl.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"disconnect"}});return S_OK},logout:function(a){a=Ext.isDefined(a)?a:this.m_timeout;
var b=this.m_szurl+":"+this.m_port+"/logout.js",c=new Njl.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:b,method:"GET",scriptTag:true,timeout:a,callbackParam:"jasonCallback",argument:{method:"logout"}});return S_OK},isConnected:function(a,b){b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/isconnected.js?deviceid="+a;var c=new Njl.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",
this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"isconnected"}});return S_OK},isLogged:function(a,b){b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/isloggedin.js?userid="+a;var c=new Njl.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"islogged"}});return S_OK},
isOpened:function(a,b,c){c=Ext.isDefined(c)?c:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/isopened.js?deviceid="+a+"&path="+b;b=new Njl.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,callbackParam:"jasonCallback",argument:{method:"isopened"}});return S_OK},isMapped:function(a,b,c,d){d=Ext.isDefined(d)?d:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/ismapped.js?deviceid="+a+"&volname="+
b+"&path="+c;b=new Njl.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:d,callbackParam:"jasonCallback",argument:{method:"ismapped"}});return S_OK},mapNetworkDrive:function(a,b,c,d){this.deviceid=a;this.volname=b;this.path=c;d=Ext.isDefined(d)?d:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/mapnetworkdrive.js?deviceid="+a+"&volname="+b+"&path="+c;b=new Njl.Crx.Connection;b.on("requestcomplete",
this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:d,callbackParam:"jasonCallback",argument:{method:"mapnetworkdrive"}});return S_OK},unmapNetworDrive:function(a,b,c,d){this.deviceid=a;this.volname=b;this.path=c;d=Ext.isDefined(d)?d:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/unmapnetworkdrive.js?deviceid="+a+"&volname="+b+"&path="+c;b=new Njl.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,
this);b.request({url:a,method:"GET",scriptTag:true,timeout:d,callbackParam:"jasonCallback",argument:{method:"unmapnetworkdrive"}});return S_OK},getNetworkDrives:function(a){a=Ext.isDefined(a)?a:this.m_timeout;var b=this.m_szurl+":"+this.m_port+"/getnetworkdrives.js",c=new Njl.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:b,method:"GET",scriptTag:true,timeout:a,callbackParam:"jasonCallback",argument:{method:"getnetworkdrives"}});
return S_OK},getIP:function(a,b){this.deviceid=a;b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/getip.js?deviceid="+a;var c=new Njl.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"getip"}});return S_OK},putCredentials:function(a,b){this.userid=a;this.password=b}});
Ext.Controls.RCAdminPageBtn=Njl.inherit(CComObjectRoot,Ext.Component,{cls:"x-controls-rcadmpagebtn",constructor:function(a){a=a||{};this.html=a.text===undefined?_TR("ADMIN_PAGE"):a.text;this.nics=[];this.bonds=[];Ext.Controls.RCAdminPageBtn.superclass.constructor.apply(this,arguments);this.devSerial=this.spRCDevice.getSerial();this.devName=this.spRCDevice.getAlias();this.model=this.spRCDevice.getModel();this.networkManager=this.spDevice.getNetworkManager();CComQIPtr(this.networkManager,"INotifySink").Advise(this);
CComQIPtr(this.spDevice,"INotifySink").Advise(this);this.refresh()},afterRender:function(){Ext.Controls.RCAdminPageBtn.superclass.afterRender.apply(this,arguments);this.el.on("click",this.onAdvancedClick,this)},destroy:function(){this.networkManager&&CComQIPtr(this.networkManager,"INotifySink").Unadvise(this);this.spDevice&&CComQIPtr(this.spDevice,"INotifySink").Unadvise(this)},refresh:function(){if(this.spRCDevice.getOnline())if((this.storedIP=Ext.Controls.Utils.loadFromStorage("browse-lan-try-"+
this.spRCDevice.getSerial()+"-ip"))&&Njl.Utils.isValidIPAddress(this.storedIP))this.spRCDevice.tryLocalIP(this.storedIP);else{delete this.storedIP;this.updateNetworks()}},updateNetworks:function(){this.networkManager.updateNICS("adminpagebtn-update-nics");this.networkManager.updateBONDS("adminpagebtn-update-bonds")},populateNics:function(){var a=this.networkManager.getNICS();this.nics=[];a!=E_FAIL&&Njl.each(a,function(b){b=CComQIPtr(b,"INetworkNIC");if(b.getState()!="down"){b=b.getIPAddress();this.nics.push(b);
this.spRCDevice.tryLocalIP(b)}},this);this.updateUrl()},populateBonds:function(){var a=this.networkManager.getBONDS();this.bonds=[];a!=E_FAIL&&Njl.each(a,function(b){b=CComQIPtr(b,"INetworkBond");if(b.getState()!="down"){b=b.getIPAddress();this.bonds.push(b);this.spRCDevice.tryLocalIP(b)}},this);this.updateUrl()},updateUrl:function(){if(this.nics.length||this.bonds.length)this.addClass(this.cls+"-clickable")},onAdvancedClick:function(){if(this.spRCDevice.isRouter()===true){var a=this.spRCDevice.getLocalIP();
if(a)window.open("http://routerlogin.com","_blank","toolbar=1,location=1,directories=1,status=1,menubar=1,scrollbars=1,resizable=1");else{var b='<br /><a href="http://routerlogin.com" target="_blank" style="color: #378dff;">http://routerlogin.com</a>';Ext.UI.MessageBox.warning({title:_TR("LOCAL_ADMIN_PAGE"),msg:_TR("ADMIN_PAGE_BUTTON_ERROR_MSG")+(b?"<br />"+_TR("ADMIN_PAGE_BUTTON_ERROR_MSG_LINKS")+b:"")})}}else if(a=this.spRCDevice.getLocalIP())window.open("http://"+a+"/admin","_blank","toolbar=1,location=1,directories=1,status=1,menubar=1,scrollbars=1,resizable=1");
else{b="";Njl.each(this.nics.concat(this.bonds),function(c){if(c)b+='<br /><a href="http://'+c+'/admin" target="_blank" style="color: #378dff;">http://'+c+"</a>"},this);Ext.UI.MessageBox.warning({title:_TR("LOCAL_ADMIN_PAGE"),msg:_TR("ADMIN_PAGE_BUTTON_ERROR_MSG")+(b?"<br />"+_TR("ADMIN_PAGE_BUTTON_ERROR_MSG_LINKS")+b:"")})}window.RC&&RC.GoogleAnalytics&&RC.GoogleAnalytics.trackEvent&&RC.GoogleAnalytics.trackEvent("Browse","ClickAdminPage")},INetworkManagerEvents:{OnReady:function(a,b){if(b=="adminpagebtn-update-nics")this.populateNics();
else b=="adminpagebtn-update-bonds"&&this.populateBonds()}},IRCDeviceEvents:{OnLocalSessionError:function(a,b){if(b==this.storedIP){delete this.storedIP;this.updateNetworks()}},OnLocalSessionInit:function(a,b){Ext.Controls.Utils.saveToStorage("browse-lan-try-"+this.spRCDevice.getSerial()+"-ip",b)}}});Njl.namespace("Ext","Ext.Controls");
Ext.Controls.Browsers=Njl.inherit(Ext.Component,{constructor:function(){Ext.Controls.Browsers.superclass.constructor.apply(this,arguments)},afterRender:function(){Ext.Controls.Browsers.superclass.afterRender.apply(this,arguments);this.el.addClass("controls-browsers");this.el.update('<table class="controls-browsers-logo" cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align: middle; position: relative;"><table cellpadding="0" cellspacing="0" border="0" style="margin: 105px auto 0 auto;"><tr><td colspan="4"><div class="controls-browsers-title">'+
_TR("READYCLOUD_NOT_COMPATIBLE")+'</div><div class="controls-browsers-info">'+_TR("SETUP_LATEST_BROWSER")+'</div></td></tr><tr><td style="vertical-align: top;"><a href="http://www.google.com/chrome"><div class="controls-browsers-google">'+_TR("GOOGLE_CHROME")+'</div></a></td><td style="vertical-align: top;"><a href="http://www.mozilla.org/en-US/firefox/all/"><div class="controls-browsers-firefox">'+_TR("MOZILLA_FIREFOX")+'</div></a></td><td style="vertical-align: top;"><a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie"><div class="controls-browsers-ie">'+
_TR("MICROSOFT_IE")+'</div></a></td><td style="vertical-align: top;"><a href="http://support.apple.com/downloads/#safari"><div class="controls-browsers-safari">'+_TR("APPLE_SAFARI")+"</div></a></td></tr></table></td></tr></table>")}});Ext.namespace("Ext.Controls");
Ext.Controls.AntivirusServiceWindow=Njl.inherit(CComObjectRoot,Ext.UI.Window,{modal:true,width:380,resizable:false,constrain:true,minimizable:false,maximizable:false,help:"common_wnd_antivirus",constructor:function(){this.title=_TR("AV_SETTINGS");this.items=[this.avEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("AV_ENABLE"),disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.onEnableCheck,scope:this}}),this.avTable={xtype:"container",layout:"table",cls:"x-inspector-checkbox-protect-os-t",
colspan:2,layoutConfig:{tableAttrs:{cellspacing:0}},items:[this.poEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("AV_PROTECTION_OS"),disabled:false,cls:"x-inspector-checkbox-bg x-inspector-checkbox-protect-os",listeners:{scope:this}}),new Ext.UI.RoundButton({cls:"x-frontview-btn-info",style:"margin-bottom:10px; margin-left:5px;",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("AV_PROTECTION_OS_TOOLTIP")})}}})]}];this.fbar=["->",{xtype:"uibutton",text:_TR("APPLY"),
handler:this.onApplyClick,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.avEnableChkBox.setValue(this.avservice.getEnable());this.poEnableChkBox.setValue(this.avss.getEnable());this.hide()},scope:this,cancelbtn:true}];Ext.Controls.AntivirusServiceWindow.superclass.constructor.apply(this,arguments);if(this.spDevice=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice")){this.spSYSManager=this.spDevice.getSystemManager();CComQIPtr(this.spSYSManager,"INotifySink").Advise(this)}},
onApplyClick:function(){this.fireEvent("applyclick",this,this.avEnableChkBox.checked,this.poEnableChkBox.checked);this.hide()},onEnableCheck:function(a,b){this.poEnableChkBox.setDisabled(!b);b||this.poEnableChkBox.setValue(false);this.fireEvent("enablecheck",this,b)},loadService:function(a,b){this.avservice=a;this.avss=b;this.avEnableChkBox.setValue(a.getEnable());this.poEnableChkBox.setValue(b.getEnable());this.poEnableChkBox.setDisabled(!a.getEnable())},loadArg:function(){this.spSYSManager.getSupportAntiVirusSS()!=
"1"&&Ext.get(this.poEnableChkBox.id).parent("table").setDisplayed(false)}});Njl.namespace("Ext","Ext.Controls");
Ext.Controls.VolumePerformanceGraph=Njl.inherit(Ext.Component,{cls:"controls-vol-perf-graph",CENTER:150,RADIUS:120,ANGLE_P:150*Math.PI/180,ANGLE_C:270*Math.PI/180,ANGLE_R:30*Math.PI/180,constructor:function(){this.html='<div class="feature-icon perf-icon"><span title="'+_TR("PERFORMANCE")+'">'+_TR("PERFORMANCE")+'</span></div><div class="feature-icon cap-icon"><span title="'+_TR("CAPACITY")+'">'+_TR("CAPACITY")+'</span></div><div class="feature-icon red-icon"><span title="'+_TR("RELIABILITY")+'">'+
_TR("RELIABILITY")+'</span></div><div id="'+(this.svgPathsId=Ext.id())+'" style="width: 100%; height: 100%;"></div>';Ext.Controls.VolumePerformanceGraph.superclass.constructor.apply(this,arguments)},afterRender:function(){Ext.Controls.VolumePerformanceGraph.superclass.afterRender.apply(this,arguments)},setState:function(a,b,c,d){var e,f,g,h,i=a;b=c/b;if(a=="JBOD"){e=2;f=5;g=0;h="c"}else if(a==0){f=e=5;g=0;h="p"}else if(a==1)if(c==1){e=2;f=5;g=0;h="c";i="JBOD"}else{e=5;f=1;g=3;h="p"}else if(a==5)if(d)if(b<=
6){g=f=e=3;h="c";i+="_CONC"}else{e=3;f=4;g=2;h="c";i+="_CONC_MTR"}else if(b<=6){e=3;f=4;g=3;h="c"}else{e=3;f=4;g=2;h="c";i+="_MTR"}else if(a==6)if(d)if(b<=15){f=e=2;g=5;h="r";i+="_CONC"}else{e=1;g=f=3;h="c";i+="_CONC_MTR"}else if(b<=15){f=e=2;g=5;h="r"}else{e=1;g=f=3;h="c";i+="_MTR"}else if(a==10){e=5;f=1;g=3;h="p"}else if(a==50)if(b==3){e=4;f=3;g=4;h="";i+="_MAXVDEV"}else if(b<=6){e=4;g=f=3;h=""}else{e=2;f=4;g=2;h="c";i+="_MTR"}else if(a==60)if(b==4){e=3;f=2;g=5;h="r";i+="_MAXVDEV"}else if(b<=15){e=
3;f=2;g=4;h="r"}else{e=1;g=f=3;h="c";i+="_MTR"}a={c:"20, 137, 44",p:"255, 200, 20",r:"110, 37, 133"}[h]||"40, 166, 237";c=this.CENTER+this.RADIUS*e/5*Math.cos(this.ANGLE_P);e=this.CENTER+this.RADIUS*e/5*Math.sin(this.ANGLE_P);d=this.CENTER+this.RADIUS*f/5*Math.cos(this.ANGLE_C);f=this.CENTER+this.RADIUS*f/5*Math.sin(this.ANGLE_C);h=this.CENTER+this.RADIUS*g/5*Math.cos(this.ANGLE_R);g=this.CENTER+this.RADIUS*g/5*Math.sin(this.ANGLE_R);Ext.get(this.svgPathsId).update('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+
this.CENTER*2+" "+this.CENTER*2+'" style="width: 100%; height: 100%;">'+String.format('<path d="M{0},{1} L{2},{3} z" stroke="#aaa" />',this.CENTER,this.CENTER,this.CENTER+this.RADIUS*Math.cos(this.ANGLE_P),this.CENTER+this.RADIUS*Math.sin(this.ANGLE_P))+String.format('<path d="M{0},{1} L{2},{3} z" stroke="#aaa" />',this.CENTER,this.CENTER,this.CENTER+this.RADIUS*Math.cos(this.ANGLE_C),this.CENTER+this.RADIUS*Math.sin(this.ANGLE_C))+String.format('<path d="M{0},{1} L{2},{3} z" stroke="#aaa" />',this.CENTER,
this.CENTER,this.CENTER+this.RADIUS*Math.cos(this.ANGLE_R),this.CENTER+this.RADIUS*Math.sin(this.ANGLE_R))+String.format('<path d="M{0},{1} L{2},{3} L{4},{5}, L{0},{1} z" fill="rgba({6}, .4)" stroke="rgb({6})" />',c,e,d,f,h,g,a)+"</svg>");return _TR("STORAGE_VOLUME_CONFIG_DESC_RAID"+i)}});
function AppMain(){try{if(Ext.isIE7||Ext.isIE8)(new Ext.Controls.Browsers({cls:"x-fronview-browsers"})).render(Ext.getBody());else{self.Myview=new Ext.Wizard.View;viewport=new Ext.Viewport({cls:"x-unselectable",items:[window.Myview]});if(Njl&&Njl.isIE)Ext.getBody().dom.onselectstart=function(c){var d=c.target?c.target:c.srcElement;if(!(c&&d&&d.className.indexOf&&(d.className.indexOf("x-form-text")!=-1||d.className.indexOf("ui-textarea-txt")!=-1||d.className.indexOf("x-selectable")!=-1)&&d.className.indexOf("x-trigger-noedit")==
-1)){c.preventDefault&&c.preventDefault();return c.returnValue=false}}}}catch(a){REPORT_EXCEPTION(a)}finally{var b=Ext.get("wizard-mask");b&&b.remove()}}
_gEventsListener=Njl.inherit(CComObjectRoot,ISysLocaleManagerEvents,{updates:0,ISysLocaleManagerEvents:{OnReady:function(a,b){b=="wizard-update-locale"&&CComQIPtr(a,"ISysLocaleManager").updateDictionary("wizard-update-dictionary");if(b=="wizard-update-dictionary"){++this.updates;this.updates==2&&AppMain.defer(1)}return S_OK},OnDone:function(a,b,c){if(a!=S_OK||c=="wizard-update-dictionary"){b=CComQIPtr(b,"ISysLocaleManager");CComQIPtr(b,"INotifySink").Unadvise(this)}a!=S_OK&&this.showError();return S_OK}},
ISysManagerEvents:{OnReady:function(a,b){if(b=="wizard-update-sysmodel"){a=CComQIPtr(a,"ISysManager");(a=CComQIPtr(a.getSysInfo(),"ISysInfo").getModel())&&a.toLowerCase()=="readynas 25"?Ext.getBody().addClass("ui-folio"):Ext.getBody().addClass("ui-gen2");++this.updates;this.updates==2&&AppMain.defer(1)}return S_OK},OnDone:function(a,b,c){if(a!=S_OK||c=="wizard-update-sysmodel"){b=CComQIPtr(b,"ISysManager");CComQIPtr(b,"INotifySink").Unadvise(this)}a!=S_OK&&this.showError();return S_OK}},showError:function(){CComQIPtr(CoCreateInstance(Njl.CLSIDS.ErrorReporter),
"IErrorReporter").report("Communication Error","",_TRACE.ERROR,{title:"",subTitle:"Communication Error",buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}});
Ext.onReady(function(){var a=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Reporter),"IReporter");if(a){a.Enable(document.__DEBUG);a.putMaxTraceCount(500);a.AdviseKeyHandler(document)}a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");var b=a.getSystemManager(),c=b.getLocaleManager(),d=new _gEventsListener;CComQIPtr(c,"INotifySink").Advise(d);CComQIPtr(b,"INotifySink").Advise(d);d=CoCreateInstance(Njl.CLSIDS.ConnectRepair.ConnectRepairWindow);CComQIPtr(d,"IConnectRepair").putDevice(a);b.updateSysInfo("wizard-update-sysmodel");
c.updateLocale("wizard-update-locale")});Ext.namespace("Ext.Wizard");
Ext.Wizard.View=Njl.inherit(CComObjectRoot,Ext.Component,ISingleTone,{constructor:function(){Njl.apply(this,{title:_TR("UPDATE"),cls:"wizard-view",html:'<table cellpadding="0" cellspacing="0" border="0" class="wizard-table" style="width: 100%; height: 100%;"><tr><td style="vertical-align: middle; position: relative;"><table cellpadding="0" cellspacing="0" border="0" style="margin:0 auto;"><tr><td rowspan="3" style="vertical-align:top;"><div id="'+(this.devId=Ext.id())+'" class="wizard-device-icon">&nbsp;</div></td><td class="wizard-page-title" id="'+
(this.titleId=Ext.id())+'">'+_TR("WELCOME")+'</td></tr><tr><td id="'+(this.contentId=Ext.id())+'" style="vertical-align: top;"></td></tr></table></td></tr></table>',updatesCount:0});Ext.Wizard.View.superclass.constructor.apply(this,arguments)},afterRender:function(){var a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");if(a){this.spSYSManager=a.getSystemManager();var b=CComQIPtr(this.spSYSManager.getSysInfo(),"ISysInfo");b&&Ext.fly(this.devId).addClass(Ext.Controls.Utils.getDeviceCls(b.getModel(),
256));CComQIPtr(this.spSYSManager,"INotifySink").Advise(this);this.spSYSManager.updateDeviceState("wizard-update-devstate");b=this.spSYSManager.getAlertsManager();CComQIPtr(b,"INotifySink").Advise(this);a=a.getNetworkManager();CComQIPtr(a,"INotifySink").Advise(this)}a=Ext.get(this.contentId);b=new Ext.Wizard.Welcome;b.render(a);b.show();var c=new Ext.Wizard.TimeAndDate;c.render(a);var d=new Ext.Wizard.HostName;d.render(a);var e=new Ext.Wizard.AlertContacts;e.render(a);var f=new Ext.Wizard.AdminPassword;
f.render(a);var h=new Ext.Wizard.VolumeConfiguration;h.render(a);var g=this.step07=new Ext.Wizard.GetStarted;g.on("apply",this.onApply,this);g.render(a);b.sub(c);c.sub(d,b);d.sub(e,c);e.sub(f,d);if(localStorage.fromSafeMode=="1"){f.sub(g,e);g.sub(null,f);this.pages=[b,c,d,e,f,g]}else{f.sub(h,e);h.sub(g,f);g.sub(null,h);this.pages=[b,c,d,e,f,h,g]}this.mask=new Ext.UI.LoadMask(Ext.getBody(),{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0})},onApply:function(){this.mask.show();for(var a=
0;a<this.pages.length;++a)if(this.pages[a].title!=_TR("ADMINISTRATOR_PASSWORD"))this.pages[a].commit();else this.adminPwdPage=this.pages[a]},incrementUpdates:function(a){a&&a.indexOf("commit")!=-1&&++this.updatesCount},decrementUpdates:function(a){if(a&&a.indexOf("commit")!=-1){--this.updatesCount;if(!this.updatesCount){var b=CComQIPtr(this.spSYSManager.getDeviceState(),"IDeviceState");if(b&&a!="datetimewnd-commit-datetime"&&a!="datetimewnd-commit-ntp"&&a!="datetimewnd-commit-timezone"&&a!="datetimewnd-commit-hourmap"){b.putFirstLaunchState(0);
this.spSYSManager.commitDeviceState("wizard-finish-devstate")}else this.mask.hide()}}},showError:function(a){if(a=CComQIPtr(a,"IProtocol").getLastNMLError()){a=a.getErrorCode();CComQIPtr(CoCreateInstance(Njl.CLSIDS.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_TRACE.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}},ISysManagerEvents:{OnNTPending:function(a,b){b!="wizard-commit-recovery"&&b!="wizard-commit-pswd"&&this.incrementUpdates(b);
b=="wizard-cancel-devstate"&&this.mask.show()},OnDone:function(a,b,c){if(c=="wizard-cancel-devstate"){if(localStorage.fromSafeMode){localStorage.removeItem("fromSafeMode");localStorage.fromSafeModeWizard=1}location.href="./"}else if(c=="wizard-finish-devstate")if(this.adminPwdPage&&this.adminPwdPage.commitValidation())this.adminPwdPage.commit();else{if(localStorage.fromSafeMode){localStorage.removeItem("fromSafeMode");localStorage.fromSafeModeWizard=1}this.recovery=this.pswd=null;location.href="./"}else if(c!=
"wizard-commit-recovery"&&c!="wizard-commit-pswd")this.decrementUpdates(c);else if(c=="wizard-commit-recovery"){this.recoveryMask=true;if(a)this.showError(b);else{this.recovery=true;if(!this.adminPwdPage.password.getValue())this.pswd=true}}else if(c=="wizard-commit-pswd"){this.PwdMask=true;if(a)this.showError(b);else this.pswd=true}if(this.recoveryMask&&this.PwdMask){this.mask.hide();this.recoveryMask=this.PwdMask=null}if(this.recovery&&this.pswd){if(localStorage.fromSafeMode){localStorage.removeItem("fromSafeMode");
localStorage.fromSafeModeWizard=1}this.step07.backBtn.setDisabled(true);this.step07.applyBtn.setDisabled(true);this.recovery=this.pswd=null;sessionStorage.setItem("wizard-update-pwd","1");location.href="./"}return S_OK}},ISysAlertsManagerEvents:{OnNTPending:function(a,b){this.incrementUpdates(b)},OnDone:function(a,b,c){this.decrementUpdates(c);return S_OK}},INetworkManagerEvents:{OnNTPending:function(a,b){this.incrementUpdates(b)},OnDone:function(a,b,c){this.decrementUpdates(c);return S_OK}}});Ext.namespace("Ext.Wizard");
Ext.Wizard.Base=Njl.inherit(CComObjectRoot,Ext.Component,{constructor:function(){Ext.Wizard.Base.superclass.constructor.call(this);this.addEvents("next","back","apply","cancel","finish");this.on("show",function(){this.focusControl&&this.focusControl.focus(false,true)},this)},sub:function(a,b){a&&this.on("next",function(){if(this.validate()){var c=false;if(Ext.isDefined(this.checkUser)){c=this.checkUser();a.setAvailableUser(c)}this.hide();Ext.fly(window.Myview.titleId).update(a.title);a.show()}},this);
b&&this.on("back",function(){this.hide();Ext.fly(window.Myview.titleId).update(b.title);b.show()},this)},commit:function(){},validate:function(){return true},renderBackButton:function(a){var b=this.backBtn=new Ext.UI.Button({text:_TR("BACK"),width:85});b.on("click",function(){this.fireEvent("back",this)},this);b.render(a)},renderNextButton:function(a){var b=new Ext.UI.Button({text:_TR("NEXT"),width:85,acceptbtn:true});b.on("click",function(){this.validate()&&(this.cls=="wizard-adminpass"?this.pswNext():
this.fireEvent("next",this))},this);b.render(a)},renderCancelButton:function(){},renderApplyButton:function(a){var b=this.applyBtn=new Ext.UI.Button({text:_TR("APPLY"),width:85,acceptbtn:true});b.on("click",function(){this.fireEvent("apply",this)},this);b.render(a)},renderFinishButton:function(a,b){b=new Ext.UI.Button({text:b?b:_TR("FINISH"),width:85});b.on("click",function(){this.validate()&&this.fireEvent("apply",this)},this);b.render(a)}});Ext.namespace("Ext.Wizard");
Ext.Wizard.Welcome=Ext.extend(Ext.Wizard.Base,{cls:"wizard-welcome",hidden:true,initComponent:function(){this.title=_TR("WELCOME");Ext.Wizard.Welcome.superclass.initComponent.call(this);var a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");if(a)this.spLocalizer=a.getSystemManager().getLocaleManager();this.createLangPopUpMenu()},afterRender:function(a){Ext.Wizard.Welcome.superclass.afterRender.call(this,a);a=this.cls;this.el.update('<div class="wizard-page-content"><div id="'+(this.languageMenuId=
Ext.id())+'" class="'+a+'-langs"><div id="'+(this.languageId=Ext.id())+'" class="x-controlsbar-cell-lang-text" >'+_TR("LANGUAGE")+'</div></div><div class="wizard-page-text">'+_TR("WIZARD_WELCOME")+'</div></div><div id="'+(this.btnsCtnrId=Ext.id())+'" class="wizard-page-buttons"></div>');Ext.get(this.languageMenuId).on("click",this.onLangMenuClick,this);this.renderNextButton(this.btnsCtnrId);this.renderCancelButton(this.btnsCtnrId)},createLangPopUpMenu:function(){var a=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.LangMenuItems),
"ILangMenuItems").getItems(true);this.langpopupmenu=new Ext.UI.Menu({cls:"x-system-menu wizard-langmenu",items:a})},onLangMenuClick:function(a){if(this.langpopupmenu.items.length>0){this.langpopupmenu.show(this.languageId);a.stopEvent();return false}}});Ext.namespace("Ext.Wizard");
Ext.Wizard.TimeAndDate=Njl.inherit(CComEventsObjectRoot,Ext.Wizard.Base,ISysManagerEvents,IDateTimeWindowEvents,{cls:"wizard-timedate",hidden:true,constructor:function(){Ext.Wizard.TimeAndDate.superclass.constructor.call(this);this.title=_TR("TIME_AND_DATE")},initComponent:function(){Ext.Wizard.TimeAndDate.superclass.initComponent.call(this);var a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");if(this.spSysManager=a.getSystemManager()){CComQIPtr(this.spSysManager,"INotifySink").Advise(this);
this.spSysManager.updateTimeZone("wizard-update-timezone");this.spSysManager.updateNTPInfo("wizard-update-ntp")}this.datetime=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.DateTimeWindow),"IDateTimeWindow");this.datetime.putDevice(a);CComQIPtr(this.datetime,"INotifySink").Advise(this)},afterRender:function(a){Ext.Wizard.TimeAndDate.superclass.afterRender.call(this,a);this.el.update('<div class="wizard-page-content"><table cellpadding="0" cellspacing="0" border="0" class="wizard-page-content-i"><tr><td class="wizard-table-cell">'+
_TR("SET_TIME_AND_DATE")+':</td><td id="'+(this.autoNodeId=Ext.id())+'"></td></tr><tr><td></td><td id="'+(this.manualNodeId=Ext.id())+'"></td></tr><tr><td class="wizard-table-cell">'+_TR("TIME_ZONE_LC")+':</td><td id="'+(this.timezoneNodeId=Ext.id())+'"></td></tr><tr><td class="wizard-table-cell">Time format:</td><td id="'+(this.use24FormatId=Ext.id())+'"></td></tr><tr><td class="wizard-table-cell">'+_TR("DATE_FORMAT_LABEL")+':</td><td id="'+(this.formatTypeId=Ext.id())+'"></td></tr></table></div><div id="'+
(this.btnsCtnrId=Ext.id())+'" class="wizard-page-buttons"></div>');this.initControls();this.renderBackButton(this.btnsCtnrId);this.renderNextButton(this.btnsCtnrId);this.renderCancelButton(this.btnsCtnrId)},initControls:function(){this.automatic=new Ext.UI.Checkbox({boxLabel:_TR("AUTOMATICALLY"),checked:true});this.automatic.on("check",this.onAutomaticCheck,this);this.automatic.render(this.autoNodeId);this.use24Format=new Ext.UI.Checkbox({boxLabel:_TR("USE_24HOUR_FORMAT"),checked:false});this.use24Format.render(this.use24FormatId);
this.setManually=new Ext.UI.Button({text:_TR("SET_MANUALLY"),width:150,expandToText:true,disabled:true});this.setManually.on("click",this.onSetManually,this);this.setManually.render(this.manualNodeId);this.timezone=new Ext.UI.ComboBox({width:250,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,resizable:true,store:Njl.TimeZoneArray(),valueField:"id",displayField:"text",tpl:'<tpl for="."><div title="{text}" class="x-combo-list-item">{text}</div></tpl>',value:"US/Pacific",
listeners:{select:this.tzChanged,scope:this}});this.timezone.render(this.timezoneNodeId);var a=new Date,b=a.format("M d, Y"),c=a.format("d M Y");a=a.format("Y M d");this.formatType=new Ext.UI.ComboBox({width:250,typeAhead:true,triggerAction:"all",mode:"local",store:new Ext.data.ArrayStore({fields:["id","text"],data:[[1,b],[2,c],[3,a]]}),valueField:"id",displayField:"text",listeners:{scope:this}});this.formatType.render(this.formatTypeId);this.formatType.setValue(1)},onAutomaticCheck:function(a,b){this.setManually.setDisabled(b)},
onSetManually:function(){this.datetime.Show(null,{tz:this.timezone.getValue(),syncNTP:this.automatic.getValue(),delegatename:"setTime"})},setTime:function(a){if(a){a.syncNTP!=undefined&&this.automatic.setValue(a.syncNTP);a.tz!=undefined&&this.timezone.setValue(a.tz)}},tzChanged:function(){this.isTZChanged=true},commit:function(){CComQIPtr(this.spSysManager.getTimeZone(),"ISysTZone").putTimeZoneName(this.timezone.getValue());this.spSysManager.commitTimeZone("wizard-commit-timezone");var a=CComQIPtr(this.spSysManager.getHourMapInfo(),
"ISysHourMapInfo");a.putEnable(this.use24Format.getValue()+"");a.putFormatType(this.formatType.getValue());this.spSysManager.commitHourMapInfo("wizard-commit-hourmap")},IDateTimeWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a.getArgs());return S_OK},OnClosed:function(){return S_OK},OnTick:function(){return S_OK}},ISysManagerEvents:{OnReady:function(a,b){switch(b){case "wizard-update-timezone":a=CComQIPtr(a,"ISysManager");this.timezone.setValue(CComQIPtr(a.getTimeZone(),
"ISysTZone").getTimeZoneName());break;case "wizard-update-ntp":a=CComQIPtr(a,"ISysManager");this.automatic.setValue(CComQIPtr(a.getNTPInfo(),"ISysNTPInfo").getEnable()=="true");break}return S_OK},OnDone:function(a,b,c){c=="datetimewnd-commit-hourmap"&&a==S_OK&&setTimeout(function(){if(localStorage.getItem("enable24Hour")&&localStorage.getItem("dataFormatType")){this.use24Format.setValue(localStorage.getItem("enable24Hour")=="true");this.formatType.setValue(+localStorage.getItem("dataFormatType"))}}.bind(this),
500);return S_OK}}});Ext.namespace("Ext.Wizard");
Ext.Wizard.AlertContacts=Njl.inherit(Ext.Wizard.Base,ISysAlertsManagerEvents,{cls:"wizard-alerts",hidden:true,constructor:function(){Ext.Wizard.AlertContacts.superclass.constructor.call(this);this.title=_TR("ALERT_CONTACT_S")},initComponent:function(){Ext.Wizard.AlertContacts.superclass.initComponent.call(this);this.testAlertMessage="wizard-alerts-testmessage";var a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");if(a){a=a.getSystemManager();this.spAlertsManager=a.getAlertsManager();
this.spLCManager=a.getLocaleManager();CComQIPtr(this.spAlertsManager,"INotifySink").Advise(this)}this.on("show",function(){this.skip=false},this)},afterRender:function(a){Ext.Wizard.AlertContacts.superclass.afterRender.call(this,a);this.el.update('<div class="wizard-page-content" style="overflow-y:auto; margin-bottom:10px;"><div class="wizard-page-content-i"><table><tr><td><div><div style="margin-right: 5px;"><nobr style="font-weight: bold;" class="x-system-panel-value">'+_TR("EMAIL_SERVER_ACCOUNT")+
'</nobr></div></div></td></tr><tr><td><div class="emailBox gmailBox"><div class="emailIcon gmailIcon"></div><div id="'+(this.imgGmailId=Ext.id())+'" class="emailText gmailText sign">'+_TR("ALERTS_GMAIL_SIGN")+'</div></div></td><td><div class="emailBox outlookBox"><div class="emailIcon outlookIcon"></div><div id="'+(this.imgOutlookId=Ext.id())+'" class="emailText emailText-Micro sign">'+_TR("ALERTS_OUTLOOK_SIGN")+'</div></div></td></tr></table><table style="width: 100%"><tr><td><div class="other-email-providers"><nobr>'+
_TR("OTHER_EMAIL_PROVIDERS")+'</nobr></div></td></tr></table><table cellpadding="0" cellspacing="4" border="0"><tr><td id="'+(this.tfContactLblId=Ext.id())+'" class="wizard-table-cell">'+_TR("EMAIL")+':</td><td id="'+(this.tfContactId=Ext.id())+'"></td></tr><tr><td id="'+(this.cbProviderLblId=Ext.id())+'" class="wizard-table-cell">'+_TR("WIZ_EMAIL_PROVIDER")+':</td><td id="'+(this.cbProviderId=Ext.id())+'"></td><td style="padding-bottom: 10px;" id="'+(this.ttProviderId=Ext.id())+'"></td></tr><tr><td class="wizard-table-cell">'+
_TR("USER")+':</td><td id="'+(this.tfUserId=Ext.id())+'"></td></tr><tr><td class="wizard-table-cell">'+_TR("PASSWORD")+_TR("COLON")+'</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr></table><div id="'+(this.dAdvanceId=Ext.id())+'" class="x-system-panel-alerts-advance-collapse" style="cursor: pointer; margin: 10px 0px; padding-left:10px; text-indent:5px;"><nobr style="font-weight: bold;" class="x-system-panel-value">'+_TR("ADVANCED_OPTIONS")+'</nobr></div><table id="'+(this.tAdvanceId=Ext.id())+
'" cellpadding="0" cellspacing="4" border="0"><tr><td class="wizard-table-cell">'+_TR("SMTP_SERVER")+':</td><td id="'+(this.cbServerId=Ext.id())+'" ></td><td id="'+(this.cbTlsId=Ext.id())+'" ></td></tr><tr><td class="wizard-table-cell">'+_TR("SMTP_PORT")+':</td><td id="'+(this.tfPortId=Ext.id())+'" colspan="2"></td></tr><tr><td class="wizard-table-cell">'+_TR("FROM")+':</td><td id="'+(this.tfFromId=Ext.id())+'" colspan="2"></td></tr></table><div><div id="'+(this.bClearId=Ext.id())+'" style="float: left;"></div><div id="'+
(this.bSendId=Ext.id())+'" style="float: right;"></div></div></div></div><div id="'+(this.btnsCtnrId=Ext.id())+'" class="wizard-page-buttons"></div>');this.initControls();this.spAlertsManager.updateConfig("wizard-update-config");this.renderBackButton(this.btnsCtnrId);this.renderNextButton(this.btnsCtnrId);this.renderCancelButton(this.btnsCtnrId);a=this.getEmailImg();var b=a[0],c=a[1];b.on("click",function(){if(!b.hasClass("disabledText"))if(b.hasClass("signed"))window.open("https://mail.google.com/",
"_blank");else{this.currentClickEmail="GMail";this.winRef=this.openWindowCentered(location.protocol+"//"+location.host+"/emailservicecb.html","_blank",600,1050);this.spAlertsManager.deleteCurrentOauth2EmailService("wizard-alerts-delete-current-oauth2")}},this);c.on("click",function(){if(!c.hasClass("disabledText"))if(c.hasClass("signed"))window.open("https://outlook.live.com/","_blank");else{this.currentClickEmail="Outlook";this.winRef=this.openWindowCentered(location.protocol+"//"+location.host+
"/emailservicecb.html","_blank",600,1050);this.spAlertsManager.deleteCurrentOauth2EmailService("wizard-alerts-delete-current-oauth2")}},this);this.mask=new Ext.UI.LoadMask(Ext.getBody(),{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0});this.loadEmailXML()},emailProviderArr:[],emailServerArr:[],getEmailImg:function(){var a=Ext.get(this.imgGmailId),b=Ext.get(this.imgOutlookId);return[a,b]},initialImg:function(){var a=this.getEmailImg(),b=a[0];a=a[1];b.parent("div").removeClass("disabledBox");
a.parent("div").removeClass("disabledBox");b.removeClass("disabledText").removeClass("signed").addClass("sign");a.removeClass("disabledText").removeClass("signed").addClass("sign");b.update(_TR("ALERTS_GMAIL_SIGN"));a.update(_TR("ALERTS_OUTLOOK_SIGN"));return[b,a]},initialEmailInputStatus:function(a){var b=this.configFields;b.tfContact.setDisabled(a);b.tfUser.setDisabled(a);b.tfPassword.setDisabled(a);b.cbProvider.setDisabled(a);b.cbServer.setDisabled(a);b.tfPort.setDisabled(a);b.tfFrom.setDisabled(a);
b.cbTls.setDisabled(a)},initialImgStatus:function(a){var b=this.initialImg(),c=b[0];b=b[1];switch(a){case "GMail":c.parent("div").removeClass("disabledBox");c.removeClass("disabledText").removeClass("sign").addClass("signed");c.update(_TR("ALERTS_GMAIL_SIGNED"));b.parent("div").addClass("disabledBox");b.removeClass("sign").removeClass("signed").addClass("disabledText");b.update("Microsoft");break;case "Outlook":c.parent("div").addClass("disabledBox");c.removeClass("sign").removeClass("signed").addClass("disabledText");
c.update("Google");b.parent("div").removeClass("disabledBox");b.removeClass("disabledText").removeClass("sign").addClass("signed");b.update(_TR("ALERTS_OUTLOOK_SIGNED"));break}},loadEmailXML:function(){var a=this.emailProviderArr,b=this.emailServerArr,c=this.configFields.cbServer;Ext.Ajax.request({method:"GET",url:document.emailprovider?document.emailprovider:location.protocol+"//"+location.host+"/ispdb.xml",success:function(d){d=d.responseXML;if(d!=null){var e="";$_(d.getElementsByTagName("emailProvider")).forEach(function(f){if(!$_.find(a,
function(g){return g.id==f.getAttribute("id")})){var h={id:f.getAttribute("id"),domain:[],outgoingServer:{type:"",hostname:"",port:"",socketType:""}};$_(f.getElementsByTagName("domain")).forEach(function(g){h.domain.push(g.textContent)});$_(f.getElementsByTagName("outgoingServer")).forEach(function(g){e=g.getElementsByTagName("hostname").length>0?g.getElementsByTagName("hostname")[0].textContent:"";h.outgoingServer={type:g.getAttribute("type"),hostname:e,port:g.getElementsByTagName("port").length>
0?g.getElementsByTagName("port")[0].textContent:"",socketType:g.getElementsByTagName("socketType").length>0?g.getElementsByTagName("socketType")[0].textContent:""};e&&$_.findIndex(b,function(i){return i[0]==e})==-1&&b.push([e,e])});a.push(h)}});c.getStore().loadData(b)}},failure:function(){},autoAbort:false})},onServerBlur:function(){var a=this.configFields.cbServer.getValue();Ext.data.Record.create(["Iserver","provider","username","server","port","encription","authentication","pswd"]);var b=$_.find(this.emailProviderArr,
function(d){return d.outgoingServer.hostname==a});if(b){var c=this.configFields;c.tfPort.setValue(b.outgoingServer.port);b=b.outgoingServer.socketType.toLowerCase();c.cbTls.setValue(b.indexOf("tls")!=-1||b=="ssl")}},onUserBlur:function(a){var b=a.el.getValue();if(b&&Njl.Utils.isValidEmail(b)){this.configFields.tfContact.id==a.el.id&&this.configFields.tfUser.getValue()==""&&this.configFields.tfUser.setValue(b);var c=b.split("@").pop(),d=this.configFields.cbProvider,e=Ext.data.Record.create(["Iserver",
"provider","username","server","port","encription","authentication","pswd"]),f=$_.find(this.emailProviderArr,function(g){return g.id==c});if(f){a=f.outgoingServer.socketType.toLowerCase();var h=$_.findIndex(d.getStore().data.items,function(g){return g.data.provider==f.id});if(h==-1){d.store.add([new e({Iserver:CComQIPtr(c,"ISysAlertsSMTPServer"),provider:f.id,username:b,fromName:b,server:f.outgoingServer.hostname,port:f.outgoingServer.port,encription:a.indexOf("tls")!=-1||a.indexOf("ssl")!=-1?"SSL":
"",authentication:"",pswd:""})]);h=$_.findIndex(d.getStore().data.items,function(g){return g.data.provider==f.id})}else{e=d.getStore().getAt(h);e.data.username=b;e.data.fromName=b}d.setValue(f.id);d=this.configFields;d.tfPassword.setValue("");d.tfPort.setValue(f.outgoingServer.port);d.cbTls.setValue(a.indexOf("tls")!=-1||a=="ssl");b&&d.tfFrom.setValue(b);this.setAdvReadonly(f.id);d.cbServer.setValue(f.outgoingServer.hostname)}else{d.setValue(_TR("CUSTOM"));d=this.configFields;d.cbServer.setValue("");
d.tfPort.setValue("");d.cbTls.setValue(false);b&&d.tfFrom.setValue(b);this.setAdvReadonly(_TR("CUSTOM"));b=Ext.get(this.dAdvanceId);b.hasClass("x-system-panel-alerts-advance-collapse")&&b.dom.click()}}},initControls:function(){this.configFields={};this.tfContactLbl=Ext.get(this.tfContactLblId);this.focusControl=this.configFields.tfContact=new Ext.UI.TextField({width:275,enableKeyEvents:true,listeners:{keyup:function(){this.configFields.tfContact.getValue().trim()},blur:this.onUserBlur,scope:this}});
this.configFields.tfContact.render(this.tfContactId);this.configFields.cbProvider=new Ext.UI.ComboBox({width:275,store:new Ext.data.ArrayStore({fields:["Iserver","provider","username","server","port","encription","authentication","pswd"],data:[[{},_TR("CUSTOM")]],idIndex:1}),valueField:"provider",displayField:"provider",triggerAction:"all",lazyRender:true,mode:"local",listeners:{select:this.onSMTPChange,scope:this}});this.configFields.cbProvider.render(this.cbProviderId);this.ttProvider=new Ext.UI.RoundButton({cls:"x-frontview-btn-info",
renderTo:this.ttProviderId,listeners:{afterrender:function(c){this.browseHostToolTip=new Ext.UI.ToolTip(c.el,{html:_TR("EMAIL_PROVIDER_TOOLTIP_MESSAGE")})},scope:this}});this.configFields.tfUser=new Ext.UI.TextField({width:275,listeners:{blur:this.onUserBlur,scope:this}});this.configFields.tfUser.render(this.tfUserId);this.configFields.tfPassword=new Ext.UI.TextField({width:275,inputType:"password"});this.configFields.tfPassword.render(this.tfPasswordId);this.configFields.cbServer=new Ext.UI.ComboBox({width:165,
store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",triggerAction:"all",lazyRender:true,mode:"local",editable:true,listeners:{blur:this.onServerBlur,scope:this}});this.configFields.cbServer.render(this.cbServerId);this.configFields.tfPort=new Ext.UI.TextField({maskRe:/[0-9]/});this.configFields.tfPort.render(this.tfPortId);this.configFields.cbTls=new Ext.UI.Checkbox({checked:false,boxLabel:_TR("USE_TLS")});this.configFields.cbTls.render(this.cbTlsId);this.configFields.tfFrom=
new Ext.UI.TextField({width:275});this.configFields.tfFrom.render(this.tfFromId);this.bClear=new Ext.UI.Button({width:120,text:_TR("CLEAR"),cancelbtn:true,handler:this.onClearClick,scope:this});this.bClear.render(this.bClearId);this.bSend=new Ext.UI.Button({xtype:"uibutton",width:120,text:_TR("SEND_TEST_MESSAGE"),expandToText:true,handler:this.sendMessage,acceptbtn:true,scope:this});this.bSend.render(this.bSendId);var a=Ext.get(this.dAdvanceId),b=Ext.get(this.tAdvanceId);b.dom.style.display="none";
a.on("click",function(){if(a.hasClass("x-system-panel-alerts-advance-expand")){a.removeClass("x-system-panel-alerts-advance-expand").addClass("x-system-panel-alerts-advance-collapse");b.dom.style.display="none"}else{a.removeClass("x-system-panel-alerts-advance-collapse").addClass("x-system-panel-alerts-advance-expand");b.dom.style.display=""}},this)},checkUser:function(){var a=this.configFields.cbServer.getValue().trim(),b=this.configFields.tfFrom.getValue().trim();if(a&&a.length>0&&b&&b.length>0)return true;
return false},onClearClick:function(){var a=CComQIPtr(this.spAlertsManager.getConfig(),"ISysAlertsConfig");if(a){a.putContact("");a.putProvider("");a.putUser("");a.putPassword("");a.putServer("");a.putPort("");a.putFromName("");a.putTLS("false");this.focusControl.setValue("");this.configFields.cbProvider.store.removeAll(true);this.configFields.cbProvider.store.loadData([[{},_TR("CUSTOM")]]);this.configFields.cbProvider.setValue("");this.configFields.tfUser.setValue("");this.configFields.tfPassword.setValue("");
this.configFields.cbServer.setValue("");this.configFields.tfPort.setValue("");this.configFields.tfFrom.setValue("");this.configFields.cbTls.setValue(false);a=this.initialImg();var b=a[1];a[0].removeClass("login");b.removeClass("login");this.initialEmailInputStatus(false);this.ttProvider.setVisible(true);this.bClear.setText(_TR("CLEAR"))}},sendMessage:function(){this.validate()&&this.putConfig()&&this.spAlertsManager.sendTestMessage(this.testAlertMessage)},validate:function(){this.tfContactLbl.removeClass("wizard-cell-error");
var a=this.configFields.tfContact.getValue();if(Ext.isEmpty(a))return true;else if(!Njl.Utils.isValidEmail(a)){this.tfContactLbl.addClass("wizard-cell-error");this.configFields.tfContact.focus(false,true);return false}return true},commit:function(){!this.skip&&this.putConfig()&&this.spAlertsManager.commitConfig("wizard-alerts-commit")},putConfig:function(){var a=CComQIPtr(this.spAlertsManager.getConfig(),"ISysAlertsConfig");if(a){a.putContact(this.configFields.tfContact.getValue());a.putProvider(this.configFields.cbProvider.getValue());
a.putUser(this.configFields.tfUser.getValue());a.putPassword(this.configFields.tfPassword.getValue());a.putServer(this.configFields.cbServer.getValue());a.putPort(this.configFields.tfPort.getValue());a.putFromName(this.configFields.tfFrom.getValue());a.putTLS(this.configFields.cbTls.getValue()?"true":"false");a.putAuth(this.currentClickEmail=="GMail"||this.currentClickEmail=="Outlook"?"oauth2":"login");return true}return false},onSMTPChange:function(a,b){a=this.configFields;var c=b.data.username;
if(b.get("provider").toLowerCase()!==_TR("CUSTOM").toLowerCase()){c=b.get("username");fromName=b.get("fromName");c==""&&(fromName="");!fromName&&c&&(fromName=c);a.tfUser.setValue(c);a.cbServer.setValue(b.get("server"));a.tfPort.setValue(b.get("port"));c=b.get("encription").toLowerCase();a.cbTls.setValue(c.indexOf("tls")!=-1||c=="ssl");a.tfFrom.setValue(fromName)}else{a.cbServer.setValue("");a.tfPort.setValue("");a.cbTls.setValue(false)}this.setAdvReadonly(b.get("provider").toLowerCase())},setAdvReadonly:function(){v=
false;this.configFields.cbServer.setDisabled(v);this.configFields.tfPort.setDisabled(v);this.configFields.tfFrom.setDisabled(v);this.configFields.cbTls.setDisabled(v)},startAuthWndPolling:function(){var a=this;clearInterval(a.pollAuthWndProcId);if(Njl.isIE)window.onstorage=function(b){if(b.key=="CurrentOAuth2Code"){window.onstorage=null;localStorage.setItem("CurrentOAuth2Code",b.newValue)}};this.pollAuthWndProcId=setInterval(function(){if(localStorage.getItem("CurrentOAuth2Code")){clearInterval(a.pollAuthWndProcId);
var b=a.currentClickEmail,c=a.currentOAuth2State,d=localStorage.getItem("CurrentOAuth2Code");a.spAlertsManager.exchangeAuthentication("wizard-alerts-exchange-current-oauth2",b,c,d)}},1E3)},openWindowCentered:function(a,b,c,d){var e=0,f=0;try{var h=window.screenTop!=undefined?window.screenTop:screen.top,g=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;e=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?
document.documentElement.clientWidth:screen.width)/2-d/2+(window.screenLeft!=undefined?window.screenLeft:screen.left);f=g/2-c/2+h}catch(i){}(a=window.open(a,b,"scrollbars=yes,width="+d+",height="+c+",top="+f+",left="+e))&&a.focus&&a.focus();return a},replaceRedirectState:function(a,b){return a.replace(/(state=)[^&]*/gi,"$1"+encodeURIComponent(window.location.protocol+"//"+window.location.host+b))},ISysAlertsManagerEvents:{OnNTPending:function(a,b){b==this.testAlertMessage&&this.mask.show();switch(b){case "wizard-alerts-update-current-oauth2":case "wizard-alerts-update-current-oauth2-url":case "wizard-alerts-delete-current-oauth2":case "wizard-alerts-exchange-current-oauth2":this.mask.show();
break}return S_OK},OnReady:function(a,b){CComQIPtr(a,"ISysAlertsManager");switch(b){case "wizard-alerts-delete-current-oauth2":this.spAlertsManager.updateCurrentOauth2Url("wizard-alerts-update-current-oauth2-url",this.currentClickEmail);break;case "wizard-alerts-update-current-oauth2-url":a=this.spAlertsManager.getCurrentOAuth2Url();if(a!=E_FAIL){localStorage.removeItem("CurrentOAuth2Code");b=window.location.protocol+"//"+window.location.host+"/emailservicecb.html";var c=this.spLCManager.getLocale();
c=="auto"&&(c=this.spLCManager.getAutoLocale());this.winRef.location=a.replace(/(state=)[^&]*/gi,"$1"+(typeof Njl=="undefined"?_.OAuth2EnDeCryption:Njl.OAuth2EnDeCryption)("location="+b+"&locale_code="+c+"&version=2&csrfpId="+window.csrfId,"cloudstoragesync","ENCODE"));this.currentOAuth2State=Njl.getQueryString(a,"state");this.startAuthWndPolling()}break;case "wizard-alerts-exchange-current-oauth2":a=this.spAlertsManager.getCurrentOAuth2Token();this.configFields.tfContact.setValue(a.email);this.onUserBlur(this.configFields.tfContact);
this.configFields.tfPassword.setValue(a.id);this.initialImgStatus(this.currentClickEmail);this.initialEmailInputStatus(true);this.ttProvider.setVisible(false);this.bClear.setText(_TR("ALERTS_SIGNED_OUT"));break;case this.testAlertMessage:Ext.UI.MessageBox.info({title:_TR("ALERT_CONTACT_S"),msg:_TR("TEST_MSG_SENT")});break}return S_OK},OnDone:function(a,b,c){c==this.testAlertMessage&&this.mask.hide();switch(c){case "wizard-alerts-update-current-oauth2":case "wizard-alerts-update-current-oauth2-url":case "wizard-alerts-delete-current-oauth2":case "wizard-alerts-exchange-current-oauth2":this.mask.hide();
break}if(a!=S_OK&&c==this.testAlertMessage)if(a=CComQIPtr(b,"IProtocol").getLastNMLError()){b=a.getErrorCode();a.getErrorDetails();Ext.UI.MessageBox.error({title:_TR("TEST_MSG_ERROR"),msg:_TR(b)})}else Ext.UI.MessageBox.error({msg:_TR("TEST_MSG_ERROR")});return S_OK}}});Ext.namespace("Ext.Wizard");
Ext.Wizard.HostName=Ext.extend(Ext.Wizard.Base,{cls:"wizard-hostname",hidden:true,initComponent:function(){Ext.Wizard.HostName.superclass.initComponent.call(this);this.title=_TR("HOSTNAME");var a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");if(a){this.spNetworkManager=a.getNetworkManager();CComQIPtr(this.spNetworkManager,"INotifySink").Advise(this)}},afterRender:function(a){Ext.Wizard.HostName.superclass.afterRender.call(this,a);this.el.update('<div class="wizard-page-content"><table cellpadding="0" cellspacing="0" border="0" class="wizard-page-content-i"><tr><td id="'+
(this.hostLblId=Ext.id())+'" class="wizard-table-cell">'+_TR("HOSTNAME")+':</td><td id="'+(this.hostId=Ext.id())+'"></td></tr></table></div><div id="'+(this.btnsCtnrId=Ext.id())+'" class="wizard-page-buttons"></div>');this.focusControl=this.hostname=new Ext.UI.TextField({width:250,value:"",inputMaxLength:15,renderTo:this.hostId});this.renderBackButton(this.btnsCtnrId);this.renderNextButton(this.btnsCtnrId);this.renderCancelButton(this.btnsCtnrId);this.spNetworkManager.updateNetworkInfo("wizard-update-networkinfo")},
getItems:function(){var a=this.cls;this.hostname=new Ext.UI.TextField({width:250,value:HOSTINFO.hostname?HOSTINFO.hostname:"",inputMaxLength:14});this.workgroup=new Ext.UI.TextField({width:250,value:HOSTINFO.workgroup?HOSTINFO.workgroup:"",inputMaxLength:15});this.hostnameTooltip=new Ext.Component({cls:a+"-help"});this.hostnameTooltip.on("afterrender",function(b){new Ext.UI.ToolTip(b.el,{width:200,html:_TR("WIZARD_HOST_HOST")})},this);this.workgroupTooltip=new Ext.Component({cls:a+"-help"});this.workgroupTooltip.on("afterrender",
function(b){new Ext.UI.ToolTip(b.el,{width:200,html:_TR("WIZARD_HOST_WGROUP")})},this);return[{xtype:"box",cls:"wizard-title",html:_TR("HOST_NAME_UC")},{xtype:"container",cls:a+"-content",items:[this.getTable(a+"-table",[this.getRow("",[this.getCell(a+"-cell1 "+a+"-hostname",_TR("HOST_NAME_LC")+":"),this.getCell("",this.hostname),this.getCell("",this.hostnameTooltip)]),this.getRow("",[this.getCell(a+"-cell1",_TR("WORKGROUP")+":"),this.getCell("",this.workgroup),this.getCell("",this.workgroupTooltip)])])]},
{xtype:"container",cls:"wizard-btns",items:[{xtype:"uibutton",text:this.BACK,width:85,handler:function(){this.fireEvent("back",this)}.createDelegate(this)},{xtype:"uibutton",text:this.NEXT,width:85,handler:this.onNext.createDelegate(this)},{xtype:"uibutton",text:this.CANCEL,width:85,handler:function(){this.fireEvent("cancel",this)}.createDelegate(this)}]}]},validate:function(){var a=this.hostname.getValue();if(Njl.isValidHostname(a)){Ext.fly(this.hostLblId).removeClass("wizard-cell-error");return true}else{Ext.fly(this.hostLblId).addClass("wizard-cell-error");
this.hostname.focus()}return false},commit:function(){if(this.spNetworkManager){this.spNetworkManager.putHostname(this.hostname.getValue());this.spNetworkManager.commitNetworkInfo("wizard-commit-networkinfo")}},INetworkManagerEvents:{OnReady:function(a,b){switch(b){case "wizard-update-networkinfo":this.hostname.setValue(this.spNetworkManager.getHostname()!=E_FAIL?this.spNetworkManager.getHostname():"");break}return S_OK},OnDone:function(){return S_OK}}});Ext.namespace("Ext.Wizard");
Ext.Wizard.AdminPassword=Ext.extend(Ext.Wizard.Base,{cls:"wizard-adminpass",hidden:true,availableAlert:false,initComponent:function(){Ext.Wizard.AdminPassword.superclass.initComponent.call(this);this.title=_TR("ADMINISTRATOR_PASSWORD");this.enabled=true;var a=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice");if(a){this.spSYSManager=a.getSystemManager();CComQIPtr(this.spSYSManager,"INotifySink").Advise(this)}this.prompt=CComQIPtr(CoCreateInstance(Njl.CLSIDS.Controls.PromptWindow),"IPromptWindow")},
afterRender:function(a){Ext.Wizard.AdminPassword.superclass.afterRender.call(this,a);this.el.update('<div class="wizard-page-content"><table cellpadding="0" cellspacing="0" border="0" class="wizard-page-content-i"><tr><td id="'+(this.usernameLblId=Ext.id())+'" class="wizard-table-cell">'+_TR("USER_NAME")+':</td><td id="'+(this.usernameId=Ext.id())+'"></td></tr><tr style="display:none;"><td id="'+(this.oldPwdLblId=Ext.id())+'" class="wizard-table-cell">'+_TR("PASSWORD_OLD")+':</td><td id="'+(this.oldPwdId=
Ext.id())+'"></td></tr><tr><td id="'+(this.passwordLblId=Ext.id())+'" class="wizard-table-cell">'+_TR("NEW_PASSWORD")+':</td><td id="'+(this.passwordId=Ext.id())+'"></td></tr><tr><td id="'+(this.confirmLblId=Ext.id())+'" class="wizard-table-cell">'+_TR("RE_NEW_PASSWORD")+':</td><td id="'+(this.confirmId=Ext.id())+'"></td></tr><tr><td colspan="2" id="'+(this.chAdminPasswordRecId=Ext.id())+'" style="padding-top: 10px;"></td></tr><tr><td colspan="2" ><div id="'+(this.rbAdminResetButtonId=Ext.id())+'" style="margin-left: 10px; margin-top: 14px;"></div><div style="margin-left: 10px; margin-top: 14px;"><div id="'+
(this.rbAdminRecoveryQwestId=Ext.id())+'"></div><table style="table-layout:fixed; margin-top: 14px;" cellpadding="0" cellspacing="0" ><tr><td class="wizard-table-cell" id="'+(this.questionLblId=Ext.id())+'">'+_TR("WIZARD_RECOVERY_QUESTION")+_TR("COLON")+'</td><td id="'+(this.questionId=Ext.id())+'"></td></tr><tr><td class="wizard-table-cell" id="'+(this.answerLblId=Ext.id())+'">'+_TR("WIZARD_RECOVERY_ANSWER")+_TR("COLON")+'</td><td id="'+(this.answerId=Ext.id())+'"></td></tr><tr><td class="wizard-table-cell" id="'+
(this.emailLblId=Ext.id())+'" title="'+_TR("WIZARD_RECOVERY_EMAIL")+'">'+_TR("WIZARD_RECOVERY_EMAIL")+_TR("COLON")+'</td><td id="'+(this.emailId=Ext.id())+'"></td></tr></table></div></td></tr></table></div><div id="'+(this.btnsCtnrId=Ext.id())+'" class="wizard-page-buttons"></div>');this.renderBackButton(this.btnsCtnrId);this.renderNextButton(this.btnsCtnrId);this.renderCancelButton(this.btnsCtnrId);this.admin=new Ext.UI.TextField({width:200,value:"admin",inputMaxLength:255,disabled:true,renderTo:this.usernameId});
this.focusControl=this.password=new Ext.UI.TextField({width:200,inputType:"password",inputMaxLength:255,renderTo:this.passwordId,tooltipCfg:{html:_TR("FOR_WIZARD_PASSWORD_TOOLTIP")}});this.confirm=new Ext.UI.TextField({width:200,inputType:"password",inputMaxLength:255,renderTo:this.confirmId});this.oldPwd=new Ext.UI.TextField({width:200,inputType:"password",inputMaxLength:255,value:"password",enableKeyEvents:true,renderTo:this.oldPwdId,listeners:{keyup:function(){if(this.oldPwd.getValue()&&!this.enabled)this.enableRecoveryMode(true);
else!this.oldPwd.getValue()&&this.enabled&&this.enableRecoveryMode(false)},scope:this}});this.email=new Ext.UI.TextField({width:200,cls:"wizard-editor",inputMaxLength:320,renderTo:this.emailId});this.question=new Ext.UI.TextField({width:200,cls:"wizard-editor",inputMaxLength:255,renderTo:this.questionId});this.answer=new Ext.UI.TextField({width:200,cls:"wizard-editor",inputMaxLength:255,renderTo:this.answerId});this.enablePswdRecovery=new Ext.UI.Checkbox({boxLabel:_TR("ENABLE_PSWD_RECOVERY"),renderTo:this.chAdminPasswordRecId,
checked:false,listeners:{check:function(b,c){this.onEnablePswdRecoveryCheck(b,c)},scope:this}});this.radioButtonResetPswd=new Ext.UI.Radio({boxLabel:_TR("PHYSICAL_RESET_BUTTON"),renderTo:this.rbAdminResetButtonId,checked:true,name:"reset_pswd",listeners:{check:function(b,c){this.onRadioChecked(b,c)},scope:this}});this.radioButtonRecoveryQwest=new Ext.UI.Radio({boxLabel:_TR("EMAIL_NEW_PSWD"),renderTo:this.rbAdminRecoveryQwestId,checked:false,name:"recovery_qwest",listeners:{beforechange:function(){if(!this.availableAlert){CComQIPtr(this.prompt,
"INotifySink").Advise(this);this.prompt.Show(Ext.Controls.PromptWindow.QUESTION,{caption:_TR("PASS_REC"),message:_TR("RECOVERY_WARNING"),delegatename:"delegateShowAlertsTab",okbtn:_TR("OK"),cancelbtn:_TR("CANCEL")});return false}return true},check:function(b,c){this.onRadioChecked(b,c)},scope:this}})},enableRecoveryMode:function(a){this.focusControl.setDisabled(!a);this.confirm.setDisabled(!a);this.enablePswdRecovery.setDisabled(!a);if(this.enablePswdRecovery.getValue()){this.radioButtonRecoveryQwest.setDisabled(!a);
this.radioButtonResetPswd.setDisabled(!a)}if(this.radioButtonRecoveryQwest.getValue()){this.question.setDisabled(!a);this.answer.setDisabled(!a);this.email.setDisabled(!a)}this.enabled=a},setAvailableUser:function(a){this.availableAlert=a;this.email.setDisabled(!a);this.question.setDisabled(!a);this.answer.setDisabled(!a);this.disablePswdRecoverySettings(!this.enablePswdRecovery.getValue())},pswNext:function(){this.pwdStrength()?Ext.UI.MessageBox.confirm({title:this.title,msg:String.format(_TR("NEW_WEAK_PASSWORD_CONFIRM_IGNORE")),
icon:Ext.UI.MessageBox.WARNING,fn:function(a){a=="yes"&&this.fireEvent("next",this)},scope:this}):this.fireEvent("next",this)},pwdStrength:function(){var a=this.password.getValue();return!(new RegExp("^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-ZW_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-zW_!@#$%^&*`~()-+=]+$)(?![0-9W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9W_!@#$%^&*`~()-+=]{8,}$")).test(a)},validate:function(){var a=[];a=this.availableAlert?[this.passwordLblId,this.confirmLblId,this.emailLblId,this.questionLblId,this.answerLblId]:
[this.passwordLblId,this.confirmLblId];for(var b=0;b<a.length;++b)Ext.fly(a[b]).removeClass("wizard-cell-error");a=this.password.getValue();b=this.confirm.getValue();var c=this.email.getValue(),d=this.question.getValue(),e=this.answer.getValue();if(this.enablePswdRecovery.getValue()&&this.radioButtonRecoveryQwest.getValue()){if(d==""){Ext.fly(this.questionLblId).addClass("wizard-cell-error");this.question.focus();return false}if(e==""){Ext.fly(this.answerLblId).addClass("wizard-cell-error");this.answer.focus();
return false}if(c==""){Ext.fly(this.emailLblId).addClass("wizard-cell-error");this.email.focus();return false}}this.password.tooltip.enabled=false;if(!a){Ext.fly(this.passwordLblId).addClass("wizard-cell-error");this.password.focus();this.password.tooltip.enabled=true;return false}if(a&&(!b||a!=b)){Ext.fly(this.confirmLblId).addClass("wizard-cell-error");this.confirm.focus()}else if(a&&(!c||!Ext.form.VTypes.email(c))&&!this.question.disabled){Ext.fly(this.emailLblId).addClass("wizard-cell-error");
this.email.focus()}else if(a&&(!d||e==d)&&!this.question.disabled){Ext.fly(this.questionLblId).addClass("wizard-cell-error");this.question.focus()}else if(a&&(!e||e==d)&&!this.question.disabled){Ext.fly(this.answerLblId).addClass("wizard-cell-error");this.answer.focus()}else return true;return false},commitValidation:function(){var a=this.password.getValue(),b=this.enablePswdRecovery.getValue();return this.spSYSManager&&(a||b)},commit:function(){var a="";if(this.availableAlert)a=this.email.getValue();
var b=this.password.getValue(),c=this.enablePswdRecovery.getValue();if(this.spSYSManager&&(c||b)){this.spSYSManager.SetAdminPasswordRecovery("password",c,this.radioButtonResetPswd.getValue()?"reset":"email",this.question.getValue(),this.answer.getValue(),a,"wizard-commit-recovery");b&&this.spSYSManager.SetAdminPassword(b,"password","wizard-commit-pswd")}},disablePswdRecoverySettings:function(a){Njl.each([this.radioButtonResetPswd,this.radioButtonRecoveryQwest],function(b){b.setDisabled(a)},this);
this.disablePswdQwestRecoverySettings(a||!(!a&&this.radioButtonRecoveryQwest.getValue()))},disablePswdQwestRecoverySettings:function(a){Njl.each([this.question,this.answer,this.email],function(b){b.setDisabled(a)},this)},onEnablePswdRecoveryCheck:function(a,b){this.disablePswdRecoverySettings(!b)},onRadioChecked:function(a,b){if(a.name==="reset_pswd"&&b){this.disablePswdQwestRecoverySettings(true);this.radioButtonRecoveryQwest.setValue(false)}else if(a.name==="recovery_qwest"&&b){this.disablePswdQwestRecoverySettings(false);
this.radioButtonResetPswd.setValue(false)}},delegateShowAlertsTab:function(){this.fireEvent("back",this)},IPromptWindowEvents:{OnClosing:function(a){!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().delegatename)&&this[a.getArgs().delegatename](a)},OnClosed:function(a){CComQIPtr(a,"INotifySink").Unadvise(this);return S_OK},OnValidate:function(a){!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().validatefunc)&&this[a.getArgs().validatefunc](a)}}});Ext.namespace("Ext.Wizard");
Ext.Wizard.VolumeConfiguration=Ext.extend(Ext.Wizard.Base,{hidden:true,constructor:function(){Ext.Wizard.VolumeConfiguration.superclass.constructor.call(this);this.title=_TR("WIZARD_VOLUME_CONFIGURATION")},initComponent:function(){Ext.Wizard.VolumeConfiguration.superclass.initComponent.call(this);this.zfsVolumesManager=CComQIPtr(CoCreateInstance(dpv.CLSIDS.Device5200),"IDevice").getZFSVolumesManager();CComQIPtr(this.zfsVolumesManager,"INotifySink").Advise(this);this.zfsVolumesManager.UpdateVolumes("wizard-update-zfsvolumes")},
afterRender:function(a){Ext.Wizard.VolumeConfiguration.superclass.afterRender.call(this,a);this.el.update('<div class="wizard-page-content"><div class="wizard-page-text">'+_TR("WIZARD_VOLUME_CONFIGURATION_INTRO")+'</div><br /><div class="wizard-page-text" id="'+(this.cmpDescId=Ext.id())+'"></div><br /><div id="'+(this.cmpVolPerfGraphId=Ext.id())+'"></div><div class="x-clear"></div></div><div id="'+(this.btnsCtnrId=Ext.id())+'" class="wizard-page-buttons"></div>');this.cmpVolPerfGraph=new Ext.Controls.VolumePerformanceGraph({renderTo:this.cmpVolPerfGraphId});
this.renderBackButton(this.btnsCtnrId);this.renderNextButton(this.btnsCtnrId);this.renderCancelButton(this.btnsCtnrId)},IZFSVolumesManagerEvents:{OnDone:function(a,b,c){if(c=="wizard-update-zfsvolumes"){a=this.zfsVolumesManager.getVolumes();var d=0;if(a&&a.length)if(b=CComQIPtr(a[0],"IZFSVolume")){c=b.getVirtualDevices();a=b.getRAIDLevel();if(c&&c.length){Ext.each(c,function(e){d+=CComQIPtr(e,"IZFSVirtualDevice").getDisks().length});c=c.length;b=this.cmpVolPerfGraph.setState(a,c,d,b.getConcatenated());
Ext.get(this.cmpDescId).update(String.format(_TR("WIZARD_VOLUME_CONFIGURATION_DESC"),a=="JBOD"?a:"RAID"+a)+"<br />"+b)}}}}}});Ext.namespace("Ext.Wizard");
Ext.Wizard.GetStarted=Ext.extend(Ext.Wizard.Base,{hidden:true,constructor:function(){Ext.Wizard.GetStarted.superclass.constructor.call(this);this.title=_TR("WIZARD_GET_STARTED")},initComponent:function(){Ext.Wizard.GetStarted.superclass.initComponent.call(this);this.addEvents("finish")},afterRender:function(a){Ext.Wizard.GetStarted.superclass.afterRender.call(this,a);this.el.update('<div class="wizard-page-content"><div class="wizard-page-text">'+_TR("WIZARD_GET_STARTED_CONGRATULATION")+'</div><div style="display:none;"><a class="wizard-getstarted-link" href="http://www.readynas.com/duo_nvplus_intro_video" target="_blank">&nbsp;</a></div></div><div id="'+
(this.btnsCtnrId=Ext.id())+'" class="wizard-page-buttons"></div>');this.renderBackButton(this.btnsCtnrId);this.renderApplyButton(this.btnsCtnrId);this.renderCancelButton(this.btnsCtnrId)}});
