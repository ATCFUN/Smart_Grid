_={};_.Utils={};_.Utils.Format={};_.utils=_.Utils;_.util=_.Utils;_.lib={};_.data={};_.USE_NATIVE_JSON=false;_.ua=navigator.userAgent.toLowerCase();_.check=function(b){return b.test(_.ua)};try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}_.idSeed=0;_.docMode=document.documentMode;_.isOpera=_.check(/opera/);_.isChrome=_.check(/\bchrome\b/);_.isWebKit=_.check(/webkit/);_.isSafari=!_.isChrome&&_.check(/safari/);
_.isSafari2=_.isSafari&&_.check(/applewebkit\/4/);_.isSafari3=_.isSafari&&_.check(/version\/3/);_.isSafari4=_.isSafari&&_.check(/version\/4/);_.isIE=!_.isOpera&&_.check(/msie/);_.isIE7=_.isIE&&(_.check(/msie 7/)||_.docMode==7);_.isIE8=_.isIE&&(_.check(/msie 8/)&&_.docMode!=7&&_.docMode!=9||_.docMode==8);_.isIE9=_.isIE&&(_.check(/msie 9/)&&_.docMode!=7&&_.docMode!=8||_.docMode==9);
_.isIE10=_.isIE&&(_.check(/msie 10/)&&_.docMode!=7&&_.docMode!=8||_.docMode==10);_.isIE11=/rv:11/.test(navigator.userAgent.toLowerCase())&&navigator.userAgent.indexOf("Trident/7")>-1;_.isMetro=_.isIE10&&_.check(/msapphost/)||_.isIE11&&_.check(/msapphost/);_.isIE6=_.isIE&&!_.isIE7&&!_.isIE8&&!_.isIE9&&!_.isIE10&&!_.isIE11;_.isIE10=_.isIE10||_.isIE11;_.isIE=_.isIE||_.isIE11;_.isEdge=_.check(/edge/);
if(typeof Ext!=="undefined"){Ext.isIE=_.isIE;Ext.isIE7=_.isIE7;Ext.isIE8=_.isIE8;Ext.isIE9=_.isIE9;Ext.isIE10=_.isIE10;Ext.isIE11=_.isIE11;Ext.isIE6=_.isIE6;Ext.BLANK_IMAGE_URL="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}_.isGecko=!_.isWebKit&&_.check(/gecko/);_.isGecko2=_.isGecko&&_.check(/rv:1\.8/);_.isGecko3=_.isGecko&&_.check(/rv:1\.9/);_.isBorderBox=_.isIE&&!_.sStrict;_.isWindows=_.check(/windows|win32/);
_.isMac=_.check(/macintosh|mac os x/);_.isAir=_.check(/adobeair/);_.isLinux=_.check(/linux/);_.isSecure=/^https/i.test(window.location.protocol);_.isWindows8=_.isWindows&&function(b){if((b=/[\(]{1}([^\)]*)[\)]{1}/i.exec(b))&&b.length>0){b=b[1].split(";");for(var c=0;c<b.length;c++)if(/windows/i.test(b[c])||/win/i.test(b[c])){b=/([0-9\.]+)/.exec(b[c]);if(b[1]*1>=6.2)return true}}return false}(_.ua);_.isiPhone=_.check(/iphone/);_.isiPod=_.check(/ipod/);_.isiPad=_.check(/ipad/);
_.isiOS=_.isiPhone||_.isiPod||_.isiPad;_.isAndroid=_.check(/android/);_.isBlackBerry=_.check(/blackberry/);_.toString=Object.prototype.toString;_.toArray=function(){return _.isIE?function(b,c,d,f){f=[];for(var g=0,j=b.length;g<j;g++)f.push(b[g]);return f.slice(c||0,d||f.length)}:function(b,c,d){return Array.prototype.slice.call(b,c||0,d||b.length)}}();_.isEmpty=function(b,c){return b===null||b===undefined||_.isArray(b)&&!b.length||(!c?b==="":false)};
_.isArray=function(b){return _.toString.apply(b)==="[object Array]"};_.isDate=function(b){return _.toString.apply(b)==="[object Date]"};_.isObject=function(b){return!!b&&Object.prototype.toString.call(b)==="[object Object]"};_.isPrimitive=function(b){return _.isString(b)||_.isNumber(b)||_.isBoolean(b)};_.isFunction=function(b){return _.toString.apply(b)==="[object Function]"};_.isNumber=function(b){return typeof b==="number"&&isFinite(b)};
_.isString=function(b){return typeof b==="string"};_.isBoolean=function(b){return typeof b==="boolean"};_.isElement=function(b){return b?!!b.tagName:false};_.isDefined=function(b){return typeof b!=="undefined"};_.isAllDefined=function(){for(var b=0,c=arguments.length;b<c;++b)if(typeof arguments[b]=="undefined")return false;return true};
_.isIterable=function(b){if(_.isArray(b)||b.callee)return true;if(/NodeList|HTMLCollection/.test(_.toString.call(b)))return true;return(typeof b.nextNode!="undefined"||b.item)&&_.isNumber(b.length)};_.each=function(b,c,d){if(!_.isEmpty(b,true)){if(!_.isIterable(b)||_.isPrimitive(b))b=[b];for(var f=0,g=b.length;f<g;f++)if(c.call(d||b[f],b[f],f,b)===false)return f}};
_.iterate=function(b,c,d){if(!_.isEmpty(b))if(_.isIterable(b))_.each(b,c,d);else if(_.isObject(b))for(var f in b)if(b.hasOwnProperty(f))if(c.call(d||b,f,b[f],b)===false)return};_._2=function(){var b,c;_.each(arguments,function(d){c=d.split(".");b=window[c[0]]=window[c[0]]||{};_.each(c.slice(1),function(f){b=b[f]=b[f]||{}})});return b};_.apply=function(b,c,d){d&&_.apply(b,d);if(b&&c&&typeof c=="object")for(var f in c)b[f]=c[f];return b};
_.applyIf=function(b,c){if(b)for(var d in c)_.isDefined(b[d])||(b[d]=c[d]);return b};_.applyRecIf=function(b,c,d){d&&_.apply(b,d);if(b&&c&&typeof c=="object")for(var f in c)if(_.isObject(b[f])&&_.isObject(c[f]))b[f]=_.applyRecIf(b[f],c[f],false);else _.isDefined(b[f])||(b[f]=c[f]);return b};_.applyRec=function(b,c,d){d&&_.apply(b,d);if(b&&c&&typeof c=="object")for(var f in c)b[f]=_.isObject(b[f])&&_.isObject(c[f])?_.applyRec(b[f],c[f],false):c[f];return b};
_.overrideIf=function(b,c,d){if(c){b=b.prototype;d?_.applyRecIf(b,c):_.applyIf(b,c);if(_.isIE&&c.hasOwnProperty("toString"))b.toString=c.toString}};_.override=function(b,c,d){if(c){b=b.prototype;d?_.applyRec(b,c):_.apply(b,c);if(_.isIE&&c.hasOwnProperty("toString"))b.toString=c.toString}};_.callback=function(b,c,d,f){if(_.isFunction(b))f?b.defer(f,c,d||[]):b.apply(c,d||[])};function clone(b){function c(){}c.prototype=b;b=new c;b.constructor=c;return b}
_.extend=function(){var b=function(d){for(var f in d)this[f]=d[f]},c=Object.prototype.constructor;return function(d,f,g){if(_.isObject(f)){g=f;f=d;d=g.constructor!=c?g.constructor:function(){f.apply(this,arguments)}}var j=function(){},u=f.prototype;j.prototype=u;j=new j;d.prototype=j;for(var v in j)if(_.isInterface(j[v]))j[v]=_.clone(j[v],true);j.constructor=d;d.superclass=u;if(u.constructor==c)u.constructor=f;d.override=function(t){_.override(d,t,true)};j.superclass=j.supr=function(){return u};
j.override=b;_.override(d,g,true);d.extend=function(t){return _.extend(d,t)};return d}}();_.id=function(b){return(b||"njl_id_")+ ++_.idSeed};_.idn=function(){return++_.idSeed};_.Utils.Format.htmlEncode=function(b){return!b?b:String(b).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};_.Utils.Format.htmlDecode=function(b){return!b?b:String(b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")};
_.Utils.Format.urlEncode=function(b,c){var d,f=[],g=encodeURIComponent;_.iterate(b,function(j,u){d=_.isEmpty(u);_.each(d?j:u,function(v){f.push("&",g(j),"=",!_.isEmpty(v)&&(v!=j||!d)?_.isDate(v)?_.encode(v).replace(/"/g,""):g(v):"")})});if(!c){f.shift();c=""}return c+f.join("")};_.urlEncode=_.Utils.Format.urlEncode;_.urlAppend=function(b,c){if(!_.isEmpty(c))return b+(b.indexOf("?")===-1?"?":"&")+c;return b};
_.Utils.Format.urlDecode=function(b,c){if(_.isEmpty(b))return{};var d={};b=b.split("&");var f=decodeURIComponent,g,j;_.each(b,function(u){u=u.split("=");g=f(u[0]);j=f(u[1]);d[g]=c||!d[g]?j:[].concat(d[g]).concat(j)});return d};_.urlDecode=_.Utils.Format.urlDecode;_.Utils.Entities2xml=function(b){if(_.isString(b))return b.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&");return b};_.make_unquoted=_.Utils.Entities2xml;
_.Utils.xml2Entities=function(b){if(_.isString(b)){var c=function(d){if(d=="<")return"&lt;";else if(d==">")return"&gt;";else if(d=='"')return"&quot;";else if(d=="&")return"&amp;"};return b.replace(/[<>"&]/g,function(d){return c(d)})}return b};_.make_quoted=_.Utils.xml2Entities;
_.Utils.xmlDocument2Entities=function(b){for(var c=0,d=b.attributes.length;c<d;++c)b.attributes[c].nodeValue=make_quoted(b.attributes[c].nodeValue);c=0;for(d=b.childNodes.length;c<d;++c)if(b.childNodes[c].nodeType==3)b.childNodes[c].nodeValue=make_quoted(b.childNodes[c].nodeValue);else b.childNodes[c].nodeType==1&&_.Utils.xmlDocument2Entities(b.childNodes[c])};
_.Utils.copyToClipboard=function(b){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",b)}else if(navigator.userAgent.indexOf("Opera")!=-1)window.location=b;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(c){_2("You need set 'signed.applets.codebase_principal_support=true' at about:config'");return false}var d=Components.classes["@mozilla.org/widget/clipboard;1\u0081"].createInstance(Components.interfaces.nsIClipboard);
if(d){var f=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(f){f.addDataFlavor("text/unicode");var g={};g=Components.classes["@mozilla.org/supports-string;1\u0081\u008d"].createInstance(Components.interfaces.nsISupportsString);g.data=b;f.setTransferData("text/unicode",g,b.length*2);if(!d)return false;d.setData(f,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}};_.copyToClipboard=_.Utils.copyToClipboard;
_.Utils.def=function(b,c){if(_.isDefined(b))return b;return c};_.def=_.Utils.def;
_.apply(Function.prototype,{createInterceptor:function(b,c){var d=this;return!_.isFunction(b)?this:function(){var f=arguments;b.target=this;b.method=d;return b.apply(c||this||window,f)!==false?d.apply(this||window,f):null}},createCallback:function(){var b=arguments,c=this;return function(){return c.apply(window,b)}},createDelegate:function(b,c,d){var f=this;return function(){var g=c||arguments;if(d===true){g=Array.prototype.slice.call(arguments,0);g=g.concat(c)}else if(_.isNumber(d)){g=Array.prototype.slice.call(arguments,
0);var j=[d,0].concat(c);Array.prototype.splice.apply(g,j)}return f.apply(b||window,g)}},defer:function(b,c,d,f){c=this.createDelegate(c,d,f);if(b>0)return setTimeout(c,b);c();return 0}});_.applyIf(String,{format:function(b){var c=_.toArray(arguments,1);return b.replace(/\{(\d+)\}/g,function(d,f){return c[f]})}});
_.applyIf(Array.prototype,{indexOf:function(b,c){var d=this.length;c=c||0;for(c+=c<0?d:0;c<d;++c)if(this[c]===b)return c;return-1},remove:function(b){b=this.indexOf(b);b!=-1&&this.splice(b,1);return this}});_.Utils.registerEventHandler=function(b,c,d){typeof b.addEventListener=="function"?b.addEventListener(c,d,false):b.attachEvent("on"+c,d)};_.Utils.unregisterEventHandler=function(b,c,d){typeof b.removeEventListener=="function"?b.removeEventListener(c,d,false):b.detachEvent("on"+c,d)};
_.clone=function(b,c){var d=function(){};d.prototype=b;b=new d;if(c)for(var f in b)if(_.isObject(b[f]))b[f]=_.clone(b[f],c);return b};_.isInterface=function(b){return _.isObject(b)&&(!!!b.prototype||!!!b.prototype.constructor)};
_._1=function(){var b=undefined,c=undefined;if(arguments&&arguments.length){b=arguments[arguments.length-1];for(var d=0,f=arguments.length-1;d<f;++d){var g=arguments[d];if(g&&_.isString(g))c=g;else if(g&&g.prototype){var j=g;if(g=_.isInterface(g)){var u=function(){};u.prototype=_.clone(j.prototype,true);j=u}if(g){if(!b.prototype){b={prototype:b};b.prototype.constructor=undefined}_.overrideIf(b,j.prototype,true)}else b=_.extend(j,b.prototype?b.prototype:b)}else if(g){if(!b.prototype){b=
{prototype:b};b.prototype.constructor=undefined}_.overrideIf(b,_.clone(g,true),true);b.prototype.constructor=undefined}}}if(c&&_.isString(c)&&c.length){d=_.JSCom.singleton(_.JSCom.CComObjectsStorage);f=d.register(b,c);if(_FAILED(f))throw new CoException(f,d.register,[b,c],'Failed to register JSCOM object "'+c+'"');}return b};
_.Utils.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b,c){var d="",f,g,j,u,v,t=0;for(b=this._utf8_encode(b,c);t<b.length;){f=b.charCodeAt(t++);c=b.charCodeAt(t++);g=b.charCodeAt(t++);j=f>>2;f=(f&3)<<4|c>>4;u=(c&15)<<2|g>>6;v=g&63;if(isNaN(c))u=v=64;else if(isNaN(g))v=64;d=d+this._keyStr.charAt(j)+this._keyStr.charAt(f)+this._keyStr.charAt(u)+this._keyStr.charAt(v)}return d},decode:function(b){var c="",d,f,g,j,u,v=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,
"");v<b.length;){d=this._keyStr.indexOf(b.charAt(v++));f=this._keyStr.indexOf(b.charAt(v++));j=this._keyStr.indexOf(b.charAt(v++));u=this._keyStr.indexOf(b.charAt(v++));d=d<<2|f>>4;f=(f&15)<<4|j>>2;g=(j&3)<<6|u;c+=String.fromCharCode(d);if(j!=64)c+=String.fromCharCode(f);if(u!=64)c+=String.fromCharCode(g)}return c=this._utf8_decode(c)},_utf8_encode:function(b,c){c||(b=b.replace(/\r\n/g,"\n"));c="";for(var d=0;d<b.length;d++){var f=b.charCodeAt(d);if(f<128)c+=String.fromCharCode(f);else{if(f>127&&
f<2048)c+=String.fromCharCode(f>>6|192);else{c+=String.fromCharCode(f>>12|224);c+=String.fromCharCode(f>>6&63|128)}c+=String.fromCharCode(f&63|128)}}return c},_utf8_decode:function(b){for(var c="",d=0,f=c1=c2=0;d<b.length;){f=b.charCodeAt(d);if(f<128){c+=String.fromCharCode(f);d++}else if(f>191&&f<224){c2=b.charCodeAt(d+1);c+=String.fromCharCode((f&31)<<6|c2&63);d+=2}else{c2=b.charCodeAt(d+1);c3=b.charCodeAt(d+2);c+=String.fromCharCode((f&15)<<12|(c2&63)<<6|c3&63);d+=3}}return c}};
if(!Array.prototype.indexOf)Array.prototype.indexOf=function(b,c){var d=this.length;c=Number(c)||0;c=c<0?Math.ceil(c):Math.floor(c);if(c<0)c+=d;for(;c<d;c++)if(c in this&&this[c]===b)return c;return-1};if("function"!==typeof String.makewindowspath)String.makewindowspath=function(b){b=!_.isEmpty(b)?b:this;b=(new String(b)).substring(1,b.length).replace(/\//g,"\\");var c=b.indexOf("\\");if(c!=-1)b=b.substring(0,c).concat(":",b.length>1?b.substring(c,b.length):"\\");return b};
if(!String.prototype.makewindowspath)String.prototype.makewindowspath=String.makewindowspath;if("function"!==typeof String.isUsb)String.isUsb=function(b){b||(b=this);if(b.toLowerCase().indexOf("usb/")!=-1)return true;return false};if(!String.prototype.isUsb)String.prototype.isUsb=String.isUsb;if("function"!==typeof String.getfileext)String.getfileext=function(b){if(b||this){b=b?b:this;var c=b.lastIndexOf(".");return c!=-1?b.substr(c+1,b.length):""}return""};
if(!String.prototype.getfileext)String.prototype.getfileext=String.getfileext;if("function"!==typeof RegExp.escape)RegExp.escape=function(b){if("string"!==typeof b)return b;return b.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")};_.Utils.isValidHostname=function(b){if(b.replace(/[a-zA-Z0-9]+[a-zA-Z0-9\-]*[a-zA-Z0-9]+/g,"")==""&&b.length<=15)return true;return false};_.isValidHostname=_.Utils.isValidHostname;
_.Utils.isValidPort=function(b){return/^(\d)+$/g.test(b)&&parseInt(b)<=65535&&parseInt(b)>=0};_.isValidPort=_.Utils.isValidPort;_.Utils.isValidDomainName=function(b){var c=/[\-\.]/g;if(b.replace(/[a-zA-Z]+[a-zA-Z0-9\-\_\.]+/g,"")==""&&b.replace(c,"")!=""){b=b.split(".");if(b[0].length>15)return false;for(c=1;c<b.length;c++)if(b[c].length>15)return false;return true}return false};_.isValidDomainName=_.Utils.isValidDomainName;
_.Utils.isValidNetBIOSorNASHostname=function(b){var c=/[\-\.]/g;if(b.replace(/[a-zA-Z0-9\-\._]/g,"")==""&&b.replace(c,"")!=""){b=b.split(".");if(b[0].length>15)return false;for(c=1;c<b.length;c++)if(b[c].length>15)return false;return true}return false};_.isValidNetBIOSorNASHostname=_.Utils.isValidNetBIOSorNASHostname;_.Utils.isValidWorkgroup=function(b){var c=/[\-\._]/g;if(b.replace(/[a-zA-Z0-9\-_\.]/g,"")==""&&b.replace(c,"")!=""&&b.length<=15)return true;return false};
_.isValidWorkgroup=_.Utils.isValidWorkgroup;_.Utils.isValidIPAddress=function(b){if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(b)){b=b.split(".");if(parseInt(parseFloat(b[0]))==0||parseInt(parseFloat(b[2]))==0&&parseInt(parseFloat(b[3]))==0)return false;for(var c=0;c<b.length;c++)if(parseInt(parseFloat(b[c]))>255)return false;return true}return false};_.isValidIPAddress=_.Utils.isValidIPAddress;
_.Utils.isValidIPAddressWithPort=function(b){if(typeof b=="string"){b=b.split(":");if(b.length==2){var c=/^\d{1,5}$/;if(_.isValidIPAddress(b[0])&&c.test(b[1]))return true}}return false};_.isValidIPAddressWithPort=_.Utils.isValidIPAddressWithPort;_.Utils.isValidIPv6Address=function(b){return/^((?=(?=(.*?::))\2(?!.+::))(::)?([\dA-F]{1,4}:(:|(?!$))|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\4)::|:(?!$)|$))|(?!\3\4)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])(\.(?!$)|$)){4})$/i.test(b)};
_.Utils.isValidNetmask=function(b){if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(b)){b=b.split(".");if(parseInt(parseFloat(b[0]))==0)return false;for(var c=0;c<b.length;c++)if(parseInt(parseFloat(b[c]))>255)return false;var d=0;for(c=b.length-1;c>=0;c--)for(var f=b[c],g=0;g<8;g++){if(f>>1<<1==f){if(d==1)return false}else d=1;f>>=1}return true}return false};_.isValidNetmask=_.Utils.isValidNetmask;
_.Utils.isValidDomainName=function(b){var c=/[\-_]/g;if(b.replace(/[a-zA-Z0-9\-_\.\+]/g,"")==""&&b.replace(c,"")!="")return true;return false};_.isValidDomainName=_.Utils.isValidDomainName;_.Utils.isValidMacAddress=function(b){if(/^[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}$/.test(b))return true;return false};_.isValidMacAddress=_.Utils.isValidMacAddress;
_.Utils.isValidPath=function(b){var c=/\.\./;if(b.replace(/[a-zA-Z0-9\-_\\\/|\%\.\$:~&@\[\]`'",!#%^&()+=;{}<>? \u0080-\uffef]/g,"")==""&&!c.test(b))return true;return false};_.isValidPath=_.Utils.isValidPath;_.Utils.isValidShareName=function(b){var c=/[$a-zA-Z0-9\-_\u0080-\uffef]/g,d=/[\-\._]/g;if(b&&b.replace(c,"")==""&&b.replace(d,"")!=""&&b.length<81)return true;return false};_.isValidShareName=_.Utils.isValidShareName;
_.Utils.isValidSnapshotName=function(b){var c=/[\-\._]/g;if(b.replace(/[a-zA-Z0-9\u0080-\uffef]+[a-zA-Z0-9\u0080-\uffef\-\._]*/g,"")==""&&b.replace(c,"")!=""&&b.length<50)return true;return false};_.isValidSnapshotName=_.Utils.isValidSnapshotName;_.Utils.isValidUserGroup=function(b){var c=/[a-zA-Z0-9\-_\.@]/g,d=/[\-_@0-9]/g;c=/[a-zA-Z0-9\-_\.@\u0080-\uffef]/g;if(b==""||b=="shares")return false;else if(b.replace(c,"")==""&&b.replace(d,"")!="")return true;return false};
_.isValidUserGroup=_.Utils.isValidUserGroup;_.Utils.isValidCifsPath=function(b){var c=/[a-zA-Z0-9\-\._\\\/]/g;if(b=="")return false;else if(b.replace(c,"")=="")return true;return false};_.isValidCifsPath=_.Utils.isValidCifsPath;_.Utils.initElePHEvent=function(b,c){var d=Ext.get(b.id);d.set({placeholder:c});b.on("blur",function(){d.set({placeholder:c})},this);b.on("focus",function(){d.set({placeholder:c})},this)};_.initElePHEvent=_.Utils.initElePHEvent;
_.Utils.isValidHttpFtpPath=function(b){var c=/[a-zA-Z0-9\-\._\/\%:]/g;if(b=="")return false;else if(b.indexOf("ftp://")==0||b.indexOf("http://")==0)if(b.replace(c,"")=="")return true;return false};_.isValidHttpFtpPath=_.Utils.isValidHttpFtpPath;_.Utils.isValidFolderName=function(b){var c=/\.\./;if(b.replace(/[a-zA-Z0-9\-_\\|\%\.\$:~&@\[\]`'",!*#%^&()+=;{}<>? \u0080-\uffef]/g,"")==""&&!c.test(b)&&b.length&&b.length<81)return true;return false};_.isValidFolderName=_.Utils.isValidFolderName;
_.Utils.isValidEmail=function(b){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(b)};_.isValidEmail=_.Utils.isValidEmail;
_.Utils.isValidPoolName=function(b){var c=/c[0-9](.)*/g;if(b.replace(/(([a-zA-Z])+([a-zA-Z0-9\-_:\.])*)/g,"")==""&&b.replace(c,"")!=""&&b.toUpperCase()!="LOG"&&b.toUpperCase()!="MIRROR"&&b.toUpperCase()!="RAIDZ"&&b.toUpperCase()!="SPARE"&&b.toUpperCase()!="RPOOL"&&b.length<31)return true;return false};_.isValidPoolName=_.Utils.isValidPoolName;_.Utils.isValidBtrFSPoolName=function(b){if(b.replace(/(([a-zA-Z])+([a-zA-Z0-9\-_:\.])*)/g,"")==""&&b.length<20)return true;return false};
_.isValidBtrFSPoolName=_.Utils.isValidBtrFSPoolName;
_.Utils.MD5=function(b){function c(x,y){return x<<y|x>>>32-y}function d(x,y){var B,E,H,I;H=x&2147483648;I=y&2147483648;B=x&1073741824;E=y&1073741824;x=(x&1073741823)+(y&1073741823);if(B&E)return x^2147483648^H^I;return B|E?x&1073741824?x^3221225472^H^I:x^1073741824^H^I:x^H^I}function f(x,y,B){return x&y|~x&B}function g(x,y,B){return x&B|y&~B}function j(x,y,B){return x^y^B}function u(x,y,B){return y^(x|~B)}function v(x,y,B,E,H,I,J){x=d(x,d(d(f(y,B,E),H),J));return d(c(x,I),y)}function t(x,y,B,E,
H,I,J){x=d(x,d(d(g(y,B,E),H),J));return d(c(x,I),y)}function z(x,y,B,E,H,I,J){x=d(x,d(d(j(y,B,E),H),J));return d(c(x,I),y)}function C(x,y,B,E,H,I,J){x=d(x,d(d(u(y,B,E),H),J));return d(c(x,I),y)}function G(x){var y,B=x.length;y=B+8;for(var E=((y-y%64)/64+1)*16,H=Array(E-1),I=0,J=0;J<B;){y=(J-J%4)/4;I=J%4*8;H[y]|=x.charCodeAt(J)<<I;J++}y=(J-J%4)/4;I=J%4*8;H[y]|=128<<I;H[E-2]=B<<3;H[E-1]=B>>>29;return H}function k(x){var y="",B="",E;for(E=0;E<=3;E++){B=x>>>E*8&255;B="0"+B.toString(16);y+=B.substr(B.length-
2,2)}return y}function l(x){x=x.replace(/\r\n/g,"\n");for(var y="",B=0;B<x.length;B++){var E=x.charCodeAt(B);if(E<128)y+=String.fromCharCode(E);else{if(E>127&&E<2048)y+=String.fromCharCode(E>>6|192);else{y+=String.fromCharCode(E>>12|224);y+=String.fromCharCode(E>>6&63|128)}y+=String.fromCharCode(E&63|128)}}return y}var i=Array(),r,w,A,F,n,p,q,o;b=l(b);i=G(b);n=1732584193;p=4023233417;q=2562383102;o=271733878;for(b=0;b<i.length;b+=16){r=n;w=p;A=q;F=o;n=v(n,p,q,o,i[b+0],7,3614090360);o=v(o,n,p,q,i[b+
1],12,3905402710);q=v(q,o,n,p,i[b+2],17,606105819);p=v(p,q,o,n,i[b+3],22,3250441966);n=v(n,p,q,o,i[b+4],7,4118548399);o=v(o,n,p,q,i[b+5],12,1200080426);q=v(q,o,n,p,i[b+6],17,2821735955);p=v(p,q,o,n,i[b+7],22,4249261313);n=v(n,p,q,o,i[b+8],7,1770035416);o=v(o,n,p,q,i[b+9],12,2336552879);q=v(q,o,n,p,i[b+10],17,4294925233);p=v(p,q,o,n,i[b+11],22,2304563134);n=v(n,p,q,o,i[b+12],7,1804603682);o=v(o,n,p,q,i[b+13],12,4254626195);q=v(q,o,n,p,i[b+14],17,2792965006);p=v(p,q,o,n,i[b+15],22,1236535329);n=t(n,
p,q,o,i[b+1],5,4129170786);o=t(o,n,p,q,i[b+6],9,3225465664);q=t(q,o,n,p,i[b+11],14,643717713);p=t(p,q,o,n,i[b+0],20,3921069994);n=t(n,p,q,o,i[b+5],5,3593408605);o=t(o,n,p,q,i[b+10],9,38016083);q=t(q,o,n,p,i[b+15],14,3634488961);p=t(p,q,o,n,i[b+4],20,3889429448);n=t(n,p,q,o,i[b+9],5,568446438);o=t(o,n,p,q,i[b+14],9,3275163606);q=t(q,o,n,p,i[b+3],14,4107603335);p=t(p,q,o,n,i[b+8],20,1163531501);n=t(n,p,q,o,i[b+13],5,2850285829);o=t(o,n,p,q,i[b+2],9,4243563512);q=t(q,o,n,p,i[b+7],14,1735328473);p=t(p,
q,o,n,i[b+12],20,2368359562);n=z(n,p,q,o,i[b+5],4,4294588738);o=z(o,n,p,q,i[b+8],11,2272392833);q=z(q,o,n,p,i[b+11],16,1839030562);p=z(p,q,o,n,i[b+14],23,4259657740);n=z(n,p,q,o,i[b+1],4,2763975236);o=z(o,n,p,q,i[b+4],11,1272893353);q=z(q,o,n,p,i[b+7],16,4139469664);p=z(p,q,o,n,i[b+10],23,3200236656);n=z(n,p,q,o,i[b+13],4,681279174);o=z(o,n,p,q,i[b+0],11,3936430074);q=z(q,o,n,p,i[b+3],16,3572445317);p=z(p,q,o,n,i[b+6],23,76029189);n=z(n,p,q,o,i[b+9],4,3654602809);o=z(o,n,p,q,i[b+12],11,3873151461);
q=z(q,o,n,p,i[b+15],16,530742520);p=z(p,q,o,n,i[b+2],23,3299628645);n=C(n,p,q,o,i[b+0],6,4096336452);o=C(o,n,p,q,i[b+7],10,1126891415);q=C(q,o,n,p,i[b+14],15,2878612391);p=C(p,q,o,n,i[b+5],21,4237533241);n=C(n,p,q,o,i[b+12],6,1700485571);o=C(o,n,p,q,i[b+3],10,2399980690);q=C(q,o,n,p,i[b+10],15,4293915773);p=C(p,q,o,n,i[b+1],21,2240044497);n=C(n,p,q,o,i[b+8],6,1873313359);o=C(o,n,p,q,i[b+15],10,4264355552);q=C(q,o,n,p,i[b+6],15,2734768916);p=C(p,q,o,n,i[b+13],21,1309151649);n=C(n,p,q,o,i[b+4],6,4149444226);
o=C(o,n,p,q,i[b+11],10,3174756917);q=C(q,o,n,p,i[b+2],15,718787259);p=C(p,q,o,n,i[b+9],21,3951481745);n=d(n,r);p=d(p,w);q=d(q,A);o=d(o,F)}return(k(n)+k(p)+k(q)+k(o)).toLowerCase()};_.Utils.throttle=function(b,c,d){var f,g,j;return function(u){g=u;j=true;f||function(){if(j){b.apply(c,[g]);j=false;f=setTimeout(arguments.callee,d)}else f=null}()}};
_.Utils.createNavigationMap=function(b,c){var d=_a(_7(b),"IExtNative");if(d=d&&d.getNative().ISystemFrameTab&&d.getNative().ISystemFrameTab.getTitle()){_._3.MAP[d]=[b];b=0;for(c=c||[];b<c.length;++b)_._3.MAP[d].push(c[b])}};_.createNavigationMap=_.Utils.createNavigationMap;
_.Utils.formatDate=function(b){var c="";switch(localStorage.getItem("dataFormatType")){case "1":c="M d, Y";break;case "2":c="d M Y";break;case "3":c="Y M d";break;default:c="M d, Y";break}return String.format("{0}",b.format(c))};_.formatDate=_.Utils.formatDate;_.Utils.formatTime=function(b,c,d,f){return String.format("{0}:{1}:{2} {3}",("0"+b).slice(-2),("0"+c).slice(-2),("0"+d).slice(-2),f)};_.formatTime=_.Utils.formatTime;
_.Utils.formatDateTime=function(b,c){var d=localStorage.getItem("enable24Hour")=="true",f=+b.getHours();if(d){if(c==_TR("PM")){f+=12;if(f==24)f=12}else if(c==_TR("AM"))if(f==12)f=0;c=""}else if(typeof c=="undefined")if(f>12){c=" "+_TR("PM");f-=12}else if(f==12)c=" "+_TR("PM");else if(f>0&&f<12)c=" "+_TR("AM");else if(f==0){c=" "+_TR("AM");f=12}return _.formatDate(b)+" "+_.formatTime(f,b.getMinutes(),b.getSeconds(),c)};_.formatDateTime=_.Utils.formatDateTime;
_.Utils.timeStampToDateTime=function(b){b=new Date(b*1E3);Y=b.getFullYear()+"-";M=(b.getMonth()+1<10?"0"+(b.getMonth()+1):b.getMonth()+1)+"-";D=b.getDate()+" ";h=b.getHours()+":";m=b.getMinutes()+":";s=b.getSeconds();return Y+M+D+h+m+s};_.timeStampToDateTime=_.Utils.timeStampToDateTime;
_.Utils.convertDateToFixedFormat=function(b,c){var d={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()};if(/(y+)/.test(c))c=c.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length));for(var f in d)if((new RegExp("("+f+")")).test(c))c=c.replace(RegExp.$1,RegExp.$1.length==1?d[f]:("00"+d[f]).substr((""+d[f]).length));return c};_.convertDateToFixedFormat=_.Utils.convertDateToFixedFormat;
_.Utils.getQueryString=function(b,c){if(b.indexOf("?")==-1)return null;b=b.substr(b.indexOf("?")+1);b=b.match(new RegExp("(^|&)"+c+"=([^&]*)(&|$)"));if(b!=null)return unescape(b[2]);return null};_.getQueryString=_.Utils.getQueryString;
_.Utils.OAuth2EnDeCryption=function(b,c,d){if("ENCODE"!=d)b=_.Utils.Base64.decode(b);var f="";c=_.Utils.MD5(c).substring(9,27);for(var g=c.length,j=b.length,u=0;u<j;++u){var v=u%g;f+=String.fromCharCode(b.charCodeAt(u)^c.charCodeAt(v))}if("DECODE"!=d)f=_.Utils.Base64.encode(f,true);return f};_.OAuth2EnDeCryption=_.Utils.OAuth2EnDeCryption;
_.Utils.TimeZoneArray=function(){return new Ext.data.ArrayStore({fields:["id","text"],data:[["US/Samoa","GMT -11:00 Samoa"],["US/Hawaii","GMT -10:00 Hawaii"],["US/Alaska","GMT -09:00 Alaska"],["US/Pacific","GMT -08:00 Pacific Time (US & Canada); Tijuana"],["US/Arizona","GMT -07:00 Arizona"],["US/Mountain","GMT -07:00 Mountain Time (US & Canada)"],["America/Costa_Rica","GMT -06:00 Central America"],["US/Central","GMT -06:00 Central Time (US & Canada)"],["America/Bogota","GMT -05:00 Bogota, Lima"],
["US/Eastern","GMT -05:00 Eastern Time (US & Canada)"],["US/East-Indiana","GMT -05:00 Indiana (East)"],["America/Caracas","GMT -04:00 Caracas"],["America/La_Paz","GMT -04:00 Georgetown, La Paz"],["Canada/Atlantic","GMT -04:00 Atlantic Time (Canada)"],["Atlantic/Bermuda","GMT -04:00 Mid-Atlantic"],["Canada/Newfoundland","GMT -03:30 Newfoundland"],["America/Buenos_Aires","GMT -03:00 Buenos Aires"],["Etc/GMT+2","GMT -02:00 Coordinated Universal Time-02"],["Atlantic/Azores","GMT -01:00 Azores, Cape Verde Is."],
["Africa/Monrovia","GMT -00:00 Monrovia"],["Greenwich","GMT -00:00 Greenwich Mean Time"],["WET","GMT -00:00 Western European Time; Dublin, London"],["Africa/Casablanca","GMT +01:00 Casablanca"],["Europe/Paris","GMT +01:00 Amsterdam, Copenhagen, Madrid, Paris"],["Europe/Belgrade","GMT +01:00 Belgrade, Sarajevo, Skopie"],["Europe/Budapest","GMT +01:00 Bratislava, Budapest, Prague, Warsaw"],["Europe/Brussels","GMT +01:00 Brussels, Berlin, Rome, Stockholm, Vienna"],["Europe/Athens","GMT +02:00 Athens, Istanbul"],
["Europe/Bucharest","GMT +02:00 Bucharest"],["Africa/Cairo","GMT +02:00 Cairo"],["Africa/Harare","GMT +02:00 Harare, Pretoria"],["Europe/Helsinki","GMT +02:00 Helsinki, Riga, Tallinn, Sofija"],["Israel","GMT +02:00 Israel"],["Europe/Minsk","GMT +03:00 Minsk"],["Asia/Baghdad","GMT +03:00 Baghdad, Kuwait, Riyadh"],["Africa/Nairobi","GMT +03:00 Nairobi"],["Europe/Moscow","GMT +03:00 Moscow, St. Petersburg, Volgograd"],["Asia/Tehran","GMT +03:30 Tehran"],["Asia/Muscat","GMT +04:00 Abu Dhabi, Muscat"],
["Asia/Tbilisi","GMT +04:00 Tbilisi"],["Asia/Baku","GMT +04:00 Baku"],["Asia/Kabul","GMT +04:30 Kabul"],["Asia/Karachi","GMT +05:00 Islamabad, Karachi, Tashkent"],["Asia/Kolkata","GMT +05:30 Mumbai, Kolkata, Chennai"],["Asia/Calcutta","GMT +05:30 Bombay, Calcutta, Madrasi"],["Asia/Colombo","GMT +05:30 Colombo"],["Asia/Kathmandu","GMT +05:45 Kathmandu"],["Asia/Almaty","GMT +06:00 Almaty, Dhaka"],["Asia/Bangkok","GMT +07:00 Thailand, Vietnam, Bangkok, Hanoi, Jakarta"],["Asia/Krasnoyarsk","GMT +07:00 Krasnoyarsk"],
["Asia/Hong_Kong","GMT +08:00 Ulan Bator, Beijing, Chongqing, Hong Kong, Urumqi"],["Australia/Perth","GMT +08:00 Perth"],["Asia/Singapore","GMT +08:00 Singapore"],["Asia/Taipei","GMT +08:00 Taipei"],["Asia/Irkutsk","GMT +08:00 Irkutsk"],["Asia/Tokyo","GMT +09:00 Tokyo, Osaka, Sapporo"],["Asia/Seoul","GMT +09:00 Seoul"],["Asia/Yakutsk","GMT +09:00 Yakutsk"],["Australia/Adelaide","GMT +09:30 Adelaide"],["Australia/Darwin","GMT +09:30 Darwin"],["Australia/Brisbane","GMT +10:00 Brisbane"],["Australia/Sydney",
"GMT +10:00 Canberra, Melbourne, Sydney"],["Pacific/Guam","GMT +10:00 Guam, Port Moresby"],["Australia/Hobart","GMT +10:00 Hobart"],["Asia/Vladivostok","GMT +10:00 Vladivostok"],["Pacific/Noumea","GMT +11:00 Solomon Is., New Caledonia"],["Asia/Magadan","GMT +11:00 Magadan"],["Pacific/Fiji","GMT +12:00 Fiji"],["Asia/Kamchatka","GMT +12:00 Kamchatka"],["NZ","GMT +12:00 New Zealand"],["Pacific/Kwajalein","GMT +12:00 Kwajalein, Marshall Is."]]})};_.TimeZoneArray=_.Utils.TimeZoneArray;
_._2("_","_._3");_._3.Reporter="_.Reporter.1";_._3.ErrorReporter="_.ErrorReporter.1";_._3.XMLDocument="_.XMLDocument.1";
_.util.JSON=new (function(){var b=!!{}.hasOwnProperty,c=function(){var t=null;return function(){if(t===null)t=_.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]";return t}}(),d=function(t){return t<10?"0"+t:t},f=function(t){return eval("("+t+")")},g=function(t){if(!_.isDefined(t)||t===null)return"null";else if(_.isArray(t))return v(t);else if(_.isDate(t))return _.util.JSON.encodeDate(t);else if(_.isString(t))return u(t);else if(typeof t=="number")return isFinite(t)?String(t):
"null";else if(_.isBoolean(t))return String(t);else{var z=["{"],C,G,k;for(G in t)if(!t.getElementsByTagName)if(!b||t.hasOwnProperty(G)){k=t[G];switch(typeof k){case "undefined":case "function":case "unknown":break;default:C&&z.push(",");z.push(g(G),":",k===null?"null":g(k));C=true}}z.push("}");return z.join("")}},j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u=function(t){if(/["\\\x00-\x1f]/.test(t))return'"'+t.replace(/([\x00-\x1f\\"])/g,function(z,C){if(z=
j[C])return z;z=C.charCodeAt();return"\\u00"+Math.floor(z/16).toString(16)+(z%16).toString(16)})+'"';return'"'+t+'"'},v=function(t){var z=["["],C,G,k=t.length,l;for(G=0;G<k;G+=1){l=t[G];switch(typeof l){case "undefined":case "function":case "unknown":break;default:C&&z.push(",");z.push(l===null?"null":_.util.JSON.encode(l));C=true}}z.push("]");return z.join("")};this.encodeDate=function(t){return'"'+t.getFullYear()+"-"+d(t.getMonth()+1)+"-"+d(t.getDate())+"T"+d(t.getHours())+":"+d(t.getMinutes())+
":"+d(t.getSeconds())+'"'};this.encode=function(){var t;return function(z){t||(t=c()?JSON.stringify:g);return t(z)}}();this.decode=function(){var t;return function(z){t||(t=c()?JSON.parse:f);return t(z)}}()});_.encode=_.util.JSON.encode;_.decode=_.util.JSON.decode;
(function(){function b(k,l,i){return function(){l.target==arguments[0]&&k.apply(i,j(arguments))}}function c(k,l,i,r){i.task=new g.DelayedTask;return function(){i.task.delay(l.buffer,k,r,j(arguments))}}function d(k,l,i,r){return function(){l.removeListener(i,r);return k.apply(r,arguments)}}function f(k,l,i,r){return function(){var w=new g.DelayedTask;if(!i.tasks)i.tasks=[];i.tasks.push(w);w.delay(l.delay||10,k,r,j(arguments))}}var g=_.utils,j=_.toArray,u=_.each,v=_.isObject,t=_.isBoolean,
z=_.isString,C=_.applyIf;g.Observable=function(){var k=this.events;if(this.listeners){this.on(this.listeners);delete this.listeners}this.events=k||{}};g.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var k=j(arguments),l=k[0].toLowerCase(),i=true,r=this.events[l];if(this.eventsSuspended===true){if(l=this.eventQueue)l.push(k)}else if(v(r)&&r.bubble){if(r.fire.apply(r,k.slice(1))===false)return false;if((r=this.getBubbleTarget&&this.getBubbleTarget())&&
r.enableBubble){if(!r.events[l]||!v(r.events[l])||!r.events[l].bubble)r.enableBubble(l);return r.fireEvent.apply(r,k)}}else if(v(r)){k.shift();i=r.fire.apply(r,k)}return i},addListener:function(k,l,i,r){var w;if(v(k)){r=k;for(w in r){k=r[w];this.filterOptRe.test(w)||this.addListener(w,k.fn||k,k.scope||r.scope,k.fn?k:r)}}else{k=k.toLowerCase();w=this.events[k]||true;if(t(w))this.events[k]=w=new g.Event(this,k);w.addListener(l,i,v(r)?r:{})}},removeListener:function(k,l,i){k=this.events[k.toLowerCase()];
v(k)&&k.removeListener(l,i)},purgeListeners:function(){var k=this.events,l,i;for(i in k){l=k[i];v(l)&&l.clearListeners()}},addEvents:function(k){this.events=this.events||{};if(z(k))for(var l=arguments,i=l.length;i--;)this.events[l[i]]=this.events[l[i]]||true;else C(this.events,k)},hasListener:function(k){k=this.events[k.toLowerCase()];return v(k)&&k.listeners.length>0},suspendEvents:function(k){this.eventsSuspended=true;if(k&&!this.eventQueue)this.eventQueue=[]},resumeEvents:function(){var k=this,
l=k.eventQueue||[];k.eventsSuspended=false;delete k.eventQueue;u(l,function(i){k.fireEvent.apply(k,i)})}};var G=g.Observable.prototype;G.on=G.addListener;G.un=G.removeListener;g.Observable.releaseCapture=function(k){k.fireEvent=G.fireEvent};g.Event=function(k,l){this.name=l;this.obj=k;this.listeners=[]};g.Event.prototype={addListener:function(k,l,i){l=l||this.obj;if(!this.isListening(k,l)){k=this.createListener(k,l,i);if(this.firing)this.listeners=this.listeners.slice(0);this.listeners.push(k)}},
createListener:function(k,l,i){i=i||{};l=l||this.obj;var r={fn:k,scope:l,options:i},w=k;if(i.target)w=b(w,i,l);if(i.delay)w=f(w,i,r,l);if(i.single)w=d(w,this,k,l);if(i.buffer)w=c(w,i,r,l);r.fireFn=w;return r},findListener:function(k,l){var i=this.listeners,r=i.length,w;for(l=l||this.obj;r--;)if(w=i[r])if(w.fn==k&&w.scope==l)return r;return-1},isListening:function(k,l){return this.findListener(k,l)!=-1},removeListener:function(k,l){var i;i=false;if((k=this.findListener(k,l))!=-1){if(this.firing)this.listeners=
this.listeners.slice(0);i=this.listeners[k];if(i.task){i.task.cancel();delete i.task}if(l=i.tasks&&i.tasks.length){for(;l--;)i.tasks[l].cancel();delete i.tasks}this.listeners.splice(k,1);i=true}return i},clearListeners:function(){for(var k=this.listeners,l=k.length;l--;)this.removeListener(k[l].fn,k[l].scope)},fire:function(){var k=j(arguments),l=this.listeners,i=l.length,r=0,w;if(i>0)for(this.firing=true;r<i;r++)if((w=l[r])&&w.fireFn.apply(w.scope||this.obj||window,k)===false)return this.firing=
false;this.firing=false;return true}}})();
_.lib.Ajax=function(){function b(l){function i(w,A){for(r in A)A.hasOwnProperty(r)&&w.setRequestHeader(r,A[r])}l=l.conn;var r;k.defaultHeaders&&i(l,k.defaultHeaders);if(k.headers){i(l,k.headers);delete k.headers}}function c(l,i,r,w){return{tId:l,status:r?-1:0,statusText:r?"transaction aborted":"communication failure",isAbort:r,isTimeout:w,argument:i}}function d(l,i){(k.headers=k.headers||{})[l]=i}function f(l,i){var r={},w,A=l.conn,F,n,p=A.status==1223;try{w=l.conn.getAllResponseHeaders();_.each(w.replace(/\r\n/g,
"\n").split("\n"),function(o){F=o.indexOf(":");if(F>=0){n=o.substr(0,F).toLowerCase();o.charAt(F+1)==" "&&++F;r[n]=o.substr(F+1)}})}catch(q){}return{tId:l.tId,status:p?204:A.status,statusText:p?"No Content":A.statusText,getResponseHeader:function(o){return r[o.toLowerCase()]},getAllResponseHeaders:function(){return w},responseText:A.responseText,responseXML:A.responseXML,argument:i}}function g(l){if(l.tId)k.conn[l.tId]=null;l.conn=null}function j(l,i,r,w){if(i){var A;try{A=l.conn.status!==undefined&&
l.conn.status!=0?l.conn.status:13030}catch(F){A=13030}if(A>=200&&A<300||_.isIE&&A==1223){r=f(l,i.argument);if(i.success)i.scope?i.success.apply(i.scope,[r]):i.success(r)}else switch(A){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:r=c(l.tId,i.argument,r?r:false,w);if(i.failure)i.scope?i.failure.apply(i.scope,[r]):i.failure(r);break;default:r=f(l,i.argument);if(i.failure)i.scope?i.failure.apply(i.scope,[r]):i.failure(r)}}g(l)}function u(l,i){i=i||{};var r=l.conn,w=l.tId,A=k.poll,
F=i.timeout||null;if(F){k.conn[w]=r;k.timeout[w]=setTimeout(function(){k.abort(l,i,true)},F)}var n=A[w]=setInterval(function(){if(r&&r.readyState==4){clearInterval(n);A[w]=null;if(F){clearTimeout(k.timeout[w]);k.timeout[w]=null}j(l,i)}},k.pollInterval)}function v(l,i,r,w,A){var F=t()||null;if(F){F.conn.open(l,i,true);if("withCredentials"in F.conn)F.conn.withCredentials=A;k.useDefaultXhrHeader&&d("X-Requested-With",k.defaultXhrHeader);if(w&&k.useDefaultHeader&&(!k.headers||!k.headers[G]))d(G,k.defaultPostHeader);
if(k.defaultHeaders||k.headers)b(F);u(F,r);F.conn.send(w||null)}return F}function t(){var l;try{if(l=z(k.transactionId))k.transactionId++}catch(i){}finally{return l}}function z(l){var i;try{i=new XMLHttpRequest}catch(r){for(var w=0;w<C.length;++w)try{i=new ActiveXObject(C[w]);break}catch(A){}}finally{return{conn:i,tId:l}}}var C=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],G="Content-Type",k={request:function(l,i,r,w,A){if(A){var F=A.xmlData,n=A.jsonData;_.applyIf(this,A);if(F||n){w=
this.headers;if(!w||!w[G])d(G,F?"text/xml":"application/json");w=F||(!_.isPrimitive(n)?_.encode(n):n)}}return v(l||A.method||"POST",i,r,w,!!(A&&A.withCredentials))},useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},conn:{},pollInterval:50,transactionId:0,abort:function(l,i,r){var w=l.tId,A=false;if(this.isCallInProgress(l)){l.conn.abort();clearInterval(this.poll[w]);this.poll[w]=
null;clearTimeout(k.timeout[w]);this.timeout[w]=null;j(l,i,A=true,r)}return A},isCallInProgress:function(l){return l.conn&&!{0:true,4:true}[l.conn.readyState]}};return k}();_.Ajax=_.lib.Ajax;
(function(){var b=window;_.data.Connection=function(c){_.apply(this,c);this.addEvents("beforerequest","requestcomplete","requestexception");_.data.Connection.superclass.constructor.call(this)};_.extend(_.data.Connection,_.util.Observable,{timeout:3E4,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:function(c){if(this.fireEvent("beforerequest",this,c)){var d=c.params,f=c.url||this.url,g,j={success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{options:c},
timeout:c.timeout||this.timeout};if(_.isFunction(d))d=d.call(c.scope||b,c);d=_.isDefined(c.type)&&c.type=="BIN"?d.request:_.urlEncode(this.extraParams,_.isObject(d)?_.urlEncode(d):d);if(_.isFunction(f))f=f.call(c.scope||b,c);g=c.method||this.method||(d||c.xmlData||c.jsonData?"POST":"GET");if(g==="GET"&&this.disableCaching&&c.disableCaching!==false||c.disableCaching===true)f=_.urlAppend(f,(c.disableCachingParam||this.disableCachingParam)+"="+(new Date).getTime());c.headers=_.apply(c.headers||
{},this.defaultHeaders||{});if(c.autoAbort===true||this.autoAbort)this.abort();if((g=="GET"||c.xmlData||c.jsonData)&&d){f=_.urlAppend(f,d);d=""}return this.transId=_.lib.Ajax.request(g,f,j,d,c)}else return c.callback?c.callback.apply(c.scope,[c,undefined,undefined]):null},isLoading:function(c){return c?_.lib.Ajax.isCallInProgress(c):!!this.transId},abort:function(c){if(c||this.isLoading())_.lib.Ajax.abort(c||this.transId)},handleResponse:function(c){this.transId=false;var d=c.argument.options;
c.argument=d?d.argument:null;this.fireEvent("requestcomplete",this,c,d);d.success&&d.success.call(d.scope,c,d);d.callback&&d.callback.call(d.scope,d,true,c)},handleFailure:function(c,d){this.transId=false;var f=c.argument.options;c.argument=f?f.argument:null;this.fireEvent("requestexception",this,c,f,d);f.failure&&f.failure.call(f.scope,c,f);f.callback&&f.callback.call(f.scope,f,false,c)}})})();_._2("_");
if(typeof Ext!=="undefined")_.FilteredStore=_.extend(Ext.data.ArrayStore,{filterFunc:null,filterScope:null,setFilter:function(b,c){this.filterBy(b,c);this.filterFunc=b;this.filterScope=c},applyFilter:function(){this.filterFunc&&this.filterScope&&this.filterBy(this.filterFunc,this.filterScope);this.reload()},add:function(b){var c,d,f;b=[].concat(b);if(!(b.length<1)){c=0;for(d=b.length;c<d;c++){f=b[c];f.join(this);if(f.dirty||f.phantom)this.modified.push(f)}c=this.data.length;this.snapshot&&this.snapshot.addAll(b);
if(this.filterFunc&&this.filterScope){d=new Ext.util.MixedCollection;d.addAll(b);d=d.filterBy(this.filterFunc,this.filterScope);b=d.items}this.data.addAll(b);b.length>0&&this.fireEvent("add",this,b,c)}}});_._2("_");_.Debug=true;_.MAXDBG_TRACES=10;_5=0;S_FALSE=1;_6=2147483658;_4=-2147500037;_3=-2147483649;E_OUTOFMEMORY=-2147483650;E_INVALIDARG=-2147483651;E_ACCESSDENIED=-2147483657;E_PENDING=-2147483658;E_ABORT=-2147483655;E_NOINTERFACE=-2147500034;E_UNEXPECTED=-2147614719;
_TRACE_STORAGE=null;if(typeof Ext!="undefined")_TRACE_STORAGE=new _.FilteredStore({proxy:new Ext.data.MemoryProxy,fields:["desc","sev","info","date","ctx"]});_SUCCEEDED=function(b){return b>=0};_FAILED=function(b){return b<0};
_TRACE_ACTIVE=function b(c,d,f,g){try{if(typeof Ext!="undefined"){if(!f)f=_2.INFO;a=[];a.push([c,f,d,new Date,g]);_TRACE_STORAGE.getCount()>_.MAXDBG_TRACES&&_TRACE_STORAGE.removeAll();_TRACE_STORAGE.loadData(a,true);b.sper=!b.sper?_a(_7(_._3.ErrorReporter),"IErrorReporter"):b.sper;b.sper.report(c,d,f)}}catch(j){}};_TRACE_PASSIVE=function(){};_TRACE_ACTIVE.INFO={code:0,name:"Info"};_TRACE_ACTIVE.WARNING={code:1,name:"Warning"};_TRACE_ACTIVE.ERROR={code:2,name:"Error"};
_TRACE_PASSIVE.INFO={code:0,name:"Info"};_TRACE_PASSIVE.WARNING={code:1,name:"Warning"};_TRACE_PASSIVE.ERROR={code:2,name:"Error"};_2=_TRACE_ACTIVE;_._TRACE_REQUESTS_STORAGE=null;if(typeof Ext!="undefined")_._TRACE_REQUESTS_STORAGE=new _.FilteredStore({proxy:new Ext.data.MemoryProxy,fields:["id","desc","sev","ctx","start","end","time","request","response"],idIndex:0});
_._TRACE_REQUEST=function(b,c,d,f,g){try{if(typeof Ext!="undefined")if(f==_._TRACE_REQUEST.PENDING){if(_._TRACE_REQUEST.Enabled){_._TRACE_REQUESTS_STORAGE.getCount()>_.MAXDBG_TRACES&&_._TRACE_REQUESTS_STORAGE.removeAll();_._TRACE_REQUESTS_STORAGE.loadData([[b,c,_._TRACE_REQUEST.PENDING,d,new Date,"",0,g,""]],true)}}else{var j=_._TRACE_REQUESTS_STORAGE.getById(b);if(j){j.set("sev",f||_._TRACE_REQUEST_PENDING.FAIL);j.set("end",new Date);var u=j.get("start"),v=j.get("end");u&&v&&
j.set("time",(v.getTime()-u.getTime())/1E3);g&&j.set("response",g)}_._TRACE_REQUESTS_STORAGE.commitChanges();_._TRACE_REQUESTS_STORAGE.applyFilter()}}catch(t){}};_._TRACE_REQUEST.Enabled=document.__DEBUG;_._TRACE_REQUEST.PENDING={code:0,name:"Pending"};_._TRACE_REQUEST.SUCCESS={code:1,name:"Success"};_._TRACE_REQUEST.FAIL={code:2,name:"Fail"};Exception=function(b,c){this.m_hr=b;this.m_desc=c};
function globalErrorHanler(b,c,d){REPORT_ERROR("error: "+b+"</br>line: "+d+"</br>file: "+c);return true}window.defaultOnError=window.onerror;window.onerror=globalErrorHanler;
function STACK(b){var c=[],d=false;if(_.isDefined(b)&&b.stack){d=b.stack.split("\n");for(var f=0,g=d.length;f<g;++f)c.push(d[f]);c.shift();d=true}else if(_.isDefined(b)&&window.opera&&b.message){d=b.message.split("\n");f=0;for(g=d.length;f<g;++f){var j=d[f];if(d[f+1]){j+=" at "+d[f+1];++f}c.push(j)}c.shift();d=true}if(!d){d=0;for(f=arguments.callee.caller;f;){++d;g=f.toString();g=g.substring(g.indexOf("function")+8,g.indexOf(")")+1)||"anonymous()";g=!g||g=="()"?"anonymous()":g;c.push(g);f=f.caller;
if(d>30)break}c.shift()}return c}function _b(b,c,d){if(_.isDefined(b)){for(var f=STACK(b),g="",j=0,u=f.length;j<u;++j)g+=f[j].toString()+"<br>";_2(c?c:"Unhandled Exception","<b>Name: </b>"+b.name+"<br><b>Error: </b>"+b.number+"<br><br><b>Description: </b>"+b.description+"<br><b>Message: </b>"+b.message+"<br><br><br><b>Stack:</b><br>"+g+"<br>"+(d?d:""),_2.ERROR)}}function REPORT_ERROR(b,c){_2("Failed",b,_2.ERROR,c)}_._2("_");
if(typeof Ext!=="undefined"){_.RowExpander=_.extend(_.util.Observable,{expandOnEnter:true,expandOnDblClick:true,header:"",width:20,sortable:false,fixed:true,hideable:false,menuDisabled:true,dataIndex:"",id:"expander",lazyRender:true,enableCaching:true,constructor:function(b){_.apply(this,b);this.addEvents({beforeexpand:true,expand:true,beforecollapse:true,collapse:true});_.RowExpander.superclass.constructor.call(this);if(this.tpl){if(typeof this.tpl=="string")this.tpl=new Ext.Template(this.tpl);
this.tpl.compile()}this.state={};this.bodyContent={}},getRowClass:function(b,c,d){d.cols-=1;var f=this.bodyContent[b.id];if(!f&&!this.lazyRender)f=this.getBodyContent(b,c);if(f)d.body=f;return this.state[b.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(b){this.grid=b;var c=b.getView();c.getRowClass=this.getRowClass.createDelegate(this);c.enableRowBody=true;b.on("render",this.onRender,this);b.on("destroy",this.onDestroy,this)},onRender:function(){var b=this.grid;b.getView().mainBody.on("mousedown",
this.onMouseDown,this,{delegate:".x-grid3-row-expander"});if(this.expandOnEnter)this.keyNav=new Ext.KeyNav(this.grid.getGridEl(),{enter:this.onEnter,scope:this});this.expandOnDblClick&&b.on("rowdblclick",this.onRowDblClick,this)},onDestroy:function(){if(this.keyNav){this.keyNav.disable();delete this.keyNav}var b=this.grid.getView().mainBody;b&&b.un("mousedown",this.onMouseDown,this)},onRowDblClick:function(b,c){this.toggleRow(c)},onEnter:function(){for(var b=this.grid,c=b.getSelectionModel().getSelections(),
d=0,f=c.length;d<f;d++)this.toggleRow(b.getStore().indexOf(c[d]))},getBodyContent:function(b){if(!this.enableCaching)return this.tpl.apply(b.data);var c=this.bodyContent[b.id];if(!c){c=this.tpl.apply(b.data);this.bodyContent[b.id]=c}return c},onMouseDown:function(b){b.stopEvent();this.toggleRow(b.getTarget(".x-grid3-row"))},renderer:function(b,c){c.cellAttr='rowspan="2"';return'<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(b,c,d){if(this.fireEvent("beforeexpand",this,b,c,
d)!==false){if(this.tpl&&this.lazyRender)c.innerHTML=this.getBodyContent(b,d);return true}else return false},toggleRow:function(b){if(typeof b=="number")b=this.grid.view.getRow(b);this[Ext.fly(b).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](b)},expandRow:function(b){if(typeof b=="number")b=this.grid.view.getRow(b);var c=this.grid.store.getAt(b.rowIndex),d=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",b);if(this.beforeExpand(c,d,b.rowIndex)){this.state[c.id]=true;Ext.fly(b).replaceClass("x-grid3-row-collapsed",
"x-grid3-row-expanded");this.fireEvent("expand",this,c,d,b.rowIndex)}},collapseRow:function(b){if(typeof b=="number")b=this.grid.view.getRow(b);var c=this.grid.store.getAt(b.rowIndex),d=Ext.fly(b).child("tr:nth(1) div.x-grid3-row-body",true);if(this.fireEvent("beforecollapse",this,c,d,b.rowIndex)!==false){this.state[c.id]=false;Ext.fly(b).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed");this.fireEvent("collapse",this,c,d,b.rowIndex)}}});Ext.preg("rowexpanderex",_.RowExpander)}_._2("_");
_.XmlConnection=_.extend(_.util.Observable,{m_szUrl:null,m_argument:null,m_connection:null,m_timeout:9E4,constructor:function(b){_.Ajax.timeout=this.m_timeout;_.XmlConnection.superclass.constructor.call(this);this.m_szUrl=b;this.addEvents("onBeforeWebCall","onWebPending","onWebSuccess","onWebFailure")},BeforeRequest:function(b,c){this.fireEvent("onWebPending",this,c)},RequestComplete:function(b,c,d){_2("WebResp ["+_.util.Format.htmlEncode(c.responseText)+"]",_.util.Format.htmlEncode(c.responseText),
_2.INFO);if(c&&c.responseText)if(c.status==505||c.responseText.indexOf('id="auth"')>-1)return this.RequestFailed(b,c,d,error);if(c&&c.responseXML)return this.fireEvent("onWebSuccess",this,c);this.RequestFailed(b,c,d,error)},RequestFailed:function(b,c,d,f){if(b){f={handled:false,code:f};this.fireEvent("onWebFailure",this,c,f);f.handled||REPORT_ERROR("<b>SERVER Error      :</b> "+f.code+"<br/><b>HTTP Status  :</b> "+c.status+"<br/><b>HTTP Error   :</b> "+c.statusText+"<br/><b>AJAX URL     :</b>"+
d.url+"<br/><br/><b>HTTP Request :</b><br/>"+_.util.Format.htmlEncode(d.params.request)+"<br/><br/><b>HTTP Response:</b><br/>"+_.util.Format.htmlEncode(c.responseText),this)}},RowWebCall:function(b,c){if(!this.m_connection){this.m_connection=new _.data.Connection({timeout:this.m_timeout});this.m_connection.on("requestexception",this.RequestFailed,this);this.m_connection.on("requestcomplete",this.RequestComplete,this);this.m_connection.on("beforerequest",this.BeforeRequest,this)}b={url:this.m_szUrl,
argument:this.m_argument,params:{request:b},method:"POST",timeout:this.m_timeout,type:c};if(this.fireEvent("onBeforeWebCall",this,this.m_connection,b)!=false){_2("RowWebCall ["+_.util.Format.htmlEncode(b.params.request)+"]",_.util.Format.htmlEncode(b.params.request),_2.INFO);this.m_connection.request(b)}},WebCall:function(b,c,d){if(!this.m_connection){this.m_connection=new _.data.Connection({timeout:this.m_timeout});this.m_connection.on("requestexception",this.RequestFailed,this);this.m_connection.on("requestcomplete",
this.RequestComplete,this);this.m_connection.on("beforerequest",this.BeforeRequest,this)}b={url:this.m_szUrl,argument:this.m_argument,params:{request:this.Save(b,c)},method:"POST",timeout:this.m_timeout,type:d};if(this.fireEvent("onBeforeWebCall",this,this.m_connection,b)!=false){_2("WebCall ["+_.util.Format.htmlEncode(b.params.request)+"]",_.util.Format.htmlEncode(b.params.request),_2.INFO);this.m_connection.request(b)}},attachArgument:function(b){this.m_argument=b},IsPending:function(){return false},
getTransId:function(){if(this.m_connection)return this.m_connection.transId;return false},abort:function(){this.IsPending()&&this.m_connection.abort()},Save:function(){return false},Load:function(){return false}});_._2("_","_.Crx");
_.Crx.Connection=_.extend(_.data.Connection,{request:function(b){if(this.fireEvent("beforerequest",this,b)!==false){var c=b.params;if(typeof c=="function")c=c.call(b.scope||window,b);if(typeof c=="object")c=_.urlEncode(c);if(this.extraParams){var d=_.urlEncode(this.extraParams);c=c?c+"&"+d:d}d=b.url||this.url;if(typeof d=="function")d=d.call(b.scope||window,b);var f=b.headers;if(this.defaultHeaders){f=_.apply(f||{},this.defaultHeaders);if(!b.headers)b.headers=f}f={success:this.handleResponse,
failure:this.handleFailure,scope:this,argument:{options:b},timeout:_.isDefined(b.timeout)?b.timeout:this.timeout};var g=b.method||this.method||(c?"POST":"GET");if(g=="GET"&&this.disableCaching&&b.disableCaching!==false||b.disableCaching===true)d+=(d.indexOf("?")!=-1?"&":"?")+"_dc="+(new Date).getTime();if(typeof b.autoAbort=="boolean")b.autoAbort&&this.abort();else this.autoAbort!==false&&this.abort();if(g=="GET"&&c||b.xmlData||b.jsonData){d+=(d.indexOf("?")!=-1?"&":"?")+c;c=""}return this.transId=
b.scriptTag||this.scriptTag?this.scriptRequest(g,d,f,c,b):_.lib.Ajax.request(g,d,f,c,b)}else{_.callback(b.callback,b.scope,[b,null,null]);return null}},scriptRequest:function(b,c,d,f,g){b=_.id();var j={id:b,cb:g.callbackName||"stcCallback"+b,scriptId:"stcScript"+b,options:g};c+=(c.indexOf("?")!=-1?"&":"?")+(f?f+"&":"")+String.format("{0}={1}",g.callbackParam||this.callbackParam||"callback",j.cb);var u=this;window[j.cb]=function(v){u.handleScriptResponse(v,j)};j.timeoutId=this.handleScriptFailure.defer(d.timeout,
this,[j]);d=document.createElement("script");d.setAttribute("src",c);d.setAttribute("id",j.scriptId);d.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(d);return j},handleScriptResponse:function(b,c){this.transId=false;this.destroyScriptTrans(c,true);c=c.options;var d=null;if(typeof b=="string"){b=decodeURIComponent(b);b=_.Utils.Base64.decode(b);if(window.ActiveXObject){d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}else d=(new DOMParser).parseFromString(b,
"text/xml")}response={status:200,responseObject:b,responseText:typeof b=="object"?_.encode(b):String(b),responseXML:d,argument:c.argument};this.fireEvent("requestcomplete",this,response,c);_.callback(c.success,c.scope,[response,c]);_.callback(c.callback,c.scope,[c,true,response])},handleScriptFailure:function(b){this.trans=false;this.destroyScriptTrans(b,false);b=b.options;response={argument:b.argument,status:500,statusText:"Server failed to respond",responseText:""};this.fireEvent("requestexception",
this,response,b,{status:-1,statusText:"communication failure"});_.callback(b.failure,b.scope,[response,b]);_.callback(b.callback,b.scope,[b,false,response])},destroyScriptTrans:function(b,c){document.getElementsByTagName("head")[0].removeChild(document.getElementById(b.scriptId));clearTimeout(b.timeoutId);if(c){try{delete window[b.cb]}catch(d){}window[b.cb]=undefined}else window[b.cb]=function(){try{delete window[b.cb]}catch(f){}window[b.cb]=undefined}}});_._2("_","_.Xml");
_.Xml.document=_.extend(_.util.Observable,{xmlDocument:null,constructor:function(b){this.init(b)},init:function(b){if(b)switch(typeof b){case "object":this.xmlDocument=b.xmlDocument?b.xmlDocument:b;break;case "string":if(_.isIE){this.xmlDocument=new ActiveXObject("Microsoft.XMLDOM");this.xmlDocument.async="false";this.xmlDocument.loadXML(b)}else this.xmlDocument=(new DOMParser).parseFromString(b,"text/xml");break;default:throw"Unsuported XML source";}},isValid:function(){return this.xmlDocument&&
(_.isIE?_.isDefined(this.xmlDocument.parseError)?!this.xmlDocument.parseError.errorCode:this.xmlDocument.parsed:"parsererror"!=(this.xmlDocument.ownerDocument?this.xmlDocument.ownerDocument.documentElement.nodeName:this.xmlDocument.documentElement.nodeName))},selectNodes:function(b){if(this.xmlDocument)if((b=this.xmlDocument.selectNodes(b))&&b.length>0){for(var c=[],d=0,f=b.length;d<f;++d)c.push(new _.Xml.document(b[d]));return c}},cloneNode:function(b){if(this.xmlDocument)return new _.Xml.document(this.xmlDocument.cloneNode(b))},
selectSingleNode:function(b){if(this.xmlDocument)if(b=this.xmlDocument.selectSingleNode(b))return new _.Xml.document(b)},getAttribute:function(b){if(this.xmlDocument)return this.selectSingleNode("./@"+b)},getNodeText:function(b){if(this.xmlDocument){if(!b||!b.length)b=".";if((b=this.selectSingleNode(b+(_.isIE?"":"/text()")))&&b.xmlDocument)return _.isIE?b.xmlDocument.text:b.xmlDocument.nodeValue}},setNodeText:function(b,c){if(this.xmlDocument){if(!c||!c.length)c=".";if((c=this.selectSingleNode(c))&&
c.xmlDocument){if(_.isIE)c.xmlDocument.text=b;else c.xmlDocument.textContent=b;return true}}return false},getAttributeText:function(b){return(b=b?this.getAttribute(b):this)&&b.xmlDocument?b.xmlDocument.nodeValue:undefined},setAttributeText:function(b,c){if((c=c?this.getAttribute(c):this)&&c.xmlDocument)c.xmlDocument.nodeValue=b},toString:function(){if(this.xmlDocument)return _.isIE?this.xmlDocument.xml:(new XMLSerializer).serializeToString(this.xmlDocument);return""},getNodeName:function(){if(this.xmlDocument)return this.xmlDocument.nodeName},
removeNode:function(b){if(this.xmlDocument){if(!b||!b.length)b=".";b=this.selectNodes(b);_.each(b,function(c){c&&c.xmlDocument&&c.xmlDocument.parentNode.removeChild(c.xmlDocument)});return true}return false},appendNode:function(b){if(this.xmlDocument)switch(typeof b){case "string":b=(this.xmlDocument.ownerDocument?this.xmlDocument.ownerDocument:this.xmlDocument).createElement(b);this.xmlDocument.appendChild(b);return new _.Xml.document(b);case "object":var c=this.xmlDocument.ownerDocument?this.xmlDocument.ownerDocument:
this.xmlDocument;b=b.xmlDocument.documentElement?b.xmlDocument.documentElement:b.xmlDocument;b=_.isIE?b:c.importNode(b,true);this.xmlDocument.appendChild(b);return new _.Xml.document(b);default:throw"Unsuported XML source";}return null}});
if(document.implementation.hasFeature("XPath","3.0")){if(typeof XMLDocument=="undefined")XMLDocument=Document;XMLDocument.prototype.selectNodes=Document.prototype.selectNodes=function(b,c){if(!this.createNSResolver||!this.evaluate){_2("XMLDocument doesnt supoprt XPath","Functions createNSResolver and evaluate where not found",_2.ERROR);return[]}c||(c=this);var d,f;try{d=this.createNSResolver(this.documentElement);f=this.evaluate(b,c,d,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}catch(g){_b(g)}b=
[];c=f?f.snapshotLength:-1;if(c>0){b.push(f.snapshotItem(0));if(b[0].appendData)for(d=1;d<c;++d)b[0].appendData(f.snapshotItem(d).data);else for(d=1;d<c;++d)b.push(f.snapshotItem(d))}return b};XMLDocument.prototype.selectSingleNode=Document.prototype.selectSingleNode=function(b,c){c||(c=this);b=this.selectNodes(b,c);if(b.length>0)return b[0];return null};Element.prototype.selectNodes=function(b){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(b,this);throw"For XML Elements Only";
};Element.prototype.selectSingleNode=function(b){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode(b,this);throw"For XML Elements Only";};Attr.prototype.selectNodes=function(b){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(b,this);throw"For XML Attributes Only";};Attr.prototype.selectSingleNode=function(b){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode(b,this);throw"For XML Attributes Only";}}
_._2("_","_.JSCom");_.JSCom._i6=_._1(undefined,{_i6:{}});var _i6=_.JSCom._i6;_._2("_","_.JSCom");_.JSCom._i1=_._1(_i6,{_i1:{Advise:function(){return _3},Unadvise:function(){return _3},Fire:function(){return _3}}});var _i1=_.JSCom._i1;_._2("_","_.JSCom");
_.JSCom.ICollection=_._1(_i6,{ICollection:{getCount:function(){return _3},getItem:function(){return _3},getItemBy:function(){return _3}}});var ICollection=_.JSCom.ICollection;_._2("_","_.JSCom");_.JSCom._i4=_._1(_i6,{_i4:{getSingleToneState:function(b){b.res=true;return _5}}});var _i4=_.JSCom._i4;_._2("_","_.JSCom");_.JSCom.IExtNative=_._1(_i6,{IExtNative:{getNative:function(){return this}}});
var IExtNative=_.JSCom.IExtNative;_._2("_","_.JSCom");
_.JSCom.IReporter=_._1(IExtNative,_i4,{IReporter:{Show:function(){return _3},Hide:function(){return _3},AdviseKeyHandler:function(){return _3},UnadviseKeyHandler:function(){return _3},Close:function(){return _3},Enable:function(){return _3},getVisible:function(){return _3},getEnable:function(){return _3},getMaxTraceCount:function(){return _3},putMaxTraceCount:function(){return _3},putDebugUrls:function(){return _3}}});
var IReporter=_.JSCom.IReporter;_._2("_","_.JSCom");_.JSCom.IErrorReporter=_._1(IExtNative,_i4,{IErrorReporter:{enable:function(){},disable:function(){},report:function(){return _3}}});var IErrorReporter=_.JSCom.IErrorReporter;_._2("_","_.JSCom","_.JSCom.Macro","_.JSCom.Impl");_.JSCom.Remoting=false;
_.JSCom.fun=function(b,c,d){this[c]=function(){if(b[c])return b[c].apply(d,arguments);else _2('Undefined interface: "'+b.__uuid+'" method: "'+c+'" call prevented',_TRACE_WARNING);return _3}};_.JSCom.singleton=function(){var b=[];return function(c){return b[c]?b[c]:(b[c]=new c)}}();
_.JSCom.CComObjectsStorage=_._1(_.utils.Observable,{__stones:[],__classes:{},register:function(b,c){if(b&&c&&_.isString(c)){if(this.__classes[c]==undefined){this.__classes[c]=b;return _5}return _4}return E_INVALIDARG},isSTone:function(b,c){b=b&&b.getOption("singleton")=="true";if(!b)if(c=c?_a(c,"_i4"):null){b={};c.getSingleToneState(b);b=b.res}return b},getObject:function(b,c){if(this.__classes[b]!=undefined){var d=this.__classes[b],f=this.__stones[b];if(this.isSTone(c,
f)){if(!f){f=c.newInstance(d);this.__stones[b]=f}return f}d=c?c.newInstance(d):new d;if(this.isSTone(c,d))this.__stones[b]=d;return d}else if(c&&c.isLazy())if(c.loadLazyObject())return this.getObject(b,c);return null}});
if(_.JSCom.Remoting){_.JSCom.CComRegestry=_._1(_.Xml.document,{counter:{c:0,set:function(b,c){this.c=b;this.x=c;this.dec(0)},dec:function(b){this.c-=b;this.c<1&&this.x.fireEvent("_o2",this.x,!!!this.e)},err:function(b){this.e=b}},constructor:function(){this.addEvents("onRegestryDone","OnScriptLoad","OnScriptDone","OnCssLoad","OnCssDone","_o2")},getObjectDefinition:function(b){if(this.xmlDocument)return new _.JSCom.CComRegestry.CComDefinition(this.selectSingleNode("REGESTRY/CLASSES_ROOT/CLASSES/"+
b));return null},loadObjects:function(){var b=this.selectNodes("REGESTRY/CLASSES_ROOT/CLASSES/*");this.counter.set(b.length*2,this);for(var c=0,d=b.length;c<d;++c){var f=b[c],g=f.getNodeText("./Remote/js"),j=f.getNodeText("./Remote/css"),u=f.getNodeText("./Remote/lazy")!="false",v=_.Debug==true;this.counter.dec(u?2:0);if(!u){this.counter.dec(!j?1:0);this.counter.dec(!g||v?1:0);if(g)if(v){_2("Inline script instance from ["+g+"]",g,_2.INFO);u=_.id();f=new _.JSCom.CComRegestry.CComDefinition(f);
this.fireEvent("OnScriptDone",this,f,CoAddScript(u,g,v))}else{v=new _.data.Connection;v.on("requestcomplete",this.OnScriptCssComplete,this);v.on("requestexception",this.OnScriptCssFailed,this);this.fireEvent("OnScriptLoad",this,g);f=new _.JSCom.CComRegestry.CComDefinition(f);v.request({url:g,method:"GET",argument:{type:"text/javascript",regdef:f}});_2("WebCall ["+g+"]",g,_2.INFO)}if(j){g=new Mjl.data.Connection;g.on("requestcomplete",this.OnScriptCssComplete,this);g.on("requestexception",
this.OnScriptCssFailed,this);this.fireEvent("OnCssLoad",this,j);f=j;g.request({url:j,method:"GET",argument:{type:"text/css",regdef:f}});_2("WebCall ["+j+"]",j,_2.INFO)}}}return true},OnScriptCssComplete:function(b,c,d){_2("WebResp ["+_.Utils.Format.htmlEncode(c.responseText)+"]",_.Utils.Format.htmlEncode(c.responseText),_2.INFO);if(c.status==200||c.status==304){if(c.argument.type=="text/css")this.fireEvent("OnCssDone",this,c.argument.regdef,CoAddCss(c.responseText));else if(c.argument.type==
"text/javascript"){b=_.id();this.fireEvent("OnScriptDone",this,c.argument.regdef,CoAddScript(b,c.responseText,_.Debug==true))}this.counter.dec(1)}else this.OnScriptFailed(b,c,d)},OnScriptCssFailed:function(b,c,d){this.reportError(b,c,d);this.fireEvent(c.argument.type=="text/css"?"OnCssDone":"OnScriptDone",this,c.argument.regdef,false);this.counter.err(c.status);this.counter.dec(1)},loadRegestry:function(b){if(b&&b.length){var c=new _.data.Connection;c.on("requestexception",this.OnRegestryFailed,
this);c.on("requestcomplete",this.OnRegestryComplete,this);c.request({url:b,method:"GET"});_2("WebCall ["+b+"]",b,_2.INFO)}return this},OnRegestryComplete:function(b,c,d){_2("WebResp ["+_.Utils.Format.htmlEncode(c.responseText)+"]",_.Utils.Format.htmlEncode(c.responseText),_2.INFO);if(c&&c.responseText)if(c.status==505||c.responseText.indexOf('id="auth"')>-1){window.location="/welcome.html";return}if(c&&c.responseXML){this.init(c.responseXML);if(this.isValid()){this.fireEvent("onRegestryDone",
this,this,true);return this.loadObjects()}else{var f=this.xmlDocument;REPORT_ERROR("Failed to Load System Regestry.<br>Pls check regestry xml file syntaxis and existance.<br><br>Description: "+f.parseError.reason+"<br>File: "+f.parseError.url+"<br>Line: "+f.parseError.line+"<br>Line Position: "+f.parseError.linepos+"<br>Source Code: "+f.parseError.srcText)}}this.OnRegestryFailed(b,c,d)},OnRegestryFailed:function(b,c,d){this.reportError(b,c,d);this.fireEvent("onRegestryDone",this,this,false)},reportError:function(b,
c,d){b&&REPORT_ERROR("<br/><b>HTTP Error        :</b>"+c.status+"<br/><b>HTTP Status       :</b>"+c.statusText+"<br/><b>AJAX URL          :</b>"+d.url+"<br/><br/><br/><b>HTTP Response:</b><br/>"+_.Utils.Format.htmlEncode(c.responseText))}});_.JSCom.CComRegestry.CComDefinition=_._1(_.Xml.document,{activated:false,constructor:function(b){_.JSCom.CComRegestry.CComDefinition.superclass.constructor.call(this,b)},getOption:function(b){return this.getNodeText("./Settings/"+b)},isLazy:function(){return!this.activated&&
this.getNodeText("./Remote/lazy")!="false"},loadLazyObject:function(){this.activated=true;var b=this.getNodeText("./Remote/js");if(b){var c=_.Debug==true;if(b=c?b:CoLoadContent(b)){var d=_.id();if(CoAddScript(d,b,c)){if(c=this.getNodeText("./Remote/css"))(c=CoLoadContent(c))&&CoAddCss(c);return true}}}return false},newInstance:function(b){return new b}});_.JSCom.Impl.CoLoadContent=function(b){_2("SyncWebCall ["+b+"]",b,_2.INFO);var c=undefined;try{c=window.XMLHttpRequest?new XMLHttpRequest:
new ActiveXObject("Microsoft.XMLHTTP");c.open("GET",b,false);c.send(null);if(c.status==200||c.status==304)return c.responseText}catch(d){}REPORT_ERROR("<br/><b>HTTP Error        :</b>"+c.status+"<br/><b>HTTP Status       :</b>"+c.statusText+"<br/><b>AJAX URL          :</b>"+b+"<br/><br/><br/><b>HTTP Response:</b><br/>"+_.Utils.Format.htmlEncode(c.responseText))};_.JSCom.Impl.CoAddScript=function(b,c,d){try{if(!d){eval(c);return true}var f=document.getElementById(b);if(f)f.text=c;else{var g=document.getElementsByTagName("HEAD").item(0),
j=document.createElement("script");j.id=b;j.src=c;j.defer=true;j.language="javascript";j.type="text/javascript";j.done=false;j.onreadystatechange=function(){if(this.readyState=="loaded")this.done=true};for(g.appendChild(j);!j.done;)alert("Loading inline script.\n "+c+" \nPls press OK to continue debug session.")}return true}catch(u){_b(u,"JSCOM object evaluation failed","<br><b>Failed to evaluate JSCOM object :</b><br>"+c.replace(/\r\n/g,"<br>"))}return false};_.JSCom.Impl.CoAddCss=
function(b){try{var c=document.getElementsByTagName("HEAD").item(0),d=document.createElement("style");d.setAttribute("type","text/css");if(d.styleSheet)d.styleSheet.cssText=b;else{var f=document.createTextNode(b);d.appendChild(f)}c.appendChild(d);return true}catch(g){}return false}}_.JSCom.__enable_cashe=true;_.JSCom.__qiobjtr=20;_.JSCom.__qiobjcl=5E3;_.JSCom.__qiobjgl=500;_.JSCom.__qiobjmap={length:0};_.JSCom.__qiobjres={length:0};
_.JSCom._9=_._1(_.util.Observable,{_a:function(b,c){if(!b||!c)return null;b.__uuid_obj_id=b.__uuid_obj_id?b.__uuid_obj_id:_.idn();if(_.JSCom.__enable_cashe){var d=_.JSCom.__qiobjcl,f=_.JSCom.__qiobjgl,g=_.JSCom.__qiobjtr,j=_.JSCom.__qiobjmap,u=_.JSCom.__qiobjres;if(j[b.__uuid_obj_id]&&j[b.__uuid_obj_id][c]){d=j[b.__uuid_obj_id][c];++d.__usage;if(d.__usage>g){if(f<u.length)_.JSCom.__qiobjres={length:0};u[b.__uuid_obj_id]=u[b.__uuid_obj_id]?u[b.__uuid_obj_id]:
{};u[b.__uuid_obj_id][c]=d;j[b.__uuid_obj_id][c]=undefined;++u.length;return u[b.__uuid_obj_id][c]}return d}else if(u[b.__uuid_obj_id]&&u[b.__uuid_obj_id][c]){b=u[b.__uuid_obj_id][c];++b.__usage;return b}}f=b.QueryInterface?b.QueryInterface(c):null;if(_.JSCom.__enable_cashe&&f){if(d<j.length)_.JSCom.__qiobjmap={length:0};j[b.__uuid_obj_id]=j[b.__uuid_obj_id]?j[b.__uuid_obj_id]:{};j[b.__uuid_obj_id][c]=f;j[b.__uuid_obj_id][c].__usage=1;++j.length}return f},QueryInterface:function(b){var c=this[b];
if(c){var d=new function(){};d.__uuid=b;d.__s=this;d.QueryInterface=function(){return _.JSCom._9.prototype.QueryInterface.apply(this.__s,arguments)};for(var f in c)if(_.isFunction(c[f]))d[f]=(new _.JSCom.fun(c,f,d.__s))[f];return d}return null},_i6:{}});
_.JSCom._8=_._1(_.JSCom._9,_i1,{__i:"",_i1:{Advise:function(b,c){this.__c=this.__c?this.__c:[];if(b=_a(b,this.__i)){if(c)b.__flt=c;this.__c.push(b);return _5}return _4},Unadvise:function(b){if(this.__c)if(b=_a(b,this.__i)){for(var c=0,d=this.__c.length;c<d;++c)if(this.__c[c].__s==b.__s){this.__c.splice(c,1);return _5}return S_FALSE}return _4},Fire:function(b,c,d){return this.Fire(b,c,d)}},Fire:function(b,c,d){if(this.__c&&
this.__c.length){for(var f=this.__c.slice(0),g=0;g<f.length;++g)if(f[g][b])if(!(d&&f[g].__flt&&f[g].__flt!=d))try{f[g][b].apply(f[g].__s,c)}catch(j){_b(j,'JSCom event exception. Subscriber: <b>"'+f[g].__uuid+'"</b> Method: <b>"'+b+'"</b>')}return _5}return _4}});_.JSCom.Macro.CoException=function(b,c,d,f){this.init(b,c,d,f)};
_.JSCom.Macro.CoException.prototype.init=function(b,c,d,f){this.hr=b;this.name="JSCOM";b=c.toString();this.expression=b.substring(b.indexOf("function")+9,b.indexOf("("))||"anonymous";this.args="(";if(d&&d.length){b=0;for(c=d.length;b<c;++b)this.args=this.args+d[b]+(b==c-1?")":", ")}this.expression+=this.args+(d&&d.length?"":")");_2("JSCOM Exception","<b>Name: </b>"+this.name+"<br><b>Error: </b>"+this.hr+"<br><b>Description: </b>"+f+"<br><br><b>Stack:</b><br>"+this.expression,_2.ERROR)};
var CoException=_.JSCom.Macro.CoException;_.JSCom.Macro._HR=function(){var b=arguments.length;if(b){for(var c=[],d=arguments[0],f=1;f<b;++f)c.push(arguments[f]);b=d.apply(null,c);_FAILED(b)&&new CoException(b,d,c);return b}};_.JSCom.Macro._XTHR=function(){var b=arguments.length;if(b){for(var c=[],d=arguments[0],f=1;f<b;++f)c.push(arguments[f]);b=d.apply(null,c);if(_FAILED(b))throw new CoException(b,d,c);}};
_.JSCom.Impl._0=function(b){return _.JSCom.Remoting?_.JSCom.singleton(_.JSCom.CComRegestry).loadRegestry(b):null};_.JSCom.Impl._7=function(b){var c=_.JSCom.Remoting?_.JSCom.singleton(_.JSCom.CComRegestry).getObjectDefinition(b):null;return _a(_.JSCom.singleton(_.JSCom.CComObjectsStorage).getObject(b,c),"_i6")};
var _0=_.JSCom.Impl._0,_7=_.JSCom.Impl._7,CComSingleton=_.JSCom.singleton,CoAddCss=_.JSCom.Impl.CoAddCss,CoAddScript=_.JSCom.Impl.CoAddScript,CoLoadContent=_.JSCom.Impl.CoLoadContent,_a=_.JSCom._9.prototype._a,_9=_.JSCom._9,_8=function(b){var c=function(){};c.prototype=_.clone(_.JSCom._8.prototype,false);c.superclass=_.JSCom._8.superclass;
c.prototype.__i=b;return c},CComEqual=function(b,c){if(b&&c){b=_a(b,"_i6");c=_a(c,"_i6");if(b&&c)return b.__s==c.__s}return false},_HR=_.JSCom.Macro._HR,_XTHR=_.JSCom.Macro._XTHR;_.Inherit=_._1;_._2("_");
if(typeof Ext!=="undefined"){_.RowNumberer=_.extend(Ext.grid.RowNumberer,{width:30,startIndex:0,m_dirty:false,renderer:function(b,c,d,f){if(this.rowspan)c.cellAttr='rowspan="'+this.rowspan+'"';return f+1+this.startIndex}});_.Debugger=_.extend(Ext.Panel,{initComponent:function(){var b=new Ext.Toolbar({monitorResize:true,autoScroll:true,enableOverflow:true,layout:"hbox",items:[this.urlSelectorCombo=new Ext.form.ComboBox({flex:1,mode:"local",lazyRender:true,typeAhead:true,triggerAction:"all",
forceSelection:true,store:new Ext.data.ArrayStore({id:1,fields:["id","url"],data:[[1,document.dbbroker],[2,document.fsbroker],[3,document.phbroker],[4,document.fsshare],[5,document.recovery],[6,document.fwbroker]]}),valueField:"url",displayField:"url"}),{flex:0,xtype:"button",text:"Send XML request",iconCls:"x-icon-errorreporter-icon-webcall",tooltip:"Send xml request",handler:this.OnWebRequest.createDelegate(this)},{flex:0,xtype:"button",text:"Execute Script",iconCls:"x-icon-errorreporter-icon-execscript",
tooltip:"Toggle Warnings visability on/off",handler:this.OnExecScript.createDelegate(this)}]});this.editor=new Ext.form.TextArea;this.urlSelectorCombo.setValue(document.dbbroker);Ext.apply(this,{tbar:b,items:[this.editor]});_.Debugger.superclass.initComponent.apply(this,arguments)},OnWebRequest:function(){var b=this.editor.getValue();if(b&&b.length){var c=new _.XmlConnection(this.urlSelectorCombo.getValue());c.on("onWebPending",this.onWebPending,this);c.on("onWebSuccess",this.onWebSuccess,this);
c.on("onWebFailure",this.onWebFailure,this);c.RowWebCall(b,"BIN")}},OnExecScript:function(){var b=this.editor.getValue();if(b)try{eval(b)}catch(c){_b(c,"Script Evaluation Failed","<br><b>Failed to Evaluation script :</b><br>"+b.replace(/\r\n/g,"<br>"))}},onWebPending:function(){if(!Ext.isDefined(this.myProgress))this.myProgress=new Ext.LoadMask(this.getEl(),{type:"normal",msg:"Please wait..."});this.myProgress.show()},onWebSuccess:function(b){this.myProgress.hide();b.un("onWebPending",
this.onWebPending,this);b.un("onWebSuccess",this.onWebSuccess,this);b.un("onWebFailure",this.onWebFailure,this)},onWebFailure:function(b){this.myProgress.hide();b.un("onWebPending",this.onWebPending,this);b.un("onWebSuccess",this.onWebSuccess,this);b.un("onWebFailure",this.onWebFailure,this)}});_.InspectWindow=_._1(_.JSCom._9,Ext.Window,{cls:"x-window-debugger",layout:"fit",iconCls:"x-icon-errorreporter-inspect-window-title",height:400,width:600,border:true,plain:true,autoDestroy:true,
bodyStyle:"padding:0px",constrainHeader:true,draggable:true,constrain:false,minimizable:false,maximizable:true,stateful:true,shim:false,footer:false,closable:true,collapsible:false,initHidden:true,modal:false,autoHeight:false,title:"Details",constructor:function(){this.editor=new Ext.form.HtmlEditor({enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableFormat:false,enableLinks:false,enableLists:false,listeners:{editmodechange:this.onEditModeChange,scope:this}});this.items=
[this.editor];_.InspectWindow.superclass.constructor.apply(this,arguments)},onEditModeChange:function(b,c){if(c){c=_.make_unquoted(b.text);c=c.replace(new RegExp("<br>","gi"),"\r\n");c=c.replace(new RegExp("</br>","gi"),"\r\n");c=c.replace(new RegExp("<\u0008r>","gi"),"\r\n");c=c.replace(new RegExp("<br>","gi"),"\r\n");c=c.replace(new RegExp("<br/>","gi"),"\r\n");b.setRawValue(c)}else b.setValue(b.text)}});_.TracerRequests=_._1(_.JSCom._9,Ext.Container,{constructor:function(){var b=
_._TRACE_REQUESTS_STORAGE.applyFilter.createDelegate(_._TRACE_REQUESTS_STORAGE),c=new _.RowExpander({tpl:new Ext.Template("Request:<br/>{request}<br/><br/>Response:<br/>{response}<br/><br/>")});this.toolbarRequests=new Ext.Toolbar({monitorResize:true,autoScroll:true,enableOverflow:true,items:[this.failButton=new Ext.Button({text:"Fail",iconCls:"x-icon-tracerrequests-fail",pressed:true,enableToggle:true,handler:b,items:0}),this.pendingButton=new Ext.Button({text:"Pending",pressed:true,enableToggle:true,
iconCls:"x-icon-tracerrequests-pending",handler:b,items:0}),this.successButton=new Ext.Button({text:"Success",pressed:true,enableToggle:true,iconCls:"x-icon-tracerrequests-success",handler:b,items:0}),"-",{xtype:"box",html:"Average Time:&nbsp;"},this.lAvTime=new Ext.BoxComponent({html:"0 s"}),"->","-",{xtype:"button",text:"Help Manager",disabled:true,enableToggle:true,iconCls:"x-icon-errorreporter-icon-question",listeners:{afterRender:function(d){Ext.HelpManager&&Ext.HelpManager.reg(d)}}},"-",{xtype:"button",
text:"Clear",iconCls:"x-icon-errorreporter-icon-clear",handler:_._TRACE_REQUESTS_STORAGE.removeAll.createDelegate(_._TRACE_REQUESTS_STORAGE)},{xtype:"button",text:"Enable",enableToggle:true,pressed:_._TRACE_REQUEST.Enabled,iconCls:"x-icon-errorreporter-icon-enable",handler:function(d){_._TRACE_REQUEST.Enabled=d.pressed}}]});b=function(d){if(d)return'<div><span class="errorreporter-datetime-value">'+Ext.util.Format.dateRenderer("H:i:s")(d)+"</span></div>";return d};colModel=[c,new _.RowNumberer,
{header:"Status",width:50,sortable:false,dataIndex:"sev",groupable:false,renderer:function(d){var f="";switch(d){case _._TRACE_REQUEST.PENDING:f="x-icon-tracerrequests-pending";break;case _._TRACE_REQUEST.SUCCESS:f="x-icon-tracerrequests-success";break;case _._TRACE_REQUEST.FAIL:f="x-icon-tracerrequests-fail";break}return"<div style='vertical-align: middle' class='x-icon-tracerrequests-status "+f+"'></div>"},fixed:true},{header:"Description",width:100,sortable:false,dataIndex:"desc",groupable:false,
id:"desc"},{header:"Context",width:100,sortable:false,dataIndex:"ctx",groupable:false,id:"ctx"},{header:"Start",width:80,sortable:false,dataIndex:"start",groupable:false,fixed:true,renderer:b},{header:"End",width:80,sortable:false,dataIndex:"end",groupable:false,fixed:true,renderer:b},{header:"Time",width:80,sortable:false,dataIndex:"time",groupable:false,fixed:true,xtype:"numbercolumn",format:"0.0"}];this.gridRequests=new Ext.grid.GridPanel({id:"debug-reports-requests-grid",header:false,border:false,
frame:false,stripeRows:true,trackMouseOver:false,disableSelection:false,split:true,minHeight:100,collapsible:true,collapseMode:"mini",collapsed:false,height:100,viewConfig:{forceFit:true,scrollOffset:0},store:_._TRACE_REQUESTS_STORAGE,columns:colModel,plugins:c,tbar:this.toolbarRequests,region:"center",anchor:"100%"});this.items=[this.gridRequests];_.TracerRequests.superclass.constructor.apply(this,arguments);this.lAvTime.on("afterRender",function(){this.updateAvTime();_._TRACE_REQUESTS_STORAGE.on("datachanged",
this.updateAvTime,this);_._TRACE_REQUESTS_STORAGE.on("remove",this.updateAvTime,this);_._TRACE_REQUESTS_STORAGE.on("update",this.updateAvTime,this);_._TRACE_REQUESTS_STORAGE.on("clear",this.updateAvTime,this);_._TRACE_REQUESTS_STORAGE.on("load",this.updateAvTime,this)},this);_._TRACE_REQUESTS_STORAGE.setFilter(function(d){var f=false;switch(d.get("sev")){case _._TRACE_REQUEST.FAIL:f=this.failButton.pressed;break;case _._TRACE_REQUEST.PENDING:f=this.pendingButton.pressed;break;case _._TRACE_REQUEST.SUCCESS:f=
this.successButton.pressed;break}return f},this);this.gridRequests.on("rowcontextmenu",this.OnContextMenu,this)},updateAvTime:function(){this.lAvTime.update((_._TRACE_REQUESTS_STORAGE.sum("time")/_._TRACE_REQUESTS_STORAGE.getTotalCount()).toFixed(1)+" s")},OnContextMenu:function(b,c,d){b.getSelectionModel().getCount()<2&&b.getSelectionModel().selectRow(c,false);c=this.rowContextMenu=this.rowContextMenu||new Ext.menu.Menu({cls:"x-window-debugger-menu",items:[{ids:"request",iconCls:"x-icon-errorreporter-icon-inspect",
text:"Inspect Request"},{ids:"response",iconCls:"x-icon-errorreporter-icon-inspect",text:"Inspect Response"},"-",{ids:"delete",iconCls:"x-icon-errorreporter-icon-delete",text:"Delete"}],listeners:{itemclick:function(f){switch(f.ids){case "request":case "response":for(var g="",j=f.parentMenu.contextNodes,u=0,v=j.length;u<v;++u){node=j[u];g+=node.get(f.ids)}f=new _.InspectWindow;f.show();f.editor.text=g;f.editor.setValue(g);break;case "delete":j=f.parentMenu.contextNodes;u=0;for(v=j.length;u<v;++u)_._TRACE_REQUESTS_STORAGE.remove(j[u]);
break}},scope:this}});c.contextNodes=b.getSelectionModel().getSelections();d.stopEvent();c.showAt(d.getXY())}});_.Reporter=_._1(_._3.Reporter,_.JSCom._9,Ext.Window,IReporter,{_x:undefined,_y:undefined,_h:450,_w:800,cls:"x-window-debugger",sh:function(b){if(b.keyCode=="28"||b.which=="92"&&b.ctrlKey||b.keyCode=="92"&&b.ctrlKey){b=_a(_7(_._3.Reporter),"IReporter");b.getVisible()?b.Hide():b.Show()}},IReporter:{Show:function(b,c,d,f){this.setSize(_.def(f,
this._w),_.def(d,this._h));this.setPosition(_.def(b,this._x),_.def(c,this._y));this.show();return _5},Hide:function(){this.OnBeforeClose();return _5},Close:function(){this.close();return _5},Enable:function(b){_2=b?_TRACE_ACTIVE:_TRACE_PASSIVE;_.Debug=b;this.toolbar.findById("NjlEnableButton").toggle(b);return _5},getVisible:function(){return!this.hidden},putMaxTraceCount:function(b){_.MAXDBG_TRACES=b;return _5},getMaxTraceCount:function(){return _.MAXDBG_TRACES},AdviseKeyHandler:function(){_.Utils.registerEventHandler(document,
"keypress",this.sh);return _5},UnadviseKeyHandler:function(){_.Utils.unregisterEventHandler(document,"keypress",this.sh);return _5},getEnable:function(){return _2==_TRACE_ACTIVE},putDebugUrls:function(b){b=b||[];for(var c=[],d=0;d<b.length;++d)c.push([[d+1],b[d]]);this.dbg.urlSelectorCombo.store.loadData(c);this.dbg.urlSelectorCombo.setValue(b[0]||"");return _5}},IExtNative:{getNative:function(){return this}},constructor:function(b){if(typeof Ext=="undefined")throw"Unable to load Reporter Console, Ext didnt loaded.";
this.config=Ext.isDefined(b)?b:{};this.hidden=true;this.config.title="Dev Tools";this.config.modal=false;this.config.layout="border";this.config.plain=false;this.config.autoDestroy=true;this.config.bodyStyle="padding:0px";this.config.constrainHeader=true;this.config.draggable=true;this.config.border=true;this.config.resizable=true;this.config.constrain=false;this.config.minimizable=false;this.config.maximizable=true;this.config.stateful=true;this.config.shim=false;this.config.footer=false;this.config.closable=
true;this.config.collapsible=true;this.config.initHidden=true;this.config.iconCls="x-icon-errorreporter-window-title";b=new _.RowExpander({tpl:new Ext.Template("{info}<br/><br/>")});var c=[b,new _.RowNumberer,{header:"Status",width:50,sortable:true,dataIndex:"sev",renderer:this.iconCellRender,fixed:true,groupable:false},{header:"Description",width:100,sortable:false,dataIndex:"desc",groupable:false,id:"desc"},{header:"Context",width:100,sortable:true,dataIndex:"ctx",groupable:false,id:"ctx",renderer:this.CTXCellRender},
{header:"Date",width:150,sortable:true,dataIndex:"date",groupable:false,fixed:true,renderer:this.DTCellRender}];this.toolbar=new Ext.Toolbar({monitorResize:true,autoScroll:true,enableOverflow:true,items:[this.errButton=new Ext.Button({text:"Errors",iconCls:"x-icon-errorreporter-error",tooltip:"Toggle Errors visability on/off",pressed:true,enableToggle:true,handler:this.OnModeChange.createDelegate(this),items:0}),this.wrnButton=new Ext.Button({text:"Warnings",pressed:true,enableToggle:true,iconCls:"x-icon-errorreporter-warning",
tooltip:"Toggle Warnings visability on/off",handler:this.OnModeChange.createDelegate(this),items:0}),this.infButton=new Ext.Button({text:"Messages",pressed:true,enableToggle:true,iconCls:"x-icon-errorreporter-info",tooltip:"Toggle Info visability on/off",handler:this.OnModeChange.createDelegate(this),items:0}),"->","-",{xtype:"button",text:"Help Manager",disabled:true,enableToggle:true,iconCls:"x-icon-errorreporter-icon-question",listeners:{afterRender:function(d){Ext.HelpManager&&Ext.HelpManager.reg(d)}}},
"-",{xtype:"button",text:"Clear",iconCls:"x-icon-errorreporter-icon-clear",tooltip:"Clear",handler:this.OnClear.createDelegate(this)},{id:"NjlEnableButton",xtype:"button",text:"Enable",enableToggle:true,pressed:_2==_TRACE_ACTIVE,iconCls:"x-icon-errorreporter-icon-enable",tooltip:"Enable/Disable trace output",handler:this.OnEnableDisable.createDelegate(this)}]});this.grid=new Ext.grid.GridPanel({id:"debug-reports-grid",header:false,border:false,frame:false,stripeRows:true,trackMouseOver:false,
disableSelection:false,split:true,minHeight:100,collapsible:true,collapseMode:"mini",collapsed:false,height:100,viewConfig:{forceFit:true,scrollOffset:0},store:_TRACE_STORAGE,columns:c,plugins:b,tbar:this.toolbar,region:"center",anchor:"100%"});this.grid.on("afterrender",function(){this.contextPopupMenu=new Ext.menu.Menu({cls:"x-window-debugger-menu",style:{overflow:"hidden"},width:140,maxHeight:300,enableScrolling:true,items:[]});this.contextMenuItem=new Ext.menu.Item({clickHideDelay:0,hideOnClick:false,
menu:this.contextPopupMenu,text:"Context"});this.grid.view.hmenu.add(this.contextMenuItem);this.grid.view.hmenu.on("beforeshow",function(){this.grid.view.cm.findColumnIndex("ctx")==this.grid.view.hdCtxIndex?this.contextMenuItem.show():this.contextMenuItem.hide()},this)},this);this.dbg=new _.Debugger({layout:"fit",collapseMode:"mini",collapsed:true,height:80,split:true,region:"south"});this.grid.view.onLoad=function(){};this.config.items=[new Ext.TabPanel({activeTab:0,region:"center",items:[{title:"Log",
xtype:"container",layout:"border",items:[this.grid,this.dbg]},new _.TracerRequests({title:"Requests",layout:"border"})]})];_.Reporter.superclass.constructor.call(this,this.config);this.render(document.body);this.getEl().addClass("x-window-dlg");this.hide()},initComponent:function(){_.Reporter.superclass.initComponent.call(this);this.contextStore=new Ext.data.ArrayStore({fields:["ctx","checked"]});_TRACE_STORAGE.on("load",this.OnTraceDataChanged,this);_TRACE_STORAGE.on("remove",this.OnTraceDataChanged,
this);this.on("hide",function(){this.contextPopupMenu&&this.contextPopupMenu.hide()},this);this.grid.view.on("rowsinserted",this.OnRowsInserted,this);this.grid.on("rowcontextmenu",this.OnContextMenu,this);this.on("beforeclose",this.OnBeforeClose,this);_TRACE_STORAGE.setFilter(function(b){var c=false,d=true,f=this.contextStore.find("ctx",b.get("ctx"));if(f!=-1)d=this.contextStore.getAt(f).get("checked");switch(b.get("sev")){case _2.ERROR:c=this.errButton.pressed&&d;break;case _2.WARNING:c=
this.wrnButton.pressed&&d;break;case _2.INFO:c=this.infButton.pressed&&d;break}return c},this)},CTXCellRender:function(b){if(b)return'<div><span title="'+b+'">'+b+"</span></div>";return b},DTCellRender:function(b){if(b)return'<div><span title="'+Ext.util.Format.dateRenderer("Y-m-d H:i")(b)+'" class="errorreporter-datetime-value">'+Ext.util.Format.dateRenderer("Y-m-d H:i:s")(b)+"</span></div>";return b},OnBeforeClose:function(){this._x=this.x;this._y=this.y;this._w=this.getWidth();this._h=this.getHeight();
this.hide();return false},iconCellRender:function(b,c,d){switch(b){case _2.INFO:cls="x-icon-errorreporter-error-info";break;case _2.WARNING:cls="x-icon-errorreporter-error-warning";break;case _2.ERROR:cls="x-icon-errorreporter-error-error";break}clsd=d.get("desc").indexOf("WebCall")>-1?"x-icon-errorreporter-error-web-in":d.get("desc").indexOf("WebResp")>-1?"x-icon-errorreporter-error-web-out":"";return clsd.length?"<div style='vertical-align: middle' class="+cls+"><div class="+clsd+"></div></div>":
"<div style='vertical-align: middle' class="+cls+"></div>"},OnTraceDataChanged:function(){this.contextPopupMenu&&this.contextPopupMenu.removeAll();var b=new Ext.data.ArrayStore({fields:["ctx"]});Ext.each(_TRACE_STORAGE.snapshot.items.length?_TRACE_STORAGE.snapshot.items:_TRACE_STORAGE.data.items,function(c){this.contextStore.find("ctx",c.get("ctx"))==-1&&this.contextStore.loadData([[c.get("ctx"),true]],true);c.get("ctx")&&b.find("ctx",c.get("ctx"))==-1&&b.loadData([[c.get("ctx")]],true)},this);b.sort("ctx");
Ext.each(b.data.items,function(c){this.contextPopupMenu.add({clickHideDelay:0,text:c.get("ctx"),checked:this.contextStore.getAt(this.contextStore.find("ctx",c.get("ctx"))).get("checked"),hideOnClick:false,listeners:{checkchange:function(d,f){this.contextStore.getAt(this.contextStore.find("ctx",c.get("ctx"))).set("checked",f);_TRACE_STORAGE.applyFilter()},scope:this}})},this)},OnRowsInserted:function(b,c,d){(b=this.grid.view.scroller.dom)&&b.clientHeight-(b.scrollHeight-b.scrollTop)>=-25&&this.grid.view.focusRow(d);
for(c=c-1;c<d;++c)if(b=_TRACE_STORAGE.getAt(c)){var f=null;switch(b.get("sev")){case _2.ERROR:f=this.errButton;break;case _2.WARNING:f=this.wrnButton;break;case _2.INFO:f=this.infButton;break}if(f)f.text=++f.items+" "+f.text}},OnClear:function(){_TRACE_STORAGE.removeAll()},OnEnableDisable:function(b){_2=b.pressed?_TRACE_ACTIVE:_TRACE_PASSIVE;_.Debug=b.pressed},OnModeChange:function(){_TRACE_STORAGE.applyFilter()},OnContextMenu:function(b,c,d){b.getSelectionModel().getCount()<2&&
b.getSelectionModel().selectRow(c,false);c=new Ext.menu.Menu({cls:"x-window-debugger-menu",items:[{ids:"show",iconCls:"x-icon-errorreporter-icon-inspect",text:"Inspect..."},{ids:"delete",iconCls:"x-icon-errorreporter-icon-delete",text:"Delete"},"-",{ids:"copyto",iconCls:"x-icon-errorreporter-icon-copy",text:"Copy",disabled:!Ext.isIE}],listeners:{itemclick:function(f){switch(f.ids){case "copyto":var g="";f=f.parentMenu.contextNodes;for(var j=0,u=f.length;j<u;++j){node=f[j];g+=node.get("sev").name+
"\r\n"+node.get("date")+"\r\n"+node.get("desc")+"\r\n"+node.get("info")+"\r\n\r\n\r\n"}g=_.make_unquoted(g);g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("</br>","gi"),"\r\n");g=g.replace(new RegExp("<\u0008r>","gi"),"\r\n");g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("<br/>","gi"),"\r\n");copyToClipboard(g);break;case "delete":f=f.parentMenu.contextNodes;_TRACE_STORAGE.suspendEvents(true);j=0;for(u=f.length;j<u;++j)_TRACE_STORAGE.remove(f[j]);_TRACE_STORAGE.resumeEvents();
break;case "show":g="";f=f.parentMenu.contextNodes;j=0;for(u=f.length;j<u;++j){node=f[j];g+=node.get("info")+"<br/><br/><br/>"}f=new _.InspectWindow;f.show();f.editor.text=g;f.editor.setValue(g);break}},scope:this}});c.contextNodes=b.getSelectionModel().getSelections();d.stopEvent();c.showAt(d.getXY())}})}
if(typeof Ext!=="undefined")_.ErrorReporter=_._1(_._3.ErrorReporter,_.JSCom._9,IErrorReporter,{_isCollapse:true,_isAlwaysIgnore:false,_isNextAlt:true,_expandSize:undefined,_errorsText:"",_selectItem:undefined,_defaultWindowTitle:"Error Reporter",collapseButton:undefined,errorGrid:undefined,errorBox:undefined,controlsBox:undefined,titleContent:undefined,window:undefined,buttonCopy:undefined,buttonIgnore:undefined,buttonInspect:undefined,buttonShowLog:undefined,buttonReport:undefined,
checkboxAlwaysShow:undefined,IErrorReporter:{enable:function(){this._isAlwaysIgnore=false},disable:function(){this._isAlwaysIgnore=true},report:function(b,c,d,f){f=f||{};if(d!=_2.INFO){this.window.render(Ext.getBody());this.window.hidden&&this.onClearClick();var g=(new Date).format("h:i:s m/d/Y"),j=document.createElement("div");this.errorGrid.el.dom.childNodes.length?this.errorGrid.el.dom.insertBefore(j,this.errorGrid.el.dom.childNodes[0]):this.errorGrid.el.dom.appendChild(j);j=Ext.get(j);if(this._isNextAlt^=
1)j.addClass("errorreporter-errorgrid-altrow");j.data={d:b,i:c,s:d,date:g,title:f.title,subTitle:f.subTitle};this.setLongData(j);this.setShortData(this._selectItem);this._selectItem=j;Ext.EventManager.on(j,"click",function(){return function(){if(j!=this._selectItem){this.setLongData(j);this.setShortData(this._selectItem);this._selectItem=j;this.updateTitle(j.data.s,j.data.title,j.data.subTitle)}}}(j),this);this._errorsText+=(this._errorsText?"\n\n\n":"")+b+"\n\n"+c+"\n\nDatetime: "+g;if(!this._isAlwaysIgnore){if(this.window.hidden){this.buttonReport.setText(_TR("Report to NETGEAR"));
this.buttonShowLog.setText(_TR("Show log"));this.buttonIgnore.setText(_TR("Ignore"));this.buttonInspect.setText(_TR("Inspect"));this.buttonCopy.setText(_TR("Copy to Clipboard"));this.window.setTitle(_TR(this._defaultWindowTitle));this.checkboxAlwaysShow.setLabel(_TR("Always show this message for errors"));this._isCollapse?this.collapseButton.setText(_TR("Details")):this.collapseButton.setText(_TR("Collapse"));this.window.show();this.window.center()}this.errorGrid.el.dom.scrollTop=0}this.updateTitle(d,
f.title,f.subTitle);f.buttonInspect==undefined&&(f.buttonInspect=true);f.buttonInspect?this.buttonInspect.show():this.buttonInspect.hide();f.buttonShowLog==undefined&&(f.buttonShowLog=true);f.buttonShowLog?this.buttonShowLog.show():this.buttonShowLog.hide();f.checkboxShow==undefined&&(f.checkboxShow=true);f.checkboxShow?this.checkboxAlwaysShow.show():this.checkboxAlwaysShow.hide();f.windowTitle!=undefined&&this.setWindowTitle(f.windowTitle);f.buttonReport==undefined&&(f.buttonReport=true);if(f.buttonReport&&
(f.title+f.subTitle+"").match(/[0-9]{10,}/)){this.reportCfg=f;this.buttonReport.show();(b=Ext.HelpContext)&&!b.enabled&&b.review()}else{this.reportCfg=undefined;this.buttonReport.hide()}}}},constructor:function(){this.collapseButton=new Ext.UI.Button({text:_TR("Details"),width:85,handler:function(){if(this._isCollapse){this.window.removeClass("errorreporter-no-resize");this.window.addClass("ui-window-style1-resizable");this.collapseButton.setText(_TR("Collapse"));this.window.minHeight=this.window.minHeight+
this.errorBox.minHeight+this.controlsBox.getHeight();this.window.setSize(this._expandSize);this.window.resizer.enabled=true}else{this.collapseButton.setText(_TR("Details"));this.window.minHeight=this.window.minHeight-this.errorBox.minHeight-this.controlsBox.getHeight();this._expandSize=this.window.getSize();this.window.setSize(this.window.minWidth,this.window.minHeight);this.window.resizer.enabled=false;this.window.addClass("errorreporter-no-resize");this.window.removeClass("ui-window-style1-resizable")}this._isCollapse=
!this._isCollapse},scope:this});this.errorGrid=new Ext.Container({cls:"errorreporter-errorgrid"});this.errorBox=new Ext.Container({cls:"errorreporter-border",minHeight:150,items:[{xtype:"container",cls:"errorreporter-border-tml",items:[{xtype:"container",cls:"errorreporter-border-tmr",items:[{xtype:"container",cls:"errorreporter-border-tmc"}]}]},{xtype:"container",cls:"errorreporter-border-mc",items:[this.errorGrid]},{xtype:"container",cls:"errorreporter-border-bml",items:[{xtype:"container",cls:"errorreporter-border-bmr",
items:[{xtype:"container",cls:"errorreporter-border-bmc"}]}]}]});this.controlsBox=new Ext.Container({cls:"errorreporter-controls",items:[this.checkboxAlwaysShow=new Ext.UI.Checkbox({boxLabel:_TR("Always show this message for errors"),cls:"errorreporter-controls-checkbox",checked:true,handler:function(b,c){this._isAlwaysIgnore=!c},scope:this}),this.buttonCopy=new Ext.UI.Button({text:_TR("Copy to Clipboard"),width:120,handler:function(){_.copyToClipboard(this._errorsText)},scope:this,hidden:!_.isIE,
cls:"errorreporter-controls-clipboard"}),this.buttonInspect=new Ext.UI.Button({text:_TR("Inspect"),width:85,handler:this.onInspectClick,scope:this,cls:"errorreporter-controls-inspectbutton"}),{xtype:"component",style:"clear: both"}]});this.titleContent=new Ext.Container({cls:"errorreporter-title-warning",html:'<div><span style="font-size:24px;">'+_TR("An error has occurred")+'</span></div><div><span style="font-size:12px;">'+_TR("Errors in this application might cause it to work incorrectly")+"</span></div>"});
this.window=new Ext.UI.Window({title:this._defaultWindowTitle,modal:true,width:500,minWidth:500,y:175,autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:true,stateful:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",cls:"errorreporter",items:[this.titleContent,this.errorBox,this.controlsBox],fbar:[this.collapseButton,this.buttonReport=new Ext.UI.Button({text:_TR("Report to NETGEAR"),width:150,expandToText:true,style:"margin-left:10px",
handler:function(){var b="",c=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemManager();if((c=_a(c.getSysInfo(),"_i43"))&&c!=_4)b+="Model: "+c.getModel()+"\nFirmware: "+c.getFirmwareVersion()+"\n";if(c=Ext.HelpContext)if((c=c.getContext())&&c.length>0)b+="Context: "+c[c.length-1]+"\n";if(c=this.reportCfg){c=(c.title?c.title+"\n":"")+(c.subTitle?c.subTitle+"\n":"");if(c=c.replace(/<br[\s\/]*>/g,"\n"))b+="Error:\n"+c+"\n"}window.location.href="mailto:readycloud@netgear.com?subject="+
encodeURIComponent("Customer Error Report")+"&body="+encodeURIComponent(b)},scope:this}),"->",this.buttonShowLog=new Ext.UI.Button({text:_TR("Show log"),width:85,handler:function(){this.spReporter=this.spReporter||_a(_7(_._3.Reporter),"IReporter");this.spReporter.Show()},scope:this}),this.buttonIgnore=new Ext.UI.Button({text:_TR("Ignore"),width:85,cancelbtn:true,handler:function(){this.window.hide()},scope:this})]});_.ErrorReporter.superclass.constructor.call(this);this.window.on("resize",
function(){this.errorGrid.setHeight(this.window.body.getHeight(true)-this.titleContent.getHeight()-this.controlsBox.getHeight()-this.errorGrid.paddings)},this);this.window.on("hide",function(){this.errorGrid.scroller.hide();this.setWindowTitle(this._defaultWindowTitle)},this);this.window.on("afterrender",function(){this.window.minHeight=this.window.getHeight()-this.errorBox.getHeight()-this.controlsBox.getHeight();this.window.setHeight(this.window.minHeight);this._expandSize={width:this.window.minWidth,
height:this.window.minHeight+this.errorBox.minHeight+this.controlsBox.getHeight()};this.window.resizer.enabled=false;this.window.addClass("errorreporter-no-resize");this.window.removeClass("ui-window-style1-resizable")},this);this.errorGrid.on("afterrender",function(){this.errorGrid.paddings=this.errorBox.getHeight()-this.errorGrid.getHeight();this.errorGrid.scroller=new Ext.UI.Scroller({dom:this.errorGrid.el.dom,type:"vertical",margins:{top:2,right:3,bottom:2,left:2}});this.errorGrid.scroller.reg()},
this)},setWindowTitle:function(b){this.window.setTitle(b)},updateTitle:function(b,c,d){b==_2.ERROR?this.titleContent.addClass("errorreporter-title-error"):this.titleContent.removeClass("errorreporter-title-error");this.titleContent.update('<div><span style="font-size:24px;">'+(c==undefined?_TR("An error has occurred"):c)+'</span></div><div><span style="font-size:12px;">'+(d==undefined?_TR("Errors in this application might cause it to work incorrectly"):d)+"</span></div>")},onClearClick:function(){this._errorsText=
this.errorGrid.el.dom.innerHTML="";this._selectItem=undefined},onInspectClick:function(){var b=this._selectItem.data.i;if(!this.wndEditorWnd){var c=this.htmlEditor=new Ext.form.HtmlEditor({enableAlignments:false,enableColors:false,enableFont:false,enableFontSize:false,enableFormat:false,enableLinks:false,enableLists:false,cacheSizes:false,listeners:{editmodechange:function(f,g){if(g){g=_.make_unquoted(b);g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("</br>","gi"),"\r\n");g=
g.replace(new RegExp("<\u0008r>","gi"),"\r\n");g=g.replace(new RegExp("<br>","gi"),"\r\n");g=g.replace(new RegExp("<br/>","gi"),"\r\n");f.setRawValue(g)}else f.setValue(b)}}}),d=this.wndEditorWnd=new Ext.UI.Window({layout:"fit",items:[c],fbar:[{xtype:"uibutton",text:"Ok",acceptbtn:true,handler:function(){this.wndEditorWnd.hide()},scope:this}],height:320,width:540,minHeight:320,minWidth:540,border:true,plain:true,autoDestroy:true,bodyStyle:"padding:0px",constrainHeader:true,draggable:true,constrain:false,
minimizable:false,maximizable:true,stateful:true,shim:false,footer:false,closable:true,collapsible:false,initHidden:true,modal:true,autoHeight:false,title:_TR("Inspect Error"),cls:"errorreporter-inspect"});c.toggleSourceEdit=function(f){if(f===undefined)f=!this.sourceEditMode;this.sourceEditMode=f===true;f=this.tb.getComponent("sourceedit");if(f.pressed!==this.sourceEditMode){f.toggle(this.sourceEditMode);if(!f.xtbHidden)return}if(this.sourceEditMode){this.disableItems(true);this.syncValue();this.iframe.className=
"x-hidden";this.el.removeClass("x-hidden");this.el.dom.removeAttribute("tabIndex");this.el.focus()}else{this.initialized&&this.disableItems(this.readOnly);this.pushValue();this.iframe.className="";this.el.addClass("x-hidden");this.el.dom.setAttribute("tabIndex",-1);this.deferFocus()}this.fireEvent("editmodechange",this,this.sourceEditMode)};c.onResize=function(f,g){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(f)){var j=f-this.wrap.getFrameWidth("lr");
this.el.setWidth(j);this.tb.setWidth(j);this.iframe.style.width=Math.max(j,0)+"px"}if(Ext.isNumber(g)){j=g-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(j);if(this.iframeWrap)this.iframeWrap.dom.style.height=Math.max(j,0)+"px";if(j=this.getEditorBody())this.iframe.style.height=j.scrollHeight+"px"}}};c.on("afterrender",function(){c.iframeWrap=Ext.get(c.iframe).wrap();(new Ext.UI.Scroller({dom:c.el.dom,type:"vertical",margins:{top:2,right:3,bottom:2,left:2}})).reg();c.iframeWrap.scroller=
new Ext.UI.Scroller({dom:c.iframeWrap.dom,type:"vertical",margins:{top:2,right:3,bottom:2,left:2}});c.iframeWrap.scroller.reg();c.getToolbar().items.items[1].el.addClass("ui-button")},this);c.on("push",function(){c.setHeight(d.body.getHeight());if(!c.setStyles){c.setStyles=true;c.getEditorBody().style.overflow="hidden";Ext.EventManager.on(c.getEditorBody(),"mousewheel",function(f){c.iframeWrap.scroller.target_mouseWheel(f)},this)}},this);c.on("editmodechange",function(){c.setHeight(d.body.getHeight())},
this)}this.htmlEditor.setValue(b);this.wndEditorWnd.show()},setLongData:function(b){if(b)b.dom.innerHTML='<table cellspacing="0" class="errorreporter-errorgrid-table errorreporter-errorgrid-select-table"><tr><td class="errorreporter-errorgrid-cell"><span style="font-size: 14px">'+b.data.d+"</span><br />"+b.data.i+'</td><td class="errorreporter-errorgrid-cell errorreporter-errorgrid-cell-warning'+(b.data.s==_2.ERROR?" errorreporter-errorgrid-cell-error":"")+'">'+b.data.date+"</td></tr></table>"},
setShortData:function(b){if(b)b.dom.innerHTML='<table cellspacing="0" class="errorreporter-errorgrid-table"><tr><td class="errorreporter-errorgrid-cell"><span style="font-size: 14px">'+b.data.d+'</span></td><td class="errorreporter-errorgrid-cell errorreporter-errorgrid-cell-warning'+(b.data.s==_2.ERROR?" errorreporter-errorgrid-cell-error":"")+'"></td></tr></table>'}});
if(typeof _=="undefined")throw"_ library is not found";_._2("_1","_1.utils");_1.utils.gp=function(a,b){if(a&&_a(a,"_i5"))return a.getProperty(b);return _4};_1.gp=_1.utils.gp;_1.utils.pp=function(a,b,c){if(a&&_a(a,"_i5"))return a.putProperty(b,c);return _4};_1.pp=_1.utils.pp;_1.utils.xml2text=function(a){if(a)return a.getNodeText()};_1.x2t=_1.utils.xml2text;_1.utils.xmlattr2text=function(a,b){if(a)return a.getAttributeText(b)};
_1.xa2t=_1.utils.xmlattr2text;_._2("_1","_1.api");_._2("_1","_1.CLSIDS");_1.CLSIDS.Transaction="Devices.Transaction";_1.CLSIDS.MarvelDevice="Device.Marvel";_1.CLSIDS.Device5200="Device.5200";_1.CLSIDS.RCApplication="RCApplication";_1.CLSIDS.RCDevice="Device.RCDevice";_._2("_1");_1._in=_._1(_i6,{_in:{getErrorCode:function(){return _3},getErrorCause:function(){return _3},getErrorDetails:function(){return _3}}});
var _in=_1._in;_._2("_1");_1._i5=_._1(_i6,{_i5:{getProperty:function(){return _3},putProperty:function(){return _3},getXml:function(){return _3},putXml:function(){return _3},getCount:function(){return _3},rmProperty:function(){return _3}}});var _i5=_1._i5;_._2("_1");_1._iu=_._1(_i6,{_iu:{OnChanged:function(){return _3}}});
var _iu=_1._iu;_._2("_1");
_1._i3=_._1(_i6,{_i3:{getXDomId:function(){return _3},putParent:function(){return _3},getParent:function(){return _3},getChildren:function(){return _3},getChildByTrait:function(){return _3},putRoot:function(){return _3},getRoot:function(){},getXml:function(){return _3},Initialize:function(){return _3},appendChild:function(){return _3},removeChild:function(){return _3},removeAll:function(){return _3},
loadFromXml:function(){return _3},clone:function(){return _3},Update:function(){return _3},Commit:function(){return _3}}});var _i3=_1._i3;_._2("_1");
_1._io=_._1(_i6,{_io:{getXmlConnection:function(){return _3},getTargetDevice:function(){return _3},getResponse:function(){return _3},getRequest:function(){return _3},getPendingState:function(){return _3},getLastNMLError:function(){return _3},Send:function(){return _3},Abort:function(){return _3}}});var _io=_1._io;_._2("_1");
_1._ip=_._1(_i6,{_ip:{OnNTFailed:function(){return _3},OnNTReady:function(){return _3},_o1:function(){return _3},OnFailed:function(){return _3},_o2:function(){return _3},OnPending:function(){return _3},_o3:function(){return _3}}});var _ip=_1._ip;_._2("_1");_1._ir=_._1(_ip,{_ir:{OnConnectionLost:function(){return _3}}});
var _ir=_1._ir;_._2("_1");_1._iq=_._1(_i6,{putTimeOut:function(){return _3},getTimeOut:function(){return _3},putSourceURL:function(){return _3},getSourceURL:function(){return _3},getJsonpFlag:function(){return _3},putJsonpFlag:function(){return _3},getJsonpURL:function(){return _3},putJsonpURL:function(){return _3},getXmlRequest:function(){return _3}});_iq=_1._iq;
_._2("_1");
_1._i2z=_._1(_i6,{_i2z:{getName:function(){return _3},putName:function(){return _3},getId:function(){return _3},putId:function(){return _3},getAccess:function(){return _3},putAccess:function(){return _3},getShellAccess:function(){return _3},putShellAccess:function(){return _3},getPassword:function(){return _3},putPassword:function(){return _3},getIsLocked:function(){return _3},putIsLocked:function(){return _3},getEmail:function(){return _3},
putEmail:function(){return _3},getGroupName:function(){return _3},putGroupName:function(){return _3},getIsDomainMember:function(){return _3},putIsDomainMember:function(){return _3},getHomeDirectory:function(){return _3},getHomeFolder:function(){return this.xuserhf?this.xuserhf:_4},createHomeFolder:function(){return this.xuserhf?this.xuserhf:_4},getTimeMachine:function(){return this.xuserhf?this.xuserhf:_4},createTimeMachine:function(){return this.xuserhf?
this.xuserhf:_4},getGroupMembership:function(){return _3},putGroupMembership:function(){return _3}}});var _i2z=_1._i2z;_._2("_1");_1._i31=_._1(_ip,{_i31:{}});var _i31=_1._i31;_._2("_1");
_1._i2v=_._1(_i6,{_i2v:{getName:function(){return _3},putName:function(){return _3},getId:function(){return _3},putId:function(){return _3},getAccess:function(){return _3},putAccess:function(){return _3},getUsed:function(){return _3},putUsed:function(){return _3},getQuota:function(){return _3},putQuota:function(){return _3},getSecondaryMembers:function(){return _3},putSecondaryMembers:function(){return _3},
getIsDomainMember:function(){return _3},putIsDomainMember:function(){return _3}}});var _i2v=_1._i2v;_._2("_1");_1._i2w=_._1(_ip,{_i2w:{}});var _i2w=_1._i2w;_._2("_1");
_1._i3f=_._1(_i6,{_i3f:{getId:function(){return _3},getAccess:function(){return _3},putAccess:function(){return _3},getHostName:function(){return _3},putHostName:function(){return _3},getRootPrivilege:function(){return _3},putRootPrivilege:function(){return _3}}});var _i3f=_1._i3f;_._2("_1");
_1._i3c=_._1(_i6,{_i3c:{getName:function(){return _3},getId:function(){return _3},getProtoId:function(){return _3},getAvailable:function(){return _3},putAvailable:function(){return _3},getGroups:function(){return _3},getGroupById:function(){return _3},getUsers:function(){return _3},getUserById:function(){return _3},getHosts:function(){return _3},getDFSList:function(){return _3},getStrictSync:function(){return _3},
putSStrictSync:function(){return _3},getShareDisplayOption:function(){return _3},putShareDisplayOption:function(){return _3},getSmbEncryptOption:function(){return _3},putSmbEncryptOption:function(){return _3},putSmbHomeEncryptOption:function(){return _3},getEnableOplocks:function(){return _3},putEnableOplocks:function(){return _3},getEnableRecycleBin:function(){return _3},putEnableRecycleBin:function(){return _3},getEnableDFS:function(){return _3},
putEnableDFS:function(){return _3},getDefaultAccess:function(){return _3},putDefaultAccess:function(){return _3},getDefaultSync:function(){return _3},putDefaultSync:function(){return _3},getUserId:function(){return _3},putUserId:function(){return _3},getGroupId:function(){return _3},putGroupId:function(){return _3},getSquashType:function(){return _3},putSquashType:function(){return _3},getAllowGuestAccess:function(){return _3},
putAllowGuestAccess:function(){return _3},getNewFileFolderPermAutoset:function(){return _3},putNewFileFolderPermAutoset:function(){return _3},getAclChangeRestrictionToggle:function(){return _3},putAclChangeRestrictionToggle:function(){return _3},getFolderCreateGroupRights:function(){return _3},putFolderCreateGroupRights:function(){return _3},getFolderCreateEveryOneRights:function(){return _3},putFolderCreateEveryOneRights:function(){return _3},
getFileCreateGroupRights:function(){return _3},putFileCreateGroupRights:function(){return _3},getFileCreateEveryOneRights:function(){return _3},putFileCreateEveryOneRights:function(){return _3},getSpotlight:function(){return _3},putSpotlight:function(){return _3},getMediaType:function(){return _3},putMediaType:function(){return _3},getEnablePasswordProtection:function(){return _3},putEnablePasswordProtection:function(){return _3},
appendUser:function(){return _3},addUser:function(){return _3},removeUser:function(){return _3},removeAllUsers:function(){return _3},appendGroup:function(){return _3},removeGroup:function(){return _3},appendHost:function(){return _3},removeHost:function(){return _3},appendDFSFolder:function(){return _3},removeDFSFolder:function(){return _3},getEnableWebDav:function(){return _3},putEnableWebDav:function(){return _3},
putWebDavDefaultAccess:function(){return _3},putWebDavAllowGuestAccess:function(){return _3}}});var _i3c=_1._i3c;_._2("_1");_1._i3e=_._1(_ip,{_i3e:{}});var _i3e=_1._i3e;_._2("_1");
_1.IReplisyncDevice=_._1(_i6,{IReplisyncDevice:{getHostname:function(){return _3},getModel:function(){return _3},getSerial:function(){return _3},getIPv4:function(){return _3},getIPv6:function(){return _3}}});var IReplisyncDevice=_1.IReplisyncDevice;_._2("_1");
_1._i38=_._1(_i6,{_i38:{putName:function(){return _3},getName:function(){return _3},getId:function(){return _3},putComments:function(){return _3},getComment:function(){return _3},putFolderOwner:function(){return _3},getVolumeId:function(){return _3},putVolumeId:function(){return _3},getFolderOwner:function(){return _3},putNonOwnerDelete:function(){return _3},getNonOwnerDelete:function(){return _3},putFolderGroup:function(){return _3},
getFolderGroup:function(){return _3},putOwnerRights:function(){return _3},getOwnerRights:function(){return _3},putGroupRights:function(){return _3},getGroupRights:function(){return _3},putEveryoneRights:function(){return _3},getEveryoneRights:function(){return _3},getVisibleSnapshot:function(){return _3},putVisibleSnapshot:function(){return _3},getVisibleSnapFolder:function(){return _3},putVisibleSnapFolder:function(){return _3},
getPrevVersionsAccessible:function(){return _3},putPrevVersionsAccessible:function(){return _3},getProtocols:function(){return _3},getProtocolByName:function(){return _3},getProtocolById:function(){return _3},putPath:function(){return _3},getPath:function(){return _3},getAvailableMB:function(){return _3},getUsedMB:function(){return _3},getUsedByChildrenMB:function(){return _3},getUsedByDatasetMB:function(){return _3},getUsedByRefReservatonMB:function(){return _3},
getUsedBySnapshotsMB:function(){return _3},getCompressRatio:function(){return _3},getCountOfContinuousSnapshots:function(){return _3},getCountOfManualSnapshots:function(){return _3},getCountOfReplicateSnapshots:function(){return _3},getCountOfCustomSnapshots:function(){return _3},getQuotaMB:function(){return _3},putQuotaMB:function(){return _3},getReserveMB:function(){return _3},putReserveMB:function(){return _3},getRefQuotaMB:function(){return _3},
putRefQuotaMB:function(){return _3},getRefReserveMB:function(){return _3},putRefReserveMB:function(){return _3},getCompression:function(){return _3},putCompression:function(){return _3},getLogbias:function(){return _3},putLogbias:function(){return _3},getDedup:function(){return _3},putDedup:function(){return _3},getDedupAutoDisabling:function(){return _3},putDedupAutoDisabling:function(){return _3},getCloneState:function(){return _3},
getFirstSnapshotCreationTime:function(){return _3},getLastSnapshotCreationTime:function(){return _3},getEnableProtection:function(){return _3},putEnableProtection:function(){return _3},getEnableSmartSnapshot:function(){return _3},putEnableSmartSnapshot:function(){return _3},getSnapshotScheduleInterval:function(){return _3},putSnapshotScheduleInterval:function(){return _3},getCustomSnapshotManagement:function(){return _3},putCustomSnapshotManagement:function(){return _3},
getNonEmptySnapshots:function(){return _3},putNonEmptySnapshots:function(){return _3},getCustomSnapshotSchedule:function(){return _3},putCustomSnapshotSchedule:function(){return _3},getSnapshotRetentionType:function(){return _3},putSnapshotRetentionType:function(){return _3},getSnapshotRetentionNumber:function(){return _3},putSnapshotRetentionNumber:function(){return _3},getSnapshotRetentionLifeTime:function(){return _3},putSnapshotRetentionLifeTime:function(){return _3},
appendProtocol:function(){return _3},removeProtocol:function(){return _3},getMigration:function(){return _3},getExportInProgress:function(){return _3},getExportPath:function(){return _3},getExportProcessId:function(){return _3},getImportInProgress:function(){return _3},getImportPath:function(){return _3},getImportProcessId:function(){return _3},putEveryoneAccessRights:function(){return _3},getEveryoneAccessRights:function(){return _3},
getInheritAcl:function(){return _3},putInheritAcl:function(){return _3},getAccessAclList:function(){return _3},getDefaultAclList:function(){return _3},getClones:function(){return _3},getUserQuotas:function(){return _3},appendUserQuota:function(){return _3},removeUserQuota:function(){return _3},getGroupQuotas:function(){return _3},appendGroupQuota:function(){return _3},removeGroupQuota:function(){return _3},getUseReplicate:function(){return _3},
getReplicateJobId:function(){return _3},getReplicateJobName:function(){return _3},getIsReplicateSource:function(){return _3},getUseReadyRecover:function(){return _3},getSync:function(){return _3},putSync:function(){return _3},getBitRotProtection:function(){return _3},putBitRotProtection:function(){return _3},getType:function(){return _3},putType:function(){return _3},isReadyDRShare:function(){return _3},getIndexed:function(){return _3},
putIndexed:function(){return _3}}});var _i38=_1._i38;_._2("_1");_1._i30=_._1(_i6,{_i30:{}});var _i30=_1._i30;_._2("_1");
_1._i3a=_._1(_i6,{_i3a:{updateShares:function(){return _3},updateWebShare:function(){return _3},commitShares:function(){return _3},commitShare:function(){return _3},commitShareAcl:function(){return _3},getShares:function(){return _3},addShare:function(){return _3},removeShare:function(){return _3},migrateShare:function(){return _3},ReimportSnapshots:function(){return _3},updateLUNS:function(){return _3},
getLUNS:function(){return _3},appendLUN:function(){return _3},removeLUN:function(){return _3},commitLUN:function(){return _3},migrateLUN:function(){return _3},exportToNfs:function(){return _3},importFromNfs:function(){return _3},ChangePermissions:function(){return _3},UnUsedShareForReplicate:function(){return _3},UnUsedLUNForReplicate:function(){return _3},deleteBgProcess:function(){return _3},UpdateDefaultSettings:function(){return _3},
getDefaultSettingBitRotProtection:function(){return _3},getDefaultSettingBitRotProtectionPerformanceWarning:function(){return _3},getDefaultSettingContinuousProtection:function(){return _3},getDefaultSettingContinuousProtectionFrequency:function(){return _3},getSharesReadyDR:function(){return _3},addShareReadyDR:function(){return _3},updateReadyDRDestShares:function(){return _3},getReadyDRDestShares:function(){return _3}}});
var _i3a=_1._i3a;_._2("_1");_1._i3b=_._1(_ip,{_i3b:{OnSHMigrated:function(){return _3},OnSHChangeAcl:function(){return _3},OnSHExported:function(){return _3},OnSHImported:function(){return _3}}});var _i3b=_1._i3b;_._2("_1");
_1._i2x=_._1(_i6,{_i2x:{getUsers:function(){return _3},getUserById:function(){return _3},getADSMode:function(){return _3},getADSDomain:function(){return _3},getADSRealm:function(){return _3},getADSOrganization:function(){return _3},getADSAdminName:function(){return _3},getADSAdminPwd:function(){return _3},getADSController:function(){return _3},getTrustedUsersVisibility:function(){return _3},
getNotSyncAdsAccounts:function(){return _3},getADSIDMapMode:function(){return _3},addUser:function(){return _3},createUser:function(){return _3},AddUser:function(){return _3},removeUser:function(){return _3},updateUsers:function(){return _3},updateUsersWithAdmin:function(){return _3},applyUsers:function(){return _3},commitUsers:function(){return _3},getGroups:function(){return _3},getGroupById:function(){return _3},
updateGroups:function(){return _3},commitGroups:function(){return _3},addGroup:function(){return _3},updateADSMode:function(){return _3},commitADSMode:function(){return _3},queryUsers:function(){return _3},queryUsersWithAdmin:function(){return _3},getQueryUsers:function(){return _3},queryGroups:function(){return _3},getQueryGroups:function(){return _3},refreshAds:function(){return _3},UpdateRCUsers:function(){return _3},
getRCUsers:function(){return _3},UpdateDefaultUserProfile:function(){return _3},getLoginUserName:function(){return _3},UpdateLoginUserName:function(){return _3},getDefaultUserProfile:function(){return _3},CommitDefaultUserProfile:function(){return _3},queryUsersWithTimeMachine:function(){return _3},removeUserTimeMachine:function(){return _3},queryUsersWithHomeFolder:function(){return _3},queryUsersWithHFProtectOrAccess:function(){return _3},
backupADSIDMap:function(){return _3}}});var _i2x=_1._i2x;_._2("_1");_1._i2y=_._1(_ip,{_i2y:{}});var _i2y=_1._i2y;_._2("_1");
_1._i2=_._1(_i6,{_i2:{getWebEventSink:function(){return _3},getReplicateSystem:function(){return _3},getShareManager:function(){return _3},getSecurityManager:function(){return _3},getFSManager:function(){return _3},getNetworkManager:function(){return _3},getHealthManager:function(){return _3},getSystemManager:function(){return _3},getBackupManager:function(){return _3},getAddonsManager:function(){return _3},
getAlbumManager:function(){return _3},getXRaidManager:function(){return _3},getSystemServiceManager:function(){return _3},putSourceFSURL:function(){return _3},getSourceFSURL:function(){return _3},putSourcePHURL:function(){return _3},getSourcePHURL:function(){return _3},putSourceRCVURL:function(){return _3},getSourceRCVURL:function(){return _3},putSourceFWURL:function(){return _3},getSourceFWURL:function(){return _3},getZFSVolumesManager:function(){return _3},
getZFSDisksManager:function(){return _3},getZFSSnapshotsManager:function(){return _3},getISCSIManager:function(){return _3},getFirmwareManager:function(){return _3},getStatsManager:function(){return _3},getVolumeScheduleManager:function(){return _3},getHFSnapshotsManager:function(){return _3},getNetworkVLANManager:function(){return _3},getNetworkProxyManager:function(){return _3},getSSHKeyManager:function(){return _3},updateDeviceState:function(){return _3},
commitDeviceState:function(){return _3},getDeviceState:function(){return _3},shutdown:function(){return _3},startWebEventSink:function(){return _3},stopWebEventSink:function(){return _3},isStartedWebEventSink:function(){return _3},reboot:function(){return _3},register:function(){return _3},installFirmwareAftreUpload:function(){return _3},ejectVolume:function(){return _3},shutdownEDADevice:function(){return _3}}});
var _i2=_1._i2;_._2("_1");_1.ISSHEvents=_._1(_ip,{ISSHEvents:{}});var ISSHEvents=_1.ISSHEvents;
_1.ISSH=_._1(_i6,{ISSH:{IsDirty:function(){return _3},IsMarkedToDelete:function(){return _3},MarkToDelete:function(){return _3},getId:function(){return _3},getUserId:function(){return _3},putUserId:function(){return _3},getComment:function(){return _3},getTitle:function(){return _3},putTitle:function(){return _3},getType:function(){return _3},getFingerPrint:function(){return _3},getKey:function(){return _3},
getReadOnly:function(){return _3},putReadOnly:function(){return _3},getFilePath:function(){return _3},putFilePath:function(){return _3}}});var ISSH=_1.ISSH;_._2("_1");_1.ISSHManager=_._1(_i6,{ISSHManager:{createKey:function(){return _3},updateKeys:function(){return _3},getKeys:function(){return _3},getKeyById:function(){return _3},deleteKey:function(){return _3},editKey:function(){return _3},addKey:function(){return _3}}});
var ISSHManager=_1.ISSHManager;_._2("_1");_1.ISSHManagerEvents=_._1(_ip,{ISSHManagerEvents:{}});var ISSHManagerEvents=_1.ISSHManagerEvents;_._2("_1");_1._it=_._1(_i6,{_it:{getFirstLaunchState:function(){return _3},putFirstLaunchState:function(){return _3},getDropboxV1Flag:function(){return _3}}});var _it=_1._it;_._2("_1");
_1._is=_._1(_ir,{_is:{OnDeviceHalt:function(){return _3},OnDeviceReboot:function(){return _3}}});var _is=_1._is;_._2("_1");_1._i11=_._1(_i6,{_i11:{getTotalSize:function(){return _3},getFreeSize:function(){return _3},getMountPoint:function(){return _3},getDescription:function(){return _3},getFSFormat:function(){return _3}}});var _i11=_1._i11;_._2("_1");
_1._ix=_._1(_i6,{_ix:{getId:function(){return _3},getMethod:function(){return _3},getStatus:function(){return _3},getElapsedSeconds:function(){return _3},getRemainingSeconds:function(){return _3},getProgressPercent:function(){return _3},getSourceFolder:function(){return _3},getDestinationFolder:function(){return _3}}});var _ix=_1._ix;_._2("_1");
_1._iy=_._1(_i6,{_iy:{getFsTreeNode:function(){return _3},makeFolder:function(){return _3},deleteFolder:function(){return _3},removeFolder:function(){return _3},moveFolder:function(){return _3},renameFolder:function(){return _3},abortFSAction:function(){return _3},updateVolumes:function(){return _3},getVolumes:function(){return _3},updateFilePreview:function(){return _3},getFSSnapView:function(){return _3},
getHFSnapView:function(){return _3},UpdateSnapFilePreview:function(){return _3},UpdateHFSnapFilePreview:function(){return _3},UpdateVersionFilePreview:function(){return _3},RestoreSnapFSItem:function(){return _3},RestoreSnapHFFSItem:function(){return _3},getFSVersions:function(){return _3},RestoreFSVersion:function(){return _3},getHFFSVersions:function(){return _3},RestoreHFFSVersion:function(){return _3},search:function(){return _3}}});
var _iy=_1._iy;_._2("_1");
_1._iz=_._1(_ip,{_iz:{OnFSTNodeReady:function(){return _3},OnFSTPreviewReady:function(){return _3},OnFSTUsbEject:function(){return _3},OnFSTUsbPlug:function(){return _3},OnFSSnapViewReady:function(){return _3},OnFSHFSnapViewReady:function(){return _3},OnFSSnapFilePreviewReady:function(){return _3},OnFSHFSnapFilePreviewReady:function(){return _3},OnFSActionsUpdate:function(){return _3},OnFSVersionsReady:function(){return _3},
OnFSSearchReady:function(){return _3}}});var _iz=_1._iz;_._2("_1");
_1._i25=_._1(_i6,{_i25:{updateNetworkInfo:function(){return _3},updateNICS:function(){return _3},updateBONDS:function(){return _3},getDNSManager:function(){return _3},getInterfaces:function(){return _3},getWorkgroup:function(){return _3},putWorkgroup:function(){return _3},getGateway:function(){return _3},putGateway:function(){return _3},getHostname:function(){return _3},putHostname:function(){return _3},
commitNetworkInfo:function(){return _3},getAutoDHCP:function(){return _3},putAutoDHCP:function(){return _3},getNICS:function(){return _3},commitNIC:function(){return _3},AppendVNIC:function(){return _3},RemoveVNIC:function(){return _3},commitVNIC:function(){return _3},getBONDS:function(){return _3},AppendBOND:function(){return _3},RemoveBOND:function(){return _3},commitBOND:function(){return _3},AppendBONDNIC:function(){return _3},
RemoveBONDNIC:function(){return _3}}});var _i25=_1._i25;_._2("_1");_1._i26=_._1(_ip,{_i26:{}});var _i26=_1._i26;_._2("_1");
_1._i23=_._1(_i6,{_i23:{renew:function(){return _3},getLinkStatus:function(){return _3},getIPAssignment:function(){return _3},putIPAssignment:function(){return _3},getName:function(){return _3},getNetMask:function(){return _3},putNetMask:function(){return _3},getBroadcastIP:function(){return _3},putBroadcastIP:function(){return _3},getMTU:function(){return _3},putMTU:function(){return _3},
getMAC:function(){return _3},getIP:function(){return _3},putIP:function(){return _3}}});var _i23=_1._i23;_._2("_1");_1._i24=_._1(_ip,{_i24:{}});var _i24=_1._i24;_._2("_1");_1._i1z=_._1(_i6,{_i1z:{getIP:function(){return _3},putIP:function(){return _3},getPriority:function(){return _3},putPriority:function(){return _3}}});
var _i1z=_1._i1z;_._2("_1");_1._i21=_._1(_ip,{_i21:{}});var _i21=_1._i21;_._2("_1");_1._i22=_._1(_i6,{_i22:{getDNSRecords:function(){return _3},getDomain:function(){return _3},putDomain:function(){return _3},appendDNSRecord:function(){return _3},removeDNSRecord:function(){return _3}}});var _i22=_1._i22;
_._2("_1");_1._i22=_._1(_ip,{_i22:{}});_i22=_1._i22;_._2("_1");_1._i12=_._1(_i6,{_i12:{getLabel:function(){return _3},getName:function(){return _3},getId:function(){return _3},getResourceId:function(){return _3},getModel:function(){return _3},getTemperature:function(){return _3},getCapacity:function(){return _3},getStatus:function(){return _3}}});
var _i12=_1._i12;_1._i14=_._1(_i6,{_i14:{getLabel:function(){return _3},getName:function(){return _3},getId:function(){return _3},getSpeed:function(){return _3},getMinNormalSpeed:function(){return _3},getMaxNormalSpeed:function(){return _3},getStatus:function(){return _3}}});var _i14=_1._i14;
_1._i16=_._1(_i6,{_i16:{getLabel:function(){return _3},getName:function(){return _3},getId:function(){return _3},getValue:function(){return _3},getMinValue:function(){return _3},getMaxValue:function(){return _3},getStatus:function(){return _3}}});var _i16=_1._i16;
_1._i18=_._1(_i6,{_i18:{getLabel:function(){return _3},getName:function(){return _3},getId:function(){return _3},getStatus:function(){return _3},getRawStatus:function(){return _3},getModel:function(){return _3},getCharge:function(){return _3},getRuntime:function(){return _3}}});var _i18=_1._i18;
_1._i10=_._1(_i6,{_i10:{getLabel:function(){return _3},getStatus:function(){return _3},getValue:function(){return _3}}});var _i10=_1._i10;_1._i1b=_._1(_i6,{_i1b:{getLabel:function(){return _3},getName:function(){return _3},getId:function(){return _3},getValue:function(){return _3}}});var _i1b=_1._i1b;
_1._i1c=_._1(_i6,{_i1c:{getLabel:function(){return _3},getName:function(){return _3},getId:function(){return _3},getStatus:function(){return _3}}});var _i1c=_1._i1c;
_1.IHealthDiskSmartInfo=_._1(_i6,{IHealthDiskSmartInfo:{getDevice:function(){return _3},getController:function(){},getChannel:function(){},getModel:function(){},getSerial:function(){},getFirmware:function(){},getClass:function(){},getRPM:function(){},getSectors:function(){},getPool:function(){},getPoolType:function(){},getATAErrorCount:function(){},getReallocatedSectors:function(){},getReallocationEvents:function(){},getSpinRetryCount:function(){},getEndToEndErrors:function(){},
getCommandTimeouts:function(){},getCurrentPendingSectorCount:function(){},getUncorrectableSectorCount:function(){},getTemperature:function(){},getStartStopCount:function(){},getPowerOnHours:function(){},getPowerCycleCount:function(){},getLoadCycleCount:function(){}}});var IHealthDiskSmartInfo=_1.IHealthDiskSmartInfo;
_1._i1d=_._1(_i6,{_i1d:{getPortLabel:function(){return _3},getDisksHealth:function(){return _3},getFansHealth:function(){return _3},getTemperatureHealth:function(){return _3},getUPSHealth:function(){return _3},getVoltageHealth:function(){return _3},getPSUHealth:function(){return _3}}});var _i1d=_1._i1d;_._2("_1");
_1._i1e=_._1(_i6,{_i1e:{updateHealth:function(){return _3},getDisksHealth:function(){return _3},getFansHealth:function(){return _3},getTemperatureHealth:function(){return _3},getUPSHealth:function(){return _3},getVoltageHealth:function(){return _3},getPSUHealth:function(){return _3},getEnclosures:function(){return _3}}});var _i1e=_1._i1e;_._2("_1");
_1._i1f=_._1(_ip,{_i1f:{OnHealthUpdate:function(){return _3}}});var _i1f=_1._i1f;_._2("_1");
_1._i1v=_._1(_i6,{_i1v:{getMessage:function(){return _3},getDate:function(){return _3},getLogTime:function(){return _3},getSeverity:function(){return _3},getId:function(){return _3},getTime:function(){return _3},getLocalTime:function(){return _3},getCategory:function(){return _3},getMessageTag:function(){return _3},getArgs:function(){return _3}}});var _i1v=_1._i1v;_._2("_1");
_1._i1w=_._1(_i6,{_i1w:{updateLogs:function(){return _3},cleanLogs:function(){return _3},downloadAllLogs:function(){return _3},QueryLogs:function(){return _3},getLogs:function(){return _3},getLogsCount:function(){return _3},getTotalLogsCount:function(){return _3}}});var _i1w=_1._i1w;_._2("_1");_1._i1x=_._1(_ip,{_i1x:{OnDeviceAlarm:function(){return _3}}});
var _i1x=_1._i1x;_._2("_1");
_1._i44=_._1(_i6,{_i44:{updateClock:function(){return _3},RecoverPassword:function(){return _3},commitClock:function(){return _3},updateTimeZone:function(){return _3},updateSysInfo:function(){return _3},commitTimeZone:function(){return _3},checkForUpdate:function(){return _3},SetAdminPassword:function(){return _3},PerfomFactoryDefault:function(){return _3},PerfomeFirmwareUpdateWithVersion:function(){return _3},
updateNTPInfo:function(){return _3},commitNTPInfo:function(){return _3},setMyPassword:function(){return _3},getClock:function(){return _3},getTimeZone:function(){return _3},getNTPInfo:function(){return _3},getPowerManager:function(){return _3},getUpdateManager:function(){return _3},getAlertsManager:function(){return _3},getLocaleManager:function(){return _3},getSysInfo:function(){return _3},getFirmwareInfo:function(){return _3},
updateChart:function(){return _3},getChart:function(){return _3},restoreSysConfig:function(){return _3},updateDiskcache:function(){return _3},commitDiskcache:function(){return _3},getDiskcacheStatus:function(){return _3},updateSupportedFeatures:function(){return _3},getSupportStatsVolume:function(){return _3},getSupportStatsNetwork:function(){return _3},getSupportStatsUtilization:function(){return _3},getSupportStatsTemperature:function(){return _3},
getSupportBackupButton:function(){return _3},getSupportReadyDR:function(){return _3},getSupportXRAID:function(){return _3},getSupportFileSearch:function(){return _3},getSupportLunOver8TB:function(){return _3},updateDeviceState:function(){return _3},commitDeviceState:function(){return _3},getDeviceState:function(){return _3},updateCloudOwner:function(){return _3},updateInsightAgent:function(){return _3},registerCloudOwner:function(){return _3},
removeCloudOwner:function(){return _3},cancelCloudOwner:function(){return _3},getCloudOwner:function(){return _3},UpdateCloudServer:function(){return _3},CommitCloudServer:function(){return _3},getCloudServerAddress:function(){return _3},putCloudServerAddress:function(){return _3},reboot:function(){return _3},UpdateHomeFolderOptions:function(){return _3},CommitHomeFolderOptions:function(){return _3},getHomeFolderOptions:function(){return _3},
updateFanConfig:function(){return _3},commitFanConfig:function(){return _3},getFanConfig:function(){return _3}}});var _i44=_1._i44;_._2("_1");_1._i45=_._1(_ip,{_i45:{OnSysReboot:function(){return _3}}});var _i45=_1._i45;_._2("_1");
_1._i41=_._1(_i6,{_i41:{getYear:function(){return _3},getMonth:function(){return _3},getDay:function(){return _3},getHour:function(){return _3},getMinute:function(){return _3},getSecond:function(){return _3},putYear:function(){return _3},putMonth:function(){return _3},putDay:function(){return _3},putHour:function(){return _3},putMinute:function(){return _3},putSecond:function(){return _3}}});
var _i41=_1._i41;_._2("_1");_1._i47=_._1(_i6,{_i47:{getTimeZoneName:function(){return _3},putTimeZoneName:function(){return _3}}});var _i47=_1._i47;_._2("_1");
_1._i1t=_._1(_i6,{_i1t:{updateDictionary:function(){return _3},tr:function(){return _3},updateLocale:function(){return _3},commitLocale:function(){return _3},getLangs:function(){return _3},getLocale:function(){return _3},getAutoLocale:function(){return _3},putLocale:function(){return _3},getLocaleSpell:function(){return _3},getDictionary:function(){return _3}}});var _i1t=_1._i1t;
_._2("_1");_1._i1u=_._1(_ip,{_i1u:{OnLanguageChanged:function(){return _3}}});var _i1u=_1._i1u;_._2("_1");_1._i1r=_._1(_i6,{_i1r:{getLocale:function(){return _3},putLocale:function(){return _3},getAutoLocale:function(){return _3}}});var _i1r=_1._i1r;_._2("_1");
_1._i1s=_._1(_ip,{_i1s:{}});var _i1s=_1._i1s;_._2("_1");_1.ISysDongleBluetooth=_._1(_i6,{ISysDongleBluetooth:{getAddress:function(){return _3},updateStatus:function(){return _3},getStatus:function(){return _3}}});var ISysDongleBluetooth=_1.ISysDongleBluetooth;_1.ISysDongleBluetoothEvents=_._1(_ip,{ISysDongleBluetoothEvents:{}});var ISysDongleBluetoothEvents=_1.ISysDongleBluetoothEvents;
_._2("_1");_1.ISysDongleBluetoothState=_._1(_i6,{ISysDongleBluetoothState:{getState:function(){return _3},getClientAddress:function(){return _3},getPairingCode:function(){return _3}}});var ISysDongleBluetoothState=_1.ISysDongleBluetoothState;_._2("_1");_1._i1p=_._1(_i6,{_i1p:{tr:function(){return _3},getLangs:function(){return _3},getLangSpell:function(){return _3},getGaps:function(){return _3}}});
var _i1p=_1._i1p;_._2("_1");_1._i1q=_._1(_ip,{_i1q:{}});var _i1q=_1._i1q;_._2("_1");
_1._ia=_._1(_i6,{_ia:{updateSMTPProviders:function(){return _3},updateConfig:function(){return _3},updateSettings:function(){return _3},commitConfig:function(){return _3},commitSettings:function(){return _3},sendTestMessage:function(){return _3},getSMTPProviders:function(){return _3},getConfig:function(){return _3},getSettings:function(){return _3},updateSMTPServers:function(){return _3},
getSMTPServers:function(){return _3}}});var _ia=_1._ia;_._2("_1");_1._ib=_._1(_ip,{_ib:{}});var _ib=_1._ib;_._2("_1");
_1._i0=_._1(_i6,{_i0:{getContact:function(){return _3},getProvider:function(){return _3},getUser:function(){return _3},getPassword:function(){return _3},getServer:function(){return _3},getPort:function(){return _3},getFromName:function(){return _3},getTLS:function(){return _3},getAuth:function(){return _3},putContact:function(){return _3},putProvider:function(){return _3},putUser:function(){return _3},
putPassword:function(){return _3},putServer:function(){return _3},putPort:function(){return _3},putFromName:function(){return _3},putTLS:function(){return _3}}});var _i0=_1._i0;_._2("_1");
_1._ic=_._1(_i6,{_ic:{getOffonDiskFail:function(){return _3},getOffonDiskOverheat:function(){return _3},getMonitorVolume:function(){return _3},getMonitorDiskFailure:function(){return _3},getMonitorFan:function(){return _3},getMonitorPower:function(){return _3},getMonitorBoardTemp:function(){return _3},getMonitorUPS:function(){return _3},getMonitorDiskFull:function(){return _3},getMonitorDiskTemp:function(){return _3},
getMonitorAntivirus:function(){return _3},getMonitorQuotaExceed:function(){return _3},getMonitorBoardTemp:function(){return _3},getMonitorPSU:function(){return _3},putOffonDiskFail:function(){return _3},putOffonDiskOverheat:function(){return _3},putMonitorVolume:function(){return _3},putMonitorDiskFailure:function(){return _3},putMonitorFan:function(){return _3},putMonitorPower:function(){return _3},putMonitorBoardTemp:function(){return _3},
putMonitorUPS:function(){return _3},putMonitorDiskFull:function(){return _3},putMonitorDiskTemp:function(){return _3},putMonitorAntivirus:function(){return _3},putMonitorQuotaExceed:function(){return _3},putMonitorBoardTemp:function(){return _3},putMonitorPSU:function(){return _3}}});var _ic=_1._ic;_._2("_1");
_1._id=_._1(_i6,{_id:{getName:function(){return _3},getServer:function(){return _3},getDomain:function(){return _3},getPort:function(){return _3},getTLS:function(){return _3},getHelpURL:function(){return _3}}});var _id=_1._id;_._2("_1");
_1.ISysAlertsSMTPServer=_._1(_i6,{ISysAlertsSMTPServer:{getHostName:function(){return _3},getPort:function(){return _3},getSocketType:function(){return _3},getUserName:function(){return _3},getAuthentication:function(){return _3}}});var ISysAlertsSMTPServer=_1.ISysAlertsSMTPServer;_._2("_1");
_1._i2g=_._1(_i6,{_i2g:{updatePowerSchedule:function(){return _3},commitPowerSchedule:function(){return _3},getActions:function(){return _3},getSpindownActions:function(){return _3},getEnablePowerSchedule:function(){return _3},EnablePowerSchedule:function(){return _3},appendAction:function(){return _3},appendActions:function(){return _3},removeAction:function(){return _3},removeActions:function(){return _3},
removeAllActions:function(){return _3},appendSpindownAction:function(){return _3},appendSpindownActions:function(){return _3},removeSpindownAllActions:function(){return _3},updateWakeOnLAN:function(){return _3},commitWakeOnLAN:function(){return _3},getWakeOnLanStatus:function(){return _3},putWakeOnLanStatus:function(){return _3},updateSpindown:function(){return _3},commitSpindown:function(){return _3},getSpindownStatus:function(){return _3},
putSpindownStatus:function(){return _3},getSpindownTime:function(){return _3},putSpindownTime:function(){return _3}}});var _i2g=_1._i2g;_._2("_1");_1._i2h=_._1(_ip,{_i2h:{}});var _i2h=_1._i2h;_._2("_1");
_1._i2f=_._1(_i6,{_i2f:{getDayOfWeek:function(){return _3},getHour:function(){return _3},getMinute:function(){return _3},getAction:function(){return _3},putDayOfWeek:function(){return _3},putHour:function(){return _3},putMinute:function(){return _3},putAction:function(){return _3}}});var _i2f=_1._i2f;_._2("_1");
_1._i43=_._1(_i6,{_i43:{getModel:function(){return _3},getSerial:function(){return _3},getHostname:function(){return _3},getFirmwareName:function(){return _3},getFirmwareVersion:function(){return _3},getFirmwareTime:function(){return _3},getMemorySize:function(){return _3},getCPUNumber:function(){return _3},getCPUFrequency:function(){return _3},getMACAddress:function(){return _3},getRaidLevel:function(){return _3},
getHDDVendor:function(){return _3},getHDDModel:function(){return _3},getHDDSerial:function(){return _3},getHDDFirmware:function(){return _3},getRegistered:function(){return _3},getRaidStatus:function(){return _3},getRaidPercentage:function(){return _3},getRaidSpeed:function(){return _3},getRaidCompletionTime:function(){return _3},getRackmount:function(){return _3},getSafeMode:function(){return _3},getOSRootCorrupt:function(){return _3},
getReadOnlyDataVolumes:function(){return _3}}});var _i43=_1._i43;_._2("_1");_1._i42=_._1(_i6,{_i42:{getUpdateURL:function(){return _3},getDescription:function(){return _3},getVersion:function(){return _3},getSize:function(){return _3},getTime:function(){return _3}}});var _i42=_1._i42;_._2("_1");
_1._ie=_._1(_i6,{_ie:{getId:function(){return _3},getName:function(){return _3},putName:function(){return _3},getStatus:function(){return _3},getStatusDate:function(){return _3},getStatusResult:function(){return _3},getSourceType:function(){return _3},putSourceType:function(){return _3},getSourceShareNameOrProtocol:function(){return _3},putSourceShareNameOrProtocol:function(){return _3},getSourcePath:function(){return _3},
putSourcePath:function(){return _3},getSourceLogin:function(){return _3},putSourceLogin:function(){return _3},getSourcePassword:function(){return _3},putSourcePassword:function(){return _3},getSourcePort:function(){return _3},putSourcePort:function(){return _3},getSourceEject:function(){return _3},putSourceEject:function(){return _3},getSourceEjectable:function(){return _3},getDestinationType:function(){return _3},putDestinationType:function(){return _3},
getDestinationShareNameOrProtocol:function(){return _3},putDestinationShareNameOrProtocol:function(){return _3},getDestinationPath:function(){return _3},putDestinationPath:function(){return _3},getDestinationLogin:function(){return _3},putDestinationLogin:function(){return _3},getDestinationPassword:function(){return _3},putDestinationPassword:function(){return _3},getDestinationPort:function(){return _3},putDestinationPort:function(){return _3},
getDestinationEject:function(){return _3},putDestinationEject:function(){return _3},getDestinationEjectable:function(){return _3},getSheduleEnabled:function(){return _3},putSheduleEnabled:function(){return _3},getSheduleFrequency:function(){return _3},putSheduleFrequency:function(){return _3},getSheduleStart:function(){return _3},putSheduleStart:function(){return _3},getSheduleEnd:function(){return _3},putSheduleEnd:function(){return _3},
getSheduleDayOfWeek:function(){return _3},putSheduleDayOfWeek:function(){return _3},getFullBackupFrequency:function(){return _3},putFullBackupFrequency:function(){return _3},getRemovePreviousBackup:function(){return _3},putRemovePreviousBackup:function(){return _3},getChownToShareOwner:function(){return _3},putChownToShareOwner:function(){return _3},getRsyncOption:function(){return _3},putRsyncOption:function(){return _3},getRsyncExclude:function(){return _3},
putRsyncExclude:function(){return _3},getEmailThisToAlertEmail:function(){return _3},putEmailThisToAlertEmail:function(){return _3},getMiscOption:function(){return _3},putMiscOption:function(){return _3},getWolAddress:function(){return _3},putWolAddress:function(){return _3}}});var _ie=_1._ie;_._2("_1");_1._if=_._1(_ip,{_if:{}});var _if=_1._if;_._2("_1");
_1._ii=_._1(_i6,{_ii:{getType:function(){return _3},getUSBSubType:function(){return _3},getShareNameOrProtocol:function(){return _3},getPath:function(){return _3},getEjectable:function(){return _3},getRefId:function(){return _3}}});var _ii=_1._ii;_._2("_1");
_1._ig=_._1(_i6,{_ig:{updateBackups:function(){return _3},getBackups:function(){return _3},commitBackups:function(){return _3},deleteBackup:function(){return _3},runBackups:function(){return _3},cancelBackup:function(){return _3},addBackup:function(){return _3},appendBackup:function(){return _3},removeBackup:function(){return _3},updateButtonBackups:function(){return _3},getButtonBackups:function(){return _3},
commitButtonBackups:function(){return _3},appendButtonBackup:function(){return _3},removeButtonBackup:function(){return _3},updateTimeMachine:function(){return _3},getTimeMachine:function(){return _3},commitTimeMachine:function(){return _3},testBackupConnection:function(){return _3},updateButtonBackupsLog:function(){return _3},getButtonBackupsLog:function(){return _3},clearButtonBackupsLog:function(){return _3},updateLog:function(){return _3},
clearLog:function(){return _3},updateBackupsTargets:function(){return _3},getBackupSourceTargets:function(){return _3},getBackupDestinationTargets:function(){return _3},updateVaultStatus:function(){return _3},commitVaultStatus:function(){return _3},commitVaultAction:function(){return _3},getVault:function(){return _3},dowloadSSHKey:function(){return _3},updateDropBoxProvisioningStatus:function(){return _3},commitDropBoxProvisioningStatus:function(){return _3},
getDropBox:function(){return _3},updateDropBoxAuthURL:function(){return _3},getDropBoxAuthURL:function(){return _3},updateDropBoxShareList:function(){return _3},getDropBoxShareList:function(){return _3},syncDropBoxShare:function(){return _3},updateConnectionStatus:function(){return _3},getConnectionStatus:function(){return _3},updateAmazonProvisioningStatus:function(){return _3},commitAmazonProvisioningStatus:function(){return _3},
getAmazon:function(){return _3},updateAmazonAuthURL:function(){return _3},getAmazonAuthURL:function(){return _3},updateAmazonShareList:function(){return _3},getAmazonShareList:function(){return _3},syncAmazonShare:function(){return _3},updateAmazonLogs:function(){return _3},getAmazonLogs:function(){return _3},updateMediaBackup:function(){return _3},commitMediaBackup:function(){return _3},getMediaBackup:function(){return _3},
updateMediaBackupStatus:function(){return _3},getMediaBackupStatus:function(){return _3}}});var _ig=_1._ig;_._2("_1");_1._ih=_._1(_ip,{_ih:{OnLogUpdate:function(){return _3}}});var _ih=_1._ih;_._2("_1");
_1._il=_._1(_i6,{_il:{getEnable:function(){return _3},putEnable:function(){return _3},getPassword:function(){return _3},putPassword:function(){return _3},getCapacity:function(){return _3},putCapacity:function(){return _3},getMaxCapacity:function(){return _3},getUserName:function(){return _3},getProtocol:function(){return _3},putProtocol:function(){return _3}}});var _il=_1._il;_._2("_1");
_1._im=_._1(_i6,{_im:{getEnable:function(){return _3},getVersion:function(){return _3},getHostname:function(){return _3},getUsername:function(){return _3},getVolume:function(){return _3},getDefaultJob:function(){return _3}}});var _im=_1._im;_._2("_1");
_1._i7=_._1(_i6,{_i7:{getName:function(){return _3},getDispalyName:function(){return _3},getversion:function(){return _3},getMinRaidiatorVersion:function(){return _3},getAuthor:function(){return _3},getDescription:function(){return _3},getCurrentUrl:function(){return _3},getDetailUrl:function(){return _3},getDownloadUrl:function(){return _3},getLaunchUrl:function(){return _3},getIconUrl:function(){return _3},
getStatus:function(){return _3}}});var _i7=_1._i7;_._2("_1");_1._i8=_._1(_i6,{_i8:{updateInstalledAddons:function(){return _3},updateAvailableAddons:function(){return _3},installAddonRemotely:function(){return _3},getInstalledAddons:function(){return _3},getAvailableAddons:function(){return _3}}});var _i8=_1._i8;_._2("_1");
_1._i9=_._1(_ip,{_i9:{OnInstall:function(){return _3},OnRemove:function(){return _3}}});var _i9=_1._i9;_._2("_1");
_1._i2c=_._1(_i6,{_i2c:{getCoverUrl:function(){return _3},getTitle:function(){return _3},getDescription:function(){return _3},getOwnerName:function(){return _3},getOwnerFirstName:function(){return _3},getOwnerLastName:function(){return _3},getPunlishedOn:function(){return _3},getLastInvitation:function(){return _3},getItemsCount:function(){return _3},getGuestsCount:function(){return _3},getGuestsViewCount:function(){return _3},
getLastGuestsViewCount:function(){return _3},getPublicViewCount:function(){return _3},getLastPublicViewCount:function(){return _3},getAlbumURL:function(){return _3}}});var _i2c=_1._i2c;_._2("_1");
_1._i2d=_._1(_i6,{_i2d:{updateAlbums:function(){return _3},getAlbums:function(){return _3},getVersion:function(){return _3},getCountOfAlbums:function(){return _3},getCountOfSharedAlbums:function(){return _3},getCountOfPhotographers:function(){return _3},getConfigURL:function(){return _3},getLoginURL:function(){return _3}}});var _i2d=_1._i2d;_._2("_1");
_1._i2e=_._1(_ip,{_i2e:{}});var _i2e=_1._i2e;_._2("_1");_1._i46=_._1(_i6,{_i46:{getEnable:function(){return _3},putEnable:function(){return _3}}});var _i46=_1._i46;_._2("_1");
_1.ISysHourMapInfo=_._1(_i6,{ISysHourMapInfo:{getEnable:function(){return _3},putEnable:function(){return _3},getFormatType:function(){return _3},putFormatType:function(){return _3}}});var ISysHourMapInfo=_1.ISysHourMapInfo;_._2("_1");_1._i4c=_._1(_i6,{_i4c:{getId:function(){return _3},getSlotNumber:function(){return _3},getSlotBusyState:function(){return _3},getUsage:function(){return _3}}});
var _i4c=_1._i4c;_._2("_1");_1._i4b=_._1(_i6,{_i4b:{getId:function(){return _3},getName:function(){return _3},getRaidLevel:function(){return _3},getCapacity:function(){return _3},getState:function(){return _3},getVolumeDisks:function(){return _3},getTimeToComplete:function(){return _3},getPercentage:function(){return _3},getSpeed:function(){return _3}}});
var _i4b=_1._i4b;_._2("_1");_1._i4a=_._1(_ip,{_i4a:{}});var _i4a=_1._i4a;_._2("_1");_1._i40=_._1(_i6,{_i40:{updateXRaidInfo:function(){return _3},getXRaidVolumes:function(){return _3},getXRaidType:function(){return _3},getXRaidExpandble:function(){return _3},getXRaidPermissibleDisksCount:function(){return _3},getXRaidInstalledDisksCount:function(){return _3}}});
var _i40=_1._i40;_._2("_1");_1._iv=_._1(_i6,{_iv:{Listen:function(){return _3},StopListen:function(){return _3}}});var _iv=_1._iv;_._2("_1");_1._iw=_._1(_ip,{_iw:{OnEvent:function(){return _3}}});var _iw=_1._iw;_._2("_1");
_1._i4u=_._1(_i6,{_i4u:{UpdateVolumes:function(){return _3},AppendVolume:function(){return _3},ExportVolume:function(){return _3},Export:function(){return _3},ImportVolume:function(){return _3},RemoveVolume:function(){return _3},ReplaceVolumeDisk:function(){return _3},AttachVolumeDisk:function(){return _3},DetachVolumeDisk:function(){return _3},RemoveVolumeDisk:function(){return _3},getVolumes:function(){return _3},
getActiveVolumes:function(){return _3},getVolumeById:function(){return _3},ExpandCapacity:function(a,b,c,d){return this.ExpandVolume(a,b,c,"capacity",null,d)},ExpandRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,"raid_group",d,e)},ExpandNewRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,d?"concatenate":"stripe",null,e)},AddParity:function(){return _3},UpdateVolumeIOStat:function(){return _3},RemoveRaidGroup:function(){return _3},UpdateVolume:function(){return _3},
CommitVolume:function(){return _3},StartVolumeScrub:function(){return _3},StopVolumeScrub:function(){return _3},DefragVolume:function(){return _3},TrimVolume:function(){return _3},StartVolumeBalance:function(){return _3},StartVolumeDiskTest:function(){return _3}}});var _i4u=_1._i4u;_._2("_1");
_1._i3v=_._1(_ip,{_i3v:{OnVolumeAdd:function(){return _3},OnVolumeUpdate:function(){return _3}}});var _i3v=_1._i3v;_._2("_1");
_1._i4o=_._1(_i6,{_i4o:{getVolumeId:function(){return _3},getEjectable:function(){return _3},getVolumeName:function(){return _3},putVolumeName:function(){return _3},getAltRoot:function(){return _3},getDeDup:function(){return _3},getAutoExpand:function(){return _3},getDiscardable:function(){return _3},getMetadataAllocated:function(){return _3},getMetadataUsed:function(){return _3},getDataAllocated:function(){return _3},
getDataUsed:function(){return _3},getUnallocated:function(){return _3},getXRaidExpanded:function(){return _3},getAutoReplace:function(){return _3},getCacheFile:function(){return _3},getDelegation:function(){return _3},getListSnapshots:function(){return _3},getVersion:function(){return _3},getAllocated:function(){return _3},getCapacity:function(){return _3},getFree:function(){return _3},getAvailable:function(){return _3},
getReserved:function(){return _3},getGuid:function(){return _3},getState:function(){return _3},getSize:function(){return _3},getScrubProgress:function(){return _3},getResilverProgress:function(){return _3},getRemoveRAIDGroupProgress:function(){return _3},getBalanceProgress:function(){return _3},getDisktestProgress:function(){return _3},getResilverRemaining:function(){return _3},getVirtualDevices:function(){return _3},getDisksCount:function(){return _3},
getIOStat:function(){return _3},getVolumeMode:function(){return _3},putVolumeMode:function(){return _3},getChecksum:function(){return _3},putChecksum:function(){return _3},getQuota:function(){return _3},putQuota:function(){return _3},getCreateDefaultShare:function(){return _3},putCreateDefaultShare:function(){return _3},getConcatenated:function(){return _3},putConcatenated:function(){return _3},getEncryptionEnabled:function(){return _3},
putEncryptionEnabled:function(){return _3},getEncryptionMount:function(){return _3},putEncryptionMount:function(){return _3},getEncryptionEmail:function(){return _3},putEncryptionEmail:function(){return _3},getEncryptionAllowOverwriteKey:function(){return this.xenc?this.xenc.getAttributeText("allow_overwrite_key"):_4},putEncryptionAllowOverwriteKey:function(a){return this.xenc?this.xenc.setAttributeText(a,"allow_overwrite_key"):_4},getImportInProgress:function(){return _3},
getImportPath:function(){return _3},getImportProcessId:function(){return _3},getSnapshotPruneThreshold:function(){return _3},putSnapshotPruneThreshold:function(){return _3},getRAIDLevel:function(){return _3},AppendVirtualDevices:function(){return _3}}});var _i4o=_1._i4o;_._2("_1");
_1._i4q=_._1(_i6,{_i4q:{getReadCount:function(){return _3},getWriteCount:function(){return _3},getBandwidthReadCount:function(){return _3},getBandwidthWriteCount:function(){return _3}}});var _i4q=_1._i4q;_._2("_1");_1._i4p=_._1(_ip,{_i4p:{}});var _i4p=_1._i4p;_._2("_1");
_1._i4m=_._1(_i6,{_i4m:{getType:function(){return _3},putType:function(){return _3},getVirtualDeviceId:function(){return _3},getLevel:function(){return _3},putLevel:function(){return _3},putGroupsNumber:function(){return _3},getTierType:function(){return _3},getDisks:function(){return _3},getMetadataAllocated:function(){return _3},getDataAllocated:function(){return _3},getUnallocated:function(){return _3},
AppendDisks:function(){return _3},RemoveDisk:function(){return _3}}});var _i4m=_1._i4m;_._2("_1");_1._i4n=_._1(_ip,{_i4n:{}});var _i4n=_1._i4n;_._2("_1");
_1._i4d=_._1(_i6,{_i4d:{getDiskId:function(){return _3},getPresent:function(){return _3},getModel:function(){return _3},getSerial:function(){return _3},getFirmwareVersion:function(){return _3},getRPM:function(){return _3},getSectors:function(){return _3},getCapacity:function(){return _3},getTemperature:function(){return _3},getATAError:function(){return _3},getSlotName:function(){return _3},getHardwareInterface:function(){return _3},
getVolumeName:function(){return _3},getVolumeType:function(){return _3},getVolumeState:function(){return _3},getVolumeHostId:function(){return _3},getDiskState:function(){return _3},getChannelID:function(){return _3},getSignedByNetgear:function(){return _3},getFormattable:function(){return _3},getPartitions:function(){return _3},getEnclosureId:function(){return _3},getIsGlobalSpare:function(){return _3},getClass:function(){return _3},
getType:function(){return _3}}});var _i4d=_1._i4d;_._2("_1");_1._i4e=_._1(_i6,{_i4e:{getId:function(){return _3},getName:function(){return _3},getPortName:function(){return _3},getDisks:function(){return _3},getDiskById:function(){return _3},getRowsCount:function(){return _3},getColmsCount:function(){return _3},getRackAlignment:function(){return _3}}});var _i4e=_1._i4e;
_._2("_1");_1._i4f=_._1(_ip,{_i4f:{}});var _i4f=_1._i4f;_._2("_1");_1._i4h=_._1(_ip,{_i4h:{OnDiskAdd:function(){return _3},OnDiskRemove:function(){return _3},OnDiskUpdate:function(){return _3}}});var _i4h=_1._i4h;_._2("_1");
_1._i4g=_._1(_i6,{_i4g:{updateDiskEnclosures:function(){return _3},getDiskEnclosures:function(){return _3},getDiskEnclosureById:function(){return _3},getDiskById:function(){return _3},getHeadEnclosure:function(){return _3},MakeSpare:function(){return _3},FormatDisks:function(){return _3}}});var _i4g=_1._i4g;_._2("_1");
_1._i48=_._1(_i6,{_i48:{getPendingState:function(){return _3},putAsyncMode:function(){return _3},putIgnoreFails:function(){return _3},Append:function(){return _3},Update:function(){return _3},Commit:function(){return _3},Abort:function(){return _3},Remove:function(){return _3},RemoveAll:function(){return _3}}});var _i48=_1._i48;_._2("_1");
_1._i49=_._1(_ip,{_i49:{}});var _i49=_1._i49;_._2("_1");_1._i4i=_._1(_i6,{_i4i:{getName:function(){return _3},getVolumeName:function(){return _3},getShareName:function(){return _3},getUsedSpace:function(){return _3},getCreationDate:function(){return _3},getType:function(){return _3},getCloneShareCount:function(){return _3},getPath:function(){return _3}}});
var _i4i=_1._i4i;_._2("_1");_1._i4j=_._1(_ip,{_i4j:{}});var _i4j=_1._i4j;_._2("_1");
_1._i4k=_._1(_i6,{_i4k:{updateSnapshotsByDateRange:function(){return _3},getSnapshots:function(){return _3},getSnapshotByName:function(){return _3},updateSnapshotsCountByDateRange:function(){return _3},getSnapshotCountByType:function(){return _3},getSnapshotsDateRangeByType:function(){return _3},updateSnapshotSummary:function(){return _3},getSNSTotalCount:function(){return _3},getSNSManualTotalCount:function(){return _3},
getSNSContinuousTotalCount:function(){return _3},getSNSFirstSnapshotTime:function(){return _3},getSNSLastSnapshotTime:function(){return _3},CreateSnapshot:function(){return _3},RollbackSnapshot:function(){return _3},DeleteSnapshot:function(){return _3},CloneSnapshot:function(){return _3},PromoteSnapshot:function(){return _3}}});var _i4k=_1._i4k;_._2("_1");
_1._i4l=_._1(_ip,{_i4l:{}});var _i4l=_1._i4l;_._2("_1");
_1._i1y=_._1(_i6,{_i1y:{getName:function(){return _3},putName:function(){return _3},getMode:function(){return _3},putMode:function(){return _3},getPolicy:function(){return _3},putPolicy:function(){return _3},getAddrPolicy:function(){return _3},getLACPActivity:function(){return _3},putLACPActivity:function(){return _3},getLACPTimer:function(){return _3},putLACPTimer:function(){return _3},getFlags:function(){return _3},
getMTU:function(){return _3},putMTU:function(){return _3},getState:function(){return _3},getOver:function(){return _3},getIPAddress:function(){return _3},putIPAddress:function(){return _3},getIPv6Address:function(){return _3},putIPv6Address:function(){return _3},getMACAddress:function(){return _3},getIPType:function(){return _3},putIPType:function(){return _3},getRouter:function(){return _3},putRouter:function(){return _3},
getRouterv6:function(){return _3},putRouterv6:function(){return _3},getSubnet:function(){return _3},putSubnet:function(){return _3},getPrefixLength:function(){return _3},putPrefixLength:function(){return _3},getVID:function(){return _3},putVID:function(){return _3},getJumboFrames:function(){return _3},putJumboFrames:function(){return _3},getVNICS:function(){return _3},getDNSRecords:function(){return _3},putDNSRecords:function(){return _3},
getRoutes:function(){return _3},putRoutes:function(){return _3}}});var _i1y=_1._i1y;_._2("_1");
_1._i27=_._1(_i6,{_i27:{getName:function(){return _3},putName:function(){return _3},getMTU:function(){return _3},putMTU:function(){return _3},getState:function(){return _3},getBridge:function(){return _3},getIPAddress:function(){return _3},putIPAddress:function(){return _3},getIPv6Address:function(){return _3},putIPv6Address:function(){return _3},getMACAddress:function(){return _3},getSpeed:function(){return _3},
putSpeed:function(){return _3},getDuplex:function(){return _3},putDuplex:function(){return _3},getGateway:function(){return _3},getMACAddressType:function(){return _3},getIPType:function(){return _3},putIPType:function(){return _3},getRouter:function(){return _3},putRouter:function(){return _3},getRouterv6:function(){return _3},putRouterv6:function(){return _3},getSubnet:function(){return _3},putSubnet:function(){return _3},
getPrefixLength:function(){return _3},putPrefixLength:function(){return _3},getVID:function(){return _3},putVID:function(){return _3},getPath:function(){return _3},putPath:function(){return _3},getOver:function(){return _3},putOver:function(){return _3},getVNICS:function(){return _3},getDNSRecords:function(){return _3},putDNSRecords:function(){return _3},getRoutes:function(){return _3},putRoutes:function(){return _3}}});
var _i27=_1._i27;_._2("_1");
_1._i28=_._1(_i6,{_i28:{getName:function(){return _3},putName:function(){return _3},getState:function(){return _3},getMTU:function(){return _3},putMTU:function(){return _3},getOver:function(){return _3},putOver:function(){return _3},getIPAddress:function(){return _3},putIPAddress:function(){return _3},getIPv6Address:function(){return _3},putIPv6Address:function(){return _3},getMACAddress:function(){return _3},
getSpeed:function(){return _3},putSpeed:function(){return _3},getMACAddressType:function(){return _3},getVID:function(){return _3},putVID:function(){return _3},getIPType:function(){return _3},putIPType:function(){return _3},getGateway:function(){return _3},putGateway:function(){return _3},getSubnet:function(){return _3},putSubnet:function(){return _3},getPrefixLength:function(){return _3},putPrefixLength:function(){return _3},
getPrimaryRouter:function(){return _3},putPrimaryRouter:function(){return _3},getEffectiveRouter:function(){return _3},getDNSRecords:function(){return _3},putDNSRecords:function(){return _3}}});var _i28=_1._i28;_._2("_1");_1._i1o=_._1(_i6,{_i1o:{getName:function(){return _3},putName:function(){return _3},getSessionsCount:function(){return _3}}});var _i1o=_1._i1o;_._2("_1");
_1._i1j=_._1(_i6,{_i1j:{getId:function(){return _3},getComment:function(){return _3},putComment:function(){return _3},getSize:function(){return _3},putSize:function(){return _3},getBlockSize:function(){return _3},putBlockSize:function(){return _3},getAlertThreshold:function(){return _3},putAlertThreshold:function(){return _3},getAvailable:function(){return _3},getAllocated:function(){return _3},getUsedByDataset:function(){return _3},
getUsedBySnapshots:function(){return _3},getUsedByRefReservation:function(){return _3},getVolumeId:function(){return _3},putVolumeId:function(){return _3},getName:function(){return _3},putName:function(){return _3},getSparse:function(){return _3},putSparse:function(){return _3},getLUNGroupName:function(){return _3},putLUNGroupName:function(){return _3},getCompression:function(){return _3},putCompression:function(){return _3},
getCompressRatio:function(){return _3},getLogbias:function(){return _3},putLogbias:function(){return _3},getDedup:function(){return _3},putDedup:function(){return _3},getCountOfContinuousSnapshots:function(){return _3},getCountOfManualSnapshots:function(){return _3},getShared:function(){return _3},getFirstSnapshotCreationTime:function(){return _3},getLastSnapshotCreationTime:function(){return _3},putShared:function(){return _3},
getEnableProtection:function(){return _3},putEnableProtection:function(){return _3},getSnapshotScheduleInterval:function(){return _3},getEnableSmartSnapshot:function(){return _3},putEnableSmartSnapshot:function(){return _3},putSnapshotScheduleInterval:function(){return _3},getCustomSnapshotManagement:function(){return _3},putCustomSnapshotManagement:function(){return _3},getNonEmptySnapshots:function(){return _3},putNonEmptySnapshots:function(){return _3},
getCustomSnapshotSchedule:function(){return _3},putCustomSnapshotSchedule:function(){return _3},getSnapshotRetentionType:function(){return _3},putSnapshotRetentionType:function(){return _3},getSnapshotRetentionNumber:function(){return _3},putSnapshotRetentionNumber:function(){return _3},getSnapshotRetentionLifeTime:function(){return _3},putSnapshotRetentionLifeTime:function(){return _3},getMigration:function(){return _3},getExportInProgress:function(){return _3},
getExportPath:function(){return _3},getExportProcessId:function(){return _3},getImportInProgress:function(){return _3},getImportPath:function(){return _3},getImportProcessId:function(){return _3},getOriginClone:function(){return _3},getCloneState:function(){return _3},getSnapshotClone:function(){return _3},getUseReplicate:function(){return _3},getReplicateJobId:function(){return _3},getReplicateJobName:function(){return _3},
getIsReplicateSource:function(){return _3},getSync:function(){return _3},putSync:function(){return _3},isReadyDRShare:function(){return _3}}});var _i1j=_1._i1j;_._2("_1");
_1._i1m=_._1(_i6,{_i1m:{updateLUNGroups:function(){return _3},getLUNGroups:function(){return _3},AppendLUNGroup:function(){return _3},CommitLUNGroup:function(){return _3},RemoveLUNGroup:function(){return _3},updateHosts:function(){return _3},getHosts:function(){return _3},AppendHost:function(){return _3},CommitHost:function(){return _3},RemoveHost:function(){return _3}}});var _i1m=_1._i1m;
_._2("_1");_1._i1n=_._1(_ip,{_i1n:{}});var _i1n=_1._i1n;_._2("_1");_1._i1l=_._1(_i6,{_i1l:{getName:function(){return _3},putName:function(){return _3},putChapSecretValueBase64:function(){return _3},getChapSecret:function(){return _3},putChapSecret:function(){return _3}}});var _i1l=_1._i1l;_._2("_1");
_1._i1k=_._1(_i6,{_i1k:{getName:function(){return _3},putName:function(){return _3},getChapAuth:function(){return _3},putChapAuth:function(){return _3},getChapSecret:function(){return _3},putChapSecret:function(){return _3},putChapSecretValueBase64:function(){return _3},getTargets:function(){return _3},putTargets:function(){return _3},getHosts:function(){return _3},putHosts:function(){return _3},getAllHosts:function(){},
putAllHosts:function(){}}});var _i1k=_1._i1k;_._2("_1");
_1._i32=_._1(_i6,{_i32:{getName:function(){return _3},getEnable:function(){return _3},putEnable:function(){return _3},getStatus:function(){return _3},getNFSThreads:function(){return _3},putNFSThreads:function(){return _3},getNFSHomeShareState:function(){return _3},putNFSHomeShareState:function(){return _3},getNFSV4:function(){return _3},putNFSV4:function(){return _3},getNFSV4Domain:function(){return _3},
putNFSV4Domain:function(){return _3},getFTPPort:function(){return _3},putFTPPort:function(){return _3},getFTPAuthMode:function(){return _3},putFTPAuthMode:function(){return _3},getFTPPassiveRangeMin:function(){return _3},putFTPPassiveRangeMin:function(){return _3},getFTPPassiveRangeMax:function(){return _3},putFTPPassiveRangeMax:function(){return _3},getFTPMasqAddr:function(){return _3},putFTPMasqAddr:function(){return _3},
getFTPMasqEnable:function(){return _3},putFTPMasqEnable:function(){return _3},getFTPSEnable:function(){return _3},putFTPSEnable:function(){return _3},getFTPLogEnable:function(){return _3},putFTPLogEnable:function(){return _3},getFTPMaxUploadRate:function(){return _3},putFTPMaxUploadRate:function(){return _3},getFTPMaxDownloadRate:function(){return _3},putFTPMaxDownloadRate:function(){return _3},getFTPUploadResumeState:function(){return _3},
putFTPUploadResumeState:function(){return _3},getFTPHomeShareState:function(){return _3},putFTPHomeShareState:function(){return _3},getDAAPShareName:function(){return _3},putDAAPShareName:function(){return _3},getDAAPPassword:function(){return _3},putDAAPPassword:function(){return _3},getDAAPDirectory:function(){return _3},putDAAPDirectory:function(){return _3},getDLNAAutoScanState:function(){return _3},putDLNAAutoScanState:function(){return _3},
getDLNATivoServerState:function(){return _3},putDLNATivoServerState:function(){return _3},rescanDLNA:function(){return _3},getDLNATivoArchiverState:function(){return _3},putDLNATivoArchiverState:function(){return _3},getBonjourCIFSState:function(){return _3},putBonjourCIFSState:function(){return _3},getBonjourAFPState:function(){return _3},putBonjourAFPState:function(){return _3},getBonjourFrontviewState:function(){return _3},putBonjourFrontviewState:function(){return _3},
getBonjourReadynasState:function(){return _3},putBonjourReadynasState:function(){return _3},getBonjourTimeMachineState:function(){return _3},putBonjourTimeMachineState:function(){return _3},getHTTPLoginEnableState:function(){return _3},putHTTPLoginEnableState:function(){return _3},getHTTPSelectedShareName:function(){return _3},putHTTPSelectedShareName:function(){return _3},getHTTPAdminEnabled:function(){return _3},putHTTPAdminEnabled:function(){return _3},
getHTTPShareList:function(){return _3},getHTTPSPort:function(){return _3},putHTTPSPort:function(){return _3},getHTTPSSslKeyHost:function(){return _3},putHTTPSSslKeyHost:function(){return _3},getSNMPAllowHost:function(){return _3},putSNMPAllowHost:function(){return _3},getSNMPCommunity:function(){return _3},putSNMPCommunity:function(){return _3},getSNMPTrapDest:function(){return _3},putSNMPTrapDest:function(){return _3},getSNMPMibUrl:function(){return _3},
getSNMPContact:function(){return _3},putSNMPContact:function(){return _3},getSNMPLocation:function(){return _3},putSNMPLocation:function(){return _3},getSSHPort:function(){return _3},putSSHPort:function(){return _3},getSSHPswdAuthEnable:function(){return _3},putSSHPswdAuthEnable:function(){return _3},getIndexContent:function(){return _3},putIndexContent:function(){return _3},getExcludedFiles:function(){return _3},putExcludedFiles:function(){return _3},
getExcludedFolders:function(){return _3},putExcludedFolders:function(){return _3},getCifsEnhanceMacOS:function(){return _3},putCifsEnhanceMacOS:function(){return _3},getCifsWindowsDiscovery:function(){return _3},putCifsWindowsDiscovery:function(){return _3}}});var _i32=_1._i32;_._2("_1");_1._i33=_._1(_ip,{_i33:{}});var _i33=_1._i33;_._2("_1");
_1._i34=_._1(_i6,{_i34:{updateSystemServiceInfo:function(){return _3},commitSystemService:function(){return _3},getSystemServices:function(){return _3},getTIVOInfo:function(){return _3},getTIVOList:function(){return _3},activateTIVO:function(){return _3},deactivateTIVO:function(){return _3},updateTIVOStatus:function(){return _3},commitTIVOConfig:function(){return _3},updateRemoteSSH:function(){return _3},
commitRemoteSSH:function(){return _3},getRemoteSSHPort:function(){return _3},getRemoteSSHComment:function(){return _3},getRemoteSSHStatus:function(){return _3},updateFileSearchStats:function(){return _3},getFileSearchStats:function(){return _3},resetFileSearchIndex:function(){return _3},pauseFileSearchIndex:function(){return _3},resumeFileSearchIndex:function(){return _3}}});var _i34=_1._i34;_._2("_1");
_1._i35=_._1(_ip,{_i35:{}});var _i35=_1._i35;_._2("_1");_1._i36=_._1(_i6,{_i36:{getSharedFolderList:function(){return _3},getTIVOFolder:function(){return _3},getHour:function(){return _3},getMinute:function(){return _3},getDays:function(){return _3},getFastTransfer:function(){return _3}}});var _i36=_1._i36;
_._2("_1");_1._i37=_._1(_i6,{_i37:{getName:function(){return _3},isActivated:function(){return _3},getStatus:function(){return _3}}});var _i37=_1._i37;_._2("_1");_1.ISysIndexStat=_._1(_i6,{ISysIndexStat:{getStatus:function(){return _3},getFilesNumber:function(){return _3},getFoldersNumber:function(){return _3}}});var ISysIndexStat=_1.ISysIndexStat;_._2("_1");
_1._i3w=_._1(_ip,{_i3w:{}});var _i3w=_1._i3w;_._2("_1");
_1._i3v=_._1(_i6,{_i3v:{updateFirmwareDownloadProgress:function(){return _3},getDownloadState:function(){return _3},getDownloadProgress:function(){return _3},cancelFirmwareDownload:function(){return _3},checkForUpdate:function(){return _3},PerfomeLastFirmwareUpdate:function(){return _3},getFirmwareInfo:function(){return _3},updateFirmWareUpdateStatus:function(){return _3},getFirmWareUpdateStatus:function(){return _3},
getUpdateChannel:function(){return _3},setUpdateChannel:function(){return _3}}});var _i3v=_1._i3v;_._2("_1");_1._i2u=_._1(_i6,{_i2u:{getState:function(){return _3},getPercent:function(){return _3},getTotalUser:function(){return _3},getCurrUser:function(){return _3},getTotalGroup:function(){return _3},getCurrGroup:function(){return _3},getStartAt:function(){return _3},getDoneAt:function(){return _3}}});
var _i2u=_1._i2u;_._2("_1");_1._i39=_._1(_i6,{_i39:{getId:function(){return _3},getShareId:function(){return _3},getClonedShareName:function(){return _3},getParentSnapshotName:function(){return _3}}});var _i39=_1._i39;_._2("_1");_1._i3g=_._1(_i6,{_i3g:{getHardLimitMB:function(){return _3},putHardLimitMB:function(){return _3},getUsedMB:function(){return _3}}});
var _i3g=_1._i3g;_1.IShareUserQuota=_._1(_i3g,{IShareUserQuota:{getUserId:function(){return _3},putUserId:function(){return _3},getUserName:function(){return _3},putUserName:function(){return _3}}});var IShareUserQuota=_1.IShareUserQuota;_1.IShareGroupQuota=_._1(_i3g,{IShareGroupQuota:{getGroupId:function(){return _3},putGroupId:function(){return _3},getGroupName:function(){return _3},putGroupName:function(){return _3}}});
var IShareGroupQuota=_1.IShareGroupQuota;_._2("_1");
_1._i3n=_._1(_i6,{_i3n:{updateLocalApps:function(){return _3},getLocalApps:function(){return _3},updateLocalAvailableApps:function(){return _3},getLocalAvailableApps:function(){return _3},updateFeaturedApps:function(){return _3},updateFeaturedAppsVisible:function(){return _3},getFeaturedAppsVisible:function(){return _3},commitFeaturedAppsVisible:function(){return _3},getFeaturedApps:function(){return _3},
updateLocalInstalledApps:function(){return _3},getLocalInstalledApps:function(){return _3},updateLocalGenieApps:function(){return _3},getLocalGenieApps:function(){return _3},updateLocalLaunchableApps:function(){return _3},getLocalLaunchableApps:function(){return _3},updateLocalApp:function(){return _3},getAppBackgroundProcessStatus:function(){return _3},updateAppBackgroundProcessStatus:function(){return _3},updateServiceProcessStatus:function(){return _3},
getServiceActiveState:function(){return _3},getServiceSubState:function(){return _3},getServiceStateProgress:function(){return _3},commitCheckUpdate:function(){return _3},commitAppInstall:function(){return _3}}});var _i3n=_1._i3n;_._2("_1");
_1._i3o=_._1(_ip,{_i3o:{OnReceiveProgressData:function(){return _3},OnInstallationAbort:function(){return _3},OnUpdateLocalApp:function(){}}});var _i3o=_1._i3o;_._2("_1");
_1._i3l=_._1(_i6,{_i3l:{getId:function(){return _3},getStatus:function(){return _3},getName:function(){return _3},getAuthor:function(){return _3},getVersion:function(){return _3},getConfigURL:function(){return _3},getLaunchURL:function(){return _3},getDebianPackageName:function(){return _3},getServiceName:function(){return _3},getDescription:function(){return _3},getCategory:function(){return _3},
getAppType:function(){return _3},uninstallApp:function(){return _3},silentUninstallApp:function(){return _3},commitAppState:function(){return _3}}});var _i3l=_1._i3l;_._2("_1");_1._i3m=_._1(_ip,{_i3m:{}});var _i3m=_1._i3m;_._2("_1");
_1._i3t=_._1(_i6,{_i3t:{getPID:function(){return _3},getType:function(){return _3},getPackageName:function(){return _3},getStatusString:function(){return _3},getElapsedSeconds:function(){return _3},getRemainingSeconds:function(){return _3},getProgressPercentage:function(){return _3}}});var _i3t=_1._i3t;_._2("_1");_1._i3u=_._1(_ip,{_i3u:{}});
var _i3u=_1._i3u;_._2("_1");
_1._i29=_._1(_i6,{_i29:{updateP2PConfigurations:function(){return _3},commitP2PConfigurations:function(){return _3},getDeviceId:function(){return _3},getP2PStatus:function(){return _3},getNetworkConn:function(){return _3},getP2PState:function(){return _3},getProxyServerEnableStatus:function(){return _3},putProxyServerEnableStatus:function(){return _3},getProxyType:function(){return _3},putProxyType:function(){return _3},
getProxyAddr:function(){return _3},putProxyAddr:function(){return _3},getProxyPort:function(){return _3},putProxyPort:function(){return _3},getProxyUsername:function(){return _3},putProxyUsername:function(){return _3},getProxyPass:function(){return _3},putProxyPass:function(){return _3},getSpecConnEnableStatus:function(){return _3},putSpecConnEnableStatus:function(){return _3},getSpecConnProtocol:function(){return _3},putSpecConnProtocol:function(){return _3},
getSpecConnPort:function(){return _3},putSpecConnPort:function(){return _3},getSecEncryptEnableStatus:function(){return _3},putSecEncryptEnableStatus:function(){return _3},getSecFirewallEnableStatus:function(){return _3},putSecFirewallEnableStatus:function(){return _3},getLogDebugLevel:function(){return _3},putLogDebugLevel:function(){return _3},getLogMaxEntries:function(){return _3},putLogMaxEntries:function(){return _3},getLogFlushEntries:function(){return _3},
putLogFlushEntries:function(){return _3},restartP2P:function(){return _3},updateRemoteAccessList:function(){return _3},commitRemoteAccessList:function(){return _3},getP2PRemoteUsers:function(){return _3},appendP2PRemoteUser:function(){return _3},removeP2PRemoteUser:function(){return _3},queryP2PRemoteUsers:function(){return _3},getP2PQueryUsers:function(){return _3},startP2P:function(){return _3},stopP2P:function(){return _3},
updateReadyDropStatus:function(){return _3},getReadyDropStatus:function(){return _3},getReadyDropVolume:function(){return _3},commitReadyDropVolume:function(){return _3},commitReadyDropStatus:function(){return _3},updateDiscoverServiceStatus:function(){return _3},getDiscoverServiceStatus:function(){return _3},commitDiscoverServiceStatus:function(){return _3}}});var _i29=_1._i29;_._2("_1");
_1._i20=_._1(_ip,{_i20:{}});var _i20=_1._i20;
_1._i1g=_._1(_i6,{_i1g:{getId:function(){return _3},getName:function(){return _3},putName:function(){return _3},getDescription:function(){return _3},putDescription:function(){return _3},getType:function(){return _3},putType:function(){return _3},getSnmpAddress:function(){return _3},putSnmpAddress:function(){return _3},getSnmpCommunity:function(){return _3},putSnmpCommunity:function(){return _3},getSnmpMibs:function(){return _3},
putSnmpMibs:function(){return _3},getShutDownThreshold:function(){return _3},putShutDownThreshold:function(){return _3},getRemoteUserName:function(){return _3},putRemoteUserName:function(){return _3},getRemotePassword:function(){return _3},putRemotePassword:function(){return _3},getRemoteAddress:function(){return _3},putRemoteAddress:function(){return _3},getLocalAddress:function(){return _3},putLocalAddress:function(){return _3},
getLocalEnabled:function(){return _3},putLocalEnabled:function(){return _3},getShutdownThreshold:function(){return _3},putShutdownThreshold:function(){return _3},getUpsStatus:function(){return _3},getUpsRawStatus:function(){return _1.gp(this.xupsconfig,"ups_raw_status")},getUpsModel:function(){return _3},getUpsMfr:function(){return _3},getUpsSerial:function(){return _3}}});var _i1g=_1._i1g;_._2("_1");
_1._i1h=_._1(_i6,{_i1h:{UpdateUpsConfigs:function(){return _3},getUpsConfigs:function(){return _3},AddSnmpUpsConfig:function(){return _3},AddRemoteUpsConfig:function(){return _3},CommitUpsConfig:function(){return _3},DeleteUpsConfig:function(){return _3}}});var _i1h=_1._i1h;_._2("_1");_1._i1i=_._1(_ip,{_i1i:{}});
var _i1i=_1._i1i;_._2("_1");_1._i3x=_._1(_i6,{_i3x:{getName:function(){return _3},getVersion:function(){return _3},getStatus:function(){return _3}}});var _i3x=_1._i3x;_._2("_1");
_1._i2a=_._1(_i6,{_i2a:{getUserId:function(){return _3},getUserName:function(){return _3},getFirstName:function(){return _3},getLastName:function(){return _3},getEmail:function(){return _3},getType:function(){return _3}}});var _i2a=_1._i2a;_._2("_1");_1._i2b=_._1(_i6,{_i2b:{getFullName:function(){return _3},getUserName:function(){return _3},getChannel:function(){return _3}}});
var _i2b=_1._i2b;_._2("_1");_1._ij=_._1(_i6,{_ij:{getDropBoxState:function(){return _3},putDropBoxState:function(){return _3}}});var _ij=_1._ij;_._2("_1");_1._ik=_._1(_i6,{_ik:{getDropBoxShareId:function(){return _3},getDropBoxShareName:function(){return _3},getSelectedShare:function(){return _3}}});var _ik=_1._ik;_._2("_1");
_1.IAmazon=_._1(_i6,{IAmazon:{getAmazonState:function(){return _3},putAmazonState:function(){return _3}}});var IAmazon=_1.IAmazon;_._2("_1");_1.IAmazonShare=_._1(_i6,{IAmazonShare:{getAmazonShareId:function(){return _3},getAmazonShareName:function(){return _3},getSelectedShares:function(){return _3}}});var IAmazonShare=_1.IAmazonShare;_._2("_1");
_1.IMediaBackup=_._1(_i6,{IMediaBackup:{getEnabled:function(){return _3},putEnabled:function(){return _3},getDeleteSource:function(){return _3},putDeleteSource:function(){return _3},getRoot:function(){return _3},putRoot:function(){return _3}}});var IMediaBackup=_1.IMediaBackup;_._2("_1");
_1.IMediaBackupStatus=_._1(_i6,{IMediaBackupStatus:{getStatus:function(){return _3},getStatusResult:function(){return _3},getTotalBytes:function(){return _3},getTotalFiles:function(){return _3},getCopiedFiles:function(){return _3},getSpeed:function(){return _3}}});var IMediaBackupStatus=_1.IMediaBackupStatus;_._2("_1");
_1._i3d=_._1(_i6,{_i3d:{getName:function(){return _3},getAddress:function(){return _3},getRemoteShare:function(){return _3},putName:function(){return _3},putAddress:function(){return _3},putRemoteShare:function(){return _3}}});var _i3d=_1._i3d;_._2("_1");_1._i3y=_._1(_i6,{_i3y:{UpdateZfsArcStats:function(){return _3}}});var _i3y=_1._i3y;
_._2("_1");_1._i3z=_._1(_ip,{_i3z:{OnZfsArcStatsUpdate:function(){return _3}}});var _i3z=_1._i3z;_._2("_1");_1._i4s=_._1(_i6,{_i4s:{UpdateSchedules:function(){return _3},getSchedules:function(){return _3},AddSchedule:function(){return _3},CommitSchedule:function(){return _3},RemoveSchedule:function(){return _3}}});
var _i4s=_1._i4s;_._2("_1");_1._i4r=_._1(_i6,{_i4r:{IsDirty:function(){return _3},IsMarkedToDelete:function(){return _3},MarkToDelete:function(){return _3},getId:function(){return _3}}});var _i4r=_1._i4r;_._2("_1");_1._i4t=_._1(_ip,{_i4t:{}});
var _i4t=_1._i4t;_._2("_1");_1.IHomeFolderOptions=_._1(_i6,{IHomeFolderOptions:{}});var IHomeFolderOptions=_1.IHomeFolderOptions;_._2("_1");
_1.IShareAcl=_._1(_i6,{IShareAcl:{getId:function(){return _3},putId:function(){return _3},getName:function(){return _3},putName:function(){return _3},getType:function(){return _3},putType:function(){return _3},getPermissions:function(){return _3},putPermissions:function(){return _3}}});var IShareAcl=_1.IShareAcl;_._2("_1");
_1.IShareAclList=_._1(_i6,{IShareAclList:{getUserAcls:function(){return _3},getGroupAcls:function(){return _3},getUserOwnerAcl:function(){return _3},getGroupOwnerAcl:function(){return _3},getMaskAcl:function(){return _3},getOtherAcl:function(){return _3}}});var IShareAclList=_1.IShareAclList;_._2("_1");
_1.IUserHomeFolder=_._1(_i6,{IUserHomeFolder:{getSizeLimit:function(){return _3},putSizeLimit:function(){return _3},getSizeUsed:function(){return _3},getSnapProtectionEnabled:function(){return _3},putSnapProtectionEnabled:function(){return _3},getVisibleSnapshot:function(){return _3},putVisibleSnapshot:function(){return _3},getVisibleSnapFolder:function(){return _3},putVisibleSnapFolder:function(){return _3}}});
var IUserHomeFolder=_1.IUserHomeFolder;_._2("_1");_1.IUserTimeMachine=_._1(_i6,{IUserTimeMachine:{getEnabled:function(){return _3},putEnabled:function(){return _3},getSizeLimit:function(){return _3},putSizeLimit:function(){return _3},getUsedGB:function(){return _3}}});var IUserTimeMachine=_1.IUserTimeMachine;_._2("_1");
_1.IHFSnapshot=_._1(_i6,{IHFSnapshot:{getId:function(){return _3},getName:function(){return _3},putName:function(){return _3},getUserId:function(){return _3},putUserId:function(){return _3},getUserName:function(){return _3},getType:function(){return _3},getCreationDate:function(){return _3},getPath:function(){return _3}}});var IHFSnapshot=_1.IHFSnapshot;_._2("_1");
_1.IHFSnapshotsManager=_._1(_i6,{IHFSnapshotsManager:{UpdateSnapshots:function(){return _3},createSnapshot:function(){return _3},AddSnapshot:function(){return _3},RollbackSnapshot:function(){return _3},DeleteSnapshot:function(){return _3}}});var IHFSnapshotsManager=_1.IHFSnapshotsManager;_._2("_1");
_1.INetworkVLAN=_._1(_i6,{INetworkVLAN:{getId:function(){return _3},putId:function(){return _3},getBase:function(){return _3},putBase:function(){return _3}}});var INetworkVLAN=_1.INetworkVLAN;_._2("_1");_1.INetworkVLANManager=_._1(_i6,{INetworkVLANManager:{UpdateVLANs:function(){return _3},getVLANs:function(){return _3},createVLAN:function(){return _3},AddVLAN:function(){return _3},RemoveVLAN:function(){return _3}}});
var INetworkVLANManager=_1.INetworkVLANManager;_._2("_1");_1.INetworkVLANManagerEvents=_._1(_ip,{INetworkVLANManagerEvents:{}});var INetworkVLANManagerEvents=_1.INetworkVLANManagerEvents;_._2("_1");_1.INetworkRoute=_._1(_i6,{INetworkRoute:{getDestCIDRAddress:function(){return _3},putDestCIDRAddress:function(){return _3}}});var INetworkRoute=_1.INetworkRoute;_._2("_1");
_1.ISnapshotSchedule=_._1(_i6,{ISnapshotSchedule:{getConfig:function(){return _3},putConfig:function(){return _3}}});var ISnapshotSchedule=_1.ISnapshotSchedule;_._2("_1");_1.ISimpleShare=_._1(_i6,{ISimpleShare:{getId:function(){return _3},getName:function(){return _3},getType:function(){return _3},isLUN:function(){return _3},isReadyDRShare:function(){return _3}}});var ISimpleShare=_1.ISimpleShare;_._2("_1");
_1.ICloudStorageManager=_._1(_i6,{ICloudStorageManager:{updateConnectionStatus:function(){return _3},updateConnections:function(){return _3},getConnections:function(){return _3},deleteConnections:function(){return _3},createConnection:function(){return _3},addConnection:function(){return _3},putConnection:function(){return _3},deleteConnection:function(){return _3},createSession:function(){return _3},addSession:function(){return _3},
putSession:function(){return _3},deleteSession:function(){return _3},updateConnectionLog:function(){return _3},getConnectionLog:function(){return _3},updateBuckets:function(){return _3},getBuckets:function(){return _3},addBucket:function(){return _3},updateDirectories:function(){return _3},getDirectories:function(){return _3},addDirectory:function(){return _3},updateBucketLocations:function(){return _3},getBucketLocations:function(){return _3},
cancelMigration:function(){return _3}}});var ICloudStorageManager=_1.ICloudStorageManager;_1.ICloudStorageManagerEvents=_._1(_ip,{ICloudStorageManagerEvents:{}});var ICloudStorageManagerEvents=_1.ICloudStorageManagerEvents;_._2("_1");
_1.ICloudStorageAmazonS3=_._1(_i6,{ICloudStorageAmazonS3:{updateBuckets:function(){return _3},getBuckets:function(){return _3},addBucket:function(){return _3},updateBucketLocations:function(){return _3},getBucketLocations:function(){return _3}}});var ICloudStorageAmazonS3=_1.ICloudStorageAmazonS3;_._2("_1");
_1.ICloudStorageConnection=_._1(_i6,{ICloudStorageConnection:{getId:function(){return _3},getName:function(){return _3},putName:function(){return _3},getAKey:function(){return _3},putAKey:function(){return _3},getSKey:function(){return _3},putSKey:function(){return _3},getBucketName:function(){return _3},putBucketName:function(){return _3},getRegion:function(){return _3},putRegion:function(){return _3},getContainerName:function(){return _3},
putContainerName:function(){return _3},getServer:function(){return _3},putServer:function(){return _3},getStorageClass:function(){return _3},putStorageClass:function(){return _3},getPartSizeMB:function(){return _3},putPartSizeMB:function(){return _3},getPollingSec:function(){return _3},putPollingSec:function(){return _3},getMaxUploadKBS:function(){return _3},putMaxUploadKBS:function(){return _3},getMaxDownloadKBS:function(){return _3},
putMaxDownloadKBS:function(){return _3},getServerEncryption:function(){return _3},putServerEncryption:function(){return _3},getSessions:function(){return _3}}});var ICloudStorageConnection=_1.ICloudStorageConnection;_._2("_1");
_1.ICloudStorageSession=_._1(_i6,{ICloudStorageSession:{getId:function(){return _3},getConnectionId:function(){return _3},putConnectionId:function(){return _3},getLocalPath:function(){return _3},putLocalPath:function(){return _3},getRemotePath:function(){return _3},putRemotePath:function(){return _3},getSyncDirection:function(){return _3},putSyncDirection:function(){return _3}}});var ICloudStorageSession=_1.ICloudStorageSession;
_._2("_1");_1.ICloudStatus=_._1(_i6,{ICloudStatus:{getJoined:function(){return _3},getEnabled:function(){return _3},getConn_Id:function(){return _3},getConn_Type:function(){return _3},getStatus:function(){return _3},getUser_Name:function(){return _3},getUsed:function(){return _3},getCapacity:function(){return _3},getFail_Code:function(){return _3}}});var ICloudStatus=_1.ICloudStatus;_._2("_1");
_1.IInsightAgent=_._1(_i6,{IInsightAgent:{getRegistered:function(){return _3},getRConnected:function(){return _3},getUserName:function(){return _3}}});var IInsightAgent=_1.IInsightAgent;_._2("_1");
_1.INetworkProxyServer=_._1(_i6,{INetworkProxyServer:{getId:function(){return _3},getProtocol:function(){return _3},putProtocol:function(){return _3},getAddress:function(){return _3},putAddress:function(){return _3},getPort:function(){return _3},putPort:function(){return _3},getUsername:function(){return _3},putUsername:function(){return _3},getPassword:function(){return _3},putPassword:function(){return _3}}});
var INetworkProxyServer=_1.INetworkProxyServer;_._2("_1");_1.INetworkProxyManager=_._1(_i6,{INetworkProxyManager:{UpdateServers:function(){return _3},getServers:function(){return _3},createServer:function(){return _3},AddServer:function(){return _3},CommitServer:function(){return _3},RemoveServer:function(){return _3},RemoveAllServers:function(){return _3},TestConnection:function(){return _3}}});
var INetworkProxyManager=_1.INetworkProxyManager;_1.INetworkProxyManagerEvents=_._1(_ip,{INetworkProxyManagerEvents:{OnTestConnection:function(){}}});var INetworkProxyManagerEvents=_1.INetworkProxyManagerEvents;_._2("_1");
_1.nmlerr=_._1(_9,_in,_i3,{constructor:function(){_1.nmlerr.superclass.constructor.apply(this,arguments)},_in:{getErrorCode:function(){return this.code},getErrorCause:function(){return this.cause},getErrorDetails:function(){return this.desc}},_i3:{loadFromXml:function(a){var b=a.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:error"),c=a.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:result/xs:command-s/message/error"),d=a.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:result/xs:command-s");
if(b){this.code=_1.x2t(b.selectSingleNode("xs:error-code"));this.cause=_1.x2t(b.selectSingleNode("xs:error-cause"));this.desc=_1.x2t(b.selectSingleNode("xs:error-details"))}else if(c){this.code=_1.x2t(c.selectSingleNode("code"));this.desc=this.cause=_1.x2t(c.selectSingleNode("message"))}else if(d){this.code=_1.x2t(d.selectSingleNode("xs:command-error"));this.cause=this.desc=_1.x2t(d.selectSingleNode("xs:command-output"))}else{this.code=_1.x2t(a.selectSingleNode("xs:error-code"));this.cause=
_1.x2t(a.selectSingleNode("xs:error-cause"));this.desc=_1.x2t(a.selectSingleNode("xs:error-details"))}return _5}}});_._2("_1");
_1._2=function(a,b){_1.NMLGUID=_1.NMLGUID?_1.NMLGUID:"dpv_"+Date.parse(new Date);return String.format('<?xml version="1.0" encoding="UTF-8"?>             <xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="{0}" dst="nas">                <xs:transaction id="{1}">                    {2}                </xs:transaction>            </xs:nml>',_1.NMLGUID,b?b:_.id(),a)};
_1.xprop=_._1(_8("_iu"),_i5,{constructor:function(a){_1.xprop.superclass.constructor.apply(this,arguments);_a(this,"_i5").putXml(a)},getPropertyAbsolute:function(a,b){if(a)if(a=a.selectSingleNode("./"+b))return a.getNodeText();return _4},putPropertyAbsolute:function(a,b,c){if(a)if(a=a.selectSingleNode("./"+b))if(a.setNodeText(c))return _5;return _4},getCountAbsolute:function(a){if(a)if(a=a.selectNodes("./*"))return a.length;
return-1},_i5:{getProperty:function(a){if(this.xdoc)if(a=this.xdoc.selectSingleNode("./"+a)){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()}return _4},putProperty:function(a,b){if(this.xdoc){var c=this.xdoc.selectSingleNode("./"+a)||this.xdoc.appendNode(a);if(c)if(c.setNodeText(b)){this.Fire("OnChanged",[a,b,"changed"]);return _5}}return _4},getXml:function(){if(this.xdoc)return this.xdoc;return _4},putXml:function(a){if(_.isDefined(a)&&
_.isDefined(a.isValid)&&a.isValid()){this.xdoc=a;this.Fire("OnChanged",[null,null,"cleaned"]);return _5}return E_INVALIDARG},getCount:function(){if(this.xdoc){var a=this.xdoc.selectNodes("./*");if(a)return a.length}return-1},rmProperty:function(){return _4}}});
_1.collection=_._1(_9,{constructor:function(a,b){_1.collection.superclass.constructor.call(this);this._a=a;this._i=b},getItemBy:function(a,b){if(this._a&&this._a.length)for(var c=0,d=this._a.length;c<d;++c){var e=this._i?_a(this._a[c],this._i):this._a[c];if(e)if(e["get"+a].call(this)==b)return e}},getCount:function(){return this._a?this._a.length:undefined},getItem:function(a){return this._a&&this._a.length?_a(this._a[a],this._i):undefined}});
_1._1=_._1(_9,_i3,_io,{constructor:function(){_1._1.superclass.constructor.apply(this,arguments);this.__xid=_.idn();this.children=[];this.children.hash={};this.children.append=function(a){this.hash[a.getXDomId()]={o:a,i:this.length};this.push(a)};this.children.clear=function(){this.splice(0,this.length);this.hash={}};this.children.getItemBy=function(a){return this.hash[a]};this.children.removeItemBy=function(a){var b=this.hash[a];if(b){this.splice(b.i,1);this.hash[a]=
undefined;delete this.hash[a];a=0;for(var c in this.hash){this.hash[c].i=a;a++}return true}return false}},_i3:{getXDomId:function(){return this.__xid},putParent:function(a){this.parent=_a(a,"_i3");return _5},getParent:function(){return _.isDefined(this.parent)?this.parent:null},putRoot:function(a){this.root=_a(a,"_i3");for(var b=0,c=this.children.length;b<c;++b)this.children[b].putRoot(a);return _5},getRoot:function(){return _.isDefined(this.root)?this.root:
_a(this,"_i3")},getChildren:function(){return this.children},getChildByTrait:function(a){for(var b=0,c=this.children.length;b<c;++b)if(_a(this.children[b],a))return this.children[b];return null},appendChild:function(a){var b=_a(a,"_i3");if(b){if(this.children.getItemBy(b.getXDomId()))return a;var c=_a(this,"_i3"),d=_.isDefined(c.getRoot())?c.getRoot():c;b.putRoot(d);b.putParent(c);this.children.append(b);b.Initialize(d,c);return a}return E_INVALIDARG},
removeChild:function(a){if(a=_a(a,"_i3")){if(this.children.removeItemBy(a.getXDomId())){a.putRoot(undefined);a.putParent(undefined);return _5}return S_FALSE}return E_INVALIDARG},removeAll:function(){for(var a=0,b=this.children.length;a<b;++a){this.children[a].putRoot(undefined);this.children[a].putParent(undefined)}this.children.clear();return _5},clone:function(){var a=null,b=this.root,c=this.parent;this.parent=undefined;_a(this,"_i3").putRoot(undefined);a=_.clone(this,
true);a.__uuid_obj_id=undefined;this.parent=c;_a(this,"_i3").putRoot(b);a.parent=c;_a(a,"_i3").putRoot(b);a.__xid=_.idn();b=_a(this,"_i3").getXml();if(b!=_3)if(b=b.cloneNode(true)){a=_a(a,"_i3");if(a.loadFromXml(b.selectNodes(".")[0])==_5)return a}return null}},_io:{getXmlConnection:function(){return this.m_conn?this.m_conn:_4},getTargetDevice:function(){return _a(_a(this,"_i3").getRoot(),"_i2")},getResponse:function(){return this.xmlResponse?
this.xmlResponse:_4},getRequest:function(){return this.xmlRequest?this.xmlRequest:_4},getPendingState:function(){if(this.m_conn)return this.m_conn.isLoading();return _4},Send:function(a,b,c,d){return this.sendXml(a,b,undefined,undefined,c,d)},Abort:function(){if(this.m_conn&&this.m_conn.isLoading()){this.m_conn.abort();return _5}return _4},getLastNMLError:function(){return this.nmlLastError?this.nmlLastError:null}},sendXml:function(a,b,c,d,e,f){var g=_a(_a(this,"_i3").getRoot(),
"_iq");if(g&&a){this.xmlRequest=g.getXmlRequest(a,b,c,d,e,f);if(!this.m_conn){this.m_conn=!this.xmlRequest.scriptTag?new _.data.Connection({}):new _.Crx.Connection({});this.m_conn.on("requestexception",this.RequestFailed,this);this.m_conn.on("requestcomplete",this.RequestComplete,this)}c=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";if(this.root&&this.root.__s._i2j){d=this.root.__s._i2j.isLocalSessionInitialized.call(this.root.__s);e=this.root.__s._i2j.getLocalIP.call(this.root.__s);
c=this.root.__s._i2j.getAlias.call(this.root.__s)+(d?"("+e+")":"")+" - "+c}d=this.xmlRequest.params.request;if(/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d))d=_.utils.Base64.decode(d);d=_.util.Format.htmlEncode(d);_2("WebCall [lparam = "+b+"]",d,_2.INFO,c);if(a.repeatLocalSessionRequest)delete a.repeatLocalSessionRequest;else this.Fire("_o1",[_a(this,"_i6"),b]);if(a=this.m_conn.request(this.xmlRequest)){this.xmlRequest.id=a.tId;_._TRACE_REQUEST(this.xmlRequest.id,
(b||"").toString(),c,_._TRACE_REQUEST.PENDING,d)}return _5}return _4},RequestComplete:function(a,b,c){try{this.xmlResponse=b;var d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";if(this.root&&this.root.__s._i2j){var e=this.root.__s._i2j.isLocalSessionInitialized.call(this.root.__s),f=this.root.__s._i2j.getLocalIP.call(this.root.__s);d=this.root.__s._i2j.getAlias.call(this.root.__s)+(e?"("+f+")":"")+" - "+d}a="";if(b.responseText&&b.responseText.length<102400)a=
_.util.Format.htmlEncode(b.responseText);else if(b.responseText&&b.responseText.length)a="Message > 100k has been omitted";_2("WebResp [lparam = "+c.lp+"]",a,_2.INFO,d);_._TRACE_REQUEST(c.id,(c.lp||"").toString(),d,_._TRACE_REQUEST.SUCCESS,a);this.Fire("OnNTReady",[_a(this,"_i6"),c.lp]);this.Fire("OnPending",[_a(this,"_i6"),c.lp]);a="Invalid XML";if(b&&b.responseXML){var g=b.responseXML;if(_.isIE){g=b.responseXML.xml&&b.responseXML.xml.length&&b.responseXML.xml.length>
0?b.responseXML:String(b.responseText).replace('xmlns="urn:netgear:nas:readynasd"',"");if(_.isString(g))if(b.responseXML.parsed===true){b.responseXML.async="false";b.responseXML.loadXML(g);g=b.responseXML}}var h=new _.Xml.document(g),k=h.selectSingleNode("xs:nml/xs:transaction/xs:event");if(k=k?k:h.selectSingleNode("xs:nml/xs:transaction/xs:event-close")){a='Invalid XML response, "xs:nml/xs:transaction/xs:event/*" event body is missing';var j=h.selectNodes("xs:nml/xs:transaction/xs:event/*");
if((j=j?j:h.selectNodes("xs:nml/xs:transaction/*"))&&j.length){h=0;for(var m=j.length;h<m;++h){var n=j[h];switch(n.getNodeName()){case "xs:close":case "xs:add-s":case "xs:set-s":case "xs:delete-s":case "xs:custom-s":case "xs:command-s":case "xs:update-s":case "xs:event-close":case "xs:error-s":if(_a(this,"_i3").loadFromXml(n,c.lp)==_5){a="No error";this.Fire("_o2",[_a(this,"_i6"),c.lp]);this.Fire("_o3",[_5,_a(this,"_i6"),c.lp]);if(h==m-1)return}else{a=
"Failed to parse event ["+n.getNodeName()+"]";_2(a,n.toString(),_2.ERROR,d)}break;default:a="Unknown event type ["+n.getNodeName()+"]";_2(a,n.toString(),_2.ERROR,d)}}}}else{a='Invalid XML response, "xs:nml/xs:transaction/xs:response" node is missing';var p=h.selectSingleNode("xs:nml/xs:transaction/xs:response");if(p){a='Invalid XML response, "xs:nml/xs:transaction/xs:response/@status" attribute is missing';if(p=p.getAttributeText("status")){a="XML operation failed with code: "+p;if((p==
"success"||p=="queued")&&!h.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:result/xs:command-s/message/error")){j=p=="success"?_5:E_PENDING;var o=h.selectNodes("xs:nml/xs:transaction/xs:response/xs:result/*");if(o&&o.length){o=o[0];switch(o.getNodeName()){case "xs:query-s":case "xs:get-s":a="Invalid XML response structure";if(_a(this,"_i3").loadFromXml(o,c.lp)==_5){this.Fire("_o2",[_a(this,"_i6"),c.lp]);this.Fire("_o3",[j,_a(this,"_i6"),c.lp]);
return}break;case "xs:command-s":var q=_1.xa2t(o,"resource");q=q?q=="true":false;a="Invalid XML response structure";if(!q?true:_a(this,"_i3").loadFromXml(o,c.lp)==_5){this.Fire("_o2",[_a(this,"_i6"),c.lp]);this.Fire("_o3",[j,_a(this,"_i6"),c.lp]);return}break;case "xs:delete-s":a="Invalid XML response structure";if(_a(this,"_i3").loadFromXml(o,c.lp)==_5||!o.selectNodes("./*")){this.Fire("_o2",[_a(this,"_i6"),c.lp]);this.Fire("_o3",
[_5,_a(this,"_i6"),c.lp]);return}break;default:this.Fire("_o2",[_a(this,"_i6"),c.lp]);this.Fire("_o3",[j,_a(this,"_i6"),c.lp]);return}}else{if(p=="queued"){var r=h.selectSingleNode("xs:nml/xs:transaction/xs:response/xs:queue");r&&r!=_4&&this.Fire("OnQueue",[r.getAttributeText("id"),_a(this,"_i6"),c.lp])}this.Fire("_o2",[_a(this,"_i6"),c.lp]);this.Fire("_o3",[j,_a(this,"_i6"),c.lp]);return}}else{this.nmlLastError=
_a(new _1.nmlerr,"_in");_a(this.nmlLastError,"_i3").loadFromXml(h,c.lp);if(this.nmlLastError.getErrorCode()){REPORT_ERROR("<b>NML Error                :</b> "+this.nmlLastError.getErrorCode()+"<br/><b>NML  Cause   :</b> "+this.nmlLastError.getErrorCause()+"<br/><b>NML  Details :</b> "+this.nmlLastError.getErrorDetails()+"<br/><b>Caller       :</b> "+d+"<br/><b>User Data    :</b> "+c.lp+"<br/><b>AJAX URL     :</b> "+c.url+"<br/><br/><b>XHTTP Request :</b><br/>"+_.util.Format.htmlEncode(c.params.request)+
"<br/><br/><b>XHTTP X-Requested-With :</b><br/>"+(c.headers?c.headers["X-Requested-With"]:"")+"<br/><b>XHTTP Content-Type :</b><br/>"+(c.headers?c.headers["Content-Type"]:"")+"<br/><br/><b>XHTTP Response:</b><br/>"+_.util.Format.htmlEncode(b.responseText),d);this.Fire("OnFailed",[_a(this,"_i6"),this.nmlLastError,c.lp]);this.Fire("_o3",[_4,_a(this,"_i6"),c.lp])}return}}}}}REPORT_ERROR("<b>XML Error                :</b> "+a+"<br/><b>HTTP Status  :</b> "+b.status+"<br/><b>HTTP Error   :</b> "+
b.statusText+"<br/><b>Caller       :</b> "+d+"<br/><b>User Data    :</b> "+c.lp+"<br/><b>AJAX URL     :</b> "+c.url+"<br/><br/><b>XHTTP Request :</b><br/>"+_.util.Format.htmlEncode(c.params.request)+"<br/><br/><b>XHTTP X-Requested-With :</b><br/>"+(c.headers?c.headers["X-Requested-With"]:"")+"<br/><b>XHTTP Content-Type :</b><br/>"+(c.headers?c.headers["Content-Type"]:"")+"<br/><br/><b>XHTTP Response:</b><br/>"+_.util.Format.htmlEncode(b.responseText),d);this.nmlLastError=null;this.Fire("OnNTFailed",
[a,_a(this,"_i6"),c.lp]);this.Fire("_o3",[_4,_a(this,"_i6"),c.lp]);if(!document.__DEBUG&&!_a(this,"_iv")){var s=_a(_a(this,"_i3").getRoot(),"_i1");s&&s.Fire("OnConnectionLost",[_a(s,"_i6"),_a(this,"_i6"),c.lp])}}finally{this.m_conn=this.xmlResponse=undefined}},RequestFailed:function(a,b,c,d){try{this.xmlResponse=b;var e=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";if(this.root&&this.root.__s._i2j){var f=
this.root.__s._i2j.isLocalSessionInitialized.call(this.root.__s),g=this.root.__s._i2j.getLocalIP.call(this.root.__s);e=this.root.__s._i2j.getAlias.call(this.root.__s)+(f?"("+g+")":"")+" - "+e}REPORT_ERROR("<b>HTTP Error   :</b> "+d+"<br/><b>HTTP Status  :</b> "+b.status+"<br/><b>HTTP Error   :</b> "+b.statusText+"<br/><b>Caller       :</b> "+e+"<br/><b>User Data    :</b> "+c.lp+"<br/><b>AJAX URL     :</b> "+c.url+"<br/><br/><b>HTTP Request :</b><br/>"+_.util.Format.htmlEncode(c.params.request)+
"<br/><br/><b>HTTP Response:</b><br/>"+_.util.Format.htmlEncode(b.responseText),e);this.nmlLastError=null;if(c.isLocalSessionRequest&&(b.status===0||b.status===403||b.status===410)){var h=new String(c.params.request);h.repeatLocalSessionRequest=true;this.sendXml.defer(200,this,[h,c.lp,c.originalUrl,c.type,c.method,c.tm]);this.root&&this.root.__s._i2j&&_a(this.root,"_i2j").onLocalSessionRequestFailed(a,b,c,d)}else{this.Fire("OnNTFailed",[d,_a(this,"_i6"),c.lp]);this.Fire("_o3",
[_4,_a(this,"_i6"),c.lp]);if(!document.__DEBUG&&!_a(this,"_iv")){var k=_a(_a(this,"_i3").getRoot(),"_i1");k&&k.Fire("OnConnectionLost",[_a(k,"_i6"),_a(this,"_i6"),c.lp])}}_._TRACE_REQUEST(c.id,(c.lp||"").toString(),e,_._TRACE_REQUEST.FAIL,_.util.Format.htmlEncode(b.responseText))}finally{this.m_conn=this.xmlResponse=undefined}}});_._2("_1");
_1.reqroot=_._1(_8("_ir"),_1._1,_iq,{constructor:function(){_1.reqroot.superclass.constructor.apply(this,arguments);this.m_timeout=7E4;this.jsonp_url=this.m_url="";this.jsonp_flag=false},_iq:{getTimeOut:function(){return this.m_timeout},putTimeOut:function(a){this.m_timeout=a;return _5},getSourceURL:function(){return this.m_url},putSourceURL:function(a){this.m_url=a;return _5},getJsonpFlag:function(){return this.jsonp_flag},putJsonpFlag:function(a){this.jsonp_flag=
!!a;return _5},getJsonpURL:function(){return this.jsonp_url},putJsonpURL:function(a){this.jsonp_url=a;return _5},getXmlRequest:function(a,b,c,d,e,f){var g,h=_a(this,"_iq");if(a){f=f?f:h.getTimeOut();c=c?c:h.getSourceURL();d=d?d:"BIN";e=e?e:"POST";if(g=h.getJsonpFlag()){a=_.Utils.Base64.encode(a);c=h.getJsonpURL()||c}g={url:c,params:{request:a},method:e,type:d,timeout:f,lp:b,scriptTag:g}}return g}}});_._2("_1");
_1.fsvol=_._1(_9,_1._1,_i11,{constructor:function(){_1.fsvol.superclass.constructor.apply(this,arguments)},_i11:{getTotalSize:function(){return this.x?this.x.getAttributeText("size"):_4},getFreeSize:function(){return this.x?this.x.getAttributeText("free"):_4},getMountPoint:function(){return this.x?this.x.getAttributeText("mount"):_4},getLable:function(){return this.x?this.x.getAttributeText("label"):_4},getDescription:function(){return this.x?this.x.getAttributeText("descr"):
_4},getUUID:function(){return this.x?this.x.getAttributeText("uuid"):_4},getDevice:function(){return this.x?this.x.getAttributeText("device"):_4},getSpeed:function(){return this.x?this.x.getAttributeText("speed"):_4},getLocation:function(){return this.x?this.x.getAttributeText("location"):_4},getDSize:function(){return this.x?this.x.getAttributeText("d_size"):_4},getFSFormat:function(){return this.x?this.x.getAttributeText("fsinfo"):_4},getReadOnly:function(){return this.x?
this.x.getAttributeText("readonly"):_4},getSerial:function(){return this.x?this.x.getAttributeText("serial"):_4},getEncrypt:function(){return this.x?this.x.getAttributeText("encrypt"):_4},getUnlock:function(){return this.x?this.x.getAttributeText("unlock"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.fsaction=_._1(_9,_1._1,_ix,{constructor:function(){_1.fsaction.superclass.constructor.apply(this,arguments)},_ix:{getId:function(){return _1.gp(this.xproptlist,"id")},getMethod:function(){return _1.gp(this.xproptlist,"method")},getStatus:function(){return _1.gp(this.xproptlist,"status")},getElapsedSeconds:function(){return _1.gp(this.xproptlist,"elapsed-seconds")},getRemainingSeconds:function(){return _1.gp(this.xproptlist,"remaining-seconds")},getProgressPercent:function(){return _1.gp(this.xproptlist,
"progress-percent")},getSourceFolder:function(){return _1.gp(this.xproptlist,"from-folder")},getDestinationFolder:function(){return _1.gp(this.xproptlist,"to-folder")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.fsManager=_._1(_8("_iz"),_1._1,_iy,_iw,{constructor:function(){_1.fsManager.superclass.constructor.apply(this,arguments)},make_quoted:function(a){if(_.isString(a)){var b=function(c){if(c=="<")return"&lt;";else if(c==">")return"&gt;";else if(c=='"')return"&quot;";else if(c=="&")return"&amp;"};return a.replace(/[<>"&]/g,function(c){return b(c)})}return a},_iy:{getFsTreeNode:function(a,b,c,d,e){a=this.make_quoted(a);
b=b?b:0;var f=_a(_a(this,"_i3").getRoot(),"_i2");d=d||0;e=e||150;return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSGrabNode" resource-type="FSGrabNode">                    <request id="{0}" method="fs.grab">                        <param name="path">{1}</param>                        <param name="attr">{2}</param>                        <param name="start_index">{3}</param>                        <param name="count">{4}</param>                    </request>                </xs:get>',
_.id(),a,b,d,e)),c,f.getSourceFSURL(),"FORM")},getHomeFsTreeNode:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="" resource-type="Accounts_Based_HomeFolder_Collection">                </xs:get>',_.id())),a)},makeFolder:function(a,b){a=this.make_quoted(a);var c=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSMkdir" resource-type="FSMkdir">                    <request id="{0}" method="fs.mkdir">                        <param name="path">{1}</param>                    </request>                </xs:get>',
_.id(),a),"mkdir"),b,c.getSourceFSURL(),"FORM")},deleteFolder:function(a,b){_.isArray(a)||(a=[a]);var c="";_.each(a,function(d){d=this.make_quoted(d);c+=String.format('<param name="path">{0}</param>',d)},this);a=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSRm" resource-type="FSRm">                    <request id="{0}" method="fs.rm">                        {1}                    </request>                </xs:get>',
_.id(),c),"rm"),b,a.getSourceFSURL(),"FORM")},removeFolder:function(a,b,c){b=this.make_quoted(b);_.isArray(a)||(a=[a]);var d="";_.each(a,function(e){e=this.make_quoted(e);d+=String.format('<param name="file-or-folder">{0}</param>',e)},this);a=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="FSRm" resource-type="FSRm">                    <request id="{0}" method="fs.rm">                        {1}                        <param name="from-folder">{2}</param>                    </request>                </xs:command>',
_.id(),d,b)),c,a.getSourceFSURL(),"FORM")},moveFolder:function(a,b,c,d){b=this.make_quoted(b);c=this.make_quoted(c);_.isArray(a)||(a=[a]);var e="";_.each(a,function(f){f=this.make_quoted(f);e+=String.format('<param name="file-or-folder">{0}</param>',f)},this);a=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="FSMv" resource-type="FSMv">                    <request id="{0}" method="fs.mv">                        {1}                        <param name="from-folder">{2}</param>                        <param name="to-folder">{3}</param>                    </request>                </xs:command>',
_.id(),e,b,c)),d,a.getSourceFSURL(),"FORM")},copyFolder:function(a,b,c,d){b=this.make_quoted(b);c=this.make_quoted(c);_.isArray(a)||(a=[a]);var e="";_.each(a,function(f){f=this.make_quoted(f);e+=String.format('<param name="file-or-folder">{0}</param>',f)},this);a=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSCp" resource-type="FSCp">                    <request id="{0}" method="fs.cp">                        {1}                        <param name="from-folder">{2}</param>                        <param name="to-folder">{3}</param>                    </request>                </xs:get>',
_.id(),e,b,c)),d,a.getSourceFSURL(),"FORM")},renameFolder:function(a,b,c){a=this.make_quoted(a);b=this.make_quoted(b);var d=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSRename" resource-type="FSRename">                    <request id="{0}" method="fs.rename">                        <param name="old-path">{1}</param>                        <param name="new-name">{2}</param>                    </request>                </xs:get>',
_.id(),a,b)),c,d.getSourceFSURL(),"FORM")},abortFSAction:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="BgProcess"/>',_.id(),a)),b)},updateVolumes:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSInfo" resource-type="FSInfo">                    <request id="{0}" method="fs.info">                    </request>                </xs:get>',
_.id()),"volumes"),a,b.getSourceFSURL(),"FORM")},getVolumes:function(){return this.fsvols?this.fsvols.getChildren():_4},FormatUSB:function(a,b,c,d,e,f){if(a){var g=a.getDevice().split("/");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="USB">                        <xs:command_name>Format</xs:command_name>                            <xs:args>                                <xs:arg>                                    <UUID>{2}</UUID>                                    <Descr>{3}</Descr>                                    <Device>{4}</Device>                                    <Speed>{5}</Speed>                                    <Location>{6}</Location>                                    <Size>{7}</Size>                                    <Type>{8}</Type>                                    <Label>{9}</Label>                                    <Encryption>{10}</Encryption>                                    <Email>{11}</Email>                                    <Serial>{12}</Serial>                                </xs:arg>                            </xs:args>                     </xs:command>',
_.id(),a.getMountPoint(),a.getUUID(),a.getDescription(),g[g.length-1],a.getSpeed(),a.getLocation(),a.getTotalSize(),b,c,d,e,a.getSerial())),f)}return _4},updateUSBKeys:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="EncryptUsbKeys"/>',_.id())),a)},getUSBKeys:function(){return this.usbKeys},removeUSBKey:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="EncryptUsbKeys" />',_.id(),
a)),b)},LockUSB:function(a,b){if(a){var c=a.getDevice().split("/");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="USB">                        <xs:command_name>Lock</xs:command_name>                            <xs:args>                                <xs:arg>                                    <UUID>{2}</UUID>                                    <Descr>{3}</Descr>                                    <Device>{4}</Device>                                    <Speed>{5}</Speed>                                    <Location>{6}</Location>                                    <Size>{7}</Size>                                    <Type>{8}</Type>                                    <Label>{9}</Label>                                    <Encryption>1</Encryption>                                </xs:arg>                            </xs:args>                     </xs:command>',
_.id(),a.getMountPoint(),a.getUUID(),a.getDescription(),c[c.length-1],a.getSpeed(),a.getLocation(),a.getTotalSize(),"",a.getLable())),b)}return _4},UnlockUSB:function(a,b,c,d){if(a){var e=a.getDevice().split("/");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="USB">                        <xs:command_name>Unlock</xs:command_name>                            <xs:args>                                <xs:arg>                                    <UUID>{2}</UUID>                                    <Descr>{3}</Descr>                                    <Device>{4}</Device>                                    <Speed>{5}</Speed>                                    <Location>{6}</Location>                                    <Size>{7}</Size>                                    <Type>{8}</Type>                                    <Label>{9}</Label>                                    <Encryption>1</Encryption>                                    <FileName>{10}</FileName>                                    <SaveKey>{12}</SaveKey>                                    <Serial>{11}</Serial>                                </xs:arg>                            </xs:args>                     </xs:command>',
_.id(),a.getMountPoint(),a.getUUID(),a.getDescription(),e[e.length-1],a.getSpeed(),a.getLocation(),a.getTotalSize(),"",a.getLable(),b,a.getSerial(),c)),d)}return _4},updateFilePreview:function(a,b,c,d){a=this.make_quoted(a);var e=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSFilePreview" resource-type="FSFilePreview">                    <request id="{1}" method="fs.preview">                            <param name="path">{2}</param>                            <param name="height">{3}</param>                            <param name="width">{4}</param>                          </request>                </xs:get>',
_.id(),_.id(),a,b,c)),d,e.getSourceFSURL(),"FORM")},getFSSnapView:function(a,b,c,d){a=this.make_quoted(a);b=b?b:0;var e=c.getShareName(),f=c.getVolumeName(),g=c.getName(),h=c.getType();c=c.getCreationDate();var k=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSSnapView" resource-type="FSSnapView">                    <request id="{0}" method="fs.snap">                        <param name="path">/{3}/{4}</param>                         <param name="relativePath">{1}</param>                         <param name="attr">{2}</param>                         <param name="volume">{3}</param>                        <param name="share">{4}</param>                        <param name="snapshotName">{5}</param>                        <param name="snapshotType">{6}</param>                        <param name="snapshotCreatedOn">{7}</param>                        <param name="action">list</param>                    </request>                </xs:get>',
_.id(),a,b,f,e,g,h,c)),d,k.getSourceFSURL(),"FORM")},getFSHFSnapView:function(a,b,c,d){b=this.make_quoted(b);d=d?d:0;var e=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSHFSnapView" resource-type="FSHFSnapView">                    <request id="{0}" method="fs.hfsnap">                        <param name="relativePath">{1}</param>                         <param name="snapshotId">{2}</param>                        <param name="attr">{3}</param>                         <param name="action">list</param>                    </request>                </xs:get>',
_.id(),b,c.getId(),d)),a,e.getSourceFSURL(),"FORM")},UpdateSnapFilePreview:function(a,b,c,d,e,f,g){a=this.make_quoted(a);b=b?b:0;var h=c.getShareName(),k=c.getVolumeName(),j=c.getName(),m=c.getType();c=c.getCreationDate();var n=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSSnapFilePreview" resource-type="FSSnapFilePreview">                    <request id="{0}" method="fs.snap">                        <param name="path">/{3}/{4}</param>                        <param name="relativePath">{1}</param>                        <param name="attr">{2}</param>                        <param name="volume">{3}</param>                        <param name="share">{4}</param>                        <param name="snapshotName">{5}</param>                        <param name="snapshotType">{6}</param>                        <param name="snapshotCreatedOn">{7}</param>                        <param name="action">preview</param>                        <param name="width">{8}</param>                        <param name="height">{9}</param>                        <param name="quality">{10}</param>                    </request>                </xs:get>',
_.id(),a,b,k,h,j,m,c,e,d,f)),g,n.getSourceFSURL(),"FORM")},UpdateHFSnapFilePreview:function(a,b,c,d,e,f,g){b=this.make_quoted(b);d=d?d:0;c=_.isString(c)?c:c.getId();var h=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSHFSnapFilePreview" resource-type="FSHFSnapFilePreview">                    <request id="{0}" method="fs.hfsnap">                        <param name="relativePath">{1}</param>                        <param name="snapshotId">{2}</param>                        <param name="attr">{3}</param>                        <param name="action">preview</param>                        <param name="width">{4}</param>                        <param name="height">{5}</param>                        <param name="quality">{6}</param>                    </request>                </xs:get>',
_.id(),b,c,d,f,e,g)),a,h.getSourceFSURL(),"FORM")},UpdateVersionFilePreview:function(a,b,c,d,e,f,g,h,k,j,m){a=this.make_quoted(a);b=b?b:0;var n=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSSnapFilePreview" resource-type="FSSnapFilePreview">                    <request id="{0}" method="fs.snap">                        <param name="path">/{3}/{4}</param>                         <param name="relativePath">{1}</param>                         <param name="attr">{2}</param>                         <param name="volume">{3}</param>                        <param name="share">{4}</param>                        <param name="snapshotName">{5}</param>                        <param name="snapshotType">{6}</param>                        <param name="snapshotCreatedOn">{7}</param>                        <param name="action">preview</param>                        <param name="width">{8}</param>                        <param name="height">{9}</param>                        <param name="quality">{10}</param>                    </request>                </xs:get>',
_.id(),a,b,c,d,e,f,g,k,h,j)),m,n.getSourceFSURL(),"FORM")},RestoreSnapFSItem:function(a,b,c,d){a=this.make_quoted(a);b=this.make_quoted(b);var e=c.getShareName(),f=c.getVolumeName(),g=c.getName();c=c.getType();_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="fssnap">                    <SnapshotItem>                        <Path>{1}</Path>                        <DestPath>{2}</DestPath>                        <VolumeName>{3}</VolumeName>                        <ShareName>{4}</ShareName>                        <SnapshotName>{5}</SnapshotName>                        <SnapshotType>{6}</SnapshotType>                    </SnapshotItem>                </xs:add>',
_.id(),a,b,f,e,g,c)),d)},RestoreSnapHFFSItem:function(a,b,c,d,e){b=this.make_quoted(b);c=this.make_quoted(c);d=this.make_quoted(d);var f=e.getName();e=e.getType();_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:command  id="{0}" resource-type="hf_fssnap">                    <xs:command_name>Restore</xs:command_name>                    <xs:args>                        <xs:arg>                            <HomeDirectory>{1}</HomeDirectory>                        </xs:arg>                        <xs:arg>                            <RelativePath>{2}</RelativePath>                        </xs:arg>                        <xs:arg>                            <DestPath>{3}</DestPath>                        </xs:arg>                        <xs:arg>                            <SnapshotName>{4}</SnapshotName>                        </xs:arg>                        <xs:arg>                            <SnapshotType>{5}</SnapshotType>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c,d,f,e)),a)},getFSVersions:function(a,b){a=this.make_quoted(a);return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="fssnap" resource-id="{1}">                </xs:get>',_.id(),a)),b,null,null,null,1E9)},RestoreFSVersion:function(a,b,c,d,e,f,g){a=this.make_quoted(a);b=this.make_quoted(b);return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="fssnap">                    <SnapshotItem>                        <Path>{1}</Path>                        <DestPath>{2}</DestPath>                        <VolumeName>{3}</VolumeName>                        <ShareName>{4}</ShareName>                        <SnapshotName>{5}</SnapshotName>                        <SnapshotType>{6}</SnapshotType>                    </SnapshotItem>                </xs:add>',
_.id(),a,b,c,d,e,f)),g)},getHFFSVersions:function(a,b,c){b=this.make_quoted(b);c=this.make_quoted(c);return this.sendXml(_1._2(String.format('<xs:command  id="{0}" resource-type="hf_fssnap">                    <xs:command_name>Versions</xs:command_name>                    <xs:args>                        <xs:arg>                            <HomeDirectory>{1}</HomeDirectory>                        </xs:arg>                        <xs:arg>                            <RelativePath>{2}</RelativePath>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c)),a,null,null,null,1E9)},RestoreHFFSVersion:function(a,b,c,d,e,f){b=this.make_quoted(b);c=this.make_quoted(c);d=this.make_quoted(d);return this.sendXml(_1._2(String.format('<xs:command  id="{0}" resource-type="hf_fssnap">                    <xs:command_name>Restore</xs:command_name>                    <xs:args>                        <xs:arg>                            <HomeDirectory>{1}</HomeDirectory>                        </xs:arg>                        <xs:arg>                            <RelativePath>{2}</RelativePath>                        </xs:arg>                        <xs:arg>                            <DestPath>{3}</DestPath>                        </xs:arg>                        <xs:arg>                            <SnapshotName>{4}</SnapshotName>                        </xs:arg>                        <xs:arg>                            <SnapshotType>{5}</SnapshotType>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c,d,e,f)),a)},search:function(a,b){var c="",d="",e="",f="",g="",h="",k="",j="";b.startIndex=b.startIndex||0;b.count=b.count||150;k=String.format('<xs:page direction="1" start-index="{0}" count="{1}"/>',b.startIndex,b.count);if(b.keyword)c=String.format('<xs:equal property="KeyWord"><xs:value><![CDATA[{0}]]\></xs:value></xs:equal>',b.keyword);if(b.location)d=String.format('<xs:equal property="Location" value="{0}" />',this.make_quoted(b.location));if(b.content)e='<xs:equal property="SearchContent" value="yes" />';
if(b.date&&b.date.type){f=String.format('<xs:equal property="DateType" value="{0}" />',b.date.type);if(b.date.min)f+=String.format('<xs:equal property="DatetimeStart" value="{0}" />',b.date.min);if(b.date.max)f+=String.format('<xs:equal property="DatetimeEnd" value="{0}" />',b.date.max)}if(b.size&&b.size.op&&b.size.value)g=String.format('<xs:{0} property="Size" value="{1}" />',b.size.op,b.size.value);if(b.type)h=String.format('<xs:equal property="FileType" value="{0}" />',b.type);if(b.ext)j=String.format('<xs:equal property="Extension" value="{0}" />',
this.make_quoted(b.ext));return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="FileSearch"><xs:qualifier>'+k+"</xs:qualifier><xs:criterion><xs:and>"+c+d+e+f+g+h+j+"</xs:and></xs:criterion></xs:query>",_.id())),a)}},_iw:{OnEvent:function(a,b,c,d,e){switch(d){case "USB_Device":switch(e){case "xs:add-s":this.Fire("OnFSTUsbPlug",[c]);break;case "xs:delete-s":this.Fire("OnFSTUsbEject",[c]);break}break;case "FSActions":switch(e){case "xs:update-s":a=
b[0].selectNodes("FSAction");var f=[];_.each(a,function(g){var h=_a(new _1.fsaction,"_i3");h.loadFromXml(g)==_5&&f.push(_a(h,"_ix"))},this);this.Fire("OnFSActionsUpdate",[f]);break}break}return _5}},_i3:{Update:function(a){return _a(this,"_iy").updateVolumes(a)},Initialize:function(a){if(a=_a(a,"_i2")){a=_a(a.getWebEventSink(),"_i1");if(!this.Subscribed){this.Subscribed=true;this.SubscribedValue=a.Advise(this)}return this.SubscribedValue}return _4},
loadFromXml:function(a,b){switch(a.getAttributeText("resource-type")){case "FSInfo":b=(new _.Xml.document(a.getNodeText())).selectNodes("fsinfo/volume");if(_.isDefined(b)){a=_a(this,"_i3");a.removeAll();this.fsvols=_a(new _1._1,"_i3");_.each(b,function(f){var g=_a(new _1.fsvol,"_i3");g.loadFromXml(f)==_5&&this.fsvols.appendChild(g)},this);a.appendChild(this.fsvols)}else this.fsvols=_a(new _1._1,"_i3");return _5;case "FSFilePreview":this.Fire("OnFSTPreviewReady",
[a.getNodeText(),b]);return _5;case "FSGrabNode":this.Fire("OnFSTNodeReady",[a,b]);return _5;case "Accounts_Based_HomeFolder_Collection":this.Fire("OnFSTNodeReady",[a,b]);return _5;case "FSSnapView":this.Fire("OnFSSnapViewReady",[a,b]);return _5;case "FSHFSnapView":this.Fire("OnFSHFSnapViewReady",[a,b]);return _5;case "FSSnapFilePreview":this.Fire("OnFSSnapFilePreviewReady",[a.getNodeText(),b]);return _5;case "FSHFSnapFilePreview":this.Fire("OnFSHFSnapFilePreviewReady",[a.getNodeText(),
b]);return _5;case "hf_fssnap":case "fssnap":this.Fire("OnFSVersionsReady",[a,b]);return _5;case "FileSearch":var c=a.selectSingleNode("Search_Result_Collection");if(_.isDefined(c)){a=c.selectNodes("File");c=c.getAttributeText("n_result");var d=[];_.each(a,function(f){d.push({type:f.getAttributeText("type"),path:f.getAttributeText("path"),name:f.getAttributeText("name"),size:f.getAttributeText("size"),date:f.getAttributeText("date")})});this.Fire("OnFSSearchReady",[b,d,c]);return _5}break;
case "EncryptUsbKeys":c=a.selectSingleNode("EncryptUsbKey_Collection");if(_.isDefined(c)){b=c.selectNodes("EncryptUsbKey");var e=[];_.each(b,function(f){e.push({serial:f.getNodeText("Serial"),model:f.getNodeText("Model"),method:f.getNodeText("Encrypt")})});this.usbKeys=e;return _5}break;default:return _5}}}});_._2("_1");
_1.user=_._1(_8("_i31"),_1._1,_i2z,{constructor:function(a){_1.user.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <User id="0" resource-id="0" resource-type="User" is-domain-member="0">                    <User_Id></User_Id>                    <Password></Password>                    <Group_Name></Group_Name>                    <Access></Access>                    <Email_Address></Email_Address>                    <User_Name></User_Name>                </User>')).selectNodes("./*")[0])},
_i2z:{getName:function(){return _1.gp(this.xuser,"User_Name")},putName:function(a){return _1.pp(this.xuser,"User_Name",a)},getId:function(){return _1.gp(this.xuser,"User_Id")},putId:function(a){return _1.pp(this.xuser,"User_Id",a)==_4||this.x.setAttributeText(a,"id")==_4||this.x.setAttributeText(a,"resource-id")==_4?_4:_5},getAccess:function(){return _1.gp(this.xuser,"Access")},putAccess:function(a){return _1.pp(this.xuser,"Access",a)},getShellAccess:function(){return _1.gp(this.xuser,
"ShellAccess")},putShellAccess:function(a){return _1.pp(this.xuser,"ShellAccess",a===true?1:0)},getPassword:function(){return _1.gp(this.xuser,"Password")},putPassword:function(a){return _1.pp(this.xuser,"Password",a)},getIsLocked:function(){return _1.gp(this.xuser,"IsLocked")},putIsLocked:function(a){return _1.pp(this.xuser,"IsLocked",a)},getEmail:function(){return _1.gp(this.xuser,"Email_Address")},putEmail:function(a){return _1.pp(this.xuser,"Email_Address",a)},getGroupName:function(){return _1.gp(this.xuser,
"Group_Name")},putGroupName:function(a){return _1.pp(this.xuser,"Group_Name",a)},getIsDomainMember:function(){return this.x.getAttributeText("is-domain-member")},putIsDomainMember:function(a){return this.x.setAttributeText(a,"is-domain-member")},getHomeDirectory:function(){return _1.gp(this.xuser,"Home_Directory")},getHomeFolder:function(){return this.xuserhf?this.xuserhf:_4},createHomeFolder:function(){if(!this.xuserhf){var a=_a(this,"_i3").getXml(),b=a.selectSingleNode("Home_Folder");
b&&b.removeNode();var c=_a(new _1.userhf,"_i3");a.appendNode(_a(c,"_i3").getXml());b=a.selectSingleNode("Home_Folder");_a(c,"_i3").loadFromXml(b);this.xuserhf=_a(c,"IUserHomeFolder")}return this.xuserhf},getTimeMachine:function(){return this.xusertm?this.xusertm:_4},createTimeMachine:function(){if(!this.xusertm){var a=_a(this,"_i3").getXml(),b=a.selectSingleNode("Private_Time_Machine");b&&b.removeNode();var c=_a(new _1.usertm,
"_i3");a.appendNode(_a(c,"_i3").getXml());b=a.selectSingleNode("Private_Time_Machine");_a(c,"_i3").loadFromXml(b);this.xusertm=_a(c,"IUserTimeMachine")}return this.xusertm},getGroupMembership:function(){return _1.gp(this.xuser,"Group_Membership")},putGroupMembership:function(a){return _1.pp(this.xuser,"Group_Membership",a)},isAdmin:function(){var a=_a(this,"_i2z");if(a.getGroupName()=="admin")return true;var b=_a(_a(this,"_i3").getRoot(),
"_i2");if(b)if(b=b.getSecurityManager())if(b=_a(b.getGroupById("98"),"_i2v"))return!!b.getSecondaryMembersIDs()[a.getId()];return false}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=_a(new _1.xprop(this.x),"_i5");delete this.xuserhf;var b=a.selectSingleNode("Home_Folder");if(b){var c=_a(new _1.userhf(true),"_i3");if(c.loadFromXml(b)==_5)this.xuserhf=_a(c,"IUserHomeFolder")}delete this.xusertm;if(a=a.selectSingleNode("Private_Time_Machine")){b=
_a(new _1.usertm(true),"_i3");if(b.loadFromXml(a)==_5)this.xusertm=_a(b,"IUserTimeMachine")}return _5}}});_._2("_1");
_1.group=_._1(_8("_i2w"),_1._1,_i2v,{constructor:function(a){_1.group.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Group id="0" resource-id="0" resource-type="Group" is-domain-member="0">                    <Group_Id></Group_Id>                    <Secondary_Member_List/>                    <Group_Name></Group_Name>                    <Used>0</Used>                    <Quota>0</Quota>                    <Access></Access>                </Group>')).selectNodes("./*")[0])},_i2v:{getName:function(){return _1.gp(this.xgroup,
"Group_Name")},putName:function(a){return _1.pp(this.xgroup,"Group_Name",a)},getId:function(){return _1.gp(this.xgroup,"Group_Id")},putId:function(a){return _1.pp(this.xgroup,"Group_Id",a)==_4||this.x.setAttributeText(a,"id")==_4||this.x.setAttributeText(a,"resource-id")==_4?_4:_5},getAccess:function(){return _1.gp(this.xgroup,"Access")},putAccess:function(a){return _1.pp(this.xgroup,"Access",a)},getUsed:function(){return _1.gp(this.xgroup,"Used")},putUsed:function(a){return _1.pp(this.xgroup,
"Used",a)},getQuota:function(){return _1.gp(this.xgroup,"Quota")},putQuota:function(a){return _1.pp(this.xgroup,"Quota",a)},getSecondaryMembers:function(){return this.xsms?this.xsms.getChildren():_4},getSecondaryMembersIDs:function(){return this.xsmsids||{}},putSecondaryMembers:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Secondary_Member_List");b.removeNode("User");if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});
else if(_a(a,"_i2z")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4},getIsDomainMember:function(){return this.x.getAttributeText("is-domain-member")},putIsDomainMember:function(a){return this.x.setAttributeText(a,"is-domain-member")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){_a(this,"_i3");this.x=a;this.xgroup=_a(new _1.xprop(this.x),"_i5");
if(a=this.x.selectSingleNode("Secondary_Member_List")){a=this.x.selectNodes("Secondary_Member_List/User");this.xsms=_a(new _1._1,"_i3");this.xsmsids={};_.each(a,function(b){var c=_a(new _1.user(true),"_i3");if(c.loadFromXml(b)==_5){this.xsms.appendChild(c);b=_a(c,"_i2z");this.xsmsids[b.getId()]=b}},this)}return _5}}});_._2("_1");
_1.replisyncdevice=_._1(_8("_i30"),_1._1,IReplisyncDevice,{constructor:function(a){_1.replisyncdevice.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <ReplisyncDevice id="0" resource-id="4MC574EL0003A" resource-type="ReplisyncDevice">                    <Hostname></Hostname>                    <Model></Model>                    <Serial></Serial>                    <IPv4></IPv4>                    <IPv6></IPv6>                </ReplisyncDevice>')).selectNodes("./*")[0])},
IReplisyncDevice:{getHostname:function(){if(this.xhostname)return this.xhostname.getNodeText();return _4},getModel:function(){if(this.xmodel)return this.xmodel.getNodeText();return _4},getSerial:function(){if(this.xserial)return this.xserial.getNodeText();return _4},getIPv4:function(){if(this.xipv4)return this.xipv4.getNodeText();return _4},getIPv6:function(){if(this.xipv6)return this.xipv6.getNodeText();return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;this.xhostname=this.x.selectSingleNode("Hostname");this.xmodel=this.x.selectSingleNode("Model");this.xserial=this.x.selectSingleNode("Serial");this.xipv4=this.x.selectSingleNode("IPv4");this.xipv6=this.x.selectSingleNode("IPv6");return _.isAllDefined(this.xhostname,this.xipv4,this.xipv6)?_5:_4}}});_._2("_1");
_1.share=_._1(_8("_i30"),_1._1,_i38,{constructor:function(a){_1.share.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Share id="0" resource-type="Share">                   <Protocol_List/>\t               <Property_List>                        <Share_Name/>                        <Comment/>\t                    <Path/>                        <Volume_Id/>                        <Folder_Owner>\t                       <Access/>\t                    </Folder_Owner>                        <Non_Owner_Delete/>                        <Folder_Group>    \t                    <Access/>\t                    </Folder_Group>                        <Owner_Rights/>                        <Group_Rights/>                        <Everyone_Rights/>                        <Compression>0</Compression>                        <Logbias/>                        <Dedup>0</Dedup>                        <DedupAutoDisabling>0</DedupAutoDisabling>                        <Quota_MB>0</Quota_MB>                        <RefQuota_MB>0</RefQuota_MB>                        <Reserve_MB>0</Reserve_MB>                        <RefReserve_MB>0</RefReserve_MB>                        <Snapshot_Clones/>                  </Property_List>                </Share>')).selectNodes("./*")[0])},
_i38:{getId:function(){return this.xid},getProtocols:function(){return _a(this,"_i3").getChildren()},getProtocolByName:function(a){return this.hash?this.hash.name[a]:null},getProtocolById:function(a){return this.hash?this.hash.id[a]:null},getName:function(){return _1.gp(this.xproptlist,"Share_Name")},putName:function(a){return _1.pp(this.xproptlist,"Share_Name",a)},getLabel:function(){return _1.gp(this.xproptlist,"PartitionLabel")},putLabel:function(a){return _1.pp(this.xproptlist,
"PartitionLabel",a)},getModelName:function(){return _1.gp(this.xproptlist,"ModelName")},putModelName:function(a){return _1.pp(this.xproptlist,"ModelName",a)},getSN:function(){return _1.gp(this.xproptlist,"Serial")},putSN:function(a){return _1.pp(this.xproptlist,"Serial",a)},getComment:function(){return _1.gp(this.xproptlist,"Comment")},putComment:function(a){return _1.pp(this.xproptlist,"Comment",a)},getVolumeId:function(){return _1.gp(this.xproptlist,"Volume_Id")},putVolumeId:function(a){return _1.pp(this.xproptlist,
"Volume_Id",a)},getNonOwnerDelete:function(){return _1.gp(this.xproptlist,"Non_Owner_Delete")},putNonOwnerDelete:function(a){return _1.pp(this.xproptlist,"Non_Owner_Delete",a)},getPath:function(){return _1.gp(this.xproptlist,"Path")},putPath:function(a){return _1.pp(this.xproptlist,"Path",a)},getEveryoneRights:function(){return _1.gp(this.xproptlist,"Everyone_Rights")},putEveryoneRights:function(a){return _1.pp(this.xproptlist,"Everyone_Rights",a)},getVisibleSnapshot:function(){return _1.gp(this.xproptlist,
"VisibleSnapshot")=="1"?true:false},putVisibleSnapshot:function(a){return _1.pp(this.xproptlist,"VisibleSnapshot",a?"1":"0")},getVisibleSnapFolder:function(){return _1.gp(this.xproptlist,"VisibleSnapFolder")},putVisibleSnapFolder:function(a){return _1.pp(this.xproptlist,"VisibleSnapFolder",a)},getPrevVersionsAccessible:function(){return _1.gp(this.xproptlist,"PrevVersions")=="1"?true:false},putPrevVersionsAccessible:function(a){return _1.pp(this.xproptlist,"PrevVersions",a?"1":"0")},getAvailableMB:function(){return _1.gp(this.xproptlist,
"Available_MB")},getUsedMB:function(){return _1.gp(this.xproptlist,"Used_MB")},getUsedByChildrenMB:function(){return _1.gp(this.xproptlist,"UsedByChildren_MB")},getUsedByDatasetMB:function(){return _1.gp(this.xproptlist,"UsedByDataset_MB")},getUsedByRefReservatonMB:function(){return _1.gp(this.xproptlist,"UsedByRefReservaton_MB")},getUsedBySnapshotsMB:function(){return _1.gp(this.xproptlist,"UsedBySnapshots_MB")},getUsedByBackupsMB:function(){return _1.gp(this.xproptlist,"UsedByBackups_MB")},
getCompressRatio:function(){return _1.gp(this.xproptlist,"CompressRatio")},getCountOfContinuousSnapshots:function(){return parseInt(_1.gp(this.xproptlist,"NrContinuousSnapshots"))},getCountOfManualSnapshots:function(){return parseInt(_1.gp(this.xproptlist,"NrManualSnapshots"))},getCountOfReplicateSnapshots:function(){return parseInt(_1.gp(this.xproptlist,"NrReplicateSnapshots"))},getCountOfCustomSnapshots:function(){return parseInt(_1.gp(this.xproptlist,"NrCustomSnapshots"))},getQuotaMB:function(){return _1.gp(this.xproptlist,
"Quota_MB")},putQuotaMB:function(a){return _1.pp(this.xproptlist,"Quota_MB",a)},getReserveMB:function(){return _1.gp(this.xproptlist,"Reserve_MB")},putReserveMB:function(a){return _1.pp(this.xproptlist,"Reserve_MB",a)},getRefQuotaMB:function(){return _1.gp(this.xproptlist,"RefQuota_MB")},putRefQuotaMB:function(a){return _1.pp(this.xproptlist,"RefQuota_MB",a)},getRefReserveMB:function(){return _1.gp(this.xproptlist,"RefReserve_MB")},putRefReserveMB:function(a){return _1.pp(this.xproptlist,"RefReserve_MB",
a)},getCompression:function(){return _1.gp(this.xproptlist,"Compression")},putCompression:function(a){return _1.pp(this.xproptlist,"Compression",a?"1":"0")},getLogbias:function(){return _1.gp(this.xproptlist,"Logbias")},putLogbias:function(a){return _1.pp(this.xproptlist,"Logbias",a)},getDedup:function(){return _1.gp(this.xproptlist,"Dedup")},putDedup:function(a){return _1.pp(this.xproptlist,"Dedup",a?"1":"0")},getDedupAutoDisabling:function(){return _1.gp(this.xproptlist,"DedupAutoDisabling")},
putDedupAutoDisabling:function(a){return _1.pp(this.xproptlist,"DedupAutoDisabling",a?"1":"0")},getCloneState:function(){if(this.xorigin)return this.xorigin.getAttributeText("Share_Name")?this.xorigin.getAttributeText("Share_Name")+"@"+this.xorigin.getAttributeText("Snapshot_Name"):this.xorigin.getAttributeText("Share_Name");return _4},getFirstSnapshotCreationTime:function(){return parseInt(_1.gp(this.xproptlist,"FirstSnapshotCreatedOn"))},getLastSnapshotCreationTime:function(){return parseInt(_1.gp(this.xproptlist,
"LastSnapshotCreatedOn"))},getEnableProtection:function(){return this.getSnapshotScheduleNode().getAttributeText("enabled")=="1"?true:false},putEnableProtection:function(a){this.getSnapshotScheduleNode().setAttributeText(a?"1":"0","enabled")},getEnableSmartSnapshot:function(){return this.getSnapshotScheduleNode().getAttributeText("smart-snapshot")=="1"?true:false},putEnableSmartSnapshot:function(a){this.getSnapshotScheduleNode().setAttributeText(a?"1":"0","smart-snapshot")},getSnapshotScheduleInterval:function(){for(var a=
{hour:"hourly","day-of-week":"daily","day-of-month":"weekly",month:"monthly"},b=["hour","day-of-week","day-of-month","month"],c,d=0;d<b.length;++d){c=this.getSnapshotScheduleNode().getAttributeText(b[d]);if(c=="*")return a[b[d]]}return""},putSnapshotScheduleInterval:function(a){var b=["minute","hour","day-of-week","day-of-month","month"];a={hourly:"hour",daily:"day-of-week",weekly:"day-of-month",monthly:"month"}[a];for(var c=false,d=0;d<b.length;++d){if(!c&&a==b[d])c=true;this.getSnapshotScheduleNode().setAttributeText(c?
"*":"0",b[d])}},getCustomSnapshotManagement:function(){return _1.gp(this.xproptlist,"CustomSnapshotManagement")=="1"},putCustomSnapshotManagement:function(a){return _1.pp(this.xproptlist,"CustomSnapshotManagement",a?"1":"0")},getNonEmptySnapshots:function(){return _1.gp(this.xproptlist,"NonEmptySnapshots")=="1"},putNonEmptySnapshots:function(a){return _1.pp(this.xproptlist,"NonEmptySnapshots",a?"1":"0")},getCustomSnapshotSchedule:function(){return this.xsched?this.xsched.getConfig():_4},putCustomSnapshotSchedule:function(a){return this.xsched?
this.xsched.putConfig(a):_4},getSnapshotRetentionType:function(){return _1.gp(this.xproptlist,"SnapshotRetention/type")},putSnapshotRetentionType:function(a){return _1.pp(this.xproptlist,"SnapshotRetention/type",a)},getSnapshotRetentionNumber:function(){return _1.gp(this.xproptlist,"SnapshotRetention/number")},putSnapshotRetentionNumber:function(a){return _1.pp(this.xproptlist,"SnapshotRetention/number",a)},getSnapshotRetentionLifeTime:function(){return _1.gp(this.xproptlist,"SnapshotRetention/lifetime")},
putSnapshotRetentionLifeTime:function(a){return _1.pp(this.xproptlist,"SnapshotRetention/lifetime",a)},appendProtocol:function(a){if(a&&this.x){var b=this.x.selectSingleNode("Protocol_List");if(b){a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return _a(this,"_i3").loadFromXml(this.x)}}}return _4},removeProtocol:function(a){if(a&&this.x)if(a=this.x.selectSingleNode("Protocol_List/*[@id='"+a.getId()+"']"))if(a.removeNode())return _a(this,"_i3").loadFromXml(this.x);
return _4},getMigration:function(){return _1.gp(this.xproptlist,"Migration")=="1"},getExportInProgress:function(){return this.xexport?this.xexport.getAttributeText("active")=="1":false},getExportPath:function(){return this.xexport?this.xexport.getNodeText():""},getExportProcessId:function(){return this.xexport?this.xexport.getAttributeText("id"):_4},getImportInProgress:function(){return this.ximport?this.ximport.getAttributeText("active")=="1":false},getImportPath:function(){return this.ximport?
this.ximport.getNodeText():""},getImportProcessId:function(){return this.ximport?this.ximport.getAttributeText("id"):_4},getOwnerRights:function(){if(this.xfowner)return this.xfowner.getNodeText("Access");return _4},putOwnerRights:function(a){if(this.xfowner)return this.xfowner.setNodeText(a,"Access")?_5:_4;return _4},getFolderOwner:function(){if(this.xfowner)return this.xfowner.getNodeText("System_User/User_Name");return _4},getFolderOwnerId:function(){if(this.xfowner)return this.xfowner.getNodeText("System_User/User_Id");
return _4},putFolderOwner:function(a){if(this.xfowner)return this.xfowner.setNodeText(a,"System_User/User_Name")?_5:_4;return _4},putFolderOwnerId:function(a){if(this.xfowner){this.xfowner.setNodeText(a,"System_User/User_Id");this.xfowner.selectSingleNode("System_User").setAttributeText(a,"id");this.xfowner.selectSingleNode("System_User").setAttributeText(a,"resource-id")}return _4},getGroupRights:function(){if(this.xfgroup)return this.xfgroup.getNodeText("Access");return _4},
putGroupRights:function(a){if(this.xfgroup)return this.xfgroup.setNodeText(a,"Access")?_5:_4;return _4},getFolderGroup:function(){if(this.xfgroup)return this.xfgroup.getNodeText("System_Group/Group_Name");return _4},getFolderGroupId:function(){if(this.xfgroup)return this.xfgroup.getNodeText("System_Group/Group_Id");return _4},putFolderGroup:function(a){if(this.xfgroup)return this.xfgroup.setNodeText(a,"System_Group/Group_Name")?_5:_4;return _4},putFolderGroupId:function(a){if(this.xfgroup){this.xfgroup.setNodeText(a,
"System_Group/Group_Id");this.xfgroup.selectSingleNode("System_Group").setAttributeText(a,"id");this.xfgroup.selectSingleNode("System_Group").setAttributeText(a,"resource-id")}return _4},getEveryoneAccessRights:function(){if(this.xfeveryone)return this.xfeveryone.getNodeText("Access");return _4},putEveryoneAccessRights:function(a){if(this.xfeveryone)return this.xfeveryone.setNodeText(a,"Access")?_5:_4;return _4},getInheritAcl:function(){var a=this.x.selectSingleNode("Inherit_Acl");
return a?a.getNodeText():_4},putInheritAcl:function(a){var b=this.x.selectSingleNode("Inherit_Acl");if(!b)return _4;b.setNodeText(a);if(a=="0"&&!this.xdefacl)if(this.xacl){a=_a(this.xacl,"_i3").clone();_a(this,"_i3").getXml().appendNode("Default_Acl_List");b=_a(this,"_i3").getXml().selectSingleNode("Default_Acl_List").appendNode(a.getXml());a.loadFromXml(b);this.xdefacl=_a(a,"IShareAclList")}},getAccessAclList:function(){return this.xacl?this.xacl:
_4},getDefaultAclList:function(){return this.xdefacl?this.xdefacl:_4},getClones:function(){return this.xclones?this.xclones.getChildren():_4},getUserQuotas:function(){return this.xuquotas?this.xuquotas.getChildren():_4},appendUserQuota:function(a){if(a&&this.x){var b=this.x.selectSingleNode("Property_List/UserQuota");if(!b){var c=this.x.selectSingleNode("Property_List");if(c)b=c.appendNode("UserQuota")}if(b){a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);
return _a(this,"_i3").loadFromXml(this.x)}}}return _4},removeUserQuota:function(a){if(a&&this.x){a.__s.x.removeNode();return _a(this,"_i3").loadFromXml(this.x)}return _4},getGroupQuotas:function(){return this.xgquotas?this.xgquotas.getChildren():_4},appendGroupQuota:function(a){if(a&&this.x){var b=this.x.selectSingleNode("Property_List/GroupQuota");if(!b){var c=this.x.selectSingleNode("Property_List");if(c)b=c.appendNode("GroupQuota")}if(b){a=_a(a,"_i3");
if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return _a(this,"_i3").loadFromXml(this.x)}}}return _4},removeGroupQuota:function(a){if(a&&this.x){a.__s.x.removeNode();return _a(this,"_i3").loadFromXml(this.x)}return _4},getUseReplicate:function(){return _1.gp(_a(new _1.xprop(this.x),"_i5"),"Use_List/Use/Replicate")},getReplicateJobId:function(){return _1.gp(_a(new _1.xprop(this.x),"_i5"),"Use_List/Use/Replicate/JobId")},getReplicateJobName:function(){return _1.gp(_a(new _1.xprop(this.x),
"_i5"),"Use_List/Use/Replicate/JobName")},getIsReplicateSource:function(){var a=_1.gp(_a(new _1.xprop(this.x),"_i5"),"Use_List/Use/Replicate/Source");return a=="true"||a==_4},getUseReadyRecover:function(){return _1.gp(_a(new _1.xprop(this.x),"_i5"),"Use_List/Use/ReadyRecover")},getSync:function(){return _1.gp(this.xproptlist,"Sync")},putSync:function(a){return _1.pp(this.xproptlist,"Sync",a)},getBitRotProtection:function(){return _1.gp(this.xproptlist,
"BitRotProtection")},putBitRotProtection:function(a){return _1.pp(this.xproptlist,"BitRotProtection",a)},getAutoDefrag:function(){return _1.gp(this.xproptlist,"AutoDefrag")},putAutoDefrag:function(a){return _1.pp(this.xproptlist,"AutoDefrag",a)},getType:function(){return _1.gp(this.xproptlist,"Type")},putType:function(a){return _1.pp(this.xproptlist,"Type",a)},isReadyDRShare:function(){return _a(this,"_i38").getType()=="readonly"},getIndexed:function(){return _1.gp(this.xproptlist,
"Indexed")=="1"},putIndexed:function(a){return _1.pp(this.xproptlist,"Indexed",a?"1":"0")},getAuditEnabled:function(){return _1.gp(this.xproptlist,"Audit_Rules_Enabled")=="1"},putAuditEnabled:function(a){return _1.pp(this.xproptlist,"Audit_Rules_Enabled",a?"1":"0")}},getSnapshotScheduleNode:function(){if(!this.xsnapshdlr&&this.xproptlist)this.xsnapshdlr=this.xproptlist.getXml().appendNode(new _.Xml.document('<Snapshot_Schedule id="0" resource-id="0" resource-type="snapshot-schedule" enabled="1" minute="0" hour="0" day-of-month="*" day-of-week="0" month="0" purge-manual-snapshot="0" smart-snapshot="1"/>'));
return this.xsnapshdlr},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xid=this.x.getAttributeText("id");this.xfowner=this.x.selectSingleNode("Folder_Owner");this.xfgroup=this.x.selectSingleNode("Folder_Group");this.xfeveryone=this.x.selectSingleNode("Folder_Everyone");this.xprotlist=this.x.selectNodes("Protocol_List/*");if(this.xproptlist=this.x.selectSingleNode("Property_List")){this.xsnapshdlr=this.xproptlist.selectSingleNode("Snapshot_Schedule");this.xorigin=
this.xproptlist.selectSingleNode("Origin");this.xexport=this.xproptlist.selectSingleNode("ExportDatasetTo");this.ximport=this.xproptlist.selectSingleNode("ImportDatasetFrom")}var b=this.x.selectSingleNode("Access_Acl_List/Acl_List");delete this.xacl;if(b){var c=_a(new _1.sacllist,"_i3");if(c.loadFromXml(b)==_5)this.xacl=_a(c,"IShareAclList")}b=this.x.selectSingleNode("Default_Acl_List/Acl_List");delete this.xdefacl;if(b){c=_a(new _1.sacllist,"_i3");if(c.loadFromXml(b)==
_5)this.xdefacl=_a(c,"IShareAclList")}b=document.webshare?_.isAllDefined(this.xprotlist,this.xproptlist):_.isAllDefined(this.xfowner,this.xfgroup,this.xfeveryone,this.xprotlist,this.xproptlist);this.xproptlist=_a(new _1.xprop(this.xproptlist),"_i5");if(this.xprotlist){var d=_a(this,"_i3");d.removeAll();this.hash={};this.hash.id=[];this.hash.name=[];_.each(this.xprotlist,function(e){var f=_a(new _1.sproto,"_i3");d.appendChild(f);if(f.loadFromXml(e)!=
_5)d.removeChild(f);else{e=_a(f,"_i3c");this.hash.id[e.getProtoId()]=e;this.hash.name[e.getName()]=e;this.hash.id["*"]=e;this.hash.name["*"]=e}},this)}if(c=a.selectNodes("Property_List/Snapshot_Clones/Clone")){d=_a(this,"_i3");this.xclones=_a(new _1._1,"_i3");_.each(c,function(e){var f=_a(new _1.sclone,"_i3");f.loadFromXml(e)==_5&&this.xclones.appendChild(f)},this)}this.xuquotas=_a(new _1._1,"_i3");if(c=a.selectNodes("Property_List/UserQuota/Quota")){d=
_a(this,"_i3");_.each(c,function(e){var f=_a(new _1.suquota,"_i3");f.loadFromXml(e)==_5&&this.xuquotas.appendChild(f)},this)}this.xgquotas=_a(new _1._1,"_i3");if(a=a.selectNodes("Property_List/GroupQuota/Quota")){d=_a(this,"_i3");_.each(a,function(e){var f=_a(new _1.sgquota,"_i3");f.loadFromXml(e)==_5&&this.xgquotas.appendChild(f)},this)}a=this.x.selectSingleNode("Property_List/Custom_Snapshot_Schedule");delete this.xsched;
if(a){c=_a(new _1.snapsched,"_i3");if(c.loadFromXml(a)==_5)this.xsched=_a(c,"ISnapshotSchedule")}return b?_5:_4}}});_._2("_1");
_1.shareManager=_._1(_8("_i3b"),_1._1,_i3a,{constructor:function(){_1.shareManager.superclass.constructor.apply(this,arguments)},_i3a:{getShares:function(){return this.xshares?this.xshares.getChildren():_4},getShareByName:function(a){return this.xshares?this.xshares.hash[a]:_4},updateShares:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Shares" resource-type="Share_Collection"/>',_.id())),
a)},getLanDevices:function(){return this.xlandevices?this.xlandevices.getChildren():_4},getRemoteDevices:function(){return this.xremotedevices?this.xremotedevices.getChildren():_4},getLanDeviceByName:function(a){return this.xlandevices?this.xlandevices.hash[a]:_4},updateLanDevices:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="ReplisyncDevice_Collection"/>',_.id())),a)},updateConnectionWithLanDevices:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>Connect</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host><![CDATA[{1}]]\></Host>                            <Username><![CDATA[{2}]]\></Username>                            <Password><![CDATA[{3}]]\></Password>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),a,b,c)),d)},updateRemoteDevices:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="0" resource-type="BackupJob_Resource">                    <xs:command_name>BrowseHosts</xs:command_name>                    <xs:args>                        <xs:arg>                            <BackupJob_Resource>                                <Share_Name_Or_Protocol>{1}</Share_Name_Or_Protocol>                            </BackupJob_Resource>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b)),a)},updateWebShare:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="MyShares" resource-type="MyShare_Collection"/>',_.id())),a)},commitShares:function(a,b){var c="";if(b&&b.length){for(var d=0;d<b.length;++d)c+=_a(b[d],"_i3").getXml().toString();if(c)c="<Share_Collection>"+c+"</Share_Collection>"}else if(this.x&&this.x.selectSingleNode("Share_Collection"))c=this.x.selectSingleNode("./Share_Collection").toString();if(c)return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Shares" resource-type="Share_Collection">{1}</xs:set>',
_.id(),c)),a);return S_FALSE},commitShare:function(a,b){if(a=_a(a,"_i38")){a=_a(a,"_i3").clone().getXml();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Shares" resource-type="Share_Collection"><Share_Collection>{1}</Share_Collection></xs:set>',_.id(),a.toString())),b)}return E_INVALIDARG},commitShareAcl:function(a,b){if(a=_a(a,"_i38")){var c=_a(a.getAccessAclList(),"_i3"),d=_a(a.getDefaultAclList(),"_i3");
return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ChangeAcl</xs:command_name>                        <xs:args>                            <xs:arg><User resource-id="{2}" resource-type="System_User"/></xs:arg>                            <xs:arg><Group resource-id="{3}" resource-type="System_Group"/></xs:arg>                            <xs:arg><Flags recursive="0"/></xs:arg>                            <xs:arg><Inherit_Acl>{4}</Inherit_Acl></xs:arg>                            <xs:arg><Access_Acl_List>{5}</Access_Acl_List></xs:arg>                            {6}                            <xs:arg><Non_Owner_Delete>{7}</Non_Owner_Delete></xs:arg>                        </xs:args>                    </xs:command>',
_.id(),a.getId(),a.getFolderOwnerId(),a.getFolderGroupId(),a.getInheritAcl(),c?c.getXml().toString():"",d&&a.getInheritAcl()=="0"?"<xs:arg><Default_Acl_List>"+d.getXml().toString()+"</Default_Acl_List></xs:arg>":"",a.getNonOwnerDelete())),b)}return E_INVALIDARG},addShare:function(a,b,c,d,e){var f=_a(a,"_i38");if(f){a=_a(f,"_i3");return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="Share" c-resource-id="Shares" c-resource-type="Share_Collection">                        <Share_Collection>                        {1}                        </Share_Collection>                    </xs:add>',
_.id(),a.getXml().toString())),e)}else if(a&&a.length){d=d?d:0;return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="Share" c-resource-id="Shares" c-resource-type="Share_Collection">                        <Share_Collection>                        <Share id="0" resource-type="Share">                            <Protocol_List>                                <cifs id="cifs.0" resource-type="cifs">                                    <Host_List/>                                    <User_List/>                                    <Group_List/>                                    <Property_List>                                    </Property_List>                                </cifs>                            </Protocol_List>                            <Property_List>                                <Share_Name><![CDATA[{1}]]\></Share_Name>                                <Comment><![CDATA[{2}]]\></Comment>                                <Path><![CDATA[{3}]]\></Path>                                <Volume_Id>{4}</Volume_Id>                            </Property_List>                        </Share>                        </Share_Collection>                    </xs:add>',
_.id(),a,b?b:"",c,d)),e)}return E_INVALIDARG},removeShare:function(a,b){if(_a(a,"_i38"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Share" c-resource-id="Shares" c-resource-type="Share_Collection"/>',_.id(),a.getId())),b);return E_INVALIDARG},migrateShare:function(a,b,c){if(_a(a,"_i38"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>Migrate</xs:command_name>                        <xs:args>                            <xs:arg>                                <Volume resource-id="{2}" resource-type="Volume"/>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),a.getVolumeId()+"/"+a.getName(),b)),c);return E_INVALIDARG},ReimportSnapshots:function(a,b,c){b=_.isString(b)?b:b.getVolumeName();_.isString(c)||(c=_a(c,"_i38")?_a(c,"_i38").getName():_a(c,"_i1j")?_a(c,"_i1j").getName():"");if(b&&c)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ReImport</xs:command_name>                    </xs:command>',_.id(),b+
"/"+c)),a);return E_INVALIDARG},updateLUNS:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="lun_collection" />',_.id())),a)},getLUNS:function(){return this.xluns?this.xluns.getChildren():_4},getLunByName:function(a){return this.xluns?this.xluns.hash[a]:_4},appendLUN:function(a,b){if(_a(a,"_i1j")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="lun">                       {1}                    </xs:add>',
_.id(),a.getXml().toString())),b)}return _4},removeLUN:function(a,b){if(_a(a,"_i1j")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-type="lun">                       {1}                    </xs:delete>',_.id(),a.getXml().toString())),b)}return _4},commitLUN:function(a,b){if(_a(a,"_i1j")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="lun">                       {1}                    </xs:set>',
_.id(),a.getXml().toString())),b)}return _4},migrateLUN:function(a,b,c){if(_a(a,"_i1j"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>Migrate</xs:command_name>                        <xs:args>                            <xs:arg>                                <Volume resource-id="{2}" resource-type="Volume"/>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),a.getVolumeId()+"/"+a.getName(),b)),c);return E_INVALIDARG},exportToNfs:function(a,b,c,d,e,f,g){var h,k,j;if(h=_a(b,"_i1j")){k=h.getVolumeId();j=h.getName()}else if(b=_a(b,"_i38")){k=b.getVolumeId();j=b.getName()}if(k&&j)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ExportToNfs</xs:command_name>                        <xs:args>                            <xs:arg>                                <NfsPath host="{2}" exportpoint="{3}" overwrite="{5}" forceudp="{6}">{4}</NfsPath>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),k+"/"+j,c,d,e,f?"1":"0",g?"1":"0")),a);return E_INVALIDARG},importFromNfs:function(a,b,c,d,e,f,g){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ImportFromNfs</xs:command_name>                        <xs:args>                            <xs:arg>                                <NfsPath host="{2}" exportpoint="{3}" forceudp="{5}">{4}</NfsPath>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b+"/"+c,d,e,f,g?"1":"0")),a)},ChangePermissions:function(a,b){if(a=_a(a,"_i38"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>ChangePermission</xs:command_name>                     </xs:command>',_.id(),a.getId())),b);return E_INVALIDARG},UnUsedShareForReplicate:function(a,b){if(a=_a(a,"_i38"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Share">                        <xs:command_name>RTerm</xs:command_name>                     </xs:command>',
_.id(),a.getId())),b);return E_INVALIDARG},UnUsedLUNForReplicate:function(a,b){if(a=_a(a,"_i1j"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="lun">                        <xs:command_name>RTerm</xs:command_name>                     </xs:command>',_.id(),a.getId())),b);return E_INVALIDARG},deleteBgProcess:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="BgProcess"/>',
_.id(),a)),b)},UpdateDefaultSettings:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DefaultSettings" resource-type="DefaultSettings"/>',_.id())),a)},getDefaultSettingBitRotProtection:function(){return _1.gp(this.xdefsettings,"BitRotProtection")},getDefaultSettingBitRotProtectionPerformanceWarning:function(){return _1.gp(this.xdefsettings,"BitRotProtectionPerformanceWarning")},getDefaultSettingContinuousProtection:function(){return _1.gp(this.xdefsettings,
"ContinuousProtection")},getDefaultSettingContinuousProtectionFrequency:function(){return _1.gp(this.xdefsettings,"ContinuousProtectionFrequency")},getSharesReadyDR:function(){var a=_a(this,"_i3a").getShares(),b=[];a!=_4&&_.each(a,function(c){_a(c,"_i38").isReadyDRShare()&&b.push(c)});return b},addShareReadyDR:function(a,b,c){var d=_a(new _1.share,"_i38"),e=_a(new _1.sproto("cifs"),"_i3c"),f=_a(new _1.sproto("ftp"),"_i3c");
d.putName(b);d.putVolumeId(c);d.putPath("/"+c+"/"+b);d.putType("readonly");d.putVisibleSnapshot(true);e.putAvailable(true);e.putDefaultAccess("ReadOnly");e.putEnableOplocks(0);f.putAvailable(false);f.putDefaultAccess("ReadOnly");d.appendProtocol(e);d.appendProtocol(f);return _a(this,"_i3a").addShare(d,null,null,null,a)},updateReadyDRDestShares:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SimpleReadyDRDestShare" resource-type="Share_Collection"/>',
_.id())),a)},getReadyDRDestShares:function(){return this.xRdrDestShares?this.xRdrDestShares.getChildren():_4},getReplisyncJobRtnCode:function(){return this.ReplisyncJobRtnCode?this.ReplisyncJobRtnCode:_4},getReplisyncJobRtnCause:function(){return this.ReplisyncJobRtnCause?this.ReplisyncJobRtnCause:_4}},_iw:{OnEvent:function(a,b,c,d,e){if(e=="xs:command-s"){d=(d=a.selectSingleNode("command-name")||a.selectSingleNode("xs:command-name"))?d.getNodeText():"";switch(d){case "ChangePermission":this.Fire("OnSHChangePermission",
[c,a]);break;case "ChangeAcl":this.Fire("OnSHChangeAcl",[c]);break;case "ExportToNfs":this.Fire("OnSHExported",[c]);break;case "ImportFromNfs":this.Fire("OnSHImported",[c]);break;default:a=b[1]?b[1].getNodeText():undefined;this.Fire("OnSHMigrated",[c,a]);break}}return _5}},_i3:{Update:function(a){return _a(this,"_i3a").updateShares(a)},Commit:function(a){return _a(this,"_i3a").commitShares(a)},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),
"_i1").Advise(this,"Share");return _4},getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.getAttributeText("resource-id")=="SimpleReadyDRDestShare"){var c=a.selectNodes("Share_Collection/Share");this.xRdrDestShares&&b.removeChild(this.xRdrDestShares);this.xRdrDestShares=_a(new _1._1,"_i3");b.appendChild(this.xRdrDestShares);_.each(c,function(g){var h=_a(new _1.simpleshare(true),"_i3");h.loadFromXml(g)==_5&&
this.xRdrDestShares.appendChild(h)},this);return _5}else if(a.getAttributeText("resource-type")=="ReplisyncDevice_Collection"){if(a.selectSingleNode("ReplisyncDevice_Collection")){this.x=a;a=a.selectNodes("ReplisyncDevice_Collection/ReplisyncDevice");this.xlandevices&&b.removeChild(this.xlandevices);this.xlandevices=_a(new _1._1,"_i3");this.xlandevices.hash=[];b.appendChild(this.xlandevices);_.each(a,function(g){var h=_a(new _1.replisyncdevice(true),"_i3");if(h.loadFromXml(g)==
_5){this.xlandevices.appendChild(h);g=_a(h,"IReplisyncDevice");this.xlandevices.hash[g.getHostname()]=g}},this);return _5}}else if(a.getAttributeText("resource-type")=="BackupJob_Resource"){if(a.selectSingleNode("BackupJob_Resource")){this.x=a;a=a.selectNodes("BackupJob_Resource/BackupDevice");this.xremotedevices&&b.removeChild(this.xremotedevices);this.xremotedevices=_a(new _1._1,"_i3");this.xremotedevices.hash=[];b.appendChild(this.xremotedevices);_.each(a,function(g){var h=
_a(new _1.replisyncdevice(true),"_i3");if(h.loadFromXml(g)==_5){this.xremotedevices.appendChild(h);g=_a(h,"IReplisyncDevice");this.xremotedevices.hash[g.getHostname()]=g}},this);return _5}}else if(a.getAttributeText("resource-type")=="ReplisyncJob"){if(a.selectSingleNode("RemoteResponseDetails")){this.x=a;this.ReplisyncJobRtnCode=a.selectSingleNode("RemoteResponseDetails/ReturnCode")||a.selectSingleNode("RemoteResponseDetails/ReturnCode").getNodeText();this.ReplisyncJobRtnCause=
a.selectSingleNode("RemoteResponseDetails/Cause")||a.selectSingleNode("RemoteResponseDetails/Cause").getNodeText();return _5}return _4}else{c=a.selectSingleNode("Share_Collection");var d=a.selectSingleNode("MyShare_Collection"),e=a.selectSingleNode("LUN_Collection"),f=a.selectSingleNode("DefaultSettings");if(c||d){this.x=a;c=(c=a.selectNodes("Share_Collection/Share"))?c:a.selectNodes("MyShare_Collection/Share");this.xshares&&b.removeChild(this.xshares);this.xshares=_a(new _1._1,"_i3");
this.xshares.hash=[];b.appendChild(this.xshares);_.each(c,function(g){var h=_a(new _1.share(true),"_i3");if(h.loadFromXml(g)==_5){this.xshares.appendChild(h);g=_a(h,"_i38");this.xshares.hash[g.getName()]=g}},this);return _5}else if(e){this.xl=a;a=a.selectNodes("LUN_Collection/LUN");this.xluns&&b.removeChild(this.xluns);this.xluns=_a(new _1._1,"_i3");this.xluns.hash=[];_.each(a,function(g){var h=_a(new _1.lun(true),"_i3");if(h.loadFromXml(g)==
_5){this.xluns.appendChild(h);g=_a(h,"_i1j");this.xluns.hash[g.getName()]=g}},this);b.appendChild(this.xluns);return _5}else if(f){this.xdefsettings=_a(new _1.xprop(f),"_i5");return _5}}return _4}}});_._2("_1");
_1.devState=_._1(_9,_1._1,_it,{constructor:function(){_1.devState.superclass.constructor.apply(this,arguments)},_it:{getFirstLaunchState:function(){return _1.gp(this.xstate,"First_Launch")=="1"},putFirstLaunchState:function(a){return _1.pp(this.xstate,"First_Launch",a)},getDropboxV1Flag:function(){return _1.gp(this.xstate,"Dropbox_V1_Flag")=="1"}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xstate=_a(new _1.xprop(this.x),
"_i5");return _5}}});_._2("_1");
_1.device=_._1(_1.CLSIDS.MarvelDevice,_8("_is"),_1.reqroot,_i2,_i4,_iw,{constructor:function(){_1.device.superclass.constructor.apply(this,arguments);this.m_url=document.dbbroker;this.m_fsurl=document.fsbroker;this.m_phurl=document.phbroker;this.m_rcurl=document.recovery},_iw:{OnEvent:function(a,b){if(b&&b[0]){a=b[0].getNodeText();if(a=="Halt")this.Fire("OnDeviceHalt");else a=="Reboot"&&this.Fire("OnDeviceReboot")}return _5}},
_i2:{startWebEventSink:function(){if(!this.active_events){this.active_events=true;if(!this.m_weid){var a=_a(this,"_i2").getWebEventSink();_a(a,"_i1").Advise(this,"Device");this.m_weid=a.Listen.defer(1E3,a)}}return _5},stopWebEventSink:function(){this.active_events=false;var a=_a(this,"_i2").getWebEventSink();_a(a,"_i1").Unadvise(this,"Device");a=a.StopListen();clearTimeout(this.m_weid);this.m_weid=undefined;return a},isStartedWebEventSink:function(){return this.active_events},
putSourceFSURL:function(a){this.m_fsurl=a;return _5},getSourceFSURL:function(){return this.m_fsurl},putSourcePHURL:function(a){this.m_phurl=a;return _5},getSourcePHURL:function(){return this.m_phurl},putSourceRCVURL:function(a){this.m_rcurl=a;return _5},getSourceRCVURL:function(){return this.m_rcurl},getWebEventSink:function(){return this._wevnt||(this._wevnt=_a(this,"_i3").appendChild(_a(new _1.wevnt,"_iv")))},getShareManager:function(){return this._mngr_share||
(this._mngr_share=_a(this,"_i3").appendChild(_a(new _1.shareManager,"_i3a")))},getSecurityManager:function(){return this._mngr_security||(this._mngr_security=_a(this,"_i3").appendChild(_a(new _1.securityManager,"_i2x")))},getSSHKeyManager:function(){return this._mngr_ssh||(this._mngr_ssh=_a(this,"_i3").appendChild(_a(new _1.sshManager,"ISSHManager")))},getFSManager:function(){return this._mngr_fs||(this._mngr_fs=_a(this,
"_i3").appendChild(_a(new _1.fsManager,"_iy")))},getNetworkManager:function(){return this._mngr_nt||(this._mngr_nt=_a(this,"_i3").appendChild(_a(new _1.ntManager,"_i25")))},getHealthManager:function(){return this._mngr_ht||(this._mngr_ht=_a(this,"_i3").appendChild(_a(new _1.htManager,"_i1e")))},getLogManager:function(){return this._mngr_lg||(this._mngr_lg=_a(this,"_i3").appendChild(_a(new _1.lgManager,
"_i1w")))},getSystemManager:function(){return this._mngr_sys||(this._mngr_sys=_a(this,"_i3").appendChild(_a(new _1.sysManager,"_i44")))},getBackupManager:function(){return this._mngr_bck||(this._mngr_bck=_a(this,"_i3").appendChild(_a(new _1.bckManager,"_ig")))},getCloudStorageAmazonS3Manager:function(){return this._mngr_csas3||(this._mngr_csas3=_a(this,"_i3").appendChild(_a(new _1.cloudstorage.amazons3,"ICloudStorageManager")))},
getCloudStorageWasabiManager:function(){return this._mngr_cswasabi||(this._mngr_cswasabi=_a(this,"_i3").appendChild(_a(new _1.cloudstorage.wasabi,"ICloudStorageManager")))},getCloudStorageAzureManager:function(){return this._mngr_csazure||(this._mngr_csazure=_a(this,"_i3").appendChild(_a(new _1.cloudstorage.azure,"ICloudStorageManager")))},getCloudStorageGoogleDriveManager:function(){return this._mngr_csgd||(this._mngr_csgd=_a(this,"_i3").appendChild(_a(new _1.cloudstorage.googledrive,
"ICloudStorageManager")))},getCloudStorageOneDriveManager:function(){return this._mngr_csod||(this._mngr_csod=_a(this,"_i3").appendChild(_a(new _1.cloudstorage.onedrive,"ICloudStorageManager")))},getCloudStorageAmazonDriveManager:function(){return this._mngr_csad||(this._mngr_csad=_a(this,"_i3").appendChild(_a(new _1.cloudstorage.amazondrive,"ICloudStorageManager")))},getCloudStorageDropboxManager:function(){return this._mngr_csdb||(this._mngr_csdb=_a(this,
"_i3").appendChild(_a(new _1.cloudstorage.dropbox,"ICloudStorageManager")))},getAddonsManager:function(){return this._mngr_add||(this._mngr_add=_a(this,"_i3").appendChild(_a(new _1.addManager,"_i8")))},getAlbumManager:function(){return this._mngr_album||(this._mngr_album=_a(this,"_i3").appendChild(_a(new _1.albumManager,"_i2d")))},getXRaidManager:function(){return this._mngr_xr||(this._mngr_xr=_a(this,"_i3").appendChild(_a(new _1.xrManager,
"_i40")))},getSystemServiceManager:function(){return this._mngr_service||(this._mngr_service=_a(this,"_i3").appendChild(_a(new _1.serviceManager,"_i34")))},getSmartLocalAppManager:function(){return this._mngr_smartlocalapp||(this._mngr_smartlocalapp=_a(this,"_i3").appendChild(_a(new _1.smartlocalappManager,"_i3n")))},getP2PManager:function(){return this._mngr_p2p||(this._mngr_p2p=_a(this,"_i3").appendChild(_a(new _1.p2pManager,
"_i29")))},updateDeviceState:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DeviceState" resource-type="DeviceState"/>',_.id())),a)},commitDeviceState:function(a){if(this.deviceState){var b=this.deviceState.getXml().toString();return this.sendXml(_1._2(String.format('<xs:update id="{0}" resource-id="DeviceState" resource-type="DeviceState">{1}</xs:update>',_.id(),b)),a)}return _4},getDeviceState:function(){return this.deviceState?
this.deviceState:_4},shutdown:function(a,b){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown halt="true" fsck="{1}"/>                </xs:custom>',_.id(),a)),b)},reboot:function(a,b){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown halt="false" fsck="{1}"/>                </xs:custom>',
_.id(),a)),b)},register:function(a,b){if(a&&_a(a,"_i43")){a=String.format("https://my.netgear.com/myNETGEAR/register_readynas.asp?product={0}&serial={1}&firmware={2}&memory={3}&mac_address={4}&raid_level={5}&hdd_vendor={6}&hdd_model={7}&hdd_serial={8}&hdd_firmware={9}",a.getModel(),a.getSerial(),a.getFirmwareName()+" "+a.getFirmwareVersion(),a.getMemorySize(),a.getMACAddress(),a.getRaidLevel(),a.getHDDVendor(),a.getHDDModel(),a.getHDDSerial(),a.getHDDFirmware());if(b)window.open(a);else document.location=
a;_a(this,"_i2").registerSystem();return _5}return _4},registerSystem:function(){_a(_7(_._3.System.Frame),"IExtNative").getNative().alarmbar.hide();return this.sendXml(_1._2(String.format('<xs:update id="{0}" resource-type="DeviceState" c-resource-id="DeviceState"><DeviceState><Registration>1</Registration></DeviceState></xs:update>',_.id())),"registered_system")},installFirmwareAftreUpload:function(a,b,c){return this.sendXml(_1._2(String.format('<xs:update resource-id="Firmware" resource-type="FirmwareImage">                        <FirmwareImage resource-id="Firmware" resource-type="FirmwareImage">                        <Location>local</Location>                         <Resource>{0}</Resource>                        </FirmwareImage>                  </xs:update>',
a)),c,undefined,undefined,undefined,b)},ejectVolume:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>eject</xs:command_name>                    <xs:args/>                 </xs:command>',_.id(),a)),b)},shutdownEDADevice:function(a,b){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="EDA_Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown eda="{1}"/>                </xs:custom>',
_.id(),a)),b)}},_i3:{Update:function(a){return _a(this,"_i2").updateDeviceState(a)},Commit:function(a){return _a(this,"_i2").commitDeviceState(a)},loadFromXml:function(a){var b=_a(this,"_i3"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a?a[0]:undefined;switch(c){case "DeviceState":this.deviceState=_a(new _1.devState,"_i3");if(this.deviceState.loadFromXml(a)==_5){b.removeChild(b.getChildByTrait("_it"));
b.appendChild(this.deviceState);return _5}break}}return _4}}});_._2("_1");
_1.sysDongleBluetooth=_._1(_8("ISysDongleBluetoothEvents"),_1._1,ISysDongleBluetooth,{constructor:function(){_1.sysDongleBluetooth.superclass.constructor.apply(this,arguments);this._body=this._status=null},ISysDongleBluetooth:{getAddress:function(){return _1.gp(this._body,"Address")},updateStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="BluetoothUSBDevice" resource-type="BluetoothUSBConnection">                </xs:get>',_.id())),
a)},getStatus:function(){return this._status?this._status:_4}},_i3:{getXml:function(){return this._body},loadFromXml:function(a){_a(this,"_i3");if(!a)return _4;a.getAttributeText("resource-id");var b=a.getAttributeText("resource-type");a.selectNodes("./*");switch(b){case "BluetoothUSBDevice":this._body=a.selectSingleNode("BluetoothUSBDevice");this._body=_a(new _1.xprop(this._body),"_i5");return _5;case "BluetoothUSBConnection":this._status=_a(new _1.sysDongleBluetoothState,
"_i3");if(this._status.loadFromXml(a)==_5){this._status=_a(this._status,"ISysDongleBluetoothState");return _5}break}return _4}}});_._2("_1");
_1.sysDongleBluetoothState=_._1(_9,_1._1,ISysDongleBluetoothState,{constructor:function(){_1.sysDongleBluetoothState.superclass.constructor.apply(this,arguments)},ISysDongleBluetoothState:{getState:function(){return _1.gp(this.x,"State")},getClientAddress:function(){return _1.gp(this.x,"ClientAddress")},getPairingCode:function(){return _1.gp(this.x,"PairingCode")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=_a(new _1.xprop(a.selectSingleNode("BluetoothUSBConnection")),
"_i5");return _5}}});_._2("_1");
_1.sproto=_._1(_8("_i3e"),_1._1,_i3c,{constructor:function(a){_1.sproto.superclass.constructor.call(this,arguments);if(a)switch(a){case "cifs":_a(this,"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Group_List/>                                    <Host_List/>                                    <User_List/>                                    <DFS_List/>                                    <Property_List>                                        <Not_Available>0</Not_Available>                                        <Share_Display_Option>0</Share_Display_Option>                                        <Enable_Oplocks>1</Enable_Oplocks>                                        <Enable_Recycle_Bin>0</Enable_Recycle_Bin>                                        <Enable_DFS>0</Enable_DFS>                                        <Default_Access>Disabled</Default_Access>                                        <Allow_Guest_Access>0</Allow_Guest_Access>                                        <New_File_Folder_Perm_Autoset>0</New_File_Folder_Perm_Autoset>                                        <Acl_Change_Restriction_Toggle>0</Acl_Change_Restriction_Toggle>                                        <Folder_Create_Group_Rights>Disabled</Folder_Create_Group_Rights>                                        <Folder_Create_EveryOne_Rights>Disabled</Folder_Create_EveryOne_Rights>                                        <File_Create_Group_Rights>Disabled</File_Create_Group_Rights>                                        <File_Create_EveryOne_Rights>Disabled</File_Create_EveryOne_Rights>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);
break;case "dlna":_a(this,"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                        <Media_Type>All</Media_Type>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);
break;case "daap":_a(this,"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);break;case "afp":_a(this,"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <User_List/>                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;case "nfs":_a(this,"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                        <Default_Sync>0</Default_Sync>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;case "http":_a(this,"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                        <Enable_WebDav>0</Enable_WebDav>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;case "ftp":_a(this,"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',a))).selectNodes("./*")[0]);break;case "rsync":_a(this,
"_i3").loadFromXml((new _.Xml.document(String.format('<{0} id="0" resource-type="{0}">                                    <Rsync_User/>                                    <Host_List/>                                    <Property_List>                                        <Default_Access>Disabled</Default_Access>                                        <Password_Protection>Disabled</Password_Protection>                                        <Not_Available>1</Not_Available>                                    </Property_List>                                </{0}>',
a))).selectNodes("./*")[0]);break;default:break}},_i3c:{getId:function(){return this.xid},getProtoId:function(){return this.xpid},getAvailable:function(){return _1.gp(this.xplist,"Not_Available")=="0"?true:false},putAvailable:function(a){return _1.pp(this.xplist,"Not_Available",a?0:1)},getEnableDFS:function(){return _1.gp(this.xplist,"Enable_DFS")=="1"?true:false},putEnableDFS:function(a){return _1.pp(this.xplist,"Enable_DFS",a?1:0)},getName:function(){return this.xpname?this.xpname:
_4},getGroups:function(){return this.groups?this.groups.getChildren():_4},getGroupById:function(a){return this.groups?this.groups.hash[a]:null},getUsers:function(){return this.users?this.users.getChildren():_4},getUserById:function(a){return this.users?this.users.hash[a]:null},getHosts:function(){return this.hosts?this.hosts.getChildren():_4},getDFSList:function(){return this.dfsList?this.dfsList.getChildren():_4},getStrictSync:function(){return _1.gp(this.xplist,"Strict_Sync")},
putSStrictSync:function(a){return _1.pp(this.xplist,"Strict_Sync",a?1:0)},getShareDisplayOption:function(){return _1.gp(this.xplist,"Share_Display_Option")},putShareDisplayOption:function(a){return _1.pp(this.xplist,"Share_Display_Option",a?1:0)},getFsCaseInsensitive:function(){return _1.gp(this.xplist,"Fs_Case_Insensitive")},putFsCaseInsensitive:function(a){return _1.pp(this.xplist,"Fs_Case_Insensitive",a?1:0)},getSmbEncryptOption:function(){return _1.gp(this.xplist,"Smb_Encrypt")},putSmbEncryptOption:function(a){if(a)return _1.pp(this.xplist,
"Smb_Encrypt",a);else{a=this.xplist.getXml().xmlDocument.getElementsByTagName("Smb_Encrypt");a.length>0&&this.xplist.getXml().xmlDocument.removeChild(a[0])}},putSmbHomeEncryptOption:function(a){return _1.pp(this.xplist,"Smb_Encrypt",a)},getEnableOplocks:function(){return _1.gp(this.xplist,"Enable_Oplocks")},putEnableOplocks:function(a){return _1.pp(this.xplist,"Enable_Oplocks",a?1:0)},getEnableRecycleBin:function(){return _1.gp(this.xplist,"Enable_Recycle_Bin")},putEnableRecycleBin:function(a){return _1.pp(this.xplist,
"Enable_Recycle_Bin",a?1:0)},getDefaultAccess:function(){return _1.gp(this.xplist,"Default_Access")},putDefaultAccess:function(a){return _1.pp(this.xplist,"Default_Access",a)},getDefaultSync:function(){return _1.gp(this.xplist,"Default_Sync")},putDefaultSync:function(a){return _1.pp(this.xplist,"Default_Sync",a)},getUserId:function(){return _1.gp(this.xplist,"User_Id")},putUserId:function(a){return _1.pp(this.xplist,"User_Id",a)},getGroupId:function(){return _1.gp(this.xplist,"Group_Id")},
putGroupId:function(a){return _1.pp(this.xplist,"Group_Id",a)},getSquashType:function(){return _1.gp(this.xplist,"Squash_Type")},putSquashType:function(a){return _1.pp(this.xplist,"Squash_Type",a)},getAllowGuestAccess:function(){return _1.gp(this.xplist,"Allow_Guest_Access")},putAllowGuestAccess:function(a){return _1.pp(this.xplist,"Allow_Guest_Access",a?1:0)},getNewFileFolderPermAutoset:function(){return _1.gp(this.xplist,"New_File_Folder_Perm_Autoset")},putNewFileFolderPermAutoset:function(a){return _1.pp(this.xplist,
"New_File_Folder_Perm_Autoset",a?1:0)},getAclChangeRestrictionToggle:function(){return _1.gp(this.xplist,"Acl_Change_Restriction_Toggle")},putAclChangeRestrictionToggle:function(a){return _1.pp(this.xplist,"Acl_Change_Restriction_Toggle",a?1:0)},getFolderCreateGroupRights:function(){return _1.gp(this.xplist,"Folder_Create_Group_Rights")},putFolderCreateGroupRights:function(a){return _1.pp(this.xplist,"Folder_Create_Group_Rights",a)},getFolderCreateEveryOneRights:function(){return _1.gp(this.xplist,
"Folder_Create_EveryOne_Rights")},putFolderCreateEveryOneRights:function(a){return _1.pp(this.xplist,"Folder_Create_EveryOne_Rights",a)},getFileCreateGroupRights:function(){return _1.gp(this.xplist,"File_Create_Group_Rights")},putFileCreateGroupRights:function(a){return _1.pp(this.xplist,"File_Create_Group_Rights",a)},getFileCreateEveryOneRights:function(){return _1.gp(this.xplist,"File_Create_EveryOne_Rights")},putFileCreateEveryOneRights:function(a){return _1.pp(this.xplist,"File_Create_EveryOne_Rights",
a)},getSpotlight:function(){return _1.gp(this.xplist,"Enable_Spotlight")=="1"},putSpotlight:function(a){return _1.pp(this.xplist,"Enable_Spotlight",a?"1":"0")},getMediaType:function(){return _1.gp(this.xplist,"Media_Type")},putMediaType:function(a){return _1.pp(this.xplist,"Media_Type",a)},getEnablePasswordProtection:function(){return _1.gp(this.xplist,"Password_Protection")},putEnablePasswordProtection:function(a){return _1.pp(this.xplist,"Password_Protection",a)},getEnableWebDav:function(){return _1.gp(this.xplist,
"Enable_WebDav")},putEnableWebDav:function(a){return _1.pp(this.xplist,"Enable_WebDav",a)},putWebDavDefaultAccess:function(a){return _1.pp(this.xplist,"Default_Access",a)},putWebDavAllowGuestAccess:function(a){return _1.pp(this.xplist,"Allow_Guest_Access",a)},addUser:function(a){if(!this.xuls){this.x.appendNode("User_List");_a(this,"_i3").loadFromXml(this.x)}if(this.xuls&&a)if(this.users&&this.users.hash&&!this.users.hash[a.getId()]){var b=_a(a,"_i3").clone(),c=this.xuls.appendNode(b.__s.x);
if(c)if(b.loadFromXml(c)==_5){this.users.hash[a.getId()]=_a(b,"_i2z");this.users.hash[a.getId()].putAccess("Disabled");this.users.appendChild(b);return _5}}return _4},appendUser:function(a){if(!this.xuls){this.x.appendNode("User_List");_a(this,"_i3").loadFromXml(this.x)}if(this.xuls&&a){var b=this.xuls;a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return _a(this,"_i3").loadFromXml(this.x)}}return _4},removeUser:function(a){if(a){var b=
this.x.selectSingleNode("User_List/User[User_Id='"+a.getId()+"']");if(b)if(b.removeNode()){this.users.removeChild(this.users.hash[a.getId()]);this.users.hash[a.getId()]=undefined;return _5}}return _4},removeAllUsers:function(){if(this.xuls){var a=this.xuls;if(this.users&&this.users.hash)this.users.hash={};a.removeNode();this.x.appendNode("User_List");return _a(this,"_i3").loadFromXml(this.x)}return _4},appendGroup:function(a){if(!this.xgls){this.x.appendNode("Group_List");_a(this,
"_i3").loadFromXml(this.x)}if(this.xgls&&a){var b=this.xgls;a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return _a(this,"_i3").loadFromXml(this.x)}}return _4},removeGroup:function(a){if(a){var b=this.x.selectSingleNode("Group_List/Group[Group_Id='"+a.getId()+"']");if(b){if(b.removeNode()){this.groups.removeChild(this.groups.hash[a.getId()]);this.groups.hash[a.getId()]=undefined;return _5}return _4}}return E_INVALIDARG},appendHost:function(a){if(!this.xhls){this.x.appendNode("Host_List");
_a(this,"_i3").loadFromXml(this.x)}if(this.xhls&&a){var b=this.xhls;a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return _a(this,"_i3").loadFromXml(this.x)}}return _4},removeHost:function(a){if(a)if(a=this.xhls.selectSingleNode("Host[@id='"+a.getId()+"']")){if(a.removeNode())return _a(this,"_i3").loadFromXml(this.x);return _4}return E_INVALIDARG},removeHostById:function(a){if(a!=undefined&&a!=null)if(a=this.xhls.selectSingleNode("Host[@id='"+
a+"']")){if(a.removeNode())return _a(this,"_i3").loadFromXml(this.x);return _4}return E_INVALIDARG},removeAllHosts:function(){if(this.xhls){this.xhls.removeNode();this.x.appendNode("Host_List");return _a(this,"_i3").loadFromXml(this.x)}return _4},appendDFSFolder:function(a){if(!this.dfsls){this.x.appendNode("DFS_List");_a(this,"_i3").loadFromXml(this.x)}if(this.dfsls&&a){var b=this.dfsls;a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);
return _a(this,"_i3").loadFromXml(this.x)}}return _4},removeDFSFolder:function(a){var b=this.x,c=this;a&&_.each(this.dfslist,function(d){var e=_a(new _1.xprop(d),"_i5");if(_1.gp(e,"Name")==a)if(d.removeNode())return _a(c,"_i3").loadFromXml(b)},this);return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xpname=this.x.getNodeName();this.xid=this.x.getAttributeText("id");this.xpid=this.x.getAttributeText("protocol-id");
this.xhls=this.x.selectSingleNode("Host_List");this.xuls=this.x.selectSingleNode("User_List");this.xgls=this.x.selectSingleNode("Group_List");this.dfsls=this.x.selectSingleNode("DFS_List");this.xhlist=this.x.selectNodes("Host_List/Host");this.xulist=this.x.selectNodes("User_List/User");this.xglist=this.x.selectNodes("Group_List/Group");this.dfslist=this.x.selectNodes("DFS_List/DFS_folder");this.xplist=this.x.selectSingleNode("Property_List");if(a=_.isAllDefined(this.xplist)){this.xplist=_a(new _1.xprop(this.xplist),
"_i5");var b=_a(this,"_i3");b.removeAll();var c=false;if(this.xpname=="rsync")c=true;if(this.xuls){this.users=_a(new _1._1,"_i3");this.users.hash={};_.each(this.xulist,function(d){var e=_a(new _1.user(true),"_i3");if(e.loadFromXml(d)==_5){d=_a(e,"_i2z");this.users.hash[d.getId()]=d;this.users.appendChild(e)}},this);b.appendChild(this.users)}if(this.xhls){this.hosts=_a(new _1._1,"_i3");_.each(this.xhlist,function(d){var e=
_a(new _1.sprotohost(true),"_i3");e.loadFromXml(d)==_5&&this.hosts.appendChild(e)},this);b.appendChild(this.hosts)}if(this.dfsls){this.dfsList=_a(new _1._1,"_i3");_.each(this.dfslist,function(d){var e=_a(new _1.sprotodfs(true),"_i3");e.loadFromXml(d)==_5&&this.dfsList.appendChild(e)},this);b.appendChild(this.dfsList)}if(this.xgls){this.groups=_a(new _1._1,"_i3");this.groups.hash={};_.each(this.xglist,function(d){var e=_a(new _1.group(true),
"_i3");if(e.loadFromXml(d)==_5){d=_a(e,"_i2v");this.groups.hash[d.getId()]=d;this.groups.appendChild(e)}},this);b.appendChild(this.groups)}}return a?_5:_4}}});_._2("_1");
_1.securityManager=_._1(_8("_i2y"),_1._1,_i2x,{constructor:function(){_1.securityManager.superclass.constructor.apply(this,arguments)},_i2x:{getUsers:function(){if(this.users)return _a(this.users,"_i3").getChildren();return _4},getUserById:function(a){var b=!this.users?this.qusers:this.users;return b?b.hash[a]:null},updateUsers:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Users" resource-type="User_Collection"/>',
_.id())),a)},updateUsersWithAdmin:function(a,b,c){b=!b?0:1;c=!c?1:0;return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="1" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:and>                            <xs:equal property="/User/With_Admin" value="{1}"/>                            <xs:equal property="/User/Without_ReadyCloud_Users" value="{2}"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
_.id(),b,c)),a)},applyUsers:function(a){return this.sendXml(_1._2('<xs:update resource-id="User" resource-type="User"></xs:update>'),a)},commitUser:function(a,b){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="User_Collection" resource-type="User_Collection">                            <User_Collection>{1}</User_Collection>                        </xs:set>',_.id(),b)),a)},commitUsers:function(a,b){var c=
"";if(b&&b.length){for(var d=0;d<b.length;++d)c+=_a(b[d],"_i3").getXml().toString();if(c)c="<User_Collection>"+c+"</User_Collection>"}else if(this.xusers&&this.xusers.length)c=this.x.selectSingleNode("./User_Collection").toString();if(c)return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Users" resource-type="User_Collection">{1}</xs:set>',_.id(),c)),a);return S_FALSE},addUser:function(a,b,c,d,e,f){return this.sendXml(_1._2(String.format(' <xs:add id="{0}" resource-type="User" c-resource-id="Users" c-resource-type="User_Collection">                    <User_Collection>                        <User id="0" resource-type="User">                            <User_Id><![CDATA[{1}]]\></User_Id>                            <User_Name><![CDATA[{2}]]\></User_Name>                            <Password><![CDATA[{3}]]\></Password>                            <Group_Name><![CDATA[{4}]]\></Group_Name>                            <Email_Address><![CDATA[{5}]]\></Email_Address>                        </User>                        </User_Collection>                </xs:add>',
_.id(),a,b,c,d,e)),f)},createUser:function(){return _a(new _1.user,"_i2z")},AddUser:function(a,b){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format(' <xs:add id="{0}" resource-type="User" c-resource-id="Users" c-resource-type="User_Collection">                    <User_Collection>                        {1}                    </User_Collection>                </xs:add>',_.id(),b)),a)},removeUser:function(a,b){if(a&&_a(a,"_i2z")){var c=
_a(_a(this,"_i3").getRoot(),"_i2");c=(c=c?c.getShareManager():null)?c.getShares():_4;c!=_4&&c.length&&_.each(c,function(d){_.each(_a(d,"_i38").getProtocols(),function(e){_a(e,"_i3c").removeUser(a)},this)},this);return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="User" c-resource-id="Users" c-resource-type="User_Collection"/>',_.id(),a.getId())),b)}return E_INVALIDARG},getGroups:function(){if(this.groups)return _a(this.groups,
"_i3").getChildren();return _4},getGroupById:function(a){return this.groups?this.groups.hash[a]:null},updateGroups:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Groups" resource-type="Group_Collection"/>',_.id())),a)},commitGroups:function(a){if(this.xgroups&&this.xgroups.length){var b=this.xg.selectSingleNode("./Group_Collection").toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Groups" resource-type="Group_Collection">{1}</xs:set>',
_.id(),b)),a)}return S_FALSE},addGroup:function(a,b,c){return this.sendXml(_1._2(String.format(' <xs:add id="{0}" resource-type="Group" c-resource-id="Groups" c-resource-type="Group_Collection">                    <Group_Collection>                        <Group id="0" resource-type="Group">                            <Group_Id><![CDATA[{1}]]\></Group_Id>                            <Group_Name><![CDATA[{2}]]\></Group_Name>                             <Secondary_Member_List/>                        </Group>                        </Group_Collection>                </xs:add>',
_.id(),a,b)),c)},removeGroup:function(a,b){if(a&&_a(a,"_i2v"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Group" c-resource-id="Groups" c-resource-type="Group_Collection"/>',_.id(),a.getId())),b);return E_INVALIDARG},getADSMode:function(){return this.ads?this.ads.type:_4},getADSDomain:function(){return this.ads?this.ads.wroup:_4},getADSRealm:function(){return this.ads?this.ads.realm:_4},getADSOrganization:function(){return this.ads?
this.ads.ounit:_4},getADSAdminName:function(){return this.ads?this.ads.admin:_4},getADSAdminPwd:function(){return this.ads?this.ads.pwd:_4},getADSController:function(){return this.ads?this.ads.ctrlr:_4},getTrustedUsersVisibility:function(){return this.ads?this.ads.dispu:_4},getNotSyncAdsAccounts:function(){return this.ads?this.ads.notSync:_4},getTimeout:function(){return this.ads?this.ads.timeout:_4},getADSIDMapMode:function(){return this.ads?this.ads.idMapMode:_4},
updateADSMode:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SecurityMode" resource-type="Security"/>',_.id())),a)},commitADSMode:function(a,b,c,d,e,f,g,h,k,j,m){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="SecurityMode" resource-type="Security">                  <Security>                   <Type>{1}</Type>                   <Realm>{2}</Realm>                   <workGroup>{3}</workGroup>                   <orgUnit><![CDATA[{4}]]\></orgUnit>                   <domainAdministrator>{5}</domainAdministrator>                   <passWord><![CDATA[{6}]]\></passWord>                   <passWordServer>{7}</passWordServer>                   <displayTrustedUsers>{8}</displayTrustedUsers>                   <noSyncADS>{9}</noSyncADS>                   <ldapTimeout>{10}</ldapTimeout>                  </Security>                </xs:set>',
_.id(),a,b,c,d,e,f,g,h,j||"0",m)),k)},queryUsers:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:like property="/User/User_Name/">                            <xs:value><![CDATA[%{3}%]]\></xs:value>                        </xs:like>                    </xs:criterion>                </xs:query>',
_.id(),b,c,a)),d)},queryUsersWithAdmin:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:and>                            <xs:equal property="/User/With_Admin" value="1"/>                            <xs:equal property="/User/Without_ReadyCloud_Users" value="1"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
_.id(),b,c,a)),d)},getQueryUsers:function(){return this.qusers?this.qusers.getChildren():_4},getQueryUsersCount:function(){return this.lucnt!=undefined?this.lucnt:_4},getTotalUsersCount:function(){return this.tlucnt!=undefined?this.tlucnt:_4},queryGroups:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="ADS_Group_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}" sort="/Group/Group_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:like property="/Group/Group_Name/">                            <xs:value><![CDATA[%{3}%]]\></xs:value>                        </xs:like>                    </xs:criterion>                </xs:query>',
_.id(),b,c,a)),d)},getQueryGroups:function(){return this.qgroups?this.qgroups.getChildren():_4},getQueryGroupsCount:function(){return this.lgcnt!=undefined?this.lgcnt:_4},getTotalGroupsCount:function(){return this.tlgcnt!=undefined?this.tlgcnt:_4},refreshAds:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="ADS" resource-type="Security">                    <xs:command_name>RefreshAds</xs:command_name>                </xs:command>',_.id())),
a)},getADSProgress:function(){return this.adsprogress?this.adsprogress:_4},updateADSProgress:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SecurityAdsProgress" resource-type="SecurityAdsProgress"/>',_.id())),a)},getLoginUserName:function(){return this.loginUserName?this.loginUserName:_4},UpdateLoginUserName:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="LoginUser" resource-type="LoginUser"/>',_.id())),
a)},UpdateRCUsers:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Users" resource-type="Cloud_User_Collection"/>',_.id())),a)},getRCUsers:function(){if(this.rcusers)return _a(this.rcusers,"_i3").getChildren();return _4},UpdateDefaultUserProfile:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="default_user_profile"/>',_.id())),a)},getDefaultUserProfile:function(){return this.dup||_4},
CommitDefaultUserProfile:function(a){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="default_user_profile">                    {1}                </xs:set>',_.id(),_a(this.dup,"_i3").getXml().toString())),a)},queryUsersWithTimeMachine:function(a){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="1" sort="/User/User_Name/"/>                    </xs:qualifier>                    <xs:criterion>                        <xs:like property="/User/Time_Machine/">                            <xs:value><![CDATA[%%]]\></xs:value>                        </xs:like>                    </xs:criterion>                </xs:query>',
_.id())),a)},removeUserTimeMachine:function(a,b){if(a&&_a(a,"_i2z"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Timemachine"/>',_.id(),a.getId())),b);return E_INVALIDARG},queryUsersWithHomeFolder:function(a){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:criterion>                        <xs:equal property="/User/Home_Folder/Exists">                            <xs:value><![CDATA[1]]\></xs:value>                        </xs:equal>                    </xs:criterion>                </xs:query>',
_.id())),a)},queryUsersWithHFProtectOrAccess:function(a){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="ADS_User_Collection">                    <xs:criterion>                        <xs:or>                            <xs:equal property="/User/Home_Folder/Snapshot_Protection">                                <xs:value><![CDATA[1]]\></xs:value>                            </xs:equal>                            <xs:equal property="/User/Home_Folder/Snapshot_Access">                                <xs:value><![CDATA[1]]\></xs:value>                            </xs:equal>                        </xs:or>                    </xs:criterion>                </xs:query>',
_.id())),a)},backupADSIDMap:function(a){return this.sendXml(_1._2(String.format('<xs:update resource-id="AdsIdmapBackup" resource-type="AdsIdmapBackup"/>')),a)}},_iw:{OnEvent:function(a,b,c,d,e){switch(e){case "xs:command-s":a=b[1]?b[1].getNodeText():undefined;this.Fire("OnRefreshAds",[c,a]);break}return _5}},_i3:{Update:function(a){var b=_a(this,"_i2x");return b.updateUsers(a)&&b.updateGroups(a)},Commit:function(a){var b=_a(this,
"_i2x");return b.commitUsers(a)&&b.commitGroups(a)},getXml:function(){return this.x},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),"_i1").Advise(this,"Security");return _4},loadFromXml:function(a){var b=a.getAttributeText("resource-id"),c=a.getAttributeText("resource-type"),d=_a(this,"_i3");if(b=="SecurityMode"){if(d=a.selectSingleNode("Security")){this.ads={type:_1.xprop.prototype.getPropertyAbsolute(d,"Type"),realm:_1.xprop.prototype.getPropertyAbsolute(d,
"Realm"),wroup:_1.xprop.prototype.getPropertyAbsolute(d,"workGroup"),ounit:_1.xprop.prototype.getPropertyAbsolute(d,"orgUnit"),admin:_1.xprop.prototype.getPropertyAbsolute(d,"domainAdministrator"),pwd:_1.xprop.prototype.getPropertyAbsolute(d,"passWord"),ctrlr:_1.xprop.prototype.getPropertyAbsolute(d,"passWordServer"),dispu:_1.xprop.prototype.getPropertyAbsolute(d,"displayTrustedUsers"),notSync:_1.xprop.prototype.getPropertyAbsolute(d,"noSyncADS"),timeout:_1.xprop.prototype.getPropertyAbsolute(d,
"ldapTimeout"),idMapMode:_1.xprop.prototype.getPropertyAbsolute(d,"idmapBackend")};return _5}return _4}else if(c=="SecurityAdsProgress"){if(d=a.selectSingleNode("SecurityAdsProgress")){a=_a(new _1.adsprogress,"_i3");if(a.loadFromXml(d)==_5){this.adsprogress=a;return _5}}}else if(c=="ADS_User_Collection"){if(b=a.selectSingleNode("User_Collection")){this.lucnt=parseInt(b.getAttributeText("n_entries"));this.tlucnt=parseInt(b.getAttributeText("n_total_entries"));b=b.selectNodes("User");
this.qusers=_a(new _1._1,"_i3");this.qusers.hash=[];if(b){d=0;for(a=b.length;d<a;d++){c=_a(new _1.user(true),"_i3");if(c.loadFromXml(b[d])==_5){var e=_a(c,"_i2z");this.qusers.hash[e.getId()]=e;this.qusers.appendChild(c)}}}return _5}}else if(c=="ADS_Group_Collection"){if(c=a.selectSingleNode("Group_Collection")){this.lgcnt=parseInt(c.getAttributeText("n_entries"));this.tlgcnt=parseInt(c.getAttributeText("n_total_entries"));b=c.selectNodes("Group");this.qgroups=
_a(new _1._1,"_i3");if(b){d=0;for(a=b.length;d<a;d++){c=_a(new _1.group(true),"_i3");c.loadFromXml(b[d])==_5&&this.qgroups.appendChild(c)}}return _5}}else if(c=="Cloud_User_Collection"){if(a.selectNodes("User_Collection")){a=a.selectNodes("User_Collection/User");this.rcusers&&d.removeChild(this.rcusers);this.rcusers=_a(new _1._1,"_i3");d.appendChild(this.rcusers);this.rcusers.hash=[];_.each(a,function(f){var g=_a(new _1.user(true),"_i3");
if(g.loadFromXml(f)==_5){f=_a(g,"_i2z");this.rcusers.hash[f.getId()]=f;this.rcusers.appendChild(g)}},this);return _5}}else if(c=="default_user_profile"){if(d=a.selectSingleNode("Default_User_Profile")){a=_a(new _1.user,"_i3");if(a.loadFromXml(d)==_5){this.dup=_a(a,"_i2z");return _5}}}else if(c=="LoginUser"){if(d=a.selectSingleNode("CurrentLoginUser")){d=_a(new _1.xprop(d),"_i5");this.loginUserName=_1.gp(d,"Username")}return _5}else{b=a.selectNodes("User_Collection");
c=a.selectNodes("Group_Collection");(e=(e=_a(_a(this,"_i3").getRoot(),"_i2"))?e.getShareManager():null)&&e.getShares();if(b){this.x=a;this.xusers=a.selectNodes("User_Collection/User");this.users&&d.removeChild(this.users);this.users=_a(new _1._1,"_i3");this.users.hash=[];_.each(this.xusers,function(f){var g=_a(new _1.user(true),"_i3");if(g.loadFromXml(f)==_5){f=_a(g,"_i2z");this.users.hash[f.getId()]=f;this.users.appendChild(g)}},this);
d.appendChild(this.users);return _5}if(c){this.xg=a;this.xgroups=a.selectNodes("Group_Collection/Group");this.groups&&d.removeChild(this.groups);this.groups=_a(new _1._1,"_i3");this.groups.hash=[];_.each(this.xgroups,function(f){var g=_a(new _1.group(true),"_i3");if(g.loadFromXml(f)==_5){f=_a(g,"_i2v");var h=f.getId();if(f&&f!=_4)this.groups.hash[h]=f;this.groups.appendChild(g)}},this);d.appendChild(this.groups);return _5}}return _4}}});_._2("_1");
_1.dns=_._1(_8("_i21"),_1._1,_i1z,{constructor:function(a){_1.dns.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("               <DNS>                  <Priority>0</Priority>                  <IP_Address>0.0.0.0</IP_Address>               </DNS>")).selectNodes("./*")[0])},_i1z:{getIP:function(){return _1.gp(this.xstgs,"IP_Address")},putIP:function(a){return _1.pp(this.xstgs,"IP_Address",
a)},getPriority:function(){return _1.gp(this.xstgs,"Priority")},putPriority:function(a){return _1.pp(this.xstgs,"Priority",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xstgs=this.x.selectSingleNode(".");if(_.isAllDefined(this.xstgs)){this.xstgs=_a(new _1.xprop(this.xstgs),"_i5");return _5}return _4}}});_._2("_1");
_1.eth=_._1(_8("_i26"),_1._1,_i23,{constructor:function(){_1.eth.superclass.constructor.apply(this,arguments)},_i23:{getLinkStatus:function(){return _1.gp(this.xstgs,"Link_Status")},getIPAssignment:function(){return _1.gp(this.xstgs,"IP_Assignment")},putIPAssignment:function(a){return _1.pp(this.xstgs,"IP_Assignment",a)},getName:function(){return _1.gp(this.xstgs,"Name")},getNetMask:function(){return _1.gp(this.xstgs,
"Net_Mask")},putNetMask:function(a){return _1.pp(this.xstgs,"Net_Mask",a)},getBroadcastIP:function(){return _1.gp(this.xstgs,"Broadcast")},putBroadcastIP:function(a){return _1.pp(this.xstgs,"Broadcast",a)},getMTU:function(){return _1.gp(this.xstgs,"MTU")},putMTU:function(a){return _1.pp(this.xstgs,"MTU",a)},getMAC:function(){return _1.gp(this.xstgs,"HW_Addr")},getIP:function(){return _1.gp(this.xstgs,"IP_Address")},putIP:function(a){return _1.pp(this.xstgs,"IP_Address",a)},renew:function(a){var b=
_a(this,"_i23");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Network">                        <xs:command_name>renew</xs:command_name>                        <xs:args/>                        </xs:command>',_.id(),b.getName())),a)}},_i3:{loadFromXml:function(a){this.x=a;if(this.xstgs=this.x.selectSingleNode(".")){this.xstgs=_a(new _1.xprop(this.xstgs),"_i5");return _5}return _4}}});_._2("_1");
_1.dnsManager=_._1(_8("INetworkDNSManagerEvents"),_1._1,_i22,{constructor:function(){_1.dnsManager.superclass.constructor.apply(this,arguments)},_i22:{getDNSRecords:function(){return _a(this,"_i3").getChildren()},getDomain:function(){return _1.gp(this.xstgs,"Domain")},putDomain:function(a){return _1.pp(this.xstgs,"Domain",a)},appendDNSRecord:function(a){if(_a(a,"_i1z")){var b=this.x.selectSingleNode("DNS_List");
if(b){xsnode=_a(a,"_i3");if(a=b.appendNode(xsnode.getXml())){xsnode.loadFromXml(a);return _a(this,"_i3").loadFromXml(this.x)}}}return _4},removeDNSRecord:function(a){if(a=_a(a,"_i1z"))if(a=this.x.selectSingleNode("DNS_List/DNS[IP_Address='"+a.getIP()+"']"))if(a.removeNode())return _a(this,"_i3").loadFromXml(this.x);return _4}},_i3:{loadFromXml:function(a){this.x=a;this.xstgs=this.x.selectSingleNode(".");this.xdnss=this.x.selectNodes("DNS_List/DNS");
if(_.isAllDefined(this.xstgs,this.xdnss)){this.xstgs=_a(new _1.xprop(this.xstgs),"_i5");var b=_a(this,"_i3");b.removeAll();_.each(this.xdnss,function(c){var d=_a(new _1.dns(true),"_i3");d.loadFromXml(c)==_5&&b.appendChild(d)},this);return _5}return _4}}});_._2("_1");
_1.ntManager=_._1(_8("_i24"),_1._1,_i25,_iw,{constructor:function(){_1.ntManager.superclass.constructor.apply(this,arguments)},_i25:{updateNetworkInfo:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Network" resource-type="Network" />',_.id())),a)},commitNetworkInfo:function(a){if(this.x){var b=this.x.selectSingleNode("Network").toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Network" resource-type="Network">{1}</xs:set>',
_.id(),b)),a)}return _4},getDNSManager:function(){return this.mdns?this.mdns:_4},getInterfaces:function(){return this.eths?this.eths.getChildren():_4},getWorkgroup:function(){return _1.gp(this.xstgs,"Workgroup")},putWorkgroup:function(a){return _1.pp(this.xstgs,"Workgroup",a)},getGateway:function(){return _1.gp(this.xstgs,"Gateway")},putGateway:function(a){return _1.pp(this.xstgs,"Gateway",a)},getHostname:function(){return _1.gp(this.xstgs,"Hostname")},putHostname:function(a){return _1.pp(this.xstgs,
"Hostname",a)},getPrimaryRouter:function(){return _1.gp(this.xstgs,"PrimaryRouter")},putPrimaryRouter:function(a){return _1.pp(this.xstgs,"PrimaryRouter",a)},getAutoDHCP:function(){return _1.gp(this.xstgs,"AutoDhcp")},putAutoDHCP:function(a){return _1.pp(this.xstgs,"AutoDhcp",a)},updateNICS:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="network_link_list" resource-type="network_link_collection" />',_.id())),a)},updateBONDS:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="aggregate" resource-type="aggregate_collection" />',
_.id())),a)},getNICS:function(){return this.xnics?this.xnics.getChildren():_4},commitNIC:function(a,b){if(_a(a,"_i27")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="link" resource-type="Network" >{1}</xs:set>',_.id(),a.getXml().toString())),b)}},AppendVNIC:function(a,b){var c=_a(a,"_i3");if(_a(a,"_i28")&&c)return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="vnic" resource-type="Network">                       {1}                    </xs:add>',
_.id(),c.getXml().toString())),b);return _4},RemoveVNIC:function(a,b){if(a=_a(a,"_i28"))return this.sendXml(_1._2(String.format('<xs:delete id="{1}" resource-id="vnic" resource-type="Network"/>',_.id(),a.getName())),b);return _4},commitVNIC:function(a,b){if(_a(a,"_i28")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="vnic" resource-type="Network" >{1}</xs:set>',_.id(),a.getXml().toString())),
b)}},getBONDS:function(){return this.xbonds?this.xbonds.getChildren():_4},AppendBOND:function(a,b,c,d,e,f){a=_a(a,"_i27");b=_a(b,"_i27");if(a&&c)return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="aggregate" resource-type="Network">                       <aggregate>                            <lacpactivity><![CDATA[{3}]]\></lacpactivity>                            <timer><![CDATA[{4}]]\></timer>                            <policy><![CDATA[{5}]]\></policy>                            <link_collection>\t\t                        <link><![CDATA[{1}]]\></link>\t\t                        {2}                            </link_collection>                        </aggregate >                    </xs:add>',
_.id(),a.getName(),b?"<link><![CDATA["+b.getName()+"]]\></link>":"",c,d,e)),f);return _4},AppendG2BOND:function(a,b,c,d,e){for(var f="",g=0;g<a.length;++g){var h=_a(a[g],"_i27");if(!h)return _4;f+="<link><![CDATA["+h.getName()+"]]\></link>"}if(b&&f!="")return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="aggregate" resource-type="Network">                       <aggregate>                            <mode><![CDATA[{2}]]\></mode>                            <policy><![CDATA[{3}]]\></policy>                            <primary><![CDATA[{4}]]\></primary>                            <link_collection>\t\t                        {1}                            </link_collection>                        </aggregate >                    </xs:add>',
_.id(),f,b,c,d?d.getName():"")),e);return _4},RemoveBOND:function(a,b){if(a=_a(a,"_i1y"))return this.sendXml(_1._2(String.format('<xs:delete id="{1}" resource-id="aggregate" resource-type="Network"/>',_.id(),a.getName())),b);return _4},AppendBONDNIC:function(a,b,c){a=_a(a,"_i1y");b=_a(b,"_i27");if(a&&b)return this.sendXml(_1._2(String.format('<xs:add id="{1}" resource-id="aggregate_link" resource-type="Network">                        <link>{2}</link>                    </xs:add>',
_.id(),a.getName(),b.getName())),c);return _4},RemoveBONDNIC:function(a,b,c){a=_a(a,"_i1y");b=_a(b,"_i27");if(a&&b)return this.sendXml(_1._2(String.format('<xs:delete id="{1}" resource-id="aggregate_link" resource-type="Network">                        <link>{2}></link>                    </xs:delete>',_.id(),a.getName(),b.getName())),c);return _4},commitBOND:function(a,b){if(_a(a,"_i1y")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="aggregate" resource-type="Network" >{1}</xs:set>',
_.id(),a.getXml().toString())),b)}return _4},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():_4},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Network/dnscollection");b.removeNode("DNS");if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(_a(a,"_i1z")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4}},
_iw:{OnEvent:function(a,b,c,d,e){if(e=="xs:error-s"){b=_a(new _1.nmlerr,"_in");_a(b,"_i3").loadFromXml(a);this.Fire("OnNetworkError",[b])}else switch(c){case "aggregate":this.Fire("OnBONDCreated",[b]);break;case "vnic":this.Fire("OnVNICUpdated",[b]);break}return _5}},_i3:{Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),"_i1").Advise(this,"Network");return _4},Update:function(a){return _a(this,
"_i25").updateNetworkInfo(a)},Commit:function(a){return _a(this,"_i25").commitNetworkInfo(a)},loadFromXml:function(a){var b=_a(this,"_i3");this.xmdns=a.selectSingleNode("Network/DNS_Settings");var c=a.selectSingleNode("Network/General_Settings");this.xiint=a.selectNodes("Network/Interface_Settings/Interface_List/Interface");var d=a.selectSingleNode("network_link_collection"),e=a.selectSingleNode("aggregate_collection");if(_.isAllDefined(c,this.xmdns,this.xiint)){this.x=
a;this.xstgs=_a(new _1.xprop(c),"_i5");b.removeAll();this.mdns=_a(new _1.dnsManager,"_i3");this.mdns.loadFromXml(this.xmdns)==_5&&b.appendChild(this.mdns);this.eths=_a(new _1._1,"_i3");_.each(this.xiint,function(f){var g=_a(new _1.eth,"_i3");g.loadFromXml(f)==_5&&this.eths.appendChild(g)},this);b.appendChild(this.eths);return _5}else if(c){this.x=a;this.xstgs=_a(new _1.xprop(c),"_i5");if(a=a.selectSingleNode("Network/dnscollection")){a=
a.selectNodes("DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=_a(new _1._1,"_i3");_.each(a,function(f){var g=_a(new _1.dns(true),"_i3");g.loadFromXml(f)==_5&&this.xdns.appendChild(g)},this);b.appendChild(this.xdns)}return _5}if(d){this.xn=a;d=a.selectNodes("network_link_collection/network_link");this.xnics&&b.removeChild(this.xnics);this.xnics=_a(new _1._1,"_i3");_.each(d,function(f){var g=_a(new _1.nic,"_i3");g.loadFromXml(f)==
_5&&this.xnics.appendChild(g)},this);b.appendChild(this.xnics);return _5}if(e){this.xb=a;e=a.selectNodes("aggregate_collection/aggregate");this.xbonds&&b.removeChild(this.xbonds);this.xbonds=_a(new _1._1,"_i3");_.each(e,function(f){var g=_a(new _1.bond(true),"_i3");g.loadFromXml(f)==_5&&this.xbonds.appendChild(g)},this);b.appendChild(this.xbonds);return _5}return _4}}});_._2("_1");
_1.htdisk=_._1(_9,_1._1,_i12,{constructor:function(){_1.htdisk.superclass.constructor.apply(this,arguments)},_i12:{getLabel:function(){return _1.gp(this.xprop,"label")},getName:function(){return _1.gp(this.xprop,"device_name")},getId:function(){return _1.gp(this.xprop,"device_id")},getResourceId:function(){return _1.xa2t(this.x,"resource-id")},getModel:function(){return _1.gp(this.xprop,"disk_model")},getTemperature:function(){return _1.gp(this.xprop,"disk_temperature")},
getCapacity:function(){return parseInt(_1.gp(this.xprop,"disk_capacity")||"0")},getStatus:function(){return _1.gp(this.xprop,"disk_status")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});
_1.htfan=_._1(_9,_1._1,_i14,{constructor:function(){_1.htfan.superclass.constructor.apply(this,arguments)},_i14:{getLabel:function(){return _1.gp(this.xprop,"label")},getName:function(){return _1.gp(this.xprop,"device_name")},getId:function(){return _1.gp(this.xprop,"device_id")},getSpeed:function(){return _1.gp(this.xprop,"fan_speed")},getMinNormalSpeed:function(){return _1.xa2t(this.x,"normal-min")},getMaxNormalSpeed:function(){return _1.xa2t(this.x,"normal-max")},
getStatus:function(){return _1.gp(this.xprop,"fan_status")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});
_1.httemp=_._1(_9,_1._1,_i16,{constructor:function(){_1.httemp.superclass.constructor.apply(this,arguments)},_i16:{getLabel:function(){return _1.gp(this.xprop,"label")},getName:function(){return _1.gp(this.xprop,"device_name")},getId:function(){return _1.gp(this.xprop,"device_id")},getValue:function(){return _1.gp(this.xprop,"temp_value")},getMinValue:function(){return _1.gp(this.xprop,"min_value")},getMaxValue:function(){return _1.gp(this.xprop,"max_value")},
getStatus:function(){return _1.gp(this.xprop,"status")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});
_1.htups=_._1(_9,_1._1,_i18,{constructor:function(){_1.htups.superclass.constructor.apply(this,arguments)},_i18:{getLabel:function(){return _1.gp(this.xprop,"label")},getName:function(){return _1.gp(this.xprop,"device_name")},getId:function(){return _1.gp(this.xprop,"device_id")},getStatus:function(){return _1.gp(this.xprop,"ups_status")},getRawStatus:function(){return _1.gp(this.xprop,"ups_raw_status")},getAlarm:function(){return _1.gp(this.xprop,"ups_alarm")},
getModel:function(){return _1.gp(this.xprop,"ups_model")},getCharge:function(){return _1.gp(this.xprop,"battery_charge")},getRuntime:function(){return _1.gp(this.xprop,"battery_runtime")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});
_1.htsumtemp=_._1(_9,_1._1,_i10,{constructor:function(){_1.htsumtemp.superclass.constructor.apply(this,arguments)},_i10:{getLabel:function(){return _1.gp(this.xprop,"label")},getStatus:function(){return _1.gp(this.xprop,"status")},getValue:function(){return _1.gp(this.xprop,"value")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});
_1.htvolt=_._1(_9,_1._1,_i1b,{constructor:function(){_1.htvolt.superclass.constructor.apply(this,arguments)},_i1b:{getLabel:function(){return _1.gp(this.xprop,"label")},getName:function(){return _1.gp(this.xprop,"device_name")},getId:function(){return _1.gp(this.xprop,"device_id")},getValue:function(){return _1.gp(this.xprop,"volt_value")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),
"_i5");return _5}}});
_1.htpsu=_._1(_9,_1._1,_i1c,{constructor:function(){_1.htpsu.superclass.constructor.apply(this,arguments)},_i1c:{getLabel:function(){return _1.gp(this.xprop,"label")},getName:function(){return _1.gp(this.xprop,"device_name")},getId:function(){return _1.gp(this.xprop,"device_id")},getStatus:function(){return _1.gp(this.xprop,"status")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");
return _5}}});
_1.htsmart=_._1(_9,_1._1,IHealthDiskSmartInfo,{constructor:function(){_1.htsmart.superclass.constructor.apply(this,arguments)},IHealthDiskSmartInfo:{getDevice:function(){return _1.gp(this.xprop,"Device")},getController:function(){return _1.gp(this.xprop,"Controller")},getChannel:function(){return _1.gp(this.xprop,"Channel")},getModel:function(){return _1.gp(this.xprop,"Model")},getSerial:function(){return _1.gp(this.xprop,"Serial")},getFirmware:function(){return _1.gp(this.xprop,"Firmware")},
getClass:function(){return _1.gp(this.xprop,"Class")},getRPM:function(){return _1.gp(this.xprop,"RPM")},getSectors:function(){return _1.gp(this.xprop,"Sectors")},getPool:function(){return _1.gp(this.xprop,"Pool")},getPoolType:function(){return _1.gp(this.xprop,"PoolType")},getATAErrorCount:function(){return _1.gp(this.xhprop,"ATAErrorCount")},getReallocatedSectors:function(){return _1.gp(this.xhprop,"ReallocatedSectors")},getReallocationEvents:function(){return _1.gp(this.xhprop,"ReallocationEvents")},
getSpinRetryCount:function(){return _1.gp(this.xhprop,"SpinRetryCount")},getEndToEndErrors:function(){return _1.gp(this.xhprop,"EndToEndErrors")},getCommandTimeouts:function(){return _1.gp(this.xhprop,"CommandTimeouts")},getCurrentPendingSectorCount:function(){return _1.gp(this.xhprop,"CurrentPendingSectorCount")},getUncorrectableSectorCount:function(){return _1.gp(this.xhprop,"UncorrectableSectorCount")},getTemperature:function(){return _1.gp(this.xhprop,"Temperature")},getStartStopCount:function(){return _1.gp(this.xhprop,
"StartStopCount")},getPowerOnHours:function(){return _1.gp(this.xhprop,"PowerOnHours")},getPowerCycleCount:function(){return _1.gp(this.xhprop,"PowerCycleCount")},getLoadCycleCount:function(){return _1.gp(this.xhprop,"LoadCycleCount")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.xprop=_a(new _1.xprop(a),"_i5");this.xhprop=_a(new _1.xprop(a.selectSingleNode("./HealthData")),"_i5");return _5}}});
_1.htenc=_._1(_9,_1._1,_i1d,{constructor:function(){_1.htenc.superclass.constructor.apply(this,arguments)},_i1d:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):_4},getPortLabel:function(){return this.x?this.x.getAttributeText("port-label"):_4},getDisksHealth:function(){return this.disks?this.disks.getChildren():_4},getFansHealth:function(){return this.fans?this.fans.getChildren():_4},getTemperatureHealth:function(){return this.tmps?
this.tmps.getChildren():_4},getUPSHealth:function(){return this.ups?this.ups.getChildren():_4},getTemperatureSummary:function(){return this.xsumtemp?this.xsumtemp:_4},getVoltageHealth:function(){return this.volt?this.volt.getChildren():_4},getPSUHealth:function(){return this.psu?this.psu.getChildren():_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;a=_a(this,"_i3");a.removeAll();if(this.xups=this.x.selectNodes("UPS")){this.ups=_a(new _1._1,
"_i3");_.each(this.xups,function(c){var d=_a(new _1.htups,"_i3");d.loadFromXml(c)==_5&&this.ups.appendChild(d)},this);a.appendChild(this.ups)}if(this.xfans=this.x.selectNodes("Fan")){this.fans=_a(new _1._1,"_i3");_.each(this.xfans,function(c){var d=_a(new _1.htfan,"_i3");d.loadFromXml(c)==_5&&this.fans.appendChild(d)},this);a.appendChild(this.fans)}if(this.xdisks=this.x.selectNodes("Disk")){this.disks=_a(new _1._1,"_i3");_.each(this.xdisks,
function(c){var d=_a(new _1.htdisk,"_i3");d.loadFromXml(c)==_5&&this.disks.appendChild(d)},this);a.appendChild(this.disks)}if(this.xtmps=this.x.selectNodes("Temperature")){this.tmps=_a(new _1._1,"_i3");_.each(this.xtmps,function(c){var d=_a(new _1.httemp,"_i3");d.loadFromXml(c)==_5&&this.tmps.appendChild(d)},this);a.appendChild(this.tmps)}var b=this.x.selectSingleNode("Temperature_Summary");if(b){this.xsumtemp=_a(new _1.htsumtemp,"_i3");
this.xsumtemp.loadFromXml(b)==_5&&a.appendChild(this.xsumtemp)}if(b=this.x.selectNodes("Voltage")){this.volt=_a(new _1._1,"_i3");_.each(b,function(c){var d=_a(new _1.htvolt,"_i3");d.loadFromXml(c)==_5&&this.volt.appendChild(d)},this);a.appendChild(this.volt)}if(b=this.x.selectNodes("PSU")){this.psu=_a(new _1._1,"_i3");_.each(b,function(c){var d=_a(new _1.htpsu,"_i3");d.loadFromXml(c)==_5&&this.psu.appendChild(d)},this);a.appendChild(this.psu)}return _5}}});
_._2("_1");
_1.htManager=_._1(_8("_i1f"),_1._1,_i1e,{constructor:function(){_1.htManager.superclass.constructor.apply(this,arguments)},_i1e:{updateHealth:function(a){return!!!window.updatePwd&&this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="HealthInfo" resource-type="Health_Collection" />',_.id())),a)},getDisksHealth:function(){return this.firstenc?this.firstenc.getDisksHealth():_4},getFansHealth:function(){return this.firstenc?this.firstenc.getFansHealth():
_4},getTemperatureHealth:function(){return this.firstenc?this.firstenc.getTemperatureHealth():_4},getUPSHealth:function(){return this.ups?this.ups.getChildren():this.firstenc?this.firstenc.getUPSHealth():_4},getTemperatureSummary:function(){return this.firstenc?this.firstenc.getTemperatureSummary():_4},getVoltageHealth:function(){return this.firstenc?this.firstenc.getVoltageHealth():_4},getPSUHealth:function(){return this.firstenc?this.firstenc.getPSUHealth():_4},getEnclosures:function(){return this.encs?
this.encs.getChildren():_4},updateDiskSmartInfo:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Disk_SMART_Info" />',_.id(),b)),a)},getDiskSmartInfo:function(){return this.xhsmart}},_iw:{OnEvent:function(a,b,c,d,e){e=="xs:update-s"&&this.Fire("OnHealthUpdate");return _5}},_i3:{Update:function(a){return _a(this,"_i1e").updateHealth(a)},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),
"_i1").Advise(this,"Health_Collection");return _4},loadFromXml:function(a){switch(a.getAttributeText("resource-type")){case "Health_Collection":this.x=a;var b=_a(this,"_i3");b.removeAll();var c=this.x.selectNodes("Health_Collection/Enclosure_Health");this.encs=_a(new _1._1,"_i3");if(c&&c.length!=0)_.each(c,function(d){var e=_a(new _1.htenc,"_i3");e.loadFromXml(d)==_5&&this.encs.appendChild(e)},this);else{c=_a(new _1.htenc,"_i3");
c.loadFromXml(a.selectSingleNode("Health_Collection"))==_5&&this.encs.appendChild(c)}b.appendChild(this.encs);this.firstenc=this.encs.getChildren()[0];this.firstenc=_a(this.firstenc,"_i1d");this.ups=undefined;if((a=this.x.selectNodes("Health_Collection/Ups_Health/UPS"))&&a.length!=0){this.ups=_a(new _1._1,"_i3");_.each(a,function(d){var e=_a(new _1.htups,"_i3");e.loadFromXml(d)==_5&&this.ups.appendChild(e)},this)}b.appendChild(this.ups);return _5;
case "Disk_SMART_Info":b=_a(new _1.htsmart,"_i3");if(b.loadFromXml(a.selectSingleNode("DiskSMARTInfo"))==_5){this.xhsmart=_a(b,"IHealthDiskSmartInfo");return _5}break}return _4}}});_._2("_1");
_1.log=_._1(_8("_i1x"),_1._1,_i1v,{constructor:function(){_1.log.superclass.constructor.apply(this,arguments)},_i1v:{getDate:function(){return _1.gp(this.xlog,"date")},getLogTime:function(){return _1.gp(this.xlog,"time")},getMessage:function(){return _1.gp(this.xlog,"message")},getSeverity:function(){var a=_1.gp(this.xlog,"severity");if(a==_4)a=this.x?this.x.getAttributeText("severity"):_4;return a},getId:function(){return this.x?this.x.getAttributeText("id"):
_4},getTime:function(){return this.x?this.x.getAttributeText("timestamp"):_4},getLocalTime:function(){return this.x?this.x.getAttributeText("localized_ts"):_4},getMessageTag:function(){return this.x?this.x.getAttributeText("message-tag"):_4},getCategory:function(){return this.x?this.x.getAttributeText("category"):_4},getArgs:function(){return this.args?this.args:_4},getDeviceTime:function(){var a=0;if(this.x&&(a=this.x.getAttributeText("year"))){var b=0;if(this.x&&(b=this.x.getAttributeText("month"))){var c=
0;if(this.x&&(c=this.x.getAttributeText("day"))){var d=0;if(this.x&&(d=this.x.getAttributeText("hr"))){var e=0;if(this.x&&(e=this.x.getAttributeText("min"))){var f=this.x?this.x.getAttributeText("sec"):0;return new Date(a,b-1,c,d,e,f,0)}}}}}return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xlog=_a(new _1.xprop(this.x),"_i5");if(a=a.selectSingleNode("args")){this.args=[];_.each(a.xmlDocument.attributes,function(b){this.args.push({name:b.name,
value:b.value})},this)}return _5}}});
_1.lgManager=_._1(_8("_i1x"),_1._1,_i1w,{constructor:function(){_1.lgManager.superclass.constructor.apply(this,arguments)},_i1w:{updateLogs:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Logs" resource-type="Log_Collection"/>',_.id())),a)},cleanLogs:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="Logs" resource-type="Log_Collection"/>',_.id())),
a)},downloadAllLogs:function(a){return this.sendXml(_1._2('<xs:custom id="download" resource-id="Logs" resource-type="Log_Collection"/>'),a)},getLogs:function(){return this.logs?this.logs.getChildren():_4},getLogsCount:function(){return this.lcnt?this.lcnt:0},getInfoLogsCount:function(){return this.infocnt?this.infocnt:0},getWarnLogsCount:function(){return this.warncnt?this.warncnt:0},getErrorLogsCount:function(){return this.errcnt?this.errcnt:0},QueryLogs:function(a,b,c,d,e,f,g,h){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="Log_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}"/>                    </xs:qualifier>                    <xs:criterion>                    <xs:and>                        <xs:greater-equal property="TimeStamp" value="{3}"/>                        <xs:lesser-equal property="TimeStamp" value="{4}"/>'+
(c==""?"":'<xs:equal property="Severity_In" value="{5}"/>')+(d==""?"":'<xs:equal property="Category_In" value="{6}"/>')+(g==""?"":'<xs:equal property="Msg_Key" value="{7}"/>')+"</xs:and>                    </xs:criterion>                </xs:query>",_.id(),e,f,a,b,c,d,g)),h)},getAuditLogs:function(){return this.auditlogs},getAuditConnections:function(){return this.auditconnections},getAuditLogsCount:function(){return this.alcnt?this.alcnt:0},QueryAuditLogs:function(a,b,c,d,e,f,g,h,k,j,m){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="AuditLog_Collection">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}"/>                    </xs:qualifier>                    <xs:criterion>                    <xs:and>                        <xs:greater-equal property="TimeStamp" value="{3}"/>                        <xs:lesser-equal property="TimeStamp" value="{4}"/>'+
(e==""?"":'<xs:equal property="user" value="{5}"/>')+(f==""?"":'<xs:equal property="protocol" value="{6}"/>')+(g==""?"":'<xs:equal property="hostname" value="{7}"/>')+(h==""?"":'<xs:equal property="addr_ip" value="{8}"/>')+(k==""?"":'<xs:equal property="accessed_path" value="{9}"/>')+(j==""?"":'<xs:equal property="action" value="{10}"/>')+"</xs:and>                    </xs:criterion>                </xs:query>",_.id(),a,b,c,d,e,f,g,h,k,j)),m)},updateAuditConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Audit" resource-type="ActiveConnections"/>',
_.id())),a)},QueryAuditConnections:function(a,b,c,d,e,f,g){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="ActiveConnections">                    <xs:qualifier>                        <xs:page direction="1" start-index="{1}" count="{2}"/>                    </xs:qualifier>                    <xs:criterion>                    <xs:and>'+(c==""?"":'<xs:equal property="user" value="{3}"/>')+(d==""?"":'<xs:equal property="protocol" value="{4}"/>')+(e==""?"":'<xs:equal property="hostname" value="{5}"/>')+
(f==""?"":'<xs:equal property="src_ip" value="{6}"/>')+"</xs:and>                    </xs:criterion>                </xs:query>",_.id(),a,b,c,d,e,f)),g)},ArchiveAuditLogs:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="Audit" resource-type="AuditLog_Collection"/>',_.id())),a)}},_iw:{OnEvent:function(a,b){if(b&&b[0]){a=_a(new _1.log,"_i3");a.loadFromXml(b[0])==_5&&this.Fire("OnDeviceAlarm",[_a(a,"_i1v")])}return _5}},
_i3:{Update:function(a){return _a(this,"_i1w").updateLogs(a)},getXml:function(){return this.x},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),"_i1").Advise(this,"Log");return _4},loadFromXml:function(a){this.x=a;a=_a(this,"_i3");a.removeAll();if(this.xlogs=this.x.selectSingleNode("Log_Collection")){this.lcnt=parseInt(this.xlogs.getAttributeText("n_entries"));this.infocnt=parseInt(this.xlogs.getAttributeText("n_info_entries"));
this.warncnt=parseInt(this.xlogs.getAttributeText("n_warn_entries"));this.errcnt=parseInt(this.xlogs.getAttributeText("n_err_entries"));this.xlogs=this.x.selectNodes("Log_Collection/Log");this.logs=_a(new _1._1,"_i3");_.each(this.xlogs,function(c){var d=_a(new _1.log,"_i3");d.loadFromXml(c)==_5&&this.logs.appendChild(d)},this);a.appendChild(this.logs);return _5}if(this.xauditlogs=this.x.selectSingleNode("AuditLog_Collection")){this.alcnt=parseInt(this.xauditlogs.getAttributeText("n_entries"));
this.xauditlogs=this.x.selectNodes("AuditLog_Collection/AuditLog");this.auditlogs=[];_.each(this.xauditlogs,function(c){var d={};_.each([].slice.call(c.xmlDocument.attributes),function(e){d[e.name]=e.value},this);this.auditlogs.push(d)},this);return _5}if(this.xauditconnections=this.x.selectSingleNode("ActiveConnections")){this.xauditconnections=this.x.selectNodes("ActiveConnections/connection");this.auditconnections=[];var b=["host","user","protocol","src_ip","connect_time","connect_file",
"localized_ts"];_.each(this.xauditconnections,function(c){var d={};_.each(b,function(e){d[e]=c.selectSingleNode(e)&&c.selectSingleNode(e).getNodeText()},this);this.auditconnections.push(d)},this);return _5}return _4}}});_._2("_1");
_1.sysinfo=_._1(_9,_1._1,_i43,{constructor:function(){_1.sysinfo.superclass.constructor.apply(this,arguments)},_i43:{getModel:function(){return _1.gp(this.xpr,"Model")},getSerial:function(){return _1.gp(this.xpr,"Serial")},getHostname:function(){return _1.gp(this.xpr,"Hostname")},getFirmwareName:function(){return _1.gp(this.xpr,"Firmware_Name")},getFirmwareVersion:function(){return _1.gp(this.xpr,"Firmware_Version")},getFirmwareTime:function(){return _1.gp(this.xpr,
"Firmware_Time")},getMemorySize:function(){return _1.gp(this.xpr,"Memory")},getCPUNumber:function(){return _1.gp(this.xpr,"CPU_Number")},getCPUFrequency:function(){return _1.gp(this.xpr,"CPU_Frequency")},getMACAddress:function(){return _1.gp(this.xpr,"MAC_Address")},getRaidLevel:function(){return _1.gp(this.xpr,"Raid_Level")},getHDDVendor:function(){return _1.gp(this.xpr,"HDD_Vendor")},getHDDModel:function(){return _1.gp(this.xpr,"HDD_Model")},getHDDSerial:function(){return _1.gp(this.xpr,
"HDD_Serial")},getHDDFirmware:function(){return _1.gp(this.xpr,"HDD_Firmware")},getRegistered:function(){return _1.gp(this.xpr,"Registered")},getRaidStatus:function(){return _1.gp(this.xraid,"Status")},getRaidPercentage:function(){return _1.gp(this.xraid,"Percentage")},getRaidSpeed:function(){return _1.gp(this.xraid,"Speed")},getRaidCompletionTime:function(){return _1.gp(this.xraid,"Completion-time")},getAntiVirusVersion:function(){return _1.gp(this.xpr,"Anti-Virus-Def-Version")},getAntiVirusLastUpdated:function(){return _1.gp(this.xpr,
"Anti-Virus-Last-Updated")},getRackmount:function(){return _1.gp(this.xpr,"Rackmount")},getSafeMode:function(){return _1.gp(this.xpr,"Safe_Mode")},getOSRootCorrupt:function(){return _1.gp(this.xpr,"OS_Root_Corrupt")},getReadOnlyDataVolumes:function(){return _1.gp(this.xpr,"Read-Only-Data-Volumes")},getSystemUptime:function(){return _1.gp(this.xpr,"System_Uptime")}},_i3:{loadFromXml:function(a){this.xpr=_a(new _1.xprop(a),"_i5");this.xraid=_a(new _1.xprop(a.selectSingleNode("./Raid")),
"_i5");return _5}}});_._2("_1");
_1.sysManager=_._1(_8("_i45"),_1._1,_i44,_iw,{constructor:function(){_1.sysManager.superclass.constructor.apply(this,arguments)},_i44:{updateClock:function(a){if(sessionStorage.getItem("wizard-update-pwd")!="1")return!!!window.updatePwd&&this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Clock" resource-type="System"/>',_.id())),a)},commitClock:function(a){if(this.clock){var b=this.clock.getXml().toString();
return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Clock" resource-type="System">{1}</xs:set>',_.id(),b)),a)}return S_FALSE},getClock:function(){return this.clock?this.clock:_4},updateTimeZone:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Timezone" resource-type="System"/>',_.id())),a)},commitTimeZone:function(a){if(this.timezone){var b=this.timezone.getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Timezone" resource-type="System">{1}</xs:set>',
_.id(),b)),a)}return E_FALSE},updateNTPInfo:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="NTPSettings" resource-type="System"/>',_.id())),a)},commitNTPInfo:function(a){if(this.ntp){var b=this.ntp.getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="NTPSettings" resource-type="System">{1}</xs:set>',_.id(),b)),a)}return E_FALSE},updateHourMapInfo:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="TimeDateFormatSettings" resource-type="System"/>',
_.id())),a)},commitHourMapInfo:function(a){if(this.dateFormat){var b=this.dateFormat.getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="TimeDateFormatSettings" resource-type="System">{1}</xs:set>',_.id(),b)),a)}return E_FALSE},updateSysInfo:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SystemInfo" resource-type="SystemInfo"></xs:get>',_.id())),a)},preLogout:function(a){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Logout" resource-type="Readynas-Logout"></xs:set>',
_.id())),a)},checkForUpdate:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Firmware" resource-type="FirmwareImage"></xs:get>',_.id())),a)},UpdateAdminPasswordRecovery:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AdminPasswordRecovery" resource-type="AdminPassword">                 </xs:get>',_.id(),_.id())),a)},getRecoveryEnabled:function(){return this.xAdminPasswordRecovery?_1.gp(this.xAdminPasswordRecovery,
"Enabled"):_4},getRecoveryMethod:function(){return this.xAdminPasswordRecovery?_1.gp(this.xAdminPasswordRecovery,"Method"):_4},UpdateAdminInfo:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AdminInfo" resource-type="AdminPassword">                 </xs:get>',_.id(),_.id())),a)},getAdminShellAccess:function(){return this.xAdminInfo?_1.gp(this.xAdminInfo,"ShellAccess"):_4},SetAdminPassword:function(a,b,c){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AdminPassword" resource-type="AdminPassword">                    <AdminPassword>                        <Password><![CDATA[{1}]]\></Password>                        <OldPassword><![CDATA[{2}]]\></OldPassword>                    </AdminPassword>                </xs:set>',
_.id(),a,b)),c)},SetAdminPasswordRecovery:function(a,b,c,d,e,f,g){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AdminPasswordRecovery" resource-type="AdminPassword">                    <AdminPasswordRecovery>                        <OldPassword><![CDATA[{1}]]\></OldPassword>                        <Enabled>{2}</Enabled>                        <Method>{3}</Method>                        <Question><![CDATA[{4}]]\></Question>                        <Answer><![CDATA[{5}]]\></Answer>                        <Email><![CDATA[{6}]]\></Email>                    </AdminPasswordRecovery>                </xs:set>',
_.id(),a,b?"1":"0",c,d,e,f)),g)},SetAdminPasswordInfo:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AdminInfo" resource-type="AdminPassword">                    <AdminInfo>                        <ShellAccess>{1}</ShellAccess>                    </AdminInfo>                </xs:set>',_.id(),a?"1":"0")),b)},updateRecoveryQuestion:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="PasswordRecoverQuestion" resource-type="System">                    <request id="{1}" method="pw.GetQuestion"/>                 </xs:get>',
_.id(),_.id())),a,b.getSourceRCVURL(),"FORM")},getRecoveryQuestion:function(){return this.rcvq?this.rcvq:_4},updateRecoveryEnable:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="PasswordRecoverEanble" resource-type="System">                    <request id="{1}" method="pw.IsRecoveryEnabled"/>                 </xs:get>',_.id(),_.id())),a,b.getSourceRCVURL(),"FORM")},getRecoveryEnable:function(){return this.rcve?
this.rcve:_4},RecoverPassword:function(a,b,c){var d=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="PasswordRecover" resource-type="System">                    <request id="{1}" method="pw.Recover">                        <param name="email">{2}</param>                        <param name="answer">{3}</param>                    </request>                </xs:get>',_.id(),_.id(),a,b)),c,d.getSourceRCVURL(),
"FORM")},ResetPassword:function(a,b){var c=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="ResetPassword" resource-type="System">                    <request id="{1}" method="pw.ToggleReset">                        <param name="enabled">1</param>                        <param name="method">reset</param>                        <param name="resetflag">{2}</param>                    </request>                </xs:get>',
_.id(),_.id(),a===1||a===true?1:0)),b,c.getSourceRCVURL(),"FORM")},updatesPasswordResetStatus:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="UpdatesPasswordResetStatus" resource-type="System">                    <request id="{1}" method="pw.GetResetStatus">                    </request>                </xs:get>',_.id(),_.id())),a,b.getSourceRCVURL(),"FORM")},getPasswordResetStatus:function(){return this.rcvst?
this.rcvst:_4},PerfomFactoryDefault:function(a){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="factory_default" resource-id="System" resource-type="System">                </xs:custom>',_.id())),a)},PerfomeFirmwareUpdateWithVersion:function(a,b){return this.sendXml(_1._2(String.format('<xs:update resource-id="Firmware" resource-type="FirmwareImage">                    <FirmwareImage resource-id="Firmware" resource-type="FirmwareImage">                        <Location>remote</Location>                        <Resource>{0}</Resource>                    </FirmwareImage>                </xs:update>',
a)),b)},getTimeZone:function(){return this.timezone?this.timezone:_4},getSysInfo:function(){return this.sysinfo?this.sysinfo:_4},getFirmwareInfo:function(){return this.fmw?this.fmw:_4},getLocaleManager:function(){return this._mngr_loc||(this._mngr_loc=_a(this,"_i3").appendChild(_a(new _1.locManager,"_i1t")))},getPowerManager:function(){return this._mngr_power||(this._mngr_power=_a(this,"_i3").appendChild(_a(new _1.powerManager,"_i2g")))},
getUpdateManager:function(){return _3},getAlertsManager:function(){return this._mngr_alerts||(this._mngr_alerts=_a(this,"_i3").appendChild(_a(new _1.alertsManager,"_ia")))},getNTPInfo:function(){return this.ntp?this.ntp:_4},getHourMapInfo:function(){return this.dateFormat?this.dateFormat:_4},updateChart:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Stats"/>',_.id(),a)),b)},getChart:function(a){return this.charts&&
this.charts[a]?this.charts[a]:_4},restoreSysConfig:function(a){return this.sendXml(_1._2(String.format('<xs:update resource-id="Restore" resource-type="ConfigBackup"/>')),a)},setMyPassword:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Protocols" resource-type="MyPassword">                    <MyPassword>                        <UserName>{1}</UserName>                        <OldPassword>{2}</OldPassword>                        <NewPassword>{3}</NewPassword>                    </MyPassword>                </xs:set>',
_.id(),a,b,c)),d)},updateDiskcache:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="performaceSetting" resource-type="System"/>',_.id())),a)},commitDiskcache:function(a,b){b=String.format('<performaceSetting disk_cache="{0}"> </performaceSetting>',b);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="performaceSetting" resource-type="System">{1}</xs:set>',_.id(),b)),a)},getDiskcacheStatus:function(){return this.diskcachenode.getAttributeText("disk_cache")},
updateSupportedFeatures:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SupportedFeatures" resource-type="SupportedFeatures"/>',_.id())),a)},getSupportStatsVolume:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-volume"):_4},getSupportStatsNetwork:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-network"):_4},getSupportStatsUtilization:function(){return this.supportedFeatures?
this.supportedFeatures.getAttributeText("stats-utilization"):_4},getSupportStatsTemperature:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-temperature"):_4},getSupportBackupButton:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("backup-button"):_4},getSupportReadyDR:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-readydr"):_4},getSupportXRAID:function(){return this.supportedFeatures?
this.supportedFeatures.getAttributeText("xraid"):_4},getSupportFileSearch:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("file-search"):_4},getSupportAntiVirusSS:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("anti-virus-sche-scan"):_4},getSpinDown:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("spindown"):_4},getSupportAudit:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-audit"):
_4},getSupportAntiVirus:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("anti-virus"):_4},getSupportLunOver8TB:function(){return this.supportedFeatures?this.supportedFeatures.getAttributeText("stats-readydr"):_4},updateDeviceState:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DeviceState" resource-type="DeviceState"/>',_.id())),a)},commitDeviceState:function(a){if(this.deviceState){var b=this.deviceState.getXml().toString();
return this.sendXml(_1._2(String.format('<xs:update id="{0}" resource-id="DeviceState" resource-type="DeviceState">{1}</xs:update>',_.id(),b)),a)}return _4},getDeviceState:function(){return this.deviceState?this.deviceState:_4},updateCloudOwner:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="CloudOwner" resource-type="CloudOwner"/>',_.id())),a)},updateCloudNetConn:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="Network" resource-type="Network"><xs:command_name>CheckInternetConnection</xs:command_name></xs:command>',
_.id())),a)},getCloudNetConn:function(){return this.cloudNetConn},updateInsightAgent:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="InsightAgentStatus" resource-type="InsightAgentStatus"/>',_.id())),a)},getInsightAgent:function(){return this.insightAgent?this.insightAgent:_4},getCloudOwner:function(){return this.cloudOwner?this.cloudOwner:_4},registerCloudOwner:function(a,b,c){if(a=_a(a,"_i2z"))return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="CloudOwner" resource-type="CloudOwner">                            <User id="0" resource-id="0" resource-type="User" is-domain-member="0">                              <User_Name>{1}</User_Name>                              <Password>{2}</Password>                              <Confirm>{3}</Confirm>                            </User>                     </xs:set>',
_.id(),_.Utils.Base64.encode(a.getName()?a.getName():""),_.Utils.Base64.encode(a.getPassword()?a.getPassword():""),c?true:false)),b)},removeCloudOwner:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="CloudOwner" resource-type="CloudOwner">                    <User resource-type="User">                        <User_Name></User_Name>                        <Password></Password>                        <Keep_Home_Folder>{1}</Keep_Home_Folder>                    </User>                </xs:set>',
_.id(),b?"1":"0")),a)},cancelCloudOwner:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="CloudOwner" resource-type="CloudOwner">                        <xs:command_name>cancel</xs:command_name><xs:args/></xs:command>',_.id())),a)},UpdateCloudServer:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="CloudServer" resource-type="CloudServer"/>',_.id())),a)},CommitCloudServer:function(a){return this.xcloudserver?
this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="CloudServer" resource-type="CloudServer">                        {1}                    </xs:set>',_.id(),this.xcloudserver.getXml().toString())),a):_4},getCloudServerAddress:function(){return this.xcloudserver?_1.gp(this.xcloudserver,"Address"):_4},putCloudServerAddress:function(a){return this.xcloudserver?_1.pp(this.xcloudserver,"Address",a):_4},reboot:function(a,b){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="Halt" resource-id="Shutdown" resource-type="System">                    <Shutdown halt="false" fsck="{1}"/>                </xs:custom>',
_.id(),a)),b)},UpdateHomeFolderOptions:function(a){return this.sendXml(_1._2(String.format('<xs:get  id="{0}" resource-id="HomeFolderOptions" resource-type="HomeFolderOptions">                </xs:get>',_.id())),a)},CommitHomeFolderOptions:function(a,b){return(b=_a(b||this.homeFolderOptions,"_i3"))?this.sendXml(_1._2(String.format('<xs:set  id="{0}" resource-id="HomeFolderOptions" resource-type="HomeFolderOptions">                    {1}                </xs:set>',
_.id(),b.getXml().toString())),a):_4},updateShareConsumed:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="'+a+'" resource-type="Share_Consumed"/>',_.id())),b)},getHomeFolderOptions:function(){return this.homeFolderOptions?this.homeFolderOptions:_4},updateFanConfig:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FanConfig" resource-type="System">                </xs:get>',_.id())),a)},commitFanConfig:function(a,
b){b=String.format('<FanConfig mode="{0}"/>',b);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="FanConfig" resource-type="System">{1}</xs:set>',_.id(),b)),a)},getFanConfig:function(){return this.fanconfig.getAttributeText("mode")},updateBluetooth:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="BluetoothUSBDevice" resource-type="BluetoothUSBDevice">                </xs:get>',_.id())),a)},getBluetooth:function(){return this.bluetooth?
this.bluetooth:_4},commitHotfixUpdate:function(a,b){b=String.format('<HotfixUpdate enable="{0}"/>',b);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="HotfixUpdate" resource-type="System">{1}</xs:set>',_.id(),b)),a)},updateHotfixUpdate:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="HotfixUpdate" resource-type="System">                </xs:get>',_.id())),a)},getHotfixUpdate:function(){return this.hotfixUpdate?this.hotfixUpdate.getAttributeText("enable"):
_4},commitAutoFWUpdate:function(a,b,c,d,e){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AutoFWUpdate" resource-type="System">                    <AutoFWUpdate>                        <Enabled>{1}</Enabled>                        <Interval>                            <Minute>{2}</Minute>                            <Hour>{3}</Hour>                            <DayOfWeek>{4}</DayOfWeek>                        </Interval>                    </AutoFWUpdate>                </xs:set>',
_.id(),b,c,d,e)),a)},updateAutoFWUpdate:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AutoFWUpdate" resource-type="System" />',_.id())),a)},getAutoFWUpdate:function(){return this.AutoFWUpdateObj}},_iw:{OnEvent:function(a,b,c,d,e){switch(d){case "BluetoothUSBDevice":this.Fire("OnBluetoothPlugUnPlug",[c]);break;case "System":if(b&&b.length)switch(e){case "xs:custom-s":this.Fire("OnSysReboot",[b[0].getAttributeText("required")*
1]);break}case "Share_Consumed":b[0].getAttributeText("Files");b[0].getAttributeText("Folders");b[0].getAttributeText("Consumed_MB");this.Fire("OnShareConsumed",[b[0].getAttributeText("Files"),b[0].getAttributeText("Folders"),b[0].getAttributeText("Consumed_MB")]);break}return _5}},_i3:{Update:function(a){var b=_a(this,"_i44");return b.updateSysInfo(a)&&b.updateNTPInfo(a)&&b.updateClock(a)&&b.updateTimeZone(a)},Commit:function(a){var b=_a(this,"_i44");return b.commitNTPInfo(a)&&
b.commitClock(a)&&b.commitTimeZone(a)},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),"_i1").Advise(this);return _4},loadFromXml:function(a){var b=_a(this,"_i3");if(!a)return _4;var c=a.getNodeName();this.cloudNetConn=0;if(c=="xs:command-s"){if(a.getAttributeText("resource-type")=="Network")this.cloudNetConn=a.selectSingleNode("Network/NetworkConnection").getNodeText();return _5}var d=a.getAttributeText("resource-id"),e=a.getAttributeText("resource-type"),
f=a.selectNodes("./*");switch(e){case "SystemService_Collection":this.xs=a;this.xservices&&b.removeChild(this.xservices);this.xservices=_a(new _1._1,"_i3");a=a.selectNodes("SystemService_Collection/SystemService");_.each(a,function(g){var h=_a(new _1.sysservice,"_i3");h.loadFromXml(g)==_5&&this.xservices.appendChild(h)},this);b.appendChild(this.xservices);return _5;case "Stats":if(!this.charts)this.charts=[];this.charts[d]=a.selectSingleNode("Stats_Chart").getNodeText();
return _5;case "SupportedFeatures":this.supportedFeatures=a.selectSingleNode("SupportedFeatures");return _5;case "DeviceState":a=a.selectSingleNode("DeviceState");this.deviceState=_a(new _1.devState,"_i3");if(this.deviceState.loadFromXml(a)==_5){b.removeChild(b.getChildByTrait("_it"));b.appendChild(this.deviceState);return _5}break;case "InsightAgentStatus":b=a.selectSingleNode("Insight_Agent_Info");this.insightAgent=_a(new _1.insightagent,"_i3");if(this.insightAgent.loadFromXml(b)==
_5)return _5;else this.insightAgent=null;break;case "CloudOwner":b=a.selectSingleNode("User");this.cloudOwner=_a(new _1.user,"_i3");if(this.cloudOwner.loadFromXml(b)==_5)return _5;else this.cloudOwner=null;break;case "CloudServer":this.xcloudserver=_a(new _1.xprop(a.selectSingleNode("CloudServer")),"_i5");return _5;case "HomeFolderOptions":this.homeFolderOptions=_a(new _1.homeFolderOptions,"_i3");if(this.homeFolderOptions.loadFromXml(a.selectSingleNode("HomeFolderOptions"))==
_5){this.homeFolderOptions=_a(this.homeFolderOptions,"IHomeFolderOptions");return _5}else delete this.homeFolderOptions;break;case "BluetoothUSBDevice":this.bluetooth=_a(new _1.sysDongleBluetooth,"_i3");_a(this,"_i3").appendChild(this.bluetooth);if(this.bluetooth.loadFromXml(a)==_5){this.bluetooth=_a(this.bluetooth,"ISysDongleBluetooth");return _5}else delete this.bluetooth;break;default:if(f&&f.length||d=="UpdatesPasswordResetStatus"||d=="PasswordRecoverEanble"||
d=="PasswordRecoverQuestion"){f=f?f[0]:undefined;switch(d){case "Clock":this.clock=_a(new _1.sysClock,"_i3");if(this.clock.loadFromXml(f)==_5){b.removeChild(b.getChildByTrait("_i41"));b.appendChild(this.clock);return _5}break;case "Timezone":this.timezone=_a(new _1.tmZone,"_i3");if(this.timezone.loadFromXml(f)==_5){b.removeChild(b.getChildByTrait("_i47"));b.appendChild(this.timezone);return _5}break;case "SystemInfo":this.sysinfo=_a(new _1.sysinfo,
"_i3");if(this.sysinfo.loadFromXml(f)==_5){b.removeChild(b.getChildByTrait("_i43"));b.appendChild(this.sysinfo);return _5}break;case "Firmware":this.fmw=_a(new _1.sysfmw,"_i3");if(this.fmw.loadFromXml(f)==_5){b.removeChild(b.getChildByTrait("_i42"));b.appendChild(this.fmw);return _5}break;case "NTPSettings":this.ntp=_a(new _1.sysntp,"_i3");if(this.ntp.loadFromXml(f)==_5){b.removeChild(b.getChildByTrait("_i46"));b.appendChild(this.ntp);
return _5}break;case "TimeDateFormatSettings":this.dateFormat=_a(new _1.hourmap,"_i3");if(this.dateFormat.loadFromXml(f)==_5){b.appendChild(this.dateFormat);return _5}break;case "AdminInfo":this.xAdminInfo=_a(new _1.xprop(a.selectSingleNode("AdminInfo")),"_i5");return _5;case "AdminPasswordRecovery":this.xAdminPasswordRecovery=_a(new _1.xprop(a.selectSingleNode("AdminPasswordRecovery")),"_i5");return _5;case "PasswordRecoverQuestion":this.rcvq=
a.getNodeText();return _5;case "PasswordRecoverEanble":this.rcve=a.getNodeText();return _5;case "UpdatesPasswordResetStatus":this.rcvst=a.getNodeText();return _5;case "performaceSetting":this.diskcachenode=a.selectSingleNode("performaceSetting");return _5;case "FanConfig":this.fanconfig=a.selectSingleNode("FanConfig");return _5;case "HotfixUpdate":this.hotfixUpdate=a.selectSingleNode("HotfixUpdate");return _5;case "AutoFWUpdate":if(c=="xs:get-s")this.AutoFWUpdateObj={Enabled:a.selectSingleNode("AutoFWUpdate/Enabled").getNodeText()==
"1",Minute:a.selectSingleNode("AutoFWUpdate/Interval/Minute").getNodeText(),Hour:a.selectSingleNode("AutoFWUpdate/Interval/Hour").getNodeText(),DayOfWeek:a.selectSingleNode("AutoFWUpdate/Interval/DayOfWeek").getNodeText()};return _5}}}return _4}}});_._2("_1");
_1.sysClock=_._1(_9,_1._1,_i41,{constructor:function(){_1.sysClock.superclass.constructor.apply(this,arguments)},_i41:{getYear:function(){return this.x?this.x.getAttributeText("year"):_4},getMonth:function(){return this.x?this.x.getAttributeText("month"):_4},getDay:function(){return this.x?this.x.getAttributeText("day"):_4},getHour:function(){return this.x?this.x.getAttributeText("hour"):_4},getMinute:function(){return this.x?this.x.getAttributeText("minute"):
_4},getSecond:function(){return this.x?this.x.getAttributeText("second"):_4},putYear:function(a){return this.x?this.x.setAttributeText(a,"year"):_4},putMonth:function(a){return this.x?this.x.setAttributeText(a,"month"):_4},putDay:function(a){return this.x?this.x.setAttributeText(a,"day"):_4},putHour:function(a){return this.x?this.x.setAttributeText(a,"hour"):_4},putMinute:function(a){return this.x?this.x.setAttributeText(a,"minute"):_4},putSecond:function(a){return this.x?
this.x.setAttributeText(a,"second"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.tmZone=_._1(_9,_1._1,_i47,{constructor:function(){_1.tmZone.superclass.constructor.apply(this,arguments)},_i47:{getTimeZoneName:function(){return this.x?this.x.getAttributeText("name"):_4},putTimeZoneName:function(a){return this.x?this.x.setAttributeText(a,"name"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.loc=_._1(_8("_i1s"),_1._1,_i1r,{constructor:function(){_1.loc.superclass.constructor.apply(this,arguments)},_i1r:{getLocale:function(){return this.x?this.x.getAttributeText("code"):_4},putLocale:function(a){return this.x?this.x.setAttributeText(a,"code"):_4},getAutoLocale:function(){return this.x?this.x.getAttributeText("auto"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.dic=_._1(_8("_i1q"),_1._1,_i1p,{constructor:function(){_1.dic.superclass.constructor.apply(this,arguments)},_i1p:{tr:function(a,b){if(this.x){var c=this.x.selectSingleNode("./Language[@code='"+b+"']/item[@key='"+a+"']");if(c)return c.getNodeText();if(this.xmlDictGaps)try{this.xmlDictGaps.selectSingleNode("./item[@key='"+a+"']")||this.xmlDictGaps.appendNode(new _.Xml.document('<item key="'+a+'"><![CDATA['+a+"]]\></item>"))}catch(d){_2("Invalid localization key for locale: "+
b,a,_2.WARNING)}b="en-us";if(c=this.x.selectSingleNode("./Language[@code='"+b+"']/item[@key='"+a+"']"))return c.getNodeText();return a}return _4},getLangs:function(){if(this.x){var a=this.x.selectNodes("./Language"),b=[];_.each(a,function(c){b.push({code:c.getAttributeText("code"),spell:c.getAttributeText("spell")})});return b}return _4},getLangSpell:function(a){if(this.x)if(a=this.x.selectSingleNode("./Language[@code='"+a+"']"))return a.getAttributeText("spell");return _4},getGaps:function(){if(this.xmlDictGaps)return this.xmlDictGaps.toString();
return""}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.locManager=_._1(_8("_i1u"),_1._1,_i1t,{constructor:function(){_1.locManager.superclass.constructor.apply(this,arguments);_1.__glocalizer=_a(this,"_i1t")},_i1t:{updateDictionary:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Dictionary" resource-type="System"/>',_.id())),a)},updateLocale:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Locale" resource-type="System"/>',
_.id())),a)},commitLocale:function(a){if(this.loc){var b=this.loc.getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Locale" resource-type="System">{1}</xs:set>',_.id(),b)),a)}return S_FALSE},tr:function(a){if(this.dic){var b=_a(this,"_i1t").getLocale();if(b=="auto"){b=_a(this,"_i1t").getAutoLocale();if(b==_4){b="en-us";if(navigator)if(navigator.language)b=navigator.language;else if(navigator.systemLanguage)b=
navigator.systemLanguage;else if(navigator.browserLanguage)b=navigator.browserLanguage;else if(navigator.userLanguage)b=navigator.userLanguage}}return _a(this.dic,"_i1p").tr(a,b!=_4?b:"en-us")}return a},getLangs:function(){if(this.dic)return _a(this.dic,"_i1p").getLangs();return _4},getLocale:function(){if(this.loc)return _a(this.loc,"_i1r").getLocale();return _4},getAutoLocale:function(){if(this.loc)return _a(this.loc,"_i1r").getAutoLocale();
return _4},putLocale:function(a){if(this.loc)return _a(this.loc,"_i1r").putLocale(a)||this.Fire("OnLanguageChanged",[a]);return _4},getLocaleSpell:function(){if(this.dic){var a=_a(this,"_i1t").getLocale();return _a(this.dic,"_i1p").getLangSpell(a!=_4?a:"en-us")}return _4},getDictionary:function(){return this.dic?_a(this.dic,"_i1p"):_4}},_i3:{Update:function(a){var b=_a(this,"_i1t");return b.updateDictionary(a)&&
b.updateLocale(a)},Commit:function(a){return _a(this,"_i1t").commitLocale(a)},loadFromXml:function(a){var b=_a(this,"_i3"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a[0];switch(c){case "Dictionary":this.dic=_a(new _1.dic,"_i3");if(this.dic.loadFromXml(a)==_5){b.removeChild(b.getChildByTrait("_i1p"));b.appendChild(this.dic);return _5}break;case "Locale":this.loc=_a(new _1.loc,"_i3");if(this.loc.loadFromXml(a)==
_5){b.removeChild(b.getChildByTrait("_i1r"));b.appendChild(this.loc);return _5}break}}return _4}}});_1._TR=function(a){if(_1.__glocalizer)return _1.__glocalizer.tr((new String(a)).trim());return a};_TR=_1._TR;_._2("_1");
_1.alertsManager=_._1(_8("_ib"),_1._1,_ia,{constructor:function(){_1.alertsManager.superclass.constructor.apply(this,arguments);this.smtpservers=[]},_ia:{updateSMTPProviders:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SmtpProviders" resource-type="System"/>',_.id())),a)},updateCurrentOauth2EmailService:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="" resource-type="OAuth2VaultEmail"/>',
_.id())),a)},deleteCurrentOauth2EmailService:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="DeleteCurrentOauth2" resource-type="OAuth2VaultEmail"/>',_.id())),a)},updateCurrentOauth2Url:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OAuth2VaultEmail"><xs:command_name>GetAuthCodeURL</xs:command_name></xs:command>',_.id(),b)),a)},exchangeAuthentication:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OAuth2VaultEmail"><xs:command_name>Exchange</xs:command_name><xs:args><xs:arg><State>{2}</State></xs:arg><xs:arg><Code>{3}</Code></xs:arg></xs:args></xs:command>',
_.id(),b,c,d)),a)},updateConfig:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AlertConfig" resource-type="System"/>',_.id())),a)},updateSettings:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AlertSettings" resource-type="System"/>',_.id())),a)},commitConfig:function(a){if(this.config){var b=this.config.getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AlertConfig" resource-type="System">{1}</xs:set>',
_.id(),b)),a)}return _4},commitSettings:function(a){if(this.settings){var b=this.settings.getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AlertSettings" resource-type="System">{1}</xs:set>',_.id(),b)),a)}return _4},sendTestMessage:function(a){if(this.config){var b=this.config.getXml().toString();return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="SendTestMessage" resource-id="AlertConfig" resource-type="System">{1}</xs:custom>',
_.id(),b)),a)}return _4},getConfig:function(){return this.config?this.config:_4},getSettings:function(){return this.settings?this.settings:_4},getSMTPProviders:function(){return this.smtps?this.smtps.getChildren():_4},updateSMTPServers:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SmtpServers:{1}" resource-type="System"/>',_.id(),b)),a)},getSMTPServers:function(a){return this.smtpservers[a]?this.smtpservers[a].getChildren():_4},
getCurrentOAuth2Service:function(){return this.currentOAuth2Service?this.currentOAuth2Service:_4},getCurrentOAuth2Url:function(){return this.currentOAuth2Url?this.currentOAuth2Url:_4},getCurrentOAuth2Token:function(){return this.currentOAuth2Token?this.currentOAuth2Token:_4}},_i3:{Update:function(a){var b=_a(this,"_ia");return b.updateSMTPProviders(a)&&b.updateConfig(a)&&b.updateSettings(a)},Commit:function(a){var b=_a(this,"_ia");return b.commitConfig(a)&&
b.commitSettings(a)},loadFromXml:function(a){var b=_a(this,"_i3"),c=a.getAttributeText("resource-id"),d=a.selectNodes("./*");if(d&&d.length){d=d[0];switch(c){case "SmtpProviders":b=d.selectNodes("./SmtpProvider");if(_.isDefined(b)){this.smtps=_a(new _1._1,"_i3");_.each(b,function(f){var g=_a(new _1.smtpp,"_i3");g.loadFromXml(f)==_5&&this.smtps.appendChild(g)},this);return _5}break;case "AlertConfig":this.config=_a(new _1.aconfig,"_i3");
if(this.config.loadFromXml(d)==_5){b.removeChild(b.getChildByTrait("_i0"));b.appendChild(this.config);return _5}break;case "AlertSettings":this.settings=_a(new _1.asettings,"_i3");if(this.settings.loadFromXml(d)==_5){b.removeChild(b.getChildByTrait("_ic"));b.appendChild(this.asettings);return _5}break;case "DeleteCurrentOauth2":return _5}}if(c.indexOf("SmtpServers:")==0){var e=c.substr(12);this.smtpservers[e]=_a(new _1._1,"_i3");
a=a.selectNodes("outgoingServer");_.isDefined(a)&&_.each(a,function(f){var g=_a(new _1.smtps,"_i3");g.loadFromXml(f)==_5&&this.smtpservers[e].appendChild(g)},this);return _5}if(c=a.selectSingleNode("ActiveEmailService/Service")){this.currentOAuth2Service=c.getNodeText();return _5}if(c=a.selectSingleNode("Authorization_URL/URL")){this.currentOAuth2Url=c.getNodeText();return _5}c=a.selectSingleNode("OAuth2_Token/Email");a=a.selectSingleNode("OAuth2_Token/Id");if(c&&a){this.currentOAuth2Token=
{email:c.getNodeText(),id:a.getNodeText()};return _5}return _4}}});_._2("_1");
_1.aconfig=_._1(_9,_1._1,_i0,{constructor:function(){_1.aconfig.superclass.constructor.apply(this,arguments)},_i0:{getContact:function(){return this.x?this.x.getAttributeText("contact"):_4},getProvider:function(){return this.x?this.x.getAttributeText("provider"):_4},getUser:function(){return this.x?this.x.getAttributeText("user"):_4},getPassword:function(){return this.x?this.x.getAttributeText("pass"):_4},getServer:function(){return this.x?
this.x.getAttributeText("server"):_4},getPort:function(){return this.x?this.x.getAttributeText("port"):_4},getFromName:function(){return this.x?this.x.getAttributeText("from"):_4},getTLS:function(){return this.x?this.x.getAttributeText("tls"):_4},getAuth:function(){return this.x?this.x.getAttributeText("auth"):_4},putContact:function(a){return this.x?this.x.setAttributeText(a,"contact"):_4},putProvider:function(a){return this.x?this.x.setAttributeText(a,"provider"):_4},
putUser:function(a){return this.x?this.x.setAttributeText(a,"user"):_4},putPassword:function(a){return this.x?this.x.setAttributeText(a,"pass"):_4},putServer:function(a){return this.x?this.x.setAttributeText(a,"server"):_4},putPort:function(a){return this.x?this.x.setAttributeText(a,"port"):_4},putFromName:function(a){return this.x?this.x.setAttributeText(a,"from"):_4},putTLS:function(a){return this.x?this.x.setAttributeText(a,"tls"):_4},putAuth:function(a){return this.x?this.x.setAttributeText(a,
"auth"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.asettings=_._1(_9,_1._1,_ic,{constructor:function(){_1.asettings.superclass.constructor.apply(this,arguments)},_ic:{getOffonDiskFail:function(){return this.x?this.x.getAttributeText("off_on_disk_fail"):_4},getOffonDiskOverheat:function(){return this.x?this.x.getAttributeText("off_on_disk_overheat"):_4},getSeverity:function(){return this.x?this.x.getAttributeText("mail_severity"):_4},getMonitorVolume:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("volume"):
_4},getMonitorDiskFailure:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("disk_failure"):_4},getMonitorFan:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("fan"):_4},getMonitorPower:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("power"):_4},getMonitorBoardTemp:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("board_temp"):_4},getMonitorUPS:function(){return this.x?
this.x.selectSingleNode("./Monitor").getAttributeText("ups"):_4},getMonitorDiskFull:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("disk_full"):_4},getMonitorDiskTemp:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("disk_temp"):_4},getMonitorAntivirus:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("antivirus"):_4},getMonitorQuotaExceed:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("quota_exceed"):
_4},getMonitorBoardTemp:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("board_temp"):_4},getMonitorPSU:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("psu"):_4},getFirmwareUpdate:function(){return this.x?this.x.selectSingleNode("./Monitor").getAttributeText("firmware_update"):_4},putOffonDiskFail:function(a){return this.x?this.x.setAttributeText(a,"off_on_disk_fail"):_4},putOffonDiskOverheat:function(a){return this.x?
this.x.setAttributeText(a,"off_on_disk_overheat"):_4},putSeverity:function(a){return this.x?this.x.setAttributeText(a,"mail_severity"):_4},putMonitorVolume:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"volume"):_4},putMonitorDiskFailure:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"disk_failure"):_4},putMonitorFan:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"fan"):_4},
putMonitorPower:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"power"):_4},putMonitorBoardTemp:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"board_temp"):_4},putMonitorUPS:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"ups"):_4},putMonitorDiskFull:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"disk_full"):_4},putMonitorDiskTemp:function(a){return this.x?
this.x.selectSingleNode("./Monitor").setAttributeText(a,"disk_temp"):_4},putMonitorAntivirus:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"antivirus"):_4},putMonitorQuotaExceed:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"quota_exceed"):_4},putMonitorBoardTemp:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"board_temp"):_4},putMonitorPSU:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,
"psu"):_4},putFirmwareUpdate:function(a){return this.x?this.x.selectSingleNode("./Monitor").setAttributeText(a,"firmware_update"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.smtpp=_._1(_9,_1._1,_id,{constructor:function(){_1.smtpp.superclass.constructor.apply(this,arguments)},_id:{getName:function(){return this.x?this.x.getAttributeText("name"):_4},getServer:function(){return this.x?this.x.getAttributeText("server"):_4},getDomain:function(){return this.x?this.x.getAttributeText("domain"):_4},getPort:function(){return this.x?this.x.getAttributeText("port"):_4},getTLS:function(){return this.x?
this.x.getAttributeText("tls"):_4},getHelpURL:function(){return this.x?this.x.getAttributeText("help_url"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.smtps=_._1(_9,_1._1,ISysAlertsSMTPServer,{constructor:function(){_1.smtps.superclass.constructor.apply(this,arguments)},ISysAlertsSMTPServer:{getHostName:function(){return _1.gp(this.xproptlist,"hostname")},getPort:function(){return _1.gp(this.xproptlist,"port")},getSocketType:function(){return _1.gp(this.xproptlist,"socketType")},getUserName:function(){return _1.gp(this.xproptlist,"username")},getAuthentication:function(){return _1.gp(this.xproptlist,"authentication")}},
_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(a),"_i5");return _5}}});_._2("_1");
_1.pwact=_._1(_9,_1._1,_i2f,{constructor:function(a){_1.pwact.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('<Action d="?" h="?" m="?" a="?"/>')).selectNodes("./*")[0])},_i2f:{getDayOfWeek:function(){return this.x?this.x.getAttributeText("d"):_4},getHour:function(){return this.x?this.x.getAttributeText("h"):_4},getMinute:function(){return this.x?this.x.getAttributeText("m"):_4},
getAction:function(){return this.x?this.x.getAttributeText("a"):_4},putDayOfWeek:function(a){return this.x?this.x.setAttributeText(a,"d"):_4},putHour:function(a){return this.x?this.x.setAttributeText(a,"h"):_4},putMinute:function(a){return this.x?this.x.setAttributeText(a,"m"):_4},putAction:function(a){return this.x?this.x.setAttributeText(a,"a"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.powerManager=_._1(_8("_i2h"),_1._1,_i2g,{constructor:function(){_1.powerManager.superclass.constructor.apply(this,arguments)},_i2g:{updatePowerSchedule:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="PowerSchedule" resource-type="System"/>',_.id())),a)},commitPowerSchedule:function(a){if(this.x){var b=this.x.selectSingleNode("./PowerSchedule").toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="PowerSchedule" resource-type="System">{1}</xs:set>',
_.id(),b)),a)}return S_FALSE},getActions:function(){return this.pw?this.pw.getChildren():_4},getSpindownActions:function(){return this.sd?this.sd.getChildren():_4},getSwitchType:function(){if(this.x)return this.x.selectSingleNode("./PowerSchedule").getAttributeText("type");return _4},setSwitchType:function(a){if(this.x){this.x.selectSingleNode("./PowerSchedule").xmlDocument.setAttribute("type",a);return _5}return _4},getEnablePowerSchedule:function(){if(this.x)return this.x.selectSingleNode("./PowerSchedule").getAttributeText("enable");
return _4},EnablePowerSchedule:function(a){if(this.x){this.x.selectSingleNode("./PowerSchedule").setAttributeText(a,"enable");return _5}return _4},appendAction:function(a){if(a&&this.x){var b=this.x.selectSingleNode("./PowerSchedule");if(b){a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return _a(this,"_i3").loadFromXml(this.x)}return _5}}return _4},appendActions:function(a){if(a){var b=this.x.selectSingleNode("./PowerSchedule");b&&_.each(a,
function(c){(c=_a(c,"_i3"))&&b.appendNode(c.getXml())},this);return _a(this,"_i3").loadFromXml(this.x)}return _4},removeAction:function(a){if(a&&this.x)if(a=this.x.selectSingleNode("./PowerSchedule/*[@d='"+a.getDayOfWeek()+"' and @h='"+a.getHour()+"' and @m='"+a.getMinute()+"' and @a='"+a.getAction()+"']"))if(a.removeNode())return _a(this,"_i3").loadFromXml(this.x);return _4},removeActions:function(a){if(a){this.x.selectSingleNode("./PowerSchedule")&&
_.each(a,function(b){(b=this.x.selectSingleNode("./PowerSchedule/*[@d='"+b.getDayOfWeek()+"' and @h='"+b.getHour()+"' and @m='"+b.getMinute()+"' and @a='"+b.getAction()+"']"))&&b.removeNode()},this);return _a(this,"_i3").loadFromXml(this.x)}return _4},removeAllActions:function(){if(this.x){var a=this.x.selectSingleNode("./PowerSchedule"),b=a.selectSingleNode("..");if(a){var c=a.getAttributeText("enable");if(a.removeNode()){b.appendNode(new _.Xml.document('<PowerSchedule enable="'+
c+'"/>'));return _a(this,"_i3").loadFromXml(this.x)}}return _5}return _4},appendSpindownAction:function(a){if(a&&this.x){var b=this.xsd;if(b){a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);return _a(this,"_i3").loadFromXml(this.xsd)}return _5}}return _4},appendSpindownActions:function(a){if(a){var b=this.xsd;b&&_.each(a,function(c){(c=_a(c,"_i3"))&&b.appendNode(c.getXml())},this);return _a(this,"_i3").loadFromXml(this.xsd)}return _4},
removeAllSpindownActions:function(){if(this.xsd)return this.xsd.removeNode("./Action");return _4},updateWakeOnLAN:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="WakeOnLAN" resource-type="System"/>',_.id())),a)},commitWakeOnLAN:function(a){if(this.xwl){var b=this.xwl.toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="WakeOnLAN" resource-type="System">{1}</xs:set>',_.id(),b)),a)}return S_FALSE},getWakeOnLanStatus:function(){if(this.xwl)return this.xwl.getAttributeText("enable")==
"true";return _4},putWakeOnLanStatus:function(a){if(this.xwl){this.xwl.setAttributeText(a?"true":"false","enable");return _5}return _4},updateSpindown:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Spindown" resource-type="System"/>',_.id())),a)},commitSpindown:function(a){if(this.xsd){var b=this.xsd.toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Spindown" resource-type="System">{1}</xs:set>',_.id(),
b)),a)}return _4},getSpindownStatus:function(){if(this.xsd)return this.xsd.getAttributeText("enable")=="true";return _4},putSpindownStatus:function(a){if(this.xsd){this.xsd.setAttributeText(a,"enable");return _5}return _4},putSpinUpOnTakingSnap:function(a){if(this.xsd){this.xsd.setAttributeText(a?"true":"false","spinup_for_snapshot");return _5}return _4},getSpinUpOnTakingSnap:function(){if(this.xsd)return this.xsd.getAttributeText("spinup_for_snapshot")==="true";return _4},
getSpindownTime:function(){if(this.xsd)return this.xsd.getAttributeText("minute");return _4},putSpindownTime:function(a){if(this.xsd){this.xsd.setAttributeText(a,"minute");return _5}return _4}},_i3:{Update:function(a){return _a(this,"_i2g").updatePowerSchedule(a)},Commit:function(a){return _a(this,"_i2g").commitPowerSchedule(a)},getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3"),c=a.getAttributeText("resource-id"),
d=a.selectNodes("./*");if(d&&d.length){d=d[0];switch(c){case "PowerSchedule":this.x=a;b.removeChild(this.pw);b.appendChild(this.pw=_a(new _1._1,"_i3"));(a=d.selectNodes("./Action"))&&_.each(a,function(e){var f=_a(new _1.pwact(true),"_i3");f.loadFromXml(e)==_5&&this.pw.appendChild(f)},this);return _5;case "WakeOnLAN":this.xwl=a.selectSingleNode("./WakeOnLAN");return _5;case "Spindown":this.xsd=a.selectSingleNode("./Spindown");b.removeChild(this.sd);if(a=this.xsd.selectNodes("./Action")){this.sd=
_a(new _1._1,"_i3");_.each(a,function(e){var f=_a(new _1.pwact(true),"_i3");f.loadFromXml(e)==_5&&this.sd.appendChild(f)},this);b.appendChild(this.sd)}return _5}}return _4}}});_._2("_1");
_1.sysfmw=_._1(_9,_1._1,_i42,{constructor:function(){_1.sysfmw.superclass.constructor.apply(this,arguments)},_i42:{getUpdateURL:function(){return _1.gp(this.xpr,"FirmwareImage_url")},getDescription:function(){return _1.gp(this.xpr,"FirmwareImage_description")},getVersion:function(){return _1.gp(this.xpr,"FirmwareImage_version")},getSize:function(){return _1.gp(this.xpr,"FirmwareImage_size")},getTime:function(){return _1.gp(this.xpr,"FirmwareImage_timestamp")}},
_i3:{loadFromXml:function(a){this.xpr=_a(new _1.xprop(a),"_i5");return _5}}});_._2("_1");
_1.backup=_._1(_8("_if"),_1._1,_ie,{constructor:function(a){_1.backup.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <BackupJob resource-id="0" resource-type="BackupJob">\t                  <Job_Id>0</Job_Id>                      <Job_Name></Job_Name>                      <Speed>0</Speed>                      <Runtime>0</Runtime>                      <Transferred>0</Transferred>\t                  <BackupJob_Resource item="Source">\t                    <Type>local</Type>\t                    <Share_Name_Or_Protocol></Share_Name_Or_Protocol>\t                    <Path></Path>\t                    <Login></Login>\t                    <Password></Password>\t                    <Port>0</Port>                        <Eject>0</Eject>\t                  </BackupJob_Resource>\t                  <BackupJob_Resource item="Destination">\t                    <Type>local</Type>                        <Share_Name_Or_Protocol></Share_Name_Or_Protocol>\t                    <Path></Path>\t                    <Login></Login>\t                    <Password></Password>\t                    <Port>0</Port>                        <Eject>0</Eject>\t                  </BackupJob_Resource>\t                  <Schedule>                        <Enabled>1</Enabled>\t                    <Frequency></Frequency>\t                    <Start></Start>\t                    <End></End>\t                    <DayOfWeek></DayOfWeek>\t                  </Schedule>\t                  <Option>\t                    <Full_Backup_Frequency></Full_Backup_Frequency>\t                    <Remove_Previous_Backup></Remove_Previous_Backup>\t                    <Chown_To_Share_Owner></Chown_To_Share_Owner>\t                    <Rsync_Option></Rsync_Option>\t                    <Rsync_Exclude></Rsync_Exclude>\t                    <Email_This_To_Alert_Email></Email_This_To_Alert_Email>\t                    <Misc_Option></Misc_Option>\t                    <Wol_Address/>\t                  </Option>\t             </BackupJob>')).selectNodes("./*")[0])},_ie:{getId:function(){return _1.gp(this.xbackup,
"Job_Id")},getName:function(){return _1.gp(this.xbackup,"Job_Name")},putName:function(a){return _1.pp(this.xbackup,"Job_Name",a)},getSpeed:function(){return _1.gp(this.xbackup,"Speed")},getRuntime:function(){return _1.gp(this.xbackup,"Runtime")},getTransferred:function(){return _1.gp(this.xbackup,"Transferred")},getStatus:function(){return _1.gp(this.xbackup,"Status")},getStatusDate:function(){return _1.gp(this.xbackup,"Status_Date")},getStatusResult:function(){return _1.gp(this.xbackup,"Status_Result")},
getWakingRemainingTime:function(){return _1.gp(this.xbackup,"Waking_Remaining_Time")},getSourceType:function(){return _1.gp(this.xsrc,"Type")},putSourceType:function(a){return _1.pp(this.xsrc,"Type",a)},getSourceShareNameOrProtocol:function(){return _1.gp(this.xsrc,"Share_Name_Or_Protocol")},putSourceShareNameOrProtocol:function(a){return _1.pp(this.xsrc,"Share_Name_Or_Protocol",a)},getSourcePath:function(){return _1.gp(this.xsrc,"Path")},putSourcePath:function(a){return _1.pp(this.xsrc,"Path",
a)},getSourceLogin:function(){return _1.gp(this.xsrc,"Login")},putSourceLogin:function(a){return _1.pp(this.xsrc,"Login",a)},getSourcePassword:function(){return _1.gp(this.xsrc,"Password")},putSourcePassword:function(a){return _1.pp(this.xsrc,"Password",a)},getSourcePort:function(){return _1.gp(this.xsrc,"Port")},putSourcePort:function(a){return _1.pp(this.xsrc,"Port",a)},getSourceEject:function(){return _1.gp(this.xsrc,"Eject")},putSourceEject:function(a){return _1.pp(this.xsrc,"Eject",a)},
getSourceEjectable:function(){return _1.gp(this.xsrc,"Ejectable")},getDestinationType:function(){return _1.gp(this.xdst,"Type")},putDestinationType:function(a){return _1.pp(this.xdst,"Type",a)},getDestinationShareNameOrProtocol:function(){return _1.gp(this.xdst,"Share_Name_Or_Protocol")},putDestinationShareNameOrProtocol:function(a){return _1.pp(this.xdst,"Share_Name_Or_Protocol",a)},getDestinationPath:function(){return _1.gp(this.xdst,"Path")},putDestinationPath:function(a){return _1.pp(this.xdst,
"Path",a)},getDestinationLogin:function(){return _1.gp(this.xdst,"Login")},putDestinationLogin:function(a){return _1.pp(this.xdst,"Login",a)},getDestinationPassword:function(){return _1.gp(this.xdst,"Password")},putDestinationPassword:function(a){return _1.pp(this.xdst,"Password",a)},getDestinationPort:function(){return _1.gp(this.xdst,"Port")},putDestinationPort:function(a){return _1.pp(this.xdst,"Port",a)},getDestinationEject:function(){return _1.gp(this.xdst,"Eject")},putDestinationEject:function(a){return _1.pp(this.xdst,
"Eject",a)},getDestinationEjectable:function(){return _1.gp(this.xdst,"Ejectable")},getSheduleEnabled:function(){return _1.gp(this.xsch,"Enabled")},putSheduleEnabled:function(a){return _1.pp(this.xsch,"Enabled",a)},getSheduleFrequency:function(){return _1.gp(this.xsch,"Frequency")},putSheduleFrequency:function(a){return _1.pp(this.xsch,"Frequency",a)},getSheduleStart:function(){return _1.gp(this.xsch,"Start")},putSheduleStart:function(a){return _1.pp(this.xsch,"Start",a)},getSheduleEnd:function(){return _1.gp(this.xsch,
"End")},putSheduleEnd:function(a){return _1.pp(this.xsch,"End",a)},getSheduleDayOfWeek:function(){return _1.gp(this.xsch,"DayOfWeek")},putSheduleDayOfWeek:function(a){return _1.pp(this.xsch,"DayOfWeek",a)},getFullBackupFrequency:function(){return _1.gp(this.xopt,"Full_Backup_Frequency")},putFullBackupFrequency:function(a){return _1.pp(this.xopt,"Full_Backup_Frequency",a)},getRemovePreviousBackup:function(){return _1.gp(this.xopt,"Remove_Previous_Backup")},putRemovePreviousBackup:function(a){return _1.pp(this.xopt,
"Remove_Previous_Backup",a)},getChownToShareOwner:function(){return _1.gp(this.xopt,"Chown_To_Share_Owner")},putChownToShareOwner:function(a){return _1.pp(this.xopt,"Chown_To_Share_Owner",a)},getRsyncOption:function(){return _1.gp(this.xopt,"Rsync_Option")},putRsyncOption:function(a){return _1.pp(this.xopt,"Rsync_Option",a)},getRsyncExclude:function(){return _1.gp(this.xopt,"Rsync_Exclude")},putRsyncExclude:function(a){return _1.pp(this.xopt,"Rsync_Exclude",a)},getEmailThisToAlertEmail:function(){return _1.gp(this.xopt,
"Email_This_To_Alert_Email")},putEmailThisToAlertEmail:function(a){return _1.pp(this.xopt,"Email_This_To_Alert_Email",a)},getMiscOption:function(){return _1.gp(this.xopt,"Misc_Option")},putMiscOption:function(a){return _1.pp(this.xopt,"Misc_Option",a)},getWolAddress:function(){return _1.gp(this.xopt,"Wol_Address")},putWolAddress:function(a){return _1.pp(this.xopt,"Wol_Address",a)},getTimeToWait:function(){return _1.gp(this.xopt,"Time_To_Wait")},putTimeToWait:function(a){return _1.pp(this.xopt,
"Time_To_Wait",a)},getProgress:function(){return _1.gp(this.xprogress,"Percentage")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){switch(a.getAttributeText("resource-type")){case undefined:case "BackupJob":this.x=a;this.xbackup=_a(new _1.xprop(this.x),"_i5");this.xopt=_a(new _1.xprop(this.x.selectSingleNode("./Option")),"_i5");this.xsch=_a(new _1.xprop(this.x.selectSingleNode("./Schedule")),"_i5");this.xsrc=_a(new _1.xprop(this.x.selectSingleNode('./*[@item="Source"]')),
"_i5");this.xdst=_a(new _1.xprop(this.x.selectSingleNode('./*[@item="Destination"]')),"_i5");this.xprogress=_a(new _1.xprop(this.x.selectSingleNode("./Progress")),"_i5");return _5}return _4}}});_._2("_1");
_1.bktarget=_._1(_9,_1._1,_ii,{constructor:function(){_1.bktarget.superclass.constructor.apply(this,arguments)},_ii:{getType:function(){return _1.gp(this.xtm,"Type")},getUSBSubType:function(){return _1.gp(this.xtm,"USB_Sub_Type")},getShareNameOrProtocol:function(){return _1.gp(this.xtm,"Share_Name_Or_Protocol")},getPath:function(){return _1.gp(this.xtm,"Path")},getEjectable:function(){return _1.gp(this.xtm,"Ejectable")},getRefId:function(){return this.x?
this.x.getAttributeText("resource-id"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xtm=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.bckManager=_._1(_8("_ih"),_1._1,_ig,{constructor:function(){_1.bckManager.superclass.constructor.apply(this,arguments)},_ig:{updateBackups:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="BackupJobs" resource-type="BackupJob_Collection"/>',_.id())),a)},getBackups:function(){return _a(this,"_i3").getChildren()},commitBackups:function(a,b){var c="";if(b&&b.length){for(var d=
0;d<b.length;++d)c+=_a(b[d],"_i3").getXml().toString();if(c)c="<BackupJob_Collection>"+c+"</BackupJob_Collection>"}else if(this.x)c=this.x.selectSingleNode("./BackupJob_Collection").toString();if(c)return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="BackupJobs" resource-type="BackupJob_Collection">{1}</xs:set>',_.id(),c)),a);return _4},deleteBackup:function(a,b){if(a&&_a(a,"_ie"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="BackupJob" c-resource-id="BackupJobs" c-resource-type="BackupJob_Collection"/>',
_.id(),a.getId())),b);return E_INVALIDARG},runBackups:function(a,b){var c="",d;if(a&&a.length)for(var e=0;e<a.length;++e){d=_a(a[e],"_ie");c+=String.format('<xs:command id="{0}" resource-id="{1}" resource-type="BackupJob">                            <xs:command_name>run</xs:command_name><xs:args/>                        </xs:command>',_.id(),d.getId())}if(c)return this.sendXml(_1._2(c),b);return E_INVALIDARG},cancelBackup:function(a,b){if(a&&_a(a,"_ie"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="BackupJob">                        <xs:command_name>cancel</xs:command_name><xs:args/></xs:command>',
_.id(),a.getId())),b);return E_INVALIDARG},addBackup:function(a,b){if(a&&_a(a,"_ie")){a=_a(a,"_i3").getXml().toString();return this.sendXml(_1._2(String.format(' <xs:add id="{0}" resource-type="BackupJob" c-resource-id="BackupJobs" c-resource-type="BackupJob_Collection">{1}</xs:add>',_.id(),a)),b)}return E_INVALIDARG},appendBackup:function(a){if(a&&this.x){var b=this.x.selectSingleNode("BackupJob_Collection");if(b){a=_a(a,"_i3");if(b=b.appendNode(a.getXml())){a.loadFromXml(b);
return _a(this,"_i3").loadFromXml(this.x)}}}return _4},removeBackup:function(a){if(a&&this.x)if(a=this.x.selectSingleNode("BackupJob_Collection/*[@resource-id='"+a.getId()+"']"))if(a.removeNode())return _a(this,"_i3").loadFromXml(this.x);return _4},testBackupConnection:function(a,b,c){a=_a(a,"_ie");c=c||0;if(a)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="'+c+'" resource-type="BackupJob_Resource">                            <xs:command_name>test-connection</xs:command_name>                            <xs:args>                                <xs:arg>                                    <BackupJob_Resource>                                    <Type>remote</Type>                                    <Share_Name_Or_Protocol>{1}</Share_Name_Or_Protocol>                                    <Path><![CDATA[{2}]]\></Path>                                    <Login><![CDATA[{3}]]\></Login>                                    <Password><![CDATA[{4}]]\></Password>                                    <Port><![CDATA[{5}]]\></Port>                                    </BackupJob_Resource>                                </xs:arg>                            </xs:args>                        </xs:command>',
_.id(),a.getSourceShareNameOrProtocol(),a.getSourcePath(),a.getSourceLogin()?a.getSourceLogin():"",a.getSourcePassword()?a.getSourcePassword():"",a.getSourcePort())),b);return _4},updateButtonBackups:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="BackupButtonJobs" resource-type="BackupButtonJob_Collection"/>',_.id())),a)},getButtonBackups:function(){return this.bbt?this.bbt.getChildren():_4},appendButtonBackup:function(a){if(a&&this.bx){var b=
this.bx.selectSingleNode("BackupButtonJob_Collection");if(b){a=new _.Xml.document(String.format("<BackupButtonJob><Job_Id>{0}</Job_Id></BackupButtonJob>",a));b.appendNode(a);return _a(this,"_i3").loadFromXml(this.bx)}}return _4},removeButtonBackup:function(a){if(a&&this.bx)if(a=this.bx.selectSingleNode("BackupButtonJob_Collection/BackupButtonJob[Job_Id='"+a+"']"))if(a.removeNode())return _a(this,"_i3").loadFromXml(this.bx);return _4},commitButtonBackups:function(a,
b){if(this.bx){var c="";if(b){for(var d=0;d<b.length;++d)c+=_a(b[d],"_i3").getXml().toString();c="<BackupButtonJob_Collection>"+c+"</BackupButtonJob_Collection>"}else c=this.bx.selectSingleNode("./BackupButtonJob_Collection").toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="BackupButtonJobs" resource-type="BackupButtonJob_Collection">{1}</xs:set>',_.id(),c)),a)}return _4},updateButtonBackupsLog:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="BackupButtonLog" resource-type="BackupButtonLog"/>',
_.id())),a)},getButtonBackupsLog:function(){return this.log?this.log:_4},clearButtonBackupsLog:function(a){return this.sendXml(_1._2(String.format('<xs:clear id="{0}" resource-id="BackupButtonLog" resource-type="BackupButtonLog"/>',_.id())),a)},updateLog:function(a,b){a=_a(a,"_ie");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BackupJobLog"/>',_.id(),a.getId())),b)},clearLog:function(a,b){a=_a(a,"_ie");
return this.sendXml(_1._2(String.format('<xs:clear id="{0}" resource-id="{1}" resource-type="BackupJobLog"/>',_.id(),a.getId())),b)},updateBackupsTargets:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="BackupTargets" resource-type="BackupTarget_Collection"/>',_.id())),a)},getBackupSourceTargets:function(){return this.bsrct?this.bsrct.getChildren():_4},getBackupDestinationTargets:function(){return this.bdstt?this.bdstt.getChildren():_4},
updateTimeMachine:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Timemachine" resource-type="Timemachine"/>',_.id())),a)},commitTimeMachine:function(a){if(this.tm){var b=this.tm.getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Timemachine" resource-type="Timemachine">{1}</xs:set>',_.id(),b)),a)}return _4},getTimeMachine:function(){return this.tm?this.tm:_4},updateVaultStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="VaultSettings" resource-type="VaultSettings"/>',
_.id())),a)},commitVaultStatus:function(a,b,c){b=b?"true":"false";c=String.format('<VaultService enable="'+b+'"/>                     <Volume>{1}</Volume>',b,c);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="VaultService" resource-type="VaultService">{1}</xs:set>',_.id(),c)),a)},commitVaultAction:function(a,b,c,d,e){b=String.format("<Action>{0}</Action>                     <UserName>{1}</UserName>                     <UserPassword><![CDATA[{2}]]\></UserPassword>                     <DefaultJob>{3}</DefaultJob>",
b,c,d,e);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="VaultSettings" resource-type="VaultSettings">{1}</xs:set>',_.id(),b)),a)},getVault:function(){return this.xvault?this.xvault:_4},dowloadSSHKey:function(a){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="download" resource-id="BackupJobs" resource-type="BackupJob_Collection"/>',_.id())),a)},updateDropBoxProvisioningStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DropBoxProvisioning" resource-type="DropBox"/>',
_.id())),a)},commitDropBoxProvisioningStatus:function(a){if(this.xdropbox){var b=this.xdropbox.getXml();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="DropBoxProvisioning" resource-type="DropBox">{1}</xs:set>',_.id(),b)),a)}return _4},getDropBox:function(){return this.xdropbox?this.xdropbox:_4},updateDropBoxAuthURL:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DropBoxAuthorizeUrl" resource-type="DropBox"/>',
_.id())),a)},getDropBoxAuthURL:function(){return this.xdropboxurl?this.xdropboxurl.getAttributeText("authorize-url"):_4},updateDropBoxShareList:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SimpleShare" resource-type="Share_Collection"/>',_.id())),a)},getDropBoxShareList:function(){return this.xdropboxshares?this.xdropboxshares.getChildren():_4},syncDropBoxShare:function(a,b){b=String.format('<DropBoxConfiguration mode="bidir">                     <ShareId><![CDATA[{0}]]\></ShareId>                     </DropBoxConfiguration>',
b);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="DropBoxConfiguration" resource-type="DropBox">{1}</xs:set>',_.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AmazonDrive_Status_Collection" resource-type="AmazonDrive_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:_4},updateAmazonProvisioningStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AmazonDriveProvisioning" resource-type="AmazonDrive"/>',
_.id())),a)},commitAmazonProvisioningStatus:function(a){if(this.xamazon){var b=this.xamazon.getXml();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AmazonDriveProvisioning" resource-type="AmazonDrive">{1}</xs:set>',_.id(),b)),a)}return _4},getAmazon:function(){return this.xamazon?this.xamazon:_4},updateAmazonAuthURL:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AmazonDriveAuthorizeUrl" resource-type="AmazonDrive"/>',
_.id())),a)},getAmazonAuthURL:function(){return this.xamazonurl?this.xamazonurl.getAttributeText("authorize-url"):_4},updateAmazonShareList:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SimpleShare" resource-type="Share_Collection"/>',_.id())),a)},getAmazonShareList:function(){return this.xamazonshares?this.xamazonshares.getChildren():_4},syncAmazonShare:function(a,b,c){for(var d="",e=0;e<b.length;++e)d+=String.format("<ShareId><![CDATA[{0}]]\></ShareId>",
b[e]);b=String.format('<AmazonDriveConfiguration mode="bidir" serial="{1}">{0}</AmazonDriveConfiguration>',d,c);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AmazonDriveConfiguration" resource-type="AmazonDrive">{1}</xs:set>',_.id(),b)),a)},updateAmazonLogs:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AmazonDriveLog" resource-type="AmazonDriveLog"/>',_.id())),a)},getAmazonLogs:function(){return this.amazonLogs?
this.amazonLogs.getChildren():_4},getAmazonLogsCount:function(){return this.lcnt?this.lcnt:_4},getAmazonTotalLogsCount:function(){return this.tlcnt?this.tlcnt:_4},updateMediaBackup:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="MbackupConf" resource-type="MbackupConf"/>',_.id())),a)},commitMediaBackup:function(a){if(this.xmedia)return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="MbackupConf" resource-type="MbackupConf">{1}</xs:set>',
_.id(),this.xmedia.getXml())),a);return _4},getMediaBackup:function(){return this.xmedia?this.xmedia:_4},updateMediaBackupStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="MbackupStat" resource-type="MbackupStat"/>',_.id())),a)},getMediaBackupStatus:function(){return this.xmediastatus?this.xmediastatus:_4},getMediaBackupStatus:function(){return this.xmediastatus?this.xmediastatus:_4},updateRemoteDirectories:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="0" resource-type="BackupJob_Resource">                    <xs:command_name>BrowseShares</xs:command_name>                    <xs:args>                        <xs:arg>                            <BackupJob_Resource>                                <Type>{1}</Type>                                <Protocol>{2}</Protocol>                                <Host><![CDATA[{3}]]\></Host>                                <Share><![CDATA[{4}]]\></Share>                                <Subfolder><![CDATA[{5}]]\></Subfolder>                                <Login><![CDATA[{6}]]\></Login>                                <Password><![CDATA[{7}]]\></Password>                                <Port><![CDATA[{8}]]\></Port>                            </BackupJob_Resource>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),a.type,a.protocol,a.host,a.share,a.subfolder,a.login,a.password,a.port)),a.lp)},createRemoteDir:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="0" resource-type="BackupJob_Resource">                    <xs:command_name>CreateRemoteSubfolder</xs:command_name>                    <xs:args>                        <xs:arg>                            <BackupJob_Resource>                                <Type>{1}</Type>                                <Protocol>{2}</Protocol>                                <Host><![CDATA[{3}]]\></Host>                                <Share><![CDATA[{4}]]\></Share>                                <Subfolder><![CDATA[{5}]]\></Subfolder>                                <Login><![CDATA[{6}]]\></Login>                                <Password><![CDATA[{7}]]\></Password>                                <Port><![CDATA[{8}]]\></Port>                            </BackupJob_Resource>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),a.type,a.protocol,a.host,a.share,a.subfolder,a.login,a.password,a.port)),a.lp)},getRemoteDirectories:function(){return this.arrRemoteShares?this.arrRemoteShares:_4}},_i3:{Update:function(a){var b=_a(this,"_ig");return b.updateButtonBackups(a)&&b.updateButtonBackupsLog(a)&&b.updateBackupsTargets(a)&&b.updateBackups(a)&&b.updateTimeMachine(a)&&b.updateVaultStatus(a)},Commit:function(a){var b=_a(this,"_ig");return b.commitBackups(a)&&b.commitButtonBackups(a)&&
b.commitTimeMachine(a)},getXml:function(){return this.x},loadFromXml:function(a,b){var c=_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var d=a.getAttributeText("resource-type");switch(d){case "BackupJob_Resource":if(a.selectSingleNode("BackupJob_Resource")){this.x=a;var e=a.selectNodes("BackupJob_Resource/Share_Name");this.arrRemoteShares=[];_.each(e,function(g){this.arrRemoteShares.push(g.getNodeText())},this)}return _5}return _5}else{d=a.getAttributeText("resource-type");
var f=a.getAttributeText("resource-id");if((e=a.selectNodes("./*"))&&e.length){e=e[0];switch(f){case "BackupJobs":this.x=a;c.removeAll();if(a=this.x.selectNodes("BackupJob_Collection")){a=this.x.selectNodes("BackupJob_Collection/BackupJob");_.each(a,function(g){var h=_a(new _1.backup(true),"_i3");h.loadFromXml(g)==_5&&c.appendChild(h)},this);return _5}break;case "BackupButtonJobs":this.bx=a;if(a=this.bx.selectNodes("BackupButtonJob_Collection")){a=this.bx.selectNodes("BackupButtonJob_Collection/BackupButtonJob");
this.bbt=_a(new _1._1,"_i3");_.each(a,function(g){var h=_a(new _1.backup(true),"_i3");h.loadFromXml(g)==_5&&this.bbt.appendChild(h)},this);return _5}break;case "BackupButtonLog":if(a=e.selectSingleNode("./Contents")){this.log=a.getNodeText();return _5}break;case "Timemachine":a=e;if(_.isDefined(a)){this.tm=_a(new _1.tm,"_i3");if(this.tm.loadFromXml(a)==_5)return _5}break;case "BackupTargets":this.bdstt=this.bsrct=undefined;if(b=e.selectNodes("./Available_Source/BackupTarget")){this.bsrct=
_a(new _1._1,"_i3");_.each(b,function(g){var h=_a(new _1.bktarget(true),"_i3");h.loadFromXml(g)==_5&&this.bsrct.appendChild(h)},this)}if(e=e.selectNodes("./Available_Destination/BackupTarget")){this.bdstt=_a(new _1._1,"_i3");_.each(e,function(g){var h=_a(new _1.bktarget(true),"_i3");h.loadFromXml(g)==_5&&this.bdstt.appendChild(h)},this)}return this.bsrct||this.bdstt?_5:_4;case "VaultSettings":a=e;if(_.isDefined(a)){this.xvault=
_a(new _1.vault,"_i3");if(this.xvault.loadFromXml(a)==_5)return _5}break;case "DropBoxProvisioning":a=e;if(_.isDefined(a)){this.xdropbox=_a(new _1.dropbox,"_i3");if(this.xdropbox.loadFromXml(a)==_5)return _5}break;case "DropBoxAuthorizeUrl":this.xdropboxurl=e;if(_.isDefined(this.xdropboxurl))return _5;break;case "SimpleShare":if(e=a.selectNodes("Share_Collection/*")){this.xdropboxshares=_a(new _1._1,"_i3");this.xamazonshares=_a(new _1._1,
"_i3");_.each(e,function(g){var h=_a(new _1.dropboxshare,"_i3");h.loadFromXml(g)==_5&&this.xdropboxshares.appendChild(h);h=_a(new _1.amazonshare,"_i3");h.loadFromXml(g)==_5&&this.xamazonshares.appendChild(h)},this)}return _5;case "AmazonDriveProvisioning":a=e;if(_.isDefined(a)){this.xamazon=_a(new _1.amazon,"_i3");if(this.xamazon.loadFromXml(a)==_5)return _5}break;case "AmazonDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=
_a(new _1.cloudstatus,"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break;case "AmazonDriveAuthorizeUrl":this.xamazonurl=e;if(_.isDefined(this.xamazonurl))return _5;break;case "AmazonDriveLog":if(a=e.selectSingleNode("./Log_Collection")){this.lcnt=parseInt(a.getAttributeText("n_entries"));this.tlcnt=parseInt(a.getAttributeText("n_total_entries"));a=e.selectNodes("./Log_Collection/Log");this.amazonLogs=_a(new _1._1,"_i3");_.each(a,
function(g){var h=_a(new _1.log,"_i3");h.loadFromXml(g)==_5&&this.amazonLogs.appendChild(h)},this);c.appendChild(this.amazonLogs);return _5}break;case "MbackupConf":a=e;if(_.isDefined(a)){this.xmedia=_a(new _1.mediabackup,"_i3");if(this.xmedia.loadFromXml(a)==_5)return _5}break;case "MbackupStat":a=e;if(_.isDefined(a)){this.xmediastatus=_a(new _1.mediabackupstatus,"_i3");if(this.xmediastatus.loadFromXml(a)==_5)return _5}break}switch(d){case "BackupJobLog":a=
e;if(_.isDefined(a))if(a=a.selectSingleNode("./Contents")){this.Fire("OnLogUpdate",[b,a.getNodeText()]);return _5}break}}}return _4}}});_._2("_1");
_1.tm=_._1(_9,_1._1,_il,{constructor:function(){_1.tm.superclass.constructor.apply(this,arguments)},_il:{getEnable:function(){return _1.gp(this.xtm,"Enabled")},putEnable:function(a){return _1.pp(this.xtm,"Enabled",a)},getPassword:function(){return _1.gp(this.xtm,"Password")},putPassword:function(a){return _1.pp(this.xtm,"Password",a)},getCapacity:function(){return _1.gp(this.xtm,"Capacity_MB")},putCapacity:function(a){return _1.pp(this.xtm,"Capacity_MB",
a)},getProtocol:function(){return _1.gp(this.xtm,"Protocol")},putProtocol:function(a){return _1.pp(this.xtm,"Protocol",a)},getMaxCapacity:function(){return _1.gp(this.xtm,"Max_Capacity_MB")},getUserName:function(){return _1.gp(this.xtm,"User_Name")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xtm=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.vault=_._1(_9,_1._1,_im,{constructor:function(){_1.vault.superclass.constructor.apply(this,arguments)},_im:{getEnable:function(){return _1.gp(this.xv,"VaultService")==="Enabled"?true:false},getVersion:function(){return _1.gp(this.xv,"Version")},getHostname:function(){return _1.gp(this.xv,"Hostname")},getUsername:function(){return _1.gp(this.xv,"UserName")},getVolume:function(){return _1.gp(this.xv,"Volume")},getDefaultJob:function(){return _1.gp(this.xv,"DefaultJob")}},
_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xv=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.addon=_._1(_9,_1._1,_i7,{constructor:function(){_1.addon.superclass.constructor.apply(this,arguments)},_i7:{getName:function(){return _1.gp(this.xad,"name")},getDispalyName:function(){return _1.gp(this.xad,"friendly_name")},getversion:function(){return _1.gp(this.xad,"version")},getMinRaidiatorVersion:function(){return _1.gp(this.xad,"min_raidiator_version")},getAuthor:function(){return _1.gp(this.xad,"author")},getDescription:function(){if(this.x){var a=_a(_a(this,
"_i3").getRoot(),"_i2").getSystemManager().getLocaleManager().getLocale();a=a!=_4?a:"en-us";if(a=this.x.selectSingleNode("./description/"+a))return a.getNodeText();else if(a=this.x.selectSingleNode("./description/en-us"))return a.getNodeText()}return _4},getCurrentUrl:function(){return _1.gp(this.xad,"current_url")},getDetailUrl:function(){return _1.gp(this.xad,"detail_url")},getDownloadUrl:function(){return _1.gp(this.xad,"download_url")},getLaunchUrl:function(){return _1.gp(this.xad,
"launch_url")},getIconUrl:function(){return _1.gp(this.xad,"icon")},getStatus:function(){return _1.gp(this.xad,"status")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xad=_a(new _1.xprop(this.x),"_i5");return _5}}});
_1.addManager=_._1(_8("_i9"),_1._1,_i8,{constructor:function(){_1.addManager.superclass.constructor.apply(this,arguments)},_i8:{updateAvailableAddons:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AvailableAddons" resource-type="addon_Collection"/>',_.id())),a)},updateInstalledAddons:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="InstalledAddons" resource-type="addon_Collection"/>',
_.id())),a)},installAddonRemotely:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:update resource-id="{0}" resource-type="Addon">                    <Addon resource-id="{0}" resource-type="Addon">                        <Name>{1}</Name>                        <Location>remote</Location>                        <Resource>{2}</Resource>                        <Icon>{3}</Icon>                     </Addon>                  </xs:update>',_.id(),a,b,c)),d)},getInstalledAddons:function(){return this.iaddons?
this.iaddons.getChildren():_4},getAvailableAddons:function(){return this.paddons?this.paddons.getChildren():_4}},_iw:{OnEvent:function(a,b,c,d,e){switch(e){case "xs:add-s":this.Fire("OnInstall",[c]);break;case "xs:delete-s":this.Fire("OnRemove",[c]);break}return _5}},_i3:{Update:function(a){var b=_a(this,"_i8");return b.updateAvailableAddons(a)&&b.updateInstalledAddons(a)},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),
"_i1").Advise(this,"Addon");return _4},getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a[0];switch(c){case "AvailableAddons":c=a.selectNodes("./addon");this.paddons=_a(new _1._1,"_i3");_.each(c,function(d){var e=_a(new _1.addon,"_i3");e.loadFromXml(d)==_5&&this.paddons.appendChild(e)},this);b.appendChild(this.paddons);return _5;case "InstalledAddons":c=
a.selectNodes("./addon");this.iaddons=_a(new _1._1,"_i3");_.each(c,function(d){var e=_a(new _1.addon,"_i3");e.loadFromXml(d)==_5&&this.iaddons.appendChild(e)},this);b.appendChild(this.iaddons);return _5}}return _4}}});_._2("_1");
_1.album=_._1(_9,_1._1,_i7,{constructor:function(){_1.album.superclass.constructor.apply(this,arguments)},_i2c:{getCoverUrl:function(){return _1.gp(this.xad,"cover_url")},getTitle:function(){return _1.gp(this.xad,"title")},getDescription:function(){return _1.gp(this.xad,"description")},getOwnerName:function(){return _1.gp(this.xad,"owner_name")},getOwnerFirstName:function(){return _1.gp(this.xad,"owner_firstname")},getOwnerLastName:function(){return _1.gp(this.xad,
"owner_lastname")},getPunlishedOn:function(){return _1.gp(this.xad,"published_on")},getLastInvitation:function(){return _1.gp(this.xad,"last_invitation")},getItemsCount:function(){return _1.gp(this.xad,"n_item")},getGuestsCount:function(){return _1.gp(this.xad,"n_guest")},getGuestsViewCount:function(){return _1.gp(this.xad,"n_guest_view")},getLastGuestsViewCount:function(){return _1.gp(this.xad,"last_guest_view")},getPublicViewCount:function(){return _1.gp(this.xad,"n_public_view")},getLastPublicViewCount:function(){return _1.gp(this.xad,
"last_public_view")},getAlbumURL:function(){return _1.gp(this.xad,"album_url")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xad=_a(new _1.xprop(this.x),"_i5");return _5}}});
_1.albumManager=_._1(_8("_i2e"),_1._1,_i2d,{constructor:function(){_1.albumManager.superclass.constructor.apply(this,arguments)},_i2d:{updateAlbums:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Albums" resource-type="AlbumsCollection"/>',_.id())),a,b.getSourcePHURL(),"BIN","GET")},getAlbums:function(){return this.albums?this.albums.getChildren():
_4},getVersion:function(){return _1.gp(this.xsummary,"version")},getCountOfAlbums:function(){return _1.gp(this.xsummary,"n_album")},getCountOfSharedAlbums:function(){return _1.gp(this.xsummary,"n_shared_album")},getCountOfPhotographers:function(){return _1.gp(this.xsummary,"n_photographer")},getConfigURL:function(){return _1.gp(this.xsummary,"config_url")},getLoginURL:function(){return _1.gp(this.xsummary,"login_url")}},_i3:{Update:function(a){return _a(this,"_i2d").updateAlbums(a)},
getXml:function(){return this.x},loadFromXml:function(a){this.x=a;a=_a(this,"_i3");a.removeAll();this.xalbums=this.x.selectNodes("photos2/recent_shared_albums/album");this.xsum=this.x.selectSingleNode("photos2/summary");this.xsummary=_a(new _1.xprop(this.xsum),"_i5");if(this.xalbums||this.xsum){this.albums=_a(new _1._1,"_i3");_.each(this.xalbums,function(b){var c=_a(new _1.album,"_i3");c.loadFromXml(b)==_5&&this.albums.appendChild(c)},
this);a.appendChild(this.albums);return _5}return _4}}});_._2("_1");
_1.sysntp=_._1(_9,_1._1,_i46,{constructor:function(){_1.sysntp.superclass.constructor.apply(this,arguments)},_i46:{getEnable:function(){return this.x?this.x.getAttributeText("enable"):_4},putEnable:function(a){return this.x?this.x.setAttributeText(a,"enable"):_4},getServers:function(){return this.x?[this.x.getAttributeText("server1"),this.x.getAttributeText("server2"),this.x.getAttributeText("server3")]:_4},putServers:function(a){if(this.x){this.x.setAttributeText(a[0]||
"","server1");this.x.setAttributeText(a[1]||"","server2");this.x.setAttributeText(a[2]||"","server3")}else return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.hourmap=_._1(_9,_1._1,ISysHourMapInfo,{constructor:function(){_1.hourmap.superclass.constructor.apply(this,arguments)},ISysHourMapInfo:{getEnable:function(){return this.x?this.x.getAttributeText("enable"):_4},putEnable:function(a){return this.x?this.x.setAttributeText(a,"enable"):_4},getFormatType:function(){return this.x?this.x.getAttributeText("date_format"):_4},putFormatType:function(a){return this.x?this.x.setAttributeText(a,"date_format"):_4}},_i3:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.xdisk=_._1(_9,_1._1,_i4c,{constructor:function(){_1.xdisk.superclass.constructor.apply(this,arguments)},_i4c:{getId:function(){return this.xid},getSlotNumber:function(){return _1.gp(this.xdisk,"Slot")},getSlotBusyState:function(){return _1.gp(this.xdisk,"Type")},getUsage:function(){return _1.gp(this.xdisk,"Usage")}},_i3:{loadFromXml:function(a){this.x=a;this.xid=this.x.getAttributeText("id");this.xdisk=_a(new _1.xprop(this.x),"_i5");
return _5}}});_._2("_1");
_1.xvol=_._1(_9,_1._1,_i4b,{constructor:function(){_1.xvol.superclass.constructor.apply(this,arguments)},_i4b:{getId:function(){return this.xid},getName:function(){return _1.gp(this.xvol,"Name")},getRaidLevel:function(){return _1.gp(this.xvol,"RaidLevel")},getCapacity:function(){return _1.gp(this.xvol,"Capacity")},getState:function(){return _1.gp(this.xvol,"State")},getVolumeDisks:function(){return this.disks?this.disks.getChildren():_4},getTimeToComplete:function(){return this.xstt?
this.xstt.getAttributeText("Finish-Seconds"):_4},getPercentage:function(){return this.xstt?this.xstt.getAttributeText("Percentage-Completed"):_4},getSpeed:function(){return this.xstt?this.xstt.getAttributeText("Speed"):_4}},_i3:{loadFromXml:function(a){this.x=a;a=_a(this,"_i3");a.removeAll();this.xid=this.x.getAttributeText("resource-id");this.xstt=this.x.selectSingleNode("./State");this.xvol=_a(new _1.xprop(this.x),"_i5");var b=this.x.selectNodes("Disk_collection/Disk");
if(b){this.disks=_a(new _1._1,"_i3");_.each(b,function(c){var d=_a(new _1.xdisk,"_i3");d.loadFromXml(c)==_5&&this.disks.appendChild(d)},this);a.appendChild(this.disks)}return _5}}});_._2("_1");
_1.xrManager=_._1(_8("_i4a"),_1._1,_i40,{constructor:function(){_1.xrManager.superclass.constructor.apply(this,arguments)},_i40:{updateXRaidInfo:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Volumes" resource-type="Volume_Collection"/>',_.id())),a)},getXRaidVolumes:function(){return this.vols?this.vols.getChildren():_4},getXRaidType:function(){return _1.gp(this.xrprops,"Type")},getXRaidExpandble:function(){return _1.gp(this.xrprops,
"Expandble")},getXRaidPermissibleDisksCount:function(){return _1.gp(this.xrprops,"Permisible_Disks")},getXRaidInstalledDisksCount:function(){return _1.gp(this.xrprops,"Installed_Disks")}},_i3:{Update:function(a){return _a(this,"_i40").updateXRaidInfo(a)},loadFromXml:function(a){this.x=a;a=_a(this,"_i3");a.removeAll();this.xrprops=_a(new _1.xprop(this.x.selectSingleNode("Volume_Collection/Property_List")),"_i5");var b=this.x.selectNodes("Volume_Collection/Volume");
if(b){this.vols=_a(new _1._1,"_i3");_.each(b,function(c){var d=_a(new _1.xvol,"_i3");d.loadFromXml(c)==_5&&this.vols.appendChild(d)},this);a.appendChild(this.vols)}return _5}}});_._2("_1");
_1.wevnt=_._1(_8("_iw"),_1._1,_iv,_iw,{constructor:function(){_1.wevnt.superclass.constructor.apply(this,arguments);this.webSink=_a(this,"_iv")},_iw:{_o3:function(a){if(a!=_5){_2("Web event sink establishment failed.","Will try to establish sink in 5 seconds...",_2.WARNING,"_iv");if(!this.m_listenid)this.m_listenid=this.webSink.Listen.defer(5E3,
this);return _5}}},_iv:{Listen:function(){if(this.m_listenid){clearTimeout(this.m_listenid);this.m_listenid=undefined}this.m_active||_a(this,"_i1").Advise(this);this.m_active=true;return this.sendXml(_1._2(String.format('<xs:event-subscribe id="{0}" operation="*" resource-id="*" resource-type="*"/>',_.id())),"DPV_WEB_EVENTS")},StopListen:function(){if(this.m_listenid){clearTimeout(this.m_listenid);this.m_listenid=undefined}_a(this,"_i1").Unadvise(this);
this.m_active=false;return _5}},_i3:{loadFromXml:function(a){if(this.m_active){var b=a.getNodeName(),c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id"),e=a.selectNodes("./*");this.Fire("OnEvent",[a,e,d,c,b],c);if(!this.m_listenid)this.m_listenid=this.webSink.Listen.defer(5E3,this)}return _5}}});_._2("_1");
_1.device5200=_._1(_1.CLSIDS.Device5200,_1.device,{constructor:function(){_1.device5200.superclass.constructor.apply(this,arguments);this.m_timeout=7E4;this.m_fwurl=document.fwbroker},_i2:{getReplicateSystem:function(){return this._sys_repl||(this._sys_repl=_a(this,"_i3").appendChild(_a(new _1.repl,"IReplicate")))},getRepliSyncSystem:function(){return this._sys_replisync||(this._sys_replisync=_a(this,"_i3").appendChild(_a(new _1.replisync,"IRepliSync")))},
getZFSVolumesManager:function(){return this._mngr_zfsVols||(this._mngr_zfsVols=_a(this,"_i3").appendChild(_a(new _1.zfsVolsManager,"_i4u")))},getZFSDisksManager:function(){return this._mngr_zfsDisks||(this._mngr_zfsDisks=_a(this,"_i3").appendChild(_a(new _1.zfsDisksManager,"_i4g")))},getZFSSnapshotsManager:function(){return this._mngr_zfsSnapshots||(this._mngr_zfsSnapshots=_a(this,"_i3").appendChild(_a(new _1.zfsSnapshotsManager,
"_i4k")))},getISCSIManager:function(){return this._mngr_iscsi||(this._mngr_iscsi=_a(this,"_i3").appendChild(_a(new _1.iscsimngr,"_i1m")))},getUpsConfigManager:function(){return this._mngr_upsConfig||(this._mngr_upsConfig=_a(this,"_i3").appendChild(_a(new _1.upsConfigManager,"_i1h")))},getFirmwareManager:function(){return this._mngr_fw||(this._mngr_fw=_a(this,"_i3").appendChild(_a(new _1.fwManager,"_i3v")))},
getStatsManager:function(){return this._mngr_stats||(this._mngr_stats=_a(this,"_i3").appendChild(_a(new _1.statsManager,"_i3y")))},getVolumeScheduleManager:function(){return this._mngr_zfsVolSchedule||(this._mngr_zfsVolSchedule=_a(this,"_i3").appendChild(_a(new _1.zfsVolScheduleManager,"_i4s")))},getHFSnapshotsManager:function(){return this._mngr_hfSnapshots||(this._mngr_hfSnapshots=_a(this,"_i3").appendChild(_a(new _1.hfSnapshotsManager,
"IHFSnapshotsManager")))},getNetworkVLANManager:function(){return this._mngr_networkVLAN||(this._mngr_networkVLAN=_a(this,"_i3").appendChild(_a(new _1.networkVLANManager,"INetworkVLANManager")))},getNetworkProxyManager:function(){return this._mngr_netProxy||(this._mngr_netProxy=_a(this,"_i3").appendChild(_a(new _1.netProxyManager,"INetworkProxyManager")))},putSourceFWURL:function(a){this.m_fwurl=a;return _5},getSourceFWURL:function(){return this.m_fwurl}},
_i3:{Update:function(a){return _a(this,"_i2").updateDeviceState(a)},Commit:function(a){return _a(this,"_i2").commitDeviceState(a)},loadFromXml:function(a){var b=_a(this,"_i3"),c=a.getAttributeText("resource-id");if((a=a.selectNodes("./*"))&&a.length){a=a?a[0]:undefined;switch(c){case "DeviceState":this.deviceState=_a(new _1.devState,"_i3");if(this.deviceState.loadFromXml(a)==_5){b.removeChild(b.getChildByTrait("_it"));b.appendChild(this.deviceState);
return _5}break}}return _4}}});_._2("_1");
_1.zfsVolsManager=_._1(_8("_i3v"),_1._1,_i4u,_i3v,{constructor:function(){_1.zfsVolsManager.superclass.constructor.apply(this,arguments);_a(this,"_i1").Advise(this)},_i4u:{UpdateVolumes:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Volumes" resource-type="Volume_Collection"/>',_.id())),a)},getVolumes:function(){return this.volumes?_a(this.volumes,
"_i3").getChildren():_4},getActiveVolumes:function(){return this.activeVolumes?_a(this.activeVolumes,"_i3").getChildren():_4},getEjectableVolumes:function(){return this.ejectableVolumes?_a(this.ejectableVolumes,"_i3").getChildren():_4},getVolumeById:function(a){return this.volumes?this.volumes.hash[a]:null},AppendVolume:function(a,b){if(_a(a,"_i4o")){a=_a(a,"_i3").getXml().toString();return this.sendXml(_1._2(String.format(' <xs:add id="{0}" resource-type="Volume" c-resource-id="Volumes" c-resource-type="Volume_Collection">{1}</xs:add>',
_.id(),a)),b)}return _4},RemoveVolume:function(a,b){var c=_a(a,"_i4o");if(c){var d=c.getVolumeId();if(c=_a(this,"_i4u").getVolumeById(d)){b=_.isString(b)?new String(b):!b?{}:b;b.vid=d;return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Volume" c-resource-id="Volumes" c-resource-type="Volume_Collection">                        {2}                        </xs:delete>',_.id(),d,_a(a,"_i3").getXml().toString())),
b)}}return _4},ReplaceVolumeDisk:function(a,b,c,d){a=_a(a,"_i4o");b=_a(b,"_i3");c=_a(c,"_i3");if(a&&b&&c)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                          <xs:command_name>Replace</xs:command_name>                          <xs:args>                            <xs:arg>                              <Old_Device>                                {2}                              </Old_Device>                              <New_Device>                                {3}                              </New_Device>                            </xs:arg>                          </xs:args>                    </xs:command>',
_.id(),a.getVolumeName(),b.getXml().toString(),c.getXml().toString())),d);return _4},AttachVolumeDisk:function(a,b,c,d){a=_a(a,"_i4o");b=_a(b,"_i3");c=_a(c,"_i3");if(a&&b&&c)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                          <xs:command_name>Attach</xs:command_name>                          <xs:args>                            <xs:arg>                              <Device>                                {2}                              </Device>                              <New_Device>                                {3}                              </New_Device>                            </xs:arg>                          </xs:args>                    </xs:command>',
_.id(),a.getVolumeName(),b.getXml().toString(),c.getXml().toString())),d);return _4},DetachVolumeDisk:function(a,b,c){a=_a(a,"_i4o");b=_a(b,"_i3");if(a&&b)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                        <xs:command_name>Detach</xs:command_name>                            <xs:args>                                <xs:arg>                                    <Device>{2}</Device>                                </xs:arg>                            </xs:args>                     </xs:command>',
_.id(),a.getVolumeName(),b.getXml().toString())),c);return _4},ExportVolume:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                            <xs:command_name>Export_Volume</xs:command_name>                         </xs:command>',_.id(),a.getVolumeName())),b);return _4},Export:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Export</xs:command_name>                    <xs:args>                        <xs:arg>                            <GUID>{2}</GUID>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),a.getVolumeId(),a.getGuid())),b);return _4},ImportVolume:function(a,b,c,d){if(_a(volume,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                            <xs:command_name>Import_Volume</xs:command_name>                            <xs:args><xs:arg>                                <Force_Import>{3}</Force_Import>                                <New_Volume_Name>{2}</New_Volume_Name>                            </xs:arg></xs:args>                         </xs:command>',
_.id(),a,b,c?"true":"false")),d);return _4},RemoveVolumeDisk:function(a,b,c){if(a=_a(a,"_i4o")){var d="";if(_.isArray(b))_.each(b,function(e){e=_a(e,"_i3");d+=e.getXml().toString()});else if(b=_a(b,"_i3"))d+=b.getXml().toString();if(d!="")return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                        <xs:command_name>RemoveDisk_From_Volume</xs:command_name>                            <xs:args><xs:arg>                                <Device>{2}</Device>                            </xs:arg></xs:args>                     </xs:command>',
_.id(),a.getVolumeName(),d)),c)}return _4},ExpandCapacity:function(a,b,c,d){return this.ExpandVolume(a,b,c,"capacity",null,d)},ExpandRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,"raid_group",d,e)},ExpandNewRaidGroup:function(a,b,c,d,e){return this.ExpandVolume(a,b,c,d?"concatenate":"stripe",null,e)},AddParity:function(a,b,c){a=_a(a,"_i4o");for(var d="",e,f=0;f<b.length;++f)if(e=_a(b[f],"_i3"))d+=e.getXml().toString();if(a&&d)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                        <xs:command_name>Add_Parity</xs:command_name>                        <xs:args>                            <xs:arg>                                {2}                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),a.getVolumeName(),d)),c);return _4},UpdateVolumeIOStat:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>IOStat</xs:command_name>                </xs:command>',_.id(),a.getVolumeId())),b);return _4},RemoveRaidGroup:function(a,b,c){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Remove_RAID_Group</xs:command_name>                    <xs:args>                        <xs:arg>                            <VDEV_ID>{2}</VDEV_ID>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),a.getVolumeId(),b)),c);return _4},UpdateVolume:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format(' <xs:get id="{0}" resource-id="{1}" resource-type="Volume"/>',_.id(),a.getVolumeId())),b);return _4},CommitVolume:function(a,b){if(a=_a(a,"_i3").getXml())return this.sendXml(_1._2(String.format('<xs:update id="{0}" resource-type="Volume" c-resource-id="Volumes" c-resource-type="Volume_Collection">{1}</xs:update>',_.id(),
a.toString())),b);return _4},StartVolumeScrub:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Scrub_Volume</xs:command_name>                    <xs:args>                        <xs:arg>                            <Stop_Scrub>false</Stop_Scrub>                        </xs:arg>                    </xs:args>                </xs:command>',_.id(),a.getVolumeId())),
b);return _4},StopVolumeScrub:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Scrub_Volume</xs:command_name>                    <xs:args>                        <xs:arg>                            <Stop_Scrub>true</Stop_Scrub>                        </xs:arg>                    </xs:args>                </xs:command>',_.id(),a.getVolumeId())),b);
return _4},DefragVolume:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Defrag_Volume</xs:command_name>                </xs:command>',_.id(),a.getVolumeId())),b);return _4},TrimVolume:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>SSD_Trim_Volume</xs:command_name>                </xs:command>',
_.id(),a.getVolumeId())),b);return _4},StartVolumeBalance:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Balance_Volume</xs:command_name>                </xs:command>',_.id(),a.getVolumeId())),b);return _4},StartVolumeDiskTest:function(a,b){if(a=_a(a,"_i4o"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Disk_Test</xs:command_name>                </xs:command>',
_.id(),a.getVolumeId())),b);return _4}},ExpandVolume:function(a,b,c,d,e,f){b=_a(b,"_i4o");var g="",h="";if(b&&c){var k="";_.each(c,function(j){k+=String.format('<Disk resource-id="{0}" />',j.getDiskId())});if(d=="raid_group")g=String.format("<xs:arg><Expansion_Target>{0}</Expansion_Target></xs:arg>",e);if(f)h=String.format('<xs:arg><Encryption enabled="{0}" mount="{1}" /></xs:arg>',f?"1":"0",f||"");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Volume">                    <xs:command_name>Expand</xs:command_name>                    <xs:args>                        <xs:arg>                            <Expansion_Type>{2}</Expansion_Type>                        </xs:arg>                        {3}                        <xs:arg>                            <Disks_List>{4}</Disks_List>                        </xs:arg>                        {5}                    </xs:args>                </xs:command>',
_.id(),b.getVolumeName(),d,g,k,h)),a)}return _4},_i3v:{_o3:function(a,b,c){if(a==_5&&c.vid){a=_a(this,"_i4u").getVolumeById(c.vid);this.volumes.removeChild(_a(a,"_i3"))}}},_iw:{OnEvent:function(a,b,c,d,e){var f;switch(e){case "xs:add-s":c&&this.Fire("OnVolumeAdd",[c]);break;case "xs:update-s":if(b&&b[0]||c){if(a=b&&b[0]?b[0].getAttributeText("resource-id"):c)if((f=_a(this,"_i4u").getVolumeById(a))&&
b&&b[0])if(_a(f,"_i3").loadFromXml(b[0])!=_5)f=undefined;this.Fire("OnVolumeUpdate",[f])}break}return _5}},_i3:{Update:function(a){return _a(this,"_i4u").UpdateVolumes(a)},getXml:function(){return this.x},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),"_i1").Advise(this,"Volume");return _4},loadFromXml:function(a){var b=_a(this,"_i3");if(this.xvolumes=a.selectNodes("Volume_Collection")){this.x=
a;this.xvolumes=a.selectNodes("Volume_Collection/Volume");b.removeChild(b.getChildByTrait("_i4o"));this.volumes=_a(new _1._1,"_i3");this.volumes.hash=[];this.activeVolumes=_a(new _1._1,"_i3");this.ejectableVolumes=_a(new _1._1,"_i3");_.each(this.xvolumes,function(f){var g=_a(new _1.zfsVol(true),"_i3");if(g.loadFromXml(f)==_5){var h=_a(g,"_i4o");h.getEjectable()?this.ejectableVolumes.appendChild(g):this.volumes.appendChild(g);
this.volumes.hash[h.getVolumeId()]=h;if(!h.getEjectable()&&h.getState()!="INACTIVE"){g=_a(new _1.zfsVol(true),"_i3");g.loadFromXml(f);this.activeVolumes.appendChild(g)}}},this);return _5}if(a.getAttributeText("resource-type")=="Volume"){b=a.getNodeName();var c=this.volumes.hash[a.getAttributeText("resource-id")];if(b=="xs:command-s"){var d=a.selectSingleNode("Volume_IOStat");if(c&&d){var e=_a(new _1.zfsVolStat,"_i3");e.loadFromXml(d)==_5&&c.putIOStat(_a(e,"_i4q"))}}b==
"xs:get-s"&&c&&_a(c,"_i3").loadFromXml(a.selectSingleNode("Volume"));return _5}return _4}}});_._2("_1");
_1.zfsVol=_._1(_8("_i4p"),_1._1,_i4o,{constructor:function(a){_1.zfsVol.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Volume resource-id="" resource-type="Volume">                    <Property_List>                        <Volume_Name></Volume_Name>                        <Quota>off</Quota>                        <CreateDefaultShare >0</CreateDefaultShare >                        <Encryption enabled="0" mount="" allow_overwrite_key="" email_encryption_key=""></Encryption>                    </Property_List>                    <vdev_list>                    </vdev_list>                </Volume>')).selectNodes("./*")[0])},_i4o:{getVolumeId:function(){return this.x?
this.x.getAttributeText("resource-id"):_4},getEjectable:function(){return this.x?this.x.getAttributeText("ejectable")=="true":_4},getVolumeName:function(){return _1.gp(this.xproptlist,"Volume_Name")},putVolumeName:function(a){return _1.pp(this.xproptlist,"Volume_Name",a)},getAltRoot:function(){return _1.gp(this.xproptlist,"AltRoot")},getDeDup:function(){return _1.gp(this.xproptlist,"DeDup")},getAutoExpand:function(){return _1.gp(this.xproptlist,"AutoExpand")},getDiscardable:function(){return _1.gp(this.xproptlist,
"Discardable")},getXRaidExpanded:function(){return _1.gp(this.xproptlist,"XRaidExpanded")},getMetadataAllocated:function(){return _1.gp(this.xproptlist,"MetadataAllocatedKB")},getMetadataUsed:function(){return _1.gp(this.xproptlist,"MetadataUsedKB")},getDataAllocated:function(){return _1.gp(this.xproptlist,"DataAllocatedKB")},getDataUsed:function(){return _1.gp(this.xproptlist,"DataUsedKB")},getUnallocated:function(){return _1.gp(this.xproptlist,"UnallocatedKB")},getAutoReplace:function(){return _1.gp(this.xproptlist,
"AutoReplace")},getCacheFile:function(){return _1.gp(this.xproptlist,"CacheFile")},getDelegation:function(){return _1.gp(this.xproptlist,"Delegation")},getListSnapshots:function(){return _1.gp(this.xproptlist,"ListSnapshots")},getVersion:function(){return _1.gp(this.xproptlist,"Version")},getAllocated:function(){return _1.gp(this.xproptlist,"Allocated")},getCapacity:function(){return _1.gp(this.xproptlist,"Capacity")},getFree:function(){return _1.gp(this.xproptlist,"Free")},getAvailable:function(){return _1.gp(this.xproptlist,
"Available")},getUsedBySnapshotKB:function(){return _1.gp(this.xproptlist,"UsedBySnapShotKB")},getReserved:function(){var a=_1.gp(this.xproptlist,"Reserved_Space");return a==_4?0:a},getGuid:function(){return _1.gp(this.xproptlist,"GUID")},getState:function(){return _1.gp(this.xproptlist,"Health")},getSize:function(){return _1.gp(this.xproptlist,"Size")},getScrubProgress:function(){return _1.gp(this.xproptlist,"ScrubProgress")},getResilverProgress:function(){return _1.gp(this.xproptlist,
"ResilverProgress")},getBalanceProgress:function(){return _1.gp(this.xproptlist,"BalanceProgress")},getBalanceType:function(){return _1.gp(this.xproptlist,"BalanceType")},getRemoveRAIDGroupProgress:function(){return _1.gp(this.xproptlist,"RemoveRAIDGroupProgress")},getDisktestProgress:function(){return _1.gp(this.xproptlist,"DisktestProgress")},getResilverRemaining:function(){return _1.gp(this.xproptlist,"ResilverTimeRemainingInMinutes")},getVolumeMode:function(){return _1.gp(this.xproptlist,
"Volume_Mode")},putVolumeMode:function(a){return _1.pp(this.xproptlist,"Volume_Mode",a)},getChecksum:function(){return _1.gp(this.xproptlist,"Checksum")},putChecksum:function(a){return _1.pp(this.xproptlist,"Checksum",a)},getQuota:function(){return _1.gp(this.xproptlist,"Quota")},putQuota:function(a){return _1.pp(this.xproptlist,"Quota",a)},getCreateDefaultShare:function(){return _1.gp(this.xproptlist,"CreateDefaultShare")},putCreateDefaultShare:function(a){return _1.pp(this.xproptlist,"CreateDefaultShare",
a)},getConcatenated:function(){return _1.gp(this.xproptlist,"Concatenated")=="1"},putConcatenated:function(a){return _1.pp(this.xproptlist,"Concatenated",a?"1":"0")},getEncryptionKeyMissing:function(){return this.xenc?this.xenc.getAttributeText("KeyMissing"):_4},getEncryptionEnabled:function(){return this.xenc?this.xenc.getAttributeText("enabled"):_4},putEncryptionEnabled:function(a){return this.xenc?this.xenc.setAttributeText(a?"1":"0","enabled"):_4},getEncryptionMount:function(){return this.xenc?
this.xenc.getAttributeText("mount"):_4},putEncryptionMount:function(a){return this.xenc?this.xenc.setAttributeText(a,"mount"):_4},getEncryptionEmail:function(){return this.xenc?this.xenc.getAttributeText("email_encryption_key"):_4},putEncryptionEmail:function(a){return this.xenc?this.xenc.setAttributeText(a,"email_encryption_key"):_4},getEncryptionAllowOverwriteKey:function(){return this.xenc?this.xenc.getAttributeText("allow_overwrite_key"):_4},putEncryptionAllowOverwriteKey:function(a){return this.xenc?
this.xenc.setAttributeText(a,"allow_overwrite_key"):_4},getImportInProgress:function(){return this.ximport?this.ximport.getAttributeText("active")=="1":false},getImportPath:function(){return this.ximport?this.ximport.getNodeText():""},getImportProcessId:function(){return this.ximport?this.ximport.getAttributeText("id"):_4},getSnapshotPruneThreshold:function(){return _1.gp(this.xproptlist,"SnapshotPruneThreshold")},putSnapshotPruneThreshold:function(a){return _1.pp(this.xproptlist,"SnapshotPruneThreshold",
a)},getTierType:function(){return _1.gp(this.xproptlist,"TierType")},putTierType:function(a){return _1.pp(this.xproptlist,"TierType",a)},getTierDataMigrationThreshold:function(){return _1.gp(this.xproptlist,"TierDataMigrationThreshold")},putTierDataMigrationThreshold:function(a){return _1.pp(this.xproptlist,"TierDataMigrationThreshold",a)},getVirtualDevices:function(){return this.vdevs?_a(this.vdevs,"_i3").getChildren():_4},getDisksCount:function(){var a=this.x.selectNodes("vdev_list/*/Disk");
return this.x?a?a.length:0:_4},getRAIDLevel:function(){return _1.gp(this.xproptlist,"RAID_Level")},getReadOnly:function(){return _1.gp(this.xproptlist,"Read_Only")},AppendVirtualDevices:function(a){if(this.x&&a){var b=this.x.selectSingleNode("vdev_list");if(b){if(_.isArray(a))_.each(a,function(d){if(_a(d,"_i4m")){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)}});else if(_a(a,"_i4m")){a=_a(a,"_i3");var c=
b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}}return _4},getIOStat:function(){return this.iostat?this.iostat:_4},putIOStat:function(a){this.iostat=a;return _5}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){if(a){var b=a.getNodeName();if(a.getAttributeText("resource-type")=="Volume"&&b=="xs:get-s"){a=a.selectSingleNode("Volume");b=a.getNodeName()}if(b=="Volume"){this.x=a;a=this.x.selectSingleNode("Property_List");
this.xproptlist=_a(new _1.xprop(a),"_i5");this.xenc=this.x.selectSingleNode("Property_List/Encryption");this.ximport=this.x.selectSingleNode("ImportDatasetFrom");this.xvolume=_a(new _1.xprop(this.x),"_i5");if(this.x.selectSingleNode("vdev_list")){a=_a(this,"_i3");a.removeAll();this.vdevs=_a(new _1._1,"_i3");a.appendChild(this.vdevs);a=this.x.selectNodes("vdev_list/*");_.each(a,function(c){var d=_a(new _1.zfsvDev(true),"_i3");
this.vdevs.appendChild(d);d.loadFromXml(c)!=_5&&this.vdevs.removeChild(d)},this)}return _5}}return _4}}});_._2("_1");
_1.zfsvDev=_._1(_8("_i4n"),_1._1,_i4m,{constructor:function(a){_1.zfsvDev.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <RAID LEVEL="0" groups=""></RAID>')).selectNodes("./*")[0])},_i4m:{getType:function(){return this.x?this.x.getNodeName():_4},putType:function(a){a!="RAID"&&_a(this,"_i3").loadFromXml((new _.Xml.document("                    <"+
a+"></"+a+">")).selectNodes("./*")[0])},getVirtualDeviceId:function(){return this.x?this.x.getAttributeText("ID"):_4},getLevel:function(){return this.x?this.x.getAttributeText("LEVEL"):_4},putLevel:function(a){return this.x?this.x.setAttributeText(a,"LEVEL"):_4},putGroupsNumber:function(a){return this.x?this.x.setAttributeText(a,"groups"):_4},getDisks:function(){return this.disks?_a(this.disks,"_i3").getChildren():_4},getMetadataAllocated:function(){return this.x?
this.x.getAttributeText("METADATA_ALLOCATED_KB"):_4},getDataAllocated:function(){return this.x?this.x.getAttributeText("DATA_ALLOCATED_KB"):_4},getUnallocated:function(){return this.x?this.x.getAttributeText("UNALLOCATED_KB"):_4},getTierType:function(){return this.x?this.x.getAttributeText("TYPE"):_4},AppendDisks:function(a){if(this.x&&a){var b=this.x;if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(_a(a,
"_i4d")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4},RemoveDisk:function(a){if(this.x&&a)if(a=_a(a,"_i4d"))if(a=this.x.selectSingleNode("./Disk[@resource-id='"+a.getDiskId()+"']"))if(a.removeNode())return _a(this,"_i3").loadFromXml(this.x);return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;var b=(a=_a(_a(this,"_i3").getRoot(),
"_i2"))?a.getZFSDisksManager():null;a=_a(this,"_i3");a.removeAll();var c=this.x.selectNodes("./Disk");if(c&&c.length){this.disks=_a(new _1._1,"_i3");_.each(c,function(d){var e=b?b.getDiskById(d.getAttributeText("resource-id")):null;if(e)this.disks.appendChild(_a(e,"_i3").clone());else{e=_a(new _1.zfsdisk(true),"_i3");e.loadFromXml(d)==_5&&this.disks.appendChild(e)}},this);a.appendChild(this.disks);return _5}return _4}}});_._2("_1");
_1.zfsdisk=_._1(_8("_i4f"),_1._1,_i4d,{constructor:function(){_1.zfsdisk.superclass.constructor.apply(this,arguments)},_i4d:{getDiskId:function(){return this.x?this.x.getAttributeText("resource-id"):_4},getPresent:function(){return this.x?this.x.getAttributeText("Present "):_4},getModel:function(){return this.x?this.x.getAttributeText("Model"):_4},getSerial:function(){return this.x?this.x.getAttributeText("Serial"):_4},getFirmwareVersion:function(){return this.x?
this.x.getAttributeText("FirmwareVersion"):_4},getRPM:function(){return this.x?this.x.getAttributeText("RPM"):_4},getSectors:function(){return this.x?this.x.getAttributeText("Sectors"):_4},getCapacity:function(){return this.x?this.x.getAttributeText("Capacity"):_4},getTemperature:function(){return this.x?this.x.getAttributeText("Temperature"):_4},getATAError:function(){return this.x?this.x.getAttributeText("ATAError"):_4},getSlotName:function(){return this.x?this.x.getAttributeText("SlotName"):
_4},getHardwareInterface:function(){return this.x?this.x.getAttributeText("HardwareInterface"):_4},getVolumeName:function(){return this.x?this.x.getAttributeText("PoolName"):_4},getVolumeType:function(){return this.x?this.x.getAttributeText("PoolType"):_4},getVolumeState:function(){return this.x?this.x.getAttributeText("PoolState"):_4},getVolumeHostId:function(){return this.x?this.x.getAttributeText("PoolHostId"):_4},getDiskState:function(){return this.x?this.x.getAttributeText("DiskState"):
_4},getChannelID:function(){return this.x?this.x.getAttributeText("Channel"):_4},getSignedByNetgear:function(){return this.x?this.x.getAttributeText("IsSignedByNetgear"):_4},getFormattable:function(){return this.x?this.x.getAttributeText("Formatable"):_4},getPartitions:function(){return this.x?this.x.getAttributeText("Partitions"):_4},getEnclosureId:function(){return this.x?this.x.getAttributeText("DiskEnclosureId"):_4},getIsGlobalSpare:function(){return this.x?this.x.getAttributeText("IsGlobalSpare"):
_4},getClass:function(){return this.x?this.x.getAttributeText("Class"):_4},getType:function(){return this.x?this.x.getAttributeText("Type"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.zdenc=_._1(_9,_1._1,_i4e,{constructor:function(){_1.zdenc.superclass.constructor.apply(this,arguments)},_i4e:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):_4},getName:function(){return this.x?this.x.getAttributeText("name"):_4},getPortName:function(){return this.x?this.x.getAttributeText("PortName"):_4},getDisks:function(){return this.disks?_a(this.disks,"_i3").getChildren():_4},getDiskById:function(a){return this.disks?
this.disks.hash[a]:null},getRowsCount:function(){return this.xCol?this.xCol.getAttributeText("rows"):_4},getColmsCount:function(){return this.xCol?this.xCol.getAttributeText("columns"):_4},getRackAlignment:function(){return this.xCol?this.xCol.getAttributeText("IsSlotHorizontal"):_4},getSafeModeStatus:function(){var a="1",b=this.disks.getChildren();if(b.length==0)a="0";else _.each(b,function(c){c=_a(c,"_i4d");if(+c.getPartitions()>0&&c.getFormattable()=="1")a="2"},this);return a}},
_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;var b=_a(this,"_i3");if(this.xCol=a.selectSingleNode("Disk_Collection")){a=this.xCol.selectNodes("Disk");b.removeAll();this.disks=_a(new _1._1,"_i3");this.disks.hash=[];_.each(a,function(c){var d=_a(new _1.zfsdisk,"_i3");this.disks.appendChild(d);if(d.loadFromXml(c)!=_5)this.disks.removeChild(d);else{c=_a(d,"_i4d");this.disks.hash[c.getDiskId()]=c;this.disks.appendChild(d)}},
this);b.appendChild(this.disks);return _5}return _4}}});_._2("_1");
_1.zfsDisksManager=_._1(_8("_i4h"),_1._1,_i4g,{constructor:function(){_1.zfsDisksManager.superclass.constructor.apply(this,arguments)},_i4g:{updateDiskEnclosures:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DiskEnclosure" resource-type="DiskEnclosure_Collection"/>',_.id())),a)},getDiskEnclosures:function(){return this.dsenc?_a(this.dsenc,"_i3").getChildren():_4},
getDiskEnclosureById:function(a){return this.dsenc?this.dsenc.hash[a]:null},getDiskById:function(a){if(this.dsenc){i=0;for(l=this.dsenc.hash.length;i<l;++i){var b=this.dsenc.hash[this.dsenc.hash[i]].getDiskById(a);if(b)return b}}return null},getHeadEnclosure:function(){i=0;for(l=this.dsenc.hash.length;i<l;++i){var a=this.dsenc.hash[this.dsenc.hash[i]],b=a.getName();if(b&&b.indexOf("Jbod")==-1)return a}return null},MakeSpare:function(a,b){var c="";_.each(a,function(d){c+=String.format('<Disk resource-id="{0}" />',
d.getDiskId())});return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="Disk" resource-type="Disk_Collection">                    <xs:command_name>MakeGlobalSpare</xs:command_name>                    <xs:args>                        <xs:arg>                            <Disks>{1}</Disks>                        </xs:arg>                    </xs:args>                </xs:command>',_.id(),c)),b)},FormatDisks:function(a,b){var c="";_.each(a,function(d){c+=String.format('<Disk resource-id="{0}" />',
d.getDiskId())});return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="Disk" resource-type="Disk_Collection">                    <xs:command_name>Format</xs:command_name>                        <xs:args>                            <xs:arg>                                <Disks>{1}</Disks>                            </xs:arg>                        </xs:args>                    </xs:command>',_.id(),c)),b)}},_iw:{OnEvent:function(a,b,c,d,e){if(b&&
b[0]){if(a=c||b[0].getAttributeText("resource-id")){a=_a(this,"_i4g").getDiskById(a);switch(e){case "xs:delete-s":a&&_a(a,"_i3").loadFromXml(b[0])==_5&&this.Fire("OnDiskRemove",[a]);break;case "xs:update-s":a&&_a(a,"_i3").loadFromXml(b[0])==_5&&this.Fire("OnDiskUpdate",[a]);break;case "xs:add-s":if(a)_a(a,"_i3").loadFromXml(b[0])==_5&&this.Fire("OnDiskAdd",[a]);else{a=_a(new _1.zfsdisk,"_i3");if(a.loadFromXml(b[0])==_5){b=
_a(a,"_i4d").getEnclosureId();if(b=_a(this,"_i4g").getDiskEnclosureById(b)){b=_a(b,"_i3");b.appendNode(a.getXml());b.loadFromXml(b.getXml());this.Fire("OnDiskAdd",[_a(a,"_i4d")])}}}break}}}else e=="xs:update-s"&&this.Fire("OnDiskUpdate");return _5}},_i3:{Update:function(a){return _a(this,"_i4g").updateDiskEnclosures(a)},getXml:function(){return this.x},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),
"_i1").Advise(this,"Disk");return _4},loadFromXml:function(a){var b=_a(this,"_i3");this.x=a.selectSingleNode("DiskEnclosure_Collection");if(a=this.x.selectNodes("DiskEnclosure")){this.dsenc=_a(new _1._1,"_i3");this.dsenc.hash=[];b.removeAll();_.each(a,function(c){var d=_a(new _1.zdenc,"_i3");this.dsenc.appendChild(d);if(d.loadFromXml(c)!=_5)this.dsenc.removeChild(d);else{c=_a(d,"_i4e");this.dsenc.hash[c.getId()]=c;this.dsenc.hash.push(c.getId())}},
this);b.appendChild(this.dsenc);return _5}return _4}}});_._2("_1");
_1.trans=_._1(_1.CLSIDS.Transaction,_8("_i49"),_i48,_i3,_ip,{constructor:function(){_1.trans.superclass.constructor.apply(this,arguments);this.__xid=_.id("t_");this.ignore=this.async=false;this.cmds=[];this.cmds.hash={};this.cmds.cursor=-1;this.cmds.append=function(a){this.hash[a.getXDomId()]=this.length;this.push(a)};this.cmds.getItemBy=function(a){return this[this.hash[a]]};this.cmds.removeItemBy=function(a){var b=this.hash[a];
if(b){this.splice(b,1);this.hash[a]=undefined;return true}return false};this.cmds.clear=function(){this.splice(0,this.length);this.hash={};this.cmds.cursor=-1};this.cmds.begin=function(){this.cursor=-1;return this[++this.cursor]};this.cmds.next=function(){return this[++this.cursor]};this.cmds.cur=function(){return this[this.cursor]};this.cmds.end=function(){this.cursor=this.length-2;return this[++this.cursor]}},_ip:{OnNTFailed:function(){return _3},OnNTReady:function(){return _3},
_o1:function(){return _3},OnFailed:function(){return _3},_o2:function(){return _3},OnPending:function(){return _3},_o3:function(){return _3}},_i3:{getXDomId:function(){return this.__xid},Update:function(){if(_a(this,"_i48").getPendingState())return E_PENDING;if(this.cmds.begin())return this.cmds.cur().cmd.Update(this.cmds.cur().lparam);return _4},Commit:function(){if(_a(this,"_i48").getPendingState())return E_PENDING;
if(this.cmds.begin())return this.cmds.cur().cmd.Commit(this.cmds.cur().lparam);return _4}},_i48:{putAsyncMode:function(a){this.async=a;return _5},putIgnoreFails:function(a){this.ignore=a;return _5},getPendingState:function(){if(this.cmds.cur()){var a=_a(this.cmds.cur(),"_io");if(a)return a.getPendingState()}return false},Append:function(a,b){if(a=_a(a,"_i3")){_a(a,"_i1").Advise(this);this.cmds.append({cmd:a,lparam:b});return _5}return _4},
Abort:function(){if(this.cmds.cur()){var a=_a(this.cmds.cur(),"_io");if(a)return a.Abort()}return _4},Remove:function(a){if(a=_a(a,"_i3"))if(this.cmds.removeItemBy(a.getXDomId())){_a(a,"_i1").Unadvise(this);return _5}return _4},RemoveAll:function(){_a(this,"_i48").Abort();_.each(this.cmds,function(a){_a(a,"_i1").Unadvise(this)},this);this.cmds.clear();return _5},Update:function(a){return _a(this,"_i3").Update(a)},
Commit:function(a){return _a(this,"_i3").Commit(a)}}});_._2("_1");
_1.zfsVolStat=_._1(_8("IZFSVolumeIOStatEvents"),_1._1,_i4q,{constructor:function(){_1.zfsVolStat.superclass.constructor.apply(this,arguments)},_i4q:{getReadCount:function(){return _1.gp(this.xoperations,"Read")},getWriteCount:function(){return _1.gp(this.xoperations,"Write")},getBandwidthReadCount:function(){return _1.gp(this.xbandwidth,"Read")},getBandwidthWriteCount:function(){return _1.gp(this.xbandwidth,"Write")}},_i3:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;a=this.x.selectSingleNode("Operations");this.xoperations=_a(new _1.xprop(a),"_i5");a=this.x.selectSingleNode("Bandwidth");this.xbandwidth=_a(new _1.xprop(a),"_i5");return _5}}});_._2("_1");
_1.zfssnapshot=_._1(_8("_i4j"),_1._1,_i4i,{constructor:function(){_1.zfssnapshot.superclass.constructor.apply(this,arguments)},_i4i:{getName:function(){return _1.gp(this.xsnapshot,"Snapshot_Name")},getVolumeName:function(){return _1.gp(this.xsnapshot,"Volume_Name")},getCreationDate:function(){return _1.gp(this.xsnapshot,"Snapshot_CreatedOn")},getShareName:function(){return _1.gp(this.xsnapshot,"Share_Name")},getUsedSpace:function(){return _1.gp(this.xsnapshot,
"Snapshot_Used_Space")},getType:function(){return _1.gp(this.xsnapshot,"Snapshot_Type")},getCloneShareCount:function(){if(this.x){var a=this.x.selectNodes("./Clone");return a?a.length:0}return 0},getPath:function(){return _1.gp(this.xsnapshot,"Snapshot_Path")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsnapshot=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.zfsSnapshotsManager=_._1(_8("_i4l"),_1._1,_i4k,{constructor:function(){_1.zfsSnapshotsManager.superclass.constructor.apply(this,arguments)},_i4k:{updateSnapshotsByDateRange:function(a,b,c,d,e,f){a=!a?0:a;d=_.isString(d)?d=="*"?"":"":d;e=_.isString(e)?e=="*"?"":"":e;b=_.isString(b)?b=="*"?"":b:b.getVolumeName();c=_.isString(c)?c=="*"?"":c:c.getName();return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-id="SnapshotsByDateRange" resource-type="Snapshot">                    <xs:criterion>                        <xs:and>                            <xs:equal property="Volume_Name" value="{1}"/>                            <xs:equal property="Share_Name" value="{2}"/>                            <xs:equal property="Snapshot_Type" value="{3}"/>                            <xs:greater-equal property="Created_From" value="{4}"/>                            <xs:lesser-equal property="Created_To" value="{5}"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
_.id(),b,c,a,d,e)),f)},updateSnapshotsCountByDateRange:function(a,b,c,d,e,f){a=!a?0:a;d=_.isString(d)?d=="*"?"":"":d;e=_.isString(e)?e=="*"?"":"":e;b=_.isString(b)?b=="*"?"":b:b.getVolumeName();c=_.isString(c)?c=="*"?"":c:c.getName();return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-id="SnapshotCount" resource-type="Snapshot">                    <xs:criterion>                        <xs:and>                            <xs:equal property="Volume_Name" value="{1}"/>                            <xs:equal property="Share_Name" value="{2}"/>                            <xs:equal property="Snapshot_Type" value="{3}"/>                            <xs:greater-equal property="Created_From" value="{4}"/>                            <xs:lesser-equal property="Created_To" value="{5}"/>                        </xs:and>                    </xs:criterion>                    <xs:modifier>                        <xs:count/>                    </xs:modifier>                </xs:query>',
_.id(),b,c,a,d,e)),f)},updateSnapshotSummary:function(a,b,c){a=_.isString(a)?a:a.getVolumeName();b=_.isString(b)?b:b.getName();return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="SnapshotSummary" resource-type="Snapshot">                    <xs:command_name>Snapshot_Summary</xs:command_name>                    <xs:args>                        <xs:arg>                            <Snapshot>                            <Volume_Name>{1}</Volume_Name>                            <Share_Name>{2}</Share_Name>                            </Snapshot>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),a,b)),c)},CreateSnapshot:function(a,b,c,d){a=_.isString(a)?a:a.getVolumeName();b=_.isString(b)?b:b.getName();if(a&&b&&c)return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="Snapshot" resource-type="Snapshot">                        <Snapshot>                            <Volume_Name>{1}</Volume_Name>                            <Share_Name>{2}</Share_Name>                            <Snapshot_Name>{3}</Snapshot_Name>                            <Snapshot_Type>2</Snapshot_Type>                        </Snapshot>                    </xs:add>',
_.id(),a,b,c)),d);return E_INVALIDARG},RollbackSnapshot:function(a,b,c,d,e,f){zv=_.isString(b)?b:b.getVolumeName();c=_.isString(c)?c:c.getName();sn=_.isString(d)?d:d.getName();return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="RollbackSnapshot" resource-type="Snapshot">                    <xs:command_name>Rollback_Snapshot</xs:command_name>                      <xs:args>                        <xs:arg>                          <Snapshot>                            <Volume_Name>{1}</Volume_Name>                            <Share_Name>{2}</Share_Name>                            <Snapshot_Name>{3}</Snapshot_Name>                            <Snapshot_Type>{4}</Snapshot_Type>                          </Snapshot>                          <Recursive_Delete>{5}</Recursive_Delete>                        </xs:arg>                      </xs:args>                 </xs:command>',
_.id(),zv,c,sn,a,e)),f,undefined,undefined,undefined,3E5)},DeleteSnapshot:function(a,b,c,d,e,f){zv=_.isString(b)?b:b.getVolumeName();c=_.isString(c)?c:c.getName();sn=_.isString(d)?d:d.getName();return this.sendXml(_1._2(String.format(' <xs:delete id="{0}" resource-id="DeleteSnapshot" resource-type="Snapshot">                      <Snapshot>                        <Volume_Name>{1}</Volume_Name>                        <Share_Name>{2}</Share_Name>                        <Snapshot_Name>{3}</Snapshot_Name>                        <Snapshot_Type>{4}</Snapshot_Type>                      </Snapshot>                      <Recursive_Delete>{5}</Recursive_Delete>                  </xs:delete>',
_.id(),zv,c,sn,a,e)),f,undefined,undefined,undefined,3E5)},CloneSnapshot:function(a,b,c,d,e,f,g){zv=_.isString(b)?b:b.getVolumeName();c=_.isString(c)?c:c.getName();sn=_.isString(d)?d:d.getName();nv=_.isString(e)?e:e.getVolumeName();return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="CloneSnapshot" resource-type="Snapshot">                  <xs:command_name>Clone_Snapshot</xs:command_name>                  <xs:args>                    <xs:arg>                      <Snapshot>                        <Volume_Name>{1}</Volume_Name>                        <Share_Name>{2}</Share_Name>                        <Snapshot_Name>{3}</Snapshot_Name>                        <Snapshot_Type>{4}</Snapshot_Type>                      </Snapshot>                      <New_Share>                        <Volume_Name>{5}</Volume_Name>                        <Share_Name>{6}</Share_Name>                      </New_Share>                    </xs:arg>                  </xs:args>                </xs:command>',
_.id(),zv,c,sn,a,nv,f)),g,undefined,undefined,undefined,3E5)},PromoteSnapshot:function(a,b,c,d,e,f){zv=_.isString(b)?b:b.getVolumeName();c=_.isString(c)?c:c.getName();d=_.isString(d)?d:d.getName();return this.sendXml(_1._2(String.format(' <xs:command id="{0}" resource-id="PromoteSnapshot" resource-type="Snapshot">                <xs:command_name>Promote_Snapshot</xs:command_name>                <xs:args>                <xs:arg>                    <Snapshot>                        <Volume_Name>{1}</Volume_Name>                        <Original_Share_Name>{2}</Original_Share_Name>                        <New_Share_Name>{3}</New_Share_Name>                        <Snapshot_Name>{4}</Snapshot_Name>                        <Snapshot_Type>{5}</Snapshot_Type>                    </Snapshot>                </xs:arg>                </xs:args>            </xs:command>',
_.id(),zv,c,d,e,a)),f,undefined,undefined,undefined,3E5)},getSnapshots:function(){return this.snapshots?_a(this.snapshots,"_i3").getChildren():_4},getSnapshotByName:function(a){return this.snapshots?this.snapshots.hash[a]:null},getSnapshotCountByType:function(a){return this.cntSN?this.cntSN[a]:_4},getSnapshotsDateRangeByType:function(a){return this.cntSN?this.cntSN[a]:_4},getSNSTotalCount:function(){return this.snsumm?this.snsumm.total:_4},getSNSManualTotalCount:function(){return this.snsumm?
this.snsumm.motal:_4},getSNSContinuousTotalCount:function(){return this.snsumm?this.snsumm.cotal:_4},getSNSFirstSnapshotTime:function(){return this.snsumm?this.snsumm.fdate:_4},getSNSLastSnapshotTime:function(){return this.snsumm?this.snsumm.ldate:_4}},_i3:{Update:function(a){return _a(this,"_i4k").updateSnapshots(a)},getXml:function(){return this.x},loadFromXml:function(a){rtype=a.getAttributeText("resource-id");switch(rtype){case "CloneSnapshot":case "PromoteSnapshot":case "DeleteSnapshot":case "RollbackSnapshot":return _5;
case "SnapshotCount":var b=a.selectSingleNode("Snapshot_Count");if(b){b.getAttributeText("Snapshot_Type");this.cntSN={};a=b.getAttributeText("Count");this.cntSN[0]={};this.cntSN[0].count=a==_4?0:a;a=b.getAttributeText("Snapshot_Continuous_Count");var c=b.getAttributeText("Continuous_FirstSnapshotCreatedOn"),d=b.getAttributeText("Continuous_LastSnapshotCreatedOn");this.cntSN[1]={};this.cntSN[1].count=a==_4?0:a;this.cntSN[1].sdate=c==_4?0:c*1E3;this.cntSN[1].edate=d==_4?0:d*1E3;a=b.getAttributeText("Snapshot_Manual_Count");
c=b.getAttributeText("Manual_FirstSnapshotCreatedOn");d=b.getAttributeText("Manual_LastSnapshotCreatedOn");this.cntSN[2]={};this.cntSN[2].count=a==_4?0:a;this.cntSN[2].sdate=c==_4?0:c*1E3;this.cntSN[2].edate=d==_4?0:d*1E3;a=b.getAttributeText("Snapshot_Replicate_Count");c=b.getAttributeText("Replicate_FirstSnapshotCreatedOn");d=b.getAttributeText("Replicate_LastSnapshotCreatedOn");this.cntSN[3]={};this.cntSN[3].count=a==_4?0:a;this.cntSN[3].sdate=c==_4?0:c*1E3;this.cntSN[3].edate=
d==_4?0:d*1E3;a=b.getAttributeText("Snapshot_Readyrecover_Count");c=b.getAttributeText("Readyrecover_FirstSnapshotCreatedOn");d=b.getAttributeText("Readyrecover_LastSnapshotCreatedOn");this.cntSN[4]={};this.cntSN[4].count=a==_4?0:a;this.cntSN[4].sdate=c==_4?0:c*1E3;this.cntSN[4].edate=d==_4?0:d*1E3;return _5}break;case "SnapshotSummary":if(b=a.selectSingleNode("Snapshot_Summary")){this.snsumm={vname:_1.xprop.prototype.getPropertyAbsolute(b,"Volume_Name"),sname:_1.xprop.prototype.getPropertyAbsolute(b,
"Share_Name"),total:_1.xprop.prototype.getPropertyAbsolute(b,"Snapshot_Total_Count"),motal:_1.xprop.prototype.getPropertyAbsolute(b,"Snapshot_Manual_Count"),cotal:_1.xprop.prototype.getPropertyAbsolute(b,"Snapshot_Continuous_Count"),fdate:_1.xprop.prototype.getPropertyAbsolute(b,"First_Snapshot_Created_On"),ldate:_1.xprop.prototype.getPropertyAbsolute(b,"Latest_Snapshot_Created_On")};return _5}break;case "SnapshotsByDateRange":b=_a(this,"_i3");if(this.xCol=a.selectNodes("Snapshot_Collection")){this.x=
a;this.xCol=this.xCol[0];a=a.selectNodes("Snapshot_Collection/Snapshot");b.removeAll();this.snapshots=_a(new _1._1,"_i3");this.snapshots.hash=[];_.each(a,function(e){var f=_a(new _1.zfssnapshot,"_i3");if(f.loadFromXml(e)==_5){e=_a(f,"_i4i");this.snapshots.hash[e.getName()]=e;this.snapshots.appendChild(f)}},this);b.appendChild(this.snapshots);return _5}break}return _4}}});_._2("_1");
_1.iscsimngr=_._1(_8("_i1n"),_1._1,_i1m,{constructor:function(){_1.iscsimngr.superclass.constructor.apply(this,arguments)},_i1m:{updateLUNGroups:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="iscsi_lun_group_collection"/>',_.id())),a)},getLUNGroups:function(){return this.xlgs?this.xlgs.getChildren():_4},AppendLUNGroup:function(a,b){if(_a(a,"_i1k")){a=_a(a,"_i3");
return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="iscsi_lun_group">                       {1}                    </xs:add>',_.id(),a.getXml().toString())),b)}return _4},CommitLUNGroup:function(a,b){if(_a(a,"_i1k")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="iscsi_lun_group">                       {1}                    </xs:set>',_.id(),a.getXml().toString())),b)}return _4},
RemoveLUNGroup:function(a,b){if(_a(a,"_i1k")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-type="iscsi_lun_group">                       {1}                    </xs:delete>',_.id(),a.getXml().toString())),b)}return _4},updateHosts:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="iscsi_host_collection"/>',_.id())),a)},getHosts:function(){return this.xhs?this.xhs.getChildren():
_4},AppendHost:function(a,b){if(_a(a,"_i1l")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="iscsi_host">                       {1}                    </xs:add>',_.id(),a.getXml().toString())),b)}return _4},CommitHost:function(a,b){if(_a(a,"_i1l")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="iscsi_host">                       {1}                    </xs:set>',
_.id(),a.getXml().toString())),b)}return _4},RemoveHost:function(a,b){if(_a(a,"_i1l")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-type="iscsi_host">                       {1}                    </xs:delete>',_.id(),a.getXml().toString())),b)}return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.selectSingleNode("LUN_Group_Collection")){this.x=a;this.xlgs&&
b.removeChild(this.xlgs);this.xlgs=_a(new _1._1,"_i3");a=a.selectNodes("LUN_Group_Collection/LUN_Group");_.each(a,function(c){var d=_a(new _1.lungroup(true),"_i3");d.loadFromXml(c)==_5&&this.xlgs.appendChild(d)},this);b.appendChild(this.xlgs);return _5}if(a.selectSingleNode("Host_Collection")){this.xh=a;this.xhs&&b.removeChild(this.xhs);this.xhs=_a(new _1._1,"_i3");a=a.selectNodes("Host_Collection/Host");_.each(a,function(c){var d=_a(new _1.scsihost(true),
"_i3");d.loadFromXml(c)==_5&&this.xhs.appendChild(d)},this);b.appendChild(this.xhs);return _5}return _4}}});_._2("_1");
_1.nic=_._1(_8,_1._1,_i27,{constructor:function(){_1.nic.superclass.constructor.apply(this,arguments)},_i27:{getName:function(){return _1.gp(this.xnic,"link")},putName:function(a){return _1.pp(this.xnic,"link",a)},getMTU:function(){return _1.gp(this.xnic,"mtu")},putMTU:function(a){return _1.pp(this.xnic,"mtu",a)},getState:function(){return _1.gp(this.xnic,"state")},getBridge:function(){return _1.gp(this.xnic,"bridge")},getIPAddress:function(){return _1.gp(this.xnic,
"ip")},putIPAddress:function(a){return _1.pp(this.xnic,"ip",a)},getDomainName:function(){return this.domainName},putDomainName:function(a){this.domainCollection.removeNode("DOMAIN");var b="";a=a.split(" ");_.each(a,function(c){if(c!="")b+="<Domain_Name>"+c+"</Domain_Name>"},this);b!=""&&this.domainCollection.appendNode(new _.Xml.document("<DOMAIN>"+b+"</DOMAIN>"))},getIPv6Address:function(){return _1.gp(this.xnic,"ipv6")},putIPv6Address:function(a){return _1.pp(this.xnic,"ipv6",a)},getIPv6AddressLocal:function(){return _1.gp(this.xnic,
"ipv6_link")},getMACAddress:function(){return _1.gp(this.xnic,"mac")},getSpeed:function(){return _1.gp(this.xnic,"speed")},putSpeed:function(a){return _1.pp(this.xnic,"speed",a)},getDuplex:function(){return _1.gp(this.xnic,"duplex")},putDuplex:function(a){return _1.pp(this.xnic,"duplex",a)},getGateway:function(){return _1.gp(this.xnic,"gateway")},getMACAddressType:function(){return _1.gp(this.xnic,"macaddrtype")},getVNICS:function(){return this.xnics?this.xnics.getChildren():_4},getPath:function(){return _1.gp(this.xnic,
"path")},putPath:function(a){return _1.pp(this.xnic,"path",a)},getOver:function(){return _1.gp(this.xnic,"over")},putOver:function(a){return _1.pp(this.xnic,"over",a)},getVID:function(){return _1.gp(this.xnic,"vid")},putVID:function(a){return _1.pp(this.xnic,"vid",a)},getIPType:function(){return _1.gp(this.xnic,"iptype")},putIPType:function(a){return _1.pp(this.xnic,"iptype",a)},getIPv6Type:function(){return _1.gp(this.xnic,"ipv6type")},putIPv6Type:function(a){return _1.pp(this.xnic,"ipv6type",
a)},getRouter:function(){return _1.gp(this.xnic,"router")},putRouter:function(a){return _1.pp(this.xnic,"router",a)},getRouterv6:function(){return _1.gp(this.xnic,"router6")},putRouterv6:function(a){return _1.pp(this.xnic,"router6",a)},getSubnet:function(){return _1.gp(this.xnic,"subnet")},putSubnet:function(a){return _1.pp(this.xnic,"subnet",a)},getPrefixLength:function(){return _1.gp(this.xnic,"prefixlength")},putPrefixLength:function(a){return _1.pp(this.xnic,"prefixlength",a)},getPrefixLengthLocal:function(){return _1.gp(this.xnic,
"prefixlength_link")},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():_4},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("dnscollection");b.removeNode("DNS");if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(_a(a,"_i1z")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4},
getRoutes:function(){return this.xroutes?this.xroutes.getChildren():_4},putRoutes:function(a){if(this.x&&a){var b=this.x.selectSingleNode("routecollection");b.removeNode("Route");_.each(a,function(c){c=_a(c,"_i3");var d=b.appendNode(c.getXml());d&&c.loadFromXml(d)});return _a(this,"_i3").loadFromXml(this.x)}return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xnic=_a(new _1.xprop(this.x),"_i5");var b=_a(this,
"_i3"),c=a.selectNodes("vnic_collection/vnic");if(c){this.xn=a;b.removeChild(b.getChildByTrait("_i28"));this.xnics=_a(new _1.vnic(true),"_i3");_.each(c,function(e){var f=_a(new _1.vnic(true),"_i3");f.loadFromXml(e)==_5&&this.xnics.appendChild(f)},this);b.appendChild(this.xnics)}if(c=a.selectSingleNode("dnscollection")){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=_a(new _1._1,"_i3");_.each(c,function(e){var f=
_a(new _1.dns(true),"_i3");f.loadFromXml(e)==_5&&this.xdns.appendChild(f)},this);b.appendChild(this.xdns)}if(c=a.selectSingleNode("routecollection")){c=a.selectNodes("routecollection/Route");this.xroutes&&b.removeChild(this.xroutes);this.xroutes=_a(new _1._1,"_i3");_.each(c,function(e){var f=_a(new _1.nroute(true),"_i3");f.loadFromXml(e)==_5&&this.xroutes.appendChild(f)},this);b.appendChild(this.xroutes)}this.domainCollection=a.selectSingleNode("domaincollection");
this.domainName="";a=a.selectNodes("domaincollection/DOMAIN/Domain_Name");var d=[];_.each(a,function(e){d.push(e.getNodeText())},this);if(d.length>0)this.domainName=d.join(" ");return _5}}});_._2("_1");
_1.vnic=_._1(_8,_1._1,_i28,{constructor:function(a){_1.vnic.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("<vnic>                  <link></link>                  <over></over>                  <speed></speed>                  <macaddrtype></macaddrtype>                  <vid>0</vid>                  <iptype>ipv4dhcp</iptype>                  <priority>0</priority>                  <prefixlength>0</prefixlength>                  <router></router>                  <mtu>1500</mtu>                  <state>up</state>                  <iptype>ipv4dhcp</iptype>                  <ip></ip>                  <ipv6></ipv6>                  <ipv6global></ipv6global>                  <prefixglobal></prefixglobal>                  <mac></mac>                  <subnet></subnet>                  <dnscollection/>               </vnic>")).selectNodes("./*")[0])},_i28:{getName:function(){return _1.gp(this.xvnic,
"link")},putName:function(a){return _1.pp(this.xvnic,"link",a)},getState:function(){return _1.gp(this.xvnic,"state")},getMTU:function(){return _1.gp(this.xvnic,"mtu")},putMTU:function(a){return _1.pp(this.xvnic,"mtu",a)},getOver:function(){return _1.gp(this.xvnic,"over")},putOver:function(a){return _1.pp(this.xvnic,"over",a)},getIPAddress:function(){return _1.gp(this.xvnic,"ip")},putIPAddress:function(a){return _1.pp(this.xvnic,"ip",a)},getIPv6Address:function(){return _1.gp(this.xvnic,"ipv6")},
putIPv6Address:function(a){return _1.pp(this.xvnic,"ipv6",a)},getIPv6GlobalAddress:function(){return _1.gp(this.xvnic,"ipv6global")},putIPv6GlobalAddress:function(a){return _1.pp(this.xvnic,"ipv6global",a)},getPrefixGlobal:function(){return _1.gp(this.xvnic,"prefixglobal")},putPrefixGlobal:function(a){return _1.pp(this.xvnic,"prefixglobal",a)},getMACAddress:function(){return _1.gp(this.xvnic,"mac")},getSpeed:function(){return _1.gp(this.xvnic,"speed")},putSpeed:function(a){return _1.pp(this.xvnic,
"speed",a)},getMACAddressType:function(){return _1.gp(this.xvnic,"macaddrtype")},getVID:function(){return _1.gp(this.xvnic,"vid")},putVID:function(a){return _1.pp(this.xvnic,"vid",a)},getIPType:function(){return _1.gp(this.xvnic,"iptype")},putIPType:function(a){return _1.pp(this.xvnic,"iptype",a)},getGateway:function(){return _1.gp(this.xvnic,"router")},putGateway:function(a){return _1.pp(this.xvnic,"router",a)},getSubnet:function(){return _1.gp(this.xvnic,"subnet")},putSubnet:function(a){return _1.pp(this.xvnic,
"subnet",a)},getPrefixLength:function(){return _1.gp(this.xvnic,"prefixlength")},putPrefixLength:function(a){return _1.pp(this.xvnic,"prefixlength",a)},getPrimaryRouter:function(){return _1.gp(this.xvnic,"primaryrouter")=="true"},putPrimaryRouter:function(a){return _1.pp(this.xvnic,"primaryrouter",a)},getEffectiveRouter:function(){return _1.gp(this.xvnic,"effectiverouter")=="true"},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():_4},putDNSRecords:function(a){if(this.x&&
a){var b=this.x.selectSingleNode("dnscollection");b.removeNode("DNS");if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(_a(a,"_i1z")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");this.x=a;this.xvnic=_a(new _1.xprop(this.x),
"_i5");var c=a.selectSingleNode("dnscollection");if(c){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=_a(new _1._1,"_i3");_.each(c,function(d){var e=_a(new _1.dns(true),"_i3");e.loadFromXml(d)==_5&&this.xdns.appendChild(e)},this);b.appendChild(this.xdns)}return _5}}});_._2("_1");
_1.bond=_._1(_8,_1._1,_i1y,{constructor:function(){_1.bond.superclass.constructor.apply(this,arguments)},_i1y:{getName:function(){return _1.gp(this.xbond,"link")},putName:function(a){return _1.pp(this.xbond,"link",a)},getMode:function(){return _1.gp(this.xbond,"mode")},putMode:function(a){return _1.pp(this.xbond,"mode",a)},getPolicy:function(){return _1.gp(this.xbond,"policy")},putPolicy:function(a){return _1.pp(this.xbond,"policy",a)},getAddrPolicy:function(){return _1.gp(this.xbond,
"addrpolicy")},getLACPActivity:function(){return _1.gp(this.xbond,"lacpactivity")},putLACPActivity:function(a){return _1.pp(this.xbond,"lacpactivity",a)},getLACPTimer:function(){return _1.gp(this.xbond,"lacptimer")},putLACPTimer:function(a){return _1.pp(this.xbond,"lacptimer",a)},getFlags:function(){return _1.gp(this.xbond,"flags")},getMTU:function(){return _1.gp(this.xbond,"mtu")},putMTU:function(a){return _1.pp(this.xbond,"mtu",a)},getState:function(){return _1.gp(this.xbond,"state")},getOver:function(){return _1.gp(this.xbond,
"over")},getIPAddress:function(){return _1.gp(this.xbond,"ip")},putIPAddress:function(a){return _1.pp(this.xbond,"ip",a)},getDomainName:function(){return this.domainName},putDomainName:function(a){this.domainCollection.removeNode("DOMAIN");var b="";a=a.split(" ");_.each(a,function(c){if(c!="")b+="<Domain_Name>"+c+"</Domain_Name>"},this);b!=""&&this.domainCollection.appendNode(new _.Xml.document("<DOMAIN>"+b+"</DOMAIN>"))},getIPv6Address:function(){return _1.gp(this.xbond,"ipv6")},putIPv6Address:function(a){return _1.pp(this.xbond,
"ipv6",a)},getIPv6AddressLocal:function(){return _1.gp(this.xbond,"ipv6_link")},getMACAddress:function(){return _1.gp(this.xbond,"mac")},getVNICS:function(){return this.xvnics?this.xvnics.getChildren():_4},getIPType:function(){return _1.gp(this.xbond,"iptype")},putIPType:function(a){return _1.pp(this.xbond,"iptype",a)},getIPv6Type:function(){return _1.gp(this.xbond,"ipv6type")},putIPv6Type:function(a){return _1.pp(this.xbond,"ipv6type",a)},getRouter:function(){return _1.gp(this.xbond,"router")},
putRouter:function(a){return _1.pp(this.xbond,"router",a)},getRouterv6:function(){return _1.gp(this.xbond,"router6")},putRouterv6:function(a){return _1.pp(this.xbond,"router6",a)},getSubnet:function(){return _1.gp(this.xbond,"subnet")},putSubnet:function(a){return _1.pp(this.xbond,"subnet",a)},getPrefixLength:function(){return _1.gp(this.xbond,"prefixlength")},putPrefixLength:function(a){return _1.pp(this.xbond,"prefixlength",a)},getPrefixLengthLocal:function(){return _1.gp(this.xbond,"prefixlength_link")},
getVID:function(){return _1.gp(this.xbond,"vid")},putVID:function(a){return _1.pp(this.xbond,"vid",a)},getJumboFrames:function(){return _1.gp(this.xbond,"jumbo")},putJumboFrames:function(a){return _1.pp(this.xbond,"jumbo",a)},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():_4},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("dnscollection");b.removeNode("DNS");if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());
e&&d.loadFromXml(e)});else if(_a(a,"_i1z")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4},getBackupPrimary:function(){return _1.gp(this.xbond,"primary")},putBackupPrimary:function(a){return _1.pp(this.xbond,"primary",a)},getRoutes:function(){return this.xroutes?this.xroutes.getChildren():_4},putRoutes:function(a){if(this.x&&a){var b=this.x.selectSingleNode("routecollection");b.removeNode("Route");
_.each(a,function(c){c=_a(c,"_i3");var d=b.appendNode(c.getXml());d&&c.loadFromXml(d)});return _a(this,"_i3").loadFromXml(this.x)}return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xbond=_a(new _1.xprop(this.x),"_i5");var b=_a(this,"_i3"),c=a.selectNodes("vnic_collection/vnic");if(c){this.xn=a;b.removeChild(b.getChildByTrait("_i28"));this.xvnics=_a(new _1.vnic(true),"_i3");
_.each(c,function(e){var f=_a(new _1.vnic(true),"_i3");f.loadFromXml(e)==_5&&this.xvnics.appendChild(f)},this);b.appendChild(this.xvnics)}if(c=a.selectSingleNode("dnscollection")){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=_a(new _1._1,"_i3");_.each(c,function(e){var f=_a(new _1.dns(true),"_i3");f.loadFromXml(e)==_5&&this.xdns.appendChild(f)},this);b.appendChild(this.xdns)}if(c=a.selectSingleNode("routecollection")){c=
a.selectNodes("routecollection/Route");this.xroutes&&b.removeChild(this.xroutes);this.xroutes=_a(new _1._1,"_i3");_.each(c,function(e){var f=_a(new _1.nroute(true),"_i3");f.loadFromXml(e)==_5&&this.xroutes.appendChild(f)},this);b.appendChild(this.xroutes)}this.domainCollection=a.selectSingleNode("domaincollection");this.domainName="";a=a.selectNodes("domaincollection/DOMAIN/Domain_Name");var d=[];_.each(a,function(e){d.push(e.getNodeText())},this);if(d.length>0)this.domainName=
d.join(" ");return _5}}});_._2("_1");
_1.scsitarget=_._1(_8,_1._1,_i1o,{constructor:function(a){_1.scsitarget.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Target Node_Name=""/>')).selectNodes("./*")[0])},_i1o:{getName:function(){return this.x?this.x.getAttributeText("Node_Name"):_4},putName:function(a){return this.x?this.x.setAttributeText(a,"Node_Name"):_4},getSessionsCount:function(){return this.x?this.x.getAttributeText("Sessions"):
_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.scsihost=_._1(_8,_1._1,_i1l,{constructor:function(a){_1.scsihost.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Host Node_Name="" chapSecret="" chapSecretValueBase64=""/>')).selectNodes("./*")[0])},_i1l:{getName:function(){return this.x?this.x.getAttributeText("Node_Name"):_4},putName:function(a){return this.x?this.x.setAttributeText(a,"Node_Name"):_4},putChapSecretValueBase64:function(a){return this.x?
this.x.setAttributeText(a,"chapSecretValueBase64"):_4},getChapSecret:function(){return this.x?this.x.getAttributeText("chapSecret"):_4},putChapSecret:function(a){a=a==false||a==="0"?"0":"1";return this.x?this.x.setAttributeText(a,"chapSecret"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.lun=_._1(_9,_1._1,_i1j,{constructor:function(a){_1.lun.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <LUN id="0" resource-type="LUN">                    <Comment></Comment>                    <Size></Size>                    <BlockSize>65536</BlockSize>                    <Available></Available>                    <Allocated></Allocated>                    <Volume_Id></Volume_Id>                    <Name></Name>                    <Sparse>false</Sparse>                    <LUN_Group/>                    <Compression>off</Compression>                    <BitRotProtection>off</BitRotProtection>                    <Logbias/>                    <Dedup>off</Dedup>                    <ThinLunAlertThreshold></ThinLunAlertThreshold>                    <Snapshot_Schedule id="0" resource-id="0" resource-type="snapshot-schedule" enabled="1" minute="0" hour="0" day-of-month="*" day-of-week="0" month="0" last-taken="0" purge-manual-snapshot="0" smart-snapshot="1"/>                </LUN>')).selectNodes("./*")[0])},
_i1j:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):_4},getComment:function(){return _1.gp(this.xlun,"Comment")},putComment:function(a){return _1.pp(this.xlun,"Comment",a)},getSize:function(){return _1.gp(this.xlun,"Size")},putSize:function(a){return _1.pp(this.xlun,"Size",a)},getBlockSize:function(){return _1.gp(this.xlun,"BlockSize")},putBlockSize:function(a){return _1.pp(this.xlun,"BlockSize",a)},getAlertThreshold:function(){return _1.gp(this.xlun,"ThinLunAlertThreshold")},
putAlertThreshold:function(a){return _1.pp(this.xlun,"ThinLunAlertThreshold",a)},getAvailable:function(){return _1.gp(this.xlun,"Available")},getAllocated:function(){return _1.gp(this.xlun,"Allocated")},getUsedByDataset:function(){return _1.gp(this.xlun,"UsedByDataset")},getUsedBySnapshots:function(){return _1.gp(this.xlun,"UsedBySnapshots")},getUsedByRefReservation:function(){return _1.gp(this.xlun,"UsedByRefReservation")},getVolumeId:function(){return _1.gp(this.xlun,"Volume_Id")},putVolumeId:function(a){return _1.pp(this.xlun,
"Volume_Id",a)},getName:function(){return _1.gp(this.xlun,"Name")},putName:function(a){return _1.pp(this.xlun,"Name",a)},getSparse:function(){return _1.gp(this.xlun,"Sparse")=="true"},putSparse:function(a){return _1.pp(this.xlun,"Sparse",a?"true":"false")},getBlockSize:function(){return _1.gp(this.xlun,"BlockSize")},putBlockSize:function(a){return _1.pp(this.xlun,"BlockSize",a)},getLUNGroupName:function(){return _1.gp(this.xlun,"LUN_Group")},putLUNGroupName:function(a){return _1.pp(this.xlun,
"LUN_Group",a)},getCompression:function(){return _1.gp(this.xlun,"Compression")},putCompression:function(a){return _1.pp(this.xlun,"Compression",a?"on":"off")},getBitRotProtection:function(){return _1.gp(this.xlun,"BitRotProtection")},putBitRotProtection:function(a){return _1.pp(this.xlun,"BitRotProtection",a?"on":"off")},getAutoDefrag:function(){return _1.gp(this.xlun,"AutoDefrag")},putAutoDefrag:function(a){return _1.pp(this.xlun,"AutoDefrag",a?"on":"off")},getCompressRatio:function(){return _1.gp(this.xlun,
"CompressRatio")},getLogbias:function(){return _1.gp(this.xlun,"Logbias")},putLogbias:function(a){return _1.pp(this.xlun,"Logbias",a)},getDedup:function(){return _1.gp(this.xlun,"Dedup")},putDedup:function(a){return _1.pp(this.xlun,"Dedup",a?"on":"off")},getCountOfContinuousSnapshots:function(){return parseInt(_1.gp(this.xlun,"Snapshot_Continuous_Count"))},getCountOfManualSnapshots:function(){return parseInt(_1.gp(this.xlun,"Snapshot_Manual_Count"))},getShared:function(){return _1.gp(this.xlun,
"Shared")=="true"},putShared:function(a){return _1.pp(this.xlun,"Shared",a?"true":"false")},getEnableProtection:function(){return this.xsnapshdlr.getAttributeText("enabled")=="1"?true:false},putEnableProtection:function(a){this.xsnapshdlr.setAttributeText(a?"1":"0","enabled")},getEnableSmartSnapshot:function(){return this.xsnapshdlr.getAttributeText("smart-snapshot")=="1"?true:false},putEnableSmartSnapshot:function(a){this.xsnapshdlr.setAttributeText(a?"1":"0","smart-snapshot")},getSnapshotScheduleInterval:function(){for(var a=
{hour:"hourly","day-of-week":"daily","day-of-month":"weekly",month:"monthly"},b=["hour","day-of-week","day-of-month","month"],c,d=0;d<b.length;++d){c=this.xsnapshdlr.getAttributeText(b[d]);if(c=="*")return a[b[d]]}return""},getFirstSnapshotCreationTime:function(){return parseInt(_1.gp(this.xlun,"First_Snapshot_Created_On"))},getLastSnapshotCreationTime:function(){return parseInt(_1.gp(this.xlun,"Latest_Snapshot_Created_On"))},putSnapshotScheduleInterval:function(a){var b=["minute","hour","day-of-week",
"day-of-month","month"];a={hourly:"hour",daily:"day-of-week",weekly:"day-of-month",monthly:"month"}[a];for(var c=false,d=0;d<b.length;++d){if(!c&&a==b[d])c=true;this.xsnapshdlr.setAttributeText(c?"*":"0",b[d])}},getCustomSnapshotManagement:function(){return _1.gp(this.xlun,"CustomSnapshotManagement")=="1"},putCustomSnapshotManagement:function(a){return _1.pp(this.xlun,"CustomSnapshotManagement",a?"1":"0")},getNonEmptySnapshots:function(){return _1.gp(this.xlun,"NonEmptySnapshots")=="1"},putNonEmptySnapshots:function(a){return _1.pp(this.xlun,
"NonEmptySnapshots",a?"1":"0")},getCustomSnapshotSchedule:function(){return this.xsched?this.xsched.getConfig():_4},putCustomSnapshotSchedule:function(a){return this.xsched?this.xsched.putConfig(a):_4},getSnapshotRetentionType:function(){return _1.gp(this.xlun,"SnapshotRetention/type")},putSnapshotRetentionType:function(a){return _1.pp(this.xlun,"SnapshotRetention/type",a)},getSnapshotRetentionNumber:function(){return _1.gp(this.xlun,"SnapshotRetention/number")},putSnapshotRetentionNumber:function(a){return _1.pp(this.xlun,
"SnapshotRetention/number",a)},getSnapshotRetentionLifeTime:function(){return _1.gp(this.xlun,"SnapshotRetention/lifetime")},putSnapshotRetentionLifeTime:function(a){return _1.pp(this.xlun,"SnapshotRetention/lifetime",a)},getMigration:function(){return _1.gp(this.xlun,"Migration")=="1"},getExportInProgress:function(){return this.xexport?this.xexport.getAttributeText("active")=="1":false},getExportPath:function(){return this.xexport?this.xexport.getNodeText():""},getExportProcessId:function(){return this.xexport?
this.xexport.getAttributeText("id"):_4},getImportInProgress:function(){return this.ximport?this.ximport.getAttributeText("active")=="1":false},getImportPath:function(){return this.ximport?this.ximport.getNodeText():""},getImportProcessId:function(){return this.ximport?this.ximport.getAttributeText("id"):_4},getOriginClone:function(){return this.xcloneinfo.getAttributeText("origin")},getCloneState:function(){if(this.xcloneinfo&&this.xcloneinfo.getAttributeText("snapshot")){var a=this.xcloneinfo.getAttributeText("snapshot");
return this.xcloneinfo.getAttributeText("origin")?this.xcloneinfo.getAttributeText("origin")+"@"+a.substr(a.indexOf("_")+1):this.xcloneinfo.getAttributeText("origin")}return _4},getSnapshotClone:function(){return this.xcloneinfo.getAttributeText("snapshot")},getUseReplicate:function(){return _1.gp(this.xlun,"Use_List/Use/Replicate")},getReplicateJobId:function(){return _1.gp(_a(new _1.xprop(this.x),"_i5"),"Use_List/Use/Replicate/JobId")},getReplicateJobName:function(){return _1.gp(_a(new _1.xprop(this.x),
"_i5"),"Use_List/Use/Replicate/JobName")},getIsReplicateSource:function(){var a=_1.gp(_a(new _1.xprop(this.x),"_i5"),"Use_List/Use/Replicate/Source");return a=="true"||a==_4},getSync:function(){return _1.gp(this.xlun,"Sync")},putSync:function(a){return _1.pp(this.xlun,"Sync",a)},isReadyDRShare:function(){return _3}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xlun=_a(new _1.xprop(this.x),"_i5");this.xsnapshdlr=
this.x.selectSingleNode("Snapshot_Schedule");this.xcloneinfo=this.x.selectSingleNode("CloneInfo");this.xexport=this.x.selectSingleNode("ExportDatasetTo");this.ximport=this.x.selectSingleNode("ImportDatasetFrom");a=this.x.selectSingleNode("Custom_Snapshot_Schedule");delete this.xsched;if(a){var b=_a(new _1.snapsched,"_i3");if(b.loadFromXml(a)==_5)this.xsched=_a(b,"ISnapshotSchedule")}return _5}}});_._2("_1");
_1.lungroup=_._1(_9,_1._1,_i1k,{constructor:function(a){_1.lungroup.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <LUN_Group resource-id="" chapAuth="0" chapSecret="" chapSecretValueBase64="" >                    <Name></Name>                    <Secret></Secret>                    <Target_Group Name="" />                    <Host_Group Name="" />                </LUN_Group>')).selectNodes("./*")[0])},
_i1k:{getName:function(){return _1.gp(this.xlungroup,"Name")},putName:function(a){return _1.pp(this.xlungroup,"Name",a)},getChapAuth:function(){return this.x?this.x.getAttributeText("chapAuth"):_4},putChapAuth:function(a){a=a==false||a==="0"?"0":"1";return this.x?this.x.setAttributeText(a,"chapAuth"):_4},putChapSecretValueBase64:function(a){return this.x?this.x.setAttributeText(a,"chapSecretValueBase64"):_4},getChapSecret:function(){return this.x?this.x.getAttributeText("chapSecret"):
_4},putChapSecret:function(a){a=a==false||a==="0"?"0":"1";return this.x?this.x.setAttributeText(a,"chapSecret"):_4},getAllHosts:function(){return _1.gp(this.xlungroup,"AllHosts")=="true"},putAllHosts:function(a){return _1.pp(this.xlungroup,"AllHosts",a?"true":"false")},getTargets:function(){return this.xtrs?this.xtrs.getChildren():_4},putTargets:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Target_Group");b.removeNode("Target");if(_.isArray(a))_.each(a,function(d){d=_a(d,
"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(_a(a,"_i1o")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4},getDedicatedLink:function(){return this.dedicatedLink?this.dedicatedLink:_4},putDedicatedLink:function(a){if(this.x){var b=this.x.selectSingleNode("Link_Group");b.removeNode("Interface_Name");a&&b.appendNode(new _.Xml.document("<Interface_Name>"+
a+"</Interface_Name>"))}},getHosts:function(){return this.xinits?this.xinits.getChildren():_4},putHosts:function(a){if(this.x&&a){var b=this.x.selectSingleNode("Host_Group");b.removeNode("Host");if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(_a(a,"_i1l")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4}},
_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xlungroup=_a(new _1.xprop(this.x),"_i5");var b=a.selectNodes("Target_Group"),c=a.selectNodes("Host_Group"),d=_a(this,"_i3"),e=a.selectSingleNode("Link_Group/Interface_Name");if(e)this.dedicatedLink=e.getNodeText();if(b&&c){this.xtrs&&d.removeChild(this.xtrs);this.xtrs=_a(new _1._1,"_i3");b=a.selectNodes("Target_Group/Target");_.each(b,function(f){var g=_a(new _1.scsitarget(true),
"_i3");g.loadFromXml(f)==_5&&this.xtrs.appendChild(g)},this);d.appendChild(this.xtrs);this.xinits&&d.removeChild(this.xinits);this.xinits=_a(new _1._1,"_i3");a=a.selectNodes("Host_Group/Host");_.each(a,function(f){var g=_a(new _1.scsihost(true),"_i3");g.loadFromXml(f)==_5&&this.xinits.appendChild(g)},this);d.appendChild(this.xinits);return _5}return _4}}});_._2("_1");
_1.serviceManager=_._1(_8("_i35"),_1._1,_i34,{constructor:function(){_1.serviceManager.superclass.constructor.apply(this,arguments)},_i34:{updateSystemServiceInfo:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Protocols" resource-type="Protocol_Collection"/>',_.id())),a)},commitSystemService:function(a){if(this.x)return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Protocols" resource-type="Protocol_Collection">{1}</xs:set>',
_.id(),this.x)),a);return S_FALSE},getSystemServices:function(){return this.xprotocols?this.xprotocols.getChildren():_4},getSystemServiceByName:function(a){if(this.xprotocols)for(var b=this.xprotocols.getChildren(),c=0;c<b.length;++c){var d=_a(b[c],"_i32");if(d.getName()==a)return d}return null},getTIVOInfo:function(){return this.tivocfg?this.tivocfg:_4},getTIVOList:function(){return this.tivos?this.tivos.getChildren():_4},activateTIVO:function(a,b,c){b=String.format('<Activate name="{0}" active="true" key="{1}"/>',
b,c);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="TIVOActivate" resource-type="TIVOSettings">{1}</xs:set>',_.id(),b)),a)},deactivateTIVO:function(a,b){b=String.format('<Activate name="{0}" active="false" key="{1}"/>',b,"");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="TIVOActivate" resource-type="TIVOSettings">{1}</xs:set>',_.id(),b)),a)},updateTIVOStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="TIVOSettings" resource-type="TIVOSettings"/>',
_.id())),a)},commitTIVOConfig:function(a,b,c,d,e,f){b=String.format(' <TIVO_Setting><TIVO folder="{0}" fast_transfer="{4}"/>                                    <Schedule hour="{1}" minute="{2}" days="{3}"/> </TIVO_Setting>',b,c,d,e,f);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="TIVO_Setting" resource-type="TIVOSettings">{1}</xs:set>',_.id(),b)),a)},updateRemoteSSH:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="RemoteAccessSSH" resource-type="System"/>',
_.id())),a)},commitRemoteSSH:function(a,b,c,d){b=String.format('<RemoteAccessSSH enable="{0}" comment="{1}" port="{2}"/>',b,c,d);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="RemoteAccessSSH" resource-type="System">{1}</xs:set>',_.id(),b)),a)},getRemoteSSHPort:function(){return this.remotessh?this.remotessh.getAttributeText("port"):_4},getRemoteSSHComment:function(){return this.remotessh?this.remotessh.getAttributeText("comment"):_4},getRemoteSSHStatus:function(){return this.remotessh?
this.remotessh.getAttributeText("enable")=="true"?true:false:_4},updateGASetting:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="ReadynasFeedback" resource-type="System"/>',_.id())),a)},commitGASetting:function(a,b){b=String.format('<ReadynasFeedback  enable="{0}"/>',b);return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="ReadynasFeedback" resource-type="System">{1}</xs:set>',_.id(),b)),a)},getGASetting:function(){return this.gasetting?
this.gasetting.getAttributeText("enable"):_4},updateFileSearchStats:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FileSearch" resource-type="FileSearch" />',_.id())),a)},getFileSearchStats:function(){return this.xIndexStat},resetFileSearchIndex:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol"><xs:command_name>file-search-reset</xs:command_name></xs:command>',_.id())),
a)},pauseFileSearchIndex:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol"><xs:command_name>file-search-pause</xs:command_name></xs:command>',_.id())),a)},resumeFileSearchIndex:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol"><xs:command_name>file-search-resume</xs:command_name></xs:command>',_.id())),a)}},_i3:{Update:function(a){return _a(this,
"_i34").updateSystemServiceInfo(a)},Commit:function(a){return _a(this,"_i34").commitSystemService(a)},getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3"),c=a.getAttributeText("resource-id"),d=a.getAttributeText("resource-type"),e=a.selectNodes("./*");if(e&&e.length){var f=e[0];if(f&&f.getNodeName()=="RemoteAccessSSH"){this.remotessh=f;return _5}if(f&&f.getNodeName()=="ReadynasFeedback"){this.gasetting=f;return _5}}switch(d){case "Protocol_Collection":if(e&&
e.length){this.x=e[0];this.xprotocols&&b.removeChild(this.xprotocols);this.xprotocols=_a(new _1._1,"_i3");a=a.selectNodes("Protocol_Collection/Protocol");_.each(a,function(g){var h=_a(new _1.service,"_i3");this.xprotocols.appendChild(h);h.loadFromXml(g)!=_5&&this.xprotocols.removeChild(h)},this);b.appendChild(this.xprotocols);return _5}case "TIVOSettings":if(c=="TIVOSettings"){this.tivos&&b.removeChild(this.tivos);this.tivos=_a(new _1._1,"_i3");
c=a.selectNodes("TIVOSettings/TIVO_List/TIVO");_.each(c,function(g){var h=_a(new _1.tivolist,"_i3");this.tivos.appendChild(h);h.loadFromXml(g)!=_5&&this.tivos.removeChild(h)},this);b.appendChild(this.tivos);b=a.selectSingleNode("TIVOSettings/TIVO_Setting");if(_.isDefined(b)){this.tivocfg=_a(new _1.tivoinfo,"_i3");if(this.tivocfg.loadFromXml(b)==_5)return _5}}else this.tivoAct=a.selectSingleNode("TIVOSettings");return _5;case "FileSearch":if(c=="FileSearch"){b=
a.selectSingleNode("IndexStat");a=_a(new _1.indexstat,"_i3");if(a.loadFromXml(b)==_5){this.xIndexStat=_a(a,"ISysIndexStat");return _5}}}return _4}}});_._2("_1");
_1.service=_._1(_8("_i33"),_1._1,_i32,{constructor:function(){_1.service.superclass.constructor.apply(this,arguments)},_i32:{getName:function(){return this.x?this.x.getAttributeText("id"):_4},getEnable:function(){return this.x?!!parseInt(this.x.getAttributeText("enabled")):_4},putEnable:function(a){return this.x?this.x.setAttributeText(a?"1":"0","enabled"):_4},getStatus:function(){return this.x?this.x.getAttributeText("status"):
_4},getNFSThreads:function(){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.getAttributeText("threads"):_4},putNFSThreads:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"threads"):_4},getManageGids:function(){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.getAttributeText("manage-gids"):_4},putManageGids:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"manage-gids"):_4},getNFSV4:function(){return this.xoptions&&
this.nodeId==="nfs"?this.xoptions.getAttributeText("nfsv4-enable"):_4},putNFSV4:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"nfsv4-enable"):_4},getNFSV4Domain:function(){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.getAttributeText("nfsv4-domain"):_4},putNFSV4Domain:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a,"nfsv4-domain"):_4},getNFSHomeShareState:function(){return this.xoptions&&this.nodeId===
"nfs"?!!parseInt(this.xoptions.getAttributeText("user-home-directory")):_4},putNFSHomeShareState:function(a){return this.xoptions&&this.nodeId==="nfs"?this.xoptions.setAttributeText(a?"1":"0","user-home-directory"):_4},getFTPSEnable:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("ftps")):_4},putFTPSEnable:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","ftps"):_4},getFTPLogEnable:function(){return this.xoptions&&
this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("server-transfer-log")):_4},putFTPLogEnable:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","server-transfer-log"):_4},getFTPPort:function(){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.getAttributeText("port"):_4},putFTPPort:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"port"):_4},getFTPAuthMode:function(){return this.xoptions&&
this.nodeId==="ftp"?this.xoptions.getAttributeText("auth-mode"):_4},putFTPAuthMode:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"auth-mode"):_4},getFTPPassiveRangeMin:function(){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.getAttributeText("passive-range-min"):_4},putFTPPassiveRangeMin:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"passive-range-min"):_4},getFTPPassiveRangeMax:function(){return this.xoptions&&
this.nodeId==="ftp"?this.xoptions.getAttributeText("passive-range-max"):_4},putFTPPassiveRangeMax:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"passive-range-max"):_4},getFTPMasqAddr:function(){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.getAttributeText("masquerade-address"):_4},putFTPMasqAddr:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"masquerade-address"):_4},getFTPMaxUploadRate:function(){return this.xoptions&&
this.nodeId==="ftp"?parseInt(this.xoptions.getAttributeText("max-upload-rate")||"0"):_4},putFTPMaxUploadRate:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"max-upload-rate"):_4},getFTPMaxDownloadRate:function(){return this.xoptions&&this.nodeId==="ftp"?parseInt(this.xoptions.getAttributeText("max-download-rate")||"0"):_4},putFTPMaxDownloadRate:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a,"max-download-rate"):
_4},getFTPMasqEnable:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("enable-masquerade")):_4},putFTPMasqEnable:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","enable-masquerade"):_4},getFTPUploadResumeState:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("allow-upload-resume")):_4},putFTPUploadResumeState:function(a){return this.xoptions&&this.nodeId===
"ftp"?this.xoptions.setAttributeText(a?"1":"0","allow-upload-resume"):_4},getFTPHomeShareState:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("user-home-directory")):_4},putFTPHomeShareState:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","user-home-directory"):_4},getFTPForceFTPS:function(){return this.xoptions&&this.nodeId==="ftp"?!!parseInt(this.xoptions.getAttributeText("force-ftps")):_4},
putFTPForceFTPS:function(a){return this.xoptions&&this.nodeId==="ftp"?this.xoptions.setAttributeText(a?"1":"0","force-ftps"):_4},getDAAPShareName:function(){return this.xoptions&&this.nodeId==="daap"?this.xoptions.getAttributeText("sharename"):_4},putDAAPShareName:function(a){return this.xoptions&&this.nodeId==="daap"?this.xoptions.setAttributeText(a,"sharename"):_4},getDAAPPassword:function(){return this.xoptions&&this.nodeId==="daap"?this.xoptions.getAttributeText("password"):_4},
putDAAPPassword:function(a){return this.xoptions&&this.nodeId==="daap"?this.xoptions.setAttributeText(a,"password"):_4},getDAAPDirectory:function(){return this.xoptions&&this.nodeId==="daap"?this.xoptions.getAttributeText("directory"):_4},putDAAPDirectory:function(a){return this.xoptions&&this.nodeId==="daap"?this.xoptions.setAttributeText(a,"directory"):_4},getDLNAAutoScanState:function(){return this.xoptions&&this.nodeId==="dlna"?!!parseInt(this.xoptions.getAttributeText("auto-scan")):
_4},putDLNAAutoScanState:function(a){return this.xoptions&&this.nodeId==="dlna"?this.xoptions.setAttributeText(a?"1":"0","auto-scan"):_4},getDLNATivoServerState:function(){return this.xoptions&&this.nodeId==="dlna"?!!parseInt(this.xoptions.getAttributeText("enable-tivo-server")):_4},putDLNATivoServerState:function(a){return this.xoptions&&this.nodeId==="dlna"?this.xoptions.setAttributeText(a?"1":"0","enable-tivo-server"):_4},rescanDLNA:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="Protocols" resource-type="Protocol">                        <xs:command_name>rescan-dlna</xs:command_name>                        <xs:args/>                        </xs:command>',
_.id())),a)},getDLNATivoArchiverState:function(){return this.xoptions&&this.nodeId==="dlna"?!!parseInt(this.xoptions.getAttributeText("enable-tivo-archiver")):_4},putDLNATivoArchiverState:function(a){return this.xoptions&&this.nodeId==="dlna"?this.xoptions.setAttributeText(a?"1":"0","enable-tivo-archiver"):_4},getBonjourCIFSState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("cifs")):_4},putBonjourCIFSState:function(a){return this.xoptions&&
this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","cifs"):_4},getBonjourAFPState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("afp")):_4},putBonjourAFPState:function(a){return this.xoptions&&this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","afp"):_4},getBonjourFrontviewState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("frontview")):_4},putBonjourFrontviewState:function(a){return this.xoptions&&
this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","frontview"):_4},getBonjourReadynasState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("readynas")):_4},putBonjourReadynasState:function(a){return this.xoptions&&this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","readynas"):_4},getBonjourTimeMachineState:function(){return this.xoptions&&this.nodeId==="bonjour"?!!parseInt(this.xoptions.getAttributeText("timemachine")):
_4},putBonjourTimeMachineState:function(a){return this.xoptions&&this.nodeId==="bonjour"?this.xoptions.setAttributeText(a?"1":"0","timemachine"):_4},getHTTPLoginEnableState:function(){return this.xoptions&&this.nodeId==="http"?!!parseInt(this.xoptions.getAttributeText("login-enabled")):_4},putHTTPLoginEnableState:function(a){return this.xoptions&&this.nodeId==="http"?this.xoptions.setAttributeText(a?"1":"0","login-enabled"):_4},getHTTPSelectedShareName:function(){return this.xoptions&&
this.nodeId==="http"?this.xoptions.getAttributeText("share-name"):_4},putHTTPSelectedShareName:function(a){return this.xoptions&&this.nodeId==="http"?this.xoptions.setAttributeText(a,"share-name"):_4},getHTTPAdminEnabled:function(){return this.xoptions&&this.nodeId==="http"?this.xoptions.getAttributeText("http-admin"):_4},putHTTPAdminEnabled:function(a){return this.xoptions&&this.nodeId==="http"?this.xoptions.setAttributeText(a,"http-admin"):_4},getHTTPShareList:function(){return this.xhttpsl&&
this.nodeId==="http"?this.xhttpsl:_4},getHTTPSPort:function(){return this.xoptions&&this.nodeId==="https"?this.xoptions.getAttributeText("port"):_4},putHTTPSPort:function(a){return this.xoptions&&this.nodeId==="https"?this.xoptions.setAttributeText(a,"port"):_4},getHTTPSSslKeyHost:function(){return this.xoptions&&this.nodeId==="https"?this.xoptions.getAttributeText("ssl-key-host"):_4},putHTTPSSslKeyHost:function(a){return this.xoptions&&this.nodeId==="https"?this.xoptions.setAttributeText(a,
"ssl-key-host"):_4},getSNMPAllowHost:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("allow-host"):_4},putSNMPAllowHost:function(a){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.setAttributeText(a,"allow-host"):_4},getSNMPCommunity:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("community"):_4},putSNMPCommunity:function(a){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.setAttributeText(a,
"community"):_4},getSNMPTrapDest:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("trap-destination"):_4},putSNMPTrapDest:function(a){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.setAttributeText(a,"trap-destination"):_4},getSNMPMibUrl:function(){return this.xoptions&&this.nodeId==="snmp"?this.xoptions.getAttributeText("mib-url"):_4},getSNMPContact:function(){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&this.xoptionsProps!=
_4)return _1.gp(this.xoptionsProps,"Contact");return _4},putSNMPContact:function(a){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&this.xoptionsProps!=_4)return _1.pp(this.xoptionsProps,"Contact",a);return _4},getSNMPLocation:function(){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&this.xoptionsProps!=_4)return _1.gp(this.xoptionsProps,"Location");return _4},putSNMPLocation:function(a){if(this.xoptions&&this.nodeId==="snmp")if(this.xoptionsProps&&
this.xoptionsProps!=_4)return _1.pp(this.xoptionsProps,"Location",a);return _4},getSSHPort:function(){return this.xoptions&&this.nodeId==="ssh"?this.xoptions.getAttributeText("port"):_4},putSSHPort:function(a){return this.xoptions&&this.nodeId==="ssh"?this.xoptions.setAttributeText(a,"port"):_4},getSSHPswdAuthEnable:function(){return this.xoptions&&this.nodeId==="ssh"?this.xoptions.getAttributeText("password-authentication"):_4},putSSHPswdAuthEnable:function(a){return this.xoptions&&
this.nodeId==="ssh"?this.xoptions.setAttributeText(a,"password-authentication"):_4},getReplicateOwner:function(){return this.xreplicateAuth&&this.nodeId==="replicate"?_1.gp(this.xreplicateAuth,"Owner"):_4},putReplicateOwner:function(a){return this.xreplicateAuth&&this.nodeId==="replicate"?_1.pp(this.xreplicateAuth,"Owner",a):_4},getReplicatePassword:function(){return this.xreplicateAuth&&this.nodeId==="replicate"?_1.gp(this.xreplicateAuth,"Password"):_4},putReplicatePassword:function(a){return this.xreplicateAuth&&
this.nodeId==="replicate"?_1.pp(this.xreplicateAuth,"Password",a):_4},getGenieHost:function(){return this.xoptions&&this.nodeId==="smartnetwork"?this.xoptions.getAttributeText("hostname"):_4},getIndexContent:function(){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.getAttributeText("index-content")=="1":_4},putIndexContent:function(a){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.setAttributeText(a?"1":"0","index-content"):_4},getIgnoreNumbers:function(){return this.xoptions&&
this.nodeId==="file-search"?this.xoptions.getAttributeText("fts-ignore-numbers")=="1":_4},putIgnoreNumbers:function(a){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.setAttributeText(a?"1":"0","fts-ignore-numbers"):_4},putNeedResetIndex:function(a){return this.xoptions&&this.nodeId==="file-search"?this.xoptions.setAttributeText(a?"1":"","need-reset-index"):_4},getExcludedFiles:function(){if(this.xoptions&&this.nodeId==="file-search"){var a=this.xoptions.selectNodes("./Ignorefile_List/Ignorefile"),
b=[];_.each(a,function(c){b.push(c.getNodeText())},this);return b}return _4},putExcludedFiles:function(a){if(this.xoptions&&this.nodeId==="file-search"){var b=this.xoptions.selectSingleNode("./Ignorefile_List"),c="";b&&b!=_4&&b.removeNode();_.each(a,function(d){if(d)c+="<Ignorefile><![CDATA["+d+"]]\></Ignorefile>"},this);return this.xoptions.appendNode(new _.Xml.document("<Ignorefile_List>"+c+"</Ignorefile_List>"))}return _4},getExcludedFolders:function(){if(this.xoptions&&this.nodeId===
"file-search"){var a=this.xoptions.selectNodes("./Ignoredir_List/Ignoredir"),b=[];_.each(a,function(c){b.push(c.getNodeText())},this);return b}return _4},putExcludedFolders:function(a){if(this.xoptions&&this.nodeId==="file-search"){var b=this.xoptions.selectSingleNode("./Ignoredir_List"),c="";b&&b!=_4&&b.removeNode();_.each(a,function(d){if(d)c+="<Ignoredir><![CDATA["+d+"]]\></Ignoredir>"},this);return this.xoptions.appendNode(new _.Xml.document("<Ignoredir_List>"+c+"</Ignoredir_List>"))}return _4},
getCifsSmbEncrypt:function(){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.getAttributeText("smb-encrypt"):""},putCifsSmbEncrypt:function(a){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.xmlDocument.setAttribute("smb-encrypt",a):_4},removeCifsSmbEncrypt:function(){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.getAttribute("smb-encrypt")&&this.xoptions.xmlDocument.attributes.removeNamedItem("smb-encrypt"):_4},getCifsEnhanceMacOS:function(){return this.xoptions&&
this.nodeId==="cifs"?this.xoptions.getAttributeText("enhance-macos")=="1":_4},putCifsEnhanceMacOS:function(a){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.setAttributeText(a?"1":"0","enhance-macos"):_4},getCifsWindowsDiscovery:function(){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.getAttributeText("legacy-support")=="1":_4},putCifsWindowsDiscovery:function(a){return this.xoptions&&this.nodeId==="cifs"?this.xoptions.setAttributeText(a?"1":"0","legacy-support"):
_4},getISNSServer:function(){return this.xoptions&&this.nodeId==="isns"?this.xoptions.getAttributeText("server-address"):_4},putISNSServer:function(a){return this.xoptions&&this.nodeId==="isns"?this.xoptions.setAttributeText(a,"server-address"):_4},getAuditLoginAttempts:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("enabled_login_attempts"):_4},putAuditLoginAttempts:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,
"enabled_login_attempts"):_4},getAuditAccessLevelC:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("enabled_access_level"):_4},putAuditAccessLevelC:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"enabled_access_level"):_4},getAuditAccessLevelT:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("audit_access_level"):_4},putAuditAccessLevelT:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"audit_access_level"):_4},getAuditPath:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("archive_path"):_4},putAuditPath:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"archive_path"):_4},getAuditCompress:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("archive_compress"):_4},putAuditCompress:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"archive_compress"):_4},getAuditSize:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("retention_size_mb"):_4},putAuditSize:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"retention_size_mb"):_4},getAuditLines:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("retention_lines"):_4},putAuditLines:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"retention_lines"):_4},getAuditEnableTime:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("enabled_time"):_4},putAuditEnableTime:function(a){return this.xoptions&&this.nodeId==="audit"?this.xoptions.setAttributeText(a,"enabled_time"):_4},getAuditDay:function(){return this.xoptions&&this.nodeId==="audit"?this.xoptions.getAttributeText("retention_time_length_day"):_4},putAuditDay:function(a){return this.xoptions&&
this.nodeId==="audit"?this.xoptions.setAttributeText(a,"retention_time_length_day"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.nodeId=this.x.getAttributeText("id");this.xoptions=this.x.selectSingleNode("./Options");this.xoptionsProps=_a(new _1.xprop(this.xoptions),"_i5");a=this.x.selectNodes("./Share_Collection/Share");if(this.xreplicateAuth=this.x.selectSingleNode("./Authentication"))this.xreplicateAuth=_a(new _1.xprop(this.xreplicateAuth),
"_i5");if(a){this.xhttpsl=[];_.each(a,function(b){b=_a(new _1.xprop(b),"_i5");this.xhttpsl.push(_1.gp(b,"Name"))},this)}return _5}}});_._2("_1");
_1.tivoinfo=_._1(_9,_1._1,_i36,{constructor:function(){_1.tivoinfo.superclass.constructor.apply(this,arguments)},_i36:{getSharedFolderList:function(){return this.x.selectSingleNode("DLNA").getAttributeText("folderList")},getTIVOFolder:function(){return this.x.selectSingleNode("TIVO").getAttributeText("folder")},getHour:function(){return this.x.selectSingleNode("Schedule ").getAttributeText("hour")},getMinute:function(){return this.x.selectSingleNode("Schedule ").getAttributeText("minute")},
getDays:function(){return this.x.selectSingleNode("Schedule ").getAttributeText("days")},getFastTransfer:function(){return this.x.selectSingleNode("TIVO").getAttributeText("fast_transfer")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.tivolist=_._1(_9,_1._1,_i37,{constructor:function(){_1.tivolist.superclass.constructor.apply(this,arguments)},_i37:{getName:function(){return this.name},isActivated:function(){return this.isactive},getStatus:function(){return this.status}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.name=this.x.getAttributeText("name");this.isactive=this.x.getAttributeText("active");this.status=this.x.getAttributeText("status");return _5}}});
_._2("_1");
_1.indexstat=_._1(_9,_1._1,ISysIndexStat,{constructor:function(){_1.indexstat.superclass.constructor.apply(this,arguments)},ISysIndexStat:{getStatus:function(){return _1.gp(this.xproptlist,"Status")},getFilesNumber:function(){return _1.gp(this.xproptlist,"n_files")},getFoldersNumber:function(){return _1.gp(this.xproptlist,"n_folders")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");
return _5}}});_._2("_1");
_1.fwManager=_._1(_8("_i3w"),_1._1,_i3v,_iw,{constructor:function(){_1.fwManager.superclass.constructor.apply(this,arguments);this.isJustUpdated="0";this.updateChannel=""},_i3v:{checkForUpdate:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FW_Broker" resource-type="FirmwareImage"></xs:get>',_.id())),a,b.getSourceFWURL(),
"FORM")},getFirmwareInfo:function(){return this.fmw?this.fmw:_4},PerfomeLastFirmwareUpdate:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="FW_Broker" resource-type="FirmwareUpdate">                        <xs:command_name>FirmwareUpdate</xs:command_name>                    </xs:command>',_.id())),a,b.getSourceFWURL(),"FORM")},updateFirmwareDownloadProgress:function(a){var b=_a(_a(this,
"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FW_Broker" resource-type="FirmwareProgress"></xs:get>',_.id())),a,b.getSourceFWURL(),"FORM")},getDownloadState:function(){return this.firms?this.firms:_4},getDownloadProgress:function(){return this.firmv?this.firmv:_4},cancelFirmwareDownload:function(a){var b=_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="FW_Broker" resource-type="FirmwareCancel"><xs:command_name>FirmwareCancel</xs:command_name></xs:command>',
_.id())),a,b.getSourceFWURL(),"FORM")},updateFirmWareUpdateStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="SystemStatusForAdminGui" resource-type="SystemStatusForGui"></xs:get>',_.id())),a)},getFirmWareUpdateStatus:function(){return this.isJustUpdated==="1"},getUpdateChannelNML:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="UpdateChannel" resource-type="System"></xs:get>',_.id())),a)},getUpdateChannel:function(){return this.updateChannel},
setUpdateChannel:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="UpdateChannel" resource-type="System">                    <UpdateChannel>{1}</UpdateChannel>                </xs:set>',_.id(),b)),a)}},_iw:{OnEvent:function(){return _5}},_i3:{loadFromXml:function(a){switch(a.getAttributeText("resource-type")){case "FirmwareProgress":if(a=a.selectSingleNode("FirmwareProgress")){this.firms=a.getAttributeText("state");this.firmv=
a.getAttributeText("value");var b=_a(this,"_i3");if(a=a.selectSingleNode("FirmwareImage")){var c=_a(new _1.sysfmw,"_i3");if(c.loadFromXml(a)==_5){this.fmw&&b.removeChild(this.fmw);this.fmw=c;b.appendChild(this.fmw);return _5}}return _5}break;case "FirmwareCancel":case "FirmwareUpdate":return _5;case "FirmwareImage":b=_a(this,"_i3");if(a=a.selectSingleNode("FirmwareImage")){c=_a(new _1.sysfmw,"_i3");if(c.loadFromXml(a)==_5){this.fmw&&
b.removeChild(this.fmw);this.fmw=c;b.appendChild(this.fmw);return _5}}break;case "SystemStatusForGui":if(a=a.selectSingleNode("SystemStatusForAdminGui"))if(a=a.selectSingleNode("FirmwareUpdateFlag"))this.isJustUpdated=a.getNodeText();return _5;case "System":if(b=a.selectSingleNode("UpdateChannel"))this.updateChannel=b.getNodeText()||"";return _5}return _4}}});_._2("_1");
_1.sprotohost=_._1(_8(),_1._1,_i3f,{constructor:function(a){_1.sprotohost.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Host id="0" resource-id="0" resource-type="Host">                    <Access/>                    <Host_Name/>                    <Root_Privilege/>                </Host>')).selectNodes("./*")[0])},_i3f:{getUIId:function(){return this.x?this.x.getAttributeText("id"):
_4},putUIId:function(a){return this.x.setAttributeText(a,"id")},getId:function(){return this.x?this.x.getAttributeText("resource-id"):_4},getAccess:function(){return _1.gp(this.xsprotohost,"Access")},putAccess:function(a){return _1.pp(this.xsprotohost,"Access",a)},getHostName:function(){return _1.gp(this.xsprotohost,"Host_Name")},putHostName:function(a){return _1.pp(this.xsprotohost,"Host_Name",a)},getRootPrivilege:function(){return _1.gp(this.xsprotohost,"Root_Privilege")=="true"},putRootPrivilege:function(a){return _1.pp(this.xsprotohost,
"Root_Privilege",a?"true":"false")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsprotohost=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.adsprogress=_._1(_9,_1._1,_i2u,{constructor:function(){_1.adsprogress.superclass.constructor.apply(this,arguments)},_i2u:{getState:function(){return _1.gp(this.xadsprogress,"State")},getPercent:function(){return _1.gp(this.xadsprogress,"Percent")},getTotalUser:function(){return _1.gp(this.xadsprogress,"TotalUser")},getCurrUser:function(){return _1.gp(this.xadsprogress,"CurrUser")},getTotalGroup:function(){return _1.gp(this.xadsprogress,"TotalGroup")},
getCurrGroup:function(){return _1.gp(this.xadsprogress,"CurrGroup")},getStartAt:function(){return _1.gp(this.xadsprogress,"StartAt")},getDoneAt:function(){return _1.gp(this.xadsprogress,"DoneAt")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){_a(this,"_i3");this.x=a;this.xadsprogress=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.sclone=_._1(_9,_1._1,_i39,{constructor:function(){_1.sclone.superclass.constructor.apply(this,arguments)},_i39:{getId:function(){return this.x?this.x.getAttributeText("id"):_4},getShareId:function(){return this.x?this.x.getAttributeText("resource-id"):_4},getClonedShareName:function(){return this.x?this.x.getAttributeText("ClonedShareName "):_4},getParentSnapshotName:function(){return this.x?this.x.getAttributeText("ParentSnapshotName"):_4}},
_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.squota=_._1(_9,_1._1,_i3g,{constructor:function(){_1.squota.superclass.constructor.apply(this,arguments)},_i3g:{getHardLimitMB:function(){return this.x?this.x.getAttributeText("hardlimit-mb"):_4},putHardLimitMB:function(a){return this.x?this.x.setAttributeText(a,"hardlimit-mb"):_4},getUsedMB:function(){return this.x?this.x.getAttributeText("used-mb"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});
_1.suquota=_._1(_1.squota,IShareUserQuota,{constructor:function(a){_1.suquota.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Quota user-id="" hardlimit-mb="0" />')).selectNodes("./*")[0])},IShareUserQuota:{getUserId:function(){return this.x?this.x.getAttributeText("user-id"):_4},putUserId:function(a){return this.x?this.x.setAttributeText(a,"user-id"):_4},getUserName:function(){return this.x?this.x.getAttributeText("user-name"):
_4},putUserName:function(){return this.x?this.x.setAttributeText(id,"user-name"):_4}}});
_1.sgquota=_._1(_1.squota,IShareGroupQuota,{constructor:function(a){_1.sgquota.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Quota group-id="" hardlimit-mb="0" />')).selectNodes("./*")[0])},IShareGroupQuota:{getGroupId:function(){return this.x?this.x.getAttributeText("group-id"):_4},putGroupId:function(a){return this.x?this.x.setAttributeText(a,"group-id"):_4},getGroupName:function(){return this.x?
this.x.getAttributeText("group-name"):_4},putGroupName:function(a){return this.x?this.x.setAttributeText(a,"group-name"):_4}}});_._2("_1");
_1.localapp=_._1(_8("_i3m"),_1._1,_i3l,{constructor:function(){_1.localapp.superclass.constructor.apply(this,arguments)},_i3l:{getId:function(){return this.x?_1.xa2t(this.x,"resource-id"):_4},getStatus:function(){return this.x?_1.xa2t(this.x,"state"):_4},isPreinstalled:function(){return this.x?_1.xa2t(this.x,"is-preinstalled"):_4},isLocalApp:function(){return this.x?_1.xa2t(this.x,"is-localapp"):_4},isUninitialized:function(){return this.x?
_1.xa2t(this.x,"is-uninitialized"):_4},isInstalled:function(){return this.x?_1.xa2t(this.x,"is-uninitialized")==="0":false},getAppId:function(){return _1.gp(this.xproptlist,"AppID")},getName:function(){return _1.gp(this.xproptlist,"Name")},getAuthor:function(){return _1.gp(this.xproptlist,"Author")},getVersion:function(){return _1.gp(this.xproptlist,"Version")},getCategory:function(){return _1.gp(this.xproptlist,"Category")},getConfigURL:function(){return _1.gp(this.xproptlist,"ConfigURL")},
getLaunchURL:function(){return _1.gp(this.xproptlist,"LaunchURL")},getInfoURL:function(){return _1.gp(this.xproptlist,"InfoURL")},getDebianPackageName:function(){return _1.gp(this.xproptlist,"DebianPackage")},getServiceName:function(){return _1.gp(this.xproptlist,"ServiceName")},getDescription:function(){return _1.gp(this.xproptlist,"Description")},getMinFirmwareVer:function(){return _1.gp(this.xproptlist,"MinFirmwareVer")},getNewAppVersion:function(){return _1.gp(this.xproptlist,"NewerVersion")},
getAppType:function(){return"local"},getProcessId:function(){return this.pid?this.pid:_4},getAppBackgroundProcessStatus:function(){return this.pidStatus?this.pidStatus:_4},uninstallAppDryRun:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="LocalApp">                    <LocalApp>                        <dry-run>1</dry-run>                    </LocalApp>                </xs:delete>',_.id(),b)),a)},getUnInstallRelativeApps:function(){return this.uninstallRNodes},
uninstallApp:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="'+b+'" resource-type="LocalApp"/>',_.id())),a)},updateAppBackgroundProcessStatus:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BgProcess"/>',_.id(),b)),a)},updateServiceProcessStatus:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="unit:{1}" resource-type="Systemd"/>',_.id(),
b)),a)},getServiceActiveState:function(){return this.serviceActiveState?this.serviceActiveState:_4},getServiceSubState:function(){return this.serviceSubState?this.serviceSubState:_4},getServiceStateProgress:function(){return this.serviceStateProgress?this.serviceStateProgress:_4},commitAppUpgrade:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><AppName>{1}</AppName></xs:arg>                    </xs:args>                </xs:command>',
_.id(),b)),a)},installAppDryRun:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><AppName>{1}</AppName></xs:arg>                        <xs:arg><DryRun>1</DryRun></xs:arg>                    </xs:args>                </xs:command>',_.id(),b)),a)},getInstallRelativeApps:function(){return this.installRNodes},
getBrokenState:function(){return this.brokenstate},commitAppInstall:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><AppName>{1}</AppName></xs:arg>                    </xs:args>                </xs:command>',_.id(),b)),a)},commitAppState:function(a,b,c){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="{1}" resource-type="LocalApp">                    <Application resource-type="LocalApp" resource-id="{1}" state="{2}"/>                </xs:set>',
_.id(),b,c)),a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){a.getAttributeText("resource-id");var b=a.getAttributeText("resource-type"),c=this.uninstallRNodes=[],d=this.installRNodes=[];this.brokenstate="";if(b=="LocalApp"){$_(a.selectNodes("LocalApp_Collection/Application")).forEach(function(e){if(a.getNodeName()=="xs:delete-s")c.push(e.selectSingleNode("Name").getNodeText());else a.getNodeName()=="xs:command-s"&&d.push({id:e.getAttributeText("resource-id"),name:e.selectSingleNode("Name").getNodeText(),
version:e.selectSingleNode("Version").getNodeText(),debianpackage:e.selectSingleNode("DebianPackage").getNodeText()})});if(b=a.selectSingleNode("LocalApp_Collection/BrokenState"))this.brokenstate=b.getNodeText()}else switch(b){case "Systemd":this.serviceActiveState=a.selectSingleNode("SystemdUnit").getAttributeText("active-state");this.serviceSubState=a.selectSingleNode("SystemdUnit").getAttributeText("sub-state");this.serviceStateProgress=a.selectSingleNode("SystemdUnit").getAttributeText("status-text");
break;case "BgProcess":this.pidStatus=a.selectSingleNode("BgProcessStatus").getAttributeText("status");break;default:this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");if(this.x.selectSingleNode("NewerVersion"))this.xminv=this.x.selectSingleNode("NewerVersion").getAttributeText("MinFirmwareVer");break}return _5}}});_._2("_1");
_1.smartlocalappManager=_._1(_8("_i3o"),_1._1,_i3n,_iw,{constructor:function(){_1.smartlocalappManager.superclass.constructor.apply(this,arguments)},_i3n:{updateLocalApps:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="LocalApp" resource-type="LocalApp_Collection"/>',_.id())),a)},getLocalApps:function(){return this.LocalApp?this.LocalApp.getChildren():
_4},updateLocalAvailableApps:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="LocalAvailable" resource-type="LocalApp_Collection"/>',_.id())),a)},getLocalAvailableApps:function(){return this.LocalAvailable?this.LocalAvailable.getChildren():_4},updateEOLApps:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="EolApp" resource-type="LocalApp_Collection"/>',_.id())),a)},getEOLApps:function(){return this.EOLApps},
updateFeaturedApps:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FeaturedApp" resource-type="LocalApp_Collection"/>',_.id())),a)},getFeaturedApps:function(){return this.FeaturedApp?this.FeaturedApp.getChildren():_4},updateFeaturedAppsVisible:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FeaturedApps" resource-type="System"/>',_.id())),a)},getFeaturedAppsVisible:function(){return this.featuredAppsVisabile!==
undefined?this.featuredAppsVisabile:_4},updateLocalInstalledApps:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="LocalInstalled" resource-type="LocalApp_Collection"/>',_.id())),a)},getLocalInstalledApps:function(){return this.LocalInstalled?this.LocalInstalled.getChildren():_4},updateLocalGenieApps:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AllApp" resource-type="LocalApp_Collection"/>',_.id())),
a)},getLocalGenieApps:function(){return this.AllApp?this.AllApp.getChildren():_4},updateLocalLaunchableApps:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="LaunchableApp" resource-type="LocalApp_Collection"/>',_.id())),a)},getLocalLaunchableApps:function(){return this.LaunchableApp?this.LaunchableApp.getChildren():_4},updateLocalApp:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="LocalApp"/>',
_.id(),b)),a)},getAppBackgroundProcessStatus:function(){return this.pidStatus?this.pidStatus:_4},updateAppBackgroundProcessStatus:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BgProcess"/>',_.id(),b)),a)},updateServiceProcessStatus:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="unit:{1}.service" resource-type="Systemd"/>',_.id(),b)),a)},getServiceActiveState:function(){return this.serviceActiveState?
this.serviceActiveState:_4},getServiceSubState:function(){return this.serviceSubState?this.serviceSubState:_4},getServiceStateProgress:function(){return this.serviceStateProgress?this.serviceStateProgress:_4},commitCheckUpdate:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>apt-update</xs:command_name>                </xs:command>',_.id())),a)},installAppDryRun:function(a,
b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                    <xs:command_name>app-install</xs:command_name>                    <xs:args>                        <xs:arg><DebFile>/tmp/{1}</DebFile></xs:arg>                        <xs:arg><DryRun>1</DryRun></xs:arg>                    </xs:args>                </xs:command>',_.id(),b)),a)},getInstallRelativeApps:function(){return this.installRNodes},getBrokenState:function(){return this.brokenstate},
commitAppInstall:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="LocalApp" resource-type="LocalApp">                 <xs:command_name>app-install</xs:command_name>                  <xs:args>                    <xs:arg><DebFile>/tmp/{1}</DebFile></xs:arg>                  </xs:args>                </xs:command>',_.id(),b)),a)},commitFeaturedAppsVisible:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="FeaturedApps" resource-type="System">                    <Is_Visible>{1}</Is_Visible>                </xs:set>',
_.id(),b?"1":"0")),a)}},_iw:{OnEvent:function(a,b,c,d,e){if(e=="xs:update-s"){a=_a(new _1.localprogress,"_i3");if(a.loadFromXml(b[0])==_5)var f=_a(a,"_i3t");f.getStatusString()==="ABORT"?this.Fire("OnInstallationAbort",[f]):this.Fire("OnReceiveProgressData",[f])}return _5}},_i3:{getXml:function(){return this.x},Initialize:function(a){if(a=_a(a,"_i2"))return _a(a.getWebEventSink(),"_i1").Advise(this,"LocalApp");
return _4},loadFromXml:function(a,b){_a(this,"_i3");var c=a.getAttributeText("resource-id"),d=a.getAttributeText("resource-type"),e=this.installRNodes=[],f=this.EOLApps=[];this.brokenstate="";switch(d){case "BgProcess":this.pidStatus=a.selectSingleNode("BgProcessStatus").getAttributeText("status");break;case "Systemd":this.serviceActiveState=a.selectSingleNode("SystemdUnit").getAttributeText("active-state");this.serviceSubState=a.selectSingleNode("SystemdUnit").getAttributeText("sub-state");
this.serviceStateProgress=a.selectSingleNode("SystemdUnit").getAttributeText("status-text");break;case "System":this.featuredAppsVisabile=(c=_a(new _1.xprop(a),"_i5"))&&c.getProperty("Is_Visible")==="1";break;case "LocalApp":if(a.getNodeName()=="xs:command-s"){$_(a.selectNodes("LocalApp_Collection/Application")).forEach(function(h){a.getNodeName()=="xs:command-s"&&e.push({id:h.getAttributeText("resource-id"),name:h.selectSingleNode("Name").getNodeText(),version:h.selectSingleNode("Version").getNodeText(),
debianpackage:h.selectSingleNode("DebianPackage").getNodeText()})});if(c=a.selectSingleNode("LocalApp_Collection/BrokenState"))this.brokenstate=c.getNodeText()}else{d=_a(new _1.localapp,"_i3");if(d.loadFromXml(a.selectSingleNode("Application"))==_5){_a(this,"_i3").appendChild(d);this.Fire("OnUpdateLocalApp",[this,b,_a(d,"_i3l")])}}break;case "LocalApp_Collection":if(c==="LocalApp"||c==="LocalAvailable"||c==="LocalInstalled"||c==="AllApp"||c==="LaunchableApp"||
c==="FeaturedApp"){d=_a(this,"_i3");this[c]&&d.removeChild(this[c]);this[c]=_a(new _1._1,"_i3");b=a.selectNodes("LocalApp_Collection/*");d.appendChild(this[c]);for(var g in b)if(!_.isFunction(b[g])){d=_a(new _1.localapp,"_i3");this[c].appendChild(d);d.loadFromXml(b[g])!=_5&&this[c].removeChild(d)}}else c==="EolApp"&&$_(a.selectNodes("LocalApp_Collection/Application")).forEach(function(h){f.push({Name:h.selectSingleNode("Name").getNodeText(),UnSupportedSystype:h.selectSingleNode("UnSupportedSystype")?
h.selectSingleNode("UnSupportedSystype").getNodeText():"*"})});break;default:break}return _5}}});_._2("_1");
_1.localprogress=_._1(_8("_i3u"),_1._1,_i3t,{constructor:function(){_1.localprogress.superclass.constructor.apply(this,arguments)},_i3t:{getId:function(){return this.x?_1.xa2t(this.x,"resource-id"):_4},getType:function(){return this.x?_1.xa2t(this.x,"resource-type"):_4},getPackageName:function(){return this.x?_1.xa2t(this.x,"pkgname"):_4},getPID:function(){return _1.gp(this.xproptlist,"id")},getStatusString:function(){return _1.gp(this.xproptlist,
"status")},getStatusMsgString:function(){return _1.gp(this.xproptlist,"status_msg")},getLogMsg:function(){return _1.gp(this.xproptlist,"logmsgtag")},getElapsedSeconds:function(){return _1.gp(this.xproptlist,"elapsed-seconds")},getRemainingSeconds:function(){return _1.gp(this.xproptlist,"remaining-seconds")},getProgressPercentage:function(){return _1.gp(this.xproptlist,"progress-percent")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),
"_i5");return _5}}});_._2("_1");
_1.p2pManager=_._1(_8("_i20"),_1._1,_i29,{constructor:function(){_1.p2pManager.superclass.constructor.apply(this,arguments)},_i29:{updateP2PConfigurations:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="P2P" resource-type="P2P:App"/>',_.id())),a)},commitP2PConfigurations:function(a){if(this.xconfig)return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="P2P" resource-type="P2P:App">{1}</xs:set>',_.id(),
this.xconfig)),a);return _4},getDeviceId:function(){return _1.gp(this.xacctinfo,"Username")},getP2PStatus:function(){return this.xconfig?!!parseInt(this.xconfig.getNodeText("Status")):_4},getNetworkConn:function(){return this.xconfig?!!parseInt(this.xconfig.getNodeText("NetworkConnection")):_4},getP2PState:function(){return _1.xa2t(this.xstate,"value")?_1.xa2t(this.xstate,"value"):_4},getProxyServerEnableStatus:function(){return _1.gp(this.xconnsettings,"UseProxy")==="False"?false:
true},putProxyServerEnableStatus:function(a){return a?_1.pp(this.xconnsettings,"UseProxy","True"):_1.pp(this.xconnsettings,"UseProxy","False")},getProxyType:function(){return this.xproxytype?this.xproxytype.getAttributeText("Value"):_4},putProxyType:function(a){return this.xproxytype?this.xproxytype.setAttributeText(a,"Value"):_4},getProxyAddr:function(){return this.xproxytype?this.xproxytype.getAttributeText("Address"):_4},putProxyAddr:function(a){return this.xproxytype?this.xproxytype.setAttributeText(a,
"Address"):_4},getProxyPort:function(){return this.xproxytype?this.xproxytype.getAttributeText("Port"):_4},putProxyPort:function(a){return this.xproxytype?this.xproxytype.setAttributeText(a,"Port"):_4},getProxyUsername:function(){return _1.gp(this.xproxytypeprop,"Username")},putProxyUsername:function(a){return _1.pp(this.xproxytypeprop,"Username",a)},getProxyPass:function(){return _1.gp(this.xproxytypeprop,"Password")},putProxyPass:function(a){return _1.pp(this.xproxytypeprop,"Password",
a)},getSpecConnEnableStatus:function(){return _1.gp(this.xconnsettings,"UsePortForwarding")==="False"?false:true},putSpecConnEnableStatus:function(a){return a?_1.pp(this.xconnsettings,"UsePortForwarding","True"):_1.pp(this.xconnsettings,"UsePortForwarding","False")},getSpecConnProtocol:function(){return this.xspec?this.xspec.getAttributeText("Protocol"):_4},putSpecConnProtocol:function(a){return this.xspec?this.xspec.setAttributeText(a,"Protocol"):_4},getSpecConnPort:function(){return this.xspec?
this.xspec.getAttributeText("Port"):_4},putSpecConnPort:function(a){return this.xspec?this.xspec.setAttributeText(a,"Port"):_4},getSecEncryptEnableStatus:function(){return!!parseInt(_1.gp(this.xsettings,"Encryption"))},putSecEncryptEnableStatus:function(a){return _1.pp(this.xsettings,"Encryption",a?"1":"0")},getSecFirewallEnableStatus:function(){return!!parseInt(_1.gp(this.xsettings,"Firewall"))},putSecFirewallEnableStatus:function(a){return _1.pp(this.xsettings,"Firewall",a?"1":"0")},
getLogDebugLevel:function(){return _1.gp(this.xsettings,"Debug")},putLogDebugLevel:function(a){return _1.pp(this.xsettings,"Debug",a)},getLogMaxEntries:function(){return _1.gp(this.xsettings,"LogEntryLimit")},putLogMaxEntries:function(a){return _1.pp(this.xsettings,"LogEntryLimit",a)},getLogFlushEntries:function(){return _1.gp(this.xsettings,"LogEntryFlush")},putLogFlushEntries:function(a){return _1.pp(this.xsettings,"LogEntryFlush",a)},restartP2P:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="P2P" resource-type="P2P:App">                    <xs:command_name>Restart</xs:command_name>                    <xs:args/>                 </xs:command>',
_.id())),a)},updateRemoteAccessList:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Remote" resource-type="Remote:App"/>',_.id())),a)},commitRemoteAccessList:function(a){if(this.xremote)return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Remote" resource-type="Remote:App">{1}</xs:set>',_.id(),this.xremote)),a);return _4},getP2PRemoteUsers:function(){return this.xaccesslist?this.xaccesslist.getChildren():_4},appendP2PRemoteUser:function(a,
b){b=b?new _.Xml.document(String.format('<User FullName="*email invite*" UserName="{0}"/>',a)):new _.Xml.document(String.format('<User FullName="" UserName="{0}"/>',a));if(this.xremote&&b){var c=this.xremote.selectSingleNode("Shares/Share/AccessList");if(c){a=_a(new _1.p2pRemoteUser,"_i3");a.loadFromXml(b);if(b=c.appendNode(a.getXml())){a.loadFromXml(b);return _5}}}return _4},removeP2PRemoteUser:function(a){if(this.xremote&&a)if(a=this.xremote.selectSingleNode("Shares/Share/AccessList/*[@UserName='"+
a+"']"))if(a.removeNode())return _5;return _4},queryP2PRemoteUsers:function(a,b){return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="Contact:P2P:App">                    <xs:qualifier/>                    <xs:criterion>                       <xs:like property="Email" value="{1}"/>                    </xs:criterion>                 </xs:query>',_.id(),b)),a)},getP2PQueryUsers:function(){return this.xqueryusers?this.xqueryusers.getChildren():_4},startP2P:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="P2P" resource-type="P2P:App">                    <xs:command_name>Start</xs:command_name>                    <xs:args/>                 </xs:command>',
_.id())),a)},stopP2P:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="P2P" resource-type="P2P:App">                    <xs:command_name>Stop</xs:command_name>                    <xs:args/>                 </xs:command>',_.id())),a)},updateReadyDropStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="ReadyDrop" resource-type="ReadyDrop:App"/>',_.id())),a)},getReadyDropStatus:function(){return this.rdStatus?
this.rdStatus:_4},getReadyDropVolume:function(){return this.rdVolume?this.rdVolume:_4},commitReadyDropVolume:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="ReadyDrop" resource-type="ReadyDrop:App">                    <Volume>{1}</Volume>                </xs:set>',_.id(),a)),b)},commitReadyDropStatus:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="ReadyDrop" resource-type="ReadyDrop:App">                    <xs:command_name>{1}</xs:command_name>                </xs:command>',
_.id(),a=="on"?"Start":a=="off"?"Stop":"Restart")),b,undefined,undefined,undefined,36E4)},updateDiscoverServiceStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DiscoverService" resource-type="DiscoverService:App"/>',_.id())),a)},getDiscoverServiceStatus:function(){return this.dsStatus?this.dsStatus:_4},commitDiscoverServiceStatus:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="DiscoverService" resource-type="DiscoverService:App">                    <xs:command_name>{1}</xs:command_name>                </xs:command>',
_.id(),a=="on"?"Start":a=="off"?"Stop":"")),b,undefined,undefined,undefined,36E4)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=a.getAttributeText("resource-type"),c=a.selectNodes("./*");if(b==="P2P:App"){this.xconfig=this.x=c[0];this.xstate=this.xconfig.selectSingleNode("State");this.xacctinfo=this.xconfig.selectSingleNode("Configuration/AccountInformation");this.xsettings=this.xconfig.selectSingleNode("Configuration/Settings");this.xconnsettings=this.xconfig.selectSingleNode("Configuration/ConnectionSettings");
this.xproxytype=this.xconfig.selectSingleNode("Configuration/ConnectionSettings/ProxyType");this.xspec=this.xconfig.selectSingleNode("Configuration/ConnectionSettings/PortForwarding");this.xacctinfo=_a(new _1.xprop(this.xacctinfo),"_i5");this.xsettings=_a(new _1.xprop(this.xsettings),"_i5");this.xconnsettings=_a(new _1.xprop(this.xconnsettings),"_i5");this.xproxytypeprop=_a(new _1.xprop(this.xproxytype),"_i5")}else if(b===
"Remote:App"){this.xremote=this.x=c[0];a=_a(this,"_i3");this.xaccesslist&&a.removeChild(this.xaccesslist);this.xaccesslist=_a(new _1._1,"_i3");var d=this.xremote.selectNodes("Shares/Share/AccessList/*");if(d){a.appendChild(this.xaccesslist);for(var e in d)if(!_.isFunction(d[e])){a=_a(new _1.p2pRemoteUser,"_i3");this.xaccesslist.appendChild(a);a.loadFromXml(d[e])!=_5&&this.xaccesslist.removeChild(a)}}}else if(b==="Contact:P2P:App"){this.xcontact=this.x=
c[0];a=_a(this,"_i3");this.xqueryusers&&a.removeChild(this.xqueryusers);this.xqueryusers=_a(new _1._1,"_i3");if(e=this.xcontact.selectNodes("./*")){a.appendChild(this.xqueryusers);for(d in e)if(!_.isFunction(e[d])){a=_a(new _1.p2pQueryUser,"_i3");this.xqueryusers.appendChild(a);a.loadFromXml(e[d])!=_5&&this.xqueryusers.removeChild(a)}}}else if(b==="ReadyDrop:App"){e=a.getNodeName();if(e=="xs:get-s"){this.rdStatus=a.selectSingleNode("Properties/state").getNodeText();
this.rdVolume=a.selectSingleNode("Properties/volume").getNodeText()}}else if(b==="DiscoverService:App"){e=a.getNodeName();if(e=="xs:get-s")this.dsStatus=a.selectSingleNode("Properties/state").getNodeText()}return _5}}});_._2("_1");
_1.upsConfigManager=_._1(_8("_i1i"),_1._1,_i1h,{constructor:function(){_1.upsConfigManager.superclass.constructor.apply(this,arguments)},_i1h:{UpdateUpsConfigs:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="UpsConfig_Collection" resource-type="UpsConfig_Collection"/>',_.id())),a)},getUpsConfigs:function(){return this.upsconfigs?this.upsconfigs.getChildren():_4},AddLocalUpsConfig:function(a,
b,c,d,e,f){var g=_a(new _1.upsconfig,"_i1g");g.putName(b);g.putDescription(c);g.putType("local");g.putLocalAddress(d);g.putLocalEnabled(e);g.putShutDownThreshold(f);b=_a(g,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="UpsConfig">{1}</xs:add>',_.id(),b)),a)},AddSnmpUpsConfig:function(a,b,c,d,e,f,g){var h=_a(new _1.upsconfig,"_i1g");h.putName(b);h.putDescription(c);h.putType("snmp");h.putSnmpAddress(d);
h.putSnmpCommunity(e);h.putSnmpMibs(f);h.putShutDownThreshold(g);b=_a(h,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="UpsConfig">{1}</xs:add>',_.id(),b)),a,null,null,null,3E5)},AddRemoteUpsConfig:function(a,b,c,d,e,f,g){var h=_a(new _1.upsconfig,"_i1g");h.putName(b);h.putDescription(c);h.putType("remote");h.putRemoteAddress(d);h.putRemoteUserName(e);h.putRemotePassword(f);h.putShutDownThreshold(g);b=_a(h,
"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="UpsConfig">{1}</xs:add>',_.id(),b)),a,null,null,null,3E5)},CommitUpsConfig:function(a,b){b=_a(b,"_i1g");b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="UpsConfig">{1}</xs:set>',_.id(),b)),a,null,null,null,3E5)},DeleteUpsConfig:function(a,b){b=_a(b,"_i1g");return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="UpsConfig"/>',
_.id(),b.getId())),a,null,null,null,3E5)}},_i3:{loadFromXml:function(a){this.x=a;a=_a(this,"_i3");if(this.x.selectSingleNode("UpsConfig_Collection")){this.upsconfigs&&a.removeChild(this.upsconfigs);this.upsconfigs=_a(new _1._1,"_i3");var b=this.x.selectNodes("UpsConfig_Collection/UpsConfig");b&&b.length!=0&&_.each(b,function(c){var d=_a(new _1.upsconfig,"_i3");d.loadFromXml(c)==_5&&this.upsconfigs.appendChild(d)},this);a.appendChild(this.upsconfigs)}return _5}}});
_1.upsconfig=_._1(_1._1,_i1g,{constructor:function(a){_1.upsconfig.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <UpsConfig resource-id="" resource-type="UpsConfig">                    <Name />                    <Description />                    <Type />                    <SnmpAddress />                    <SnmpCommunity />                    <SnmpMibs />                    <ShutDownThreshold />                    <RemoteUserName />                    <RemotePassword />                    <RemoteAddress />                    <Share_enabled />                    <List1 />                </UpsConfig>')).selectNodes("./*")[0])},
_i1g:{getId:function(){return this.x?this.x.getAttributeText("resource-id"):_4},getName:function(){return _1.gp(this.xupsconfig,"Name")},putName:function(a){return _1.pp(this.xupsconfig,"Name",a)},getDescription:function(){return _1.gp(this.xupsconfig,"Description")},putDescription:function(a){return _1.pp(this.xupsconfig,"Description",a)},getType:function(){return _1.gp(this.xupsconfig,"Type")},putType:function(a){return _1.pp(this.xupsconfig,"Type",a)},getSnmpAddress:function(){return _1.gp(this.xupsconfig,
"SnmpAddress")},putSnmpAddress:function(a){return _1.pp(this.xupsconfig,"SnmpAddress",a)},getSnmpCommunity:function(){return _1.gp(this.xupsconfig,"SnmpCommunity")},putSnmpCommunity:function(a){return _1.pp(this.xupsconfig,"SnmpCommunity",a)},getSnmpMibs:function(){return _1.gp(this.xupsconfig,"SnmpMibs")},putSnmpMibs:function(a){return _1.pp(this.xupsconfig,"SnmpMibs",a)},getShutDownThreshold:function(){return _1.gp(this.xupsconfig,"ShutDownThreshold")},putShutDownThreshold:function(a){return _1.pp(this.xupsconfig,
"ShutDownThreshold",a)},getRemoteUserName:function(){return _1.gp(this.xupsconfig,"RemoteUserName")},putRemoteUserName:function(a){return _1.pp(this.xupsconfig,"RemoteUserName",a)},getRemotePassword:function(){return _1.gp(this.xupsconfig,"RemotePassword")},putRemotePassword:function(a){return _1.pp(this.xupsconfig,"RemotePassword",a)},getRemoteAddress:function(){return _1.gp(this.xupsconfig,"RemoteAddress")},putRemoteAddress:function(a){return _1.pp(this.xupsconfig,"RemoteAddress",a)},getLocalAddress:function(){return _1.gp(this.xupsconfig,
"List1")},putLocalAddress:function(a){return _1.pp(this.xupsconfig,"List1",a)},getLocalEnabled:function(){return _1.gp(this.xupsconfig,"Share_enabled")},putLocalEnabled:function(a){return _1.pp(this.xupsconfig,"Share_enabled",a?"1":"0")},getShutdownThreshold:function(){return _1.gp(this.xupsconfig,"ShutDownThreshold")},putShutdownThreshold:function(a){return _1.pp(this.xupsconfig,"ShutDownThreshold",a)},getUpsStatus:function(){return _1.gp(this.xupsconfig,"ups_status")},getUpsRawStatus:function(){return _1.gp(this.xupsconfig,
"ups_raw_status")},getAlarm:function(){return _1.gp(this.xupsconfig,"ups_alarm")},getUpsModel:function(){return _1.gp(this.xupsconfig,"UpsModel")},getUpsMfr:function(){return _1.gp(this.xupsconfig,"UpsMfr")},getUpsSerial:function(){return _1.gp(this.xupsconfig,"UpsSerial")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xupsconfig=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.fwpackage=_._1(_9,_1._1,_i3x,{constructor:function(){_1.fwpackage.superclass.constructor.apply(this,arguments)},_i3x:{getName:function(){return this.x?this.x.getAttributeText("name"):_4},getVersion:function(){return this.x?this.x.getAttributeText("version"):_4},getStatus:function(){return this.x?this.x.getAttributeText("status"):_4}},_i3:{loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.p2pQueryUser=_._1(_8,_1._1,_i2a,{constructor:function(){_1.p2pQueryUser.superclass.constructor.apply(this,arguments)},_i2a:{getUserId:function(){return _1.gp(this.xqprop,"Id")},getUserName:function(){return _1.gp(this.xqprop,"UserName")},getFirstName:function(){return _1.gp(this.xqprop,"FirstName")},getLastName:function(){return _1.gp(this.xqprop,"LastName")},getEmail:function(){return _1.gp(this.xqprop,"Email")},getType:function(){return _1.gp(this.xqprop,
"Type")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xqprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.p2pRemoteUser=_._1(_8,_1._1,_i2b,{constructor:function(){_1.p2pRemoteUser.superclass.constructor.apply(this,arguments)},_i2b:{getFullName:function(){return this.x?this.x.getAttributeText("FullName"):_4},getUserName:function(){return this.x?this.x.getAttributeText("UserName"):_4},getChannel:function(){return this.x?this.x.getAttributeText("Channel"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});
_._2("_1");
_1.sprotodfs=_._1(_8(),_1._1,_i3f,{constructor:function(a){_1.sprotohost.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <DFS_folder>                    <Name></Name>                    <Address></Address>                    <Remote_Share></Remote_Share>                </DFS_folder>")).selectNodes("./*")[0])},_i3d:{getName:function(){return _1.gp(this.xsprotodfs,"Name")},
getAddress:function(){return _1.gp(this.xsprotodfs,"Address")},getRemoteShare:function(){return _1.gp(this.xsprotodfs,"Remote_Share")},putName:function(a){return _1.pp(this.xsprotodfs,"Name",a)},putAddress:function(a){return _1.pp(this.xsprotodfs,"Address",a)},putRemoteShare:function(a){return _1.pp(this.xsprotodfs,"Remote_Share",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsprotodfs=_a(new _1.xprop(this.x),"_i5");return _5}}});
_._2("_1");_1.dropbox=_._1(_9,_1._1,_ij,{constructor:function(){_1.dropbox.superclass.constructor.apply(this,arguments)},_ij:{getDropBoxState:function(){return this.x?this.x.getAttributeText("state"):_4},putDropBoxState:function(a){return this.x?this.x.setAttributeText(a,"state"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.dropboxshare=_._1(_9,_1._1,_ik,{constructor:function(){_1.dropboxshare.superclass.constructor.apply(this,arguments)},_ik:{getDropBoxShareId:function(){return this.x?this.x.getAttributeText("id"):_4},getDropBoxShareName:function(){return this.x?this.x.getAttributeText("share-name"):_4},getSelectedShare:function(){return this.x?this.x.getAttributeText("used-by-fvdropbox"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;return _5}}});_._2("_1");_1.amazon=_._1(_9,_1._1,IAmazon,{constructor:function(){_1.amazon.superclass.constructor.apply(this,arguments)},IAmazon:{getAmazonState:function(){return this.x?this.x.getAttributeText("state"):_4},putAmazonState:function(a){return this.x?this.x.setAttributeText(a,"state"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1");
_1.amazonshare=_._1(_9,_1._1,IAmazonShare,{constructor:function(){_1.amazonshare.superclass.constructor.apply(this,arguments)},IAmazonShare:{getAmazonShareId:function(){return this.x?this.x.getAttributeText("id"):_4},getAmazonShareName:function(){return this.x?this.x.getAttributeText("share-name"):_4},getSelectedShare:function(){return this.x?this.x.getAttributeText("used-by-fvamazon"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;return _5}}});_._2("_1");
_1.mediabackup=_._1(_9,_1._1,IMediaBackup,{constructor:function(){_1.mediabackup.superclass.constructor.apply(this,arguments)},IMediaBackup:{getEnabled:function(){return _1.gp(this.xm,"Enabled")==="1"?true:false},putEnabled:function(a){return _1.pp(this.xm,"Enabled",a?1:0)},getDeleteSource:function(){return _1.gp(this.xm,"DelSrc")==="1"?true:false},putDeleteSource:function(a){return _1.pp(this.xm,"DelSrc",a?1:0)},getRoot:function(){return _1.gp(this.xm,"RootDir")},putRoot:function(a){return _1.pp(this.xm,
"RootDir",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xm=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.mediabackupstatus=_._1(_9,_1._1,IMediaBackupStatus,{constructor:function(){_1.mediabackupstatus.superclass.constructor.apply(this,arguments)},IMediaBackupStatus:{getStatus:function(){return _1.gp(this.xm,"Status")},getStatusResult:function(){return _1.gp(this.xm,"Status_Result")},getTotalBytes:function(){return _1.gp(this.xp,"Total_In_Bytes")},getTotalFiles:function(){return _1.gp(this.xp,"Total_Num_Of_Files")},getCopiedFiles:function(){return _1.gp(this.xp,"Copied_Num_Of_Files")},
getSpeed:function(){return _1.gp(this.xp,"Speed_In_Bytes_Per_Second")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xm=_a(new _1.xprop(this.x),"_i5");this.xp=_a(new _1.xprop(a.selectSingleNode("Progress")),"_i5");return _5}}});_._2("_1");
_1.statsManager=_._1(_8("_i3z"),_1._1,_i3y,{constructor:function(){_1.statsManager.superclass.constructor.apply(this,arguments)},_i3y:{UpdateZfsArcStats:function(a,b,c,d,e){_a(_a(this,"_i3").getRoot(),"_i2");return this.sendXml(_1._2(String.format('<xs:command id="opid" resource-id="{0}" resource-type="zfs_arc_stats">                    <xs:command_name>get_graph</xs:command_name>                    <xs:args>                        <xs:arg>                            <options graph_type="{1}" period="{2}" width="{3}" height="{4}"/>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),a,b,c,d)),e)}},_i3:{loadFromXml:function(a,b){switch(a.getAttributeText("resource-type")){case "zfs_arc_stats":if((a=a.selectSingleNode("zfs_arc_graph"))&&a!=_4){(a=a.getAttributeText("image"))&&a!=_4&&this.Fire("OnZfsArcStatsUpdate",[b,a]);return _5}break}return _4}}});_._2("_1");
_1.zfsVolScheduleManager=_._1(_8("_i4t"),_1._1,_i4s,{constructor:function(){_1.zfsVolScheduleManager.superclass.constructor.apply(this,arguments)},_i4s:{UpdateSchedules:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="VolumeScheduleCollection" resource-type="VolumeScheduleCollection"/>',_.id())),a)},getSchedules:function(){return this.schedules?_a(this.schedules,
"_i3").getChildren():_4},AddSchedule:function(a,b){return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="VolumeSchedule">                    <Volume_Schedule_Collection>                        {1}                    </Volume_Schedule_Collection>                </xs:add>',_.id(),_a(a,"_i3").getXml().toString())),b)},CommitSchedule:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="VolumeSchedule">                    <Volume_Schedule_Collection>                        {1}                    </Volume_Schedule_Collection>                </xs:set>',
_.id(),_a(a,"_i3").getXml().toString())),b)},RemoveSchedule:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-type="VolumeSchedule">                    <Volume_Schedule_Collection>                        {1}                    </Volume_Schedule_Collection>                </xs:delete>',_.id(),_a(a,"_i3").getXml().toString())),b)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3"),
c=a.selectNodes("Volume_Schedule_Collection");if(c){this.x=a;c=a.selectNodes("Volume_Schedule_Collection/Volume_Schedule");this.schedules&&b.removeChild(this.schedules);this.schedules=_a(new _1._1,"_i3");this.schedules.hash=[];b.appendChild(this.schedules);_.each(c,function(d){var e=_a(new _1.zfsVolSchedule(true),"_i3");if(e.loadFromXml(d)==_5){d=_a(e,"_i4r");this.schedules.appendChild(e);this.schedules.hash[d.getId()]=d}},this);return _5}return _4}}});
_._2("_1");
_1.zfsVolSchedule=_._1(_8("IZFSVolumeScheduleEvents"),_1._1,_i4r,{constructor:function(a){_1.zfsVolSchedule.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('<Volume_Schedule resource-id="unknown" resource-type="VolumeSchedule">                    <VolumeName>data</VolumeName>                    <JobID></JobID>                    <Action></Action>                    <Enabled>1</Enabled>                    <Interval>                        <Minute>*</Minute>                        <Hour>*</Hour>                        <DayOfMonth>*</DayOfMonth>                        <Month>*</Month>                        <DayOfWeek>*</DayOfWeek>                    </Interval>                </Volume_Schedule>')).selectNodes("./*")[0]);this.mask=
0},_i4r:{IsDirty:function(){return this.mask!==0},IsMarkedToDelete:function(){return(this.mask&8)===8},MarkToDelete:function(){this.mask=(this.mask&8)===8?this.mask&-9:this.mask|8;return _5},getId:function(){return _1.gp(this.xproptlist,"JobID")},putId:function(a){return _1.pp(this.xproptlist,"JobID",a)},getAction:function(){return _1.gp(this.xproptlist,"Action")},putAction:function(a){this.mask=(this.mask&2)===2?this.mask&-3:this.mask|2;return _1.pp(this.xproptlist,"Action",a)},
getEnabled:function(){return _1.gp(this.xproptlist,"Enabled")},putEnabled:function(a){this.mask=(this.mask&4)===4?this.mask&-5:this.mask|4;return _1.pp(this.xproptlist,"Enabled",a)},getVolumeName:function(){return _1.gp(this.xproptlist,"VolumeName")},putVolumeName:function(a){this.mask=(this.mask&16)===16?this.mask&-17:this.mask|16;return _1.pp(this.xproptlist,"VolumeName",a)},getIntervalMinute:function(){return _1.gp(this.intervalproptlist,"Minute")},putIntervalMinute:function(a){this.mask=
(this.mask&32)===32?this.mask&-33:this.mask|32;return _1.pp(this.intervalproptlist,"Minute",a)},getIntervalHour:function(){return _1.gp(this.intervalproptlist,"Hour")},putIntervalHour:function(a){this.mask=(this.mask&64)===64?this.mask&-65:this.mask|64;return _1.pp(this.intervalproptlist,"Hour",a)},getIntervalDayOfMonth:function(){return _1.gp(this.intervalproptlist,"DayOfMonth")},putIntervalDayOfMonth:function(a){this.mask=(this.mask&128)===128?this.mask&-129:this.mask|128;return _1.pp(this.intervalproptlist,
"DayOfMonth",a)},getIntervalMonth:function(){return _1.gp(this.intervalproptlist,"Month")},putIntervalMonth:function(a){this.mask=(this.mask&256)===256?this.mask&-257:this.mask|256;return _1.pp(this.intervalproptlist,"Month",a)},getIntervalDayOfWeek:function(){return _1.gp(this.intervalproptlist,"DayOfWeek")},putIntervalDayOfWeek:function(a){this.mask=(this.mask&512)===512?this.mask&-513:this.mask|512;return _1.pp(this.intervalproptlist,"DayOfWeek",a)}},_i3:{getXml:function(){return this.x},
loadFromXml:function(a){if(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");this.intervalproptlist=_a(new _1.xprop(this.x.selectSingleNode("Interval")),"_i5");return _5}return _4}}});_._2("_1");
_1.homeFolderOptions=_._1(_1.share,IHomeFolderOptions,{constructor:function(){_1.homeFolderOptions.superclass.constructor.apply(this,arguments)},IHomeFolderOptions:{},_i3:{loadFromXml:function(){_1.homeFolderOptions.superclass._i3.loadFromXml.apply(this,arguments);return _.isAllDefined(this.xprotlist,this.xproptlist)?_5:_4}}});_._2("_1");
_1.sacl=_._1(_8(),_1._1,IShareAcl,{constructor:function(a){_1.sacl.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('<acl account="" name="" tag="" perm="" />')).selectNodes("./*")[0])},IShareAcl:{getId:function(){return this.x?this.x.getAttributeText("account"):_4},putId:function(a){return this.x?this.x.setAttributeText(a,"account"):_4},getName:function(){return this.x?this.x.getAttributeText("name"):
_4},putName:function(a){return this.x?this.x.setAttributeText(a,"name"):_4},getType:function(){return this.x?this.x.getAttributeText("tag"):_4},putType:function(a){return this.x?this.x.setAttributeText(a,"tag"):_4},getPermissions:function(){return this.x?this.x.getAttributeText("perm"):_4},putPermissions:function(a){return this.x?this.x.setAttributeText(a,"perm"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xsacl=_a(new _1.xprop(this.x),
"_i5");return _5}}});_._2("_1");
_1.sacllist=_._1(_9,_1._1,IShareAclList,{constructor:function(a){_1.sacllist.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                    <Acl_List>                        <acl tag="user-obj" perm="7"/>                        <acl account="98" name="admin" tag="user" perm="7"/>                        <acl account="99" name="guest" tag="user" perm="7"/>                        <acl tag="group-obj" perm="7"/>                        <acl account="98" name="admin" tag="group" perm="7"/>                        <acl account="99" name="guest" tag="group" perm="7"/>                        <acl tag="mask" perm="7"/>                        <acl tag="other" perm="7"/>                    </Acl_List>')).selectNodes("./*")[0])},IShareAclList:{getUserAcls:function(){return this.xusers?
this.xusers.getChildren():_4},getUserAclById:function(a){return this.xusers?this.xusers.idHash[a]:_4},getUserAclByName:function(a){return this.xusers?this.xusers.nameHash[a]:_4},getGroupAcls:function(){return this.xgroups?this.xgroups.getChildren():_4},getGroupAclById:function(a){return this.xgroups?this.xgroups.idHash[a]:_4},getGroupAclByName:function(a){return this.xgroups?this.xgroups.nameHash[a]:_4},getUserOwnerAcl:function(){return this.xuserowner},getGroupOwnerAcl:function(){return this.xgroupowner},
getMaskAcl:function(){return this.xmask},getOtherAcl:function(){return this.xother},addAcl:function(a){a=_a(a,"_i3");var b=_a(this,"_i3").getXml().appendNode(a.getXml());a.loadFromXml(b);return _a(this,"_i3").loadFromXml(_a(this,"_i3").getXml())},removeAcl:function(a){_a(a,"_i3").getXml().removeNode();return _a(this,"_i3").loadFromXml(_a(this,"_i3").getXml())}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=
a;delete this.xuserowner;delete this.xgroupowner;delete this.xmask;delete this.xother;this.xusers=_a(new _1._1,"_i3");this.xusers.idHash={};this.xusers.nameHash={};this.xgroups=_a(new _1._1,"_i3");this.xgroups.idHash={};this.xgroups.nameHash={};var b=a.selectNodes("acl[@tag='user']");_.each(b,function(d){var e=_a(new _1.sacl,"_i3");if(e.loadFromXml(d)==_5){this.xusers.appendChild(e);e=_a(e,"IShareAcl");this.xusers.idHash[e.getId()]=e;this.xusers.nameHash[e.getName()]=
e}},this);b=a.selectNodes("acl[@tag='group']");_.each(b,function(d){var e=_a(new _1.sacl,"_i3");if(e.loadFromXml(d)==_5){this.xgroups.appendChild(e);e=_a(e,"IShareAcl");this.xgroups.idHash[e.getId()]=e;this.xgroups.nameHash[e.getName()]=e}},this);if(b=a.selectSingleNode("acl[@tag='user-obj']")){var c=_a(new _1.sacl,"_i3");if(c.loadFromXml(b)==_5)this.xuserowner=_a(c,"IShareAcl")}if(!this.xuserowner){this.xuserowner=_a(_a(new _1.sacl,"_i3"),
"IShareAcl");this.xuserowner.putType("user-obj");this.xuserowner.putPermissions("0");b=_a(this.xuserowner,"_i3");c=_a(this,"_i3").getXml().appendNode(b.getXml());b.loadFromXml(c)}if(b=a.selectSingleNode("acl[@tag='group-obj']")){c=_a(new _1.sacl,"_i3");if(c.loadFromXml(b)==_5)this.xgroupowner=_a(c,"IShareAcl")}if(!this.xgroupowner){this.xgroupowner=_a(_a(new _1.sacl,"_i3"),"IShareAcl");this.xgroupowner.putType("group-obj");this.xgroupowner.putPermissions("0");
b=_a(this.xgroupowner,"_i3");c=_a(this,"_i3").getXml().appendNode(b.getXml());b.loadFromXml(c)}if(b=a.selectSingleNode("acl[@tag='mask']")){c=_a(new _1.sacl,"_i3");if(c.loadFromXml(b)==_5)this.xmask=_a(c,"IShareAcl")}if(!this.xmask){this.xmask=_a(_a(new _1.sacl,"_i3"),"IShareAcl");this.xmask.putType("mask");this.xmask.putPermissions("0");b=_a(this.xmask,"_i3");c=_a(this,"_i3").getXml().appendNode(b.getXml());
b.loadFromXml(c)}if(a=a.selectSingleNode("acl[@tag='other']")){b=_a(new _1.sacl,"_i3");if(b.loadFromXml(a)==_5)this.xother=_a(b,"IShareAcl")}if(!this.xother){this.xother=_a(_a(new _1.sacl,"_i3"),"IShareAcl");this.xother.putType("other");this.xother.putPermissions("0");b=_a(this.xother,"_i3");c=_a(this,"_i3").getXml().appendNode(b.getXml());b.loadFromXml(c)}return _5}}});_._2("_1");
_1.userhf=_._1(_1._1,IUserHomeFolder,{constructor:function(a){_1.userhf.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <Home_Folder>                    <Size_Limit>0</Size_Limit>                    <VisibleSnapshot>0</VisibleSnapshot>                    <VisibleSnapFolder></VisibleSnapFolder>                    <Snapshot_Protection>                        <Enabled>0</Enabled>                    </Snapshot_Protection>                </Home_Folder>")).selectNodes("./*")[0])},
IUserHomeFolder:{getSizeLimit:function(){return _1.gp(this.xprop,"Size_Limit")},putSizeLimit:function(a){return _1.pp(this.xprop,"Size_Limit",a)},getSizeUsed:function(){return _1.gp(this.xprop,"Size_Used")},getSnapProtectionEnabled:function(){return _1.gp(this.xpropsnpr,"Enabled")},putSnapProtectionEnabled:function(a){return _1.pp(this.xpropsnpr,"Enabled",a)},getVisibleSnapshot:function(){return _1.gp(this.xprop,"VisibleSnapshot")},putVisibleSnapshot:function(a){return _1.pp(this.xprop,"VisibleSnapshot",
a)},getVisibleSnapFolder:function(){return _1.gp(this.xprop,"VisibleSnapFolder")},putVisibleSnapFolder:function(a){return _1.pp(this.xprop,"VisibleSnapFolder",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");a=a.selectSingleNode("Snapshot_Protection");this.xpropsnpr=_a(new _1.xprop(a),"_i5");return a?_5:_4}}});_._2("_1");
_1.usertm=_._1(_1._1,IUserTimeMachine,{constructor:function(a){_1.usertm.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <Private_Time_Machine>                    <Enabled>0</Enabled>                    <Size_Limit>0</Size_Limit>                </Private_Time_Machine>")).selectNodes("./*")[0])},IUserTimeMachine:{getEnabled:function(){return _1.gp(this.xprop,"Enabled")},putEnabled:function(a){return _1.pp(this.xprop,
"Enabled",a)},getSizeLimit:function(){return _1.gp(this.xprop,"Size_Limit")},putSizeLimit:function(a){return _1.pp(this.xprop,"Size_Limit",a)},getUsedGB:function(){return _1.gp(this.xprop,"Used_GB")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.hfsnapshot=_._1(_1._1,IHFSnapshot,{constructor:function(a){_1.hfsnapshot.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <HF_Snapshot>                    <Snapshot_Id />                    <Snapshot_Name />                    <User_Id />                    <User_Name />                    <Snapshot_Type />                    <Snapshot_CreatedOn />                </HF_Snapshot>")).selectNodes("./*")[0])},
IHFSnapshot:{getId:function(){return _1.gp(this.xprop,"Snapshot_Id")},getName:function(){return _1.gp(this.xprop,"Snapshot_Name")},putName:function(a){return _1.pp(this.xprop,"Snapshot_Name",a)},getUserId:function(){return _1.gp(this.xprop,"User_Id")},putUserId:function(a){return _1.pp(this.xprop,"User_Id",a)},getUserName:function(){return _1.gp(this.xprop,"User_Name")},getType:function(){return _1.gp(this.xprop,"Snapshot_Type")},getCreationDate:function(){return _1.gp(this.xprop,"Snapshot_CreatedOn")},
getPath:function(){return _1.gp(this.xprop,"Snapshot_Path")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.hfSnapshotsManager=_._1(_8("IHFSnapshotsManagerEvents"),_1._1,IHFSnapshotsManager,{constructor:function(){_1.hfSnapshotsManager.superclass.constructor.apply(this,arguments)},IHFSnapshotsManager:{UpdateSnapshots:function(a,b){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_userId=b;return this.sendXml(_1._2(String.format('<xs:query id="{0}" resource-type="HF_Snapshot_Collection">                    <xs:criterion>                        <xs:and>                            <xs:equal property="User_Id" value="{1}"/>                        </xs:and>                    </xs:criterion>                </xs:query>',
_.id(),b)),a)},createSnapshot:function(){return _a(new _1.hfsnapshot,"IHFSnapshot")},AddSnapshot:function(a,b){return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="HF_Snapshot">                    {1}                </xs:add>',_.id(),_a(b,"_i3").getXml().toString())),a)},RollbackSnapshot:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="HF_Snapshot">                    <xs:command_name>Rollback_Snapshot</xs:command_name>                      <xs:args>                        <xs:arg>                          {1}                        </xs:arg>                      </xs:args>                 </xs:command>',
_.id(),_a(b,"_i3").getXml().toString())),a,null,null,null,3E5)},DeleteSnapshot:function(a,b){return this.sendXml(_1._2(String.format(' <xs:delete id="{0}" resource-type="HF_Snapshot">                      {1}                  </xs:delete>',_.id(),_a(b,"_i3").getXml().toString())),a,null,null,null,3E5)}},_i3:{loadFromXml:function(a,b){if(a.getAttributeText("resource-type")=="HF_Snapshot_Collection"){a=a.selectNodes("HF_Snapshot_Collection/HF_Snapshot");
var c=[];_.each(a,function(d){var e=_a(new _1.hfsnapshot,"_i3");e.loadFromXml(d)==_5&&c.push(_a(e,"IHFSnapshot"))},this);a=b._dpv_userId;delete b._dpv_userId;a&&this.Fire("OnSnapshotsUpdate",[this,b,c,a])}return _5}}});_._2("_1");
_1.vlan=_._1(_9,_1._1,INetworkVLAN,{constructor:function(a){_1.vlan.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <vlan>                    <vlanid/>                    <vlanbase/>                </vlan>")).selectNodes("./*")[0])},INetworkVLAN:{getId:function(){return _1.gp(this.xprop,"vlanid")},putId:function(a){return _1.pp(this.xprop,"vlanid",a)},getName:function(){return _1.gp(this.xprop,
"link")},putName:function(a){return _1.pp(this.xprop,"link",a)||_1.pp(this.xprop,"ifname",a)},getBase:function(){return _1.gp(this.xprop,"vlanbase")},putBase:function(a){return _1.pp(this.xprop,"vlanbase",a)},getMACAddress:function(){return _1.gp(this.xprop,"mac")},getState:function(){return _1.gp(this.xprop,"state")},getMTU:function(){return _1.gp(this.xprop,"mtu")},putMTU:function(a){return _1.pp(this.xprop,"mtu",a)},getSpeed:function(){return _1.gp(this.xprop,"speed")},putSpeed:function(a){return _1.pp(this.xprop,
"speed",a)},getIPType:function(){return _1.gp(this.xprop,"iptype")},putIPType:function(a){return _1.pp(this.xprop,"iptype",a)},getIPAddress:function(){return _1.gp(this.xprop,"ip")},putIPAddress:function(a){return _1.pp(this.xprop,"ip",a)},getDomainName:function(){return this.domainName},putDomainName:function(a){this.domainCollection.removeNode("DOMAIN");var b="";a=a.split(" ");_.each(a,function(c){if(c!="")b+="<Domain_Name>"+c+"</Domain_Name>"},this);b!=""&&this.domainCollection.appendNode(new _.Xml.document("<DOMAIN>"+
b+"</DOMAIN>"))},getRouter:function(){return _1.gp(this.xprop,"router")},putRouter:function(a){return _1.pp(this.xprop,"router",a)},getSubnet:function(){return _1.gp(this.xprop,"subnet")},putSubnet:function(a){return _1.pp(this.xprop,"subnet",a)},getIPv6Type:function(){return _1.gp(this.xprop,"ipv6type")},putIPv6Type:function(a){return _1.pp(this.xprop,"ipv6type",a)},getIPv6Address:function(){return _1.gp(this.xprop,"ipv6")},putIPv6Address:function(a){return _1.pp(this.xprop,"ipv6",a)},getRouterv6:function(){return _1.gp(this.xprop,
"router6")},putRouterv6:function(a){return _1.pp(this.xprop,"router6",a)},getPrefixLength:function(){return _1.gp(this.xprop,"prefixlength")},putPrefixLength:function(a){return _1.pp(this.xprop,"prefixlength",a)},getIPv6AddressLocal:function(){return _1.gp(this.xprop,"ipv6_link")},getPrefixLengthLocal:function(){return _1.gp(this.xprop,"prefixlength_link")},getDNSRecords:function(){return this.xdns?this.xdns.getChildren():_4},putDNSRecords:function(a){if(this.x&&a){var b=this.x.selectSingleNode("dnscollection");
b.removeNode("DNS");if(_.isArray(a))_.each(a,function(d){d=_a(d,"_i3");var e=b.appendNode(d.getXml());e&&d.loadFromXml(e)});else if(_a(a,"_i1z")){a=_a(a,"_i3");var c=b.appendNode(a.getXml());c&&a.loadFromXml(c)}return _a(this,"_i3").loadFromXml(this.x)}return _4},getRoutes:function(){return this.xroutes?this.xroutes.getChildren():_4},putRoutes:function(a){if(this.x&&a){var b=this.x.selectSingleNode("routecollection");b.removeNode("Route");
_.each(a,function(c){c=_a(c,"_i3");var d=b.appendNode(c.getXml());d&&c.loadFromXml(d)});return _a(this,"_i3").loadFromXml(this.x)}return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");var b=_a(this,"_i3"),c=a.selectSingleNode("dnscollection");if(c){c=a.selectNodes("dnscollection/DNS");this.xdns&&b.removeChild(this.xdns);this.xdns=_a(new _1._1,"_i3");
_.each(c,function(e){var f=_a(new _1.dns(true),"_i3");f.loadFromXml(e)==_5&&this.xdns.appendChild(f)},this);b.appendChild(this.xdns)}if(c=a.selectSingleNode("routecollection")){c=a.selectNodes("routecollection/Route");this.xroutes&&b.removeChild(this.xroutes);this.xroutes=_a(new _1._1,"_i3");_.each(c,function(e){var f=_a(new _1.nroute(true),"_i3");f.loadFromXml(e)==_5&&this.xroutes.appendChild(f)},this);b.appendChild(this.xroutes)}this.domainCollection=
a.selectSingleNode("domaincollection");this.domainName="";a=a.selectNodes("domaincollection/DOMAIN/Domain_Name");var d=[];_.each(a,function(e){d.push(e.getNodeText())},this);if(d.length>0)this.domainName=d.join(" ");return _5}}});_._2("_1");
_1.networkVLANManager=_._1(_8("INetworkVLANManagerEvents"),_1._1,INetworkVLANManager,{constructor:function(){_1.networkVLANManager.superclass.constructor.apply(this,arguments)},INetworkVLANManager:{UpdateVLANs:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="vlan_collection" resource-type="vlan_collection" />',_.id())),a)},getVLANs:function(){return this.xvlans?this.xvlans:_4},createVLAN:function(){return _a(new _1.vlan,
"INetworkVLAN")},AddVLAN:function(a,b){return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="vlan" resource-type="Network" >                            <ifname>{1}</ifname>                            <vlanid>{2}</vlanid>                        </xs:add>',_.id(),b.getBase(),b.getId())),a)},CommitVLAN:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="vlan" resource-type="Network">                            {1}                        </xs:set>',
_.id(),_a(b,"_i3").getXml().toString())),a)},RemoveVLAN:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="vlan" resource-type="Network" />',b.getName())),a)}},_i3:{loadFromXml:function(a){if(a.getAttributeText("resource-type")=="vlan_collection"){this.xvlans=[];a=a.selectNodes("vlan_collection/vlan");_.each(a,function(b){var c=_a(new _1.vlan(true),"_i3");c.loadFromXml(b)==_5&&this.xvlans.push(_a(c,"INetworkVLAN"))},
this);return _5}}}});_._2("_1");
_1.nroute=_._1(_9,_1._1,INetworkRoute,{constructor:function(a){_1.nroute.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("               <Route>                  <Dest_CIDR_Address/>               </Route>")).selectNodes("./*")[0])},INetworkRoute:{getDestCIDRAddress:function(){return _1.gp(this.xprop,"Dest_CIDR_Address")},putDestCIDRAddress:function(a){return _1.pp(this.xprop,"Dest_CIDR_Address",a)}},_i3:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.ssh=_._1(_8("ISSHEvents"),_1._1,ISSH,{constructor:function(a){_1.ssh.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('<SshPublicKey id="0" resource-id="0" resource-type="SshPublicKey" is-domain-member="0"><Id></Id><UserId></UserId><Title></Title><ServeFor></ServeFor><Type></Type><Key></Key><Comment></Comment><Fingerprint></Fingerprint><FileName></FileName></SshPublicKey>')).selectNodes("./*")[0]);this.mask=
0},ISSH:{IsDirty:function(){return this.mask!==0},IsMarkedToDelete:function(){return(this.mask&8)===8},MarkToDelete:function(){this.mask=(this.mask&8)===8?this.mask&-9:this.mask|8;return _5},getId:function(){return _1.gp(this.xuser,"Id")},getUserId:function(){return _1.gp(this.xuser,"UserId")},putUserId:function(a){return _1.pp(this.xuser,"UserId",a)},getReadOnly:function(){if(_1.gp(this.xuser,"ServeFor")==="rsync")return true;return false},putReadOnly:function(a){this.mask=(this.mask&2)===
2?this.mask&-3:this.mask|2;return a?_1.pp(this.xuser,"ServeFor","rsync"):_1.pp(this.xuser,"ServeFor","all")},getComment:function(){return _1.gp(this.xuser,"Comment")},getTitle:function(){return _1.gp(this.xuser,"Title")},putTitle:function(a){this.mask=(this.mask&4)===4?this.mask&-5:this.mask|4;return _1.pp(this.xuser,"Title",a)},getType:function(){return _1.gp(this.xuser,"Type")},getFingerPrint:function(){return _1.gp(this.xuser,"Fingerprint")},getKey:function(){return _1.gp(this.xuser,"Key")},
getFilePath:function(){return _1.gp(this.xuser,"FileName")},putFilePath:function(a){return _1.pp(this.xuser,"FileName",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.sshManager=_._1(_8("ISSHManagerEvents"),_1._1,ISSHManager,{constructor:function(){_1.sshManager.superclass.constructor.apply(this,arguments)},ISSHManager:{createKey:function(){return _a(new _1.ssh,"ISSH")},updateKeys:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="rsync" resource-type="SshPublicKeys"/>',_.id())),a)},getKeys:function(){if(this.sshc)return _a(this.sshc,"_i3").getChildren();return _4},
getKeyById:function(a){return this.sshc?this.sshc.hash[a]:null},deleteKey:function(a,b){if(_a(a,"ISSH")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-type="SshPublicKeys">                       {1}                    </xs:delete>',_.id(),a.getXml().toString())),b)}return _4},editKey:function(a,b){if(_a(a,"ISSH")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="SshPublicKeys">                       {1}                    </xs:set>',
_.id(),a.getXml().toString())),b)}return _4},addKey:function(a,b){if(_a(a,"ISSH")){a=_a(a,"_i3");return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="SshPublicKeys">                        {1}                    </xs:add>',_.id(),a.getXml().toString())),b)}return _4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.selectSingleNode("SshPublicKey_Collection")){this.x=a;this.sshc&&
b.removeChild(this.sshc);this.sshc=_a(new _1._1,"_i3");this.sshc.hash=[];a=a.selectNodes("SshPublicKey_Collection/SshPublicKey");_.each(a,function(c){var d=_a(new _1.ssh(true),"_i3");if(d.loadFromXml(c)==_5){c=_a(d,"ISSH");this.sshc.hash[c.getId()]=c;this.sshc.appendChild(d)}},this);b.appendChild(this.sshc);return _5}return _4}}});_._2("_1");
_1.snapsched=_._1(_1._1,ISnapshotSchedule,{constructor:function(){_1.snapsched.superclass.constructor.apply(this,arguments)},ISnapshotSchedule:{getConfig:function(){var a=_4,b,c,d,e,f,g,h;if(this.x){a=[];if((b=this.x.selectNodes("schedule"))&&b!=_4&&b.length)for(c=0;c<b.length;++c){d=b[c].getAttributeText("wday");h=b[c].getAttributeText("hours");if(d&&d!=_4&&d.length==1&&h&&h!=_4&&h.length==24){e=+d;if(_.isNumber(e)&&e>=0&&e<=6){g=[];for(d=0;d<h.length;++d){f=+h[d];if(_.isNumber(f)&&
f==0||f==1)g.push(f)}if(g.length==24)a[e]=g}}}if(a.length!=7)a=_4}return a},putConfig:function(a){var b;if(this.x&&a&&a.length==7){this.x.removeNode("schedule");this.x.setNodeText("");for(b=0;b<a.length;++b)this.x.appendNode(new _.Xml.document('<schedule wday="'+b+'" hours="'+a[b].join("")+'" />'));return _5}else return _4}},_i3:{loadFromXml:function(a){if(a&&a!=_4){this.x=a;return _5}else{delete this.x;return _4}}}});_._2("_1");
_1.simpleshare=_._1(_9,_1._1,ISimpleShare,{constructor:function(){_1.simpleshare.superclass.constructor.apply(this,arguments)},ISimpleShare:{getId:function(){return this.x?this.x.getAttributeText("id"):_4},getName:function(){return this.x?this.x.getAttributeText("share-name"):_4},getType:function(){return this.x?this.x.getAttributeText("share-type"):_4},getUsedBy:function(){return this.x?this.x.getAttributeText("rdr-used-by"):_4},getProtocols:function(){return this.x?
this.x.getAttributeText("protocols"):_4},isLUN:function(){return _a(this,"ISimpleShare").getType()=="zvol"},isReadyDRShare:function(){return _a(this,"ISimpleShare").getType()=="readonly"}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1.cloudstorage");
_1.cloudstorage.amazons3=_._1(_8("ICloudStorageManagerEvents"),_1._1,ICloudStorageManager,{constructor:function(){_1.cloudstorage.amazons3.superclass.constructor.apply(this,arguments);this.buckets=[];this.bucketDirs=[];this.locations=[]},ICloudStorageManager:{updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="S3_Status_Collection" resource-type="S3_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?
this.cloudStatus:_4},updateConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="S3_Connection_Collection" resource-type="S3_Connection_Collection"/>',_.id())),a)},getConnections:function(){return _a(this,"_i3").getChildren()},deleteConnections:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="S3_Connection_Collection" resource-type="S3_Connection_Collection"/>',_.id())),a)},createConnection:function(){return _a(new _1.cloudstorage.connection,
"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="S3_Connection" resource-type="S3_Connection">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="S3_Connection" resource-type="S3_Connection">{1}</xs:set>',
_.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="S3_Connection"/>',_.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return _a(new _1.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=
_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="S3_Session" resource-type="S3_Session">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="S3_Session" resource-type="S3_Session">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},
deleteSession:function(a,b){if(b&&_a(b,"ICloudStorageSession"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="S3_Session"/>',_.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&_a(b,"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="S3_Connection_Log"/>',_.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?
this.log:_4},updateBuckets:function(a,b,c,d,e){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="S3_Connection">                    <xs:command_name>list_buckets</xs:command_name>                    <xs:args>                        <xs:arg>                            <S3_Param>                            <Server_URL><![CDATA[{1}]]\></Server_URL>                            <Access_Key><![CDATA[{2}]]\></Access_Key>                            <Secret_Key><![CDATA[{3}]]\></Secret_Key>                            <Region_Name><![CDATA[{4}]]\></Region_Name>                            </S3_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c,d,e)),a)},getBuckets:function(){return this.buckets},addBucket:function(a,b,c,d,e,f,g){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="S3_Connection">                    <xs:command_name>create_bucket</xs:command_name>                    <xs:args>                        <xs:arg>                            <S3_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                                <Bucket_Name><![CDATA[{4}]]\></Bucket_Name>                                <Location><![CDATA[{5}]]\></Location>                                <Region_Name><![CDATA[{6}]]\></Region_Name>                            </S3_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c,d,e,f,g)),a)},updateDirectories:function(a,b,c){if((b=_a(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="S3_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <S3_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Parent_Path><![CDATA[{3}]]\></Parent_Path>                                </S3_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),b.getBucketName(),c)),a)}return _4},getDirectories:function(){return this.bucketDirs},addDirectory:function(a,b,c){if((b=_a(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="S3_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <S3_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Remote_Path><![CDATA[{3}]]\></Remote_Path>                                </S3_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),b.getBucketName(),c)),a)}return _4},updateBucketLocations:function(a,b,c,d,e){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="S3_Connection">                        <xs:command_name>list_locations</xs:command_name>                        <xs:args>                            <xs:arg>                              <S3_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                                <Region_Name><![CDATA[{4}]]\></Region_Name>                              </S3_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b,c,d,e)),a)},getBucketLocations:function(){return this.locations}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "S3_Connection":c=null;if(c=a.selectSingleNode("./Bucket_List")){this.buckets.splice(0);
if(a=c.selectNodes("Bucket")){_.each(a,function(f){this.buckets.push({bucket:this.getValue(f)})},this);return _5}}else if(c=a.selectSingleNode("./Folder_List")){this.bucketDirs.splice(0);if(a=c.selectNodes("Folder")){_.each(a,function(f){this.bucketDirs.push({folder:this.getValue(f)})},this);return _5}}else if(c=a.selectSingleNode("./Location_List")){this.locations.splice(0);if(a=c.selectNodes("Location")){_.each(a,function(f){this.locations.push({id:this.getValue(f.selectSingleNode("./Id")),
name:this.getValue(f.selectSingleNode("./Name"))})},this);return _5}}break}return _5}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "S3_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");_.each(a,function(f){var g=_a(new _1.cloudstorage.connection(true),"_i3");g.loadFromXml(f)==_5&&b.appendChild(g)},
this);return _5}break;case "S3_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=_a(new _1.cloudstatus,"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break}switch(c){case "S3_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=
e.selectNodes("./Log_Collection/Log");_.each(c,function(f){var g=_a(new _1.log,"_i3");g.loadFromXml(f)==_5&&this.log.logs.push(_a(g,"_i1v"))},this);b.appendChild(this.log.logs);return _5}break}}}return _4}}});_._2("_1.cloudstorage");
_1.cloudstorage.wasabi=_._1(_8("ICloudStorageManagerEvents"),_1._1,ICloudStorageManager,{constructor:function(){_1.cloudstorage.wasabi.superclass.constructor.apply(this,arguments);this.buckets=[];this.bucketDirs=[];this.locations=[]},ICloudStorageManager:{updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Wasabi_Status_Collection" resource-type="Wasabi_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?
this.cloudStatus:_4},updateConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Wasabi_Connection_Collection" resource-type="Wasabi_Connection_Collection"/>',_.id())),a)},getConnections:function(){return _a(this,"_i3").getChildren()},deleteConnections:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="Wasabi_Connection_Collection" resource-type="Wasabi_Connection_Collection"/>',_.id())),
a)},createConnection:function(){return _a(new _1.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="Wasabi_Connection" resource-type="Wasabi_Connection">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=
_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Wasabi_Connection" resource-type="Wasabi_Connection">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Wasabi_Connection"/>',_.id(),
b.getId())),a)}return E_INVALIDARG},createSession:function(){return _a(new _1.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="Wasabi_Session" resource-type="Wasabi_Session">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=
_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Wasabi_Session" resource-type="Wasabi_Session">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&_a(b,"ICloudStorageSession"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Wasabi_Session"/>',_.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&
_a(b,"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Wasabi_Connection_Log"/>',_.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:_4},updateBuckets:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="Wasabi_Connection">                    <xs:command_name>list_buckets</xs:command_name>                    <xs:args>                        <xs:arg>                            <Wasabi_Param>                            <Server_URL><![CDATA[{1}]]\></Server_URL>                            <Access_Key><![CDATA[{2}]]\></Access_Key>                            <Secret_Key><![CDATA[{3}]]\></Secret_Key>                            </Wasabi_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c,d)),a)},getBuckets:function(){return this.buckets},addBucket:function(a,b,c,d,e,f){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="Wasabi_Connection">                    <xs:command_name>create_bucket</xs:command_name>                    <xs:args>                        <xs:arg>                            <Wasabi_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                                <Bucket_Name><![CDATA[{4}]]\></Bucket_Name>                                <Location><![CDATA[{5}]]\></Location>                            </Wasabi_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c,d,e,f)),a)},updateDirectories:function(a,b,c){if((b=_a(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Wasabi_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <Wasabi_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Parent_Path><![CDATA[{3}]]\></Parent_Path>                                </Wasabi_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),b.getBucketName(),c)),a)}return _4},getDirectories:function(){return this.bucketDirs},addDirectory:function(a,b,c){if((b=_a(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Wasabi_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <Wasabi_Param>                                    <Bucket_Name><![CDATA[{2}]]\></Bucket_Name>                                    <Remote_Path><![CDATA[{3}]]\></Remote_Path>                                </Wasabi_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),b.getBucketName(),c)),a)}return _4},updateBucketLocations:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="Wasabi_Connection">                        <xs:command_name>list_locations</xs:command_name>                        <xs:args>                            <xs:arg>                              <Wasabi_Param>                                <Server_URL><![CDATA[{1}]]\></Server_URL>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Secret_Key><![CDATA[{3}]]\></Secret_Key>                              </Wasabi_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b,c,d)),a)},getBucketLocations:function(){return this.locations}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "Wasabi_Connection":c=null;if(c=a.selectSingleNode("./Bucket_List")){this.buckets.splice(0);
if(a=c.selectNodes("Bucket")){_.each(a,function(f){this.buckets.push({bucket:this.getValue(f)})},this);return _5}}else if(c=a.selectSingleNode("./Folder_List")){this.bucketDirs.splice(0);if(a=c.selectNodes("Folder")){_.each(a,function(f){this.bucketDirs.push({folder:this.getValue(f)})},this);return _5}}else if(c=a.selectSingleNode("./Location_List")){this.locations.splice(0);if(a=c.selectNodes("Location")){_.each(a,function(f){this.locations.push({id:this.getValue(f.selectSingleNode("./Id")),
name:this.getValue(f.selectSingleNode("./Name"))})},this);return _5}}break}return _5}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "Wasabi_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");_.each(a,function(f){var g=_a(new _1.cloudstorage.connection(true),"_i3");g.loadFromXml(f)==_5&&b.appendChild(g)},
this);return _5}break;case "Wasabi_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=_a(new _1.cloudstatus,"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break}switch(c){case "Wasabi_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=
[];c=e.selectNodes("./Log_Collection/Log");_.each(c,function(f){var g=_a(new _1.log,"_i3");g.loadFromXml(f)==_5&&this.log.logs.push(_a(g,"_i1v"))},this);b.appendChild(this.log.logs);return _5}break}}}return _4}}});_._2("_1.cloudstorage");
_1.cloudstorage.azure=_._1(_8("ICloudStorageManagerEvents"),_1._1,ICloudStorageManager,{constructor:function(){_1.cloudstorage.azure.superclass.constructor.apply(this,arguments);this.buckets=[];this.bucketDirs=[];this.locations=[]},ICloudStorageManager:{updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AzureSSB_Status_Collection" resource-type="AzureSSB_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?
this.cloudStatus:_4},updateConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AzureSSB_Connection_Collection" resource-type="AzureSSB_Connection_Collection"/>',_.id())),a)},getConnections:function(){return _a(this,"_i3").getChildren()},deleteConnections:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="AzureSSB_Connection_Collection" resource-type="AzureSSB_Connection_Collection"/>',
_.id())),a)},createConnection:function(){return _a(new _1.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();b="<Connection>                            <Name><![CDATA["+c.getName()+"]]\></Name>                            <Access_Key><![CDATA["+c.getSKey()+"]]\></Access_Key>                            <Account><![CDATA["+c.getAKey()+"]]\></Account>                            <Container_Name><![CDATA["+
c.getContainerName()+"]]\></Container_Name>                            <Region><![CDATA["+c.getRegion()+"]]\></Region>                            <Polling_Sec>"+c.getPollingSec()+"</Polling_Sec>                            <Max_Upload_Kbs>"+c.getMaxUploadKBS()+"</Max_Upload_Kbs>                            <Max_Download_Kbs>"+c.getMaxDownloadKBS()+"</Max_Download_Kbs>                        </Connection>";return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="AzureSSB_Connection" resource-type="AzureSSB_Connection">{1}                    </xs:add>',
_.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();b="<Connection>                            <Id><![CDATA["+c.getId()+"]]\></Id>                            <Name><![CDATA["+c.getName()+"]]\></Name>                            <Polling_Sec>"+c.getPollingSec()+"</Polling_Sec>                            <Max_Upload_Kbs>"+c.getMaxUploadKBS()+"</Max_Upload_Kbs>                            <Max_Download_Kbs>"+
c.getMaxDownloadKBS()+"</Max_Download_Kbs>                        </Connection>";return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AzureSSB_Connection" resource-type="AzureSSB_Connection">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection"/>',
_.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return _a(new _1.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="AzureSSB_Session" resource-type="AzureSSB_Session">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=
_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AzureSSB_Session" resource-type="AzureSSB_Session">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&_a(b,"ICloudStorageSession"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AzureSSB_Session"/>',_.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&
_a(b,"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection_Log"/>',_.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:_4},updateBuckets:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="AzureSSB_Connection">                    <xs:command_name>list_containers</xs:command_name>                    <xs:args>                        <xs:arg>                            <AzureSSB_Param>                                <Access_Key><![CDATA[{1}]]\></Access_Key>                                <Account><![CDATA[{2}]]\></Account>                                <Region><![CDATA[{3}]]\></Region>                            </AzureSSB_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),c,b,d)),a)},getBuckets:function(){return this.buckets},addBucket:function(a,b,c,d,e){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="" resource-type="AzureSSB_Connection">                    <xs:command_name>create_container</xs:command_name>                    <xs:args>                        <xs:arg>                            <AzureSSB_Param>                                <Container_Name><![CDATA[{1}]]\></Container_Name>                                <Access_Key><![CDATA[{2}]]\></Access_Key>                                <Account><![CDATA[{3}]]\></Account>                                <Region><![CDATA[{4}]]\></Region>                            </AzureSSB_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),d,c,b,e)),a)},updateDirectories:function(a,b,c){if((b=_a(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AzureSSB_Param>                                    <Container_Name><![CDATA[{2}]]\></Container_Name>                                    <Parent_Path><![CDATA[{3}]]\></Parent_Path>                                </AzureSSB_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),b.getContainerName(),c)),a)}return _4},getDirectories:function(){return this.bucketDirs},addDirectory:function(a,b,c){if((b=_a(b,"ICloudStorageConnection"))&&c!==null&&c!==undefined){if(c[0]=="/")c=c.substring(1);if(c&&c[c.length-1]!="/")c+="/";return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AzureSSB_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AzureSSB_Param>                                    <Container_Name><![CDATA[{2}]]\></Container_Name>                                    <Remote_Path><![CDATA[{3}]]\></Remote_Path>                                </AzureSSB_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),b.getContainerName(),c)),a)}return _4}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "AzureSSB_Connection":c=null;if(c=a.selectSingleNode("./Container_List")){this.buckets.splice(0);
if(a=c.selectNodes("Container")){_.each(a,function(f){this.buckets.push({bucket:this.getValue(f)})},this);return _5}}else if(c=a.selectSingleNode("./Folder_List")){this.bucketDirs.splice(0);if(a=c.selectNodes("Folder")){_.each(a,function(f){this.bucketDirs.push({folder:this.getValue(f)})},this);return _5}}else if(c=a.selectSingleNode("./Location_List")){this.locations.splice(0);if(a=c.selectNodes("Location")){_.each(a,function(f){this.locations.push({id:this.getValue(f.selectSingleNode("./Id")),
name:this.getValue(f.selectSingleNode("./Name"))})},this);return _5}}break}return _5}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "AzureSSB_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");_.each(a,function(f){var g=_a(new _1.cloudstorage.connection(true),"_i3");g.loadFromXml(f)==_5&&b.appendChild(g)},
this);return _5}break;case "AzureSSB_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=_a(new _1.cloudstatus,"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break}switch(c){case "AzureSSB_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=
[];c=e.selectNodes("./Log_Collection/Log");_.each(c,function(f){var g=_a(new _1.log,"_i3");g.loadFromXml(f)==_5&&this.log.logs.push(_a(g,"_i1v"))},this);b.appendChild(this.log.logs);return _5}break}}}return _4}}});_._2("_1.cloudstorage");
_1.cloudstorage.onedrive=_._1(_8("ICloudStorageManagerEvents"),_1._1,ICloudStorageManager,{constructor:function(){_1.cloudstorage.onedrive.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="OneDrive_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',_.id())),
a)},getAuthURL:function(){return this.authURL?this.authURL:_4},setAuthCode:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="OneDrive_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <OneDrive_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </OneDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="OneDrive_Status_Collection" resource-type="OneDrive_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:_4},updateConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="OneDrive_Connection_Collection" resource-type="OneDrive_Connection_Collection"/>',_.id())),
a)},getConnections:function(){return _a(this,"_i3").getChildren()},deleteConnections:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="OneDrive_Connection_Collection" resource-type="OneDrive_Connection_Collection"/>',_.id())),a)},createConnection:function(){return _a(new _1.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();
return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="OneDrive_Connection" resource-type="OneDrive_Connection">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="OneDrive_Connection" resource-type="OneDrive_Connection">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},
deleteConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="OneDrive_Connection"/>',_.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return _a(new _1.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();
return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="OneDrive_Session" resource-type="OneDrive_Session">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="OneDrive_Session" resource-type="OneDrive_Session">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,
b){if(b&&_a(b,"ICloudStorageSession"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="OneDrive_Session"/>',_.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&_a(b,"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="OneDrive_Connection_Log"/>',_.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?
this.log:_4},updateDirectories:function(a,b,c){if(b=_a(b,"ICloudStorageConnection"))return c?this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OneDrive_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <OneDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                </OneDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),c)),a):this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OneDrive_Connection">                        <xs:command_name>get_root_dir</xs:command_name>                        <xs:args/>                    </xs:command>',_.id(),b.getId())),a);return _4},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=_a(b,"ICloudStorageConnection");c=c.split("/");c=c[c.length-1]||c[c.length-2];if(b)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="OneDrive_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <OneDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </OneDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),d,c)),a);return _4}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "OneDrive_Connection":c=null;if(c=a.selectSingleNode("./Authorization_URL/URL")){this.authURL=
c.getNodeText();return _5}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return _5}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);if(a=c.selectNodes("Folder")){_.each(a,function(f){this.dirs.push({folder:this.getValue(f.selectSingleNode("Name")),id:this.getValue(f.selectSingleNode("Id"))})},this);return _5}}break}return _5}else{c=a.getAttributeText("resource-type");
d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "OneDrive_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");_.each(a,function(f){var g=_a(new _1.cloudstorage.connection(true),"_i3");g.loadFromXml(f)==_5&&b.appendChild(g)},this);return _5}break;case "OneDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=_a(new _1.cloudstatus,
"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break}switch(c){case "OneDrive_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");_.each(c,function(f){var g=_a(new _1.log,"_i3");g.loadFromXml(f)==_5&&
this.log.logs.push(_a(g,"_i1v"))},this);b.appendChild(this.log.logs);return _5}break}}}return _4}}});_._2("_1.cloudstorage");
_1.cloudstorage.amazondrive=_._1(_8("ICloudStorageManagerEvents"),_1._1,ICloudStorageManager,{constructor:function(){_1.cloudstorage.amazondrive.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="AmazonDrive_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',_.id())),
a)},getAuthURL:function(){return this.authURL?this.authURL:_4},setAuthCode:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="AmazonDrive_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <AmazonDrive_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </AmazonDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AmazonDrive_Status_Collection" resource-type="AmazonDrive_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:_4},updateConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="AmazonDrive_Connection_Collection" resource-type="AmazonDrive_Connection_Collection"/>',
_.id())),a)},getConnections:function(){return _a(this,"_i3").getChildren()},deleteConnections:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="AmazonDrive_Connection_Collection" resource-type="AmazonDrive_Connection_Collection"/>',_.id())),a)},createConnection:function(){return _a(new _1.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=
_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="AmazonDrive_Connection" resource-type="AmazonDrive_Connection">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AmazonDrive_Connection" resource-type="AmazonDrive_Connection">{1}</xs:set>',
_.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection"/>',_.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return _a(new _1.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=
_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="AmazonDrive_Session" resource-type="AmazonDrive_Session">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="AmazonDrive_Session" resource-type="AmazonDrive_Session">{1}</xs:set>',
_.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&_a(b,"ICloudStorageSession"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AmazonDrive_Session"/>',_.id(),b.getId())),a);return E_INVALIDARG},deleteACDSession:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="AmazonDrive_Session"/>',_.id(),b)),a)},updateConnectionLog:function(a,b){if(b&&_a(b,
"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection_Log"/>',_.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:_4},updateDirectories:function(a,b,c){if(b=_a(b,"ICloudStorageConnection"))return c?this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AmazonDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                </AmazonDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),c)),a):this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection">                        <xs:command_name>get_root_dir</xs:command_name>                        <xs:args/>                    </xs:command>',_.id(),b.getId())),a);return _4},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=_a(b,"ICloudStorageConnection");c.split("/");c[0]=="/"&&(c=c.substring(1));if(b)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="AmazonDrive_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <AmazonDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </AmazonDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),d,c)),a);return _4},getAmazonSessions:function(){return this.amazonSessions}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "AmazonDrive_Connection":c=null;if(c=
a.selectSingleNode("./Authorization_URL/URL")){this.authURL=c.getNodeText();return _5}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return _5}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);if(a=c.selectNodes("Folder")){_.each(a,function(g){this.dirs.push({folder:this.getValue(g.selectSingleNode("Name")),id:this.getValue(g.selectSingleNode("Id"))})},
this);return _5}}break}return _5}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "AmazonDrive_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");_.each(a,function(g){var h=_a(new _1.cloudstorage.connection(true),"_i3");h.loadFromXml(g)==_5&&b.appendChild(h)},this);var f=["Id","Local_Path","Remote_Path",
"Sync_Direction"];d=this.x.selectNodes("Connections/Connection/Sessions/Session");this.amazonSessions=[];_.each(d,function(g){var h={};_.each(f,function(k){var j=g.selectSingleNode(k);h[k]=j&&this.getValue(j)},this);this.amazonSessions.push(h)},this);return _5}break;case "AmazonDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=_a(new _1.cloudstatus,"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break}switch(c){case "AmazonDrive_Connection_Log":c=
e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");_.each(c,function(g){var h=_a(new _1.log,"_i3");h.loadFromXml(g)==_5&&this.log.logs.push(_a(h,"_i1v"))},this);b.appendChild(this.log.logs);return _5}break}}}return _4}}});_._2("_1.cloudstorage");
_1.cloudstorage.googledrive=_._1(_8("ICloudStorageManagerEvents"),_1._1,ICloudStorageManager,{constructor:function(){_1.cloudstorage.googledrive.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="GoogleDrive_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',_.id())),
a)},getAuthURL:function(){return this.authURL?this.authURL:_4},setAuthCode:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="GoogleDrive_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <GoogleDrive_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </GoogleDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="GoogleDrive_Status_Collection" resource-type="GoogleDrive_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:_4},updateConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="GoogleDrive_Connection_Collection" resource-type="GoogleDrive_Connection_Collection"/>',
_.id())),a)},getConnections:function(){return _a(this,"_i3").getChildren()},deleteConnections:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="GoogleDrive_Connection_Collection" resource-type="GoogleDrive_Connection_Collection"/>',_.id())),a)},createConnection:function(){return _a(new _1.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=
_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="GoogleDrive_Connection" resource-type="GoogleDrive_Connection">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="GoogleDrive_Connection" resource-type="GoogleDrive_Connection">{1}</xs:set>',
_.id(),b)),a)}return E_INVALIDARG},deleteConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection"/>',_.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return _a(new _1.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=
_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="GoogleDrive_Session" resource-type="GoogleDrive_Session">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="GoogleDrive_Session" resource-type="GoogleDrive_Session">{1}</xs:set>',
_.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,b){if(b&&_a(b,"ICloudStorageSession"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="GoogleDrive_Session"/>',_.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&_a(b,"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection_Log"/>',_.id(),b.getId())),
a);return E_INVALIDARG},getConnectionLog:function(){return this.log?this.log:_4},updateDirectories:function(a,b,c){if(b=_a(b,"ICloudStorageConnection"))return c?this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection">                        <xs:command_name>list_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <GoogleDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                </GoogleDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),c)),a):this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection">                        <xs:command_name>get_root_dir</xs:command_name>                    </xs:command>',_.id(),b.getId())),a);return _4},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=_a(b,"ICloudStorageConnection");c=c.split("/");c=c[c.length-1]||c[c.length-2];if(b)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="GoogleDrive_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <GoogleDrive_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </GoogleDrive_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),d,c)),a);return _4}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "GoogleDrive_Connection":c=null;if(c=a.selectSingleNode("./Authorization_URL/URL")){this.authURL=
c.getNodeText();return _5}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return _5}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);if(a=c.selectNodes("Folder")){_.each(a,function(f){this.dirs.push({folder:this.getValue(f.selectSingleNode("Name")),id:this.getValue(f.selectSingleNode("Id"))})},this);return _5}}break}return _5}else{c=a.getAttributeText("resource-type");
d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "GoogleDrive_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");_.each(a,function(f){var g=_a(new _1.cloudstorage.connection(true),"_i3");g.loadFromXml(f)==_5&&b.appendChild(g)},this);return _5}break;case "GoogleDrive_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=_a(new _1.cloudstatus,
"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break}switch(c){case "GoogleDrive_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");_.each(c,function(f){var g=_a(new _1.log,"_i3");g.loadFromXml(f)==_5&&
this.log.logs.push(_a(g,"_i1v"))},this);b.appendChild(this.log.logs);return _5}break}}}return _4}}});_._2("_1.cloudstorage");
_1.cloudstorage.dropbox=_._1(_8("ICloudStorageManagerEvents"),_1._1,ICloudStorageManager,{constructor:function(){_1.cloudstorage.dropbox.superclass.constructor.apply(this,arguments);this.dirs=[]},ICloudStorageManager:{updateAuthURL:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="Dropbox_Connection">                        <xs:command_name>get_auth_url</xs:command_name>                    </xs:command>',_.id())),a)},
getAuthURL:function(){return this.authURL?this.authURL:_4},setAuthCode:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="Dropbox_Connection">                        <xs:command_name>authorizing_user</xs:command_name>                        <xs:args>                            <xs:arg>                                <Dropbox_Param>                                    <Code><![CDATA[{1}]]\></Code>                                </Dropbox_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b)),a)},updateConnectionStatus:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Dropbox_Status_Collection" resource-type="Dropbox_Status_Collection"/>',_.id())),a)},getConnectionStatus:function(){return this.cloudStatus?this.cloudStatus:_4},updateConnections:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="Dropbox_Connection_Collection" resource-type="Dropbox_Connection_Collection"/>',_.id())),
a)},getConnections:function(){return _a(this,"_i3").getChildren()},deleteConnections:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="Dropbox_Connection_Collection" resource-type="Dropbox_Connection_Collection"/>',_.id())),a)},createConnection:function(){return _a(new _1.cloudstorage.connection,"ICloudStorageConnection")},addConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();
return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="Dropbox_Connection" resource-type="Dropbox_Connection">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){b=_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Dropbox_Connection" resource-type="Dropbox_Connection">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},
deleteConnection:function(a,b){var c=null;if(b&&(c=_a(b,"ICloudStorageConnection"))){_a(c,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Dropbox_Connection"/>',_.id(),b.getId())),a)}return E_INVALIDARG},createSession:function(){return _a(new _1.cloudstorage.session,"ICloudStorageSession")},addSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();
return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="Dropbox_Session" resource-type="Dropbox_Session">{1}</xs:add>',_.id(),b)),a)}return E_INVALIDARG},editSession:function(a,b){if(b&&(b=_a(b,"ICloudStorageSession"))){b=_a(b,"_i3").getXml().toString();return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-id="Dropbox_Session" resource-type="Dropbox_Session">{1}</xs:set>',_.id(),b)),a)}return E_INVALIDARG},deleteSession:function(a,
b){if(b&&_a(b,"ICloudStorageSession"))return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="Dropbox_Session"/>',_.id(),b.getId())),a);return E_INVALIDARG},updateConnectionLog:function(a,b){if(b&&_a(b,"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="Dropbox_Connection_Log"/>',_.id(),b.getId())),a);return E_INVALIDARG},getConnectionLog:function(){return this.log?
this.log:_4},updateDirectories:function(a,b,c){if(b=_a(b,"ICloudStorageConnection"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Dropbox_Connection">                    <xs:command_name>list_dir</xs:command_name>                    <xs:args>                        <xs:arg>                            <Dropbox_Param>                                <Directory_Id><![CDATA[{2}]]\></Directory_Id>                            </Dropbox_Param>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId(),c)),a);return _4},getDirectories:function(){return this.dirs},addDirectory:function(a,b,c,d){b=_a(b,"ICloudStorageConnection");c=c.split("/");c=c[c.length-1]||c[c.length-2];if(b)return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="Dropbox_Connection">                        <xs:command_name>create_dir</xs:command_name>                        <xs:args>                            <xs:arg>                                <Dropbox_Param>                                    <Directory_Id><![CDATA[{2}]]\></Directory_Id>                                    <Directory_Name><![CDATA[{3}]]\></Directory_Name>                                </Dropbox_Param>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getId(),d,c)),a);return _4},cancelMigration:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="Dropbox_Connection">                        <xs:command_name>no_migration</xs:command_name>                    </xs:command>',_.id())),a)}},getValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},_i3:{getXml:function(){return this.x},loadFromXml:function(a){var b=
_a(this,"_i3");if(a.getNodeName()=="xs:command-s"){var c=a.getAttributeText("resource-type"),d=a.getAttributeText("resource-id");switch(c){case "Dropbox_Connection":c=null;if(c=a.selectSingleNode("./Authorization_URL/URL")){this.authURL=c.getNodeText();return _5}else if(c=a.selectSingleNode("./Root_Dir")){this.dirs.splice(0);this.dirs.push({folder:this.getValue(c.selectSingleNode("Name")),id:this.getValue(c.selectSingleNode("Id"))});return _5}else if(c=a.selectSingleNode("./Folder_List")){this.dirs.splice(0);
if(a=c.selectNodes("Folder")){_.each(a,function(f){this.dirs.push({folder:this.getValue(f.selectSingleNode("Name")),id:this.getValue(f.selectSingleNode("Id"))})},this);return _5}}break}return _5}else{c=a.getAttributeText("resource-type");d=a.getAttributeText("resource-id");var e=a.selectNodes("./*");if(e&&e.length){e=e[0];switch(d){case "Dropbox_Connection_Collection":this.x=a;b.removeAll();if(a=this.x.selectNodes("Connections")){a=this.x.selectNodes("Connections/Connection");_.each(a,function(f){var g=
_a(new _1.cloudstorage.connection(true),"_i3");g.loadFromXml(f)==_5&&b.appendChild(g)},this);return _5}break;case "Dropbox_Status_Collection":a=a.selectSingleNode("Statuses");this.cloudStatus=_a(new _1.cloudstatus,"_i3");if(this.cloudStatus.loadFromXml(a)==_5)return _5;else this.cloudStatus=null;break}switch(c){case "Dropbox_Connection_Log":c=e.selectSingleNode("./Log_Collection");this.log={lcnt:0,tlcnt:0,sId:null};if(c){this.log.sId=d;this.log.lcnt=parseInt(c.getAttributeText("n_entries"));
this.log.tlcnt=parseInt(c.getAttributeText("n_total_entries"));this.log.logs=[];c=e.selectNodes("./Log_Collection/Log");_.each(c,function(f){var g=_a(new _1.log,"_i3");g.loadFromXml(f)==_5&&this.log.logs.push(_a(g,"_i1v"))},this);b.appendChild(this.log.logs);return _5}break}}}return _4}}});_._2("_1.cloudstorage");
_1.cloudstorage.connection=_._1(_9,_1._1,ICloudStorageConnection,{constructor:function(){_1.cloudstorage.connection.superclass.constructor.apply(this,arguments);_a(this,"_i3").loadFromXml((new _.Xml.document("            <Connection>              <Id></Id>              <Name></Name>              <Access_Key></Access_Key>              <Secret_Key></Secret_Key>              <Bucket_Name></Bucket_Name>              <Container_Name></Container_Name>              <Server_URL></Server_URL>              <Storage_Class>STANDARD</Storage_Class>              <Part_Size_MB>64</Part_Size_MB>              <Polling_Sec>30</Polling_Sec>              <Max_Upload_Kbs>0</Max_Upload_Kbs>              <Max_Download_Kbs>0</Max_Download_Kbs>              <Server_Encryption>0</Server_Encryption>            </Connection>")).selectNodes("./*")[0]);
this.sessions=_a(new _1._1,"_i3")},ICloudStorageConnection:{getId:function(){return _1.gp(this.xprop,"Id")},putId:function(a){return _1.pp(this.xprop,"Id",a)},getName:function(){return _1.gp(this.xprop,"Name")},putName:function(a){return _1.pp(this.xprop,"Name",a)},getAKey:function(){return _1.gp(this.xprop,"Access_Key")},putAKey:function(a){return _1.pp(this.xprop,"Access_Key",a)},getSKey:function(){return _1.gp(this.xprop,"Secret_Key")},putSKey:function(a){return _1.pp(this.xprop,
"Secret_Key",a)},getBucketName:function(){return _1.gp(this.xprop,"Bucket_Name")},putBucketName:function(a){return _1.pp(this.xprop,"Bucket_Name",a)},getRegion:function(){return _1.gp(this.xprop,"Region")},putRegion:function(a){return _1.pp(this.xprop,"Region",a)},getContainerName:function(){return _1.gp(this.xprop,"Container_Name")},putContainerName:function(a){return _1.pp(this.xprop,"Container_Name",a)},getServer:function(){return _1.gp(this.xprop,"Server_URL")},putServer:function(a){return _1.pp(this.xprop,
"Server_URL",a)},getStorageClass:function(){return _1.gp(this.xprop,"Storage_Class")},putStorageClass:function(a){return _1.pp(this.xprop,"Storage_Class",a)},getPartSizeMB:function(){return _1.gp(this.xprop,"Part_Size_MB")},putPartSizeMB:function(a){return _1.pp(this.xprop,"Part_Size_MB",a)},getPollingSec:function(){return _1.gp(this.xprop,"Polling_Sec")},putPollingSec:function(a){return _1.pp(this.xprop,"Polling_Sec",a)},getMaxUploadKBS:function(){return _1.gp(this.xprop,"Max_Upload_Kbs")},
putMaxUploadKBS:function(a){return _1.pp(this.xprop,"Max_Upload_Kbs",a)},getMaxDownloadKBS:function(){return _1.gp(this.xprop,"Max_Download_Kbs")},putMaxDownloadKBS:function(a){return _1.pp(this.xprop,"Max_Download_Kbs",a)},getServerEncryption:function(){return _1.gp(this.xprop,"Server_Encryption")=="1"},putServerEncryption:function(a){return _1.pp(this.xprop,"Server_Encryption",a?"1":"0")},getSessions:function(){return this.sessions?this.sessions.getChildren():_4},getS3Region:function(){return _1.gp(this.xprop,
"Region_Name")},putS3Region:function(a){return _1.pp(this.xprop,"Region_Name",a)},getS3Server_Category:function(){return _1.gp(this.xprop,"Server_CATEGORY")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");delete this.sessions;this.sessions=_a(new _1._1,"_i3");if(a=a.selectNodes("Sessions")){a=this.x.selectNodes("Sessions/Session");_.each(a,function(b){var c=_a(new _1.cloudstorage.session,
"_i3");c.loadFromXml(b)==_5&&this.sessions.appendChild(c)},this)}return _5}}});_._2("_1");
_1.cloudstorage.session=_._1(_9,_1._1,ICloudStorageSession,{constructor:function(){_1.cloudstorage.session.superclass.constructor.apply(this,arguments);_a(this,"_i3").loadFromXml((new _.Xml.document("            <Session>                <Id></Id>                <Connection_Id></Connection_Id>                <Local_Path></Local_Path>                <Remote_Path></Remote_Path>                <Sync_Direction>bidirection</Sync_Direction>            </Session>")).selectNodes("./*")[0])},ICloudStorageSession:{getId:function(){return _1.gp(this.as3,
"Id")},getConnectionId:function(){return _1.gp(this.as3,"Connection_Id")},putConnectionId:function(a){return _1.pp(this.as3,"Connection_Id",a)},getLocalPath:function(){return _1.gp(this.as3,"Local_Path")},putLocalPath:function(a){return _1.pp(this.as3,"Local_Path",a)},getRemotePath:function(){return _1.gp(this.as3,"Remote_Path")},putRemotePath:function(a){return _1.pp(this.as3,"Remote_Path",a)},getSyncDirection:function(){return _1.gp(this.as3,"Sync_Direction")},putSyncDirection:function(a){return _1.pp(this.as3,
"Sync_Direction",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.as3=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.cloudstatus=_._1(_9,_1._1,ICloudStatus,{constructor:function(a){_1.cloudstatus.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <Statuses>                <Joined>0</Joined>                <Enabled>0</Enabled>                <Status>                  <Conn_Id></Conn_Id>                  <Conn_Type></Conn_Type>                  <Status></Status>                  <User_Name/>                  <Used></Used>                  <Capacity></Capacity>                  <Fail_Code></Fail_Code>                </Status>              </Statuses>")).selectNodes("./*")[0])},ICloudStatus:{getJoined:function(){return _1.gp(this.xstatuses,
"Joined")},getEnabled:function(){return _1.gp(this.xstatuses,"Enabled")},getConn_Id:function(){return this.xstatus&&_1.gp(this.xstatus,"Conn_Id")},getConn_Type:function(){return this.xstatus&&_1.gp(this.xstatus,"Conn_Type")},getStatus:function(){return this.xstatus&&_1.gp(this.xstatus,"Status")},getUser_Name:function(){return this.xstatus&&_1.gp(this.xstatus,"User_Name")},getUsed:function(){return this.xstatus&&_1.gp(this.xstatus,"Used")},getCapacity:function(){return this.xstatus&&_1.gp(this.xstatus,
"Capacity")},getFail_Code:function(){return this.xstatus&&_1.gp(this.xstatus,"Failed_Code")},getFail_Info:function(){return this.xstatus&&_1.gp(this.xstatus,"Failed_Info")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xstatuses=_a(new _1.xprop(this.x),"_i5");if(a=a.selectSingleNode("Status"))this.xstatus=_a(new _1.xprop(a),"_i5");return _5}}});_._2("_1");
_1.insightagent=_._1(_9,_1._1,IInsightAgent,{constructor:function(a){_1.insightagent.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <Insight_Agent_Info>                    <Registered>0</Registered>                    <Connected>0</Connected>                    <User_Name/>                </Insight_Agent_Info>")).selectNodes("./*")[0])},IInsightAgent:{getRegistered:function(){return _1.gp(this.xuser,
"Registered")},getRConnected:function(){return _1.gp(this.xuser,"Connected")},getUserName:function(){return _1.gp(this.xuser,"User_Name")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.netProxyServer=_._1(_9,_1._1,INetworkProxyServer,{constructor:function(a){_1.netProxyServer.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <Server>                    <Protocol></Protocol>                    <Address><![CDATA[]]\></Address>                    <Port></Port>                    <Username><![CDATA[]]\></Username>                    <Password><![CDATA[]]\></Password>                </Server>            ")).selectNodes("./*")[0])},INetworkProxyServer:{getId:function(){return _1.gp(this.xprop,
"Id")},getProtocol:function(){return _1.gp(this.xprop,"Protocol")},putProtocol:function(a){return _1.pp(this.xprop,"Protocol",a)},getAddress:function(){return _1.gp(this.xprop,"Address")},putAddress:function(a){return _1.pp(this.xprop,"Address",a)},getPort:function(){return _1.gp(this.xprop,"Port")},putPort:function(a){return _1.pp(this.xprop,"Port",a)},getUsername:function(){return _1.gp(this.xprop,"Username")},putUsername:function(a){return _1.pp(this.xprop,"Username",a)},getPassword:function(){return _1.gp(this.xprop,
"Password")},putPassword:function(a){return _1.pp(this.xprop,"Password",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1");
_1.netProxyManager=_._1(_8("INetworkProxyManagerEvents"),_1._1,INetworkProxyManager,{constructor:function(){_1.netProxyManager.superclass.constructor.apply(this,arguments)},INetworkProxyManager:{UpdateServers:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="ProxyServer_Collection" resource-type="ProxyServer_Collection" />',_.id())),a)},getServers:function(){return this.xservers?this.xservers:_4},createServer:function(){return _a(new _1.netProxyServer,
"INetworkProxyServer")},AddServer:function(a,b){return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-id="ProxyServer_Collection" resource-type="ProxyServer_Collection" >                            <Server_Collection>{1}</Server_Collection>                        </xs:add>',_.id(),_a(b,"_i3").getXml().toString())),a)},CommitServer:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="ProxyServer">                            {1}                        </xs:set>',
_.id(),_a(b,"_i3").getXml().toString())),a)},RemoveServer:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ProxyServer" />',_.id(),b.getId())),a)},RemoveAllServers:function(a){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="ProxyServer_Collection" resource-type="ProxyServer_Collection" />',_.id())),a)},TestConnection:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="ProxyServer">                            <xs:command_name>test_proxy_connection</xs:command_name>                            <xs:args>                                <xs:arg>                                    {1}                                </xs:arg>                            </xs:args>                        </xs:command>',
_.id(),_a(b,"_i3").getXml().toString().replace(/Server/g,"ProxyServer_Param"))),a)}},_i3:{loadFromXml:function(a,b){var c=a.getNodeName(),d=a.getAttributeText("resource-type");if(d=="ProxyServer_Collection"){this.xservers=[];_.each(a.selectNodes("Servers/Server"),function(e){var f=_a(new _1.netProxyServer(true),"_i3");f.loadFromXml(e)==_5&&this.xservers.push(_a(f,"INetworkProxyServer"))},this);return _5}else if(c=="xs:command-s"&&d=="ProxyServer"){c=
a.selectSingleNode("Test_Result/Connection");a=a.selectSingleNode("Test_Result/Response_Code");if(c&&c.getNodeText()){this.Fire("OnTestConnection",[this,b,c.getNodeText()=="1",a?a.getNodeText():null]);return _5}}}}});_._2("_1");
_1._i2i=_._1(_i6,{getRCDeviceManager:function(){return _3},getRCNetworkManager:function(){return _3},getRCUserManager:function(){return _3},getRCSessionManager:function(){return _3},getRCLinkManager:function(){return _3},getRCLinkFSManager:function(){return _3},putSourceProxyURL:function(){return _3},getSourceProxyURL:function(){return _3},putSourcePublicURL:function(){return _3},getSourcePublicURL:function(){return _3}});
_i2i=_1._i2i;_._2("_1");
_1._i2t=_._1(_i6,{_i2t:{UpdateCurrentUser:function(){return _3},getCurrentUser:function(){return _3},AddUser:function(){return _3},AddInvitedUser:function(){return _3},changeAccount:function(){return _3},QueryUsers:function(){return _3},getQueryUsers:function(){return _3},recoverUserId:function(){return _3},recoverUserPassword:function(){return _3},changeUserPassword:function(){return _3},removeAccount:function(){return _3},
AddRemoteUserToDevice:function(){return _3},UpdateRemoteUserOnDevice:function(){return _3},RemoveRemoteUserFromDevice:function(){return _3},UpdateInvitedUser:function(){return _3},getInvitedUser:function(){return _3}}});var _i2t=_1._i2t;_1.IRCUserManagerEvents=_._1(_ip,{IRCUserManagerEvents:{}});var IRCUserManagerEvents=_1.IRCUserManagerEvents;_._2("_1");
_1._i2s=_._1(_i6,{_i2s:{getId:function(){return _3},putId:function(){return _3},getUserName:function(){return _3},putUserName:function(){return _3},getFirstName:function(){return _3},putFirstName:function(){return _3},getLastName:function(){return _3},putLastName:function(){return _3},getPassword:function(){return _3},putPassword:function(){return _3},getEmail:function(){return _3},putEmail:function(){return _3}}});
var _i2s=_1._i2s;_._2("_1");
_1._i2j=_._1(_i6,{_i2j:{getId:function(){return _3},putId:function(){return _3},getSerial:function(){return _3},getName:function(){return _3},getSMBName:function(){return _3},getP2PName:function(){return _3},getAlias:function(){return _3},getBase64:function(){return _3},getOnline:function(){return _3},getOwner:function(){return _3},getModel:function(){return _3},isRouter:function(){return _3},
getFirmwareName:function(){return _3},getFirmwareVersion:function(){return _3},getFirmwareTime:function(){return _3},isLocalSessionInitialized:function(){return!!(this.localSession&&this.localSession.token)},getLocalIP:function(){return _3},tryLocalIP:function(){return _3},putLocalIP:function(){return _3},generateLocalSessionUrl:function(){return _3}}});var _i2j=_1._i2j;
_1.IRCDeviceEvents=_._1(_is,{IRCDeviceEvents:{OnLocalSessionInit:function(){return _3},OnLocalSessionError:function(){return _3}}});var IRCDeviceEvents=_1.IRCDeviceEvents;
_1.IRCDeviceCapabilities=_._1(_i6,{IRCDeviceCapabilities:{getFileVersions:function(){return _3},getUpgradeFirmware:function(){return _3},getAntivirus:function(){return _3},getFilePreview:function(){return _3},getSnapshots:function(){return _3},getEventsSink:function(){return _3},getHomeFolders:function(){return _3},getSharing:function(){return _3},getShareDeletion:function(){return _3},getFileSearch:function(){return _3}}});
var IRCDeviceCapabilities=_1.IRCDeviceCapabilities;_._2("_1");_1._i2k=_._1(_i6,{_i2k:{UpdateDevices:function(){return _3},getDevices:function(){return _3},getDeviceById:function(){return _3},RegisterDevice:function(){return _3},RemoveDevice:function(){return _3},RemoveFriendDevice:function(){return _3}}});var _i2k=_1._i2k;_1.IRCDeviceManagerEvents=_._1(_ip,{IRCDeviceManagerEvents:{OnRegisterDevice:function(){return _3}}});
var IRCDeviceManagerEvents=_1.IRCDeviceManagerEvents;_._2("_1");_1._i2r=_._1(_i6,{_i2r:{UpdateMessages:function(){return _3},getMessages:function(){return _3},UpdateMessageByToken:function(){return _3},InviteMember:function(){return _3},ConfirmInvite:function(){return _3}}});var _i2r=_1._i2r;_1.IRCNetworkManagerEvents=_._1(_ip,{IRCNetworkManagerEvents:{OnMessageUpdate:function(){}}});
var IRCNetworkManagerEvents=_1.IRCNetworkManagerEvents;_._2("_1");_1._i2l=_._1(_i6,{});_i2l=_1._i2l;_._2("_1");
_1._i2p=_._1(_i6,{_i2p:{getId:function(){return _3},getType:function(){return _3},getOwnerName:function(){return _1.gp(this.xproptlist,"OwnerName")},getMemberName:function(){return _1.gp(this.xproptlist,"MemberName")},getMemberLogin:function(){return _1.gp(this.xproptlist,"MemberLogin")},getDeviceAlias:function(){return _1.gp(this.xproptlist,"DeviceAlias")},getDeviceLogin:function(){return _1.gp(this.xproptlist,"DeviceLogin")}}});var _i2p=_1._i2p;
_._2("_1");_1._i2m=_._1(_ip,{_i2m:{}});var _i2m=_1._i2m;_._2("_1");_1._i2n=_._1(_i6,{_i2n:{updateDevices:function(){return _3},getDevices:function(){return _3},updateDeviceBySerial:function(){return _3},getDeviceBySerial:function(){return _3}}});var _i2n=_1._i2n;
_1.IRCDiscoverManagerEvents=_._1(_ip,{IRCDiscoverManagerEvents:{}});var IRCDiscoverManagerEvents=_1.IRCDiscoverManagerEvents;_._2("_1");_1.IRCSession=_._1(_i6,{IRCSession:{getToken:function(){return _3},getUrl:function(){return _3}}});var IRCSession=_1.IRCSession;_._2("_1");_1.IRCSessionManager=_._1(_i6,{IRCSessionManager:{InitUploadSession:function(){return _3},InitLocalSession:function(){return _3}}});
var IRCSessionManager=_1.IRCSessionManager;_1.IRCSessionManagerEvents=_._1(_ip,{IRCSessionManagerEvents:{OnUploadSessionInit:function(){return _3},OnLocalSessionInit:function(){return _3}}});var IRCSessionManagerEvents=_1.IRCSessionManagerEvents;_._2("_1");
_1.IRCLink=_._1(_i6,{IRCLink:{getId:function(){return _3},getDeviceId:function(){return _3},getVisitCount:function(){return _3},putVisitCount:function(){return _3},getExpireDate:function(){return _3},putExpireDate:function(){return _3},getNotifyWhenAcessed:function(){return _3},putNotifyWhenAcessed:function(){return _3},getPasswordRequired:function(){return _3},putPassword:function(){return _3},getToken:function(){return _3},
getDownloadUrl:function(){return _3},getEmails:function(){return _3},getCreateDate:function(){return _3},getOwner:function(){return _3},getOwnerUsername:function(){return _3},getOwnerEmail:function(){return _3},getOwnerId:function(){return _3},getPath:function(){return _3},getSize:function(){return _3},getType:function(){return _3},getUrl:function(){return _3},getExpired:function(){return _3},getVisitCountComplete:function(){return _3}}});
var IRCLink=_1.IRCLink;_._2("_1");_1.IRCLinkGroup=_._1(_i6,{IRCLinkGroup:{putDeviceId:function(){return _3},putVisitCount:function(){return _3},putExpireDate:function(){return _3},putNotifyWhenAcessed:function(){return _3},putPassword:function(){return _3},putPersonalMessage:function(){return _3},putEmails:function(){return _3},putFSResources:function(){return _3}}});var IRCLinkGroup=_1.IRCLinkGroup;_._2("_1");
_1.IRCLinkFSResource=_._1(_i6,{IRCLinkFSResource:{putPath:function(){return _3},putSize:function(){return _3},putPreview:function(){return _3},putType:function(){return _3}}});var IRCLinkFSResource=_1.IRCLinkFSResource;_._2("_1");
_1.IRCLinkManager=_._1(_i6,{IRCLinkManager:{UpdateLinks:function(){return _3},getLinks:function(){return _3},createLinkGroup:function(){return _3},AddLinkGroup:function(){return _3},AddWebLinkGroup:function(){return _3},createLinkFSResource:function(){return _3},UpdateLink:function(){return _3},UpdateFolderLink:function(){return _3},RemoveLink:function(){return _3}}});var IRCLinkManager=_1.IRCLinkManager;
_1.IRCLinkManagerEvents=_._1(_ip,{IRCLinkManagerEvents:{OnLinkUpdate:function(){return _3},OnLinksCreate:function(){return _3}}});var IRCLinkManagerEvents=_1.IRCLinkManagerEvents;_._2("_1");_1.IRCLinkFSManager=_._1(_i6,{IRCLinkFSManager:{updateFsTreeNode:function(){return _3},updatePreview:function(){return _3}}});var IRCLinkFSManager=_1.IRCLinkFSManager;
_1.IRCLinkFSManagerEvents=_._1(_ip,{IRCLinkFSManagerEvents:{OnFSTNodeReady:function(){return _3},OnPreviewReady:function(){return _3}}});IRCLinkManagerEvents=_1.IRCLinkFSManagerEvents;_._2("_1");
_1.IRCSSOManager=_._1(_i6,{IRCSSOManager:{AddUser:function(){return _3},SendEmailConfirmation:function(){return _3},ConfirmEmail:function(){return _3},ModifyUser:function(){return _3},ChangePassword:function(){return _3},ChangeEmail:function(){return _3},RequestRecoverPassword:function(){return _3},RecoverPassword:function(){return _3},CheckMigration:function(){return _3},BindP2PAccountToSSO:function(){return _3},MirgateP2PAccountToSSO:function(){return _3},
SendMigrationEmailConfirmation:function(){return _3},ConfirmMigrationEmail:function(){return _3},LookupSSOUser:function(){return _3},InviteUserToDevice:function(){return _3},NotifyUserAboutPermissionsChanges:function(){return _3},CheckInvitationToken:function(){return _3},ConfirmInvitation:function(){return _3},ConfirmEmailByInvitationToken:function(){return _3}}});var IRCSSOManager=_1.IRCSSOManager;
_1.IRCSSOManagerEvents=_._1(_ip,{IRCSSOManagerEvents:{OnMigrationChecked:function(){return _3},OnLookupSSOUser:function(){return _3},OnCheckInvitation:function(){return _3}}});var IRCSSOManagerEvents=_1.IRCSSOManagerEvents;_._2("_1");
_1.rcapp=_._1(_1.CLSIDS.RCApplication,_1.reqroot,_i2i,_i4,{constructor:function(){_1.rcapp.superclass.constructor.apply(this,arguments);this.m_url=document.rcserver;this.m_proxyurl=document.rcserver_soap_proxy_url;this.m_publicurl=document.rcserver_public;this.jsonp_url=document.rcserver_jsonp_public},_i2i:{getRCDeviceManager:function(){return this._mngr_device||(this._mngr_device=_a(this,"_i3").appendChild(_a(new _1.rc.deviceManager,"_i2k")))},
getRCDiscoverManager:function(){return this._mngr_discover||(this._mngr_discover=_a(this,"_i3").appendChild(_a(new _1.rc.discoverManager,"_i2n")))},getRCNetworkManager:function(){return this._mngr_network||(this._mngr_network=_a(this,"_i3").appendChild(_a(new _1.rc.networkManager,"_i2r")))},getRCUserManager:function(){return this._mngr_user||(this._mngr_user=_a(this,"_i3").appendChild(_a(new _1.rc.userManager,
"_i2t")))},getRCSessionManager:function(){return this._mngr_session||(this._mngr_session=_a(this,"_i3").appendChild(_a(new _1.rc.sessionManager,"IRCSessionManager")))},getRCLinkManager:function(){return this._mngr_link||(this._mngr_link=_a(this,"_i3").appendChild(_a(new _1.rc.linkManager,"IRCLinkManager")))},getRCLinkFSManager:function(){return this._mngr_linkfs||(this._mngr_linkfs=_a(this,"_i3").appendChild(_a(new _1.rc.linkFSManager,
"IRCLinkFSManager")))},getRCSSOManager:function(){return this._mngr_sso||(this._mngr_sso=_a(this,"_i3").appendChild(_a(new _1.rc.ssoManager,"IRCSSOManager")))},putSourceProxyURL:function(a){this.m_proxyurl=a;return _5},getSourceProxyURL:function(){return this.m_proxyurl},putSourcePublicURL:function(a){this.m_publicurl=a;return _5},getSourcePublicURL:function(){return this.m_publicurl}},_iq:{getXmlRequest:function(){var a=_1.rcapp.superclass._iq.getXmlRequest.apply(this,
arguments);a.withCredentials=true;return a}}});_._2("_1.rc");
_1.rc.userManager=_._1(_8("IRCUserManagerEvents"),_1._1,_i2t,{constructor:function(){_1.rc.userManager.superclass.constructor.apply(this,arguments)},_i2t:{UpdateCurrentUser:function(a){return this.sendXml('<request moniker="/root" method="getuser">                        <body type="void"/>                    </request>',a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/getuser","FORM")},getCurrentUser:function(){return this.xuser?
_a(this.xuser,"_i2s"):_4},AddUser:function(a,b,c,d,e,f){return this.sendXml(String.format('<request moniker="/root" method="adduser">                        <body type="addRemoteUser">                            <User_Name>{0}</User_Name>                            <First_Name>{1}</First_Name>                            <Last_Name>{2}</Last_Name>                            <Email_Address>{3}</Email_Address>                            <Password><![CDATA[{4}]]\></Password>                        </body>                    </request>',
a,b,c,d,e),f,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/adduser","FORM")},AddInvitedUser:function(a,b,c,d,e,f,g,h,k){return this.sendXml(String.format('<request moniker="/root" method="addinviteduser">                        <body type="addRemoteInvitedUserRequest">                            <Token>{0}</Token>                            <Temp_User_Name>{1}</Temp_User_Name>                            <Temp_Password><![CDATA[{2}]]\></Temp_Password>                            <User_Name>{3}</User_Name>                            <First_Name>{4}</First_Name>                            <Last_Name>{5}</Last_Name>                            <Email_Address>{6}</Email_Address>                            <Password><![CDATA[{7}]]\></Password>                        </body>                    </request>',
a,b,c,d,e,f,g,h),k,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/addinviteduser","FORM")},QueryUsers:function(a,b,c,d,e){var f="";if(b)f="<email>"+b+"</email>";else if(c)f="<username>"+c+"</username>";else if(d||e)f="<fname>"+d+"</fname><lname>"+e+"</lname>";return this.sendXml(String.format('<request moniker="" method="lookupContacts">                        <body type="lookupContactsRequest">                            <Contact>{0}</Contact>                        </body>                    </request>',
f),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourceProxyURL()+"/lookupContacts","FORM")},getQueryUsers:function(){return this.users?_a(this.users,"_i3").getChildren():_4},recoverUserId:function(a,b){return this.sendXml(String.format('<request>                        <body type="recoverp2pusername">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                        </body>                    </request>',a),b,_a(_a(this,
"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/recoverp2pusername","FORM")},recoverUserPassword:function(a,b){return this.sendXml(String.format('<request>                        <body type="recoverP2PPassword">                            <Name><![CDATA[{0}]]\></Name>                         </body>                    </request>',a),b,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/recoverp2ppassword","FORM")},changeUserPassword:function(a,
b,c){return this.sendXml(String.format('<request>                        <body type="changepasswordonreset">                            <New_Password><![CDATA[{0}]]\></New_Password>                            <Token>{1}</Token>                        </body>                    </request>',a,b),c,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/changep2ppasswordonrecovering","FORM")},changeAccount:function(a,b,c,d,e,f){return this.sendXml(String.format('<request moniker="/root" method="updateUser">                        <body type="updateUserRequest">                            <User_Name>{0}</User_Name>                            <First_Name>{1}</First_Name>                            <Last_Name>{2}</Last_Name>                            <Email_Address>{3}</Email_Address>                            <Password><![CDATA[{4}]]\></Password>                        </body>                    </request>',
a,b,c,d,e),f,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/updateUser","FORM")},removeAccount:function(a){return this.sendXml('<request moniker="/root" method="removeaccount">                    <body type="removeAccount">                    </body>                </request>',a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/removeaccount","FORM")},AddRemoteUserToDevice:function(a,b,c){return this.sendXml(String.format('<request moniker="" method="addRemoteUser">                        <body type="addRemoteUserRequest">                            <device>{0}</device>                            <remoteuser>{1}</remoteuser>                        </body>                    </request>',
a,b),c,_a(_a(this,"_i3").getRoot(),"_i2i").getSourceProxyURL()+"/addRemoteUser","FORM")},UpdateRemoteUserOnDevice:function(a,b,c,d,e){return this.sendXml(String.format('<request moniker="" method="updateRemoteUser">                        <body type="updateRemoteUserRequest">                            <device>{0}</device>                            <remoteuser>{1}</remoteuser>                            <share>{2}</share>                            <access>{3}</access>                        </body>                    </request>',
a,b,c,d),e,_a(_a(this,"_i3").getRoot(),"_i2i").getSourceProxyURL()+"/updateRemoteUser","FORM")},RemoveRemoteUserFromDevice:function(a,b,c){return this.sendXml(String.format('<request moniker="" method="deleteRemoteUser">                        <body type="deleteRemoteUserRequest">                            <device>{0}</device>                            <remoteuser>{1}</remoteuser>                        </body>                    </request>',a,b),c,_a(_a(this,
"_i3").getRoot(),"_i2i").getSourceProxyURL()+"/deleteRemoteUser","FORM")},UpdateInvitedUser:function(a,b,c){return this.sendXml(String.format('<request moniker="/root" method="getinviteduserinfo">                        <body type="getInvitedUserInfoRequest">                            <Temp_User_Name>{0}</Temp_User_Name>                            <Temp_Password><![CDATA[{1}]]\></Temp_Password>                        </body>                    </request>',b,c),a,_a(_a(this,
"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/getinviteduserinfo","FORM")},getInvitedUser:function(){return this.xiuser?_a(this.xiuser,"_i2s"):_4}},_i3:{loadFromXml:function(a){var b=_a(this,"_i3"),c=a.selectSingleNode("User_Collection"),d=a.selectSingleNode("User");if(c){c=c.selectNodes("User");this.users&&b.removeChild(this.users);this.users=_a(new _1._1,"_i3");b.appendChild(this.users);_.each(c,function(e){var f=_a(new _1.rc.user(true),
"_i3");f.loadFromXml(e)==_5&&this.users.appendChild(f)},this)}else if(d)if(a.getAttributeText("resource-type")=="Invited_Contact"){delete this.xiuser;a=_a(new _1.rc.user(true),"_i3");if(a.loadFromXml(d)==_5)this.xiuser=a}else{delete this.xuser;a=_a(new _1.rc.user(true),"_i3");if(a.loadFromXml(d)==_5)this.xuser=a}return _5}}});_._2("_1.rc");
_1.rc.user=_._1(_1._1,_i2s,{constructor:function(a){_1.rc.user.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <User>                    <User_Id></User_Id>                    <User_Name></User_Name>                    <First_Name></First_Name>                    <Last_Name></Last_Name>                    <Password></Password>                    <Email_Address></Email_Address>                </User>")).selectNodes("./*")[0])},
_i2s:{getId:function(){return _1.gp(this.xuser,"User_Id")},putId:function(a){return _1.pp(this.xuser,"User_Id",a)},getUserName:function(){return _1.gp(this.xuser,"User_Name")},putUserName:function(a){return _1.pp(this.xuser,"User_Name",a)},getFirstName:function(){return _1.gp(this.xuser,"First_Name")},putFirstName:function(a){return _1.pp(this.xuser,"First_Name",a)},getLastName:function(){return _1.gp(this.xuser,"Last_Name")},putLastName:function(a){return _1.pp(this.xuser,"Last_Name",
a)},getPassword:function(){return _1.gp(this.xuser,"Password")},putPassword:function(a){return _1.pp(this.xuser,"Password",a)},getEmail:function(){return _1.gp(this.xuser,"Email_Address")},putEmail:function(a){return _1.pp(this.xuser,"Email_Address",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xuser=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.rc");
_1.rc.device=_._1(_1.CLSIDS.RCDevice,_8("IRCDeviceEvents"),_1.device5200,_i2j,IRCDeviceCapabilities,{constructor:function(a){_1.rc.device.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document('                <Device resource-id="unknown" resource-type="Device">                    <alias></alias>                    <base64></base64>                    <id></id>                    <online></online>                    <serial></serial>                    <username></username>                </Device>')).selectNodes("./*")[0]);
this.m_ls_url_pattern="{0}/{1}/{2}/{3}";this.m_ls_url_pattern_router="/cgi-bin/rccommand.cgi?at={1}&ts={2}&path={0}/{3}";this.spRCApp=_a(_7(_1.CLSIDS.RCApplication),"_i2i");this.spRCAppRequestRoot=_a(this.spRCApp,"_iq");this.spRCDevice=_a(this,"_i2j")},_i4:{getSingleToneState:function(a){a.res=false;return _5}},_iq:{getXmlRequest:function(){var a=_1.rc.device.superclass._iq.getXmlRequest.apply(this,arguments);
if(this.spRCDevice.isLocalSessionInitialized()){a.originalUrl=a.url;a.isLocalSessionRequest=true;if(this.csrf){a.headers=a.headers||{};a.headers.csrfpId=this.csrf}a.url=this.spRCDevice.generateLocalSessionUrl(a.url)}else{a.params.request=_.Utils.Base64.encode(a.params.request);a.url=this.spRCAppRequestRoot.getSourceURL()+"/sendnml/"+this.spRCDevice.getId()+a.url;a.withCredentials=true;a.headers=a.headers||{};a.headers["Content-Type"]="text/plain; charset=UTF-8";a.type="BIN"}return a}},_i2j:{getId:function(){return _1.gp(this.xproptlist,
"id")},putId:function(a){return _1.pp(this.xproptlist,"id",a)},getSerial:function(){return _1.gp(this.xproptlist,"serial")},getName:function(){return _1.gp(this.xproptlist,"username")},getSMBName:function(){return _1.gp(this.xproptlist,"smb_username")},getP2PName:function(){return _1.gp(this.xproptlist,"p2p_username")},getAlias:function(){return _1.gp(this.xproptlist,"alias")},getBase64:function(){return _1.gp(this.xproptlist,"base64")},getOnline:function(){return _1.gp(this.xproptlist,"online")==
"true"},getOwner:function(){return this.xowner?_a(this.xowner,"_i2s"):_4},getModel:function(){return _1.gp(this.xproptlist,"model")},isRouter:function(){var a=this.spRCDevice.isNAS();return a==_4?_4:!a},isNAS:function(){var a=this.spRCDevice.getModel();if(a&&a!=_4){a=(a+"").toLowerCase().replace(/\s/g,"");return a.indexOf("readynas")==0}else return _4},getFirmwareName:function(){return _1.gp(this.xproptlist,"firmware_name")},getFirmwareVersion:function(){return _1.gp(this.xproptlist,
"firmware_id")},getFirmwareTime:function(){return _1.gp(this.xproptlist,"firmware_time")},isLocalSessionInitialized:function(){return!!(this.localSession&&this.localSession.token)},getLocalIP:function(){return this.localSession&&this.localSession.ip?this.localSession.ip:""},tryLocalIP:function(a,b,c,d){var e=this.spRCDevice,f=e.getSerial();if(f&&a&&(window.location.protocol=="http:"||window.location.protocol=="file:")){if(!e.getLocalIP()||d)if(e.isNAS()){if(!this.csrf||+new Date>=this.csrfExpiredTime)_.lib.Ajax.request("GET",
"http://"+a+"/csrf.html",{success:function(g){if(g&&g.responseText){g=g.responseText.match(/(csrfpId\", \"(.*?));/g);if(g.length>0){this.csrf=g[0].replace('csrfpId", "',"").replace('");',"");this.csrfExpiredTime=+new Date+36E5}}},scope:this,timeout:b});_.lib.Ajax.request("GET","http://"+a+":10000/nasService.xml",{success:function(g){var h=false;if(!e.getLocalIP())if(g&&g.responseText)if((g=(new _.Xml.document(g.responseText.replace('xmlns="urn:schemas-upnp-org:device-1-0"',""))).selectSingleNode("root/device/serialNumber"))&&
f==g.getNodeText()){e.putLocalIP(a,c);h=true}h||this.Fire("OnLocalSessionError",[e,a])},failure:function(){this.Fire("OnLocalSessionError",[e,a])},scope:this,timeout:b})}else _.lib.Ajax.request("GET","http://"+a+":10000/check_serial?sn="+f,{success:function(){e.getLocalIP()?this.Fire("OnLocalSessionError",[e,a]):e.putLocalIP(a,c)},failure:function(){this.Fire("OnLocalSessionError",[e,a])},scope:this,timeout:b})}else this.Fire("OnLocalSessionError",[e,a])},putLocalIP:function(a,b){if(!this.spRCSessionManager)this.spRCSessionManager=
this.spRCApp.getRCSessionManager();this.localSession={ip:a};_a(this.spRCSessionManager,"_i1").Advise(this);var c=new String("_1-init-localsession");c.device=this;c.ip=a;this.spRCSessionManager.InitLocalSession(c,this.spRCDevice.getId(),b)},generateLocalSessionUrl:function(a,b,c,d){if(this.localSession){var e=document.lan_direct_connection_map,f=this.spRCDevice.isNAS()?this.m_ls_url_pattern:this.m_ls_url_pattern_router;a=a||"";a=e&&e[a]?e[a]:a;e=(new Date).getTime();if(this.localSession.time>=
e)e=this.localSession.time+1;this.localSession.time=e;e=e.toString(16);a=a[a.length-1]=="/"?a.substr(0,a.length-1):a;b=(b&&b[0]=="/"?b.substr(1):b)||"";c=(c&&c[0]=="/"?c.substr(1):c)||"";b=_.Utils.MD5(this.localSession.token+(d?b:"")+e);sessionStorage.setItem("md5",b);a=String.format(f,a,b,e,c);a="http://"+this.spRCDevice.getLocalIP()+(document.lan_direct_connection_router_port&&this.spRCDevice.isNAS()?"":":"+document.lan_direct_connection_router_port)+a}else a="";return a},onLocalSessionRequestFailed:function(){if(this.localSession&&
this.localSession.ip){this.localSession.countFailed=(this.localSession.countFailed||0)+1;if(this.localSession.countFailed==2){this.spRCDevice.tryLocalIP(this.localSession.ip);delete this.localSession}}}},IRCDeviceCapabilities:{getFileVersions:function(){return this.spRCDevice.isNAS()},getUpgradeFirmware:function(){return this.spRCDevice.isNAS()},getAntivirus:function(){return this.spRCDevice.isNAS()},getFilePreview:function(){return this.spRCDevice.isNAS()},getSnapshots:function(){return this.spRCDevice.isNAS()},
getEventsSink:function(){return this.spRCDevice.isNAS()},getHomeFolders:function(){return this.spRCDevice.isNAS()},getSharing:function(){return this.spRCDevice.isNAS()},getShareDeletion:function(){return this.spRCDevice.isNAS()},getFileSearch:function(){return this.spRCDevice.isNAS()}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){_1.rc.device.superclass._i3.loadFromXml.apply(this,arguments);this.x=a;if(a.getNodeName()=="Device"){this.xproptlist=_a(new _1.xprop(a),
"_i5");delete this.xowner;var b=a.selectSingleNode("owner"),c=_a(new _1.rc.user(true),"_i3");if(c.loadFromXml(b)==_5)this.xowner=c}return _5}},IRCSessionManagerEvents:{_o2:function(){return _5},OnLocalSessionInit:function(a,b){if(a=="_1-init-localsession")if(this.localSession&&a.device===this&&this.localSession.ip===a.ip){var c=b.getToken();if(c){this.localSession.token=c;this.Fire("OnLocalSessionInit",[this.spRCDevice,a.ip,b])}else this.Fire("OnLocalSessionError",
[this.spRCDevice,a.ip])}return _5},_o3:function(a,b,c){if(c=="_1-init-localsession")if(this.localSession&&c.device===this&&this.localSession.ip===c.ip){a!=_5&&this.Fire("OnLocalSessionError",[this.spRCDevice,c.ip]);this.spRCSessionManager&&_a(this.spRCSessionManager,"_i1").Unadvise(this)}}}});_._2("_1.rc");
_1.rc.deviceManager=_._1(_8("IRCDeviceManagerEvents"),_1._1,_i2k,{constructor:function(){_1.rc.deviceManager.superclass.constructor.apply(this,arguments)},_i2k:{UpdateDevices:function(a){return this.sendXml('<request moniker="/root" method="getalldevices">                    <body type="void"/>                </request>',a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/getalldevices","FORM")},getDevices:function(){return this.xdevices?
this.xdevices.slice():_4},getDeviceById:function(a){return this.hash&&this.hash[a]?this.hash[a]:null},RegisterDevice:function(a,b){return this.sendXml(String.format('<request moniker="/root/devices/{0}" method="register">                        <body type="void"/>                    </request>',b.getId()),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/register","FORM")},RemoveDevice:function(a,b){return this.sendXml(String.format('<request moniker="/root/devices/{0}" method="unregister">                        <body type="void"/>                    </request>',
a.getId()),b,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/unregister","FORM")},RemoveFriendDevice:function(a,b){return this.sendXml(String.format('<request moniker="" method="deleteFriendDevice">                        <body type="deleteFriendDeviceRequest">                            <id>{0}</id>                        </body>                    </request>',a.getId()),b,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/deleteFriendDevice",
"FORM")}},_i3:{loadFromXml:function(a,b){var c=a.selectSingleNode("Device_Collection");a=a.selectSingleNode("Device");if(c){this.xdevices=[];this.hash=[];if(b=c.selectNodes("Device"))for(a=0;a<b.length;++a){c=_a(new _1.rc.device(true),"_i3");if(c.loadFromXml(b[a])==_5){this.xdevices.push(c);c=_a(c,"_i2j");this.hash[c.getId()]=c}}}else if(a){c=_a(new _1.rc.device(true),"_i3");c.loadFromXml(a)==_5&&this.Fire("OnRegisterDevice",[b,_a(c,"_i2j")])}return _5}}});
_._2("_1.rc");
_1.rc.networkManager=_._1(_8("IRCNetworkManagerEvents"),_1._1,_i2r,{constructor:function(){_1.rc.networkManager.superclass.constructor.apply(this,arguments)},_i2r:{UpdateMessages:function(a){return this.sendXml(String.format('<request moniker="" method="getmessages">                        <body type="getMessagesRequest">                        </body>                    </request>'),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourceProxyURL()+
"/getmessages","FORM")},getMessages:function(){return this.messages?_a(this.messages,"_i3").getChildren():_4},UpdateMessageByToken:function(a,b){return this.sendXml(String.format('<request>                        <body type="getMemberInvitation">                            <token>{0}</token>                        </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourceProxyURL()+"/getMemberInvitation","FORM")},InviteMember:function(a,
b,c){return this.sendXml(String.format('<request moniker="" method="inviteNetworkMemberByEmail">                        <body type="inviteNetworkMemberByEmailRequest">                            <device>{0}</device>                            <email>{1}</email>                        </body>                    </request>',a,b),c,_a(_a(this,"_i3").getRoot(),"_i2i").getSourceProxyURL()+"/inviteNetworkMemberByEmail","FORM")},ConfirmInvite:function(a,b){return this.sendXml(String.format('<request moniker="" method="confirminvitation">                        <body type="confirmInvitationRequest">                            <token>{0}</token>                        </body>                    </request>',
a),b,_a(_a(this,"_i3").getRoot(),"_i2i").getSourceProxyURL()+"/confirminvitation","FORM")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a,b){this.x=a;_a(this,"_i3");var c=a.selectSingleNode("Messages_Collection");if(c){this.messages=_a(new _1._1,"_i3");b=c.selectNodes("Message");_.each(b,function(d){var e=_a(new _1.rc.message(true),"_i3");e.loadFromXml(d)==_5&&this.messages.appendChild(e)},this)}else if(a=
a.selectSingleNode("Message")){c=_a(new _1.rc.message(true),"_i3");c.loadFromXml(a)==_5&&this.Fire("OnMessageUpdate",[b,_a(c,"_i2p")])}return _5}}});_._2("_1","_1.rc");
_1.rc.discoverdevice=_._1(_9,{constructor:function(){_1.rc.discoverdevice.superclass.constructor.apply(this,arguments)},_i2l:{getFiendlyName:function(){return this.x.hostname},getModelName:function(){return this.x.model},getIndex:function(){return this.x.index},getPresentationURL:function(){for(var a=_4,b=0;b<this.x.network.length;b++)if(a=this.x.network[b].IPv4_Address)return a;return a},getPresentationURLs:function(){for(var a=[],b=0;b<this.x.network.length;b++)this.x.network[b].IPv4_Address&&
a.push(this.x.network[b].IPv4_Address);return a},getMACAddress:function(){for(var a=_4,b=0;b<this.x.network.length;b++)if(a=this.x.network[b].MAC_Address)return a;return a},getPresentationIPv4URL:function(){},getPresentationIPv6URL:function(){},getStatus:function(){return this.x.status},getCloudRegistered:function(){return this.x.registered},getWizardManaged:function(){return this.x.managed},getForced:function(){return this.x.forced}},loadFromJSON:function(a){this.x=a;return _5}});_._2("_1.rc");
_1.rc.discoverManager=_._1(_8("IRCDiscoverManagerEvents"),_i3,_i2n,{constructor:function(){_1.rc.discoverManager.superclass.constructor.apply(this,arguments);this.server=document.discoverserver},_i2n:{updateDevices:function(a){var b=new _.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);this.Fire("OnPending",[_a(this,"_i6"),a]);var c=this.__i?this.__i.substr(0,this.__i.length-
6):"Unknown";_2("WebCall [lparam = "+a+"]","updateDevices",_2.INFO,c);b.request({url:this.server,method:"GET",scriptTag:true,argument:{method:"updateDevices",lparam:a}});return _5},getDevices:function(){return this.xdevices?this.xdevices.slice():_4},getReducedDevices:function(){return this.xrdevices?this.xrdevices.slice():_4},updateDeviceBySerial:function(a,b){var c=new _.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);this.Fire("OnPending",
[_a(this,"_i6"),b]);var d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_2("WebCall [lparam = "+b+"]","updateDeviceBySerial",_2.INFO,d);c.request({url:this.server+"?id="+a,method:"GET",scriptTag:true,argument:{method:"updateDeviceBySerial",lparam:b}});return _5},getDeviceBySerial:function(){return this.xserialdevice&&this.xserialdevice.x?this.xserialdevice:_4},getDeviceBySerialWithoutForced:function(){return this.xserialdeviceforced&&this.xserialdeviceforced.x?
this.xserialdeviceforced:_4}},onDone:function(a,b,c){a=c.argument.method;if(b.responseText&&b.responseText.length<102400){var d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_2("WebResp [lparam = "+c.argument.lparam+"]",_.util.Format.htmlEncode(b.responseText),_2.INFO,d)}else if(b.responseText&&b.responseText.length){d=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_2("WebResp [lparam = "+c.argument.lparam+"]","Message > 100k has been omitted",_2.INFO,d)}switch(a){case "updateDevices":this.xdevices=
[];this.xrdevices=[];a=b.responseObject.data.items;for(d=0;d<a.length;++d){b=new _1.rc.discoverdevice;if(b.loadFromJSON(a[d])==_5){this.xdevices.push(b);b.x&&b.x.forced==false&&this.xrdevices.push(b)}}this.Fire("_o2",[_a(this,"_i6"),c.argument.lparam]);this.Fire("_o3",[_5,_a(this,"_i6"),c.argument.lparam]);break;case "updateDeviceBySerial":delete this.xserialdevice;delete this.xserialdeviceforced;a=b.responseObject.data.items[0];b=new _1.rc.discoverdevice;if(b.loadFromJSON(a)==
_5)if(b.x){this.xserialdeviceforced=b;if(b.x.forced==false)this.xserialdevice=b}this.Fire("_o2",[_a(this,"_i6"),c.argument.lparam]);this.Fire("_o3",[_5,_a(this,"_i6"),c.argument.lparam]);break}return _5},onFailed:function(a,b,c,d){a=c.argument.method;if(b.responseText&&b.responseText.length<102400){var e=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_2("WebResp [lparam = "+c.argument.lparam+"]",_.util.Format.htmlEncode(b.responseText),_2.ERROR,
e)}else if(b.responseText&&b.responseText.length){e=this.__i?this.__i.substr(0,this.__i.length-6):"Unknown";_2("WebResp [lparam = "+c.argument.lparam+"]","Message > 100k has been omitted",_2.ERROR,e)}switch(a){case "updateDevices":this.Fire("_o3",[d,_a(this,"_i6"),c.argument.lparam]);break;case "updateDeviceBySerial":this.Fire("_o3",[d,_a(this,"_i6"),c.argument.lparam]);break}}});_._2("_1.rc");
_1.rc.message=_._1(_1._1,_i2p,{constructor:function(){_1.rc.message.superclass.constructor.apply(this,arguments)},_i2p:{getId:function(){return _1.gp(this.xproptlist,"uuid")},getType:function(){return this.x?this.x.getAttributeText("resource-type"):_4},getOwnerName:function(){return _1.gp(this.xproptlist,"OwnerName")},getMemberName:function(){return _1.gp(this.xproptlist,"MemberName")},getMemberLogin:function(){return _1.gp(this.xproptlist,"MemberLogin")},getDeviceAlias:function(){return _1.gp(this.xproptlist,
"DeviceAlias")},getDeviceLogin:function(){return _1.gp(this.xproptlist,"DeviceLogin")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.rc");
_1.rc.session=_._1(_1._1,IRCSession,{constructor:function(){_1.rc.session.superclass.constructor.apply(this,arguments)},IRCSession:{getToken:function(){return _1.gp(this.xproptlist,"Token")},getUrl:function(){return _1.gp(this.xproptlist,"Url")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.rc");
_1.rc.sessionManager=_._1(_8("IRCSessionManagerEvents"),_1._1,IRCSessionManager,{constructor:function(){_1.rc.sessionManager.superclass.constructor.apply(this,arguments)},IRCSessionManager:{InitUploadSession:function(a,b,c){var d="";_.each(c,function(e){d+="<File_Path><![CDATA["+e+"]]\></File_Path>"});return this.sendXml(String.format('<request><body type="initUpload"><Device_ID>{0}</Device_ID><File_Paths>{1}</File_Paths></body></request>',b,d),a,_a(_a(this,
"_i3").getRoot(),"_iq").getSourceURL()+"/initUpload","FORM")},InitLocalSession:function(a,b,c){return this.sendXml(String.format('<request><body type="initLocalSession"><Device_ID>{0}</Device_ID><Expires>{1}</Expires></body></request>',b,c===false?"False":"True"),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/initlocalsession","FORM")}},_i3:{loadFromXml:function(a,b){var c=a.getAttributeText("resource-type");if(c=="IO_Session"){if(a=a.selectSingleNode("Session")){c=
_a(new _1.rc.session,"_i3");if(c.loadFromXml(a)==_5)(c=_a(c,"IRCSession"))&&this.Fire("OnUploadSessionInit",[b,c])}}else if(c=="LocalSession")if(a=a.selectSingleNode("LocalSession")){c=_a(new _1.rc.session,"_i3");if(c.loadFromXml(a)==_5)(c=_a(c,"IRCSession"))&&this.Fire("OnLocalSessionInit",[b,c])}return _5}}});_._2("_1.rc");
_1.rc.link=_._1(_1._1,IRCLink,{constructor:function(a){_1.rc.link.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <SharedLink>                    <id />                    <DeviceId />                    <VisitCount />                    <ExpireDate />                    <NotifyWhenAccessed />                    <Password />                    <PasswordRequired />                    <MailList />                    <FsResource>                        <Path />                        <Size />                        <Type />                    </FsResource>                </SharedLink>")).selectNodes("./*")[0])},
IRCLink:{getId:function(){return _1.gp(this.xproptlist,"id")},getDeviceId:function(){return _1.gp(this.xproptlist,"DeviceId")},getVisitCount:function(){return _1.gp(this.xproptlist,"VisitCount")},putVisitCount:function(a){return _1.pp(this.xproptlist,"VisitCount",a)},getExpireDate:function(){return _1.gp(this.xproptlist,"ExpireDate")},putExpireDate:function(a){return _1.pp(this.xproptlist,"ExpireDate",a)},getNotifyWhenAcessed:function(){var a=_1.gp(this.xproptlist,"NotifyWhenAccessed");return a==
"True"||a=="true"},putNotifyWhenAcessed:function(a){return _1.pp(this.xproptlist,"NotifyWhenAccessed",a?"True":"False")},getPasswordRequired:function(){var a=_1.gp(this.xproptlist,"PasswordRequired");return a=="True"||a=="true"},putPassword:function(a){return _1.pp(this.xproptlist,"Password",a)},getToken:function(){return _1.gp(this.xproptlist,"Token")},getDownloadUrl:function(){return _1.gp(this.xproptlist,"DownloadUrl")},getEmails:function(){var a=this.x.selectNodes("MailList/email"),b=[];
_.each(a,function(c){(c=c.getNodeText())&&b.push(c)},this);return b},getCreateDate:function(){return _1.gp(this.xproptlist,"CreateDate")},getOwner:function(){return _1.gp(this.xproptlist,"Owner")},getOwnerUsername:function(){return _1.gp(this.xproptlist,"OwnerUsername")},getOwnerEmail:function(){return _1.gp(this.xproptlist,"OwnerEmail")},getOwnerId:function(){return _1.gp(this.xproptlist,"OwnerId")},getPath:function(){return _1.gp(this.xproptlist,"FsResource/Path")},getSize:function(){return _1.gp(this.xproptlist,
"FsResource/Size")},getType:function(){return _1.gp(this.xproptlist,"FsResource/Type")},getUrl:function(){return _1.gp(this.xproptlist,"Uri")},getExpired:function(){var a=_1.gp(this.xproptlist,"Expired");return a=="True"||a=="true"},getVisitCountComplete:function(){return _1.gp(this.xproptlist,"VisitCountComplete")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.rc");
_1.rc.linkgroup=_._1(_1._1,IRCLinkGroup,{constructor:function(a){_1.rc.linkgroup.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <SharedLinkGroup>                    <CommonData>                        <DeviceId />                        <VisitCount />                        <ExpireDate />                        <PersonalMessage />                        <NotifyWhenAccessed />                        <Password />                        <MailList />                    </CommonData>                    <FsResourceList />                </SharedLinkGroup>")).selectNodes("./*")[0])},
IRCLinkGroup:{putDeviceId:function(a){return _1.pp(this.xproptlist,"CommonData/DeviceId",a)},putVisitCount:function(a){return _1.pp(this.xproptlist,"CommonData/VisitCount",a)},putExpireDate:function(a){return _1.pp(this.xproptlist,"CommonData/ExpireDate",a)},putNotifyWhenAcessed:function(a){return _1.pp(this.xproptlist,"CommonData/NotifyWhenAccessed",a?"True":"False")},putPassword:function(a){return _1.pp(this.xproptlist,"CommonData/Password",a)},putPersonalMessage:function(a){return _1.pp(this.xproptlist,
"CommonData/PersonalMessage",a)},putEmails:function(a){var b=this.x.selectSingleNode("CommonData/MailList");b.removeNode("*");for(var c=0;c<a.length;++c)b.appendNode("email").setNodeText(a[c]);return _5},putFSResources:function(a){var b=this.x.selectSingleNode("FsResourceList");b.removeNode("*");for(var c=0;c<a.length;++c)b.appendNode(_a(a[c],"_i3").getXml());return _5}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),
"_i5");return _5}}});_._2("_1.rc");
_1.rc.linkFSResource=_._1(_1._1,IRCLinkFSResource,{constructor:function(a){_1.rc.linkFSResource.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <FsResource>                    <Path />                    <Size>0</Size>                    <Preview />                    <Type>file</Type>                </FsResource>")).selectNodes("./*")[0])},IRCLinkFSResource:{putPath:function(a){return _1.pp(this.xproptlist,"Path",
a)},putSize:function(a){return _1.pp(this.xproptlist,"Size",a)},putPreview:function(a){this.x.removeNode("Preview");return this.x.appendNode(new _.Xml.document("<Preview><![CDATA["+a+"]]\></Preview>"))},putType:function(a){return _1.pp(this.xproptlist,"Type",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproptlist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.rc");
_1.rc.linkManager=_._1(_8("IRCLinkManagerEvents"),_1._1,IRCLinkManager,{constructor:function(){_1.rc.linkManager.superclass.constructor.apply(this,arguments)},IRCLinkManager:{UpdateLinks:function(a,b){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_devId=b;return this.sendXml(String.format('<request>                        <body type="getSharedLinksRequest">                            <deviceId>{0}</deviceId>                        </body>                    </request>',
b),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/getsharedlinks","FORM")},getLinks:function(a){return this.links&&this.links[a]?_a(this.links[a],"_i3").getChildren():_4},createLinkGroup:function(){return _a(new _1.rc.linkgroup,"IRCLinkGroup")},AddLinkGroup:function(a,b){return this.sendXml(String.format('<request>                        <body type="createSharedLinks">                            {0}                        </body>                    </request>',
_a(b,"_i3").getXml().toString()),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/createsharedlinks","FORM")},AddWebLinkGroup:function(a,b){return this.sendXml(String.format('<request>                        <body type="createSharedLinksAdvanced">                            {0}                        </body>                    </request>',_a(b,"_i3").getXml().toString()),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+
"/createsharedlinksadvanced","FORM")},createLinkFSResource:function(){return _a(new _1.rc.linkFSResource,"IRCLinkFSResource")},UpdateLink:function(a,b,c){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_linkId=b;return this.sendXml(String.format('<request>                        <body type="sharedLinkRequest">                            <id>{0}</id>                            <Password>{1}</Password>                        </body>                    </request>',b,c||""),a,_a(_a(this,
"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/getpublicsharedlink","FORM")},UpdateFolderLink:function(a,b,c){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_linkId=b;return this.sendXml(String.format('<request>                        <body type="getFolderPageToken">                            <SharedFolderToken>{0}</SharedFolderToken>                            <Password>{1}</Password>                        </body>                    </request>',b,c||""),a,_a(_a(this,
"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/shared/folder/getpagetoken","FORM")},RemoveLink:function(a,b){return this.sendXml(String.format('<request>                        <body type="sharedLinkRequest">                            <id>{0}</id>                        </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/deletesharedlink","FORM")}},_i3:{loadFromXml:function(a,b){this.x=a;var c=a.selectSingleNode("SharedLinks_Collection"),
d=a.selectSingleNode("CreatedSharedLinks_Collection");if(c){var e=b._dpv_devId;if(e){this.links=this.links||{};this.links[e]=_a(new _1._1,"_i3");var f=c.selectNodes("SharedLink");_.each(f,function(g){var h=_a(new _1.rc.link(true),"_i3");h.loadFromXml(g)==_5&&this.links[e].appendChild(h)},this)}}else if(d){f=[];_.each(d.selectNodes("SharedLink"),function(g){var h=_a(new _1.rc.link(true),"_i3");h.loadFromXml(g)==_5&&f.push(_a(h,"IRCLink"))},
this);this.Fire("OnLinksCreate",[b,f])}else{c=b._dpv_linkId;delete b._dpv_linkId;if(c){d=_a(new _1.rc.link,"_i3");if(a=a.selectSingleNode("SharedLink"))if(d.loadFromXml(a)==_5)(d=_a(d,"IRCLink"))&&this.Fire("OnLinkUpdate",[b,c,d])}}return _5}}});_._2("_1.rc");
_1.rc.linkFSManager=_._1(_8("IRCLinkFSManagerEvents"),_1._1,IRCLinkFSManager,{constructor:function(){_1.rc.linkManager.superclass.constructor.apply(this,arguments)},make_quoted:function(a){if(_.isString(a)){var b=function(c){if(c=="<")return"&lt;";else if(c==">")return"&gt;";else if(c=='"')return"&quot;";else if(c=="&")return"&amp;"};return a.replace(/[<>"&]/g,function(c){return b(c)})}return a},IRCLinkFSManager:{updateFsTreeNode:function(a,b,c){b=this.make_quoted(b);
return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSGrabNode" resource-type="FSGrabNode">                    <request id="{0}" method="fs.grab">                        <param name="path">{1}</param>                        <param name="attr">2</param>                    </request>                </xs:get>',_.id(),b)),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/shared/folder/grab?t="+c,"FORM")},updatePreview:function(a,
b,c,d,e){b=this.make_quoted(b);return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="FSFilePreview" resource-type="FSFilePreview">                    <request id="{0}" method="fs.preview">                        <param name="path">{1}</param>                        <param name="height">{2}</param>                        <param name="width">{3}</param>                    </request>                </xs:get>',_.id(),b,c,d)),a,_a(_a(this,"_i3").getRoot(),
"_i2i").getSourcePublicURL()+"/shared/folder/preview?t="+e,"FORM")}},_i3:{loadFromXml:function(a,b){switch(a.getAttributeText("resource-type")){case "FSGrabNode":this.Fire("OnFSTNodeReady",[a,b]);break;case "FSFilePreview":this.Fire("OnPreviewReady",[a.getNodeText(),b]);break;default:break}return _5}}});_._2("_1.rc");
_1.rc.ssoManager=_._1(_8("IRCSSOManagerEvents"),_1._1,IRCSSOManager,{constructor:function(){_1.rc.ssoManager.superclass.constructor.apply(this,arguments)},IRCSSOManager:{AddUser:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="addRemoteUser">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                            <First_Name><![CDATA[{1}]]\></First_Name>                            <Last_Name><![CDATA[{2}]]\></Last_Name>                            <Password><![CDATA[{3}]]\></Password>                            <Skip_Confirmation_Email>{4}</Skip_Confirmation_Email>                        </body>                    </request>',
b.getEmail(),b.getFirstName(),b.getLastName(),b.getPassword(),(!!c).toString()),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/adduser","FORM")},SendEmailConfirmation:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="ssoCredentials">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                            <Password><![CDATA[{1}]]\></Password>                        </body>                    </request>',
b,c),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/sendemailconfirmation","FORM")},ConfirmEmail:function(a,b){return this.sendXml(String.format('<request>                        <body type="confirmEmail">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/confirmemail","FORM")},ModifyUser:function(a,
b){return this.sendXml(String.format('<request>                        <body type="updateprofile">                            <First_Name><![CDATA[{0}]]\></First_Name>                            <Last_Name><![CDATA[{1}]]\></Last_Name>                        </body>                    </request>',b.getFirstName(),b.getLastName()),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/updateprofile","FORM")},ChangePassword:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="updatepassword">                            <Current_Password><![CDATA[{0}]]\></Current_Password>                            <New_Password><![CDATA[{1}]]\></New_Password>                        </body>                    </request>',
b,c),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/updatepassword","FORM")},ChangeEmail:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="updateemail">                            <Current_Password><![CDATA[{0}]]\></Current_Password>                            <New_Email_Address><![CDATA[{1}]]\></New_Email_Address>                        </body>                    </request>',b,c),a,_a(_a(this,"_i3").getRoot(),
"_iq").getSourceURL()+"/updateemail","FORM")},RequestRecoverPassword:function(a,b){return this.sendXml(String.format('<request>                        <body type="emailAddress">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                         </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/resetpassword","FORM")},RecoverPassword:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="changepasswordonreset">                            <Token><![CDATA[{0}]]\></Token>                            <New_Password><![CDATA[{1}]]\></New_Password>                         </body>                    </request>',
b,c),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/changepasswordonreset","FORM")},CheckMigration:function(a,b,c,d){return this.sendXml(String.format('<request>                        <body type="migrationCheck">                            <P2P_Credentials>                                <User_Name><![CDATA[{0}]]\></User_Name>                                <Password><![CDATA[{1}]]\></Password>                            </P2P_Credentials>                            <Custom_Email>{2}</Custom_Email>                        </body>                    </request>',
b,c,d||""),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/migration/check","FORM")},BindP2PAccountToSSO:function(a,b,c,d,e){return this.sendXml(String.format('<request>                        <body type="migrationBind">                            <P2P_Credentials>                                <User_Name><![CDATA[{0}]]\></User_Name>                                <Password><![CDATA[{1}]]\></Password>                            </P2P_Credentials>                            <SSO_Credentials>                                <Email_Address><![CDATA[{2}]]\></Email_Address>                                <Password><![CDATA[{3}]]\></Password>                            </SSO_Credentials>                        </body>                    </request>',
b,c,d,e),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/migration/bindtosso","FORM")},BindSSOAccountToP2P:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="bindToP2P">                            <User_Name><![CDATA[{0}]]\></User_Name>                            <Password><![CDATA[{1}]]\></Password>                        </body>                    </request>',b,c),a,_a(_a(this,"_i3").getRoot(),
"_iq").getSourceURL()+"/migration/bindtop2p","FORM")},MirgateP2PAccountToSSO:function(a,b,c,d){return this.sendXml(String.format('<request>                        <body type="migrationToNewSSO">                            <P2P_Credentials>                                <User_Name><![CDATA[{0}]]\></User_Name>                                <Password><![CDATA[{1}]]\></Password>                            </P2P_Credentials>                            <SSO_Account>                                <Email_Address><![CDATA[{2}]]\></Email_Address>                                <First_Name><![CDATA[{3}]]\></First_Name>                                <Last_Name><![CDATA[{4}]]\></Last_Name>                                <Password><![CDATA[{5}]]\></Password>                            </SSO_Account>                        </body>                    </request>',
b,c,d.getEmail(),d.getFirstName(),d.getLastName(),d.getPassword()),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/migration/newsso","FORM")},SendMigrationEmailConfirmation:function(a,b,c){return this.sendXml(String.format('<request>                        <body type="migrationSendEmailConfirmation">                            <SSO_Credentials>                                <Email_Address><![CDATA[{0}]]\></Email_Address>                                <Password><![CDATA[{1}]]\></Password>                            </SSO_Credentials>                        </body>                    </request>',
b,c),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/migration/sendemailconfirmation","FORM")},ConfirmMigrationEmail:function(a,b){return this.sendXml(String.format('<request>                        <body type="confirmMigrationEmail">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/migration/confirmemail",
"FORM")},LookupSSOUser:function(a,b){return this.sendXml(String.format('<request>                        <body type="lookupSSOUserRequest">                            <Email_Address><![CDATA[{0}]]\></Email_Address>                        </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/lookupssouser","FORM")},InviteUserToDevice:function(a,b,c){return this.sendXml(String.format('<request>                         <body type="inviteSSOUserToDevice">                             <Device_Id>{0}</Device_Id>                             <Email_Address><![CDATA[{1}]]\></Email_Address>                         </body>                     </request>',
b,c),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/inviteSSOUserToDevice","FORM")},RemoveUserFromDevice:function(a,b,c){return this.sendXml(String.format('<request>                         <body type="deleteSSOUserFromDevice">                             <Device_Id>{0}</Device_Id>                             <Email_Address><![CDATA[{1}]]\></Email_Address>                         </body>                     </request>',b,c),a,_a(_a(this,"_i3").getRoot(),
"_iq").getSourceURL()+"/deleteSSOUserFromDevice","FORM")},NotifyUserAboutPermissionsChanges:function(a,b,c,d,e){return this.sendXml(String.format('<request>                        <body type="notifyUserAboutSharedPermissionsChanges">                            <Device_Id>{0}</Device_Id>                            <Email_Address><![CDATA[{1}]]\></Email_Address>                            <Share>{2}</Share>                            <Access>{3}</Access>                        </body>                    </request>',
b,c,d,e),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/notifyUserAboutSharedPermissionsChanges","FORM")},CheckInvitationToken:function(a,b){return this.sendXml(String.format('<request>                        <body type="checkInvitationToken">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_i2i").getSourcePublicURL()+"/checkInvitationToken",
"FORM")},ConfirmInvitation:function(a,b){return this.sendXml(String.format('<request>                        <body type="confirmInvitation">                            <Token><![CDATA[{0}]]\></Token>                        </body>                    </request>',b),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/confirmInvitation","FORM")},ConfirmEmailByInvitationToken:function(a,b,c,d){return this.sendXml(String.format('<request>                        <body type="confirmemailbyinvitation">                            <SSO_Credentials>                                <Email_Address><![CDATA[{0}]]\></Email_Address>                                <Password><![CDATA[{1}]]\></Password>                            </SSO_Credentials>                            <Token>{2}</Token>                        </body>                    </request>',
b,c,d),a,_a(_a(this,"_i3").getRoot(),"_iq").getSourceURL()+"/confirmemailbyinvitation","FORM")}},_i3:{loadFromXml:function(a,b){var c=a.getAttributeText("resource-type");if(c=="migrationCheck"){c=a.selectSingleNode("status/Code");a=a.selectSingleNode("status/User");if(c&&a){var d=_a(new _1.rc.user(true),"_i3");c=c.getNodeText();if(d.loadFromXml(a)==_5&&c){this.Fire("OnMigrationChecked",[this,b,c,_a(d,"_i2s")]);return _5}}return _4}else if(c==
"Lookup_SSO_User"){if(a=a.selectSingleNode("SSO_Lookup")){a=a.getAttributeText("exists");if(a=="true"||a=="false"){this.Fire("OnLookupSSOUser",[this,b,a=="true"]);return _5}}return _4}else if(c=="checkInvitationToken"){d=a.selectSingleNode("Check_Token/Email_Address");c=a.selectSingleNode("Check_Token/Device_Id");a=a.selectSingleNode("Check_Token/Email_Usage");if(d&&c&&a){d=d.getNodeText();c=c.getNodeText();a=a.getNodeText();if(d&&c&&(a=="true"||a=="false")){this.Fire("OnCheckInvitation",[this,
b,d,a=="true",c]);return _5}}return _4}return _5}}});_._2("_1");_1.IReplicate=_._1(_i6,{IReplicate:{getJobsManager:function(){return _3},getCertificatesManager:function(){return _3},getFSManager:function(){return _3},getSnapshotsManager:function(){return _3},getSysInfoManager:function(){return _3}}});var IReplicate=_1.IReplicate;_._2("_1");
_1.IReplCertificate=_._1(_i6,{IReplCertificate:{getName:function(){return _3},putName:function(){return _3},getKey:function(){return _3},putKey:function(){return _3}}});var IReplCertificate=_1.IReplCertificate;_._2("_1");
_1.IReplCertificatesManager=_._1(_i6,{IReplCertificatesManager:{UpdateOwnCertificate:function(){return _3},getOwnCertificate:function(){return _3},UpdateCertificates:function(){return _3},getCertificates:function(){return _3},AddCertificate:function(){return _3},RemoveCertificate:function(){return _3}}});var IReplCertificatesManager=_1.IReplCertificatesManager;_1.IReplCertificatesManagerEvents=_._1(_ip,{IReplCertificatesManagerEvents:{}});
var IReplCertificatesManagerEvents=_1.IReplCertificatesManagerEvents;_._2("_1");
_1.IReplJob=_._1(_i6,{IReplJob:{getId:function(){return _3},getPeer:function(){return _3},putPeer:function(){return _3},getAccess:function(){return _3},putAccess:function(){return _3},getName:function(){return _3},putName:function(){return _3},getType:function(){return _3},putType:function(){return _3},getIniState:function(){return _3},putIniState:function(){return _3},getDatasetType:function(){return _3},
putDatasetType:function(){return _3},getP2PSrc:function(){return _3},putP2PSrc:function(){return _3},getP2PDst:function(){return _3},putP2PDst:function(){return _3},getP2PNet:function(){return _3},putP2PNet:function(){return _3},getSrcDataset:function(){return _3},putSrcDataset:function(){return _3},getDstDataset:function(){return _3},putDstDataset:function(){return _3},getSrcAddress:function(){return _3},putSrcAddress:function(){return _3},
getDstAddress:function(){return _3},putDstAddress:function(){return _3},getDstFqdn:function(){return _3},putDstFqdn:function(){return _3},getP2PFallback:function(){return _3},putP2PFallback:function(){return _3},getCompress:function(){return _3},putCompress:function(){return _3},getCompressRatio:function(){return _3},putCompressRatio:function(){return _3},getEncrypt:function(){return _3},putEncrypt:function(){return _3},
getEncryptKey:function(){return _3},putEncryptKey:function(){return _3},getDedup:function(){return _3},putDedup:function(){return _3},getSchedule:function(){return _3},putSchedule:function(){return _3},getSeedSnapshot:function(){return _3},putSeedSnapshot:function(){return _3},getEstimate:function(){return _3},putEstimate:function(){return _3},getScope:function(){return _3},putScope:function(){return _3},putReport:function(){return _3},
getReport:function(){return _3},putRecover:function(){return _3},getRecover:function(){return _3},putCompressed:function(){return _3},getCompressed:function(){return _3},putBlockSize:function(){return _3},getBlockSize:function(){return _3}}});var IReplJob=_1.IReplJob;_._2("_1");
_1.IReplJobsManager=_._1(_i6,{IReplJobsManager:{AddJob:function(){},UpdateSourceJobs:function(){return _3},getSourceJobs:function(){return _3},UpdateDestinationJobs:function(){return _3},getDestinationJobs:function(){return _3},RunSourceJob:function(){return _3},CancelSourceJob:function(){return _3},DisableSourceJob:function(){return _3},EnableSourceJob:function(){return _3},UpdateLastReport:function(){return _3},GetLastReport:function(){return _3},
RemoveSourceJob:function(){return _3},RemoveDestinationJob:function(){return _3},UpdateSourceJobStat:function(){return _3},getSourceJobStat:function(){return _3}}});var IReplJobsManager=_1.IReplJobsManager;_1.IReplJobsManagerEvents=_._1(_ip,{IReplJobsManagerEvents:{}});var IReplJobsManagerEvents=_1.IReplJobsManagerEvents;_._2("_1");
_1.IReplFSManager=_._1(_i6,{IReplFSManager:{UpdateLocalFileSystem:function(){return _3},getLocalFileSystem:function(){return _3},UpdateRemoteFileSystem:function(){return _3},getRemoteFileSystem:function(){return _3}}});var IReplFSManager=_1.IReplFSManager;_1.IReplFSManagerEvents=_._1(_ip,{IReplFSManagerEvents:{}});var IReplFSManagerEvents=_1.IReplFSManagerEvents;_._2("_1");
_1.IReplJobStat=_._1(_i6,{IReplJobStat:{getState:function(){return _3},getStartTime:function(){return _3},getStartOffset:function(){return _3},getFinishTime:function(){return _3},getFinishOffset:function(){return _3},getDelta:function(){return _3},getSpeed:function(){return _3},getEtl:function(){return _3},getDataSize:function(){return _3},getDataSent:function(){return _3}}});var IReplJobStat=_1.IReplJobStat;_._2("_1");
_1.IReplJobReport=_._1(_i6,{IReplJobReport:{getReport:function(){return _3}}});var IReplJobReport=_1.IReplJobReport;_._2("_1");_1.IReplSnapshotsManager=_._1(_i6,{IReplSnapshotsManager:{UpdateLocalSnapshots:function(){return _3},getLocalSnapshots:function(){return _3},UpdateRemoteSnapshots:function(){return _3},getRemoteSnapshots:function(){return _3}}});var IReplSnapshotsManager=_1.IReplSnapshotsManager;
_1.IReplSnapshotsManagerEvents=_._1(_ip,{IReplSnapshotsManagerEvents:{}});var IReplSnapshotsManagerEvents=_1.IReplSnapshotsManagerEvents;_._2("_1");_1.IReplSysInfoManager=_._1(_i6,{IReplSysInfoManager:{UpdateLocalSysInfo:function(){return _3},getLocalSysInfo:function(){return _3},UpdateRemoteSysInfo:function(){return _3},getRemoteSysInfo:function(){return _3}}});var IReplSysInfoManager=_1.IReplSysInfoManager;
_1.IReplSysInfoManagerEvents=_._1(_ip,{IReplSysInfoManagerEvents:{}});var IReplSysInfoManagerEvents=_1.IReplSysInfoManagerEvents;_._2("_1.repl");
_1.repl=_._1(_9,_1._1,IReplicate,{constructor:function(){_1.repl.superclass.constructor.apply(this,arguments)},IReplicate:{getJobsManager:function(){return this._mngr_jobs||(this._mngr_jobs=_a(this,"_i3").appendChild(_a(new _1.repl.jobs,"IReplJobsManager")))},getCertificatesManager:function(){return this._mngr_certificates||(this._mngr_certificates=_a(this,"_i3").appendChild(_a(new _1.repl.certificates,"IReplCertificatesManager")))},
getFSManager:function(){return this._mngr_filesys||(this._mngr_filesys=_a(this,"_i3").appendChild(_a(new _1.repl.filesys,"IReplFSManager")))},getSnapshotsManager:function(){return this._mngr_snaps||(this._mngr_snaps=_a(this,"_i3").appendChild(_a(new _1.repl.snaps,"IReplSnapshotsManager")))},getSysInfoManager:function(){return this._mngr_sysinfs||(this._mngr_sysinfs=_a(this,"_i3").appendChild(_a(new _1.repl.sysinfs,"IReplSysInfoManager")))}}});
_._2("_1.repl");
_1.repl.certificate=_._1(_9,_1._1,IReplCertificate,{constructor:function(a){_1.repl.certificate.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("<AccessInfo>                    <name></name>                    <key></key>                </AccessInfo>")).selectNodes("./*")[0])},IReplCertificate:{getName:function(){return _1.gp(this.xproplist,"name")},putName:function(a){return _1.pp(this.xproplist,"name",a)},getKey:function(){return _1.gp(this.xproplist,
"key")},putKey:function(a){return _1.pp(this.xproplist,"key",a)}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xproplist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.repl");
_1.repl.certificates=_._1(_8("IReplCertificatesManagerEvents"),_1._1,IReplCertificatesManager,{constructor:function(){_1.repl.certificates.superclass.constructor.apply(this,arguments)},IReplCertificatesManager:{UpdateOwnCertificate:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="exportAccessInfo" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',_.id())),
a)},getOwnCertificate:function(){return this.xowncert?_a(this.xowncert,"IReplCertificate"):_4},UpdateCertificates:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="listAccessInfo" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id())),a)},getCertificates:function(){return this.xcerts?this.xcerts.getChildren():_4},AddCertificate:function(a,b){if(b=_a(b,"IReplCertificate"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="importAccessInfo" guid="">                                <body type="AccessInfo">                                    <name>{1}</name>                                    <key>{2}</key>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getName(),b.getKey())),a);return _4},RemoveCertificate:function(a,b){if(b=_a(b,"IReplCertificate"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="deleteAccessInfo" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getName())),a);return _4}},_i3:{loadFromXml:function(a){var b=a.selectSingleNode("message");if(b&&b!=_4){var c=b.selectSingleNode("body");if(c&&c!=_4){a=_a(this,"_i3");switch(b.getAttributeText("method")){case "exportAccessInfo":b=c.selectSingleNode("name");c=c.selectSingleNode("key");this.xowncert&&a.removeChild(this.xowncert);this.xowncert=_a(new _1.repl.certificate(false),"_i3");a.appendChild(this.xowncert);a=_a(this.xowncert,"IReplCertificate");
a.putName(b.getNodeText());a.putKey(c.getNodeText());return _5;case "listAccessInfo":b=c.selectNodes("AccessInfo");this.xcerts&&a.removeChild(this.xcerts);this.xcerts=_a(new _1._1,"_i3");a.appendChild(this.xcerts);_.each(b,function(d){var e=_a(new _1.repl.certificate(true),"_i3");e.loadFromXml(d)==_5&&this.xcerts.appendChild(e)},this);return _5;case "importAccessInfo":return _5;case "deleteAccessInfo":return _5}}}return _4}}});_._2("_1.repl");
_1.repl.job=_._1(_9,_1._1,IReplJob,{constructor:function(a){_1.repl.job.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("<Job>\t\t\t\t\t<id></id>\t\t\t\t\t<name></name>\t\t\t\t\t<type></type>\t\t\t\t\t<inistate></inistate>\t\t\t\t\t<datasettype></datasettype>\t\t\t\t\t<p2psrc></p2psrc>\t\t\t\t\t<p2pdst></p2pdst>\t\t\t\t\t<p2pnet></p2pnet>\t\t\t\t\t<srcdataset></srcdataset>\t\t\t\t\t<dstdataset></dstdataset>\t\t\t\t\t<srcaddress></srcaddress>\t\t\t\t\t<dstaddress></dstaddress>\t\t\t\t\t<dstfqdn></dstfqdn>\t\t\t\t\t<p2pfallback></p2pfallback>\t\t\t\t\t<compress></compress>\t\t\t\t\t<compressratio></compressratio>\t\t\t\t\t<encrypt></encrypt>\t\t\t\t\t<encryptkey></encryptkey>\t\t\t\t\t<dedup></dedup>\t\t\t\t\t<schedule></schedule>\t\t\t\t\t<seedsnapshot></seedsnapshot>\t\t\t\t\t<estimate></estimate>\t\t\t\t\t<scope></scope>                    <recover></recover>                    <blocksize></blocksize>                    <dscompress></dscompress>\t\t\t\t</Job>")).selectNodes("./*")[0])},
IReplJob:{getId:function(){return _1.gp(this.xproplist,"id")},getPeer:function(){return this.peer?this.peer:_4},putPeer:function(a){return this.peer=a},getAccess:function(){return this.access?this.access:_4},putAccess:function(a){this.access=a},getName:function(){return _1.gp(this.xproplist,"name")},putName:function(a){return _1.pp(this.xproplist,"name",a)},getType:function(){return _1.gp(this.xproplist,"type")},putType:function(a){return _1.pp(this.xproplist,"type",a)},getIniState:function(){return _1.gp(this.xproplist,
"inistate")},putIniState:function(a){return _1.pp(this.xproplist,"inistate",a)},getDatasetType:function(){return _1.gp(this.xproplist,"datasettype")},putDatasetType:function(a){return _1.pp(this.xproplist,"datasettype",a)},getP2PSrc:function(){return _1.gp(this.xproplist,"p2psrc")},putP2PSrc:function(a){return _1.pp(this.xproplist,"p2psrc",a)},getP2PDst:function(){return _1.gp(this.xproplist,"p2pdst")},putP2PDst:function(a){return _1.pp(this.xproplist,"p2pdst",a)},getP2PNet:function(){return _1.gp(this.xproplist,
"p2pnet")},putP2PNet:function(a){return _1.pp(this.xproplist,"p2pnet",a)},getSrcDataset:function(){return _1.gp(this.xproplist,"srcdataset")},putSrcDataset:function(a){return _1.pp(this.xproplist,"srcdataset",a)},getDstDataset:function(){return _1.gp(this.xproplist,"dstdataset")},putDstDataset:function(a){return _1.pp(this.xproplist,"dstdataset",a)},getSrcAddress:function(){return _1.gp(this.xproplist,"srcaddress")},putSrcAddress:function(a){return _1.pp(this.xproplist,"srcaddress",a)},getDstAddress:function(){return _1.gp(this.xproplist,
"dstaddress")},putDstAddress:function(a){return _1.pp(this.xproplist,"dstaddress",a)},getDstFqdn:function(){return _1.gp(this.xproplist,"dstfqdn")},putDstFqdn:function(a){return _1.pp(this.xproplist,"dstfqdn",a)},getP2PFallback:function(){return _1.gp(this.xproplist,"p2pfallback")},putP2PFallback:function(a){return _1.pp(this.xproplist,"p2pfallback",a)},getCompress:function(){return _1.gp(this.xproplist,"compress")},putCompress:function(a){return _1.pp(this.xproplist,"compress",a)},getCompressRatio:function(){return _1.gp(this.xproplist,
"compressratio")},putCompressRatio:function(a){return _1.pp(this.xproplist,"compressratio",a)},getEncrypt:function(){return _1.gp(this.xproplist,"encrypt")},putEncrypt:function(a){return _1.pp(this.xproplist,"encrypt",a)},getEncryptKey:function(){return _1.gp(this.xproplist,"encryptkey")},putEncryptKey:function(a){return _1.pp(this.xproplist,"encryptkey",a)},getDedup:function(){return _1.gp(this.xproplist,"dedup")},putDedup:function(a){return _1.pp(this.xproplist,"dedup",a)},getSchedule:function(){return _1.gp(this.xproplist,
"schedule")},putSchedule:function(a){return _1.pp(this.xproplist,"schedule",a)},getSeedSnapshot:function(){return _1.gp(this.xproplist,"seedsnapshot")},putSeedSnapshot:function(a){return _1.pp(this.xproplist,"seedsnapshot",a)},getEstimate:function(){return _1.gp(this.xproplist,"estimate")},putEstimate:function(a){return _1.pp(this.xproplist,"estimate",a)},getScope:function(){return _1.gp(this.xproplist,"scope")},putScope:function(a){return _1.pp(this.xproplist,"scope",a)},putReport:function(a){this.report=
a;return _5},getReport:function(){return this.report},putRecover:function(a){return _1.pp(this.xproplist,"recover",a)},getRecover:function(){return _1.gp(this.xproplist,"recover")},putCompressed:function(a){return _1.pp(this.xproplist,"dscompress",a)},getCompressed:function(){return _1.gp(this.xproplist,"dscompress")},putBlockSize:function(a){return _1.pp(this.xproplist,"blocksize",a)},getBlockSize:function(){return _1.gp(this.xproplist,"blocksize")}},_i3:{getXml:function(){return this.x},
loadFromXml:function(a){this.x=a;this.xproplist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.repl");
_1.repl.jobs=_._1(_8("IReplJobsManagerEvents"),_1._1,IReplJobsManager,{constructor:function(){_1.repl.jobs.superclass.constructor.apply(this,arguments);this.xjobstat=[];this.timeout=3E5},IReplJobsManager:{AddJob:function(a,b){if(b=_a(b,"IReplJob"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="createJob" guid="">                                <body type="createJob">                                    <access>{1}</access>                                    <peer>{2}</peer>                                    <job>                                      <name>{3}</name>                                      <type>{4}</type>                                      <inistate>{5}</inistate>                                      <datasettype>{6}</datasettype>                                      <p2psrc>{7}</p2psrc>                                      <p2pdst>{8}</p2pdst>                                      <p2pnet>{9}</p2pnet>                                      <srcdataset>{10}</srcdataset>                                      <dstdataset>{11}</dstdataset>                                      <srcaddress>{12}</srcaddress>                                      <dstaddress>{13}</dstaddress>                                      <dstfqdn>{14}</dstfqdn>                                      <p2pfallback>{15}</p2pfallback>                                      <compress>{16}</compress>                                      <compressratio>{17}</compressratio>                                      <encrypt>{18}</encrypt>                                      <dedup>{19}</dedup>                                      <schedule>{20}</schedule>                                      <seedsnapshot>{21}</seedsnapshot>                                      <estimate>{22}</estimate>                                      <recover>{23}</recover>                                      <blocksize>{24}</blocksize>                                      <dscompress>{25}</dscompress>                                    </job>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',_.id(),
b.getAccess(),b.getPeer(),b.getName(),b.getType(),b.getIniState(),b.getDatasetType(),b.getP2PSrc(),b.getP2PDst(),b.getP2PNet(),b.getSrcDataset(),b.getDstDataset(),b.getSrcAddress(),b.getDstAddress(),b.getDstFqdn(),b.getP2PFallback(),b.getCompress(),b.getCompressRatio(),b.getEncrypt(),b.getDedup(),b.getSchedule(),b.getSeedSnapshot(),b.getEstimate(),b.getRecover(),b.getBlockSize(),b.getCompressed())),a,undefined,undefined,undefined,this.timeout);return _4},UpdateSourceJobs:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getSourceJobs" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id())),a)},getSourceJobs:function(){return this.xsjobs?this.xsjobs.getChildren():_4},UpdateDestinationJobs:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getDestinationJobs" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id())),a,undefined,undefined,undefined,this.timeout)},getDestinationJobs:function(){return this.xdjobs?this.xdjobs.getChildren():_4},RunSourceJob:function(a,b){if(b=_a(b,"IReplJob"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="runSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a);return _4},CancelSourceJob:function(a,b){if(b=_a(b,"IReplJob"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="cancelSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a);return _4},DisableSourceJob:function(a,b){if(b=_a(b,"IReplJob"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="disableSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a);return _4},EnableSourceJob:function(a,b){if(b=_a(b,"IReplJob"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="enableSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a);return _4},RemoveSourceJob:function(a,b){if(b=_a(b,"IReplJob"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="deleteSourceJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a);return _4},RemoveDestinationJob:function(a,b){if(b=_a(b,"IReplJob"))return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="deleteDestinationJob" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a,undefined,undefined,undefined,this.timeout);return _4},UpdateSourceJobStat:function(a,b){if(b=_a(b,"IReplJob")){a=_.isString(a)?new String(a):!a?{}:a;a.__dpv_jobid=b.getId();return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getStat" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a)}return _4},getSourceJobStat:function(a,b){if(b=_a(b,"IReplJob"))return this.xjobstat[b.getId()]?this.xjobstat[b.getId()]:_4;return _4},UpdateLastReport:function(a,b){if(b=_a(b,"IReplJob")){a=_.isString(a)?new String(a):!a?{}:a;a.__dpv_jobid=b.getId();return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getLastReport" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b.getId())),a)}return _4},GetLastReport:function(a){if(a=_a(a,"IReplJob"))return a.getReport();return _4}},_i3:{loadFromXml:function(a,b){var c=a.selectSingleNode("message");if(c&&c!=_4)if((a=c.selectSingleNode("body"))&&a!=_4){var d=_a(this,"_i3");switch(c.getAttributeText("method")){case "getSourceJobs":a=a.selectNodes("Job");this.xsjobs&&d.removeChild(this.xsjobs);this.xsjobs=_a(new _1._1,"_i3");d.appendChild(this.xsjobs);_.each(a,
function(f){var g=_a(new _1.repl.job(true),"_i3");g.loadFromXml(f)==_5&&this.xsjobs.appendChild(g)},this);return _5;case "getDestinationJobs":a=a.selectNodes("Job");this.xdjobs&&d.removeChild(this.xdjobs);this.xdjobs=_a(new _1._1,"_i3");d.appendChild(this.xdjobs);_.each(a,function(f){var g=_a(new _1.repl.job(true),"_i3");g.loadFromXml(f)==_5&&this.xdjobs.appendChild(g)},this);return _5;case "runSourceJob":return _5;case "cancelSourceJob":return _5;
case "disableSourceJob":return _5;case "enableSourceJob":return _5;case "deleteSourceJob":return _5;case "deleteDestinationJob":return _5;case "getStat":if(b.__dpv_jobid){d=_a(new _1.repl.jobstat(true),"_i3");if(d.loadFromXml(new _.Xml.document(a.selectSingleNode("value").getNodeText()))==_5)this.xjobstat[b.__dpv_jobid]=_a(d,"IReplJobStat");delete b.__dpv_jobid}return _5;case "getLastReport":if(b.__dpv_jobid){d=_a(new _1.repl.jobreport(true),"_i3");
if(d.loadFromXml(a.selectSingleNode("value").getNodeText())==_5){a=this.xsjobs.getChildren();for(c=0;c<a.length;c++)if(a[c]&&a[c]!=_4){var e=_a(a[c],"IReplJob");e.getId()==b.__dpv_jobid&&e.putReport(_a(d,"IReplJobReport"))}}delete b.__dpv_jobid}return _5;default:if(a.selectSingleNode("value").getNodeText()=="true")return _5}}return _4}}});_._2("_1.repl");
_1.repl.filesys=_._1(_8("IReplFSManagerEvents"),_1._1,IReplFSManager,{constructor:function(){_1.repl.filesys.superclass.constructor.apply(this,arguments);this.xrfilesys=[]},IReplFSManager:{UpdateLocalFileSystem:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getFsLocal" guid="">                                <body type="void"/>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id())),a)},getLocalFileSystem:function(){return this.xlfilesys?this.xlfilesys:_4},UpdateRemoteFileSystem:function(a,b,c){if(b=_a(b,"IReplCertificate")){a=_.isString(a)?new String(a):!a?{}:a;a.__dpv_peer=c;return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                        <xs:command_name>rlctl</xs:command_name>                        <xs:args>                            <xs:arg>                                <request method="getFsRemote" guid="">                                    <body type="RemoteCall">                                        <access>{1}</access>                                        <peer>{2}</peer>                                        <request method="getFsLocal" guid="">                                            <body type="void"/>                                        </request>                                    </body>                                </request>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getName(),c)),a)}return _4},getRemoteFileSystem:function(a){return this.xrfilesys[a]?this.xrfilesys[a]:_4}},_i3:{loadFromXml:function(a,b){if((a=a.selectSingleNode("message"))&&a!=_4){var c=a.selectSingleNode("body");if(c&&c!=_4){_a(this,"_i3");switch(a.getAttributeText("method")){case "getFsLocal":a=c.selectSingleNode("value").getNodeText();if(b.__dpv_peer){this.xrfilesys[b.__dpv_peer]=a;delete b.__dpv_peer}else this.xlfilesys=a;return _5}}}return _4}}});
_._2("_1.repl");
_1.repl.jobstat=_._1(_9,_1._1,IReplJobStat,{constructor:function(){_1.repl.jobstat.superclass.constructor.apply(this,arguments)},IReplJobStat:{getState:function(){return _1.gp(this.xproplist,"state")},getStartTime:function(){return this.xmrk?this.xmrk.getAttributeText("start_time"):_4},getStartOffset:function(){return this.xmrk?this.xmrk.getAttributeText("start_offset"):_4},getFinishTime:function(){return this.xmrk?this.xmrk.getAttributeText("finish_time"):_4},
getFinishOffset:function(){return this.xmrk?this.xmrk.getAttributeText("finish_offset"):_4},getDelta:function(){return this.xmrk?this.xmrk.getAttributeText("delta"):_4},getSpeed:function(){return this.xprg?this.xprg.getAttributeText("speed"):_4},getEtl:function(){return this.xprg?this.xprg.getAttributeText("etl"):_4},getDataSize:function(){return this.xprg?this.xprg.getAttributeText("size"):_4},getDataSent:function(){return this.xprg?this.xprg.getAttributeText("sent"):_4}},
_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a.selectSingleNode("stat");this.xmrk=this.x.selectSingleNode("mrk");this.xprg=this.x.selectSingleNode("prg");this.xproplist=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.repl");
_1.repl.jobreport=_._1(_9,_1._1,IReplJobReport,{constructor:function(){_1.repl.jobreport.superclass.constructor.apply(this,arguments)},IReplJobReport:{getReport:function(){return this.xproplist&&this.xproplist!=_4&&this.xproplist.length>0?this.xproplist:_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.xproplist=a;return _5}}});_._2("_1.repl");
_1.repl.snaps=_._1(_8("IReplSnapshotsManagerEvents"),_1._1,IReplSnapshotsManager,{constructor:function(){_1.repl.snaps.superclass.constructor.apply(this,arguments);this.xsnaps=[];this.ppsplitter=":|::|:"},IReplSnapshotsManager:{UpdateLocalSnapshots:function(a,b){a=_.isString(a)?new String(a):!a?{}:a;a.__dpv_path=b;return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getSnapshotsLocal" guid="">                                <body type="text">                                    <value>{1}</value>                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b)),a)},getLocalSnapshots:function(a){return this.xsnaps[a]?this.xsnaps[a].getChildren():_4},UpdateRemoteSnapshots:function(a,b,c,d){if(b=_a(b,"IReplCertificate")){a=_.isString(a)?new String(a):!a?{}:a;a.__dpv_peer=c;a.__dpv_path=d;return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                        <xs:command_name>rlctl</xs:command_name>                        <xs:args>                            <xs:arg>                                <request method="getSnapshotsRemote" guid="">                                    <body type="RemoteCall">                                        <access>{1}</access>                                        <peer>{2}</peer>                                        <request method="getSnapshotsLocal" guid="">                                            <body type="text">                                                <value>{3}</value>                                            </body>                                        </request>                                    </body>                                </request>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getName(),c,d)),a)}return _4},getRemoteSnapshots:function(a,b){a=a+this.ppsplitter+b;return this.xsnaps[a]?this.xsnaps[a].getChildren():_4}},_i3:{loadFromXml:function(a,b){if((a=a.selectSingleNode("message"))&&a!=_4){var c=a.selectSingleNode("body");if(c&&c!=_4){_a(this,"_i3");switch(a.getAttributeText("method")){case "getSnapshotsLocal":if(b.__dpv_path){a=(new _.Xml.document(c.selectSingleNode("value").getNodeText())).selectSingleNode("snapshots");
a=a.selectNodes("Snapshot");var d=b.__dpv_peer?b.__dpv_peer+this.ppsplitter+b.__dpv_path:b.__dpv_path;this.xsnaps[d]=_a(new _1._1,"_i3");_.each(a,function(e){var f=_a(new _1.zfssnapshot,"_i3");f.loadFromXml(e)==_5&&this.xsnaps[d].appendChild(f)},this);delete b.__dpv_peer;delete b.__dpv_path}return _5}}}return _4}}});_._2("_1.repl");
_1.repl.sysinfs=_._1(_8("IReplSysInfoManagerEvents"),_1._1,IReplSysInfoManager,{constructor:function(){_1.repl.sysinfs.superclass.constructor.apply(this,arguments);this.xrsysinfs=[]},IReplSysInfoManager:{UpdateLocalSysInfo:function(a){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                    <xs:command_name>rlctl</xs:command_name>                    <xs:args>                        <xs:arg>                            <request method="getInfo" guid="">                                <body type="void">                                </body>                            </request>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id())),a)},getLocalSysInfo:function(){return this.xlsysinf?_a(this.xlsysinf,"_i43"):_4},UpdateRemoteSysInfo:function(a,b,c){if(b=_a(b,"IReplCertificate")){a=_.isString(a)?new String(a):!a?{}:a;a.__dpv_peer=c;return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="rlctl" resource-type="System">                        <xs:command_name>rlctl</xs:command_name>                        <xs:args>                            <xs:arg>                                <request method="getInfoRemote" guid="">                                    <body type="RemoteCall">                                        <access>{1}</access>                                        <peer>{2}</peer>                                        <request method="getInfo" guid="">                                            <body type="void">                                            </body>                                        </request>                                    </body>                                </request>                            </xs:arg>                        </xs:args>                    </xs:command>',
_.id(),b.getName(),c)),a)}return _4},getRemoteSysInfo:function(a){return this.xrsysinfs[a]?_a(this.xrsysinfs[a],"_i43"):_4}},_i3:{loadFromXml:function(a,b){var c=a.selectSingleNode("message");if(c&&c!=_4)if((a=c.selectSingleNode("body"))&&a!=_4){_a(this,"_i3");switch(c.getAttributeText("method")){case "getInfo":c=_a(new _1.sysinfo,"_i3");a=new _.Xml.document(a.selectSingleNode("value").getNodeText());a=a.selectSingleNode("SystemInfo");
if(c.loadFromXml(a)==_5)if(b.__dpv_peer){this.xrsysinfs[b.__dpv_peer]=c;delete b.__dpv_peer}else this.xlsysinf=c;return _5}}return _4}}});_._2("_1");_1.IRepliSync=_._1(_i6,{IRepliSync:{getKeysManager:function(){return _3},getJobsManager:function(){return _3},getRemoteBrowseManager:function(){return _3}}});var IRepliSync=_1.IRepliSync;_._2("_1");
_1.IRepliSyncKey=_._1(_i6,{IRepliSyncKey:{getId:function(){return _3},getTitle:function(){return _3},putTitle:function(){return _3},getKey:function(){return _3},getType:function(){return _3},getComment:function(){return _3},getFingerPrint:function(){return _3}}});var IRepliSyncKey=_1.IRepliSyncKey;_._2("_1");
_1.IRepliSyncKeysManager=_._1(_i6,{IRepliSyncKeysManager:{UpdateKeys:function(){return _3},getKeys:function(){return _3},AddKey:function(){return _3},CommitKey:function(){return _3},RemoveKey:function(){return _3}}});var IRepliSyncKeysManager=_1.IRepliSyncKeysManager;_1.IRepliSyncKeysManagerEvents=_._1(_ip,{IRepliSyncKeysManagerEvents:{}});var IRepliSyncKeysManagerEvents=_1.IRepliSyncKeysManagerEvents;_._2("_1");
_1.IRepliSyncJob=_._1(_i6,{IRepliSyncJob:{getId:function(){return _3},getName:function(){return _3},putName:function(){return _3},getEnabled:function(){return _3},putEnabled:function(){return _3},getSourceHost:function(){return _3},putSourceHost:function(){return _3},getSourcePort:function(){return _3},putSourcePort:function(){return _3},getSourcePath:function(){return _3},putSourcePath:function(){return _3},
getDestHost:function(){return _3},putDestHost:function(){return _3},getDestPort:function(){return _3},putDestPort:function(){return _3},getDestPath:function(){return _3},putDestPath:function(){return _3},getInterval:function(){return _3},putInterval:function(){return _3},getBwLimit:function(){return _3},putBwLimit:function(){return _3},getEncrypt:function(){return _3},putEncrypt:function(){return _3},getCompress:function(){return _3},
putCompress:function(){return _3},getSchedule:function(){return _3},putSchedule:function(){return _3},getLastRunningTimestamp:function(){return _3},getLastRunningTime:function(){return _3},getLastResult:function(){return _3}}});var IRepliSyncJob=_1.IRepliSyncJob;_._2("_1");
_1.IRepliSyncJobsManager=_._1(_i6,{IRepliSyncJobsManager:{UpdateJobs:function(){return _3},getJobs:function(){return _3},createJob:function(){return _3},AddJob:function(){return _3},CommitJob:function(){return _3},RemoveJob:function(){return _3},StartJob:function(){return _3},CancelJob:function(){return _3},UpdateStatuses:function(){return _3},getStatusByJobName:function(){return _3},UpdateLogs:function(){return _3},
ExportSeeding:function(){return _3},ImportSeeding:function(){return _3},UpdateExportSeedingStatus:function(){return _3}}});var IRepliSyncJobsManager=_1.IRepliSyncJobsManager;_1.IRepliSyncJobsManagerEvents=_._1(_ip,{IRepliSyncJobsManagerEvents:{OnLogsUpdate:function(){return _3},OnExportSeedingStatusUpdate:function(){return _3}}});var IRepliSyncJobsManagerEvents=_1.IRepliSyncJobsManagerEvents;_._2("_1");
_1.IRepliSyncJobStatus=_._1(_i6,{IRepliSyncJobStatus:{getJobName:function(){return _3},getStatus:function(){return _3},getSpeed:function(){return _3},getRuntime:function(){return _3},getTransferred:function(){return _3}}});var IRepliSyncJobStatus=_1.IRepliSyncJobStatus;_._2("_1");
_1.IRepliSyncJobLog=_._1(_i6,{IRepliSyncJobLog:{getJobName:function(){return _3},getSnapshot:function(){return _3},getName:function(){return _3},getRole:function(){return _3},getStartTime:function(){return _3},getYear:function(){return _3},getMonth:function(){return _3},getDay:function(){return _3},getHour:function(){return _3},getMinute:function(){return _3},getSecond:function(){return _3},getDuration:function(){return _3},
getResult:function(){return _3},getCode:function(){return _3},getLog:function(){return _3}}});var IRepliSyncJobLog=_1.IRepliSyncJobLog;_._2("_1");_1.IRepliSyncRemoteBrowseManager=_._1(_i6,{IRepliSyncRemoteBrowseManager:{UpdateSources:function(){return _3},UpdateDestinations:function(){return _3},CreateShare:function(){return _3}}});var IRepliSyncRemoteBrowseManager=_1.IRepliSyncRemoteBrowseManager;
_1.IRepliSyncRemoteBrowseManagerEvents=_._1(_ip,{IRepliSyncRemoteBrowseManagerEvents:{OnSourcesUpdate:function(){return _3},OnDestinationsUpdate:function(){return _3}}});var IRepliSyncRemoteBrowseManagerEvents=_1.IRepliSyncRemoteBrowseManagerEvents;_._2("_1.replisync");
_1.replisync=_._1(_9,_1._1,IRepliSync,{constructor:function(){_1.replisync.superclass.constructor.apply(this,arguments)},IRepliSync:{getKeysManager:function(){return this._mngr_keys||(this._mngr_keys=_a(this,"_i3").appendChild(_a(new _1.replisync.keys,"IRepliSyncKeysManager")))},getJobsManager:function(){return this._mngr_jobs||(this._mngr_jobs=_a(this,"_i3").appendChild(_a(new _1.replisync.jobs,"IRepliSyncJobsManager")))},getRemoteBrowseManager:function(){return this._mngr_rb||
(this._mngr_rb=_a(this,"_i3").appendChild(_a(new _1.replisync.remotebrowse,"IRepliSyncRemoteBrowseManager")))}}});_._2("_1.replisync");
_1.replisync.key=_._1(_9,_1._1,IRepliSyncKey,{constructor:function(){_1.replisync.key.superclass.constructor.apply(this,arguments)},IRepliSyncKey:{getId:function(){return _1.gp(this.xprop,"Id")},getTitle:function(){return _1.gp(this.xprop,"Title")},putTitle:function(a){return _1.pp(this.xprop,"Title",a)},getKey:function(){return _1.gp(this.xprop,"Key")},getType:function(){return _1.gp(this.xprop,"Type")},getComment:function(){return _3},getFingerPrint:function(){return _1.gp(this.xprop,
"Fingerprint")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.replisync");
_1.replisync.keys=_._1(_8("IRepliSyncKeysManagerEvents"),_1._1,IRepliSyncKeysManager,{constructor:function(){_1.replisync.keys.superclass.constructor.apply(this,arguments)},IRepliSyncKeysManager:{UpdateKeys:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="ReplisyncKeys" />',_.id())),a)},getKeys:function(){return this.xkeys?this.xkeys:_4},AddKey:function(a,b,c){return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="ReplisyncKeys">                    <ReplisyncKey>                        <Title>{1}</Title>                        <FileName>{2}</FileName>                    </ReplisyncKey>                </xs:add>',
_.id(),b,c)),a)},CommitKey:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="ReplisyncKeys">                            {1}                        </xs:set>',_.id(),_a(b,"_i3").getXml().toString())),a)},RemoveKey:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ReplisyncKeys" />',_.id(),b)),a)}},_i3:{loadFromXml:function(a){if(a.getAttributeText("resource-type")==
"ReplisyncKeys"){this.xkeys=[];a=a.selectNodes("ReplisyncKey_Collection/ReplisyncKey");_.each(a,function(b){var c=_a(new _1.replisync.key,"_i3");c.loadFromXml(b)==_5&&this.xkeys.push(_a(c,"IRepliSyncKey"))},this);return _5}return _4}}});_._2("_1.replisync");
_1.replisync.job=_._1(_9,_1._1,IRepliSyncJob,{constructor:function(a){_1.replisync.job.superclass.constructor.apply(this,arguments);a||_a(this,"_i3").loadFromXml((new _.Xml.document("                <ReplisyncJob>                    <Job_Id />                    <Job_Name />                    <Enabled>1</Enabled>                    <Source_Host />                    <Source_Port />                    <Source_Path />                    <Dest_Host />                    <Dest_Port />                    <Dest_Path />                    <Interval />                    <Bw_Limit>500</Bw_Limit>                    <Encrypt>0</Encrypt>                    <Compress>1</Compress>                    <Schedule />                    <Status_TimeStamp />                    <Status_Date />                    <Last_Result />                    <Email_Alert />                </ReplisyncJob>")).selectNodes("./*")[0])},IRepliSyncJob:{getId:function(){return _1.gp(this.xprop,
"Job_Id")},getName:function(){return _1.gp(this.xprop,"Job_Name")},putName:function(a){return _1.pp(this.xprop,"Job_Name",a)},getEnabled:function(){return _1.gp(this.xprop,"Enabled")},putEnabled:function(a){return _1.pp(this.xprop,"Enabled",a)},getSourceHost:function(){return _1.gp(this.xprop,"Source_Host")},putSourceHost:function(a){return _1.pp(this.xprop,"Source_Host",a)},getSourcePort:function(){return _1.gp(this.xprop,"Source_Port")},putSourcePort:function(a){return _1.pp(this.xprop,
"Source_Port",a)},getSourcePath:function(){return _1.gp(this.xprop,"Source_Path")},putSourcePath:function(a){return _1.pp(this.xprop,"Source_Path",a)},getDestHost:function(){return _1.gp(this.xprop,"Dest_Host")},putDestHost:function(a){return _1.pp(this.xprop,"Dest_Host",a)},getDestPort:function(){return _1.gp(this.xprop,"Dest_Port")},putDestPort:function(a){return _1.pp(this.xprop,"Dest_Port",a)},getDestPath:function(){return _1.gp(this.xprop,"Dest_Path")},putDestPath:function(a){return _1.pp(this.xprop,
"Dest_Path",a)},getInterval:function(){return _1.gp(this.xprop,"Interval")},putInterval:function(a){return _1.pp(this.xprop,"Interval",a)},getCompletionSend:function(){return _1.gp(this.xprop,"Email_Alert")},putCompletionSend:function(a){return _1.pp(this.xprop,"Email_Alert",a)},getBwLimit:function(){return _1.gp(this.xprop,"Bw_Limit")},putBwLimit:function(a){return _1.pp(this.xprop,"Bw_Limit",a)},getEncrypt:function(){return _1.gp(this.xprop,"Encrypt")},putEncrypt:function(a){return _1.pp(this.xprop,
"Encrypt",a)},getCompress:function(){return _1.gp(this.xprop,"Compress")},putCompress:function(a){return _1.pp(this.xprop,"Compress",a)},getSchedule:function(){return _1.gp(this.xprop,"Schedule")},putSchedule:function(a){return _1.pp(this.xprop,"Schedule",a)},getWolAddress:function(){return _1.gp(this.xprop,"Wol_Address")},putWolAddress:function(a){return _1.pp(this.xprop,"Wol_Address",a)},getTimeToWait:function(){return _1.gp(this.xprop,"Time_To_Wait")},putTimeToWait:function(a){return _1.pp(this.xprop,
"Time_To_Wait",a)},getLastRunningTimestamp:function(){return _1.gp(this.xprop,"Status_TimeStamp")},getLastRunningTime:function(){return _1.gp(this.xprop,"Status_Date")},getLastResult:function(){return _1.gp(this.xprop,"Last_Result")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.replisync");
_1.replisync.jobs=_._1(_8("IRepliSyncJobsManagerEvents"),_1._1,IRepliSyncJobsManager,{constructor:function(){_1.replisync.jobs.superclass.constructor.apply(this,arguments)},IRepliSyncJobsManager:{UpdateJobs:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="ReplisyncJobs" resource-type="ReplisyncJob_Collection" />',_.id())),a)},getJobs:function(){return this.xjobs?this.xjobs:_4},createJob:function(){return _a(new _1.replisync.job,
"IRepliSyncJob")},AddJob:function(a,b){return this.sendXml(_1._2(String.format('<xs:add id="{0}" resource-type="ReplisyncJob" c-resource-id="ReplisyncJobs" c-resource-type="ReplisyncJob_Collection">                    {1}                </xs:add>',_.id(),_a(b,"_i3").getXml().toString())),a)},CommitJob:function(a,b){return this.sendXml(_1._2(String.format('<xs:set id="{0}" resource-type="ReplisyncJob" c-resource-id="ReplisyncJobs" c-resource-type="ReplisyncJob_Collection">                            {1}                        </xs:set>',
_.id(),_a(b,"_i3").getXml().toString())),a)},RemoveJob:function(a,b){return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ReplisyncJob" c-resource-id="ReplisyncJobs" c-resource-type="ReplisyncJob_Collection" />',_.id(),b)),a)},StartJob:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="ReplisyncJob">\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0                      <xs:command_name>Start</xs:command_name>\u00a0\u00a0\u00a0\u00a0                    </xs:command>',
_.id(),b)),a)},CancelJob:function(a,b){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-id="{1}" resource-type="ReplisyncJob">                          <xs:command_name>Cancel</xs:command_name>                          <xs:args/>                        </xs:command>',_.id(),b)),a)},UpdateStatuses:function(a){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-type="ReplisyncStatus_Collection" />',_.id())),a)},getStatusByJobName:function(a){return this.xstatuses?
this.xstatuses[a]:_4},UpdateLogs:function(a,b){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_jobId=b;return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="ReplisyncLog_Collection" />',_.id(),b)),a)},ExportSeeding:function(a,b,c,d){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="export" resource-id="{1}" resource-type="ReplisyncSeeding">                    <Seeding>                        <Path>{2}</Path>                        <Compress>{3}</Compress>                    </Seeding>                </xs:custom>',
_.id(),b,c,d)),a)},ImportSeeding:function(a,b,c){return this.sendXml(_1._2(String.format('<xs:custom id="{0}" name="import" resource-id="{1}" resource-type="ReplisyncSeeding">                    <Seeding>                        <Path>{2}</Path>                    </Seeding>                </xs:custom>',_.id(),b,c)),a)},UpdateExportSeedingStatus:function(a,b){return this.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="{1}" resource-type="BgProcess"/>',_.id(),b)),
a)},ClearHistory:function(a,b){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_jobId=b;return this.sendXml(_1._2(String.format('<xs:delete id="{0}" resource-id="{1}" resource-type="ReplisyncLog_Collection"/>',_.id(),b)),a)}},_i3:{loadFromXml:function(a,b){var c=a.getAttributeText("resource-type");if(c=="ReplisyncJob_Collection"){this.xjobs=[];b=a.selectNodes("ReplisyncJob_Collection/ReplisyncJob");_.each(b,function(e){var f=_a(new _1.replisync.job(true),"_i3");f.loadFromXml(e)==
_5&&this.xjobs.push(_a(f,"IRepliSyncJob"))},this);return _5}else if(c=="ReplisyncStatus_Collection"){this.xstatuses={};b=a.selectNodes("ReplisyncStatus_Collection/ReplisyncStatus");_.each(b,function(e){var f=_a(new _1.replisync.jobstatus,"_i3");if(f.loadFromXml(e)==_5){f=_a(f,"IRepliSyncJobStatus");this.xstatuses[f.getJobName()]=f}},this);return _5}else if(c=="ReplisyncLog_Collection"){c=b._dpv_jobId;delete b._dpv_jobId;if(c){var d=[];a=a.selectNodes("ReplisyncJobLog_Collection/Log");
_.each(a,function(e){var f=_a(new _1.replisync.joblog,"_i3");f.loadFromXml(e)==_5&&d.push(_a(f,"IRepliSyncJobLog"))},this);this.Fire("OnLogsUpdate",[b,d,c])}return _5}else if(c=="BgProcess"){(c=a.selectSingleNode("BgProcessStatus"))&&this.Fire("OnExportSeedingStatusUpdate",[b,c.getAttributeText("status"),a.getAttributeText("resource-id")]);return _5}return _4}}});_._2("_1.replisync");
_1.replisync.jobstatus=_._1(_9,_1._1,IRepliSyncJobStatus,{constructor:function(){_1.replisync.jobstatus.superclass.constructor.apply(this,arguments)},IRepliSyncJobStatus:{getJobName:function(){return _1.gp(this.xprop,"JobName")},getStatus:function(){return _1.gp(this.xprop,"Status")},getSpeed:function(){return _1.gp(this.xprop,"Speed")},getRuntime:function(){return _1.gp(this.xprop,"Runtime")},getTransferred:function(){return _1.gp(this.xprop,"Transferred")},getWakingRemainingTime:function(){return _1.gp(this.xprop,
"Waking_Remaining_Time")}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;this.xprop=_a(new _1.xprop(this.x),"_i5");return _5}}});_._2("_1.replisync");
_1.replisync.joblog=_._1(_9,_1._1,IRepliSyncJobLog,{constructor:function(){_1.replisync.joblog.superclass.constructor.apply(this,arguments)},IRepliSyncJobLog:{getJobName:function(){return this.x?this.x.getAttributeText("job_name"):_4},getSnapshot:function(){return this.x?this.x.getAttributeText("snapshot"):_4},getName:function(){return this.x?this.x.getAttributeText("name"):_4},getRole:function(){return this.x?this.x.getAttributeText("role"):_4},getStartTime:function(){return this.x?
this.x.getAttributeText("start_time"):_4},getYear:function(){return this.x?this.x.getAttributeText("year"):_4},getMonth:function(){return this.x?this.x.getAttributeText("month"):_4},getDay:function(){return this.x?this.x.getAttributeText("day"):_4},getHour:function(){return this.x?this.x.getAttributeText("hr"):_4},getMinute:function(){return this.x?this.x.getAttributeText("min"):_4},getSecond:function(){return this.x?this.x.getAttributeText("sec"):_4},getDuration:function(){return this.x?
this.x.getAttributeText("duration"):_4},getResult:function(){return this.x?this.x.getAttributeText("result"):_4},getCode:function(){return this.x?this.x.getAttributeText("code"):_4},getLog:function(){return this.x?this.x.getAttributeText("log"):_4}},_i3:{getXml:function(){return this.x},loadFromXml:function(a){this.x=a;return _5}}});_._2("_1.replisync");
_1.replisync.remotebrowse=_._1(_8("IRepliSyncRemoteBrowseManagerEvents"),_1._1,IRepliSyncRemoteBrowseManager,{constructor:function(){_1.replisync.remotebrowse.superclass.constructor.apply(this,arguments)},IRepliSyncRemoteBrowseManager:{UpdateSources:function(a,b,c){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_address=b;return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>GetRemoteSources</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host>{1}</Host>                            <Port>{2}</Port>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c)),a)},UpdateDestinations:function(a,b,c){a=_.isString(a)?new String(a):!a?{}:a;a._dpv_address=b;return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>GetRemoteDestinations</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host>{1}</Host>                            <Port>{2}</Port>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c)),a)},CreateShare:function(a,b,c,d,e){return this.sendXml(_1._2(String.format('<xs:command id="{0}" resource-type="ReplisyncJob">                    <xs:command_name>CreateRemoteReadyDRShare</xs:command_name>                    <xs:args>                        <xs:arg>                            <Host>{1}</Host>                            <ShareName>{2}/{3}</ShareName>                            <Port>{4}</Port>                        </xs:arg>                    </xs:args>                </xs:command>',
_.id(),b,c,d,e)),a)}},_i3:{loadFromXml:function(a,b){var c=a.selectSingleNode("GetRemoteSources");a=a.selectSingleNode("GetRemoteDestinations");var d=b._dpv_address,e,f,g,h;delete b._dpv_address;if(d){if(c){e=c.selectNodes("Share_Collection/Share");g=c.selectNodes("Volume_Collection/Volume")}else if(a){e=a.selectNodes("Share_Collection/Share");g=a.selectNodes("Volume_Collection/Volume")}if(e){f=[];_.each(e,function(k){var j=_a(new _1.simpleshare,"_i3");j.loadFromXml(k)==_5&&
f.push(_a(j,"ISimpleShare"))},this)}if(g){h=[];_.each(g,function(k){var j=_a(new _1.zfsVol,"_i3");j.loadFromXml(k)==_5&&h.push(_a(j,"_i4o"))},this)}if(c){this.Fire("OnSourcesUpdate",[b,d,f,h]);return _5}else if(a){this.Fire("OnDestinationsUpdate",[b,d,f,h]);return _5}}return _4}}});
if(typeof Ext=="undefined")throw"Ext library is not found. Please include Extjs library before uilib";if(typeof _=="undefined")throw"_ library is not found. Please include Extjs library before uilib";_TR=typeof _TR!="undefined"?_TR:function(a){return a};_._2("Ext.UI","_._3","_._3.UI");_._3.UI.Window="UI.Window";_._3.UI.SyncResizeEventer="UI.SyncResizeEventer";Ext.UI.ISyncWindowResizeEvent=_._1(_i6,{ISyncWindowResizeEvent:{OnResize:function(){return _3}}});
var ISyncWindowResizeEvent=Ext.UI.ISyncWindowResizeEvent;
Ext.UI.SyncResizeEventer=_._1(_._3.UI.SyncResizeEventer,_8("ISyncWindowResizeEvent"),_i4,{constructor:function(){Ext.UI.SyncResizeEventer.superclass.constructor.call(this,arguments);Ext.EventManager.addListener(window,"resize",function(){this.spSink=this.spSink?this.spSink:_a(_7(_._3.UI.SyncResizeEventer),"_i1").__s;this.spSink.Fire("OnResize",arguments)},this);Ext.EventManager.addListener(window,"orientationchange",function(){this.spSink=
this.spSink?this.spSink:_a(_7(_._3.UI.SyncResizeEventer),"_i1").__s;this.spSink.Fire("OnResize",arguments)},this)}});Ext.Element.prototype.getAttribute=Ext.isIE&&!_.isIE9?Ext.Element.prototype.getAttribute:function(a,b){var c=this.dom;return c.getAttributeNS(b,a)||c.getAttribute(b+":"+a)||c.getAttribute(a)||c[a]};
function createContextualFragment(a){var b=document.createElement("div"),c=document.createDocumentFragment(),d=0;b.innerHTML=a;b=b.childNodes;for(a=b.length;d<a;d++)c.appendChild(b[d].cloneNode(true));return c}
ie9Patch_createContextualFragment=function(){if(!Ext.isDefined(Ext.isTextNode))Ext.isTextNode=function(a){return a?a.nodeName==="#text":false};if(Ext.isDefined(Ext.DomHelper.insertHtml))Ext.DomHelper.insertHtml=function(a,b,c){function d(m,n,x,A){g.innerHTML=[n,x,A].join("");x=-1;for(n=g;++x<m;)n=n.firstChild;if(n.nextSibling){for(x=document.createDocumentFragment();n;){m=n.nextSibling;x.appendChild(n);n=m}n=x}return n}function e(m,n,x,A){var B;g=g||document.createElement("div");if(!(m=="td"&&(n==
l||n==w)||!h.test(m)&&(n==t||n==u))){B=n==t?x:n==u?x.nextSibling:n==l?x.firstChild:null;if(n==t||n==u)x=x.parentNode;m=m=="td"||m=="tr"&&(n==w||n==l)?d(4,z,A,f):m=="tbody"&&(n==w||n==l)||m=="tr"&&(n==t||n==u)?d(3,k,A,s):d(2,y,A,v);x.insertBefore(m,B);return m}}var g=null,j=/^table|tbody|tr|td$/i,h=/td|tr|tbody/i,q=/end/i,l="afterbegin",u="afterend",t="beforebegin",w="beforeend",y="<table>",v="</table>",k=y+"<tbody>",s="</tbody>"+v,z=k+"<tr>",f="</tr>"+s,i={},p;a=a.toLowerCase();i[t]=["BeforeBegin",
"previousSibling"];i[u]=["AfterEnd","nextSibling"];if(b.insertAdjacentHTML){if(j.test(b.tagName)&&(p=e(b.tagName.toLowerCase(),a,b,c)))return p;i[l]=["AfterBegin","firstChild"];i[w]=["BeforeEnd","lastChild"];if(i=i[a]){b.insertAdjacentHTML(i[0],c);return b[i[1]]}}else{if(Ext.isTextNode(b)){a=a==="afterbegin"?"beforebegin":a;a=a==="beforeend"?"afterend":a}j=Ext.supports.CreateContextualFragment?b.ownerDocument.createRange():undefined;q="setStart"+(q.test(a)?"After":"Before");if(i[a]){if(j){j[q](b);
c=j.createContextualFragment(c)}else c=createContextualFragment(c);b.parentNode.insertBefore(c,a==t?b:b.nextSibling);return b[(a==t?"previous":"next")+"Sibling"]}else{i=(a==l?"first":"last")+"Child";if(b.firstChild){if(j){j[q](b[i]);c=j.createContextualFragment(c)}else c=createContextualFragment(c);a==l?b.insertBefore(c,b.firstChild):b.appendChild(c)}else b.innerHTML=c;return b[i]}}throw'Illegal insertion point -> "'+a+'"';}}();Ext.UI.isTouchCapable=_.isAndroid||_.isiOS;
Ext.UI.isTouchCapable&&Ext.onReady(function(){Ext.getBody().addClass("x-ui-touchcapable")});var OLD_ADD_LISTENER=Ext.EventManager.addListener;
Ext.EventManager.addListener=function(a,b,c,d,e){if(Ext.UI.isTouchCapable){var g=function(h,q,l,u){var t=document.createEvent("MouseEvent");t.initMouseEvent(h,true,true,window,0,0,0,l,u);Ext.getDom(q||a).dispatchEvent(t)};switch(b){case "mousedown":OLD_ADD_LISTENER(a,"mousedown",c,d,e);OLD_ADD_LISTENER(a,"touchstart",function(h){var q=0,l=0,u=undefined;if(h.browserEvent.touches)if(h=h.browserEvent.touches.item(0)){q=h.clientX;l=h.clientY;u=h.target}g("mousedown",u,q,l)});break;case "mousemove":OLD_ADD_LISTENER(a,
"mousemove",c,d,e);OLD_ADD_LISTENER(a,"touchmove",function(h){var q=0,l=0,u=undefined;if(h.browserEvent.touches)if(h=h.browserEvent.touches.item(0)){q=h.clientX;l=h.clientY;u=h.target}g("mousemove",u,q,l)});break;case "mouseup":OLD_ADD_LISTENER(a,"mouseup",c,d,e);OLD_ADD_LISTENER(a,"touchend",function(h){var q=0,l=0,u=undefined;if(h.browserEvent.touches)if(h=h.browserEvent.touches.item(0)){q=h.clientX;l=h.clientY;u=h.target}g("mouseup",u,q,l)});break;case "click":OLD_ADD_LISTENER(a,"click",function(){});
OLD_ADD_LISTENER(a,"touchstart",function(){Ext.EventManager.isTouchMove=false;Ext.EventManager.isContextMenu=false});OLD_ADD_LISTENER(a,"touchmove",function(){(function(){Ext.EventManager.isTouchMove=true}).defer(500,this)});OLD_ADD_LISTENER(a,"touchend",function(h,q,l){if(!Ext.EventManager.isTouchMove&&!Ext.EventManager.isContextMenu){h.button=0;c.apply(this,[h,q,l])}},d,e);break;case "contextmenu":var j;OLD_ADD_LISTENER(a,"contextmenu",function(){return false},d,e);OLD_ADD_LISTENER(a,"touchstart",
function(h,q,l){h.preventDefault();j=setTimeout(function(){Ext.EventManager.isContextMenu=true;c.apply(d,[h,q,l])},500)},d,e);OLD_ADD_LISTENER(a,"touchmove",function(){clearTimeout(j)});OLD_ADD_LISTENER(a,"touchend",function(){clearTimeout(j)});break;default:OLD_ADD_LISTENER(a,b,c,d,e)}}else OLD_ADD_LISTENER(a,b,c,d,e)};Ext.EventManager.on=Ext.EventManager.addListener;_._3.UI.iOSShakeEventer="UI.iOSShakeEventer";Ext.UI.IiOSShakeEvent=_._1(_i6,{IiOSShakeEvent:{OnShake:function(){return _3}}});
var IiOSShakeEvent=Ext.UI.IiOSShakeEvent;
Ext.UI.iOSShakeEventer=_._1(_._3.UI.iOSShakeEventer,_8("IiOSShakeEvent"),_i4,{constructor:function(){Ext.UI.iOSShakeEventer.superclass.constructor.call(this,arguments);var a={sensibility:12,timeout:0,callback:null},b={x:null,y:null,z:null},c=new Date;Ext.EventManager.addListener(window,"devicemotion",function(d){var e=d.browserEvent.accelerationIncludingGravity;if(b.x!==null||b.y!==null||b.z!==null){var g=Math.abs(b.x-e.x),j=Math.abs(b.y-e.y),h=Math.abs(b.z-
e.z);if(g>a.sensibility&&j>a.sensibility||g>a.sensibility&&h>a.sensibility||j>a.sensibility&&h>a.sensibility)if((new Date).getTime()-c.getTime()>3E3){c=new Date;b={x:null,y:null,z:null};this.spSink=this.spSink?this.spSink:_a(_7(_._3.UI.iOSShakeEventer),"_i1").__s;this.spSink.Fire("OnShake",arguments)}}b.x=e.x;b.y=e.y;b.z=e.z},this)}});
Ext.UI.isTouchCapable&&function(){var a=[0,0],b=function(c){if(c=c.browserEvent.touches.item(0))a=[c.clientX,c.clientY];return function(){return a}};Ext.Resizable.Handle=Ext.extend(Ext.Resizable.Handle,{constructor:function(){Ext.Resizable.Handle.superclass.constructor.apply(this,arguments);this.el.un("mousedown",this.onMouseDown,this);this.el.on("touchstart",function(d){d.getXY=b(d);this.rz.onMouseDown(this,d);d.stopEvent();Ext.getBody().on("touchend",c,this)},this);this.el.on("touchmove",function(d){d.getXY=
b(d);this.rz.onMouseMove(d);d.stopEvent()},this);var c=function(d){d.getXY=b(d);this.rz.onMouseUp(d);d.stopEvent();Ext.getBody().un("touchend",c,this)};this.el.on("touchend",c,this)}})}();Ext.UI.isCSSAnimationSupported=function(){var a=false,b="Webkit Moz O ms Khtml".split(" "),c="";c=Ext.getBody().dom;if(c.style.animationName!==undefined)a=true;if(a===false)for(var d=0;d<b.length;d++)if(c.style[b[d]+"AnimationName"]!==undefined){c=b[d];c.toLowerCase();a=true;break}return a}();Ext.namespace("Ext.UI");
Ext.UI.FocusManager=Ext.extend(Ext.util.Observable,{handlers:{},procEvents:{},focusEl:undefined,constructor:function(){Ext.UI.FocusManager.superclass.constructor.apply(this,arguments)},onDocEvent:function(a){var b=this.focusEl;b&&b.id&&this.handlers[b.id]&&this.handlers[b.id].fireEvent(a.type,a)},reg:function(a,b,c){if(!a)return false;if(!a.id)a.id=Ext.id();if(Ext.isFunction(b))b={keypress:b};this.handlers[a.id]||(this.handlers[a.id]=new Ext.util.Observable);var d=this.handlers[a.id];for(var e in b){if(!this.procEvents[e]){this.procEvents[e]=
e;Ext.EventManager.on(Ext.getBody(),e,this.onDocEvent,this)}d.on(e,b[e],c)}a.on("mouseup",function(g){if(this.focusEl){var j=a.child("#"+this.focusEl.id);g=this.focusEl.child("#"+Ext.get(g.target).id)||this.focusEl.dom==g.target;if(!j||!g)this.setActive(a)}else this.setActive(a)},this)},setActive:function(a){if(a&&a.id&&(!this.focusEl||this.focusEl!=a)){this.focusEl&&this.handlers[this.focusEl.id]&&this.handlers[this.focusEl.id].fireEvent("deactivate");var b=this.focusEl;this.focusEl=a;this.handlers[a.id]&&
this.handlers[a.id].fireEvent("activate",this.focusEl,b)}},pushActive:function(a){this.oldFocusEl=this.focusEl;this.setActive(a)},popActive:function(){if(this.oldFocusEl){this.setActive(this.oldFocusEl);this.oldFocusEl=undefined}}});FocusManager=Ext.UI.FocusManager=new Ext.UI.FocusManager;
Ext.ux.Spinner=Ext.extend(Ext.util.Observable,{incrementValue:1,alternateIncrementValue:5,triggerClass:"x-form-spinner-trigger",splitterClass:"x-form-spinner-splitter",alternateKey:Ext.EventObject.shiftKey,defaultValue:0,accelerate:false,constructor:function(a){Ext.ux.Spinner.superclass.constructor.call(this,a);Ext.apply(this,a);this.mimicing=false},init:function(a){this.field=a;a.afterMethod("onRender",this.doRender,this);a.afterMethod("onEnable",this.doEnable,this);a.afterMethod("onDisable",this.doDisable,
this);a.afterMethod("onResize",this.doResize,this);a.afterMethod("onFocus",this.doFocus,this);a.beforeMethod("onDestroy",this.doDestroy,this)},doRender:function(){var a=this.el=this.field.getEl(),b=this.field;if(b.wrap)this.wrap=b.wrap.addClass("x-form-field-wrap");else b.wrap=this.wrap=a.wrap({cls:"x-form-field-wrap"});this.trigger=this.wrap.createChild({tag:"div",cls:"x-form-trigger "+this.triggerClass});b.width||this.wrap.setWidth(a.getWidth()+this.trigger.getWidth());this.splitter=this.wrap.createChild({tag:"div",
cls:this.splitterClass,style:"width:13px; height:2px;"});this.splitter.setRight(Ext.isIE?1:2).setTop(10).show();this.proxy=this.trigger.createProxy("",this.splitter,true);this.proxy.addClass("x-form-spinner-proxy");this.proxy.setStyle("left","0px");this.proxy.setSize(14,1);this.proxy.hide();this.dd=new Ext.dd.DDProxy(this.splitter.dom.id,"SpinnerDrag",{dragElId:this.proxy.id});this.initTrigger();this.initSpinner()},doEnable:function(){this.wrap&&this.wrap.removeClass(this.field.disabledClass)},doDisable:function(){if(this.wrap){this.wrap.addClass(this.field.disabledClass);
this.el.removeClass(this.field.disabledClass)}},doResize:function(a){typeof a=="number"&&this.el.setWidth(a-this.trigger.getWidth());this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},doFocus:function(){if(!this.mimicing){this.wrap.addClass("x-trigger-wrap-focus");this.mimicing=true;Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this,{delay:10});this.el.on("keydown",this.checkTab,this)}},checkTab:function(a){a.getKey()==a.TAB&&this.triggerBlur()},mimicBlur:function(a){!this.wrap.contains(a.target)&&
this.field.validateBlur(a)&&this.triggerBlur()},triggerBlur:function(){this.mimicing=false;Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this);this.el.un("keydown",this.checkTab,this);this.field.beforeBlur();this.wrap.removeClass("x-trigger-wrap-focus");this.field.onBlur.call(this.field)},initTrigger:function(){this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},initSpinner:function(){this.field.addEvents({spin:true,spinup:true,
spindown:true});this.keyNav=new Ext.KeyNav(this.el,{up:function(a){a.preventDefault();this.onSpinUp()},down:function(a){a.preventDefault();this.onSpinDown()},pageUp:function(a){a.preventDefault();this.onSpinUpAlternate()},pageDown:function(a){a.preventDefault();this.onSpinDownAlternate()},scope:this});this.repeater=new Ext.util.ClickRepeater(this.trigger,{accelerate:this.accelerate});this.field.mon(this.repeater,"click",this.onTriggerClick,this,{preventDefault:true});this.field.mon(this.trigger,{mouseover:this.onMouseOver,
mouseout:this.onMouseOut,mousemove:this.onMouseMove,mousedown:this.onMouseDown,mouseup:this.onMouseUp,scope:this,preventDefault:true});this.field.mon(this.wrap,"mousewheel",this.handleMouseWheel,this);this.dd.setXConstraint(0,0,10);this.dd.setYConstraint(1500,1500,10);this.dd.endDrag=this.endDrag.createDelegate(this);this.dd.startDrag=this.startDrag.createDelegate(this);this.dd.onDrag=this.onDrag.createDelegate(this)},onMouseOver:function(){if(!this.disabled){var a=this.getMiddle();this.tmpHoverClass=
Ext.EventObject.getPageY()<a?"x-form-spinner-overup":"x-form-spinner-overdown";this.trigger.addClass(this.tmpHoverClass)}},onMouseOut:function(){this.trigger.removeClass(this.tmpHoverClass)},onMouseMove:function(){if(!this.disabled){var a=this.getMiddle();Ext.EventObject.getPageY()>a&&this.tmpHoverClass=="x-form-spinner-overup"||Ext.EventObject.getPageY()}},onMouseDown:function(){if(!this.disabled){var a=this.getMiddle();this.tmpClickClass=Ext.EventObject.getPageY()<a?"x-form-spinner-clickup":"x-form-spinner-clickdown";
this.trigger.addClass(this.tmpClickClass)}},onMouseUp:function(){this.trigger.removeClass(this.tmpClickClass)},onTriggerClick:function(){if(!(this.disabled||this.el.dom.readOnly)){var a=this.getMiddle();this["onSpin"+(Ext.EventObject.getPageY()<a?"Up":"Down")]()}},getMiddle:function(){var a=this.trigger.getTop(),b=this.trigger.getHeight();return a+b/2},isSpinnable:function(){if(this.disabled||this.el.dom.readOnly){Ext.EventObject.preventDefault();return false}return true},handleMouseWheel:function(a){if(this.wrap.hasClass("x-trigger-wrap-focus")!=
false){var b=a.getWheelDelta();if(b>0){this.onSpinUp();a.stopEvent()}else if(b<0){this.onSpinDown();a.stopEvent()}}},startDrag:function(){this.proxy.show();this._previousY=Ext.fly(this.dd.getDragEl()).getTop()},endDrag:function(){this.proxy.hide()},onDrag:function(){if(!this.disabled){var a=Ext.fly(this.dd.getDragEl()).getTop(),b="";if(this._previousY>a)b="Up";if(this._previousY<a)b="Down";b!=""&&this["onSpin"+b]();this._previousY=a}},onSpinUp:function(){if(this.isSpinnable()!=false)if(Ext.EventObject.shiftKey==
true)this.onSpinUpAlternate();else{this.spin(false,false);this.field.fireEvent("spin",this);this.field.fireEvent("spinup",this)}},onSpinDown:function(){if(this.isSpinnable()!=false)if(Ext.EventObject.shiftKey==true)this.onSpinDownAlternate();else{this.spin(true,false);this.field.fireEvent("spin",this);this.field.fireEvent("spindown",this)}},onSpinUpAlternate:function(){if(this.isSpinnable()!=false){this.spin(false,true);this.field.fireEvent("spin",this);this.field.fireEvent("spinup",this)}},onSpinDownAlternate:function(){if(this.isSpinnable()!=
false){this.spin(true,true);this.field.fireEvent("spin",this);this.field.fireEvent("spindown",this)}},spin:function(a,b){var c=parseFloat(this.field.getValue());b=b==true?this.alternateIncrementValue:this.incrementValue;a==true?(c-=b):(c+=b);c=isNaN(c)?this.defaultValue:c;c=this.fixBoundries(c);this.field.setRawValue(c)},fixBoundries:function(a){a=a;if(this.field.minValue!=undefined&&a<this.field.minValue)a=this.field.minValue;if(this.field.maxValue!=undefined&&a>this.field.maxValue)a=this.field.maxValue;
return this.fixPrecision(a)},fixPrecision:function(a){var b=isNaN(a);if(!this.field.allowDecimals||this.field.decimalPrecision==-1||b||!a)return b?"":a;return parseFloat(parseFloat(a).toFixed(this.field.decimalPrecision))},doDestroy:function(){this.trigger&&this.trigger.remove();if(this.wrap){this.wrap.remove();delete this.field.wrap}this.splitter&&this.splitter.remove();if(this.dd){this.dd.unreg();this.dd=null}this.proxy&&this.proxy.remove();this.repeater&&this.repeater.purgeListeners()}});
Ext.form.Spinner=Ext.ux.Spinner;Ext.ns("Ext.ux.form");
Ext.ux.form.SpinnerField=Ext.extend(Ext.form.NumberField,{actionMode:"wrap",deferHeight:true,autoSize:Ext.emptyFn,onBlur:Ext.emptyFn,adjustSize:Ext.BoxComponent.prototype.adjustSize,constructor:function(a){var b=Ext.copyTo({},a,"incrementValue,alternateIncrementValue,accelerate,defaultValue,triggerClass,splitterClass");b=this.spinner=new Ext.ux.Spinner(b);b=a.plugins?Ext.isArray(a.plugins)?a.plugins.push(b):[a.plugins,b]:b;Ext.ux.form.SpinnerField.superclass.constructor.call(this,Ext.apply(a,{plugins:b}))},
getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},validateBlur:function(){return true}});Ext.reg("spinnerfield",Ext.ux.form.SpinnerField);Ext.form.SpinnerField=Ext.ux.form.SpinnerField;
Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:false,buttonOffset:3,readOnly:true,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(a,b){Ext.ux.form.FileUploadField.superclass.onRender.call(this,a,b);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"});this.el.addClass("x-form-file-text");this.el.dom.removeAttribute("name");this.createFileInput();
a=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(a,{renderTo:this.wrap,cls:"x-form-file-btn"+(a.iconCls?" x-btn-icon":"")}));if(this.buttonOnly){this.el.hide();this.wrap.setWidth(this.button.getEl().getWidth())}this.bindListeners();this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(["x-btn-over","x-btn-focus"])},mouseleave:function(){this.button.removeClass(["x-btn-over",
"x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},change:function(){var a=this.fileInput.dom.value;this.setValue(a);this.fireEvent("fileselected",this,a)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",type:"file",size:1})},reset:function(){this.fileInput.remove();this.createFileInput();
this.bindListeners();Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+"-file"},onResize:function(a,b){Ext.ux.form.FileUploadField.superclass.onResize.call(this,a,b);this.wrap.setWidth(a);if(!this.buttonOnly){a=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset;this.el.setWidth(a)}},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this);
this.doDisable(true)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this);this.doDisable(false)},doDisable:function(a){this.fileInput.dom.disabled=a;this.button.setDisabled(a)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}});Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField);Ext.form.FileUploadField=Ext.ux.form.FileUploadField;
Ext.EventObject.getXY=function(){if(this.xy[0]==0&&this.xy[1]==0){var a;if(this.browserEvent.touches&&this.browserEvent.touches.length)a=this.browserEvent.touches;else if(this.browserEvent.changedTouches&&this.browserEvent.changedTouches.length)a=this.browserEvent.changedTouches;if(a){a=a.item(0);this.xy=[a.clientX,a.clientY]}}return this.xy};Ext.Container.prototype.bufferResize=0;
_.getAttribute=function(){var a=document.createElement("table"),b=false,c=/undefined|unknown/;if("getAttribute"in a){try{a.getAttribute("ext:qtip")}catch(d){b=true}return function(e,g,j){e=e.dom;var h;if(e.getAttributeNS)h=e.getAttributeNS(j,g)||null;if(h==null)if(j)if(b&&e.tagName.toUpperCase()=="TABLE")try{h=e.getAttribute(j+":"+g)}catch(q){h=""}else h=e.getAttribute(j+":"+g);else h=e.getAttribute(g)||e[g];return h||""}}else return function(e,g,j){e=e.om;if(j){g=e[j+":"+g];g=c.test(typeof g)?
undefined:g}else g=e[g];return g||""}}();Ext.namespace("Ext.UI");
Ext.UI.Checkbox=Ext.extend(Ext.form.Checkbox,{uicls:"ui-checkbox",defaultAutoCreate:{tag:"div"},onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.checkedClass=this.uicls+"-checked";Ext.UI.Checkbox.superclass.onRender.call(this,a,b);this.anchor=this.wrap.createChild({tag:"a",href:"#",cls:"x-el-focus",html:" "});this.anchor.on("focus",function(){this.el.dom.disabled||this.wrap.addClass(this.uicls+"-focused")},this);this.anchor.on("blur",function(){this.wrap.removeClass(this.uicls+
"-focused")},this);this.anchor.on("keydown",function(c){if(!this.el.dom.disabled&&c.getKey()==c.SPACE){c.stopEvent();this.setValue(!this.getValue())}},this);(a=this.wrap.child("label"))&&a.on("click",this.onClick,this);this.wrap.addClass(this.uicls);this.wrap.addClass(this.wrapCls);this.checked&&this.wrap.addClass(this.checkedClass);this.el.dom.checked=!Ext.isEmpty(this.initialConfig.value)?this.initialConfig.value:!Ext.isEmpty(this.initialConfig.checked)?this.initialConfig.checked:false},render:function(a,
b){if(this.cls){this.wrapCls=this.cls;delete this.cls}Ext.UI.Checkbox.superclass.render.call(this,a,b)},showValidateTooltip:function(a){var b=Ext.UI.Checkbox._validate_tooltip;if(!b){var c=function(){Ext.UI.Checkbox._validate_tooltip.hide()},d=function(e){e.stopPropagation()};b=Ext.UI.Checkbox._validate_tooltip=new Ext.UI.ToolTip(this.wrap,{enabled:true,width:300,html:"",attachPosition:Ext.UI.ToolTip.CENTER,delay:0});b.on("show",function(){Ext.EventManager.addListener(b.el,"mousedown",d);Ext.EventManager.addListener(Ext.getBody(),
"mousedown",c);Ext.UI.Checkbox._validate_tooltip.field.wrap.addClass("ui-checkbox-invalid")});b.on("hide",function(){Ext.EventManager.removeListener(b.el,"mousedown",d);Ext.EventManager.removeListener(Ext.getBody(),"mousedown",c);Ext.UI.Checkbox._validate_tooltip.field.wrap.removeClass("ui-checkbox-invalid")})}b.initTarget(this.wrap);b.destroyEvents(true);b.update(a);b.field=this;b.show()},hideValidateTooltip:function(){Ext.UI.Checkbox._validate_tooltip&&Ext.UI.Checkbox._validate_tooltip.hide()},
onClick:function(){if(!this.disabled){this.focus();this.setValue(!this.checked)}},onDisable:function(){this.el.addClass(this.disabledClass);this.el.dom.disabled=true;Ext.get(this.wrap.query(".x-form-cb-label")).addClass(this.disabledClass)},onEnable:function(){this.el.removeClass(this.disabledClass);this.el.dom.disabled=false;Ext.get(this.wrap.query(".x-form-cb-label")).removeClass(this.disabledClass)},updateUI:function(a){if(this.rendered)a?this.wrap.addClass(this.checkedClass):this.wrap.removeClass(this.checkedClass)},
setValue:function(a,b){var c=this.checked,d=this.inputValue;this.checked=a===true||a==="true"||a=="1"||(d?a==d:String(a).toLowerCase()=="on");if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked}if(c!=this.checked)if(b!=true){this.fireEvent("check",this,this.checked);if(this.handler)this.handler.call(this.scope||this,this,this.checked)}this.updateUI(this.checked);return this},reset:function(){Ext.UI.Checkbox.superclass.reset.call(this);this.updateUI(this.checked)},
getVisibilityEl:function(){return this.hideParent?this.container:this.wrap},getLabel:function(){return this.boxLabel},setLabel:function(a){if(Ext.isString(a)){this.boxLabel=a;if(this.rendered){var b=this.wrap.query(".x-form-cb-label");if(b.length>0)b[0].innerHTML=a}}},focus:function(){this.anchor.focus()}});Ext.reg("uicheckbox",Ext.UI.Checkbox);
Ext.UI.CheckColumn=Ext.extend(Ext.grid.Column,{processEvent:function(a,b,c,d,e){if(a=="mousedown"&&c.getColumnModel().config[e].editable!=false){var g=c.store.getAt(d);g.set(this.dataIndex,!g.data[this.dataIndex]);c.fireEvent("cellclick",c,d,e,this.dataIndex,b);return false}else return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)},renderer:function(a){return String.format('<div class="{0} {1}"><div class="x-form-field {2}"></div></div>',this.uicls,a?this.uicls+"-checked":"",
this.editable==false?this.uicls+"-disabled":"")},setDisabled:function(a){this.editable=a?false:true},init:Ext.emptyFn});Ext.preg("checkcolumn",Ext.UI.CheckColumn);Ext.grid.CheckColumn=Ext.UI.CheckColumn;Ext.grid.Column.types.checkcolumn=Ext.UI.CheckColumn;
Ext.UI.PartialCheckbox=Ext.extend(Ext.UI.Checkbox,{onRender:function(){Ext.UI.PartialCheckbox.superclass.onRender.apply(this,arguments);this.partialCls=this.uicls+"-partial"},setValue:function(a){if(a==="partial"){this.wrap.addClass(this.partialCls)||this.wrap.addClass(this.partialCls);a=true}else this.wrap.removeClass(this.partialCls);Ext.UI.PartialCheckbox.superclass.setValue.apply(this,arguments);return this}});Ext.namespace("Ext.UI");
Ext.UI.ToolTip=Ext.extend(Ext.util.Observable,{uicls:"ui-tooltip",width:0,height:0,minWidth:150,minHeight:30,hidden:true,rendered:false,enabled:true,target:null,html:undefined,cls:undefined,style:undefined,destroyed:false,anchored:true,el:null,body:null,renderTo:null,scroller:null,animProcId:-1,CUR_OPACITY:0,MAX_OPACITY:100,MIN_OPACITY:0,autoheight:true,autowidth:true,MAX_HEIGHT:0.25,MAX_WIDTH:0.2,delay:0,constructor:function(a,b){this.attachPosition=Ext.UI.ToolTip.CENTER;Ext.UI.ToolTip.superclass.constructor.call(this);
Ext.apply(this,b);this.addEvents("beforeshow","show","beforehide","hide","beforerender","render","afterrender","resize");this.renderTo=Ext.get(this.renderTo||document.body);this.target=Ext.get(a);this.initComponent()},initComponent:function(){this.render()},initTarget:function(a){if(a=Ext.get(a)){a.on("mousemove",this.onTagerMouseMove,this);this.target&&this.target.un("mousemove",this.onTagerMouseMove,this);this.target=a}},resetTarget:function(){if(this.target){this.renderTo.un("mousemove",this.onparent_mousemove,
this);this.target.un("mousemove",this.onTagerMouseMove,this);this.target=null}},render:function(){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){this.rendered=true;this.onRender();if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}this.fireEvent("render",this);if(this.html){this.body.update(this.html);delete this.html}this.afterRender();if(this.hidden){this.el.addClass("x-hide-display");this.scroller&&this.scroller.hide(false)}this.fireEvent("afterrender",
this)}return this},destroy:function(){this.destroyEvents();this.scroller&&this.scroller.destroy();this.el.remove();this.destroyed=true},destroyEvents:function(){if(this.target){this.target.un("mousemove",this.onTagerMouseMove,this);this.target.un("touchstart",this.onTagerMouseMove,this)}this.renderTo.un("mousemove",this.onparent_mousemove,this);this.renderTo.un("touchstart",this.onparent_touchstart,this);this.km.disable()},onRender:function(){var a=this.uicls;this.el=this.renderTo.createChild({cls:a});
this.el.addClass("ui-shadow");this.anchor=this.el.createChild({cls:a+"-anchor"});this.body=this.el.createChild({cls:a+"-body"});if(this.target){this.target.on("mousemove",this.onTagerMouseMove,this);this.target.on("touchstart",this.onTagerMouseMove,this)}this.el.setStyle("z-index",3E4);this.km=new Ext.KeyMap(document);this.km.on(Ext.EventObject.ESC,this.onEscPressed,this);this.km.disable()},onTagerMouseMove:function(){clearInterval(this.deferId);if(this.hidden){if(this.delay==0)this.show(false);else this.deferId=
this.show.defer(this.delay,this,[false]);this.renderTo.on("mousemove",this.onparent_mousemove,this);this.renderTo.on("touchstart",this.onparent_touchstart,this);this.km.enable();Ext.EventManager.on(window,"orientationchange",this.onOrientationChange,this)}},afterRender:function(){this.setSize(this.width,this.height);if(this.scroller!==false){this.scroller=new Ext.UI.Scroller({dom:this.body.dom,type:"vertical",dynamic:false,margins:{top:2,right:3,bottom:2,left:2}});this.scroller.reg()}},addClass:function(a){if(this.el)this.el.addClass(a);
else this.cls=this.cls?this.cls+" "+a:a;return this},removeClass:function(a){if(this.el)this.el.removeClass(a);else if(this.cls)this.cls=this.cls.split(" ").remove(a).join(" ");return this},getEl:function(){return this.el},update:function(a){this.body.update(a)},show:function(a,b){this.deferId=null;if(this.fireEvent("beforeshow",this)!==false&&this.enabled){this.hidden=false;this.rendered&&this.onShow(a,b);this.fireEvent("show",this)}return this},onShow:function(a,b){if(a){var c=this.getOpacity(),
d=this;clearInterval(this.animProcId);this.animProcId=setInterval(function(){c+=25;d.setOpacity(c);if(c>=d.MAX_OPACITY){d.showScroller();clearInterval(d.animProcId)}},35)}else this.setOpacity(this.MAX_OPACITY);this.el.removeClass("x-hide-display");this.autowidth&&this.calcAutoWidth();this.autoheight&&this.calcAutoHeight();this.calcPosition(b);a||this.showScroller()},calcPosition:function(a){this.target=!this.target?a:this.target;var b=this.renderTo.getXY(),c=this.target.getXY();a=this.target.getWidth()/
2;var d=c[0]-b[0]+a,e=this.target.getHeight()/2;b=c[1]-b[1]+e;var g=c[1]-this.el.getHeight()>0?false:true;c=this.renderTo.getWidth()-c[0]>this.el.getWidth()?true:false;this.anchored?this.showAnchor(g,c):this.hideAnchor();d-=c?40:this.getWidth()-13;switch(this.attachPosition){case Ext.UI.ToolTip.BORDER:b-=g?e:this.getHeight()+33+e;break;case Ext.UI.ToolTip.RIGHT:d-=c?-a-50:this.el.getWidth()/2;b-=g?-e-6:this.el.getHeight()/2;break;default:b-=g?-e-6:this.el.getHeight()+16;break}this.setPosition(d,b)},
setPosition:function(a,b){this.el.applyStyles("left:"+a+"px; top:"+b+"px")},calcAutoHeight:function(){this.setHeight("auto");var a=this.body.dom.scrollHeight-this.body.getHeight();a=this.getHeight()+a;var b=document.body.clientHeight*this.MAX_HEIGHT;if(a>b)a=b;else if(a<this.minHeight)a=this.minHeight;this.setHeight(a)},calcAutoWidth:function(){var a=this.minWidth;this.setWidth(document.body.clientWidth*this.MAX_WIDTH);for(var b=this.body.dom.scrollHeight,c=this.getWidth()/2;c>5;){var d=this.getWidth();
this.setWidth(d-c);if(b!=this.body.dom.scrollHeight||d-c<a){this.setWidth(d);c/=2}}},showAnchor:function(a,b){var c=24,d=this.uicls;this.anchor.removeClass(d+"-anchor-top");this.anchor.removeClass(d+"-anchor-bottom");if(this.attachPosition==Ext.UI.ToolTip.RIGHT){this.anchor.addClass(d+"-anchor-left");this.anchor.applyStyles("top:"+this.getHeight()/2+"px;")}else{a?this.anchor.addClass(d+"-anchor-top"):this.anchor.addClass(d+"-anchor-bottom");b||(c=this.getWidth()-28);this.anchor.applyStyles("left:"+
c+"px")}},hideAnchor:function(){this.anchor.applyStyles("top:-10000px;left:-10000px")},showScroller:function(){this.scroller&&this.scroller.show(false)},hide:function(a){clearInterval(this.deferId);this.deferId=null;if(this.fireEvent("beforehide",this)!==false){this.hidden=true;this.rendered&&this.onHide(a);this.renderTo.un("mousemove",this.onparent_mousemove,this);this.renderTo.un("touchstart",this.onparent_touchstart,this);this.km.disable();Ext.EventManager.un(window,"orientationchange",this.onOrientationChange,
this);this.fireEvent("hide",this)}return this},onHide:function(a){if(a){var b=this.getOpacity(),c=this;clearInterval(this.animProcId);this.animProcId=setInterval(function(){b-=25;c.setOpacity(b);if(b<=c.MIN_OPACITY){clearInterval(c.animProcId);c.el.addClass("x-hide-display")}},25)}else{this.setOpacity(this.MAX_OPACITY);this.el.addClass("x-hide-display")}this.scroller&&this.scroller.hide(false)},setVisible:function(a){return this[a?"show":"hide"]()},setSize:function(a,b){if(Ext.isDefined(a)&&Ext.isDefined(this.minWidth)&&
a<this.minWidth)a=this.minWidth;if(Ext.isDefined(b)&&Ext.isDefined(this.minHeight)&&b<this.minHeight)b=this.minHeight;if(!this.rendered){this.width=a;this.height=b;return this}if(this.lastSize&&this.lastSize.width==a&&this.lastSize.height==b)return this;this.lastSize={width:a,height:b};if(Ext.isDefined(a)||Ext.isDefined(b)){if(Ext.isDefined(a)&&Ext.isDefined(b))this.body.setSize(a,b);else if(Ext.isDefined(a))this.body.setWidth(a);else Ext.isDefined(b)&&this.body.setHeight(b);this.onResize(a,b);this.fireEvent("resize",
this,a,b)}return this},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.body.getWidth()},getHeight:function(){return this.body.getHeight()},onResize:function(){if(this.rendered&&this.target){this.calcPosition();this.scroller&&this.scroller.resize()}},setOpacity:function(a){this.CUR_OPACITY=a>this.MAX_OPACITY?this.MAX_OPACITY:a;this.CUR_OPACITY=
a<this.MIN_OPACITY?this.MIN_OPACITY:this.CUR_OPACITY;if(!Ext.isIE6&&!Ext.isIE7&&!Ext.isIE8){this.el.dom.style.filter="alpha(opacity="+this.CUR_OPACITY+")";this.el.dom.style.opacity=this.CUR_OPACITY/100}},getOpacity:function(){this.setOpacity(this.CUR_OPACITY);return this.CUR_OPACITY},checkOut:function(a,b,c){var d=a.dom?a.dom.scrollWidth:0,e=a.dom?a.dom.scrollHeight:0;if(!d||!e)return true;var g=a.getXY();a=g[0];g=g[1];if(b<a||b>a+d||c<g-2||c>g+e+2)return true;return false},onparent_mousemove:function(a){if(!this.hidden||
this.deferId!=null){var b=a.xy[0];a=a.xy[1];if(this.checkOut(this.el,b,a)&&this.checkOut(this.target,b,a)){clearInterval(this.deferId);this.deferId=null;this.hide(false)}}},onparent_touchstart:function(a){if(!this.hidden||this.deferId!=null){var b=a.browserEvent.touches.item(0);a=b.clientX;b=b.clientY;if(this.checkOut(this.el,a,b)&&this.checkOut(this.target,a,b)){clearInterval(this.deferId);this.deferId=null;this.hide(false)}}},onEscPressed:function(){this.hide(false)},onOrientationChange:function(){this.hide(false)}});
Ext.UI.ToolTip.CENTER=0;Ext.UI.ToolTip.BORDER=1;Ext.UI.ToolTip.RIGHT=2;Ext.namespace("Ext.UI");
Ext.UI.TextField=Ext.extend(Ext.form.TextField,{uicls:"ui-textfield",width:undefined,ui_disabled:null,baseTooltipCfg:{enabled:false,width:200,html:"",attachPosition:Ext.UI.ToolTip.BORDER,delay:500},hideTooltip:function(a){this.wrap.addClass(this.uicls+"-focus");a.tooltip&&a.tooltip.hide()},onRender:function(a,b){this.addEvents("beforeclear");this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.on({specialkey:function(c,d){d.getKey()==d.ESC&&c.setValue(c.startValue)},focus:this.hideTooltip,
click:this.hideTooltip,blur:function(){this.wrap.removeClass(this.uicls+"-focus")},scope:this});Ext.UI.TextField.superclass.onRender.call(this,a,b);this.inputMaxLength&&this.el.set({maxlength:this.inputMaxLength});this.el.set({autocapitalize:"off"});this.wrap=this.el.wrap({cls:this.uicls});this.wrap.addClassOnOver(this.overCls);this.wrap.addClass(this.wrapCls);a=this.el.wrap({cls:this.uicls+"-mc"});a.wrap({cls:this.uicls+"-mr"}).wrap({cls:this.uicls+"-ml"});this.ui_disabled=a.createChild({tag:"div",
cls:this.fieldClass+"-disabled",style:"display:none;"});b="";if(this.readOnly){this.wrap.addClass(this.uicls+"-readonly");b=" "+this.uicls+"-hidden"}this.ui_clear=a.createChild({tag:"div",cls:this.uicls+"-clear"+b});this.ui_clear.on("click",function(c){if(this.fireEvent("beforeclear",this,c)){c=this.getValue();this.setValue("");c!=""&&this.fireEvent("change",this,"",c)}},this);this.positionEl=this.wrap;if(this.tooltipCfg){Ext.apply(this.baseTooltipCfg,this.tooltipCfg);this.tooltip=new Ext.UI.ToolTip(this.el,
this.baseTooltipCfg)}},onFocus:function(a){this.preFocus();this.focusClass&&this.el.addClass(this.focusClass);if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this,a)}},render:function(a,b){if(this.cls){this.wrapCls=this.cls;delete this.cls}Ext.UI.TextField.superclass.render.call(this,a,b)},onDisable:function(){var a=this.getActionEl().getWidth();a>0?this.ui_disabled.setWidth(a-10):this.ui_disabled.setWidth(this.width-10);this.getActionEl().setDisplayed(false);
this.ui_disabled.setDisplayed(true);a=Ext.util.Format.htmlEncode(this.getActionEl().getValue());if(this.inputType=="password"){a="";for(var b=0,c=this.getActionEl().getValue().length;b<c;++b)a+="&#x25CF;"}this.ui_disabled.update("<nobr>"+(a||"")+"</nobr>");this.wrap.addClass(this.disabledClass)},setReadOnly:function(a){if(this.rendered){this.el.dom.readOnly=a;if(this.readOnly!=a)if(a){this.wrap.addClass(this.uicls+"-readonly");this.ui_clear.addClass(this.uicls+"-hidden")}else{this.wrap.removeClass(this.uicls+
"-readonly");this.ui_clear.removeClass(this.uicls+"-hidden")}}this.readOnly=a},onEnable:function(){this.ui_disabled.setDisplayed(false);this.getActionEl().setDisplayed(true);this.wrap.removeClass(this.disabledClass)},setValue:function(a){var b=Ext.UI.TextField.superclass.setValue.call(this,a),c=Ext.util.Format.htmlEncode(a);if(this.rendered){if(this.inputType=="password"&&a){c="";for(var d=0;d<a.length;++d)c+="&#x25CF;"}this.ui_disabled.update("<nobr>"+(c||"")+"</nobr>")}return b},getVisibilityEl:function(){return this.hideParent?
this.container:this.wrap},setWidth:function(a){if(this.rendered){this.el.setWidth(a-10);this.ui_disabled.setWidth(a-10);this.wrap.setWidth(a)}else Ext.UI.TextField.superclass.setWidth.apply(this,arguments)}});Ext.reg("uitextfield",Ext.UI.TextField);
Ext.form.TextField.prototype.showValidateTooltip=function(a){var b=Ext.form.TextField._validate_tooltip;if(!b){var c=function(){Ext.form.TextField._validate_tooltip.hide()},d=function(e){e.stopPropagation()};b=Ext.form.TextField._validate_tooltip=new Ext.UI.ToolTip(this.wrap,{enabled:true,width:300,minHeight:0,html:"",attachPosition:Ext.UI.ToolTip.CENTER,delay:0});b.on("show",function(){Ext.EventManager.addListener(b.el,"mousedown",d);Ext.EventManager.addListener(Ext.getBody(),"mousedown",c);Ext.form.TextField._validate_tooltip.field.wrap.addClass("ui-field-invalid")});
b.on("hide",function(){Ext.EventManager.removeListener(b.el,"mousedown",d);Ext.EventManager.removeListener(Ext.getBody(),"mousedown",c);Ext.form.TextField._validate_tooltip.field.wrap.removeClass("ui-field-invalid")})}b.initTarget(this.wrap);b.destroyEvents(true);b.update(a);b.field=this;b.show()};Ext.form.TextField.prototype.hideValidateTooltip=function(){Ext.form.TextField._validate_tooltip&&Ext.form.TextField._validate_tooltip.hide()};Ext.namespace("Ext.UI");
Ext.UI.TextArea=Ext.extend(Ext.BoxComponent,{uicls:"ui-textarea",value:"",readonly:false,initComponent:function(){Ext.UI.TextArea.superclass.initComponent.call(this);this.addEvents("blur","focus")},onRender:function(a,b){Ext.UI.TextArea.superclass.onRender.call(this,a,b);a=Ext.id();b=Ext.id();var c=Ext.id();this.el.dom.innerHTML=String.format('<div class="{0}-tml"><div class="{0}-tmr"><div class="{0}-tmc" >&#160;</div></div></div>\t\t\t<div id="{1}" class="{0}-mc" ><textarea id="{2}" class="ui-textarea-txt" autocomplete="off" {5}>{4}</textarea><div id="{3}" class="{0}-clear"></div></div>            <div class="{0}-bml"><div class="{0}-bmr"><div class="{0}-bmc" >&#160;</div></div></div>',
this.uicls,a,b,c,Ext.util.Format.htmlEncode(this.value),this.readonly?'readonly="readonly"':"");this.edit=Ext.get(b);this.edit.on("focus",function(){this.fireEvent("focus",this)},this);this.edit.on("blur",function(){this.fireEvent("blur",this)},this);Ext.get(c).on("click",function(){this.setValue("")},this);this.height&&this.edit.setHeight(this.height-16);this.on("afterrender",function(d){if(_.isiOS||_.isAndroid)this.edit.setStyle("overflow","auto");else{this.scroller=new Ext.UI.Scroller({dom:d.edit,
type:"vertical",margins:{right:0,bottom:1,top:1}});this.scroller.reg()}},this)},setValue:function(a){if(this.edit)this.edit.dom.value=a;else this.value=a},getValue:function(){return this.edit?this.edit.dom.value:this.value},selectText:function(a,b){var c=this.getValue();if(c.length>0){a=a===undefined?0:a;b=b===undefined?c.length:b;var d=this.edit.dom;if(d.setSelectionRange)d.setSelectionRange(a,b);else if(d.createTextRange){d=d.createTextRange();d.moveStart("character",a);d.moveEnd("character",b-
c.length);d.select()}}this.edit.dom.focus()},blur:function(){this.edit.dom.blur()},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.edit.dom.readOnly=true;this.edit.on("focus",this.blur,this)},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.edit.dom.readOnly=false;this.edit.un("focus",this.blur,this)}});Ext.reg("uitextarea",Ext.UI.TextArea);Ext.namespace("Ext.UI");
Ext.UI.ComboBox=Ext.extend(Ext.form.ComboBox,{uicls:"ui-combobox",width:200,editable:false,ui_disabled:null,handleHeight:0,shadow:false,baseTooltipCfg:{enabled:false,width:200,html:"",attachPosition:Ext.UI.ToolTip.BORDER,delay:500},hideTooltip:function(a){a.tooltip&&a.tooltip.hide()},initComponent:function(){this.listWidth=this.width;Ext.UI.ComboBox.superclass.initComponent.call(this);this.triggerConfig={tag:"div",cls:"x-form-trigger "+this.triggerClass};this.on({afterrender:this.onAfterRender,collapse:this.onCollapse,
scope:this})},onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.listClass=this.uicls+"-list";var c=Ext.id(),d=Ext.id(),e=Ext.id();Ext.UI.ComboBox.superclass.onRender.call(this,a,b);this.wrap.dom.innerHTML='<table cellpadding=0 cellspacing=0 border=0 ><tr><td style="width:100%;vertical-align:top"><div class="'+this.uicls+'-ml"><div id="'+d+'" class="'+this.uicls+'-mc" ><div id="'+c+'" class="x-form-field-disabled" style="display:none;" ></div></div></div></td><td id="'+
e+'" style="height: 22px"></td></tr></table>';this.wrap.addClass(this.uicls);this.wrap.addClass(this.wrapCls);this.wrap.addClassOnOver(this.overCls);Ext.get(d).appendChild(this.el);Ext.get(e).appendChild(this.trigger);this.ui_disabled=Ext.get(c);if(this.tooltipCfg){Ext.apply(this.baseTooltipCfg,this.tooltipCfg);this.tooltip=new Ext.UI.ToolTip(this.el,this.baseTooltipCfg)}this.on({focus:this.hideTooltip,collapse:this.hideTooltip,expand:this.hideTooltip});if(this.cls){this.wrap.addClass(this.cls);this.el.removeClass(this.cls);
delete this.cls}if(this.style){this.wrap.applyStyles(this.style);delete this.style}this.overCls&&this.wrap.addClassOnOver(this.overCls)},onDisable:function(){this.el.setDisplayed(false);this.ui_disabled.setDisplayed(true);this.ui_disabled.update(this.el.getValue());this.wrap.addClass(this.disabledClass)},onEnable:function(){this.ui_disabled.setDisplayed(false);this.el.setDisplayed(true);this.wrap.removeClass(this.disabledClass)},initList:function(){Ext.UI.ComboBox.superclass.initList.call(this);this.list.createChild({cls:"x-combo-list-footer-ml"}).createChild({cls:"x-combo-list-footer-mr"}).createChild({cls:"x-combo-list-footer-mc"});
if(!this.scroller){this.scroller=new Ext.UI.Scroller({dom:this.innerList.dom,type:"vertical"});this.scroller.reg()}},onAfterRender:function(){this.wrap.setStyle("width",this.width?this.width+"px":"auto");this.el.setStyle("width",this.width?this.width-31+"px":"100%");this.ui_disabled.setStyle("width",this.width?this.width-31+"px":"100%")},onCollapse:function(a){a.scroller&&a.scroller.hide()},collapse:function(){if(this.isExpanded()){this.list.hide();Ext.getDoc().un("mousewheel",this.collapseIf,this);
Ext.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)}},collapseIf:function(a){var b=this.list.getRegion();!this.isDestroyed&&!a.within(this.wrap)&&!a.within(this.list)&&!(a.xy[0]>b.left&&a.xy[0]<b.right&&a.xy[1]>b.top&&a.xy[1]<b.bottom)&&this.collapse()},expand:function(){if(!(this.isExpanded()||!this.hasFocus)){if(this.title||this.pageSize){this.assetHeight=0;if(this.title)this.assetHeight+=this.header.getHeight();if(this.pageSize)this.assetHeight+=this.footer.getHeight()}if(this.bufferSize){this.doResize(this.bufferSize);
delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.setZIndex(this.getZIndex());this.list.show();Ext.isGecko2&&this.innerList.setOverflow("auto");this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent("expand",this)}},setValue:function(a){a=Ext.UI.ComboBox.superclass.setValue.call(this,a);this.rendered&&this.ui_disabled.update("<nobr>"+this.el.getValue()+"</nobr>");return a},getVisibilityEl:function(){return this.hideParent?
this.container:this.wrap},destroy:function(){if(this.scroller){this.scroller.destroy();delete this.scroller}}});Ext.reg("uicombo",Ext.UI.ComboBox);Ext.namespace("Ext.UI");
Ext.UI.Button=Ext.extend(Ext.Button,{uicls:"ui-button",acceptcls:"ui-button-accept",width:100,expandToText:false,ui_disabled:null,onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.clickClass=this.uicls+"-click";Ext.UI.Button.superclass.onRender.call(this,a,b);this.btn=this.el.child("button");this.edge=this.getWidth()-this.btn.getWidth();if(!this.edge||this.edge<14)this.edge=14;this.btn.setStyle("width",this.width-this.edge+"px");this.ui_disabled=
this.btn.up("").createChild({tag:"div",cls:"x-btn-text",style:"width:"+(this.width-this.edge)+"px;display:none;"});this.el.addClass(this.uicls);this.acceptbtn&&this.el.addClass(this.uicls+"-accept");this.btnEl.addClass("x-btn-text");this.el.removeClass("x-btn");this.btnEl.update("<span class="+(this.uicls+"-text")+">"+this.text+"</span>");if(this.expandToText&&this.btnEl.getComputedWidth()<this.btnEl.down("span").getTextWidth()+this.btnEl.down("span").getPadding("lr")){a=this.btnEl.down("span").getTextWidth()+
this.btnEl.down("span").getPadding("lr");this.setWidth(a+this.edge);this.btn.setStyle("width",a+"px");this.ui_disabled.setWidth(a)}this.setIconClass(this.iconCls);this.applyTextChanges()},onDisable:function(){this.btn.setDisplayed(false);this.ui_disabled.setDisplayed(true);this.ui_disabled.update("<span class="+(this.uicls+"-text")+">"+this.text+"</span>");this.addClass(this.disabledClass)},onEnable:function(){this.ui_disabled.setDisplayed(false);this.btn.setDisplayed(true);this.removeClass(this.disabledClass)},
onMouseDown:function(a){if(!this.disabled&&a.button===0){this.getClickEl(a).addClass(this.clickClass);this.doc.on("mouseup",this.onMouseUp,this)}},onMouseUp:function(a){if(a.button===0){this.getClickEl(a,true).removeClass(this.clickClass);this.doc.un("mouseup",this.onMouseUp,this)}},setText:function(){var a=Ext.UI.Button.superclass.setText.apply(this,arguments);this.applyTextChanges();return a},setIconClass:function(a){this.iconCls=a;var b;if(this.el){if(this.iconSelector&&(b=this.el.child(this.iconSelector))){this.btnEl.dom.className=
"";this.btnEl.addClass("x-btn-text");this.setButtonClass();b.dom.className="";b.addClass(a||"")}else{this.btnEl.dom.className="";this.btnEl.addClass(["x-btn-text",a||""])}this.setButtonClass()}return this},setButtonClass:function(){if(this.useSetClass){Ext.isEmpty(this.oldCls)||this.el.removeClass([this.oldCls,"x-btn-pressed"]);this.oldCls=this.iconCls&&!this.iconSelector||this.icon?this.text?"x-btn-text-icon":"x-btn-icon":"x-btn-noicon";this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":
null])}},onFocus:function(){this.disabled||this.el.addClass(this.uicls+"-focused")},onBlur:function(){this.el.removeClass(this.uicls+"-focused")},applyTextChanges:function(){if(this.btnEl){this.btnEl.set({title:this.text});this.expandToText||this.setEllipsis(this.btnEl)}if(this.ui_disabled){this.ui_disabled.set({title:this.text});this.expandToText||this.setEllipsis(this.ui_disabled)}},setEllipsis:function(a){a.addClass("x-ellipsis").setStyle("text-align","center");var b=a.down("span");b&&b.dom.offsetWidth>
a.dom.offsetWidth&&a.setStyle("text-align","left")}});Ext.reg("uibutton",Ext.UI.Button);Ext.namespace("Ext.UI");
Ext.UI.ButtonOnOff=Ext.extend(Ext.BoxComponent,{uicls:"ui-buttononoff-small",textOn:"ON",textOff:"OFF",ison:false,labelwidth:0,onRender:function(a,b){this.addEvents("valuechanged");this.addEvents("click","beforeclick");this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";Ext.UI.ButtonOnOff.superclass.onRender.call(this,a,b);this.tblBtnId=Ext.id();this.lBtnId=Ext.id();this.cBtnId=Ext.id();this.rBtnId=Ext.id();this.el.addClass(this.uicls);this.el.addClassOnOver(this.overCls);a=
this.el.createChild({cls:this.uicls+"-ml"});b=a.createChild({cls:this.uicls+"-mr"});var c=String.format('<table id="{5}" class="ui-buttononoff-tbl" cellpadding=0 cellspacing=0 border=0 ><tr><td style="padding: 0px 3px" id={3}>{0}</td><td class="{2}-btn" id={6}></td><td style="padding: 0px 3px" id={4}>{1}</td></tr></table>',this.textOn,this.textOff,this.uicls,this.lBtnId,this.rBtnId,this.tblBtnId,this.cBtnId);b.createChild({cls:this.uicls+"-mc",html:c});this.delta=Math.max(this.getBtnWidth(this.lBtnId,
this.textOn),this.getBtnWidth(this.rBtnId,this.textOff),this.labelwidth);Ext.get(this.lBtnId).setWidth(this.delta);Ext.get(this.rBtnId).setWidth(this.delta);c=Math.max(30,Ext.get(this.cBtnId).getComputedWidth());Ext.get(this.tblBtnId).setWidth(2*this.delta+c);this.el.setWidth(this.delta+c+a.getPadding("l")+b.getPadding("r"));this.on("afterrender",this.onRendered,this);this.mon(this.el,"click",this.onClick,this)},getBtnWidth:function(a,b){a=Ext.fly(a);return a.getPadding("l")+a.getTextWidth(b)+a.getPadding("r")},
onDisable:function(){this.addClass(this.disabledClass)},onEnable:function(){this.removeClass(this.disabledClass)},onClick:function(){if(!this.disabled)if(this.fireEvent("beforeclick",this)!=false){this.setValue(!this.isOff());this.fireEvent("click",this)}},onRendered:function(){this.ison||this.changeUI(!this.ison,false)},setValue:function(a){if(a!=this.isOff()){this.changeUI(a,true);this.fireEvent("valuechanged",this)}},changeUI:function(a,b){if(this.rendered){if(a!=this.isOff()){a=Ext.get(this.tblBtnId);
a.stopFx(true);var c=a.getLeft();this.delta*=-1;c+=this.delta;b!==false?a.shift({stopFx:true,duration:0,x:c,easing:"backOut"}):a.setX(c);this.ison=!this.isOff()}}else this.ison=!a},isOff:function(){return this.delta<0}});Ext.reg("uibuttononoff",Ext.UI.ButtonOnOff);Ext.namespace("Ext.UI");
Ext.UI.Radio=Ext.extend(Ext.form.Radio,{uicls:"ui-radio",defaultAutoCreate:{tag:"div"},constructor:function(){Ext.UI.Radio.superclass.constructor.apply(this,arguments);this.addEvents("beforechange")},onRender:function(a,b){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";this.checkedClass=this.uicls+"-checked";Ext.UI.Radio.superclass.onRender.call(this,a,b);this.anchor=this.wrap.createChild({tag:"a",href:"#",cls:"x-el-focus",html:" "});this.anchor.on("focus",function(){this.el.dom.disabled||
this.wrap.addClass(this.uicls+"-focused")},this);this.anchor.on("blur",function(){this.wrap.removeClass(this.uicls+"-focused")},this);this.anchor.on("keydown",function(c){if(!this.el.dom.disabled&&(c.getKey()==c.ENTER||c.getKey()==c.SPACE)){c.stopEvent();this.setValue(true)}},this);(a=this.wrap.child("label"))&&a.on("click",this.onClick,this);this.wrap.addClass(this.uicls);this.wrap.addClass(this.wrapCls);this.checked&&this.wrap.addClass(this.checkedClass)},render:function(a,b){if(this.cls){this.wrapCls=
this.cls;delete this.cls}Ext.UI.Radio.superclass.render.call(this,a,b)},onClick:function(){this.disabled||this.focus();this.checked||this.disabled||this.fireEvent("beforechange",this,true)!==false&&this.getCheckEl().select("div[name="+this.name+"]").each(function(a){a.dom.id==this.id?this.setValue(true):Ext.getCmp(a.dom.id).setValue(false)},this)},focus:function(){this.anchor.focus()},onDisable:function(){this.el.addClass(this.disabledClass);this.el.dom.disabled=true},onEnable:function(){this.el.removeClass(this.disabledClass);
this.el.dom.disabled=false},getVisibilityEl:function(){return this.hideParent?this.container:this.wrap},setValue:function(a){var b;if(typeof a=="boolean"){Ext.form.Radio.superclass.setValue.call(this,a);if(this.rendered)a?this.wrap.addClass(this.checkedClass):this.wrap.removeClass(this.checkedClass)}else if(this.rendered){b=this.getCheckEl();(a=b.child("div[name="+this.name+"][value="+a+"]",true))&&Ext.getCmp(a.id).setValue(true)}if(this.rendered&&this.checked){b=b||this.getCheckEl();b=this.getCheckEl().select("div[name="+
this.name+"]");b.each(function(c){c.dom.id!=this.id&&Ext.getCmp(c.dom.id).setValue(false)},this)}return this}});Ext.reg("uiradio",Ext.UI.Radio);Ext.namespace("Ext.UI");
Ext.UI.LedButton=Ext.extend(Ext.UI.Button,{uicls:"ui-ledbutton",width:150,iconAlign:"right",state:"on",disableToggle:false,buttonClick:null,getState:function(){return this.state},setState:function(a){if(this.state!=a){this.ui_disabled.removeClass(this.uicls+"-"+this.state);this.el.removeClass(this.uicls+"-"+this.state);this.state=a;this.fireEvent("statechanged",this,a);this.el.addClass(this.uicls+"-"+this.state);this.ui_disabled.addClass(this.uicls+"-"+this.state)}},toggleState:function(){this.disableToggle||
(this.state=="on"?this.setState("off"):this.setState("on"))},initComponent:function(){Ext.UI.LedButton.superclass.initComponent.call(this);this.addEvents("statechanged");this.on({click:this.onButtonClick,scope:this})},onRender:function(a,b){Ext.UI.LedButton.superclass.onRender.call(this,a,b);this.btnEl.applyStyles("width:"+(this.width-15)+"px");this.ui_disabled.applyStyles("width:"+(this.width-15)+"px");this.el.addClass(this.uicls+"-"+this.state);this.ui_disabled.addClass(this.uicls+"-"+this.state)},
onButtonClick:function(a,b){this.buttonClick==null||b.browserEvent.offsetX>a.getEl().getWidth()?this.toggleState():this.buttonClick()}});Ext.reg("uiledbutton",Ext.UI.LedButton);Ext.namespace("Ext.UI");
Ext.UI.SegmentedControl=Ext.extend(Ext.Container,{uicls:"ui-segmentedcontrol",wrapCls:"ui-segmentedcontrol-wrap",autoHeight:true,disabledClass:"",initComponent:function(){this.control=new Ext.Container({style:"position: absolute;",listeners:{beforerender:function(a){if(a.items.first())a.items.first().left=true;if(a.items.last())a.items.last().right=true;var b=false;this.control.items.each(function(c){if(c.checked&&c.getXType()=="uisegmentedbutton")if(b)c.checked=false;else b=true});if(!b&&this.control.items.first()&&
this.control.items.first().getXType()=="uisegmentedbutton")this.control.items.first().checked=true;this.setDisabled(!!this.disabled)},afterrender:function(){this.control.el.addClass(this.uicls);this.updateWidth()},scope:this}});this.control.resetCheck=function(a){this.control.items.each(function(b){if(b.checked){b.checked=false;b.removeClass(b.checkedClass);this.fireEvent("buttonunchecked",b);return false}},this);this.fireEvent("buttonchecked",a)}.createDelegate(this);Ext.UI.SegmentedControl.superclass.initComponent.call(this,
arguments);Ext.UI.SegmentedControl.superclass.removeAll.call(this)},updateWidth:function(){if(this.control.rendered){var a=0;this.control.items.each(function(b){a+=b.width});if(!this.fixedWidth)if(this.width)this.fixedWidth=this.width;this.control.setWidth(a);Ext.UI.SegmentedControl.superclass.setWidth.call(this,this.fixedWidth?Math.min(this.fixedWidth,a):a);if(this.fixedWidth&&this.fixedWidth<a){if(this.scrolIndex>-1){this.wrapcontrol.setWidth(this.fixedWidth-46);this.scroll.show()}else this.wrapcontrol.setWidth(this.fixedWidth-
23);-(this.control.el.getLeft(true)-this.control.items.items[this.scrolIndex+1].el.getWidth())<a?this.scrolr.show():this.wrapcontrol.setWidth(this.fixedWidth-23)}else{this.scroll.hide();this.scrolr.hide();this.wrapcontrol.setWidth(a);this.scrolIndex=-1;this.control.el.setLeft(0)}}},onRender:function(a,b){this.items.add(this.scroll=new Ext.BoxComponent({cls:"ui-segmentedcontrol-scroll",hidden:true,listeners:{afterrender:function(c){c.el.on("click",this.onLScrollClick,this)},scope:this}}));this.wrapcontrol=
new Ext.Container({cls:this.wrapCls,items:[this.control]});this.items.add(this.wrapcontrol);this.scrolIndex=-1;this.items.add(this.scrolr=new Ext.BoxComponent({cls:"ui-segmentedcontrol-scrolr",hidden:true,listeners:{afterrender:function(c){c.el.on("click",this.onRScrollClick,this)},scope:this}}));this.addEvents("buttonchecked","buttonunchecked");Ext.UI.SegmentedControl.superclass.onRender.call(this,a,b)},getPressedButton:function(){for(var a=0;a<this.control.items.length;a++)if(this.control.items.itemAt(a).checked)return this.control.items.itemAt(a)},
setPressedButton:function(a,b){this.control.items.length>a&&a>=0&&this.control.items.itemAt(a).press(b)},itemAt:function(a){if(a<this.control.items.length&&this.control.items.length>0)return this.control.items.itemAt(a);return null},count:function(){return this.control.items.length},add:function(a){if(this.control.rendered){if(this.control.items.length==0)a.left=true;else{var b=this.control.items.last();b.mr.removeClass(b.uicls+"-rmr");b.mr.addClass(b.uicls+"-mr")}a.right=true}this.control.add(a);
this.updateWidth()},remove:function(a){if(a){this.control.remove(a);if(this.control.rendered){a=this.control.items.last();a.mr.removeClass(a.uicls+"-mr");a.mr.addClass(a.uicls+"-rmr");a.right=true}this.updateWidth()}},removeAll:function(){this.scroll.hide();this.scrolr.hide();if(this.control){this.control.el.setLeft(0);this.control.removeAll()}this.scrolIndex=-1;this.updateWidth()},setWidth:function(a){this.fixedWidth=a;this.updateWidth()},setDisabled:function(a){for(var b=0;b<this.control.items.length;b++)this.control.items.itemAt(b).setDisabled(a)},
onLScrollClick:function(){this.scrolr.show();this.wrapcontrol.setWidth(this.fixedWidth-46);if(--this.scrolIndex==-1){this.scroll.hide();this.wrapcontrol.setWidth(this.fixedWidth-23)}this.control.el.setLeft(this.control.el.getLeft(true)+this.control.items.items[this.scrolIndex+1].el.getWidth())},onRScrollClick:function(){this.scroll.show();this.wrapcontrol.setWidth(this.fixedWidth-46);this.control.el.setLeft(this.control.el.getLeft(true)-this.control.items.items[++this.scrolIndex].el.getWidth());if(this.control.el.getLeft(true)+
24<this.fixedWidth-this.control.getWidth()||-(this.control.el.getLeft(true)-this.control.items.items[this.scrolIndex+1].el.getWidth())>=this.control.getWidth()){this.scrolr.hide();this.wrapcontrol.setWidth(this.fixedWidth-23)}},onParentResize:function(a,b){this.setWidth(b)},doResize:function(){if(this.rendered){var a=Ext.get(this.el.findParentNode(""));a&&this.setWidth(a.getWidth()-a.getPadding("l")-a.getPadding("r"))}}});Ext.reg("uisegmentedcontrol",Ext.UI.SegmentedControl);
Ext.UI.SegmentedButton=Ext.extend(Ext.BoxComponent,{uicls:"ui-segmentedbutton",text:"",image:"",checked:false,width:100,imagetype:undefined,initComponent:function(){this.overCls=this.uicls+"-over";this.disabledClass=this.uicls+"-disabled";Ext.UI.SegmentedButton.superclass.initComponent.call(this);this.checkedClass=this.uicls+"-checked";this.addEvents("click","afterclick");this.click&&this.on("click",this.click,this.scope)},press:function(a){this.ownerCt.resetCheck(this);this.checked=true;this.addClass(this.checkedClass);
a||this.fireEvent("afterclick",this)},onClick:function(a){a.stopEvent();!this.checked&&!this.disabled&&this.fireEvent("click",this,a)&&this.press()},onRender:function(a,b){Ext.UI.SegmentedButton.superclass.onRender.call(this,a,b);this.el.un("click",this.onClick,this);this.checked&&this.addClass(this.checkedClass);a=this.left?this.el.createChild({cls:this.uicls+"-lml"}):this.el.createChild({cls:this.uicls+"-ml"});this.mr=a=this.right?a.createChild({cls:this.uicls+"-rmr"}):a.createChild({cls:this.uicls+
"-mr"});a=this.elTxt=a.createChild({cls:this.uicls+"-mc"}).createChild({html:this.text,cls:this.uicls+"-txt x-ellipsis"});a.setWidth(this.width-12);this.imagetype&&a.addClass(this.uicls+"-"+this.imagetype);this.mon(this.el,"click",this.onClick,this);this.el.addClass(this.uicls)},onDisable:function(){this.addClass(this.disabledClass)},onEnable:function(){this.removeClass(this.disabledClass)},setText:function(a){this.elTxt.update(a)}});Ext.reg("uisegmentedbutton",Ext.UI.SegmentedButton);
Ext.UI.SegmentedChkButton=Ext.extend(Ext.UI.SegmentedButton,{press:function(){(this.checked=!this.checked)?this.addClass(this.checkedClass):this.removeClass(this.checkedClass);this.fireEvent("afterclick",this)},afterRender:function(){Ext.UI.SegmentedChkButton.superclass.afterRender.apply(this,arguments);this.addClass("ui-segmentedbutton-chk")},onClick:function(a){a.stopEvent();this.disabled||this.fireEvent("click",this,a)&&this.press()}});Ext.reg("uisegmentedchkbutton",Ext.UI.SegmentedChkButton);
Ext.UI.SegmentedLedControl=Ext.extend(Ext.UI.SegmentedControl,{wrapCls:"ui-segmentedcontrol-led-wrap",afterRender:function(){Ext.UI.SegmentedLedControl.superclass.afterRender.apply(this,arguments);this.addClass("ui-segmentedcontrol-led")}});
Ext.UI.SegmentedLedButton=Ext.extend(Ext.UI.SegmentedButton,{initComponent:function(){Ext.UI.SegmentedLedButton.superclass.initComponent.apply(this,arguments);this.overCls="ui-segmentedbutton-led-over";this.disabledClass="ui-segmentedbutton-led-disabled";this.checkedClass="ui-segmentedbutton-led-checked"},afterRender:function(){Ext.UI.SegmentedLedButton.superclass.afterRender.apply(this,arguments);this.addClass("ui-segmentedbutton-led")},setEnabledLed:function(a){(this.enabledLed=a)?this.addClass("ui-segmentedbutton-led-on"):
this.removeClass("ui-segmentedbutton-led-on")}});Ext.reg("uisegmentedledbutton",Ext.UI.SegmentedLedButton);Ext.namespace("Ext.UI");
Ext.UI.Menu=Ext.extend(Ext.menu.Menu,{uicls:"ui-menu",shadow:false,autoWidth:true,initComponent:function(){Ext.UI.Menu.superclass.initComponent.call(this);this.on("show",this.onAfterShow,this);this.on("afterrender",this.onAfterRender,this)},onAfterShow:function(){for(var a=this.el.dom.getElementsByTagName("a"),b=0;b<a.length;b++)a[b].disabled=false},onAfterRender:function(){this.el.addClass(this.uicls);var a=this.el.child(".x-menu-list");a?a.addClass(" ui-shadow"):this.el.addClass(" ui-shadow");if(this.enableScrolling){this.scroller=
new Ext.UI.Scroller({dom:this.ul.dom,cls:"x-ui-menu-scroller",type:"vertical",showPer:0.6,margins:{top:0,right:0,bottom:0,left:0}});this.scroller.reg();this.on("hide",function(){this.scroller.hide()},this);this.on("beforehide",function(){return!this.scroller.scrolling},this)}},showAt:function(a,b){if(this.fireEvent("beforeshow",this)!==false){this.parentMenu=b;this.el||this.render();if(this.enableScrolling){this.el.setXY(a);this.constrainScroll(a[1]);a=[this.el.adjustForConstraints(a)[0],a[1]]}else a=
this.el.adjustForConstraints(a);this.el.setXY(a);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE){this.fireEvent("autosize",this);Ext.isIE8||this.el.repaint()}this.hidden=false;this.focus();this.fireEvent("show",this)}},destroy:function(){Ext.UI.Menu.superclass.destroy.apply(this,arguments);this.scroller&&this.scroller.destroy()}});Ext.reg("uimenu",Ext.UI.Menu);Ext.namespace("Ext.UI");
Ext.UI.Window=_._1(_._3.UI.Window,_.JSCom._9,Ext.Window,ISyncWindowResizeEvent,{uicls:"ui-window",closable:true,shadow:false,selectable:true,constrain:true,autoWidth:false,cancelbtn:null,closeAction:"hide",keyHandling:true,shim:false,title:"&nbsp;",constructor:function(a){this.acceptbtns=[];Ext.UI.Window.superclass.constructor.call(this,a);this.selectable||this.addClass("x-unselectable");this.keys=[{key:[Ext.EventObject.ENTER],scope:this,handler:this.onkeyenter},{key:[Ext.EventObject.ESC],
scope:this,handler:this.onkeycancel}];this.autoWidth&&this.on("beforeshow",this.onFirstShow,this)},onFirstShow:function(){this.body.dom.style.width="0px";var a=this.body.dom.scrollWidth+this.body.getComputedWidth();if(!this.width||a>this.width)this.setWidth(a-30+2);this.body.dom.style.width="auto";this.center();this.un("beforeshow",this.onFirstShow,this)},adjustSize:function(a,b){if(this.autoWidth){if(this.autoHeight)b="auto";return{width:a,height:b}}else return Ext.UI.Window.superclass.adjustSize.apply(this,
arguments)},fillBackGroundIE8:function(a,b,c,d,e,g,j,h){if(this.modal){if(Ext.isEmpty(this.raf))this.raf=Raphael(this.mask.id);this.raf.setSize(j,h);this.raf.clear();return this.raf.set(this.raf.ellipse(a,b,c,d).attr({fill:String.format("r({0}, {1})#ffffff-#010202",e>0?e:0,g>0?g:0),stroke:"none",opacity:0}))}},prepBk:function(a){if(_.isIE)a.innerHTML=document.shadowMask.toString();else{var b=document.shadowMask.xmlDocument.documentElement.cloneNode(true);Ext.isEmpty(a.firstChild)?a.appendChild(b):
a.replaceChild(b,a.firstChild)}},removeSVG:function(a){a&&a.removeChild(a.firstChild)},fillBackGround:function(a,b,c,d,e){if(this.mask&&this.mask.dom){document.getElementById(this.mask.id).style.display="none";var g=document.getElementById("svg_shadow");if(g){g.setAttribute("width",d);g.setAttribute("height",e);g=document.getElementById("shadow_gradient");g.setAttribute("cx",a);g.setAttribute("cy",b);g.setAttribute("r",c);a=document.getElementById("shadow_rect");a.setAttribute("width",d);a.setAttribute("height",
e)}document.getElementById(this.mask.id).style.display="block"}},drowBackGround:function(a){var b=Ext.lib.Dom.getViewWidth(true),c=Ext.lib.Dom.getViewHeight(true),d=a.left+(a.right-a.left)/2;a=a.top+(a.bottom-a.top)/2;var e=b>c?b:c;e=e/2+Math.abs(e/2-(b>c?d:a));this.fillBackGround(d,a,e,b,c)},centerTo:function(a){a=this.el.getAlignToXY(a,"c-c");this.setPagePosition(a[0],a[1]);return this},ISyncWindowResizeEvent:{OnResize:function(){this.drowBackGround(this.el.dom.getClientRects()[0]);return _5}},
initDraggable:function(){this.dd=new Ext.Window.DDExt(this)},onkeyenter:function(a,b){if(this.keyHandling)if(!b.target||(b.target.tagName||"").toLowerCase()!="textarea"){var c;for(a=0;a<this.acceptbtns.length;++a){var d=this.acceptbtns[a];if(d&&!d.disabled&&d.isVisible()){c=d;break}}if(c)if(c.handler)c.handler.apply(c.scope?c.scope:c,[c,b]);else c.fireEvent&&c.fireEvent("click",c,b)}},onkeycancel:function(a){if(this.keyHandling)if(this.cancelbtn&&!this.cancelbtn.disabled)if(this.cancelbtn.handler)this.cancelbtn.handler.apply(this.cancelbtn.scope?
this.cancelbtn.scope:this.cancelbtn,[this.cancelbtn,a]);else this.cancelbtn.fireEvent&&this.cancelbtn.fireEvent("click",this.cancelbtn,a);else!this.cancelbtn&&this[this.closeAction]&&this[this.closeAction]()},onRender:function(a,b){Ext.UI.Window.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls);this.el.addClass("ui-shadow");this.resizable&&this.el.addClass(this.uicls+"-resizable");if(!this.selectable){this.el.dom.setAttribute("onselectstart","return false;");this.el.dom.setAttribute("unselectable",
"on");if(!Ext.isEmpty(this.mask)){this.mask.dom.setAttribute("onselectstart","return false;");this.mask.dom.setAttribute("unselectable","on")}}this.header.addClass("x-ellipsis");this.header.on("touchstart",function(c){c=c.browserEvent.touches.item(0);this.touchY=c.clientY-this.y;this.touchX=c.clientX-this.x;return false},this);this.header.on("touchmove",function(c){c.preventDefault();c.stopEvent();c=c.browserEvent.touches.item(0);this.setPosition(c.clientX-this.touchX,c.clientY-this.touchY);this.drowBackGround(this.el.dom.getClientRects()[0]);
return false},this);for(a=0;this.buttons&&a<this.buttons.length;++a){this.buttons[a].acceptbtn&&this.acceptbtns.push(this.buttons[a]);if(this.buttons[a].cancelbtn)this.cancelbtn=this.buttons[a]}},ghost:function(a){var b=this.uicls+"-ghost";a=Ext.isDefined(a)?b+" "+a:b;a=this.createGhost(a);a.last().setHeight(a.last().getHeight()-15-(Ext.isIE?4:0));a.createChild({tag:"div",cls:b+"-bl"}).createChild({tag:"div",cls:b+"-br"}).createChild({tag:"div",cls:b+"-bc"});b=this.getBox(true);a.setLeftTop(b.x,b.y);
a.setWidth(b.width);this.el.hide();return this.activeGhost=a},beforeShow:function(){Ext.UI.Window.superclass.beforeShow.call(this);if(this.modal){Ext.getBody().addClass("x-body-masked");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.prepBk(document.getElementById(this.mask.id));this.drowBackGround(this.el.dom.getClientRects()[0]);this.mask.show();_a(_7(_._3.UI.SyncResizeEventer),"_i1").Advise(this)}},afterShow:function(){Ext.UI.Window.superclass.afterShow.call(this);
this.modal&&FocusManager.pushActive(this.el)},hide:function(){Ext.dd.DragDropMgr.stopDrag();Ext.UI.Window.superclass.hide.apply(this,arguments)},afterHide:function(){Ext.UI.Window.superclass.afterHide.call(this);_a(_7(_._3.UI.SyncResizeEventer),"_i1").Unadvise(this);this.mask&&this.removeSVG(document.getElementById(this.mask.id));this.modal&&FocusManager.popActive()}});
Ext.Window.DDExt=Ext.extend(Ext.Window.DD,{constructor:function(a){Ext.Window.DDExt.superclass.constructor.call(this,a)},onDrag:function(a){Ext.Window.DDExt.superclass.onDrag.call(this,a);this.win.drowBackGround(this.win.activeGhost.dom.getClientRects()[0])}});Ext.UI.Window.ShadowSVG=function(){if(!_.isDefined(document.shadowMask))document.shadowMask=new _.Xml.document('<svg version="1.1" id="svg_shadow" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="0" height="0"  xml:space="preserve"><defs><radialGradient id="shadow_gradient" cx="0" cy="0" r="0" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#020202;stop-opacity: 0.1"></stop><stop offset="1" style="stop-color:#020202;stop-opacity: 0.5"></stop></radialGradient></defs><rect  id="shadow_rect" x="0" y="0" opacity="0.8" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="0" height="0"></rect></svg>')}();
Ext.reg("uiwindow",Ext.UI.Window);Ext.namespace("Ext.UI");
Ext.UI.SpinnerField=Ext.extend(Ext.form.SpinnerField,{boxLabel:null,uicls:"ui-spinnerfield",disabledClass:"ui-spinnerfield-disabled",fnFormat:function(a){return a},initEvents:function(){Ext.UI.SpinnerField.superclass.initEvents.call(this);this.on("afterrender",function(){var a=Ext.id(),b=Ext.id(),c=Ext.id();if(this.cls){this.getEl().removeClass(this.cls);this.wrap.addClass(this.cls)}this.wrap.addClassOnOver(this.uicls+"-over");this.wrap.setStyle("width",this.width?this.width+"px":"auto");this.el.setStyle("width",
this.width?this.width-24+"px":"100%");this.wrap.addClass(this.uicls);this.wrap.dom.innerHTML='<div class="'+this.uicls+'-ml"><div class="'+this.uicls+'-mr"><div class="'+this.uicls+'-mc" ><table cellpadding=0 cellspacing=0 border=0 style="table-layout: fixed;"><tr><td id="'+b+'" style="width:100%;margin: 0;vertical-align: top;"><div id="'+a+'" class="ui-spinnerfield-dis" style="display:none;" ></div></td><td id="'+c+'" class="ui-spinnerfield-trigtd"></td></tr></table></div></div></div>';Ext.get(b).appendChild(this.el);
Ext.get(c).appendChild(this.spinner.trigger);this.ui_disabled=Ext.get(a);this.setRawValue(this.getValue());this.disabled&&this.ui_disabled.setDisplayed(true)},this);this.el.on("focus",function(){this.setValue(this.getValue())},this);this.on("valid",function(){this.setRawValue(this.getValue())},this);this.on("invalid",function(){var a=this.getValue();if(a>this.maxValue)this.setRawValue(this.maxValue);else a<this.minValue?this.setRawValue(this.minValue):this.setRawValue(this.value)},this)},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},
setRawValue:function(a){a=this.rendered?(this.el.dom.value=Ext.isEmpty(a)?"":this.fnFormat(a)+(this.boxLabel?" "+this.boxLabel:"")):"";this.ui_disabled&&this.ui_disabled.update(a);return a},onDisable:function(){this.el.setDisplayed(false);if(this.ui_disabled!=undefined){this.ui_disabled.setDisplayed(true);this.ui_disabled.update(this.el.getValue())}this.spinner.disabled=true},onEnable:function(){this.ui_disabled.setDisplayed(false);this.el.setDisplayed(true);this.spinner.disabled=false}});
Ext.reg("uispinnerfield",Ext.UI.SpinnerField);Ext.namespace("Ext.UI");
Ext.UI.FileUploadField=Ext.extend(Ext.BoxComponent,{buttonText:"Browse...",buttonCls:"ui-button-style1",inputCls:"ui-textfield-style1",initComponent:function(){Ext.UI.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(a,b){Ext.UI.FileUploadField.superclass.onRender.call(this,a,b);tfid=Ext.id();btnid=Ext.id();fileid=Ext.id();this.el.dom.innerHTML='<table cellpadding=0 cellspacing=0 border=0 class="uifile"><tr><td id="'+tfid+'" style="vertical-align:top;width:100%"></td><td id="'+
btnid+'" style="vertical-align:top;"><input id="'+fileid+'" class="uifile-file" type=file size=1></td></tr></table>';this.textfield=new Ext.UI.TextField({cls:"uifile-textfield",width:200,renderTo:tfid});this.button=new Ext.UI.Button({cls:"uifile-btn",text:this.buttonText,renderTo:btnid});this.fileInput=Ext.get(fileid);this.fileInput.setWidth(this.button.getWidth());this.fileInput.setHeight(this.button.getHeight());this.bindListeners()},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.getEl().addClass(this.button.overCls)},
mouseleave:function(){this.button.getEl().removeClass(this.button.overCls)},mousedown:function(){this.button.getEl().addClass(this.button.clickClass)},mouseup:function(){this.button.getEl().removeClass([this.button.overCls,this.button.clickClass])},change:function(){var a=this.fileInput.dom.value,b=String(a).lastIndexOf("\\");a=b!=-1?a.substr(b+1,a.length):a;this.textfield.setValue(a);this.fireEvent("fileselected",this,a)}})},setValue:function(a){this.textfield.setValue(a)},getValue:function(){this.textfield.getValue()},
onDestroy:function(){Ext.UI.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.textfield,this.button,this.wrap)},onDisable:function(){this.doDisable(true)},onEnable:function(){this.doDisable(false)},doDisable:function(a){this.fileInput.dom.disabled=a;this.textfield.setDisabled(a);this.button.setDisabled(a)}});Ext.reg("uifileuploadfield",Ext.UI.FileUploadField);Ext.namespace("Ext.UI");
Ext.UI.GridPanel=Ext.extend(Ext.grid.GridPanel,{uicls:"ui-gridview",autoHeight:false,enableHdMenu:false,trackMouseOver:false,disableScroll:false,initComponent:function(){Ext.UI.GridPanel.superclass.initComponent.call(this);this.on("afterrender",function(a){this.disableScroll||ScrollManager.reg(a.el.child(".x-grid3-scroller").dom)},this)},onRender:function(a,b){Ext.UI.GridPanel.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls)},getView:function(){if(!this.view)this.view=new Ext.UI.GridView(this.viewConfig);
return this.view},getVisibilityEl:function(){return this.hideParent?this.container:this.wrap}});Ext.reg("uigridpanel",Ext.UI.GridPanel);Ext.UI.EditorGridPanel=Ext.extend(Ext.grid.EditorGridPanel,{uicls:"ui-gridview",autoHeight:true,onRender:function(a,b){Ext.UI.EditorGridPanel.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls)},getView:function(){if(!this.view)this.view=new Ext.UI.GridView(this.viewConfig);return this.view}});Ext.reg("uieditorgridpanel",Ext.UI.EditorGridPanel);Ext.namespace("Ext.UI");
Ext.grid.GridView.UIColumnDragZone=Ext.extend(Ext.grid.GridView.ColumnDragZone,{afterRepair:function(){this.dragging=false}});
Ext.UI.GridView=Ext.extend(Ext.grid.GridView,{markDirty:false,scrollOffset:0,forceFit:true,getRowClass:function(a,b){if(b%2==1)return"x-grid3-row-odd";return"x-grid3-row-even"},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(a.enableColumnResize!==false)this.splitZone=
new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom);if(a.enableColumnMove){this.columnDrag=new Ext.grid.GridView.UIColumnDragZone(a,this.innerHd);this.columnDrag.getProxy().ghost.addClass(this.grid.uicls);this.columnDrag.getProxy().el.shadow=false;this.columnDrag.getProxy().animRepair=false;this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}if(a.enableHdMenu!==false){this.hmenu=new Ext.UI.Menu({id:a.id+"-hctx"});this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},
{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(a.enableColumnHide!==false){this.colMenu=new Ext.UI.Menu({id:a.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add("-",{itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}a.trackMouseOver&&this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut});
if(a.enableDragDrop||a.enableDrag)this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||"GridDD"});this.updateHeaderSortState()},beforeColMenuShow:function(){var a=this.cm,b=a.getColumnCount(),c=this.colMenu,d;c.removeAll();for(d=0;d<b;d++)a.config[d].hideable!==false&&c.add(new Ext.menu.CheckItem({text:a.getColumnHeader(d),itemId:"col-"+a.getColumnId(d),checked:!a.isHidden(d),disabled:a.config[d].hideable===false,hideOnClick:false}))},getTotalWidth:function(){return Math.max(this.cm.getTotalWidth(),
this.getGridInnerWidth())+"px"}});Ext.reg("uigridview",Ext.UI.GridView);Ext.namespace("Ext.UI");
Ext.UI.ProgressIndicator=Ext.extend(Ext.ProgressBar,{uicls:"ui-progressindicator",undetermine:false,onRender:function(a,b){Ext.UI.ProgressIndicator.superclass.onRender.call(this,a,b);this.progressBar.setStyle("height","");this.el.down("div").wrap({cls:this.uicls+"-mr"}).wrap({cls:this.uicls+"-ml"});this.el.addClass(this.uicls);this.undetermine&&this.progressBar.addClass("x-progressindicator-barber-pole")},updateProgress:function(a,b){this.value=a||0;b&&this.updateText(b);if(this.rendered&&!this.isDestroyed){this.width=
this.getWidth()||this.width;var c=Math.floor(a*(this.width-6));this.progressBar.setStyle("width",c+"px");this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(c)}this.fireEvent("update",this,a,b);return this}});Ext.reg("uiprogressindicator",Ext.UI.ProgressIndicator);Ext.namespace("Ext.UI");
Ext.UI.RoundButton=Ext.extend(Ext.BoxComponent,{uicls:"ui-roundbutton",iconCls:"",title:"",disabled:false,initComponent:function(){Ext.UI.RoundButton.superclass.initComponent.call(this);this.addEvents("click")},onRender:function(a,b){Ext.UI.RoundButton.superclass.onRender.call(this,a,b);a={cls:this.uicls+"-icon "+this.iconCls};this.title&&(a.title=this.title);a=this.el.createChild(a);a.setWidth(this.width);a.setHeight(this.height);this.el.addClass(this.uicls);this.el.on("click",this.onClick,this)},
onClick:function(a){this.disabled||this.fireEvent("click",this,a)}});Ext.reg("uiroundbutton",Ext.UI.RoundButton);Ext.namespace("Ext.UI");
Ext.UI.LoadMask=_._1(_.JSCom._9,ISyncWindowResizeEvent,{constructor:function(a,b){this.isInitialized=false;this.el=Ext.isEmpty(a)?Ext.get(document.body):Ext.get(a);this.config=Ext.isDefined(b)?b:{};this.config=Ext.apply({intervalId:undefined,delay:Ext.UI.LoadMask.DELAY,msgCls:"ui-mask-style1",msg:"",spinner:null,hidden:true,type:0,background:true,frame:true},this.config);Ext.UI.LoadMask.superclass.constructor.call(this,this.config);if(!(Ext.UI.LoadMask.DISABLE||Ext.UI.LoadMask.DISABLELARGE&&
b.type==Ext.UI.LoadMask.LARGE||Ext.UI.LoadMask.DISABLEMIDDLE&&b.type==Ext.UI.LoadMask.MIDDLE||Ext.UI.LoadMask.DISABLESMALL&&b.type==Ext.UI.LoadMask.SMALL)){(a=_7(_._3.UI.SyncResizeEventer))&&_a(a,"_i1").Advise(this);this.addEvents("beforeload","resize")}},initComponent:function(){if(!this.isInitialized){this.el=Ext.get(this.el);if(this.store){this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad});this.removeMask=Ext.value(this.removeMask,
false)}else{var a=this.el.getUpdater();a.showLoadIndicator=false;a.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad});this.removeMask=Ext.value(this.removeMask,true)}this.isInitialized=true}},destroy:function(){if(this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoad,this)}else{var a=this.el.getUpdater();a.un("beforeupdate",this.onBeforeLoad,this);a.un("update",this.onLoad,this);
a.un("failure",this.onLoad,this)}},fillBackGroundIE8:function(a,b,c,d,e,g,j,h){this.raf&&this.raf.clear();this.raf=Raphael(this.mask.id);this.raf.setSize(j,h);return this.raf.set(this.raf.ellipse(a,b,c,d).attr({fill:String.format("r({0}, {1})#ffffff-#010202",e>0?e:0,g>0?g:0),stroke:"none",opacity:0}))},prepBk:function(a){this.shadowId=Ext.id();this.gradientId=Ext.id();this.rectId=Ext.id();var b=new _.Xml.document('<svg version="1.1" id="'+this.shadowId+'" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="0" height="0"  xml:space="preserve"><defs><radialGradient id="'+
this.gradientId+'" cx="0" cy="0" r="0" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#020202;stop-opacity: 0.1"></stop><stop offset="1" style="stop-color:#020202;stop-opacity: 0.5"></stop></radialGradient></defs><rect  id="'+this.rectId+'" x="0" y="0" fill-rule="" clip-ruleevenodd="evenodd" opacity="0.8" fill="#FFFFFF" width="0" height="0"></rect></svg>');if(_.isIE)a.innerHTML=b.toString();else{b=b.xmlDocument.documentElement.cloneNode(true);Ext.isEmpty(a.firstChild)?a.appendChild(b):
a.replaceChild(b,a.firstChild)}},fillBackGround:function(a,b,c,d,e){if(this.mask&&this.mask.dom){this.mask.dom.style.display="none";var g=document.getElementById(this.shadowId);if(g){g.setAttribute("width",d);g.setAttribute("height",e);g=document.getElementById(this.gradientId);g.setAttribute("cx",a);g.setAttribute("cy",b);g.setAttribute("r",c);a=document.getElementById(this.rectId);a.setAttribute("width",d);a.setAttribute("height",e)}this.mask.dom.style.display="block"}},drowBackGround:function(a){if(this.config.background){var b=
this.el.getWidth();if(b==0)b=Ext.lib.Dom.getViewWidth(true);var c=this.el.dom.scrollHeight;if(c==0)c=Ext.lib.Dom.getViewHeight(true);var d=a.offsetWidth/2;a=a.offsetHeight/2;var e=b>c?b:c;e=e/2+Math.abs(e/2-(b>c?d:a));this.fillBackGround(d,a,e,b,c);this.mask&&this.mask.on("mousewheel",function(g){g.stopEvent()})}},ISyncWindowResizeEvent:{OnResize:function(){if(this.mask&&this.mask.dom)if(!this.config.hidden){this.drowBackGround(this.el.dom);this.maskMsg&&this.maskMsg.center(this.el);this.fireEvent("resize",
this)}return _5}},show:function(a,b){if(this.config.hidden){clearInterval(this.deferId);if(!(Ext.UI.LoadMask.DISABLE||Ext.UI.LoadMask.DISABLELARGE&&this.config.type==Ext.UI.LoadMask.LARGE||Ext.UI.LoadMask.DISABLEMIDDLE&&this.config.type==Ext.UI.LoadMask.MIDDLE||Ext.UI.LoadMask.DISABLESMALL&&this.config.type==Ext.UI.LoadMask.SMALL)){if(b==0||this.config.delay==0)this.showInDelay(a);else this.deferId=this.showInDelay.defer(b?b:this.config.delay,this,[a]);this.config.hidden=false;this.fireEvent("show",
this)}}},showInDelay:function(a){if(!Ext.isEmpty(a))this.el=a;this.initComponent();this.onBeforeLoad();this.config.hidden=false},hide:function(){clearInterval(this.deferId);if(this.mask){this.onLoad();clearInterval(this.config.intervalId)}this.config.hidden=true;this.fireEvent("hide",this)},setVisible:function(a){if(!Ext.isEmpty(this.el)&&!Ext.isEmpty(this.el.setVisible)){this.el.setVisible(a);this.config.hidden=a}},getSpinner:function(){try{for(var a=this.el.dom.getElementsByTagName("div"),b=this.getMsgCls(),
c=0;c<a.length;c++)if(a[c].className.indexOf(b)!=-1)return new Ext.Element(a[c].firstChild)}catch(d){}return null},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled&&this.el){this.mask=this.el.mask(this.config.msg,this.getMsgCls());var a=this.getSpinner();this.maskMsg=a.parent();if(this.config.spinner===false)this.maskMsg.addClass(this.config.msgCls+"-nospinner");else this.config.spinner=a;this.config.frame||this.maskMsg.addClass(this.config.msgCls+"-transparent");
this.prepBk(this.mask.dom);this.drowBackGround(this.el.dom);this.mask.on("mousemove",function(b){b.stopEvent()},this)}this.fireEvent("beforeload",this)},getMsgCls:function(){switch(this.config.type){case Ext.UI.LoadMask.SMALL:return this.config.msgCls+"-small";case Ext.UI.LoadMask.MIDDLE:return this.config.msgCls+"-middle";case Ext.UI.LoadMask.LARGE:case Ext.UI.LoadMask.LSPECIAL:default:return this.config.msgCls+"-large"}},getStep:function(){switch(this.config.type){case Ext.UI.LoadMask.SMALL:return 16;
case Ext.UI.LoadMask.MIDDLE:return 24;case Ext.UI.LoadMask.LARGE:case Ext.UI.LoadMask.LSPECIAL:default:return 32}}});Ext.UI.LoadMask.LARGE=0;Ext.UI.LoadMask.MIDDLE=1;Ext.UI.LoadMask.SMALL=2;Ext.UI.LoadMask.LSPECIAL=3;Ext.UI.LoadMask.DELAY=0;Ext.UI.LoadMask.DISABLE=false;Ext.UI.LoadMask.DISABLELARGE=false;Ext.UI.LoadMask.DISABLEMIDDLE=false;Ext.UI.LoadMask.DISABLESMALL=false;
Ext.UI.MessageBox=function(){var a,b,c,d,e,g,j,h,q,l,u,t,w="",y="",v=["ok","yes","no","cancel"],k=function(f){l[f].blur();if(a.isVisible()){a.hide();s();Ext.callback(b.fn,b.scope||window,[f,u.dom.value,b],1)}},s=function(){b&&b.cls&&a.el.removeClass(b.cls);h.reset()},z=function(f){var i=0,p;if(!f){Ext.each(v,function(m){l[m].hide()});return i}a.footer.dom.style.display="";Ext.iterate(l,function(m,n){if(p=f[m]){n.show();n.setText(Ext.isString(p)?p:Ext.UI.MessageBox.buttonText[m]);i+=n.getEl().getWidth()+
15}else n.hide()});return i};return{getDialog:function(f){if(!a){var i=[];l={};Ext.each(v,function(p){i.push(l[p]=new Ext.UI.Button({width:100,text:this.buttonText[p],handler:k.createCallback(p),hideMode:"offsets",uicls:"ui-button",acceptbtn:p=="yes"||p=="ok"}))},this);a=new Ext.UI.Window({autoCreate:true,title:f,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"right",width:400,height:100,minHeight:80,plain:true,
footer:true,closable:true,close:function(){b&&b.buttons&&b.buttons.no&&!b.buttons.cancel?k("no"):k("cancel")},fbar:new Ext.Toolbar({items:i,enableOverflow:false})});a.render(document.body);a.getEl().addClass("x-window-dlg");c=a.mask;d=a.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'});q=Ext.get(d.dom.firstChild);
f=d.dom.childNodes[1];e=Ext.get(f.firstChild);g=Ext.get(f.childNodes[2].firstChild);g.enableDisplayMode();g.addKeyListener([10,13],function(){if(a.isVisible()&&b&&b.buttons)if(b.buttons.ok)k("ok");else b.buttons.yes&&k("yes")});j=Ext.get(f.childNodes[2].childNodes[1]);j.enableDisplayMode();h=new Ext.ProgressBar({renderTo:d});d.createChild({cls:"x-clear"})}return a},updateText:function(f){!a.isVisible()&&!b.width&&a.setSize(this.maxWidth,100);e.update(f?f+" ":"&#160;");var i=y!=""?q.getWidth()+q.getMargins("lr"):
0,p=e.getWidth()+e.getMargins("lr"),m=a.getFrameWidth("lr"),n=a.body.getFrameWidth("lr");p=Math.max(Math.min(b.width||i+p+m+n,b.maxWidth||this.maxWidth),Math.max(b.minWidth||this.minWidth,t||0));b.prompt===true&&u.setWidth(p-i-m-n);if(b.progress===true||b.wait===true)h.setSize(p-i-m-n);if(Ext.isIE&&p==t)p+=4;e.update(f||"&#160;");a.setSize(p,"auto").center();return this},updateProgress:function(f,i,p){h.updateProgress(f,i);p&&this.updateText(p);return this},isVisible:function(){return a&&a.isVisible()},
hide:function(){var f=a?a.activeGhost:null;if(this.isVisible()||f){a.hide();s();f&&a.unghost(false,false)}return this},show:function(f){this.isVisible()&&this.hide();if(!this.buttonText)this.buttonText=_TR?{ok:_TR("OK"),cancel:_TR("CANCEL"),yes:_TR("YES"),no:_TR("NO")}:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"};b=f;var i=this.getDialog(b.title||"&#160;");i.setTitle(b.title||"&#160;");var p=b.closable!==false&&b.progress!==true&&b.wait!==true;i.tools.close.setDisplayed(p);u=g;b.prompt=b.prompt||(b.multiline?
true:false);if(b.prompt)if(b.multiline){g.hide();j.show();j.setHeight(Ext.isNumber(b.multiline)?b.multiline:this.defaultTextHeight);u=j}else{g.show();j.hide()}else{g.hide();j.hide()}u.dom.value=b.value||"";if(b.prompt)i.focusEl=u;else{f=b.buttons;var m=null;if(f&&f.ok)m=l.ok;else if(f&&f.yes)m=l.yes;if(m)i.focusEl=m}Ext.isDefined(b.iconCls)&&i.setIconClass(b.iconCls);this.setIcon(Ext.isDefined(b.icon)?b.icon:w);t=z(b.buttons);h.setVisible(b.progress===true||b.wait===true);this.updateProgress(0,b.progressText);
this.updateText(b.msg);b.cls&&i.el.addClass(b.cls);b.centerEl&&i.centerTo(b.centerEl);i.proxyDrag=b.proxyDrag===true;i.modal=b.modal!==false;i.mask=b.modal!==false?c:false;if(!i.isVisible()){document.body.appendChild(a.el.dom);i.setAnimateTarget(b.animEl);i.on("show",function(){p===true?i.keyMap.enable():i.keyMap.disable()},this,{single:true});i.show(b.animEl)}b.wait===true&&h.wait(b.waitConfig);return this},setIcon:function(f){if(a){w=undefined;if(f&&f!=""){q.removeClass("x-hidden");q.replaceClass(y,
f);d.addClass("x-dlg-icon");y=f}else{q.replaceClass(y,"x-hidden");d.removeClass("x-dlg-icon");y=""}return this}else w=f},progress:function(f,i,p){this.show({title:f,msg:i,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:p});return this},wait:function(f,i,p){this.show({title:i,msg:f,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:p});return this},info:function(f){this.show({title:f.title?f.title:_TR("MESSAGEBOX_INFO"),
msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.QUESTION,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.OK,fn:f.fn?f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},warning:function(f){this.show({title:f.title?f.title:_TR("MESSAGEBOX_WARNING"),msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.WARNING,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.OK,fn:f.fn?
f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},error:function(f){this.show({title:f.title?f.title:_TR("MESSAGEBOX_ERROR"),msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.ERROR,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.OK,fn:f.fn?f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},confirm:function(f){this.show({title:f.title?
f.title:"",msg:f.msg?f.msg:"",icon:f.icon?f.icon:this.QUESTION,height:f.height?f.height:170,width:f.width?f.width:400,buttons:f.buttons?f.buttons:this.YESNO,fn:f.fn?f.fn:undefined,scope:f.scope?f.scope:this,minWidth:this.minWidth,centerEl:f.centerEl?f.centerEl:undefined});return this},prompt:function(f,i,p,m,n,x){this.show({title:f,msg:i,buttons:options.buttons?options.buttons:this.OKCANCEL,fn:p,minWidth:this.minPromptWidth,scope:m,prompt:true,multiline:n,value:x});return this},OK:{ok:true},CANCEL:{cancel:true},
OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:null}}();Ext.namespace("Ext.UI");
Ext.UI.Scroller=Ext.extend(Ext.util.Observable,{target:null,container:null,rendered:false,dynamic:true,hidden:false,destroyed:false,type:"vertical",margins:{top:2,right:2,bottom:2,left:2},CUR_OPACITY:0,MAX_OPACITY:100,MIN_OPACITY:0,scrolling:false,wheeling:false,touching:false,scrollY:0,scrollX:0,showPer:0.8,wheelProcId:-1,animProcId:-1,touchProcId:-1,correctionCoef:0,notAppliedPart:0,constructor:function(a){if(!a.dom)return null;Ext.UI.Scroller.superclass.constructor.call(this,a);Ext.apply(this,
a);this.target=Ext.get(this.dom);this.container=Ext.get(this.renderTo||document.body);this.addEvents("scroll","mousewheel");ScrollManager.regItem(this)},getId:function(){return Ext.id(this.dom)},reg:function(){this.render()},unreg:function(){},render:function(){if(!this.rendered){var a="scroller-"+this.type+"-";this.rendered=true;this.el={};this.el.root=this.container.createChild({tag:"div",cls:a+"root "+(this.cls||"")});this.el.slider=this.el.root.createChild({tag:"div",cls:a+"slider"});if(_.isWebKit){this.type==
"vertical"?this.target.setStyle({"overflow-y":"auto"}):this.target.setStyle({"overflow-x":"auto"});this.el.root.setStyle("display","none");this.el.slider.setStyle("display","none");var b=this,c=function(){b.fireEvent("scroll",b)};this.target.on("scroll",c);this.on("destroy",function(){b.target.un("scroll",c)})}else{this.target.setStyle("overflow","hidden");this.initEvents();if(this.dynamic)this.onHide();else{this.setOpacity(this.MAX_OPACITY);this.onShow();this.resize()}}}},destroy:function(){this.destroyEvents();
this.el.root.remove();this.destroyed=true},destroyEvents:function(){},show:function(a){if(this.rendered&&this.hidden){this.hidden=false;if(a){var b=this.getOpacity(),c=this;clearInterval(this.animProcId);this.animProcId=setInterval(function(){b+=25;c.setOpacity(b);b>=c.MAX_OPACITY&&clearInterval(c.animProcId)},350)}this.resize()}},onShow:function(){this.hidden=false;this.rendered&&this.el.root.setStyle("visibility","visible")},hide:function(a){if(this.rendered&&!this.hidden){this.hidden=true;if(a){clearInterval(this.animProcId);
this.setOpacity(this.MIN_OPACITY)}this.el.root.setStyle("visibility","hidden")}},onHide:function(){this.hidden=true;this.rendered&&this.el.root.setStyle("visibility","hidden")},resize:function(){if(this.target.getHeight()*this.target.getWidth()){var a=this.target.getXY();if(this.type=="horizontal"){var b=a[0]+this.margins.left;a=a[1]+this.target.getHeight()-this.el.root.getHeight()-this.margins.bottom;this.el.root.setStyle("left",b+"px");this.el.root.setStyle("top",a+"px");a=this.target.getWidth()-
this.margins.left-this.margins.right;this.el.root.setStyle("width",a+"px");b=this.target.getWidth()/this.target.dom.scrollWidth;b<1?this.onShow():this.onHide();this.el.slider.setStyle("width",a*b+"px");b=this.target.dom.scrollLeft/this.target.dom.scrollWidth;this.el.slider.setStyle("left",a*b+"px")}else{b=a[0]+this.target.getWidth()-this.el.root.getWidth()-this.margins.right;a=a[1]+this.margins.top;this.el.root.setStyle("left",b+"px");this.el.root.setStyle("top",a+"px");a=this.target.getHeight()-
this.margins.top-this.margins.bottom;this.el.root.setStyle("height",a+"px");b=this.target.getHeight()/this.target.dom.scrollHeight;b<1?this.onShow():this.onHide();b=a*b;this.correctionCoef=0;if(b<5){this.correctionCoef=b-5;b=5}this.el.slider.setStyle("height",b+"px");b=this.target.dom.scrollTop/this.target.dom.scrollHeight;this.el.slider.setStyle("top",a*b+this.correctionCoef*b+"px")}this.el.root.setStyle("z-index",this.getParentZIndex(this.target))}else this.hidden||this.onHide()},scroll:function(a){a+=
this.notAppliedPart;this.notAppliedPart=a-parseInt(a);a=parseInt(a);if(this.type=="horizontal")this.target.dom.scrollLeft+=a;else this.target.dom.scrollTop+=a;this.resize();this.fireEvent("scroll",this)},addRelation:function(a){a.on("scroll",function(){!this.hidden&&this.resize()},this)},setOpacity:function(a){this.CUR_OPACITY=a>this.MAX_OPACITY?this.MAX_OPACITY:a;this.CUR_OPACITY=a<this.MIN_OPACITY?this.MIN_OPACITY:this.CUR_OPACITY;if(this.rendered){this.el.root.setStyle("filter","alpha(opacity="+
this.CUR_OPACITY+")");this.el.root.setStyle("opacity",this.CUR_OPACITY/100)}},getOpacity:function(){this.setOpacity(this.CUR_OPACITY);return this.CUR_OPACITY},initEvents:function(){function a(k){var s=t.target.getXY(),z=k.xy[0];k=k.xy[1];if(z>=s[0]+t.target.getWidth()||z<=s[0]||k>=s[1]+t.target.getHeight()||k<=s[1])return false;return true}function b(){this.scrolling=false}function c(k){if(!this.touching){if(this.scrolling)if(this.type=="horizontal"){var s=this.el.root.getWidth()/this.target.dom.scrollWidth;
this.scroll((k.xy[0]-this.scrollX)/s);this.scrollX=k.xy[0]}else{s=this.el.root.getHeight()/this.target.dom.scrollHeight;this.scroll((k.xy[1]-this.scrollY)/s);this.scrollY=k.xy[1]}!a(k)&&!this.scrolling&&this.dynamic&&this.hide(false)}}function d(k){var s=k.xy[0];k=k.xy[1];if(s>=document.body.offsetWidth||s<=0||k>=document.body.offsetHeight||k<=0)this.scrolling=false}function e(k){this.scrolling=true;this.scrollX=k.xy[0];this.scrollY=k.xy[1]}function g(k){if(!(!this.dynamic||this.touching)){var s=
this.target.getXY();k=this.type=="horizontal"?(k.xy[1]-s[1])/this.target.getHeight():(k.xy[0]-s[0])/this.target.getWidth();if(k>this.showPer&&k<1)this.show(false);else!this.wheeling&&!this.scrolling&&this.dynamic&&this.hide(false)}}function j(k){var s=k.browserEvent;s=s.detail?s.detail*-1:s.wheelDelta/40;s=s>0?-100:100;this.wheeling=true;this.dynamic&&this.show(false);this.scroll(s);clearInterval(this.wheelProcId);this.wheelProcId=function(){this.wheeling=false;a(k)&&g.createDelegate(this,[k])}.defer(750,
this);if(this.fireEvent("mousewheel",k,this)!==false)if(this.type=="vertical"&&this.target.dom.scrollTop&&this.target.dom.clientHeight+this.target.dom.scrollTop<this.target.dom.scrollHeight||this.type=="horizontal"&&this.target.dom.scrollLeft&&this.target.dom.clientWidth+this.target.dom.scrollLeft<this.target.dom.scrollWidth)k.stopEvent()}function h(k){this.touching=true;clearInterval(this.touchProcId);k=k.browserEvent.touches.item(0);this.scrollY=k.clientY+this.target.dom.scrollTop;this.scrollX=
k.clientX+this.target.dom.scrollLeft}function q(k){this.dynamic&&this.show(false);k=k.browserEvent.touches.item(0);if(this.type=="horizontal")this.target.dom.scrollLeft=this.scrollX-k.clientX;else this.target.dom.scrollTop=this.scrollY-k.clientY;this.resize();this.fireEvent("scroll",this);return false}function l(){this.touchProcId=function(){this.dynamic&&this.hide(false)}.defer(500,this)}function u(){this.dynamic&&this.hide(false)}var t=this;this.target_mouseWheel=j;var w=Ext.get(document.body);
w.on("mouseup",b,this);w.on("mousemove",c,this);w.on("mouseout",d,this);var y=this.el.slider;y.on("mousedown",e,this);var v=this.target;v.on("mousemove",g,this);v.on("mousewheel",j,this);v.on("touchstart",h,this);v.on("touchmove",q,this);v.on("touchend",l,this);Ext.EventManager.on(window,"resize",u,this);this.destroyEvents=function(){w.un("mouseup",b,t);w.un("mousemove",c,t);w.un("mouseout",d,t);y.un("mousedown",e,t);v.un("mousemove",g,t);v.un("mousewheel",j,t);v.un("touchstart",h,t);v.un("touchmove",
q,t);v.un("touchend",l,t);Ext.EventManager.un(window,"resize",u,t)}},getParentZIndex:function(a){a=Ext.getDom(a);for(var b,c=0;a;){b=parseInt(Ext.fly(a).getStyle("z-index"));if(!isNaN(b)&&b>c)c=b;a=a.offsetParent}return c}});
Ext.UI.ScrollManager=Ext.extend(Ext.util.Observable,{VERTICAL:0,HORIZONTAL:1,OVERALL:2,targets:{},items:[],constructor:function(a){Ext.UI.ScrollManager.superclass.constructor.call(this,a)},reg:function(a,b){a=Ext.getDom(a);b=b||this.VERTICAL;if(a&&!this.targets[a.id]){var c=[];if(b==0)c.push(new Ext.UI.Scroller({dom:a,type:"vertical"}));else if(b==1)c.push(new Ext.UI.Scroller({dom:a,type:"horizontal"}));else{c.push(new Ext.UI.Scroller({dom:a,type:"vertical"}));c.push(new Ext.UI.Scroller({dom:a,type:"horizontal",
margins:{right:13,bottom:2,left:2}}))}for(b=0;b<c.length;b++)c[b].reg();this.targets[a.id]=c}return null},unreg:function(){},regItem:function(a){for(var b=a.target.dom;b;){this.checkTreeRelation(b,a);b=b.parentNode}this.items.push(a)},checkTreeRelation:function(a,b){for(var c=0;c<this.items.length;++c)this.items[c].target.dom==a&&b.addRelation(this.items[c])}});Ext.UI.ScrollManager=new Ext.UI.ScrollManager;ScrollManager=Ext.UI.ScrollManager;Ext.namespace("Ext.UI");
Ext.UI.DatePicker=Ext.extend(Ext.DatePicker,{uicls:"ui-datepicker",initComponent:function(){this.setLocText();Ext.UI.DatePicker.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spLCManager=a.getSystemManager().getLocaleManager();_a(this.spLCManager,"_i1").Advise(this)}},setLocText:function(){var a=function(b,c){var d=_TR(b);if(d==b)d=c;return d};this.monthNames=Date.monthNames=[_TR("JANUARY"),_TR("FEBRUARY"),_TR("MARCH"),
_TR("APRIL"),_TR("MAY"),_TR("JUNE"),_TR("JULY"),_TR("AUGUST"),_TR("SEPTEMBER"),_TR("OCTOBER"),_TR("NOVEMBER"),_TR("DECEMBER")];Date.monthShortNames=[a("S_JANUARY","Jan"),a("S_FEBRUARY","Feb"),a("S_MARCH","Mar"),a("S_APRIL","Apr"),a("S_MAY","May"),a("S_JUNE","Jun"),a("S_JULY","Jul"),a("S_AUGUST","Aug"),a("S_SEPTEMBER","Sep"),a("S_OCTOBER","Oct"),a("S_NOVEMBER","Nov"),a("S_DECEMBER","Dec")];Date.getShortMonthName=function(b){return Date.monthShortNames[b]};this.dayNames=[_TR("SU"),_TR("MO"),_TR("TU"),
_TR("WE"),_TR("TH"),_TR("FR"),_TR("SA")];this.todayText=_TR("TODAY");this.okText=_TR("OK");this.cancelText=_TR("CANCEL");this.todayTip="{0} ("+_TR("SPACEBAR")+")";this.minText=_TR("DATE_BEFORE_MIN");this.maxText=_TR("DATE_AFTER_MAX");this.format=a("DATE_FORMAT","m/d/y");this.longFormat=a("DATE_LONG_FORMAT","M d, Y");this.withoutDayFormat=a("DATE_WITHOUTDAY_FORMAT","F Y");this.disabledDaysText=_TR("DISABLED");this.disabledDatesText=_TR("DISABLED");this.nextText=_TR("MONTH_NEXT");this.prevText=_TR("MONTH_PREV");
this.monthYearText=_TR("MONTH_CHOOSE")},onRender:function(a,b){var c=['<table style="overflow: hidden;" cellpadding=0 cellspacing=0 border=0>',this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'<tr><td class="x-date-left" align=right valign=middle><a href="#" title="',this.prevText,'">&#160;</a></td><td colspan="1"><table style="padding:10px;" class="x-date-inner" cellspacing="1">','<thead><tr><td class="x-date-middle" colspan="7"></td></tr><tr>'],d=this.dayNames,
e;for(e=0;e<7;e++){var g=this.startDay+e;if(g>6)g-=7;c.push("<th><span>",d[g].substr(0,2),"</span></th>")}c[c.length]="</tr></thead><tbody><tr>";for(e=0;e<42;e++){if(e%7===0&&e!==0)c[c.length]="</tr><tr>";c[c.length]=e%7==0||(e-6)%7==0?'<td><a href="#" hidefocus="on" class="x-date-date weekends" tabIndex="1"><em><span></span></em></a></td>':'<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>'}c.push('</tr></tbody></table></td><td class="x-date-right" align=left valign=middle><a href="#" title="',
this.nextText,'">&#160;</a></td></tr>','</table><div id="'+(this.monthPickerId=Ext.id())+'" class="x-date-mp"></div>');d=document.createElement("div");d.className="x-date-picker "+this.uicls;d.innerHTML=c.join("");a.dom.insertBefore(d,b);this.el=Ext.get(d);this.eventEl=Ext.get(d.firstChild);this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),
{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.monthPicker=Ext.get(this.monthPickerId);this.monthPicker.enableDisplayMode("block");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(j){j.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(j){j.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(j){j.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(j){j.ctrlKey?
this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(){this.showNextMonth()},pageDown:function(){this.showPrevMonth()},enter:function(j){j.stopPropagation();return true},scope:this});this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.el.select("table.x-date-inner tbody td.x-date-prevday");this.mbtn=new Ext.form.Label({renderTo:this.el.child("table.x-date-inner thead td.x-date-middle",
true)});if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);a=this.todayDate.dateFormat(this.format);b=this.todayDate.dateFormat(this.longFormat);c=this.spLCManager.getLocale();if(c=="zh-cn")b=this.todayDate.getMonth()>=9?b.substr(0,7)+b.substr(9):b.substr(0,6)+b.substr(8);else if(c=="zh-tw")b=this.todayDate.getMonth()>=9?b.substr(0,9)+b.substr(11):b.substr(0,8)+b.substr(10);this.todayBtn=new Ext.UI.Button({width:170,renderTo:this.el.child("td.x-date-bottom",
true),text:String.format(this.todayText+", "+b,a),tooltip:String.format(this.todayTip,a),handler:this.selectToday,scope:this})}this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this);this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.mon(this.eventEl,"mouseover",this.handleDateHover,this,{delegate:"a.x-date-date"});this.mon(this.eventEl,"mouseout",this.handleDateHoverOut,this,{delegate:"a.x-date-date"});this.onEnable(true)},todayDate:new Date,setTodayDate:function(){if(this.todayBtn){var a=
this.todayDate.dateFormat(this.format),b=this.todayDate.dateFormat(this.longFormat),c=this.spLCManager.getLocale();if(c=="zh-cn")b=this.todayDate.getMonth()>=9?b.substr(0,7)+b.substr(9):b.substr(0,6)+b.substr(8);else if(c=="zh-tw")b=this.todayDate.getMonth()>=9?b.substr(0,9)+b.substr(11):b.substr(0,8)+b.substr(10);this.todayBtn.setText(String.format(this.todayText+", "+b,a));this.todayBtn.setTooltip(String.format(this.todayTip,a));this.value=this.todayDate.clearTime(true);this.update(this.value,true)}},
selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(this.todayDate.clearTime());this.fireEvent("select",this,this.value)}},update:function(a,b){if(this.rendered){var c=this.activeDate,d=this.isVisible();this.activeDate=a;if(!b&&c&&this.el){var e=a.getTime();if(c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear()){this.cells.removeClass("x-date-selected");this.cells.each(function(p){if(p.dom.firstChild.dateValue==e){p.addClass("x-date-selected");d&&!this.cancelFocus&&
Ext.fly(p.dom.firstChild).focus(50);return false}},this);return}}var g=a.getDaysInMonth(),j=a.getFirstDateOfMonth().getDay()-this.startDay;if(j<0)j+=7;g+=j;var h=a.add("mo",-1),q=h.getDaysInMonth()-j;b=this.cells.elements;c=this.textNodes;var l=new Date(h.getFullYear(),h.getMonth(),q,this.initHour),u=this.todayDate.clearTime().getTime(),t=a.clearTime(true).getTime(),w=this.minDate?this.minDate.clearTime(true):Number.NEGATIVE_INFINITY,y=this.maxDate?this.maxDate.clearTime(true):Number.POSITIVE_INFINITY,
v=this.disabledDatesRE,k=this.disabledDatesText,s=this.disabledDays?this.disabledDays.join(""):false,z=this.disabledDaysText,f=this.format;if(this.showToday){h=this.todayDate.clearTime();h=h<w||h>y||v&&f&&v.test(h.dateFormat(f))||s&&s.indexOf(h.getDay())!=-1;if(!this.disabled){this.todayBtn.setDisabled(h);this.todayKeyListener[h?"disable":"enable"]()}}h=function(p,m){m.title="";var n=l.clearTime(true).getTime();m.firstChild.dateValue=n;if(n==u){m.className+=" x-date-today";m.title=p.todayText}if(n==
t){m.className+=" x-date-selected";d&&Ext.fly(m.firstChild).focus(50)}if(n<w){m.className=" x-date-disabled";m.title=p.minText}else if(n>y){m.className=" x-date-disabled";m.title=p.maxText}else{if(s)if(s.indexOf(l.getDay())!=-1){m.title=z;m.className=" x-date-disabled"}if(v&&f){p=l.dateFormat(f);if(v.test(p)){m.title=k.replace("%0",p);m.className=" x-date-disabled"}}}};for(var i=0;i<j;i++){c[i].innerHTML=++q;l.setDate(l.getDate()+1);b[i].className="x-date-prevday";h(this,b[i])}for(;i<g;i++){c[i].innerHTML=
i-j+1;l.setDate(l.getDate()+1);b[i].className="x-date-active";h(this,b[i])}for(g=0;i<42;i++){c[i].innerHTML=++g;l.setDate(l.getDate()+1);b[i].className="x-date-nextday";h(this,b[i])}this.mbtn.setText(a.format(this.withoutDayFormat))}},handleDateHover:function(a,b){a.stopEvent();!this.disabled&&b.dateValue&&Ext.fly(b.parentNode).addClass("x-date-hover")},handleDateHoverOut:function(a,b){a.stopEvent();!this.disabled&&b.dateValue&&Ext.fly(b.parentNode).removeClass("x-date-hover")}});
Ext.reg("uidatepicker",Ext.UI.DatePicker);Ext.namespace("Ext.UI");
Ext.UI.PieChart=_._1(Ext.Component,{constructor:function(){Ext.UI.PieChart.superclass.constructor.apply(this,arguments);this.on("afterrender",this.onAfterRender,this)},onAfterRender:function(){this.el.addClass("ui-piechart");this.el.update(String.format('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 40 40" style="width: 100%;height: 100%;">            <circle cx="20" cy="20" r="20" fill="#28a6ed" stroke="none"></circle>{0}</svg>',this.renderSectors()))},refresh:function(){},
renderSectors:function(){var a=90,b="";if(this.total&&this.sectors&&this.sectors.length)for(var c=0;c<this.sectors.length;c++){var d=this.sectors[c],e=d.value/this.total*360;b+=this.drawPath(a,e,'fill="'+d.color+'" stroke="none"');a+=e}return b},drawPath:function(a,b,c){var d=cy=r=20,e=Math.PI/180,g=(d-r*Math.cos(-a*e)).toFixed(8);d=(d-r*Math.cos(-(a+b)*e)).toFixed(8);var j=(cy+r*Math.sin(-a*e)).toFixed(8);a=(cy+r*Math.sin(-(a+b)*e)).toFixed(8);return b>359.5?'<circle cx="20" cy="20" r="20" '+c+"></circle>":
String.format('<path d="M20,20 L{0},{1} A20,20 0 {2},1 {3},{4} z" {5}/>',g,j,b>180?1:0,d,a,c)}});Ext.reg("uipiechart",Ext.UI.PieChart);Ext.namespace("Ext.UI");
Ext.UI.Chart=Ext.extend(Ext.BoxComponent,{_paperRaphael:null,width:120,height:120,values:[],axisX:1,axisY:1,originX:0,originY:0,constructor:function(a){Ext.UI.Chart.superclass.constructor.call(this,a);this.on("afterrender",this.onAfterRender,this)},onAfterRender:function(){this.renderLines()},updateValues:function(a){this.values=a;this.renderLines()},refresh:function(){this.renderLines()},renderLines:function(){this._paperRaphael=this._paperRaphael||Raphael(this.el.dom,this.width,this.height);this._paperRaphael.clear();
if(this.values.length){for(var a=(this.values[0][0]-this.originX)/this.axisX*this.width+","+this.height,b="M"+a,c=0;c<this.values.length;++c){var d=(this.values[c][0]-this.originX)/this.axisX*this.width,e=d+","+(this.height-(this.values[c][1]-this.originY)/this.axisY*this.height);b+="C"+a+","+e+","+e;a=e}c=d+","+this.height;b+="C"+a+","+c+","+c+"z";this._paperRaphael.path(b).attr({fill:"#9e99ff",stroke:"none"})}}});Ext.reg("uichart",Ext.UI.Chart);Ext.namespace("Ext.UI");
Ext.UI.TabMenu=Ext.extend(Ext.Container,{uicls:"ui-tabmenu-style1",initComponent:function(){this.items=[];this.addEvents("itemselect","itemdeselect");Ext.UI.TabMenu.superclass.initComponent.call(this)},onRender:function(a,b){Ext.UI.TabMenu.superclass.onRender.call(this,a,b);this.el.addClass(this.uicls);this.scroll=this.el.createChild({cls:this.uicls+"-scroll "+this.uicls+"-scroll-out",style:"display:none"});this.scroll.setVisibilityMode(Ext.Element.DISPLAY);this.initEvents()},onLayout:function(){this.checkMenuItems()},
initEvents:function(){for(var a=0;a<this.items.length;++a)this.items.get(a).on("select",this.onItemSelect,this);this.scroll.on("mouseover",this.onScrollMouseOver,this);this.scroll.on("mouseout",this.onScrollMouseOut,this);this.scroll.on("mousedown",this.onScrollMouseDown,this);this.scroll.on("mouseup",this.onScrollMouseUp,this);Ext.EventManager.on(window,"resize",this.onWindowResize,this)},onItemSelect:function(a){for(var b=null,c=0;c<this.items.length;++c){b=this.items.get(c);if(b!=a&&b.checked){b.deselect();
this.fireEvent("itemdeselect",this,b)}b==a&&!localStorage.getItem("is403LogOut")&&localStorage.setItem("fromTab",c)}this.fireEvent("itemselect",this,a)},select:function(a){(a=this.items.get(a))&&a.select()},onWindowResize:function(){this.checkMenuItems.defer(50,this)},checkMenuItems:function(){this.scroll.hide();var a=this.el.dom.offsetTop;this.scrollItems=[];for(var b=0,c=0;c<this.items.length;++c){if(!this.items.get(c).rendered)return;if(this.items.get(c).el.dom.offsetTop!=a)this.scrollItems.push(this.items.get(c));
else b+=this.items.get(c).el.getWidth()+1}if(this.scrollItems.length&&this.getWidth()<b+this.scroll.getComputedWidth()-(_.isIE?0:1))this.scrollItems.splice(0,0,this.items.get(this.items.length-this.scrollItems.length-1));if(this.scrollItems.length&&this.scrollItems.length!=this.items.length){this.scroll.insertBefore(this.scrollItems[0].el.prev());this.scroll.show()}this.scrollItems.length>0?this.scroll.show():this.scroll.hide()},onScrollMouseOver:function(){this.scroll.addClass(this.uicls+"-scroll-over")},
onScrollMouseOut:function(){this.scroll.removeClass(this.uicls+"-scroll-over");this.scroll.removeClass(this.uicls+"-scroll-click")},onScrollMouseDown:function(){this.scroll.addClass(this.uicls+"-scroll-click")},onScrollMouseUp:function(){this.scroll.removeClass(this.uicls+"-scroll-click");this.showScrollMenu()},showScrollMenu:function(){if(!this.scrollMenu)this.scrollMenu=new Ext.UI.Menu({cls:"x-tabmenu-menu"});var a=this.scrollItems;this.scrollMenu.removeAll();for(var b=0;b<a.length;++b)this.scrollMenu.add({xtype:"menutextitem",
text:a[b].text,value:a[b],listeners:{scope:this,click:this.onScrollMenuCheck}});this.scrollMenu.show(this.scroll)},onScrollMenuCheck:function(a,b){if(b){a.value.select();return true}return false}});Ext.reg("uitabmenu",Ext.UI.TabMenu);
Ext.UI.TabMenuItem=Ext.extend(Ext.BoxComponent,{uicls:"ui-tabmenuitem-style1",checked:false,initComponent:function(){this.addEvents("select","deselect")},onRender:function(a){this.el=a.createChild({id:this.id,cls:this.uicls+"-item",html:'<div class="'+this.uicls+'-item-mr"><div class="'+this.uicls+'-item-mc"><span class="'+this.uicls+'-item-txt">'+this.text+"</span></div></div>"});a.createChild({cls:this.uicls+"-border"});this.initEvents()},initEvents:function(){this.el.on("mouseover",this.onMouseOver,
this);this.el.on("mouseout",this.onMouseOut,this);this.el.on("click",this.onClick,this)},onMouseOver:function(){this.checked||this.el.addClass(this.uicls+"-item-over")},onMouseOut:function(){this.el.removeClass(this.uicls+"-item-over")},onClick:function(){this.checked||this.select()},select:function(){this.el.addClass(this.uicls+"-item-click");this.checked=true;this.fireEvent("select",this)},deselect:function(){this.el.removeClass(this.uicls+"-item-click");this.checked=false;this.fireEvent("deselect",
this)}});Ext.reg("uitabmenuitem",Ext.UI.TabMenuItem);Ext.namespace("Ext.UI");
Ext.apply(Ext.Element.prototype,{scrollIntoView:function(a,b,c){a=Ext.getDom(a)||Ext.getBody().dom;var d=this.dom,e=this.getOffsetsTo(a),g=e[0]+a.scrollLeft;e=e[1]+a.scrollTop;var j=e+d.offsetHeight,h=g+d.offsetWidth,q=a.clientHeight,l=parseInt(a.scrollTop,10),u=parseInt(a.scrollLeft,10),t=l+q,w=u+a.clientWidth;if(d.offsetHeight>q||e<l)a.scrollTop=e-(c!==true?0:this.getMargins("t"));else if(j>t)a.scrollTop=j-q+(c!==true?0:this.getMargins("b"));a.scrollTop=a.scrollTop;if(b!==false){if(d.offsetWidth>
a.clientWidth||g<u)a.scrollLeft=g-(c!==true?0:this.getMargins("l"));else if(h>w)a.scrollLeft=h-a.clientWidth+(c!==true?0:this.getMargins("r"));a.scrollLeft=a.scrollLeft}return this}});
Ext.UI.DataView=Ext.extend(Ext.DataView,{autoScroll:false,scroller:true,constructor:function(a){this.selectedIndex=0;Ext.UI.DataView.superclass.constructor.call(this,a)},initComponent:function(){Ext.UI.DataView.superclass.initComponent.call(this);this.addEvents("itemselect","itementer","itemdelete","goback");this.on("afterrender",this.onrendered,this);this.on("containerclick",this.oncontainerclick,this);this.on("click",this.onlistviewclicked,this);this.on("dblclick",this.onlistviewdbclicked,this)},
getLowerSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));a=a+d;if(a>=0&&a<b.length)return a}return b.length-1},getUpperSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+
d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));a=a-d;if(a>=0&&a<b.length)return a}return 0},retainFocus:function(){this.doRetainFocus.defer(50,this)},doRetainFocus:function(){this.focusEl&&this.focusEl.focus()},scrollSelectedIntoView:function(){var a=this.getSelectedNodes();a.length>0&&Ext.get(a[a.length-1]).scrollIntoView(this.el,true,true)},getPageStep:function(){return Math.ceil(this.store.getCount()*0.2)},onlistviewclicked:function(a,b,c,d){this.selectedIndex=b;this.retainFocus();
this.fireEvent("itemselect",b,d)},onlistviewdbclicked:function(a,b,c,d){this.selectedIndex=b;this.retainFocus();this.fireEvent("itementer",b,d)},oncontainerclick:function(){this.retainFocus();return false},onkeydown:function(a){this.selectedIndex=this.getLowerSibling(this.selectedIndex);this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyup:function(a){this.selectedIndex=this.getUpperSibling(this.selectedIndex);this.select(this.selectedIndex);
this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyleft:function(a){this.select(this.selectedIndex>0?--this.selectedIndex:0);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyright:function(a){this.select(this.selectedIndex<this.store.getCount()-1?++this.selectedIndex:this.store.getCount()-1);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onkeyEnter:function(a){this.retainFocus();this.fireEvent("itementer",
this.selectedIndex,a)},onkeyDelete:function(a){this.retainFocus();this.fireEvent("itemdelete",this.selectedIndex,a)},onKeyPageUp:function(a){this.selectedIndex=this.selectedIndex-this.getPageStep()>=0?this.selectedIndex-this.getPageStep():0;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onKeyPageDown:function(a){this.selectedIndex=this.selectedIndex+this.getPageStep()<this.store.getCount()?this.selectedIndex+this.getPageStep():this.store.getCount()-
1;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,a)},onKeyBack:function(a,b){this.fireEvent("goback",this.selectedIndex,b)},onrendered:function(a){if(a.focusEl)a.focusEl=Ext.get(a.focusEl);else{a.focusEl=a.el.createChild({tag:"a",href:"#",cls:"x-hidden-focus",tabIndex:"-1"});a.focusEl.insertBefore(a.el);a.focusEl.swallowEvent("click",true)}if(a.focusEl){new Ext.KeyMap(a.focusEl,{key:Ext.EventObject.BACKSPACE,fn:a.onKeyBack,scope:a});this.rowNav=
new Ext.KeyNav(a.focusEl,{forceKeyDown:true,up:a.onkeyup,down:a.onkeydown,left:a.onkeyleft,right:a.onkeyright,enter:a.onkeyEnter,del:a.onkeyDelete,pageUp:a.onKeyPageUp,pageDown:a.onKeyPageDown,scope:a})}this.scroller&&ScrollManager.reg(a.el)}});Ext.reg("uidataview",Ext.UI.DataView);Ext.namespace("Ext.UI");
Ext.UI.ChainDataView=Ext.extend(Ext.UI.DataView,{prevDataview:undefined,nextDataview:undefined,keyHandlers:true,scroller:false,constructor:function(){Ext.UI.ChainDataView.superclass.constructor.apply(this,arguments)},setNextDataView:function(a){this.nextDataview=a;a.on("selectionchange",function(){this.clearSelections(true);for(var b=this.prevDataview;b;){b.clearSelections(true);b=b.prevDataview}},this)},setPrevDataView:function(a){this.prevDataview=a;a.on("selectionchange",function(){this.clearSelections(true);
for(var b=this.nextDataview;b;){b.clearSelections(true);b=b.nextDataview}},this)},onkeydown:function(a,b){a=this.getLowerSibling(this.selectedIndex);if(a===undefined){for(var c=this.nextDataview;c;)if(c.getNodes().length){if(c.selectItemInFirstRow(this.selectedIndex)){this.clearSelections(true);break}}else c=c.nextDataview;c||(a=this.getNodes().length-1)}if(a!==undefined){this.selectedIndex=a;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,
b)}},onkeyup:function(a,b){a=this.getUpperSibling(this.selectedIndex);if(a===undefined){for(var c=this.prevDataview;c;)if(c.getNodes().length){if(c.selectItemInLastRow(this.selectedIndex)){this.clearSelections(true);break}}else c=c.prevDataview;c||(a=0)}if(a!==undefined){this.selectedIndex=a;this.select(this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,b)}},onkeyleft:function(a,b){if(this.selectedIndex>0){this.select(--this.selectedIndex);this.scrollSelectedIntoView();
this.fireEvent("itemselect",this.selectedIndex,b)}else for(a=this.prevDataview;a;)if(a.getNodes().length){if(a.selectItemInLastRow(1E3)){this.clearSelections(true);break}}else a=a.prevDataview},onkeyright:function(a,b){if(this.selectedIndex<this.store.getCount()-1){this.select(++this.selectedIndex);this.scrollSelectedIntoView();this.fireEvent("itemselect",this.selectedIndex,b)}else for(a=this.nextDataview;a;)if(a.getNodes().length){if(a.selectItemInFirstRow(0)){this.clearSelections(true);break}}else a=
a.nextDataview},getLowerSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));c=a+d;if(c>=b.length&&Math.floor((b.length-1)/d)>Math.floor(a/d))c=b.length-1;if(c>=0&&c<b.length)return c}},getUpperSibling:function(a){var b=this.getNodes(),c=this.getSelectedNodes();if(c&&c.length>0){var d=Ext.get(this.el);
c=Ext.get(c[c.length-1]);d=Math.floor((d.getWidth()-(d.getPadding("r")+d.getPadding("l")))/(c.getWidth()+(c.getMargins("l")+c.getMargins("r"))));a=a-d;if(a>=0&&a<b.length)return a}},selectItemInLastRow:function(a){var b=this.getNodes();if(b&&b.length>0){var c=Ext.get(this.el),d=Ext.get(b[b.length-1]);c=Math.floor((c.getWidth()-(c.getPadding("r")+c.getPadding("l")))/(d.getWidth()+(d.getMargins("l")+d.getMargins("r"))));a=b.length%c?Math.floor(b.length/c)*c+a:(Math.floor(b.length/c)-1)*c+a;a=a>=b.length?
b.length-1:a;this.select(a);this.selectedIndex=a;this.scrollSelectedIntoView();this.retainFocus();return true}},selectItemInFirstRow:function(a){var b=this.getNodes();if(b&&b.length>0){var c=Ext.get(this.el),d=Ext.get(b[b.length-1]);c=Math.floor((c.getWidth()-(c.getPadding("r")+c.getPadding("l")))/(d.getWidth()+(d.getMargins("l")+d.getMargins("r"))));a=a%c;a=a>=b.length?b.length-1:a;this.select(a);this.selectedIndex=a;this.scrollSelectedIntoView();this.retainFocus();return true}},onrendered:function(){if(this.keyHandlers)Ext.UI.ChainDataView.superclass.onrendered.apply(this,
arguments);else this.scroller&&ScrollManager.reg(o.el)}});_._2("Ext.UI");
Ext.UI.HorMenu=_._1(Ext.UI.Menu,{uicls:"ui-hormenu",enableScrolling:false,defaultType:"uihormenuitem",constructor:function(){Ext.UI.HorMenu.superclass.constructor.apply(this,arguments)},afterRender:function(){Ext.UI.HorMenu.superclass.afterRender.apply(this,arguments);this.tcAnchor=this.el.createChild({tag:"div",cls:this.uicls+"-tc-anchor"},this.ul);this.bcAnchor=this.el.createChild({tag:"div",cls:this.uicls+"-bc-anchor"})},show:function(a,b){Ext.UI.HorMenu.superclass.show.call(this,a,b);b=
Ext.fly(a).getY()<this.el.getY();this.tcAnchor.setVisible(b);this.bcAnchor.setVisible(!b);this.el.setY(this.el.getY()+(b?-1:1));b=Math.min(Ext.fly(a).getWidth(),this.el.getWidth());a=Ext.fly(a).getX()-this.el.getX();if(a<0){this.tcAnchor.applyStyles("background-position: 0 0");this.bcAnchor.applyStyles("background-position: 0 0")}else{this.tcAnchor.applyStyles("background-position: "+(a+b/2-15)+"px 0");this.bcAnchor.applyStyles("background-position: "+(a+b/2-15)+"px 0")}},showAt:function(a,b){Ext.UI.HorMenu.superclass.showAt.call(this,
a,b);if(a[1]>this.getPosition()[1]){Ext.UI.HorMenu.superclass.showAt.call(this,[a[0],a[1]-this.getHeight()],b);this.tcAnchor.setVisible(false);this.bcAnchor.setVisible(true)}else{this.tcAnchor.setVisible(true);this.bcAnchor.setVisible(false)}}});Ext.reg("uihormenu",Ext.UI.HorMenu);
Ext.UI.HorMenuItem=_._1(Ext.menu.Item,{disabledClass:"ui-hormenu-item-disabled",itemTpl:new Ext.XTemplate('<div class="x-menu-list-item-l">','<div class="x-menu-list-item-r">','<div class="x-menu-list-item-c">','<a id="{id}" class="x-menu-item x-unselectable x-ellipsis" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<span class="x-menu-item-text">{text}</span>',"</a>","</div>","</div>","</div>"),constructor:function(){Ext.UI.HorMenu.superclass.constructor.apply(this,
arguments)}});Ext.reg("uihormenuitem",Ext.UI.HorMenuItem);Ext.namespace("Ext.UI");
Ext.UI.SideBar=Ext.extend(Ext.BoxComponent,{uicls:"ui-sidebar",constructor:function(){Ext.UI.SideBar.superclass.constructor.apply(this,arguments);this.addEvents("select");this.addEvents("contextmenu")},afterRender:function(){Ext.UI.SideBar.superclass.afterRender.apply(this,arguments);this.el.update('<table><tr><td class="'+this.uicls+'-leftside"><div id="'+(this.labelsId=Ext.id())+'"></div></td><td class="'+this.uicls+'-rightside"><div id="'+(this.contentsId=Ext.id())+'"></div></td></tr></table>');
this.tabs=[];this.labels=Ext.get(this.labelsId);this.contents=Ext.get(this.contentsId)},addTab:function(a,b,c){var d=new Ext.Component({html:'<div class="'+this.uicls+'-leftside-item-ml"><div class="'+this.uicls+'-leftside-item-mr"><div class="'+this.uicls+'-leftside-item-mc x-ellipsis"><span title="'+a+'">'+a+"</span></div></div></div>",cls:this.uicls+"-leftside-item"});d.render(this.labels);b.render(this.contents);b.hide();var e={label:d,component:b};this.tabs.push(e);this.tabs.length==1&&this.selectTab(e);
d.el.on("click",function(){this.selectTab(e)},this);d.el.on("contextmenu",function(g){g.preventDefault();this.fireEvent("contextmenu",d,c)},this)},selectTab:function(a){if(_.isNumber(a))a=this.tabs.length>a?this.tabs[a]:null;if(a&&a!=this.selectedtab){if(this.selectedtab){this.selectedtab.label.removeClass(this.uicls+"-leftside-item-selected");this.selectedtab.component.hide()}a.label.addClass(this.uicls+"-leftside-item-selected");a.component.show();this.selectedtab=a;this.fireEvent("select",this,
a,this.tabs.indexOf(a))}},hideTab:function(a){if(_.isNumber(a))a=this.tabs.length>a?this.tabs[a]:null;if(a){a.label.hide();a.component.hide()}},showTab:function(a){if(_.isNumber(a))a=this.tabs.length>a?this.tabs[a]:null;if(a){a.label.show();a==this.selectedtab&&a.component.show()}}});_._2("Ext.UI");
Ext.UI.VerticalMenu=_._1(Ext.Component,{constructor:function(){_.apply(this,{uicls:"ui-vertmenu",enableScrolling:true,hidden:true,defaultType:"uivertmenuitem",renderTo:Ext.getBody()});Ext.UI.VerticalMenu.superclass.constructor.apply(this,arguments)},afterRender:function(){Ext.UI.VerticalMenu.superclass.afterRender.apply(this,arguments);this.el.addClass(this.uicls);this.anchor=this.el.createChild({tag:"div",cls:this.uicls+"-tc-anchor"});this.mc=this.el.createChild({tag:"div",cls:this.uicls+
"-mc ui-shadow"});for(var a=0;a<this.items.length;++a){var b=this.items[a];b.events||(b=b.xtype=="menutextitem"?new Ext.Component({html:b.text||"",cls:"ui-vertmenu-item-title x-ellipsis"}):this.createComponent(b));b.parent=this;b.render(this.mc);b.el.on("click",function(){this.fireEvent("click",this);this.fireEvent("checkchange",this);this.parent.hide()},b)}if(this.enableScrolling){this.scroller=new Ext.UI.Scroller({dom:this.mc.dom,cls:"x-ui-menu-scroller",type:"vertical",showPer:0.6,margins:{top:2,
right:2,bottom:3,left:0}});this.scroller.reg();this.on("hide",function(){this.scroller.hide()},this);this.on("beforehide",function(){return!this.scroller.scrolling},this)}},onShow:function(){Ext.UI.VerticalMenu.superclass.onShow.apply(this,arguments);this.active=true;Ext.getDoc().on("mousedown",this.onMouseDown,this)},doHide:function(){Ext.UI.VerticalMenu.superclass.doHide.apply(this,arguments);this.active&&Ext.getDoc().un("mousedown",this.onMouseDown);this.active=false},show:function(a){Ext.UI.VerticalMenu.superclass.show.apply(this,
arguments);this.el.anchorTo(a,"t-b");var b=this.margins&&this.margins.right?this.margins.right:0,c=(this.margins&&this.margins.left?this.margins.left:0)-this.el.getLeft();b=Ext.getBody().getWidth()-b-this.el.getLeft()-this.el.getWidth();if(c>0){this.el.anchorTo(a,"t-b",[c,0]);this.anchor.applyStyles("background-position: "+(this.mc.getWidth()/2-c-15)+"px 0px")}else if(b<0){this.el.anchorTo(a,"t-b",[b,0]);this.anchor.applyStyles("background-position: "+(this.mc.getWidth()/2-b-15)+"px 0px")}else this.anchor.applyStyles("background-position: "+
(this.mc.getWidth()/2-15)+"px 0px")},createComponent:function(a,b){if(a.render)return a;b=Ext.create(Ext.apply({ownerCt:this},a),b||this.defaultType);b.data=b.data||{};_.apply(b.data,a);delete b.initialConfig.ownerCt;delete b.ownerCt;return b},onMouseDown:function(a){a.getTarget("."+this.uicls)||this.hide()}});Ext.reg("uivertmenu",Ext.UI.VerticalMenu);
Ext.UI.VerticalMenuItem=_._1(Ext.Component,{disabledClass:"ui-vertmenu-item-disabled",tpl:new Ext.XTemplate('<div class="ui-vertmenu-item-image','<tpl if="!!cls">'," {cls}","</tpl>",'"></div>','<div class="ui-vertmenu-item-text x-unselectable x-ellipsis">{text}</div>','<a id="{id}" class="x-unselectable" style="display:none;" hidefocus="true" unselectable="on" href="#"></a>'),constructor:function(a){if(a&&a.cls){this.imageCls=a.cls;delete a.cls}Ext.UI.VerticalMenuItem.superclass.constructor.apply(this,
arguments);this.addClass("ui-vertmenu-item")}});Ext.reg("uivertmenuitem",Ext.UI.VerticalMenuItem);Ext.namespace("Ext.UI");
Ext.UI.DateField=Ext.extend(Ext.UI.TextField,{readOnly:true,constructor:function(a){a=a||{};this.emptyText=a.emptyText||_TR("mm/dd/yyyy");Ext.UI.DateField.superclass.constructor.apply(this,arguments);if(!Ext.UI.DateField.wnd)Ext.UI.DateField.wnd=new Ext.UI.Window({resizable:false,title:_TR("DATE"),modal:true,autoWidth:true,items:[Ext.UI.DateField.wndDatePicker=new Ext.UI.DatePicker({})],fbar:["->",new Ext.UI.Button({xtype:"uibutton",width:80,text:_TR("OK"),handler:function(){Ext.UI.DateField.wnd.fireEvent("applyclick",
Ext.UI.DateField.wnd,Ext.UI.DateField.wndDatePicker.getValue());Ext.UI.DateField.wnd.hide()},acceptbtn:true}),new Ext.UI.Button({xtype:"uibutton",width:80,text:_TR("CLEAR"),handler:function(){Ext.UI.DateField.wnd.fireEvent("applyclick",Ext.UI.DateField.wnd,null);Ext.UI.DateField.wnd.hide()}}),new Ext.UI.Button({xtype:"uibutton",width:80,text:_TR("CANCEL"),handler:function(){Ext.UI.DateField.wnd.hide()},cancelbtn:true})]});this.wrap.on("click",function(){if(!this.disabled){Ext.UI.DateField.wnd.on("applyclick",
this.onWndApplyClick,this);Ext.UI.DateField.wnd.on("hide",this.onWndHide,this);Ext.UI.DateField.wnd.show();Ext.UI.DateField.wndDatePicker.setMinDate(this.minDate);Ext.UI.DateField.wndDatePicker.setMaxDate(this.maxDate);Ext.UI.DateField.wndDatePicker.setValue(this.selectedDate||new Date)}},this)},onWndApplyClick:function(a,b){this.setDateValue(b);this.fireEvent("change",this,this.selectedDate)},onWndHide:function(){Ext.UI.DateField.wnd.un("applyclick",this.onWndApplyClick,this);Ext.UI.DateField.wnd.un("hide",
this.onWndHide,this)},getDateValue:function(){return this.selectedDate},setDateValue:function(a){this.selectedDate=a;this.setValue(a?a.format("m/d/Y"):"");return this.selectedDate}});Ext.reg("uidatefield",Ext.UI.DateField);
_._2("_","_._3","_._3.System","_._3.FrontView");_._3.System.Frame="System.Frame";_._3.System.SanTab="System.SanTab";_._3.System.SysConfigDownloader="System.SysConfigDownloader";_._3.FrontView.HelpTab="FrontView.HelpTab";Ext.namespace("_s0");_s0.ISystemFrame=_._1(IExtNative,_i4,{ISystemFrame:{addTab:function(){return _3},removeTab:function(){return _3},activateTab:function(){return _3}}});
var ISystemFrame=_s0.ISystemFrame;_s0.ISystemFrameEvents=_._1(_i6,{ISystemFrameEvents:{TabInitialize:function(){return _3},TabActivate:function(){return _3},TabDeactivate:function(){return _3}}});var ISystemFrameEvents=_s0.ISystemFrameEvents;Ext.namespace("_s0");_s0.ISystemFrameTab=_._1(IExtNative,{ISystemFrameTab:{getTitle:function(){return _3},getCfg:function(){return _3}}});
var ISystemFrameTab=_s0.ISystemFrameTab;Ext.namespace("_s0");_s0.IPanelItem=_._1(IExtNative,{IPanelItem:{refresh:function(){return _3},destroy:function(){return _3},getParentTabItem:function(){return _3}}});var IPanelItem=_s0.IPanelItem;Ext.namespace("_s0");
_s0.IPanelList=_._1(IExtNative,{IPanelList:{addPanel:function(){return _3},removePanel:function(){return _3},removeAll:function(){return _3},getPanelItems:function(){return _3}}});var IPanelList=_s0.IPanelList;Ext.ns("_s0");_s0.GA=new (_._1(Object,{trackEvent:function(a){sessionStorage.getItem("allowGA")=="1"&&window.ga&&ga("send","event",{eventCategory:a.eventCategory,eventAction:a.eventAction,eventLabel:a.eventLabel})}}));
Ext.ns("_s0");
function AppMain(){localStorage.removeItem("fromSafeMode");localStorage.removeItem("safeModeIntervalID");if(localStorage.getItem("isFromLogOut")){localStorage.removeItem("isFromLogOut");localStorage.removeItem("safeMode")}try{Ext.state.Manager.setProvider(new Ext.state.CookieProvider);var a=_a(_7(_._3.System.Frame),"ISystemFrame"),b=new Ext.Viewport({layout:"border",cls:"x-frontview-viewport x-unselectable",items:[_a(a,"IExtNative").getNative()]});if(_&&_.isIE)Ext.getBody().dom.onselectstart=
function(c){var e=c.target?c.target:c.srcElement;if(!(c&&e&&e.className.indexOf&&(e.className.indexOf("x-form-text")!=-1||e.className.indexOf("ui-textarea-txt")!=-1||e.className.indexOf("x-selectable")!=-1)&&e.className.indexOf("x-trigger-noedit")==-1)){c.preventDefault&&c.preventDefault();return c.returnValue=false}};Ext.EventManager.on(window,"resize",_.Utils.throttle(function(){b.setSize(document.body.offsetWidth,document.body.offsetHeight);var c=localStorage.getItem("quickSearchId");Ext.get("divSearchBar").setLeft(Ext.get(c).getLeft()).setTop(Ext.get(c).getTop()+
30)},this,500))}catch(d){_b(d)}finally{(a=Ext.get("loading-mask"))&&a.remove()}_.createNavigationMap(_._3.System.SystemTab);createAllNavigationMap(_._3.SystemSubSys,"HardwarePanel",_._3.System.SystemTab);initialSearchBarDiv()}
function initialSearchBarDiv(){var a=localStorage.getItem("quickSearchId");if(a){var b='<div id="divSearchBar" class="x-controlsbar-search-div"><div id="divSearchBar-FS" class="x-controlsbar-search-fs"><span class="x-controlsbar-search-span"></span><span class="x-controlsbar-search-span-hc" style="margin-right:19px;">-'+_TR("SEARCH_WITH_FILE_SEARCH")+'</span></div><div id="divSearchBar-Help" class="x-controlsbar-search-help"><span class="x-controlsbar-search-span"></span><span class="x-controlsbar-search-span-icon"></span><span class="x-controlsbar-search-span-hc">-'+
_TR("SEARCH_WITH_KNOWLEDGE_BASE")+'</span></div><div id="divSearchBar-Com" class="x-controlsbar-search-com"><span class="x-controlsbar-search-span"></span><span class="x-controlsbar-search-span-icon"></span><span class="x-controlsbar-search-span-hc">-'+_TR("SEARCH_WITH_COMMUNITY")+"</span></div></div>";Ext.DomHelper.append(Ext.getBody(),b);var d=Ext.get("divSearchBar");b=Ext.get(a).getWidth();d.setWidth(b).setLeft(Ext.get(a).getLeft()).setTop(Ext.get(a).getTop()+30);d.on("click",function(c,e){c=c.target.nodeName==
"SPAN"?Ext.fly(e).up("div").dom.id:e.id;e=localStorage.getItem("quickSearchValue");switch(c){case "divSearchBar-FS":Ext.fly("shares-tab").dom.click();Ext.fly("shares-browse-tab").dom.click();Ext.select(".x-browse-tree-node-bselect-content").elements[1].click();Ext.select(".x-browse-header-searchbtn > div").elements[0].click();Ext.select(".clearSearchInputBtn button").elements[0].click();Ext.select(".searchBarInput input").elements[0].value=e;Ext.select(".searchBarBtn button").elements[0].click();
d.hide();break;case "divSearchBar-Help":e=e.replace("#","").replace("&","").replace(";","");c="https://www.netgear.com/search-support.aspx?rf=document_type:knowledge%20article.category:readynas&q="+encodeURI(e);window.open(c,"_blank");break;case "divSearchBar-Com":e=e.replace("#","").replace("&","").replace(";","");c="https://community.netgear.com/t5/forums/searchpage/tab/message?location=category:readynas&collapse_discussion=true&q="+encodeURI(e);window.open(c,"_blank");break}},this);a=function(c,
e){c.target.nodeName=="SPAN"?Ext.fly(e).up("div").addClass("x-controlsbar-search-div-over"):Ext.fly(e).addClass("x-controlsbar-search-div-over")};b=function(c,e){c.target.nodeName=="SPAN"?Ext.fly(e).up("div").removeClass("x-controlsbar-search-div-over"):Ext.fly(e).removeClass("x-controlsbar-search-div-over")};Ext.fly("divSearchBar-FS").hover(a,b);Ext.fly("divSearchBar-Help").hover(a,b);Ext.fly("divSearchBar-Com").hover(a,b)}}
function createAllNavigationMap(a,b,d){for(var c in a){var e=a[a[c].replace("SystemSubSys.","")];if(e==a[b])return;_.createNavigationMap(e,[d])}}
_gEventsListener=_._1(_9,_i1u,_i45,{_i45:{_o2:function(a,b){switch(b){case "frontview-update-devicestate":a=_a(a,"_i44");if(_a(a.getDeviceState(),"_it").getFirstLaunchState()){if(localStorage.safeMode!="1")document.location.href="./wizard.html";return _5}break}return _5},_o3:function(a,b,d){if(d=="frontview-update-devicestate"){b=_a(b,"_i44");b.updateSupportedFeatures("frontview-update-supported-features")}else if(d==
"frontview-update-supported-features"){b=_a(b,"_i44");a=b.getLocaleManager();b.updateSysInfo("frontview-update-sysinfo");a.updateLocale("frontview-update-locale")}else if(d=="frontview-update-sysinfo"){_a(b,"_i1").Unadvise(this);b=_a(b,"_i44");b=_a(b.getSysInfo(),"_i43");a==_5&&b&&(b.getModel()+"").toLowerCase()=="readynas 25"?Ext.getBody().addClass("ui-folio"):Ext.getBody().addClass("ui-gen2")}}},_i1u:{_o2:function(a,
b){a=_a(a,"_i1t");switch(b){case "frontview-update-locale":a.updateDictionary("frontview-update-dictionary");break;case "frontview-update-dictionary":if(Ext.isIE7||Ext.isIE8){(b=Ext.get("loading-mask"))&&b.remove();(new _s10.Browsers({cls:"x-fronview-browsers"})).render(Ext.getBody())}else{b=_a(_7(_1.CLSIDS.Device5200),"_i2");_s0.LaunchTabs();AppMain();b.startWebEventSink()}setTimeout(function(){if(localStorage.safeMode=="1"&&localStorage.fromSafeModeWizard==
"1"){if(localStorage.safeModeIntervalID){clearInterval(localStorage.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}localStorage.removeItem("fromSafeModeWizard");var d=_a(_7(_._3.System.Frame),"IExtNative").getNative().alarmbarSafeMode;d.bShow.setVisible(false);d.bClose.setVisible(false);_a(d,"IAlarmReporter").reportAlarm(_TR("CONNECTREPAIR_FAIL_SAFEMODE"),1)}},1E3);break}return _5},_o3:function(a,b,d){if(a!=_5||d=="frontview-update-dictionary")_a(b,
"_i1").Unadvise(this);if(a!=_5&&!localStorage.getItem("is403LogOut")){_s0.LaunchTabs();AppMain();_a(_7(_._3.ConnectRepair.ConnectRepairWindow),"IExtNative").getNative().processRestore()}return _5}}});
Ext.onReady(function(){_0(null);var a=_a(_7(_._3.Reporter),"IReporter");if(a){a.Enable(document.__DEBUG);a.putMaxTraceCount(500);a.AdviseKeyHandler(document)}a=_a(_7(_1.CLSIDS.Device5200),"_i2");var b=a.getSystemManager(),d=b.getLocaleManager(),c=new _gEventsListener;_a(b,"_i1").Advise(c);_a(d,"_i1").Advise(c);d=_7(_._3.ConnectRepair.ConnectRepairWindow);_a(d,"IConnectRepair").putDevice(a);
b.updateDeviceState("frontview-update-devicestate")});_s0.LaunchTabs=function(){_.each(_s0._childTabs,function(a){_s0.LaunchTab(a.ownerclsid,a.childclsid,a.ownerinterfacename,a.childinterfacename)})};
_s0.LaunchTab=function(a,b,d,c){if(a=_a(_7(a),d)){if(a.addTab(_a(_7(b),c))==_5)return;_2("Failed to create or "+c+" subsystem.","",_2.WARNING)}_2("System object not found. Failed to initialize background system engine.","",_2.WARNING)};_s0.RegisterTab=function(a,b,d,c){if(!_s0._childTabs)_s0._childTabs=[];_s0._childTabs.push({ownerclsid:a,childclsid:b,ownerinterfacename:d,childinterfacename:c})};
var async_resize_scroller_procid=undefined;function RESIZE_ALL_SCROLLERS(){clearTimeout(async_resize_scroller_procid);async_resize_scroller_procid=setTimeout(function(){for(var a=Ext.UI.ScrollManager.items,b=0;b<a.length;++b)try{a[b].resize()}catch(d){}clearTimeout(async_resize_scroller_procid)},20)}function OVERRIDE_PROTOTYPE(a){var b=a;return a=function(){RESIZE_ALL_SCROLLERS();return b.apply(this,arguments)}}Ext.namespace("_s0");
_s0.TabItem=_._1(_8("ISystemFrameEvents"),Ext.Container,IPanelList,ISystemFrame,{cls:"x-frontview-tabitem",preventscroll:false,footer:false,layout:"border",card:false,constructor:function(a){this.addEvents("afterlayout");this.items=this.card?this.getCardItems():this.getBorderItems();_s0.TabItem.superclass.constructor.call(this,a)},onResize:function(a,b,d,c){_s0.TabItem.superclass.onResize.call(this,a,b,d,c);this.mask&&this.resizeMask.defer(50,
this)},getBorderItems:function(){this.header=new Ext.Container({cls:"x-frontview-tabitem-header-content"});var a=new Ext.Container({cls:"x-frontview-tabitem-header",region:"north",items:[this.header]});this.content=new Ext.Container({cls:"x-frontview-tabitem-content",region:"center",items:[]});this.footer=new Ext.Container({cls:"x-frontview-tabitem-footer",region:"south",hidden:!this.footer});this.block=new Ext.Container({cls:"x-frontview-tabitem-block",region:"center",layout:"border",items:[a,this.content,
this.footer]});a=[this.block];this.on("afterlayout",this.centerParentHeader,this);this.header.on("afterlayout",this.centerParentHeader,this);this.footer.on("afterrender",this.onFooterAfterRender,this);return a},centerParentHeader:function(){this.parent&&this.header.ownerCt.el&&this.header.ownerCt.el.getWidth()&&this.parent.header.el.center(this.header.ownerCt.el)},onFooterAfterRender:function(){this.mask=new Ext.UI.LoadMask(this.getMaskedEl(),{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0});
if(this.preventscroll==false){this.scroller=new Ext.UI.Scroller({dom:this.content.el.dom,type:"vertical"});this.scroller.reg()}},getMaskedEl:function(){return this.el},resizeMask:function(){_a(this.mask,"ISyncWindowResizeEvent").OnResize()},IPanelList:{addPanel:function(a){return this.addPanel(a)},removePanel:function(a){return this.removePanel(a)},removeAll:function(){this.removeAllPanels();return _5},getPanelItems:function(){return this.getPanelItems()}},addPanel:function(a){var b=_a(a,
"IExtNative").getNative();b.parentTabItem=this;b.addClass("x-frontview-panel");this.content.items.length||b.addClass("x-frontview-panel-top");this.content.items.add(b);b.render(this.content.id);return a},getPanelItems:function(){for(var a=[],b,d=0;d<this.content.items.length;++d)(b=_a(this.content.items.get(d),"IPanelItem"))&&a.push(b);return a},getPanelByIndex:function(a){return this.content.items.get(a)},removePanel:function(a){var b=_a(a,"IExtNative").getNative();a.destroy();this.content.remove(b);
return a},removeAllPanels:function(){for(var a=0;a<this.content.items.length;++a)_a(this.content.items.get(a),"IPanelItem").destroy();this.content.removeAll()},getCardItems:function(){this.tabs=new Ext.Container({cls:"x-frontview-tabitem-tabs",items:[],select:function(a){if(this.selected){if(this.selected==a){a.value.fireEvent("tabactivate");return}this.selected.removeClass("x-frontview-tabitem-tabbtn-selected")}var b=this.scope;this.selected=a;a.addClass("x-frontview-tabitem-tabbtn-selected");
b.onTabItemSelect(a)},scope:this});this.header=new Ext.Container({cls:"x-frontview-tabitem-card-header",items:[this.tabs]});this.content=new Ext.Container({cls:"x-frontview-tabitem-card-content",region:"center",layout:"card",listeners:{afterrender:function(){this.tabs.select(this.tabs.get(0))},scope:this}});return[this.header,this.content]},onTabItemSelect:function(a){a=a.value;var b=this.content.items.get(a.id);if(b)this.content.layout.setActiveItem(b);else{this.content.add(a);this.content.layout.setActiveItem(a);
a.fireEvent("tabinitialize")}a.fireEvent("tabactivate");this.doLayout(false,false)},onTabItemDeselect:function(a){a.value.fireEvent("tabdeactivate")},ISystemFrame:{addTab:function(a){this.addTab(a);return _5},activateTab:function(a){this.selectTab(a);return _5}},addTab:function(a){var b=_a(a,"IExtNative").getNative();b.parent=this;var d=Ext.isString(a.getTitle())?a.getTitle():"";a=Ext.isObject(a.getCfg())?a.getCfg():{};var c=new Ext.Component(Ext.apply({html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div><div class="x-frontview-tabitem-tabbtn-name x-ellipsis">{0}</div>',
d),value:b,listeners:{afterrender:function(e){if(!e.notSelectable){e.el.addClassOnOver("x-frontview-tabitem-tabbtn-hover");e.el.on("click",function(){this.tabs.select(c)},this)}},scope:this}},a));c.addClass("x-frontview-tabitem-tabbtn");this.tabs.add(c)},selectTab:function(a){a=_a(a,"IExtNative").getNative();for(var b=0;b<this.tabs.items.length;++b)if(this.tabs.get(b).value==a){this.tabs.select(this.tabs.get(b));break}}});Ext.namespace("_s0");
_s0.TabView=_._1(_._3.System.Frame,_8("ISystemFrameEvents"),Ext.Container,ISystemFrame,_i3v,{forceLayout:true,cls:"x-frontview-wrapper-container",layout:"border",region:"center",constructor:function(a){this.items=[{xtype:"container",cls:"x-frontview-wrapper",region:"center",layout:"border",margins:"0 40px",items:[{xtype:"container",cls:"x-frontview-header-logo",region:"north",height:90,html:'<div class="x-frontview-header-logo-readynas"></div><div class="x-frontview-header-adminpage">'+
_TR("ADMIN_PAGE")+"</div>"},{xtype:"container",cls:"x-frontview-tabcontainer-bg",region:"north",height:30,margins:"90px 0 0 0",html:'<table width=100% cellpadding="0" cellspacing="0"><tr><td id="'+(this.tabsButtonsId=Ext.id())+'"></td><td id="'+(this.bHelpId=Ext.id())+'" style="width: 1%;"></td><td id="'+(this.buttonsId=Ext.id())+'" style="width: 1%;"></td></tr></table>',listeners:{afterrender:function(){this.headControls=new _s10.ControlsBar({themes:null});this.headControls.render(this.buttonsId);
this.tabmenuHelp=new _s0.HelpMenu({hidden:true,listeners:{itemselect:this.onTabItemSelect,itemdeselect:this.onTabItemDeselect,scope:this}});var b=_a(_7(_._3.FrontView.HelpTab),"ISystemFrameTab");this.tabmenuHelp.add(_.apply(b.getCfg(),{xtype:"uitabmenuitem",text:b.getTitle(),value:_a(b,"IExtNative").getNative()}));this.tabmenuHelp.render(this.bHelpId);this.tabmenu.render(this.tabsButtonsId)},scope:this}},{xtype:"container",region:"center",layout:"border",
items:[this.alarmbar=new _s0.AlarmBar({region:"north",height:40,listeners:{hide:function(){this.doLayout(false,false)},show:function(){this.doLayout(false,false)},scope:this}}),{xtype:"container",region:"center",layout:"border",items:[this.alarmbarSafeMode=new _s0.AlarmBar({region:"north",height:40,listeners:{hide:function(){this.doLayout(false,false)},show:function(){this.doLayout(false,false)},scope:this}}),this.desktopPanel=new Ext.Container({bufferResize:0,cls:"x-frontview-content-container",
region:"center",layout:"card",listeners:{afterrender:function(){if(localStorage.getItem("is403LogOut")=="1"){localStorage.removeItem("is403LogOut");this.tabmenu.select(localStorage.getItem("fromTab")?+localStorage.getItem("fromTab"):0)}else this.tabmenu.select(0)},scope:this}})]}]}]}];_s0.TabView.superclass.constructor.call(this,a);this.tabmenu=new Ext.UI.TabMenu;this.tabmenu.on("itemselect",this.onTabItemSelect,this);this.tabmenu.on("itemdeselect",this.onTabItemDeselect,this);if(a=this.spDevice=
_a(_7(_1.CLSIDS.Device5200),"_i2")){this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);_a(this.alarmbar,"IAlarmReporter").putDevice(a)}},onTabItemSelect:function(a,b){a=a==this.tabmenu?this.tabmenuHelp:this.tabmenu;for(var d,c=0;c<a.items.length;++c){d=a.items.get(c);d.deselect();a.fireEvent("itemdeselect",a,d)}b=b.value;a=this.desktopPanel.items.get(b.id);this.desktopPanel.layout.activeItem&&this.desktopPanel.layout.activeItem.fireEvent("tabdeactivate");
if(a)this.desktopPanel.layout.setActiveItem(a);else{this.desktopPanel.add(b);this.desktopPanel.layout.setActiveItem(b);b.fireEvent("tabinitialize")}b.fireEvent("tabactivate");a=this.zfsVolumesManager.getActiveVolumes();a!=_4&&a.length==0&&b.title!=_TR("SYSTEM")&&Ext.UI.MessageBox.warning({title:_TR("WRN_NO_VOLUMES_TITLE"),msg:_TR("WRN_NO_VOLUMES_MSG")})},onTabItemDeselect:function(a,b){b.value.fireEvent("tabdeactivate")},addTab:function(a){var b=a.getCfg();b=_.isObject(b)?b:{};b=_.apply(b,
{xtype:"uitabmenuitem",text:a.getTitle(),value:_a(a,"IExtNative").getNative()});this.tabmenu.add(b)},selectTab:function(a){a=_a(a,"IExtNative").getNative();for(var b=0;b<this.tabmenu.items.length;++b)if(this.tabmenu.items.get(b).value==a){this.tabmenu.items.get(b).select();break}},_i3v:{OnVolumeUpdate:function(){this.zfsVolumesManager.UpdateVolumes("sync-update-zfsvolumes")}},ISystemFrame:{addTab:function(a){this.addTab(a);return _5},activateTab:function(a){this.selectTab(a);
return _5}}});Ext.namespace("_s0");
_s0.BasePanel=_._1(_9,Ext.Container,IExtNative,IPanelItem,{expanded:true,title:"",constructor:function(a){this.html=this.getHtml();_s0.BasePanel.superclass.constructor.call(this,a);this.addEvents("beforecollapse","collapse","beforeexpand","expand","ready");this.on("afterrender",this.onAfterRender,this)},getHtml:function(){return'<div><table class="x-frontview-panel-table" cellpadding="0" cellspacing="0"><tr><td id="'+(this.basePanelLeft=Ext.id())+'" class="x-frontview-panel-left"><div><table class="x-frontview-panel-left-bar" cellpadding="0" cellspacing="0" width="100%;"><tr><td class="x-frontview-panel-btn"><div class="x-frontview-panel-expand" id="'+
(this.expandBtnNodeId=Ext.id())+'"></div><div class="x-frontview-panel-progress" id="'+(this.progressNodeId=Ext.id())+'"></div></td><td style="vertical-align: top;"><div class="x-frontview-panel-title"><span id="'+(this.titleNodeId=Ext.id())+'" title="'+this.title+'">'+this.title+'</span></div><div id="'+(this.switchBtn=Ext.id())+'"></div></td><td class="x-frontview-panel-top-place"><div id="'+(this.topPlaceNodeId=Ext.id())+'"></div></td></tr></table></div><div class="x-frontview-panel-bottom-place" id="'+
(this.bottomPlaceNodeId=Ext.id())+'"></div></td><td id="'+(this.basePanelRight=Ext.id())+'" class="x-frontview-panel-right"><div class="x-frontview-panel-content" id="'+(this.contentNodeId=Ext.id())+'"></div></td></tr></table></div>'},onExpandClick:function(){this.expanded?this.collapse():this.expand()},onAfterRender:function(){this.expandBtn=Ext.get(this.expandBtnNodeId);this.progress=Ext.get(this.progressNodeId);this.title=Ext.get(this.titleNodeId);this.content=Ext.get(this.contentNodeId);this.topPlace=
Ext.get(this.topPlaceNodeId);this.bottomPlace=Ext.get(this.bottomPlaceNodeId);this.progress.on("click",this.onExpandClick,this);this.expandBtn.on("click",this.onExpandClick,this);this.title.on("click",this.onExpandClick,this);this.onReady();this.fireEvent("ready",this);this.expanded||this.collapse();this.hideProgress()},onReady:function(){},updateTitle:function(a,b){this.title.update(a);this.updateHint(b||a)},updateHint:function(a){this.title.set({title:a})},showProgress:function(){this.expandBtn.setDisplayed(false);
this.progress.setDisplayed(true)},hideProgress:function(){this.expandBtn.setDisplayed(true);this.progress.setDisplayed(false)},expand:function(){if(this.fireEvent("beforeexpand",this)!==false){this.expanded=true;this.topPlace.setDisplayed(true);this.bottomPlace.setDisplayed(true);this.content.setDisplayed(true);this.expandBtn.removeClass("x-frontview-panel-collapse");this.fireEvent("expand",this)}},collapse:function(){if(this.fireEvent("beforecollapse",this)!==false){this.expanded=false;this.topPlace.setDisplayed(false);
this.bottomPlace.setDisplayed(false);this.content.setDisplayed(false);this.expandBtn.addClass("x-frontview-panel-collapse");this.fireEvent("collapse",this)}},scrollIntoView:function(){var a=this.el.dom.offsetTop-this.container.dom.clientHeight;a=a+this.el.dom.clientHeight-(this.el.dom.clientHeight-this.container.dom.clientHeight);this.container.dom.scrollTop=a},IPanelItem:{getParentTabItem:function(){return this.parentTabItem}},appendItems:function(a){var b="";a=Ext.isArray(a)?a:[a];for(var d=0;d<
a.length;d++)b+=a[d];return b},getBox:function(a,b,d){return"<"+a+' class="'+b+'">'+this.appendItems(d)+"</"+a+">"},getCell:function(a,b,d,c){return'<td class="'+a+'" id="'+(d?d:Ext.id())+'" '+(c?c:"")+">"+(b?this.appendItems(b):"")+"</td>"},getRow:function(a,b,d){return'<tr class="'+a+'" id="'+(d?d:Ext.id())+'">'+this.appendItems(b)+"</tr>"},getTable:function(a,b,d){return'<table id="'+(d?d:Ext.id())+'" cellpadding="0" cellspacing="0" border="0" class="'+a+'"><tbody>'+this.appendItems(b)+"</tbody></table>"}});
Ext.namespace("_s0");
_s0.Inspector=Ext.extend(Ext.Panel,{cls:"x-frontview-tabitem-inspector",width:520,iconId:undefined,titleId:undefined,descId:undefined,region:"east",layout:"border",border:false,header:true,animCollapse:false,headerCfg:{border:false},constructor:function(a){a=Ext.apply({minWidth:400,maxWidth:600},a||{});this.items=this.getItems();_s0.Inspector.superclass.constructor.call(this,a);this.on("afterrender",this.onAfterRender,this)},onAfterRender:function(){var a=new Ext.UI.RoundButton({iconCls:"x-frontview-btn-collapse-insp",
style:"position:absolute;right:3px;top:10px;",width:24,height:24});a.on("click",function(){this.collapse()},this);a.render(this.el);this.header.update('<table cellpadding="0" cellspacing="0"><tr><td class="x-inspector-header-left"><div id="'+(this.iconId=Ext.id())+'" class="x-inspector-header-icon"></div></td><td class="x-inspector-header-right"><div id="'+(this.titleId=Ext.id())+'" class="x-inspector-header-name x-ellipsis"></div><div id="'+(this.descId=Ext.id())+'" class="x-inspector-header-desc x-ellipsis"></div></td></tr></table>');
this.header.addClass("x-inspector-header");this.header.icon=Ext.get(this.iconId);this.header.title=Ext.get(this.titleId);this.header.description=Ext.get(this.descId);this.el.dom.style.zIndex="5";this.groups=new Ext.util.MixedCollection;this.on("resize",this.onResizeContent,this)},getItems:function(){var a=new Ext.Container({cls:"x-frontview-inspector-content",region:"center"});a.on("afterrender",function(b){this.content=b.el;this.scroller=new Ext.UI.Scroller({dom:this.content.dom,type:"vertical"});
this.scroller.reg()},this);return[a]},getWidth:function(){if(this.rendered)return this.el.getWidth();return this.hidden?0:this.width},addGroup:function(a){this.groups.add(a);a.inspector=this;a.render(this.content);a.on("collapse",this.onResizeContent,this);a.on("expand",this.onResizeContent,this);if(a.stretchHeight)this.stretchGroup=a;this.onResizeContent()},onResizeContent:function(){if(this.stretchGroup){var a=this.content.getHeight(true)+this.stretchGroup.content.getHeight();this.groups.each(function(b){a-=
b.el.getComputedHeight();a-=b.el.getMargins("t")},this);this.stretchGroup.onStretchHeight(a)}}});Ext.namespace("_s0");
_s0.InspectorGroup=Ext.extend(Ext.Container,{expanded:true,title:"Group",cls:"x-inspector-group",baseCls:"x-inspector-group",stretchHeight:false,constructor:function(a){_s0.InspectorGroup.superclass.constructor.call(this,a);this.html=this.getHtml();this.addEvents("beforecollapse","beforeexpand","collapse","expand","ready");this.on("afterrender",this.onAfterRender,this);this.on("disable",this.onDisable,this);this.on("enable",this.onEnable,this)},getHtml:function(){var a=this.baseCls;
return'<div class="'+a+'-item"><div class="'+a+'-wrap"><table cellpadding="0" cellspacing="0"><tr class=""><td align=left><div id="'+(this.expandBtnNodeId=Ext.id())+'" class="x-inspector-group-expand"><div class="x-inspector-group-expand-btn"></div></div></td><td align=left><div id="'+(this.titleNodeId=Ext.id())+'" class=" x-ellipsis x-inspector-group-title">'+this.title+'</div></td><td align=left><div id="'+(this.helpNodeId=Ext.id())+'" class=""></div></td></tr></table><div class="'+a+'-content" id="'+
(this.contentNodeId=Ext.id())+'"></div></div></div>'},onAfterRender:function(){this.expandBtn=Ext.get(this.expandBtnNodeId);this.title=Ext.get(this.titleNodeId);this.content=Ext.get(this.contentNodeId);this.expandBtn.on("click",this.onExpandClick,this);this.title.on("click",this.onExpandClick,this);this.onReady();this.fireEvent("ready",this);this.expanded||this.collapse()},onDisable:function(){this.addClass(this.baseCls+"-disabled");this.content.setDisplayed(false)},onEnable:function(){this.removeClass(this.baseCls+
"-disabled");this.expanded&&this.content.setDisplayed(true)},onReady:function(){},onStretchHeight:function(){},onExpandClick:function(){if(!this.disabled)if(this.expanded)this.fireEvent("beforecollapse",this)!==false&&this.collapse();else this.fireEvent("beforeexpand",this)!==false&&this.expand()},expand:function(){this.expanded=true;this.content.setDisplayed(true);this.expandBtn.removeClass(this.baseCls+"-collapse");this.fireEvent("expand",this)},collapse:function(){this.expanded=false;this.content.setDisplayed(false);
this.expandBtn.addClass(this.baseCls+"-collapse");this.fireEvent("collapse",this)},showProgress:function(){this.expandBtn.addClass(this.baseCls+"-progress")},hideProgress:function(){this.expandBtn.removeClass(this.baseCls+"-progress")}});_._2("sys");sys.IPlatform=_._1(_i6,{IPlatform:{getDataSource:function(){return _3},getAppsManager:function(){return _3},getDesktopsManager:function(){return _3}}});var IPlatform=sys.IPlatform;Ext.namespace("sys");
sys.IPlatformEvents=_._1(_i6,{IPlatformEvents:{}});var IPlatformEvents=sys.IPlatformEvents;_._2("sys");sys.IAppsManager=_._1(_i6,{IAppsManager:{getApps:function(){return _3},getAppsByName:function(){return _3},getAppsById:function(){return _3},Launch:function(){return _3}}});var IAppsManager=sys.IAppsManager;Ext.namespace("sys");sys.IAppsManagerEvents=_._1(_i6,{IAppsManagerEvents:{}});var IAppsManagerEvents=sys.IAppsManagerEvents;
_._2("sys");sys.IApplication=_._1(_i6,{IApplication:{getName:function(){return _3},getId:function(){return _3}}});var IApplication=sys.IApplication;_._2("sys");sys.IApplicationEvents=_._1(_i6,{IApplicationEvents:{}});var IApplicationEvents=sys.IApplicationEvents;_._2("sys");sys.IDesktopsManager=_._1(_i6,{IDesktopsManager:{getDesktops:function(){return _3},getDesktopById:function(){return _3}}});
var IDesktopsManager=sys.IDesktopsManager;Ext.namespace("sys");sys.IDesktopsManagerEvents=_._1(_i6,{IDesktopsManagerEvents:{}});var IDesktopsManagerEvents=sys.IDesktopsManagerEvents;_._2("sys");
sys.IDesktop=_._1(_i6,{IDesktop:{getId:function(){return _3},getWindowsManager:function(){return _3},getInspector:function(){return _3},getStatusBar:function(){return _3},getHeaderBar:function(){return _3},getAppToolBar:function(){return _3},Initialize:function(){return _3}}});var IDesktop=sys.IDesktop;_._2("sys");sys.IDesktopEvents=_._1(_i6,{IDesktopEvents:{}});var IDesktopEvents=sys.IDesktopEvents;_._2("sys");
sys.IWindowsManager=_._1(_i6,{IWindowsManager:{getWindows:function(){return _3},getWindowsByName:function(){return _3},getWindowsById:function(){return _3},showById:function(){return _3}}});var IWindowsManager=sys.IWindowsManager;Ext.namespace("sys");sys.IWindowsManagerEvents=_._1(_i6,{IWindowsManagerEvents:{}});var IWindowsManagerEvents=sys.IWindowsManagerEvents;_._2("sys");
sys.IWindow=_._1(_i6,{IWindow:{getTitle:function(){return _3},getIcon:function(){return _3}}});var IWindow=sys.IWindow;Ext.namespace("sys");sys.IWindowEvents=_._1(_i6,{IWindowEvents:{}});var IWindowEvents=sys.IWindowEvents;Ext.namespace("_s10");IAlarmReporter=_._1(_i4,{IAlarmReporter:{putDevice:function(){return _3},reportAlarm:function(){return _3}}});
_s0.AlarmBar=_._1(_9,Ext.Container,IAlarmReporter,_i1x,_iz,_i45,{cls:"x-fw-alarmbar",hidden:true,alarmNumber:null,alarmTextBlock:null,wnd:null,alarmGrid:null,alarmGridScroller:null,alarmButtonInfo:null,alarmButtonWarn:null,alarmButtonError:null,ALARM_INFO:1,ALARM_WARN:2,ALARM_ERROR:3,ALARM_USB:4,constructor:function(a){_s0.AlarmBar.superclass.constructor.call(this,a);this.storeInfo=new Ext.data.ArrayStore({fields:["sev",
"desc","date","el","message"],MAX_STORE_SIZE:50,listeners:{add:this.onStoreAdd,remove:this.onStoreRemove,scope:this}});this.storeWarn=new Ext.data.ArrayStore({fields:["sev","desc","date","el","message"],MAX_STORE_SIZE:50,listeners:{add:this.onStoreAdd,remove:this.onStoreRemove,scope:this}});this.storeError=new Ext.data.ArrayStore({fields:["sev","desc","date","el","message"],MAX_STORE_SIZE:100,listeners:{add:this.onStoreAdd,remove:this.onStoreRemove,scope:this}})},initComponent:function(){this.alarmNumber=
Ext.id();this.alarmTextBlock=Ext.id();this.bShowId=Ext.id();this.bCloseId=Ext.id();this.html='<div class="'+this.cls+'-icon"></div><div class="'+this.cls+'-text x-ellipsis" id="'+this.alarmTextBlock+'"></div><div class="'+this.cls+'-bshow" id="'+this.bShowId+'"></div><div class="'+this.cls+'-bclose" id="'+this.bCloseId+'"></div>';_s0.AlarmBar.superclass.initComponent.call(this)},afterRender:function(){_s0.AlarmBar.superclass.afterRender.apply(this,arguments);this.el.on("click",
function(){if(this.storeInfo.getCount()||this.storeWarn.getCount()||this.storeError.getCount())this.wnd.show()},this);this.alarmNumber=Ext.get(this.alarmNumber);this.alarmTextBlock=Ext.get(this.alarmTextBlock);this.bShowTitle=_TR("ALARMS_SHOW_ALL");this.bShow=new Ext.UI.Button({width:120,text:String.format(this.bShowTitle,0),listeners:{click:function(){this.wnd.show()},scope:this},acceptbtn:true});this.bShow.render(this.bShowId);this.bClose=new Ext.UI.Button({width:120,text:_TR("CLEAR_ALL"),handler:this.onClearClick,
scope:this});this.bClose.render(this.bCloseId);var a=Ext.id(),b=Ext.id();Ext.id();this.scrollerBgId=Ext.id();this.bOk=new Ext.UI.Button({text:_TR("OK"),acceptbtn:true,handler:function(){this.wnd.hide()},scope:this});this.bClear=new Ext.UI.Button({text:_TR("CLEAR_ALL"),handler:this.onClearClick,scope:this});this.alarmButtonInfo=new Ext.UI.SegmentedChkButton({text:_TR("ALARM_INFO"),checked:true,width:110});this.alarmButtonWarn=new Ext.UI.SegmentedChkButton({text:_TR("ALARM_WARNINGS"),checked:true,width:110});
this.alarmButtonError=new Ext.UI.SegmentedChkButton({text:_TR("ALARM_ERRORS"),checked:true,width:110});this.alarmButtonInfo.on("afterclick",this.onToolbarStateChange,this);this.alarmButtonWarn.on("afterclick",this.onToolbarStateChange,this);this.alarmButtonError.on("afterclick",this.onToolbarStateChange,this);var d=this.toolbar=new Ext.UI.SegmentedControl({items:[this.alarmButtonInfo,this.alarmButtonWarn,this.alarmButtonError],cls:this.cls+"-tooltip-toolbar"});this.alarmGrid=new Ext.Container({cls:this.cls+
"-grid",visibilityMode:"display",layout:"fit"});this.emptyMessage=new Ext.BoxComponent({visibilityMode:"display"});this.wnd=new Ext.UI.Window({title:_TR("ALARMS"),cls:this.cls+"-tooltip",width:500,height:450,minWidth:400,minHeight:300,html:'<div id="'+a+'"></div><div id="'+b+'"></div>',fbar:[this.bOk,this.bClear],listeners:{afterrender:function(){d.render(Ext.get(a));this.emptyMessage.render(Ext.get(b));this.alarmGrid.render(Ext.get(b));var c=this.wnd.body.getSize(true);c.height-=this.toolbar?this.toolbar.getHeight():
0;c.height-=this.alarmGrid.el.getMargins().top;this.alarmGrid.setSize(c)},resize:function(){var c=this.wnd.body.getSize(true);c.height-=this.toolbar&&this.toolbar.el?this.toolbar.getHeight():0;c.height-=this.alarmGrid&&this.alarmGrid.el&&this.alarmGrid.el.getMargins().top;this.alarmGrid.setSize(c)},scope:this}});this.wnd.show();this.wnd.hide();this.on("hide",function(){this.wnd.hide()},this);this.wnd.on("hide",function(){this.alarmGridScroller&&this.alarmGridScroller.hide()},this);this.wnd.on("show",
function(){if(!this.alarmGridScroller){this.alarmGridScroller=new Ext.UI.Scroller({dom:this.alarmGrid.el.dom,type:"vertical",margins:{top:2,right:1,bottom:1,left:1},MAX_OPACITY:60});this.alarmGridScroller.reg()}this.resizeScroller();this.wnd.center();if(!this.alarmButtonInfo.checked&&!this.alarmButtonWarn.checked&&!this.alarmButtonError.checked){this.storeInfo.getCount()&&this.alarmButtonInfo.press();this.storeWarn.getCount()&&this.alarmButtonWarn.press();this.storeInfo.getCount()&&this.alarmButtonError.press()}},
this)},onClearClick:function(){this.storeInfo.removeAll();this.storeWarn.removeAll();this.storeError.removeAll();this.alarmGrid.update("");this.update()},onCloseClick:function(){var a=this.getLastRecord();switch(a.get("sev")){case this.ALARM_INFO:case this.ALARM_USB:this.storeInfo.remove(a);break;case this.ALARM_WARN:this.storeWarn.remove(a);break;case this.ALARM_ERROR:this.storeError.remove(a);break}},onToolbarStateChange:function(){this.alarmButtonInfo.checked?this.alarmGrid.el.removeClass(this.cls+
"-grid-filter-noinfo"):this.alarmGrid.el.addClass(this.cls+"-grid-filter-noinfo");this.alarmButtonWarn.checked?this.alarmGrid.el.removeClass(this.cls+"-grid-filter-nowarn"):this.alarmGrid.el.addClass(this.cls+"-grid-filter-nowarn");this.alarmButtonError.checked?this.alarmGrid.el.removeClass(this.cls+"-grid-filter-noerror"):this.alarmGrid.el.addClass(this.cls+"-grid-filter-noerror");this.update()},getLastRecord:function(){var a=this.alarmGrid.el.first();return a?a.record:undefined},showLastAlarm:function(){var a=
this.getLastRecord();if(a){var b=a.get("desc"),d=a.get("sev");a=a.get("message");b=(a?"<b>"+a+"</b> ":"")+b;this.alarmTextBlock.update(b).set({title:b});if(this.curSeverity!=d){switch(this.curSeverity){case this.ALARM_INFO:this.el.removeClass(this.cls+"-info");break;case this.ALARM_WARN:this.el.removeClass(this.cls+"-warn");break;case this.ALARM_ERROR:this.el.removeClass(this.cls+"-error");break;case this.ALARM_USB:this.el.removeClass(this.cls+"-usb");break}switch(d){case this.ALARM_INFO:this.el.addClass(this.cls+
"-info");break;case this.ALARM_WARN:this.el.addClass(this.cls+"-warn");break;case this.ALARM_ERROR:this.el.addClass(this.cls+"-error");break;case this.ALARM_USB:this.el.addClass(this.cls+"-usb");break}this.curSeverity=d}}else this.hide()},checkStoreSize:function(a){a.MAX_STORE_SIZE<a.getCount()&&a.remove(a.data.items[0])},getCountVisible:function(){var a=0;if(this.alarmButtonInfo.checked)a+=this.storeInfo.getCount();if(this.alarmButtonWarn.checked)a+=this.storeWarn.getCount();if(this.alarmButtonError.checked)a+=
this.storeError.getCount();return a},updateEmptyMessage:function(){if(this.getCountVisible()){this.alarmGrid.show();this.emptyMessage.hide();this.emptyMessage.update("")}else{var a=this.alarmButtonInfo.checked,b=this.alarmButtonWarn.checked,d=this.alarmButtonError.checked,c="";if(a&&b&&d||!a&&!b&&!d)c="EMPTY";else{if(a)c="NO_INFO";if(b)c=c?c+"_WARN":"NO_WARN";if(d)c=c?c+"_ERR":"NO_ERR";c=c?c+"_ALARMS":"NO_ALARMS"}c=_TR(c);this.alarmGrid.hide();this.alarmGridScroller&&this.alarmGridScroller.hide();
this.emptyMessage.show();this.emptyMessage.update('<div class="'+this.cls+'-noalarms">'+c+"</div>")}},resizeScroller:function(){if(this.alarmGridScroller)try{this.alarmGridScroller.resize()}catch(a){}},onStoreAdd:function(a,b){for(var d=0;d<b.length;++d){var c=b[d],e=c.get("desc"),g=c.get("sev"),h=c.get("date"),f=document.createElement("div");this.alarmGrid.el.dom.childNodes.length?this.alarmGrid.el.dom.insertBefore(f,this.alarmGrid.el.dom.childNodes[0]):this.alarmGrid.el.dom.appendChild(f);f=Ext.get(f);
c.set("el",f);f.record=c;f.addClass(this.cls+"-grid-item");this.alarmGrid.el.dom.childNodes.length==1&&f.addClass(this.cls+"-grid-item-borderbottom");switch(g){case this.ALARM_INFO:f.addClass(this.cls+"-grid-item-info");break;case this.ALARM_WARN:f.addClass(this.cls+"-grid-item-warn");break;case this.ALARM_ERROR:f.addClass(this.cls+"-grid-item-error");break;case this.ALARM_USB:f.addClass(this.cls+"-grid-item-usb");break}f.update('<table cellspacing="0" class=""><tr><td class="'+this.cls+'-grid-item-celldate">'+
h+'</td><td class="'+this.cls+'-grid-item-cellmsg">'+e+"</td></tr></table>")}this.checkStoreSize(a);this.update()},onStoreRemove:function(a,b){b.get("el").remove();this.update()},update:function(){var a=this.storeInfo.getCount()+this.storeWarn.getCount()+this.storeError.getCount();if(a){if(a==1)this.bShow.setText(_TR("SHOW"));else this.storeInfo.MAX_STORE_SIZE+this.storeWarn.MAX_STORE_SIZE+this.storeError.MAX_STORE_SIZE==a?this.bShow.setText(String.format(this.bShowTitle,a+"+")):this.bShow.setText(String.format(this.bShowTitle,
a));this.showLastAlarm();this.updateEmptyMessage();this.resizeScroller()}else this.hide()},getMonthString:function(a){switch(a){case "1":return _TR("JANUARY");case "2":return _TR("FEBRUARY");case "3":return _TR("MARCH");case "4":return _TR("APRIL");case "5":return _TR("MAY");case "6":return _TR("JUNE");case "7":return _TR("JULY");case "8":return _TR("AUGUST");case "9":return _TR("SEPTEMBER");case "10":return _TR("OCTOBER");case "11":return _TR("NOVEMBER");case "12":return _TR("DECEMBER")}},IAlarmReporter:{putDevice:function(a){if(this.spDevice){_a(this.spDevice.getLogManager(),
"_i1").Unadvise(this);_a(this.spDevice.getFSManager(),"_i1").Unadvise(this);_a(this.spDevice.getSystemManager(),"_i1").Unadvise(this)}if(a){_a(a.getLogManager(),"_i1").Advise(this);_a(a.getFSManager(),"_i1").Advise(this);var b=a.getSystemManager();if(b&&b!=_4){_a(b,"_i1").Advise(this);b.updateClock("datetimewnd-update-datetime")}}this.spDevice=a},reportAlarm:function(a,b,d){if(b==this.ALARM_INFO||b==this.ALARM_WARN||
b==this.ALARM_ERROR||b==this.ALARM_USB){this.show();var c;switch(b){case this.ALARM_INFO:case this.ALARM_USB:c=this.storeInfo;break;case this.ALARM_WARN:c=this.storeWarn;break;case this.ALARM_ERROR:c=this.storeError;break}c.loadData([[b,a,d?d:(this.currDT?this.currDT:new Date).format("h:i:s A m/d/Y"),undefined]],true)}}},_i45:{_o2:function(a,b){switch(b){case "datetimewnd-update-datetime":a=_a(a,"_i44").getClock();this.clockManager=_a(a,"_i41");this.clockReady=
true;a=this.clockManager.getYear();b=this.clockManager.getMonth();this.getMonthString(this.dtMonthDigit);var d=this.clockManager.getDay(),c=this.clockManager.getHour(),e=this.clockManager.getMinute(),g=this.clockManager.getSecond();this.currDT=new Date(a,b-1,d,c,e,g,0);break}return _5}},_i1x:{OnDeviceAlarm:function(a){if(a){var b=parseInt(a.getSeverity()),d="";try{d=a.getLogTime().replace(" ","&nbsp;")+" "+a.getDate()}catch(c){d=this.currDT}_a(this,"IAlarmReporter").reportAlarm(a.getMessage(),
b,d)}return _5}},_iz:{OnFSTUsbEject:function(){return _5},OnFSTUsbPlug:function(){return _5}}});Ext.namespace("_s0");
_s0.HelpTab=_._1(_._3.FrontView.HelpTab,_s0.TabItem,ISystemFrameTab,IExtNative,{preventscroll:true,constructor:function(){_s0.HelpTab.superclass.constructor.call(this);this.tabView=_a(_7(_._3.System.Frame),"IExtNative");this.on("tabinitialize",this.TabInitialize,this);this.on("tabactivate",this.TabActivate,this)},initComponent:function(){_s0.HelpTab.superclass.initComponent.apply(this,arguments);this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td  id="'+
(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';this.refreshBtn=new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),listeners:{afterrender:function(a){a.el.on("click",function(){this.refresh()},this)},scope:this}});this.header.on("afterrender",this.onHeaderAfterRender,this)},onHeaderAfterRender:function(){this.refreshBtn.render(this.buttonsId)},
getMaskedEl:function(){return this.content.el},oninitialized:function(){var a=_a(this,"IPanelList"),b=_7(_._3.SystemSubSys.NewsChannelPanel);a.addPanel(_a(b,"IPanelItem"))},refresh:function(){_.each(_a(this,"IPanelList").getPanelItems(),function(a){a.refresh()},this);return _5},TabInitialize:function(){this.oninitialized()},TabActivate:function(){},ISystemFrameTab:{getTitle:function(){return _TR("HELP")},getCfg:function(){return{cls:"x-frontview-helpmenu-helpbtn"}}}});
Ext.namespace("_s0");_s0.HelpMenu=_._1(Ext.UI.TabMenu,{cls:"x-frontview-helpmenu",onRender:function(){_s0.HelpMenu.superclass.onRender.apply(this,arguments);this.scroll.setVisibilityMode(Ext.Element.DISPLAY);this.checkMenuItems()},getScrollItems:function(){return[]}});
Ext.namespace("_s10");_s10.IDateTimeWindow=_._1(IPromptWindow,{IDateTimeWindow:{Show:function(){return _3},Hide:function(){return _3},putDevice:function(){return _3}}});var IDateTimeWindow=_s10.IDateTimeWindow;_s10.IDateTimeWindowEvents=_._1(IPromptWindowEvents,{IDateTimeWindowEvents:{OnTick:function(){return _3}}});var IDateTimeWindowEvents=_s10.IDateTimeWindowEvents;Ext.namespace("_s10");
_s10.IPromptWindow=_._1(IExtNative,{IPromptWindow:{Show:function(){return _3},Hide:function(){return _3}}});var IPromptWindow=_s10.IPromptWindow;_s10.IPromptWindowEvents=_._1(_i6,{IPromptWindowEvents:{OnClosing:function(){return _3},OnClosed:function(){return _3},OnValidate:function(){return _3}}});var IPromptWindowEvents=_s10.IPromptWindowEvents;Ext.namespace("_s10");
_s10.ILogDownloader=_._1(IExtNative,{ILogDownloader:{Initialize:function(){return _3},Start:function(){return _3},Stop:function(){return _3}}});var ILogDownloader=_s10.ILogDownloader;Ext.namespace("_s10");_s10.IVersionTracker=_._1(IExtNative,{IVersionTracker:{CompareVersion:function(){return _3}}});var IVersionTracker=_s10.IVersionTracker;Ext.namespace("_s10");
_s10.IRCRemoteAPI=_._1(IExtNative,{IRCRemoteAPI:{Initialize:function(){return _3},IsInstalled:function(){return _3},IsLogged:function(){return _3},ConnectToDevice:function(){return _3},OpenDevice:function(){return _3},MapNetworkDrive:function(){return _3},UnMapNetworkDrive:function(){return _3},GetNetworkDrives:function(){return _3},GetIP:function(){return _3}}});var IRCRemoteAPI=_s10.IRCRemoteAPI;
_s10.IRCRemoteAPIEvents=_._1(_i6,{IRCRemoteAPIEvents:{OnStateChange:function(){return _3}}});var IRCRemoteAPIEvents=_s10.IRCRemoteAPIEvents;_._2("_","_._3","_._3.Controls");_._3.Controls.ControlsBar="Controls.ControlsBar";_._3.Controls.PromptWindow="Controls.PromptWindow";_._3.Controls.DateTimeWindow="Controls.DateTimeWindow";_._3.Controls.AlarmBar="Controls.AlarmBar";_._3.Controls.LogDownloader="Controls.LogDownloader";
_._3.Controls.AuditLogDownloader="Controls.AuditLogDownloader";_._3.Controls.VersionTracker="Controls.VersionTracker";_._3.Controls.FirmwareWindow="Controls.FirmwareWindow";_._3.Controls.LangMenuItems="Controls.LangMenuItems";_._3.Controls.RCLangMenuItems="Controls.RCLangMenuItems";_._3.Controls.RCThemeMenuItems="Controls.RCThemeMenuItems";_._3.Controls.PowerMenuItems="Controls.PowerMenuItems";_._3.Controls.UserMenuItems="Controls.UserMenuItems";
_._3.Controls.SSHKeyDownload="Controls.SSHKeyDownload";_._3.Controls.RCRemoteAPI="Controls.RCRemoteAPI";_._3.Controls.BackupDownloader="Controls.BackupDownloader";_._3.Controls.ADSIDMapDownloader="Controls.ADSIDMapDownloader";Ext.namespace("_s10");
_s10.DateTimeWindow=_._1(_._3.Controls.DateTimeWindow,_8("IDateTimeWindowEvents"),Ext.UI.Window,IDateTimeWindow,_i4,_i45,{help:"common_wnd_datetime",constructor:function(a){this.config=Ext.isDefined(a)?a:{};this.dtModHour=new Ext.UI.SpinnerField({width:48,minValue:1,maxValue:12,selectOnFocus:true,listeners:{scope:this,spin:this.stopClock},fnFormat:function(b){return b<10?"0"+b:b}});this.dtModMin=new Ext.UI.SpinnerField({width:48,minValue:0,
maxValue:59,selectOnFocus:true,listeners:{scope:this,spin:this.stopClock},fnFormat:function(b){return b<10?"0"+b:b}});this.dtModSec=new Ext.UI.SpinnerField({width:48,minValue:0,maxValue:59,selectOnFocus:true,listeners:{scope:this,spin:this.stopClock},fnFormat:function(b){return b<10?"0"+b:b}});this.dtModAMPM=new Ext.UI.ComboBox({cellCls:"x-datetimewindow-newpref-cell",width:55,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id",
"text"],data:[[0,_TR("AM")],[1,_TR("PM")]]}),valueField:"id",displayField:"text",value:0,listeners:{scope:this,select:this.stopClock}});this.sysDate=new Ext.UI.DatePicker({listeners:{scope:this,select:function(){this.isDateChanged=true}}});this.dtUse24Format=new Ext.UI.Checkbox({boxLabel:_TR("USE_24HOUR_FORMAT"),listeners:{scope:this,check:function(b,c){this.dtModHour.maxValue=c?23:12;this.dtModHour.minValue=c?0:1;b=+this.dtModHour.getValue();b=!c&&b>12?b-12:this.dtModAMPM.getValue()==1&&b!=12?b+
12:b;this.dtModHour.setValue(b);this.dtModAMPM.setVisible(!c);Ext.getDom(this.ampmId).className=c?"":this.isAM?"x-datetimewindow-watch-AM":"x-datetimewindow-watch-PM"}}});a=new Date;a.format("M d, Y");a.format("d M Y");a.format("Y M d");this.dtFormatType=new Ext.UI.ComboBox({cellCls:"x-datetimewindow-newpref-cell",width:206,typeAhead:true,triggerAction:"all",mode:"local",store:new Ext.data.ArrayStore({fields:["id","text"],data:[[1,"mm dd,yyyy"],[2,"dd mm yyyy"],[3,"yyyy mm dd"]]}),valueField:"id",
displayField:"text",listeners:{scope:this}});this.dtModTZ=new Ext.UI.ComboBox({cellCls:"x-datetimewindow-newpref-cell",width:288,typeAhead:true,triggerAction:"all",lazyRender:false,mode:"local",autoSelect:true,resizable:true,tpl:'<tpl for="."><div title="{text}" class="x-combo-list-item">{text}</div></tpl>',store:_.TimeZoneArray(),valueField:"id",displayField:"text",value:"US/Pacific",listeners:{select:this.tzChanged,scope:this}});this.dtModSyncNTP=new Ext.UI.Checkbox({boxLabel:_TR("FRONTVIEW_DATETIME_SYNCCLOCK"),
checked:true,listeners:{scope:this,check:function(){this.ntpChanged();this.updateTimeComStatus()}}});this.dtModServerNTP1=new Ext.UI.TextField({cls:"x-datetimewindow-ntpserver",width:220,listeners:{scope:this,change:this.ntpChanged}});this.dtModServerNTP2=new Ext.UI.TextField({cls:"x-datetimewindow-ntpserver",width:220,listeners:{scope:this,change:this.ntpChanged}});this.dtModServerNTP3=new Ext.UI.TextField({cls:"x-datetimewindow-ntpserver",width:220,listeners:{scope:this,change:this.ntpChanged}});
this.config=Ext.apply({bufferResize:0,title:_TR("FRONTVIEW_DATETIME_SETTINGS"),modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,stateful:false,onEsc:this.hide,closeAction:"hide",fbar:[{xtype:"uibutton",text:_TR("APPLY"),listeners:{scope:this,click:this.applyDateTimeChanges},acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),listeners:{scope:this,click:function(){this.runClock=true;this.isDateChanged=this.isTZChanged=this.isNTPChanged=false;this.hide()}},cancelbtn:true}],
items:[{xtype:"container",layout:"table",layoutConfig:{columns:3},items:[{xtype:"container",layout:"table",items:[this.sysDate]},{xtype:"box",width:25},{xtype:"container",layout:"table",layoutConfig:{columns:1},items:[{xtype:"container",id:this.clockId=Ext.id(),width:222,height:66,style:{paddingTop:"13px",paddingLeft:"13px"},cls:"x-datetimewindow-clock-bg",html:'<div id="'+(this.hourId0=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style=""></div><div id="'+(this.hourId1=
Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 4px"></div><div id="'+(this.minId0=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 12px"></div><div id="'+(this.minId1=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 4px"></div><div id="'+(this.secId0=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 12px"></div><div id="'+
(this.secId1=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-digitEmpty" style="padding-left: 4px"></div><div id="'+(this.ampmId=Ext.id())+'" class="x-datetimewindow-watch-digit x-datetimewindow-watch-timeAM" style="padding-left: 10px"></div>'},{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 10px 0px 17px 0px; border-spacing: 5px;"},columns:4},items:[this.dtModHour,this.dtModMin,this.dtModSec,this.dtModAMPM]},{xtype:"container",layout:"table",layoutConfig:{columns:1},
items:[this.dtUse24Format,{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:""},columns:2},items:[{xtype:"box",html:_TR("DATE_FORMAT_LABEL")+_TR("COLON"),style:"padding-left:0",cls:"x-datetimewindow-ntpserver-label"},this.dtFormatType]},{xtype:"box",html:_TR("TIME_ZONE_UC")+_TR("COLON"),style:"text-align: left",cls:"x-datetimewindow-label-timezone"},this.dtModTZ,{xtype:"box",height:15},this.dtModSyncNTP,{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:""},columns:2},
items:[{xtype:"box",html:_TR("NTPSERVER1")+_TR("COLON"),cls:"x-datetimewindow-ntpserver-label"},this.dtModServerNTP1,{xtype:"box",html:_TR("NTPSERVER2")+_TR("COLON"),cls:"x-datetimewindow-ntpserver-label"},this.dtModServerNTP2,{xtype:"box",html:_TR("NTPSERVER3")+_TR("COLON"),cls:"x-datetimewindow-ntpserver-label"},this.dtModServerNTP3]}]}]}]}]},this.config);_s10.DateTimeWindow.superclass.constructor.call(this,this.config)},initComponent:function(){_s10.DateTimeWindow.superclass.initComponent.apply(this,
arguments);this.on("close",this.onclosed,this);this.on("show",this.onshowed,this);this.on("hide",this.onhidden,this);this.on("afterrender",this.onrendered,this);this.initializeClock=true;this.startClock()},_i45:{_o1:function(){return _5},OnNTFailed:function(a,b,c){switch(c){case "datetimewnd-update-datetime":_2("Failed to update system clock from device.","_s10.DateTimeWindow::_i45",_2.ERROR);break;case "datetimewnd-commit-datetime":_2("Failed to commit system clock from device.",
"_s10.DateTimeWindow::_i45",_2.ERROR);break;case "datetimewnd-update-timezone":_2("Failed to update timezone from device.","_s10.DateTimeWindow::_i45",_2.ERROR);break;case "datetimewnd-commit-timezone":_2("Failed to commit timezone from device.","_s10.DateTimeWindow::_i45",_2.ERROR);break;case "datetimewnd-update-ntp":_2("Failed to update ntp from device.","_s10.DateTimeWindow::_i45",_2.ERROR);
break;case "datetimewnd-commit-ntp":_2("Failed to commit ntp from device.","_s10.DateTimeWindow::_i45",_2.ERROR);break}return _5},_o2:function(a,b){switch(b){case "datetimewnd-update-datetime":this.clockManager=_a(this.spSysManager.getClock(),"_i41");this.clockReady=true;this.dtYear=this.clockManager.getYear();this.dtMonthDigit=this.clockManager.getMonth();this.dtMonth=this.getMonthString(this.dtMonthDigit);this.dtDay=this.clockManager.getDay();this.dtHour=
this.clockManager.getHour();this.dtMin=this.clockManager.getMinute();this.dtSec=this.clockManager.getSecond();this.sysDate.todayDate=new Date(this.dtYear,this.dtMonthDigit-1,this.dtDay);this.isAM=true;a=_TR("AM");if(this.dtHour>12){this.dtHour%=12;this.isAM=false;a=_TR("PM")}else if(this.dtHour==12){this.isAM=false;a=_TR("PM")}else if(this.dtHour==0)this.dtHour=12;this.updateDigiClock();break;case "datetimewnd-commit-datetime":document.getElementById("csrfIW")&&document.getElementById("csrfIW").contentWindow.location.reload();
setTimeout(function(){this.spSysManager.updateClock("datetimewnd-update-datetime");this.callNextMethod()}.bind(this),1E3);break;case "datetimewnd-update-timezone":this.tzManager=_a(this.spSysManager.getTimeZone(),"_i47");if(this.options.tz!=undefined)this.dtModTZ.setValue(this.options.tz);else{a=this.tzManager.getTimeZoneName();a=a=="Kwajalein"?"Pacific/Kwajalein":a;this.dtModTZ.setValue(a)}break;case "datetimewnd-commit-timezone":this.spSysManager.updateClock("datetimewnd-update-datetime");
this.callNextMethod();break;case "datetimewnd-update-hourmap":this.hourmapManager=_a(this.spSysManager.getHourMapInfo(),"ISysHourMapInfo");this.dtUse24Format.setValue(this.hourmapManager.getEnable()=="true");a=this.hourmapManager.getFormatType();this.dtFormatType.setValue(a=="0"?1:+a);break;case "datetimewnd-update-ntp":this.ntpManager=_a(this.spSysManager.getNTPInfo(),"_i46");if(this.options.syncNTP!=undefined){this.dtModSyncNTP.checked=this.options.syncNTP;this.dtModSyncNTP.setValue(this.options.syncNTP);
this.isNTPChanged=true}else if(this.ntpManager.getEnable()=="true"){this.dtModSyncNTP.checked=true;this.dtModSyncNTP.setValue(true);a=this.ntpManager.getServers();this.dtModServerNTP1.setValue(a[0]==_4?"":a[0]);this.dtModServerNTP2.setValue(a[1]==_4?"":a[1]);this.dtModServerNTP3.setValue(a[2]==_4?"":a[2])}else{this.dtModSyncNTP.checked=false;this.dtModSyncNTP.setValue(false);this.dtModServerNTP1.setValue("");this.dtModServerNTP2.setValue("");this.dtModServerNTP3.setValue("")}this.updateTimeComStatus();
break;case "datetimewnd-commit-ntp":this.spSysManager.updateClock("datetimewnd-update-datetime");this.callNextMethod();break}return _5},_o3:function(a,b,c){switch(c){case "datetimewnd-update-datetime":case "datetimewnd-commit-datetime":case "datetimewnd-update-timezone":case "datetimewnd-commit-timezone":case "datetimewnd-update-ntp":case "datetimewnd-commit-ntp":case "datetimewnd-update-hourmap":case "datetimewnd-commit-hourmap":if(a!=_5)(b=_a(b,"_io").getLastNMLError())&&Ext.UI.MessageBox.show({title:_TR("ERROR"),
msg:_TR(b.getErrorCode()),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300});break;default:break}if(c=="datetimewnd-commit-hourmap"&&a==_5){localStorage.setItem("enable24Hour",this.dtUse24Format.getValue());localStorage.setItem("dataFormatType",this.dtFormatType.getValue())}return _5}},applyDateTimeChanges:function(){this.isTZChanged?Ext.UI.MessageBox.info({title:_TR("I_SYSTEM_TZ"),msg:_TR("I_SYSTEM_TZ_WARNING"),fn:function(){this.applyDateTimeChanges2()},scope:this}):this.applyDateTimeChanges2()},
applyDateTimeChanges2:function(){this.seqCallArray=[];this.seqCallArray.push("commitHourMapInfo");this.isNTPChanged&&this.seqCallArray.push("commitNTP");this.isTZChanged&&this.seqCallArray.push("commitTimeZone");if(this.isDateChanged||!this.runClock)this.seqCallArray.push("commitTime");this.callNextMethod();this.runClock=true;this.isDateChanged=this.isTZChanged=this.isNTPChanged=false;this.apply(new _s10.PromptWindowEventArgs({syncNTP:this.dtModSyncNTP.getValue(),tz:this.dtModTZ.getValue()}))},
callNextMethod:function(){for(;this.seqCallArray&&this.seqCallArray.length>0;)this[this.seqCallArray.shift()]()},commitTime:function(){this.clockManager.putYear(this.sysDate.getValue().getFullYear());this.clockManager.putMonth(this.sysDate.getValue().getMonth()+1);this.clockManager.putDay(this.sysDate.getValue().getDate());var a=this.dtModHour.getValue();if(this.dtUse24Format.getValue())this.clockManager.putHour(a);else if(this.dtModAMPM.getValue()==0)a==12?this.clockManager.putHour(0):this.clockManager.putHour(a);
else a==12?this.clockManager.putHour(a):this.clockManager.putHour(a+12);this.clockManager.putMinute(this.dtModMin.getValue());this.clockManager.putSecond(this.dtModSec.getValue());this.spSysManager.commitClock("datetimewnd-commit-datetime")},commitTimeZone:function(){this.tzManager.putTimeZoneName(this.dtModTZ.getValue());this.spSysManager.commitTimeZone("datetimewnd-commit-timezone")},commitNTP:function(){if(this.dtModSyncNTP.getValue()){this.ntpManager.putEnable("true");this.ntpManager.putServers([this.dtModServerNTP1.getValue(),
this.dtModServerNTP2.getValue(),this.dtModServerNTP3.getValue()])}else{this.ntpManager.putEnable("false");this.ntpManager.putServers("","","")}this.spSysManager.commitNTPInfo("datetimewnd-commit-ntp")},commitHourMapInfo:function(){this.hourmapManager.putEnable(this.dtUse24Format.getValue()+"");this.hourmapManager.putFormatType(this.dtFormatType.getValue());this.spSysManager.commitHourMapInfo("datetimewnd-commit-hourmap")},tzChanged:function(){this.isTZChanged=true},ntpChanged:function(){this.isNTPChanged=
true},updateTimeComStatus:function(){var a=this.dtModSyncNTP.getValue();this.dtModHour.setDisabled(a);this.dtModMin.setDisabled(a);this.dtModSec.setDisabled(a);this.dtModAMPM.setDisabled(a);this.sysDate.setDisabled(a);this.dtModServerNTP1.setDisabled(!a);this.dtModServerNTP2.setDisabled(!a);this.dtModServerNTP3.setDisabled(!a)},fillZeroDigit:function(a){a=a||"00";return a.toString().length==2?a:"0"+a},updateDigiClock:function(){if(this.rendered){var a=this.dtUse24Format.getValue(),b=this.dtHour.toString(),
c=this.dtMin.toString(),d=this.dtSec.toString();if(a)if(this.isAM){if(b==12&&this.preHour!="11")b="00"}else if(b==12&&c=="0"&&d=="0"&&this.preHour!="12")b="00";else if(b!=12)b=+b+12+"";b=("00"+b).substr(-2);Ext.getDom(this.hourId0).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+b[0];Ext.getDom(this.hourId1).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+b[1];Ext.getDom(this.minId0).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+
(c&&c.length==2?c[0]:"0");Ext.getDom(this.minId1).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+c[c&&c.length==2?1:0];Ext.getDom(this.secId0).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+(d&&d.length==2?d[0]:"0");Ext.getDom(this.secId1).className="x-datetimewindow-watch-digit x-datetimewindow-watch-digit"+d[d&&d.length==2?1:0];Ext.getDom(this.ampmId).className=a?"":this.isAM?"x-datetimewindow-watch-AM":"x-datetimewindow-watch-PM";if(this.runClock){this.dtModHour.maxValue=
a?23:12;this.dtModHour.minValue=a?0:1;var e=+this.dtHour;if(a)if(this.isAM){if(e==12&&this.preHour!="11")e=0}else if(e==12&&c=="0"&&d=="0"&&this.preHour!="12")e=0;else if(e!=12)e+=12;this.dtModHour.setValue(e);this.dtModMin.setValue(this.dtMin);this.dtModSec.setValue(this.dtSec);this.dtModAMPM.setVisible(!a);if(this.isAM)if(this.dtModAMPM.disabled){this.dtModAMPM.setDisabled(false);this.dtModAMPM.setValue(0);this.dtModAMPM.setDisabled(true)}else this.dtModAMPM.setValue(0);else if(this.dtModAMPM.disabled){this.dtModAMPM.setDisabled(false);
this.dtModAMPM.setValue(1);this.dtModAMPM.setDisabled(true)}else this.dtModAMPM.setValue(1)}this.preHour=b}},apply:function(a){if(a.args){a.args.delegatename=this.options.delegatename;a.args.delegateparam=this.options.delegateparam}else a.setArgs({delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this.onclosing(a)},IDateTimeWindow:{Show:function(a,b){this.options=b;this.type=a;this.show();this.center();return _5},Hide:function(){this.apply(new _s2.PromptWindowEventArgs);
return _5},putDevice:function(a){this.spDevice&&_a(this.spDevice.getSystemManager(),"_i1").Unadvise(this);if(this.spDevice=a){this.spSysManager=this.spDevice.getSystemManager();_a(this.spSysManager,"_i1").Advise(this)}}},clockTick:function(){if(this.initializeClock){this.dtSec=0;this.spSysManager&&this.spSysManager.updateClock("datetimewnd-update-datetime");this.initializeClock=false}else{this.dtSec++;if(this.dtSec==60){setTimeout(function(){this.spSysManager&&this.spSysManager.updateClock("datetimewnd-update-datetime")}.bind(this),
100);this.dtSec=0;this.dtMin++;if(this.dtMin==60){this.dtMin=0;this.dtHour++;if(this.dtHour==24){var a=this.sysDate.getValue().add(Date.DAY,1);this.dtMonth=this.getMonthString(a.format("m"));this.sysDate.setValue(a);this.dtHour=0}}}if(this.clockReady){this.updateDigiClock();a=_TR("AM");this.isAM||(a=_TR("PM"));this.Fire("OnTick",[new _s10.PromptWindowEventArgs({year:this.dtYear,month:this.dtMonth,monthDigit:this.dtMonthDigit,day:this.dtDay,hour:this.dtHour,min:this.fillZeroDigit(this.dtMin),
sec:this.fillZeroDigit(this.dtSec),ampm:a})])}}},startClock:function(){var a=this;this.clockInterval=setInterval(function(){a.clockTick()},1E3)},stopClock:function(){this.runClock=false},getMonthString:function(a){switch(a){case "1":return _TR("JANUARY");case "2":return _TR("FEBRUARY");case "3":return _TR("MARCH");case "4":return _TR("APRIL");case "5":return _TR("MAY");case "6":return _TR("JUNE");case "7":return _TR("JULY");case "8":return _TR("AUGUST");case "9":return _TR("SEPTEMBER");case "10":return _TR("OCTOBER");
case "11":return _TR("NOVEMBER");case "12":return _TR("DECEMBER")}},onrendered:function(){this.runClock=true;this.isDateChanged=this.isNTPChanged=this.isTZChanged=false;this.sysDate.setTodayDate();this.sysDate.setValue(new Date(this.dtYear,this.dtMonthDigit-1,this.dtDay))},onshowed:function(){this.spSysManager&&this.spSysManager.updateTimeZone("datetimewnd-update-timezone");this.spSysManager&&this.spSysManager.updateNTPInfo("datetimewnd-update-ntp");this.spSysManager&&this.spSysManager.updateHourMapInfo("datetimewnd-update-hourmap")},
onclosing:function(a){this.Fire("OnClosing",[a]);a.getResult()==true&&this.hide()},onclosed:function(){this.Fire("OnClosed",[this])},onhidden:function(){this.Fire("OnClosed",[this])}});_s10.DateTimeWindow.DATETIME="DATETIME";Ext.namespace("_s10");
_s10.PromptWindow=_._1(_._3.Controls.PromptWindow,_8("IPromptWindowEvents"),Ext.UI.Window,IPromptWindow,{width:410,constructor:function(a){this.config=Ext.isDefined(a)?a:{};this.messageTmpl=new Ext.XTemplate('<table style="width: 100%;" cellspacing=0 cellpadding=0 border=0 >',"<tr>",'<td rowspan="2" valign=top style="width: 60px;" ><div id="'+(this.iconId=Ext.id())+'" class="{icon_class}"/></td>','<td valign=top id="'+(this.messagecntId=Ext.id())+'" class="{textwrap}" ><span id="'+
(this.messageId=Ext.id())+'" class="x-controls-prompt-message">{message_text}</span></td>',"</tr>","</table>");this.messageTmpl.compile();this.tooltipmessageTmpl=new Ext.XTemplate('<span id="'+(this.tooltipId=Ext.id())+'">{tooltip_message}</span>');this.tooltipmessageTmpl.compile();this.config=Ext.apply({bufferResize:0,title:_TR("SHARES"),width:this.width,minHeight:100,minWidth:300,boxMaxWidth:600,resizable:false,modal:true,closeAction:"hide",buttonAlign:"left",listeners:{scope:this,activate:this.onactivated},
keys:[{key:[Ext.EventObject.ENTER],scope:this,fn:this.onkeyenter},{key:[Ext.EventObject.ESC],scope:this,fn:this.oncancel}],fbar:[this.indicator=new Ext.BoxComponent({cls:"x-controls-prompt-progress-bg"}),"->",this.okBtn=new Ext.UI.Button({text:_TR("APPLY"),width:100,scope:this,handler:this.onapply,acceptbtn:true}),this.cancelBtn=new Ext.UI.Button({text:_TR("CANCEL"),width:100,listeners:{scope:this,click:this.oncancel},cancelbtn:true})],bodyCssClass:"x-promptwindow-body",layout:{type:"card",layoutOnCardChange:true},
activeItem:0,items:[this.message_error_warning_Container(),this.resetPassword()]},this.config);_s10.PromptWindow.superclass.constructor.call(this,this.config)},initComponent:function(){_s10.PromptWindow.superclass.initComponent.apply(this,arguments);this.on("close",this.onclosed,this);this.on("hide",this.onhidden,this)},initToolTip:function(a){if(Ext.isEmpty(this.errorTip))this.errorTip=new Ext.UI.ToolTip(null,{width:200,html:a})},message_error_warning_Container:function(){return this.message=
new Ext.BoxComponent({innerId:_s10.PromptWindow.MESSAGE,bufferResize:0,layout:"fit",html:this.messageTmpl.apply({icon_class:"",textwrap:"x-wrapword-spl",message_text:"",restart_check:"x-controls-prompt-restartcheck-disable"})})},resetPassword:function(){return{innerId:_s10.PromptWindow.RESETPSWD,bufferResize:0,xtype:"container",items:[this.pswdlbl=new Ext.BoxComponent({html:_TR("PASSWORD")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),
this.pswdText=new Ext.UI.TextField({width:183,inputType:"password",typeAhead:true,enableKeyEvents:true,eventId:"applyPswd",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.repswdlbl=new Ext.BoxComponent({html:_TR("RE_PASSWORD")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.repswdText=new Ext.UI.TextField({width:183,
inputType:"password",typeAhead:true,enableKeyEvents:true,eventId:"applyRePswd",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.questionlbl=new Ext.BoxComponent({html:_TR("RECOVERY_QUESTION")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.questionText=new Ext.UI.TextField({width:183,typeAhead:true,enableKeyEvents:true,
eventId:"applyQwest",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.answerlbl=new Ext.BoxComponent({html:_TR("RECOVERY_ANSWER")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.answerText=new Ext.UI.TextField({width:183,typeAhead:true,enableKeyEvents:true,eventId:"applyAnswer",listeners:{beforeclear:this.resetInvalidMark,
keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.emaillbl=new Ext.BoxComponent({html:_TR("RECOVERY_EMAIL")+_TR("COLON"),cls:"x-controls-prompt-rlabel x-ellipsis",cellCls:"x-controls-prompt-label-cell-recovery"}),this.emailText=new Ext.UI.TextField({width:183,typeAhead:true,enableKeyEvents:true,eventId:"applyEmail",listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},
cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.alertsAvailLabel=new Ext.BoxComponent({html:_TR("RECOVERY_WARNING"),cls:"x-controls-prompt-alerts-not-avail",colspan:2})],layout:"table",layoutConfig:{tableAttrs:{style:{width:"100%"}},columns:2}}},showIndicator:function(){if(Ext.isEmpty(this.progress))this.progress=new Ext.UI.LoadMask(this.indicator.el,{type:Ext.UI.LoadMask.MIDDLE,background:false,frame:false,msgCls:"ui-mask-style1"});this.progress.show()},hideIndicator:function(){Ext.isEmpty(this.progress)||
this.progress.hide()},disableCntrBtn:function(a,b){a?this.okBtn.disable():this.okBtn.enable();b?this.cancelBtn.disable():this.cancelBtn.enable()},getItemIndex:function(a){for(var b=0;b<this.items.length;b++)if(this.items.items[b].innerId==a)return b;return 0},setActiveItem:function(a){Ext.isNumber(a)||(a=this.getItemIndex(a));if(this.rendered)this.layout.setActiveItem(a);else this.activeItem=this.config.activeItem=a},setPromptMessage:function(a,b,c){c=c?"x-controls-prompt-restartcheck-disable":"x-controls-prompt-restartcheck-enable";
if(this.rendered){document.getElementById(this.iconId).className="x-controls-prompt-icon-"+a;document.getElementById(this.messagecntId).className=b.textwrap;document.getElementById(this.messageId).innerHTML=b.message}else this.message.html=this.message.initialConfig.html=this.messageTmpl.apply({icon_class:"x-controls-prompt-icon-"+a,textwrap:!Ext.isEmpty(b.textwrap)?b.textwrap:"x-wrapword-spl",message_text:b.message,restart_check:c})},setPromptButton:function(a,b,c,d){this.okBtn.setText(a);this.okBtn.setVisible(b);
this.cancelBtn.setText(c);this.cancelBtn.setVisible(d)},disablePromptButton:function(a,b){this.okBtn.setDisabled(a);this.cancelBtn.setDisabled(b)},restoreSize:function(){this.rendered&&this.setWidth(this.initialConfig.width)},reset:function(){this.resetInvalidMark();this.pswdText.clearInvalid();this.pswdText.reset();this.repswdText.clearInvalid();this.repswdText.reset();this.questionText.clearInvalid();this.questionText.reset();this.answerText.clearInvalid();this.answerText.reset();this.emailText.clearInvalid();
this.emailText.reset()},resetInvalidMark:function(){this.pswdlbl.removeClass("x-controls-prompt-label-error");this.repswdlbl.removeClass("x-controls-prompt-label-error");this.questionlbl.removeClass("x-controls-prompt-label-error");this.answerlbl.removeClass("x-controls-prompt-label-error");this.emaillbl.removeClass("x-controls-prompt-label-error");Ext.isEmpty(this.errorTip)||this.errorTip.resetTarget()},initMark:function(a){var b=Ext.get(this.tooltipId);b?this.tooltipmessageTmpl.overwrite(b,{tooltip_message:a.getMessage()}):
this.initToolTip(this.tooltipmessageTmpl.apply({tooltip_message:a.getMessage()}));return _5},initTipTarget:function(a){Ext.isEmpty(this.errorTip)||this.errorTip.initTarget(a)},assignMark:function(a){switch(this.type){case "RESETPSWD":if(a.getElementName()=="arg1"){this.pswdlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.pswdlbl.id)}if(a.getElementName()=="arg2"){this.repswdlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.repswdlbl.id)}if(a.getElementName()==
"arg3"&&this.options.isAlertAvailable){this.questionlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.questionlbl.id)}if(a.getElementName()=="arg4"&&this.options.isAlertAvailable){this.answerlbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.answerlbl.id)}if(a.getElementName()=="arg5"&&this.options.isAlertAvailable){this.emaillbl.addClass("x-controls-prompt-label-error");this.initTipTarget(this.emaillbl.id)}break}return a},initPrompt:function(){var a=this.options.okbtn&&
this.options.okbtn.length>0?this.options.okbtn:_TR("YES"),b=this.options.cancelbtn&&this.options.cancelbtn.length>0?this.options.cancelbtn:_TR("NO");switch(this.type){case "QUESTION":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,true,b,true);this.setActiveItem(_s10.PromptWindow.MESSAGE);break;case "SHUTDOWN":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,false);this.setPromptButton(a,true,
b,!this.options.isreguired);this.setActiveItem(_s10.PromptWindow.MESSAGE);break;case "WARNING":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(_s10.PromptWindow.MESSAGE);break;case "ERROR":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(_s10.PromptWindow.MESSAGE);break;
case "MESSAGE":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(_s10.PromptWindow.MESSAGE);break;case "RESTART":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,false);this.setPromptButton(a,true,b,!this.options.isreguired);this.setActiveItem(_s10.PromptWindow.MESSAGE);break;case "SYSUPDATE":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,
this.options,true);this.setPromptButton(_TR("UPDATE_ACT"),true,_TR("CANCEL"),true);this.setActiveItem(_s10.PromptWindow.MESSAGE);break;case "RESETPSWD":this.setTitle(this.options.caption,"");this.setPromptButton(_TR("APPLY"),true,_TR("CANCEL"),true);this.setActiveItem(_s10.PromptWindow.RESETPSWD);this.alertsAvailLabel.setVisible(!this.options.isAlertAvailable);this.questionText.setDisabled(!this.options.isAlertAvailable);this.answerText.setDisabled(!this.options.isAlertAvailable);
this.emailText.setDisabled(!this.options.isAlertAvailable);this.setWidth(480);break;case "SMARTAPP":this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setPromptButton(a,false,_TR("OK"),true);this.setActiveItem(_s10.PromptWindow.MESSAGE);break}},apply:function(a,b){switch(this.type){case "QUESTION":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "SHUTDOWN":a.setArgs({validatefunc:this.options.validatefunc,
delegatename:this.options.delegatename,delegateparam:this.options.delegateparam,arg1:false});this[b](a);break;case "WARNING":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "ERROR":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "MESSAGE":a.setArgs({validatefunc:this.options.validatefunc,
delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "RESTART":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam,arg1:false});this[b](a);break;case "SYSUPDATE":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break;case "RESETPSWD":a.setArgs({validatefunc:this.options.validatefunc,
delegatename:this.options.delegatename,delegateparam:this.options.delegateparam,isAlertAvailable:this.options.isAlertAvailable,arg1:this.pswdText.getValue(),arg2:this.repswdText.getValue(),arg3:this.questionText.getValue(),arg4:this.answerText.getValue(),arg5:this.emailText.getValue()});this[b](a);break;case "SMARTAPP":a.setArgs({validatefunc:this.options.validatefunc,delegatename:this.options.delegatename,delegateparam:this.options.delegateparam});this[b](a);break}},beforeshow:function(a,b){this.options=
b;this.type=a;this.restoreSize();this.reset();this.initPrompt()},aftershow:function(a){switch(a){case "SMARTAPP":this.disablePromptButton(true,true);this.showIndicator();break}},initfocus:function(){},IPromptWindow:{Show:function(a,b){this.beforeshow(a,b);this.show();this.aftershow(a,b);this.center();_.isIE&&this.reset();this.pswdText&&this.pswdText.focus(false,true);return _5},Hide:function(){this.resetInvalidMark();this.apply(new _s10.PromptWindowEventArgs,"onclosing");return _5}},
onclose:function(){this.Fire("OnClosed",[this])},oncancel:function(){this.hide()},onkeyenter:function(){this.resetInvalidMark();this.onapply()},onapply:function(){this.resetInvalidMark();this.apply(new _s10.PromptWindowEventArgs,"onclosing")},onclosing:function(a){this.Fire("OnValidate",[a]);if(a.getResult()==true){this.Fire("OnClosing",[a]);this.hide()}else{this.initMark(a);this.assignMark(a)}return true},onvalidate:function(a){this.resetInvalidMark();this.Fire("OnValidate",[a]);if(a.getResult()!=
true){this.initMark(a);this.assignMark(a)}},onclosed:function(){this.onclose()},onhidden:function(){this.onclose()},onactivated:function(){this.initfocus.defer(1E3,this,[])},onspkeypress:function(a,b){switch(b.getKey()){case b.ESC:break}},onkeypress:function(){this.apply(new _s10.PromptWindowEventArgs,"onvalidate")}});_s10.PromptWindow.MESSAGE="MESSAGE";_s10.PromptWindow.WARNING="WARNING";_s10.PromptWindow.QUESTION="QUESTION";_s10.PromptWindow.SHUTDOWN="SHUTDOWN";
_s10.PromptWindow.ERROR="ERROR";_s10.PromptWindow.RESTART="RESTART";_s10.PromptWindow.SYSUPDATE="SYSUPDATE";_s10.PromptWindow.RESETPSWD="RESETPSWD";_s10.PromptWindow.SMARTAPP="SMARTAPP";
_s10.PromptWindowEventArgs=Ext.extend(Ext.util.Observable,{constructor:function(a){_s10.PromptWindowEventArgs.superclass.constructor.call(this);this.args=!Ext.isEmpty(a)?a:null;this.argName=this.message="";this.result=true},clear:function(){this.args=null;this.message="";this.result=true},getArgs:function(){return this.args},setArgs:function(a){return this.args=a},setMessage:function(a,b){this.argName=b;this.message=a},getMessage:function(){return this.message},getElementName:function(){return this.argName},
getResult:function(){return this.result},setResult:function(a){return this.result=a}});var PromptWindowEventArgs=_s10.PromptWindowEventArgs;Ext.namespace("_s10");
_s10.ControlsBar=_._1(_._3.Controls.ControlsBar,_.JSCom._8,Ext.Component,IExtNative,IPromptWindowEvents,_i45,_ib,{constructor:function(a){this.html='<table style="display:none;" class="x-controlsbar" cellpadding="0" cellspacing="0"><tr><td id="'+(this.communityId="readynas-community-btn")+'" valign="middle" class="x-controlsbar-cell-community"><span class="x-controlsbar-cell-community-text">'+_TR("COMM_TITLE")+'</span></td><td id="'+
(this.profileId="profile-btn")+'" valign="middle" class="x-controlsbar-cell-profile"><span class="x-controlsbar-cell-profile-text">'+_TR("RC_ADMIN_PASSWORD")+'</span></td><td id="'+(this.langId="language-btn")+'" valign="middle" class="x-controlsbar-cell-lang"><span class="x-controlsbar-cell-lang-text">'+_TR("LANGUAGE")+'</span></td></tr></table><table id="'+(this.quickSearchTId=Ext.id())+'" cellpadding="0" cellspacing="0"><tr><td><div id="'+(this.quickSearchId=Ext.id())+'" class="x-controlsbar-search-input"></div><div id="'+
(this.quickSearchBtnId=Ext.id())+'" class="x-controlsbar-search-icon"></div></td></tr></table><table class="x-controlsbar-btns" cellpadding="0" cellspacing="0"><tr><td valign="bottom" class="x-controlsbar-cell-info"><div id="'+(this.welcomeId=Ext.id())+'" class="x-controlsbar-cell-welcome"></div></td><td style="display:none;" valign="middle" class="x-controlsbar-cell-info"><div id="'+(this.infoId="readynas-help-btn")+'" class="x-controlsbar-cell-info-icon"></div></td><td valign="middle" class="x-controlsbar-cell-info"><div id="'+
(this.userId="readynas-user-btn")+'" class="x-controlsbar-cell-user-icon"><div></div></div></td><td valign="middle" class="x-controlsbar-cell-info"><div id="'+(this.shutdownId="power-menu-btn")+'" class="x-controlsbar-cell-shutdown-icon"><div></div></div></td></tr></table>';a&&_.apply(this,a);_s10.ControlsBar.superclass.constructor.call(this);this.on("afterrender",function(){var b=Ext.EventManager.on;b(Ext.get(this.communityId),"click",this.onCommunityClicked,this);b(Ext.get(this.profileId),
"click",this.onProfileClicked,this);b(Ext.get(this.langId),"click",this.onLangClicked,this);Ext.HelpContext?Ext.HelpContext.reg(Ext.get(this.infoId)):b(Ext.get(this.infoId),"click",this.onInfoClicked,this);b(Ext.get(this.shutdownId),"click",this.onShutdownClicked,this);b(Ext.get(this.userId),"click",this.onUserClicked,this);new Ext.UI.ToolTip(this.communityId,{width:300,autowidth:false,html:_TR("COMM_DESC")});this.quickSearch=new Ext.UI.TextField({width:300,renderTo:this.quickSearchId,listeners:{blur:function(){setTimeout(function(){Ext.fly("divSearchBar").hide()},
150)},focus:function(d){d=_.Utils.Format.htmlEncode(d.el.dom.value);for(var e=Ext.fly("divSearchBar").select("span.x-controlsbar-search-span").elements,f=0,g=e.length;f<g;++f)e[f].innerHTML=d;localStorage.setItem("quickSearchValue",d);d.length>0&&Ext.fly("divSearchBar").show()},scope:this}});b(Ext.fly(this.quickSearchBtnId),"click",function(){this.quickSearch.getValue().length>0?this.quickSearch.focus():Ext.fly("divSearchBar").hide()},this);var c=this.spSYSManager.getSupportFileSearch();Rx.Observable.fromEvent(Ext.fly(this.quickSearchId).child("input").dom,
"keyup").filter(function(d){d=_.Utils.Format.htmlEncode(d.target.value);d.length<1?Ext.fly("divSearchBar").hide()&&localStorage.removeItem("quickSearchValue"):Ext.fly("divSearchBar").show();return d.length>0}).map(function(d){return d.target}).subscribe(function(d){var e=Ext.fly("divSearchBar").select("span.x-controlsbar-search-span").elements;d=_.Utils.Format.htmlEncode(d.value);for(var f=0,g=e.length;f<g;++f)e[f].innerHTML=d;localStorage.setItem("quickSearchValue",d);if(c!="1")Ext.get("divSearchBar-FS").dom.style.display=
"none"});localStorage.removeItem("quickSearchValue");localStorage.setItem("quickSearchId",this.quickSearchId)},this)},initComponent:function(){if(this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spSYSManager=this.spDevice.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this)}_s10.ControlsBar.superclass.initComponent.call(this);this.createLangPopUpMenu();this.spAlertsManager=this.spSYSManager.getAlertsManager();_a(this.spAlertsManager,
"_i1").Advise(this);this.spAlertsManager.updateConfig("query-alerts-config");this.spSecurityManager=this.spDevice.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spSecurityManager.UpdateLoginUserName("controlsbar-update-login-user-name")},onInfoClicked:function(){window.open(_TR("DOCS_URL"))},onUserClicked:function(){var a=Ext.get(this.userId).child("div");if(!this.userpopupmenu){var b=_a(_7(_._3.Controls.UserMenuItems),"IUserMenuItems");
b.setRenderDom(a);b.setHelpBtnId(this.infoId);this.userpopupmenu=new Ext.UI.Menu({cls:"x-system-menu",items:b.getItems()})}this.userpopupmenu.show(a)},onShutdownClicked:function(){if(!this.powerpopupmenu)this.powerpopupmenu=new Ext.UI.Menu({cls:"x-system-menu",items:_a(_7(_._3.Controls.PowerMenuItems),"IPowerMenuItems").getItems()});this.powerpopupmenu.show(Ext.get(this.shutdownId).child("div"))},onExitClicked:function(){try{document.execCommand("ClearAuthenticationCache",
false)}catch(a){}_.lib.Ajax.request("GET",document.logouturl,{success:function(){this.clearAuthentication()}.bind(this),failure:function(){this.clearAuthentication()}.bind(this)},null,{headers:{}})},clearAuthentication:function(){try{window.location.reload(false)}catch(a){window.location.href=window.location.href}},onCommunityClicked:function(){window.open(_TR("COMM_URL"),"_blank")},onProfileClicked:function(){if(!this.secTab)this.secTab=_7(_._3.Security.SecurityTab);_a(this.secTab,
"IExtNative").getNative().on("tabactivate",this.onSecurityTabActivate,this);var a=_a(_7(_._3.System.Frame),"ISystemFrame");a&&a.activateTab(this.secTab)},onSecurityTabActivate:function(){if(this.secTab){var a=_a(this.secTab,"IExtNative").getNative();a.un("tabactivate",this.onSecurityTabActivate,this);if(!this.usersTab)this.usersTab=_7(_._3.Security.UsersTab);_a(this.usersTab,"IExtNative").getNative().on("tabactivate",this.onUsersSubTabActivate,
this);a.selectTab(this.usersTab)}},onUsersSubTabActivate:function(){var a=_a(this.usersTab,"IExtNative").getNative();a.un("tabactivate",this.onUsersSubTabActivate,this);a.getPanelByIndex(0).showAdminProperties(0)},createLangPopUpMenu:function(){for(var a=[],b=_a(_7(_._3.Controls.LangMenuItems),"ILangMenuItems").getItems(),c=0;c<b.length;++c)a.push(b[c]);this.langpopupmenu=new Ext.UI.Menu({cls:"x-system-menu x-controlsbar-langmenu",items:a})},onLangClicked:function(a){this.langpopupmenu.show(this.langId);
a.stopEvent();return false},IPromptWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}},_i45:{_o3:function(a,b,c){switch(c){case "refreshpswd":break}return _5}},_ib:{_o2:function(a,b){a=_a(a,"_ia");switch(b){case "query-alerts-config":a=
_a(a.getConfig(),"_i0");b=a.getServer();a=a.getFromName();this.isAlertAvailable=!!b&&b.length>0&&!!a&&a.length>0;break}return _5}},_i2y:{_o2:function(a,b){switch(b){case "controlsbar-update-login-user-name":Ext.get(this.welcomeId).update(_TR("WELCOME")+" "+this.spSecurityManager.getLoginUserName());break}return _5}}});Ext.namespace("_s10","_s10.Utils");
_s10.Utils.fileSize=function(a,b){try{b=b?1/b:10;if(_s10.Utils.fileSize.cache[a+"|"+b])return _s10.Utils.fileSize.cache[a+"|"+b];var c=Math.round(Math.log(b)/Math.log(10)),d=a;if(a<=0)d=a+"";else{var e=a/1024;if(e<1)d=a+" "+_TR("BYTES");else{var f=e/1024;if(f<1)d=e.toFixed(c)+" "+_TR("KB");else{e=f/1024;if(e<1)d=f.toFixed(c)+" "+_TR("MB");else{f=e/1024;d=f<1?e.toFixed(c)+" "+_TR("GB"):f.toFixed(c)+" "+_TR("TB")}}}}}catch(g){}return _s10.Utils.fileSize.cache[a+"|"+b]=
d};_s10.Utils.fileSize.cache={};
_s10.Utils.unixTime=function(a,b){try{b=b?1/b:1;var c=a/60;if(c<1){if(c>0)return a+" "+_TR("UNIXTIME_SECS");return a+""}var d=c/60;if(d<1)return Math.round(c*b)/b+" "+_TR("UNIXTIME_MINS");c=d/24;if(c<1)return Math.round(d*b)/b+" "+_TR("UNIXTIME_HOURS");var e=c/7;if(e<1)return Math.round(c*b)/b+" "+_TR("UNIXTIME_DAYS");d=c/30;if(d<1)return Math.round(e*b)/b+" "+_TR("UNIXTIME_WEEKS");c=c/365;if(c<1)return Math.round(d*b)/b+" "+_TR("UNIXTIME_MONTHS");return Math.round(c*b)/b+" "+_TR("UNIXTIME_YEARS")}catch(f){}return a};
_s10.Utils.isValidIQN=function(a){if(a.length<12)return false;var b,c;c=a.substring(0,11);a=a.substring(12);b=/^iqn\.\d{4}\-\d{2}$/;if(c.replace(b,"")!="")return false;b=c.substring(9,11);b=parseInt(b);if(b===NaN||b===undefined||b===null||b<0||b>12)return false;b=/[a-zA-Z0-9\-\.:]/g;c=/[\-\.:]/g;if(a.replace(b,"")!=""||a.replace(c,"")=="")return false;return true};
_s10.Utils.getDeviceCls=function(a,b,c){var d={readynaspro2:"x-controls-device-pro2",readynaspro4:"x-controls-device-pro4",readynaspro6:"x-controls-device-pro6",readynas102:"x-controls-device-pro2",readynas104:"x-controls-device-pro4",readynas202:"x-controls-device-pro2",readynas204:"x-controls-device-pro4",readynas214:"x-controls-device-pro4",readynas312:"x-controls-device-pro2",readynas314:"x-controls-device-pro4",readynas316:"x-controls-device-516",readynas422:"x-controls-device-526",readynas424:"x-controls-device-526",
readynas426:"x-controls-device-526",readynas428:"x-controls-device-526",readynas516:"x-controls-device-516",readynas716:"x-controls-device-516",readynas524x:"x-controls-device-526",readynas526x:"x-controls-device-526",readynas528x:"x-controls-device-526",readynas624x:"x-controls-device-526",readynas626x:"x-controls-device-526",readynas628x:"x-controls-device-526",readynas2120:"x-controls-device-5200",readynas2120v2:"x-controls-device-5200",readynas2304:"x-controls-device-5200",readynas2312:"x-controls-device-rr2312",
readynas3130:"x-controls-device-5200",readynas3138:"x-controls-device-5200",readynas3220:"x-controls-device-3200",readynas3312:"x-controls-device-3200",readynas3312v2:"x-controls-device-3200",readynasrr3312:"x-controls-device-3200",readynas4220:"x-controls-device-3200",readynas4220s:"x-controls-device-3200",readynas4220x:"x-controls-device-3200",readynas4312:"x-controls-device-3200",readynas4312v2:"x-controls-device-3200",readynasrr4312:"x-controls-device-3200",readynas4312s:"x-controls-device-3200",
readynasrr4312s:"x-controls-device-3200",readynas4312x:"x-controls-device-3200",readynasrr4312x:"x-controls-device-3200",readynasrr4360:"x-controls-device-rr4360",readynasrr4360s:"x-controls-device-rr4360",readynasrr4360x:"x-controls-device-rr4360",r6100:"x-controls-device-r6300",r6220:"x-controls-device-r6300",r6250:"x-controls-device-r6300",r6300v2:"x-controls-device-r6300",r6400:"x-controls-device-r7000",r6400v2:"x-controls-device-r7000",r6700:"x-controls-device-r6300",r6700v2:"x-controls-device-r7000",
r6800:"x-controls-device-r7000",r6900:"x-controls-device-r7000",r6900p:"x-controls-device-r7000",d6400:"x-controls-device-r6300",r7000:"x-controls-device-r7000",r7000p:"x-controls-device-r7000",r7100lg:"x-controls-device-r7000",r7300:"x-controls-device-r7000",d7000:"x-controls-device-r7000",d7000v2:"x-controls-device-r7000",r7500:"x-controls-device-r7500",r7500v2:"x-controls-device-r7500",r7800:"x-controls-device-r7500",d7800:"x-controls-device-r7500",r7900:"x-controls-device-r8000",r7900p:"x-controls-device-r8000",
r8000:"x-controls-device-r8000",r8000p:"x-controls-device-r8000",gr8000p:"x-controls-device-gr8000p",r8300:"x-controls-device-r8500",r8500:"x-controls-device-r8500",d8500:"x-controls-device-r8500",r8900:"x-controls-device-r9000",r9000:"x-controls-device-r9000",r9500:"x-controls-device-r9500",defaultCls:"x-controls-device-pro2"};if(a){a=(a+"").toLowerCase().replace(/\s/g,"");a.indexOf("readynas")==-1&&(d.defaultCls="x-controls-device-r7000")}b||(b=128);a=d[a||""]||d.defaultCls;a+="-"+b;if(c=="backup")a=
"x-controls-device-backup "+a;else if(c=="hoverable")a="x-controls-device-h "+a;else if(c=="blue")a="x-controls-device-b "+a;return a};_s10.Utils.isDeviceRackmount=function(a){a=_s10.Utils.getDeviceCls(a,128);return a=="x-controls-device-5200-128"||a=="x-controls-device-3200-128"||a=="x-controls-device-rr4360-128"||a=="x-controls-device-rr2312-128"};_s10.Utils.saveToStorage=function(a,b){window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem(a,b)};
_s10.Utils.loadFromStorage=function(a){var b="";if(window.localStorage&&window.localStorage.getItem)b=window.localStorage.getItem(a);return b};
_s10.BackupDownloader=_._1(_._3.Controls.BackupDownloader,_.JSCom._9,Ext.data.Connection,ILogDownloader,_i4,{constructor:function(){_s10.BackupDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadbackups" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="" name="download" resource-id="Backup" resource-type="ConfigBackup"&gt;','&lt;everything enable="{everything}"/&gt;','&lt;shares enable="{shares}"/&gt;','&lt;services enable="{services}"/&gt;','&lt;user_group enable="{user_group}"/&gt;','&lt;network enable="{network}"/&gt;','&lt;misc enable="{misc}"/&gt;','&lt;data enable="{data}"/&gt;',"&lt;/xs:custom&gt;","&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+
'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD BACKUPS" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a,b){function c(){var f=this;Ext.EventManager.removeListener(f.frame,"load",c,f);setTimeout(function(){Ext.removeNode(f.frame);Ext.removeNode(f.form)},100)}this.StopFrame();b=b||{};if(b.everything!==true)b.everything=false;var d=false;for(var e in b)if(b.everything===true)d=b[e]=true;else if(b[e]!==true)b[e]=false;else d=true;if(d){d=document;e=Ext.id();
this.frame=d.createElement("iframe");d.body.appendChild(this.frame);Ext.fly(this.frame).set({id:e,name:e,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[e].name=e;this.form=d.createElement("form");d.body.appendChild(this.form);Ext.fly(this.form).set({target:e,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply(b);Ext.EventManager.on(this.frame,"load",c,this);this.form.submit();return e}},Stop:function(){this.StopFrame();
return _5}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
_s10.LogDownloader=_._1(_._3.Controls.LogDownloader,_.JSCom._9,Ext.data.Connection,ILogDownloader,_i4,{constructor:function(){_s10.LogDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadlogs" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="opid" name="download" resource-id="Logs" resource-type="Log_Collection"/&gt;',"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD LOGS" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a){function b(){var e=this;Ext.EventManager.removeListener(e.frame,"load",b,e);setTimeout(function(){Ext.removeNode(e.frame);
Ext.removeNode(e.form)},100)}this.StopFrame();var c=document,d=Ext.id();this.frame=c.createElement("iframe");c.body.appendChild(this.frame);Ext.fly(this.frame).set({id:d,name:d,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[d].name=d;this.form=c.createElement("form");c.body.appendChild(this.form);Ext.fly(this.form).set({target:d,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply();Ext.EventManager.on(this.frame,
"load",b,this);this.form.submit();return d},Stop:function(){this.StopFrame();return _5}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
_s10.AuditLogDownloader=_._1(_._3.Controls.AuditLogDownloader,_.JSCom._9,Ext.data.Connection,ILogDownloader,_i4,{constructor:function(){_s10.AuditLogDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadauditlogs" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="download" resource-id="Audit" resource-type="AuditLog_Collection"/&gt;',"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD AUDIT LOGS" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a){function b(){var e=this;Ext.EventManager.removeListener(e.frame,"load",b,e);setTimeout(function(){Ext.removeNode(e.frame);
Ext.removeNode(e.form)},100)}this.StopFrame();var c=document,d=Ext.id();this.frame=c.createElement("iframe");c.body.appendChild(this.frame);Ext.fly(this.frame).set({id:d,name:d,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[d].name=d;this.form=c.createElement("form");c.body.appendChild(this.form);Ext.fly(this.form).set({target:d,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply();Ext.EventManager.on(this.frame,
"load",b,this);this.form.submit();return d},Stop:function(){this.StopFrame();return _5}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
_s10.ADSIDMapDownloader=_._1(_._3.Controls.ADSIDMapDownloader,_.JSCom._9,Ext.data.Connection,ILogDownloader,_i4,{constructor:function(){_s10.ADSIDMapDownloader.superclass.constructor.call(this,arguments);Ext.id();this.content=new Ext.XTemplate('<textarea id="Textarea1" name="downloadadsidmap" rows="20" cols="100">','&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;',
'&lt;xs:transaction id=""&gt;','&lt;xs:custom id="opid" name="download" resource-id="AdsIdmapBackup" resource-type="AdsIdmapBackup"/&gt;',"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>','<input name="downloadinput" value="DOWNLOAD ADS ID Map" type="submit"/>');this.content.compile()},ILogDownloader:{Start:function(a){function b(){var e=this;Ext.EventManager.removeListener(e.frame,"load",b,e);setTimeout(function(){Ext.removeNode(e.frame);
Ext.removeNode(e.form)},100)}this.StopFrame();var c=document,d=Ext.id();this.frame=c.createElement("iframe");c.body.appendChild(this.frame);Ext.fly(this.frame).set({id:d,name:d,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[d].name=d;this.form=c.createElement("form");c.body.appendChild(this.form);Ext.fly(this.form).set({target:d,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",cls:"x-hidden",action:a});this.form.innerHTML=this.content.apply();Ext.EventManager.on(this.frame,
"load",b,this);this.form.submit();return d},Stop:function(){this.StopFrame();return _5}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});
_s10.VersionTracker=_._1(_._3.Controls.VersionTracker,_.JSCom._9,Ext.util.Observable,IVersionTracker,_i4,{constructor:function(){_s10.VersionTracker.superclass.constructor.call(this,arguments)},IVersionTracker:{CompareVersion:function(a,b,c,d){return this.compareversion(a,b,c,d)}},basecompare:function(a,b){var c="EQ";if(b!=a){b=b.split(".");a=a.split(".");for(var d=Math.min(b.length,a.length),e=0;e<d;e++){try{us=parseInt(b[e])}catch(f){c="UNDETERMINED";
break}try{os=parseInt(a[e])}catch(g){c="UNDETERMINED";break}if(us<os){c="LT";break}else if(us>os){c="GT";break}}if(c=="EQ")if(b.length>a.length)c="GT";else if(b.length<a.length)c="LT"}return c},getFWVersionType:function(a){var b=["t","-t","beta","-beta","rc","-rc"],c="PRODUCTION",d=[];a=a.toLowerCase();for(var e=0;e<b.length;e++)if(a.match(new RegExp(b[e],"g"))){c="TRIAL";d=a.split(b[e]);break}return{type:c,tokens:d}},compareversion:function(a,b,c,d){var e=false,f,g=this.getFWVersionType(a),h=g.type;
g=g.tokens;var i=this.getFWVersionType(b),j=i.type;i=i.tokens;if(h=="TRIAL"&&j=="TRIAL")f=this.basecompare(g[0],i[0]);else if(h=="PRODUCTION"&&j=="TRIAL")f=this.basecompare(a,i[0]);else if(h=="TRIAL"&&j=="PRODUCTION")f=this.basecompare(g[0],b);else if(h=="PRODUCTION"&&j=="PRODUCTION")f=this.basecompare(a,b);if(f=="GT")e=true;else if(f=="EQ"&&c<d)e=true;return e}});Ext.namespace("_s10");
_s10.FirmwareWindow=_._1(_._3.Controls.FirmwareWindow,_s10.PromptWindow,_i4,{help:"common_wnd_firmware",constructor:function(a){_s10.FirmwareWindow.superclass.constructor.call(this,a)},initComponent:function(){_s10.FirmwareWindow.superclass.initComponent.apply(this,arguments);this.filebrowse=new Ext.XTemplate('<div id="'+(this.filebrowserfakeId=Ext.id())+'" class="x-controls-prompt-browse-btn-bg" ></div>',_.isiOS?"":'<input type="file" name="file" class="'+
(Ext.isGecko?"x-controls-prompt-fileinputnative-gecko":"x-controls-prompt-fileinputnative")+'" id="'+(this.filebrowserId=Ext.id())+'" size=1 onchange="this.scope.onchanged();" onmouseout="this.scope.onouted(event, this);" onmouseover="this.scope.onovered(event, this);" onclick="if (this.uidisabled){ return false; } return true;"/>');this.filebrowse.compile();this.fieldname=new Ext.XTemplate("{field_name}");this.fieldname.compile();this.createBrowseButton();this.add(this.addingAddonContainer());this.on("afterrender",
this.onrendered,this)},addingAddonContainer:function(){return this.form=new Ext.form.FormPanel({innerId:_s10.FirmwareWindow.ADDON,bufferResize:0,frame:false,header:false,border:false,collapsible:false,fileUpload:true,baseCls:"x-plain",cls:"x-controls-prompt-filebrowse-bg",items:{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"width:100%"},columns:3},items:[this.addonnamelbl=new Ext.BoxComponent({html:this.fieldname.apply({field_name:_TR("ADDON_NAME")+_TR("COLON")}),cls:"x-controls-prompt-label",
cellCls:"x-controls-prompt-label-cell"}),this.addonname=new Ext.UI.TextField({typeAhead:true,enableKeyEvents:true,eventId:"applyAddonName",width:180,listeners:{beforeclear:this.resetInvalidMark,keyup:this.onkeypress,specialkey:this.onspkeypress,scope:this},cls:"x-controls-prompt-text",cellCls:"x-controls-prompt-text-cell"}),this.addonnamelbtn=new Ext.BoxComponent({html:this.filebrowse.apply(),cls:"x-controls-prompt-browse-btn-cont",height:31}),new Ext.BoxComponent({html:'<div style="height:5px; width:100%;">&nbsp;</div>',
colspan:3}),this.csrfKey=new Ext.BoxComponent({html:'<input name="csrfpId" value="'+window.csrfId+'" type="hidden"/>'}),this.rememberme=new Ext.UI.Checkbox({boxLabel:_TR("REMEMBER_USB_ENCRYPTION_KEY"),hidden:true,colspan:2,cellCls:"x-controls-prompt-text-cell"})]}})},setFieldName:function(a){if(this.rendered)this.fieldname.overwrite(this.addonnamelbl.el,{field_name:!Ext.isEmpty(a)?_TR(a):_TR("ADDON_NAME")+_TR("COLON")});else this.addonnamelbl.html=this.addonnamelbl.initialConfig.html=this.fieldname.apply({field_name:!Ext.isEmpty(a)?
_TR(a):_TR("ADDON_NAME")+_TR("COLON")})},reset:function(){_s10.FirmwareWindow.superclass.reset.call(this);this.addonname.clearInvalid();this.addonname.reset()},resetInvalidMark:function(){_s10.FirmwareWindow.superclass.resetInvalidMark.call(this);this.addonnamelbl.removeClass("x-controls-prompt-label-error")},assignMark:function(a){a=_s10.FirmwareWindow.superclass.assignMark.call(this,a);switch(this.type){case _s10.FirmwareWindow.ADDON:this.addonnamelbl.addClass("x-controls-prompt-label-error");
this.initTipTarget(this.addonnamelbl.id);break}return a},initPrompt:function(){_s10.FirmwareWindow.superclass.initPrompt.call(this);switch(this.type){case _s10.FirmwareWindow.ADDON:this.isuploaded=false;this.setTitle(this.options.caption,"");this.setFieldName(this.options.fieldname);this.setPromptButton(!Ext.isEmpty(this.options.okbtn)?_TR(this.options.okbtn):_TR("UPLOAD"),true,_TR("CANCEL"),true);this.setActiveItem(this.type);this.updateFieldText();this.options.showremember&&this.rememberme.show();
this.options.showremember&&this.form.setHeight(56);break}},apply:function(a,b){switch(this.type){case _s10.FirmwareWindow.ADDON:if(a.getArgs()){a.getArgs().fsize=this.getFSize();a.getArgs().fname=this.addonname.getValue();this.options.showremember&&(a.getArgs().rememberme=this.rememberme.getValue()?"1":"0");this[b](a);break}}_s10.FirmwareWindow.superclass.apply.call(this,a,b)},createBrowseButton:function(){this.browseBtn=new Ext.UI.Button({text:_TR("BROWSE"),width:80,cls:"x-controls-prompt-browse-btn"})},
showFileInfoPnl:function(a){this.type=_s10.PromptWindow.QUESTION;this.setPromptButton(_TR("INSTALL"),true,_TR("CANCEL"),true);if(a){this.type=_s10.PromptWindow.ERROR;this.setPromptButton(_TR("INSTALL"),false,_TR("CANCEL"),true)}this.setTitle(this.options.caption,"");this.setPromptMessage(this.type,this.options,true);this.setActiveItem(this.type)},responseSuccess:function(a,b){this.hideIndicator();if(Ext.isEmpty(b.result)){b.result={description:_TR("COMM_ERROR"),cause:_TR("ERROR")};
this.responseFailure(a,b)}else{this.isuploaded=true;this.options.version=b.result.version;this.apply(new _s10.PromptWindowEventArgs(this.options),"onclosing")}},responseFailure:function(a,b){this.hideIndicator();this.options.message=_TR(b.result.description);this.options.caption=_TR("ERROR");this.showFileInfoPnl(true);this.isuploaded=false},disableUI:function(a){var b=document.getElementById(this.filebrowserId);if(b)b.uidisabled=a;if(a){this.browseBtn.disable();this.addonname.disable();this.disableCntrBtn(true,
false)}else{this.browseBtn.enable();this.addonname.enable();this.disableCntrBtn(false,false)}},showIndicator:function(){this.disableUI(true);_s10.FirmwareWindow.superclass.showIndicator.call(this)},hideIndicator:function(){this.disableUI(false);_s10.FirmwareWindow.superclass.hideIndicator.call(this)},updateFieldText:function(){var a=document.getElementById(this.filebrowserId);if(a){var b=String(a.value).lastIndexOf("\\");this.addonname.setValue(b!=-1?a.value.substr(b+1,a.value.length):
a.value)}},getFSize:function(){var a=document.getElementById(this.filebrowserId);if(a)if(!a.files||!a.files[0])try{return(new ActiveXObject("Scripting.FileSystemObject")).getFile(a.value).size}catch(b){}else try{return a.files[0].size}catch(c){}return 0},stopUpload:function(a){if(a){if(a.document&&a.document.execCommand)a.document.execCommand("Stop");else a.contentWindow&&a.contentWindow.stop&&a.contentWindow.stop();Ext.removeNode(a)}},resetForm:function(){var a=this.form.getForm();if(a.isValid()){this.stopUpload(document.getElementById(a.abortId));
a.el.dom.reset();this.hideIndicator();a.abortId=null;this.options.showremember&&this.rememberme.hide();this.form.setHeight("auto")}},onuploading:function(a){this.Fire("OnValidate",[a]);if(a.getResult()==true){var b="none";Ext.isEmpty(a.getArgs().params)||(b=a.getArgs().params);var c="nvxsubmit";Ext.isEmpty(a.getArgs().submittype)||(c=a.getArgs().submittype);var d=this.form.getForm();if(d.isValid()){this.showIndicator();d.doAction(c,{url:a.getArgs().upurl,scope:this,params:b,success:this.responseSuccess,
failure:this.responseFailure});a.setResult(false)}}},onrendered:function(){var a=document.getElementById(this.filebrowserId);if(a)a.scope=this;this.browseBtn.rendered||this.browseBtn.render(this.filebrowserfakeId)},onreleaseurlclicked:function(a){!Ext.isEmpty(a)&&a!="N/A"&&window.open(a)},onclose:function(){this.resetForm();_s10.FirmwareWindow.superclass.onclose.call(this,arguments)},onchanged:function(){this.updateFieldText()},onapply:function(){if(this.addonname.getValue()!=""){this.resetInvalidMark();
this.apply(new _s10.PromptWindowEventArgs(this.options),this.isuploaded==true?"onclosing":"onuploading")}},onouted:function(){this.browseBtn.el.removeClass(this.browseBtn.overCls)},onovered:function(){this.browseBtn.el.addClass(this.browseBtn.overCls)}});_s10.FirmwareWindow.ADDON="ADDON";_s10.FirmwareWindow.ADDONLERROR="ADDONLERROR";
Ext.override(Ext.data.Connection,{doFormUpload:function(a,b,c){function d(){function l(o,q,r){Ext.isFunction(o)&&o.apply(q,r)}var k={responseText:"",responseXML:null,argument:a.argument},m,p;try{if(m=g.contentWindow.document||g.contentDocument||WINDOW.frames[e].document){if(m.body)k.responseText=/textarea/i.test((p=m.body.firstChild||{}).tagName)?p.value:m.body.innerHTML;k.responseXML=m.XMLDocument||m}}catch(s){}Ext.EventManager.removeListener(g,"load",d,this);this.fireEvent("requestcomplete",this,
k,a);l(a.success,a.scope,[k,a]);l(a.callback,a.scope,[a,true,k]);this.debugUploads||setTimeout(function(){Ext.removeNode(g)},100)}var e=Ext.id(),f=document,g=f.createElement("iframe"),h=Ext.getDom(a.form),i=[],j,n={target:h.target,method:h.method,encoding:h.encoding,enctype:h.enctype,action:h.action};Ext.fly(g).set({id:e,name:e,cls:"x-hidden",src:Ext.SSL_SECURE_URL});f.body.appendChild(g);if(Ext.isIE)document.frames[e].name=e;Ext.fly(h).set({target:e,method:"POST",enctype:"multipart/form-data",encoding:"multipart/form-data",
action:c||n.action});Ext.iterate(Ext.urlDecode(b,false),function(l,k){j=f.createElement("input");Ext.fly(j).set({type:"hidden",value:k,name:l});h.insertBefore(j,h.firstChild);i.push(j)});Ext.EventManager.on(g,"load",d,this);h.submit();Ext.fly(h).set(n);Ext.each(i,function(l){Ext.removeNode(l)})}});
_s10.FirmwareWindow.Submit=Ext.extend(Ext.form.Action.Submit,{type:"nvxsubmit",handleResponse:function(a){try{if(!Ext.isEmpty(a.responseXML)){var b="";if(_.isIE||_.isGecko||_.isSafari||_.isChrome)b="xs:";_.isEdge&&(b="");var c=a.responseXML.getElementsByTagName(b+"response");if(c&&c.length==0&&!b)c=a.responseXML.getElementsByTagName("xs:response");if(!Ext.isEmpty(c)&&c.length>0)if(c[0].getAttribute("status")=="failure"){var d=a.responseXML.getElementsByTagName(b+"error-code")[0].childNodes[0].nodeValue,
e=a.responseXML.getElementsByTagName(b+"error-cause")[0].childNodes[0].nodeValue,f=a.responseXML.getElementsByTagName(b+"error-details")[0].childNodes[0].nodeValue;return{success:false,errors:true,code:d,cause:e,description:f,releaseurl:"",isreboot:false}}else{var g=a.responseXML.getElementsByTagName("FirmwareImage_name").length>0?a.responseXML.getElementsByTagName("FirmwareImage_name")[0].childNodes[0].nodeValue:"",h=a.responseXML.getElementsByTagName("FirmwareImage_version").length>0?a.responseXML.getElementsByTagName("FirmwareImage_version")[0].childNodes[0].nodeValue:
"",i=a.responseXML.getElementsByTagName("FirmwareImage_size").length>0?a.responseXML.getElementsByTagName("FirmwareImage_size")[0].childNodes[0].nodeValue:"",j=a.responseXML.getElementsByTagName("FirmwareImage_description").length>0?a.responseXML.getElementsByTagName("FirmwareImage_description")[0].childNodes[0].nodeValue:"",n=a.responseXML.getElementsByTagName("FirmwareImage_url").length>0?a.responseXML.getElementsByTagName("FirmwareImage_url")[0].childNodes[0].nodeValue:"",l=a.responseXML.getElementsByTagName("FirmwareImage_reboot").length>
0?a.responseXML.getElementsByTagName("FirmwareImage_reboot")[0].childNodes[0].nodeValue:"";return{success:true,errors:false,fwname:g,version:h,size:i,description:j,releaseurl:n,isreboot:l==1?true:false}}}}catch(k){return{success:false,errors:true,code:0,cause:_TR("EXCEPTION"),description:k.message,releaseurl:"",isreboot:false}}return{success:false,errors:true,code:0,cause:_TR("ERROR"),description:_TR("ERROR_SERV_UNREC"),releaseurl:"",isreboot:false}}});
_s10.FirmwareWindow.Submit2=Ext.extend(Ext.form.Action.Submit,{type:"sshsubmit",handleResponse:function(a){try{var b=JSON.parse(a.responseXML.body.textContent);return{success:b.success,errors:b.error,code:0,cause:_TR("ERROR"),description:""}}catch(c){return{success:false,errors:true,code:0,cause:_TR("EXCEPTION"),description:_TR("UPLOAD_MESG_INTERNAL_ERROR")}}}});
_s10.FirmwareWindow.ADSSubmit=Ext.extend(Ext.form.Action.Submit,{type:"adssubmit",handleResponse:function(a){try{if(!Ext.isEmpty(a.responseXML)){var b="";if(_.isIE||_.isGecko||_.isSafari||_.isChrome)b="xs:";var c=a.responseXML.getElementsByTagName(b+"response");if(!Ext.isEmpty(c)&&c.length>0)if(c[0].getAttribute("status")=="failure"){var d=a.responseXML.getElementsByTagName(b+"error-code")[0].childNodes[0].nodeValue,e=a.responseXML.getElementsByTagName(b+"error-cause")[0].childNodes[0].nodeValue,
f=a.responseXML.getElementsByTagName(b+"error-details")[0].childNodes[0].nodeValue;return{success:false,errors:true,code:d,cause:e,description:f}}else return{success:true,errors:false}}}catch(g){return{success:false,errors:true,code:0,cause:_TR("EXCEPTION"),description:g.message}}return{success:false,errors:true,code:0,cause:_TR("ERROR"),description:_TR("ERROR_SERV_UNREC")}}});Ext.form.Action.ACTION_TYPES.nvxsubmit=_s10.FirmwareWindow.Submit;Ext.form.Action.ACTION_TYPES.sshsubmit=_s10.FirmwareWindow.Submit2;
Ext.form.Action.ACTION_TYPES.adssubmit=_s10.FirmwareWindow.ADSSubmit;_._2("_s10");ILangMenuItems=_._1(_i4,{ILangMenuItems:{getItems:function(){return _3}}});
_._1(_._3.Controls.LangMenuItems,_.JSCom._8,ILangMenuItems,_i1u,{constructor:function(a){this.superclass.constructor.call(this,a);if(a=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spLCManager=a.getSystemManager().getLocaleManager();_a(this.spLCManager,"_i1").Advise(this);this.createMenuItems()}},createMenuItems:function(){this.mitems=[];this.msitems=[];if(this.spLCManager){var a=document.__DEBUG&&(new Ext.state.CookieProvider).get("no-language")==
"no-language",b=this.spLCManager.getLangs(),c=this.spLCManager.getLocale();if(b!=_4){for(var d=0;d<b.length;++d){var e=b[d];e={clickHideDelay:0,cls:e.code!="auto"?"x-controlsbar-menu-flag x-controlsbar-menu-flag-"+e.code:"",text:e.spell,checked:e.code==c&&!a,value:e.code,listeners:{scope:this,checkchange:this.onLangItemClick}};this.mitems.push(e);this.msitems.push(e)}if(document.__DEBUG){e={clickHideDelay:0,text:"no-language",checked:a,value:"no-language",listeners:{scope:this,checkchange:function(){(new Ext.state.CookieProvider).set("no-language",
"no-language");window.location.reload()}}};this.mitems.push(e);this.msitems.push(e)}}}},onLangItemClick:function(a){(new Ext.state.CookieProvider).clear("no-language");if(this.spLCManager.getLocaleSpell()!=a.textvalue){this.spLCManager.putLocale(a.value);this.spLCManager.commitLocale("controlsbar-commit-locale")}},ILangMenuItems:{getItems:function(a){return a?this.msitems:this.mitems}},_i1u:{_o2:function(a,b){b=="controlsbar-commit-locale"&&window.location.reload();return _5}}});
if(document.__DEBUG)_TR=function(){_TR=(new Ext.state.CookieProvider).get("no-language")=="no-language"?function(a){return(new String(a)).trim()}:_1._TR;return _TR.apply(this,arguments)};_._2("_s10");IPowerMenuItems=_._1(_i6,{IPowerMenuItems:{getItems:function(){return _3}}});
_._1(_._3.Controls.PowerMenuItems,_.JSCom._8,IExtNative,IPowerMenuItems,IPromptWindowEvents,_i1n,{constructor:function(){this.superclass.constructor.apply(this,arguments);if(this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spISCSIManager=this.spDevice.getISCSIManager();_a(this.spISCSIManager,"_i1").Advise(this)}this.createMenuItems();this.prompt=_a(_7(_._3.Controls.PromptWindow),
"IPromptWindow")},createMenuItems:function(){this.mitems=[new Ext.menu.Item({ctCls:"x-controlsbar-menu-shutdown",text:_TR("SHUT_DOWN"),value:"shutdown",caption:_TR("SHUTDOWN_SYSTEM"),listeners:{scope:this,click:this.onPowerItemClick}}),new Ext.menu.Item({ctCls:"x-controlsbar-menu-restart",text:_TR("RESTART"),value:"restart",caption:_TR("REBOOT_SYSTEM"),listeners:{scope:this,click:this.onPowerItemClick}})]},onPowerItemClick:function(a){if(!this.waitLun){var b={caption:a.caption?a.caption:_TR("SHUT_AND_REBOOT"),
isreguired:false,confirmed:!!a.confirmed};if(a.value=="shutdown"){b.delegatename="shoutdownSystem";b.message=!Ext.isEmpty(a.message)?a.message:_TR("Q_SYSTEM_SHUT");if(localStorage.safeMode=="1")b.message=_TR("Q_SYSTEM_SHUT_SAFEMODE");b.type=_s10.PromptWindow.SHUTDOWN}else{b.delegatename="restartSystem";b.message=!Ext.isEmpty(a.message)?a.message:_TR("Q_SYSTEM_REB");if(localStorage.safeMode=="1")b.message=_TR("Q_SYSTEM_REB_SAFEMODE");b.type=_s10.PromptWindow.RESTART}this.spISCSIManager.updateLUNGroups({wnd:b,
callid:this.callid=Ext.id(),toString:function(){return"controlsbar-update-lungroups"}})}},shoutdownSystem:function(a){this.wndConnectRepair=this.wndConnectRepair||_a(_7(_._3.ConnectRepair.ConnectRepairWindow),"IConnectRepair");this.wndConnectRepair.displayDeviceHalt();this.spDevice.shutdown(a.getArgs().arg1,{cmd:"systemshoutdown",msg:_TR("DEVICE_IN_SHTDWN")});return true},restartSystem:function(a){this.wndConnectRepair=this.wndConnectRepair||_a(_7(_._3.ConnectRepair.ConnectRepairWindow),
"IConnectRepair");this.wndConnectRepair.displayDeviceReboot();this.spDevice.reboot(a.getArgs().arg1,{cmd:"systemreboot",msg:_TR("DEVICE_IN_REBOOT")});return true},IPowerMenuItems:{getItems:function(){return this.mitems}},IPromptWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}},
_i1n:{_o3:function(a,b,c){if(!(c!="controlsbar-update-lungroups"||c.callid!=this.callid)){if(a==_5&&this.spISCSIManager){var d=0;a=this.spISCSIManager.getLUNGroups();_.each(a,function(e){if(e=_a(e,"_i1k")){e=e.getTargets();_.each(e,function(f){if(f=_a(f,"_i1o"))d+=parseInt(f.getSessionsCount()==_4?"0":f.getSessionsCount())},this)}},this);if(d>0){c.wnd.confirmed=false;c.wnd.message=String.format("<br/><b>"+_TR("Q_SYSTEM_SESSIONS")+"</b>",d)}}_a(this.prompt,
"_i1").Advise(this);this.prompt.Show(c.wnd.type,c.wnd);c.wnd.confirmed&&this.prompt.__s.onapply();return _5}}}});_._2("_s10");IUserMenuItems=_._1(_i6,{IUserMenuItems:{getItems:function(){return _3},setRenderDom:function(){return _3},setHelpBtnId:function(){return _3}}});
_._1(_._3.Controls.UserMenuItems,_.JSCom._8,IExtNative,IUserMenuItems,_i45,{constructor:function(){this.superclass.constructor.apply(this,arguments);if(this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spLCManager=this.spDevice.getSystemManager().getLocaleManager();_a(this.spLCManager,"_i1").Advise(this);this.spSecurityManager=this.spDevice.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);
this.spSysManager=this.spDevice.getSystemManager();_a(this.spSysManager,"_i1").Advise(this)}this.createMenuItems()},loadArgs:function(a){console.log(a)},createMenuItems:function(){var a=this.spLCManager.getLocale();a="x-menu-item"+(a!="auto"?" x-controlsbar-menu-rcflag x-controlsbar-menu-flag-"+a:" x-controlsbar-menu-noimage");this.mitems=[new Ext.menu.Item({ctCls:"x-controlsbar-menu-password",text:_TR("PASSWORD"),value:"password",caption:"Password",listeners:{scope:this,click:this.onUserItemClick}}),
new Ext.menu.Item({ctCls:"x-controlsbar-menu-logout",text:_TR("LOGOUT_CPT"),value:"logout",caption:_TR("LOGOUT_CPT"),listeners:{scope:this,click:this.onUserItemClick}}),new Ext.menu.Item({ctCls:"x-controlsbar-menu-community",text:_TR("COMMUNITY"),value:"community",caption:"Community",listeners:{scope:this,click:this.onUserItemClick}}),new Ext.menu.Item({ctCls:"x-controlsbar-menu-help",text:_TR("CONTEXT_HELP"),value:"help",caption:"Help",listeners:{scope:this,click:this.onUserItemClick}}),new Ext.menu.Item({itemCls:a,
ctCls:"x-controlsbar-menu-language",text:_TR("LANGUAGE"),value:"language",caption:"Language",menu:new Ext.UI.Menu({cls:"x-system-menu x-controlsbar-langmenu",items:_a(_7(_._3.Controls.LangMenuItems),"ILangMenuItems").getItems()}),listeners:{scope:this}})]},onSecurityTabActivate:function(){if(this.secTab){var a=_a(this.secTab,"IExtNative").getNative();a.un("tabactivate",this.onSecurityTabActivate,this);if(!this.usersTab)this.usersTab=_7(_._3.Security.UsersTab);
_a(this.usersTab,"IExtNative").getNative().on("tabactivate",this.onUsersSubTabActivate,this);a.selectTab(this.usersTab)}},onUsersSubTabActivate:function(){var a=_a(this.usersTab,"IExtNative").getNative();a.un("tabactivate",this.onUsersSubTabActivate,this);a=a.getPanelByIndex(0);this.spSecurityManager.getLoginUserName()=="admin"?a.showAdminProperties(0):a.showLoginUserProperties(0)},wrapUpdatingPwd:function(){var a=_a(this.spSysManager.getCloudOwner(),"_i2z").getName(),b=this.spSecurityManager.getLoginUserName();
if(a==b)Ext.UI.MessageBox.warning({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("UPDATE_PWD_WARNING_MESSAGE"),scope:this});else{if(!this.secTab)this.secTab=_7(_._3.Security.SecurityTab);_a(this.secTab,"IExtNative").getNative().on("tabactivate",this.onSecurityTabActivate,this);(a=_a(_7(_._3.System.Frame),"ISystemFrame"))&&a.activateTab(this.secTab)}},onUserItemClick:function(a){switch(a.value){case "password":this.spSysManager.updateCloudOwner("cloud-users-update-pw");
break;case "logout":localStorage.setItem("isFromLogOut","1");_a(_7(_._3.ConnectRepair.ConnectRepairWindow),"IExtNative").getNative().setRestoreMode("logout",1);break;case "community":window.open(_TR("COMM_URL"),"_blank");break;case "help":Ext.get(this.helpId).dom.click();break}},IUserMenuItems:{getItems:function(){return this.mitems},setRenderDom:function(a){this.renderEle=a},setHelpBtnId:function(a){this.helpId=a}},showIndicator:function(){if(!this.indicator)this.indicator=
new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LSPECIAL,msgCls:"ui-mask-style1"});this.indicator.show()},hideIndicator:function(){this.indicator&&this.indicator.hide()},_i45:{_o1:function(a,b){b=="cloud-users-update-pw"&&this.showIndicator();return _5},_o2:function(a,b){b=="cloud-users-update-pw"&&this.wrapUpdatingPwd();return _5},_o3:function(a,b,c){c=="cloud-users-update-pw"&&this.hideIndicator();return _5}}});
_s10.SSHKeyDownload=_._1(_._3.Controls.SSHKeyDownload,_.JSCom._9,Ext.data.Connection,ILogDownloader,_i4,{resource:{downloadId:"downloadsshkey",downloadType:"DOWNLOAD SSHKey",resourceId:"BackupJobs",resourceType:"BackupJob_Collection"},constructor:function(){_s10.SSHKeyDownload.superclass.constructor.call(this,arguments);Ext.id()},ILogDownloader:{Initialize:function(a){if(a){if(a.downloadId)this.resource.downloadId=a.downloadId;if(a.downloadType)this.resource.downloadType=
a.downloadType;if(a.resourceId)this.resource.resourceId=a.resourceId;if(a.resourceType)this.resource.resourceType=a.resourceType}},Start:function(a){function b(){var f=this;Ext.EventManager.removeListener(f.frame,"load",b,f);setTimeout(function(){Ext.removeNode(f.frame);Ext.removeNode(f.form)},100);f.resource={downloadId:"downloadsshkey",downloadType:"DOWNLOAD SSHKey",resourceId:"BackupJobs",resourceType:"BackupJob_Collection"}}var c=new Ext.XTemplate(String.format('<textarea id="Textarea1" name="{0}" rows="20" cols="100">',
this.resource.downloadId),'&lt;?xml version="1.0" encoding="UTF-8"?&gt;','&lt;xs:nml xmlns:xs="http://www.netgear.com/protocol/transaction/NMLSchema-0.9" xmlns="urn:netgear:nas:readynasd" src="nas" dst="browser"&gt;','&lt;xs:transaction id=""&gt;',String.format('&lt;xs:custom id="opid" name="download" resource-id="{0}" resource-type="{1}"/&gt;',this.resource.resourceId,this.resource.resourceType),"&lt;/xs:transaction&gt;","&lt;/xs:nml&gt;","</textarea>",String.format('<input name="csrfpId" value="{0}" type="hidden"/>',
window.csrfId),String.format('<input name="downloadinput" value="{0}" type="submit"/>',this.resource.downloadType));c.compile();this.StopFrame();var d=document,e=Ext.id();this.frame=d.createElement("iframe");d.body.appendChild(this.frame);Ext.fly(this.frame).set({id:e,name:e,cls:"x-hidden",src:Ext.SSL_SECURE_URL});if(Ext.isIE)document.frames[e].name=e;this.form=d.createElement("form");d.body.appendChild(this.form);Ext.fly(this.form).set({target:e,method:"post",headers:{csrfpId:window.csrfId},enctype:"multipart/form-data",
cls:"x-hidden",action:a});this.form.innerHTML=c.apply();Ext.EventManager.on(this.frame,"load",b,this);this.form.submit();return e},Stop:function(){this.resource={downloadId:"downloadsshkey",downloadType:"DOWNLOAD SSHKey",resourceId:"BackupJobs",resourceType:"BackupJob_Collection"};this.StopFrame();return _5}},StopFrame:function(){if(!Ext.isEmpty(this.frame)){if(!Ext.isEmpty(this.frame.document)&&!Ext.isEmpty(this.frame.document.execCommand))this.frame.document.execCommand("Stop");else!Ext.isEmpty(this.frame.contentWindow)&&
!Ext.isEmpty(this.frame.contentWindow.stop)&&this.frame.contentWindow.stop();Ext.removeNode(this.frame);Ext.removeNode(this.form)}}});_._2("_s10");IRCLangMenuItems=_._1(_i4,{IRCLangMenuItems:{setDictionary:function(){return _3},getItems:function(){return _3}}});
_._1(_._3.Controls.RCLangMenuItems,_.JSCom._8,IRCLangMenuItems,{constructor:function(a){this.superclass.constructor.call(this,a)},createMenuItems:function(){this.mitems=[];this.msitems=[];if(this.dictionary){this.selectedLang=this.dictionary.getLanguage();this.langs=this.dictionary.getLanguages();for(var a in this.langs){var b=this.langs[a],c={clickHideDelay:0,language:a,cls:(a!="auto"?"x-controlsbar-menu-rcflag x-controlsbar-menu-flag-"+a:"")||"",text:b.languageName,
checked:a==this.selectedLang,listeners:{scope:this,checkchange:this.onLangItemClick}};this.mitems.push(c);this.msitems.push(c);b.l=="auto"&&this.msitems.push({xtype:"menuseparator"})}}},onLangItemClick:function(a){this.dictionary.setLanguage(a.language)},IRCLangMenuItems:{setDictionary:function(a){this.dictionary=a;this.createMenuItems()},getItems:function(a){return a?this.msitems:this.mitems}}});_._2("_s10");IRCThemeMenuItems=_._1(_i4,{IRCThemeMenuItems:{getItems:function(){return _3}}});
_._1(_._3.Controls.RCThemeMenuItems,_.JSCom._8,IRCThemeMenuItems,IExtNative,{constructor:function(a){this.superclass.constructor.call(this,a);this.themeCookie="UI_THEME";this.themes=[{title:_TR("THEME_BLACK"),value:"ui-black",opacity:"0.9"},{title:_TR("THEME_SILVER"),value:"ui-white",opacity:"0.5"}];this.initTheme()},createMenuItems:function(){this.mitems=[];for(var a=0;a<this.themes.length;++a)this.mitems.push(new Ext.menu.CheckItem({clickHideDelay:0,text:this.themes[a].title,
value:this.themes[a],checked:this.theme==this.themes[a].value,listeners:{scope:this,click:this.onThemeItemClick}}))},initTheme:function(){if(this.theme=Ext.util.Cookies.get(this.themeCookie))Ext.util.Cookies.set(this.themeCookie,this.theme,new Date((new Date).getTime()+26784E5));else this.theme=this.themes[1].value;for(var a=Ext.getBody(),b=0;b<this.themes.length;++b)a.removeClass(this.themes[b].value);a.addClass(this.theme);this.createMenuItems()},onThemeItemClick:function(a){if(a.checked){this.parentMenu.hide();
return false}Ext.util.Cookies.set(this.themeCookie,a.value.value,new Date((new Date).getTime()+26784E5));for(var b=Ext.getBody(),c=0;c<this.themes.length;++c)b.removeClass(this.themes[c].value);for(c=0;c<this.mitems.length;++c){var d=this.mitems[c];d!=a&&d.setChecked(false,true)}b.addClass(a.value.value)},IRCThemeMenuItems:{getItems:function(){return this.mitems}}});
_s10.RCRemoteAPI=_._1(_._3.Controls.RCRemoteAPI,_8("IRCRemoteAPIEvents"),Ext.util.Observable,_i4,IExtNative,IRCRemoteAPI,{m_port:8080,m_timeout:5E3,m_szurl:"http://localhost",userid:"",password:"",installed:_6,logged:_6,firstTime:true,m_dNamesMy:null,m_dNamesFr:null,m_clearFr:false,forceOpenPath:null,forceOpenDeviceId:null,maxTries:4,constructor:function(){var a=Ext.isDefined(a)?a:{};a.pidx=0;a.rlim=0;a.mxat=10;a.path="";Ext.apply(this,
a);this.m_dNamesMy=[];this.m_dNamesFr=[];this.addEvents("completed","failure")},IRCRemoteAPI:{Initialize:function(a,b){this.putCredentials(a,b);this.init()},IsInstalled:function(){return this.installed},IsLogged:function(){return this.logged},ConnectToDevice:function(a){this.connect(a)},OpenDevice:function(a,b){this.open(a,b)},MapNetworkDrive:function(a,b,c){this.mapNetworkDrive(a,b,c)},GetIP:function(a){this.getIP(a)},GetNetworkDrives:function(){this.getNetworkDrives()},UnMapNetworkDrive:function(a,
b){this.unmapNetworDrive(a,b)}},onFailed:function(a,b,c){a=c.argument.method;_2("Remote.API - "+a+" - failed","Cross domain call failed. <br/>host = "+this.m_szurl+":"+this.m_port,_2.INFO,"Remote API");switch(a){case "init":if(this.pidx<10){++this.pidx;this.init(this.m_szurl,this.m_port+1,2E3)}else{_2("Remote.API - Detect failed","Failed to locate ReadyNas Remote local stuff. Pls install Redynas Remote locally.",_2.INFO,"Remote API");this.logged=this.installed=false;this.Fire("OnStateChange")}break;
case "login":this.isLogged.defer(2E3,this,[this.userid]);break;case "connect":this.isConnected.defer(2E3,this,[this.deviceid]);break;case "logout":this.isLogged.defer(2E3,this,[this.userid]);break;case "open":this.isOpened.defer(2E3,this,[this.deviceid,this.path]);break;case "mapnetworkdrive":this.isMapped.defer(2E3,this,[this.deviceid,this.volname,this.path]);break;case "isconnected":if(++this.rlim<this.mxat)this.isConnected.defer(2E3,this,[this.deviceid]);else{_2("Remote.API - Local stuff is not responded.",
"Check system task manager or restart service manually",_2.INFO,"Remote API");this.fireEvent("failure",a,this)}break;case "islogged":if(++this.rlim<this.mxat)this.isLogged.defer(2E3,this,[this.userid]);else{_2("Remote.API - Local stuff is not responded.","Check system task manager or restart service manually",_2.INFO,"Remote API");this.fireEvent("failure",a,this)}break;case "isopened":if(++this.rlim<this.mxat)this.isOpened.defer(2E3,this,[this.deviceid,this.path]);else{_2("Remote.API - Local stuff is not responded.",
"Check system task manager or restart service manually",_2.INFO,"Remote API");this.fireEvent("failure",a,this)}break;case "ismapped":if(++this.rlim<this.mxat)this.isMapped.defer(2E3,this,[this.deviceid,this.volname,this.path]);else{Ext.UI.MessageBox.error({title:_TR("AGENT_ERROR"),msg:_TR("AGENT_ERROR_MSG")});this.fireEvent("failure",a,this)}break}},onDone:function(a,b,c){a=c.argument.method;b=_.decode(b.responseText);c=Ext.isDefined(b.args.deviceid)?"("+b.args.deviceid+") ":"";this.rlim=0;
_2("Remote.API "+c+"- "+a,"Error = "+b.error+"<br/>Result = "+JSON.stringify(b.result)+"<br/>host = "+this.m_szurl+":"+this.m_port,b.error==0?_2.INFO:_2.INFO,"Remote API");switch(a){case "init":if(b.meta&&b.meta.code==200&&b.result){_2("Remote.API "+c+"- Local stuff is detected.","<br/>host = "+this.m_szurl+":"+this.m_port+"<br/>version="+b.result.version,_2.INFO,"Remote API");this.installed=true;this.Fire("OnStateChange");this.userid&&this.password&&this.login(this.userid,this.password)}else{_2("Remote.API "+
c+"- Detect failed","Failed to locate ReadyNas Remote local stuff. Pls install Redynas Remote locally.",_2.INFO,"Remote API");this.fireEvent("failure",a,this,b)}break;case "login":b.error==0&&this.isLogged(this.userid);break;case "logout":b.error==0&&this.isLogged(this.userid);break;case "islogged":if(b.error==0&&b.result=="In")if(this.logged===true)this.forceOpenDeviceId?this.open.defer(8E3,this,[this.forceOpenDeviceId,this.forceOpenPath]):this.isConnected(this.deviceid);else{this.logged=true;
this.Fire("OnStateChange")}else if(b.error==0&&b.result=="Pending")this.isLogged.defer(2E3,this,[this.userid]);else if(b.error==0&&b.result=="AlreadyLogged"){this.logged=false;this.Fire("OnStateChange");this.logout()}else if(b.error==0&&b.result=="Out")this.login(this.userid,this.password);else if(b.error==0&&b.result=="Failed"){_2("Remote.API "+c+"- Login failed","Please check account information. Username or password is invalid.",_2.INFO,"Remote API");this.logged=false;this.Fire("OnStateChange")}break;
case "connect":this.isConnected.defer(2E3,this,[this.deviceid]);break;case "mapnetworkdrive":this.isMapped.defer(2E3,this,[this.deviceid,this.volname,this.path]);break;case "isconnected":if(b.error==0&&b.result=="Connected"){if(b.args.deviceid){this.open(b.args.deviceid,this.path);this.isOpened(b.args.deviceid,this.path)}}else if(b.error==0&&b.result=="Pending")this.isConnected.defer(2E3,this,[b.args.deviceid]);else if(b.error==0&&b.result=="NotANetworkMember"){_2("Remote.API "+c+"- Device is not a member of the users network.",
"Looks like device from other network.",_2.INFO,"Remote API");this.fireEvent("failure",a,this,b)}else if(b.error==0&&b.result=="LoggedOut")this.isLogged(this.userid);else if(b.error==0&&b.result=="Disconnected"){_2("Remote.API "+c+"- Device disconnected","Could not establish p2p tunnel, please check device side p2p stuff or restart device.",_2.INFO,"Remote API");this.fireEvent("failure",a,this,b)}break;case "isopened":if(b.error==0&&b.result=="Succeed"){_2("Remote.API "+c+'- Location " '+
b.args.path+' " opened.',_2.INFO,"Remote API");forceOpenDeviceId=forceOpenPath=null;this.fireEvent("completed",a,this,b)}else if(b.error==0&&b.result=="Pending")this.isOpened.defer(2E3,this,[b.args.deviceid,b.args.path]);else if(b.error==0&&b.result=="Failed"){_2("Remote.API "+c+'- Explorer failed to open location "'+b.args.path+' ")','Could not open SMB location "'+b.args.location+'", please check device side p2p stuff or restart '+b.args.deviceid+" device.",_2.INFO,"Remote API");this.forceOpenPath=
b.args.path;this.forceOpenDeviceId=b.args.deviceid;this.fireEvent("failure",a,this,b)}break;case "ismapped":if(b.error==0&&b.result=="Succeed")this.fireEvent("completed",a,this,b);else if(b.error==0&&b.result=="Pending")this.isMapped.defer(2E3,this,[b.args.deviceid,b.args.volname,b.args.path]);else if(b.error==0&&b.result=="Failed"){_2("Remote.API "+c+'- Mapping network drive failed "'+b.args.path+' ")'+b.args.deviceid+" device.",_2.INFO,"Remote API");this.fireEvent("failure",a,this,b)}break;
case "open":if(b.error==0&&b.result=="True"){this.isOpened.defer(500,this,[b.args.deviceid,b.args.path]);this.maxTries=4}else if(b.error!=0||b.result=="False"){this.forceOpenPath=b.args.path;this.forceOpenDeviceId=b.args.deviceid;this.fireEvent("failure",a,this,b)}break;case "getip":b.error==0&&b.result&&this.Fire("OnIPGetted",[b.args.deviceid,b.result]);break;case "getip":b.error==0&&b.result&&this.Fire("OnIPGetted",[b.args.deviceid,b.result]);break;case "getnetworkdrives":b.error==0&&b.result&&
this.Fire("OnNetworkGet",[b.args.deviceid,b.result]);break}},init:function(a,b,c){this.m_port=Ext.isDefined(b)?b:this.m_port;this.m_szurl=Ext.isDefined(a)?a:this.m_szurl;a=this.m_szurl+":"+this.m_port+"/getinfo.js";c=Ext.isDefined(c)?c:this.m_timeout;b=new _.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,callbackParam:"jasonCallback",argument:{method:"init"}});return _5},login:function(a,
b,c){c=Ext.isDefined(c)?c:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/login.js?userid="+a+"&pwd="+b;b=new _.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,callbackParam:"jasonCallback",argument:{method:"login"}});return _5},connect:function(a,b){this.deviceid=a;b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/connect.js?deviceid="+a;var c=new _.Crx.Connection;c.on("requestcomplete",
this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"connect"}});return _5},open:function(a,b,c){this.deviceid=a;this.path=b;c=Ext.isDefined(c)?c:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/open.js?deviceid="+a+"&path="+b;b=new _.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,
callbackParam:"jasonCallback",argument:{method:"open"}});return _5},disconnect:function(a,b){this.deviceid=a;b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/disconnect.js?deviceid="+a;var c=new _.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"disconnect"}});return _5},logout:function(a){a=Ext.isDefined(a)?a:this.m_timeout;
var b=this.m_szurl+":"+this.m_port+"/logout.js",c=new _.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:b,method:"GET",scriptTag:true,timeout:a,callbackParam:"jasonCallback",argument:{method:"logout"}});return _5},isConnected:function(a,b){b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/isconnected.js?deviceid="+a;var c=new _.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",
this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"isconnected"}});return _5},isLogged:function(a,b){b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/isloggedin.js?userid="+a;var c=new _.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"islogged"}});return _5},
isOpened:function(a,b,c){c=Ext.isDefined(c)?c:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/isopened.js?deviceid="+a+"&path="+b;b=new _.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:c,callbackParam:"jasonCallback",argument:{method:"isopened"}});return _5},isMapped:function(a,b,c,d){d=Ext.isDefined(d)?d:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/ismapped.js?deviceid="+a+"&volname="+
b+"&path="+c;b=new _.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:d,callbackParam:"jasonCallback",argument:{method:"ismapped"}});return _5},mapNetworkDrive:function(a,b,c,d){this.deviceid=a;this.volname=b;this.path=c;d=Ext.isDefined(d)?d:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/mapnetworkdrive.js?deviceid="+a+"&volname="+b+"&path="+c;b=new _.Crx.Connection;b.on("requestcomplete",
this.onDone,this);b.on("requestexception",this.onFailed,this);b.request({url:a,method:"GET",scriptTag:true,timeout:d,callbackParam:"jasonCallback",argument:{method:"mapnetworkdrive"}});return _5},unmapNetworDrive:function(a,b,c,d){this.deviceid=a;this.volname=b;this.path=c;d=Ext.isDefined(d)?d:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/unmapnetworkdrive.js?deviceid="+a+"&volname="+b+"&path="+c;b=new _.Crx.Connection;b.on("requestcomplete",this.onDone,this);b.on("requestexception",this.onFailed,
this);b.request({url:a,method:"GET",scriptTag:true,timeout:d,callbackParam:"jasonCallback",argument:{method:"unmapnetworkdrive"}});return _5},getNetworkDrives:function(a){a=Ext.isDefined(a)?a:this.m_timeout;var b=this.m_szurl+":"+this.m_port+"/getnetworkdrives.js",c=new _.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:b,method:"GET",scriptTag:true,timeout:a,callbackParam:"jasonCallback",argument:{method:"getnetworkdrives"}});
return _5},getIP:function(a,b){this.deviceid=a;b=Ext.isDefined(b)?b:this.m_timeout;a=this.m_szurl+":"+this.m_port+"/getip.js?deviceid="+a;var c=new _.Crx.Connection;c.on("requestcomplete",this.onDone,this);c.on("requestexception",this.onFailed,this);c.request({url:a,method:"GET",scriptTag:true,timeout:b,callbackParam:"jasonCallback",argument:{method:"getip"}});return _5},putCredentials:function(a,b){this.userid=a;this.password=b}});
_s10.RCAdminPageBtn=_._1(_9,Ext.Component,{cls:"x-controls-rcadmpagebtn",constructor:function(a){a=a||{};this.html=a.text===undefined?_TR("ADMIN_PAGE"):a.text;this.nics=[];this.bonds=[];_s10.RCAdminPageBtn.superclass.constructor.apply(this,arguments);this.devSerial=this.spRCDevice.getSerial();this.devName=this.spRCDevice.getAlias();this.model=this.spRCDevice.getModel();this.networkManager=this.spDevice.getNetworkManager();_a(this.networkManager,"_i1").Advise(this);
_a(this.spDevice,"_i1").Advise(this);this.refresh()},afterRender:function(){_s10.RCAdminPageBtn.superclass.afterRender.apply(this,arguments);this.el.on("click",this.onAdvancedClick,this)},destroy:function(){this.networkManager&&_a(this.networkManager,"_i1").Unadvise(this);this.spDevice&&_a(this.spDevice,"_i1").Unadvise(this)},refresh:function(){if(this.spRCDevice.getOnline())if((this.storedIP=_s10.Utils.loadFromStorage("browse-lan-try-"+
this.spRCDevice.getSerial()+"-ip"))&&_.Utils.isValidIPAddress(this.storedIP))this.spRCDevice.tryLocalIP(this.storedIP);else{delete this.storedIP;this.updateNetworks()}},updateNetworks:function(){this.networkManager.updateNICS("adminpagebtn-update-nics");this.networkManager.updateBONDS("adminpagebtn-update-bonds")},populateNics:function(){var a=this.networkManager.getNICS();this.nics=[];a!=_4&&_.each(a,function(b){b=_a(b,"_i27");if(b.getState()!="down"){b=b.getIPAddress();this.nics.push(b);
this.spRCDevice.tryLocalIP(b)}},this);this.updateUrl()},populateBonds:function(){var a=this.networkManager.getBONDS();this.bonds=[];a!=_4&&_.each(a,function(b){b=_a(b,"_i1y");if(b.getState()!="down"){b=b.getIPAddress();this.bonds.push(b);this.spRCDevice.tryLocalIP(b)}},this);this.updateUrl()},updateUrl:function(){if(this.nics.length||this.bonds.length)this.addClass(this.cls+"-clickable")},onAdvancedClick:function(){if(this.spRCDevice.isRouter()===true){var a=this.spRCDevice.getLocalIP();
if(a)window.open("http://routerlogin.com","_blank","toolbar=1,location=1,directories=1,status=1,menubar=1,scrollbars=1,resizable=1");else{var b='<br /><a href="http://routerlogin.com" target="_blank" style="color: #378dff;">http://routerlogin.com</a>';Ext.UI.MessageBox.warning({title:_TR("LOCAL_ADMIN_PAGE"),msg:_TR("ADMIN_PAGE_BUTTON_ERROR_MSG")+(b?"<br />"+_TR("ADMIN_PAGE_BUTTON_ERROR_MSG_LINKS")+b:"")})}}else if(a=this.spRCDevice.getLocalIP())window.open("http://"+a+"/admin","_blank","toolbar=1,location=1,directories=1,status=1,menubar=1,scrollbars=1,resizable=1");
else{b="";_.each(this.nics.concat(this.bonds),function(c){if(c)b+='<br /><a href="http://'+c+'/admin" target="_blank" style="color: #378dff;">http://'+c+"</a>"},this);Ext.UI.MessageBox.warning({title:_TR("LOCAL_ADMIN_PAGE"),msg:_TR("ADMIN_PAGE_BUTTON_ERROR_MSG")+(b?"<br />"+_TR("ADMIN_PAGE_BUTTON_ERROR_MSG_LINKS")+b:"")})}window.RC&&RC.GoogleAnalytics&&RC.GoogleAnalytics.trackEvent&&RC.GoogleAnalytics.trackEvent("Browse","ClickAdminPage")},_i24:{_o2:function(a,b){if(b=="adminpagebtn-update-nics")this.populateNics();
else b=="adminpagebtn-update-bonds"&&this.populateBonds()}},IRCDeviceEvents:{OnLocalSessionError:function(a,b){if(b==this.storedIP){delete this.storedIP;this.updateNetworks()}},OnLocalSessionInit:function(a,b){_s10.Utils.saveToStorage("browse-lan-try-"+this.spRCDevice.getSerial()+"-ip",b)}}});_._2("Ext","_s10");
_s10.Browsers=_._1(Ext.Component,{constructor:function(){_s10.Browsers.superclass.constructor.apply(this,arguments)},afterRender:function(){_s10.Browsers.superclass.afterRender.apply(this,arguments);this.el.addClass("controls-browsers");this.el.update('<table class="controls-browsers-logo" cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align: middle; position: relative;"><table cellpadding="0" cellspacing="0" border="0" style="margin: 105px auto 0 auto;"><tr><td colspan="4"><div class="controls-browsers-title">'+
_TR("READYCLOUD_NOT_COMPATIBLE")+'</div><div class="controls-browsers-info">'+_TR("SETUP_LATEST_BROWSER")+'</div></td></tr><tr><td style="vertical-align: top;"><a href="http://www.google.com/chrome"><div class="controls-browsers-google">'+_TR("GOOGLE_CHROME")+'</div></a></td><td style="vertical-align: top;"><a href="http://www.mozilla.org/en-US/firefox/all/"><div class="controls-browsers-firefox">'+_TR("MOZILLA_FIREFOX")+'</div></a></td><td style="vertical-align: top;"><a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie"><div class="controls-browsers-ie">'+
_TR("MICROSOFT_IE")+'</div></a></td><td style="vertical-align: top;"><a href="http://support.apple.com/downloads/#safari"><div class="controls-browsers-safari">'+_TR("APPLE_SAFARI")+"</div></a></td></tr></table></td></tr></table>")}});Ext.namespace("_s10");
_s10.AntivirusServiceWindow=_._1(_9,Ext.UI.Window,{modal:true,width:380,resizable:false,constrain:true,minimizable:false,maximizable:false,help:"common_wnd_antivirus",constructor:function(){this.title=_TR("AV_SETTINGS");this.items=[this.avEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("AV_ENABLE"),disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.onEnableCheck,scope:this}}),this.avTable={xtype:"container",layout:"table",cls:"x-inspector-checkbox-protect-os-t",
colspan:2,layoutConfig:{tableAttrs:{cellspacing:0}},items:[this.poEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("AV_PROTECTION_OS"),disabled:false,cls:"x-inspector-checkbox-bg x-inspector-checkbox-protect-os",listeners:{scope:this}}),new Ext.UI.RoundButton({cls:"x-frontview-btn-info",style:"margin-bottom:10px; margin-left:5px;",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("AV_PROTECTION_OS_TOOLTIP")})}}})]}];this.fbar=["->",{xtype:"uibutton",text:_TR("APPLY"),
handler:this.onApplyClick,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.avEnableChkBox.setValue(this.avservice.getEnable());this.poEnableChkBox.setValue(this.avss.getEnable());this.hide()},scope:this,cancelbtn:true}];_s10.AntivirusServiceWindow.superclass.constructor.apply(this,arguments);if(this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spSYSManager=this.spDevice.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this)}},
onApplyClick:function(){this.fireEvent("applyclick",this,this.avEnableChkBox.checked,this.poEnableChkBox.checked);this.hide()},onEnableCheck:function(a,b){this.poEnableChkBox.setDisabled(!b);b||this.poEnableChkBox.setValue(false);this.fireEvent("enablecheck",this,b)},loadService:function(a,b){this.avservice=a;this.avss=b;this.avEnableChkBox.setValue(a.getEnable());this.poEnableChkBox.setValue(b.getEnable());this.poEnableChkBox.setDisabled(!a.getEnable())},loadArg:function(){this.spSYSManager.getSupportAntiVirusSS()!=
"1"&&Ext.get(this.poEnableChkBox.id).parent("table").setDisplayed(false)}});_._2("Ext","_s10");
_s10.VolumePerformanceGraph=_._1(Ext.Component,{cls:"controls-vol-perf-graph",CENTER:150,RADIUS:120,ANGLE_P:150*Math.PI/180,ANGLE_C:270*Math.PI/180,ANGLE_R:30*Math.PI/180,constructor:function(){this.html='<div class="feature-icon perf-icon"><span title="'+_TR("PERFORMANCE")+'">'+_TR("PERFORMANCE")+'</span></div><div class="feature-icon cap-icon"><span title="'+_TR("CAPACITY")+'">'+_TR("CAPACITY")+'</span></div><div class="feature-icon red-icon"><span title="'+_TR("RELIABILITY")+'">'+
_TR("RELIABILITY")+'</span></div><div id="'+(this.svgPathsId=Ext.id())+'" style="width: 100%; height: 100%;"></div>';_s10.VolumePerformanceGraph.superclass.constructor.apply(this,arguments)},afterRender:function(){_s10.VolumePerformanceGraph.superclass.afterRender.apply(this,arguments)},setState:function(a,b,c,d){var e,f,g,h,i=a;b=c/b;if(a=="JBOD"){e=2;f=5;g=0;h="c"}else if(a==0){f=e=5;g=0;h="p"}else if(a==1)if(c==1){e=2;f=5;g=0;h="c";i="JBOD"}else{e=5;f=1;g=3;h="p"}else if(a==5)if(d)if(b<=
6){g=f=e=3;h="c";i+="_CONC"}else{e=3;f=4;g=2;h="c";i+="_CONC_MTR"}else if(b<=6){e=3;f=4;g=3;h="c"}else{e=3;f=4;g=2;h="c";i+="_MTR"}else if(a==6)if(d)if(b<=15){f=e=2;g=5;h="r";i+="_CONC"}else{e=1;g=f=3;h="c";i+="_CONC_MTR"}else if(b<=15){f=e=2;g=5;h="r"}else{e=1;g=f=3;h="c";i+="_MTR"}else if(a==10){e=5;f=1;g=3;h="p"}else if(a==50)if(b==3){e=4;f=3;g=4;h="";i+="_MAXVDEV"}else if(b<=6){e=4;g=f=3;h=""}else{e=2;f=4;g=2;h="c";i+="_MTR"}else if(a==60)if(b==4){e=3;f=2;g=5;h="r";i+="_MAXVDEV"}else if(b<=15){e=
3;f=2;g=4;h="r"}else{e=1;g=f=3;h="c";i+="_MTR"}a={c:"20, 137, 44",p:"255, 200, 20",r:"110, 37, 133"}[h]||"40, 166, 237";c=this.CENTER+this.RADIUS*e/5*Math.cos(this.ANGLE_P);e=this.CENTER+this.RADIUS*e/5*Math.sin(this.ANGLE_P);d=this.CENTER+this.RADIUS*f/5*Math.cos(this.ANGLE_C);f=this.CENTER+this.RADIUS*f/5*Math.sin(this.ANGLE_C);h=this.CENTER+this.RADIUS*g/5*Math.cos(this.ANGLE_R);g=this.CENTER+this.RADIUS*g/5*Math.sin(this.ANGLE_R);Ext.get(this.svgPathsId).update('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+
this.CENTER*2+" "+this.CENTER*2+'" style="width: 100%; height: 100%;">'+String.format('<path d="M{0},{1} L{2},{3} z" stroke="#aaa" />',this.CENTER,this.CENTER,this.CENTER+this.RADIUS*Math.cos(this.ANGLE_P),this.CENTER+this.RADIUS*Math.sin(this.ANGLE_P))+String.format('<path d="M{0},{1} L{2},{3} z" stroke="#aaa" />',this.CENTER,this.CENTER,this.CENTER+this.RADIUS*Math.cos(this.ANGLE_C),this.CENTER+this.RADIUS*Math.sin(this.ANGLE_C))+String.format('<path d="M{0},{1} L{2},{3} z" stroke="#aaa" />',this.CENTER,
this.CENTER,this.CENTER+this.RADIUS*Math.cos(this.ANGLE_R),this.CENTER+this.RADIUS*Math.sin(this.ANGLE_R))+String.format('<path d="M{0},{1} L{2},{3} L{4},{5}, L{0},{1} z" fill="rgba({6}, .4)" stroke="rgb({6})" />',c,e,d,f,h,g,a)+"</svg>");return _TR("STORAGE_VOLUME_CONFIG_DESC_RAID"+i)}});
_._2("_s9");
_s9=_._1(_9,Ext.Container,{cls:"x-browse",layout:"border",constructor:function(a){this.isSelectPathMode=a&&a.isSelectPathMode?true:false;this.loadedArgs={};_s9.superclass.constructor.apply(this,arguments)},initComponent:function(){var a=[this.tree=new _s9.Tree({region:"center",listeners:{nodeselect:function(b,c){if((!this.isAuditMode||this.isAuditMode&&c.name!=c.fsprovider.device.name&&c.name!=_TR("SHARE_HOME_FOLDERS")&&c.iconcls!="readydricon")&&(!this.auditSharePath||
this.auditSharePath&&c.path!=this.auditSharePath)){this.setPathToBrowse(null);this.searchbar.hide();this.isCloudMode?(c.isCloud=true):delete c.isCloud;this.load(c);this.fireEvent("selectionchange",c)}else c.deselect()},nodeload:function(b,c){this.loadedArgs||this.load(c)},updatechain:this.updateHeaderPath,"delete":function(b){if(b.type=="folder")b.fsprovider.removeFSItems([b],b.parent);else if(b.type=="snapshot")b.fsprovider.deleteSnapshot(b.snapshot,b.parent);else b.type=="share"&&b.fsprovider.removeShare(b.share,
b.parent);b.fsprovider.device.id==this.loadedArgs.fsprovider.device.id&&this.loadedArgs.path.indexOf(b.path)===0&&this.load(b.parent)},restore:function(b,c,d,e){d.restoreFSItem(b,c,e)},nodemove:function(b,c,d,e){e.moveFSItems(b,c,d,this.loadedArgs)},nodecopy:function(b,c,d,e){e.copyFSItems(b,c,d,this.loadedArgs)},snaprollback:function(b,c,d){d.rollbackSnapshot(c,this.loadedArgs)},leavedevice:function(b,c){this.fireEvent("leavedevice",this,c)},snapshotclick:function(b,c){this.center.filesView.onSnapshotClick(c)},
settingsclick:function(b,c){this.center.filesView.showSettingsWindow(c)},linkclick:function(b,c){this.center.filesView.showLinkWindow([c])},recover:function(b,c){this.onRecoverClick(c)},scope:this}})];_s9.isRCApp&&a.push(new _s9.ClientDownloadBar({region:"south",autoHeight:true,listeners:{hide:function(){this.doLayout(false,true)},scope:this}}));this.items=[this.header=new _s9.Header({region:"north",height:46,isSelectPathMode:this.isSelectPathMode,listeners:{btreeclick:function(){if(this.leftPanel.hidden){this.header.updateTreeButton(true);
this.leftPanel.show();this.tree.select(this.loadedArgs);this.doLayout(false,false);_s9.GATrackEvent("Browse","ShowTree")}else{this.header.updateTreeButton(false);this.leftPanel.hide();this.doLayout(false,false);_s9.GATrackEvent("Browse","HideTree")}},bfolderclick:function(){if(this.loadedArgs.fsprovider.isVolume(this.loadedArgs.path))if(_s9.isRCApp){this.wndAddShare=this.wndAddShare||new _s9.AddShare;this.wndAddShare.show();this.wndAddShare.loadArgs(this.loadedArgs)}else{if(_s2.AddDataSet){var b=
this.addDataWindow=this.addDataWindow||new _s2.AddDataSet;b.setVolume(this.loadedArgs.fsprovider.getVolumeByPath(this.loadedArgs.path));b.show();b.clear();b.onTypeSelected("NAS")}}else{this.wndAddFolder=this.center.filesView.wndAddFolder=this.wndAddFolder||new _s9.AddFolder({listeners:{addfolder:function(c,d){this.loadedArgs.fsprovider.makeFolder(this.loadedArgs.path+"/"+d,this.loadedArgs)},scope:this}});this.wndAddFolder.show();this.wndAddFolder.loadItems(this.center.filesView.fsitems)}},
buploadclick:function(){this.actionsbar.showWindow();_s9.GATrackEvent("Browse","ShowUploadWindow")},bdownloadclick:function(){this.center.filesView.onDownloadClick()},bdelclick:function(){this.center.onHeaderDeleteClick()},bsearchclick:this.onSearchClick,bpropsclick:function(){this.center.filesView.onSettingsClick()},brecoverclick:function(){this.onRecoverClick()},scope:this}}),{xtype:"container",region:"center",layout:"border",items:[this.actionsbar=new _s9.ActionsBar({region:"north",
height:0,hidden:true,listeners:{show:function(){this.doLayout(false,false)},resize:function(){this.doLayout(false,false);this.doLayout.defer(1,this,[false,false])},done:function(b,c){if(this.isSearchMode){this.loadedArgs.path=this.loadedArgs.searchPath;setTimeout(function(){this.searchbar.onSearchClick()}.bind(this),2E3)}else c.path==this.loadedArgs.path&&c.device.id==this.loadedArgs.device.id&&this.load(this.loadedArgs)},scope:this}}),{xtype:"container",region:"center",layout:"border",items:[this.leftPanel=
new Ext.Container({region:"west",layout:"border",split:true,minWidth:200,width:270,cls:this.cls+"-leftpanel",items:[{xtype:"container",region:"center",layout:"border",items:a},this.statusbar=new _s9.StatusBar({region:"south"})]}),{xtype:"container",region:"center",layout:"border",minWidth:400,cls:"x-browse-rightpanel",items:[this.toolbar=new _s9.ToolBar({region:"north",height:45,listeners:{pathclick:function(b,c){this.setPathToBrowse(null);this.searchbar.hide();this.load(c)},loadhistory:function(b,
c,d){if(d&&d.isFSSearched){this.searchbar.show();this.searchbar.onSearchClick()}else this.searchbar.hide();this.setPathToBrowse(null);this.load(c)},bdvmodeclick:function(b,c){this.setDvMode(c)},newwndclick:function(){this.fireEvent("newwndclick",this,this.loadedArgs.path,this.loadedArgs&&this.loadedArgs.fsprovider?this.loadedArgs.fsprovider.device.id:undefined);_s9.GATrackEvent("Browse","OpenNewWindow")},brefreshclick:function(){_s9.isRCApp?this.fireEvent("refreshclick",this,this.loadedArgs):
this.refresh()},scope:this}}),{xtype:"container",region:"center",layout:"border",minWidth:400,cls:"x-browse-rightpanel",items:[this.usersbar=new _s9.UsersBar({region:"north",height:45,hidden:true,listeners:{show:function(){this.doLayout(false,false)},hide:function(){this.doLayout(false,false)},addclick:function(){this.center.filesView.showSharePermsWindow(this.loadedArgs)},scope:this}}),{xtype:"container",region:"center",layout:"border",items:[this.searchbar=new _s9.Search({region:"north",
hidden:true,autoHeight:true,listeners:{show:function(){this.doLayout(false,false);this.center.filesView.clear();this.setSearchMode(true);this.searchbar.on("resize",this.onSearchBarResize,this);setTimeout(function(){this.searchbar.fireEvent("resize")}.bind(this),50)},hide:function(){this.doLayout(false,false);this.center.filesView.clear();this.setSearchMode(false);this.load(this.loadedArgs);this.searchbar.un("resize",this.onSearchBarResize,this)},setCenterScrollerP:function(){this.center.el.scroller.target.dom.scrollTop=
0},scope:this}}),this.center=new _s9.Center({region:"center",listeners:{loadargs:function(b){this.load(b)},loadNextPageData:function(){this.searchbar.loadNextPageData()},scope:this},devsViewListeners:{folderbrowse:function(b){this.setPathToBrowse(null);this.searchbar.hide();this.load(b)},selectionchange:function(b,c){this.header.updateActionButtons(c);this.fireEvent("selectionchange",b)},leavedevice:function(b,c){this.fireEvent("leavedevice",this,c)},scope:this},filesViewListeners:{folderbrowse:function(b){this.setPathToBrowse(null);
this.searchbar.hide();this.load(b)},selectionchange:function(b,c){this.header.updateActionButtons(c);this.fireEvent("selectionchange",b)},restoreversion:function(b){this.loadedArgs.fsprovider.restoreFSVersion(b,this.loadedArgs)},restore:function(b,c){this.loadedArgs.fsprovider.restoreFSItem(b,c,this.loadedArgs.snapshot)},move:function(b,c,d){this.loadedArgs.fsprovider.moveFSItems(b,c,d,this.loadedArgs)},copy:function(b,c,d){this.loadedArgs.fsprovider.copyFSItems(b,c,d,this.loadedArgs)},"delete":function(b,
c,d){if(c&&d){this.loadedArgs.share=c;this.loadedArgs.searchPath=this.loadedArgs.path;this.loadedArgs.path=d}this.loadedArgs.fsprovider.removeFSItems(b,this.loadedArgs)},deleteshare:function(b){this.loadedArgs.fsprovider.removeShare(b,this.loadedArgs)},versions:function(b,c){this.searchbar.hide();this.load(_.apply({isVersionsMode:true},c))},recover:function(){this.onRecoverClick()},"search-open-folder":function(b){this.setPathToBrowse(null);this.searchbar.hide();this.loadPath(b.path,b.fsprovider.device.id,
false,true)},afterchildrenrender:this.onAfterChildrenRender,scope:this}})]}]}]}]}]}];_s9.superclass.initComponent.apply(this,arguments)},onAfterChildrenRender:function(){this.mask=new Ext.UI.LoadMask(this.el,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0});this.mask.updatesCount=0;this.mask.showProgress=function(){this.updatesCount||this.show();++this.updatesCount};this.mask.hideProgress=function(){this.updatesCount>0&&--this.updatesCount;this.updatesCount||this.hide()};this.dd=
new _s9.DD({targetEl:this.el,actionsbar:this.actionsbar});this.setSelectPathMode(this.isSelectPathMode);this.setDvMode(this.toolbar.getDvMode())},onSearchBarResize:function(){this.searchbar.un("resize",this.onSearchBarResize,this);this.doLayout();this.searchbar.on("resize",this.onSearchBarResize,this)},getRecoverWindow:function(){if(!this.wndRecover){this.wndRecover=CComSingleton(_s9.isRCApp?_s9.RCRecoverWindow:_s9.RecoverWindow);this.wndRecover.on("restore",function(){this.load.defer(2E3,
this,[this.loadedArgs])},this)}return this.wndRecover},onSearchClick:function(){this.vtracker||(this.vtracker=_a(_7(_._3.Controls.VersionTracker),"IVersionTracker"));if(_s9.isRCApp&&this.vtracker.CompareVersion(this.loadedArgs.fsprovider.device.spRCDevice.getFirmwareVersion(),"6.7.0-t1"))Ext.UI.MessageBox.info({title:_TR("FILE_SEARCH"),msg:_TR("FILE_SEARCH_UNAVAILABLE")});else{this.searchbar.show();this.loadedArgs&&this.loadedArgs.path!=(this.searchbar&&this.searchbar.loadedArgs&&
this.searchbar.loadedArgs.path)&&this.searchbar.clenSearchData();this.searchbar.loadArgs(this.loadedArgs)}},onRecoverClick:function(a){if(!a){var b=this.center.filesView.getSelectedRecords();if(b.length==1)a=b[0].data;else if(b.length==0&&this.loadedArgs)a=this.loadedArgs}if((a=_.apply(a,{fromHistory:false}))&&a.fsprovider&&a.fsprovider.device&&a.fsprovider.device.spRCDeviceCapabilities&&a.fsprovider.device.spRCDeviceCapabilities.getSnapshots()===false)Ext.UI.MessageBox.info({title:_TR("BROWSE_RECOVER_FILES"),
msg:_TR("BROWSE_RECOVER_FILES_ROUTER_NOT_SUPPORT")});else if(a&&(a.share||a.pathInHomeFolder)){b=this.getRecoverWindow();b.show();var c=b.init(a.fsprovider.device.spDevice);b.loadArgs(_.apply({},a,{device:c,fsprovider:c.fsprovider}))}else Ext.UI.MessageBox.info({title:_TR("BROWSE_RECOVER_FILES"),msg:_TR("BROWSE_RECOVER_FILES_WITHOUT_SELECTING")})},onFSProviderSharesLoaded:function(a){this.loadPathToBrowse.defer(100,this,[a])},onFSProviderVolsCountChanged:function(a,b){!b&&a==this.loadedArgs.fsprovider?
this.load({path:"/",fsprovider:a}):this.load(this.loadedArgs)},loadPathToBrowse:function(a){if(this.pathToBrowse&&this.pathToBrowse.deviceid==a.device.id){var b=a.getShareByPath(this.pathToBrowse);this.pathToBrowse=="/"&&a.getVolumes().length==1&&!this.isSelectPathMode?this.center.loadArgsToBrowse({fsprovider:a,path:"/"+a.getVolumes()[0].getVolumeId()}):this.center.loadArgsToBrowse({fsprovider:a,path:this.pathToBrowse,share:b,isVersionsMode:!!this.pathToBrowse.isVersionsMode});delete this.pathToBrowse}},
onShareCommitted:function(){this.refresh()},onShareCreated:function(){this.refresh()},setRecoveryMode:function(a){a=a&&!!this.loadedArgs&&!!this.loadedArgs.fsprovider&&!this.loadedArgs.fsprovider.device.isFriend&&!!this.loadedArgs.share&&!this.isSelectPathMode;if(this.isRecoveryMode!==a){this.isRecoveryMode=a;this.center.setRecoveryMode(a);this.tree.setRecoveryMode(a);this.header.setRecoveryMode(a);this.toolbar.setRecoveryMode(a)}},setVersionsMode:function(a){if(this.isVersionsMode!==a){this.isVersionsMode=
a;this.header.setVersionsMode(a);this.toolbar.setVersionsMode(a);this.dd.setVersionsMode(a)}},populateDevices:function(a){this.toolbar.clearHistory();var b;if(this.loadedArgs&&this.loadedArgs.fsprovider)b=this.loadedArgs.fsprovider.device.id;var c;_.each(this.devices||[],function(d){d.fsprovider.un("sharecommitted",this.onShareCommitted,this);d.fsprovider.un("sharecreated",this.onShareCreated,this);d.fsprovider.un("volssharesloaded",this.onFSProviderSharesLoaded,this);d.fsprovider.un("volscountchanged",
this.onFSProviderVolsCountChanged,this);if(!_s9.isRCApp){d.permsMgr.destroy();d.fsprovider.destroy()}d.previewprovider108x81.destroy();d.previewprovider128x128.destroy();d.previewprovider216x162.destroy();d.previewproviderWnd&&d.previewproviderWnd.destroy()},this);this.devices=[];if(!a||a.length===0)this.loadedArgs=undefined;_.each(a,function(d){d.name=d.name||_TR("DEVICE");d.id=d.id||Ext.id();if(!_s9.isRCApp)d.isOnline=true;if(!d.permsMgr){d.permsMgr=new _s9.PermissionsManager;
d.permsMgr.putDevice(d)}if(!d.fsprovider){d.fsprovider=new _s9.FSProvider;d.fsprovider.putDevice(d)}d.previewprovider108x81=new _s9.PreviewProvider({widthPreview:108,heightPreview:81});d.previewprovider108x81.putDevice(d);d.previewprovider128x128=new _s9.PreviewProvider({widthPreview:128,heightPreview:128});d.previewprovider128x128.putDevice(d);d.previewprovider216x162=new _s9.PreviewProvider({widthPreview:216,heightPreview:162});d.previewprovider216x162.putDevice(d);this.devices.push(d);
this.devices[d.id]=d;if(d.expanded||!c&&b==d.id){c=this.devices[d.id].fsprovider;d.expanded=true}d.fsprovider.on("sharecommitted",this.onShareCommitted,this);d.fsprovider.on("sharecreated",this.onShareCreated,this);d.fsprovider.on("volssharesloaded",this.onFSProviderSharesLoaded,this);d.fsprovider.on("volscountchanged",this.onFSProviderVolsCountChanged,this)},this);this.tree.populateDevices(this.devices);this.actionsbar.populateDevices(this.devices);this.center.populateDevices(this.devices);this.dd.populateDevices(this.devices);
this.statusbar.populateDevices(this.devices);this.doLayout(false,false)},loadPath:function(a,b,c,d){a!=(this.searchbar&&this.searchbar.loadedArgs&&this.searchbar.loadedArgs.path)&&this.searchbar.clenSearchData();d||this.searchbar.hide();var e;if(b!==undefined&&this.devices&&this.devices[b])e=this.devices[b].fsprovider;else if(this.loadedArgs&&this.loadedArgs.fsprovider)e=this.loadedArgs.fsprovider;else if(!_s9.isRCApp&&this.devices&&this.devices[0])e=this.devices[0].fsprovider;if(e)if((!e.device.isOnline||
e.getIsVolumesSharesLoaded())&&!d)this.load({fsprovider:a?e:undefined,path:a});else{this.setPathToBrowse(a,b||e.device.id,c);this.tree.expandDeviceNode(b);this.tree.select({path:"/",fsprovider:e})}},setPathToBrowse:function(a,b,c){if(a){this.pathToBrowse=new String(a);this.pathToBrowse.deviceid=b;this.pathToBrowse.isVersionsMode=c}else delete this.pathToBrowse;this.tree.setPathToBrowse(this.pathToBrowse)},setRootPath:function(a){this.tree.setRoot({path:a});this.center.setRoot({path:a})},load:function(a){if(a&&
a.fsprovider){a.device=a.fsprovider.device;a.permsMgr=a.device.permsMgr;if(a.path&&!a.share){a.share=a.fsprovider.getShareByPath(a.path);if(a.share)a.readonly=a.share.isReadyDRShare&&a.share.isReadyDRShare()}if(a.share&&a.permsMgr.getPermsForCurUser(a.share)=="Disabled")a={path:"/",fsprovider:a.fsprovider};if(a.path&&!a.share)if(a.fsprovider.getPathInHomeByPath(a.path+"/")=="/")a.readonly=true}else if(_s9.isRCApp)a={path:""};else if(this.devices&&this.devices.length)a={path:"/",fsprovider:this.devices[0].fsprovider,
device:this.devices[0]};if(a.path=="/"&&a.fsprovider&&a.fsprovider.getVolumes().length==1&&!this.isBackupMode)a={fsprovider:a.fsprovider,path:a.path+a.fsprovider.getVolumes()[0].getVolumeId(),device:a.fsprovider.device,permsMgr:a.fsprovider.device.permsMgr};this.header.load(a);this.toolbar.load(a);this.actionsbar.load(a);this.statusbar.load(a);this.usersbar.load(a);this.updateHeaderPath(this.tree.select(a));a.isVersionsMode?this.setVersionsMode(true):this.setVersionsMode(false);this.center.load(a);
this.dd.load(a);if(a.permsMgr&&!a.permsMgr.getIsReady()){this.argsToLoad=a;a.permsMgr.on("ready",this.onPermsMgrReady,this);a.permsMgr.getIsPending()||a.permsMgr.refresh()}this.loadedArgs=a;if((!this.wndRecover||this.wndRecover.hidden)&&!this.pathToBrowse)this.fireEvent("loadpath",this,a.path,a.device?a.device.id:"")},refresh:function(){this.tree.refresh();this.load(this.loadedArgs)},setSelectPathMode:function(a){this.isSelectPathMode=a;this.header.setSelectPathMode(a);this.toolbar.setSelectPathMode(a);
this.center.setSelectPathMode(a);this.tree.setSelectPathMode(a);this.dd.setSelectPathMode(a);this.statusbar.setSelectPathMode(a)},setBackupMode:function(a){this.isBackupMode=a},setAuditMode:function(a){this.isAuditMode=a},setAuditSharePath:function(a){this.auditSharePath=a},setCloudMode:function(a){this.isCloudMode=a},setDvMode:function(a){this.dvMode=a;this.toolbar.setDvMode(a);this.center.setDvMode(a);_s9.GATrackEvent("Browse","SetDataViewMode",a)},setSearchMode:function(a){this.isSearchMode=
a;this.center.setSearchMode(a);this.dd.setSearchMode(a)},updateHeaderPath:function(a){this.toolbar.updatePath(a)},onPermsMgrReady:function(a){a.un("ready",this.onPermsMgrReady,this);if(this.argsToLoad){this.load(this.argsToLoad);delete this.argsToLoad}}});_s9.isRCApp=!!document.rcserver;
_s9.MakeQuoted=function(a){if(_.isString(a)){var b=function(c){if(c=="<")return"&lt;";else if(c==">")return"&gt;";else if(c=='"')return"&quot;";else if(c=="&")return"&amp;"};return a.replace(/[<>"&]/g,function(c){return b(c)})}return a};
_s9.isEqualDevices=function(a,b){var c,d;return a&&b&&a.name==b.name&&a.backupmode==b.backupmode&&a.isFriend==b.isFriend&&(!_s9.isRCApp||a.isOnline==b.isOnline&&(c=_a(a.spRCDevice.getOwner(),"_i2s"))&&(d=_a(b.spRCDevice.getOwner(),"_i2s"))&&c.getId()==d.getId())};_s9.GATrackEvent=function(a,b,c,d){window.RC&&RC.GoogleAnalytics&&RC.GoogleAnalytics.trackEvent&&RC.GoogleAnalytics.trackEvent(a,b,c,d)};_._2("_s9");
_s9.Center=_._1(_9,Ext.Container,{layout:"border",cls:"x-browse-content",constructor:function(a){this._FilesViewClsId=a._FilesViewClsId||_s9.FilesView;this._SnapsViewClsId=a._SnapsViewClsId||_s9.SnapsView;this.items=[this.devsView=new _s9.DevsView({region:"center",hidden:true,forceLayout:true,listeners:a.devsViewListeners}),this.filesView=new this._FilesViewClsId({region:"center",hidden:true,forceLayout:true,mngrDownload:CComSingleton(_s9.DownloadManager),
listeners:a.filesViewListeners}),this.snapsView=new this._SnapsViewClsId({region:"center",hidden:true,forceLayout:true,listeners:a.snapsViewListeners})];_s9.Center.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.Center.superclass.afterRender.apply(this,arguments);this.el.on("click",function(a){if(this.dvMode=="grid"){a=Ext.get(a.target);if(!a.hasClass("x-sh-recovery-grid-table")&&!a.parent(".x-sh-recovery-grid-table")&&!a.hasClass("x-rc-access-fsiconsdv-fsitem")&&
!a.parent(".x-rc-access-fsiconsdv-fsitem")&&!a.hasClass("x-browse-snapsdv-snap")&&!a.parent(".x-browse-snapsdv-snap")){this.devsView.clearSelection();this.filesView.clearSelection();this.snapsView.clearSelection()}}},this);this.el.scroller=new Ext.UI.Scroller({dom:this.el.dom,type:"vertical"});this.el.scroller.reg();this.el.scroller.on("scroll",_.Utils.throttle(function(a){var b=a.target.getHeight(),c=a.target.dom.scrollTop;if(a.target.select(".x-browse-filesview").elements[1].offsetHeight-b-c<=
0)if(this.isSearchMode)this.fireEvent("loadNextPageData");else{a=this.loadedArgs;if(a.startIndex+a.count<a.totalSize){a.startIndex+=a.count;a.count=150;a.isScroll=true;a.fsprovider.updateFsTreeNode(a)}}},this,500),this);FocusManager.reg(this.el,{keydown:function(a){if(a.target.tagName!="INPUT")switch(a.getKey()){case a.UP:this.el.scroller.scroll(-50);break;case a.DOWN:this.el.scroller.scroll(50);break}}},this);this.selectRect=new _s9.SelectRect({targetEl:this.el,devsView:this.devsView,filesView:this.filesView,
snapsView:this.snapsView})},setRecoveryMode:function(a){this.isRecoveryMode=a;this.devsView.setRecoveryMode(a);this.filesView.setRecoveryMode(a)},setDvMode:function(a){this.dvMode=a;this.selectRect.setDvMode(a);this.devsView.setDvMode(a);this.filesView.setDvMode(a);this.snapsView.setDvMode(a)},setSelectPathMode:function(a){this.isSelectPathMode=a;this.filesView.setSelectPathMode(a);this.devsView.setSelectPathMode(a)},setSearchMode:function(a){this.isSearchMode=a;this.filesView.setSearchMode(a)},populateDevices:function(a){this.devsView.clear();
this.filesView.clear();this.snapsView.clear();this.devices=a;this.devsView.populateDevices(a);this.filesView.populateDevices(a)},load:function(a){var b=a?a.fsprovider:null,c=this.loadedArgs?this.loadedArgs.fsprovider:null;if(b!=c){if(c){c.un("fsfail",this.onFSProviderFail,this);c.un("snapsfail",this.onFSProviderFail,this);c.un("fsready",this.onFSProviderReady,this);c.un("snapsready",this.onFSProviderReady,this);c.un("fsversionsready",this.onFSVersionsReady,this)}if(b){b.on("fsfail",this.onFSProviderFail,
this);b.on("snapsfail",this.onFSProviderFail,this)}}if(a&&a.fsprovider){this.loadedArgs=a;if(a.isVersionsMode){a.fsprovider.updateFsVersions(a);this.filesView.load(a)}else if(this.isRecoveryMode&&(a.fsprovider.isShare(a.path)||a.fsprovider.isLun(a.path)||a.user&&!a.snapshot)){this.filesView.hide();this.devsView.hide();this.snapsView.hidden&&this.snapsView.show();this.snapsView.load(a);a.isSelectSnaps||a.fsprovider.updateSnapshots(a)}else{this.snapsView.hide();this.devsView.hide();this.filesView.hidden&&
this.filesView.show();this.filesView.load(a);if(a.snapshot)a.fsprovider.updateFsSnapTreeNode(a);else if(a.path){a.startIndex=0;a.count=150;a.isScroll=false;this.el.scroller.target.dom.scrollTop=0;if(a.permsMgr)a.permsMgr.getIsReady()&&a.fsprovider.updateFsTreeNode(a);else a.fsprovider.updateFsTreeNode(a)}}}else if(_s9.isRCApp&&(!a||!a.path)){this.loadedArgs=a;this.snapsView.hide();this.filesView.hide();this.devsView.hidden&&this.devsView.show();this.devsView.load(this.loadedArgs)}},onHeaderDeleteClick:function(){if(this.filesView.hidden)this.snapsView.hidden||
this.snapsView.onDeleteClick();else this.filesView.onDeleteClick()},setRoot:function(a){this.filesView.setRoot(a)},loadArgsToBrowse:function(a){var b=a.path,c=a.fsprovider;c.on("fsready",this.onFSProviderReady,this);c.on("snapsready",this.onFSProviderReady,this);c.on("fsversionsready",this.onFSVersionsReady,this);b=b.split("/");this.fireEvent("loadargs",{fsprovider:c,path:b.slice(0,3).join("/"),fromHistory:true,share:a.share,lun:a.lun,readonly:!!a.share&&a.share.isReadyDRShare&&a.share.isReadyDRShare()});
this.pathsToBrowse=[];for(var d=3;d<=b.length;++d)this.pathsToBrowse.push({fsprovider:c,path:b.slice(0,d).join("/"),fromHistory:true,share:a.share,lun:a.lun,isVersionsMode:!!a.isVersionsMode&&d==b.length})},onFSProviderReady:function(a,b,c,d){if(this.pathsToBrowse&&this.pathsToBrowse.length)if(this.pathsToBrowse[0].path==b){this.pathsToBrowse=this.pathsToBrowse.slice(1);if(this.pathsToBrowse.length){var e=false;_.each(c,function(f){if(f.path==this.pathsToBrowse[0].path)e=f;return!e},this);this.pathsToBrowse[0].isVersionsMode&&
_.each(d,function(f){if(f.path==this.pathsToBrowse[0].path)e=f;return!e},this);if(e&&e.perms!="Disabled"){this.fireEvent("loadargs",_.apply({},e,{isVersionsMode:!!this.pathsToBrowse[0].isVersionsMode}));return}}}if(!this.pathsToBrowse||!this.pathsToBrowse.length){a.un("fsready",this.onFSProviderReady,this);a.un("snapsready",this.onFSProviderReady,this);a.un("fsversionsready",this.onFSVersionsReady,this)}},onFSVersionsReady:function(a,b){if(this.pathsToBrowse&&this.pathsToBrowse.length)if(this.pathsToBrowse[0].path==
b)this.pathsToBrowse=this.pathsToBrowse.slice(1);if(!this.pathsToBrowse||!this.pathsToBrowse.length){a.un("fsready",this.onFSProviderReady,this);a.un("snapsready",this.onFSProviderReady,this);a.un("fsversionsready",this.onFSVersionsReady,this)}},onFSProviderFail:function(a,b){if(this.loadedArgs&&this.loadedArgs.path&&this.loadedArgs.path==b.path){var c=b.path.split("/").slice(0,-1),d=c.join("/");if(d.length>1)this.fireEvent("loadargs",{fsprovider:a,path:d,user:b.user,share:c.length>2?this.loadedArgs.share:
undefined,snapshot:b.user&&c.length>4||!b.user&&c.length>3?this.loadedArgs.snapshot:undefined});else _s9.isRCApp&&this.fireEvent("loadargs",{path:""})}}});_._2("_s9");
_s9.Header=_._1(Ext.Container,{cls:"x-browse-header",updatesCount:0,constructor:function(){this.html=String.format('<table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="width: 0%; vertical-align: top;"><div class="{0}-leftbuttons" id="'+(this.bModeId=this.bDeleteId=Ext.id())+'"></div></td><td style="width: 99%; vertical-align: top;"><div class="{0}-propsbuttons" id="'+(this.bPropsId=this.bRecoverId=this.bSearchId=Ext.id())+'"></div></td><tr></table>',this.cls);
_s9.Header.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.Header.superclass.afterRender.apply(this,arguments);this.bTreeMode=new Ext.UI.RoundButton({cls:this.cls+"-treebtn "+this.cls+"-treebtn-en help-browse-header-btree",renderTo:this.bModeId,title:_TR("BROWSE_TREE"),listeners:{click:function(){this.fireEvent("btreeclick",this)},scope:this}});this.bAddFolder=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn "+this.cls+"-addfolder help-browse-header-baddfolder",
disabled:true,renderTo:this.bModeId,title:_TR("NEW_FOLDER"),listeners:{click:function(){this.fireEvent("bfolderclick",this)},scope:this}});this.bUpload=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn "+this.cls+"-upload help-browse-header-bupload",disabled:true,renderTo:this.bModeId,title:_TR("UPLOAD_FILE"),listeners:{click:function(){this.fireEvent("buploadclick",this)},scope:this}});this.bDownload=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn "+this.cls+"-download help-browse-header-bdownload",
disabled:true,renderTo:this.bModeId,title:_TR("DOWNLOAD"),listeners:{click:function(){this.fireEvent("bdownloadclick",this)},scope:this}});this.bDelete=new Ext.UI.RoundButton({cls:this.cls+"-delbtn help-browse-header-bdelete",disabled:true,renderTo:this.bDeleteId,title:_TR("DELETE"),listeners:{click:function(){this.fireEvent("bdelclick",this)},scope:this}});this.bSearch=new Ext.UI.RoundButton({cls:this.cls+"-searchbtn help-browse-header-bsearch",disabled:true,hidden:true,renderTo:this.bSearchId,title:_TR("SEARCH"),
listeners:{click:function(){this.fireEvent("bsearchclick",this)},scope:this}})},load:function(a){this.loadedArgs=a=a||{};this.fsprovider=a.fsprovider;this.permsMgr=a.permsMgr;this.path=a.path;this.updateButtonsByPerms();this.updateActionButtons({})},updateButtonsByPerms:function(){var a=this.fsprovider;this.bAddFolder.disable();this.bUpload.disable();if(this.path&&a&&!this.isRecoveryMode&&!this.isVersionsMode&&this.path!="/"&&this.loadedArgs.type!="backup_targets"&&(!a.isVolume(this.path)&&this.permsMgr&&
(this.loadedArgs.user||this.permsMgr.getPermsForCurUser(this.loadedArgs.share)=="ReadWrite")&&!this.loadedArgs.readonly||a.isVolume(this.path)&&this.path!="/media"&&!a.device.isFriend&&(!a.device.spRCDevice||a.device.spRCDevice.isNAS()===true))){this.bAddFolder.enable();a.isVolume(this.path)||this.bUpload.enable()}if(a){this.bSearch.setDisabled(!a||!a.device.isOnline||!!this.loadedArgs.pathInHome||this.isVersionsMode);this.bSearch.setVisible(!(a&&a.device&&a.device.spRCDevice)&&!this.isSelectPathMode&&
(!a||(!a.device.spRCDeviceCapabilities||a.device.spRCDeviceCapabilities.getFileSearch()===true)&&a.device.spDevice.getSystemManager().getSupportFileSearch()==="1"))}},updateActionButtons:function(a){a=a||{};this.bDelete.setDisabled(!a.delAvail);this.availsButtons=a;this.bDownload.disable();a.downloadAvail&&this.bDownload.enable()},setRecoveryMode:function(a){this.isRecoveryMode=a;this.updateButtonsByPerms()},setVersionsMode:function(a){this.isVersionsMode=a;this.updateButtonsByPerms()},setSelectPathMode:function(a){this.isSelectPathMode=
a;this.bUpload.setVisible(!a)},updateTreeButton:function(a){a?this.bTreeMode.addClass("x-browse-header-treebtn-en"):this.bTreeMode.removeClass("x-browse-header-treebtn-en")}});_._2("_s9");_._2("_s9");
_s9.BaseGrid=_._1(Ext.Container,{cls:"x-sh-recovery-grid",headerTmpl:"",rowTmpl:"",constructor:function(a){_.apply(this,a);this.items=[this.headerBox=new Ext.BoxComponent({cls:this.cls+"-width-700",html:'<table cellspacing="0" cellpadding="0" class="'+this.cls+'-table ui-fwgrid-header">'+this.headerTmpl+"</table>"}),this.scrollBox=new Ext.Container({items:[this.contentBox=new Ext.Container({cls:this.cls+"-width-700",items:[this.getDataView({listeners:{afterrender:function(){this.fireEvent("afterchildrenrender")},
scope:this}})]})]})];_s9.BaseGrid.superclass.constructor.apply(this,arguments);this.contentBox.on("afterrender",this.afterContentRender,this);this.headerBox.on("afterrender",this.afterHeaderRender,this);this.on("show",this.updateSize,this)},afterContentRender:function(){this.scroller=new Ext.UI.Scroller({dom:this.scrollBox.el.dom,type:"vertical",margins:{top:2,right:1,bottom:1,left:1}});this.scroller.reg();FocusManager.reg(this.el,{keydown:function(a){if(a.target.tagName!="INPUT")switch(a.getKey()){case a.UP:this.scroller.scroll(-50);
break;case a.DOWN:this.scroller.scroll(50);break}}},this)},afterHeaderRender:function(){if(this.resizeParentEl=this.el.parent(".x-browse-content")){Ext.getCmp(this.resizeParentEl.id).on("resize",this.updateSize,this);this.updateSize()}},updateSize:function(){if(this.headerBox.rendered&&this.resizeParentEl){this.scrollBox.setSize(0,0);this.headerBox.setWidth(0);var a=this.resizeParentEl.getSize(true),b=a.width;a=a.height-this.headerBox.getHeight();this.scrollBox.setSize(b,a);this.headerBox.setWidth(b)}},
populateRows:function(a,b,c,d,e){this.dv.loadItems(a,b,c,d,e)},getDataView:function(){},setSort:function(a){this.sortOrder&&this.headerBox.removeClass(this.cls+"-sort-"+this.sortOrder);var b=this.sortOrder;switch(a){case "name":b=b=="name-down"?"name-up":"name-down";break;case "type":b=b=="type-down"?"type-up":"type-down";break;case "size":b=b=="size-down"?"size-up":"size-down";break;case "date":b=b=="date-down"?"date-up":"date-down";break}this.sortOrder=b;this.headerBox.addClass(this.cls+"-sort-"+
b);this.populateRows(this.entities||[],this.path,this.pathInSnap,this.selRecords,this.sortOrder);_s9.GATrackEvent("Browse","SetGridOrder",b)}});_._2("_s9");
_s9.FSProvider=_._1(_9,{constructor:function(){_s9.FSProvider.superclass.constructor.apply(this,arguments);this.volumes=[];this.volumesHash={};this.shares=[];this.sharesHash={};this.luns=[];this.lunsHash={};this.usersHash={}},putRecoveryMode:function(a){this.isRecoveryMode=a},putDevice:function(a){if(this.device){_a(this.zfsVolumesManager,"_i1").Unadvise(this);_a(this.spShareManager,"_i1").Unadvise(this);_a(this.spZFSSnapshotsManager,
"_i1").Unadvise(this);_a(this.spFSManager,"_i1").Unadvise(this);_a(this.spSystemManager,"_i1").Unadvise(this);_a(this.spSecurityManager,"_i1").Unadvise(this);_a(this.spHFSnapshotsManager,"_i1").Unadvise(this);this.device.permsMgr.un("ready",this.onPermsMgrReady,this)}this.device=a;this.spDevice=a.spDevice;this.zfsVolumesManager=this.spDevice.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.spShareManager=
this.spDevice.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.spZFSSnapshotsManager=this.spDevice.getZFSSnapshotsManager();_a(this.spZFSSnapshotsManager,"_i1").Advise(this);this.spFSManager=this.spDevice.getFSManager();_a(this.spFSManager,"_i1").Advise(this);this.spBKManager=this.spDevice.getBackupManager();this.spSystemManager=this.spDevice.getSystemManager();_a(this.spSystemManager,"_i1").Advise(this);this.spSecurityManager=
this.spDevice.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spHFSnapshotsManager=this.spDevice.getHFSnapshotsManager();_a(this.spHFSnapshotsManager,"_i1").Advise(this);this.populateHomeFolderOptions();a.permsMgr.on("ready",this.onPermsMgrReady,this)},destroy:function(){if(this.device){_a(this.zfsVolumesManager,"_i1").Unadvise(this);_a(this.spShareManager,"_i1").Unadvise(this);_a(this.spZFSSnapshotsManager,
"_i1").Unadvise(this);_a(this.spFSManager,"_i1").Unadvise(this);_a(this.spSystemManager,"_i1").Unadvise(this);_a(this.spSecurityManager,"_i1").Unadvise(this);_a(this.spHFSnapshotsManager,"_i1").Unadvise(this);this.device.permsMgr.un("ready",this.onPermsMgrReady,this)}},onPermsMgrReady:function(){this.isSharesLoaded&&this.populateShares();this.isVolumesLoaded&&this.isSharesLoaded&&this.populateVolumes();this.isAllUsersLoaded&&this.populateUsers()},
populateVolumes:function(a){if(this.device.permsMgr&&this.device.permsMgr.getIsReady()){a=a||{};a.path=a.path||"/";var b=this.volumes?this.volumes.length:0;this.volumes=[];this.volumesHash={};this.volumesLoaded=true;var c=[],d=[];_.each(this.zfsVolumesManager.getActiveVolumes(),function(j){if(j=_a(j,"_i4o")){var h=j.getVolumeId();if(h&&h!=_4&&(!this.device.isFriend||this.volumesWithShares&&this.volumesWithShares["/"+h])){this.volumes.push(j);this.volumesHash["/"+h]=j;c.push({id:h,
fsprovider:this,name:h,type:"vol",path:"/"+h,parentPath:"/",expanded:true,sizeLabel:String.format(_TR("FREE_SPACE_OF"),_s10.Utils.fileSize(1024*j.getAvailable()),_s10.Utils.fileSize(1024*(j.getCapacity()-j.getReserved())))})}}},this);_.each(this.zfsVolumesManager.getEjectableVolumes(),function(j){if(j=_a(j,"_i4o")){var h=j.getVolumeId();if(h&&h!=_4){this.volumes.push(j);this.volumesHash["/"+h]=j;c.push({id:h,fsprovider:this,name:h,type:"ejvol",path:"/"+h,parentPath:"/",
expanded:true,sizeLabel:"-"})}}},this);var e=this.device.backupmode,f=e=="source"||e=="destination",g=e=="media";if(f||g){e=e=="source"?this.spBKManager.getBackupSourceTargets():this.spBKManager.getBackupDestinationTargets();this.backupPorts=[];this.backupHomes=[];f&&c.push({id:"usb_ports",fsprovider:this,name:_TR("BROWSE_EXTERNAL_STORAGE"),type:"backup_targets",path:_TR("BROWSE_EXTERNAL_STORAGE"),parentPath:"/"});c.push({id:"homes",fsprovider:this,name:_TR("BROWSE_HOME_FOLDERS"),type:"backup_targets",
path:_TR("BROWSE_HOME_FOLDERS"),parentPath:"/"});_.each(e,function(j){j=_a(j,"_ii");if(j!=_4){var h=null;switch(j.getType().toLowerCase()){case "usb":h=j.getUSBSubType();this.backupPorts.push({id:j.getRefId(),fsprovider:this,name:_TR(h),type:"backup_target",backupTarget:j,iconcls:h.indexOf("BACKUP_PORT_USB_")===0?"backup_target_usb":h.indexOf("BACKUP_PORT_ESATA_")===0?"backup_target_esata":"",path:_TR(h),parentPath:_TR("BROWSE_EXTERNAL_STORAGE")});break;case "home":h=j.getShareNameOrProtocol()==
"*"?_TR("BACKUP_ALLHOMESHARES"):j.getShareNameOrProtocol();this.backupHomes.push({id:j.getRefId(),fsprovider:this,name:h,type:"backup_target",backupTarget:j,iconcls:"backup_target_homefolder",path:j.getPath(),parentPath:_TR("BROWSE_HOME_FOLDERS")});break;case "timemachine":h=_TR("TIME_MACHINE");d.push({id:j.getRefId(),fsprovider:this,name:h,type:"backup_target",backupTarget:j,iconcls:"backup_target_timemachine",path:h,parentPath:"/"});break}}},this)}this.isSharesLoaded&&this.isAllUsersLoaded&&this.fireEvent("volssharesloaded",
this);b!=this.volumes.length&&this.fireEvent("volscountchanged",this,this.volumes.length);this.fireEvent("fsready",this,a.path,c,d,a);if(this.device.backupmode=="source"||this.device.backupmode=="destination"){this.fireEvent("fsready",this,_TR("BROWSE_EXTERNAL_STORAGE"),[],this.backupPorts,a);this.fireEvent("fsready",this,_TR("BROWSE_HOME_FOLDERS"),[],this.backupHomes,a)}}},populateShares:function(a){if(this.device.permsMgr.getIsReady()){a=a||{};this.shares=[];this.sharesHash={};this.luns=[];this.lunsHash=
{};var b={};_.each(this.spShareManager.getShares(),function(e){if(e=_a(e,"_i38")){var f=this.device.permsMgr.getPermsForCurUser(e),g=e.getVolumeId();this.shares.push(e);this.sharesHash[e.getPath()]=e;if(f=="ReadWrite"||f=="ReadOnly"||!this.device.isFriend){b["/"+g]=b["/"+g]||[];var j,h=e.getProtocolByName("dlna");if(h&&h!=_4&&h.getAvailable())j=(j=h.getMediaType())&&j!=_4?j.toLowerCase():"";var m;h=e.getProtocols();for(var k=0;k<h.length;++k)if(_a(h[k],"_i3c").getAvailable()){m=
true;break}var l;if(e.isReadyDRShare&&e.isReadyDRShare())l="readydricon";else if((e.getName()+"").toLowerCase()=="readydrop")l="readydropicon";b["/"+g].push({id:e.getName(),fsprovider:this,name:e.getName(),type:"share",share:e,dlnatype:j,accessed:m,iconcls:l,path:e.getPath(),parentPath:"/"+g,perms:f,readonly:e.isReadyDRShare&&e.isReadyDRShare()})}}},this);if(!this.device.backupmode&&this.homeFoldersVolId){b["/"+this.homeFoldersVolId]=b["/"+this.homeFoldersVolId]||[];b["/"+this.homeFoldersVolId].push({id:"home",
fsprovider:this,name:_TR("BROWSE_HOME_FOLDERS"),type:"home",path:"/"+this.homeFoldersVolId+"/home",parentPath:"/"+this.homeFoldersVolId,pathInHome:"/",readonly:true})}this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager);for(var c in b)b[c]=this.sortmgr.sortByName(b[c]);this.isRecoveryMode&&_.each(this.spShareManager.getLUNS(),function(e){if(e=_a(e,"_i1j")){var f=e.getVolumeId(),g="/"+f+"/"+e.getName();this.luns.push(e);this.lunsHash[g]=e;b["/"+f]=b["/"+f]||[];b["/"+f].push({id:e.getName(),
fsprovider:this,name:e.getName(),type:"lun",lun:e,path:g,parentPath:"/"+f,perms:"ReadWrite"})}},this);this.isVolumesLoaded&&this.isAllUsersLoaded&&this.fireEvent("volssharesloaded",this);this.volumesWithShares={};var d=this.usbFolders||[];for(c in b){this.volumesWithShares[c]=true;$_(b[c]).forEach(function(e){if(e.parentPath=="/media"){var f=$_.find(d,function(g){return g.folderName==e.name});f&&(e.readonly=f.readOnly)}});this.fireEvent("fsready",this,c,b[c],[],a)}}},populateFSItems:function(a,b){a=
this.createFileData(a).list;var c=b.path||"",d=[],e=[],f=b.share||this.getShareByPath(c);this.isVolume(c);var g,j=b.path=="/"+this.homeFoldersVolId+"/home";if(_s9.isRCApp&&this.device.isFriend&&j)if((g=AccountManager.getAccount().getEmail())&&g.length)g=g.substr(0,31);var h=c?c+(c[c.length-1]=="/"?"":"/"):"";_.each(a,function(m){var k=m.getAttributeText("n"),l=m.getAttributeText("t"),n=m.getAttributeText("m"),q="";if(n&&n!=_4){n=new Date(n.replace(/-/g,"/"));q=_.formatDateTime(n)}else n=
"";var s=h+k,t=b.pathInSnap?b.pathInSnap+(b.pathInSnap=="/"?"":"/")+k:"",u=this.getPathInHomeByPath(s),v=b.user||this.getUserByPath("/home"+u)||this.getUserByPath(s),o=this.getPathInHomeFolderByPath(s,v),p=(b.path+"/").indexOf("/"+this.homeFoldersVolId+"/home/admin/")==0||j&&k=="admin",w=m.getAttributeText("ro")=="1",x=m.getAttributeText("snap")=="1";if(!g||k==g&&l=="d")if(!_s9.isRCApp||!p)if(l=="d")d.push({id:k,fsprovider:this,name:k,type:"folder",date:n,dateLabel:q,snapfolder:x,share:f,snapshot:b.snapshot,
path:s,parentPath:c,pathInSnap:t,pathDownload:b.snapshot?b.snapshot.getPath()+t:s,readonly:w,user:v,pathInHome:u,pathInHomeFolder:o});else{m=(m=m.getAttributeText("s"))?m*1:"";l=_s10.Utils.fileSize(m);e.push({id:k,fsprovider:this,name:k,type:"file",filetype:this.getFType(k),size:m,sizeLabel:l,date:n,dateLabel:q,snapfolder:x,share:f,snapshot:b.snapshot,path:s,parentPath:b.path,pathInSnap:t,pathDownload:b.snapshot?b.snapshot.getPath()+t:s,readonly:w,user:v,pathInHome:u,pathInHomeFolder:o[o.length-
1]!="/"?o:o.substr(0,o.length-1)})}},this);this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager);d=this.sortmgr.sortByName(d);e=this.sortmgr.sortByExtAndName(e);this.fireEvent("fsready",this,c,d,e,b)},populateFSSearch:function(a,b){var c=[],d=[];_.each(a,function(e){var f=new Date(e.date),g="";if(f&&f!=_4){f=new Date(e.date.replace(/-/g,"/"));g=_.formatDateTime(f)}else f="";var j=e.path+"/"+e.name;f={id:j,fsprovider:this,name:e.name,path:j,type:e.type,date:f,dateLabel:g,parentPath:e.path,
pathDownload:j,isFSSearched:true};if(e.type=="folder"){f.typeLabel=_TR("BROWSE_TYPE_FOLDER");c.push(f)}else{f.filetype=this.getFType(e.name);f.typeLabel=_TR("BROWSE_TYPE_"+(f.filetype||"").toUpperCase());f.size=+e.size;f.sizeLabel=_s10.Utils.fileSize(f.size);d.push(f)}},this);this.fireEvent("fssearchready",this,c,d,b)},populateFSVersions:function(a,b){if(a){var c=b.path||"";a=a.selectNodes("version");var d=[],e=this.getFType(b.path);_.each(a,function(f){var g=f.getAttributeText("snapshot_name"),
j=f.getAttributeText("snapshot_type"),h=f.getAttributeText("snapshot_id"),m=f.getAttributeText("file_size"),k=f.getAttributeText("modification_time");f=f.getAttributeText("path");var l=c?c+"/"+g:"",n=_s10.Utils.fileSize(m),q="";if(k&&k!=_4){k=new Date(k*1E3);q=k.format("M d, Y H:i:s")}else k="";d.push({id:g,fsprovider:this,name:b.path.split("/").pop()+" ("+q+")",snapName:g,snapType:j,snapId:h,type:"file",filetype:e,typeLabel:_TR("BROWSE_TYPE_"+(e||"").toUpperCase()),isFSVersion:true,versionPath:f,
pathDownload:f,share:b.share,user:b.user,pathInHome:b.pathInHome,pathInHomeFolder:b.pathInHomeFolder,size:m,sizeLabel:n,date:k,dateLabel:q,path:l,parentPath:c})},this);this.fireEvent("fsversionsready",this,c,d,b)}},populateSnapshots:function(a,b){var c=[];_.each(a,function(d){d=_a(d,"_i4i");var e=new Date(d.getCreationDate()*1E3),f=_.formatDateTime(e);c.push({fsprovider:this,name:d.getName(),date:e,dateLabel:f,share:b.share,lun:b.lun,snapshot:d,type:"snapshot",path:b.path+"/"+(d.getType()==
"2"?d.getName()+" (":"")+f+(d.getType()=="2"?")":""),parentPath:b.path,pathInSnap:"/"})},this);this.fireEvent("snapsready",this,b.path,c,b)},getFirtSnapshot:function(a,b){var c=[],d=[];_.each(a,function(e){e=_a(e,"_i4i");var f=new Date(e.getCreationDate()*1E3),g=f.format("M d, Y H:i:s");c.push({fsprovider:this,name:e.getName(),date:f,dateLabel:g,share:b.share,lun:b.lun,snapshot:e,type:"snapshot",path:b.path+"/"+(e.getType()=="2"?e.getName()+" (":"")+g+(e.getType()=="2"?")":""),parentPath:b.path,
pathInSnap:"/"})},this);_.each(c,function(e){var f=e.snapshot.getType();d.push({fsprovider:e.fsprovider,name:f=="2"?e.name:"",date:e.date,dateLabel:e.dateLabel,share:e.share,lun:e.lun,user:e.user,snapshot:e.snapshot,type:f=="2"?"manual":"continious",path:e.path,parentPath:e.parentPath,pathInSnap:e.pathInSnap})},this);d=(this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager)).sortByDate(d,true);this.wndClone=this.wndClone||new _s9.CloneSnapshot;this.wndClone.show();this.wndClone.loadArgs(d[0])},
populateHFSnapshots:function(a,b){var c=[];_.each(a,function(d){d=_a(d,"IHFSnapshot");var e=new Date(d.getCreationDate()*1E3),f=_.formatDateTime(e);c.push({fsprovider:this,name:d.getName(),date:e,dateLabel:f,user:b.user,snapshot:d,type:"snapshot",path:b.path+"/"+(d.getType()=="2"?d.getName()+" (":"")+f+(d.getType()=="2"?")":""),parentPath:b.path,pathInSnap:"/"})},this);this.fireEvent("snapsready",this,b.path,c,b)},populateFSActions:function(a){this.fireEvent("fsactionsupdate",this,a)},
populateHomeFolderOptions:function(){if(!this.device.spRCDeviceCapabilities||this.device.spRCDeviceCapabilities.getHomeFolders()===true){var a=this.spSystemManager.getHomeFolderOptions();if(a&&a!=_4)if(this.homeFoldersVolId=_a(a,"_i38").getVolumeId()){this.updateUsers();this.isSharesLoaded&&this.populateShares()}}},populateUsers:function(){var a;if(this.device.permsMgr.getIsReady())if(this.isRCUsersLoaded&&this.isUsersQueried&&this.isUsersLoaded&&this.isRCOwnerLoaded){this.isAllUsersLoaded=
true;this.usersHash={};var b=[],c=_a(this.spSystemManager.getCloudOwner(),"_i2z");c&&c!=_4&&c.getName()&&b.push(c);b=b.concat(this.spSecurityManager.getQueryUsers());b=b.concat(this.spSecurityManager.getUsers());b=b.concat(this.spSecurityManager.getRCUsers());_.each(b,function(d){if(d=_a(d,"_i2z"))if((a=d.getHomeDirectory())&&a!=_4)this.usersHash[a]=d},this);this.isVolumesLoaded&&this.isSharesLoaded&&this.fireEvent("volssharesloaded",this)}},isVolume:function(a){return!!this.volumesHash[a]},
isShare:function(a){return!!this.sharesHash[a]},isLun:function(a){return!!this.lunsHash[a]},getVolumes:function(){return this.volumes},getVolumeByPath:function(a){var b,c;a=a+"/"||"";for(var d in this.volumesHash){c=this.volumesHash[d];if(d[d.length-1]!="/")d+="/";if(a.indexOf(d)===0){b=c;break}}return b},getShares:function(){return this.shares},getShareByPath:function(a){var b,c;a=a+"/"||"";for(var d in this.sharesHash){c=this.sharesHash[d];if(d[d.length-1]!="/")d+="/";if(a.indexOf(d)===0){b=c;break}}return b},
getPathInShareByPath:function(a){a=a||"";var b=this.getShareByPath(a);return b?b.getPath()==a?"/":a.substr(b.getPath().length):""},getIsVolumesSharesLoaded:function(){return this.isVolumesLoaded&&this.isSharesLoaded},getIsVolumesLoaded:function(){return this.isVolumesLoaded},getIsSharesLoaded:function(){return this.isSharesLoaded},getUserByPath:function(a){var b,c;a=a+"/"||"";for(var d in this.usersHash){c=this.usersHash[d];if(d[d.length-1]!="/")d+="/";if(a.indexOf(d)===0||a.indexOf("/"+this.homeFoldersVolId+
d)===0){b=c;break}}return b},getPathInHomeByPath:function(a){a=a||"";return(a+"/").indexOf("/"+this.homeFoldersVolId+"/home/")===0?a.substr(("/"+this.homeFoldersVolId+"/home").length):""},getPathInHomeFolderByPath:function(a,b){a=a||"";if(a[a.length-1]!="/")a+="/";if(b){var c=b.getHomeDirectory();if(c[c.length-1]!="/")c+="/";if(a==c||a=="/"+this.homeFoldersVolId+c)return"/";else if(a.indexOf(c)===0){b.__browse_homedir=c.substr(0,c.length-1);return a.substr(c.length)}else if(a.indexOf("/"+this.homeFoldersVolId+
c)===0){b.__browse_homedir="/"+this.homeFoldersVolId+c.substr(0,c.length-1);return a.substr(("/"+this.homeFoldersVolId+c).length-1)}else return""}else return""},createFileData:function(a){var b={list:[],root:"",type:1};if(a){var c=a.selectNodes("i");if(c&&c.length>0){a=a.getAttributeText("r");b.list=c;b.root=a}}return b},getFType:function(a){a=a.split(".").pop();if(_s9.mime.imgs.indexOf(a.toLowerCase())!=-1)return"image";if(_s9.mime.pdf.indexOf(a.toLowerCase())!=-1)return"pdf";if(_s9.mime.msoffices.indexOf(a.toLowerCase())!=
-1)return"msoffice";if(_s9.mime.txt.indexOf(a.toLowerCase())!=-1)return"txt";if(_s9.mime.bins.indexOf(a.toLowerCase())!=-1)return"binary";if(_s9.mime.videos.indexOf(a.toLowerCase())!=-1)return"video";if(_s9.mime.audio.indexOf(a.toLowerCase())!=-1)return"audio";return"binary"},makeFolder:function(a,b){var c=new String("browse-make-folder");c.args=b;this.spFSManager.makeFolder(a,c)},removeFSItems:function(a,b){var c=[];_.each(a,function(e){c.push(e.name)},this);var d=new String("browse-remove-file");
d.args=b;d.items=a;d.from=b.path;this.spFSManager.removeFolder(c,b.path,d);a&&a.length>=1&&!a[0].isFSSearched&&this.removePreviewCache(a)},moveFSItems:function(a,b,c,d){var e=[];_.each(a,function(g){e.push(g.name)},this);var f=new String("browse-move-file");f.args=d;f.items=a;f.from=b;f.to=c;this.spFSManager.moveFolder(e,b,c,f);this.removePreviewCache(a);_s9.GATrackEvent("Browse","MoveFSItems",a.length+" items")},copyFSItems:function(a,b,c,d){var e=[];_.each(a,function(g){e.push(g.name)},
this);var f=new String("browse-copy-file");f.args=d;f.items=a;f.from=b;f.to=c;this.spFSManager.copyFolder(e,b,c,f);this.removePreviewCache(a);_s9.GATrackEvent("Browse","CopyFSItems",a.length+" items")},renameFSItem:function(a,b,c){var d=new String("browse-rename-file");d.args=c;this.spFSManager.renameFolder(a.path,b,d);this.removePreviewCache([a])},abortFSAction:function(a,b){var c=new String("browse-abort-fsaction");c.args=b;this.spFSManager.abortFSAction(a,c)},restoreFSItem:function(a,b,
c,d){var e=new String("browse-restore-fsitem");e.args=d;e.path=a;e.dest=b;d&&d.user?this.spFSManager.RestoreSnapHFFSItem(e,d.user.getHomeDirectory(),a,b,c):this.spFSManager.RestoreSnapFSItem(a,b,c,e)},removePreviewCache:function(a){_.each(a,function(b){if(b.fsprovider&&b.fsprovider.device){b.fsprovider.device.previewprovider108x81.remove(b);b.fsprovider.device.previewprovider128x128.remove(b);b.fsprovider.device.previewprovider216x162.remove(b)}},this)},updateFsTreeNode:function(a){if(!_s9.isRCApp||
this.device.isOnline)if(a.path){var b;if(a.type=="backup_target")this.fireEvent("fsready",this,a.path,[],[],a);else if(a.path==_TR("BROWSE_EXTERNAL_STORAGE"))this.fireEvent("fsready",this,a.path,[],this.backupPorts||[],a);else if(a.path==_TR("BROWSE_HOME_FOLDERS"))this.fireEvent("fsready",this,a.path,[],this.backupHomes||[],a);else if(a.path=="/")this.updateVolumes(a);else if(this.isVolume(a.path))if(a.path=="/media"){this.nextArgs=a;this.spFSManager.updateVolumes("share-browse-update-volumes")}else this.updateShares(a);
else{if(a.path=="/"+this.homeFoldersVolId+"/home"||a.pathInHome&&!a.pathInHomeFolder){this.updateUsers();a.pathInHome="/"}if(a.path=="/"+this.homeFoldersVolId+"/home"&&a.isCloud){b=new String("browse-update-fs-home");b.args=a;this.spFSManager.getHomeFsTreeNode(b)}else{b=new String("browse-update-fs");b.args=a;this.spFSManager.getFsTreeNode(a.path,"2",b,a.startIndex,a.count)}}}},updateFsSnapTreeNode:function(a){if(!_s9.isRCApp||this.device.isOnline){var b=new String("browse-update-fs");b.args=
a;a.user?this.spFSManager.getFSHFSnapView(b,a.pathInSnap,a.snapshot,"2"):this.spFSManager.getFSSnapView(a.pathInSnap,"2",a.snapshot,b)}},updateUsers:function(){if(!_s9.isRCApp||this.device.isOnline)if(!this.device.spRCDeviceCapabilities||this.device.spRCDeviceCapabilities.getHomeFolders()===true){this.isAllUsersLoaded=false;if(!_s9.isRCApp&&(!this.spSecurityManager.getADSMode()||this.spSecurityManager.getADSMode()==_4))this.spSecurityManager.updateADSMode("browse-update-secmode");
else{this.isUsersQueried=this.isRCOwnerLoaded=this.isRCUsersLoaded=this.isUsersLoaded=true;this.spSecurityManager.queryUsersWithHomeFolder("browse-query-users");if(this.spSecurityManager.getADSMode()=="ads")this.isUsersQueried=false;else{this.isRCUsersLoaded=false;this.spSecurityManager.UpdateRCUsers("browse-update-rcusers");if(!this.device.isFriend){this.isUsersLoaded=false;this.spSecurityManager.updateUsersWithAdmin("browse-update-users",true,false);this.isRCOwnerLoaded=false;this.spSystemManager.updateCloudOwner("browse-update-rcowner")}}}}},
updateShares:function(a){if(!_s9.isRCApp||this.device.isOnline){var b=new String("browse-update-shares");b.args=a;this.spShareManager.updateShares(b);if(!_s9.isRCApp&&this.spShareManager.getDefaultSettingContinuousProtectionFrequency()==_4){b=new String("browse-update-defsettings");b.args=a;this.spShareManager.UpdateDefaultSettings(b)}if(this.isRecoveryMode){b=new String("browse-update-luns");b.args=a;this.spShareManager.updateLUNS(b)}}},updateVolumes:function(a){if(!_s9.isRCApp||
this.device.isOnline){var b=new String("browse-update-zfsvolumes");b.args=a;this.zfsVolumesManager.UpdateVolumes(b);this.updateHomeFolderOptions()}},updateHomeFolderOptions:function(){if(!_s9.isRCApp||this.device.isOnline)if(!this.device.spRCDeviceCapabilities||this.device.spRCDeviceCapabilities.getHomeFolders()===true)if(!this.device.backupmode){var a=(new Date).getTime();if(!this.hfOptionsUpdateTime||a-this.hfOptionsUpdateTime>6E4){this.hfOptionsUpdateTime=a;this.spSystemManager.UpdateHomeFolderOptions("browse-update-homefolderoptions")}}},
updateSnapshots:function(a){if(!_s9.isRCApp||this.device.isOnline){var b=new String("browse-update-snapshots");b.args=a;if(a.user)this.spHFSnapshotsManager.UpdateSnapshots(b,a.user.getId());else a.lun?this.spZFSSnapshotsManager.updateSnapshotsByDateRange(0,a.lun.getVolumeId(),a.lun,"*","*",b):this.spZFSSnapshotsManager.updateSnapshotsByDateRange(0,a.share.getVolumeId(),a.share,"*","*",b)}},getLastSnapshot:function(a,b){if(!_s9.isRCApp||this.device.isOnline){var c=new String("get-last-snapshot");
c.args=a;this.cloneFromReadDRSharesCallBack=b;this.spZFSSnapshotsManager.updateSnapshotsByDateRange(0,a.share.getVolumeId(),a.share,"*","*",c)}},createSnapshot:function(a,b){var c=new String("browse-create-snapshot");c.args=b;if(b.user){var d=this.spHFSnapshotsManager.createSnapshot();d.putUserId(b.user.getId());d.putName(a);this.spHFSnapshotsManager.AddSnapshot(c,d)}else b.share&&this.spZFSSnapshotsManager.CreateSnapshot(b.share.getVolumeId(),b.share.getName(),a,c)},cloneSnapshot:function(a,b,c){var d=
new String("browse-clone-snapshot");d.args=c&&c.parentPath?{path:c.parentPath,share:c.share,fsprovider:c.fsprovider}:c;b&&this.spZFSSnapshotsManager.CloneSnapshot(b.getType(),b.getVolumeName(),b.getShareName(),b.getName(),b.getVolumeName(),a,d)},deleteSnapshot:function(a,b){var c=new String("browse-remove-snapshot");c.args=b;b.user?this.spHFSnapshotsManager.DeleteSnapshot(c,a):this.spZFSSnapshotsManager.DeleteSnapshot(a.getType(),a.getVolumeName(),a.getShareName(),a.getName(),false,c)},rollbackSnapshot:function(a,
b){var c=new String("browse-rollback-snapshot");c.args=b;b.user?this.spHFSnapshotsManager.RollbackSnapshot(c,a):this.spZFSSnapshotsManager.RollbackSnapshot(a.getType(),a.getVolumeName(),a.getShareName(),a.getName(),false,c)},createShare:function(a,b){var c=new String("browse-add-share");c.args=b;this.spShareManager.addShare(a,"","","",c)},removeShare:function(a,b){var c=new String("browse-remove-share");c.args=b;this.spShareManager.removeShare(a,c)},updateFsVersions:function(a){if(!_s9.isRCApp||
this.device.isOnline){var b=new String("browse-update-versions");b.args=a;a.user?this.spFSManager.getHFFSVersions(b,a.user.getHomeDirectory(),a.pathInHomeFolder):this.spFSManager.getFSVersions(a.path,b)}},restoreFSVersion:function(a,b){var c=new String("browse-restore-version");c.args=b;if(a.user){b=a.pathInHomeFolder;var d="/"+a.pathInHomeFolder.split("/").slice(0,-1).join("/");c.path=b;this.spFSManager.RestoreHFFSVersion(c,a.user.getHomeDirectory(),b,d,a.snapName,a.snapType)}else{d=a.path.substr(a.share.getPath().length).split("/");
b="/"+d.slice(0,-1).join("/");d="/"+d.slice(0,-2).join("/");c.path=b;this.spFSManager.RestoreFSVersion(b,d,a.share.getVolumeId(),a.share.getName(),a.snapName,a.snapType,c)}},search:function(a){var b=new String("browse-search");b.args=a;this.spFSManager.search(b,a)},processError:function(a,b,c){var d,e;if(d=_a(a,"_io").getLastNMLError()){a=d.getErrorCode();e=d.getErrorDetails();if(_s9.isRCApp&&a=="4280242620"){this.volumes=[];this.volumesHash={};this.shares=[];this.sharesHash={};
this.luns=[];this.lunsHash={};this.fireEvent("fsready",this,"/",[],[],{path:"/"});this.fireEvent("fsready",this,b.path,[],[],b)}if(d&&a&&e&&a!="4280242620"){b=_TR(a)+"<br />"+e;this.reporter=this.reporter||_a(_7(_._3.ErrorReporter),"IErrorReporter");this.reporter.report(b,"Code: "+a,_2.ERROR,{windowTitle:c,title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},_i3v:{_o1:function(a,b){if(b=="browse-update-zfsvolumes")this.fireEvent("pending",
this,b.args||{});return _5},_o2:function(a,b){if(b=="browse-update-zfsvolumes"||b=="sync-update-zfsvolumes"){this.isVolumesLoaded=true;if(this.isSharesLoaded)this.populateVolumes(b.args||{})}return _5},_o3:function(a,b,c){if(c=="browse-update-zfsvolumes"){this.fireEvent("done",this,c.args||{});if(a!=_5&&a!=E_PENDING)this.processError(b,c.args||{});if(a!=_5&&c=="browse-update-zfsvolumes")this.fireEvent("fsfail",this,c.args||{})}return _5}},_i3b:{_o1:function(a,
b){if(b=="browse-update-shares"||b=="browse-add-share"||b=="browse-remove-share"||b=="browse-commit-share"||b=="shares-volumes-add-share"||b=="browse-update-defsettings"||b=="browse-update-luns")this.fireEvent("pending",this,b.args||{});return _5},_o2:function(a,b){if(b=="browse-update-shares"){this.isSharesLoaded=true;this.populateShares(b.args||{});this.isVolumesLoaded&&this.populateVolumes()}else if(b=="browse-userswnd-update-shares-onshow")this.populateShares({});else if(b=="browse-userswnd-update-shares"){this.populateShares({});
this.fireEvent("sharecommitted",this)}else if(b=="browse-add-share"||b=="browse-remove-share"||b=="browse-commit-share")this.updateFsTreeNode(b.args);else if(b=="shares-propwnd-commit-share"||b=="browse-usersblock-commit-share")this.fireEvent("sharecommitted",this);else if(b=="shares-volumes-add-share")this.fireEvent("sharecreated",this);else if(b=="shares-propwnd-update-shares")this.populateShares({});else if(b=="browse-update-luns")this.populateShares(b.args||{});return _5},_o3:function(a,
b,c){if(c=="browse-update-shares"||c=="browse-add-share"||c=="browse-remove-share"||c=="browse-commit-share"||c=="shares-volumes-add-share"||c=="browse-update-defsettings"||c=="browse-update-luns"){this.fireEvent("done",this,c.args||{});if(a!=_5&&a!=E_PENDING)this.processError(b,c.args||{});if(a!=_5&&c=="browse-update-shares")this.fireEvent("fsfail",this,c.args||{})}return _5}},getNodeValue:function(a){if(a.xmlDocument&&a.xmlDocument.textContent!=undefined)return a.xmlDocument.textContent;return a.getNodeText()},
_iz:{_o1:function(a,b){if(b=="browse-update-fs"||b=="browse-make-folder"||b=="browse-remove-file"||b=="browse-move-file"||b=="browse-copy-file"||b=="browse-rename-file"||b=="browse-abort-fsaction"||b=="browse-restore-fsitem"||b=="browse-update-versions"||b=="browse-restore-version")this.fireEvent("pending",this,b.args||{});return _5},OnFSTNodeReady:function(a,b){if(b=="browse-update-fs"){a=(new _.Xml.document(a.getNodeText())).selectSingleNode("fsgrab");b.args.totalSize=+(a.getAttributeText("n_total_entries")||
0);this.populateFSItems(a,b.args||{})}else if(b=="browse-update-fs-home"){var c=a.selectSingleNode("HomeFolderCollection");if(a=a.selectNodes("HomeFolderCollection/HomeFolder")){_.each(a,function(d){var e=this.getNodeValue(d).replace("/home/","");d=d.getAttributeText("t");c.appendNode(new _.Xml.document('<i t="d" n="'+e+'" m="'+(d?d:"")+'" snap="0" ro="0" st="0" sf="0" cf="0" df="0"/>'))},this);c.removeNode("HomeFolder")}this.populateFSItems(c,b.args||{})}return _5},OnFSSnapViewReady:function(a,
b){if(b=="browse-update-fs")this.populateFSItems((new _.Xml.document(a.getNodeText())).selectSingleNode("fssnap"),b.args||{});return _5},OnFSHFSnapViewReady:function(a,b){if(b=="browse-update-fs")this.populateFSItems((new _.Xml.document(a.getNodeText())).selectSingleNode("fshfsnap"),b.args||{});return _5},OnFSVersionsReady:function(a,b){if(b=="browse-update-versions")this.populateFSVersions((new _.Xml.document(a.toString())).selectSingleNode("*/version_collection"),b.args||{})},OnFSActionsUpdate:function(a){this.populateFSActions(a);
return _5},OnFSSearchReady:function(a,b,c){if(a=="browse-search"){a.args.totalSize=+(c||0);this.populateFSSearch(b,a.args)}},_o2:function(a,b){if(b=="browse-make-folder"||b=="browse-remove-file"||b=="browse-abort-fsaction"||b=="browse-rename-file")this.updateFsTreeNode(b.args);if(b=="browse-restore-fsitem")Ext.UI.MessageBox.info({title:_TR("RESTORE"),msg:String.format(_TR("BROWSE_RESTORE_FSITEM_STARTED"),b.path.split("/").pop())});else if(b=="browse-restore-version"){Ext.UI.MessageBox.info({title:_TR("RESTORE"),
msg:String.format(_TR("BROWSE_RESTORE_FSITEM_STARTED"),b.path.split("/").pop())});this.updateFsVersions(b.args)}else if(b=="browse-remove-file"){this.updateFsTreeNode.defer(2E3,this,[b.args]);this.updateShares.defer(3E3,this);this.updateVolumes.defer(5E3,this)}else if(b=="browse-move-file"||b=="browse-copy-file"){b.from&&this.updateFsTreeNode({fsprovider:b.args.fsprovider,path:b.from});b.to&&this.updateFsTreeNode({fsprovider:b.args.fsprovider,path:b.to})}else if(b=="share-browse-update-volumes"){a=
_a(a,"_iy").getVolumes();this.usbFolders=[];_.each(a,function(c){c=_a(c,"_i11");this.usbFolders.push({folderName:c.getMountPoint().replace("media","").replace(/\//g,""),readOnly:c.getReadOnly()=="1"})},this);this.updateShares(this.nextArgs);delete this.nextArgs}},OnQueue:function(a,b,c){b=c.args.fsprovider;var d=b.device&&b.device.spRCDevice&&b.device.spRCDevice.isLocalSessionInitialized;b.device.spRCDevice&&b.device.spRCDevice.isLocalSessionInitialized&&b.device.spRCDevice.isLocalSessionInitialized();
if(b.spDevice.isStartedWebEventSink()&&!(d&&!b.device.spRCDevice.isLocalSessionInitialized())){console.log("hehehehhehe");if(c=="browse-copy-file")this.fireEvent("fsactionstart",this,a,"copy",c.items,c.from,c.to);else if(c=="browse-move-file")this.fireEvent("fsactionstart",this,a,"move",c.items,c.from,c.to);else c=="browse-remove-file"&&this.fireEvent("fsactionstart",this,a,"remove",c.items,c.from,c.to)}},_o3:function(a,b,c){if(c=="browse-update-fs"||c=="browse-make-folder"||c=="browse-remove-file"||
c=="browse-move-file"||c=="browse-copy-file"||c=="browse-rename-file"||c=="browse-abort-fsaction"||c=="browse-restore-fsitem"||c=="browse-update-versions"||c=="browse-restore-version"){this.fireEvent("done",this,c.args||{});if(a!=_5&&a!=E_PENDING)this.processError(b,c.args||{})}if(a!=_5&&c=="browse-update-fs")this.fireEvent("fsfail",this,c.args||{});if(a!=_5&&c=="browse-search"){this.fireEvent("fssearchfail",this,c.args);this.processError(b)}return _5}},_i4l:{_o1:function(a,
b){if(b=="browse-update-snapshots"||b=="browse-remove-snapshot"||b=="browse-create-snapshot"||b=="browse-clone-snapshot"||b=="browse-rollback-snapshot")this.fireEvent("pending",this,b.args||{});return _5},_o2:function(a,b){if(b=="browse-remove-snapshot"||b=="browse-rollback-snapshot")this.updateSnapshots(b.args);else if(b=="browse-create-snapshot")Ext.UI.MessageBox.info({title:_TR("NEW_SNAPSHOT"),msg:_TR("SNAPSHOT_SUCCESSFULLY_CREATED")});else if(b=="browse-clone-snapshot")if(this.cloneFromReadDRSharesCallBack){this.cloneFromReadDRSharesCallBack();
this.cloneFromReadDRSharesCallBack=null}else this.updateShares();else if(b=="browse-update-snapshots"){a=this.spZFSSnapshotsManager.getSnapshots();this.populateSnapshots(a,b.args)}else if(b=="get-last-snapshot"){a=this.spZFSSnapshotsManager.getSnapshots();this.getFirtSnapshot(a,b.args)}return _5},_o3:function(a,b,c){if(c=="browse-update-snapshots"||c=="browse-remove-snapshot"||c=="browse-create-snapshot"||c=="browse-clone-snapshot"||c=="browse-rollback-snapshot"){this.fireEvent("done",this,c.args||
{});if(a!=_5&&a!=E_PENDING)this.processError(b,c.args||{})}if(a!=_5&&c=="browse-update-snapshots")this.fireEvent("snapsfail",this,c.args||{});return _5}},_i45:{_o1:function(a,b){if(b=="browse-update-homefolderoptions"||b=="browse-update-rcowner")this.fireEvent("pending",this,b.args||{});return _5},_o2:function(a,b){if(b=="browse-update-homefolderoptions")this.populateHomeFolderOptions();else if(b=="browse-update-rcowner"){this.isRCOwnerLoaded=true;this.populateUsers(b.args||
{})}return _5},_o3:function(a,b,c){if(c=="browse-update-homefolderoptions"||c=="browse-update-rcowner")this.fireEvent("done",this,c.args||{});c=="browse-update-homefolderoptions"&&a!=_5&&delete this.hfOptionsUpdateTime;return _5}},_i2y:{_o1:function(a,b){if(b=="browse-update-secmode"||b=="browse-update-users"||b=="browse-query-users"||b=="browse-update-rcusers")this.fireEvent("pending",this,b.args||{});return _5},_o3:function(a,b,c){if(c=="browse-update-secmode")this.updateUsers();
else if(c=="browse-update-users"||c=="sync-update-users"){this.isUsersLoaded=true;this.populateUsers(c.args||{})}else if(c=="browse-query-users"){this.isUsersQueried=true;this.populateUsers(c.args||{})}else if(c=="browse-update-rcusers"){this.isRCUsersLoaded=true;this.populateUsers(c.args||{})}if(c=="browse-update-secmode"||c=="browse-update-users"||c=="browse-query-users"||c=="browse-update-rcusers")this.fireEvent("done",this,c.args||{});return _5}},IHFSnapshotsManagerEvents:{_o1:function(a,
b){if(b=="browse-update-snapshots"||b=="browse-remove-snapshot"||b=="browse-create-snapshot"||b=="browse-rollback-snapshot")this.fireEvent("pending",this,b.args||{});return _5},OnSnapshotsUpdate:function(a,b,c){b=="browse-update-snapshots"&&this.populateHFSnapshots(c,b.args);return _5},_o2:function(a,b){if(b=="browse-remove-snapshot"||b=="browse-rollback-snapshot")this.updateSnapshots(b.args);else b=="browse-create-snapshot"&&Ext.UI.MessageBox.info({title:_TR("NEW_SNAPSHOT"),msg:_TR("SNAPSHOT_SUCCESSFULLY_CREATED")});
return _5},_o3:function(a,b,c){if(c=="browse-update-snapshots"||c=="browse-create-snapshot"||c=="browse-remove-snapshot"||c=="browse-rollback-snapshot"){this.fireEvent("done",this,c.args||{});if(a!=_5&&a!=E_PENDING)this.processError(b,c.args||{},_TR("SNAPSHOT_FAILED"))}if(a!=_5&&c=="browse-update-snapshots")this.fireEvent("snapsfail",this,c.args||{});return _5}}});
_s9.mime={imgs:["jpg","jpeg","png","gif","bmp","tif","ico","svg"],pdf:["pdf"],msoffices:["accda","accdb","accdc","accde","accdp","accdr","accdt","accdu","acl","ade","adp","asd","cnv","doc","docm","docx","dot","dotm","dotx","grv","iaf","laccdb","maf","mam","maq","mar","mat","mda","mdb","mde","mdt","mdw","mpd","mpp","mpt","msg","oab","obi","oft","olm","one","onepkg","ops","ost","pa","pip","pot","potm","potx","ppa","ppam","pps","ppsm","ppsx","ppt","pptm","pptx","prf","pst","pub","puz","rpmsg",
"sldm","sldm","sldx","snp","svd","thmx","vdx","vsd","vss","vst","vsx","vtx","wbk","wll","xar","xl","xla","xlam","xlb","xlc","xll","xlm","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xlw","xsf","xsn"],txt:["txt"],bins:["bin","exe","dll","lib","zip","rar","iso",""],audio:["wav","mp3"],videos:["264","3g2","3gp","3gp2","3gpp","3gpp2","3mm","3p2","60d","787","aaf","aep","aepx","aet","aetx","ajp","ale","amv","amx","anim","arf","asf","asx","avb","avd","avi","avp","avs","avs","axm","bdm","bdmv","bik","bin",
"bix","bmk","bnp","box","bs4","bsf","byu","camproj","camrec","clpi","cmmp","cmmtpl","cmproj","cmrec","cpi","cst","cvc","d2v","d3v","dat","dav","dce","dck","ddat","dif","dir","divx","dlx","dmb","dmsm","dmsm3d","dmss","dnc","dpa","dpg","dream","dsy","dv","dv-avi","dv4","dvdmedia","dvr","dvr-ms","dvx","dxr","dzm","dzp","dzt","edl","evo","eye","f4p","f4v","fbr","fbr","fbz","fcp","fcproject","flc","flh","fli","flv","flx","gfp","gl","grasp","gts","gvi","gvp","h264","hdmov","hkm","ifo","imovieproj","imovieproject",
"iva","ivf","ivr","ivs","izz","izzy","jts","jtv","k3g","lrec","lsf","lsx","m15","m1pg","m1v","m21","m21","m2a","m2p","m2t","m2ts","m2v","m4e","m4u","m4v","m75","meta","mgv","mj2","mjp","mjpg","mkv","mmv","mnv","mod","modd","moff","moi","moov","mov","movie","mp21","mp21","mp2v","mp4","mp4v","mpe","mpeg","mpeg4","mpf","mpg","mpg2","mpgindex","mpl","mpls","mpsub","mpv","mpv2","mqv","msdvd","msh","mswmm","mts","mtv","mvb","mvc","mvd","mve","mvp","mvy","mxf","mys","ncor","nsv","nuv","nvc","ogm","ogv",
"ogx","osp","par","pds","pgi","piv","playlist","pmf","pns","ppj","prel","pro","prproj","prtl","psh","pssd","pva","pvr","pxv","qt","qtch","qtl","qtm","qtz","r3d","rcproject","rdb","rec","rm","rmd","rmp","rms","rmvb","roq","rp","rts","rts","rum","rv","sbk","sbt","scc","scm","scm","scn","screenflow","sec","seq","sfd","sfvidcap","smi","smil","smk","sml","smv","spl","sqz","srt","ssm","stl","str","stx","svi","swf","swi","swt","tda3mt","tdx","tivo","tix","tod","tp","tp0","tpd","tpr","trp","ts","tvs","vc1",
"vcpf","vcr","vcv","vdo","vdr","veg","vem","vf","vft","vfw","vfz","vgz","vid","video","viewlet","viv","vivo","vlab","vob","vp3","vp6","vp7","vpj","vro","vs4","vse","vsp","w32","wcp","webm","wlmp","wm","wmd","wmmp","wmv","wmx","wot","wp3","wpl","wtv","wvx","xfl","xvid","yuv","zm1","zm2","zm3","zmv"]};_._2("_s9");
_s9.PreviewProvider=_._1(_9,_iz,{checkExpireInterval:6E4,expireCount:5,expireSeconds:300,deleteSeconds:600,deferQueue:300,widthPreview:108,heightPreview:81,constructor:function(a){_.apply(this,a);this.lpPreview=this.lpPreview||"browse-update-preview"+this.widthPreview+"x"+this.heightPreview;if(!_s9.PreviewProvider.items){var b=_s9.PreviewProvider.items={};setInterval(function(){var c,d=new Date;for(var e in b)if((c=b[e])&&c.delDate&&c.delDate<
d)b[e]=undefined},this.checkExpireInterval)}this.items=_s9.PreviewProvider.items;this.queuePreview=[];_s9.PreviewProvider.superclass.constructor.apply(this,arguments)},putDevice:function(a){this.device&&_a(this.spFSManager,"_i1").Unadvise(this);this.device=a;this.spFSManager=a.spDevice.getFSManager();_a(this.spFSManager,"_i1").Advise(this)},destroy:function(){this.device&&_a(this.spFSManager,"_i1").Unadvise(this)},getCachePath:function(a,
b,c){return(this.device?this.device.id:"")+a+(b||0)+(c||0)},get:function(a,b,c){var d=this.getCachePath(a.path,b,c),e=new Date;d=this.items[d];if(!d||--d.exprCount<=0||d.exprDate<e)if(!a.fsprovider.device.spRCDeviceCapabilities||a.fsprovider.device.spRCDeviceCapabilities.getFilePreview()===true)_s9.PreviewProvider.SupportedTypes[a.filetype]&&this.pushToQueuePreview(a,b,c);return d?d.b64:undefined},set:function(a,b,c,d){var e=new Date,f=e.add(Date.SECOND,this.expireSeconds);e=e.add(Date.SECOND,
this.deleteSeconds);d={path:a.path,w:b,h:c,b64:d,exprDate:f,delDate:e,exprCount:this.expireCount};this.items[this.getCachePath(a.path,b,c)]=d},remove:function(a){delete this.items[this.getCachePath(a.path,this.widthPreview,this.heightPreview)]},updatePreviews:function(a){this.stopUpdatePreviews();_.each(a,function(b){var c=this.get(b,this.widthPreview,this.heightPreview);c!==undefined&&this.fireEvent("previewready",b,c)},this)},stopUpdatePreviews:function(){this.queuePreview=[]},pushToQueuePreview:function(a){this.queuePreview.length||
this.updateFilePreview(a);this.queuePreview.indexOf(a)==-1&&this.queuePreview.push(a)},popFromQueuePreview:function(a){if(this.queuePreview.length){a=this.queuePreview.indexOf(a);if(a!=-1){this.queuePreview.splice(a,1);this.queuePreview.length&&this.updateFilePreview(this.queuePreview[0])}}},updateFilePreview:function(a,b,c){b=b||this.widthPreview;c=c||this.heightPreview;var d=new String(this.lpPreview);d.item=a;d.w=b;d.h=c;if(a.snapshot)a.user?this.spFSManager.UpdateHFSnapFilePreview(d,a.pathInSnap,
a.snapshot,0,c,b,50):this.spFSManager.UpdateSnapFilePreview(a.pathInSnap,0,a.snapshot,c,b,50,d);else if(a.isFSVersion)a.user?this.spFSManager.UpdateHFSnapFilePreview(d,a.pathInHomeFolder,a.snapId,0,c,b,50):this.spFSManager.UpdateVersionFilePreview(a.path.substr(a.share.getPath().length).split("/").slice(0,-1).join("/"),0,a.share.getVolumeId(),a.share.getName(),a.snapName,a.snapType,a.snapName,c,b,50,d);else this.spFSManager.updateFilePreview(a.path,c,b,d)},populatePreview:function(a,b,c,d){if(d){this.set(a,
b,c,d);this.fireEvent("previewready",a,d)}else this.fireEvent("previewfail",a,d)},_iz:{_o1:function(){return _5},OnFSTPreviewReady:function(a,b){b==this.lpPreview&&this.populatePreview(b.item,b.w,b.h,a)},OnFSSnapFilePreviewReady:function(a,b){b==this.lpPreview&&this.populatePreview(b.item,b.w,b.h,a)},OnFSHFSnapFilePreviewReady:function(a,b){b==this.lpPreview&&this.populatePreview(b.item,b.w,b.h,a)},_o3:function(a,b,c){if(c==this.lpPreview){a!=_5&&this.populatePreview(c.item,
c.w,c.h,"");this.popFromQueuePreview.defer(this.deferQueue,this,[c.item])}return _5}}});_s9.PreviewProvider.SupportedTypes={image:true,pdf:false,video:false};_._2("_s9");
_s9.PermissionsManager=_._1(_9,{isReady:true,isPending:false,constructor:function(a){_s9.PermissionsManager.superclass.constructor.apply(this,arguments);a&&a.device&&this.putDevice(a.device)},putDevice:function(a){this.device=a},destroy:function(){},getIsReady:function(){return this.isReady},getIsPending:function(){return this.isPending},refresh:function(){},getPermsForCurUser:function(){return"ReadWrite"},isLinkCreationAvailable:function(){return true}});_._2("_s9");
_s9.SortManager=_._1(_9,{constructor:function(){_s9.SortManager.superclass.constructor.apply(this,arguments)},compareName:function(a,b){a=a.name.toLowerCase();b=b.name.toLowerCase();return a<b?-1:a>b?1:0},compareNameDesc:function(a,b){return this.compareName(b,a)},compareExtAndName:function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();c=c.split(".").pop();d=d.split(".").pop();return c<d?-1:c>d?1:this.compareName(a,b)},compareType:function(a,b){var c=a.type==
"file"?a.filetype:a.type,d=b.type=="file"?b.filetype:b.type;return c<d?-1:c>d?1:this.compareName(a,b)},compareTypeDesc:function(a,b){return this.compareType(b,a)},compareSize:function(a,b){a=a.size;b=b.size;return a<b?-1:a>b?1:0},compareSizeDesc:function(a,b){return this.compareSize(b,a)},compareDate:function(a,b){a=a.date;b=b.date;return a<b?-1:a>b?1:0},compareDateDesc:function(a,b){return this.compareDate(b,a)},comparePreviewType:function(a,b){var c=a.type=="file"?a.filetype:a.type,d=b.type=="file"?
b.filetype:b.type,e=_s9.PreviewProvider.SupportedTypes;return e[c]&&e[d]?this.compareType(a,b):e[c]&&!e[d]?-1:!e[c]&&e[d]?1:this.compareType(a,b)},compareModel:function(a,b){a=((a.fsprovider?a.fsprovider.device.model:a.model)||"").toLowerCase();b=((b.fsprovider?b.fsprovider.device.model:b.model)||"").toLowerCase();return a<b?-1:a>b?1:0},compareModelDesc:function(a,b){return this.compareModel(b,a)},compareSerial:function(a,b){a=(a.serial||"").toLowerCase();b=(b.serial||"").toLowerCase();return a<
b?-1:a>b?1:0},compareSerialDesc:function(a,b){return this.compareSerial(b,a)},sortByName:function(a,b){return b?a.sort(this.compareNameDesc.createDelegate(this)):a.sort(this.compareName.createDelegate(this))},sortByType:function(a,b){return b?a.sort(this.compareTypeDesc.createDelegate(this)):a.sort(this.compareType.createDelegate(this))},sortBySize:function(a,b){return b?a.sort(this.compareSizeDesc.createDelegate(this)):a.sort(this.compareSize.createDelegate(this))},sortByDate:function(a,b){return b?
a.sort(this.compareDateDesc.createDelegate(this)):a.sort(this.compareDate.createDelegate(this))},sortByExtAndName:function(a){return a.sort(this.compareExtAndName.createDelegate(this))},sortByPreviewType:function(a){return a.sort(this.comparePreviewType.createDelegate(this))},sortByModel:function(a,b){return b?a.sort(this.compareModelDesc.createDelegate(this)):a.sort(this.compareModel.createDelegate(this))},sortBySerial:function(a,b){return b?a.sort(this.compareSerialDesc.createDelegate(this)):a.sort(this.compareSerial.createDelegate(this))}});
_._2("_s9");
_s9.StatusBar=_._1(Ext.Container,{cls:"x-browse-statusbar",updatesCount:0,height:70,constructor:function(){this.html=String.format('<div class="{0}-bcap" id="'+(this.bCapId=Ext.id())+'"><div class="{0}-lcap" id="'+(this.lCapId=Ext.id())+'"></div><div class="{0}-graphct" id="'+(this.lGraphId=Ext.id())+'"><div class="{0}-graph {0}-data"></div><div class="{0}-graph {0}-snap"></div></div></div>',this.cls);_s9.StatusBar.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.StatusBar.superclass.afterRender.apply(this,
arguments);this.bCap=Ext.get(this.bCapId);this.lCap=Ext.get(this.lCapId);this.lGraph=Ext.get(this.lGraphId);this.bCap.setDisplayed(false)},populateDevices:function(a){this.devices=a},setSelectPathMode:function(a){this.isSelectPathMode=a},load:function(a){this.loadedArgs&&this.loadedArgs.fsprovider&&this.loadedArgs.fsprovider.un("volssharesloaded",this.populateVolumes,this);this.loadedArgs=a;this.populateVolumes();this.loadedArgs&&this.loadedArgs.fsprovider&&this.loadedArgs.fsprovider.on("volssharesloaded",
this.populateVolumes,this)},populateVolumes:function(){var a;this.volumeIsrescanning=false;var b,c,d=0,e=0,f=0;if(this.loadedArgs)b=this.loadedArgs.fsprovider;if(!b&&this.devices&&this.devices.length==1)b=this.devices[0].fsprovider;if(b&&(c=b.getVolumes())&&c.length){a=!b.device.spRCDeviceCapabilities||b.device.spRCDeviceCapabilities.getSnapshots()===true;_.each(c,function(j){j=_a(j,"_i4o");if(!j.getEjectable()){d+=parseInt(j.getCapacity())-parseInt(j.getReserved());e+=parseInt(j.getAvailable());
if(a=a&&j.getQuota()!="off"){j=parseInt(j.getUsedBySnapshotKB());if(j*1===-115)this.volumeIsrescanning=true;f+=j}}},this);b=Math.round(100*(d-e-f)/d);if(isNaN(b))b=0;c=Math.round(100*f/d);if(isNaN(c))c=0;var g=this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize(1024*e,0.01)+" "+_TR("FREE_OF")+" "+_s10.Utils.fileSize(1024*d,0.01);this.bCap.setDisplayed(true);this.lCap.update(g);this.lGraph.set({title:this.volumeIsrescanning?_TR("CALCULATING"):String.format("{0}: {1}\n",_TR("VOLUME_DATA"),
_s10.Utils.fileSize((d-e-f)*1024,0.01))+(a?String.format("{0}: {1}\n",_TR("SNAPSHOTS"),_s10.Utils.fileSize(f*1024,0.01)):"")+String.format("{0}: {1}",_TR("VOLUME_FREE"),_s10.Utils.fileSize(e*1024,0.01))});this.lGraph.child(".x-browse-statusbar-data").setWidth((this.volumeIsrescanning?0:b)+"%");this.lGraph.child(".x-browse-statusbar-snap").setWidth((this.volumeIsrescanning?0:c)+"%")}else{this.bCap.setDisplayed(false);this.lCap.update("");this.lGraph.set({title:""});this.lGraph.child(".x-browse-statusbar-data").setWidth("0%");
this.lGraph.child(".x-browse-statusbar-snap").setWidth("0%")}}});_._2("_s9");
_s9.ClientDownloadBar=_._1(_9,Ext.Container,{cls:"x-browse-clientdownloadbar",updatesCount:0,height:90,constructor:function(){this.isMac=_.isMac&&!_.isiOS;var a=document.remoteLinks.lion.url;if(_.isWindows)a=document.remoteLinks.windows.url;else if(_.isiOS)a=document.remoteLinks.iOS.url;else if(_.isAndroid)a=document.remoteLinks.android.url;this.remoteUrl=a;this.html=String.format('<div id="'+(this.readcloudDivId=Ext.id())+'"><span class="{0}-link-remote" id="'+
(this.bLinkId=Ext.id())+'" ><span id="'+(this.lLinkId=Ext.id())+'">'+_TR("BROWSE_LINK_CONNECT_TO_DESKTOP")+'</span></span><div class="{0}-close" id="'+(this.bBarCloseId=Ext.id())+'"><i></i></div></div><div id="'+(this.insightDivId=Ext.id())+'" style="border-top:1px solid #efefef; margin-top:10px; padding:5px"><span class="{0}-insight-link"><span id="'+(this.lInsightLinkId=Ext.id())+'">'+_TR("BROWSE_LINK_CONNECT_TO_INSIGHT")+'</span></span><div class="{0}-insight-close" id="'+(this.bInsightBarCloseId=
Ext.id())+'"><i></i></div></div>',this.cls);_s9.ClientDownloadBar.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.ClientDownloadBar.superclass.afterRender.apply(this,arguments);this.lLink=Ext.get(this.lLinkId);(this.ttDownload=new Ext.UI.ToolTip(Ext.get(this.bLinkId).dom,{html:'<div class="'+this.cls+'-link-remote-tooltip-close" id="'+(this.bCloseId=Ext.id())+'"></div><div class="'+this.cls+'-link-remote-tooltip"></div><div class="'+this.cls+'-link-remote-tooltip-buttons" id="'+
(this.bDownloadId=Ext.id())+'"></div>',autowidth:false,autoheight:false,width:320,height:200,attachPosition:Ext.UI.ToolTip.RIGHT,cls:"x-browse-statusbar-remote-tooltip"})).destroyEvents();Ext.get(this.bCloseId).on("click",this.hideTooltipDownload,this);this.bDownload=new Ext.Component({renderTo:this.bDownloadId,cls:"ui-anchor-button",html:_TR("BROWSE_LINK_CONNECT_TO_DESKTOP_DOWNLOAD"),autoEl:{tag:"a",href:this.remoteUrl||"",target:"_blank"}});this.bDownload.el.on("click",function(){_s9.GATrackEvent("Application",
"DownloadClient")},this);!_.isiOS&&!_.isAndroid&&this.bDownload.el.on("click",function(a){a.stopEvent();this.hideTooltipDownload();window.location=this.remoteUrl},this);this.bCancel=new Ext.UI.Button({renderTo:this.bDownloadId,text:_TR("CANCEL"),width:95,listeners:{click:this.hideTooltipDownload,scope:this}});Ext.get(this.bLinkId).on("click",function(a){a.stopEvent();this.ttDownload.hidden?this.showTooltipDownload():this.hideTooltipDownload()},this);Ext.getBody().on("click",function(a){a=Ext.get(a.target);
a.id!=this.ttDownload.el.id&&!a.parent("#"+this.ttDownload.el.id)&&this.ttDownload.hide()},this);Ext.get(this.bBarCloseId).on("click",function(){var a=Ext.fly(this.readcloudDivId).setStyle({display:"none"}).parent().setStyle({border:0}),b=a.prev();a.setTop(+a.dom.style.top.replace("px","")+48);b.setStyle({height:+b.dom.style.height.replace("px","")+48+"px"});Ext.fly(this.bInsightBarCloseId).setStyle({top:"22px"})},this);Ext.get(this.bInsightBarCloseId).on("click",function(){var a=Ext.fly(this.insightDivId).setStyle({display:"none"}).parent(),
b=a.prev();a.setTop(+a.dom.style.top.replace("px","")+64);b.setStyle({height:+b.dom.style.height.replace("px","")+64+"px"})},this);Ext.get(this.lInsightLinkId).on("click",function(){window.open("https://insight.netgear.com","_blank")},this)},showTooltipDownload:function(){this.ttDownload.show();this.on("afterlayout",this.updateTooltipDownload,this);Ext.EventManager.addListener(window,"resize",this.updateTooltipDownload,this)},hideTooltipDownload:function(){this.ttDownload.hide.defer(200,this.ttDownload);
this.un("afterlayout",this.updateTooltipDownload,this);Ext.EventManager.removeListener(window,"resize",this.updateTooltipDownload,this)},updateTooltipDownload:function(){this.ttDownload.hidden||this.ttDownload.show()},populateDevices:function(a){this.devices=a;if(this.lLink)!window.DevicesLoader||DevicesLoader.getNASes()&&DevicesLoader.getNASes().length?this.lLink.update(_TR("BROWSE_LINK_CONNECT_TO_DESKTOP")):this.lLink.update(_TR("BROWSE_LINK_CONNECT_TO_DESKTOP_ROUTERS_ONLY"))},load:function(a){this.loadedArgs=
a}});_._2("_s9");
_s9.ToolBar=_._1(Ext.Container,{cls:"x-browse-header",updatesCount:0,cookieNameDVMode:"BrowseDataViewMode",constructor:function(){this.history={cur:-1,items:[]};this.html=this.getHtml();_s9.ToolBar.superclass.constructor.apply(this,arguments)},getHtml:function(){return String.format('<table id="'+(this.boxRecHTableId=Ext.id())+'" cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="width: 0%; vertical-align: top;"><div class="{0}-histbuttons" id="'+(this.bPrevId=
this.bNextId=Ext.id())+'"></div></td><td style="width: 0%; vertical-align: top;"><div class="{0}-recmodelabel" id="'+(this.lVerModeId=Ext.id())+'" style="display: none;">&nbsp;&nbsp;'+_TR("BROWSE_PREVIOUS_VERSIONS")+':&nbsp;&nbsp;</div></td><td style="width: 100%; vertical-align: top;"><div class="{0}-content x-ellipsis help-browse-header-lpath" id="'+(this.hFolders=Ext.id())+'"></div></td><td style="width: 0%; vertical-align: top;"><div class="{0}-dvmodebuttons" id="'+(this.bDVModeId=Ext.id())+'"></div></td><td style="width: 0%; vertical-align: top;"><div class="{0}-wndbuttons" id="'+
(this.bNewWndId=Ext.id())+'"></div></td><td style="width: 0%; vertical-align: top;"><div class="{0}-refreshbtn" id="'+(this.bRefreshId=Ext.id())+'"></div></td><tr></table>',this.cls)},afterRender:function(){_s9.ToolBar.superclass.afterRender.apply(this,arguments);this.boxRecHTable=Ext.get(this.boxRecHTableId);this.hFolders=Ext.get(this.hFolders);this.lVerMode=Ext.get(this.lVerModeId);this.progressInd=new Ext.BoxComponent({renderTo:this.hFolders.parent(),cls:this.cls+"-progress",hidden:true});
this.bPrev=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn "+this.cls+"-prevbtn-ct help-browse-header-bprev",iconCls:this.cls+"-prevbtn",disabled:true,renderTo:this.bPrevId,title:_TR("BROWSE_BACK"),listeners:{click:function(){this.fireEvent("loadhistory",this,this.history.items[--this.history.cur],this.history.items[this.history.cur+1]);this.updateHistoryButtons();_s9.GATrackEvent("Browse","ClickHistoryButton","prev")},scope:this}});this.bNext=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn help-browse-header-bnext",
iconCls:this.cls+"-nextbtn",disabled:true,renderTo:this.bNextId,title:_TR("BROWSE_FORWARD"),listeners:{click:function(){this.fireEvent("loadhistory",this,this.history.items[++this.history.cur],this.history.items[this.history.cur+1]);this.updateHistoryButtons();_s9.GATrackEvent("Browse","ClickHistoryButton","next")},scope:this}});this.bGridMode=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn "+this.cls+"-gridbtn help-browse-header-bgrid",renderTo:this.bDVModeId,title:_TR("BROWSE_LIST"),listeners:{click:function(){this.fireEvent("bdvmodeclick",
this,"grid")},scope:this}});this.bIconsMode=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn "+this.cls+"-iconsbtn "+this.cls+"-iconsbtn-en help-browse-header-bicons",renderTo:this.bDVModeId,title:_TR("BROWSE_ICONS"),listeners:{click:function(){this.fireEvent("bdvmodeclick",this,"icons")},scope:this}});this.bTileMode=new Ext.UI.RoundButton({cls:this.cls+"-buttons-btn "+this.cls+"-tilebtn help-browse-header-btiles",renderTo:this.bDVModeId,title:_TR("BROWSE_TILES"),listeners:{click:function(){this.fireEvent("bdvmodeclick",
this,"tile")},scope:this}});this.bNewWnd=new Ext.UI.RoundButton({cls:this.cls+"-newwndbtn help-browse-header-bnewwnd",renderTo:this.bNewWndId,title:_TR("OPEN_IN_NEW_WINDOW"),hidden:true,listeners:{click:function(){this.fireEvent("newwndclick",this)},scope:this}});this.bRefresh=new Ext.UI.RoundButton({cls:"x-frontview-btn-refresh x-fw-btn-refresh",renderTo:this.bRefreshId,title:_TR("REFRESH"),hidden:!_s9.isRCApp,listeners:{click:function(){this.fireEvent("brefreshclick",this)},scope:this}});
this.on("resize",this.resizePath,this)},load:function(a){this.loadedArgs=a;if(this.fsprovider){this.fsprovider.un("pending",this.onFSProviderPending,this);this.fsprovider.un("done",this.onFSProviderDone,this)}if(this.permsMgr){this.permsMgr.un("pending",this.onPermsMgrPending,this);this.permsMgr.un("done",this.onPermsMgrDone,this)}a=a||{};this.updatesCount=0;this.hideProgress();this.fsprovider=a.fsprovider;this.permsMgr=a.permsMgr;this.path=a.path;this.share=a.share;if(this.fsprovider){this.fsprovider.on("pending",
this.onFSProviderPending,this);this.fsprovider.on("done",this.onFSProviderDone,this)}if(this.permsMgr){this.permsMgr.on("pending",this.onPermsMgrPending,this);this.permsMgr.on("done",this.onPermsMgrDone,this);this.permsMgr.getIsPending()&&this.onPermsMgrPending(this.permsMgr)}a.fromHistory||this.pushHistory(_.apply({fromHistory:true},this.loadedArgs))},setRecoveryMode:function(a){(this.isRecoveryMode=a)?this.bNewWnd.hide():this.bNewWnd.show()},setVersionsMode:function(a){this.isVersionsMode=a;this.lVerMode.setDisplayed(a)},
setSelectPathMode:function(a){this.isSelectPathMode=a;this.bNewWnd.setVisible(!a)},getDvMode:function(){var a=Ext.state.Manager.get(this.cookieNameDVMode)||"icons";if(a!="icons"&&a!="tile"&&a!="grid")a="icons";return a},setDvMode:function(a,b){b||Ext.state.Manager.set(this.cookieNameDVMode,a);this.dvMode=a;if(a=="grid"){this.bGridMode.addClass(this.cls+"-gridbtn-en");this.bIconsMode.removeClass(this.cls+"-iconsbtn-en");this.bTileMode.removeClass(this.cls+"-tilebtn-en")}else if(a=="icons"){this.bGridMode.removeClass(this.cls+
"-gridbtn-en");this.bIconsMode.addClass(this.cls+"-iconsbtn-en");this.bTileMode.removeClass(this.cls+"-tilebtn-en")}else if(a=="tile"){this.bGridMode.removeClass(this.cls+"-gridbtn-en");this.bIconsMode.removeClass(this.cls+"-iconsbtn-en");this.bTileMode.addClass(this.cls+"-tilebtn-en")}},clearHistory:function(){this.history.items=[];this.history.cur=-1;this.updateHistoryButtons()},updateHistoryButtons:function(){this.bPrev.setDisabled(this.history.cur<=0);this.bNext.setDisabled(this.history.cur+1>=
this.history.items.length)},pushHistory:function(a){var b=this.history.cur<0?undefined:this.history.items[this.history.cur];if(a.path!==undefined&&(!b||b.path!=a.path)){this.history.items=this.history.items.slice(0,this.history.cur+1);this.history.items.push(a);++this.history.cur;this.updateHistoryButtons()}},updatePath:function(a){var b=this.cls,c="",d=[];_.each(a,function(e,f){var g=Ext.id();c+='<span class="'+b+'-pathitem-pad x-selectable">'+(f===0&&(e.type=="root"||e.type=="device")?"\\\\":
"\\")+'</span><span class="'+b+"-pathitem "+(f==a.length-1?b+"-pathitem-noclickable ":"")+b+'-pathitem-pad x-selectable"" title="'+_s9.MakeQuoted(e.name)+'" id="'+g+'">'+_s9.MakeQuoted(e.name)+"</span>";f<a.length-1&&d.push({id:g,node:e.node})},this);this.hFolders.update(c);_.each(d,function(e){var f=Ext.get(e.id);if(f){f.node=e.node;f.on("click",this.onPathClick,this);f.on("mouseover",this.onPathMouseOver,this);f.on("mouseleave",this.onPathMouseLeave,this)}},this);this.resizePath()},
resizePath:function(){this.hFolders.setWidth("auto");_.each(this.hFolders.dom.childNodes,function(j){j=Ext.get(j);j.node&&j.update(_s9.MakeQuoted(j.node.name));j.setDisplayed(true)},this);var a=this.getWidth(),b=this.boxRecHTable.getWidth(),c=this.hFolders.getWidth(),d=this.hFolders.dom.childNodes,e=d.length/2,f=2;if(e%2==1){e+=1;f=-2}for(var g=true;a<b&&c>50&&e>=0&&e<d.length;){a=Ext.get(d[e-1]);if(g){a.update("...");g=false}else{a.setDisplayed(false);Ext.get(d[e]).setDisplayed(false)}a=
this.getWidth();b=this.boxRecHTable.getWidth();c=this.hFolders.getWidth();e+=f;f+=f<0?-2:2;f*=-1}for(;a<b&&c>50;){this.hFolders.setWidth(c-20);a=this.getWidth();b=this.boxRecHTable.getWidth();c=this.hFolders.getWidth()}this.progressIndWidth=c},onPathClick:function(a,b){b=Ext.get(b).node;this.fireEvent("pathclick",this,b);a=0;for(b=b.parent;b;){++a;b=b.parent}_s9.GATrackEvent("Browse","ClickHeaderPath",a+" level")},onPathMouseOver:function(a,b){for(a=Ext.get(b);a&&a.prev;){a.addClass(this.cls+
"-pathitem-over");a=a.prev()}},onPathMouseLeave:function(a,b){for(a=Ext.get(b);a&&a.prev;){a.removeClass(this.cls+"-pathitem-over");a=a.prev()}},onFSProviderPending:function(a,b){if(!b.path||this.path&&this.path.indexOf(b.path)===0){this.updatesCount||this.showProgress();++this.updatesCount}},onFSProviderDone:function(a,b){if(!b.path||this.path&&this.path.indexOf(b.path)===0){this.updatesCount>0&&--this.updatesCount;this.updatesCount||this.hideProgress()}},onPermsMgrPending:function(a){if(a&&a.device){this.updatesCount||
this.showProgress();++this.updatesCount}},onPermsMgrDone:function(a){if(a&&a.device){this.updatesCount>0&&--this.updatesCount;this.updatesCount||this.hideProgress()}},showProgress:function(){if(this.hideProgressProcId){clearTimeout(this.hideProgressProcId);this.hideProgressProcId=undefined}else{this.progressInd.setWidth(0);this.progressInd.show();var a=this.progressInd,b=0;clearInterval(this.progressProcId);this.progressProcId=setInterval(function(){a.setWidth((1-1/(b+1))*100+"%");b+=0.01},50)}},
hideProgress:function(){var a=this;if(this.hideProgressProcId){clearTimeout(this.hideProgressProcId);this.hideProgressProcId=undefined}if(this.progressProcId)this.hideProgressProcId=setTimeout(function(){a.hideProgressProcId=undefined;a.progressInd.hide();clearInterval(a.progressProcId);a.progressProcId=undefined},500)}});_._2("_s9");
_s9.DD=_._1(_9,{constructor:function(a){_.apply(this,a);_s9.DD.superclass.constructor.apply(this,arguments);this.fileUploadingByDragDrop=window.File&&window.FileReader&&window.FileList&&window.Blob;if(this.targetEl&&this.fileUploadingByDragDrop&&(this.centerEl=this.targetEl.child(".x-browse-content"))){var b=Ext.EventManager.addListener,c=Ext.getDoc();b(c,"dragexit",this.onDragExit,this);b(c,"dragleave",this.onDragExit,this);b(c,"dragover",this.onDragOver,this);
b(this.targetEl,"drop",this.onDrop,this);Ext.getBody().createChild({tag:"img",id:"x-browse-drag-image",cls:"x-browse-drag-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi+P//PwNAgAEACPwC/tuiTRYAAAAASUVORK5CYII="})}},getDirElByTarget:function(a){var b;a=Ext.get(a);if(!a.parent(".x-browse-recoverwnd")){b=a.hasClass("x-browse-drop-folder")?a:a.parent(".x-browse-drop-folder");if(!b)if((a=a.hasClass("x-browse-tree-node-bselect-content")?
a:a.parent(".x-browse-tree-node-bselect-content"))&&a.dom.getAttribute("data-path")&&(!_s9.dragClipboard||_s9.dragClipboard.device.id==a.dom.getAttribute("data-device-id")&&_s9.dragClipboard.path!=a.dom.getAttribute("data-path")))b=a}return b},setDragBG:function(a){if(this.curDragCandidate!=a){this.curDragCandidate=a;clearTimeout(this.timeoutSetBG);this.timeoutSetBG=this.setDragBGTimeout.defer(this.curDragCandidate?50:100,this)}},setDragBGTimeout:function(){if(this.curDragEl){this.curDragEl.removeClass("x-browse-dnd-over");
this.curDragEl.removeClass("x-browse-dnd-over-notavail")}if(this.curDragEl=this.curDragCandidate)this.curDragEl==this.centerEl?this.curDragEl.addClass(this.filesDropAvailable?"x-browse-dnd-over":"x-browse-dnd-over-notavail"):this.curDragEl.addClass("x-browse-dnd-over")},onDragExit:function(a){a.stopEvent();this.setDragBG(null)},onDragOver:function(a){var b,c,d,e,f,g;a.preventDefault();if(!this.isSelectPathMode)if(_s9.dragClipboard){if(_s9.dragClipboard.path){if(c=Ext.get(this.getDirElByTarget(a.target))){if(b=
this.devices[c.dom.getAttribute("data-device-id")]||this.loadedArgs.device){e=b.fsprovider;f=c.dom.getAttribute("data-path");b=b.permsMgr.getPermsForCurUser(e.getShareByPath(f));if(b=="ReadWrite"||e.getUserByPath(f))d=c.dom.getAttribute("data-path")}}else if(Ext.get(a.target).id==this.centerEl.id||Ext.get(a.target).parent("#"+this.centerEl.id)){c=this.centerEl;d=this.loadedArgs.path}if(c&&d){(g=_s9.dragClipboard.path==d)||_.each(_s9.dragClipboard,function(j){if(d.indexOf(j.data.path)===
0){g=true;return false}},this);g||this.setDragBG(c)}if(_s9.dragClipboard.el){a=a.getXY();c="";if(a&&a[0]>0&&a[1]>0){if(a[0]<20||a[1]<20)c="left";if(a[1]>=window.innerHeight-_s9.dragClipboard.el.size.height){a[1]=window.innerHeight-_s9.dragClipboard.el.size.height;c="left"}if(a[0]>=window.innerWidth-_s9.dragClipboard.el.size.width){a[0]=window.innerWidth-_s9.dragClipboard.el.size.width;c="right"}_s9.dragClipboard.el.setXY(a)}else c="left";if(c)_s9.dragClipboard.el.hasClass("dragout-error-"+
c)||_s9.dragClipboard.el.addClass("dragout-error-"+c);else{_s9.dragClipboard.el.hasClass("dragout-error-left")&&_s9.dragClipboard.el.removeClass("dragout-error-left");_s9.dragClipboard.el.hasClass("dragout-error-right")&&_s9.dragClipboard.el.removeClass("dragout-error-right")}}}}else if((c=this.getDirElByTarget(a.target))&&!c.getAttribute("data-readonly")){if(b=this.devices[c.dom.getAttribute("data-device-id")]||this.loadedArgs.device){e=b.fsprovider;d=c.dom.getAttribute("data-path");
b=b.permsMgr.getPermsForCurUser(e.getShareByPath(d));if(b=="ReadWrite"||e.getUserByPath(d))this.setDragBG(c)}}else Ext.get(a.target).id==this.centerEl.id||Ext.get(a.target).parent("#"+this.centerEl.id)?this.setDragBG(this.centerEl):this.setDragBG(null)},onDrop:function(a){var b=this.loadedArgs&&this.loadedArgs.fsprovider?this.loadedArgs.fsprovider.device:undefined,c,d,e,f,g,j,h,m,k;a.preventDefault();if(!this.isSelectPathMode)if(j=_s9.dragClipboard){if(j.path){if(d=Ext.get(this.getDirElByTarget(a.target))){if(c=
this.devices[d.dom.getAttribute("data-device-id")]||b){b=c.fsprovider;f=d.dom.getAttribute("data-path");c=c.permsMgr.getPermsForCurUser(b.getShareByPath(f));if(c=="ReadWrite"||b.getUserByPath(f)){e=d.dom.getAttribute("data-path");h=d.dom.getAttribute("data-device-id")}}}else if(Ext.get(a.target).id==this.centerEl.id||Ext.get(a.target).parent("#"+this.centerEl.id)){d=this.centerEl;e=this.loadedArgs.path;h=b.id}if(d&&e)if(!h||j.device.id==h){g=_s9.dragClipboard.path==e;m=[];g||_.each(j,function(l){m.push(l.data);
if(e.indexOf(l.data.path)===0){g=true;return false}},this);if(!g)if(a.ctrlKey||_s9.dragClipboard.device&&_s9.dragClipboard.share&&_s9.dragClipboard.device.permsMgr.getPermsForCurUser(_s9.dragClipboard.share)==="ReadOnly"||_s9.dragClipboard.share&&_s9.dragClipboard.share.getVolumeId()!=e.split("/")[1]){this.loadedArgs.fsprovider.copyFSItems(m,_s9.dragClipboard.path,e,this.loadedArgs);_s9.GATrackEvent("Browse","DragAndDrop","copy")}else{this.loadedArgs.fsprovider.moveFSItems(m,
_s9.dragClipboard.path,e,this.loadedArgs);_s9.GATrackEvent("Browse","DragAndDrop","move")}}}}else{k={size:0,files:[],filesToRead:0,dirsToRead:0};if(d=this.getDirElByTarget(a.target)){if(c=this.devices[d.dom.getAttribute("data-device-id")]||b){b=c.fsprovider;f=d.dom.getAttribute("data-path");c=c.permsMgr.getPermsForCurUser(b.getShareByPath(f));if(c=="ReadWrite"||b.getUserByPath(f)){k.startUploadPath=d.getAttribute("data-path");k.startUploadNode=d.parent(".x-browse-tree-node");if(k.startUploadNode)k.startUploadNode=
Ext.getCmp(k.startUploadNode.id)}}}else if(Ext.get(a.target).id==this.centerEl.id||Ext.get(a.target).parent("#"+this.centerEl.id))if(this.filesDropAvailable)k.startUploadPath=this.loadedArgs.path;else Ext.UI.MessageBox.info({title:_TR("BROWSE_UPLOADING_ERROR"),msg:_TR("UPLOAD_FILE_UNACCESSIBLE_FOLDER")});if(k.startUploadPath)if(a.browserEvent.dataTransfer){if(a.browserEvent.dataTransfer.items&&a.browserEvent.dataTransfer.items.length)m=a.browserEvent.dataTransfer.items;else if(a.browserEvent.dataTransfer.files&&
a.browserEvent.dataTransfer.files.length)m=a.browserEvent.dataTransfer.files;if(m){m=Array.prototype.slice.call(m);_.each(m,function(l){if(l.getAsEntry)l=l.getAsEntry();else if(l.webkitGetAsEntry)l=l.webkitGetAsEntry();this.onDropTraverseFileTree(k,l);this.onDropStartUpload(k)},this)}else{this.showAlertChrome();k.progress&&k.progress.destroy()}}}this.setDragBG(null);Ext.select(".x-browse-drag-files-fake").remove()},onDropTraverseFileTree:function(a,b,c,d){if(b&&!a.cancelled&&!a.isTimeoutExpired){var e=
this;d=d||"";if(b.isFile){++a.filesToRead;b.file(function(h){h.relPath=d;a.files.push(h);try{a.size+=h.size}catch(m){console.error(m)}--a.filesToRead;e.onDropStartUpload(a)},function(){--a.filesToRead;e.onDropStartUpload(a)});e.onDropStartUpload(a)}else if(b.kind=="file"){if(c=b.getAsFile()){c.relPath=d;a.files.push(c);a.size+=c.size}e.onDropStartUpload(a)}else if(b.isDirectory){c=c||b.name;var f=b.createReader();++a.dirsToRead;f.readEntries(this.onDirRead.createDelegate(this,[a,f,b,d,c],true),function(h){console.error(h);
--a.dirsToRead;e.onDropStartUpload(a)});e.onDropStartUpload(a)}else if((!b.size||b.size<1048576)&&window.FileReader&&FileReader.prototype.readAsBinaryString){var g=new FileReader;e=this;g.onload=function(){if(g.readyState==FileReader.DONE){a.files.push(b);if(b.size)a.size+=b.size;e.onDropStartUpload(a)}};g.onerror=function(){e.showAlertChrome();a.progress&&a.progress.destroy()};try{g.readAsBinaryString(b)}catch(j){console.error(j)}}else{a.files.push(b);if(b.size)a.size+=b.size;this.onDropStartUpload(a)}}},
onDirRead:function(a,b,c,d,e,f){var g=this;if(a.length===0)c.repeat||b.files.push({isEmptyFolder:true,path:e+d.name});else{for(var j=0;j<a.length;j++)g.onDropTraverseFileTree.defer(100,g,[b,a[j],f,e+d.name+"/"]);c.repeat=true;++b.dirsToRead;c.readEntries(this.onDirRead.createDelegate(this,[b,c,d,e,f],true),function(){--b.dirsToRead;g.onDropStartUpload(b)})}--b.dirsToRead;g.onDropStartUpload(b)},onDropStartUpload:function(a){if(!a.cancelled){var b=this;if(!a.isTimeoutExpired){clearTimeout(a.startUploadPid);
a.startUploadPid=setTimeout(function(){if(!a.cancelled&&!a.filesToRead&&!a.dirsToRead){clearInterval(a.procIdUpdateItemsCount);b.actionsbar.uploadFiles(a.files,a.startUploadPath,a.startUploadNode,a.progress);a.isTimeoutExpired=true;_s9.GATrackEvent("Browse","DragAndDrop","upload")}},500)}if(!a.progress){a.progress=b.actionsbar.prepareUploadFiles();a.progress.dropData=a;a.progress.showSizeCalculatingLabel();a.progress.on("destroy",b.onUploadProgressDestroy,b);a.procIdUpdateItemsCount=setInterval(function(){a.progress.showSizeCalculatingLabel(a.files.length,
a.size)},300)}}},onUploadProgressDestroy:function(a){a.un("destroy",this.onUploadProgressDestroy,this);if(a.dropData){a.dropData.cancelled=true;clearInterval(a.dropData.procIdUpdateItemsCount)}},showAlertChrome:function(){if(window.AlarmBar)a=window.AlarmBar;else{a=_a(_7(_._3.System.Frame),"ISystemFrame");var a=_a(a,"IExtNative").getNative().alarmbar}if(a){var b=_TR("UPLOAD_FOLDER_UNAVAILABLE_USE_CHROME");a.storeInfo.find("desc",b)==-1&&_a(a,"IAlarmReporter").reportAlarm(b,
a.ALARM_INFO)}},setSelectPathMode:function(a){this.isSelectPathMode=a},setSearchMode:function(a){this.isSearchMode=a;this.load(this.loadedArgs)},setVersionsMode:function(a){this.isVersionsMode=a},populateDevices:function(a){this.devices=a},load:function(a){this.loadedArgs=a||{};if(this.centerEl){if(a&&a.fsprovider)this.filesDropAvailable=this.fileUploadingByDragDrop&&a.path&&a.fsprovider&&!a.fsprovider.isVolume(a.path)&&!this.isSelectPathMode&&!this.isSearchMode&&!this.isVersionsMode&&a.path!="/"&&
a.permsMgr&&(a.permsMgr.getPermsForCurUser(a.share)=="ReadWrite"||a.user)&&!a.readonly;else if(_s9.isRCApp&&(!a||!a.path))this.filesDropAvailable=false;this.filesDropAvailable?this.centerEl.addClass("x-browse-content-drop-avail"):this.centerEl.removeClass("x-browse-content-drop-avail")}}});
_s9.DD.onDragStart=function(a,b,c){_s9.dragClipboard=b=b||{};b.el=Ext.getBody().createChild({tag:"div",cls:"x-browse-drag-files-fake"});b.el.setXY(a.getXY());for(var d="",e=0;e<3&&e<c.length;++e)d+=c[e].outerHTML;b.el.dom.innerHTML=d+'<div class="x-browse-drag-files-fake-count">'+c.length+'</div><div class="x-browse-drag-files-fake-dragout-error">'+_TR("BROWSE_DOWNLOAD_NO_DND")+"</div>";b.el.size=b.el.getSize();try{a.browserEvent.dataTransfer.setData&&a.browserEvent.dataTransfer.setData("firefox-fix",
b.path)}catch(f){}try{a.browserEvent.dataTransfer.setDragImage(Ext.get("x-browse-drag-image").dom,0,0)}catch(g){var j=Ext.get(a.target);j.addClass("x-browse-drag-node-opacity");setTimeout(function(){j.removeClass("x-browse-drag-node-opacity")},1)}};_s9.DD.onDragEnd=function(a){a.preventDefault();_s9.dragClipboard&&_s9.dragClipboard.el&&_s9.dragClipboard.el.remove();setTimeout(function(){_s9.dragClipboard=undefined},100);return true};_._2("_s9");
_s9.DownloadManager=_._1(_9,{constructor:function(){this.dItems={};_s9.DownloadManager.superclass.constructor.apply(this,arguments)},startDownload:function(a){Ext.isArray(a)||(a=[a]);for(var b=0;b<a.length;++b)_.isIE?this.downloadWithHref(a[b],b*500):this.downloadWithIframe(a[b],b*10)},downloadWithIframe:function(a,b){setTimeout(function(){var c=Ext.id(),d=document.createElement("iframe");d.id=c;d.name=c;d.style.width="0px";d.style.height="0px";d.style.zIndex=-110;
d.style.left="100px";d.style.top="100px";d.style.position="fixed";d.src=this.getSrc(a);setTimeout(function(){document.body.appendChild(d)},10)}.bind(this),b)},downloadWithHref:function(a,b){setTimeout(function(){document.location.href=this.getSrc(a)}.bind(this),b)},encodePath:function(a){a=a.split("/");for(var b=0;b<a.length;++b)a[b]=encodeURIComponent(a[b]);return a.join("/")},getSrc:function(a){var b=this.encodePath(a.pathDownload);if(_s9.isRCApp){var c=a.fsprovider.device.spRCDevice;if(c.isLocalSessionInitialized())b=
c.generateLocalSessionUrl(document.fsshare,a.pathDownload,b,a.fsprovider.device.downloadCapabilities&&a.fsprovider.device.downloadCapabilities.longLifeToken);else{a=a.type=="file"?"download.do":"downloadFolder.do";b=String.format("{0}/{1}/{2}?filePath={3}",document.rcserver_iofrom,c.getId(),a,b)}}else b=document.fsshare+b;return b}});_._2("_s9");
_s9.SelectRect=_._1(_9,{constructor:function(a){_.apply(this,a);_s9.SelectRect.superclass.constructor.apply(this,arguments);if(this.targetEl&&!Ext.UI.isTouchCapable){this.selectionRect=this.targetEl.createChild({cls:"x-browse-selection-rect"});this.selectionRect.setDisplayed(false);this.targetEl.on("mousedown",this.onMouseDown,this)}},setDvMode:function(a){this.dvMode=a},onMouseDown:function(a){if(this.dvMode!="grid"){var b=Ext.get(a.target);if(!b.hasClass("x-rc-access-fsiconsdv-fsitem")&&
!b.parent(".x-rc-access-fsiconsdv-fsitem")&&!b.hasClass("x-browse-snapsdv-snap")&&!b.parent(".x-browse-snapsdv-snap")){a.preventDefault();a=a.getXY();this.selectionRect.setDisplayed(true);this.selectionRect.setSize(0,0);b=this.targetEl.getXY();this.selectionXY=[a[0]-b[0],a[1]-b[1]+this.targetEl.dom.scrollTop];this.selectionRect.setLeftTop(this.selectionXY[0],this.selectionXY[1]);this.curDv=undefined;if(this.filesView&&!this.filesView.hidden)if(this.dvMode=="icons"){this.curDv=this.filesView.iconsDv;
this.curDvCls="x-rc-access-fsiconsdv-fsitem"}else{if(this.dvMode=="tile"){this.curDv=this.filesView.tileDv;this.curDvCls="x-rc-access-fsiconsdv-fsitem"}}else if(this.devsView&&!this.devsView.hidden)if(this.dvMode=="icons"){this.curDv=this.devsView.iconsDv;this.curDvCls="x-rc-access-fsiconsdv-fsitem"}else{if(this.dvMode=="tile"){this.curDv=this.devsView.tileDv;this.curDvCls="x-rc-access-fsiconsdv-fsitem"}}else if(this.snapsView&&!this.snapsView.hidden)if(this.dvMode=="icons"){this.curDv=this.snapsView.iconsDv;
this.curDvCls="x-browse-snapsdv-snap"}else if(this.dvMode=="tile"){this.curDv=this.snapsView.tileDv;this.curDvCls="x-browse-snapsdv-snap"}if(this.curDv&&this.curDvCls)if(a=this.curDv.el.child("."+this.curDvCls)){this.firstItemSize=a.getSize();a=this.firstItemMargins=a.getMargins();this.firstItemSize.width+=a.left+a.right;this.firstItemSize.height+=a.top+a.bottom;this.targetEl.addClass("x-browse-selection-parent");Ext.getDoc().on("mousemove",this.onDocMouseMove,this);Ext.getDoc().on("mouseup",this.onDocMouseUp,
this);Ext.getDoc().on("keydown",this.onDocKeyDown,this)}}}},onDocMouseMove:function(a){var b;a.preventDefault();if(this.selectionXY){var c=a.getXY(),d=this.targetEl.getXY(),e=c[0]-d[0],f=c[1]-d[1]+this.targetEl.dom.scrollTop;if(e<0)e=0;if(f<0)f=0;var g=[Math.min(e,this.selectionXY[0]),Math.min(f,this.selectionXY[1])];a=[Math.max(e,this.selectionXY[0]),Math.max(f,this.selectionXY[1])];this.selectionRect.setLeftTop(g[0],g[1]);this.selectionRect.setSize(Math.abs(e-this.selectionXY[0]),Math.abs(f-this.selectionXY[1]));
if(c[1]-d[1]<50){if(!this.procContentUp){b=this.targetEl.dom;this.procContentUp=setInterval(function(){b.scrollTop-=5},20)}}else{clearInterval(this.procContentUp);this.procContentUp=undefined;if(c[1]-d[1]>this.targetEl.dom.clientHeight-50){if(!this.procContentDown){b=this.targetEl.dom;this.procContentDown=setInterval(function(){b.scrollTop+=5},20)}}else{clearInterval(this.procContentDown);this.procContentDown=undefined}}c=this.targetEl.getWidth(true);d=this.targetEl.getPadding("l");g[0]+=-d+this.firstItemMargins.left;
a[0]+=-d-this.firstItemMargins.left;d=this.targetEl.getPadding("t");g[1]+=-d+this.firstItemMargins.top;a[1]+=-d-this.firstItemMargins.top;c=Math.floor(c/this.firstItemSize.width);e=Math.floor(g[1]/this.firstItemSize.height);if(e<0)e=0;g=Math.floor(g[0]/this.firstItemSize.width);if(g<0)g=0;d=Math.floor(a[1]/this.firstItemSize.height);if(d<0)d=0;a=Math.floor(a[0]/this.firstItemSize.width);if(a<0)a=0;if(g>=c&&a>=c)a=g-1;else{if(g>=c)g=c-1;if(a>=c)a=c-1}_.each(this.preSelected,function(h){h.removeClass("x-browse-selection-rect-item-over")},
this);this.preSelected=[];for(e=e;e<=d;++e)for(f=g;f<=a;++f){var j=this.curDv.el.select("."+this.curDvCls+":nth("+(e*c+f+1)+")");if(j&&j.elements&&j.elements[0])if(j=Ext.get(j.elements[0])){j.addClass("x-browse-selection-rect-item-over");this.preSelected.push(j)}}}},onDocMouseUp:function(a){this.selectionXY=undefined;this.selectionRect.setDisplayed(false);clearInterval(this.procContentUp);clearInterval(this.procContentDown);this.targetEl.removeClass("x-browse-selection-parent");Ext.getDoc().un("mousemove",
this.onDocMouseMove,this);Ext.getDoc().un("mouseup",this.onDocMouseUp,this);Ext.getDoc().un("keydown",this.onDocKeyDown,this);_.each(this.preSelected,function(b){b.removeClass("x-browse-selection-rect-item-over")},this);if(a)if(this.filesView&&!this.filesView.hidden)this.filesView.selectNodes(this.preSelected,a.ctrlKey||a.shiftKey);else if(this.devsView&&!this.devsView.hidden)this.devsView.selectNodes(this.preSelected,a.ctrlKey||a.shiftKey);else if(this.snapsView&&!this.snapsView.hidden)this.snapsView.selectNodes(this.preSelected,
a.ctrlKey||a.shiftKey);this.preSelected=[]},onDocKeyDown:function(a){a.keyCode==27&&this.onDocMouseUp()}});_._2("_s9");
_s9.UsersBar=_._1(Ext.Container,{cls:"x-browse-usersbar",constructor:function(){this.html=String.format('<div class="{0}-ltitle x-ellipsis" id="'+(this.lTitleId=Ext.id())+'"></div><div class="{0}-badd" id="'+(this.bAddId=Ext.id())+'">+</div>',this.cls);_s9.UsersBar.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.UsersBar.superclass.afterRender.apply(this,arguments);this.lTitle=Ext.get(this.lTitleId);this.bAdd=Ext.get(this.bAddId);this.bAdd.on("click",
this.onAddClick,this)},onAddClick:function(){this.fireEvent("addclick",this)},load:function(a){this.fsprovider&&this.fsprovider.un("volssharesloaded",this.populateUsers,this);if(_s9.isRCApp&&a)if(a.device&&a.device.fsprovider&&!a.device.isFriend){this.loadedArgs=a;this.fsprovider=a.device.fsprovider;this.populateUsers();this.fsprovider&&this.fsprovider.on("volssharesloaded",this.populateUsers,this)}else this.hide()},populateUsers:function(){var a=this.fsprovider.getShareByPath(this.loadedArgs.path),
b,c=this.loadedArgs.device.spDevice.getSystemManager();c=_a(c.getCloudOwner(),"_i2z");var d=this.loadedArgs.device.spDevice.getSecurityManager().getRCUsers(),e,f,g,j,h=[],m="";if(a&&c&&c!=_4){b=a.getName();f=a.getProtocolByName("cifs");e=a.getProtocolByName("afp");if(f&&f!=_4&&e&&e!=_4){f=f.getUsers();e=e.getUsers();if(f&&f!=_4&&e&&e!=_4)for(e=0;e<d.length;++e)if((f=_a(d[e],"_i2z"))&&f!=_4){g=f.getEmail();j=this.fsprovider.device.permsMgr.getPermsForUser(a,
f);g=g&&g!=_4?g:"";f.getId()!=c.getId()&&j!="Disabled"&&h.push({access:j,email:g})}}}h=h.sort(function(k,l){var n=0;if(k.acces=="ReadWrite"&&l.access=="ReadOnly")n=-1;else if(k.access=="ReadOnly"&&l.access=="ReadWrite")n=1;else if(k.email.toLowerCase()<l.email.toLowerCase())n=-1;else if(k.email.toLowerCase()>l.email.toLowerCase())n=1;return n});b="<b>"+b+"</b>";for(e=0;e<h.length;++e)m+='<span title="'+_TR(h[e].access=="ReadOnly"?"READ_ONLY":"READ_WRITE")+'" class="'+(h[e].access=="ReadOnly"?
"ro":"rw")+'">'+h[e].email+"</span>";if(h.length){m=h.length==1?String.format(_TR("BROWSE_SHARE_MEMBER"),b,m):String.format(_TR("BROWSE_SHARE_MEMBERS"),b,h.length,m);this.lTitle.update(m);this.show()}else this.hide()}});_._2("_s9");
_s9.FileMenu=_._1(_9,Ext.UI.Menu,{cls:"x-browse-menu",enableScrolling:false,copying:true,constructor:function(){var a=Ext.menu.Item;this.itemBrowse=new a({text:_TR("BROWSE"),icon:false,ctCls:"x-browse-menu-icon-browse",commandName:"browse"});this.itemAdminPage=new a({text:_TR("ADMIN_PAGE"),icon:false,ctCls:"x-browse-menu-icon-adminpage",commandName:"adminpage"});this.itemLeaveDevice=new a({text:_TR("REMOVE_DEVICE"),icon:false,ctCls:"x-browse-menu-icon-leavedevice",commandName:"leavedevice"});
this.itemView=new a({text:_TR("PREVIEW"),icon:false,ctCls:"x-browse-menu-icon-view",commandName:"view"});this.itemDownload=new a({text:_TR("DOWNLOAD"),icon:false,ctCls:"x-browse-menu-icon-download",commandName:"download"});this.itemEmailLink=new a({text:_TR("LINKS_EMAIL_LINK"),icon:false,ctCls:"x-browse-menu-icon-link",commandName:"emaillink"});this.itemCreateLink=new a({text:_TR("LINKS_WEB_LINK"),icon:false,ctCls:"x-browse-menu-icon-link",commandName:"link"});this.itemRename=new a({text:_TR("RENAME"),
icon:false,ctCls:"x-browse-menu-icon-rename",commandName:"rename"});this.itemRestore=new a({text:_TR("RESTORE"),icon:false,ctCls:"x-browse-menu-icon-rollback",commandName:"restore"});this.itemRecover=new a({text:_TR("RECOVER"),icon:false,ctCls:"x-browse-menu-icon-rollback",commandName:"recover"});this.itemVersions=new a({text:_TR("BROWSE_PREVIOUS_VERSIONS"),icon:false,ctCls:"x-browse-menu-icon-versions",commandName:"versions"});this.itemSnapshot=new a({text:_TR("SNAPSHOT"),ctCls:"x-browse-menu-icon-snapshot",
commandName:"snapshot"});this.itemCut=new a({text:_TR("CUT"),icon:false,ctCls:"x-browse-menu-icon-cut",commandName:"cut"});this.itemCopy=new a({text:_TR("COPY"),icon:false,ctCls:"x-browse-menu-icon-copy",commandName:"copy"});this.itemPaste=new a({text:_TR("PASTE"),icon:false,ctCls:"x-browse-menu-icon-paste",commandName:"paste"});this.itemSettings=new a({text:_TR("SETTINGS"),icon:false,ctCls:"x-browse-menu-icon-settings",commandName:"settings"});this.itemPermissions=new a({text:_TR("BROWSE_SHARE"),
icon:false,ctCls:"x-browse-menu-icon-invite",commandName:"settings"});this.itemDelete=new a({text:_TR("DELETE"),icon:false,ctCls:"x-browse-menu-icon-delete",commandName:"delete"});this.sepOpenFolder=new Ext.menu.Separator;this.itemOpenFolder=new Ext.menu.Item({text:_TR("OPEN_FOLDER"),icon:false,ctCls:"x-browse-menu-icon-browse",commandName:"open-folder"});this.items=[this.itemOpenFolder,this.sepOpenFolder,this.itemBrowse,this.itemAdminPage,this.itemLeaveDevice,this.itemView,this.itemDownload,this.itemEmailLink,
this.itemCreateLink,this.itemRename,this.itemRestore,this.itemRecover,this.itemVersions,this.itemSnapshot,this.itemCut,this.itemCopy,this.itemPaste,this.itemSettings,this.itemPermissions,this.itemDelete];_s9.FileMenu.superclass.constructor.apply(this,arguments)},setMode:function(a,b,c,d,e,f,g,j){var h,m,k,l=e&&e[0]?e[0].data:{};if(e.length){h=l.type;m=l.filetype;k=l.isFSVersion}var n=true;_.each(e,function(r){r=r.data.type;n=n&&(r=="file"||r=="folder")},this);var q=_s9.isRCApp&&!d&&
!k&&b&&b.permsMgr&&b.permsMgr.isLinkCreationAvailable(),s=q,t=false,u=false;_.each(e,function(r){var y=r.data.type;q=q&&y=="file";s=s&&(y=="file"||y=="folder"&&e.length==1);t=t||r.data.pathInHomeFolder=="/";u=u||r.data.pathInHome=="/admin"},this);var v=false;_.each(e,function(r){if(r.data.readonly){v=true;return false}},this);var o=l.fsprovider.getVolumeByPath(l.path);o=o&&o.getEjectable();var p=l.fsprovider.device.spRCDeviceCapabilities,w=l.fsprovider.device.isFriend,x=!l.fsprovider.device.spRCDevice||
l.fsprovider.device.isOnline;this.itemBrowse.setVisible(e.length==1&&x&&l.perms!="Disabled"&&(h=="folder"||h=="share"||h=="lun"||h=="vol"||h=="ejvol"||h=="device"||h=="home"));this.itemAdminPage.setVisible(e.length==1&&h=="device"&&!w&&x);this.itemLeaveDevice.setVisible(e.length==1&&h=="device");this.itemView.setVisible(e.length==1&&_s9.PreviewProvider.SupportedTypes[m]&&(!p||p.getFilePreview()===true));this.itemRename.setVisible(e.length==1&&a=="ReadWrite"&&!v&&!d&&(h=="file"||h=="folder")&&
!k&&!t&&!u);this.itemDownload.setVisible(n);this.itemRestore.setVisible(e.length==1&&a=="ReadWrite"&&(!!d||!!k)&&(!l.share||!(l.share.isReadyDRShare&&l.share.isReadyDRShare())));g=e.length==1&&a=="ReadWrite"&&!g&&!w&&!o&&(l.share||l.pathInHomeFolder)&&!d&&!l.snapfolder&&!k&&(!p||p.getSnapshots()===true);this.itemRecover.setVisible(g);this.itemVersions.setVisible(e.length==1&&a=="ReadWrite"&&!d&&!l.snapfolder&&h=="file"&&!k&&!o&&(!p||p.getFileVersions()===true));this.itemSnapshot.setVisible(e.length==
1&&h=="share"&&!w&&!o&&l.share&&!(l.share.isReadyDRShare&&l.share.isReadyDRShare())&&(!p||p.getSnapshots()===true));this.itemCut.setVisible(a=="ReadWrite"&&!v&&!d&&(h=="file"||h=="folder")&&!k&&!t&&!u);this.itemCopy.setVisible(this.copying&&(a=="ReadWrite"||a=="ReadOnly")&&!d&&(h=="file"||h=="folder")&&!k&&l.pathInHome!="/"&&!t&&!u);this.itemPaste.setVisible(e.length==1&&a=="ReadWrite"&&!v&&!d&&(h=="folder"||h=="share")&&!!f&&!!f.length&&f.device.id==b.id);this.itemDelete.setVisible((h=="file"||h==
"folder")&&!k&&a=="ReadWrite"&&!v&&!d&&!t&&!u||h=="share"&&!w&&!o&&(!p||p.getShareDeletion()));!g&&h=="share"&&this.itemDelete.setVisible(false);this.itemSettings.setVisible(e.length==1&&h=="share"&&!_s9.isRCApp);this.itemPermissions.setVisible(e.length==1&&h=="share"&&!w&&p&&p.getSharing());this.itemEmailLink.setVisible(q);this.itemCreateLink.setVisible(s);this.itemOpenFolder.setVisible(e.length==1&&j);this.sepOpenFolder.setVisible(!this.itemOpenFolder.hidden);this.itemRecover.setDisabled(c&&
c.getFirstSnapshotCreationTime&&!c.getFirstSnapshotCreationTime());var z=0;_.each(this.items.items,function(r){r.hidden||++z},this);return z}});
_s9.ParentFolderMenu=_._1(_9,Ext.UI.Menu,{cls:"x-browse-menu",constructor:function(){this.itemPaste=new Ext.menu.Item({text:_TR("PASTE"),icon:false,ctCls:"x-browse-menu-icon-paste",commandName:"paste"});this.items=[this.itemPaste];_s9.ParentFolderMenu.superclass.constructor.apply(this,arguments)},setMode:function(a,b,c,d,e,f){this.itemPaste.setVisible(!!f&&!!f.length&&f.device.id==c.id&&a=="ReadWrite"&&!b.readonly&&!e&&(b.type=="folder"||b.type=="share"));var g=0;
_.each(this.items.items,function(j){j.hidden||++g},this);return g}});_._2("_s9");
_s9.FilesDV=_._1(_9,Ext.UI.ChainDataView,{cls:"x-rc-access-fsiconsdv",itemSelector:".x-rc-access-fsiconsdv-fsitem",selectedClass:"x-rc-access-fsiconsdv-fsitem-selected",keyHandlers:false,iconSize:64,itemsDraggable:true,constructor:function(){_s9.FilesDV.superclass.constructor.apply(this,arguments);this.store=new Ext.data.Store({autoDestroy:true,reader:new Ext.data.JsonReader({idProperty:"id",fields:["id","fsprovider","name","type","filetype","typeLabel","size","sizeLabel",
"date","dateLabel","dlnatype","share","lun","user","path","parentPath","pathInSnap","pathDownload","iconcls","accessed","perms","readonly","snapshot","snapfolder","snapName","snapType","snapId","pathInHome","pathInHomeFolder","device","model","serial","serialLabel","isFSVersion","versionPath","isFSSearched","backupTarget"]})});this.tpl=['<tpl for=".">',"<tpl if=\"type!='device'\">",'<div class="x-browse-dv-el-margins '+this.cls+"-fsitem "+(this.itemsDraggable?"<tpl if=\"(type=='file' || type=='folder') && !isFSSearched\">draggable-fsitem</tpl>":
"")+'<tpl if="!snapshot && (!perms || perms==\'ReadWrite\') && !readonly && (type==\'folder\' || type==\'share\') && !isFSSearched"> x-browse-drop-folder </tpl>" data-path="{[_s9.MakeQuoted(values.path)]}" data-path-download="{[_s9.MakeQuoted(values.pathDownload)]}" data-type="{type}" <tpl if="!!fsprovider">  data-device-id="{[values.fsprovider.device.id]}" </tpl> <tpl if="!!readonly"> data-readonly="true"</tpl> >','<div class="'+this.cls+"-fsitem-icon "+this.cls+'-{type}-icon <tpl if="!!filetype">'+
this.cls+'-{filetype}-icon </tpl><tpl if="!!dlnatype">'+this.cls+'-{type}-icon-dlna-{dlnatype} </tpl><tpl if="!!iconcls">'+this.cls+"-{type}-icon-{iconcls} </tpl><tpl if=\"pathInHomeFolder=='/'\">"+this.cls+"-home-icon </tpl><tpl if=\"type=='share' && !accessed\">"+this.cls+"-{type}-icon-notaccessed </tpl><tpl if=\"type=='share' && (!!accessed && perms=='ReadOnly' || !!readonly)\">"+this.cls+'-{type}-icon-perms-ro </tpl>"><tpl if="type==\'file\'"><img draggable="false" /></tpl>',"</div>",'<div class="'+
this.cls+'-fsitem-name x-ellipsis" title="{[_s9.MakeQuoted(values.isFSSearched ? values.path : values.name)]}&#013;{dateLabel}">{[_s9.MakeQuoted(values.name)]}</div>','<div class="'+this.cls+'-fsitem-size x-ellipsis" title="{sizeLabel}">{sizeLabel}</div>',"</div>","</tpl>","<tpl if=\"type=='device'\">",'<div class="x-browse-dv-el-margins '+this.cls+"-fsitem "+this.cls+'-fsitem-{type}" data-pathdownload="{[_s9.MakeQuoted(values.pathDownload)]}" >','<div class="'+this.cls+"-fsitem-icon "+
this.cls+'-{type}-icon">',"</div>",'<div class="'+this.cls+"-fsitem-name "+this.cls+'-fsitem-name-device x-ellipsis" title="{name}&#013;{dateLabel}">{name}</div>',"</div>","</tpl>","</tpl>"]},populateDevices:function(a){this.devices=a},setSelectPathMode:function(a){this.isSelectPathMode=a},onDataChanged:function(){_s9.FilesDV.superclass.onDataChanged.apply(this,arguments);_s9.isRCApp&&this.path===""&&this.store.each(function(b){if(b.data.type=="device"){var c=b.data.fsprovider.device,
d=this.getNode(this.store.getById(c.id));if(d){d=Ext.get(d);b.data.fsprovider.device.isOnline||d.addClass(this.cls+"-fsitem-device-offline");b=_s10.Utils.getDeviceCls(c.model,this.iconSize);if(d=d.child(".x-rc-access-fsiconsdv-device-icon")||d.child(".x-sh-recovery-grid-cell-icon-device")){d.addClass(b);c.isFriend&&d.addClass("x-rc-access-friend-device-icon")}}}},this);if(!this.isSelectPathMode)if(window.File&&window.FileReader&&window.FileList&&window.Blob){var a=this.getTemplateTarget().query(".draggable-fsitem");
_.each(a,function(b){b=Ext.get(b);b.set({draggable:"true"});var c,d=b.dom.getAttribute("data-path-download");c=_s9.isRCApp?document.rcserver_iofrom+String.format("/{0}/download.do?filePath={1}",this.device.spRCDevice.getId(),d):location.protocol+"//"+location.host+document.fsshare+d;b.set({"data-downloadurl":"application/octet-stream:"+d.split("/").pop()+":"+c});Ext.EventManager.addListener(b,"dragstart",this.onDragStart,this);Ext.EventManager.addListener(b,"dragend",_s9.DD.onDragEnd)},
this)}},onDragStart:function(a){var b=Ext.get(a.target),c=this.getSelectedNodes();if(c.indexOf(b.dom)==-1){this.select(b);c=this.getSelectedNodes()}var d=this.getSelectedRecords();d.path=this.path;d.device=this.device;d.share=this.share;d.node=b;_s9.DD.onDragStart(a,d,c)},putDevice:function(a){if(this.previewprovider){this.previewprovider.un("previewready",this.populatePreview,this);this.previewprovider=undefined}if((this.device=a)&&a.previewprovider108x81){this.previewprovider=a.previewprovider108x81;
this.previewprovider.on("previewready",this.populatePreview,this)}},load:function(a,b){this.stopUpdatePreviews();this.share=a;this.snapshot=b},loadItems:function(a,b,c,d){if(!this.listenResizeScroll){var e=this.el.parent(".x-browse-content");if(e){Ext.getCmp(e.id).on("resize",this.setTimeoutCheckVisibleItems,this);e.scroller&&e.scroller.on("scroll",this.setTimeoutCheckVisibleItems,this)}this.listenResizeScroll=true}this.path=b;this.pathInSnap=c;this.fsitems=a;this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager);
this.fsitems.pre=a=(this.fsitems.pre||[]).concat((a.folders||[]).concat(this.sortmgr.sortByPreviewType(a.files||[])));this.store.removeAll();this.store.loadData(a);this.selectItems(d);this.stopUpdatePreviews();this.updatedPreviews={};this.updatePreviews(a)},selectItems:function(a){a&&_.each(a,function(b){this.select(this.store.getById(b.id),true)},this)},updatePreviews:function(a){this.checkVisibleItems(a)},stopUpdatePreviews:function(){this.previewprovider&&this.previewprovider.stopUpdatePreviews()},
setTimeoutCheckVisibleItems:function(){var a=this;a.procIdCheckVisibleItems&&clearTimeout(a.procIdCheckVisibleItems);a.procIdCheckVisibleItems=setTimeout(function(){a.checkVisibleItems()},300)},checkVisibleItems:function(a){a=this.itemsToCheckVisible=a||this.itemsToCheckVisible||[];var b=this.parentBrowseContent=this.parentBrowseContent||this.el.parent(".x-browse-content"),c=Ext.fly(this.getNode(0)),d=[];if(b&&c){var e=c.getWidth(),f=c.getHeight();if(e&&f){var g=b.getWidth(true);c=c.getMargins();
e+=c.left+c.right;f+=c.top+c.bottom;e=Math.floor(g/e);g=Math.floor(b.dom.scrollTop/f);b=Math.ceil((b.dom.scrollTop+b.dom.clientHeight)/f);for(f=g*e;f<b*e;++f)a[f]&&!this.updatedPreviews[a[f].path]&&d.push(a[f])}}this.previewprovider&&this.previewprovider.updatePreviews(d)},populatePreview:function(a,b){if(a.parentPath==this.path){this.updatedPreviews[a.path]=b;a=this.store.find("name",a.name);if(a>-1){a=Ext.get(this.getNode(a));a.addClass(this.cls+"-fsitem-preview");a.child("img").set({src:"data:image/jpg;base64,"+
b})}}}});_._2("_s9");
_s9.FilesGrid=_._1(_s9.BaseGrid,{constructor:function(){this.lHNameId=Ext.id();this.lHTypeId=Ext.id();this.lHSizeId=Ext.id();this.lHDateId=Ext.id();this.headerTmpl=String.format('<tr><td class="{0}-icon">&nbsp;</td><td class="{0}-name"><div class="x-ellipsis {0}-cell-name" id="'+this.lHNameId+'"><span class="{0}-cell-name-sort">'+_TR("NAME")+'</span></div></td><td class="{0}-type"><div class="x-ellipsis" id="'+this.lHTypeId+'"><span class="{0}-cell-type-sort">'+_TR("TYPE")+'</span></div></td><td class="{0}-size"><div class="x-ellipsis" id="'+
this.lHSizeId+'"><span class="{0}-cell-size-sort">'+_TR("SIZE")+'</span></div></td><td class="{0}-mdate"><div class="x-ellipsis" id="'+this.lHDateId+'"><span class="{0}-cell-date-sort">'+_TR("DATE")+"</span></div></td></tr>",this.cls);_s9.FilesGrid.superclass.constructor.apply(this,arguments)},afterHeaderRender:function(){_s9.FilesGrid.superclass.afterHeaderRender.apply(this,arguments);Ext.get(this.lHNameId).on("click",this.onHNameClick,this);Ext.get(this.lHTypeId).on("click",this.onHTypeClick,
this);Ext.get(this.lHSizeId).on("click",this.onHSizeClick,this);Ext.get(this.lHDateId).on("click",this.onHDateClick,this);this.setSort("name")},updateSize:function(){},onHNameClick:function(){this.setSort("name")},onHTypeClick:function(){this.setSort("type")},onHSizeClick:function(){this.setSort("size")},onHDateClick:function(){this.setSort("date")},populateRows:function(a,b,c,d,e){a.folders=a.folders||[];a.files=a.files||[];var f=this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager);switch(this.sortOrder){case "name-down":a.folders=
f.sortByName(a.folders);a.files=f.sortByName(a.files);break;case "name-up":a.folders=f.sortByName(a.folders,true);a.files=f.sortByName(a.files,true);break;case "type-down":a.folders=f.sortByType(a.folders);a.files=f.sortByType(a.files);break;case "type-up":a.folders=f.sortByType(a.folders,true);a.files=f.sortByType(a.files,true);break;case "size-down":a.folders=f.sortBySize(a.folders);a.files=f.sortBySize(a.files);break;case "size-up":a.folders=f.sortBySize(a.folders,true);a.files=f.sortBySize(a.files,
true);break;case "date-down":a.folders=f.sortByDate(a.folders);a.files=f.sortByDate(a.files);break;case "date-up":a.folders=f.sortByDate(a.folders,true);a.files=f.sortByDate(a.files,true);break}this.entities=a;this.path=b;this.pathInSnap=c;this.selRecords=d;_s9.FilesGrid.superclass.populateRows.call(this,a,b,c,d,e)},getDataView:function(a){return this.dv||(this.dv=new _s9.FilesGridDV(_.applyIf(a,{singleSelect:this.singleSelect,multiSelect:this.multiSelect,itemsDraggable:this.itemsDraggable})))}});
_._2("_s9");
_s9.FilesTileDV=_._1(_s9.FilesDV,{iconSize:128,constructor:function(){_s9.FilesTileDV.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.FilesTileDV.superclass.afterRender.apply(this,arguments);this.addClass("x-rc-access-fstiledv")},putDevice:function(a){if(this.previewprovider){this.previewprovider.un("previewready",this.populatePreview,this);this.previewprovider=undefined}if((this.device=a)&&a.previewprovider216x162){this.previewprovider=a.previewprovider216x162;
this.previewprovider.on("previewready",this.populatePreview,this)}}});_._2("_s9");
_s9.FilesGridDV=_._1(_s9.FilesDV,{cls:"x-sh-recovery-grid",itemSelector:"table.ui-fwgrid-row",selectedClass:"ui-fwgrid-rowsel",iconSize:32,itemsDraggable:true,constructor:function(){_s9.FilesGridDV.superclass.constructor.apply(this,arguments);this.tpl=['<tpl for="."><table cellspacing="0" cellpadding="0" class="'+this.cls+"-table ui-fwgrid-row "+(this.itemsDraggable?"<tpl if=\"(type=='file' || type=='folder') && !isFSSearched\"> draggable-fsitem </tpl> ":"")+'<tpl if="!snapshot && (!perms || perms==\'ReadWrite\') && !readonly && (type==\'folder\' || type==\'share\') && !isFSSearched"> x-browse-drop-folder </tpl>" data-path="{[_s9.MakeQuoted(values.path)]}" data-path-download="{[_s9.MakeQuoted(values.pathDownload)]}" data-type="{type}" <tpl if="!!fsprovider"> data-device-id="{[values.fsprovider.device.id]}" </tpl> <tpl if="!!readonly"> data-readonly="true" </tpl>><tr><td class="'+
this.cls+'-icon"><div class="x-ellipsis '+this.cls+"-cell-icon-img "+this.cls+'-cell-icon-{type} <tpl if="!!filetype">'+this.cls+'-cell-icon-{filetype} </tpl><tpl if="!!dlnatype">'+this.cls+'-cell-icon-dlna-{dlnatype} </tpl><tpl if="!!iconcls">'+this.cls+"-cell-icon-{iconcls} </tpl><tpl if=\"pathInHomeFolder=='/'\">"+this.cls+"-cell-icon-home </tpl><tpl if=\"type == 'share' && !accessed\">"+this.cls+"-cell-icon-notaccessed </tpl><tpl if=\"type == 'share' && (!!accessed && perms == 'ReadOnly' || !!readonly)\">"+
this.cls+'-cell-icon-perms-ro </tpl>"></div></td><td class="'+this.cls+'-name"><div class="x-ellipsis"><div class="x-ellipsis '+this.cls+'-cell-name " title="{[_s9.MakeQuoted(values.isFSSearched ? values.path : values.name)]}">{[_s9.MakeQuoted(values.name)]}</div></div></td><td class="'+this.cls+'-type"><div class="x-ellipsis" title="{typeLabel}">{typeLabel}</div></td><td class="'+this.cls+'-size"><div class="x-ellipsis" title="{sizeLabel}">{sizeLabel}</div></td><td class="'+this.cls+
'-mdate"><div class="x-ellipsis" title="{dateLabel}">{dateLabel}</div></td></tr></table></tpl>']},loadItems:function(a,b,c,d,e){this.path=b;this.pathInSnap=c;this.fsitems=a;if(e){if(b=this.fsitems.pres){a=this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager);switch(e){case "name-down":b.folders=a.sortByName(b.folders);b.files=a.sortByName(b.files);break;case "name-up":b.folders=a.sortByName(b.folders,true);b.files=a.sortByName(b.files,true);break;case "type-down":b.folders=a.sortByType(b.folders);
b.files=a.sortByType(b.files);break;case "type-up":b.folders=a.sortByType(b.folders,true);b.files=a.sortByType(b.files,true);break;case "size-down":b.folders=a.sortBySize(b.folders);b.files=a.sortBySize(b.files);break;case "size-up":b.folders=a.sortBySize(b.folders,true);b.files=a.sortBySize(b.files,true);break;case "date-down":b.folders=a.sortByDate(b.folders);b.files=a.sortByDate(b.files);break;case "date-up":b.folders=a.sortByDate(b.folders,true);b.files=a.sortByDate(b.files,true);break}a=(b.folders||
[]).concat(b.files||[])}}else{this.fsitems.pre=a=(this.fsitems.pre||[]).concat((a.folders||[]).concat(a.files||[]));this.fsitems.pres=this.fsitems.pres||{};this.fsitems.pres.folders=(this.fsitems.pres.folders||[]).concat(this.fsitems.folders||[]);this.fsitems.pres.files=(this.fsitems.pres.files||[]).concat(this.fsitems.files||[])}this.store.removeAll();this.store.loadData(a);this.selectItems(d)},putDevice:function(a){this.device=a}});_._2("_s9");
_s9.FilesView=_._1(Ext.Container,{cls:"x-browse-filesview",singleSelect:Ext.UI.isTouchCapable,multiSelect:!Ext.UI.isTouchCapable,copying:true,itemsDraggable:true,emptyMsg:true,constructor:function(a){_.apply(this,a);this.fsitems=[];this.cacheTypeLabels={};this.items=[this.lEmptyMsg=new Ext.Component({hidden:true,cls:"x-browse-content-empty-msg"}),this.lOfflineMsg=new Ext.Container({hidden:true,cls:"x-browse-content-empty-msg",items:[this.lOfflineMsgAlias=new Ext.Component({html:_TR("DEVICE_OFFLINE")}),
new Ext.Component({html:_TR("DEVICE_OFFLINE_DESC"),cls:"x-browse-content-empty-msg-desc"})]}),this.getGridCmp(),this.iconsDv=new _s9.FilesDV({hidden:true,singleSelect:this.singleSelect,multiSelect:this.multiSelect,itemsDraggable:this.itemsDraggable}),this.tileDv=new _s9.FilesTileDV({hidden:true,singleSelect:this.singleSelect,multiSelect:this.multiSelect,itemsDraggable:this.itemsDraggable})];this.gridDv=this.grid.dv;_s9.FilesView.superclass.constructor.apply(this,arguments)},getGridCmp:function(){return this.grid||
(this.grid=new _s9.FilesGrid({hidden:true,singleSelect:this.singleSelect,multiSelect:this.multiSelect,itemsDraggable:this.itemsDraggable,listeners:{afterchildrenrender:function(){this.fireEvent("afterchildrenrender")},scope:this}}))},afterRender:function(){_s9.FilesView.superclass.afterRender.apply(this,arguments);this.on("afterlayout",this.grid.updateSize,this.grid);this.mFile=new _s9.FileMenu({defaultAlign:"tl-br?",copying:this.copying});this.mFile.on("itemclick",function(a){var b=
this.getSelectedRecords();switch(a.commandName){case "browse":b.length==1&&this.fireEvent("folderbrowse",b[0].data);break;case "adminpage":b.length==1&&b[0].data.fsprovider.device.adminPageBtn.onAdvancedClick();break;case "leavedevice":b.length==1&&this.fireEvent("leavedevice",this,b[0].data.fsprovider.device);break;case "rename":b.length==1&&this.onRenameClick(b[0].data);break;case "view":b.length==1&&this.onPreviewClick(b[0].data);break;case "download":this.onDownloadClick();break;case "restore":this.onRestoreClick();
break;case "recover":this.fireEvent("recover",this);break;case "versions":if(b.length==1){this.fireEvent("versions",this,b[0].data);_s9.GATrackEvent("Browse","ViewFileVersions")}break;case "cut":_s9.recordsClipboard=b;_s9.recordsClipboard.device=this.device;_s9.recordsClipboard.share=this.share;_s9.recordsClipboard.path=this.path;_s9.recordsClipboard.method="cut";break;case "copy":_s9.recordsClipboard=b;_s9.recordsClipboard.device=this.device;
_s9.recordsClipboard.share=this.share;_s9.recordsClipboard.path=this.path;_s9.recordsClipboard.method="copy";break;case "paste":b.length==1&&this.onPasteClick(b[0].data.path);break;case "emaillink":this.onEmailLinkClick(b);break;case "link":this.onLinkClick(b);break;case "snapshot":b.length==1&&this.onSnapshotClick(b[0].data);break;case "settings":this.onSettingsClick(b);break;case "delete":this.onDeleteClick(b);break;case "open-folder":b.length==1&&this.onSearchOpenFolderClick(b[0].data);
break}},this);if(Ext.UI.isTouchCapable){this.gridDv.on("click",this.onDvContextMenu,this);this.iconsDv.on("click",this.onDvContextMenu,this);this.tileDv.on("click",this.onDvContextMenu,this)}else{this.gridDv.on("contextmenu",this.onDvContextMenu,this);this.iconsDv.on("contextmenu",this.onDvContextMenu,this);this.tileDv.on("contextmenu",this.onDvContextMenu,this);this.gridDv.on("dblclick",this.onDVDblClick,this);this.iconsDv.on("dblclick",this.onDVDblClick,this);this.tileDv.on("dblclick",this.onDVDblClick,
this)}this.gridDv.on("selectionchange",this.onDVSelectionChange,this);this.iconsDv.on("selectionchange",this.onDVSelectionChange,this);this.tileDv.on("selectionchange",this.onDVSelectionChange,this);Ext.UI.isTouchCapable?this.el.parent().on("mouseup",this.onParentFolderContextMenu,this):this.el.parent().on("contextmenu",this.onParentFolderContextMenu,this)},setVisibleEmptyMessage:function(a){if(_s9.isRCApp&&this.device&&!this.device.isOnline)a=false;if(this.emptyMsg){this.lEmptyMsg.setVisible(a);
this.lEmptyMsg.update(this.path=="/"&&this.loadedArgs&&this.loadedArgs.fsprovider&&this.loadedArgs.fsprovider.device.isOnline?_TR("BROWSE_NO_VOLUMES_OR_USB"):"");var b=this.parentBrowseContent=this.parentBrowseContent||this.el.parent(".x-browse-content");if(b)a?b.addClass("x-browse-content-drop-avail-empty-folder"):b.removeClass("x-browse-content-drop-avail-empty-folder")}},populateDevices:function(a){this.devices=a;this.gridDv.populateDevices(a);this.iconsDv.populateDevices(a);this.tileDv.populateDevices(a)},
clear:function(){this.fsitems=[];this.loadItems(this.fsitems);this.fireEvent("selectionchange",this,{delAvail:false,recoverAvail:false})},onPreviewClick:function(a){this.wndPreview=this.wndPreview||new _s9.Preview({listeners:{hide:function(){this.dvMode!="icons"?this.wndPreview.previewprovider.stopUpdatePreviews():this.iconsDv.checkVisibleItems()},scope:this}});this.wndPreview.show();this.wndPreview.putDevice(this.device);this.wndPreview.load(a,this.fsitems)},onRenameClick:function(a){this.wndRename=
this.wndRename||new _s9.Rename({listeners:{rename:function(b,c,d){this.fsprovider.renameFSItem(c,d,this.loadedArgs);_s9.GATrackEvent("Browse","RenameFSItem",c.type);this.selRecords=[{id:d},{id:c.name}]},scope:this}});this.wndRename.show();this.wndRename.loadItems(a,this.fsitems)},onDownloadClick:function(){var a=this.getSelectedRecords(),b=[];_.each(a,function(c){if(c.data.type=="file"||c.data.type=="folder")b.push(c.data)},this);this.mngrDownload&&this.mngrDownload.startDownload(b);
_s9.GATrackEvent("Browse","DownloadFiles",a.length+" items")},onDownloadItemClick:function(a){this.mngrDownload&&this.mngrDownload.startDownload(a)},onRestoreClick:function(){var a=this.getSelectedRecords();if(a.length==1){var b=a[0].data;b.isFSVersion?Ext.UI.MessageBox.confirm({title:_TR("BROWSE_RECOVER_FILES"),msg:_TR("BROWSE_CONFIRM_RESTORE_VERSION"),fn:function(c){if(c=="yes"){_s9.GATrackEvent("Browse","RestoreFileVersion");this.fireEvent("restoreversion",b)}},scope:this}):Ext.UI.MessageBox.confirm({title:_TR("BROWSE_RECOVER_FILES"),
msg:_TR("BROWSE_CONFIRM_RESTORE"),fn:function(c){if(c=="yes"){_s9.GATrackEvent("Browse","RestoreFileFromSnapshot");this.fireEvent("restore",b.pathInSnap,this.pathInSnap)}},scope:this})}},onSearchOpenFolderClick:function(a){this.searchItemToSelect=a.name;this.fireEvent("search-open-folder",{fsprovider:a.fsprovider,path:a.parentPath})},onShow:function(){_s9.FilesView.superclass.onShow.apply(this,arguments);this.clear()},load:function(a){this.loadedArgs=a;var b=a.fsprovider?a.fsprovider.device:
undefined,c=a.path,d=a.share,e=a.snapshot,f=a.pathInSnap;this.device=b;this.gridDv.putDevice(b);this.iconsDv.putDevice(b);this.tileDv.putDevice(b);if(this.fsprovider){this.fsprovider.un("fsready",this.populateFSItems,this);this.fsprovider.un("fsversionsready",this.populateFSVersions,this);this.fsprovider.un("fssearchclean",this.cleanFSSearch,this);this.fsprovider.un("fssearchready",this.populateFSSearch,this);this.fsprovider.un("fsfail",this.onFsProviderFail,this)}if(this.fsprovider=a.fsprovider){this.fsprovider.on("fsready",
this.populateFSItems,this);this.fsprovider.on("fsversionsready",this.populateFSVersions,this);this.fsprovider.on("fssearchclean",this.cleanFSSearch,this);this.fsprovider.on("fssearchready",this.populateFSSearch,this);this.fsprovider.on("fsfail",this.onFsProviderFail,this)}this.path=c;this.pathInSnap=f;this.share=d;this.snapshot=e;if(this.selRecords&&(this.selRecords.path!=c||!b||this.selRecords.deviceid!=b.id))this.selRecords=undefined;this.gridDv.load(d,e);this.iconsDv.load(d,e);this.tileDv.load(d,
e);if(c===""){this.fsitems=[];this.fsitems.folders=[];this.fsitems.files=[];_.each(this.devices,function(g){var j=g.spRCDevice?g.spRCDevice.getSerial():"";this.fsitems.folders.push({id:g.id,fsprovider:g.fsprovider,device:g,name:g.name,model:g.model||"",serial:j,serialLabel:g.isFriend?"":j,path:"/",type:"device"})},this);this.loadItems(this.fsitems,c,a);this.setVisibleEmptyMessage(!this.fsitems.folders.length&&!this.fsitems.files.length)}else c=="/"&&this.fsprovider.populateVolumes();if(_s9.isRCApp)if(b&&
!b.isOnline){this.lOfflineMsg.setVisible(true);this.lOfflineMsgAlias.update(String.format(_TR("DEVICE_ALIAS_OFFLINE"),b.name));if(this.dvMode=="grid")this.grid.setVisible(false);else if(this.dvMode=="icons")this.iconsDv.setVisible(false);else this.dvMode=="tile"&&this.tileDv.setVisible(false)}else{this.lOfflineMsg.setVisible(false);if(this.dvMode=="grid")this.grid.setVisible(true);else if(this.dvMode=="icons")this.iconsDv.setVisible(true);else this.dvMode=="tile"&&this.tileDv.setVisible(true)}},populateFSItems:function(a,
b,c,d,e){if(b==this.path&&(!this.rootArgs||!this.rootArgs.path||b.indexOf(this.rootArgs.path)===0)&&!this.isSearchMode)if(!(this.isRecoveryMode&&this.fsprovider.isShare(b))){var f=this.fsprovider.isVolume(b);if(!e.isScroll){this.fsitems=[];this.fsitems.pre=[]}this.fsitems.folders=[];this.fsitems.files=[];_.each(c,function(g){if(!this.isRecoveryMode||!f||this.fsprovider.isShare(g.path)||a.isLun(g.path)||g.pathInHome=="/"){g.typeLabel=this.getTypeLabel(g);this.fsitems.folders.push(g)}},this);_.each(d,
function(g){if(!this.isSelectPathMode||g.type=="backup_target"){g.typeLabel=this.getTypeLabel(g);this.fsitems.files.push(g)}},this);this.loadItems(this.fsitems,b,e);if(this.searchItemToSelect){this.selectSearchedRecordById(this.searchItemToSelect);delete this.searchItemToSelect}}this.wndAddFolder&&this.wndAddFolder.loadItems(this.fsitems)},getTypeLabel:function(a){if(a.type=="backup_targets"||a.type=="backup_target")return"";a=a.filetype||a.type;if(!a)return"";this.cacheTypeLabels[a]||(this.cacheTypeLabels[a]=
_TR("BROWSE_TYPE_"+a.toUpperCase()));return this.cacheTypeLabels[a]},populateFSVersions:function(a,b,c,d){if(b==this.path){this.fsprovider.isVolume(b);this.fsitems=[];this.fsitems.folders=[];this.fsitems.files=[];_.each(c,function(e){this.fsitems.files.push(e)},this);this.loadItems(this.fsitems,b,d)}},populateFSSearch:function(a,b,c,d){if(!d.isScroll){this.fsitems=[];this.fsitems.pre=[]}this.fsitems.folders=b;this.fsitems.files=c;this.loadItems(this.fsitems,"",d)},cleanFSSearch:function(){this.fsitems=
{};this.loadItems(this.fsitems,"")},loadItems:function(a,b,c){a=a||{};a.folders=a.folders||[];a.files=a.files||[];c=c||{};c.pathInSnap=c.pathInSnap||"";if(this.dvMode=="grid"){this.grid.setVisible(!!a.folders.length||!!a.files.length);this.grid.populateRows(a,b,c.pathInSnap,this.selRecords)}else if(this.dvMode=="icons"){this.iconsDv.setVisible(!!a.folders.length||!!a.files.length);this.iconsDv.loadItems(a,b,c.pathInSnap,this.selRecords)}else if(this.dvMode=="tile"){this.tileDv.setVisible(!!a.folders.length||
!!a.files.length);this.tileDv.loadItems(a,b,c.pathInSnap,this.selRecords)}this.setVisibleEmptyMessage(!a.folders.length&&!a.files.length)},onFsProviderFail:function(a,b){this.populateFSItems(a,b.path,[],[],b)},onPasteClick:function(a){var b=[];_.each(_s9.recordsClipboard,function(c){b.push(c.data)},this);if(_s9.recordsClipboard.method=="cut"&&_s9.recordsClipboard.path!=a){this.fireEvent("move",b,_s9.recordsClipboard.path,a);_s9.recordsClipboard=undefined}else _s9.recordsClipboard.method==
"copy"&&this.fireEvent("copy",b,_s9.recordsClipboard.path,a)},onEmailLinkClick:function(a){if(a.length){for(var b=[],c=0;c<a.length;++c)b.push(a[c].data);this.wndEmailLink=this.wndEmailLink||new _s9.EmailLinkWindow;this.wndEmailLink.show();this.wndEmailLink.loadArgs(b);this.wndEmailLink.center()}},onLinkClick:function(a){if(a.length){for(var b=[],c=0;c<a.length;++c)b.push(a[c].data);this.showLinkWindow(b)}},showLinkWindow:function(a){if(a&&a.length){this.wndLink||(this.wndLink=new _s9.LinkWindow);
this.wndLink.show();this.wndLink.loadArgs(a);this.wndLink.center()}},onSnapshotClick:function(a){this.wndAddSnapshot=this.wndAddSnapshot||new _s9.AddSnapshot;this.wndAddSnapshot.show();this.wndAddSnapshot.loadArgs(a)},onSettingsClick:function(a){a=a||this.getSelectedRecords();(a=a.length==1&&a[0].data.type!="file"?a[0].data:this.loadedArgs)&&this.showSettingsWindow(a)},showSettingsWindow:function(a){if(a)if(_s9.isRCApp){if(RC.Browse.UsersWindow){this.wndUsers=this.createRCUsersWindow();
this.wndUsers.show();this.wndUsers.loadArgs(a);_s9.GATrackEvent("Browse","ShareClick")}}else if(_s2.DataSetSettings){this.wndDataSetSettings=this.wndDataSetSettings||new _s2.DataSetSettings;this.wndDataSetSettings.show();this.wndDataSetSettings.clear();this.wndDataSetSettings.loadShare(a.share)}},showSharePermsWindow:function(a){if(a&&_s9.isRCApp&&RC.Browse.UsersWindow){this.wndUsers=this.createRCUsersWindow();this.wndUsers.show();this.wndUsers.loadArgs(a);this.wndUsers.showPermsStep();
_s9.GATrackEvent("Browse","ShareClick")}},createRCUsersWindow:function(){if(!this.wndUsers){this.wndUsers=CComSingleton(RC.Browse.UsersWindow);this.wndUsers.on("linkclick",function(a,b){this.showLinkWindow([b])},this)}return this.wndUsers},onDeleteClick:function(a){a=a||this.getSelectedRecords();if(a.length)if(a[0].data.type=="share"){this.wndDestroyShare=this.wndDestroyShare||new _s9.DestroyShare({listeners:{destroy:function(b,c){_s9.GATrackEvent("Browse","DestroyShare",c.length+
" items");_.each(c,function(d){this.fireEvent("deleteshare",d.data.share)},this)},scope:this}});this.wndDestroyShare.show();this.wndDestroyShare.load(a)}else Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:_TR(a.length>1?"WARN_DELETION_FILES":a[0].get("type")=="file"?"WARN_DELETION_FILE":"WARN_DELETION_FOLDER"),fn:function(b){if(b=="yes"){var c=[];_.each(a,function(d){c.push(d.data)},this);_s9.GATrackEvent("Browse","DeleteFiles",c.length+" items");this.fireEvent("delete",c,
this.share,this.path)}},scope:this})},setRecoveryMode:function(a){this.isRecoveryMode=this.iconsDv.isRecoveryMode=this.tileDv.isRecoveryMode=this.gridDv.isRecoveryMode=this.grid.isRecoveryMode=a},setSelectPathMode:function(a){this.isSelectPathMode=a;this.gridDv.setSelectPathMode(a);this.iconsDv.setSelectPathMode(a);this.tileDv.setSelectPathMode(a)},setSearchMode:function(a){this.isSearchMode=a},setDvMode:function(a){this.dvMode=a;if(a=="grid"){this.iconsDv.hide();this.tileDv.hide();this.grid.show();
this.iconsDv.stopUpdatePreviews();this.tileDv.stopUpdatePreviews();this.grid.populateRows(this.fsitems,this.path,this.pathInSnap,this.selRecords)}else if(a=="icons"){this.grid.hide();this.tileDv.hide();this.iconsDv.show();this.tileDv.stopUpdatePreviews();this.iconsDv.loadItems(this.fsitems,this.path,this.pathInSnap,this.selRecords)}else if(a=="tile"){this.grid.hide();this.iconsDv.hide();this.tileDv.show();this.iconsDv.stopUpdatePreviews();this.tileDv.loadItems(this.fsitems,this.path,this.pathInSnap,
this.selRecords)}},setRoot:function(a){this.rootArgs=a},clearSelection:function(){this.gridDv.clearSelections();this.iconsDv.clearSelections();this.tileDv.clearSelections();this.fireEvent("selectionchange",this,{delAvail:false,recoverAvail:false})},selectNodes:function(a,b){switch(this.dvMode){case "grid":this.gridDv.select(a,b);break;case "icons":this.iconsDv.select(a,b);break;case "tile":this.tileDv.select(a,b);break}},selectSearchedRecordById:function(a){var b;switch(this.dvMode){case "grid":b=
this.gridDv;break;case "icons":b=this.iconsDv;break;case "tile":b=this.tileDv;break}b.select(b.store.getById(a));(a=b.getSelectedNodes()[0])&&a.scrollIntoView(this.el.parent())},getSelectedRecords:function(){var a=[];switch(this.dvMode){case "grid":a=this.gridDv.getSelectedRecords();break;case "icons":a=this.iconsDv.getSelectedRecords();break;case "tile":a=this.tileDv.getSelectedRecords();break}return a},onParentFolderContextMenu:function(a){if(!this.isSearchMode){var b=Ext.get(a.target);if(!this.hidden&&
this.device&&!b.hasClass("x-sh-recovery-grid-table")&&!b.parent(".x-sh-recovery-grid-table")&&!b.hasClass("x-rc-access-fsiconsdv-fsitem")&&!b.parent(".x-rc-access-fsiconsdv-fsitem")&&!b.hasClass("x-browse-snapsdv-snap")&&!b.parent(".x-browse-snapsdv-snap")){this.contextMenu=this.contextMenu||new _s9.ParentFolderMenu({listeners:{itemclick:function(c){c.commandName=="paste"&&this.onPasteClick(this.path)},scope:this}});if(this.contextMenu.setMode(this.loadedArgs.user?"ReadWrite":this.device.permsMgr.getPermsForCurUser(this.share),
this.loadedArgs,this.device,this.share,this.snapshot,_s9.recordsClipboard)){b=a.getXY();b[0]!==0&&b[1]!==0&&this.contextMenu.showAt(b)}a.stopEvent()}}},onDvContextMenu:function(a,b,c,d){d.stopEvent();b=a.getRecord(c).data;a.getSelectedNodes().indexOf(c)==-1&&a.select(c);if(!this.isSelectPathMode){a=a.getSelectedRecords();if(this.isSearchMode){if(a&&a.length===1){c=b.user?"ReadWrite":b.fsprovider.device.permsMgr.getPermsForCurUser(b.share);this.device.spDevice.getShareManager();this.share=b.fsprovider.getShareByPath(b.path);
this.path=b.parentPath;b.share=b.fsprovider.getShareByPath(b.path);(b=this.mFile.setMode(c,b.fsprovider.device,b.share,b.snapshot,a,_s9.recordsClipboard,this.isRecoveryMode,this.isSearchMode))&&this.mFile.showAt(d.xy)}}else{c=b.user?"ReadWrite":b.fsprovider.device.permsMgr.getPermsForCurUser(b.share);(b=this.mFile.setMode(c,b.fsprovider.device,b.share,b.snapshot,a,_s9.recordsClipboard,this.isRecoveryMode))&&this.mFile.showAt(d.xy)}}},onDVDblClick:function(a,b,c){a=a.getRecord(c).data;
b=a.fsprovider.device.spRCDeviceCapabilities;if(_s9.PreviewProvider.SupportedTypes[a.filetype]&&(!b||b.getFilePreview()===true))this.onPreviewClick(a);else if(a.perms!="Disabled"&&a.type!="file"&&a.type!="backup_target")this.fireEvent("folderbrowse",a);else if(a.perms!="Disabled"&&a.type=="file"){this.onDownloadItemClick(a);_s9.GATrackEvent("Browse","DownloadFiles","1 items")}},onDVSelectionChange:function(a){if(this.path&&this.fsprovider){this.selRecords=this.grid.selRecords=a.getSelectedRecords();
this.selRecords.path=this.path;this.selRecords.deviceid=this.fsprovider.device.id;this.grid.selRecords=this.selRecords;a=this.loadedArgs.user?"ReadWrite":this.device.permsMgr.getPermsForCurUser(this.share);var b=false,c=!!this.selRecords.length,d=false;_.each(this.selRecords,function(g){if(g&&g.data&&(g.data.readonly||g.data.pathInHomeFolder=="/"))b=true;if(g&&g.data&&g.data.type!="file"&&g.data.type!="folder")c=false;d=d||g.data.pathInHome=="/admin"},this);var e={vol:true,ejvol:true,share:true,
backup_targets:true,backup_target:true},f=this.selRecords.length?this.selRecords[0].data:null;this.fireEvent("selectionchange",this,{delAvail:this.selRecords.length&&(!e[f.type]&&a=="ReadWrite"&&!b&&!f.isFSVersion&&!this.snapshot&&!d||f.type=="share"&&!f.fsprovider.device.isFriend),downloadAvail:c,propsAvail:this.selRecords.length==1&&f.share&&!f.fsprovider.device.isFriend,recoverAvail:this.selRecords.length==1&&!!f.snapshot&&!f.isFSVersion&&(!f.share||!(f.share.isReadyDRShare&&f.share.isReadyDRShare()))})}}});
_._2("_s9");
_s9.SnapMenu=_._1(_9,Ext.UI.Menu,{cls:"x-browse-menu",enableScrolling:false,constructor:function(){var a=Ext.menu.Item;this.itemBrowse=new a({text:_TR("BROWSE"),icon:false,ctCls:"x-browse-menu-icon-browse",commandName:"browse"});this.itemRollback=new a({text:_TR("ROLLBACK"),icon:false,ctCls:"x-browse-menu-icon-rollback",commandName:"rollback"});this.itemClone=new a({text:_TR("CLONE"),icon:false,ctCls:"x-browse-menu-icon-clone",commandName:"clone"});this.itemDelete=new a({text:_TR("DELETE"),
icon:false,ctCls:"x-browse-menu-icon-delete",commandName:"delete"});this.items=[this.itemBrowse,this.itemRollback,this.itemClone,this.itemDelete];_s9.SnapMenu.superclass.constructor.apply(this,arguments)},setMode:function(a,b){var c=b.length?b[0].data:null;this.itemBrowse.setVisible(b.length==1&&(c.share||c.user));this.itemRollback.setVisible(!_s9.isRCApp&&b.length==1&&a=="ReadWrite"&&(!c.share||!(c.share.isReadyDRShare&&c.share.isReadyDRShare())));this.itemClone.setVisible(!_s9.isRCApp&&
b.length==1&&a=="ReadWrite"&&(c.share||c.lun));this.itemDelete.setVisible(!_s9.isRCApp&&a=="ReadWrite");var d=0;_.each(this.items.items,function(e){e.hidden||++d},this);return d}});_._2("_s9");
_s9.SnapsDV=Ext.extend(Ext.UI.ChainDataView,{cls:"x-browse-snapsdv",selectedClass:"x-browse-snapsdv-snap-selected",itemSelector:"div.x-browse-snapsdv-snap",keyHandlers:false,constructor:function(){_s9.SnapsDV.superclass.constructor.apply(this,arguments);this.store=new Ext.data.Store({autoDestroy:true,reader:new Ext.data.JsonReader({idProperty:"date",fields:["fsprovider","name","date","dateLabel","type","path","pathInSnap","share","lun","user","snapshot","parentPath"]})});this.tpl=['<tpl for=".">',
'<div id="{id}" class="x-browse-dv-el-margins '+this.cls+'-snap">','<div class="'+this.cls+"-snap-icon "+this.cls+'-snap-icon-{type}"></div>','<div class="'+this.cls+'-snap-name x-ellipsis" title="{name}">{name}</div>','<div class="'+this.cls+'-snap-date x-ellipsis" title="{dateLabel}">{dateLabel}</div>',"</div>","</tpl>"]},loadItems:function(a,b,c,d){this.store.removeAll();this.store.loadData(a);d&&_.each(d,function(e){this.select(this.store.getById(e.id),true)},this)}});_._2("_s9");
_s9.SnapsGrid=_._1(_s9.BaseGrid,{constructor:function(){this.lHNameId=Ext.id();this.lHDateId=Ext.id();this.headerTmpl=String.format('<tr><td class="{0}-icon">&nbsp;</td><td class="{0}-date"><div class="x-ellipsis" id="'+this.lHDateId+'"><span class="{0}-cell-date-sort">'+_TR("DATE")+'</span></div></td><td class="{0}-name"><div class="x-ellipsis {0}-cell-name" id="'+this.lHNameId+'"><span class="{0}-cell-name-sort">'+_TR("NAME")+"</span></div></td></tr>",this.cls);_s9.SnapsGrid.superclass.constructor.apply(this,
arguments)},afterRender:function(){_s9.SnapsGrid.superclass.afterRender.apply(this,arguments);Ext.get(this.lHNameId).on("click",this.onHNameClick,this);Ext.get(this.lHDateId).on("click",this.onHDateClick,this);this.setSort("date");this.setSort("date")},onHNameClick:function(){this.setSort("name")},onHDateClick:function(){this.setSort("date")},populateRows:function(a,b,c,d){a=a||[];var e=this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager);switch(this.sortOrder){case "name-down":a.files=
e.sortByName(a);break;case "name-up":a.files=e.sortByName(a,true);break;case "date-down":a.files=e.sortByDate(a);break;case "date-up":a.files=e.sortByDate(a,true);break}this.entities=a;this.path=b;this.pathInSnap=c;this.selRecords=d;_s9.SnapsGrid.superclass.populateRows.call(this,a,b,c,d)},getDataView:function(a){return this.dv||(this.dv=new _s9.SnapsGridDV(_.applyIf(a,{singleSelect:this.singleSelect,multiSelect:this.multiSelect})))}});_._2("_s9");
_s9.SnapsTileDV=_._1(_s9.SnapsDV,{constructor:function(){_s9.SnapsTileDV.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.SnapsTileDV.superclass.afterRender.apply(this,arguments);this.addClass("x-rc-access-snapstiledv")}});_._2("_s9");
_s9.SnapsGridDV=_._1(_s9.SnapsDV,{cls:"x-sh-recovery-grid",itemSelector:"table.ui-fwgrid-row",selectedClass:"ui-fwgrid-rowsel",constructor:function(){_s9.SnapsGridDV.superclass.constructor.apply(this,arguments);this.tpl=['<tpl for=".">','<table cellspacing="0" cellpadding="0" class="'+this.cls+'-table ui-fwgrid-row <tpl if="type == \'folder\' && !snapshot"> x-browse-drop-folder</tpl>" data-path="{[_s9.MakeQuoted(values.path)]}"><tr><td class="'+this.cls+'-icon"><div class="'+
this.cls+'-cell-icon-snapshot<tpl if="type != \'manual\'">-continious</tpl>">&nbsp;</div></td><td class="'+this.cls+'-date"><div class="x-ellipsis" title="{dateLabel}">{dateLabel}</div></td><td class="'+this.cls+'-name"><div class="x-ellipsis '+this.cls+"-cell-name "+this.cls+'-cell-name-snapshot<tpl if="type != \'manual\'">-continious</tpl>">{name}&nbsp;</div></td></tr></table></tpl>']}});_._2("_s9");
_s9.SnapsView=_._1(Ext.Container,{cls:"x-browse-snapsview",singleSelect:Ext.UI.isTouchCapable,multiSelect:!Ext.UI.isTouchCapable,constructor:function(){_s9.SnapsView.superclass.constructor.apply(this,arguments);this.spRepliSyncJobsManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getRepliSyncSystem().getJobsManager();this.spRepliSyncJobsManager.UpdateJobs("SNAPHOT_DELETE");this.spRepliSyncJobsManager.UpdateStatuses("SNAPHOT_DELETE")},afterRender:function(){_s9.SnapsView.superclass.afterRender.apply(this,
arguments);this.fsitems=this.filteredItems=[];this.grid=new _s9.SnapsGrid({hidden:true,singleSelect:this.singleSelect,multiSelect:this.multiSelect});this.gridDv=this.grid.getDataView();this.iconsDv=new _s9.SnapsDV({hidden:true,singleSelect:this.singleSelect,multiSelect:this.multiSelect});this.tileDv=new _s9.SnapsTileDV({hidden:true,singleSelect:this.singleSelect,multiSelect:this.multiSelect});(this.mSnaps=new _s9.SnapMenu).on("itemclick",function(a){var b=this.getSelectedRecords();
switch(a.commandName){case "browse":b.length==1&&this.fireEvent("snapbrowse",b[0].data);break;case "rollback":b.length==1&&this.onRollbackClick();break;case "clone":b.length==1&&this.onCloneClick();break;case "delete":this.onDeleteClick();break}},this);if(Ext.UI.isTouchCapable){this.gridDv.on("click",this.onDvContextMenu,this);this.iconsDv.on("click",this.onDvContextMenu,this);this.tileDv.on("click",this.onDvContextMenu,this)}else{this.gridDv.on("contextmenu",this.onDvContextMenu,this);this.iconsDv.on("contextmenu",
this.onDvContextMenu,this);this.tileDv.on("contextmenu",this.onDvContextMenu,this);this.gridDv.on("dblclick",this.onDVDblClick,this);this.iconsDv.on("dblclick",this.onDVDblClick,this);this.tileDv.on("dblclick",this.onDVDblClick,this)}this.gridDv.on("selectionchange",this.onDVSelectionChange,this);this.iconsDv.on("selectionchange",this.onDVSelectionChange,this);this.tileDv.on("selectionchange",this.onDVSelectionChange,this);this.grid.render(this.el);this.iconsDv.render(this.el);this.tileDv.render(this.el)},
onShow:function(){_s9.SnapsView.superclass.onShow.apply(this,arguments);this.grid.updateSize();this.clear()},clear:function(){this.fsitems=this.filteredItems=[];this.grid.populateRows(this.fsitems,this.path,this.pathInSnap,this.selRecords);this.iconsDv.loadItems(this.fsitems,this.path,this.pathInSnap,this.selRecords);this.tileDv.loadItems(this.fsitems,this.path,this.pathInSnap,this.selRecords);this.fireEvent("selectionchange",this,{delAvail:false,recoverNextAvail:false})},load:function(a){if(this.fsprovider){this.fsprovider.un("snapsready",
this.populateSnaps,this);this.fsprovider.un("snapsfail",this.onFSProviderFail,this)}this.loadedArgs=a;this.fsprovider=a.fsprovider;this.device=this.fsprovider.device;if(this.fsprovider){this.fsprovider.on("snapsready",this.populateSnaps,this);this.fsprovider.on("snapsfail",this.onFSProviderFail,this)}if((!this.share||!a.share||this.share.getName()!=a.share.getName())&&(!this.lun||!a.lun||this.lun.getName()!=a.lun.getName())&&(!this.user||!a.user||this.user.getName()!=a.user.getName())){this.path=
a.path;this.share=a.share;this.lun=a.lun;this.user=a.user;this.clear();this.filter=undefined}},onFSProviderFail:function(a,b){this.populateSnaps(a,b.path,[],b)},onRollbackClick:function(){var a=this.getSelectedRecords()[0].data;this.wndRoolback=this.wndRoolback||new _s9.RollbackWindow({listeners:{rollbackapply:function(b,c){this.fireEvent("snaprollback",a,c)},scope:this}});this.wndRoolback.show();this.wndRoolback.load(a.snapshot)},onCloneClick:function(){var a=this.getSelectedRecords()[0].data;
this.wndClone=this.wndClone||new _s9.CloneSnapshot;this.wndClone.show();this.wndClone.loadArgs(a)},onDeleteClick:function(){var a={solo:{title:_TR("REMOVE_SNAP"),msg:_TR("REMOVE_SNAP_QUESTION")},many:{title:_TR("REMOVE_SNAPS"),msg:_TR("REMOVE_SNAPS_QUESTION")},latest:{title:_TR("REMOVE_SNAP"),msg:_TR("REMOVE_SNAP_LATEST_WARNING")},backup:{title:_TR("REMOVE_SNAP"),msg:_TR("REMOVE_SNAP_BACKUP_WARNING")}},b=this.spRepliSyncJobsManager.getJobs(),c=this.getSelectedRecords(),d=false,e=false,f=false,
g;b&&_.each(b,function(j){var h=this.share?this.share.getPath():this.lun?"/"+this.lun.getId():"";if(j.getSourcePath()==h){d=true;if(j=this.spRepliSyncJobsManager.getStatusByJobName(j.getName()))f=j.getStatus()=="REPLISYNC_RUNNING"}},this);this.filteredItems.length>0&&d&&_.each(c,function(j){j=j.data;if(j.snapshot.getPath()===this.filteredItems[0].snapshot.getPath()&&j.snapshot.getType()===this.filteredItems[0].snapshot.getType()&&j.snapshot.getName()===this.filteredItems[0].snapshot.getName()){e=
true;g=j.name?j.name:j.dateLabel}},this);a=a[f&&"backup"||e&&"latest"||c.length>1&&"many"||"solo"];Ext.UI.MessageBox.confirm({width:450,title:a.title,msg:String.format(a.msg,g),fn:function(j){j=="yes"&&_.each(c,function(h){h=h.data;this.fireEvent("snapdelete",h,h.snapshot)},this)},scope:this})},populateSnaps:function(a,b,c){if(this.path==b){this.fsitems=this.filteredItems=[];_.each(c,function(d){var e=d.snapshot.getType();this.fsitems.push({fsprovider:d.fsprovider,name:e=="2"?d.name:"",date:d.date,
dateLabel:d.dateLabel,share:d.share,lun:d.lun,user:d.user,snapshot:d.snapshot,type:e=="2"?"manual":"continious",path:d.path,parentPath:d.parentPath,pathInSnap:d.pathInSnap})},this);this.fsitems=(this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager)).sortByDate(this.fsitems,true);if(this.dvMode=="grid")this.grid.populateRows(this.fsitems,this.path,this.pathInSnap,this.selRecords);else if(this.dvMode=="icons")this.iconsDv.loadItems(this.fsitems,this.path,this.pathInSnap,this.selRecords);
else this.dvMode=="tile"&&this.tileDv.loadItems(this.fsitems,this.path,this.pathInSnap,this.selRecords);this.filter&&this.filterSnaps(this.filter)}},filterSnaps:function(a){var b=[];this.filter=a;_.each(a,function(c){b.push(c.snapshot.getName())},this);this.filteredItems=[];_.each(this.fsitems,function(c){b.indexOf(c.snapshot.getName())!=-1&&this.filteredItems.push(c)},this);if(this.dvMode=="grid"){this.grid.setVisible(!!this.filteredItems.length);this.grid.populateRows(this.filteredItems,this.path,
this.pathInSnap,this.selRecords)}else if(this.dvMode=="icons"){this.iconsDv.setVisible(!!this.filteredItems.length);this.iconsDv.loadItems(this.filteredItems,this.path,this.pathInSnap,this.selRecords)}else if(this.dvMode=="tile"){this.tileDv.setVisible(!!this.filteredItems.length);this.tileDv.loadItems(this.filteredItems,this.path,this.pathInSnap,this.selRecords)}},setDvMode:function(a){this.dvMode=a;if(a=="grid"){this.iconsDv.hide();this.tileDv.hide();this.grid.show();this.grid.populateRows(this.filteredItems,
this.path,this.pathInSnap,this.selRecords)}else if(a=="icons"){this.grid.hide();this.tileDv.hide();this.iconsDv.show();this.iconsDv.loadItems(this.filteredItems,this.path,this.pathInSnap,this.selRecords)}else if(a=="tile"){this.grid.hide();this.iconsDv.hide();this.tileDv.show();this.tileDv.loadItems(this.filteredItems,this.path,this.pathInSnap,this.selRecords)}},clearSelection:function(){this.gridDv.clearSelections();this.iconsDv.clearSelections();this.tileDv.clearSelections();this.fireEvent("selectionchange",
this,{delAvail:false,recoverNextAvail:false})},selectNodes:function(a,b){switch(this.dvMode){case "grid":this.gridDv.select(a,b);break;case "icons":this.iconsDv.select(a,b);break;case "tile":this.tileDv.select(a,b);break}},getSelectedRecords:function(){var a=[];switch(this.dvMode){case "grid":a=this.gridDv.getSelectedRecords();break;case "icons":a=this.iconsDv.getSelectedRecords();break;case "tile":a=this.tileDv.getSelectedRecords();break}return a},onDvContextMenu:function(a,b,c,d){d.stopEvent();
a.getRecord(c);a.getSelectedNodes().indexOf(c)==-1&&a.select(c);a=a.getSelectedRecords();this.mSnaps.setMode(this.loadedArgs.user?"ReadWrite":this.device.permsMgr.getPermsForCurUser(this.share),a)&&this.mSnaps.showAt(d.xy)},onDVDblClick:function(a,b,c){a=a.getRecord(c).data;if(a.share||a.user)this.fireEvent("snapbrowse",a)},onDVSelectionChange:function(a){if(this.path&&this.fsprovider){this.selRecords=this.grid.selRecords=a.getSelectedRecords();this.selRecords.path=this.path;this.selRecords.deviceid=
this.fsprovider.device.id;a=this.loadedArgs.user?"ReadWrite":this.device.permsMgr.getPermsForCurUser(this.share);this.fireEvent("selectionchange",this,{delAvail:this.selRecords.length&&a=="ReadWrite",recoverNextAvail:this.selRecords.length==1,rollbackAvail:this.selRecords.length==1&&(!this.share||!(this.share.isReadyDRShare&&this.share.isReadyDRShare()))})}}});_._2("_s9");
_s9.DevsView=_._1(_9,_s9.FilesView,{constructor:function(){_s9.DevsView.superclass.constructor.apply(this,arguments)},getGridCmp:function(){return this.grid||(this.grid=new _s9.DevsGrid({hidden:true,singleSelect:this.singleSelect,multiSelect:this.multiSelect,listeners:{afterchildrenrender:function(){this.fireEvent("afterchildrenrender")},scope:this}}))}});_._2("_s9");
_s9.DevsGrid=_._1(_s9.BaseGrid,{constructor:function(){this.lHNameId=Ext.id();this.lHModelId=Ext.id();this.lHSerialId=Ext.id();this.headerTmpl=String.format('<tr><td class="{0}-icon">&nbsp;</td><td class="{0}-name"><div class="x-ellipsis {0}-cell-name" id="'+this.lHNameId+'"><span class="{0}-cell-name-sort">'+_TR("NAME")+'</span></div></td><td class="{0}-model"><div class="x-ellipsis" id="'+this.lHModelId+'"><span class="{0}-cell-model-sort">'+_TR("MODEL")+'</span></div></td><td class="{0}-serial"><div class="x-ellipsis" id="'+
this.lHSerialId+'"><span class="{0}-cell-serial-sort">'+_TR("SERIAL")+"</span></div></td></tr>",this.cls);_s9.DevsGrid.superclass.constructor.apply(this,arguments)},afterHeaderRender:function(){_s9.DevsGrid.superclass.afterHeaderRender.apply(this,arguments);Ext.get(this.lHNameId).on("click",this.onHNameClick,this);Ext.get(this.lHModelId).on("click",this.onHModelClick,this);Ext.get(this.lHSerialId).on("click",this.onHSerialClick,this);this.setSort("name")},onHNameClick:function(){this.setSort("name")},
onHModelClick:function(){this.setSort("model")},onHSerialClick:function(){this.setSort("serial")},setSort:function(a){this.sortOrder&&this.headerBox.removeClass(this.cls+"-sort-"+this.sortOrder);var b=this.sortOrder;switch(a){case "name":b=b=="name-down"?"name-up":"name-down";break;case "model":b=b=="model-down"?"model-up":"model-down";break;case "serial":b=b=="serial-down"?"serial-up":"serial-down";break}this.sortOrder=b;this.headerBox.addClass(this.cls+"-sort-"+b);this.populateRows(this.entities||
[],this.path,this.pathInSnap,this.selRecords)},populateRows:function(a,b,c,d){a.folders=a.folders||[];a.files=a.files||[];var e=this.sortmgr=this.sortmgr||CComSingleton(_s9.SortManager);switch(this.sortOrder){case "name-down":a.folders=e.sortByName(a.folders);break;case "name-up":a.folders=e.sortByName(a.folders,true);break;case "model-down":a.folders=e.sortByModel(a.folders);break;case "model-up":a.folders=e.sortByModel(a.folders,true);break;case "serial-down":a.folders=e.sortBySerial(a.folders);
break;case "serial-up":a.folders=e.sortBySerial(a.folders,true);break}this.entities=a;this.path=b;this.pathInSnap=c;this.selRecords=d;_s9.DevsGrid.superclass.populateRows.call(this,a,b,c,d)},getDataView:function(a){return this.dv||(this.dv=new _s9.DevsGridDV(_.applyIf(a,{singleSelect:this.singleSelect,multiSelect:this.multiSelect})))}});_._2("_s9");
_s9.DevsGridDV=_._1(_s9.FilesGridDV,{constructor:function(){_s9.DevsGridDV.superclass.constructor.apply(this,arguments);this.tpl=['<tpl for="."><table cellspacing="0" cellpadding="0" class="'+this.cls+'-table ui-fwgrid-row " <tpl if="!!readonly">data-readonly="true" </tpl>><tr><td class="'+this.cls+'-icon"><div class="x-ellipsis '+this.cls+"-cell-icon-img "+this.cls+'-cell-icon-{type} <tpl if="!!iconcls">'+this.cls+'-cell-icon-{iconcls}</tpl>"></div></td><td class="'+this.cls+
'-name"><div class="x-ellipsis"><div class="x-ellipsis '+this.cls+'-cell-name " title="{name}">{name}</div></div></td><td class="'+this.cls+'-model"><div class="x-ellipsis '+this.cls+'-cell-model {modelcls}" title="{model}">{model}</div></td><td class="'+this.cls+'-serial"><div class="x-ellipsis '+this.cls+'-cell-serial " title="{serialLabel}">{serialLabel}</div></td></tr></table></tpl>']}});_._2("_s9");
_s9.Tree=_._1(_9,Ext.Container,_i45,{cls:"x-browse-tree",constructor:function(){_s9.Tree.superclass.constructor.apply(this,arguments);this.nodes=[];this.volNodes={}},initComponent:function(){_s9.Tree.superclass.initComponent.apply(this,arguments)},afterRender:function(){_s9.Tree.superclass.afterRender.apply(this,arguments);Ext.UI.ScrollManager.reg(this.el.dom,Ext.UI.ScrollManager.OVERALL);this.nodes=[];this.rootNode=new _s9.TreeNode({type:"root",
expanded:true,name:"ReadyCLOUD",path:"",listeners:{expand:this.onNodeExpand,load:this.onNodeLoad,select:this.onNodeSelect,contextmenu:this.onNodeContextMenu,destroy:this.onNodeDestroy,scope:this}});this.rootNode.render(this.el);this.nodes[""]=this.rootNode},select:function(a){var b=a.path,c,d=this.nodes[(a.fsprovider?a.fsprovider.device.id:"")+b];if(a.fsprovider&&a.fsprovider.isVolume(b)&&a.fsprovider.getVolumes().length==1&&!this.isSelectPathMode){d=this.nodes[(a.fsprovider?a.fsprovider.device.id:
"")+"/"];a.fsprovider&&a.fsprovider.updateFsTreeNode({path:"/"})}if(d&&d.id&&Ext.fly(d.id)){for(c=d;d&&d.el.getHeight()===0;)d=d.parent;if(d){this.selectedNode&&this.selectedNode.deselect();this.selectedNode=d;this.selectedNode.select()}}b=[];if(c){for(this.argsToSelect=undefined;c&&(_s9.isRCApp||c.parent)&&(!this.rootArgs||c.path.indexOf(this.rootArgs.path)===0);){b.push({name:c.name,node:c});c=c.parent}b=b.reverse()}else this.argsToSelect=a;return b},setPathToBrowse:function(a){this.pathToBrowse=
a},expandDeviceNode:function(a){(a=this.nodes[a+"/"])&&a.id&&Ext.fly(a.id)&&a.expand()},setRecoveryMode:function(a){this.isRecoveryMode=a;var b,c,d,e,f,g;for(b in this.volNodes){e=this.volNodes[b];for(c=0;c<e.length;++c){f=e[c];for(d=0;d<f.childNodes.length;++d){g=f.childNodes[d];if(g.expanded&&f.fsprovider.isShare(g.path))if(a&&!g.fsprovider.device.isFriend){this.populateSnapshots(g.fsprovider,g.path,[],{});g.fsprovider.updateSnapshots(g)}else{this.populateFSItems(g.fsprovider,g.path,[],[],{});g.fsprovider.updateFsTreeNode(g)}}}}},
onNodeExpand:function(a){if(a.permsMgr&&!a.permsMgr.getIsReady()){this.nodeToLoad=a;a.permsMgr.on("ready",this.onPermsMgrReady,this);setTimeout(function(){a.permsMgr.getIsPending()||a.permsMgr.refresh()},100);this.fireEvent("nodeload",this,a)}else a.type!="root"&&this.onNodeLoad(a)},onPermsMgrReady:function(){if(this.nodeToLoad){this.onNodeLoad(this.nodeToLoad);delete this.nodeToLoad}},onNodeLoad:function(a){if(a.type=="share"&&this.isRecoveryMode&&!a.fsprovider.device.isFriend)a.fsprovider.updateSnapshots(a);
else if(a.type=="folder"&&a.user&&this.isRecoveryMode&&!a.fsprovider.device.isFriend)a.fsprovider.updateSnapshots(a);else if(a.type!="file")if(a.snapshot)a.pathInSnap&&a.fsprovider.updateFsSnapTreeNode(a);else if(a.path)if(a.type=="device")a.fsprovider.populateVolumes();else a.type=="vol"?a.fsprovider.populateShares():a.fsprovider.updateFsTreeNode(a);this.fireEvent("nodeload",this,a)},onNodeSelect:function(a){this.selectedNode&&this.selectedNode.deselect();this.selectedNode=a;this.selectedNode.select();
this.fireEvent("nodeselect",this,a);a.permsMgr&&!a.permsMgr.getIsReady()&&setTimeout(function(){a.permsMgr.getIsPending()||a.permsMgr.refresh()},100);for(var b=0,c=a.parent;c;){++b;c=c.parent}_s9.GATrackEvent("Browse","SelectTreeNode",b+" level")},onNodeContextMenu:function(a){this.fireEvent("nodecontextmenu",this,a);if(!this.isSelectPathMode&&!this.isRecoveryMode){this.menu=this.menu||new _s9.TreeMenu({listeners:{itemclick:this.onMenuItemClick,scope:this}});if(a.share)a.perms||(a.perms=
a.user?"ReadWrite":a.fsprovider.device.permsMgr.getPermsForCurUser(a.share));else if(a.pathInHome)a.perms="ReadWrite";if(this.menu.setMode(a)){this.contextMenuNode=a;Ext.UI.isTouchCapable?this.menu.show(a.el,"tl-b?"):this.menu.show(a.getMenuIconEl())}}},onNodeDestroy:function(a){delete this.nodes[(a.fsprovider?a.fsprovider.device.id:"")+a.path]},onNodeShareClick:function(a){this.fireEvent("settingsclick",this,a)},onMenuItemClick:function(a){var b=this.contextMenuNode.fsprovider.device;switch(a.commandName){case "browse":this.onNodeSelect(this.contextMenuNode);
break;case "adminpage":b.adminPageBtn.onAdvancedClick();break;case "leavedevice":this.fireEvent("leavedevice",this,b);break;case "delete":if(this.contextMenuNode.type=="share"){this.wndDestroyShare=this.wndDestroyShare||new _s9.DestroyShare({listeners:{destroy:function(e,f){_s9.GATrackEvent("Browse","DestroyShare","1 items");this.fireEvent("delete",f)},scope:this}});this.wndDestroyShare.show();this.wndDestroyShare.load(this.contextMenuNode)}else if(this.contextMenuNode.type=="folder")Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),
msg:_TR("WARN_DELETION_FOLDER"),fn:function(e){if(e=="yes"){_s9.GATrackEvent("Browse","DeleteFiles","1 items");this.fireEvent("delete",this.contextMenuNode)}},scope:this});else this.contextMenuNode.type=="snapshot"&&Ext.UI.MessageBox.confirm({width:450,title:_TR("REMOVE_SNAP"),msg:_TR("REMOVE_SNAP_QUESTION"),fn:function(e){e=="yes"&&this.fireEvent("delete",this.contextMenuNode)},scope:this});break;case "rename":this.wndRename=this.wndRename||new _s9.Rename({listeners:{rename:function(e,
f,g){this.contextMenuNode.fsprovider.renameFSItem(this.contextMenuNode,g,this.contextMenuNode.parent);_s9.GATrackEvent("Browse","RenameFSItem",this.contextMenuNode.type)},scope:this}});this.wndRename.show();this.wndRename.loadItems(this.contextMenuNode,this.contextMenuNode.parent.populatedFSItems||{folders:[],files:[]});break;case "download":this.mngrDownload=this.mngrDownload||CComSingleton(_s9.DownloadManager);this.mngrDownload.startDownload(this.contextMenuNode);_s9.GATrackEvent("Browse",
"DownloadFiles","1 items");break;case "cut":_s9.recordsClipboard=[{data:this.contextMenuNode}];_s9.recordsClipboard.device=this.contextMenuNode.device;_s9.recordsClipboard.share=this.contextMenuNode.share;_s9.recordsClipboard.path=this.contextMenuNode.parent.path;_s9.recordsClipboard.method="cut";break;case "copy":_s9.recordsClipboard=[{data:this.contextMenuNode}];_s9.recordsClipboard.device=this.contextMenuNode.device;_s9.recordsClipboard.share=
this.contextMenuNode.share;_s9.recordsClipboard.path=this.contextMenuNode.parent.path;_s9.recordsClipboard.method="copy";break;case "paste":var c=[];_.each(_s9.recordsClipboard,function(e){c.push(e.data)},this);if(_s9.recordsClipboard.method=="cut"&&_s9.recordsClipboard.path!=this.contextMenuNode.path){this.fireEvent("nodemove",c,_s9.recordsClipboard.path,this.contextMenuNode.path,this.contextMenuNode.fsprovider);_s9.recordsClipboard=undefined}else _s9.recordsClipboard.method==
"copy"&&this.fireEvent("nodecopy",c,_s9.recordsClipboard.path,this.contextMenuNode.path,this.contextMenuNode.fsprovider);break;case "restore":this.restoreWnd=this.restoreWnd||new _s9.RestoreWindow({listeners:{restoreclick:function(e,f,g){this.fireEvent("restore",f,g||"/",this.contextMenuNode.fsprovider,this.contextMenuNode.snapshot)},scope:this}});var d=this.contextMenuNode;this.restoreWnd.show();this.restoreWnd.load(d.share.getName(),d.parent.pathInSnap+(d.parent.pathInSnap.length&&
d.parent.pathInSnap[d.parent.pathInSnap.length-1]=="/"?"":"/")+d.name,d.parent.pathInSnap,d.name);break;case "recover":this.fireEvent("recover",this,this.contextMenuNode);break;case "rollback":this.wndRoolback=this.wndRoolback||new _s9.RollbackWindow({listeners:{rollbackapply:function(e,f){this.fireEvent("snaprollback",d,f,this.contextMenuNode.fsprovider);_s9.GATrackEvent("Browse","RollbackSnapshot")},scope:this}});this.wndRoolback.show();this.wndRoolback.load(this.contextMenuNode.snapshot);
break;case "snapshot":this.fireEvent("snapshotclick",this,this.contextMenuNode);break;case "settings":this.fireEvent("settingsclick",this,this.contextMenuNode);break;case "link":this.fireEvent("linkclick",this,this.contextMenuNode);break}},refresh:function(){for(var a in this.nodes)this.nodes[a]&&this.nodes[a].expanded&&this.onNodeLoad(this.nodes[a])},populateDevices:function(a){var b=[];_.each(this.devices,function(d){d.fsprovider.un("pending",this.onPending,this);d.fsprovider.un("done",this.onDone,
this);d.fsprovider.un("fsready",this.populateFSItems,this);d.fsprovider.un("snapsready",this.populateSnapshots,this);d.permsMgr.un("pending",this.onPermsPending,this);d.permsMgr.un("done",this.onPermsDone,this)},this);this.devices=a;_.each(a,function(d){d.fsprovider.on("pending",this.onPending,this);d.fsprovider.on("done",this.onDone,this);d.fsprovider.on("fsready",this.populateFSItems,this);d.fsprovider.on("snapsready",this.populateSnapshots,this);d.permsMgr.on("pending",this.onPermsPending,this);
d.permsMgr.on("done",this.onPermsDone,this);b.push({permsMgr:d.permsMgr,fsprovider:d.fsprovider,name:d.name,path:"/",type:"device",expanded:d.expanded||a.length==1,isSelectPathMode:this.isSelectPathMode,rootArgs:this.rootArgs,listeners:{expand:this.onNodeExpand,load:this.onNodeLoad,select:this.onNodeSelect,contextmenu:this.onNodeContextMenu,destroy:this.onNodeDestroy,scope:this}})},this);this.rootNode.updateChilds([]);var c=this.rootNode.updateChilds(b);this.checkDestroyedNodes();this.volNodes={};
_s9.GATrackEvent("Browse","LoadTree",b.length+" devices");_.each(c,function(d){this.nodes[d.fsprovider.device.id+d.path]=d;d.el.child(".x-browse-tree-node-icon-device").addClass(_s10.Utils.getDeviceCls(d.fsprovider.device.model,32));d.fsprovider.device.isFriend&&d.el.child(".x-browse-tree-node-icon-device").addClass("x-rc-access-friend-device-icon")},this);this.afterPopulateDevices()},afterPopulateDevices:function(){this.rootNode&&_.each(this.rootNode.childNodes,function(a){a.fsprovider.updateVolumes({path:"/"});
a.fsprovider.updateShares({path:"/"})},this)},setRoot:function(a){this.rootArgs=a;for(var b in this.nodes)this.nodes[b].seVisibilityModeByRoot&&this.nodes[b].seVisibilityModeByRoot(a)},setSelectPathMode:function(a){this.isSelectPathMode=a;this.removeClass(this.cls+"-select-path-mode");a&&this.addClass(this.cls+"-select-path-mode")},onPending:function(a,b){if(b&&b.path){var c=this.nodes[a.device.id+b.path];c&&c.id&&Ext.fly(c.id)&&c.showProgress();if(b.fsprovider&&b.fsprovider.isVolume(b.path))(c=this.nodes[a.device.id+
b.parentPath])&&c.id&&Ext.fly(c.id)&&c.showProgress()}},onDone:function(a,b){if(b&&b.path){var c=this.nodes[a.device.id+b.path];c&&c.id&&Ext.fly(c.id)&&c.hideProgress();if(b.fsprovider&&b.fsprovider.isVolume(b.path))(c=this.nodes[a.device.id+b.parentPath])&&c.id&&Ext.fly(c.id)&&c.hideProgress()}},onPermsPending:function(a){if(a&&a.device)(a=this.nodes[a.device.id+"/"])&&a.id&&Ext.fly(a.id)&&a.showProgress()},onPermsDone:function(a){if(a&&a.device)(a=this.nodes[a.device.id+"/"])&&a.id&&Ext.fly(a.id)&&
a.hideProgress()},checkDestroyedNodes:function(){for(var a in this.nodes)this.nodes[a].isDestroyed&&delete this.nodes[a]},populateFSItems:function(a,b,c,d,e){var f=this.nodes[a.device.id+b];if(f&&f.id&&Ext.fly(f.id)){f.populatedFSItems={folders:c,files:d};if(!(this.isRecoveryMode&&a.isShare(b))){var g=[],j=a.isVolume(b);_.each(c,function(h){if(!this.isRecoveryMode||!j||a.isShare(h.path)||a.isLun(h.path)||h.type=="home")g.push({fsprovider:a,device:a.device,name:h.name,share:h.share||f.share,lun:h.lun||
f.lun,snapshot:f.snapshot,type:h.type,path:h.path,pathInSnap:h.pathInSnap,pathDownload:h.pathDownload,snapfolder:h.snapfolder,dlnatype:h.dlnatype,iconcls:h.iconcls,readonly:h.readonly,user:h.user,pathInHome:h.pathInHome,pathInHomeFolder:h.pathInHomeFolder,accessed:h.accessed,parentPath:h.parentPath,expanded:h.expanded||this.isRecoveryMode&&h.pathInHome&&h.pathInHome=="/"||this.pathToBrowse&&this.pathToBrowse.deviceid==a.device.id&&(this.pathToBrowse+"/").indexOf(h.path+"/")===0,perms:h.perms,isSelectPathMode:this.isSelectPathMode,
isSingleVolume:b=="/"&&c.length==1,rootArgs:this.rootArgs,listeners:{expand:this.onNodeExpand,load:this.onNodeLoad,select:this.onNodeSelect,contextmenu:this.onNodeContextMenu,shareclick:this.onNodeShareClick,destroy:this.onNodeDestroy,scope:this}})},this);_.each(d,function(h){if(!this.isRecoveryMode||!j||a.isShare(h.path))g.push({hidden:true,fsprovider:a,device:a.device,name:h.name,share:h.share||f.share,snapshot:f.snapshot,type:h.type,path:h.path,pathInSnap:h.pathInSnap,parentPath:h.parentPath})},
this);d=f.updateChilds(g,e.isScroll);_.each(d,function(h){this.nodes[h.fsprovider.device.id+h.path]=h},this);this.checkDestroyedNodes();if(e.path=="/"){this.volNodes[a.device.id]=[];_.each(d,function(h){this.volNodes[a.device.id].push(h)},this)}if(this.argsToSelect&&this.argsToSelect.fsprovider&&this.argsToSelect.fsprovider.device.id==a.device.id&&this.argsToSelect.path&&this.argsToSelect.path.indexOf(b)==0){e=this.select(this.argsToSelect);this.argsToSelect||this.fireEvent("updatechain",e)}}}},
populateSnapshots:function(a,b,c,d){var e=this.nodes[a.device.id+b];if(e&&e.id&&Ext.fly(e.id))if(this.isRecoveryMode&&(a.isShare(b)||d.user)){var f=[];_.each(c,function(g){name=g.snapshot.getType()=="2"?g.name:"";name+=(name?" (":"")+g.dateLabel+(name?")":"");f.push({fsprovider:a,device:a.device,name:name,share:g.share,user:g.user,snapshot:g.snapshot,type:g.type,path:g.path,pathInSnap:g.pathInSnap,isSelectPathMode:this.isSelectPathMode,rootArgs:this.rootArgs,listeners:{expand:this.onNodeExpand,
load:this.onNodeLoad,select:this.onNodeSelect,contextmenu:this.onNodeContextMenu,destroy:this.onNodeDestroy,scope:this}})},this);c=e.updateChilds(f);_.each(c,function(g){this.nodes[g.fsprovider.device.id+g.path]=g},this);this.checkDestroyedNodes();if(this.argsToSelect&&this.argsToSelect.fsprovider&&this.argsToSelect.fsprovider.device.id==a.device.id&&this.argsToSelect.path&&this.argsToSelect.path.indexOf(b)==0){b=this.select(this.argsToSelect);this.argsToSelect||this.fireEvent("updatechain",b)}}}});
_._2("_s9");
_s9.TreeNode=_._1(Ext.BoxComponent,{cls:"x-browse-tree-node",constructor:function(){_s9.TreeNode.superclass.constructor.apply(this,arguments);this.updatesCount=0;this.childNodes=[]},afterRender:function(){_s9.TreeNode.superclass.afterRender.apply(this,arguments);this.el.update('<div class="'+this.cls+'-expandrow"><div id="'+(this.bExpand=Ext.id())+'" class="'+this.cls+'-expandcell"></div><div id="'+(this.bSelect=Ext.id())+'" class="'+this.cls+'-bselect">'+this.getHtml()+
'</div></div><div id="'+(this.content=Ext.id())+'" class="'+this.cls+'-childs"></div>');this.content=Ext.get(this.content);this.content.setDisplayed(false);if(this.type=="root")this.addClass(this.cls+"-root");else this.type=="device"&&this.addClass(this.cls+"-device");this.bExpand=new Ext.UI.RoundButton({cls:this.cls+"-bexpand",renderTo:this.bExpand,listeners:{click:function(){if(this.perms!="Disabled")this.expanded?this.collapse():this.expand()},scope:this}});this.bSelect=Ext.get(this.bSelect);this.bSelect.on("click",
function(a){if(this.perms!="Disabled"){var b=Ext.get(a.target);if(b&&b.hasClass(this.cls+"-name-menu")||b.parent("."+this.cls+"-name-menu"))this.fireEvent("contextmenu",this);else if(b&&b.hasClass(this.cls+"-name-invite")||b.parent("."+this.cls+"-name-invite")){this.fireEvent("select",this);this.fireEvent("shareclick",this)}else if(b.hasClass(this.cls+"-name-adminpage")){a.stopEvent();this.fsprovider.device.adminPageBtn.onAdvancedClick()}else{this.fireEvent("select",this);if((this.type=="root"||this.type==
"device")&&!this.expanded)this.expand()}}else this.fireEvent("contextmenu",this)},this);this.bSelect.on("contextmenu",function(a){a.stopEvent();this.fireEvent("contextmenu",this)},this);this.bSelect.on("dragstart",this.onDragStart,this);this.bSelect.on("dragend",_s9.DD.onDragEnd);this.bSelect.on("dragover",this.onDragOver,this);this.bSelect.on("dragexit",this.onDragExit,this);this.bSelect.on("dragleave",this.onDragExit,this);if(this.expanded){this.bExpand.addClass(this.cls+"-bexpand-expanded");
this.content.setDisplayed(true);this.expanded=true;this.fireEvent.defer(100,this,["expand",this])}},getMenuIconEl:function(){return this.bSelect.child("."+this.cls+"-name-menu")||this.bSelect},onDragStart:function(a){var b=[{data:this}];b.path=this.parent.path;b.device=this.device;b.share=this.share;_s9.DD.onDragStart(a,b,[this.el.dom])},onDragOver:function(){if(!this.isSelectPathMode&&this.perms!="Disabled"&&!this.expanded&&!this.dragOverProcId){var a=this;this.dragOverProcId=setTimeout(function(){a.expand()},
2E3)}},onDragExit:function(){clearTimeout(this.dragOverProcId);this.dragOverProcId=undefined},getHtml:function(){var a=this.fsprovider?this.fsprovider.device:undefined,b=a?a.spRCDevice:undefined;a=a?a.isFriend:false;b=b&&b.isNAS()===true;return'<div class="'+this.cls+'-bselect-content " '+(!this.snapshot&&!this.readonly&&(this.type=="share"||this.type=="folder")?'data-path="'+_s9.MakeQuoted(this.path)+'" data-device-id="'+this.fsprovider.device.id+'" ':"")+'><div class="'+this.cls+"-icon "+
this.cls+"-icon-"+this.type+(this.filetype?" "+this.cls+"-icon-"+this.filetype:"")+(this.dlnatype?" "+this.cls+"-icon-dlna-"+this.dlnatype:"")+(this.iconcls?" "+this.cls+"-icon-"+this.iconcls:"")+(this.pathInHomeFolder=="/"?" "+this.cls+"-icon-home":"")+(this.type=="share"&&!this.accessed?" "+this.cls+"-icon-notaccessed ":"")+(this.type=="share"&&(this.perms=="ReadOnly"||this.readonly)?" "+this.cls+"-icon-perms-ro ":"")+'"></div><div class="'+this.cls+'-name" title="'+_s9.MakeQuoted(this.name)+
'">'+_s9.MakeQuoted(this.name)+(this.type=="share"&&_s9.isRCApp&&!a&&b?'<div class="'+this.cls+'-name-invite" title="'+_TR("BROWSE_SHARE")+'"></div>':"")+'<div class="'+this.cls+'-name-menu" title="'+_TR("BROWSE_BTN_OPTIONS")+'"><div class="'+this.cls+'-name-menu-arrow"></div></div>'+(_s9.isRCApp&&this.type=="device"&&!(this.fsprovider&&this.fsprovider.device&&(!this.fsprovider.device.isOnline||this.fsprovider.device.isFriend))?'<div class="'+this.cls+'-name-adminpage">'+_TR("ADMIN_PAGE")+
"</div>":"")+"</div></div>"},applyProperties:function(a){a.expanded=this.expanded;_.apply(this,a);this.bSelect.update(this.getHtml());this.bSelect.set({draggable:!this.isSelectPathMode&&this.share&&!this.snapshot&&this.type=="folder"});_s9.isRCApp&&this.type=="device"&&!this.fsprovider.device.isOnline&&this.bSelect.addClass(this.cls+"-device-offline");this.rootArgs&&this.seVisibilityModeByRoot(this.rootArgs);this.isSingleVolume?this.addClass(this.cls+"-singlevol"):this.removeClass(this.cls+
"-singlevol");this.bExpand.setVisible(a.type!="backup_target")},destroy:function(){if(this.childNodes)for(var a=0;a<this.childNodes.length;++a)this.childNodes[a].destroy();_s9.TreeNode.superclass.destroy.apply(this,arguments)},updateChilds:function(a,b){var c=[];_.each(this.childNodes,function(f){f.isPresent=!!b},this);_.each(a,function(f,g){if(this.childNodes[f.fsprovider.device.id+f.path]){this.childNodes[f.fsprovider.device.id+f.path].isPresent=true;this.childNodes[f.fsprovider.device.id+
f.path].applyProperties(f)}else{f.parent=this;c.push({node:new _s9.TreeNode(f),position:g})}},this);for(a=0;a<this.childNodes.length;){var d=this.childNodes[a];if(d.isPresent)++a;else{this.childNodes=this.childNodes.remove(d);this.childNodes[d.fsprovider.device.id+d.path]=undefined;d.destroy()}}var e=this.childNodes.length;_.each(c,function(f){f.node.render(this.content,f.position+e);f.node.applyProperties(f);this.childNodes.push(f.node);this.childNodes[f.node.fsprovider.device.id+f.node.path]=
f.node},this);return this.childNodes},seVisibilityModeByRoot:function(a){a=a&&a.path?a.path:"";this.el.setDisplayed(!a||a=="/");this.bExpand.el.parent("."+this.cls+"-expandrow").setDisplayed(true);if(a==this.path)this.el.setDisplayed(true);else if(a.indexOf(this.path)===0){this.el.setDisplayed(true);this.bExpand.el.parent("."+this.cls+"-expandrow").setDisplayed(false)}else this.path.indexOf(a)===0&&this.el.setDisplayed(true)},expand:function(){this.bExpand.addClass(this.cls+"-bexpand-expanded");this.content.setDisplayed(true);
this.expanded=true;this.fireEvent("expand",this);for(var a=0,b=this.parent;b;){++a;b=b.parent}_s9.GATrackEvent("Browse","ExpandTreeNode",a+" level")},collapse:function(){this.bExpand.removeClass(this.cls+"-bexpand-expanded");this.content.setDisplayed(false);this.expanded=false;for(var a=0,b=this.parent;b;){++a;b=b.parent}_s9.GATrackEvent("Browse","CollapseTreeNode",a+" level")},select:function(){this.bSelect.addClass(this.cls+"-icon-selected")},deselect:function(){this.bSelect.removeClass(this.cls+
"-icon-selected")},showProgress:function(){this.updatesCount||this.bExpand.addClass(this.cls+"-bexpand-progress");++this.updatesCount},hideProgress:function(){this.updatesCount>0&&--this.updatesCount;this.updatesCount||this.bExpand.removeClass(this.cls+"-bexpand-progress")}});_._2("_s9");
_s9.TreeMenu=_._1(_9,Ext.UI.Menu,{cls:"x-browse-menu",constructor:function(){var a=Ext.menu.Item;this.itemBrowse=new a({text:_TR("BROWSE"),icon:false,ctCls:"x-browse-menu-icon-browse",commandName:"browse"});this.itemAdminPage=new a({text:_TR("ADMIN_PAGE"),icon:false,ctCls:"x-browse-menu-icon-adminpage",commandName:"adminpage"});this.itemLeaveDevice=new a({text:_TR("REMOVE_DEVICE"),icon:false,ctCls:"x-browse-menu-icon-leavedevice",commandName:"leavedevice"});this.itemRename=
new a({text:_TR("RENAME"),icon:false,ctCls:"x-browse-menu-icon-rename",commandName:"rename"});this.itemDownload=new a({text:_TR("DOWNLOAD"),icon:false,ctCls:"x-browse-menu-icon-download",commandName:"download"});this.itemCreateLink=new a({text:_TR("LINKS_WEB_LINK"),icon:false,ctCls:"x-browse-menu-icon-link",commandName:"link"});this.itemRollback=new a({text:_TR("ROLLBACK"),icon:false,ctCls:"x-browse-menu-icon-rollback",commandName:"rollback"});this.itemRestore=new a({text:_TR("RESTORE"),icon:false,
ctCls:"x-browse-menu-icon-rollback",commandName:"restore"});this.itemRecover=new a({text:_TR("RECOVER"),icon:false,ctCls:"x-browse-menu-icon-rollback",commandName:"recover"});this.itemSnapshot=new a({text:_TR("SNAPSHOT"),ctCls:"x-browse-menu-icon-snapshot",commandName:"snapshot"});this.itemCut=new a({text:_TR("CUT"),icon:false,ctCls:"x-browse-menu-icon-cut",commandName:"cut"});this.itemCopy=new a({text:_TR("COPY"),icon:false,ctCls:"x-browse-menu-icon-copy",commandName:"copy"});this.itemPaste=new a({text:_TR("PASTE"),
icon:false,ctCls:"x-browse-menu-icon-paste",commandName:"paste"});this.itemSettings=new a({text:_TR("SETTINGS"),icon:false,ctCls:"x-browse-menu-icon-settings",commandName:"settings"});this.itemPermissions=new a({text:_TR("BROWSE_SHARE"),icon:false,ctCls:"x-browse-menu-icon-invite",commandName:"settings"});this.itemDelete=new a({text:_TR("DELETE"),icon:false,ctCls:"x-browse-menu-icon-delete",commandName:"delete"});this.items=[this.itemBrowse,this.itemAdminPage,this.itemLeaveDevice,this.itemRename,
this.itemDownload,this.itemCreateLink,this.itemRollback,this.itemRestore,this.itemRecover,this.itemSnapshot,this.itemCut,this.itemCopy,this.itemPaste,this.itemSettings,this.itemPermissions,this.itemDelete];_s9.TreeMenu.superclass.constructor.apply(this,arguments)},setMode:function(a){var b=_s9.recordsClipboard,c=a.fsprovider.device.spRCDeviceCapabilities,d=a.fsprovider.getVolumeByPath(a.path);d=d&&d.getEjectable();var e=a.fsprovider.device.isFriend,f=!a.fsprovider.device.spRCDevice||
a.fsprovider.device.isOnline,g=_s9.isRCApp&&a.type=="folder"&&!a.snapshot&&a.fsprovider.device&&a.fsprovider.device.permsMgr&&a.fsprovider.device.permsMgr.isLinkCreationAvailable();this.itemBrowse.setVisible(a.perms!="Disabled"&&f);this.itemAdminPage.setVisible(a.type=="device"&&_s9.isRCApp&&!e&&f);this.itemLeaveDevice.setVisible(a.type=="device"&&_s9.isRCApp);this.itemRename.setVisible(a.perms=="ReadWrite"&&!a.readonly&&!a.snapshot&&a.type=="folder"&&a.pathInHomeFolder!="/"&&
a.pathInHome!=="/admin");this.itemDownload.setVisible(a.type=="folder");this.itemCreateLink.setVisible(g);this.itemRestore.setVisible(a.perms=="ReadWrite"&&!!a.snapshot&&a.type=="folder");this.itemRecover.setVisible(a.perms=="ReadWrite"&&!e&&!d&&(a.share||a.pathInHomeFolder)&&!a.snapshot&&!a.snapfolder&&(!c||c.getSnapshots()===true));this.itemRollback.setVisible(a.perms=="ReadWrite"&&!!a.snapshot&&a.type=="snapshot"&&(!a.share||!(a.share.isReadyDRShare&&a.share.isReadyDRShare())));this.itemSnapshot.setVisible(a.type==
"share"&&!e&&!d&&a.share&&!(a.share.isReadyDRShare&&a.share.isReadyDRShare())&&(!c||c.getSnapshots()===true));this.itemCut.setVisible(a.perms=="ReadWrite"&&!a.readonly&&!a.snapshot&&a.type=="folder"&&a.pathInHomeFolder!="/"&&a.pathInHome!=="/admin");this.itemCopy.setVisible((a.perms=="ReadWrite"||a.perms=="ReadOnly")&&!a.snapshot&&a.type=="folder"&&a.pathInHomeFolder!="/"&&a.pathInHome!=="/admin");this.itemPaste.setVisible(a.perms=="ReadWrite"&&!a.readonly&&!a.snapshot&&(a.type=="folder"||a.type==
"share")&&!!b&&!!b.length&&b.device.id==a.device.id);this.itemSettings.setVisible(a.type=="share"&&!_s9.isRCApp);this.itemPermissions.setVisible(a.type=="share"&&!e&&c&&c.getSharing());this.itemDelete.setVisible(a.perms=="ReadWrite"&&!a.readonly&&!a.snapshot&&(a.type=="folder"||a.type=="snapshot")&&a.pathInHomeFolder!="/"&&a.pathInHome!=="/admin"||a.type=="share"&&!e&&a.parent&&a.parent.type!="ejvol"&&(!c||c.getShareDeletion()));this.itemRecover.setDisabled(a&&a.share&&a.share.getFirstSnapshotCreationTime&&
!a.share.getFirstSnapshotCreationTime());var j=0;_.each(this.items.items,function(h){h.hidden||++j},this);return j}});_._2("_s9");
_s9.Preview=_._1(_9,Ext.UI.Window,{layout:"fit",cls:"x-rc-access-previewwnd",dvCls:"x-rc-access-fsiconsdv",resizable:false,modal:true,title:"",constructor:function(){this.dv=new Ext.UI.ChainDataView({cls:this.dvCls,itemSelector:"div.x-rc-access-fsiconsdv-fsitem",selectedClass:"x-rc-access-fsiconsdv-fsitem-selected",singleSelect:true,keyHandlers:false,store:new Ext.data.Store({autoDestroy:true,reader:new Ext.data.JsonReader({idProperty:"name",fields:["id","fsprovider","name",
"type","filetype","typeLabel","size","sizeLabel","date","dateLabel","dlnatype","share","snapshot","snapfolder","path","parentPath","pathInSnap","iconcls","accessed","perms","readonly","user","pathInHome","pathInHomeFolder","device","model","serial","snapName","snapType","snapId","isFSVersion","versionPath","backupTarget"]})}),tpl:['<tpl for=".">','<div class="'+this.dvCls+'-fsitem">','<div class="'+this.dvCls+"-fsitem-icon "+this.dvCls+"-{type}-icon "+this.dvCls+'-{filetype}-icon"><img />',"</div>",
'<div class="'+this.dvCls+'-fsitem-name x-ellipsis" title="{[_s9.MakeQuoted(values.name)]}">{[_s9.MakeQuoted(values.name)]}</div>','<div class="'+this.dvCls+'-fsitem-size x-ellipsis" title="{sizeLabel}">{sizeLabel}</div>',"</div>","</tpl>"],listeners:{selectionchange:function(){var a=this.dv.getSelectedRecords();a&&a[0]&&a[0].data&&this.load(a[0].data)},scope:this}});this.items=[{xtype:"container",layout:"border",items:[this.imgCt=new Ext.BoxComponent({region:"center",style:"text-align: center; overflow: hidden;",
html:'<img id="'+(this.imgId=Ext.id())+'" style="width: 100%;" /> <video id="'+(this.videoId=Ext.id())+'" style="width: 100%; max-height: 100%;" controls="true" />'}),this.dvCt=new Ext.Container({region:"east",width:155,items:[this.dv]})]}];_s9.Preview.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.Preview.superclass.afterRender.apply(this,arguments);this.img=Ext.get(this.imgId);this.img.setDisplayed(false);this.video=Ext.get(this.videoId);this.video.setDisplayed(false);
this.loadMask=new Ext.UI.LoadMask(this.imgCt.el,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",background:false,frame:false,delay:0});this.bClose=new Ext.UI.RoundButton({cls:this.cls+"-close",renderTo:this.el,listeners:{click:function(){this.hide()},scope:this}});this.scroller=new Ext.UI.Scroller({dom:this.dvCt.el.dom,type:"vertical"});this.scroller.reg();this.scroller.on("scroll",this.setTimeoutCheckVisibleItems,this)},onShow:function(){_s9.Preview.superclass.onShow.apply(this,arguments);
this.calcSize();Ext.EventManager.addListener(window,"resize",this.onWindowResize,this);this.doLayout(false,false);this.center();_s9.GATrackEvent("Browse","OpenPreviewWindow")},onHide:function(){_s9.Preview.superclass.onHide.apply(this,arguments);this.img.set({src:""});this.img.setDisplayed(false);try{this.video.set({src:""})}catch(a){}this.video.setDisplayed(false);Ext.EventManager.removeListener(window,"resize",this.onWindowResize,this)},onWindowResize:function(){this.calcSize();if(this.fsItem&&
this.fsItem.filetype!="video"){this.procIdResize&&clearTimeout(this.procIdResize);var a=this;this.img.set({src:""});this.img.setDisplayed(false);this.loadMask.show();this.procIdResize=setTimeout(function(){a.load(a.fsItem);a.setTimeoutCheckVisibleItems()},300)}},calcSize:function(){var a=Ext.getBody().getSize();a.width*=0.8;a.height*=0.8;this.setSize(a);this.center()},putDevice:function(a){this.previewprovider&&this.previewprovider.un("previewready",this.populateItemPreview,this);if(this.previewproviderWnd){this.previewproviderWnd.un("previewready",
this.populatePreview,this);this.previewproviderWnd.un("previewfail",this.populatePreview,this)}this.device=a;if(!a.previewprovider108x81){a.previewprovider108x81=new _s9.PreviewProvider({widthPreview:108,heightPreview:81});a.previewprovider108x81.putDevice(a)}if(!a.previewproviderWnd){a.previewproviderWnd=new _s9.PreviewProvider({lpPreview:"browse-update-previewWnd",widthPreview:640,heightPreview:480});a.previewproviderWnd.putDevice(a)}this.previewprovider=a.previewprovider108x81;this.previewproviderWnd=
a.previewproviderWnd;this.previewprovider&&this.previewprovider.on("previewready",this.populateItemPreview,this);if(this.previewproviderWnd){this.previewproviderWnd.on("previewready",this.populatePreview,this);this.previewproviderWnd.on("previewfail",this.populatePreview,this)}},load:function(a,b){this.fsItem=a;this.img.set({src:""});this.img.setDisplayed(false);try{this.video.set({src:""})}catch(c){}this.video.setDisplayed(false);this.loadMask.show();if(a.filetype=="video"){try{this.video.set({src:document.fsshare+
a.path})}catch(d){}this.video.setDisplayed(true);this.loadMask.hide()}else{var e=this.imgCt.getSize();this.previewproviderWnd&&this.previewproviderWnd.updateFilePreview(a,e.width,e.height)}if(b){this.entities=[];_.each(b.files,function(f){_s9.PreviewProvider.SupportedTypes[f.filetype]&&this.entities.push(f)},this);this.dv.store.removeAll();this.dv.store.loadData(this.entities);this.updatedPreviews={};this.checkVisibleItems(this.entities)}a=this.dv.store.find("name",a.name);this.dv.select(a,
false,true);Ext.get(this.dv.getNode(a)).scrollIntoView(this.dvCt.el);this.checkVisibleItems()},setTimeoutCheckVisibleItems:function(){var a=this;a.procIdCheckVisibleItems&&clearTimeout(a.procIdCheckVisibleItems);a.procIdCheckVisibleItems=setTimeout(function(){a.checkVisibleItems()},300)},checkVisibleItems:function(a){a=this.itemsToCheckVisible=a||this.itemsToCheckVisible||[];var b=this.dvCt.el,c=Ext.get(this.dv.getNode(0)),d=[];if(b&&c){var e=c.getHeight();c=c.getMargins();e+=c.top+c.bottom;c=Math.floor(b.dom.scrollTop/
e);b=Math.ceil((b.dom.scrollTop+b.dom.clientHeight)/e);for(e=c;e<b;++e)a[e]&&!this.updatedPreviews[a[e].path]&&d.push(a[e])}this.previewprovider&&this.previewprovider.updatePreviews(d)},populatePreview:function(a,b){if(a.path==this.fsItem.path){this.updatedPreviews[a.path]=b;this.loadMask.hide();if(b){this.img.setDisplayed(true);this.img.set({src:"data:image/jpg;base64,"+b})}}},populateItemPreview:function(a,b){if(this.fsItem.parentPath==a.parentPath){a=this.dv.store.find("name",a.name);if(a>-1){a=
Ext.get(this.dv.getNode(a));a.addClass(this.dvCls+"-fsitem-preview");a.child("img").set({src:"data:image/jpg;base64,"+b})}}}});_._2("_s9");
_s9.RestoreWindow=_._1(Ext.UI.Window,{modal:true,width:400,resizable:false,cls:"x-rc-access-restorewnd",constructor:function(){_s9.RestoreWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){this.title=_TR("RECOVER");this.html='<table cellpadding="0" cellspacing="0"><tr><td colspan="2"><div id="'+(this.lRestoreId=Ext.id())+'" class="x-controls-prompt-icon-MESSAGE '+this.cls+'-lrestore"></div></td></tr><tr><td class="x-sh-text '+this.cls+'-label-dest" align="right">'+
_TR("DESTINATION")+':</td><td id="'+(this.tfDestId=Ext.id())+'"></td></tr></table>';var a=new Ext.UI.Button({text:_TR("OK"),width:100,acceptbtn:true});a.on("click",this.onOkClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);this.fbar=["->",a,b];_s9.RestoreWindow.superclass.initComponent.apply(this,arguments)},afterRender:function(){_s9.RestoreWindow.superclass.afterRender.apply(this,arguments);this.lRestore=Ext.get(this.lRestoreId);
this.tfDest=new Ext.UI.TextField({width:280});this.tfDest.render(this.tfDestId)},load:function(a,b,c,d){this.path=b;this.name=d;this.lRestore.update(String.format(_TR("WARN_RESTORE"),a,d));this.tfDest.setValue(c);this.syncShadow()},onOkClick:function(){if(this.validate()){this.fireEvent("restoreclick",this,this.path,this.tfDest.getValue());this.hide()}},validate:function(){this.tfDest.getValue();return true}});_._2("_s9");
_s9.RollbackWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,autoCreate:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",constructor:function(a){this.title=_TR("ROLLBACK_SNAP");this.textToEnter="DELETE DATA";this.html='<table cellspacing="0"><tr><td valign="top" style="padding-top: 5px;"><div class="x-controls-prompt-icon-MESSAGE"></div></td><td><table cellspacing="0" style="margin: 0 auto;"><tr><td style="padding: 3px 0 10px;text-align: justify;">'+
_TR("ROLLBACK_SNAP_QUESTION")+'</td></tr><tr><td id="'+(this.tfTextId=Ext.id())+'"></td></tr></table></td></tr></table>';this.bDestroy=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("ROLLBACK"),handler:function(){if(this.validate()){this.fireEvent("rollbackapply",this,this.snap);this.hide()}},scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bDestroy,this.bCancel];
_s9.RollbackWindow.superclass.constructor.call(this,a);this.tfText=new Ext.UI.TextField({width:292,value:""});this.on("afterrender",function(){this.tfText.render(this.tfTextId)},this)},validate:function(){var a=this.tfText.getValue();if(a&&a==this.textToEnter)return true;else{this.tfText.focus();return false}},load:function(a){this.snap=a;this.tfText.setValue("");this.tfText.focus(false,true);this.syncShadow()}});_._2("_s9");
_s9.Rename=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,cls:"x-browse-renamewnd",constructor:function(){_s9.Rename.superclass.constructor.apply(this,arguments)},initComponent:function(){this.title=_TR("RENAME");this.html='<table cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+"-label "+this.cls+'-label-name"><nobr>'+_TR("NAME")+':</nobr></td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>';this.fbar=[{xtype:"uibutton",text:_TR("RENAME"),width:100,
acceptbtn:true,listeners:{click:this.onApplyClick,scope:this}},{xtype:"uibutton",text:_TR("CANCEL"),width:100,cancelbtn:true,listeners:{click:function(){this.hide()},scope:this}}];_s9.Rename.superclass.initComponent.apply(this,arguments)},loadItems:function(a,b){this.item=a;this.fsitems=b;this.removeClass(this.cls+"-err-name");this.tfName.setValue(a.name);this.tfName.focus(false,true)},afterRender:function(){_s9.Rename.superclass.afterRender.apply(this,arguments);this.tfName=new Ext.UI.TextField({width:300,
renderTo:this.tfNameId})},onApplyClick:function(){if(this.validate()){this.fireEvent("rename",this,this.item,this.tfName.getValue());this.hide()}},validate:function(){var a=false;this.removeClass(this.cls+"-err-name");var b=this.tfName.getValue();if(!_.isValidFolderName(b)){this.addClass(this.cls+"-err-name");this.tfName.focus();a=true}if(!this.isUniqName(b)){this.addClass(this.cls+"-err-name");this.tfName.focus();a=true}return!a},isUniqName:function(a){var b,c;a=a.toUpperCase();if(this.item.name.toUpperCase()!=
a){for(c=0;c<this.fsitems.folders.length;++c){b=this.fsitems.folders[c];if(b.name.toUpperCase()==a)return false}for(c=0;c<this.fsitems.files.length;++c){b=this.fsitems.files[c];if(b.name.toUpperCase()==a)return false}}return true}});_._2("_s9");
_s9.DestroyShare=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,textToEnter:"DESTROY",constructor:function(){this.title=_TR("CONFIRM_DELETION");this.html='<table cellspacing="0"><tr><td valign="top" style="padding-top: 5px;"><div class="x-controls-prompt-icon-MESSAGE"></div></td><td><div style="padding-bottom: 5px; text-align: justify;">'+String.format(_TR("WARN_DELETION_SHARE"),this.textToEnter)+'</div><div id="'+(this.tfTextId=Ext.id())+'"></div></td></tr></table>';
this.bDestroy=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("DESTROY"),handler:function(){if(this.validate()){this.fireEvent("destroy",this,this.args);this.hide()}},scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bDestroy,this.bCancel];_s9.DestroyShare.superclass.constructor.apply(this,arguments);this.tfText=new Ext.UI.TextField({width:350,value:""})},
afterRender:function(){_s9.DestroyShare.superclass.afterRender.apply(this,arguments);this.tfText.render(this.tfTextId)},validate:function(){var a=this.tfText.getValue();if(a&&a==this.textToEnter)return true;else{this.tfText.focus();return false}},load:function(a){this.args=a;this.tfText.setValue("");this.tfText.focus(false,true)}});_._2("_s9");
_s9.AddFolder=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,cls:"x-browse-addfolderwnd",constructor:function(){_s9.AddFolder.superclass.constructor.apply(this,arguments)},initComponent:function(){this.title=_TR("NEW_FOLDER");this.html='<table cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+"-label "+this.cls+'-label-name"><nobr>'+_TR("NAME")+':</nobr></td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>';this.fbar=[{xtype:"uibutton",text:_TR("CREATE"),
width:100,acceptbtn:true,listeners:{click:this.onAddClick,scope:this}},{xtype:"uibutton",text:_TR("CANCEL"),width:100,cancelbtn:true,listeners:{click:function(){this.hide()},scope:this}}];_s9.AddFolder.superclass.initComponent.apply(this,arguments)},loadItems:function(a){this.fsitems=a;this.removeClass(this.cls+"-err-name");this.tfName.reset();this.tfName.focus(false,true)},afterRender:function(){_s9.AddFolder.superclass.afterRender.apply(this,arguments);this.tfName=new Ext.UI.TextField({width:300,
renderTo:this.tfNameId})},onAddClick:function(){if(this.validate()){this.fireEvent("addfolder",this,this.tfName.getValue());this.hide();_s9.GATrackEvent("Browse","AddFolder")}},validate:function(){var a=false;this.removeClass(this.cls+"-err-name");var b=this.tfName.getValue();if(!_.isValidFolderName(b)){this.addClass(this.cls+"-err-name");this.tfName.focus();a=true}if(!this.isUniqName(b)){this.addClass(this.cls+"-err-name");this.tfName.focus();a=true}return!a},isUniqName:function(a){var b,
c;a=a.toUpperCase();for(c=0;c<this.fsitems.folders.length;++c){b=this.fsitems.folders[c];if(b.name.toUpperCase()==a)return false}for(c=0;c<this.fsitems.files.length;++c){b=this.fsitems.files[c];if(b.name.toUpperCase()==a)return false}return true}});_._2("_s9");
_s9.AddShare=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,cls:"x-browse-sharewnd",constructor:function(){_s9.AddShare.superclass.constructor.call(this)},initComponent:function(){this.title=_TR("NEW_SHARE");this.html='<table cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+"-label "+this.cls+'-label-name">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-label">'+_TR("DESCRIPTION")+':</td><td id="'+(this.tfDescId=
Ext.id())+'"></td></tr><tr><td style="height:10px" colspan="2"></td></tr><tr><td class="'+this.cls+'-label"></td><td id="'+(this.chbComprId=Ext.id())+'"></td></tr></table>';var a=new Ext.UI.Button({text:_TR("CREATE"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);this.fbar=["->",a,b];_s9.AddShare.superclass.initComponent.apply(this,arguments)},loadArgs:function(a){this.loadedArgs=
a;this.device=a.fsprovider.device;this.spVolume=a.fsprovider.getVolumeByPath(a.path);a=_a(this.device.spDevice,"_i2");this.spSysManager=a.getSystemManager();this.spShareManager=a.getShareManager();this.spSecurityManager=a.getSecurityManager();this.spSysManager.updateCloudOwner("browse-update-cloudowner");this.spShareManager.updateLUNS("browse-update-luns");this.tfName.reset();this.tfDesc.reset();this.chbCompr.reset();this.tfName.focus(true,true);this.removeClass(this.cls+"-err-name")},
afterRender:function(){_s9.AddShare.superclass.afterRender.apply(this,arguments);this.tfName=new Ext.UI.TextField({width:280,renderTo:this.tfNameId});this.tfDesc=new Ext.UI.TextField({width:280,renderTo:this.tfDescId});this.chbCompr=new Ext.UI.Checkbox({boxLabel:_TR("COMPRESSION"),renderTo:this.chbComprId})},onAddClick:function(){if(this.validate()){var a=this.tfName.getValue(),b=this.tfDesc.getValue(),c=this.spVolume.getVolumeId(),d=this.chbCompr.getValue(),e=_a(new _1.share,"_i38");
e.putName(a);e.putComment(b);e.putPath("/"+c+"/"+a);e.putVolumeId(c);e.putCompression(d);a=_a(new _1.sproto("cifs"),"_i3c");a.putAvailable(true);a.putDefaultAccess("ReadWrite");a.putAllowGuestAccess(0);a.putEnableOplocks(0);a.putFolderCreateGroupRights("ReadWrite");a.putFolderCreateEveryOneRights("ReadWrite");a.putFileCreateGroupRights("ReadWrite");a.putFileCreateEveryOneRights("ReadWrite");b=_a(new _1.sproto("afp"),"_i3c");b.putAvailable(true);b.putDefaultAccess("ReadWrite");
c=this.spSecurityManager.getRCUsers();var f;for(i=0;i<c.length;++i)if(d=_a(c[i],"_i2z")){f=_a(new _1.user,"_i2z");f.putId(d.getId());f.putAccess("Disabled");a.appendUser(f);f=_a(new _1.user,"_i2z");f.putId(d.getId());f.putAccess("Disabled");b.appendUser(f)}e.appendProtocol(a);e.appendProtocol(b);this.device.fsprovider.createShare(e,this.loadedArgs);this.hide();_s9.GATrackEvent("Browse","AddShare")}},validate:function(){var a=false;this.tfName.hideValidateTooltip();
this.removeClass(this.cls+"-err-name");var b=this.tfName.getValue();this.tfDesc.getValue();if(!_.Utils.isValidShareName(b)){this.addClass(this.cls+"-err-name");this.tfName.showValidateTooltip(_TR("SHARE_NAME_TOOLTIP"));this.tfName.focus();a=true}if(!this.isUniqName(b)){this.addClass(this.cls+"-err-name");this.tfName.focus();a=true}return!a},isUniqName:function(a){var b,c,d;a=a.toUpperCase();b=this.spShareManager.getShares();for(d=0;d<b.length;++d){c=_a(b[d],"_i38");if(c.getName().toUpperCase()==
a)return false}b=this.spShareManager.getLUNS();for(d=0;d<b.length;++d){c=_a(b[d],"_i1j");if(c.getName().toUpperCase()==a)return false}return true}});_._2("_s9");
_s9.BrowseWindow=_._1(_9,Ext.UI.Window,{constructor:function(){_.apply(this,{title:_TR("SELECT_FOLDER"),width:700,height:560,layout:"fit",modal:true,buttonAlign:"left",fbar:this.getFooter(),items:[this.browse=new _s9({isSelectPathMode:true})]});_s9.BrowseWindow.superclass.constructor.apply(this,arguments);this.on("resize",this.onwresize,this)},afterRender:function(){_s9.Preview.superclass.afterRender.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2"),b=_a(a.getSystemManager().getSysInfo(),"_i43");this.browse.on("loadpath",this.onBrowseLoadPath,this);this.browse.on("selectionchange",this.onBrowseSelection,this);var c=a.getNetworkManager().getHostname();c=c&&c!=_4?c:_TR("DEVICE");b=(b=b&&b!=_4?b.getModel():"")&&b!=_4?b:"";this.device={name:c,id:c,model:b,spDevice:a};this.browse.populateDevices([this.device])},onBrowseLoadPath:function(a,b){var c=[];a=a.loadedArgs.fsprovider.getVolumes();_.each(a,function(d){c.push("/"+
d.getVolumeId())},this);this.device.auditMode&&c.indexOf(b)!=-1?this.filepath.setValue(""):this.filepath.setValue(b)},onBrowseSelection:function(a){(a=a.getSelectedRecords&&a.getSelectedRecords())&&a.length&&this.filepath.setValue(a[0].get("path"))},setBackupMode:function(a,b){if(this.device){this.device.backupmode=a;this.browse.setSelectPathMode(!b);this.browse.setBackupMode(a);this.browse.refresh()}},setAuditMode:function(a){if(this.device){this.device.auditMode=a;this.browse.setAuditMode(a)}},
setCloudMode:function(a){this.device&&this.browse.setCloudMode(a)},getFooter:function(){var a=new Ext.UI.Button({text:_TR("SELECT"),width:100,scope:this,acceptbtn:true});a.on("click",function(){var c=this.browse.center.filesView.getSelectedRecords()[0];c=c?c.data:this.browse.loadedArgs;c.volume=c.fsprovider.getVolumes()[c.path];if(!this.device.auditMode||this.device.auditMode&&this.filepath.getValue()!=""){this.fireEvent("selected",c);this.hide()}},this);var b=new Ext.UI.Button({text:_TR("CANCEL"),
width:100,scope:this,cancelbtn:true,listeners:{click:function(){this.fireEvent("cancel");this.hide()},scope:this}});this.filepath=new Ext.UI.TextField({value:"/",width:300,readOnly:true});return[this.filepath,"->",a,b]},onShow:function(){_s9.Preview.superclass.onShow.apply(this,arguments);this.doLayout(false,false);this.center()},onwresize:function(){this.filepath.rendered&&this.filepath.setWidth(this.fbar.getWidth()-220)}});_._2("_s9");
_s9.AddSnapshot=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,cls:"x-browse-addsnapwnd",constructor:function(){this.title=_TR("NEW_SNAPSHOT");this.html=this.getHtml();this.fbar=this.getFooter();_s9.AddSnapshot.superclass.constructor.apply(this,arguments)},initComponent:function(){this.spSnapshotManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getZFSSnapshotsManager();_s9.AddSnapshot.superclass.initComponent.apply(this,
arguments)},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+"-label "+this.cls+'-label-name">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("CREATE"),width:100,acceptbtn:true,listeners:{click:this.onAddClick,scope:this}}),b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true,listeners:{click:function(){this.hide()},scope:this}});return["->",a,b]},afterRender:function(){_s9.AddSnapshot.superclass.afterRender.apply(this,
arguments);this.tfName=new Ext.UI.TextField({width:310,enableKeyEvents:true,renderTo:this.tfNameId,listeners:{keyup:this.validate,scope:this,bufer:300}})},onAddClick:function(){if(this.validate()){this.loadedArgs.fsprovider.createSnapshot(this.tfName.getValue(),this.loadedArgs);this.hide()}},loadArgs:function(a){this.loadedArgs=a;this.clear()},validate:function(){var a=true;this.removeClass(this.cls+"-err-name");if(_.isValidSnapshotName(this.tfName.getValue()))this.tfName.hideValidateTooltip();
else{this.addClass(this.cls+"-err-name");this.tfName.showValidateTooltip(_TR("SNAPSHOT_NAME_TOOLTIP"));a=false}return a},clear:function(){this.removeClass(this.cls+"-err-name");this.tfName.reset();this.center();this.tfName.focus(false,true)}});_._2("_s9");
_s9.CloneSnapshot=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,cls:"x-browse-addsnapwnd",constructor:function(){this.title=_TR("CLONE_SNAP");this.html=this.getHtml();this.fbar=this.getFooter();_s9.CloneSnapshot.superclass.constructor.apply(this,arguments)},initComponent:function(){this.spSnapshotManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getZFSSnapshotsManager();_s9.CloneSnapshot.superclass.initComponent.apply(this,
arguments)},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+"-label "+this.cls+'-label-name">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>'},getFooter:function(){return["->",new Ext.UI.Button({text:_TR("APPLY"),width:100,acceptbtn:true,listeners:{click:this.onApplyClick,scope:this}}),new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true,listeners:{click:function(){this.hide()},scope:this}})]},afterRender:function(){_s9.CloneSnapshot.superclass.afterRender.apply(this,
arguments);this.tfName=new Ext.UI.TextField({width:310,enableKeyEvents:true,renderTo:this.tfNameId,listeners:{keyup:this.validate,scope:this,bufer:300}})},onApplyClick:function(){if(this.validate()){this.loadedArgs.fsprovider.cloneSnapshot(this.tfName.getValue(),this.loadedArgs.snapshot,this.loadedArgs);this.hide()}},loadArgs:function(a){this.loadedArgs=a;this.clear()},validate:function(){var a=true;this.removeClass(this.cls+"-err-name");if(_.isValidShareName(this.tfName.getValue()))this.tfName.hideValidateTooltip();
else{this.addClass(this.cls+"-err-name");this.tfName.showValidateTooltip(_TR("SHARE_NAME_TOOLTIP"));a=false}return a},clear:function(){this.removeClass(this.cls+"-err-name");this.tfName.reset();this.center();this.tfName.focus(false,true)}});_._2("_s9");
_s9.ActionsBar=_._1(Ext.Container,{cls:"x-browse-actionsbar",constructor:function(){this.html='<div class="'+this.cls+'-ct"><div id="'+(this.cChildsId=Ext.id())+'"></div><div class="x-clear"></div></div>';_s9.ActionsBar.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.ActionsBar.superclass.afterRender.apply(this,arguments);this.scroller=new Ext.UI.Scroller({dom:this.el.dom,type:"vertical"});this.scroller.reg();this.on("resize",this.resizeProgresses,
this)},populateDevices:function(a){_.each(this.devices,function(c){c.fsprovider.un("fsactionstart",this.onFSActionStart,this);c.fsprovider.un("fsactioncomplete",this.onFSActionComplete,this);c.fsprovider.un("fsactionsupdate",this.onFSActionsUpdate,this)},this);this.devices=a;var b=[];_.each(a,function(c){c.fsprovider.on("fsactionstart",this.onFSActionStart,this);c.fsprovider.on("fsactioncomplete",this.onFSActionComplete,this);c.fsprovider.on("fsactionsupdate",this.onFSActionsUpdate,this);b.push(c.id)},
this);this.progresses&&this.progresses.length&&_.each(this.progresses,function(c){c&&c.device&&b.indexOf(c.device.id)==-1&&c.destroy()},this)},showWindow:function(){this.wndUpload=this.wndUpload||new _s9.ActionsBar.UploadWindow({listeners:{upload:function(a,b){this.uploadFiles(b)},uploadform:function(a,b){this.uploadForm(b)},scope:this}});this.wndUpload.show();this.wndUpload.load(this.fsprovider.device,this.path)},prepareUploadFiles:function(){this.show();var a=new _s9.ActionsBar.UploadProgress({listeners:{done:this.onActionPrDone,
abort:this.onActionPrAbort,destroy:this.onActionPrDestroy,scope:this}});a.render(this.cChildsId,-1);this.progresses=this.progresses||[];this.progresses.push(a);this.resizeProgresses();this.checkUploading();return a},uploadFiles:function(a,b,c,d){d=d||this.prepareUploadFiles(c);d.load(c||this.loadedArgs);d.uploadFiles(a,b,c?c.fsprovider:this.fsprovider)},uploadForm:function(a){this.show();var b=new _s9.ActionsBar.UploadProgress({listeners:{done:this.onActionPrDone,abort:this.onActionPrAbort,
destroy:this.onActionPrDestroy,scope:this}});b.render(this.cChildsId,-1);b.load(this.loadedArgs);b.uploadForm(a);this.progresses=this.progresses||[];this.progresses.push(b);this.resizeProgresses();this.checkUploading()},onActionPrDone:function(a,b){this.loadedArgs=b;this.loadedArgs.searchPath=b.path;this.fireEvent("done",this,b);this.checkUploading()},onActionPrDestroy:function(a){a.un("done",this.onActionPrDone,this);a.un("abort",this.onActionPrAbort,this);a.un("destroy",this.onActionPrDestroy,this);
a.fsActionId&&delete this.progresses[a.fsActionId];this.progresses.remove(a);if(this.progresses.length)this.setHeight(this.el.child("div").dom.scrollHeight+2);else{this.hide();this.setHeight(0)}this.checkUploading()},onActionPrAbort:function(a,b){this.abortedFSActions=this.abortedFSActions||[];this.abortedFSActions.push(b)},resizeProgresses:function(){if(this.progresses&&this.progresses.length){var a=Ext.get(this.cChildsId).getWidth();if(a/400>this.progresses.length+1)_.each(this.progresses,function(c){c.setWidth(600)},
this);else{var b=Math.floor(a/400);a=Math.floor(a/b-this.progresses[0].el.getMargins("lr"));_.each(this.progresses,function(c){c.setWidth(a)},this)}}this.un("resize",this.resizeProgresses,this);this.setHeight(this.el.child("div").dom.scrollHeight+2);this.on("resize",this.resizeProgresses,this)},load:function(a){this.loadedArgs=a;this.fsprovider=a.fsprovider;this.device=a.device;this.permsMgr=a.permsMgr;this.path=a.path;this.share=a.share},onFSActionStart:function(a,b,c,d,e,f){this.show();this.progresses=
this.progresses||[];if(!this.progresses[b]){var g=new _s9.ActionsBar.FSActionProgress({listeners:{done:this.onActionPrDone,abort:this.onActionPrAbort,destroy:this.onActionPrDestroy,scope:this}});g.render(this.cChildsId,-1);g.load(this.loadedArgs);this.progresses.push(g);this.progresses[b]=g;g.onFSActionStart(a,b,c,d,e,f)}this.resizeProgresses();this.checkUploading()},onFSActionComplete:function(a,b,c,d,e){this.show();this.progresses=this.progresses||[];var f=new _s9.ActionsBar.FSActionProgress({listeners:{done:this.onActionPrDone,
destroy:this.onActionPrDestroy,scope:this}});f.render(this.cChildsId,-1);f.load(this.loadedArgs);this.progresses.push(f);f.onFSActionComplete(a,b,c,d,e);this.resizeProgresses()},onFSActionsUpdate:function(a,b){this.progresses=this.progresses||[];_.each(b,function(c){c=_a(c,"_ix");var d=c.getId();if(!this.abortedFSActions||this.abortedFSActions.indexOf(d)==-1){this.show();if(!this.progresses[d]){var e=new _s9.ActionsBar.FSActionProgress({listeners:{done:this.onActionPrDone,abort:this.onActionPrAbort,
destroy:this.onActionPrDestroy,scope:this}});e.render(this.cChildsId,-1);e.load(this.loadedArgs);this.progresses.push(e);this.progresses[d]=e}this.progresses[d].populateFSAction(c)}this.abortedFSActions&&c.getStatus()=="abort"&&this.abortedFSActions.remove(c.getId())},this);this.resizeProgresses()},checkUploading:function(){var a=false;if(this.progresses&&this.progresses.length)for(var b=0;b<this.progresses.length;++b)if(this.progresses[b].actionType=="upload"&&!this.progresses[b].isFailure){a=true;
break}window.onbeforeunload=a?function(){return"Closing this window will interrupt your file upload."}:null}});_._2("_s9.ActionsBar");
_s9.ActionsBar.UploadWindow=_._1(_9,Ext.UI.Window,{footer:true,resizable:false,width:450,modal:true,closeAction:"hide",updatesCount:0,constructor:function(){this.title=_TR("UPLOAD_FILE");this.keys=[{key:13,fn:this.onUploadClick,scope:this}];_s9.ActionsBar.UploadWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){this.uploadBtn=new Ext.UI.Button({width:100,text:_TR("UPLOAD"),acceptbtn:true});this.uploadBtn.on("click",this.onUploadClick,this);
this.cancelBtn=new Ext.UI.Button({width:100,text:_TR("CANCEL"),cancelbtn:true});this.cancelBtn.on("click",this.onCancelClick,this);this.fbar={items:[this.uploadBtn,this.cancelBtn]};_s9.ActionsBar.UploadWindow.superclass.initComponent.apply(this,arguments)},afterRender:function(a){_s9.ActionsBar.UploadWindow.superclass.afterRender.call(this,a);this.el.addClass("x-rc-access-temporary");this.form=new Ext.form.FormPanel({innerId:Ext.id(),bufferResize:0,frame:false,header:false,border:false,
collapsible:false,fileUpload:true,items:[this.filename=new Ext.UI.TextField({typeAhead:true,readOnly:!_.isiOS,width:276}),this.filenamelbtn=new Ext.BoxComponent({html:'<div id="'+(this.filebrowserfakeId=Ext.id())+'" style="height: 30px;" ></div>'+(_.isiOS?"":'<input type="hidden" name="path" value="" /> '),cls:"x-rd-window-upload-file-button"})],layout:"table",layoutConfig:{tableAttrs:{style:{width:"100%"}},columns:3}});this.form.render(this.body);this.browseBtn=new Ext.UI.Button({width:100,cls:"fl",
text:"Browse",expandToText:true,scope:this});this.browseBtn.render(this.filebrowserfakeId)},onUploadClick:function(){var a=this.form.getForm(),b=Ext.get(this.filebrowserId);if(b){if(b.dom.value){b.dom.files&&b.dom.files.length?this.fireEvent("upload",this,b.dom.files):this.fireEvent("uploadform",this,a);this.hide()}}else this.hide()},onCancelClick:function(){this.hide()},load:function(a,b){this.device=a;this.path=b;this.filename.setValue("");this.filename.focus();this.filebrowser&&this.filebrowser.remove();
this.filebrowser=this.filenamelbtn.el.createChild({tag:"input",multiple:"multiple",type:"file",name:"file",cls:"x-rd-window-upload-file-input",id:this.filebrowserId=Ext.id()});this.filebrowser.on("change",this.updateFieldText,this);this.filebrowser.on("mouseover",function(){this.browseBtn.el.addClass(this.browseBtn.overCls)},this);this.filebrowser.on("mouseout",function(){this.browseBtn.el.removeClass(this.browseBtn.overCls)},this)},updateFieldText:function(){var a=document.getElementById(this.filebrowserId);
if(a)if(a.files&&a.files.length>1){var b="";_.each(a.files,function(d){b+=(b?", ":"")+"'"+d.name+"'"},this);this.filename.setValue(b)}else{var c=(new String(a.value)).lastIndexOf("\\");this.filename.setValue(this.fileNameValue=c!=-1?a.value.substr(c+1,a.value.length):a.value)}}});_._2("_s9.ActionsBar");
_s9.ActionsBar.ActionProgress=_._1(Ext.Container,{cls:"x-browse-actionprogress",width:400,height:50,actionType:"action",constructor:function(){this.html='<div id="'+(this.lDescId=Ext.id())+'" class="x-ellipsis '+this.cls+'-desc"></div><div id="'+(this.lProgressId=Ext.id())+'"></div><div class="'+this.cls+'-bottomrow"><table><tr><td style="width: 30%;"><div id="'+(this.lSizeId=Ext.id())+'" class="'+this.cls+'-size x-ellipsis"></div></td><td><div class="x-ellipsis" style="text-align: right;">'+
_TR("BROWSE_ACTION_ELAPSED")+'</div></td><td style="width: 1%;"><div>: </div></td><td><div id="'+(this.lElapsedId=Ext.id())+'" class="'+this.cls+'-elapsed">0:00:00</div></td><td><div class="x-ellipsis" style="text-align: right;">'+_TR("BROWSE_ACTION_LEFT")+'</div></td><td style="width: 1%;"><div>: </div></td><td><div id="'+(this.lLeftId=Ext.id())+'" class="'+this.cls+'-left">0:00:00</div></td></tr></table></div>';this.cancelConfirmTitle=_TR("BROWSE_ACTION_CANCEL_CONFIRM_TITLE");this.cancelConfirmMsg=
_TR("BROWSE_ACTION_CANCEL_CONFIRM");_s9.ActionsBar.ActionProgress.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.ActionsBar.ActionProgress.superclass.afterRender.apply(this,arguments);this.progressInd=new Ext.BoxComponent({renderTo:this.lProgressId,cls:this.cls+"-progress",width:0});this.lDesc=Ext.get(this.lDescId);this.lElapsed=Ext.get(this.lElapsedId);this.lLeft=Ext.get(this.lLeftId);this.lSize=Ext.get(this.lSizeId);this.bCancel=new Ext.UI.RoundButton({cls:this.cls+
"-cancel",renderTo:this.el,listeners:{click:this.onCancelClick,scope:this}})},load:function(a){this.loadedArgs=a;this.device=a.device;this.fsprovider=a.fsprovider;this.path=a.path},onCancelClick:function(){this.confirmationShown=true;Ext.UI.MessageBox.confirm({title:this.cancelConfirmTitle,msg:this.cancelConfirmMsg,fn:function(a){a=="yes"&&this.onCancel()},scope:this});Ext.UI.MessageBox.getDialog().on("hide",this.onConfirmationHide,this)},onConfirmationHide:function(){this.confirmationShown=false},
onCancel:function(){_s9.GATrackEvent("Browse","AbortFSAction",this.actionType);this.destroy()},destroy:function(){this.confirmationShown&&Ext.UI.MessageBox.hide();_s9.ActionsBar.ActionProgress.superclass.destroy.apply(this,arguments)},showProgress:function(){this.progressInd.setWidth(0);this.progressValue=0;var a=this;clearInterval(this.progressProcId);this.progressProcId=setInterval(function(){a.onShowProgressInterval()},100)},onShowProgressInterval:function(){this.widthInPercents=
1-1/(this.progressValue+1);this.progressInd.setWidth(this.widthInPercents*100+"%");this.progressValue+=0.01},hideProgress:function(){clearInterval(this.progressProcId);var a=this;this.progressProcId=setInterval(function(){a.onHideProgressInterval()},20)},onHideProgressInterval:function(){if(this.widthInPercents!==0&&this.widthInPercents)this.widthInPercents=1;if(this.widthInPercents>=1){this.widthInPercents=1;clearInterval(this.progressProcId);var a=this;setTimeout(function(){a.destroy()},1E3);clearInterval(this.progressProcId)}this.progressInd.setWidth(this.widthInPercents*
100+"%");this.widthInPercents+=0.1;if(this.widthInPercents>1)this.widthInPercents=1}});_._2("_s9.ActionsBar");
_s9.ActionsBar.UploadProgress=_._1(_9,_s9.ActionsBar.ActionProgress,{actionType:"upload",constructor:function(){_s9.ActionsBar.UploadProgress.superclass.constructor.apply(this,arguments);this.cancelConfirmTitle=_TR("BROWSE_ACTION_CANCEL_CONFIRM_TITLE_UPLOAD");this.cancelConfirmMsg=_TR("BROWSE_ACTION_CANCEL_CONFIRM_UPLOAD");this.spRCSessionManager=_a(_7(_1.CLSIDS.RCApplication),"_i2i").getRCSessionManager();_a(this.spRCSessionManager,
"_i1").Advise(this)},uploadFiles:function(a,b,c){var d=this.forms=[],e,f;this.totalLoaded=this.totalFilesCount=this.totalSize=0;this.fileName=undefined;this.path=b=b||this.path;this.pathText="'\\\\"+this.device.name+this.path.replace(/\//g,"\\")+"'";try{_.each(a,function(j){var h,m;try{h=j.size;if(j.lastModifiedDate&&j.lastModifiedDate.valueOf)m=j.lastModifiedDate.valueOf();else if(j.lastModified)m=j.lastModified}catch(k){}if(e&&(e.totalSize>=1E8||e.totalFilesCount>=1E3)){this.totalSize+=
e.totalSize;this.totalFilesCount+=e.totalFilesCount;e=null}if(!e){e=new FormData;d.push(e);e.totalSize=0;e.totalFilesCount=0;e.files=[]}if(j.isEmptyFolder)e.append("emptyfolder",(b||this.path)+"/"+j.path);else{f=(b||this.path)+"/"+(j.relPath||"");e.append("path",f);e.files.push(f+j.name);h===0?e.append("zerofile",j.name):e.append("file",j,j.name);m&&e.append("fileinfo",'lastmodified="'+m+'"');this.fileName=this.fileName||j.name;e.totalSize+=h;++e.totalFilesCount}},this);this.totalSize+=e.totalSize;
this.totalFilesCount+=e.totalFilesCount}catch(g){this.responseFailure();g.number==-2147024362&&Ext.UI.MessageBox.error({title:_TR("BROWSE_UPLOADING_ERROR"),msg:_TR("BROWSE_UPLOADING_ERROR_TOO_LARGE_FILE_4GB")});return}this.fileName=this.totalFilesCount>1||a.length>1?(this.totalFilesCount||a.length)+" "+_TR("BROWSE_UPLOADING_ITEMS"):"'"+this.fileName+"'";a=String.format(_TR("BROWSE_UPLOADING_TEXT"),this.fileName||"",this.pathText);this.lDesc.update(a);this.lDesc.set({title:a});this.cancelConfirmMsg=
String.format(this.cancelConfirmMsg,a);if(this.totalSize!==undefined){this.totalSizeLabel=_s10.Utils.fileSize(this.totalSize,0.01);this.lSize.update(String.format(_TR("BROWSE_UPLOADING_PROGRESS"),0,this.totalSizeLabel));(c=c.getVolumeByPath(b))&&!c.getEjectable()&&1024*c.getAvailable()<this.totalSize&&Ext.UI.MessageBox.info({title:_TR("BROWSE_UPLOADING_SPACE_NOT_AVAIL_TITLE"),msg:String.format(_TR("BROWSE_UPLOADING_SPACE_NOT_AVAIL_VOLUME"),c.getVolumeId())})}this.progressInd.setWidth(0);this.timeStart=
(new Date).getTime();this.checkUploadSequence()},checkUploadSequence:function(){if(this.forms.length){var a=this,b=this.form=this.forms[0],c=this.xhr=new XMLHttpRequest;if(c.withCredentials===undefined)this.showProgress();else c.upload.onprogress=this.throttleProgress(100);c.onreadystatechange=function(){if(this.readyState==4)if(this.status==200){a.totalLoaded+=a.form.totalSize;a.forms.splice(0,1);a.checkUploadSequence()}else a.responseFailure()};if(_s9.isRCApp)if(this.device.spRCDevice.isLocalSessionInitialized()){c.open("POST",
this.device.spRCDevice.generateLocalSessionUrl(document.fsupload));c.send(b)}else{c.isCloudConnection=true;var d=new String("browse-actionbar-init-iosession");d.uploadProgress=this.el.id;d.xhr=c;d.form=b;this.spRCSessionManager.InitUploadSession(d,this.device.spRCDevice.getId(),b.files)}else{c.open("POST",document.fsupload);c.send(b)}}else this.responseSuccess()},uploadForm:function(a,b){if(!_s9.isRCApp){this.form=a;this.bCancel.hide();this.showProgress();this.path=b||this.path;this.pathText=
"\\\\"+this.device.name+this.path.replace(/\//g,"\\");if(a.el.dom&&a.el.dom.path)a.el.dom.path.value=this.path;if(a.el&&a.el.dom&&a.el.dom.file&&a.el.dom.file.value){this.fileName=a.el.dom.file.value;b=(new String(this.fileName)).lastIndexOf("\\");this.fileName=b!=-1?this.fileName.substr(b+1):this.fileName}b=String.format(_TR("BROWSE_UPLOADING_TEXT"),this.fileName||"",this.pathText);this.lDesc.update(b);this.lDesc.set({title:b});a.errorReader=new Ext.data.XmlReader({record:"response"},Ext.data.Record.create([{name:"response",
mapping:"response"}]));a.doAction("submit",{url:document.fsupload,scope:this,success:this.responseSuccess,failure:this.responseFailure})}},throttleProgress:function(a){var b=this.onUploadProgress,c=this,d,e,f;return function(g){e=g;f=true;if(g.lengthComputable&&g.total==g.loaded){clearTimeout(d);b.apply(c,[g])}else d||function(){if(f){b.apply(c,[e]);f=false;d=setTimeout(arguments.callee,a)}else d=null}()}},onUploadProgress:function(a){var b=this.progressInd;if(!this.isFailure&&a.lengthComputable&&
a.total){if(!this.form.totalSize||this.form.totalSize!=a.total){this.totalSize-=this.form.totalSize;this.form.totalSize=a.total;this.totalSize+=this.form.totalSize;this.totalSizeLabel=_s10.Utils.fileSize(this.totalSize,0.01)}a=this.totalLoaded+a.loaded;this.widthInPercents=a/this.totalSize;var c=new Date;var d=c=Math.floor((c.getTime()-this.timeStart)/1E3),e=Math.floor(d/3600);d-=e*3600;var f=Math.floor(d/60);d-=f*60;this.lElapsed.update(e+":"+(f>9?f:"0"+f)+":"+(d>9?d:"0"+d));if(a){d=Math.floor((1-
this.widthInPercents)/this.widthInPercents*c);e=Math.floor(d/3600);d-=e*3600;f=Math.floor(d/60);d-=f*60;this.lLeft.update(e+":"+(f>9?f:"0"+f)+":"+(d>9?d:"0"+d))}b.setWidth(this.widthInPercents*100+"%");if(this.xhr.isCloudConnection&&a>=this.totalSize){this.lSize.update(_TR("BROWSE_UPLOADING_PROGRESS_SINC"));this.showedSyncLabel=true}else this.totalSizeLabel&&this.lSize.update(String.format(_TR("BROWSE_UPLOADING_PROGRESS"),_s10.Utils.fileSize(a,0.01),this.totalSizeLabel))}},showSizeCalculatingLabel:function(a,
b){var c=_TR("BROWSE_UPLOADING_SIZE_CALCULATION");this.lDesc.update(c);this.lDesc.set({title:c});this.lSize.update(a?String.format(_TR("BROWSE_UPLOADING_SIZE_CALCULATION_ITEMS"),a)+" "+_s10.Utils.fileSize(b):"")},onCancelClick:function(){this.isFailure||!this.xhr&&!this.transId?_s9.ActionsBar.UploadProgress.superclass.onCancel.apply(this,[]):_s9.ActionsBar.UploadProgress.superclass.onCancelClick.apply(this,arguments)},onCancel:function(){this.xhr&&this.xhr.abort();this.transId&&
Ext.Ajax.abort(this.transId);this.forms=[];_s9.ActionsBar.UploadProgress.superclass.onCancel.apply(this,arguments)},onShowProgressInterval:function(){_s9.ActionsBar.UploadProgress.superclass.onShowProgressInterval.apply(this,arguments);this.totalSizeLabel&&this.lSize.update(String.format(_TR("BROWSE_UPLOADING_PROGRESS"),_s10.Utils.fileSize(this.totalSize*this.widthInPercents,0.01),this.totalSizeLabel))},onHideProgressInterval:function(){_s9.ActionsBar.UploadProgress.superclass.onHideProgressInterval.apply(this,
arguments);if(this.widthInPercents>=1&&!this.isFailure){var a=String.format(_TR("BROWSE_UPLOADED_TEXT"),this.fileName||"",this.pathText);this.lDesc.update(a);this.lDesc.set({title:a})}!this.showedSyncLabel&&this.totalSizeLabel&&this.lSize.update(String.format(_TR("BROWSE_UPLOADING_PROGRESS"),_s10.Utils.fileSize(this.totalSize*this.widthInPercents,0.01),this.totalSizeLabel))},destroy:function(){_a(this.spRCSessionManager,"_i1").Unadvise(this);_s9.ActionsBar.UploadProgress.superclass.destroy.apply(this,
arguments)},responseSuccess:function(){this.hideProgress();this.fireEvent("done",this,this.loadedArgs)},responseFailure:function(){clearInterval(this.progressProcId);this.addClass(this.cls+"-error");var a=String.format(_TR("BROWSE_NOT_UPLOADED_TEXT"),this.fileName||"",this.pathText);this.lDesc.update(a);this.lDesc.set({title:a});this.isFailure=true;this.fireEvent("done",this,this.loadedArgs);if(this.xhr)if(this.xhr.response){if((a=JSON.parse(this.xhr.response))&&a.message){this.lSize.update(a.message);
this.lSize.set({title:a.message})}}else if(this.xhr.status==0){a=_TR("BROWSE_NOT_UPLOADED_CONN_PROBLEM");this.lSize.update(a);this.lSize.set({title:a})}},IRCSessionManagerEvents:{OnUploadSessionInit:function(a,b){if(a=="browse-actionbar-init-iosession")if(a.uploadProgress==this.el.id){a.xhr.open("POST",b.getUrl());a.xhr.send(a.form)}},_o3:function(a,b,c){if(c=="browse-actionbar-init-iosession")if(c.uploadProgress==this.el.id)if(a!=_5){if(a=_a(b,"_io").getLastNMLError())Ext.UI.MessageBox.error({title:_TR("UPLOAD"),
msg:_TR(a.getErrorCode())+"<br />"+a.getErrorDetails()});this.responseFailure()}}}});_._2("_s9.ActionsBar");
_s9.ActionsBar.FSActionProgress=_._1(_s9.ActionsBar.ActionProgress,{actionType:"fsaction",constructor:function(){this.copyingText=_TR("BROWSE_COPYING_TEXT");this.copiedText=_TR("BROWSE_COPIED_TEXT");this.movingText=_TR("BROWSE_MOVING_TEXT");this.movedText=_TR("BROWSE_MOVED_TEXT");this.removingText=_TR("BROWSE_REMOVING_TEXT");this.removedText=_TR("BROWSE_REMOVED_TEXT");this.itemsText=_TR("BROWSE_UPLOADING_ITEMS");_s9.ActionsBar.FSActionProgress.superclass.constructor.apply(this,
arguments)},onCancel:function(){if(this.fsprovider&&this.fsActionId){this.fsprovider.abortFSAction(this.fsActionId,this.loadedArgs);this.fireEvent("abort",this,this.fsActionId)}_s9.ActionsBar.FSActionProgress.superclass.onCancel.apply(this,arguments)},onFSActionStart:function(a,b,c,d,e,f){var g=d.length+" "+this.itemsText,j="";switch(c){case "copy":j=this.copyingText;this.pathText="'"+f+"'";this.cancelConfirmTitle=_TR("BROWSE_ACTION_CANCEL_CONFIRM_TITLE_COPY");this.actionType="copy";break;
case "move":j=this.movingText;this.pathText="'"+f+"'";this.cancelConfirmTitle=_TR("BROWSE_ACTION_CANCEL_CONFIRM_TITLE_MOVE");this.actionType="move";break;case "remove":this.pathText="'"+e+"'";j=this.removingText;this.cancelConfirmTitle=_TR("BROWSE_ACTION_CANCEL_CONFIRM_TITLE_REMOVE");this.actionType="remove";break}g=String.format(j,g,this.pathText||"");this.fsprovider=a;this.fsActionId=b;this.cpItems=d;this.method=c;this.cpFrom=e;this.cpTo=f;this.lDesc.update(g);this.lDesc.set({title:g});this.cancelConfirmMsg=
String.format(_TR("BROWSE_ACTION_CANCEL_CONFIRM_FSACTION"),g);this.startTime=new Date;var h=this;this.elapsedSeconds=0;this.elapsedTimeProcId=setInterval(function(){h.onElapsedTimeInterval()},1E3)},onElapsedTimeInterval:function(){var a=this.elapsedSeconds,b=Math.floor(a/3600);a-=b*3600;var c=Math.floor(a/60);a-=c*60;this.lElapsed.update(b+":"+(c>9?c:"0"+c)+":"+(a>9?a:"0"+a));++this.elapsedSeconds},onFSActionComplete:function(a,b,c,d,e){var f=c.length+" "+this.itemsText,g="";switch(b){case "copy":this.pathText=
"'"+e+"'";g=this.copiedText;break;case "move":this.pathText="'"+e+"'";g=this.movedText;break;case "remove":this.pathText="'"+d+"'";g=this.removedText;break}f=String.format(g,f,this.pathText||"");this.fsprovider=a;this.cpItems=c;this.method=b;this.cpFrom=d;this.cpTo=e;this.lDesc.update(f);this.lDesc.set({title:f});this.widthInPercents=1;this.hideProgress()},populateFSAction:function(a){var b;if(!this.fsaction){this.fsAction=a;this.fsActionId=a.getId();b=(this.cpItems?this.cpItems.length:1)+" "+this.itemsText;
this.method=this.method||(a.getMethod()=="fs.cp"?"copy":a.getMethod()=="fs.mv"?"move":a.getMethod()=="fs.rm"?"remove":"");var c=this.loadedArgs?this.loadedArgs.path:"/",d="";switch(this.method){case "copy":this.pathText=this.pathText||"'"+a.getDestinationFolder()+"'";d=this.copyingText;c=a.getDestinationFolder();break;case "move":this.pathText=this.pathText||"'"+a.getDestinationFolder()+"'";d=this.movingText;c=a.getDestinationFolder();break;case "remove":this.pathText=this.pathText||"'"+a.getSourceFolder()+
"'";d=this.removingText;c=a.getSourceFolder();break}b=String.format(d,b,this.pathText||"");this.lDesc.update(b);this.lDesc.set({title:b});this.progressInd.show();this.progressInd.setWidth(0);if(this.loadedArgs)this.loadedArgs={device:this.loadedArgs.device,fsprovider:this.loadedArgs.fsprovider,share:this.loadedArgs.share,path:c,from:a.getSourceFolder(),to:a.getDestinationFolder()};if(!this.elapsedTimeProcId){this.elapsedSeconds=a.getElapsedSeconds();if(this.elapsedSeconds!==undefined&&this.elapsedSeconds!=
_4){this.elapsedSeconds*=1;var e=this;this.elapsedTimeProcId=setInterval(function(){e.onElapsedTimeInterval()},1E3)}}}this.progressInd.setWidth(a.getProgressPercent()+"%");b=a.getRemainingSeconds();c=Math.floor(b/3600);b-=c*3600;d=Math.floor(b/60);b-=d*60;this.lLeft.update(c+":"+(d>9?d:"0"+d)+":"+(b>9?b:"0"+b));a=a.getStatus();if(a=="complete"){clearInterval(this.elapsedTimeProcId);b=(this.cpItems?this.cpItems.length:1)+" "+this.itemsText;a="";switch(this.method){case "copy":a=this.copiedText;
break;case "move":a=this.movedText;break;case "remove":a=this.removedText;break}b=String.format(a,b,this.pathText||"");this.lDesc.update(b);this.lDesc.set({title:b});this.widthInPercents=1;this.hideProgress();this.fireEvent("done",this,this.loadedArgs);if(this.loadedArgs&&this.loadedArgs.fsprovider){this.loadedArgs.from&&this.loadedArgs.fsprovider.updateFsTreeNode({fsprovider:this.loadedArgs.fsprovider,path:this.loadedArgs.from});this.loadedArgs.to&&this.loadedArgs.fsprovider.updateFsTreeNode({fsprovider:this.loadedArgs.fsprovider,
path:this.loadedArgs.to});if(this.method=="remove"){this.loadedArgs.fsprovider.updateShares.defer(3E3,this.loadedArgs.fsprovider);this.loadedArgs.fsprovider.updateVolumes.defer(5E3,this.loadedArgs.fsprovider)}}}else if(a=="abort"){clearInterval(this.elapsedTimeProcId);this.destroy()}}});_._2("_s9");
_s9.LinkWindow=_._1(_9,Ext.UI.Window,{cls:"x-browse-linkwnd",resizable:false,modal:true,autoWidth:true,constructor:function(){this.html='<div id="'+(this.lNamesId=Ext.id())+'" class="'+this.cls+'-label-name"></div><table id="'+(this.boxStep1Id=Ext.id())+'"><tr><td class="'+this.cls+'-label"></td><td id="'+(this.chbPasswordId=Ext.id())+'" colspan="2"></td></tr><tr id="'+(this.boxPasswordId=Ext.id())+'"><td class="'+this.cls+'-label"></td><td id="'+(this.tfPasswordId=Ext.id())+
'" colspan="2"></td></tr><tr><td class="'+this.cls+'-sep" colspan="3"></td></tr><tr><td class="'+this.cls+"-label "+this.cls+'-label-expire">'+_TR("LINKS_LINK_EXPIRES")+':</td><td id="'+(this.cbExpiresId=Ext.id())+'"></td><td id="'+(this.cbExpiresCountId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-label"></td><td id="'+(this.chbNotifyId=Ext.id())+'" colspan="2"></td></tr></table><div id="'+(this.boxStep2Id=Ext.id())+'"><div id="'+(this.taLinksId=Ext.id())+'"></div><div class="'+this.cls+'-sep"></div><div>'+
(_.isMac?_TR("LINKS_COPYING_MAC"):_TR("LINKS_COPYING_WINDOWS"))+"</div></div>";this.fbar=["->",this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}),this.bClose=new Ext.UI.Button({xtype:"uibutton",width:100,hidden:true,text:_TR("CLOSE"),handler:function(){this.hide()},scope:this,cancelbtn:true}),this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CREATE"),handler:this.onApplyClick,scope:this,acceptbtn:true})];
_s9.LinkWindow.superclass.constructor.apply(this,arguments);this.spRCLinkManager=_a(_7(_1.CLSIDS.RCApplication),"_i2i").getRCLinkManager();_a(this.spRCLinkManager,"_i1").Advise(this)},afterRender:function(){_s9.LinkWindow.superclass.afterRender.apply(this,arguments);this.lNames=Ext.get(this.lNamesId);this.boxStep1=Ext.get(this.boxStep1Id);this.boxStep2=Ext.get(this.boxStep2Id);this.boxStep2.setDisplayed(false);this.chbPassword=new Ext.UI.Checkbox({boxLabel:_TR("LINKS_REQUIRES_PASSWORD"),
renderTo:this.chbPasswordId,listeners:{check:function(a,b){this.boxPassword.setDisplayed(b)},scope:this}});this.tfPassword=new Ext.UI.TextField({width:200,renderTo:this.tfPasswordId});this.cbExpiresType=new Ext.UI.ComboBox({width:274,cls:this.cls+"-cb-expires-type",renderTo:this.cbExpiresId,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[]}),value:"0",valueField:"id",displayField:"text",listeners:{select:function(a,b){switch(b.get("id")){case "0":this.sfExpiresCount.show();
this.tfExpiresDate.hide();break;case "1":this.sfExpiresCount.hide();this.tfExpiresDate.show();break}},scope:this}});this.sfExpiresCount=new Ext.UI.SpinnerField({width:120,renderTo:this.cbExpiresCountId,value:5,minValue:1,maxValue:1E3,selectOnFocus:true});this.tfExpiresDate=new Ext.UI.TextField({width:120,cls:this.cls+"-tf-expires-date",renderTo:this.cbExpiresCountId,hidden:true,emptyText:_TR("mm/dd/yyyy"),readOnly:true});this.tfExpiresDate.wrap.on("click",function(){this.wndExpDate=this.wndExpDate||
new _s9.LinkExpDateWindow({listeners:{applyclick:function(a,b){this.selectedDate=b;this.tfExpiresDate.setValue(b.format("m/d/Y"));this.removeClass(this.cls+"-error-expire")},scope:this}});this.wndExpDate.show();this.wndExpDate.loadDate(this.selectedDate)},this);this.chbNotify=new Ext.UI.Checkbox({boxLabel:_TR("LINKS_NOTIFY"),renderTo:this.chbNotifyId,value:true});this.boxPassword=Ext.get(this.boxPasswordId);this.boxPassword.setDisplayed(false);this.taLinks=new Ext.UI.TextArea({width:488,height:200,
readonly:true,renderTo:this.taLinksId});this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},loadArgs:function(a){var b;this.removeClass(this.cls+"-error-expire");this.removeClass(this.cls+"-error-email");this.loadedArgs=a;this.device=a[0].fsprovider.device;this.boxStep1.setDisplayed(true);this.boxStep2.setDisplayed(false);this.bApply.show();this.bCancel.show();this.bClose.hide();var c=[];for(b=0;b<this.loadedArgs.length&&
b<10;++b)c.push(_s9.MakeQuoted(this.loadedArgs[b].name));c=c.join(", ")+(c.length<this.loadedArgs.length?String.format(_TR("LINKS_FILES_NAMES_MORE"),this.loadedArgs.length-c.length):"");this.lNames.update(c);this.taLinks.setValue("");this.boxPassword.setDisplayed(false);if(a.length==1&&a[0].type!="file"){this.setTitle(String.format(_TR("LINKS_CREATION_TITLE_FOLDER"),_s9.MakeQuoted(a[0].name)));this.lNames.setDisplayed(false);this.cbExpiresType.store.loadData([["0",_TR("LINKS_LINK_EXPIRES_COUNT_VISITS")],
["1",_TR("LINKS_LINK_EXPIRES_DATE")]])}else{this.setTitle(_TR("LINKS_CREATION_TITLE_FILES"));this.lNames.setDisplayed(true);this.cbExpiresType.store.loadData([["0",_TR("LINKS_LINK_EXPIRES_COUNT_DOWNLOADS")],["1",_TR("LINKS_LINK_EXPIRES_DATE")]])}this.chbPassword.reset();this.tfPassword.setValue(_.utils.Base64.encode(_.utils.MD5((new Date).getTime()+""+Math.random()).substr(0,9)));this.cbExpiresType.reset();this.sfExpiresCount.reset();this.tfExpiresDate.reset();this.chbNotify.reset();this.sfExpiresCount.show();
this.tfExpiresDate.hide();delete this.selectedDate},onApplyClick:function(){if(this.validate()){var a=this.spRCLinkManager.createLinkGroup(),b=this.cbExpiresType.getValue(),c=this.selectedDate;a.putDeviceId(this.device.spRCDevice.getId());a.putVisitCount(b=="0"?this.sfExpiresCount.getValue():"");a.putExpireDate(b=="1"?c.getTime()+864E5:"");a.putNotifyWhenAcessed(this.chbNotify.getValue());a.putPassword(this.chbPassword.getValue()?this.tfPassword.getValue():"");var d=[];for(b=0;b<this.loadedArgs.length;++b){c=
this.spRCLinkManager.createLinkFSResource();c.putPath(this.loadedArgs[b].path);c.putSize(this.loadedArgs[b].size||0);this.loadedArgs[b].type!="file"&&c.putType("folder");d.push(c)}a.putFSResources(d);this.spRCLinkManager.AddWebLinkGroup(new String("browse-add-linkgroup"),a)}},validate:function(){var a=false;this.removeClass(this.cls+"-error-expire");this.removeClass(this.cls+"-error-email");if(this.cbExpiresType.getValue()=="1")if(!this.selectedDate){a=true;this.addClass(this.cls+"-error-expire")}return!a},
showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},IRCLinkManagerEvents:{_o1:function(a,b){b=="browse-add-linkgroup"&&this.showProgress();return _5},OnLinksCreate:function(a,b){if(a=="browse-add-linkgroup"){this.boxStep1.setDisplayed(false);this.boxStep2.setDisplayed(true);this.bApply.hide();this.bCancel.hide();this.bClose.show();a=[];var c,d;for(c=0;c<b.length;++c)(d=
b[c].getUrl())&&d!=_4&&a.push(d);this.taLinks.setValue(a.join("\n"))}},_o3:function(a,b,c){if(c=="browse-add-linkgroup"){this.hideProgress();if(a!=_5)if(a=_a(b,"_io").getLastNMLError())if(a=a.getErrorDetails())Ext.UI.MessageBox.error({title:_TR("LINKS_WEB_LINK"),msg:a})}return _5}}});_._2("_s9");
_s9.EmailLinkWindow=_._1(_9,Ext.UI.Window,{cls:"x-browse-linkwnd",resizable:false,modal:true,autoWidth:true,defaultPreviews:{audio:"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",binary:"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAFI0lEQVR4Xu2SO3JkVRBEZwEY7I2t4RGsAQOHXeAQwSKwsDD5BJ1BzkGpWy31SN2qPBFp1Kmaz32dn0op5Xq+/fGXP5sX5ee/8/XlMz4ueFRzXR6/BHpMmaHv9d1Pv36MEuhBZYa+12+///ExSqAHlRn+vT5ECfxB5Qy/18OXgA8qz/PU93roEjz1oJJJ3+thS5AeVJ7mue/1kCV47kHl/5y+18OV4PSg8jmT7/VQJZg8qPzH9Hs9TAmmDyr/cs33eogSXPOgcl0B/uHuS3Dtg7bzku911yV4yYM289LvdbcleOmDtvKa73WXJXjNgzby2u91dyV47YO2cYvvdVcluMWDNnGr73U3JbjVg7Zwy+91FyW45YM2cOvvhRL8cPlZ3o5bP+ijo+/1pXL5Wd4O/cNlhv9YXyKXn+Xt0D9c3pcWYDktwHJagOW0AMtpAZbTAiynBVhOC7CcFmA5LcByWoDltADLaQGWc7cF+Oqb7z+L4Cz81iPSfPIKmXrNyQu/8ZC0TzM9aQEOXiFTrzl54TcekvZppictwMErZOo1Jy/8xkPSPs30pAU4eIVMvebkhd94SNqnmZ60AAevkKnXnLzwGw9J+zTTkxbg4BUy9ZqTF37jIWmfZnrSAhy8QqZec/LCbzwk7dNMT1qAg1fI1GtOXviNh6R9mulJC3DwCpl6zckLv/GQtE8zPWkBDl4hU685eeE3HpL2aaYnLcDBK2TqNScv/MZD0j7N9KQFOHiFTL3m5IXfeEjap5metAAHr5Cp15y88BsPSfs005MW4OAVMvWakxd+4yFpn2Z60gIcvEKmXnPywm88JO3TTE9agINXyNRrTl74jYekfZrpSQtw8AqZes3JC7/xkLRPMz1pAQ5eIVOvOXnhNx6S9mmmJy3AwStk6jUnL/zGQ9I+zfSkBTh4hUy95uSF33hI2qeZnrQAB6+QqdecvPAbD0n7NNOTFuDgFTL1mpMXfuMhaZ9metICHLxCpl5z8sJvPCTt00xPWoCD558TU+9/x1Ne+I2HpH2aeUdagINXyNRrTl74jYekfZrpSQtw8AqZes3JC7/xkLRPMz1pAQ5eIVOvOXnhNx6S9mmmJy3AwStk6jUnL/zGQ9I+zfSkBTh4hUy95uSF33hI2qeZnrQAB6+QqdecvPAbD0n7NNOTFuDgFTL1mpMXfuMhaZ9metICHLxCpl5z8sJvPCTt00xPWoCDV8jUa05e+I2HpH2a6UkLcPAKmXrNyQu/8ZC0TzM9aQEOXiFTrzl54TcekvZppictwMErZOo1Jy/8xkPSPs30pAU4eIVMvebkhd94SNqnmZ60AAevkKnXnLzwGw9J+zTTkxbg4BUy9ZqTF37jIWmfZnrSAhy8QqZec/LCbzwk7dNMT1qAg1fI1GtOXviNh6R9mulJC3DwCpl6zckLv/GQtE8zPWkBDl4hU685eeE3HpL2aaYnLcDBK2TqNScv/MZD0j7N9KQFOHiFTL3m5IXfeEjap5metAAHr5Cp15y88BsPSfs005MW4OAVMvWakxd+4yFpn2Z60gIcvEKmXnPywm88JO3TTE/utgDlbWgBltMCLKcFWE4LsJwWYDktwHJagOW0AMtpAZbTAiynBVhOC7CcFmA5LcByWoDltADLaQGW0wIspwVYTguwnBZgOS3AclqA5bQAy2kBltMCLKcFWE4LsJwWYDktwHJagOW0AMtpAZbTAiynBVjOuxeguY9cfpa346n/RPN+ufwspZQy5tOnvwASMY0dbVmnEAAAAABJRU5ErkJggg==",
image:"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",
msoffice:"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",
pdf:"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",
txt:"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAACmklEQVR4Xu3XMXJTMRSFYS+BlbIVGjoWQUGTOhugYSaLoKKihDB5b+QI2daRZVv3nv+bOXWi6795BwDQff724w8b2vfXfdjOGFf1KKYtfgT7Y9Bnv9eXp5ccEewPQp/9Xj9//c4Rwf4g9Dm+V4oIjh+Ey+p7hY+gfhDOa90rdAStB+G0U/cKG8GpB6Ht3L1CRnDuQfjfpXuFi+DSg/Bez71CRdDzIBS99woTQe+D8Ea5V4gIlAdBC+Cf5SNQH+Ru5F5LRzDyIGej91o2gtEHubrmXktGcM2DHF17r+UiGH3Qx0/PFquN3uvYUhGMPqh1rIyrjd6rtkwEow9qHSvjaqP3alkigtEHtY6VcbXRe51SRfB1+1nuZ/aDstvvdattP8v97H8YfY5/rFts+1nuZ//DeCwCMEcA5gjAXLgAWp9MrExFAMmmIoBkUxFAsqnCBYC5CMAcAZgjAHMEYI4AzIULoPXpw8pUBJBsKgJINhUBJJsqXACYiwDMEYA5AjBHAOYIwFy4AFqfPqxMRQDJpiKAZFMRQLKpwgWAuQjAHAGYIwBzBGCOAMyFC6D16cPKVASQbCoCSDYVASSbKlwAmIsAzBGAOQIwRwDmCMBcuABanz6sTEUAyaYigGRTEUCyqcIFgLkIwBwBmCMAcwRgjgDMhQug9enDylQEkGwqAkg2FQEkmypcAJiLAMwRgDkCMEcA5gjAXLgAWp8+rExFAMmmIoBkUxFAsqnCBYC5CMAcAZgjAHMEYI4AzIULoPXpw8pUBJBsKgJINhUBJJsqXACYiwDMEYA5AjBHAOYIwBwBmCMAcwRgjgDMEYA5AjBHAOYIwBwBmCMAcwRgjgDMEYA5AjD38ADYGtt+lvtp/RPscdt+FgDodjj8BT6aCLY3tWbdAAAAAElFTkSuQmCC",
video:"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAE0klEQVR4Xu2bMYvVQBSF9yf4S21txU7LxUbWRrHQQhYRUbFxK7VREUHRZgsRQUVEcLF67nFzcV723rczeZN5yTvng9NsJpnMzJdkJnm7I4QQ5Vy9/3ahDMqr45zrunG+9BqllGX+ElhjRB7WX3uP3m2HBNYgkYf119efR9shgTVI5JH211ZIkDZInE2/v2YvQb9BYjVef81aAq9BIibqr9lKEDVI+Kzqr1lKsKpB4jRn9dfsJDirQWKZnP6alQQ5DRL/ye2v2UiQ2yBxQkl/zUKCkgaJMgHA5CUobRA7Q/pr0hIMaRAzQ/trshIMbRAr6/TXJCVYp0GMrNtfk5Ng3QaxUaO/JiVBjQYxUau/JiNBrQaxULO/JiFBzQYxULu/ehLsd8PSjtoN2nasv8ZKNyztsIpFHulgjZFuWNphFYvNIgHIkQDkSAByJAA5EoAcCUCOBCBHApAjAciRAORIAHIkADkSgBwJQI4EIGeyApy/dF2pmAgJQJIICUCSCAlAkggJkJGLu7cXt+4dLF68/rD49OVbd4anwTaUQVns4x1rU4mQACuye+PB4s37w+6MysG+OIZ37NaJkABOMGgfDz93Z/If/O3hwct/271gW7Qftnt1tUqEBOjl6fPlc8JtHbf0C1duuuW9oCz26T8ucGyvfItESIAuGLR0wL7/+LXYu/PELVsSHAPHMlBHiUy1EiEBjnP52v7SIGEiV3OQcCwc00BdqNMrO1Yi6AXA4KSDj1u3V65GcGwDdba8E0TQC5De9sccfEsqAer2yoyRCGoB0glfi8G3pBK0mhhG0AqAZZmB57NXZsykc4IWS8QIWgFsvZ77LEa5GqsCSzr3wLl4ZWomglKA9OrPHVQDg1VrBo+6jbHvAhGUAtjr3ZJJWJ9aS0WbhOKcvO21EkEnAD7SGCUTP4/fR38Wdx8/c8vnJp0QjrksjKATYGiHrwLP8qG3cJyDMeZKJIJOAJt9l068csAxh3wGtgnpmKuRCDoB7JmLL3fe9iglYG1fcnfBuYAxXwxF0AlglN6yS8H8IPeWnq5KvO01EiEBMjMUXNVn1SUBHLxGrJt0BdBKAAPLvGh+IAEcvEbUiCEBTpAAmRmKHgEB2y5AySQwfSXsba+RCDoBtAxchk4AvQhahk4AvQpehk6AdClY0uEe+hi0BpsSAJnS52D7UYg+B/fwGlEr6bJLPwghFACxiReuwJwrGeVyZckJ6rSrv3RCOiQRtAKkd4ExZ99RbDUCxr76kQhaARD9LJxcAMReDIEWEqSDP+aLn34i6AVIn8VgTAnSwc+de9RKBL0AiP45lFwABIOUPg4wSDVm/ThGKhfqaHnlWyIkQC/pxBBg8HDrLhk0lMU+6cCDVhM+LxESwAmWZfaeIAV/w5c7XNUo0w+2Rfthu1dXq0RIgBXBoNlr4yFg300PvCVCAmTEbumYyKXzhD7YhjKlj4wWiZAAJImQACSJkAAkiZAAJImYrACiDRKAHAlAjgQgRwKQIwHIkQDkSAByJAA5EoAcCUCOBCBHApAjAciRAORIAHIkADkSgBwJQI4EIEcCkCMByJEA5EgAciQAORKAHAlAjgQgRwKQIwHIkQDkSAByJAA5EoCcjQugTCPdsLTDOwllc+mGRQghstnZ+QspfTPnAAloxwAAAABJRU5ErkJggg=="},
constructor:function(){this.html='<table><tr><td class="'+this.cls+"-label "+this.cls+'-label-email">'+_TR("LINKS_MAIL_LIST")+':</td><td id="'+(this.tfEmailsId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-label">'+_TR("LINKS_MAIL_MESSAGE")+':</td><td id="'+(this.taMessageId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-sep" colspan="2"></td></tr><tr><td class="'+this.cls+'-label"></td><td id="'+(this.chbPasswordId=Ext.id())+'"></td></tr><tr id="'+(this.boxPasswordId=Ext.id())+'"><td class="'+
this.cls+'-label"></td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-sep" colspan="2"></td></tr><tr><td class="'+this.cls+"-label "+this.cls+'-label-expire">'+_TR("LINKS_LINK_EXPIRES")+':</td><td id="'+(this.cbExpiresId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-label"></td><td id="'+(this.chbNotifyId=Ext.id())+'"></td></tr></table>';this.fbar=["->",this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},
scope:this,cancelbtn:true}),this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("LINKS_MAIL_MESSAGE_SEND"),handler:this.onApplyClick,scope:this,acceptbtn:true})];_s9.EmailLinkWindow.superclass.constructor.apply(this,arguments);this.spRCLinkManager=_a(_7(_1.CLSIDS.RCApplication),"_i2i").getRCLinkManager();_a(this.spRCLinkManager,"_i1").Advise(this)},afterRender:function(){_s9.EmailLinkWindow.superclass.afterRender.apply(this,
arguments);this.tfEmails=new Ext.UI.TextField({width:400,emptyText:_TR("LINKS_MAIL_LIST_PLACEHOLDER"),renderTo:this.tfEmailsId});this.taMessage=new Ext.UI.TextArea({width:400,height:80,renderTo:this.taMessageId});this.chbPassword=new Ext.UI.Checkbox({boxLabel:_TR("LINKS_REQUIRES_PASSWORD"),renderTo:this.chbPasswordId,listeners:{check:function(a,b){this.boxPassword.setDisplayed(b)},scope:this}});this.tfPassword=new Ext.UI.TextField({width:200,renderTo:this.tfPasswordId});new Ext.Component({html:_TR("LINKS_REQUIRES_PASSWORD_DESCRIPTION"),
cls:this.cls+"-desc-password",renderTo:this.tfPasswordId});this.cbExpiresType=new Ext.UI.ComboBox({width:274,cls:this.cls+"-cb-expires-type",renderTo:this.cbExpiresId,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["0",_TR("LINKS_LINK_EXPIRES_COUNT_DOWNLOADS")],["1",_TR("LINKS_LINK_EXPIRES_DATE")]]}),value:"0",valueField:"id",displayField:"text",listeners:{select:function(a,b){switch(b.get("id")){case "0":this.sfExpiresCount.show();this.tfExpiresDate.hide();
break;case "1":this.sfExpiresCount.hide();this.tfExpiresDate.show();break}},scope:this}});this.sfExpiresCount=new Ext.UI.SpinnerField({width:120,renderTo:this.cbExpiresId,hidden:true,value:5,minValue:1,maxValue:100,selectOnFocus:true});this.tfExpiresDate=new Ext.UI.TextField({width:120,cls:this.cls+"-tf-expires-date",renderTo:this.cbExpiresId,hidden:true,emptyText:_TR("mm/dd/yyyy"),readOnly:true});this.tfExpiresDate.wrap.on("click",function(){this.wndExpDate=this.wndExpDate||new _s9.LinkExpDateWindow({listeners:{applyclick:function(a,
b){this.selectedDate=b;this.tfExpiresDate.setValue(b.format("m/d/Y"));this.removeClass(this.cls+"-error-expire")},scope:this}});this.wndExpDate.show();this.wndExpDate.loadDate(this.selectedDate)},this);this.chbNotify=new Ext.UI.Checkbox({boxLabel:_TR("LINKS_NOTIFY"),renderTo:this.chbNotifyId,value:true});this.boxPassword=Ext.get(this.boxPasswordId);this.boxPassword.setDisplayed(false);this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,
frame:false})},loadArgs:function(a){this.removeClass(this.cls+"-error-expire");this.removeClass(this.cls+"-error-email");this.setTitle(a.length>1?_TR("LINKS_EMAIL_LINK"):String.format(_TR("LINKS_EMAIL_LINK_TO"),_s9.MakeQuoted(a[0].name)));this.loadedArgs=a;this.device=a[0].fsprovider.device;this.previewprovider=this.device.previewprovider128x128;var b=[];for(a=0;a<this.loadedArgs.length;++a)b.push(_s9.MakeQuoted(this.loadedArgs[a].name));this.previewprovider.updatePreviews(this.loadedArgs);
this.boxPassword.setDisplayed(false);this.tfEmails.reset();this.taMessage.setValue(String.format(b.length==1?_TR("LINKS_MAIL_MESSAGE_TEMPLATE"):_TR("LINKS_MAIL_MESSAGE_TEMPLATE_FILES"),'"'+b.join('", "')+'"'));this.chbPassword.reset();this.tfPassword.setValue(_.utils.Base64.encode(_.utils.MD5((new Date).getTime()+""+Math.random()).substr(0,9)));this.cbExpiresType.reset();this.sfExpiresCount.reset();this.tfExpiresDate.reset();this.chbNotify.reset();this.sfExpiresCount.show();this.tfExpiresDate.hide();
delete this.selectedDate},onApplyClick:function(){if(this.validate()){var a=this.spRCLinkManager.createLinkGroup(),b=this.cbExpiresType.getValue(),c=this.selectedDate;a.putDeviceId(this.device.spRCDevice.getId());a.putEmails(this.tfEmails.getValue().match(/[^,]+/g)||[]);a.putPersonalMessage(this.taMessage.getValue());a.putVisitCount(b=="0"?this.sfExpiresCount.getValue():"");a.putExpireDate(b=="1"?c.getTime()+864E5:"");a.putNotifyWhenAcessed(this.chbNotify.getValue());a.putPassword(this.chbPassword.getValue()?
this.tfPassword.getValue():"");var d=[];for(b=0;b<this.loadedArgs.length;++b){c=this.spRCLinkManager.createLinkFSResource();c.putPath(this.loadedArgs[b].path);c.putSize(this.loadedArgs[b].size||0);c.putPreview(this.previewprovider.get(this.loadedArgs[b],this.previewprovider.widthPreview,this.previewprovider.heightPreview)||this.defaultPreviews[this.loadedArgs[b].filetype]||"");d.push(c)}a.putFSResources(d);this.spRCLinkManager.AddLinkGroup(new String("browse-add-email-linkgroup"),a)}},validate:function(){var a=
false,b=false;this.removeClass(this.cls+"-error-expire");this.removeClass(this.cls+"-error-email");if(this.cbExpiresType.getValue()=="1")if(!this.selectedDate){a=true;this.addClass(this.cls+"-error-expire")}var c=this.tfEmails.getValue().match(/[^,]+/g)||[],d=0;_.each(c,function(e){if(e=e.trim()){++d;if(!_.Utils.isValidEmail(e)){b=true;return false}}},this);d||(b=true);if(b){a=true;this.addClass(this.cls+"-error-email");this.tfEmails.showValidateTooltip(_TR("LINKS_MAIL_LIST_ERROR"))}return!a},
showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},IRCLinkManagerEvents:{_o1:function(a,b){b=="browse-add-email-linkgroup"&&this.showProgress();return _5},_o2:function(a,b){if(b=="browse-add-email-linkgroup"){Ext.UI.MessageBox.info({title:_TR("LINKS_EMAIL_LINK"),msg:_TR("LINKS_LINK_CREATED")});this.hide()}return _5},_o3:function(a,b,c){if(c=="browse-add-email-linkgroup"){this.hideProgress();
if(a!=_5)if(a=_a(b,"_io").getLastNMLError())if(a=a.getErrorDetails())Ext.UI.MessageBox.error({title:_TR("LINKS_EMAIL_LINK"),msg:a})}return _5}}});_._2("_s9");
_s9.LinkExpDateWindow=_._1(_9,Ext.UI.Window,{cls:"x-browse-linkexpwnd",resizable:false,modal:true,width:600,constructor:function(){this.title=_TR("LINKS_LINK_EXPIRES");this.fbar=["->",this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("OK"),handler:this.onApplyClick,scope:this,acceptbtn:true}),this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true})];_s9.LinkExpDateWindow.superclass.constructor.apply(this,
arguments)},afterRender:function(){_s9.LinkExpDateWindow.superclass.afterRender.apply(this,arguments);this.dpExpireDate=new Ext.UI.DatePicker({renderTo:this.body,minDate:new Date})},loadDate:function(a){(this.loadedDate=a)?this.dpExpireDate.setValue(a):this.dpExpireDate.setValue(new Date)},onApplyClick:function(){this.fireEvent("applyclick",this,this.dpExpireDate.getValue());this.hide()},validate:function(){return true}});_._2("_s9");
_s9.Recover=_._1(_9,Ext.Container,{layout:"border",dateSelect:true,_ToolBarClsId:_s9.ToolBar,_CenterClsId:_s9.Center,_TreeClsId:_s9.Tree,constructor:function(){var a=[this.toolbar=new this._ToolBarClsId({region:"center",height:45,listeners:{pathclick:function(b,c){this.load(c)},loadhistory:function(b,c){this.load(c)},bdvmodeclick:function(b,c){this.setDvMode(c)},newwndclick:function(){this.fireEvent("newwndclick",this,this.loadedArgs.path,this.loadedArgs.fsprovider?
this.loadedArgs.fsprovider.device.id:undefined,this.isRecoveryMode)},scope:this}})];if(this.dateSelect)a.push(this.timeline=new _s9.Recover.DateRange({region:"east",height:45,width:310,listeners:{showsnaps:function(b,c){this.center.snapsView.filterSnaps(c)},selectrange:function(b,c){if((b=this.loadedArgs)&&b.fsprovider&&(b.share||b.lun||b.user)){this.load({path:this.extractPathFromArgs(b),share:b.share,lun:b.lun,user:b.user,fsprovider:b.fsprovider,isSelectSnaps:true});this.center.snapsView.filterSnaps(c)}},
scope:this}}));this.items=[this.tree=new this._TreeClsId(this.getTreeCfg()),{xtype:"container",region:"center",layout:"border",items:[{xtype:"container",region:"north",layout:"border",height:45,items:a},{xtype:"container",region:"center",layout:"border",items:[this.center=new this._CenterClsId(this.getCenterCfg())]}]}];_s9.Recover.superclass.constructor.apply(this,arguments)},getTreeCfg:function(){return{region:"west",width:270,listeners:{nodeselect:function(a,b){this.load(b)},nodeload:function(a,
b){this.loadedArgs||this.load(b)},updatechain:function(a){this.toolbar.updatePath(a)},"delete":function(a){if(a.type=="folder")a.fsprovider.removeFSItems([a],a.parent);else if(a.type=="snapshot")a.fsprovider.deleteSnapshot(a.snapshot,a.parent);else a.type=="share"&&a.fsprovider.removeShare(a.share,a.parent);a.fsprovider.device.id==this.loadedArgs.fsprovider.device.id&&this.loadedArgs.path.indexOf(a.path)===0&&this.load(a.parent)},restore:function(a,b,c,d){c.restoreFSItem(a,b,d)},snaprollback:function(a,
b,c){c.rollbackSnapshot(b,this.loadedArgs)},leavedevice:function(a,b){this.fireEvent("leavedevice",this,b)},scope:this}}},getCenterCfg:function(){return{region:"center",listeners:{loadargs:function(a){this.load(a)},scope:this},filesViewListeners:{folderbrowse:function(a){this.load(a)},selectionchange:function(a,b){this.fireEvent("selectionchange",this,b)},restoreversion:function(a){this.loadedArgs.fsprovider.restoreFSVersion(a,this.loadedArgs)},restore:function(a,b){this.loadedArgs.fsprovider.restoreFSItem(a,
b,this.loadedArgs.snapshot,this.loadedArgs);this.fireEvent("restore",this)},scope:this},snapsViewListeners:{snapbrowse:function(a){this.load(a)},selectionchange:function(a,b){this.fireEvent("selectionchange",this,b)},snaprollback:function(a,b){this.loadedArgs.fsprovider.rollbackSnapshot(b,this.loadedArgs)},snapdelete:function(a,b){this.loadedArgs.fsprovider.deleteSnapshot(b,this.loadedArgs)},scope:this}}},afterRender:function(){_s9.Recover.superclass.afterRender.apply(this,arguments);this.tree.addClass("x-browse-leftpanel")},
populateDevices:function(a){this.devices=a;this.toolbar.clearHistory();this.tree.populateDevices(a);this.center.populateDevices(a);this.isRecoveryMode=true;this.center.setRecoveryMode(true);this.tree.setRecoveryMode(true)},setDvMode:function(a){this.dvMode=a;this.toolbar.setDvMode(a,true);this.center.setDvMode(a);_s9.GATrackEvent("Browse","SetDataViewMode",a)},loadArgs:function(a){this.toolbar.clearHistory();this.loadStart(_.applyIf({path:this.extractPathFromArgs(a),isVersionsMode:false},
a))},loadArgsToBrowse:function(a){var b=this.extractPathFromArgs(a);this.loadStart(_.applyIf({path:b,isVersionsMode:false},a));var c=a.fsprovider.getShareByPath(b);b=="/"&&a.fsprovider.getVolumes().length==1&&!a.fsprovider.isSelectPathMode?this.center.loadArgsToBrowse({fsprovider:a.fsprovider,path:"/"+a.fsprovider.getVolumes()[0].getVolumeId()}):this.center.loadArgsToBrowse({fsprovider:a.fsprovider,path:b,share:c,isVersionsMode:!!!a.fsprovider.isVersionsMode})},loadStart:function(a){a.fsprovider.populateVolumes();
a.fsprovider.populateShares();this.setDvMode("grid");this.load(a)},load:function(a){if(a&&a.fsprovider&&a.fsprovider.device){this.loadedArgs=a;a.fsprovider.getShareByPath(a.path);if(a.path=="/"&&a.fsprovider.getVolumes().length==1){this.center.loadArgsToBrowse({fsprovider:a.fsprovider,path:"/"+a.fsprovider.getVolumes()[0].getVolumeId()});this.toolbar.load({fsprovider:a.fsprovider,path:"/"+a.fsprovider.getVolumes()[0].getVolumeId()})}else{this.center.load(a);this.toolbar.load(a)}this.toolbar.updatePath(this.tree.select(a));
if(this.timeline){this.timeline.putDevice(a.fsprovider.device);this.timeline.loadArgs(a)}}},extractPathFromArgs:function(a){return a.share?a.share.getPath():a.lun?"/"+a.lun.getVolumeId()+"/"+a.lun.getName():a.user&&a.user.__browse_homedir?a.user.__browse_homedir:a.path},unload:function(){this.timeline&&this.timeline.unload()}});_._2("_s9");
_s9.Recover.DateRange=_._1(_9,Ext.Container,{cls:"x-browse-rec-daterange",constructor:function(){var a=_TR("BROWSE_RECOVER_DATE_GO_TO")+":";this.html='<table><tr><td><div class="'+this.cls+'-desc x-ellipsis" title="'+a+'">'+a+'</div></td><td id="'+(this.cbYearId=Ext.id())+'"></td><td id="'+(this.cbMonthId=Ext.id())+'"></td><td id="'+(this.cbDayId=Ext.id())+'"></td></tr></table>';_s9.Recover.DateRange.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.Recover.DateRange.superclass.afterRender.apply(this,
arguments);this.cbYear=new Ext.UI.ComboBox({width:80,disabled:true,renderTo:this.cbYearId,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[]}),value:"",valueField:"id",displayField:"text",listeners:{select:this.onYearChange,scope:this}});this.cbMonth=new Ext.UI.ComboBox({width:105,disabled:true,renderTo:this.cbMonthId,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[]}),value:"",valueField:"id",
displayField:"text",listeners:{select:this.onMonthChange,scope:this}});this.cbDay=new Ext.UI.ComboBox({width:60,disabled:true,renderTo:this.cbDayId,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[]}),value:"",valueField:"id",displayField:"text",listeners:{select:this.onDayChange,scope:this}})},putDevice:function(a){if(this.device){_a(this.spZFSSnapshotsManager,"_i1").Unadvise(this);_a(this.spHFSnapshotsManager,"_i1").Unadvise(this)}if(this.device=
a){this.spZFSSnapshotsManager=this.device.spDevice.getZFSSnapshotsManager();_a(this.spZFSSnapshotsManager,"_i1").Advise(this);this.spHFSnapshotsManager=this.device.spDevice.getHFSnapshotsManager();_a(this.spHFSnapshotsManager,"_i1").Advise(this)}},loadArgs:function(a){if(!a.share&&!a.lun&&!a.user){this.fireEvent("showsnaps",this,[]);this.loadDateInterval(null,null)}this.share=a.share;this.lun=a.lun;this.user=a.user},unload:function(){if(this.device){_a(this.spZFSSnapshotsManager,
"_i1").Unadvise(this);delete this.spZFSSnapshotsManager;_a(this.spHFSnapshotsManager,"_i1").Unadvise(this);delete this.spHFSnapshotsManager}delete this.device;delete this.share;delete this.lun;delete this.user;delete this.snapshots;this.loadDateInterval(null,null)},loadDateInterval:function(a,b){if(a&&b){var c=[[null,_TR("ALL")]];for(i=new Date(a);i.getFullYear()<=b.getFullYear();i.setFullYear(i.getFullYear()+1))c.push([i.getFullYear(),i.getFullYear()]);this.cbYear.enable();
this.cbYear.store.removeAll();this.cbYear.store.loadData(c);(a=this.cbYear.store.getAt(0))&&this.cbYear.onSelect(a,0)}else{this.cbYear.store.removeAll();this.cbYear.setValue(null);this.cbYear.disable();this.cbMonth.store.removeAll();this.cbMonth.setValue(null);this.cbMonth.disable();this.cbDay.store.removeAll();this.cbDay.setValue(null);this.cbDay.disable()}},onYearChange:function(){if(_.isNumber(this.cbYear.getValue())){var a=new Date(this.cbYear.getValue().toString(),0,1,0,0,0),b=new Date(this.cbYear.getValue().toString(),
11,31,23,59,59);if(a.getTime()<this.startDate.getTime())a=new Date(this.startDate);if(b.getTime()>this.endDate.getTime()){b=new Date(this.endDate.getFullYear().toString(),this.endDate.getMonth()+1);b.setMilliseconds(b.getMilliseconds()-1)}b=b.getTime();for(var c=[[null,_TR("BROWSE_RECOVER_DATE_ALL_MONTHS")]];a.getTime()<b;a=new Date(a.getFullYear(),a.getMonth()+1))c.push([a.getMonth(),a.format("F")]);this.cbMonth.enable();this.cbMonth.store.removeAll();this.cbMonth.store.loadData(c);(a=this.cbMonth.store.getAt(0))&&
this.cbMonth.onSelect(a,0)}else{this.cbMonth.store.removeAll();this.cbMonth.setValue(null);this.cbMonth.disable();this.onMonthChange()}},onMonthChange:function(){if(_.isNumber(this.cbMonth.getValue())){var a=new Date(this.cbYear.getValue().toString(),this.cbMonth.getValue(),1,0,0,0),b=new Date(a);b.setMonth(b.getMonth()+1);if(a.getTime()<this.startDate.getTime())a=new Date(this.startDate);if(b.getTime()>this.endDate.getTime()){b=new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate()+
1);b.setMilliseconds(b.getMilliseconds()-1)}b=b.getTime();for(var c=[[null,_TR("BROWSE_RECOVER_DATE_ALL_DAYS")]];a.getTime()<b;a.setDate(a.getDate()+1))c.push([a.getDate(),a.getDate()]);this.cbDay.enable();this.cbDay.store.removeAll();this.cbDay.store.loadData(c);(a=this.cbDay.store.getAt(0))&&this.cbDay.onSelect(a,0)}else{this.cbDay.store.removeAll();this.cbDay.setValue(null);this.cbDay.disable();this.onDayChange()}},onDayChange:function(){var a=[],b,c,d,e,f;if(_.isNumber(this.cbYear.getValue())){f=
new Date((this.cbYear.getValue()||"").toString(),this.cbMonth.getValue(),this.cbDay.getValue()||1);c=new Date(f);if(_.isNumber(this.cbMonth.getValue()))_.isNumber(this.cbDay.getValue())?c.setDate(c.getDate()+1):c.setMonth(c.getMonth()+1);else c.setFullYear(c.getFullYear()+1);f=f.getTime();c=c.getTime();if(this.snapshots)for(b=0;b<this.snapshots.length;++b){d=this.snapshots[b];e=d.date.getTime();e>f&&e<c&&a.push(d)}}else if(this.snapshots)a=this.snapshots.slice();this.fireEvent("selectrange",this,
a)},loadDate:function(a,b,c){this.cbYear.setValue(a);a=this.cbYear.store.find("id",a);a=a==-1?0:a;(a=this.cbYear.store.getAt(a))&&this.cbYear.onSelect(a,0);if(_.isNumber(this.cbYear.getValue())){this.cbMonth.setValue(b);a=this.cbMonth.store.find("id",b);a=a==-1?0:a;(a=this.cbMonth.store.getAt(a))&&this.cbMonth.onSelect(a,0);if(_.isNumber(this.cbMonth.getValue())){this.cbDay.setValue(c);a=this.cbDay.store.find("id",c);a=a==-1?0:a;(a=this.cbDay.store.getAt(a))&&this.cbDay.onSelect(a,0)}}},populateSnapshots:function(a){var b=
[],c;_.each(a,function(g){g=_a(g,"_i4i")||_a(g,"IHFSnapshot");(c=g.getCreationDate())&&c!=_4&&b.push({snapshot:g,date:new Date(c*1E3)})},this);this.snapshots=b;if(b.length){a=this.startDate=b[0].date;var d=this.endDate=b[b.length-1].date,e=this.cbYear.getValue(),f=this.cbMonth.getValue();c=this.cbDay.getValue();this.loadDateInterval(a,d);this.loadDate(e,f,c)}else{this.loadDateInterval(null,null);this.fireEvent("showsnaps",this,[])}},_i4l:{_o2:function(a,
b){if(b=="browse-update-snapshots"&&b.args)if(this.share&&b.args.share&&b.args.share.getName()==this.share.getName()||this.lun&&b.args.lun&&b.args.lun.getName()==this.lun.getName())this.populateSnapshots(this.spZFSSnapshotsManager.getSnapshots())}},IHFSnapshotsManagerEvents:{OnSnapshotsUpdate:function(a,b,c){b=="browse-update-snapshots"&&this.user&&b.args&&b.args.user&&b.args.user.getId()==this.user.getId()&&this.populateSnapshots(c)}}});_._2("_s9");
_s9.RCRecover=_._1(_s9.Recover,{dateSelect:false,constructor:function(){this._ToolBarClsId=_s9.RCRecover.ToolBar;this._CenterClsId=_s9.RCRecover.Center;this._TreeClsId=_s9.RCRecover.Tree;_s9.RCRecover.superclass.constructor.apply(this,arguments)},getTreeCfg:function(){return _.apply(_s9.RCRecover.superclass.getTreeCfg.apply(this,arguments),{hidden:true})},getCenterCfg:function(){return _.apply(_s9.RCRecover.superclass.getCenterCfg.apply(this,
arguments),{_SnapsViewClsId:_s9.RCRecover.SnapsView,_FilesViewClsId:_s9.RCRecover.FilesView})},onNextClick:function(){if(this.center.snapsView.selRecords&&this.center.snapsView.selRecords.length==1){var a=this.center.snapsView.selRecords[0].data,b;b=this.startArgs.snapfolder?"/":this.startArgs.user?this.startArgs.type=="file"?this.startArgs.pathInHomeFolder.split("/").slice(0,-1).join("/")+"/":this.startArgs.pathInHomeFolder||"/":this.startArgs.fsprovider.getPathInShareByPath(this.startArgs.type==
"file"?this.startArgs.parentPath:this.startArgs.path);this.load(_.applyIf({path:a.path+b,pathInSnap:b},a))}},loadArgs:function(a){this.startArgs=a;_s9.RCRecover.superclass.loadArgs.apply(this,arguments)}});_._2("_s9");
_s9.RecoverWindow=_._1(_9,Ext.UI.Window,{layout:"fit",cls:"x-browse-recoverwnd",resizable:false,modal:true,width:600,height:400,_RecoverClsId:_s9.Recover,constructor:function(){this.title=_TR("BROWSE_RECOVER_FILES");this.items=this.getItems();this.fbar=this.getFBar();_s9.RecoverWindow.superclass.constructor.apply(this,arguments)},getItems:function(){return[this.rec=new this._RecoverClsId({listeners:{selectionchange:this.onSelectionChange,restore:this.onRestore,
newwndclick:function(a,b,c,d){this.fireEvent("newwndclick",this,b,c,d)},scope:this}})]},getFBar:function(){return["->",this.bRecover=new Ext.UI.Button({text:_TR("RESTORE"),disabled:true,handler:this.onRecoverClick,scope:this,acceptbtn:true}),this.bRollback=new Ext.UI.Button({text:_TR("ROLLBACK"),disabled:true,handler:this.onRollbackClick,scope:this,acceptbtn:true})]},afterRender:function(){_s9.RecoverWindow.superclass.afterRender.apply(this,arguments);new Ext.UI.RoundButton({cls:this.cls+"-close",
renderTo:this.el,listeners:{click:function(){this.hide()},scope:this}})},onShow:function(){_s9.RecoverWindow.superclass.onShow.apply(this,arguments);this.calcSize();Ext.EventManager.addListener(window,"resize",this.onWindowResize,this);this.doLayout(false,false);this.center();_s9.GATrackEvent("Browse","OpenPecoverWindow")},onHide:function(){_s9.RecoverWindow.superclass.onHide.apply(this,arguments);this.rec.unload();Ext.EventManager.removeListener(window,"resize",this.onWindowResize,
this)},onWindowResize:function(){this.calcSize()},onSelectionChange:function(a,b){this.bRecover.setDisabled(!b.recoverAvail);this.bRecover.setVisible(!b.rollbackAvail);this.bRollback.setDisabled(!b.rollbackAvail);this.bRollback.setVisible(!!b.rollbackAvail)},onRestore:function(){this.fireEvent("restore",this)},onRecoverClick:function(){this.rec.center.filesView.onRestoreClick()},onRollbackClick:function(){this.rec.center.snapsView.onRollbackClick()},calcSize:function(){var a=Ext.getBody().getSize();
a.width*=0.8;a.height*=0.8;this.setSize(a);this.center()},init:function(a){if(this.device){this.device.permsMgr.destroy();this.device.fsprovider.destroy()}var b=this.device={spDevice:a,isOnline:true};if(_s9.isRCApp){b.spRCDevice=_a(a,"_i2j");b.spRCDeviceCapabilities=_a(a,"IRCDeviceCapabilities");b.name=b.id=b.spRCDevice.getAlias()}else b.name=b.id=a.getNetworkManager().getHostname();b.permsMgr=new _s9.PermissionsManager;b.permsMgr.putDevice(b);b.fsprovider=new _s9.FSProvider;
b.fsprovider.putRecoveryMode(true);b.fsprovider.putDevice(b);b.fsprovider.populateShares();b.fsprovider.populateShares();this.rec.populateDevices([b]);return b},loadArgs:function(a){this.rec.loadArgs(a)},loadArgsToBrowse:function(a){this.rec.loadArgsToBrowse(a)}});_._2("_s9");
_s9.RCRecoverWindow=_._1(_s9.RecoverWindow,{width:700,height:500,constructor:function(){this._RecoverClsId=_s9.RCRecover;_s9.RCRecoverWindow.superclass.constructor.apply(this,arguments)},getFBar:function(){return["->",this.bRecover=new Ext.UI.Button({text:_TR("RESTORE"),disabled:true,handler:this.onRecoverClick,scope:this,acceptbtn:true}),this.bNext=new Ext.UI.Button({text:_TR("NEXT"),disabled:true,handler:function(){this.rec.onNextClick()},scope:this,acceptbtn:true}),
new Ext.UI.Button({text:_TR("CLOSE"),handler:function(){this.hide()},scope:this,cancelbtn:true})]},calcSize:function(){this.center()},onLoadPath:function(){},onSelectionChange:function(a,b){this.bRecover.setDisabled(!b.recoverAvail);this.bRecover.setVisible(b.recoverAvail!==undefined);this.bNext.setDisabled(!b.recoverNextAvail);this.bNext.setVisible(b.recoverNextAvail!==undefined)}});_._2("_s9.RCRecover");
_s9.RCRecover.ToolBar=_._1(_s9.ToolBar,{constructor:function(){_s9.RCRecover.ToolBar.superclass.constructor.apply(this,arguments)},getHtml:function(){return String.format('<table id="'+(this.boxRecHTableId=Ext.id())+'" cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="width: 0%; vertical-align: top;"><div class="{0}-histbuttons" id="'+(this.bPrevId=this.bNextId=Ext.id())+'"></div></td><td style="width: 0%; vertical-align: top;"><div class="{0}-recmodelabel" id="'+
(this.lVerModeId=Ext.id())+'" style="display: none;">&nbsp;&nbsp;'+_TR("BROWSE_PREVIOUS_VERSIONS")+':&nbsp;&nbsp;</div></td><td style="width: 100%; vertical-align: top;"><div class="{0}-content x-ellipsis" id="'+(this.hFolders=Ext.id())+'"></div><div class="{0}-lpoint x-ellipsis" id="'+(this.lSelectPointId=Ext.id())+'">'+_TR("BROWSE_SELECT_RECOVERY_POINT")+':</div></td><td style="width: 0%; vertical-align: top;"><div class="{0}-dvmodebuttons" id="'+(this.bDVModeId=Ext.id())+'"></div></td><td style="width: 0%; vertical-align: top;"><div class="{0}-wndbuttons" id="'+
(this.bNewWndId=Ext.id())+'"></div></td><tr></table>',this.cls)},afterRender:function(){_s9.RCRecover.ToolBar.superclass.afterRender.apply(this,arguments);this.el.addClass(this.cls+"-rc")},updatePath:function(){},load:function(a){var b=_s9.RCRecover.ToolBar.superclass.load.apply(this,arguments);this.hFolders.update(a.path);a&&a.fsprovider&&a.fsprovider.device&&(a.fsprovider.isShare(a.path)||a.user&&!a.snapshot)?this.el.addClass(this.cls+"-snaps-grid"):this.el.removeClass(this.cls+"-snaps-grid");
return b}});_._2("_s9.RCRecover");_s9.RCRecover.SnapsView=_._1(_s9.SnapsView,{singleSelect:true,multiSelect:false,constructor:function(){_s9.RCRecover.SnapsView.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.RCRecover.SnapsView.superclass.afterRender.apply(this,arguments);this.el.addClass(this.cls+"-rc")},onDvContextMenu:function(){},onContextMenu:function(){},onDVDblClick:function(){},onDblClick:function(){}});_._2("_s9.RCRecover");
_s9.RCRecover.FilesView=_._1(_s9.FilesView,{singleSelect:true,multiSelect:false,constructor:function(){_s9.RCRecover.FilesView.superclass.constructor.apply(this,arguments)},afterRender:function(){_s9.RCRecover.FilesView.superclass.afterRender.apply(this,arguments);this.el.addClass(this.cls+"-rc")},onDvContextMenu:function(a,b,c,d){d.stopEvent()},onContextMenu:function(){},onDVDblClick:function(){},onDblClick:function(){}});_._2("_s9.RCRecover");
_s9.RCRecover.Center=_._1(_s9.Center,{constructor:function(){_s9.RCRecover.Center.superclass.constructor.apply(this,arguments)},onFSProviderFail:function(a,b){if(this.loadedArgs&&this.loadedArgs.path&&this.loadedArgs.path==b.path)if(this.loadedArgs.snapshot&&this.loadedArgs.pathInSnap){var c;c=this.loadedArgs.user?this.loadedArgs.user.getHomeDirectory():this.loadedArgs.share.getPath();Ext.UI.MessageBox.info({title:_TR("BROWSE_RECOVER_FILES"),msg:String.format(_TR("BROWSE_RECOVER_FILES_PATH_NOT_EXIST"),
this.loadedArgs.pathInSnap)});this.fireEvent("loadargs",{fsprovider:a,path:c,share:this.loadedArgs.share,user:this.loadedArgs.user})}else _s9.RCRecover.Center.superclass.onFSProviderFail.apply(this,arguments)}});_._2("_s9.RCRecover");_s9.RCRecover.Tree=_._1(_s9.Tree,{constructor:function(){_s9.RCRecover.Tree.superclass.constructor.apply(this,arguments)},afterPopulateDevices:function(){}});_._2("_s9");
_s9.Search=_._1(_9,Ext.Container,{cls:"x-browse-search",constructor:function(){this.title=_TR("SEARCH");this.html='<table class="'+this.cls+'-form" cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+"-label "+this.cls+'-form-cell-pad">'+_TR("FILE_SEARCH_KEYWORD")+':</td><td class="searchBarInput" id="'+(this.tfKeywordId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+"-label "+this.cls+'-form-cell-pad"></td><td id="'+(this.lAdvId=Ext.id())+'" class="'+this.cls+'-adv-title">'+
_TR("FILE_SEARCH_ADVANCED")+'</td></tr><tr class="'+this.cls+'-adv-row"><td class="'+this.cls+"-label "+this.cls+'-form-cell-pad"></td><td id="'+(this.chbContentId=Ext.id())+'"></td></tr><tr id="'+(this.trTypeId=Ext.id())+'" class="'+this.cls+'-adv-row"><td class="'+this.cls+"-label "+this.cls+'-form-cell-pad">'+_TR("FILE_SEARCH_TYPE")+':</td><td><table class="'+this.cls+'-qualifier" cellpadding="0" cellspacing="0"><tr><td id="'+(this.cbTypeId=Ext.id())+'" class="'+this.cls+'-form-cell-pad"></td><td class="'+
this.cls+'-form-cell-btn"></td></tr></table></td></tr><tr id="'+(this.trExtId=Ext.id())+'" class="'+this.cls+'-adv-row"><td class="'+this.cls+"-label "+this.cls+"-form-cell-pad "+this.cls+'-label-ext">'+_TR("FILE_SEARCH_EXTENSION")+':</td><td><table class="'+this.cls+'-qualifier" cellpadding="0" cellspacing="0"><tr><td id="'+(this.tfExtId=Ext.id())+'" class="'+this.cls+'-form-cell-pad"></td><td class="'+this.cls+'-form-cell-btn"></td></tr></table></td></tr><tr id="'+(this.trSizeId=Ext.id())+'" class="'+
this.cls+'-adv-row"><td class="'+this.cls+"-label "+this.cls+"-form-cell-pad "+this.cls+'-label-size">'+_TR("FILE_SEARCH_SIZE")+':</td><td><table class="'+this.cls+'-qualifier" cellpadding="0" cellspacing="0"><tr><td id="'+(this.cbSizeOpId=Ext.id())+'" class="'+this.cls+'-form-cell-pad"></td><td id="'+(this.sfSizeId=Ext.id())+'" class="'+this.cls+'-form-cell-pad"></td><td class="'+this.cls+"-label "+this.cls+'-form-cell-pad">'+_TR("MB")+'</td><td class="'+this.cls+'-form-cell-btn"></td></tr></table></td></tr><tr id="'+
(this.trDateId=Ext.id())+'" class="'+this.cls+'-adv-row"><td class="'+this.cls+"-label "+this.cls+"-form-cell-pad "+this.cls+'-label-date">'+_TR("FILE_SEARCH_DATE")+':</td><td><table class="'+this.cls+'-qualifier" cellpadding="0" cellspacing="0"><tr><td id="'+(this.cbDateTypeId=Ext.id())+'" class="'+this.cls+'-form-cell-pad"></td><td id="'+(this.dfStartId=Ext.id())+'" class="'+this.cls+'-form-cell-pad"></td><td id="'+(this.dfEndId=Ext.id())+'" class="'+this.cls+'-form-cell-pad"></td><td class="'+
this.cls+'-form-cell-btn"></td></tr></table></td></tr></table><div class="'+this.cls+'-buttons" id="'+(this.bApplyId=Ext.id())+'"></div><div class="'+this.cls+'-results" id="'+(this.lResultsId=Ext.id())+'"></div><div style="display:none;" id="'+(this.bClearId=Ext.id())+'"></div><div class="x-clear"></div>';_s9.Search.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");_a(a,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();
_a(this.spServManager,"_i1").Advise(this);this.spSYSManager=a.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);if(this.spSYSManager.getSupportFileSearch()=="1")this.fileSearchServiceWindow=CComSingleton(_s1.FileSearchServiceWindow)},afterRender:function(){_s9.Search.superclass.afterRender.apply(this,arguments);this.lAdv=Ext.get(this.lAdvId);
this.lAdv.on("click",this.onAdvClick,this);this.tfKeyword=new Ext.UI.TextField({width:460,enableKeyEvents:true,renderTo:this.tfKeywordId,listeners:{specialkey:this.onSpecialKeypress,scope:this}});this.chbContent=new Ext.UI.Checkbox({boxLabel:_TR("FILE_SEARCH_IN_CONTENT"),renderTo:this.chbContentId});this.renderFileSerchInContent=true;this.cbDateType=new Ext.UI.ComboBox({width:142,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["fileLastModified",
_TR("FILE_SEARCH_DATE_LAST_MODIFIED")]]}),valueField:"id",displayField:"text",value:"fileLastModified",renderTo:this.cbDateTypeId});this.dfStart=new Ext.UI.DateField({emptyText:_TR("FILE_SEARCH_DATE_FROM"),maxDate:new Date,width:105,renderTo:this.dfStartId});this.dfStart.on("change",this.onDateChanged,this);this.dfEnd=new Ext.UI.DateField({emptyText:_TR("FILE_SEARCH_DATE_TO"),maxDate:new Date,width:105,renderTo:this.dfEndId});this.dfEnd.on("change",this.onDateChanged,this);this.cbSizeOp=new Ext.UI.ComboBox({width:54,
typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["greater",">="],["lesser","<="]]}),valueField:"id",displayField:"text",value:"greater",renderTo:this.cbSizeOpId});this.sfSize=new Ext.UI.SpinnerField({width:84,value:"0",minValue:0,incrementValue:1,alternateIncrementValue:10,renderTo:this.sfSizeId});this.cbType=new Ext.UI.ComboBox({width:142,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["",
_TR("FILE_SEARCH_TYPE_ANY")],["Document",_TR("FILE_SEARCH_TYPE_DOCUMENT")],["Video",_TR("FILE_SEARCH_TYPE_VIDEO")],["Audio",_TR("FILE_SEARCH_TYPE_AUDIO")],["Image",_TR("FILE_SEARCH_TYPE_IMAGE")],["HtmlDocument",_TR("FILE_SEARCH_TYPE_HTMLDOCUMENT")]]}),valueField:"id",displayField:"text",value:"",renderTo:this.cbTypeId});this.tfExt=new Ext.UI.TextField({width:142,renderTo:this.tfExtId,enableKeyEvents:true,listeners:{specialkey:this.onSpecialKeypress,scope:this}});this.bApply=new Ext.UI.Button({cls:this.cls+
"-btn searchBarBtn",text:_TR("SEARCH"),width:100,acceptbtn:true,renderTo:this.bApplyId,listeners:{click:this.onSearchClick,scope:this}});this.bClear=new Ext.UI.Button({cls:this.cls+"-btn clearSearchInputBtn",text:"",acceptbtn:true,renderTo:this.bClearId,listeners:{click:this.onClearClick,scope:this}});this.bCancel=new Ext.UI.Button({cls:this.cls+"-btn",text:_TR("CANCEL"),width:100,renderTo:this.bApplyId,listeners:{click:function(){this.hide()},scope:this}});this.lResults=Ext.get(this.lResultsId);
this.loadMask=new Ext.UI.LoadMask(this.el,{frame:false})},onDateChanged:function(a,b){b&&a.setValue(_.formatDate(b))},hide:function(){this.hidden||_s9.Search.superclass.hide.apply(this,arguments)},fileSearchServiceOnClicked:function(){if(!this.searchService.mounted){this.fileSearchServiceWindow.show();this.fileSearchServiceWindow.on("hide",this.onFileSearchSettingsHide,this);this.fileSearchServiceWindow.on("applyclick",this.onFileSearchSettingsChanged,this)}},loadArgs:function(a){this.searchService=
this.spServManager.getSystemServiceByName("file-search");this.checkEnbleContentIndexing();if(this.loadedArgs&&this.loadedArgs.fsprovider){this.loadedArgs.fsprovider.un("fssearchready",this.onSearchReady,this);this.loadedArgs.fsprovider.un("fssearchfail",this.onSearchFail,this)}this.loadedArgs=a;a.fsprovider.on("fssearchready",this.onSearchReady,this);a.fsprovider.on("fssearchfail",this.onSearchFail,this);this.removeClass(this.cls+"-err-date");this.lResults.update(String.format(_TR("FILE_SEARCH_RESULTS"),
0,0));this.tfKeyword.focus(false,true)},clenSearchData:function(){this.el.removeClass(this.cls+"-adv-exp");this.tfKeyword&&this.tfKeyword.setValue("");this.chbContent&&this.chbContent.setValue(false);this.cbType&&this.cbType.setValue("");this.tfExt&&this.tfExt.setValue("");this.cbSizeOp&&this.cbSizeOp.setValue("greater");this.sfSize&&this.sfSize.setValue(0);this.cbDateType&&this.cbDateType.setValue("fileLastModified");this.dfStart&&this.dfStart.setValue("");this.dfEnd&&this.dfEnd.setValue("")},checkEnbleContentIndexing:function(){if(!this.searchService.getIndexContent()&&
this.renderFileSerchInContent)this.disableSearchInContent();else this.searchService.getIndexContent()&&!this.renderFileSerchInContent&&this.enableSearchInContent()},disableSearchInContent:function(){var a=String.format(_TR("FILE_SEARCH_INDEXING_CONTENT_DISABLED_MESSAGE"),String.format('<span class="x-frontview-link" id="{0}">{1}</span>',this.fileSearchId=Ext.id(),_TR("FILE_SEARCH_INDEXING_CONTENT_ENABLED")));this.chbContent.setDisabled(true);this.chbContent.setLabel(a);this.chbContent.setValue(false);
Ext.get(this.fileSearchId)&&Ext.get(this.fileSearchId).on("click",function(b){b.stopEvent();this.fileSearchServiceOnClicked()},this);this.renderFileSerchInContent=false},enableSearchInContent:function(){this.chbContent.setDisabled(false);this.chbContent.setLabel(_TR("FILE_SEARCH_IN_CONTENT"));this.renderFileSerchInContent=true},onFileSearchSettingsHide:function(){this.fileSearchServiceWindow.un("hide",this.onFileSearchSettingsHide,this);this.fileSearchServiceWindow.un("applyclick",this.onFileSearchSettingsChanged,
this)},onFileSearchSettingsChanged:function(a,b){!this.searchService.getEnable()&&b&&this.enableShares();this.searchService.putEnable(b);this.spServManager.commitSystemService("system_service_commit");this.searchService.getIndexContent()&&this.enableSearchInContent()},enableShares:function(a){a||(a=this.spShareManager.getShares());if(a!=_4&&a&&a.length){var b=true;a.forEach(function(c){if(_a(c,"_i38").getIndexed())b=false},this);if(b){a.map(function(c){c=_a(c,"_i38");c.putIndexed(true);
return c},this);this.spShareManager.commitShares("system-file-search-commit-shares",a)}}},onAdvClick:function(){this.el.hasClass(this.cls+"-adv-exp")?this.el.removeClass(this.cls+"-adv-exp"):this.el.addClass(this.cls+"-adv-exp");this.fireEvent("resize",this)},onSpecialKeypress:function(a,b){switch(b.getKey()){case b.ENTER:this.onSearchClick();b.stopEvent();break;case b.ESC:this.hide();break}},onSearchClick:function(){this.loadedArgs.fsprovider.fireEvent("fssearchclean");this.searchService=this.spServManager.getSystemServiceByName("file-search");
this.checkEnbleContentIndexing();if(this.validate()){var a={keyword:this.tfKeyword.getValue(),location:this.loadedArgs.path,content:this.renderFileSerchInContent?this.chbContent.getValue():false};a.date={type:this.cbDateType.getValue()};if(this.dfStart.getDateValue())a.date.min=_.convertDateToFixedFormat(new Date(this.dfStart.getDateValue().getTime()),"yyyy-MM-dd hh:mm:ss");if(this.dfEnd.getDateValue())a.date.max=_.convertDateToFixedFormat(new Date(this.dfEnd.getDateValue().getTime()+864E5),"yyyy-MM-dd hh:mm:ss");
a.size={op:this.cbSizeOp.getValue(),value:this.sfSize.getValue()};a.type=this.cbType.getValue();a.ext=this.tfExt.getValue();a.startIndex=0;a.count=150;a.isScroll=false;this.fireEvent("setCenterScrollerP");this.searchArgs=a;this.checkSearchEnabled(a)}},loadNextPageData:function(){var a=this.searchArgs;if(a&&a.startIndex+a.count<a.totalSize){this.loadMask.show();a.startIndex+=a.count;a.count=150;a.isScroll=true;this.loadedArgs.fsprovider.search(a)}},onClearClick:function(){this.clenSearchData()},validate:function(){var a=
false;this.removeClass(this.cls+"-err-date");if(this.dfStart.getDateValue()&&this.dfEnd.getDateValue()&&this.dfStart.getDateValue()>this.dfEnd.getDateValue()){this.addClass(this.cls+"-err-date");this.dfStart.focus();a=true}return!a},checkSearchEnabled:function(a){var b=this.spShareManager.getShares(),c=[],d=false;if(!(!b||b.length===0)){this.loadedArgs.share&&b.forEach(function(e){e=_a(e,"_i38");if(e.getName()===this.loadedArgs.share.getName()&&e.getIndexed())d=true},this);if(this.searchService.getEnable()&&
(!this.loadedArgs.share||d)){this.loadMask.show();this.loadedArgs.fsprovider.search(a)}else Ext.UI.MessageBox.confirm({msg:this.searchService.getEnable()?_TR("ENABLE_FILE_SEARCH_SHARE"):_TR("ENABLE_FILE_SEARCH_SERVICE"),icon:Ext.UI.MessageBox.WARNING,fn:function(e){if(e=="yes")if(this.loadedArgs.share){if(!(!b||b.length===0)){b.forEach(function(f){f=_a(f,"_i38");f.getName()===this.loadedArgs.share.getName()&&f.putIndexed(true);c.push(f)},this);this.enableSearch(a);this.spShareManager.commitShares("system-file-search-commit-shares",
c)}}else{this.enableSearch(a);this.enableShares(b)}},scope:this})}},applySearch:function(a){this.loadMask.show();this.loadedArgs.fsprovider.search(a)},enableSearch:function(a){this.searchService.putEnable(true);var b=new String("system_service_commit");b.args=a;this.spServManager.commitSystemService(b)},onSearchReady:function(a,b,c,d){this.loadMask.hide();if(d.isScroll){this.foldersLen+=b.length;this.filesLen+=c.length}else{this.foldersLen=b.length;this.filesLen=c.length}this.lResults.update(String.format(_TR("FILE_SEARCH_RESULTS"),
this.foldersLen,this.filesLen))},onSearchFail:function(){this.loadMask.hide();this.lResults.update(_TR("FILE_SEARCH_ERROR"))},_i35:{_o1:function(a,b){this.rendered&&b=="system_service_commit"&&this.loadMask.show()},_o3:function(a,b,c){if(this.rendered)if(c=="system_service_commit"){this.loadMask.hide();c.args&&this.applySearch(c.args)}else if(c=="sync-update-services"){this.searchService=this.spServManager.getSystemServiceByName("file-search");this.checkEnbleContentIndexing()}}}});
_._2("_","_._3","_._3.ConnectRepair");_._3.ConnectRepair.ConnectRepairWindow="ConnectRepair.ConnectRepairWindow";Ext.namespace("Ext.ConnectRepair");
Ext.ConnectRepair.ConnectRepairWindow=_._1(_._3.ConnectRepair.ConnectRepairWindow,_.JSCom._9,Ext.Component,_i4,IExtNative,_is,_i45,IConnectRepair,{POLL_CURRENT_HOST_DELAY:2E3,POLL_DISCOVER_HOST_DELAY:2E4,POLL_HOST_RANGE_DELAY:6E4,POLL_TIMEOUT:5E3,WAIT_DELAY:5E3,WAIT_RESTORE_TIMEOUT:3E4,RESTORE_CYCLE_LIFETIME:18E4,REBOOT_CYCLE_LIFETIME:3E5,UPGRADE_CYCLE_LIFETIME:6E5,firmware:false,factory:false,protocol:undefined,host:undefined,ip:undefined,
sn:undefined,processed:false,constructor:function(a){Ext.ConnectRepair.ConnectRepairWindow.superclass.constructor.call(this,a);this.protocol=window.location.protocol;this.host=window.location.hostname;this.ip=this.isIP(this.host)?this.host:undefined},getSerialNumber:function(){if(!this.sn)this.sn=Ext.util.Cookies.get("sn");return this.sn},setSerialNumber:function(a){Ext.util.Cookies.set("sn",a,new Date((new Date).getTime()+26784E5));this.sn=a},setFirmwareMode:function(a){this.firmware=a},setFactoryMode:function(a){this.factory=
a},afterRender:function(a){Ext.ConnectRepair.ConnectRepairWindow.superclass.afterRender.call(this,a);Ext.fly(document.body).addClass("repair-mode");this.el.addClass("repair-conn");this.bSafeModeNextIds={sm0:{btnId:Ext.id()},sm1:{btnId:Ext.id()},sm2:{btnId:Ext.id()},sm3:{btnId:Ext.id()},sm4:{btnId:Ext.id()}};a=new Ext.Template('<div class="repair-block repair-elsm{status} x-hide-display repair-sm-block"><div><div class="x-system-update-error repair-sm-icon"></div><div class="repair-sm-title-block"><div class="repair-title">{title}</div><div class="repair-message repair-secondTitle">{secondTitle}</div></div></div><div class="repair-message repair-sm-content-block">{content}</div><div><div class="repair-sm-content-btn" id="{btnId}"></div><div style="clear:both;"></div></div></div>',
{compiled:true,disableFormats:true});this.el.update('<div class="repair-wrap"><div class="repair-header"><div class="x-frontview-header-logo"><div class="x-frontview-header-logo-readynas"></div></div></div><div class="repair-body"><div class="repair-block repair-polling"><div class="repair-message"></div><div class="repair-progress"><div class="repair-progress-line"></div></div></div><div class="repair-block repair-shutdown"><div class="repair-message">'+this.TR("CONNECTREPAIR_SHUTDOWN_DESC")+'</div></div><div class="repair-block repair-fail"><div class="repair-title">'+
this.TR("CONNECTREPAIR_FAIL_TITLE")+'</div><div style="font" class="repair-message">'+this.TR("CONNECTREPAIR_FAIL_DESC")+'</div></div><div class="repair-block repair-logout" style="top:15%"><div class="repair-title">'+this.TR("CONNECTREPAIR_LOGOUT_TITLE")+'</div><div style="text-align:left" class="repair-message">'+this.TR("CONNECTREPAIR_LOGOUT_DESC")+'</div><div><div class="repair-sm-content-btn" id="'+(this.bLogInId=Ext.id())+'"></div><div style="clear:both;"></div></div></div>'+a.apply({status:"0",
title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_0_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_0_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_0_CONTENT"),btnId:this.bSafeModeNextIds.sm0.btnId})+a.apply({status:"1",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_1_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_1_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_1_CONTENT"),btnId:this.bSafeModeNextIds.sm1.btnId})+a.apply({status:"2",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_2_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_2_SECOND_TITLE"),
content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_2_CONTENT"),btnId:this.bSafeModeNextIds.sm2.btnId})+a.apply({status:"3",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_3_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_3_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_3_CONTENT"),btnId:this.bSafeModeNextIds.sm3.btnId})+a.apply({status:"4",title:_TR("CONNECTREPAIR_FAIL_SAFEMODE_4_TITLE"),secondTitle:_TR("CONNECTREPAIR_FAIL_SAFEMODE_4_SECOND_TITLE"),content:_TR("CONNECTREPAIR_FAIL_SAFEMODE_4_CONTENT"),
btnId:this.bSafeModeNextIds.sm4.btnId})+"</div></div>");this.bLogIn=new Ext.UI.Button({text:_TR("LOGIN"),acceptbtn:true,handler:this.onLogInClick,scope:this,renderTo:this.bLogInId});this.elpoll=Ext.get(this.el.query(".repair-polling")[0]);this.elpollmsg=Ext.get(this.elpoll.query(".repair-message")[0]);this.elprogress=Ext.get(this.elpoll.query(".repair-progress-line")[0]);this.elshutdown=Ext.get(this.el.query(".repair-shutdown")[0]);this.elfail=Ext.get(this.el.query(".repair-fail")[0]);this.ellogout=
Ext.get(this.el.query(".repair-logout")[0]);this.elsm0=Ext.get(this.el.query(".repair-elsm0")[0]);this.elsm1=Ext.get(this.el.query(".repair-elsm1")[0]);this.elsm2=Ext.get(this.el.query(".repair-elsm2")[0]);this.elsm3=Ext.get(this.el.query(".repair-elsm3")[0]);this.elsm4=Ext.get(this.el.query(".repair-elsm4")[0]);(a=Ext.get(this.elfail.query(".repair-retry")[0]))&&a.on("click",this.onReconnectClick,this);a={text:_TR("NEXT"),acceptbtn:true,width:125,disabled:false,renderTo:this.bSafeModeNextIds.sm0.btnId,
handler:function(d){switch(d.id){case this.bApply0.id:case this.bApply1.id:case this.bApply2.id:if(this.safeModeIntervalID){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}localStorage.fromSafeMode=1;document.location.href="./wizard.html";break;case this.bApply3.id:case this.bApply4.id:if(this.safeModeIntervalID){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}this.el.remove();d=_a(_7(_._3.System.Frame),
"IExtNative").getNative().alarmbar;d.bShow.setVisible(false);d.bClose.setVisible(false);_a(d,"IAlarmReporter").reportAlarm("Settings will save to disk once a volume is created.",1);break}},scope:this};for(var c=0;c<5;++c)this["bApply"+c]=new Ext.UI.Button(Ext.apply(a,{text:_TR("NEXT"),renderTo:this.bSafeModeNextIds["sm"+c].btnId}))},onLogInClick:function(){this.fromLogOutFun||window.location.reload()},onReconnectClick:function(a){a.preventDefault();this.setRestoreMode("polling",this.TR("CONNECTREPAIR_POLL_ATTEMPT"),
this.RESTORE_CYCLE_LIFETIME)},updateElement:function(a){if(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_TITLE")=="CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_TITLE")setTimeout(function(){this.updateElement(a)}.bind(this),100);else{a==3||a==4?this["bApply"+a].setText(_TR("CONTINUE")):this["bApply"+a].setText(_TR("NEXT"));Ext.get(Ext.get(this["elsm"+a].query(".repair-title")[0])).update(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_TITLE"));Ext.get(Ext.get(this["elsm"+a].query(".repair-secondTitle")[0])).update(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+
a+"_SECOND_TITLE"));Ext.get(Ext.get(this["elsm"+a].query(".repair-sm-content-block")[0])).update(_TR("CONNECTREPAIR_FAIL_SAFEMODE_"+a+"_CONTENT"));this["elsm"+a].removeClass("x-hide-display")}},logOut:function(a){var c=(new Date).getTime().toString(),d=!a?this.spSecurityManager.getLoginUserName():c;!a&&(a=location.href);if(_.isIE){document.execCommand("ClearAuthenticationCache","false");location.href=a}else(function(b){if(b){isTimeOut=false;b.open("GET",a,true,_.isSafari?"":d,c);b.send("");b.onreadystatechange=
function(){if(b.readyState==4){isTimeOut=true;location.href=a}};return 1}})(window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null)},setRestoreMode:function(a,c,d){this.rendered||this.render(document.body);this.elpoll.addClass("x-hide-display");this.elshutdown.addClass("x-hide-display");this.elfail.addClass("x-hide-display");this.ellogout.addClass("x-hide-display");for(var b=0;b<5;++b)this["elsm"+b].addClass("x-hide-display");switch(a){case "polling":this.elpoll.removeClass("x-hide-display");
this.startRestore(c,d);break;case "shutdown":this.elshutdown.removeClass("x-hide-display");break;case "fail":this.elfail.removeClass("x-hide-display");break;case "logout":this.ellogout.removeClass("x-hide-display");c=="1"?this.spSysManager.preLogout("pre-log-out"):this.logOut();break;case "elsm0":this.updateElement(0);break;case "elsm1":this.updateElement(1);break;case "elsm2":this.updateElement(2);break;case "elsm3":this.updateElement(3);break;case "elsm4":this.updateElement(4);break;default:break}},
startRestore:function(a,c){clearTimeout(this.finishProcId);this.finishProcId=setTimeout(function(){this.finishRestore(undefined)}.bind(this),c);this.elpollmsg.update(a);var d=100/c*1E3,b=0,e=this.elprogress.dom;clearInterval(this.restoreProcId);e.style.left="-100%";this.restoreProcId=setInterval(function(){b+=d;if(b<=100)e.style.left=b-100+"%"},1E3);this.waitRestore()},finishRestore:function(a,c){clearTimeout(this.waitRestoreProcId);clearTimeout(this.forceRestoreProcId);clearInterval(this.restoreProcId);
this.elprogress.dom.style.left=0;if(a)this.logOut(this.protocol+"//"+a+"/admin/index.html");else c||this.setRestoreMode("fail")},waitRestore:function(){this.forceRestoreProcId=setTimeout(function(){this.startFirstRestoreStep()}.bind(this),this.WAIT_RESTORE_TIMEOUT);this.updateDevstate("repair-wait-devstate")},startFirstRestoreStep:function(){clearTimeout(this.waitRestoreProcId);clearTimeout(this.forceRestoreProcId);setTimeout(function(){this.pollCurrentHost();this.startSecondRestoreStep()}.bind(this),
this.WAIT_DELAY)},startSecondRestoreStep:function(){this.pollDiscoverHost();this.startThirdRestoreStep()},startThirdRestoreStep:function(){this.pollHostRange()},pollCurrentHost:function(){clearTimeout(this.pollCurrentHostProcId);this.pollCurrentHostProcId=setTimeout(function(){!this.factory&&this.updateDevstate("repair-update-devstate")}.bind(this),this.POLL_CURRENT_HOST_DELAY)},pollDiscoverHost:function(){clearTimeout(this.pollDiscoverHostProcId);this.pollDiscoverHostProcId=setTimeout(function(){this.getSerialNumber()?
this.discover(this.getSerialNumber(),function(a){this.checkHosts(a,this.getSerialNumber(),function(c,d){d?this.finishRestore(c):this.pollDiscoverHost()}.bind(this))}.bind(this)):this.pollDiscoverHost()}.bind(this),this.POLL_DISCOVER_HOST_DELAY)},pollHostRange:function(){clearTimeout(this.pollHostRangeProcId);this.pollHostRangeProcId=setTimeout(function(){this.checkHosts(this.getIPRange(this.ip,!this.factory),this.getSerialNumber(),function(a,c){c?this.finishRestore(a):this.pollHostRange()}.bind(this))}.bind(this),
this.POLL_HOST_RANGE_DELAY)},processRestore:function(){this.process("polling",this.TR("CONNECTREPAIR_POLL_CONNECT"),false,this.RESTORE_CYCLE_LIFETIME)},processReboot:function(){if(this.firmware)this.process("polling",this.TR("CONNECTREPAIR_POLL_UPGRADE"),false,this.UPGRADE_CYCLE_LIFETIME);else if(this.factory){this.process("polling",this.TR("CONNECTREPAIR_POLL_FACTORY"),false,this.UPGRADE_CYCLE_LIFETIME);isTimeOut=true}else this.process("polling",this.TR("CONNECTREPAIR_POLL_RESTART"),false,this.REBOOT_CYCLE_LIFETIME)},
processShutdown:function(){this.process("shutdown",undefined,true)},process:function(a,c,d,b){if(!this.processed||d){this.processed=true;this.setRestoreMode(a,c,b)}},checkApache:function(a){_.lib.Ajax.request("GET",this.protocol+"//"+this.host,{success:function(){a(true)},failure:function(){a(false)},timeout:this.POLL_TIMEOUT})},checkIframe:function(a){if(_.isSecure){var c,d=Ext.id(),b=document.createElement("iframe"),e=function(f){clearTimeout(c);b.onload=b.onerror=undefined;document.body.removeChild(b);
a(f)};b.id=d;b.name=d;b.style.width="0px";b.style.height="0px";b.style.zIndex=-110;b.style.left="100px";b.style.top="100px";b.style.position="fixed";b.src="https://"+this.host+"/?_="+Date.now();b.onload=function(){try{b.contentDocument&&b.contentDocument.title=="NETGEAR ReadyNAS"?e(true):e(false)}catch(f){e(false)}};b.onerror=function(){e(false)};document.body.appendChild(b);c=setTimeout(function(){e(false)},this.POLL_TIMEOUT)}else a(false)},checkHosts:function(a,c,d){if(a.length>0)for(var b=this.checkHost,
e=0,f=a.length;e<f;++e)(function(g){setTimeout(function(){b(g,c,d)},e*50)})(a[e]);else d(undefined,false)},checkHost:function(a,c,d){_.isSecure?d(a,false):_.lib.Ajax.request("GET","http://"+a+":10000/nasService.xml",{success:function(b){b=(new _.Xml.document(b.responseText.replace('xmlns="urn:schemas-upnp-org:device-1-0"',""))).selectSingleNode("root/device/serialNumber");d(a,b&&c==b.getNodeText())},failure:function(){d(a,false)},timeout:this.POLL_TIMEOUT})},updateDevstate:function(a){this.spDevice.__s.sendXml(_1._2(String.format('<xs:get id="{0}" resource-id="DeviceState" resource-type="DeviceState"/>',
_.id())),a,undefined,undefined,undefined,this.POLL_TIMEOUT)},discover:function(a,c){if(_.isSecure)c([]);else{var d=new _.Crx.Connection;d.on("requestcomplete",function(b,e){b=(b=e?e.responseObject:undefined)?b.data:undefined;b=(b?b.items:[])[0];e=[];var f;if(b&&b.network)for(var g=0,h=b.network.length;g<h;++g)(f=b.network[g].IPv4_Address)&&e.push(f);c(e)}.bind(this));d.on("requestexception",function(){c([])}.bind(this));d.request({method:"GET",url:"https://test-radar.io.netgear.com/radar/v1/info?id="+
a,scriptTag:true,timeout:this.POLL_TIMEOUT})}},getIPRange:function(a,c){var d=[];if(this.isIP(a))for(var b=a.match(/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.)\d{1,3}$/)[1],e,f=0;f<255;++f){e=b+f;c&&e==a||d.push(e)}return d},isIP:function(a){return _.Utils.isValidIPAddress(a)},exclude:function(a,c){for(var d=[],b,e=0,f=a.length;e<f;++e){b=a[e];b!=c&&d.push(b)}return d},TR:function(a){var c=this.translate(a);if(a=="CONNECTREPAIR_FAIL_DESC"){a=document.links_cloud;var d;if(_.isWindows)d="RAIDar.exe";else if(_.isMac)d=
"RAIDar.dmg";c=String.format(c,"#reconnect",d?a+"/client/install/"+d:"http://www.readynas.com/downloads","https://kb.netgear.com/26883/ReadyNAS-OS-6-Admin-Page-is-offline")}return c},translate:function(a){var c=_TR(a);if(c==a)switch(a){case "CONNECTREPAIR_POLL_ATTEMPT":return"Attempting to reconnect to the ReadyNAS Admin Page...";case "CONNECTREPAIR_POLL_CONNECT":return"Connecting to the ReadyNAS Admin Page...";case "CONNECTREPAIR_POLL_RESTART":return"Wait while your ReadyNAS system is restarting.";
case "CONNECTREPAIR_POLL_UPGRADE":return"Wait while your ReadyNAS system is restarting and updating firmware.<br/>Warning: Do not power off your system during this process.";case "CONNECTREPAIR_POLL_FACTORY":return"Wait while your ReadyNAS system is restarting and being re-initialized to its factory default state.<br/>Warning: Do not power off your system during this process.";case "CONNECTREPAIR_SHUTDOWN_DESC":return"Your ReadyNAS is powering down now.<br/>Close this window and wait for system LEDs to turn off.";
case "CONNECTREPAIR_FAIL_TITLE":return"ReadyNAS Admin Page is offline";case "CONNECTREPAIR_FAIL_DESC":return'This error message means that the browser can\'t access your ReadyNAS storage system.<br/><br/>Check for these possible problems:<ul><li>Your ReadyNAS storage system is turned off. Check if the Power LED is lit. If it is not, turn the unit on and try again.</li><li>Your ReadyNAS system is still booting. Wait until the Power LED stops blinking.</li><li>Your ReadyNAS storage system is very busy, perhaps with scheduled backup jobs, snapshots, running apps or heavy user demands. If this is the case, try later when scheduled tasks are complete, when no apps are running, or when fewer users are accessing the storage system.</li><li>If none of the above applies, you can find <a href="{2}" target="_blank">help online</a>.</li></ul>';
case "CONNECTREPAIR_LOGOUT_TITLE":return"Your Admin Page session has ended.";case "CONNECTREPAIR_LOGOUT_DESC":return"Your ReadyNAS Admin Page session has ended either because you logged out or the Admin Page was idl for an hour.To log back into the Admin Page,click <strong>Login</strong>.";default:return a}return c},showSafeModePopUp:function(a){if(a==""){localStorage.removeItem("safeMode");if(this.safeModeIntervalID){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}}else{localStorage.safeMode=
1;localStorage.fromSafeMode!="1"&&localStorage.fromSafeModeWizard!="1"&&this.setRestoreMode("elsm"+a)}},_is:{OnConnectionLost:function(a,c){if(!this.processed&&(!c.__s.xmlResponse||c.__s.xmlResponse.status!=200&&c.__s.xmlResponse.status!=-1||!c.__s.xmlResponse.isAbort))this.updateDevstate("repair-confirm-devstate")},OnDeviceHalt:function(){this.processShutdown()},OnDeviceReboot:function(){this.processReboot()},_o3:function(a,c,d){if(d=="repair-update-devstate")a==_5?this.finishRestore(this.host):
this.pollCurrentHost();else if(d=="repair-wait-devstate")if(a==_5){clearTimeout(this.waitRestoreProcId);this.waitRestoreProcId=setTimeout(function(){this.updateDevstate("repair-wait-devstate")}.bind(this),this.POLL_CURRENT_HOST_DELAY)}else this.startFirstRestoreStep();else d=="repair-confirm-devstate"&&a!=_5&&this.processRestore()}},_i45:{_o2:function(a,c){if(c=="repair-update-sysinfo"){var d=_a(this.spSysManager.getSysInfo(),"_i43");this.setSerialNumber(d.getSerial());
a=d.getSafeMode();var b=d.getOSRootCorrupt();d=d.getReadOnlyDataVolumes();var e="";if(a=="1")if(b=="1"&&d=="1")e="4";else if(b=="1")e="3";else this.zfsDisksManager.updateDiskEnclosures("sync-update-zfsdisks-safemode");if(e!=""){this.showSafeModePopUp(e);if(typeof this.putDeviceCallBackFun=="function"){this.putDeviceCallBackFun();this.putDeviceCallBackFun=null}}}if(c=="home-update-hourmap"){this.hourmapManager=_a(this.spSysManager.getHourMapInfo(),"ISysHourMapInfo");localStorage.setItem("enable24Hour",
this.hourmapManager.getEnable());localStorage.setItem("dataFormatType",this.hourmapManager.getFormatType())}c=="pre-log-out"&&this.logOut()}},_i4h:{_o2:function(a,c){a="";if(c=="sync-update-zfsdisks-safemode"){c=this.zfsDisksManager.getDiskEnclosures();for(var d=0;d<c.length;d++){var b=_a(c[d],"_i4e").getSafeModeStatus();if(b=="2"){a="2";break}else switch(b){case "0":if(a!="1")a="0";break;case "1":a="1";break}}}a!=""&&this.showSafeModePopUp(a);return _5}},
IConnectRepair:{putDevice:function(a,c){if(typeof c=="function")this.putDeviceCallBackFun=c;this.spDevice&&_a(this.spDevice,"_i1").Unadvise(this);this.spDevice=a;_a(a,"_i1").Advise(this);this.spSysManager&&_a(this.spSysManager,"_i1").Unadvise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.zfsDisksManager=a.getZFSDisksManager();_a(this.zfsDisksManager,"_i1").Advise(this);this.spSecurityManager=
a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spSysManager.updateSysInfo("repair-update-sysinfo");this.spSysManager.updateHourMapInfo("home-update-hourmap");if(localStorage.fromSafeMode!="1"&&localStorage.fromSafeModeWizard!="1"&&!localStorage.safeModeIntervalID){var d=this.spSysManager;localStorage.safeModeIntervalID=this.safeModeIntervalID=setInterval(function(){if(localStorage.safeMode!="1"){clearInterval(this.safeModeIntervalID);localStorage.removeItem("safeModeIntervalID")}else d.updateSysInfo("repair-update-sysinfo")},
5E3)}},displayDeviceHalt:function(){this.processShutdown()},displayDeviceReboot:function(){this.processReboot()}}});Ext.namespace("Ext.ConnectRepair");Ext.ConnectRepair.IConnectRepair=_._1(IExtNative,{IConnectRepair:{putDevice:function(){return _3},displayDeviceHalt:function(){return _3},displayDeviceReboot:function(){return _3}}});var IConnectRepair=Ext.ConnectRepair.IConnectRepair;
_._2("_","_._3","_._3.CronSchedule");
Ext.CronSchedule=_._1(Ext.Container,{useContinuously:false,cls:"x-cronschedule",width:510,height:340,constructor:function(a){if(a&&a.useContinuously)this.useContinuously=a.useContinuously;this.html='<table class="'+this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+'-datatable-labelcell"><nobr style="padding-right: 5px;">'+_TR("CRON_SCHEDULE_PATTERN")+_TR("COLON")+'</nobr></td><td id="'+(this.cbPatternId=Ext.id())+'"></td></tr></table><div id="'+(this.ctPatternId=Ext.id())+'"></div><div id="'+
(this.ctStartingId=Ext.id())+'"></div><div id="'+(this.ctHumanStringId=Ext.id())+'" class="'+this.cls+'-human-string"></div>';var c=[];this.useContinuously&&c.push(["c",_TR("CONTINUOUSLY")]);c.push(["d",_TR("CRON_SCHEDULE_PATTERN_DAILY")]);c.push(["w",_TR("CRON_SCHEDULE_PATTERN_WEEKLY")]);c.push(["m",_TR("CRON_SCHEDULE_PATTERN_MONTHLY")]);c.push(["y",_TR("CRON_SCHEDULE_PATTERN_YEARLY")]);this.cbPattern=new Ext.UI.ComboBox({width:120,lazyRender:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({id:0,
fields:["id","text"],data:c}),value:"w",valueField:"id",displayField:"text",listeners:{scope:this,select:this.onPatternSelect}});Ext.CronSchedule.superclass.constructor.call(this,a)},initialUPMode:function(){this.isUPMode=true;this.cbPattern.setValue("w")},onPatternSelect:function(a,c){this.ctStarting.displayAMPM(localStorage.getItem("enable24Hour")!="true");this.selectedPatternCt&&this.selectedPatternCt.hide();switch(c.data.id){case "c":this.selectedPatternCt=this.getContinuouslyCt();this.ctStarting.setMode({});
break;case "h":this.selectedPatternCt=this.getHourlyCt();this.ctStarting.setMode({});break;case "d":this.selectedPatternCt=this.getDailyCt();this.selectedPatternCt.initialButtons();this.ctStarting.setMode({m:true});this.ctStarting.displayAMPM(false);break;case "w":this.selectedPatternCt=this.getWeeklyCt();this.ctStarting.setMode({h:true,m:true});break;case "m":this.selectedPatternCt=this.getMonthlyCt();this.ctStarting.setMode({h:true,m:true});break;case "y":this.selectedPatternCt=this.getYearlyCt();
this.ctStarting.setMode({d:true,h:true,m:true});break}this.selectedPatternCt.render(this.el);this.selectedPatternCt.show();!this.isUPMode&&this.updateHumanString()},getContinuouslyCt:function(){return this.ctContinuously=this.ctContinuously||new Ext.CronSchedule.ContinuouslyCt({mins:"*",renderTo:this.ctPatternId,listeners:{change:this.updateHumanString,scope:this}})},getHourlyCt:function(){return this.ctHourly=this.ctHourly||new Ext.CronSchedule.HourlyCt({renderTo:this.ctPatternId,listeners:{change:this.updateHumanString,
scope:this}})},getDailyCt:function(){return this.ctDaily=this.ctDaily||new Ext.CronSchedule.DailyCt({renderTo:this.ctPatternId,listeners:{change:this.updateHumanString,scope:this}})},getWeeklyCt:function(){return this.ctWeekly=this.ctWeekly||new Ext.CronSchedule.WeeklyCt({renderTo:this.ctPatternId,listeners:{change:this.updateHumanString,scope:this}})},getMonthlyCt:function(){return this.ctMonthly=this.ctMonthly||new Ext.CronSchedule.MonthlyCt({renderTo:this.ctPatternId,listeners:{change:this.updateHumanString,
scope:this}})},getYearlyCt:function(){return this.ctYearly=this.ctYearly||new Ext.CronSchedule.YearlyCt({renderTo:this.ctPatternId,listeners:{change:this.updateHumanString,scope:this}})},getType:function(){return this.cbPattern.getValue()},afterRender:function(){Ext.CronSchedule.superclass.afterRender.apply(this,arguments);this.cbPattern.render(this.cbPatternId);this.selectedPatternCt=this.getWeeklyCt();this.ctStarting=new Ext.CronSchedule.StartingCt({renderTo:this.ctStartingId,listeners:{change:this.updateHumanString,
scope:this}});this.ctStarting.setMode({h:true,m:true});this.ctHumanString=Ext.get(this.ctHumanStringId);!this.isUPMode&&this.updateHumanString()},loadArgs:function(a){this.ctContinuously&&this.ctContinuously.loadArgs({});this.ctHourly&&this.ctHourly.loadArgs({});this.ctDaily&&this.ctDaily.loadArgs({});this.ctWeekly&&this.ctWeekly.loadArgs({});this.ctMonthly&&this.ctMonthly.loadArgs({});this.ctYearly&&this.ctYearly.loadArgs({});if(a.month&&a.month!="*"){this.cbPattern.onSelect(this.cbPattern.store.getById("y"),
0);this.ctYearly.loadArgs(a)}else if(a.dom&&a.dom!="*"){this.cbPattern.onSelect(this.cbPattern.store.getById("m"),0);this.ctMonthly.loadArgs(a)}else if(a.dow&&a.dow!="*"){this.cbPattern.onSelect(this.cbPattern.store.getById("w"),0);this.ctWeekly.loadArgs(a)}else if(a.hour&&a.hour!="*"){this.cbPattern.onSelect(this.cbPattern.store.getById("d"),0);this.ctDaily.loadArgs(a)}else this.cbPattern.onSelect(this.cbPattern.store.getById("w"),0);this.ctStarting.loadArgs(a,this.cbPattern.getValue()=="d");!this.isUPMode&&
this.updateHumanString()},loadDatetierPattern:function(){var a=[];this.useContinuously&&a.push(["c",_TR("CONTINUOUSLY")]);a.push(["d",_TR("CRON_SCHEDULE_PATTERN_DAILY")]);a.push(["w",_TR("CRON_SCHEDULE_PATTERN_WEEKLY")]);this.cbPattern.store.removeAll();this.cbPattern.store.loadData(a)},loadPattern:function(){var a=[];this.useContinuously&&a.push(["c",_TR("CONTINUOUSLY")]);a.push(["d",_TR("CRON_SCHEDULE_PATTERN_DAILY")]);a.push(["w",_TR("CRON_SCHEDULE_PATTERN_WEEKLY")]);a.push(["m",_TR("CRON_SCHEDULE_PATTERN_MONTHLY")]);
a.push(["y",_TR("CRON_SCHEDULE_PATTERN_YEARLY")]);this.cbPattern.store.removeAll();this.cbPattern.store.loadData(a)},getStrings:function(){var a={min:"*",hour:"*",dom:"*",month:"*",dow:"*",ampm:""},c=localStorage.getItem("enable24Hour")=="true",b=this.ctStarting.getStrings();if(!c)a.ampm=b.ampm==0?_TR("AM"):_TR("PM");switch(this.cbPattern.getValue()){case "c":a.min=this.ctContinuously.getString();break;case "h":a.min=this.ctHourly.getString();break;case "d":a.hour=this.ctDaily.getString();a.min=b.min;
a.ampm="";break;case "w":a.dow=this.ctWeekly.getString();a.hour=b.hour;a.min=b.min;break;case "m":a.dom=this.ctMonthly.getString();a.hour=b.hour;a.min=b.min;break;case "y":a.month=this.ctYearly.getString();a.dom=b.dom;a.hour=b.hour;a.min=b.min;break}return a},updateHumanString:function(){this.fireEvent("change",this);this.ctHumanString.update(this.getHumanString())},getHumanString:function(){var a=localStorage.getItem("enable24Hour")=="true",c="",b=this.ctStarting.getHumanStrings(),d="";a||(c=b.ampm==
0?" "+_TR("AM"):" "+_TR("PM"));switch(this.cbPattern.getValue()){case "c":d=String.format(_TR("Occurs continously every {0} minute(s)."),this.ctContinuously.getHumanString());break;case "h":d=this.ctHourly.getHumanString()==""?"":String.format(_TR("CRON_SCHEDULE_OCCURS_EVERY_HOUR"),this.ctHourly.getHumanString());break;case "d":d=this.ctDaily.getHumanString(b.min)==""?"":String.format(_TR("CRON_SCHEDULE_OCCURS_EVERY_DAY"),this.ctDaily.getHumanString(b.min));break;case "w":d=this.ctWeekly.getHumanString(b.min)==
""?"":String.format(_TR("CRON_SCHEDULE_OCCURS_EVERY_WEEK"),b.hour+":"+b.min+c,this.ctWeekly.getHumanString(b.min));break;case "m":d=this.ctMonthly.getHumanString()==""?"":String.format(_TR("CRON_SCHEDULE_OCCURS_EVERY_MONTH"),b.hour+":"+b.min+c,this.ctMonthly.getHumanString());break;case "y":d=this.ctYearly.getHumanString(b.dom)==""?"":String.format(_TR("CRON_SCHEDULE_OCCURS_EVERY_YEAR"),b.hour+":"+b.min+c,this.ctYearly.getHumanString(b.dom));break}return d}});
Ext.CronSchedule.ContinuouslyCt=_._1(Ext.Container,{cls:"x-cronschedule-ct",width:456,constructor:function(a){Ext.CronSchedule.ContinuouslyCt.superclass.constructor.call(this,a);a=a&&a.mins?a.mins:1;this.enMinutes=[];if(a=="*")for(a=0;a<60;a++)this.enMinutes.push(a);else this.enMinutes=a},afterRender:function(){Ext.CronSchedule.ContinuouslyCt.superclass.afterRender.apply(this,arguments);this.el.createChild({cls:"x-clear"})},loadArgs:function(){},getString:function(){return this.enMinutes.join(",")||
"0"},getHumanString:function(){return Math.floor(60/this.enMinutes.length)}});
Ext.CronSchedule.HourlyCt=_._1(Ext.Container,{cls:"x-cronschedule-ct",width:380,constructor:function(){Ext.CronSchedule.HourlyCt.superclass.constructor.apply(this,arguments);this.enMinutes=[]},afterRender:function(){Ext.CronSchedule.HourlyCt.superclass.afterRender.apply(this,arguments);this.buttons=[];for(var a=0;a<60;++a)this.buttons[a]=new Ext.UI.Button({xtype:"uibutton",width:32,text:a.toString(),number:a,renderTo:this.el,style:"float: left; margin: 3px;",listeners:{click:this.onButtonMinuteClick,
scope:this}});this.el.createChild({cls:"x-clear"})},loadArgs:function(a){var c=(a.min||"").split(",");this.enMinutes=[];_.each(this.buttons,function(b){if(c.indexOf(b.text)!=-1){b.el.addClass(b.acceptcls);this.enMinutes.push(b.number)}else b.el.removeClass(b.acceptcls)},this)},onButtonMinuteClick:function(a){var c=a.number;if(this.enMinutes.indexOf(c)==-1){a.el.addClass(a.acceptcls);this.enMinutes.push(c)}else{a.el.removeClass(a.acceptcls);this.enMinutes.remove(c)}this.enMinutes.sort(function(b,
d){if(b<d)return-1;if(b>d)return 1;return 0});this.fireEvent("change",this)},getString:function(){return this.enMinutes.join(",")||"0"},getHumanString:function(){var a="";_.each(this.enMinutes,function(c){a+=a?", ":"";a+=c<10?"0"+c:c},this);return a}});
Ext.CronSchedule.DailyCt=_._1(Ext.Container,{cls:"x-cronschedule-ct",width:456,constructor:function(){Ext.CronSchedule.DailyCt.superclass.constructor.apply(this,arguments);this.enHours=[]},afterRender:function(){Ext.CronSchedule.DailyCt.superclass.afterRender.apply(this,arguments);this.buttons=[];for(var a=0;a<24;++a)this.buttons[a]=new Ext.UI.Button({xtype:"uibutton",width:60,text:a.toString(),number:a,renderTo:this.el,style:"float: left; margin: 3px;",listeners:{click:this.onButtonHourClick,
scope:this}});this.el.createChild({cls:"x-clear"})},initialButtons:function(){if(localStorage.getItem("enable24Hour")=="true")for(a=0;a<24;++a){this.buttons[a].setWidth(30);this.buttons[a].setText(a.toString())}else{for(var a=0;a<12;++a)a==0?this.buttons[a].setText("12 "+_TR("AM")):this.buttons[a].setText(a.toString()+" "+_TR("AM"));for(a=12;a<24;++a)this.buttons[a].setText((a!=12?a%12:12).toString()+" "+_TR("PM"))}},loadArgs:function(a){var c=(a.hour||"").split(",");this.enHours=[];_.each(this.buttons,
function(b){if(c.indexOf(b.number+"")!=-1){b.el.addClass(b.acceptcls);this.enHours.push(b.number)}else b.el.removeClass(b.acceptcls)},this)},onButtonHourClick:function(a){var c=a.number;if(this.enHours.indexOf(c)==-1){a.el.addClass(a.acceptcls);this.enHours.push(c)}else{a.el.removeClass(a.acceptcls);this.enHours.remove(c)}this.enHours.sort(function(b,d){if(b<d)return-1;if(b>d)return 1;return 0});this.fireEvent("change",this)},getString:function(){return this.enHours.join(",")||"0"},getHumanString:function(a){var c=
[],b=localStorage.getItem("enable24Hour")=="true";_.each(this.enHours,function(d){if(b){d=d<10?"0"+d:d;c.push(d+":"+a)}else if(d>12)c.push(d-12+":"+a+" "+_TR("PM"));else if(d==12)c.push("12:"+a+" "+_TR("PM"));else if(d<12&&d>0){d=d<10?"0"+d:d;c.push(d+":"+a+" "+_TR("AM"))}else d==0&&c.push("12:"+a+" "+_TR("AM"))},this);return $_.uniq(c).join(", ")}});
Ext.CronSchedule.WeeklyCt=_._1(Ext.Container,{cls:"x-cronschedule-ct",width:380,constructor:function(){Ext.CronSchedule.WeeklyCt.superclass.constructor.apply(this,arguments);this.enDays=[]},afterRender:function(){Ext.CronSchedule.WeeklyCt.superclass.afterRender.apply(this,arguments);var a=this.labelItems=[_TR("MON"),_TR("TUE"),_TR("WED"),_TR("THU"),_TR("FRI"),_TR("SAT"),_TR("SUN")];this.buttons=[];for(var c=0;c<a.length;++c)this.buttons[c]=new Ext.UI.Button({xtype:"uibutton",width:44,text:a[c],
number:c+1,renderTo:this.el,style:"float: left; margin: 3px;",listeners:{click:this.onButtonDayClick,scope:this}});this.el.createChild({cls:"x-clear"})},loadArgs:function(a){var c=(a.dow||"").split(",");this.enDays=[];_.each(this.buttons,function(b){if(c.indexOf(b.number.toString())!=-1){b.el.addClass(b.acceptcls);this.enDays.push(b.number)}else b.el.removeClass(b.acceptcls)},this)},onButtonDayClick:function(a){var c=a.number;if(this.enDays.indexOf(c)==-1){a.el.addClass(a.acceptcls);this.enDays.push(c)}else{a.el.removeClass(a.acceptcls);
this.enDays.remove(c)}this.enDays.sort(function(b,d){if(b<d)return-1;if(b>d)return 1;return 0});this.fireEvent("change",this)},getString:function(){return this.enDays.join(",")||"1"},getHumanString:function(){var a="";_.each(this.enDays,function(c){a+=a?", ":"";a+=this.labelItems[c-1]},this);return a}});
Ext.CronSchedule.MonthlyCt=_._1(Ext.Container,{cls:"x-cronschedule-ct",width:266,constructor:function(){Ext.CronSchedule.MonthlyCt.superclass.constructor.apply(this,arguments);this.enDays=[]},afterRender:function(){Ext.CronSchedule.MonthlyCt.superclass.afterRender.apply(this,arguments);this.buttons=[];for(var a=0;a<31;++a)this.buttons[a]=new Ext.UI.Button({xtype:"uibutton",width:32,text:(a+1).toString(),number:a+1,renderTo:this.el,style:"float: left; margin: 3px;",listeners:{click:this.onButtonDayClick,
scope:this}});this.el.createChild({cls:"x-clear"})},loadArgs:function(a){var c=(a.dom||"").split(",");this.enDays=[];_.each(this.buttons,function(b){if(c.indexOf(b.text)!=-1){b.el.addClass(b.acceptcls);this.enDays.push(b.number)}else b.el.removeClass(b.acceptcls)},this)},onButtonDayClick:function(a){var c=a.number;if(this.enDays.indexOf(c)==-1){a.el.addClass(a.acceptcls);this.enDays.push(c)}else{a.el.removeClass(a.acceptcls);this.enDays.remove(c)}this.enDays.sort(function(b,d){if(b<d)return-1;if(b>
d)return 1;return 0});this.fireEvent("change",this)},getString:function(){return this.enDays.join(",")||"1"},getHumanString:function(){var a=_TR("CRON_SCHEDULE_OCCURS_DAY_OF_MONTH"),c="";_.each(this.enDays,function(b){c+=c?", ":"";c+=String.format(a,b)},this);return c}});
Ext.CronSchedule.YearlyCt=_._1(Ext.Container,{cls:"x-cronschedule-ct",width:468,constructor:function(){Ext.CronSchedule.YearlyCt.superclass.constructor.apply(this,arguments);this.enMonths=[]},afterRender:function(){Ext.CronSchedule.YearlyCt.superclass.afterRender.apply(this,arguments);var a=this.labelItems=[_TR("JANUARY"),_TR("FEBRUARY"),_TR("MARCH"),_TR("APRIL"),_TR("MAY"),_TR("JUNE"),_TR("JULY"),_TR("AUGUST"),_TR("SEPTEMBER"),_TR("OCTOBER"),_TR("NOVEMBER"),_TR("DECEMBER")];this.buttons=[];
for(var c=0;c<a.length;++c)this.buttons[c]=new Ext.UI.Button({xtype:"uibutton",width:72,text:a[c],number:c+1,renderTo:this.el,style:"float: left; margin: 3px;",listeners:{click:this.onButtonMonthClick,scope:this}});this.el.createChild({cls:"x-clear"})},loadArgs:function(a){var c=(a.month||"").split(",");this.enMonths=[];_.each(this.buttons,function(b){if(c.indexOf(b.number.toString())!=-1){b.el.addClass(b.acceptcls);this.enMonths.push(b.number)}else b.el.removeClass(b.acceptcls)},this)},onButtonMonthClick:function(a){var c=
a.number;if(this.enMonths.indexOf(c)==-1){a.el.addClass(a.acceptcls);this.enMonths.push(c)}else{a.el.removeClass(a.acceptcls);this.enMonths.remove(c)}this.enMonths.sort(function(b,d){if(b<d)return-1;if(b>d)return 1;return 0});this.fireEvent("change",this)},getString:function(){return this.enMonths.join(",")||"1"},getHumanString:function(a){var c="";_.each(this.enMonths,function(b){c+=c?", ":"";c+=a+" "+this.labelItems[b-1]},this);return c}});
Ext.CronSchedule.StartingCt=_._1(Ext.Container,{cls:"x-cronschedule-startct",constructor:function(){this.style="margin: 10px auto;";this.html='<table class="'+this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+'-datatable-labelcell"><div id="'+(this.lStartingId=Ext.id())+'" class="x-ellipsis" style="padding-right: 5px; max-width: 90px;">'+_TR("BACKUP_PERFORM_TIME")+_TR("COLON")+'</div></td><td id="'+(this.sfDayId=Ext.id())+'"></td><td class="'+this.cls+'-datatable-labelcell"><div id="'+
(this.lDayId=Ext.id())+'" class="x-ellipsis" style="padding-left: 5px; padding-right: 10px; max-width: 80px;">'+_TR("CRON_SCHEDULE_STARTING_AT_DAY")+'</div></td><td id="'+(this.sfHourId=Ext.id())+'"></td><td class="'+this.cls+'-datatable-labelcell"><div id="'+(this.lHourId=Ext.id())+'" class="x-ellipsis" style="padding-left: 5px; padding-right: 10px; max-width: 80px;">:</div></td><td id="'+(this.sfMinId=Ext.id())+'"></td><td class="'+this.cls+'-datatable-labelcell"><div id="'+(this.lMinId=Ext.id())+
'" class="x-ellipsis" style="padding-left: 5px; padding-right: 10px; max-width: 80px;"></div></td><td id="'+(this.sfAMPMId=Ext.id())+'"></td></tr></table>';this.sfDay=new Ext.UI.SpinnerField({width:48,minValue:1,maxValue:31,selectOnFocus:true,listeners:{spin:this.onSpin,scope:this}});this.sfHour=new Ext.UI.SpinnerField({width:48,minValue:0,maxValue:23,selectOnFocus:true,listeners:{spin:this.onSpin,scope:this},fnFormat:function(a){return a<10?"0"+a:a}});this.sfMin=new Ext.UI.SpinnerField({width:48,
minValue:0,maxValue:59,selectOnFocus:true,incrementValue:1,listeners:{spin:this.onSpin,scope:this},fnFormat:function(a){return a<10?"0"+a:a}});this.sfAMPM=new Ext.UI.ComboBox({width:55,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("AM")],[1,_TR("PM")]]}),valueField:"id",displayField:"text",value:0,listeners:{scope:this,select:function(){this.fireEvent("change",this)}}});Ext.CronSchedule.StartingCt.superclass.constructor.apply(this,
arguments)},afterRender:function(){Ext.CronSchedule.StartingCt.superclass.afterRender.apply(this,arguments);this.sfDay.render(this.sfDayId);this.sfHour.render(this.sfHourId);this.sfMin.render(this.sfMinId);this.sfAMPM.render(this.sfAMPMId);this.lStarting=Ext.get(this.lStartingId);this.lDay=Ext.get(this.lDayId);this.lHour=Ext.get(this.lHourId);this.lMin=Ext.get(this.lMinId)},displayAMPM:function(a){this.sfAMPM.setVisible(a)},onSpin:function(){this.fireEvent("change",this)},setMode:function(a){a=a||
{};if(a.d){this.sfDay.show();this.lDay.setDisplayed(true);this.sfDay.setValue(1)}else{this.sfDay.hide();this.lDay.setDisplayed(false)}if(a.h){this.sfHour.show();this.lHour.setDisplayed(true);this.sfHour.setValue(0)}else{this.sfHour.hide();this.lHour.setDisplayed(false)}if(a.m){this.sfMin.show();this.lMin.setDisplayed(true);this.sfMin.setValue(0)}else{this.sfMin.hide();this.lMin.setDisplayed(false)}!a.d&&!a.h&&!a.m?this.lStarting.setDisplayed(false):this.lStarting.setDisplayed(true)},loadArgs:function(a,
c){var b=+a.hour,d=localStorage.getItem("enable24Hour")=="true";this.sfHour.maxValue=d?23:12;this.sfHour.minValue=d?0:1;if(c)this.sfAMPM.setVisible(false);else{this.sfAMPM.setVisible(!d);this.sfAMPM.setValue(!d&&b>=12?1:0)}b=!d&&b>12?b-12:b;if(!d&&b==0)b=12;this.sfDay.setValue(a.dom||1);this.sfHour.setValue(b||0);this.sfMin.setValue(a.min||0)},getStrings:function(){return{dom:this.sfDay.getValue(),hour:this.sfHour.getValue(),min:this.sfMin.getValue(),ampm:this.sfAMPM.getValue()}},getHumanStrings:function(){var a=
this.sfHour.getValue(),c=this.sfMin.getValue();return{dom:this.sfDay.getValue(),hour:a<10?"0"+a:a,min:c<10?"0"+c:c,ampm:this.sfAMPM.getValue()}}});
Ext.ns("Ext.Help");
Ext.Help.Manager=Ext.extend(Ext.util.Observable,{enabled:false,locked:false,order:undefined,btns:undefined,control:undefined,active:undefined,constructor:function(a){Ext.Help.Manager.superclass.constructor.call(this,a);this.order=[];this.btns=[];this.addEvents("enable","disable","lock","unlock");Ext.onReady(this.init,this)},init:function(){var a=_.Utils.registerEventHandler;a(document.body,"keyup",this.onBodyKeyUp.bind(this));a(document.body,"mouseover",this.onBodyMouseOver.bind(this))},setEnabled:function(a){a?
this.enable():this.disable()},enable:function(){if(!this.enabled){this.enabled=true;if(!this.control)this.control=this.render(document.body);this.clear();this.review();this.reviewButtons();this.fireEvent("enable",this)}},disable:function(){if(this.enabled){this.enabled=false;this.clear();this.reviewButtons();this.fireEvent("disable",this)}},setLocked:function(a){a?this.lock():this.unlock()},lock:function(){if(!this.locked){this.locked=true;this.review()}},unlock:function(){if(this.locked){this.locked=
false;this.review()}},review:function(){this.select(this.active)},select:function(a){a=this.findParent(a);var b="none",c="none";this.active&&Ext.fly(this.active).removeClass("help-highlight");(this.active=a)&&Ext.fly(this.active).addClass("help-highlight");if(this.active){b=this.getTreePath(this.active);c=this.getFilename(this.active)}Ext.fly(this.control.node).removeClass("help-hidden");Ext.fly(this.control.status).update(this.locked?"Locked":"Unlocked");Ext.fly(this.control.path).update(b);Ext.fly(this.control.file).update(c)},
render:function(a){a=Ext.fly(a).createChild({tag:"div",cls:"help-wrap",html:'<table><tr><td>Status:</td><td class="help-status"></td></tr><tr><td>Hierarchy:</td><td class="help-path"></td></tr><tr><td>Filename:</td><td class="help-file"></td></tr></table>'});return{node:a.dom,status:a.query(".help-status")[0],path:a.query(".help-path")[0],file:a.query(".help-file")[0]}},clear:function(){this.locked=false;this.order=[];if(this.active){Ext.fly(this.active).removeClass("help-highlight");this.active=
undefined}this.control&&Ext.fly(this.control.node).addClass("help-hidden")},getTreePath:function(a){var b="";for(a=this.findParent(a);a;){b="/"+this.getAttribute(a,"data-help")+b;a=this.findParent(a.parentNode)}return b||"/"},getFilename:function(a){a=this.findParent(a);return"help/"+(a?this.getAttribute(a,"data-help")+".html":"")},findParent:function(a){for(a=a;a;)if(this.getAttribute(a,"data-help"))return a;else a=a.parentNode},getAttribute:function(a,b){if(a&&a.getAttribute)return a.getAttribute(b)},
reg:function(a){this.btns.push(a.enable());a.on("click",function(b){this.setEnabled(b.pressed)},this);this.reviewButtons()},reviewButtons:function(){for(var a=0,b=this.btns.length;a<b;++a)this.btns[a].toggle(this.enabled)},onBodyKeyUp:function(a){if(this.enabled)switch(a.keyCode){case 87:if((a=this.active)&&this.findParent(a)){this.order.push(a);this.select(a.parentNode)}break;case 83:(a=this.order.pop())&&this.select(a);break;case 68:this.lock();break;case 65:this.unlock();break;default:break}},
onBodyMouseOver:function(a){if(this.enabled&&!this.locked){this.clear();this.select(a.target)}}});Ext.ns("Ext.Help");
Ext.Help.Context=Ext.extend(Ext.util.Observable,{enabled:false,buffer:undefined,unknown:undefined,root:undefined,map:undefined,last:undefined,btns:undefined,procId:undefined,constructor:function(a){Ext.Help.Context.superclass.constructor.call(this,a);this.buffer=[];this.unknown={};this.root=[];this.map={};this.last=[];this.btns=[];this.addEvents("enable","disable","context");this.init()},init:function(){var a=this,b=Ext.Component.prototype.afterRender;Ext.Component.prototype.afterRender=function(e){e=
b.call(this,e);if(this.help){a.buffer.push(this.el.dom);a.enabled&&a.review()}return e};var c=Ext.Component.prototype.show;Ext.Component.prototype.show=function(){var e=c.call(this);this.help&&a.enabled&&a.review();return e};var d=Ext.Window.prototype.show;Ext.Window.prototype.show=function(e,g,h){e=d.call(this,e,g,h);this.help&&a.enabled&&a.review();return e};var f=Ext.Window.prototype.hide;Ext.Window.prototype.hide=function(e,g,h){e=f.call(this,e,g,h);this.help&&a.enabled&&a.review();return e}},
getContext:function(){return this.last},setEnabled:function(a){a?this.enable():this.disable()},enable:function(){if(!this.enabled){this.enabled=true;this.clear();this.review();this.reviewButtons();this.fireEvent("enable",this)}},disable:function(){if(this.enabled){this.enabled=false;this.clear();this.reviewButtons();this.fireEvent("disable",this)}},review:function(){this.reviewBuffer();clearTimeout(this.procId);this.procId=this.recalc.defer(250,this)},recalc:function(){clearTimeout(this.procId);var a=
[];this.split({items:this.root},a,0);for(var b=[],c=0,d=a.length;c<d;++c)b=b.concat(a[c]);a=true;var f=[],e;c=0;for(d=b.length;c<d;++c){e=b[c];e=e.cmp?e.cmp.help:undefined;if(this.last[c]!=e)a=false;e&&f.push(e)}if(!a)this.fireEvent("context",this,this.last=f)},clear:function(){this.last=[]},reviewBuffer:function(){for(var a=0,b=this.buffer.length;a<b;++a)this.postRender(this.buffer[a]);this.buffer=[]},postRender:function(a){var b,c,d,f,e={};for(b in this.unknown){c=this.unknown[b].node;if(f=this.map[this.unknown[b].parent.id]){d=
{node:c,cmp:Ext.getCmp(c.id),items:[],parent:f};f.items.push(this.map[c.id]=d);e[b]=true}}for(b in e)delete this.unknown[b];c=a;if(a=this.findParent(c.parentNode))if(f=this.map[a.id]){d={node:c,cmp:Ext.getCmp(c.id),items:[],parent:f};f.items.push(this.map[c.id]=d)}else this.unknown[c.id]={node:c,cmp:Ext.getCmp(c.id),parent:a};else{d={node:c,cmp:Ext.getCmp(c.id),items:[]};this.root.push(this.map[c.id]=d)}},split:function(a,b,c){for(var d,f=a.items.length-1;f>=0;--f){d=a.items[f];if(Ext.fly(d.node).isVisible()){b[c]||
b.push([]);b[c].unshift(d);if(d.cmp&&d.cmp.modal)break;else this.split(d,b,c+1)}}},findParent:function(a){for(a=a;a;)if(this.getAttribute(a,"data-help"))return a;else a=a.parentNode},getAttribute:function(a,b){if(a&&a.getAttribute)return a.getAttribute(b)},reg:function(a){this.btns.push(a);a.on("click",function(){this.setEnabled(!this.enabled)},this);this.reviewButtons()},reviewButtons:function(){}});Ext.ns("Ext.Help");
Ext.Help.Viewer=Ext.extend(Ext.UI.Window,{width:350,height:640,resizable:false,minimizable:false,maximizable:false,closeAction:"hide",title:"ReadyNAS Help",url:"help/{0}.html",pages:undefined,blocks:undefined,active:undefined,frames:undefined,constructor:function(a){Ext.Help.Viewer.superclass.constructor.call(this,a);this.pages={};this.blocks={};this.frames={};this.init()},init:function(){var a=Ext.HelpContext;a.on("enable",function(){this.show()},this);a.on("disable",function(){this.hide()},this);
a.on("context",this.onContextChanged,this);a.enabled&&Ext.onReady(function(){this.show()}.bind(this));this.on("show",function(){a.enable()});this.on("hide",function(){a.disable()})},afterRender:function(a){Ext.Help.Viewer.superclass.afterRender.call(this,a);this.addClass("help-viewer");this.header.createChild({tag:"div",cls:"x-tool x-tool-back"}).on("click",function(){this.back()},this);Ext.EventManager.on(window,"resize",function(){this.fixPosition()},this)},onShow:function(){Ext.Help.Viewer.superclass.onShow.call(this);
this.fixPosition()},fixPosition:function(){this.hidden||this.setPosition(Ext.fly(document.body).getWidth()-this.el.getWidth()-50,this.getPosition()[1])},onContextChanged:function(a,b){var c;a="";for(var d=[],f=[],e,g=0,h=b.length;g<h;++g){a+=c=b[g];(e=this.pages[c])||d.push(e=this.pages[c]=this.createPage(c));f.push(e)}b=this.blocks[a];if(!b){b=this.blocks[a]={id:Ext.id(),pages:f,completed:false,exists:false};g=0;for(h=f.length;g<h;++g)f[g].blocks.push(b)}g=0;for(h=d.length;g<h;++g)this.processPage(d[g]);
this.active=b;b.completed&&b.exists&&this.showFrame(b)},processPage:function(a){a.pending=true;_.lib.Ajax.request("GET",a.url,{success:function(b){a.pending=false;a.completed=a.exists=true;a.title=this.extractTitle(b.responseText)||"ReadyNAS Component";this.reviewBlocks(a.blocks)}.bind(this),failure:function(){a.pending=false;a.completed=true;this.reviewBlocks(a.blocks)}.bind(this)})},reviewBlocks:function(a){for(var b=0,c=a.length;b<c;++b)this.reviewBlock(a[b])},reviewBlock:function(a){if(!a.completed){for(var b,
c=true,d=false,f=0,e=a.pages.length;f<e;++f){b=a.pages[f];b.completed||(c=false);if(b.exists)d=true}a.completed=c;a.exists=d;c&&d&&this.active==a&&this.showFrame(a)}},showFrame:function(a,b){var c=this.frames[a.id];c||(c=this.frames[a.id]=this.renderFrame(this.body,a));this.activeFrame&&this.activeFrame.hide();(this.activeFrame=c).show().reset();this.setOuterHistory(b)},renderFrame:function(a,b){if(b.pages){for(var c=[],d=0,f=b.pages.length;d<f;++d)b.pages[d].exists&&c.push(b.pages[d]);return c.length==
1?this.renderSingleFrame(a,c[0]):this.renderMultipleFrame(a,b,c)}else return this.renderSingleFrame(a,b)},renderSingleFrame:function(a,b){a=a.createChild({tag:"div",cls:"help-block help-block-single",html:'<iframe src="#" style="visibility:hidden"></iframe>'});var c=Ext.get(a.query("iframe")[0]),d=this,f=function(){c.setStyle("visibility","visible")},e=function(){c.setStyle("visibility","hidden")};c.on("load",function(){var g=c.dom.contentDocument,h=c.dom.contentWindow,i=false;if(g&&h)if(g=g.getElementsByTagName("head")[0]){i=
document.createElement("link");i.rel="stylesheet";i.type="text/css";i.href="css/common.css";i.onload=f;i.onerror=f;g.appendChild(i);h.onunload=e;i=true}i||f();this.equalUrl(c,b.url)?this.hideHistory():this.showHistory()},this);return this.wrapFrame(a,{reset:function(){d.setUrl(c,b.url)||d.hideHistory();return d}})},renderMultipleFrame:function(a,b,c){a=a.createChild({tag:"div",cls:"help-block help-block-multiple",html:"<ul></ul>"});for(var d=Ext.get(a.query("ul")[0]),f=0,e=c.length;f<e;++f)this.renderMultipleFrameItem(d,
b,c[f]);return this.wrapFrame(a)},renderMultipleFrameItem:function(a,b,c){a=a.createChild({tag:"li",html:'<a href="#"></a>'});a=Ext.get(a.query("a")[0]);this.setText(a,c.title);a.on("click",function(d){d.preventDefault();this.showFrame(c,b)},this)},showHistory:function(){this.setInnerHistory(true)},hideHistory:function(){this.setInnerHistory(false)},setOuterHistory:function(a){(this.outerData=a)?this.addClass("help-viewer-nav-outer"):this.removeClass("help-viewer-nav-outer");this.blocked=false},setInnerHistory:function(a){a?
this.addClass("help-viewer-nav"):this.removeClass("help-viewer-nav");this.blocked=false},back:function(){if(this.blocked)return false;else this.blocked=true;if(this.el.hasClass("help-viewer-nav"))window.history.back();else this.outerData&&this.showFrame(this.outerData)},createPage:function(a){return{pending:false,completed:false,exists:false,id:Ext.id(),title:"",blocks:[],url:String.format(this.url,a)}},wrapFrame:function(a,b){var c=this;return Ext.apply({el:a,show:function(){a.removeClass("x-hide-display");
return this},hide:function(){a.addClass("x-hide-display");return this},reset:function(){c.hideHistory();return this}},b)},extractTitle:function(a){return(a=a.match(/<meta\s+name="DC.Title"\s+content="([^"]*)"\s*\/>/))?a[1]:""},setText:function(a,b){if("textContent"in a.dom)a.dom.textContent=b;else if("innerText"in a.dom)a.dom.innerText=b;else a.update(b)},setUrl:function(a,b){if(!this.equalUrl(a,b)){a.set({src:b});return true}return false},equalUrl:function(a,b){a=a.dom.contentWindow;return(a?a.location.href:
"").indexOf(b)>-1}});(function(a){(function(){var c=Ext.Component.prototype.afterRender;Ext.Component.prototype.afterRender=function(d){d=c.call(this,d);this.help&&this.el.set({"data-help":this.help});return d}})();a.HelpManager=new Ext.Help.Manager;var b=a.HelpContext=new Ext.Help.Context;b.on("enable",function(){if(!a.HelpViewer)a.HelpViewer=new Ext.Help.Viewer});if(b.enabled)a.HelpViewer=new Ext.Help.Viewer})(Ext);
_._2("_","_._3","_._3.MAP","_._3.SystemSubSys");_._3.System.SystemTab="System.SystemTab";_._3.SystemSubSys.OverviewTab="SystemSubSys.OverviewTab";_._3.SystemSubSys.StorageTab="SystemSubSys.StorageTab";_._3.SystemSubSys.PerformanceTab="SystemSubSys.PerformanceTab";_._3.SystemSubSys.SettingsTab="SystemSubSys.SettingsTab";_._3.SystemSubSys.LogsTab="SystemSubSys.LogsTab";_._3.SystemSubSys.PowerTab="SystemSubSys.PowerTab";
_._3.SystemSubSys.HardwarePanel="SystemSubSys.HardwarePanel";_._3.SystemSubSys.UtilizationPanel="SystemSubSys.UtilizationPanel";_._3.SystemSubSys.TemperaturePanel="SystemSubSys.TemperaturePanel";_._3.SystemSubSys.SharesPanel="SystemSubSys.SharesPanel";_._3.SystemSubSys.NetworkChartPanel="SystemSubSys.NetworkChartPanel";_._3.SystemSubSys.VolumeChartPanel="SystemSubSys.VolumeChartPanel";_._3.SystemSubSys.AppsAddonsPanel="SystemSubSys.AppsAddonsPanel";
_._3.SystemSubSys.FeatureDetectionPanel="SystemSubSys.FeatureDetectionPanel";_._3.SystemSubSys.CloudServicesPanel="SystemSubSys.CloudServicesPanel";_._3.SystemSubSys.NewsChannelPanel="SystemSubSys.NewsChannelPanel";_._3.SystemSubSys.FeaturedAppsPanel="SystemSubSys.FeaturedAppsPanel";_._3.SystemSubSys.PoolPanel="SystemSubSys.PoolPanel";_._3.SystemSubSys.StoragePanel="SystemSubSys.StoragePanel";_._3.SystemSubSys.StorageInspectorContent="SystemSubSys.StorageInspectorContent";
_._3.SystemSubSys.StorageInspectorHeader="SystemSubSys.StorageInspectorHeader";_._3.SystemSubSys.ServicesPanel="SystemSubSys.ServicesPanel";_._3.SystemSubSys.UpdatePanel="SystemSubSys.UpdatePanel";_._3.SystemSubSys.BackupPanel="SystemSubSys.BackupPanel";_._3.SystemSubSys.AlertsPanel="SystemSubSys.AlertsPanel";_._3.SystemSubSys.UsbEncryptionPanel="SystemSubSys.UsbEncryptionPanel";_._3.SystemSubSys.AuditSettingsPanel="SystemSubSys.AuditSettingsPanel";
_._3.SystemSubSys.SecurityPanel="SystemSubSys.SecurityPanel";_._3.SystemSubSys.RemotePanel="SystemSubSys.RemotePanel";_._3.SystemSubSys.ReadyDropPanel="SystemSubSys.ReadyDropPanel";_._3.SystemSubSys.PerformancePanel="SystemSubSys.PerformancePanel";_._3.SystemSubSys.SupportPanel="SystemSubSys.SupportPanel";_._3.SystemSubSys.HealthPanel="SystemSubSys.HealthPanel";_._3.SystemSubSys.LogsContainerPanel="SystemSubSys.LogsContainerPanel";
_._3.SystemSubSys.LogsPanel="SystemSubSys.LogsPanel";_._3.SystemSubSys.SpinDownPanel="SystemSubSys.SpinDownPanel";_._3.SystemSubSys.PowerPanel="SystemSubSys.PowerPanel";_._3.SystemSubSys.WakeOnLanPanel="SystemSubSys.WakeOnLanPanel";_._3.SystemSubSys.UpsPanel="SystemSubSys.UpsPanel";_._3.SystemSubSys.VolumeSchedulePanel="SystemSubSys.VolumeSchedulePanel";_._3.SystemSubSys.HomeFolderPanel="SystemSubSys.HomeFolderPanel";Ext.namespace("_s1");
_s1.SystemTab=_._1(_._3.System.SystemTab,_s0.TabItem,ISystemFrameTab,_i4,{card:true,help:"system_tab",constructor:function(){_s1.SystemTab.superclass.constructor.apply(this,arguments);this.on("tabactivate",this.TabActivate,this);this.on("tabdeactivate",this.TabDeactivate,this);this.isRefreshDone=true},ISystemFrameTab:{getTitle:function(){return _TR("SYSTEM")},getCfg:function(){return{id:"system-tab"}}},TabActivate:function(){if(!this.isRefreshDone){_a(_7(_._3.SystemSubSys.AppsAddonsPanel),
"IPanelItem").refresh();_a(_7(_._3.SystemSubSys.FeaturedAppsPanel),"IPanelItem").refresh();this.isRefreshDone=true}},TabDeactivate:function(){this.isRefreshDone=false}});_s0.RegisterTab(_._3.System.Frame,_._3.System.SystemTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s1");
_s1.BaseTab=_._1(_s0.TabItem,ISystemFrameTab,{constructor:function(){_s1.BaseTab.superclass.constructor.call(this);this.tabView=_a(_7(_._3.System.Frame),"IExtNative");this.systemTab=_a(_7(_._3.System.SystemTab),"IExtNative");this.on("tabinitialize",this.TabInitialize,this);this.on("tabactivate",this.TabActivate,this)},initComponent:function(){_s1.BaseTab.superclass.initComponent.apply(this,
arguments);this.content.addClass("ui-alt");this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td  id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';this.refreshBtn=new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),listeners:{afterrender:function(a){a.el.on("click",function(){this.refresh()},
this)},scope:this}});this.header.on("afterrender",this.onHeaderAfterRender,this)},onHeaderAfterRender:function(){this.refreshBtn.render(this.buttonsId)},getMaskedEl:function(){return this.content.el},oninitialized:function(){this.refresh()},refresh:function(){var a=250;_.each(_a(this,"IPanelList").getPanelItems(),function(b){b.refresh.defer(a,b);a+=250},this);return _5},TabInitialize:function(){this.oninitialized();this.preventscroll||FocusManager.reg(this.content.el,{keydown:function(a){if(a.target.tagName!=
"INPUT")switch(a.getKey()){case a.UP:this.scroller.scroll(-50);break;case a.DOWN:this.scroller.scroll(50);break}}},this);this.mask.on("hide",function(){this.isActiveTab()&&FocusManager.setActive(this.content.el)},this);this.mask.on("show",function(){this.isActiveTab()&&FocusManager.setActive(this.mask.mask)},this)},TabActivate:function(){this.mask.config.hidden?FocusManager.setActive(this.content.el):FocusManager.setActive(this.mask.mask)},isActiveTab:function(){return this.tabView.__s.desktopPanel.layout.activeItem==
this.systemTab.getNative()&&this.systemTab.__s.content.layout.activeItem==this}});Ext.namespace("_s1");
_s1.OverviewTab=_._1(_._3.SystemSubSys.OverviewTab,_s1.BaseTab,_i4,ISystemFrameEvents,{help:"system_tab_overview",constructor:function(){_s1.OverviewTab.superclass.constructor.apply(this)},oninitialized:function(){var a=_a(this,"IPanelList");a.addPanel(_a(_7(_._3.SystemSubSys.HardwarePanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.AppsAddonsPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.FeaturedAppsPanel),
"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.FeatureDetectionPanel),"IPanelItem"));_s1.OverviewTab.superclass.oninitialized.apply(this)},ISystemFrameTab:{getTitle:function(){return _TR("OVERVIEW")},getCfg:function(){return{id:"system-overview-tab",cls:"x-system-overview-btn"}}}});_s0.RegisterTab(_._3.System.SystemTab,_._3.SystemSubSys.OverviewTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s1");
_s1.StorageTab=_._1(_._3.SystemSubSys.StorageTab,_s1.BaseTab,_i4,{cls:"storage-tab",help:"system_tab_storage",constructor:function(){_s1.StorageTab.superclass.constructor.apply(this)},initComponent:function(){_s1.StorageTab.superclass.initComponent.apply(this);this.content.removeClass("ui-alt")},oninitialized:function(){this.storagePanel=_a(_7(_._3.SystemSubSys.StoragePanel),"IExtNative").getNative();
this.storagePanel.parentTabItem=this;this.storagePanel.render(this.content.id);_s1.StorageTab.superclass.oninitialized.apply(this)},refresh:function(){this.storagePanel.refresh();return _5},ISystemFrameTab:{getTitle:function(){return _TR("VOLUMES")},getCfg:function(){return{id:"system-volumes-tab",cls:"x-system-volumes-btn"}}}});_s0.RegisterTab(_._3.System.SystemTab,_._3.SystemSubSys.StorageTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s1");
_s1.PerformanceTab=_._1(_._3.SystemSubSys.PerformanceTab,_s1.BaseTab,_i4,{help:"system_tab_performance",constructor:function(){_s1.PerformanceTab.superclass.constructor.apply(this);this.spSYSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemManager()},oninitialized:function(){_s1.PerformanceTab.superclass.oninitialized.apply(this);var a=_a(this,"IPanelList"),b=this.spSYSManager;a.addPanel(_a(_7(_._3.SystemSubSys.HealthPanel),
"IPanelItem"));b.getSupportStatsVolume()=="1"&&a.addPanel(_a(_7(_._3.SystemSubSys.VolumeChartPanel),"IPanelItem"));b.getSupportStatsNetwork()=="1"&&a.addPanel(_a(_7(_._3.SystemSubSys.NetworkChartPanel),"IPanelItem"));b.getSupportStatsUtilization()=="1"&&a.addPanel(_a(_7(_._3.SystemSubSys.UtilizationPanel),"IPanelItem"));b.getSupportStatsTemperature()=="1"&&a.addPanel(_a(_7(_._3.SystemSubSys.TemperaturePanel),
"IPanelItem"));this.refresh()},ISystemFrameTab:{getTitle:function(){return _TR("PERFORMANCE")},getCfg:function(){return{id:"system-performance-tab",cls:"x-system-performance-btn"}}}});_s0.RegisterTab(_._3.System.SystemTab,_._3.SystemSubSys.PerformanceTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s1");
_s1.SettingsTab=_._1(_._3.SystemSubSys.SettingsTab,_s1.BaseTab,_i4,{help:"system_tab_settings",constructor:function(){_s1.SettingsTab.superclass.constructor.call(this)},oninitialized:function(){var a=_a(this,"IPanelList");a.addPanel(_a(_7(_._3.SystemSubSys.ServicesPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.UpdatePanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.BackupPanel),
"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.AlertsPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.UsbEncryptionPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.SupportPanel),"IPanelItem"));_s1.SettingsTab.superclass.oninitialized.apply(this,arguments)},ISystemFrameTab:{getTitle:function(){return _TR("SETTINGS")},getCfg:function(){return{id:"system-settings-tab",cls:"x-system-settings-btn"}}}});
_s0.RegisterTab(_._3.System.SystemTab,_._3.SystemSubSys.SettingsTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s1");
_s1.LogsTab=_._1(_._3.SystemSubSys.LogsTab,_s1.BaseTab,_i4,{preventscroll:true,help:"system_tab_logs",constructor:function(){_s1.LogsTab.superclass.constructor.apply(this)},oninitialized:function(){_a(this,"IPanelList").addPanel(new _s1.LogsContainerPanel,"IPanelItem");_s1.LogsTab.superclass.oninitialized.apply(this)},ISystemFrameTab:{getTitle:function(){return _TR("LOGS")},getCfg:function(){return{id:"system-logs-tab",
cls:"x-system-logs-btn"}}}});_s0.RegisterTab(_._3.System.SystemTab,_._3.SystemSubSys.LogsTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s1");
_s1.PowerTab=_._1(_._3.SystemSubSys.PowerTab,_s1.BaseTab,_i4,{help:"system_tab_power",constructor:function(){_s1.PowerTab.superclass.constructor.apply(this);if(this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spSYSManager=this.spDevice.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this)}},oninitialized:function(){var a=_a(this,"IPanelList");this.spSYSManager.getSpinDown()=="1"&&
a.addPanel(_a(_7(_._3.SystemSubSys.SpinDownPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.PowerPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.WakeOnLanPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.SystemSubSys.UpsPanel),"IPanelItem"));_s1.PowerTab.superclass.oninitialized.apply(this)},ISystemFrameTab:{getTitle:function(){return _TR("POWER")},getCfg:function(){return{id:"system-power-tab",
cls:"x-system-power-btn"}}}});_s0.RegisterTab(_._3.System.SystemTab,_._3.SystemSubSys.PowerTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s1");
_s1.StorageInspectorGroupSummary=Ext.extend(_s0.InspectorGroup,{constructor:function(){this.title=_TR("SUMMARY");_s1.StorageInspectorGroupSummary.superclass.constructor.call(this,arguments);this.pieChart=new Ext.UI.PieChart({cls:"storage-inspector-summary-piechart",width:80,height:80,radius:35,sectors:[{value:0,color:"#9c97fd",gradient:"#7e71cb"},{value:0,color:"#cfc036",gradient:"#82770a"},{value:0,color:"#d88a39",gradient:"#8c4e0b"},{value:1,color:"#868686",gradient:"#393939"}]})},
onReady:function(){this.content.update('<table cellpadding="0" cellspacing="0" class="storage-inspector-summary" style="margin: 0 auto;"><tr><td class="storage-inspector-summary-table-labelcell">'+_TR("RAID")+_TR("COLON")+'</td><td colspan="2" id="'+(this.raidLabelId=Ext.id())+'"></td><td style="width: 180px;" rowspan="7" id="'+(this.pieChartId=Ext.id())+'" class="storage-inspector-summary-chart"></td></tr><tr><td class="storage-inspector-summary-table-labelcell">'+_TR("VOLUME_DATA")+_TR("COLON")+
'</td><td style="width: 15px;"><div style="width: 10px; height: 10px; background-color: #7e71cb;"></div></td><td id="'+(this.lAmountDataId=Ext.id())+'"></td><td></td></tr><tr><td class="storage-inspector-summary-table-labelcell">'+_TR("VOLUME_SNAPSHOTS")+_TR("COLON")+'</td><td style="width: 15px;"><div style="width: 10px; height: 10px; background-color: #b4a522;"></div></td><td colspan="2" id="'+(this.lAmountSnapshotsId=Ext.id())+'"></td></tr><tr><td class="storage-inspector-summary-table-labelcell">'+
_TR("VOLUME_RESERVED")+_TR("COLON")+'</td><td style="width: 15px;"><div style="width: 10px; height: 10px; background-color: #c17325;"></div></td><td colspan="2" id="'+(this.lAmountReservedId=Ext.id())+'"></td></tr><tr><td class="storage-inspector-summary-table-labelcell">'+_TR("VOLUME_FREE")+_TR("COLON")+'</td><td style="width: 15px;"><div style="width: 10px; height: 10px; background-color: #868686;"></div></td><td colspan="2" id="'+(this.lAmountAvailableId=Ext.id())+'"></td></tr><tr><td class="storage-inspector-summary-table-labelcell">'+
_TR("HEALTH")+_TR("COLON")+'</td><td colspan="3" id="'+(this.healthLabelId=Ext.id())+'"></td></tr><tr><td class="storage-inspector-summary-table-labelcell">'+_TR("GUID")+_TR("COLON")+'</td><td colspan="3" id="'+(this.guidLabelId=Ext.id())+'"></td></tr></table>');this.pieChart.render(this.pieChartId);this.raidLabel=Ext.get(this.raidLabelId);this.lAmountData=Ext.get(this.lAmountDataId);this.lAmountSnapshots=Ext.get(this.lAmountSnapshotsId);this.lAmountReserved=Ext.get(this.lAmountReservedId);this.lAmountAvailable=
Ext.get(this.lAmountAvailableId);this.healthLabel=Ext.get(this.healthLabelId);this.guidLabel=Ext.get(this.guidLabelId)},updateLabels:function(a){this.raidLabel.update(a.getVolumeRaidLabel());this.lAmountData.update(_s10.Utils.fileSize(a.amountData)+(a.amountData?", "+(a.amountData/a.amountSize*100).toFixed(1)+"%":""));this.lAmountSnapshots.update(_s10.Utils.fileSize(a.amountSnapshots)+(a.amountSnapshots?", "+(a.amountSnapshots/a.amountSize*100).toFixed(1)+"%":""));this.lAmountReserved.update(_s10.Utils.fileSize(a.amountReserved)+
(a.amountReserved?", "+(a.amountReserved/a.amountSize*100).toFixed(1)+"%":""));this.lAmountAvailable.update(_s10.Utils.fileSize(a.available)+(a.available?", "+(a.available/a.amountSize*100).toFixed(1)+"%":""));this.healthLabel.update(_TR((a.state||"OFFLINE").toUpperCase()));this.guidLabel.update(a.getDpvVolume().getGuid());this.pieChart.updateValues([a.amountData,a.amountSnapshots,a.amountReserved,a.available])}});Ext.namespace("_s1");
_s1.StorageInspectorGroupIOStats=_._1(Ext.Container,{constructor:function(){_s1.StorageInspectorGroupIOStats.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.StorageInspectorGroupIOStats.superclass.afterRender.apply(this,arguments);this.addClass("storage-inspector-iostats");this.bRefreshId=Ext.id();this.data=Ext.id();this.headerTemplate='<table class="storage-inspector-iostats-table" cellspacing="0"><tr><th class="ui-fwgrid-header"></th><th class="ui-fwgrid-header cell-read">'+
_TR("STORAGE_IOSTATS_READ")+'</th><th class="ui-fwgrid-header cell-write">'+_TR("STORAGE_IOSTATS_WRITE")+'</th></tr><tr class="ui-fwgrid-row"><td>'+_TR("STORAGE_IOSTATS_OPERATIONS")+'</td><td class="cell-read">{0}</td><td class="cell-write">{1}</td></tr></table>';this.el.update('<div id="'+this.bRefreshId+'" style="height: 20px;"><div style="float:left;">'+_TR("STORAGE_IOSTATS")+'</div></div><div id="'+this.data+'" ></div>');this.data=Ext.get(this.data);var a=new Ext.UI.RoundButton({cls:" x-frontview-btn-refresh-blue",
style:"float: right;"});a.on("click",function(){this.disabled||this.fireEvent("refreshClick")},this);a.render(this.bRefreshId)},updateLabels:function(a){if(a!=_4)(a=_a(a,"_i4q"))&&this.data.update(String.format(this.headerTemplate,a.getReadCount(),a.getWriteCount()))}});Ext.namespace("_s1");
_s1.HealthPanel=_._1(_._3.SystemSubSys.HealthPanel,_s0.BasePanel,IPanelItem,_i4,_i1f,_i1x,{panelCls:"x-system-panel-health",cls:"x-system-panel-chartpanel",help:"system_panel_health",constructor:function(a){this.title=_TR("HEALTH");_s1.HealthPanel.superclass.constructor.call(this,a)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spHealthManager=a.getHealthManager();
_a(this.spHealthManager,"_i1").Advise(this);this.spSystemManager=a.getSystemManager();_a(this.spSystemManager,"_i1").Advise(this);_a(a.getLogManager(),"_i1").Advise(this);_s1.HealthPanel.superclass.initComponent.apply(this,arguments)},getLine:function(a,b,c,d,f){var e=this.panelCls+"-cell "+this.panelCls+"-cell";return this.getRow(this.panelCls+"-row",[this.getCell(e+1,'<nobr class="x-system-panel-value x-selectable">'+a+"</nobr>"),this.getCell(e+
2,'<div style="width:20px;height:20px;" class="'+b+'"></div>'),this.getCell(e+3,'<span class="x-system-panel-value x-selectable">'+c+'&nbsp;</span><span class="x-system-health-tip x-selectable">'+(d||"")+"</span>"+(f||""))])},onFanWidgetSpeedClick:function(a,b){if(!this.fanmenu)this.fanmenu=new Ext.UI.Menu({cls:"x-system-panel-fan-menu",items:[new Ext.menu.Item({text:this.getFanSpeedText("quiet"),commandName:"quiet"}),new Ext.menu.Item({text:this.getFanSpeedText("balanced"),commandName:"balanced"}),
new Ext.menu.Item({text:this.getFanSpeedText("cool"),commandName:"cool"})],listeners:{itemclick:function(c){this.spSystemManager.commitFanConfig("system-health-fan-commit",c.commandName)},scope:this}});this.fanmenu.show(b)},getFanSpeedText:function(a){switch(a){case "quiet":return _TR("FAN_SLOW");case "balanced":return _TR("FAN_NORMAL");case "cool":default:return _TR("FAN_FAST")}},_i1f:{_o1:function(a,b){b=="system-health-update"&&this.showProgress();return _5},OnHealthUpdate:function(){_a(this,
"IPanelItem").refresh()},_o2:function(a,b){if(b=="system-health-update"||b=="system-hardware-health-update"){var c=_a(a,"_i1e"),d="";this.btns=[];this.disks={};this.widgets&&_.each(this.widgets,function(j){j.widget.destroy()},this);var f=this.widgets=[],e=[];this.scrollersIds=this.scrollersIds||{};a=c.getEnclosures();a!=_4&&_.each(a,function(j,m){j=_a(j,"_i1d");if(j!=_4){var n=[],p=Ext.id(),o=Ext.id(),q=Ext.id(),r=false;e.push({elId:q,encId:j.getId()});
var t=j.getDisksHealth();q='<div class="'+this.panelCls+'-table"><div class="x-system-panel-health-jbot">'+j.getPortLabel()+'</div><div id="'+q+'" style="max-height: 280px;"><table cellpadding="0" cellspacing="0" style="margin-bottom:8px; width: 392px;">';for(var s=0;s<t.length;++s){var u=_a(t[s],"_i12"),z=u.getStatus();if(z&&z!="not_present"&&z!=_4){for(var y=u.getCapacity(),E=0;y>1E3&&E<4;){y/=1E3;++E}y=y>=10?Math.round(y):y.toFixed(1)*1==Math.round(y)?Math.round(y):y.toFixed(1);
y+=" "+[_TR("BYTES"),_TR("KB"),_TR("MB"),_TR("GB"),_TR("TB")][E];E=u.getResourceId();this.disks[E]={tipId:Ext.id(),spDisk:u};z={online:"green",resync:"orange",failed:"red",offline:"red"}[z.toLowerCase()]||"black";var I=u.getTemperature();u=String.format('<tr><td><div style="white-space: nowrap;">{0} {1}:</div></td><td id="{7}"><div style="width:20px;height:20px;" class="x-system-panel-led-{2}" title="{3}"></div></td><td><div class="x-ellipsis" style="min-width: 128px;" title={4}>{4}</div></td><td><div style="padding: 0 10px; text-align: right; white-space: nowrap;">{5}</div></td><td><div style="white-space: nowrap;">{6}</div></td></tr>',
_TR(u.getName()),u.getId(),z,_TR(u.getStatus()),u.getModel(),y,I=="-1"?"":u.getTemperature()+"&deg;C / "+parseInt(u.getTemperature()*9/5+32)+"&deg;F",this.disks[E].tipId);q+=u}}s=j.getFansHealth();var G=s.length>1,H=Ext.id(),F=Ext.id(),A;if(G){A=new Ext.UI.ComboBox({width:100,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["text","value"],data:[]}),listeners:{afterrender:function(){if(this.lastFanSpeed){Ext.fly(F).removeClass("x-hide-display");A.el.dom.value=this.lastFanSpeed}},
scope:this}});A.onLoad=function(){this.onFanWidgetSpeedClick(A,A.el)}.bind(this)}if(s.length){f.push({widget:new Ext.Component({cls:"x-system-health-fanwrap"+(G?" x-system-health-fanwrap-multi":""),html:'<div id="'+H+'"></div><div id="'+F+'" class="x-system-health-fanwrap-speed x-hide-display"></div>',setSpeedInfo:function(w){if(A){Ext.fly(F).removeClass("x-hide-display");A.el.dom.value=w}},listeners:{afterrender:function(){A&&A.render(F)}}}),renderTo:p,isfan:true});r=true}_.each(s,function(w){var x=
_a(w,"_i14");if(x){w=x.getLabel()||"";var D=x.getSpeed()||"",B=x.getStatus()||"";if(D!="-1"){w=new _s1.FANWidget({value:D,title:w,status:B,speed:this.lastFanSpeed,hasSpeedInfo:!G});w.on("speedclick",function(C,J){this.onFanWidgetSpeedClick(C,J,x)},this);f.push({widget:w,renderTo:H,isfan:true});r=true}}},this);s=j.getTemperatureHealth();_.each(s,function(w){var x=_a(w,"_i16");if(x){w=x.getLabel()||"";w=w.split(" ")[0];if(w.length>7)w=w.substr(0,7)+"&#8230;";
var D=x.getValue()||"",B=x.getMinValue(),C=x.getMaxValue();x=x.getStatus()||"";D=parseFloat(D);B=B===""||B==_4?"0":B;C=C===""||C==_4?"80":C;if(D){f.push({widget:new _s1.TemperatureWidget({value:D,minValue:B,maxValue:C,title:w,status:x,tooltip:_TR("NORMAL")+" "+B+"-"+C+" C / "+Math.round(B*1.8+32)+"-"+Math.round(C*1.8+32)+" F"}),renderTo:p});r=true}}},this);j=j.getPSUHealth();for(s=0;s<j.length;++s)if(t=_a(j[s],"_i1c")){f.push({widget:new _s1.PSUWidget({title:t.getLabel()||
"",status:t.getStatus()||""}),renderTo:o});r=true}if(m==0){m=c.getUPSHealth();for(s=0;s<m.length;++s)if(j=_a(m[s],"_i18")){f.push({widget:new _s1.UPSWidget({title:j.getName()||"",status:j.getStatus()||"",rstatus:j.getRawStatus()||"",charge:j.getCharge()||"",runtime:j.getRuntime()||""}),renderTo:o});r=true}}n.push(q+"</table></div></div>");d+=(r?'<div class="x-clear"></div>':"")+n+(r?'<div class="x-system-panel-health-table" id="'+p+'"></div><div class="x-system-panel-health-table" id="'+
o+'"></div><div class="x-clear"></div>':"")}},this);for(var g in this.scrollersIds)this.scrollersIds[g].position=this.scrollersIds[g].target.dom.scrollTop;this.content.update(d);_.each(e,function(j){var m=new Ext.UI.Scroller({dom:Ext.get(j.elId).dom,type:"vertical"});m.reg();this.scrollersIds[j.encId]&&this.scrollersIds[j.encId].position&&m.scroll(this.scrollersIds[j.encId].position);this.scrollersIds[j.encId]=m},this);this.tips=[];_.each(this.btns,function(j){this.tips.push(new Ext.UI.ToolTip(Ext.get(j.id),
{width:200,html:_TR(j.type)}))},this);for(var h in this.disks){a=new Ext.UI.ToolTip(this.disks[h].tipId,{minWidth:400,autoheight:false,height:300,html:'<div><div id="'+this.disks[h].tipId+'-mask" style="height:100px;width:80px;margin:0 auto;"></div><div id="'+this.disks[h].tipId+'-content"></div></div>'});a.diskId=h;(new Ext.UI.LoadMask(this.disks[h].tipId+"-mask",{type:Ext.UI.LoadMask.MIDDLE,frame:false,background:false,msgCls:"ui-mask-style1"})).show();a.on("beforeshow",function(j){j=j.diskId;Ext.get(this.disks[j].tipId+
"-mask").setStyle("display","block");Ext.get(this.disks[j].tipId+"-content").update(" ");var m=new String("system-health-smart");m.diskId=j;this.spHealthManager.updateDiskSmartInfo(m,j)},this)}_.each(f,function(j){j.widget.render(j.renderTo)},this);this.spSystemManager.updateFanConfig("system-health-fan-update");return _5}else if(b=="system-health-smart"){h=b.diskId;g=this.disks[h].tipId;a=Ext.get(this.disks[h].tipId);Ext.get(g+"-mask").setStyle("display","none");var k='<tr style="height: 18px;"><td style="width: 40%;" valign="top"><div class="x-inspector-filepreview-details-header-bg x-nowrapword">{0}:</div></td><td style="width: 60%;" valign="top"><div class="x-tooltip-details-content-bg x-wrapword"> {1}</div></td></tr>';
h=this.spHealthManager.getDiskSmartInfo();a='<table style="width: 100%; margin-top: 5px;" border="0" cellspacing="0" cellpadding="0">';b=function(j,m){if(m&&m!=_4&&m!="-1")return String.format(k,j,m);return""};a+=b(_TR("DISK_SMART_DEVICE"),h.getDevice());a+=b(_TR("DISK_SMART_CONTROLLER"),h.getController());a+=b(_TR("DISK_SMART_CHANNEL"),h.getChannel());a+=b(_TR("DISK_SMART_MODEL"),h.getModel());a+=b(_TR("DISK_SMART_SERIAL"),h.getSerial());a+=b(_TR("DISK_SMART_FIRMWARE"),h.getFirmware());a+=b(_TR("DISK_SMART_CLASS"),
h.getClass());a+=b(_TR("DISK_SMART_RPM"),h.getRPM());a+=b(_TR("DISK_SMART_SECTORS"),h.getSectors());a+=b(_TR("DISK_SMART_VOLUME"),h.getPool());a+=b(_TR("DISK_SMART_VOLUME_TYPE"),h.getPoolType());a+="</table>";a+='<table style="width: 100%; margin-top: 15px;" border="0" cellspacing="0" cellpadding="0">';a+='<tr><td style="text-alight: center; font-weight: bold;"><div class="x-inspector-filepreview-details-header-bg x-nowrapword">'+_TR("DISK_SMART_HEALTH")+"</div></td><td></td></tr>";k='<tr style="height: 18px;"><td style="width: 60%;" valign="top"><div class="x-inspector-filepreview-details-header-bg x-nowrapword">{0}:</div></td><td style="width: 40%;" valign="top"><div class="x-tooltip-details-content-bg x-wrapword"> {1}</div></td></tr>';
a+=b(_TR("DISK_SMART_ATA_ERROR_COUNT"),h.getATAErrorCount());a+=b(_TR("DISK_SMART_REALLOCATED_SECTORS"),h.getReallocatedSectors());a+=b(_TR("DISK_SMART_REALLOCATION_EVENTS"),h.getReallocationEvents());a+=b(_TR("DISK_SMART_SPIN_RETRY_COUNT"),h.getSpinRetryCount());a+=b(_TR("DISK_SMART_END_TO_END_ERRORS"),h.getEndToEndErrors());a+=b(_TR("DISK_SMART_COMMAND_TIMEOUTS"),h.getCommandTimeouts());a+=b(_TR("DISK_SMART_CURRENT_PENDING_SECTOR_COUNT"),h.getCurrentPendingSectorCount());a+=b(_TR("DISK_SMART_UNCORRECTABLE_SECTOR_COUNT"),
h.getUncorrectableSectorCount());a+=b(_TR("DISK_SMART_TEMPERATURE"),h.getTemperature());a+=b(_TR("DISK_SMART_START_STOP_COUNT"),h.getStartStopCount());a+=b(_TR("DISK_SMART_POWER_ON_HOURS"),h.getPowerOnHours());a+=b(_TR("DISK_SMART_POWER_CYCLE_COUNT"),h.getPowerCycleCount());a+=b(_TR("DISK_SMART_LOAD_CYCLE_COUNT"),h.getLoadCycleCount());a+="</table>";Ext.get(g+"-content").update(a)}},_o3:function(a,b,c){c=="system-health-update"&&this.hideProgress();return _5}},_i45:{_o2:function(a,
b){if(b=="system-health-fan-update"){a=this.spSystemManager.getFanConfig();b=this.widgets||[];for(var c,d=0,f=b.length;d<f;++d)if((c=b[d]).isfan)c.widget.setSpeedInfo(this.lastFanSpeed=this.getFanSpeedText(a))}else _a(this,"IPanelItem").refresh();return _5}},IPanelItem:{refresh:function(){this.spHealthManager.updateHealth("system-health-update")}},_i1x:{OnDeviceAlarm:function(){_a(this,"IPanelItem").refresh();return _5}}});_._2("_s1");
_s1.LogsBasePanel=_._1(_9,Ext.Container,IPanelItem,{panelCls:"x-system-panel-logs",help:"system_panel_logs",updatesCount:0,style:{minWidth:"600px",width:"600px"},constructor:function(a){_s1.LogsBasePanel.superclass.constructor.call(this,a);this.totalpages=this.page=1;this.pagesize=20;this.html=this.getHtml();this.tab=_a(_7(_._3.SystemSubSys.LogsTab),"IExtNative").getNative();this.tab=this.tab.content;a=_.Utils.throttle(this.onTabResized,
this,500);this.tab.on("resize",a,this);Ext.EventManager.on(window,"resize",a,this);if(a=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spLogManager=a.getLogManager();_a(this.spLogManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)}},onTabResized:function(){this.setContentHeight();this.setContentWidth()},refresh:function(a){this.mask=this.mask||a.mask},onAfterRender:function(){this.pageEdit=
new Ext.UI.TextField({cls:"x-system-logs-pager-edit",width:40,maskRe:/^[0-9]*$/,enableKeyEvents:true,value:"1",listeners:{specialkey:this.onPageSpecialKeyPress,change:this.onPageChangeClick,scope:this}});var a=Ext.id(),b=Ext.id(),c=Ext.id(),d=Ext.id(),f=Ext.id(),e=Ext.id();this.cPager=new Ext.Component({cls:"x-system-logs-pager",hidden:false,renderTo:this.PagerControl,html:String.format('<table cellpadding="0" cellspacing="0" style="display:inline-block; float:right;"><tr><td><div id="{0}" class="x-system-logs-pager-first"></div></td><td><div id="{1}" class="x-system-logs-pager-left"></div></td><td class="x-system-logs-pager-text">{2}</td><td id="{3}"></td><td class="x-system-logs-pager-text">{4}&nbsp;<span id="{5}">1</span></td><td><div id="{6}" class="x-system-logs-pager-right"></div></td><td><div id="{7}" class="x-system-logs-pager-last"></div></td></tr></table>',
a,b,_TR("PAGE"),f,_TR("OF"),e,c,d),listeners:{scope:this,afterrender:function(){this.firstBtn=Ext.get(a);this.firstBtn.on("click",this.onFirstClick,this);this.prevBtn=Ext.get(b);this.prevBtn.on("click",this.onPrevClick,this);this.pageEdit.render(f);this.pageCount=Ext.get(e);this.nextBtn=Ext.get(c);this.nextBtn.on("click",this.onNextClick,this);this.lastBtn=Ext.get(d);this.lastBtn.on("click",this.onLastClick,this)}}});this.lPager=new Ext.Component({hidden:false,renderTo:this.PagerLable,html:String.format('<table cellpadding="0" cellspacing="0"><tr><td><div style="height:20px; width:20px;" class="x-system-panel-led-green"></div></td><td><span id="{0}"></span></td><td><div style="height:20px; width:20px; margin-left:5px;" class="x-system-panel-led-orange"></div></td><td><span id="{1}"></span></td><td><div style="height:20px; width:20px; margin-left:5px;" class="x-system-panel-led-red"></div></td><td><span id="{2}"></span></td><td style="padding-left:20px;">'+
_TR("TOTAL_RECORDS")+_TR("COLON")+'</td><td><span id="{3}"></span></td></tr></table>',this.lgCountId=Ext.id(),this.loCountId=Ext.id(),this.lrCountId=Ext.id(),this.ltCountId=Ext.id()),listeners:{scope:this,afterrender:function(){this.lgCount=Ext.get(this.lgCountId);this.loCount=Ext.get(this.loCountId);this.lrCount=Ext.get(this.lrCountId);this.ltCount=Ext.get(this.ltCountId)}}})},disablePagerButtons:function(){_.each([this.firstBtn,this.prevBtn,this.nextBtn,this.lastBtn],function(a){a.addClass("x-system-logs-pager-disable")},
this);this.pageEdit.setDisabled(true)},updatePagerButtons:function(){_.each([this.firstBtn,this.prevBtn,this.nextBtn,this.lastBtn],function(a){a.removeClass("x-system-logs-pager-disable")},this);this.page==1&&_.each([this.firstBtn,this.prevBtn],function(a){a.addClass("x-system-logs-pager-disable")},this);this.page==this.totalpages&&_.each([this.nextBtn,this.lastBtn],function(a){a.addClass("x-system-logs-pager-disable")},this)},onPageSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ENTER:this.onPageChangeClick()}},
onPageChangeClick:function(){var a=parseInt(this.pageEdit.getValue());if(a){if(a>this.totalpages)a=this.totalpages;a!=this.page&&this.queryRecords(a)}else this.pageEdit.setRawValue(this.page)},onFirstClick:function(){this.page!=1&&this.queryRecords(1)},onPrevClick:function(){this.page!=1&&this.queryRecords(this.page-1)},onNextClick:function(){this.page<this.totalpages&&this.queryRecords(this.page+1)},onLastClick:function(){this.page!=this.totalpages&&this.queryRecords(this.totalpages)},showProgress:function(){this.updatesCount||
this.mask&&this.mask.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.mask&&this.mask.hide()}});_._2("_s1");
_s1.LogslistPanel=_._1(_s1.LogsBasePanel,{constructor:function(a){_s1.LogslistPanel.superclass.constructor.call(this,a);this.on("afterrender",this.onAfterRender,this);this.nolog='<div class="'+this.panelCls+'-nolog">'+_TR("NO_LOGS")+"</div>"},setContentHeight:function(){var a=this.tab.getHeight()-Ext.get(this.searchInputDiv).getHeight();Ext.get(this.LogsListDiv).setHeight(a-Ext.get(this.PagerDiv).getHeight()-50)},setContentWidth:function(){this.el.setWidth(this.tab.getWidth()-
this.el.parent().parent().prev().getWidth()-4)},getHtml:function(){return'<div id="'+(this.searchInputDiv=Ext.id())+'"><div style="float:left"><table cellpadding="0" cellspacing="0"><tr><td colspan="7" style="padding-bottom:5px;"><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.searchId=Ext.id())+'"></td><td id="'+(this.searchBtnId=Ext.id())+'" style="padding-left:5px;"></td></tr></table></td></tr><tr><td style="padding-right:5px;">'+_TR("LOGS_TAB_LOGS_LEVEL")+_TR("COLON")+'</td><td id="'+
(this.levelId=Ext.id())+'" style="padding-right:10px;"></td><td style="padding-right:5px;">'+_TR("LOGS_TAB_LOGS_CATEGORIES")+_TR("COLON")+'</td><td id="'+(this.categoriesId=Ext.id())+'" style="padding-right:10px;"></td><td style="padding-right:5px;">'+_TR("LOGS_TAB_LOGS_DATE")+_TR("COLON")+'</td><td id="'+(this.dateFromId=Ext.id())+'" style="padding-right:5px;"></td><td id="'+(this.dateToId=Ext.id())+'"></td></tr></table></div><div style="float:right"><table width="100%" cellpadding="0" cellspacing="0"><tr><td id="'+
(this.downLoadLogsId=Ext.id())+'" style="padding-bottom:5px;"></td></tr><tr><td id="'+(this.clearLogsId=Ext.id())+'"></td></tr></table></div><div style="clear:both"></div></div><div id="'+(this.LogsListDiv=Ext.id())+'" style="padding:10px 0px; width:100%; overflow:hidden; overflow-y: auto;"></div><div id="'+(this.PagerDiv=Ext.id())+'" style="border-top:1px solid #d0d0d0; width:100%; height:40px;"><div id="'+(this.PagerControl=Ext.id())+'" style="float:left; width:50%;"></div><div id="'+(this.PagerLable=
Ext.id())+'" style="float:left; line-height: 40px; margin-left:50px;"></div><div style="clear:both"></div></div>'},refresh:function(a){_s1.LogslistPanel.superclass.refresh.call(this,a);this.queryRecords(1)},onAfterRender:function(){_s1.LogslistPanel.superclass.onAfterRender.call(this);this.search=new Ext.UI.TextField({width:230,emptyText:_TR("LOGS_TAB_LOGS_SEARCH"),enableKeyEvents:true,renderTo:this.searchId,listeners:{change:this.onSearchChanged,specialkey:this.onspkeypress,
scope:this}});(new Ext.UI.RoundButton({cls:"x-frontview-btn-search",renderTo:this.searchBtnId})).on("click",this.onSearchChanged,this);this.levelCmb=new Ext.UI.ComboBox({width:150,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["",_TR("ALL")],["info",_TR("INFO")],["warnings",_TR("LOG_SEVERITY_WARNING")],["error",_TR("LOG_SEVERITY_ERR")]]}),valueField:"id",displayField:"text",value:"",renderTo:this.levelId});this.levelCmb.on("select",this.onSearchChanged,
this);this.categoriesCmb=new Ext.UI.ComboBox({width:150,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({data:[["",_TR("ALL_CATEGORIES")],["'system'",_TR("system")],["'disk'",_TR("disk")],["'volume'",_TR("volume")],["'share'",_TR("share")],["'snapshot'",_TR("snapshot")],["'backup'",_TR("backup")],["'account'",_TR("account")],["'misc'",_TR("misc")]],fields:["id","text"]}),valueField:"id",displayField:"text",value:"",renderTo:this.categoriesId});this.categoriesCmb.on("select",this.onSearchChanged,
this);this.dFrom=new Ext.UI.DateField({emptyText:_TR("FILE_SEARCH_DATE_FROM"),maxDate:new Date,width:100,renderTo:this.dateFromId});this.dFrom.on("change",this.onDateFromChanged,this);this.dTo=new Ext.UI.DateField({emptyText:_TR("FILE_SEARCH_DATE_TO"),maxDate:new Date,width:100,renderTo:this.dateToId});this.dTo.on("change",this.onDateToChanged,this);this.downLoadLogsBtn=new Ext.UI.Button({width:150,expandToText:true,text:_TR("DOWNLOAD_LOGS"),renderTo:this.downLoadLogsId});this.downLoadLogsBtn.on("click",
this.onDownloadBtnClick,this);this.clearBtn=new Ext.UI.Button({width:150,expandToText:true,text:_TR("CLEAR_LOGS"),renderTo:this.clearLogsId});this.clearBtn.on("click",this.onClearBtnClick,this);this.logsListContent=Ext.get(this.LogsListDiv);this.onTabResized()},initPageSize:function(){this.setContentHeight();var a=Math.floor((this.logsListContent.getHeight()-20)/20);a<12&&(a=12);this.pagesize=a},queryRecords:function(a){this.initPageSize();var b=this.pagesize,c="",d=this.categoriesCmb.getValue(),
f="",e="",g=this.search.getValue();c=this.dTo.getValue();if(this.dFrom.getValue())f=_.convertDateToFixedFormat(new Date(this.dFrom.getDateValue().getTime()),"yyyy-MM-dd hh:mm:ss");if(c)e=_.convertDateToFixedFormat(new Date(this.dTo.getDateValue().getTime()+864E5),"yyyy-MM-dd hh:mm:ss");switch(this.levelCmb.getValue()){case "info":c="'info','notice'";break;case "warnings":c="'warning', 'alert'";break;case "error":c="'err', 'crit', 'emerge'";break;default:c="'info','notice','warning', 'alert','err', 'crit', 'emerge'";
break}this.page=a;this.spLogManager.QueryLogs(f,e,c,d,(a-1)*b,b,g,"system-logs-query")},onDateFromChanged:function(a,b){if(b){var c=new Date(b);a.setValue(_.formatDate(b));c.setDate(c.getDate());this.dTo.minDate=c;this.dTo.maxDate=new Date;this.onSearchChanged()}},onDateToChanged:function(a,b){if(b){var c=new Date(b);a.setValue(_.formatDate(b));c.setDate(c.getDate());this.dFrom.minDate=null;this.dFrom.maxDate=c;this.onSearchChanged()}},onSearchChanged:function(){this.queryRecords(1)},onspkeypress:function(a,
b){switch(b.getKey()){case b.ENTER:this.onSearchChanged();break}},appendItems:function(a){var b="";a=Ext.isArray(a)?a:[a];for(var c=0;c<a.length;c++)b+=a[c];return b},getCell:function(a,b,c,d,f){c=c?'title="'+(b?this.appendItems(b):"")+'"':"";return"<td "+_.Utils.Format.htmlEncode(c)+' class="'+a+'" id="'+(d?d:Ext.id())+'" '+(f?f:"")+">"+(b?this.appendItems(_.Utils.Format.htmlEncode(b)):"")+"</td>"},getRow:function(a,b,c){return'<tr class="'+a+'" id="'+(c?c:Ext.id())+'">'+this.appendItems(b)+
"</tr>"},formatLogMessage:function(a){var b=_TR(a.getMessageTag());a=a.getArgs();var c=false;a!=_4&&_.each(a,function(d){c=true;b=b.replace(new RegExp("{"+d.name+"}",["g"]),d.value)},this);return c?Ext.util.Format.htmlEncode(b):b},getLine:function(a){var b=this.panelCls+"-cell",c="x-system-panel-led-";switch(a.getSeverity()){case "warning":case "alert":c+="orange";break;case "err":case "crit":case "emerge":c+="red";break;default:c+="green";break}return this.getRow(this.panelCls+"-row",[this.getCell(b+
"1 x-selectable",_.formatDateTime(new Date(a.getLocalTime()))),this.getCell(b+"2",'<div style="width:20px;height:20px;" class="'+c+'"></div>',null,'valign="top"'),this.getCell(b+" x-selectable",_TR(a.getCategory())+": "+this.formatLogMessage(a),true)])},clearContent:function(){this.logsListContent.update("")},onClearBtnClick:function(){Ext.UI.MessageBox.confirm({title:_TR("CLEAR_LOGS"),msg:String.format("{0}",_TR("WIZARD_REST_CLEAR")),fn:function(a){if(a=="yes"){this.page=1;this.spLogManager.cleanLogs("system-logs-clean")}},
scope:this})},onDownloadBtnClick:function(){_a(_7(_._3.Controls.LogDownloader),"ILogDownloader").Start(document.logdownloadurl)},_i1x:{_o1:function(a,b){if(b!="system-logs-query"&&b!="downloadAllLogs"&&b!="system-logs-clean")return _5;this.showProgress();this.disablePagerButtons();return _5},_o2:function(a,b){switch(b){case "system-logs-query":this.clearContent();a=_a(a,"_i1w").getLogs();if(a!=_4&&a.length>0){var c="";_.each(a,
function(d){c+=Ext.util.Format.htmlDecode(this.getLine(_a(d,"_i1v")))},this);(a=this.logsListContent.child(".x-system-panel-logs-nolog"))&&a.remove();this.logsListContent.insertHtml("beforeEnd",'<table cellpadding="0" cellspacing="0"><tbody>'+c+"</tbody></table>");this.ltCount.update(this.spLogManager.getLogsCount());this.lgCount.update(this.spLogManager.getInfoLogsCount()+"");this.loCount.update(this.spLogManager.getWarnLogsCount()+"");this.lrCount.update(this.spLogManager.getErrorLogsCount()+
"")}else{this.logsListContent.update(this.nolog);this.ltCount.update("0");this.lgCount.update("0");this.loCount.update("0");this.lrCount.update("0")}this.pageEdit.setDisabled(false);this.pageEdit.setRawValue(this.page);if(this.pagesize){this.totalpages=Math.ceil(this.spLogManager.getLogsCount()/this.pagesize);this.totalpages=this.totalpages==0?"1":this.totalpages+"";this.pageCount.update(this.totalpages)}this.updatePagerButtons();break;case "system-logs-clean":this.clearContent();a=this.logsListContent.child(".x-system-panel-logs-nolog");
!a&&this.logsListContent.insertHtml("beforeEnd",this.nolog);this.pageEdit.setDisabled(false);this.pageEdit.setRawValue(this.page);this.totalpages=1;this.pageCount.update(this.totalpages);this.updatePagerButtons();break}return _5},_o3:function(a,b,c){if(c!="system-logs-query"&&c!="downloadAllLogs"&&c!="system-logs-clean")return _5;this.hideProgress();if(a!=_5)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),
"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}return _5},OnDeviceAlarm:function(){return _5}}});_._2("_s1");
_s1.AuditPanel=_._1(_s1.LogsBasePanel,{constructor:function(a){_s1.AuditPanel.superclass.constructor.call(this,a);this.on("afterrender",this.onAfterRender,this);this.thead='<thead class="audit_thead"><td>'+_TR("LOGS_TAB_AUDIT_TABLE_HEADER_DATE_TIME")+"</td><td>"+_TR("LOGS_TAB_AUDIT_TABLE_HEADER_USER")+"</td><td>"+_TR("LOGS_TAB_AUDIT_TABLE_HEADER_PROTOCOL")+"</td><td>"+_TR("LOGS_TAB_CONNECTIONS_TABLE_HEADER_HOSTS")+"</td><td><nobr>"+_TR("LOGS_TAB_AUDIT_TABLE_HEADER_ACESS")+
"</nobr></td><td>"+_TR("LOGS_TAB_AUDIT_TABLE_HEADER_ACTION")+'</td></thead><tr><td colspan="7" style="width:100%; border-top:1px solid #d0d0d0; height:4px;"></td></tr>'},setContentHeight:function(){var a=this.tab.getHeight()-Ext.get(this.searchInputDiv).getHeight();Ext.get(this.AuditLogsListDiv).setHeight(a-Ext.get(this.PagerDiv).getHeight()-40)},setContentWidth:function(){this.el.setWidth(this.tab.getWidth()-this.el.parent().parent().prev().getWidth()-4)},getHtml:function(){return'<div id="'+(this.searchInputDiv=
Ext.id())+'"><div style="float:left"><table cellpadding="0" cellspacing="0"><tr><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_PROTOCOL")+_TR("COLON")+'</td><td id="'+(this.protocolId=Ext.id())+'"></td><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_USER")+_TR("COLON")+'</td><td id="'+(this.userId=Ext.id())+'"></td><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_HOST")+_TR("COLON")+'</td><td colspan="2" id="'+(this.hostId=Ext.id())+'"></td></tr><tr><td colspan="7" style="padding-bottom:5px;"></td></tr><tr><td class="x-log-label">'+
_TR("LOGS_TAB_AUDIT_ACTION")+_TR("COLON")+'</td><td id="'+(this.actionId=Ext.id())+'"></td><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_FILE")+_TR("COLON")+'</td><td id="'+(this.fileId=Ext.id())+'"></td><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_DATE")+_TR("COLON")+'</td><td id="'+(this.dateFromId=Ext.id())+'" style="padding-right:5px;"></td><td id="'+(this.dateToId=Ext.id())+'"></td></tr></table></div><div style="float:right"><table width="100%" cellpadding="0" cellspacing="0"><tr><td id="'+
(this.downLoadAuditLogsId=Ext.id())+'" style="padding-bottom: 5px;"></td></tr><tr><td id="'+(this.archiveAuditLogsId=Ext.id())+'"></td></tr></table></div><div style="clear:both"></div></div><div id="'+(this.AuditLogsListDiv=Ext.id())+'" style="padding:10px 0px; width:100%; overflow:hidden; overflow-y: auto;"></div><div id="'+(this.PagerDiv=Ext.id())+'" style="border-top:1px solid #d0d0d0; width:100%; height:40px;"><div id="'+(this.PagerControl=Ext.id())+'" style="float:left; width:50%;"></div><div id="'+
(this.PagerLable=Ext.id())+'" style="float:left; line-height: 40px; margin-left:50px;"></div><div style="clear:both"></div></div>'},refresh:function(a){_s1.AuditPanel.superclass.refresh.call(this,a);this.lPager.setVisible(false);this.spServManager.updateSystemServiceInfo("audit_update_protocol")},onAfterRender:function(){_s1.AuditPanel.superclass.onAfterRender.call(this);this.protocol=new Ext.UI.ComboBox({width:150,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id",
"text"],data:[["",_TR("ALL")],["ISCSI",_TR("iSCSI")],["SMB",_TR("SMB")],["FTP",_TR("FTP")],["HTTP/S",_TR("HTTP/S")],["ReadyNAS",_TR("ReadyNAS")],["ReadyCLOUD",_TR("ReadyCLOUD")],["SSH",_TR("SSH")]]}),valueField:"id",displayField:"text",value:"",renderTo:this.protocolId});this.protocol.on("select",this.onSearchChanged,this);this.user=new Ext.UI.TextField({width:120,enableKeyEvents:true,renderTo:this.userId,listeners:{change:this.onSearchChanged,specialkey:this.onspkeypress,scope:this}});this.host=
new Ext.UI.TextField({width:200,enableKeyEvents:true,renderTo:this.hostId,listeners:{change:this.onSearchChanged,specialkey:this.onspkeypress,scope:this}});this.action=new Ext.UI.ComboBox({width:150,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["",_TR("All Actions")],["Authentication",_TR("Authentication")],["Read",_TR("Read")],["Write",_TR("Write")],["Delete",_TR("Delete")]]}),valueField:"id",displayField:"text",value:"",renderTo:this.actionId});this.action.on("select",
this.onSearchChanged,this);this.file=new Ext.UI.TextField({width:120,enableKeyEvents:true,renderTo:this.fileId,listeners:{change:this.onSearchChanged,specialkey:this.onspkeypress,scope:this}});this.dFrom=new Ext.UI.DateField({emptyText:_TR("FILE_SEARCH_DATE_FROM"),maxDate:new Date,width:100,renderTo:this.dateFromId});this.dFrom.on("change",this.onDateFromChanged,this);this.dTo=new Ext.UI.DateField({emptyText:_TR("FILE_SEARCH_DATE_TO"),maxDate:new Date,width:100,renderTo:this.dateToId});this.dTo.on("change",
this.onDateToChanged,this);this.downLoadAuditLogsBtn=new Ext.UI.Button({width:150,expandToText:true,text:_TR("LOGS_TAB_AUDIT_DOWNLOAD_AUDIT_LOGS"),renderTo:this.downLoadAuditLogsId});this.downLoadAuditLogsBtn.on("click",this.onDownloadAuditBtnClick,this);this.archiveAuditBtn=new Ext.UI.Button({width:150,expandToText:true,text:_TR("LOGS_TAB_AUDIT_CLEAR_AUDIT_LOGS"),renderTo:this.archiveAuditLogsId});this.archiveAuditBtn.on("click",this.onArchiveBtnClick,this);this.logsListContent=Ext.get(this.AuditLogsListDiv);
this.onTabResized()},initPageSize:function(){this.setContentHeight();var a=Math.floor((this.logsListContent.getHeight()-20-40)/20);a<12&&(a=12);this.pagesize=a},queryRecords:function(a){this.initPageSize();var b="",c="",d=this.user.getValue(),f=this.protocol.getValue(),e,g=this.host.getValue(),h=this.file.getValue(),k=this.action.getValue(),j=this.pagesize;!_.isValidIPAddress(g)&&(e=g);var m=this.dTo.getValue();if(this.dFrom.getValue())b=_.convertDateToFixedFormat(new Date(this.dFrom.getDateValue().getTime()),
"yyyy-MM-dd hh:mm:ss");if(m)c=_.convertDateToFixedFormat(new Date(this.dTo.getDateValue().getTime()+864E5),"yyyy-MM-dd hh:mm:ss");this.page=a;this.spLogManager.QueryAuditLogs((a-1)*j,j,b,c,d,f,e,g,h,k,"system-auditlogs-query")},onDateFromChanged:function(a,b){if(b){var c=new Date(b);a.setValue(_.formatDate(b));c.setDate(c.getDate());this.dTo.minDate=c;this.dTo.maxDate=new Date;this.onSearchChanged()}},onDateToChanged:function(a,b){if(b){var c=new Date(b);a.setValue(_.formatDate(b));c.setDate(c.getDate());
this.dFrom.minDate=null;this.dFrom.maxDate=c;this.onSearchChanged()}},onSearchChanged:function(){this.queryRecords(1)},onspkeypress:function(a,b){switch(b.getKey()){case b.ENTER:this.onSearchChanged();break}},appendItems:function(a){var b="";a=Ext.isArray(a)?a:[a];for(var c=0;c<a.length;c++)b+=a[c];return b},getCell:function(a,b,c,d,f){return"<td "+(c?"title='"+(b?this.appendItems(b):"")+"'":"")+' class="'+a+'" id="'+(d?d:Ext.id())+'" '+(f?f:"")+">"+(b?this.appendItems(b):"")+"</td>"},getHostCell:function(a,
b,c,d){var f=b==c?c:b;return"<td "+(b==c?"":"title='"+c+"'")+' class="'+a+'" id="'+Ext.id()+'" '+(d?d:"")+">"+(f==""?"--":this.appendItems(f))+"</td>"},getRow:function(a,b,c){return'<tr class="'+a+'" id="'+(c?c:Ext.id())+'">'+this.appendItems(b)+"</tr>"},getLine:function(a){var b=this.panelCls+"-cell";return this.getRow(this.panelCls+"-row",[this.getCell(b,_.formatDateTime(new Date(a.localized_ts))),this.getCell(b,a.user),this.getCell(b,a.protocol),this.getHostCell(b,a.hostname,a.addr_ip),this.getCell(b+
" x-ellipsis",a.accessed_path,a.accessed_path,undefined,"style='display:inline-block; max-width:500px; min-width:150px;'"),this.getCell(b,a.action)])},clearContent:function(){this.logsListContent.update("")},initEmptyContent:function(){this.clearContent();this.logsListContent.insertHtml("beforeEnd",'<table cellpadding="0" cellspacing="0" style="width:100%;">'+this.thead+'<tbody class="audit_tbody"></tbody></table>');this.page=1;this.pageCount.update(this.totalpages=1);this.updatePagerButtons();this.pageEdit.setDisabled(true)},
onDownloadAuditBtnClick:function(){_a(_7(_._3.Controls.AuditLogDownloader),"ILogDownloader").Start(document.logdownloadurl)},onArchiveBtnClick:function(){Ext.UI.MessageBox.confirm({title:_TR("LOGS_TAB_AUDIT_CLEAR_AUDIT_LOGS"),msg:String.format("{0}",_TR("LOGS_TAB_AUDIT_ARCHIVE_AUDIT_LOGS_CONFIRM")),fn:function(a){a=="yes"&&this.spLogManager.ArchiveAuditLogs("audit_logs_clean")},scope:this})},_i35:{_o1:function(a,b){b=="audit_update_protocol"&&
this.showProgress()},_o2:function(a,b){if(b=="audit_update_protocol")if(this.spServManager.getSystemServiceByName("audit").getEnable())this.queryRecords(1);else{Ext.UI.MessageBox.show({title:_TR("WARNING"),msg:"Audit service must be enabled to audit files access. Would you like to enable it?",buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.WARNING,fn:function(c){if(c=="yes"){Ext.query(".x-system-settings-btn")[0].click();Ext.query("button[title=Audit]")[0].click()}}.bind(this)});this.initEmptyContent()}return _5},
_o3:function(a,b,c){if(c=="audit_update_protocol"||c=="audit_logs_clean")this.hideProgress();return _5}},_i1x:{_o1:function(a,b){if(b!="system-auditlogs-query"||b=="audit_logs_clean")return _5;this.showProgress();this.disablePagerButtons();return _5},_o2:function(a,b){switch(b){case "system-auditlogs-query":this.clearContent();a=_a(a,"_i1w").getAuditLogs();if(a.length>0){var c="";_.each(a,function(d){c+=Ext.util.Format.htmlDecode(this.getLine(d))},
this);this.logsListContent.insertHtml("beforeEnd",'<table cellpadding="0" cellspacing="0" style="width:100%;">'+this.thead+'<tbody class="audit_tbody">'+c+"</tbody></table>")}else this.ltCount.update("0");this.pageEdit.setDisabled(false);this.pageEdit.setRawValue(this.page);if(this.pagesize){this.totalpages=Math.ceil(this.spLogManager.getAuditLogsCount()/this.pagesize);this.totalpages=this.totalpages==0?"1":this.totalpages+"";this.pageCount.update(this.totalpages)}this.updatePagerButtons();break;
case "audit_logs_clean":this.initEmptyContent();break}return _5},_o3:function(a,b,c){if(c!="system-auditlogs-query"||c=="audit_logs_clean")return _5;this.hideProgress();if(a!=_5)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}return _5},OnDeviceAlarm:function(){return _5}}});
_._2("_s1");
_s1.ConnectionsPanel=_._1(_s1.LogsBasePanel,{constructor:function(a){_s1.ConnectionsPanel.superclass.constructor.call(this,a);this.on("afterrender",this.onAfterRender,this);this.thead='<thead class="audit_thead"><td>'+_TR("LOGS_TAB_CONNECTIONS_TABLE_HEADER_CONNECTION_TIME")+"</td><td>"+_TR("LOGS_TAB_AUDIT_TABLE_HEADER_USER")+"</td><td>"+_TR("LOGS_TAB_AUDIT_TABLE_HEADER_PROTOCOL")+"</td><td>"+_TR("LOGS_TAB_CONNECTIONS_TABLE_HEADER_HOSTS")+'</td></thead><tr><td colspan="7" style="width:100%; border-top:1px solid #d0d0d0; height:4px;"></td></tr>'},
setContentHeight:function(){var a=this.tab.getHeight()-Ext.get(this.searchInputDiv).getHeight();Ext.get(this.AuditLogsListDiv).setHeight(a-Ext.get(this.PagerDiv).getHeight()-40)},setContentWidth:function(){this.el.setWidth(this.tab.getWidth()-this.el.parent().parent().prev().getWidth()-4)},getHtml:function(){return'<div id="'+(this.searchInputDiv=Ext.id())+'"><table cellpadding="0" cellspacing="0"><tr><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_PROTOCOL")+_TR("COLON")+'</td><td id="'+(this.protocolId=
Ext.id())+'"></td><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_USER")+_TR("COLON")+'</td><td id="'+(this.userId=Ext.id())+'"></td><td class="x-log-label">'+_TR("LOGS_TAB_AUDIT_HOST")+_TR("COLON")+'</td><td id="'+(this.hostId=Ext.id())+'"></td></tr></table></div><div id="'+(this.AuditLogsListDiv=Ext.id())+'" style="padding:10px 0px; width:100%; overflow:hidden;"></div><div id="'+(this.PagerDiv=Ext.id())+'" style="border-top:1px solid #d0d0d0; width:100%; height:40px;"><div id="'+(this.PagerControl=
Ext.id())+'" style="float:left; width:50%;"></div><div id="'+(this.PagerLable=Ext.id())+'" style="float:left; line-height: 40px; margin-left:50px;"></div><div style="clear:both"></div></div>'},refresh:function(a){_s1.ConnectionsPanel.superclass.refresh.call(this,a);this.lPager.setVisible(false);this.spLogManager.updateAuditConnections("system-auditconnections-update")},onAfterRender:function(){_s1.ConnectionsPanel.superclass.onAfterRender.call(this);this.protocol=new Ext.UI.ComboBox({width:150,
mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["",_TR("ALL")],["ISCSI",_TR("iSCSI")],["SMB",_TR("SMB")],["FTP",_TR("FTP")],["HTTP/S",_TR("HTTP/S")],["ReadyNAS",_TR("ReadyNAS")],["ReadyCLOUD",_TR("ReadyCLOUD")],["Rsync",_TR("Rsync")],["AFP",_TR("AFP")],["iTunes",_TR("iTunes")],["Misc",_TR("Misc")],["SSH",_TR("SSH")]]}),valueField:"id",displayField:"text",value:"",renderTo:this.protocolId});this.protocol.on("select",this.onSearchChanged,this);this.user=new Ext.UI.TextField({width:120,
enableKeyEvents:true,renderTo:this.userId,listeners:{change:this.onSearchChanged,specialkey:this.onspkeypress,scope:this}});this.host=new Ext.UI.TextField({width:200,enableKeyEvents:true,renderTo:this.hostId,listeners:{change:this.onSearchChanged,specialkey:this.onspkeypress,scope:this}});this.action=new Ext.UI.TextField({width:120,enableKeyEvents:true,renderTo:this.actionId});this.action.on("change",this.onSearchChanged,this);this.logsListContent=Ext.get(this.AuditLogsListDiv);this.onTabResized()},
initPageSize:function(){this.setContentHeight();var a=Math.floor((this.logsListContent.getHeight()-20-40)/20);a<12&&(a=12);this.pagesize=a},queryRecords:function(a){this.initPageSize();var b=this.user.getValue(),c=this.protocol.getValue(),d,f=this.host.getValue(),e=this.pagesize;!_.isValidIPAddress(f)&&(d=f);this.page=a;this.spLogManager.QueryAuditConnections((a-1)*e,e,b,c,d,f,"system-auditconnections-query")},onSearchChanged:function(){this.queryRecords(1)},onspkeypress:function(a,b){switch(b.getKey()){case b.ENTER:this.onSearchChanged();
break}},appendItems:function(a){var b="";a=Ext.isArray(a)?a:[a];for(var c=0;c<a.length;c++)b+=a[c];return b},getCell:function(a,b,c,d,f){return"<td "+(c?"title='"+(b?this.appendItems(b):"")+"'":"")+' class="'+a+'" id="'+(d?d:Ext.id())+'" '+(f?f:"")+">"+(b?this.appendItems(b):"")+"</td>"},getHostCell:function(a,b,c,d){var f=b==c?c:b;return"<td "+(b==c?"":"title='"+c+"'")+' class="'+a+'" id="'+Ext.id()+'" '+(d?d:"")+">"+(f==""?"--":this.appendItems(f))+"</td>"},getRow:function(a,b,c){return'<tr class="'+
a+'" id="'+(c?c:Ext.id())+'">'+this.appendItems(b)+"</tr>"},getLine:function(a){var b=this.panelCls+"-cell";return this.getRow(this.panelCls+"-row",[this.getCell(b,a.connect_time=="0"?"-":_.formatDateTime(new Date(a.localized_ts))),this.getCell(b+"",a.user),this.getCell(b+"",a.protocol),this.getHostCell(b,a.host,a.src_ip)])},clearContent:function(){this.logsListContent.update("")},initEmptyContent:function(){this.clearContent();this.logsListContent.insertHtml("beforeEnd",'<table cellpadding="0" cellspacing="0" style="width:100%;">'+
this.thead+'<tbody class="audit_tbody"></tbody></table>');this.page=1;this.pageCount.update(this.totalpages=1);this.updatePagerButtons();this.pageEdit.setDisabled(true)},_i1x:{_o1:function(a,b){if(b!="system-auditconnections-query"||b!="system-auditconnections-update")return _5;this.showProgress();this.disablePagerButtons();return _5},_o2:function(a,b){switch(b){case "system-auditconnections-query":this.clearContent();a=_a(a,"_i1w").getAuditConnections();
if(a.length>0){var c="";_.each(a,function(d){c+=Ext.util.Format.htmlDecode(this.getLine(d))},this);this.logsListContent.insertHtml("beforeEnd",'<table cellpadding="0" cellspacing="0" style="width:100%;">'+this.thead+'<tbody class="audit_tbody">'+c+"</tbody></table>")}else this.ltCount.update("0");this.pageEdit.setDisabled(false);this.pageEdit.setRawValue(this.page);if(this.pagesize){this.totalpages=Math.ceil(a.length/this.pagesize);this.totalpages=this.totalpages==0?"1":this.totalpages+"";this.pageCount.update(this.totalpages)}this.updatePagerButtons();
break;case "system-auditconnections-update":this.queryRecords(1);break}return _5},_o3:function(a,b,c){if(c!="system-auditconnections-query"||c!="system-auditconnections-update")return _5;this.hideProgress();if(a!=_5)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}return _5},
OnDeviceAlarm:function(){return _5}}});_._2("_s1");
_s1.SettingsPanel=_._1(_9,Ext.Container,_s0.TabItem,{panelCls:"x-system-panel-logs",help:"system_panel_logs",constructor:function(a){_s1.SettingsPanel.superclass.constructor.call(this,a);a=_.Utils.throttle(this.onTabResized,this,500);this.tab=_a(_7(_._3.SystemSubSys.LogsTab),"IExtNative").getNative().content;this.tab.on("resize",a,this);Ext.EventManager.on(window,"resize",a,this);this.on("afterrender",this.onAfterRender,
this)},setContentHeight:function(){this.content.setHeight(this.tab.getHeight())},setContentWidth:function(){this.content.setWidth(this.tab.getWidth()-this.el.parent().parent().prev().getWidth()-4)},onTabResized:function(){this.setContentHeight();this.setContentWidth()},onAfterRender:function(){_a(this,"IPanelList").addPanel(_a(_7(_._3.SystemSubSys.AuditSettingsPanel),"IPanelItem"))},refresh:function(a){this.onTabResized();_.each(_a(this,"IPanelList").getPanelItems(),
function(b){b.refresh(a)},this)}});_._2("_s1");
_s1.LogsContainerPanel=_._1(_9,Ext.Container,IExtNative,IPanelItem,{cls:"x-logs-container",help:"system_panel_logs",constructor:function(a){_s1.LogsContainerPanel.superclass.constructor.call(this,a);this.spSYSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemManager();this.on("afterrender",this.onAfterRender,this)},onAfterRender:function(){this.sidebar=new Ext.UI.SideBar;this.sidebar.render(this.el);this.logBlock=new _s1.LogslistPanel(this);
this.sidebar.addTab(_TR("LOGS_TAB_LOGS"),this.logBlock);if(this.spSYSManager.getSupportAudit()=="1"){this.auditBlock=new _s1.AuditPanel(this);this.sidebar.addTab(_TR("LOGS_TAB_AUDIT"),this.auditBlock);this.connectionsBlock=new _s1.ConnectionsPanel(this);this.sidebar.addTab(_TR("LOGS_TAB_CONNECTIONS"),this.connectionsBlock)}this.sidebar.on("select",function(a){a.selectedtab.component.refresh&&a.selectedtab.component.refresh(this.parentTabItem)},this)},IPanelItem:{refresh:function(){this.sidebar.selectedtab.component.refresh&&
this.sidebar.selectedtab.component.refresh(this.parentTabItem)}}});Ext.namespace("_s1");
_s1.HardwarePanel=_._1(_._3.SystemSubSys.HardwarePanel,_s0.BasePanel,IPanelItem,_i4,_i45,_iz,_i24,IDateTimeWindowEvents,_i1f,_i35,_i20,{panelCls:"x-system-panel-hware",updatesCount:0,help:"system_panel_hardware",constructor:function(){this.title=_TR("DEVICE");_s1.HardwarePanel.superclass.constructor.apply(this,arguments)},initComponent:function(){var a=
_a(_7(_1.CLSIDS.Device5200),"_i2");_a(a,"_i1").Advise(this);if(a){this.spSYSManager=a.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this);this.spFSManager=a.getFSManager();_a(this.spFSManager,"_i1").Advise(this);this.spHealthManager=a.getHealthManager();_a(this.spHealthManager,"_i1").Advise(this);this.spNetworkManager=a.getNetworkManager();_a(this.spNetworkManager,"_i1").Advise(this);this.zfsVolumesManager=
a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.spFWManager=a.getFirmwareManager();_a(this.spFWManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);this.spP2PManager=a.getP2PManager();_a(this.spP2PManager,"_i1").Advise(this);this.spAlertsManager=this.spSYSManager.getAlertsManager();
_a(this.spAlertsManager,"_i1").Advise(this)}this.createPowerPopUpMenu();_s7&&_s7.Storage&&_s7.Storage.DB&&_s7.Storage.DB.Upgrade&&new _s7.Storage.DB.Upgrade;this.updprompt=_a(_7(_._3.Controls.FirmwareWindow),"IPromptWindow");_s1.HardwarePanel.superclass.initComponent.apply(this,arguments)},timeStrConcat:function(a,b,c){var d=[];if(c)d.push(c+" "+_TR("DEVICE_UPTIME_DAY"+(c>1?"S":"")));
if(b)d.push(b+" "+_TR("DEVICE_UPTIME_HOUR"+(b>1?"S":"")));if(a)d.push(a+" "+_TR("DEVICE_UPTIME_MINUTE"+(a>1?"S":"")));return d.join(", ")},secondToDate:function(a){var b=Math.floor(a/86400),c=Math.floor((a-b*24*3600)/3600);return this.timeStrConcat(Math.floor((a-b*24*3600-c*3600)/60),c,b)},onReady:function(){var a=this.panelCls,b=a+"-col",c=a+"-table";this.content.update('<div id="'+(this.dataId=Ext.id())+'" style="display: none;" class="'+a+'"><div class="'+a+'-devtable"><table cellpadding="0" cellspacing="0"><tr><td class="'+
a+"-device "+b+'"><div id="'+(this.devIconId=Ext.id())+'"><div id="'+(this.avIconId=Ext.id())+'" class="x-system-hardware-av" style="display: none;">&nbsp;</div></div></td><td class="'+b+'"><div id="'+(this.shutdownId=Ext.id())+'" class="x-system-hardware-shutdown" ></div></td><td class="'+b+'"><table cellpadding="0" cellspacing="0" class="'+c+'">'+this.getHLine(_TR("MODEL"),"",this.devModelId=Ext.id(),this.regBtnId=Ext.id())+'<tr><td class="x-system-hardware-label">'+_TR("NAME")+_TR("COLON")+'</td><td class="x-system-hardware-value"><table cellpadding="0" cellspacing="0" style="/*margin-top: 1px;*/"><tr><td><nobr id="'+
(this.hostnameId=Ext.id())+'" class="x-system-hardware-value x-frontview-link"></nobr></td><td id="'+(this.hostnameBtnId=Ext.id())+'" style="padding-left: 4px;"></td></tr></table></td><td></td></tr>'+this.getHLine(_TR("HEALTH"),"",this.devHealthId=Ext.id())+this.getHLine(_TR("ANTIVIRUS"),'<span id="'+(this.antivirusLedId=Ext.id())+'" class="x-system-panel-led"><span id="'+(this.antivirusId=Ext.id())+'"></span></span>')+this.getHLine(_TR("FILE_SEARCH"),'<span id="'+(this.fileSearchLedId=Ext.id())+
'" class="x-system-panel-led"><span class="x-frontview-link" id="'+(this.fileSearchId=Ext.id())+'"></span></span>')+'<tr class="x-system-panel-hware-row"><td class="x-system-hardware-label">'+_TR("SERIAL")+':</td><td class="x-system-hardware-value"><span id="'+(this.devSerialId=Ext.id())+'" class="x-selectable"></span></td><td class="x-system-panel-hware-cell4"></td></tr>'+this.getHLine(_TR("FIRMWARE"),'<div><span id="'+(this.devFirmwareId=Ext.id())+'"></span> (<span id="'+(this.checkFirmwareId=Ext.id())+
'" class="x-frontview-link">'+_TR("CHECK_FOR_UPDATES")+"</span>)</div>")+'<tr><td class="x-system-hardware-label">'+_TR("DEVICE_TIME")+_TR("COLON")+'</td><td class="x-system-hardware-value"><table cellpadding="0" cellspacing="0" ><tr><td><nobr id="'+(this.devTimeId=Ext.id())+'" class="x-system-hardware-value csrf-filter-ele"></nobr></td><td><div id="'+(this.timeBtnId=Ext.id())+'" class="x-system-panel-hware-time x-fw-panel-prop-l"></div></td></tr></table></td><td/></tr><tr><td class="x-system-hardware-label">'+
_TR("DEVICE_UPTIME")+_TR("COLON")+'</td><td class="x-system-hardware-value"><nobr id="'+(this.devUpTimeId=Ext.id())+'" class="x-system-hardware-value"></nobr></td><td/></tr></table></td></tr></table></div><div class="'+a+'-voltable"><div id="'+(this.bluetoothId=Ext.id())+'" style="float: left;"></div><div id="'+(this.usbId=Ext.id())+'" style="float: left;"></div><div id="'+(this.volumesId=Ext.id())+'" style="float: left;"></div></div></div>');Ext.get(this.hostnameId).on("click",function(d){d.stopEvent();
this.wndHostname.show();this.wndHostname.center();this.wndHostname.load(this.spNetworkManager.getHostname())},this);this.devIcon=Ext.get(this.devIconId);this.devIcon.on("click",function(){var d=_a(_7(_._3.System.Frame),"IExtNative"),f=_a(_7(_._3.ShareSubSys.ShareLUNTab),"IExtNative");d.getNative().selectTab(f);(d=_a(_7(_._3.ShareSubSys.Browse),"IExtNative"))&&f.getNative().selectTab(d)},this);Ext.get(this.shutdownId).on("click",
function(d){this.powerpopupmenu.show(this.shutdownId);d.stopEvent();return false},this);a=new Ext.UI.Button({text:_TR("REGISTER"),width:80,visible:false,expandToText:true,listeners:{scope:this,click:this.onRegister},hidden:true});this.regbtncont=Ext.get(this.regBtnId);a.render(this.regbtncont);this.regbtncont.dom.style.display="none";this.hostnameBtn=new Ext.UI.RoundButton({width:24,height:20,hidden:true,cls:"x-system-panel-hware-host",iconCls:"x-fw-panel-prop-l"});this.wndHostname=new _s1.HostnameWindow;
this.wndHostname.on("applyClick",function(d){this.spNetworkManager.putHostname(d);this.spNetworkManager.commitNetworkInfo("system-hardware-commit-networkinfo");this.wndHostname.hide()},this);this.hostnameBtn.on("click",function(){this.wndHostname.show();this.wndHostname.center();this.wndHostname.load(this.spNetworkManager.getHostname())},this);this.hostnameBtn.render(this.hostnameBtnId);this.dateFullFormat=_TR("DATE_FULL_FORMAT");if(this.dateFullFormat=="DATE_FULL_FORMAT")this.dateFullFormat="M d, Y";
this.devTime=Ext.get(this.devTimeId);this.devUpTime=Ext.get(this.devUpTimeId);this.timeBtn=Ext.get(this.timeBtnId);this.timeBtn.on("click",this.onDateTimeClicked,this);this.datetime=_a(_7(_._3.Controls.DateTimeWindow),"IDateTimeWindow");this.datetime.putDevice(_a(_7(_1.CLSIDS.Device5200),"_i2"));_a(this.datetime,"_i1").Advise(this);Ext.get(this.checkFirmwareId).on("click",function(){_a(_7(_._3.SystemSubSys.UpdatePanel),
"IExtNative").getNative().onCheckForUpdateClick()},this);this.servicePanel=_a(_7(_._3.SystemSubSys.ServicesPanel),"IExtNative").getNative();Ext.get(this.antivirusId).on("click",function(d){d.stopEvent();this.hvUpdate||this.servicePanel.antivirusServiceOnClicked()},this);if(this.spSYSManager.getSupportFileSearch()=="1"){Ext.get(this.fileSearchId).parent("tr").setDisplayed(true);Ext.get(this.fileSearchId).on("click",function(d){d.stopEvent();this.servicePanel.fileSearchServiceOnClicked()},
this)}else Ext.get(this.fileSearchId).parent("tr").setDisplayed(false);this.spHealthManager.updateHealth("system-hardware-health-update");Ext.get(this.antivirusLedId).parent("tr").setDisplayed(this.spSYSManager.getSupportAntiVirus()=="1")},createPowerPopUpMenu:function(){var a=_a(_7(_._3.Controls.PowerMenuItems),"IPowerMenuItems").getItems();this.powerpopupmenu=new Ext.UI.Menu({cls:"x-system-menu",items:a})},updateVolumes:function(a){var b="";this.volumeIsrescanning=this.volumeIsRebuilding=
this.volumeIsDegraded=false;for(var c=0;c<a.length;++c){this.volumeIsrescanning=false;var d=_a(a[c],"_i4o"),f=parseInt(d.getCapacity()),e=parseInt(d.getAvailable()),g=parseInt(d.getUsedBySnapshotKB()),h=Math.ceil(100*(f-e)/f);if(g*1===-115)this.volumeIsrescanning=true;if(d.getState()=="DEGRADED")this.volumeIsDegraded=true;if(d.getResilverProgress()!=_4)this.volumeIsRebuilding=true;if(isNaN(h))h=0;var k=this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize(1024*e,
0.01)+" "+_TR("FREE_OF")+" "+_s10.Utils.fileSize(1024*f,0.01),j=this.volumeIsrescanning?_TR("CALCULATING"):String.format("{0}: {1}\n",_TR("VOLUME_DATA"),_s10.Utils.fileSize((f-e-g)*1024,0.01))+(d.getQuota()=="on"?String.format("{0}: {1}\n",_TR("SNAPSHOTS"),_s10.Utils.fileSize(g*1024,0.01)):"")+String.format("{0}: {1}",_TR("VOLUME_FREE"),_s10.Utils.fileSize(e*1024,0.01));e=this.volumeIsrescanning?0:Math.round(100*(f-e-g)/f);f=this.volumeIsrescanning?0:Math.round(100*
g/f);b+='<table class="x-system-hardware-vol" cellpadding="0" cellspacing="0"><tr><td style="vertical-align: top;width:36px;"><div class="x-system-hardware-vol-lbl">&#160;</div></td><td><div>'+(d.getVolumeName()||"&nbsp;")+'</div><div class="x-system-hardware-vol-graph" title="'+j+'"><div class="x-system-hardware-vol-graphsize'+(h>90?"2":"1")+'" style="width: '+e+'%;"></div><div class="x-system-hardware-vol-graphsize'+(h>90?"2":"3")+'" style="width: '+f+'%;"></div></div><div class="x-system-hardware-vol-free x-ellipsis" title="'+
k+'">'+k+"</div></td></tr></table>"}Ext.fly(this.volumesId).update(b);this.populateHealth();if(this.volumeIsRebuilding&&!this.rebuildAlarmShown){this.rebuildAlarmShown=true;a=_a(_7(_._3.System.Frame),"IExtNative").getNative().alarmbar;_a(a,"IAlarmReporter").reportAlarm(_TR("ALARM_DISK_REBUILD"),a.ALARM_INFO)}},showIndicator:function(){if(!this.indicator)this.indicator=new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LSPECIAL,msgCls:"ui-mask-style1"});this.indicator.show()},
hideIndicator:function(){this.indicator&&this.indicator.hide()},onRegister:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");a&&a.register(this.sysinfo,true)},getHLine:function(a,b,c,d){var f=this.panelCls,e=f+"-cell";return this.getRow(f+"-row",[this.getCell("x-system-hardware-label",a+":"),this.getCell("x-system-hardware-value",'<span id="'+(c||Ext.id())+'">'+b+"</span>"),this.getCell(e+4,"",d)])},getRaidLine:function(a,b){var c=this.panelCls,d=c+"-cell "+c+"-cell";return this.getRow(c+
"-row "+c+"-raidrow",[this.getCell(d+1,'<div style="float:right"></div>'),this.getCell(d+2,'<nobr class="x-system-hardware-value">'+_TR("RAID_TYPE")+":</nobr>"),this.getCell(d+3,'<nobr id="'+b+'" class="x-system-hardware-value"></nobr>'),this.getCell(d+4,"")],a)},getSeparator:function(a){return'<tr><td colspan="4" style="height:'+a+'px;"></td></tr>'},getState:function(a,b,c){var d={};d.name=a;d.state=b;d.msg=c||"";return d},populateHealth:function(){var a=this.spHealthManager,b="",c,d=[];this.volumeIsDegraded&&
d.push(this.getState(_TR("VOLUME_STATE_DEGRADED"),""));var f=a.getEnclosures();f!=_4&&_.each(f,function(g){g=_a(g,"_i1d");if(g!=_4){var h=g.getFansHealth();_.each(h,function(k){var j=_a(k,"_i14");if(j){k=j.getLabel()||"";var m=parseInt(j.getSpeed()||"0"),n=j.getStatus()||"";if(m!="-1"){var p=parseInt(j.getMinNormalSpeed()||"0");j=parseInt(j.getMaxNormalSpeed()||"0");m=p>=0&&j>=0&&(p>m||j<m)?"warning":"ok";p="";if(n!="ok"){m="dead";p=String.format(_TR("FAN_ERROR"),
k)}d.push(this.getState(_TR(k),m,p))}}},this);h=g.getTemperatureHealth();_.each(h,function(k){var j=_a(k,"_i16");if(j){k=j.getLabel()||"";j=j.getValue()||"";(j=parseFloat(j))&&d.push(this.getState(_TR(k),"ok"))}},this);_a(g.getTemperatureSummary(),"_i10")&&d.push(this.getState(_TR("TEMPERATURE"),"ok"));g=g.getPSUHealth();_.each(g,function(k){var j=_a(k,"_i1c");if(j){k=j.getLabel()||"";j=j.getStatus()||"";var m="",n="";if(j=="on")m="ok";else if(j=="off")m=
"off";else{m="dead";n=_TR("PSU_ERROR")}d.push(this.getState(_TR(k),m,n))}},this)}},this);a=a.getUPSHealth();a!=_4&&_.each(a,function(g){var h=_a(g,"_i18");if(h){h.getId();g=h.getName();h=h.getStatus()||"";h=="not_present"||h==_4||!h?d.push(this.getState(g,_TR("NOT_PRESENT"))):d.push(this.getState(g,h=="ok"?"ok":"warning"))}},this);a=[];for(f=0;f<d.length;f++){var e=d[f];if(e.state!="ok"&&e.state!="off"&&e.state!=_TR("NOT_PRESENT")){if(b)b+=", ";if(e.state=="dead")c="dead";b+=
e.msg?e.msg:e.name+(e.state?" ":"")+e.state}else if(e.state=="off"&&e.name.indexOf("PSU")!=-1){c=c!="dead"?"warning":"dead";a.push(e.name.split(" ")[1])}}b&&a.length>0&&(b+=", ");a.length>0&&(b+="PSU  "+a.join(",")+" "+_TR("OFFLINE"));if(!c&&b==""){c="x-system-panel-led-green";b=_TR("HEALTHY")}else c=c=="dead"?"x-system-panel-led-red":"x-system-panel-led-orange";if(this.volumeIsRebuilding)b+=", "+_TR("VOLUME_REBUILDING_IN_PROGRESS");b='<span class="x-system-panel-led '+c+' csrf-filter-ele">'+b+"</span>";
Ext.get(this.devHealthId).update(b)},ISysDongleBluetoothEvents:{_o2:function(a,b){a=_a(a,"ISysDongleBluetooth");switch(b){case "system-hardware-update-bluetooth-status":this.populateBluetooth(a)}return _5}},_i45:{_o1:function(a,b){if(b!="system-hardware-update-sysinfo"&&b!="system-hardware-update-bluetooth")return _5;this.updatesCount||this.showProgress();this.updatesCount++;return _5},_o2:function(a,b){a=_a(a,"_i44");switch(b){case "system-hardware-update-bluetooth":this.populateBluetooth(a.getBluetooth());
break;case "system-hardware-update-sysinfo":case "system-hardware-sync-sysinfo":Ext.get(this.dataId).setDisplayed(true);this.sysinfo=_a(a.getSysInfo(),"_i43");this.refreshedSysinfo=true;var c=+this.sysinfo.getSystemUptime();this.devUpTime.dom.innerHTML=this.secondToDate(c);this.upTimeIntervalId&&clearInterval(this.upTimeIntervalId);this.upTimeIntervalId=setInterval(function(){c+=60;this.devUpTime.dom.innerHTML=this.secondToDate(c)}.bind(this),6E4);b=this.checkForEFail(this.sysinfo.getModel());
Ext.fly(this.devIconId).dom.className=_s10.Utils.getDeviceCls(b.toLowerCase(),128,"hoverable");document.getElementById(this.devModelId).innerHTML=b;document.getElementById(this.devSerialId).innerHTML=this.checkForEFail(this.sysinfo.getSerial());document.getElementById(this.devFirmwareId).innerHTML=this.checkForEFail(this.sysinfo.getFirmwareVersion());b=this.sysinfo.getAntiVirusLastUpdated()?new Date(this.sysinfo.getAntiVirusLastUpdated()*1E3):0;a="";a=this.sysinfo.getAntiVirusLastUpdated()==
"2013020018"?_TR("2013020018"):_.formatDateTime(b);var d=(new Date).getTime();Ext.fly(this.antivirusId).update(this.sysinfo.getAntiVirusVersion()==_4||this.sysinfo.getAntiVirusVersion()=="not enabled"?_TR("DISABLED"):a);Ext.fly(this.antivirusLedId).removeClass("x-system-panel-led-grey").removeClass("x-system-panel-led-orange").removeClass("x-system-panel-led-green");Ext.fly(this.antivirusLedId).addClass("x-system-panel-led-"+(this.sysinfo.getAntiVirusVersion()==_4||this.sysinfo.getAntiVirusVersion()==
"not enabled"?"grey":d-b.getTime()<6048E5?"green":"orange"));Ext.fly(this.avIconId).setDisplayed(this.sysinfo.getAntiVirusVersion()!=_4&&this.sysinfo.getAntiVirusVersion()!="not enabled");this.populateUSB(this.spFSManager);break}return _5},_o3:function(a,b,c){if(c!="system-hardware-update-sysinfo"&&c!="system-hardware-update-bluetooth")return _5;this.updatesCount--;this.updatesCount||this.hideProgress();return _5},OnBluetoothPlugUnPlug:function(){this.spSYSManager.updateBluetooth("system-hardware-update-bluetooth");
return _5}},_i24:{_o1:function(a,b){if(b!="system-hardware-update-networkinfo"&&b!="system-hardware-commit-networkinfo")return _5;this.updatesCount||this.showProgress();this.updatesCount++;return _5},_o2:function(a,b){switch(b){case "system-hardware-update-networkinfo":Ext.get(this.dataId).setDisplayed(true);a=this.checkForEFail(this.spNetworkManager.getHostname());this.hostnameBtn.show();Ext.get(this.hostnameId).update(a);a&&(document.title=a);break}return _5},
_o3:function(a,b,c){if(c!="system-hardware-update-networkinfo"&&c!="system-hardware-commit-networkinfo")return _5;c=="system-hardware-commit-networkinfo"&&this.spNetworkManager.updateNetworkInfo("system-hardware-update-networkinfo");this.updatesCount--;this.updatesCount||this.hideProgress();if(a!=_5)if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();if(b){b=b.getErrorDetails();c=_TR(a);_a(_7(_._3.ErrorReporter),"IErrorReporter").report(c,"Code: "+
a,_2.ERROR,{windowTitle:_TR("DEVICE"),title:"",subTitle:c+"<br />"+b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5}},showError:function(a){if(a=_a(a,"_io").getLastNMLError()){a=a.getErrorCode();switch(a){default:_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("ERROR"),title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},
_iz:{_o1:function(a,b){if(b=="system-hardware-update-volumes"){this.updatesCount||this.showProgress();++this.updatesCount}return _5},_o2:function(a,b){if(b=="system-hardware-update-volumes"){this.populateUSB(_a(a,"_iy"));if(this.nonStopRefreshShares)this.nonStopRefreshShares=false;else this.spShareManager.updateShares("system-shares-update-shares")}return _5},_o3:function(a,b,c){if(c=="system-hardware-update-volumes"){--this.updatesCount;this.updatesCount||
this.hideProgress()}a!=_5&&this.showError(b);return _5},OnFSTUsbEject:function(){this.spFSManager.updateVolumes("system-hardware-update-volumes");this.zfsVolumesManager.UpdateVolumes("sync-update-zfsvolumes");return _5},OnFSTUsbPlug:function(){this.spFSManager.updateVolumes("system-hardware-update-volumes");this.zfsVolumesManager.UpdateVolumes("sync-update-zfsvolumes");return _5}},populateRaid:function(){},_i4a:{_o2:function(a,b){b=="system-hardware-update-xraidinfo"&&this.populateRaid(_a(a,
"_i40"));return _5}},_is:{_o1:function(a,b){if(b&&b.cmd&&(b.cmd==this.lpshutdown||b.cmd==this.lprestart))this.showIndicator();if(b=="eject_usb_volume"||b=="unlock_usb_volume"||b=="lock_usb_volume"){this.updatesCount||this.showProgress();++this.updatesCount}return _5},_o2:function(a,b){if(b=="eject_usb_volume"||b=="unlock_usb_volume"||b=="lock_usb_volume"){this.spFSManager.updateVolumes("system-hardware-update-volumes");this.nonStopRefreshShares=true}return _5},
_o3:function(a,b,c){if(c&&c.cmd&&(c.cmd==this.lpshutdown||c.cmd==this.lprestart)){this.hideIndicator();a!=_5?Ext.UI.MessageBox.error({title:_TR("SHUT_AND_REBOOT"),msg:_TR("DEVICE_IN_REBOOT_ERROR")}):Ext.UI.MessageBox.info({title:_TR("SHUT_AND_REBOOT"),msg:_TR(c.msg)});return _5}if(c=="eject_usb_volume"||c=="unlock_usb_volume"||c=="lock_usb_volume"){--this.updatesCount;this.updatesCount||this.hideProgress()}return _5}},populateBluetooth:function(a){var b="";if(a&&a!=_4){_a(a,"_i1").Unadvise(this);
a=_a(a,"ISysDongleBluetooth");var c=a.getAddress();if(c&&c!=_4){c=_TR("BLUETOOTH_UPDATING_STATUS");var d=-1,f="",e="";e=a.getStatus();if(!e||e==_4){_a(a,"_i1").Advise(this);a.updateStatus("system-hardware-update-bluetooth-status")}else{d=e.getState();f=e.getClientAddress();e=e.getPairingCode();if(d==-1)c=_TR("BLUETOOTH_SERVICE_IS_DISABLED");else if(d==0)c=_TR("BLUETOOTH_NO_CONNECTION");else if(d==1)c=String.format(_TR("BLUETOOTH_WAITING_FOR_PAIRING"),e);else if(d==2)c=
String.format(_TR("BLUETOOTH_CONNECTED"),f)}b+='<table class="x-system-hardware-dongle" cellpadding="0" cellspacing="0"><tr><td style="vertical-align: top;width:36px;"><div class="x-system-panel-hware-dongle'+(d==-1?"-disabled":"")+'">&#160;</div></td><td style="width:209px;"><div>'+_TR("BLUETOOTH_TTL")+'</div><div class="x-system-hardware-dongle-free x-ellipsis" title="'+c+'">'+c+"</div></td></tr></table>"}}Ext.fly(this.bluetoothId).update(b)},populateUSB:function(a){a=a.getVolumes();var b="",c=
[];this.allUSB=[];_.each(a,function(d){if((d=_a(d,"_i11"))&&String(d.getMountPoint()).indexOf("/media")==0){var f=parseInt(d.getTotalSize()),e=parseInt(d.getFreeSize()),g=d.getFSFormat(),h=Math.ceil(100*(f-e)/f);if(isNaN(h))h=0;var k=d.getMountPoint().replace("media","").replace(/\//g,""),j=d.getLable();j=!j?"":_TR("SHARE_TAB_LABEL_DEVICE_LABEL")+": "+j;var m=Ext.id();f=_s10.Utils.fileSize(e,0.01)+" "+_TR("FREE_OF")+" "+_s10.Utils.fileSize(f,0.01);e="none";d.getEncrypt()==
"1"&&d.getUnlock()=="0"&&(e="block");b+='<table class="x-system-hardware-usb" cellpadding="0" cellspacing="0"><tr><td style="vertical-align: top;width:36px;"><div class="x-system-panel-hware-usb">&#160;</div><div style="display:'+e+'" class="x-system-panel-usb-locked"></div></td><td style="width:209px;"><div style="font-size:14px;" class="x-ellipsis" title="'+(k||"&nbsp;")+'">'+_TR("NAME")+": "+(k||"&nbsp;")+'</div><div class="x-system-hardware-vol-free x-ellipsis" title="'+(Ext.util.Format.htmlEncode(d.getLable())||
"&nbsp;")+'">'+(j||"&nbsp;")+'</div><div class="x-system-hardware-vol-graph"><div class="x-system-hardware-vol-graphsize'+(h>90?"2":"1")+'" style="width: '+h+'%;"></div></div><div class="x-system-hardware-vol-free x-ellipsis" title="'+f+'">'+g.toUpperCase()+"&nbsp;&nbsp;"+f+'</div></td><td style="vertical-align: top; padding-left: 5px; width: 25px;" id='+m+"></td></tr></table>";c.push([m,d])}},this);Ext.fly(this.usbId).update(b);_.each(c,function(d){var f=d[0];d=d[1];(new Ext.UI.RoundButton({width:28,
height:22,renderTo:f,cls:"x-system-panel-hware-host",elem:Ext.get(f),iconCls:"x-fw-panel-prop-l"})).on("click",this.onItemClick,this);this.allUSB.push({elem:Ext.get(f),vol:d})},this);this.createMenu()},createMenu:function(){this.itemMenu=new Ext.UI.Menu({cls:"x-system-menu",items:[],listeners:{beforeshow:function(a){var b=new Ext.menu.Item({text:_TR("EJECT"),ctCls:"x-frontview-icon-eject",commandName:"eject"}),c=new Ext.menu.Item({text:_TR("FORMAT"),ctCls:"x-frontview-icon-delete",commandName:"format"});
a.removeAll();if(a.item.getEncrypt()=="1"){var d=new Ext.menu.Item({text:_TR("LOCK"),ctCls:"x-frontview-icon-lock",commandName:"lock"}),f=new Ext.menu.Item({text:_TR("UNLOCK"),ctCls:"x-frontview-icon-unlock",commandName:"unlock"});if(a.item.getUnlock()=="1")a.addMenuItem(d);else a.item.getUnlock()=="0"&&a.addMenuItem(f)}a.addMenuItem(b);a.addMenuItem(c)},itemclick:function(a){switch(a.commandName){case "eject":_a(_7(_1.CLSIDS.Device5200),"_i2").ejectVolume(this.itemMenu.item.getMountPoint(),
"eject_usb_volume");break;case "format":var b=new _s1.FormatUSBWindow;b.on("applyClick",function(c){this.spFSManager.FormatUSB(this.itemMenu.item,c.fs,c.lbl,c.et,c.ske,"format_usb_volume");b.hide()},this);b.show();b.center();b.load(this.itemMenu.item.getDescription(),this.itemMenu.item.getTotalSize());break;case "lock":this.spFSManager.LockUSB(this.itemMenu.item,"lock_usb_volume");break;case "unlock":this.onImport(this.itemMenu.item);break}},scope:this}})},onImport:function(a){this.selItem=
a;_a(this.updprompt,"_i1").Advise(this);this.updprompt.Show(_s10.FirmwareWindow.ADDON,{upurl:document.fsupload,params:{path:"/tmp/"},submittype:"sshsubmit",caption:_TR("USB_ENCRYPTION_KEY"),iscustom:true,fieldname:_TR("FILE_NAME")+_TR("COLON"),okbtn:_TR("UPLOAD"),delegatename:"delegateuploading",showremember:true})},delegateuploading:function(a){this.spFSManager.UnlockUSB(this.selItem,a.getArgs().params.path+a.getArgs().fname,a.getArgs().rememberme,"unlock_usb_volume")},onItemClick:function(a,
b){for(var c=0;c<this.allUSB.length;++c)if(this.allUSB[c].elem==a.elem)this.itemMenu.item=this.allUSB[c].vol;this.itemMenu.show.defer(100,this.itemMenu,[a.el]);b.stopEvent();return false},checkForEFail:function(a){return a==_4?"":a},fileSize:function(a){try{var b=a/1024/1024,c=b/1024;if(c<1)return Math.round(b*10)/10+" MB";b=c/1024;if(b<1)return Math.round(c*10)/10+" GB";return Math.round(b*10)/10+" TB"}catch(d){}return a},IPanelItem:{refresh:function(){this.refreshedDiskEnclosures=this.refreshedSysinfo=
false;this.spSYSManager.updateSysInfo("system-hardware-update-sysinfo");this.spServManager.updateSystemServiceInfo("sync-update-services");this.spServManager.updateGASetting("system_gasetting");this.spSYSManager.updateBluetooth("system-hardware-update-bluetooth");this.spNetworkManager.updateNetworkInfo("system-hardware-update-networkinfo");this.zfsVolumesManager.UpdateVolumes("system-hardware-update-zfsvolumes");this.spFSManager.updateVolumes("system-hardware-update-volumes");this.spAlertsManager.updateSettings("system-update-firmware-notification")}},
_ib:{_o2:function(a,b){switch(b){case "system-update-firmware-notification":_a(this.spAlertsManager.getSettings(),"_ic").getFirmwareUpdate()=="true"&&_a(_7(_._3.SystemSubSys.UpdatePanel),"IExtNative").getNative().silentCheckForUpdate();break}return _5}},onDateTimeClicked:function(){this.datetime.Show(_s10.DateTimeWindow.DATETIME,{caption:_TR("DATE_TIME_MAN")})},IDateTimeWindowEvents:{OnTick:function(a){if(this.rendered){a=
a.getArgs();var b=new Date(a.year,a.monthDigit-1,a.day,a.hour,a.min,a.sec,0);if(a.hour==12&&a.min==0&&a.sec==0&&a.ampm==_TR("PM")){a.hour=0;a.ampm=_TR("AM")}if(this.preHourIs11AM&&a.hour==12&&a.ampm==_TR("AM")){a.hour=12;a.ampm=_TR("PM")}this.preHourIs11AM=a.hour==11&&a.ampm==_TR("AM");str=_.formatDateTime(b,a.ampm);this.devTime.dom.innerHTML=str}return _5}},_i1f:{_o2:function(a,b){b=="system-hardware-health-update"&&this.populateHealth();return _5},_o3:function(a,b,c){c==
"system-hardware-health-update"&&this.spHealthManager.updateHealth.defer(2E4,this.spHealthManager,["system-hardware-health-update"]);return _5}},_i3v:{_o1:function(a,b){if(b=="system-hardware-update-zfsvolumes"){this.updatesCount||this.showProgress();this.updatesCount++}return _5},_o2:function(a,b){if(b=="sync-update-zfsvolumes"&&!this.rendered)return _5;if(b=="system-hardware-update-zfsvolumes"||b=="sync-update-zfsvolumes")this.updateVolumes(this.zfsVolumesManager.getActiveVolumes());
return _5},_o3:function(a,b,c){if(c=="system-hardware-update-zfsvolumes"){--this.updatesCount;this.updatesCount||this.hideProgress()}this.spFWManager.updateFirmWareUpdateStatus("system-hardware-update-fwupdate-status-step0");return _5}},_i3w:{_o1:function(a,b){if(!this.rendered)return _5;switch(b){case "system-update-checkForUpdate":case "system-update-checkForUpdate-silent":case "system-service-refreshPackageUpdate":case "system-service-checkPackageUpdate":case "system-service-updatePackages":case "system-update-perfomefirmwareupdate":case "system-hardware-update-fwupdate-status-step0":this.updatesCount||
this.showProgress();this.updatesCount++;break}return _5},_o3:function(a,b,c){if(!this.rendered)return _5;switch(c){case "system-update-checkForUpdate":case "system-update-checkForUpdate-silent":case "system-update-perfomefirmwareupdate":case "system-service-refreshPackageUpdate":case "system-service-checkPackageUpdate":case "system-service-updatePackages":case "system-hardware-update-fwupdate-status-step0":--this.updatesCount;this.updatesCount||this.hideProgress();break}c==="system-hardware-update-fwupdate-status-step0"&&
this.spFWManager.getFirmWareUpdateStatus()&&this.spP2PManager.updateP2PConfigurations("system-hardware-update-fwupdate-status-step1");return _5}},_i35:{_o1:function(a,b){if(b=="sync-update-services"){this.hvUpdate=true;Ext.get(this.antivirusId).removeClass("x-frontview-link");this.updatesCount++;this.updatesCount||this.showProgress()}else if(b==="system_service_commit"||b==="system_service_commit_rsync_ssh"){this.hvUpdate=true;Ext.get(this.antivirusId).removeClass("x-frontview-link");
this.showProgress()}else if(b=="system-hardware-update-fwupdate-status-step2"){this.updatesCount++;this.showProgress()}return _5},_o2:function(a,b){if(b=="system-hardware-update-fwupdate-status-step2"||b=="sync-update-services"){a=this.spServManager.getSystemServices();for(var c=0;c<a.length;++c){var d=_a(a[c],"_i32");b=="system-hardware-update-fwupdate-status-step2"&&d.getName()=="readycloud"&&!d.getEnable()&&Ext.UI.MessageBox.info({title:_TR("UPD_SYS_MAN"),msg:_TR("REMOTE_DEPRECATED_MSG")});
if(d.getName()=="file-search"){this.spFileSearchService=d;if(d.getStatus()=="MNT"){Ext.get(this.fileSearchId).update(_TR("FILE_SEARCH_STARTING"));Ext.get(this.fileSearchLedId).removeClass("x-system-panel-led-grey").removeClass("x-system-panel-led-green").addClass("x-system-panel-led-orange")}else{Ext.get(this.fileSearchId).update(d.getEnable()?_TR("ENABLED"):_TR("DISABLED"));Ext.get(this.fileSearchLedId).removeClass("x-system-panel-led-grey").removeClass("x-system-panel-led-green").removeClass("x-system-panel-led-orange").addClass(d.getEnable()?
"x-system-panel-led-green":"x-system-panel-led-grey");d.getEnable()&&this.spServManager.updateFileSearchStats("system-services-filesearch-update-indexstats")}}}}else if(b=="system-services-filesearch-update-indexstats"){if(this.spFileSearchService&&this.spFileSearchService.getEnable()&&this.spFileSearchService.getStatus()!=="MNT")if(b=this.spServManager.getFileSearchStats()){b=b.getStatus();if(b=="INDEX_STATUS_IN_PROGRESS")Ext.get(this.fileSearchId).update(_TR("FILE_SEARCH_INDEXING"));else if(b==
"INDEX_STATUS_IN_PROGRESS"||b=="INDEX_STATUS_COMPLETED"||b=="INDEX_STATUS_PAUSED")Ext.get(this.fileSearchId).update(_TR("ENABLED"))}}else if(b=="system_gasetting"){b=this.spServManager.getGASetting()=="true"?"1":"0";sessionStorage.setItem("allowGA",b);if(b=="1"){(function(f,e,g,h,k,j,m){f.GoogleAnalyticsObject=k;f[k]=f[k]||function(){(f[k].q=f[k].q||[]).push(arguments)};f[k].l=1*new Date;j=e.createElement(g);m=e.getElementsByTagName(g)[0];j.async=1;j.src=h;m.parentNode.insertBefore(j,m)})(window,
document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","UA-145616824-1","auto");ga("send","pageview")}}return _5},_o3:function(a,b,c){if(c=="sync-update-services"){this.hvUpdate=false;Ext.get(this.antivirusId).addClass("x-frontview-link");--this.updatesCount;this.updatesCount||this.hideProgress()}else if(c=="system-hardware-update-fwupdate-status-step2"){--this.updatesCount;if(this.updatesCount<=0){this.hideProgress();this.updatesCount=0}}return _5}},_i20:{_o1:function(a,
b){if(b==="system-hardware-update-fwupdate-status-step1"){this.updatesCount++;this.showProgress()}},_o2:function(a,b){switch(b){case "system-hardware-update-fwupdate-status-step1":this.spP2PManager.getP2PStatus()&&this.spServManager.updateSystemServiceInfo("system-hardware-update-fwupdate-status-step2");break}return _5},_o3:function(a,b,c){if(c==="system-hardware-update-fwupdate-status-step1"){--this.updatesCount;if(this.updatesCount<=0){this.hideProgress();this.updatesCount=0}}}},IPromptWindowEvents:{OnClosing:function(a){!Ext.isEmpty(a.getArgs())&&
!Ext.isEmpty(a.getArgs().delegatename)&&this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().validatefunc)&&this[a.getArgs().validatefunc](a)}}});Ext.namespace("_s1");
_s1.SharesPanel=_._1(_._3.SystemSubSys.SharesPanel,_s0.BasePanel,IPanelItem,_i4,_i3b,{panelCls:"x-system-panel-shares",updatesCount:0,help:"system_panel_shares",constructor:function(a){this.title=_TR("SHARES");_s1.SharesPanel.superclass.constructor.call(this,a)},initComponent:function(){_s1.SharesPanel.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spShareManager=
a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this)}},onReady:function(){this.dataview=new _s1.SharesDataView;this.dataview.on("selectionchange",function(){var a=this.dataview.getSelectedRecords()[0];if(a){var b=this.dataview.getSelectedNodes()[0];_a(_7(_._3.ShareSubSys.VolumesView),"IExtNative").getNative().onSelectShare(null,
a.get("ref"),b)}},this);this.dataview.render(this.content)},populateShares:function(a,b){var c=[],d;this.dataview.store.removeAll();for(var f=this.maxSize=this.maxSize=0;f<a.length;++f){d=_a(a[f],"_i38");this.maxSize=Math.max(this.maxSize,parseInt(d.getAvailableMB())*1024*1024);this.maxSize=Math.max(this.maxSize,parseInt(d.getUsedMB())*1024*1024)}for(f=0;f<b.length;++f){d=_a(b[f],"_i1j");this.maxSize=Math.max(this.maxSize,parseInt(d.getSize())*1024)}for(f=0;f<a.length;++f){d=_a(a[f],
"_i38");d.volume=this.zfsVolumesManager.getVolumeById(d.getVolumeId());var e=this.getAllocatedSize("NAS",d),g=this.getSize("NAS",d);c.push({id:d.getId(),name:d.getName(),type:"NAS",typetitle:_TR("SHARED_FOLDER"),volume:d.getVolumeId(),ref:d,usedtitle:_s10.Utils.fileSize(e)+(g?" "+_TR("OF")+" "+_s10.Utils.fileSize(g):""),usedvalue:e&&g?Math.round(144*e/g):this.maxSize?Math.round(144*e/this.maxSize):0})}for(f=0;f<b.length;++f){d=_a(b[f],"_i1j");e=this.getAllocatedSize("SAN",
d);g=this.getSize("SAN",d);if(e>g)g=e;a="-"+64*Math.round(360*(e/g)/19)+"px";c.push({id:d.getId(),name:d.getName(),type:"SAN",typetitle:_TR("ISCSI_LUN"),volume:d.getVolumeId(),chart:a,ref:d,usedtitle:_s10.Utils.fileSize(e)+" "+(g?" "+_TR("OF")+" "+_s10.Utils.fileSize(g):""),usedvalue:e&&g?Math.round(144*e/g):this.maxSize?Math.round(144*e/this.maxSize):0})}this.dataview.store.loadData(c)},getSize:function(a,b){if(a=="NAS"){a=this.getFreeSize(a,b)+this.getAllocatedSize(a,b);return(b=
b.getRefQuotaMB()*1024)&&a>b?b:a}else if(a=="SAN")return parseInt(b.getSize())*1024},getFreeSize:function(a,b){if(a=="NAS")return parseInt(b.getAvailableMB())*1024*1024;else if(a=="SAN")return this.getSize(a,b)-this.getAllocatedSize(a,b)},getAllocatedSize:function(a,b){if(a=="NAS"){a=b.getUsedMB();b=b.getRefReserveMB();return(a>=b?a-b:a)*1024*1024}else if(a=="SAN")return parseInt(b.getAllocated())*1024},showProgress:function(){this.updatesCount||_s1.SharesPanel.superclass.showProgress.apply(this,
arguments);++this.updatesCount},hideProgress:function(){if(this.updatesCount>0){--this.updatesCount;this.updatesCount||_s1.SharesPanel.superclass.hideProgress.apply(this,arguments)}},IPanelItem:{refresh:function(){this.spShareManager.updateShares("system-shares-update-shares");return _5}},_i3b:{_o1:function(a,b){if(b=="system-shares-update-shares"||b=="system-shares-update-luns"||b=="sync-update-shares"||b=="sync-update-luns"||b=="shares-volumes-remove-share"||
b=="shares-propwnd-commit-share"||b=="shares-volumes-remove-lun"||b=="shares-propwnd-commit-lun")this.showProgress();return _5},_o2:function(a,b){if(b=="system-shares-update-shares"||b=="sync-update-shares")this.spShareManager.updateLUNS("system-shares-update-luns");if(b=="system-shares-update-luns"||b=="sync-update-luns"||b=="shares-volumes-update-luns"){a=this.spShareManager.getShares();var c=this.spShareManager.getLUNS();this.populateShares(a,c)}if(b=="shares-volumes-remove-share"||b=="shares-propwnd-commit-share")this.spShareManager.updateShares("system-shares-update-shares");
if(b=="shares-volumes-remove-lun"||b=="shares-propwnd-commit-lun")this.spShareManager.updateLUNS("system-shares-update-luns");return _5},_o3:function(a,b,c){if(c=="system-shares-update-shares"||c=="system-shares-update-luns"||c=="sync-update-shares"||c=="sync-update-luns"||c=="shares-volumes-remove-share"||c=="shares-propwnd-commit-share"||c=="shares-volumes-remove-lun"||c=="shares-propwnd-commit-lun")this.hideProgress();return _5}}});Ext.namespace("_s1");
_s1.ServicesPanel=_._1(_._3.SystemSubSys.ServicesPanel,_s0.BasePanel,IPanelItem,_i4,_i35,IPromptWindowEvents,{panelCls:"x-system-panel-serv",expanded:false,emptyArchievePath:false,fromCifs:false,help:"system_panel_services",constructor:function(a){this.title=_TR("SERVICES");this.isTivoPollingStarted=this.codeInitialized=false;_s1.ServicesPanel.superclass.constructor.call(this,a)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");if(a){this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);this.spSYSManager=a.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this)}this.prompt=_a(_7(_._3.Controls.PromptWindow),"IPromptWindow");
_s1.ServicesPanel.superclass.initComponent.apply(this,arguments);this.auditServiceWindow=new _s1.AuditServiceWindow;if(this.spSYSManager.getSupportFileSearch()=="1")this.fileSearchServiceWindow=CComSingleton(_s1.FileSearchServiceWindow)},onReady:function(){this.cifsBtn=new Ext.UI.LedButton({text:_TR("CIFS"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.cifsBtn.on("click",this.cifsServiceOnClicked,this);
this.afpBtn=new Ext.UI.LedButton({text:_TR("AFP"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.afpBtn.on("click",this.afpServiceOnClicked,this);this.nfsBtn=new Ext.UI.LedButton({text:_TR("NFS"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.nfsBtn.on("click",this.nfsServiceOnClicked,this);this.ftpBtn=new Ext.UI.LedButton({text:_TR("FTP"),disableToggle:true,width:150,hidden:true,
iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.ftpBtn.on("click",this.ftpServiceOnClicked,this);this.daapBtn=new Ext.UI.LedButton({text:_TR("DAAP"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.daapBtn.on("click",this.daapServiceOnClicked,this);this.dlnaBtn=new Ext.UI.LedButton({text:_TR("ReadyDLNA"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.dlnaBtn.on("click",
this.dlnaServiceOnClicked,this);this.bonjourBtn=new Ext.UI.LedButton({text:_TR("Bonjour"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.bonjourBtn.on("click",this.bonjourServiceOnClicked,this);this.rsyncBtn=new Ext.UI.LedButton({text:_TR("Rsync"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.rsyncBtn.on("click",this.rsyncServiceOnClicked,this);this.rsyncOverSSHBtn=new Ext.UI.LedButton({text:_TR("rsync_over_ssh"),
disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.rsyncOverSSHBtn.on("click",this.rsyncOverSSHServiceOnClicked,this);this.upnpBtn=new Ext.UI.LedButton({text:_TR("UPnP"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.upnpBtn.on("click",this.upnpServiceOnClicked,this);this.httpBtn=new Ext.UI.LedButton({text:_TR("HTTP"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",
cls:this.panelCls+"-item"});this.httpBtn.on("click",this.httpServiceOnClicked,this);this.httpsBtn=new Ext.UI.LedButton({text:_TR("HTTPS"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.httpsBtn.on("click",this.httpsServiceOnClicked,this);this.snmpBtn=new Ext.UI.LedButton({text:_TR("SNMP"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.snmpBtn.on("click",this.snmpServiceOnClicked,this);
this.sshBtn=new Ext.UI.LedButton({text:_TR("SSH"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.sshBtn.on("click",this.sshServiceOnClicked,this);this.replicateBtn=new Ext.UI.LedButton({text:_TR("REPLICATE"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.replicateBtn.on("click",this.replicateServiceOnClicked,this);this.antivirusBtn=new Ext.UI.LedButton({text:_TR("ANTIVIRUS"),disableToggle:true,
width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item x-system-panel-serv-avled"});this.antivirusBtn.on("click",this.antivirusServiceOnClicked,this);this.fileSearchBtn=new Ext.UI.LedButton({text:_TR("FILE_SEARCH"),disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",cls:this.panelCls+"-item"});this.fileSearchBtn.on("click",this.fileSearchServiceOnClicked,this);this.auditBtn=new Ext.UI.LedButton({text:"Audit",disableToggle:true,width:150,hidden:true,iconCls:"ui-ledbutton-icon-off",
cls:this.panelCls+"-item"});this.auditBtn.on("click",this.auditServiceOnClicked,this);this.btns=[this.cifsBtn,this.afpBtn,this.nfsBtn,this.ftpBtn,this.daapBtn,this.dlnaBtn,this.bonjourBtn,this.rsyncBtn,this.rsyncOverSSHBtn,this.upnpBtn,this.httpBtn,this.httpsBtn,this.snmpBtn,this.sshBtn,this.replicateBtn,this.antivirusBtn,this.fileSearchBtn,this.auditBtn];for(var a=["SMB","AFP","NFS","FTP","iTunes","ReadyDLNA","Bonjour","Rsync","Rsync over SSH","UPnp","HTTP","HTTPS","SNMP","SSH","Replicate","Antivirus",
"File Search","Audit"],b=0,c=this.btns.length;b<c;b++)this.btns[b].on("click",function(d){return function(){_s0.GA.trackEvent({eventCategory:"System-Settings-Services",eventAction:"click",eventLabel:a[d]})}}(b));this.pathData=new Ext.data.ArrayStore({fields:["id","text"],data:this.folders});this.cifsBtn.render(this.content);this.afpBtn.render(this.content);this.nfsBtn.render(this.content);this.ftpBtn.render(this.content);this.daapBtn.render(this.content);this.dlnaBtn.render(this.content);
this.bonjourBtn.render(this.content);this.rsyncBtn.render(this.content);this.rsyncOverSSHBtn.render(this.content);this.upnpBtn.render(this.content);this.httpBtn.render(this.content);this.httpsBtn.render(this.content);this.snmpBtn.render(this.content);this.sshBtn.render(this.content);this.replicateBtn.render(this.content);this.antivirusBtn.render(this.content);this.fileSearchBtn.render(this.content);this.spSYSManager.getSupportAudit()=="1"&&this.auditBtn.render(this.content)},showError:function(a,
b){a=Ext.get(a);b?a.addClass("x-sec-label-error"):a.removeClass("x-sec-label-error")},_i35:{_o1:function(a,b){if(!this.rendered)return _5;if(b=="system_service_refresh"||b=="sync-update-services"){this.disableButtons(true);if(Ext.get(this.content)!=null){this.codeInitialized||this.collapse();this.showProgress()}}else if(b==="system_service_commit"||b==="system_service_commit_rsync_ssh"){this.disableButtons(true);this.showProgress()}return _5},OnFailed:function(a,b,
c){if(!this.rendered)return _5;if(c=="system_service_refresh"||c=="system_service_commit"||c==="system_service_commit_rsync_ssh"){a=_TR(b.getErrorCode());_a(_7(_._3.ErrorReporter),"IErrorReporter").report(a,"Code: "+b.getErrorCode(),_2.ERROR,{windowTitle:_TR("SERVICE_OPERATION_ERROR_TITLE"),title:"",subTitle:a,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false});_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.hideIndicatorExt()}return _5},
OnNTFailed:function(a,b,c){if(c=="system_service_refresh"&&!c.isRepeated){a=new String("system_service_refresh");a.isRepeated=true;this.spServManager.updateSystemServiceInfo.defer(500,this.spServManager,[a])}},_o2:function(a,b){switch(b.toString()){case "shares-volumes-update-services":case "system_service_refresh":case "sync-update-services":this.serviceCollection={cifs:{enabled:false,noprop:true,serviceObj:{}},afp:{enabled:false,noprop:true,serviceObj:{}},nfs:{enabled:false,noprop:true,serviceObj:{}},
rsync:{enabled:false,noprop:true,serviceObj:{}},rsync_over_ssh:{enabled:false,noprop:true,serviceObj:{}},ftp:{enabled:false,port:0,authMode:"",minRange:0,maxRange:0,masqAddr:"",masqAddrEnable:false,allowUploadResume:false,ftps:false,log:false,serviceObj:{}},dlna:{enabled:false,autoScan:false,tivoSerEnabled:false,tivoArchEnabled:false,serviceObj:{}},daap:{enabled:false,sharename:"",password:"",directory:"",serviceObj:{}},bonjour:{enabled:false,cifs:false,afp:false,frontview:false,readynas:false,timemachine:false,
serviceObj:{}},snmp:{enabled:false,allowHost:"",community:"",trapDest:"",miburl:"",serviceObj:{}},ssh:{enabled:false,noprop:true,serviceObj:{}},replicate:{enabled:false,noprop:true,owner:"",password:"",serviceObj:{}},http:{enabled:false,loginEnabled:false,selectedShare:"",adminEnabled:"1",availableShares:[],serviceObj:{}},https:{enabled:false,port:0,sslKeyHost:"",serviceObj:{}},antivirus:{enabled:false,noprop:true,serviceObj:{}},antivirusss:{enabled:false,noprop:true,serviceObj:{}},upnp:{enabled:false,
noprop:true,serviceObj:{}},fileSearch:{enabled:false,noprop:true,serviceObj:{}},audit:{enabled:false,noprop:true,serviceObj:{}}};_.each(this.spServManager.getSystemServices(),function(e){e=_a(e,"_i32");switch(e.getName()){case "cifs":this.serviceCollection.cifs.enabled=e.getEnable();this.serviceCollection.cifs.serviceObj=e;break;case "afp":this.serviceCollection.afp.enabled=e.getEnable();this.serviceCollection.afp.serviceObj=e;break;case "nfs":this.serviceCollection.nfs.enabled=e.getEnable();
this.serviceCollection.nfs.numThreads=e.getNFSThreads();this.serviceCollection.nfs.v4=e.getNFSV4()=="1";this.serviceCollection.nfs.domain=e.getNFSV4Domain();this.serviceCollection.nfs.homeShare=e.getNFSHomeShareState();this.serviceCollection.nfs.manageGids=e.getManageGids();this.serviceCollection.nfs.serviceObj=e;break;case "ftp":this.serviceCollection.ftp.enabled=e.getEnable();this.serviceCollection.ftp.port=e.getFTPPort();this.serviceCollection.ftp.authMode=e.getFTPAuthMode();this.serviceCollection.ftp.minRange=
e.getFTPPassiveRangeMin();this.serviceCollection.ftp.maxRange=e.getFTPPassiveRangeMax();this.serviceCollection.ftp.masqAddr=e.getFTPMasqAddr();this.serviceCollection.ftp.masqAddrEnable=e.getFTPMasqEnable();this.serviceCollection.ftp.allowUploadResume=e.getFTPUploadResumeState();this.serviceCollection.ftp.maxUpload=e.getFTPMaxUploadRate();this.serviceCollection.ftp.maxDownload=e.getFTPMaxDownloadRate();this.serviceCollection.ftp.ftps=e.getFTPSEnable();this.serviceCollection.ftp.forceftps=e.getFTPForceFTPS();
this.serviceCollection.ftp.log=e.getFTPLogEnable();this.serviceCollection.ftp.serviceObj=e;break;case "dlna":this.serviceCollection.dlna.enabled=e.getEnable();this.serviceCollection.dlna.autoScan=e.getDLNAAutoScanState();this.serviceCollection.dlna.tivoSerEnabled=e.getDLNATivoServerState();this.serviceCollection.dlna.serviceObj=e;break;case "daap":this.serviceCollection.daap.enabled=e.getEnable();this.serviceCollection.daap.sharename=e.getDAAPShareName();if(this.serviceCollection.daap.sharename.indexOf("%h")!=
-1){var g=_a(_7(_1.CLSIDS.Device5200),"_i2").getNetworkManager().getHostname();if(g&&g!=_4)this.serviceCollection.daap.sharename=this.serviceCollection.daap.sharename.replace("%h",g)}this.serviceCollection.daap.password=e.getDAAPPassword();this.serviceCollection.daap.serviceObj=e;break;case "bonjour":this.serviceCollection.bonjour.enabled=e.getEnable();this.serviceCollection.bonjour.cifs=e.getBonjourCIFSState();this.serviceCollection.bonjour.afp=e.getBonjourAFPState();
this.serviceCollection.bonjour.frontview=e.getBonjourFrontviewState();this.serviceCollection.bonjour.readynas=e.getBonjourReadynasState();this.serviceCollection.bonjour.timemachine=e.getBonjourTimeMachineState();this.serviceCollection.bonjour.serviceObj=e;break;case "http":this.serviceCollection.http.enabled=e.getEnable();this.serviceCollection.http.loginEnabled=e.getHTTPLoginEnableState();this.serviceCollection.http.selectedShare=e.getHTTPSelectedShareName();this.serviceCollection.http.adminEnabled=
e.getHTTPAdminEnabled();g=e.getHTTPShareList().length;this.serviceCollection.http.availableShares.push([0,_TR("HTTP_NON_SELECTED")]);for(var h=0;h<g;h+=1)this.serviceCollection.http.availableShares.push([h+1,e.getHTTPShareList()[h]]);this.serviceCollection.http.serviceObj=e;break;case "https":this.serviceCollection.https.enabled=e.getEnable();this.serviceCollection.https.port=e.getHTTPSPort();this.serviceCollection.https.sslKeyHost=e.getHTTPSSslKeyHost();this.serviceCollection.https.serviceObj=e;
break;case "snmp":this.serviceCollection.snmp.enabled=e.getEnable();this.serviceCollection.snmp.allowHost=e.getSNMPAllowHost();this.serviceCollection.snmp.community=e.getSNMPCommunity();this.serviceCollection.snmp.trapDest=e.getSNMPTrapDest();this.serviceCollection.snmp.miburl=e.getSNMPMibUrl();this.serviceCollection.snmp.contact=e.getSNMPContact();this.serviceCollection.snmp.location=e.getSNMPLocation();this.serviceCollection.snmp.serviceObj=e;break;case "ssh":this.serviceCollection.ssh.enabled=
e.getEnable();this.serviceCollection.ssh.sshPswdAuthEnabled=e.getSSHPswdAuthEnable();this.serviceCollection.ssh.serviceObj=e;break;case "rsync":this.serviceCollection.rsync.enabled=e.getEnable();this.serviceCollection.rsync.serviceObj=e;break;case "rsync_over_ssh":this.serviceCollection.rsync_over_ssh.enabled=e.getEnable();this.serviceCollection.rsync_over_ssh.serviceObj=e;break;case "anti-virus":this.serviceCollection.antivirus.enabled=e.getEnable();this.serviceCollection.antivirus.serviceObj=e;
break;case "anti-virus-sche-scan":this.serviceCollection.antivirusss.enabled=e.getEnable();this.serviceCollection.antivirusss.serviceObj=e;break;case "upnpd":this.serviceCollection.upnp.enabled=e.getEnable();this.serviceCollection.upnp.serviceObj=e;break;case "file-search":this.serviceCollection.fileSearch.enabled=e.getEnable();this.serviceCollection.fileSearch.mounted=e.getStatus()=="MNT";this.serviceCollection.fileSearch.serviceObj=e;break;case "audit":this.serviceCollection.audit.enabled=e.getEnable();
this.serviceCollection.audit.serviceObj=e;break;default:break}},this);this.rendered&&_.each(this.spServManager.getSystemServices(),function(e){switch(_a(e,"_i32").getName()){case "cifs":this.cifsBtn.show();this.cifsBtn.setState(this.serviceCollection.cifs.enabled?"on":"off");break;case "afp":this.afpBtn.show();this.afpBtn.setState(this.serviceCollection.afp.enabled?"on":"off");break;case "nfs":this.nfsBtn.show();this.nfsBtn.setState(this.serviceCollection.nfs.enabled?"on":"off");break;
case "ftp":this.ftpBtn.show();this.ftpBtn.setState(this.serviceCollection.ftp.enabled?"on":"off");break;case "dlna":this.dlnaBtn.show();this.dlnaBtn.setState(this.serviceCollection.dlna.enabled?"on":"off");break;case "daap":this.daapBtn.show();this.daapBtn.setState(this.serviceCollection.daap.enabled?"on":"off");break;case "bonjour":this.bonjourBtn.show();this.bonjourBtn.setState(this.serviceCollection.bonjour.enabled?"on":"off");break;case "http":this.httpBtn.show();this.httpBtn.setState(this.serviceCollection.http.enabled?
"on":"off");break;case "https":this.httpsBtn.show();this.httpsBtn.setState(this.serviceCollection.https.enabled?"on":"off");break;case "snmp":this.snmpBtn.show();this.snmpBtn.setState(this.serviceCollection.snmp.enabled?"on":"off");break;case "ssh":this.sshBtn.show();this.sshBtn.setState(this.serviceCollection.ssh.enabled?"on":"off");break;case "rsync":this.rsyncBtn.show();this.rsyncBtn.setState(this.serviceCollection.rsync.enabled?"on":"off");break;case "rsync_over_ssh":this.rsyncOverSSHBtn.show();
this.rsyncOverSSHBtn.setState(this.serviceCollection.rsync_over_ssh.enabled?"on":"off");break;case "anti-virus":if(this.spSYSManager.getSupportAntiVirus()=="1"){this.antivirusBtn.show();this.antivirusBtn.setState(this.serviceCollection.antivirus.enabled?"on":"off")}break;case "upnpd":this.upnpBtn.show();this.upnpBtn.setState(this.serviceCollection.upnp.enabled?"on":"off");break;case "file-search":this.fileSearchBtn.setVisible(this.spSYSManager.getSupportFileSearch()=="1");this.fileSearchBtn.serviceMounted=
this.serviceCollection.fileSearch.mounted;this.fileSearchBtn.setDisabled(this.serviceCollection.fileSearch.mounted);this.fileSearchBtn.setState(this.serviceCollection.fileSearch.enabled?"on":"off");break;case "audit":this.auditBtn.show();this.auditBtn.setState(this.serviceCollection.audit.enabled?"on":"off");break;default:break}},this);this.spServManager.updateTIVOStatus("update_tivo_status");break;case "system_service_commit_rsync_ssh":case "system_service_commit":if(this.needToUpdateAV){this.needToUpdateAV=
false;this.spSYSManager.updateSysInfo("system-hardware-sync-sysinfo");this.updateSysServices.defer(6E3,this)}else this.updateSysServices();if(b.toString()==="system_service_commit_rsync_ssh"&&!this.adsmode){_a(this.prompt,"_i1").Advise(this);this.prompt.Show(_s10.PromptWindow.QUESTION,{caption:_TR("IMPORT_PUBLIC_KEY"),message:_TR("IMPORT_PUBLIC_KEY_QWEST"),delegatename:"delegateShowAccountsTab",okbtn:_TR("OK"),cancelbtn:_TR("CANCEL")})}if(this.isFromAudit){delete this.isFromAudit;
this.auditServiceWindow.boxShares.commitShares()}if(this.needEnableSharesAudit){delete this.needEnableSharesAudit;this.enableSharesAudit()}break;case "tivo_config_commit":this.spServManager.updateTIVOStatus("update_tivo_status");break;case "update_tivo_status":b=this.spServManager.getTIVOList();this.tivoArray=[];a=b.length;for(var c=0;c<a;c++){var d=_a(b[c],"_i37");this["activateBtnId"+c]=Ext.id();var f=this["activateBtnId"+c].toString();this.tivoArray.push({name:d.getName(),status:d.getStatus(),
activate:f,isActivated:d.isActivated()})}if(this.tivoView&&this.tivoArray.length>0){this.tivoView.getStore().loadData(this.tivoArray);this.tivoView.refresh();for(b=0;b<a;b++){this["activateBtn"+b]=this.tivoArray[b].isActivated==="true"?new Ext.UI.Button({text:_TR("TIVO_DEACT"),devName:this.tivoArray[b].name,disabled:!this.dlnaEnableChkBox.checked,devActivated:this.tivoArray[b].isActivated}):new Ext.UI.Button({text:_TR("TIVO_ACT"),devName:this.tivoArray[b].name,disabled:!this.dlnaEnableChkBox.checked,
devActivated:this.tivoArray[b].isActivated});this["activateBtn"+b].render(this["activateBtnId"+b]);this["activateBtn"+b].on("click",this.tivoToggleBtnClicked,this)}}a=_a(this.spServManager.getTIVOInfo(),"_i36");b=(a.getDays()||"").split(",");c=new Array(7);c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=0;if(b.indexOf("sun")!==-1)c[0]=1;if(b.indexOf("mon")!==-1)c[1]=1;if(b.indexOf("tue")!==-1)c[2]=1;if(b.indexOf("wed")!==-1)c[3]=1;if(b.indexOf("thu")!==-1)c[4]=1;if(b.indexOf("fri")!==-1)c[5]=1;
if(b.indexOf("sat")!==-1)c[6]=1;this.tivoSettingsObj={currentPath:a.getTIVOFolder(),hours:a.getHour(),mins:a.getMinute(),days:c,fasttransfer:a.getFastTransfer()};this.folderArray=[];if(a.getSharedFolderList().length!==0){a=a.getSharedFolderList().split(";");for(b=0;b<a.length;b++)this.folderArray.push([a[b],a[b]])}if(this.tivoArchivePathComboxBox&&this.dlaWinFirstClicked){this.dlaWinFirstClicked=false;if(this.folderArray.length===0)this.tivoArchivePathComboxBox.setValue("");else this.tivoSettingsObj.currentPath!==
""?this.tivoArchivePathComboxBox.setValue(this.tivoSettingsObj.currentPath):this.tivoArchivePathComboxBox.setValue(this.folderArray[0][0]);if(this.folderArray.length===0||this.tivoArchivePathComboxBox.getValue()==="")Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("READYDLNA_NO_PATH"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400})}break}return _5},_o3:function(a,b,c){if(!this.rendered)return _5;if(c=="system_service_refresh"||c=="sync-update-services"||
c=="shares-volumes-update-services"){this.disableButtons(false);if(this.codeInitialized)this.hideProgress();else{this.codeInitialized=true;if(!this.progress.hidden){this.expand();this.hideProgress()}}}else if(c=="system_service_commit"||c==="system_service_commit_rsync_ssh"){this.disableButtons(false);a!=_5?this.spServManager.updateSystemServiceInfo.defer(1E3,this.spServManager,["system_service_refresh"]):this.spSYSManager.updateSysInfo("system-hardware-update-sysinfo")}if(c=="system_service_commit"&&
this.fromCifs){this.fromCifs=false;this.spShareManager.updateShares("system-shares-update-from-cifs")}return _5}},errorHandler:function(a,b){if(a!=_5)if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();if(b){b=b.getErrorDetails();var c=b.indexOf("("),d=b.lastIndexOf(")");c!="-1"&&d!="-1"&&b.substring(c+1,d);b=_TR(a);_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a,_2.ERROR,{windowTitle:_TR("SERVICE_OPERATION_ERROR_TITLE"),title:"",
subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},_i3b:{_o3:function(a,b,c){this.rendered&&c=="sync-update-shares"&&_a(this,"IPanelItem").refresh();return _5}},ILoadIndicatorHolder:{getIndicator:function(){return this.commitProgress},setIndicator:function(a){if(!this.commitProgress)this.commitProgress=a;return _5},ShowIndicator:function(a){this.commitProgress&&this.commitProgress.setVisible(a);return _5}},getBtnBoolState:function(a){return a===
"on"?true:false},getBtnStrState:function(a){return a?"on":"off"},cifsServiceOnClicked:function(){if(this.cifsServiceWindow==undefined)this.cifsServiceWindow=new Ext.UI.Window({title:_TR("CIFS_SETTINGS"),modal:true,autoWidth:true,resizable:false,bodyCssClass:"x-sec-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_cifs",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onCifsSettingsChanged,scope:this,
acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.cifsEnableChkBox.setValue(this.getBtnBoolState(this.cifsBtn.getState()));this.cifsServiceWindow.hide()},scope:this,cancelbtn:true}],items:{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{cellspacing:5},columns:2},items:[this.cifsEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("CIFS_ENABLE"),colspan:2,disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.cifsEnableCheckedEvent,scope:this}}),
{xtype:"container",layout:"table",colspan:2,layoutConfig:{tableAttrs:{cellspacing:0}},items:[this.cifsEnableLegacyChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("FILE_SEARCH_LEGACY_SUPPORT"),disabled:false,cls:"x-inspector-checkbox-bg"}),new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"margin-bottom:10px; margin-left:5px;",listeners:{afterrender:function(b){new Ext.UI.ToolTip(b.el,{html:_TR("FILE_SEARCH_LEGACY_SUPPORT_TOOLTIP")})}}})]},this.cifsEnhanceMacOSChkBox=
new Ext.UI.Checkbox({boxLabel:_TR("FILE_SEARCH_ENHANCE_MACOS"),colspan:2,cls:"x-inspector-checkbox-bg"}),{xtype:"container",layout:"table",colspan:2,layoutConfig:{tableAttrs:{cellspacing:0},columns:2},items:[{xtype:"box",html:_TR("WORKGROUP_NAME")+_TR("COLON"),cls:"x-system-panel-service-dlglabel",style:"min-width: 100px;"},this.cifsWorkgroup=new Ext.UI.TextField({width:200})]},new Ext.Component({colspan:2,html:"<div style='border-top: 1px solid #E6E6E6; width:auto; height:1px; margin: 10px auto;'></div><div style='font-weight:bolder; font-size:14px; font-family:FoundrySterlingMedium,Arial; color: #4D4D4D'>"+
_TR("SMB3_ENCRYPTION_TITLE")+"</div>"}),this.cifsPerShareEncryptionRdoBox=new Ext.UI.Radio({boxLabel:_TR("SMB3_ENCRYPTION_PER"),colspan:2,disabled:false,height:"auto",style:"margin-left:8px",name:"cifsEncryption",listeners:{check:this.onSmbEncryptionChange,scope:this}}),this.cifsGlobalEncryptionRdoBox=new Ext.UI.Radio({boxLabel:_TR("SMB3_ENCRYPTION_GLOBAL"),colspan:2,style:"margin-left:8px",cls:"cifs-global-encryption",disabled:false,name:"cifsEncryption",listeners:{check:this.onSmbEncryptionChange,
scope:this}}),this.cifsGlobalEncryptionCmb=new Ext.UI.ComboBox({mode:"local",colspan:1,width:110,style:"margin-left:38px",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["enabled","Enabled"],["disabled","Disabled"],["desired","Desired"],["required","Required"]]}),listeners:{beforeselect:function(b,c,d){this.onBeforeGlobalEncryptionSelect(b,c,d)},scope:this},valueField:"id",displayField:"text"}),new Ext.Component({colspan:1,html:""})]}});var a=this.serviceCollection.cifs.serviceObj.getCifsSmbEncrypt();
if(a){this.cifsGlobalEncryptionRdoBox.setValue(true);this.cifsGlobalEncryptionCmb.enable(true);this.cifsGlobalEncryptionCmb.setValue(a)}else{this.cifsPerShareEncryptionRdoBox.setValue(true);this.cifsGlobalEncryptionCmb.setValue("enabled");this.cifsGlobalEncryptionCmb.disable(true)}this.cifsEnableChkBox.setValue(this.serviceCollection.cifs.enabled);this.cifsEnhanceMacOSChkBox.setValue(this.serviceCollection.cifs.serviceObj.getCifsEnhanceMacOS()===true);this.cifsEnableLegacyChkBox.setValue(this.serviceCollection.cifs.serviceObj.getCifsWindowsDiscovery()===
true);this.cifsWorkgroup.setValue(this.spSecurityManager.getADSDomain());this.cifsWorkgroup.setDisabled(this.spSecurityManager.getADSMode()=="ads");this.cifsServiceWindow.show();this.toggleFieldState("cifs",this.serviceCollection.cifs.enabled)},onBeforeGlobalEncryptionSelect:function(a,b){var c=a.lastSelectionText;if(b.data.id=="desired"||b.data.id=="required")Ext.UI.MessageBox.show({title:"",msg:_TR("SMB3_ENCRYPTION_GLOBAL_MESSAGE"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.INFO,fn:function(d){d==
"cancel"&&a.setValue(c.toLowerCase())}})},onSmbEncryptionChange:function(a,b){b&&a==this.cifsGlobalEncryptionRdoBox&&this.cifsGlobalEncryptionCmb.enable(true);if(b&&a==this.cifsPerShareEncryptionRdoBox){this.cifsGlobalEncryptionCmb.setValue("enabled");this.cifsGlobalEncryptionCmb.disable(true)}},cifsEnableCheckedEvent:function(a,b){if(this.afpEnableFromInitial==1)this.afpEnableFromInitial=0;else this.afpEnableChkBox==a&&b&&Ext.UI.MessageBox.show({title:"AFP",msg:_TR("TIME_MACHINE_AFP_WARNING"),buttons:Ext.Msg.OK,
icon:Ext.MessageBox.WARNING,fn:function(){}});this.toggleFieldState("cifs",b)},onCifsSettingsChanged:function(){this.cifsBtn.setState(this.getBtnStrState(this.cifsEnableChkBox.checked));this.serviceCollection.cifs.serviceObj.putEnable(this.cifsEnableChkBox.checked);this.serviceCollection.cifs.serviceObj.putCifsEnhanceMacOS(this.cifsEnhanceMacOSChkBox.getValue());this.serviceCollection.cifs.serviceObj.putCifsWindowsDiscovery(this.cifsEnableLegacyChkBox.getValue());this.cifsGlobalEncryptionRdoBox.getValue()?
this.serviceCollection.cifs.serviceObj.putCifsSmbEncrypt(this.cifsGlobalEncryptionCmb.getValue()):this.serviceCollection.cifs.serviceObj.removeCifsSmbEncrypt();var a=this.spSecurityManager;if(a.getADSMode()!="ads"&&a.getADSDomain()!=this.cifsWorkgroup.getValue())a.commitADSMode(a.getADSMode(),a.getADSRealm()==_4?"":a.getADSRealm()||"",this.cifsWorkgroup.getValue(),a.getADSOrganization()==_4?"":a.getADSOrganization()||"",a.getADSAdminName()==_4?"":a.getADSAdminName()||"","",a.getADSController()==
_4?"":a.getADSController()||"",a.getTrustedUsersVisibility()||"0","system-services-commit-sec-mode",a.getNotSyncAdsAccounts()||"0");this.fromCifs=true;this.spServManager.commitSystemService("system_service_commit");this.cifsServiceWindow.hide()},afpServiceOnClicked:function(){if(this.afpServiceWindow==undefined)this.afpServiceWindow=new Ext.UI.Window({title:_TR("AFP"),modal:true,width:335,resizable:false,minimizable:false,maximizable:false,help:"system_wnd_afp",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),
handler:this.onAfpSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.afpServiceWindow.hide()},scope:this,cancelbtn:true}],items:{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{cellspacing:5},columns:2},items:[this.afpEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("AFP_ENABLE"),disabled:false,cls:"x-inspector-checkbox-bg",colspan:2,listeners:{check:this.cifsEnableCheckedEvent,scope:this}})]}});var a=this.serviceCollection.afp.enabled;
if(a)this.afpEnableFromInitial=1;this.afpEnableChkBox.setValue(a);this.afpServiceWindow.show();this.toggleFieldState("afp",this.serviceCollection.afp.enabled)},onAfpSettingsChanged:function(){this.afpBtn.setState(this.getBtnStrState(this.afpEnableChkBox.checked));this.serviceCollection.afp.serviceObj.putEnable(this.afpEnableChkBox.checked);this.spServManager.commitSystemService("system_service_commit");this.afpServiceWindow.hide()},antivirusServiceOnClicked:function(){if(!this.avServiceWindow)this.avServiceWindow=
new _s10.AntivirusServiceWindow({listeners:{applyclick:this.onAvSettingsChanged,enablecheck:this.avEnableCheckedEvent,scope:this}});this.avServiceWindow.loadService(this.serviceCollection.antivirus.serviceObj,this.serviceCollection.antivirusss.serviceObj);this.avServiceWindow.show();this.avServiceWindow.loadArg();this.toggleFieldState("av",this.serviceCollection.antivirus.enabled)},avEnableCheckedEvent:function(a,b){this.toggleFieldState("av",b)},onAvSettingsChanged:function(a,b,c){this.rendered&&
this.antivirusBtn.setState(this.getBtnStrState(b));this.needToUpdateAV=true;this.serviceCollection.antivirus.serviceObj.putEnable(b);this.serviceCollection.antivirusss.serviceObj.putEnable(c);this.spServManager.commitSystemService("system_service_commit")},fileSearchServiceOnClicked:function(){if(!this.serviceCollection.fileSearch.mounted){this.fileSearchServiceWindow.show();this.fileSearchServiceWindow.on("hide",this.onFileSearchSettingsHide,this);this.fileSearchServiceWindow.on("applyclick",this.onFileSearchSettingsChanged,
this);this.toggleFieldState("file-search",this.serviceCollection.fileSearch.enabled)}},auditServiceOnClicked:function(){this.auditServiceWindow.show();this.auditServiceWindow.on("hide",this.onAuditSettingsHide,this);this.auditServiceWindow.on("applyclick",this.onAuditSettingsChanged,this)},onFileSearchSettingsHide:function(){this.fileSearchServiceWindow.un("hide",this.onFileSearchSettingsHide,this);this.fileSearchServiceWindow.un("applyclick",this.onFileSearchSettingsChanged,this)},onFileSearchSettingsChanged:function(a,
b){this.rendered&&this.fileSearchBtn.setState(this.getBtnStrState(b));this.serviceCollection.fileSearch.serviceObj.putEnable(b);this.spServManager.commitSystemService("system_service_commit");!this.serviceCollection.fileSearch.enabled&&b&&this.enableShares()},onAuditSettingsHide:function(){this.auditServiceWindow.un("hide",this.onAuditSettingsHide,this);this.auditServiceWindow.un("applyclick",this.onAuditSettingsChanged,this)},onAuditSettingsChanged:function(a,b){this.isFromAudit=true;this.needEnableSharesAudit=
!this.serviceCollection.audit.enabled&&a.boxGen.ckEnableAudit.getValue();this.serviceCollection.audit.serviceObj=b;this.spServManager.commitSystemService("system_service_commit")},enableSharesAudit:function(){var a=this.spShareManager.getShares(),b=true;if(a!=_4&&a&&a.length){a.forEach(function(c){if(_a(c,"_i38").getAuditEnabled())b=false},this);if(b){a.map(function(c){c=_a(c,"_i38");c.putAuditEnabled(true);return c},this);this.spShareManager.commitShares("system-audit-commit-shares",
a)}}},enableShares:function(){var a=this.spShareManager.getShares(),b=true;if(a!=_4&&a&&a.length){a.forEach(function(c){if(_a(c,"_i38").getIndexed())b=false},this);if(b){a.map(function(c){c=_a(c,"_i38");c.putIndexed(true);return c},this);this.spShareManager.commitShares("system-file-search-commit-shares",a)}}},nfsServiceOnClicked:function(){if(this.nfsServiceWindow==undefined)this.nfsServiceWindow=new Ext.UI.Window({title:_TR("NFS_SETTINGS"),modal:true,autoWidth:true,resizable:false,
bodyCssClass:"x-sec-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_nfs",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onNfsSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.nfsEnableChkBox.setValue(this.getBtnBoolState(this.nfsBtn.getState()));this.nfsServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",
layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.nfsEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("NFS_ENABLE"),colspan:2,disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.nfsEnableCheckedEvent,scope:this}}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 7px 0px 17px 0px;",cellspacing:5},columns:3},items:[{xtype:"box",html:_TR("NFS_NUM_THREADS")+_TR("COLON"),cls:"x-system-panel-service-dlglabel",style:"min-width: 145px;"},
this.nfsThreadNumBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",width:130,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id"],data:[[1],[2],[4],[8],[12],[16],[24],[32]]}),valueField:"id",displayField:"id"}),{xtype:"box",html:""},{xtype:"box",html:_TR("NFS_AUTHORITATIVE")+_TR("COLON"),cls:"x-system-panel-service-dlglabel",style:"min-width: 145px;"},this.nfsAuthoritativeGroupBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",
width:130,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[1,"Server"],[0,"Client"]]}),valueField:"id",displayField:"text"}),this.tbAuthoritativeGroup=new Ext.UI.RoundButton({cls:"x-frontview-btn-info-mark"})]},this.nfsEnableV4ChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("NFSV4_ENABLE"),colspan:2,disabled:true,cls:"x-inspector-checkbox-bg",listeners:{check:function(a,b){this.nfsDomainBox.setDisabled(!b)},
scope:this}}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 7px 0px 17px 0px;",cellspacing:5},columns:2},items:[{xtype:"box",html:_TR("NFSV4_DOMAIN")+_TR("COLON"),cls:"x-system-panel-service-dlglabel",style:"min-width: 145px;"},this.nfsDomainBox=new Ext.UI.TextField({cellCls:"x-sec-newpref-cell",tooltipCfg:{html:_TR("NFSV4_DOMAIN_TOOLTIP"),enabled:true},width:130})]}]}]});this.nfsEnableChkBox.setValue(this.serviceCollection.nfs.enabled);this.nfsThreadNumBox.setValue(this.serviceCollection.nfs.numThreads);
this.nfsAuthoritativeGroupBox.setValue(this.serviceCollection.nfs.manageGids);this.nfsEnableV4ChkBox.setValue(this.serviceCollection.nfs.v4);this.nfsDomainBox.setValue(this.serviceCollection.nfs.domain);this.nfsServiceWindow.show();this.toggleFieldState("nfs",this.serviceCollection.nfs.enabled);this.ttAuthoritativeGroup=new Ext.UI.ToolTip(this.tbAuthoritativeGroup.el,{cls:"x-backups-readydr-jobs-tooltip",autowidth:false,autoheight:false,scroller:false,html:_TR("AUTHORITATIVE_GROUP_INFO")})},nfsEnableCheckedEvent:function(a,
b){this.toggleFieldState("nfs",b)},onNfsSettingsChanged:function(){this.nfsBtn.setState(this.getBtnStrState(this.nfsEnableChkBox.checked));this.serviceCollection.nfs.numThreads=this.nfsThreadNumBox.getValue();this.serviceCollection.nfs.manageGids=this.nfsAuthoritativeGroupBox.getValue();this.serviceCollection.nfs.v4=this.nfsEnableV4ChkBox.getValue();this.serviceCollection.nfs.domain=this.nfsDomainBox.getValue();this.serviceCollection.nfs.serviceObj.putEnable(this.nfsEnableChkBox.checked);if(this.nfsEnableChkBox.checked){this.serviceCollection.nfs.serviceObj.putNFSThreads(this.nfsThreadNumBox.getValue());
this.serviceCollection.nfs.serviceObj.putManageGids(this.nfsAuthoritativeGroupBox.getValue());this.serviceCollection.nfs.serviceObj.putNFSV4(this.nfsEnableV4ChkBox.getValue()?"1":"0");this.serviceCollection.nfs.serviceObj.putNFSV4Domain(this.nfsDomainBox.getValue())}this.spServManager.commitSystemService("system_service_commit");this.nfsServiceWindow.hide()},ftpServiceOnClicked:function(){if(this.ftpServiceWindow==undefined)this.ftpServiceWindow=new Ext.UI.Window({title:_TR("FTP_SETTINGS"),modal:true,
autoWidth:true,autoHeight:true,resizable:false,bodyCssClass:"x-system-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_ftp",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onFtpSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.ftpEnableChkBox.setValue(this.getBtnBoolState(this.ftpBtn.getState()));this.ftpServiceWindow.hide()},scope:this,cancelbtn:true}],
items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.ftpEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("FTP_ENABLE"),disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.ftpEnableCheckedEvent,scope:this}}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px 0px 0px 0px;",cellspacing:5},columns:4},items:[this.ftpPortLabel=new Ext.BoxComponent({html:_TR("FTP_PORT")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"}),
this.ftpPortTxtField=new Ext.UI.TextField({colspan:3,cellCls:"x-sec-newpref-cell"}),{xtype:"box",html:_TR("FTP_AUTHENTICATION_MODE")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.ftpAuthComboxBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",colspan:3,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[["anonymous",_TR("FTP_ANONYMOUS")],["user",_TR("FTP_USER")]]}),valueField:"id",displayField:"text"}),
{xtype:"box",html:_TR("FTP_ALLOW_RESUME")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.ftpResumeComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",colspan:3,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")]]}),valueField:"id",displayField:"text"}),this.ftpPassivePortsLabel=new Ext.BoxComponent({html:_TR("FTP_PASSIVE_PORTS")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"}),
this.ftpMinRngTxtField=new Ext.UI.TextField({width:89,value:this.serviceCollection.ftp.minRange}),{xtype:"box",html:"-",style:{width:"10px",textAlign:"center"}},this.ftpMaxRngTxtField=new Ext.UI.TextField({width:89,value:this.serviceCollection.ftp.maxRange}),{xtype:"box",html:_TR("FTP_USE_MASQUERADE")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.ftpMasqAddrComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",colspan:3,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",
autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")]]}),valueField:"id",displayField:"text",listeners:{select:this.ftpMasqEnableChanged,scope:this}}),this.ftpMasqAddrLabel=new Ext.BoxComponent({html:_TR("FTP_MASQUERADE_ADDR")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"}),this.ftpMasqAddrTxtField=new Ext.UI.TextField({colspan:3,cellCls:"x-sec-newpref-cell",value:this.serviceCollection.ftp.masqAddr}),this.limitEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,
boxLabel:_TR("ENABLE_RATE_LIMIT"),checked:!(this.serviceCollection.ftp.maxUpload==0&&this.serviceCollection.ftp.maxDownload==0),colspan:4,disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.ftpEnableRateLimitEvent,scope:this}}),this.ftpUploadLabel=new Ext.BoxComponent({html:_TR("MAX_UPLOAD_RATE")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"}),this.ftpUploadTxtField=new Ext.UI.TextField({disabled:false,colspan:2,width:99}),{xtype:"box",html:_TR("KB_PS")},this.ftpDownloadLabel=
new Ext.BoxComponent({html:_TR("MAX_DOWNLOAD_RATE")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"}),this.ftpDownloadTxtField=new Ext.UI.TextField({disabled:false,colspan:2,width:99}),{xtype:"box",html:_TR("KB_PS")},this.ftpsEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("FTPS_ENABLE"),colspan:4,disabled:false,cls:"x-inspector-checkbox-bg"}),this.forceftpsEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("FORCE_FTPS_ENABLE"),colspan:4,disabled:false,cls:"x-inspector-checkbox-bg"}),
this.ftpLogEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("FTP_SERVER_LOG_TRANSFER_ENABLE"),colspan:4,disabled:false,cls:"x-inspector-checkbox-bg"})]}]}]});this.ftpEnableChkBox.setValue(this.serviceCollection.ftp.enabled);this.ftpPortTxtField.setValue(this.serviceCollection.ftp.port);this.ftpAuthComboxBox.setValue(this.serviceCollection.ftp.authMode);this.ftpResumeComboBox.setValue(this.serviceCollection.ftp.allowUploadResume?1:0);this.ftpMinRngTxtField.setValue(this.serviceCollection.ftp.minRange);
this.ftpMaxRngTxtField.setValue(this.serviceCollection.ftp.maxRange);this.ftpMasqAddrTxtField.setValue(this.serviceCollection.ftp.masqAddr);this.ftpMasqAddrComboBox.setValue(this.serviceCollection.ftp.masqAddrEnable?1:0);this.ftpUploadTxtField.setValue(this.serviceCollection.ftp.maxUpload==0?"":this.serviceCollection.ftp.maxUpload);this.ftpDownloadTxtField.setValue(this.serviceCollection.ftp.maxDownload==0?"":this.serviceCollection.ftp.maxDownload);this.limitEnableChkBox.setValue(!(this.serviceCollection.ftp.maxUpload==
0&&this.serviceCollection.ftp.maxDownload==0));this.ftpsEnableChkBox.setValue(this.serviceCollection.ftp.ftps);this.forceftpsEnableChkBox.setValue(this.serviceCollection.ftp.forceftps);this.ftpLogEnableChkBox.setValue(this.serviceCollection.ftp.log);this.ftpPortLabel.removeClass("x-sec-label-error");this.ftpPassivePortsLabel.removeClass("x-sec-label-error");this.ftpServiceWindow.show();_.initElePHEvent(this.ftpPortTxtField,"21");_.initElePHEvent(this.ftpMinRngTxtField,"32768");_.initElePHEvent(this.ftpMaxRngTxtField,
"65535");_.initElePHEvent(this.ftpUploadTxtField,_TR("READYDR_UNLIMITED"));_.initElePHEvent(this.ftpDownloadTxtField,_TR("READYDR_UNLIMITED"));this.toggleFieldState("ftp",this.serviceCollection.ftp.enabled);this.ftpMasqEnableChanged(this.ftpMasqAddrComboBox)},ftpEnableCheckedEvent:function(a,b){this.toggleFieldState("ftp",b);this.forceftpsEnableChkBox.setDisabled(!b);if(b){this.ftpUploadTxtField.setDisabled(!this.limitEnableChkBox.checked);this.ftpDownloadTxtField.setDisabled(!this.limitEnableChkBox.checked)}else{this.ftpUploadTxtField.setDisabled(true);
this.ftpDownloadTxtField.setDisabled(true)}},ftpEnableRateLimitEvent:function(a,b){this.ftpUploadTxtField.setDisabled(!b);this.ftpDownloadTxtField.setDisabled(!b)},ftpMasqEnableChanged:function(a){switch(a.getValue()){case 0:this.ftpMasqAddrLabel.hide();this.ftpMasqAddrTxtField.hide();this.ftpServiceWindow.setHeight(370);break;case 1:this.ftpMasqAddrLabel.show();this.ftpMasqAddrTxtField.show();this.ftpServiceWindow.setHeight(400);break}},onFtpSettingsChanged:function(){if(this.ftpPortTxtField.getValue()!==
""&&this.ftpPortTxtField.getValue()!=="21"&&!this.isValidPortRange(this.ftpPortTxtField.getValue())){this.ftpPortLabel.addClass("x-sec-label-error");this.ftpPortTxtField.showValidateTooltip(_TR("FTP_PORT_ERROR"));return false}else this.ftpPortLabel.removeClass("x-sec-label-error");var a=this.ftpMinRngTxtField.getValue(),b=this.ftpMaxRngTxtField.getValue();a=a==""?"32768":a;b=b==""?"65535":b;if(this.isValidPassivePorts(a,b))this.ftpPassivePortsLabel.removeClass("x-sec-label-error");else{this.ftpPassivePortsLabel.addClass("x-sec-label-error");
this.ftpMinRngTxtField.showValidateTooltip(_TR("FTP_PASSIVE_PORT_ERROR"));return false}if(this.ftpUploadTxtField.getValue()!=""&&this.ftpEnableChkBox.checked&&(this.ftpUploadTxtField.getValue()<0||this.ftpUploadTxtField.getValue()>99999)){this.ftpUploadLabel.addClass("x-sec-label-error");return false}else this.ftpUploadLabel.removeClass("x-sec-label-error");if(this.ftpEnableChkBox.getValue()!=""&&this.ftpEnableChkBox.checked&&this.ftpDownloadTxtField.getValue()<0||this.ftpDownloadTxtField.getValue()>
99999){this.ftpDownloadLabel.addClass("x-sec-label-error");return false}else this.ftpDownloadLabel.removeClass("x-sec-label-error");this.ftpBtn.setState(this.getBtnStrState(this.ftpEnableChkBox.checked));var c=this.ftpPortTxtField.getValue();this.serviceCollection.ftp.port=c==""?"21":c;this.serviceCollection.ftp.authMode=this.ftpAuthComboxBox.getValue();this.serviceCollection.ftp.allowUploadResume=!!parseInt(this.ftpResumeComboBox.getValue());this.serviceCollection.ftp.minRange=a;this.serviceCollection.ftp.maxRange=
b;this.serviceCollection.ftp.masqAddr=this.ftpMasqAddrTxtField.getValue();this.serviceCollection.ftp.masqAddrEnable=!!parseInt(this.ftpMasqAddrComboBox.getValue());this.serviceCollection.ftp.maxUpload=this.limitEnableChkBox.checked?this.ftpUploadTxtField.getValue():0;this.serviceCollection.ftp.maxDownload=this.limitEnableChkBox.checked?this.ftpDownloadTxtField.getValue():0;this.serviceCollection.ftp.ftps=this.ftpsEnableChkBox.checked;this.serviceCollection.ftp.forceftps=this.forceftpsEnableChkBox.checked;
this.serviceCollection.ftp.log=this.ftpLogEnableChkBox.checked;this.serviceCollection.ftp.serviceObj.putEnable(this.ftpEnableChkBox.checked);if(this.ftpEnableChkBox.checked){this.serviceCollection.ftp.serviceObj.putFTPPort(c==""?"21":c);this.serviceCollection.ftp.serviceObj.putFTPAuthMode(this.ftpAuthComboxBox.getValue());this.serviceCollection.ftp.serviceObj.putFTPUploadResumeState(!!parseInt(this.ftpResumeComboBox.getValue()));this.serviceCollection.ftp.serviceObj.putFTPPassiveRangeMin(a);this.serviceCollection.ftp.serviceObj.putFTPPassiveRangeMax(b);
this.serviceCollection.ftp.serviceObj.putFTPMasqAddr(this.ftpMasqAddrTxtField.getValue());this.serviceCollection.ftp.serviceObj.putFTPMasqEnable(!!parseInt(this.ftpMasqAddrComboBox.getValue()));this.serviceCollection.ftp.serviceObj.putFTPMaxUploadRate(this.serviceCollection.ftp.maxUpload);this.serviceCollection.ftp.serviceObj.putFTPMaxDownloadRate(this.serviceCollection.ftp.maxDownload);this.serviceCollection.ftp.serviceObj.putFTPSEnable(this.ftpsEnableChkBox.checked);this.serviceCollection.ftp.serviceObj.putFTPForceFTPS(this.forceftpsEnableChkBox.checked);
this.serviceCollection.ftp.serviceObj.putFTPLogEnable(this.ftpLogEnableChkBox.checked);this.serviceCollection.ftp.maxUpload=this.limitEnableChkBox.checked?this.ftpUploadTxtField.getValue():0;this.serviceCollection.ftp.maxDownload=this.limitEnableChkBox.checked?this.ftpDownloadTxtField.getValue():0}this.spServManager.commitSystemService("system_service_commit");this.ftpServiceWindow.hide()},dlnaServiceOnClicked:function(){this.dlaWinFirstClicked=true;if(this.dlnaServiceWindow==undefined)this.dlnaServiceWindow=
new Ext.UI.Window({title:_TR("ReadyDLNA_SETTINGS"),modal:true,autoDestroy:true,autoWidth:true,autoHeight:true,resizable:false,bodyCssClass:"x-sec-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shadow:false,shim:true,help:"system_wnd_dlna",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onDlnaSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.dlnaEnableChkBox.setValue(this.getBtnBoolState(this.dlnaBtn.getState()));
if(this.tivoPollInterval){this.isTivoPollingStarted=false;window.clearInterval(this.tivoPollInterval)}this.dlnaServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.dlnaEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("ReadyDLNA_ENABLE"),disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.dlnaEnableCheckedEvent,scope:this}}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 0px 17px 0px;",
cellspacing:5},columns:3},items:[{xtype:"box",html:_TR("ReadyDLNA_AUTO_SCAN")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.dlnaAutoScanComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",width:213,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")]]}),valueField:"id",displayField:"text"}),this.dlnaRescanBtn=new Ext.UI.Button({text:_TR("ReadyDLNA_RESCAN"),
listeners:{click:function(){this.serviceCollection.dlna.serviceObj.rescanDLNA("rescan_dlna_media");Ext.UI.MessageBox.show({title:_TR("ReadyDLNA_RESCAN_MEDIA"),msg:_TR("ReadyDLNA_RESCAN_PROGRESS"),buttons:Ext.Msg.OK,height:100,width:300})},scope:this}}),{xtype:"box",html:_TR("ReadyDLNA_TIVO_SERVER")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},{xtype:"container",layout:"table",colspan:2,layoutConfig:{tableAttrs:{cellspacing:0}},items:[this.dlnaTivoServerComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",
width:295,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")],[2,_TR("ReadyDLNA_TIVO_SERVER_FAST_TRANSPORT")]]}),valueField:"id",displayField:"text",listeners:{select:function(){this.toggleTivoService(false)},scope:this}}),new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"margin-bottom:10px; margin-left:5px;",listeners:{afterrender:function(c){new Ext.UI.ToolTip(c.el,
{html:_TR("ReadyDLNA_TIVO_SERVER_FAST_TRANSPORT_TOOLTIP")})}}})]}]}]},this.tivoCom1=new Ext.Container({layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px;"},columns:1},items:[this.tivoPanel=new Ext.BoxComponent({html:'<table style="width: 100%; height: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-header"><tr><td style="width: 45%;"><div class="">'+_TR("NAME")+'</div></td><td style="width: 30%;"><div class="">'+_TR("STATUS")+'</div></td><td style="width: 25%;"></td></tr></table><div id="'+
(this.dataCntId=Ext.id())+'" style="max-height: 86px;"></div>',cls:"x-system-panel-service-header",style:{height:"auto"},listeners:{afterrender:this.createTivoDeviceDataView,scope:this}})]}),this.tivoCom2=new Ext.Container({layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 0px 17px 0px;",cellspacing:5},columns:5},items:[{xtype:"box",html:_TR("TIVO_ARC_PATH")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.tivoArchivePathComboxBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",
typeAhead:true,colspan:4,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:this.pathData=new Ext.data.ArrayStore({fields:["id","text"],data:this.folderArray}),valueField:"id",displayField:"text"}),{xtype:"box",html:_TR("TIVO_SCHEDULE_TITLE")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.tivoScheduleHourComboxBox=new Ext.UI.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,width:90,store:new Ext.data.ArrayStore({fields:["id","text"],
data:[]}),valueField:"id",displayField:"text"}),{xtype:"box",html:_TR("COLON"),style:{width:"10px",textAlign:"center"}},this.tivoScheduleMinComboxBox=new Ext.UI.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,width:90,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,"00"],[1,"01"],[2,"02"],[3,"03"],[4,"04"],[5,"05"],[6,"06"],[7,"07"],[8,"08"],[9,"09"],[10,"10"],[11,"11"],[12,"12"],[13,"13"],[14,"14"],[15,"15"],[16,"16"],[17,"17"],[18,"18"],[19,
"19"],[20,"20"],[21,"21"],[22,"22"],[23,"23"],[24,"24"],[25,"25"],[26,"26"],[27,"27"],[28,"28"],[29,"29"],[30,"30"],[31,"31"],[32,"32"],[33,"33"],[34,"34"],[35,"35"],[36,"36"],[37,"37"],[38,"38"],[39,"39"],[40,"40"],[41,"41"],[42,"42"],[43,"43"],[44,"44"],[45,"45"],[46,"46"],[47,"47"],[48,"48"],[49,"49"],[50,"50"],[51,"51"],[52,"52"],[53,"53"],[54,"54"],[55,"55"],[56,"56"],[57,"57"],[58,"58"],[59,"59"]]}),valueField:"id",displayField:"text"}),this.tivoAMPM=new Ext.UI.ComboBox({width:55,typeAhead:true,
triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("AM")],[1,_TR("PM")]]}),valueField:"id",displayField:"text",value:0,listeners:{scope:this,select:function(){}}})]}),this.tivoCom3=new Ext.Container({layout:"table",cls:"x-system-panel-service-dlna-cb",layoutConfig:{tableAttrs:{style:"margin: 0px;",cellspacing:12},columns:7},items:[this.sunChkBox=new Ext.UI.Checkbox({boxLabel:_TR("TIVO_CAL_SUN"),disabled:false,cls:"x-inspector-checkbox-bg"}),
this.monChkBox=new Ext.UI.Checkbox({boxLabel:_TR("TIVO_CAL_MON"),disabled:false,cls:"x-inspector-checkbox-bg"}),this.tueChkBox=new Ext.UI.Checkbox({boxLabel:_TR("TIVO_CAL_TUE"),disabled:false,cls:"x-inspector-checkbox-bg"}),this.wedChkBox=new Ext.UI.Checkbox({boxLabel:_TR("TIVO_CAL_WED"),disabled:false,cls:"x-inspector-checkbox-bg"}),this.thuChkBox=new Ext.UI.Checkbox({boxLabel:_TR("TIVO_CAL_THU"),disabled:false,cls:"x-inspector-checkbox-bg"}),this.friChkBox=new Ext.UI.Checkbox({boxLabel:_TR("TIVO_CAL_FRI"),
disabled:false,cls:"x-inspector-checkbox-bg"}),this.satChkBox=new Ext.UI.Checkbox({boxLabel:_TR("TIVO_CAL_SAT"),disabled:false,cls:"x-inspector-checkbox-bg"})]}),{xtype:"box",html:"",style:{height:"10px"}}]});var a=localStorage.getItem("enable24Hour")=="true",b=[[0,"00"],[1,"01"],[2,"02"],[3,"03"],[4,"04"],[5,"05"],[6,"06"],[7,"07"],[8,"08"],[9,"09"],[10,"10"],[11,"11"],[12,"12"],[13,"13"],[14,"14"],[15,"15"],[16,"16"],[17,"17"],[18,"18"],[19,"19"],[20,"20"],[21,"21"],[22,"22"],[23,"23"]];a||(b=[[1,
"01"],[2,"02"],[3,"03"],[4,"04"],[5,"05"],[6,"06"],[7,"07"],[8,"08"],[9,"09"],[10,"10"],[11,"11"],[12,"12"]]);this.tivoScheduleHourComboxBox.getStore().loadData(b);this.dlnaEnableChkBox.setValue(this.serviceCollection.dlna.enabled);this.dlnaAutoScanComboBox.setValue(this.serviceCollection.dlna.autoScan?1:0);this.dlnaTivoServerComboBox.setValue(this.serviceCollection.dlna.tivoSerEnabled?1:0);b=this.tivoSettingsObj.hours;this.tivoAMPM.setValue(!a&&b>=12?1:0);this.tivoAMPM.setVisible(!a);b=!a&&b>12?
b-12:b;if(!a&&b==0)b=12;this.tivoSettingsObj.fasttransfer=="1"&&this.dlnaTivoServerComboBox.setValue(2);this.pathData.loadData(this.folderArray,false);this.tivoArchivePathComboxBox.setValue(this.tivoSettingsObj.currentPath);this.tivoScheduleHourComboxBox.setValue(b);this.tivoScheduleMinComboxBox.setValue(this.tivoSettingsObj.mins);this.sunChkBox.setValue(this.tivoSettingsObj.days[0]);this.monChkBox.setValue(this.tivoSettingsObj.days[1]);this.tueChkBox.setValue(this.tivoSettingsObj.days[2]);this.wedChkBox.setValue(this.tivoSettingsObj.days[3]);
this.thuChkBox.setValue(this.tivoSettingsObj.days[4]);this.friChkBox.setValue(this.tivoSettingsObj.days[5]);this.satChkBox.setValue(this.tivoSettingsObj.days[6]);this.dlnaServiceWindow.show();this.toggleFieldState("dlna",this.serviceCollection.dlna.enabled);this.toggleTivoService(true)},createTivoDeviceDataView:function(){this.tivoView=new Ext.DataView({singleSelect:true,selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["name","status","activate"]}),blockRefresh:true,autoScroll:true,
itemSelector:"table",tpl:new Ext.XTemplate('<tpl for="."><table style="width: 100%; height: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-row "><tr><td style="width: 45%;"><div class="">{name}</div></td><td style="width: 30%;"><div class="">{status}</div></td><td style="width: 25%;"><div class="" id="{activate}"></div></td></tr></table></tpl>')});var a=[];a.push({name:_TR("TIVO_NOT_FOUND"),status:"------",activate:new Ext.id});this.tivoView.getStore().loadData(a);this.tivoView.render(this.dataCntId);
this.tivoScroller=new Ext.UI.Scroller({dom:this.dataCntId,type:"vertical"});this.tivoScroller.reg()},toggleTivoService:function(a){if((this.dlnaTivoServerComboBox.getValue()===1||this.dlnaTivoServerComboBox.getValue()===2)&&this.dlnaEnableChkBox.checked){this.initiateTivoServPolling();this.showTivoComponents()}else{this.isTivoPollingStarted=false;window.clearInterval(this.tivoPollInterval);this.hideTivoComponents();this.spServManager.updateTIVOStatus("update_tivo_status")}if(!a){this.serviceCollection.dlna.serviceObj.putDLNATivoServerState(!!parseInt(this.dlnaTivoServerComboBox.getValue()));
this.spServManager.commitSystemService("system_service_commit")}},hideTivoComponents:function(){this.tivoCom1.hide();this.tivoCom2.hide();this.tivoCom3.hide()},showTivoComponents:function(){this.tivoCom1.show();this.tivoCom2.show();this.tivoCom3.show()},initiateTivoServPolling:function(){var a=this;if(!this.isTivoPollingStarted){this.tivoPollInterval=setInterval(function(){a.tivoServPolling()},2E3);this.isTivoPollingStarted=true}},tivoServPolling:function(){this.spServManager.updateTIVOStatus("update_tivo_status")},
tivoToggleBtnClicked:function(a){a.devActivated==="true"?this.spServManager.deactivateTIVO("deactivate_tivo_device",a.devName):this.showTivoMediaInputKey(a.devName)},showTivoMediaInputKey:function(a){if(!this.mediaInputKeyWindow)this.mediaInputKeyWindow=new Ext.UI.Window({title:_TR("TIVO_ACT_KEY"),modal:true,width:355,resizable:false,constrain:true,minimizable:false,maximizable:false,help:"system_wnd_media_input",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:function(){this.spServManager.activateTIVO("activate_tivo_device",
a,this.mediaAccessTxtField.getValue());this.mediaInputKeyWindow.hide()},scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.mediaInputKeyWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 0px 17px 0px;",cellspacing:5},columns:1},items:[this.mediaAccessTxtField=new Ext.UI.TextField({width:285,value:""})]}]});this.mediaAccessTxtField.setValue("");this.mediaInputKeyWindow.show()},dlnaEnableCheckedEvent:function(a,
b){this.toggleFieldState("dlna",b)},onDlnaSettingsChanged:function(){this.dlnaBtn.setState(this.getBtnStrState(this.dlnaEnableChkBox.checked));this.serviceCollection.dlna.autoScan=!!parseInt(this.dlnaAutoScanComboBox.getValue());this.serviceCollection.dlna.tivoSerEnabled=!!parseInt(this.dlnaTivoServerComboBox.getValue());this.serviceCollection.dlna.serviceObj.putEnable(this.dlnaEnableChkBox.checked);if(this.dlnaEnableChkBox.checked){this.serviceCollection.dlna.serviceObj.putDLNAAutoScanState(!!parseInt(this.dlnaAutoScanComboBox.getValue()));
this.serviceCollection.dlna.serviceObj.putDLNATivoServerState(!!parseInt(this.dlnaTivoServerComboBox.getValue()));this.serviceCollection.dlna.tivoSerEnabled&&this.tivoArchivePathComboxBox.getValue()===""&&Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("READYDLNA_NO_PATH"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400});if(!parseInt(this.dlnaTivoServerComboBox.getValue())){var a=[];a.push({name:_TR("TIVO_NOT_FOUND"),status:"------",activate:new Ext.id});this.tivoView.getStore().loadData(a);
this.tivoView.refresh()}}this.spServManager.commitSystemService("system_service_commit");if(this.dlnaEnableChkBox.checked){a="";if(this.sunChkBox.checked)a+="sun,";if(this.monChkBox.checked)a+="mon,";if(this.tueChkBox.checked)a+="tue,";if(this.wedChkBox.checked)a+="wed,";if(this.thuChkBox.checked)a+="thu,";if(this.friChkBox.checked)a+="fri,";if(this.satChkBox.checked)a+="sat,";a=a.substr(0,a.length-1);var b=this.dlnaTivoServerComboBox.getValue()=="2"?"1":"0",c=localStorage.getItem("enable24Hour")==
"true",d=this.tivoScheduleHourComboxBox.getValue();if(!c)if(d==12){if(this.tivoAMPM.getValue()==0)d=0}else if(this.tivoAMPM.getValue()==1)d=+d+12;this.spServManager.commitTIVOConfig("tivo_config_commit",this.tivoArchivePathComboxBox.getValue(),d,this.tivoScheduleMinComboxBox.getValue(),a,b)}this.dlnaServiceWindow.hide()},daapServiceOnClicked:function(){if(this.daapServiceWindow==undefined)this.daapServiceWindow=new Ext.UI.Window({title:_TR("DAAP_SETTINGS"),modal:true,autoWidth:true,autoHeight:true,
resizable:false,bodyCssClass:"x-system-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_daap",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onDaapSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.daapEnableChkBox.setValue(this.getBtnBoolState(this.daapBtn.getState()));this.daapServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",
layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.daapEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("DAAP_ENABLE"),checked:true,disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.daapEnableCheckedEvent,scope:this}}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 0px 17px 0px;",cellspacing:5},columns:3},items:[{xtype:"box",html:_TR("DAAP_SHARE_NAME")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},
this.daapShareNameTxtField=new Ext.UI.TextField({width:310,cellCls:"x-sec-newpref-cell",value:this.serviceCollection.daap.sharename,colspan:2}),{xtype:"box",html:_TR("DAAP_PASSWORD")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.daapPasswordTxtField=new Ext.UI.TextField({width:310,cellCls:"x-sec-newpref-cell",value:this.serviceCollection.daap.password,inputType:"password",colspan:2})]}]}]});this.daapEnableChkBox.setValue(this.serviceCollection.daap.enabled);this.daapShareNameTxtField.setValue(this.serviceCollection.daap.sharename);
this.daapServiceWindow.show()},daapEnableCheckedEvent:function(a,b){this.toggleFieldState("daap",b);this.daapShareNameTxtField.setDisabled(!b);this.daapPasswordTxtField.setDisabled(!b)},onDaapSettingsChanged:function(){this.daapBtn.setState(this.getBtnStrState(this.daapEnableChkBox.checked));this.serviceCollection.daap.sharename=this.daapShareNameTxtField.getValue();this.serviceCollection.daap.password=this.daapPasswordTxtField.getValue();this.serviceCollection.daap.serviceObj.putEnable(this.daapEnableChkBox.checked);
if(this.daapEnableChkBox.checked){this.serviceCollection.daap.serviceObj.putDAAPShareName(this.daapShareNameTxtField.getValue());this.serviceCollection.daap.serviceObj.putDAAPPassword(this.daapPasswordTxtField.getValue())}this.spServManager.commitSystemService("system_service_commit");this.daapServiceWindow.hide()},bonjourServiceOnClicked:function(){if(this.changeService(_TR("Bonjour"),this.serviceCollection.bonjour,this.bonjourBtn)){if(this.bonjourServiceWindow==undefined)this.bonjourServiceWindow=
new Ext.UI.Window({title:_TR("BONJOUR_SETTINGS"),modal:true,autoDestroy:true,autoWidth:true,autoHeight:true,resizable:false,bodyCssClass:"x-system-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_bonjour",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onBonjourSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.bonjourEnableChkBox.setValue(this.getBtnBoolState(this.bonjourBtn.getState()));
this.bonjourServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 10px 17px 20px",cellspacing:5},columns:2},items:[this.bonjourEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("BONJOUR_ENABLE"),colspan:2,disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.bonjourEnableCheckedEvent,scope:this}}),{xtype:"box",html:_TR("BONJOUR_AD_AFP")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.bonjourAFPComboBox=
new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",colspan:3,width:160,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")]]}),valueField:"id",displayField:"text"}),{xtype:"box",html:_TR("BONJOUR_AD_FRONTVIEW")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.bonjourFrontviewComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",colspan:3,width:160,typeAhead:true,
triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")]]}),valueField:"id",displayField:"text"}),{xtype:"box",html:_TR("BONJOUR_AD_READYNAS")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.bonjourReadyNASComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",colspan:3,width:160,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id",
"text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")]]}),valueField:"id",displayField:"text"}),{xtype:"box",html:_TR("BONJOUR_AD_TIMEMACHINE")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.bonjourTimeMachineComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",colspan:3,width:160,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("DISABLED")],[1,_TR("ENABLED")]]}),valueField:"id",displayField:"text"})]}]});
this.bonjourEnableChkBox.setValue(true);this.bonjourAFPComboBox.setValue(this.serviceCollection.bonjour.afp?1:0);this.bonjourFrontviewComboBox.setValue(this.serviceCollection.bonjour.frontview?1:0);this.bonjourReadyNASComboBox.setValue(this.serviceCollection.bonjour.readynas?1:0);this.bonjourTimeMachineComboBox.setValue(this.serviceCollection.bonjour.timemachine?1:0);this.bonjourServiceWindow.show();this.toggleFieldState("bonjour",true)}},bonjourEnableCheckedEvent:function(a,b){this.toggleFieldState("bonjour",
b)},onBonjourSettingsChanged:function(){this.bonjourBtn.setState(this.getBtnStrState(this.bonjourEnableChkBox.checked));this.serviceCollection.bonjour.afp=!!parseInt(this.bonjourAFPComboBox.getValue());this.serviceCollection.bonjour.frontview=!!parseInt(this.bonjourFrontviewComboBox.getValue());this.serviceCollection.bonjour.readynas=!!parseInt(this.bonjourReadyNASComboBox.getValue());this.serviceCollection.bonjour.timemachine=!!parseInt(this.bonjourTimeMachineComboBox.getValue());this.serviceCollection.bonjour.serviceObj.putEnable(this.bonjourEnableChkBox.checked);
if(this.bonjourEnableChkBox.checked){this.serviceCollection.bonjour.serviceObj.putBonjourAFPState(!!parseInt(this.bonjourAFPComboBox.getValue()));this.serviceCollection.bonjour.serviceObj.putBonjourFrontviewState(!!parseInt(this.bonjourFrontviewComboBox.getValue()));this.serviceCollection.bonjour.serviceObj.putBonjourReadynasState(!!parseInt(this.bonjourReadyNASComboBox.getValue()));this.serviceCollection.bonjour.serviceObj.putBonjourTimeMachineState(!!parseInt(this.bonjourTimeMachineComboBox.getValue()))}this.spServManager.commitSystemService("system_service_commit");
this.bonjourServiceWindow.hide()},httpServiceOnClicked:function(){if(this.httpServiceWindow==undefined)this.httpServiceWindow=new Ext.UI.Window({title:_TR("HTTP_SETTINGS"),modal:true,autoWidth:true,autoHeight:true,resizable:false,bodyCssClass:"x-sec-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_http",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onHttpSettingsChanged,scope:this,acceptbtn:true},
{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.httpEnableChkBox.setValue(this.getBtnBoolState(this.httpBtn.getState()));this.httpServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.httpEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("HTTP_ENABLE"),disabled:true,cls:"x-inspector-checkbox-bg",listeners:{check:this.httpEnableCheckedEvent,scope:this}}),this.httpAdminEnabledChkBox=
new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("HTTP_ADMIN_ENABLE"),disabled:true,cls:"x-inspector-checkbox-bg"}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 0px 17px 0px;",cellspacing:5},columns:2},items:[{xtype:"box",html:_TR("HTTP_REDIRECT_WEB_ACCESS")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.httpWebShareComboBox=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",width:127,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,
store:new Ext.data.ArrayStore({fields:["id","text"],data:this.serviceCollection.http.availableShares}),valueField:"id",displayField:"text"})]}]}]});this.httpWebShareComboBox.getStore().loadData(this.serviceCollection.http.availableShares);var a=this.serviceCollection.http.availableShares.length;if(this.serviceCollection.http.selectedShare===""||a==1)this.httpWebShareComboBox.setValue(0);else for(var b=1;b<a;b+=1)this.httpWebShareComboBox.getStore().getAt(b).data.text===this.serviceCollection.http.selectedShare&&
this.httpWebShareComboBox.setValue(b);this.httpEnableChkBox.setValue(this.serviceCollection.http.enabled);this.httpAdminEnabledChkBox.setValue(this.serviceCollection.http.adminEnabled=="1");this.httpServiceWindow.show();this.toggleFieldState("http",this.serviceCollection.http.enabled)},httpEnableCheckedEvent:function(a,b){this.toggleFieldState("http",b)},checkForNoneSelected:function(a){return a===0?"":this.httpWebShareComboBox.getStore().getAt(a).data.text},onHttpSettingsChanged:function(){this.httpBtn.setState(this.getBtnStrState(this.httpEnableChkBox.checked));
this.serviceCollection.http.selectedShare=this.checkForNoneSelected(this.httpWebShareComboBox.getValue());this.serviceCollection.http.serviceObj.putEnable(this.httpEnableChkBox.checked);this.httpEnableChkBox.checked&&this.serviceCollection.http.serviceObj.putHTTPSelectedShareName(this.checkForNoneSelected(this.httpWebShareComboBox.getValue()));this.serviceCollection.http.serviceObj.putHTTPAdminEnabled(this.httpAdminEnabledChkBox.checked?"1":"0");var a=_a(_7(_1.CLSIDS.MarvelDevice),
"_i2");if(a){a=_a(a,"_iq");var b=a.getTimeOut();a.putTimeOut(9E5);this.spServManager.commitSystemService("system_service_commit");a.putTimeOut(b)}this.httpServiceWindow.hide();if(window.location.protocol=="http:"&&!this.httpAdminEnabledChkBox.checked&&window.location.hostname!="localhost"){var c=window.location.href;setTimeout(function(){window.location.href="https:"+c.substr(5)},2E3)}},httpsServiceOnClicked:function(){if(this.httpsServiceWindow==undefined)this.httpsServiceWindow=
new Ext.UI.Window({title:_TR("HTTPS_SETTINGS"),modal:true,autoWidth:true,autoHeight:true,resizable:false,bodyCssClass:"x-sec-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_https",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onHttpsSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.httpsEnableChkBox.setValue(this.getBtnBoolState(this.httpsBtn.getState()));
this.httpsServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.httpsEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,width:120,boxLabel:_TR("HTTPS_ENABLE"),disabled:true,cls:"x-inspector-checkbox-bg",listeners:{check:this.httpsEnableCheckedEvent,scope:this}}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 0px 17px 0px;",cellspacing:5},columns:2},items:[{xtype:"box",
html:_TR("HTTPS_PORT1")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.httpsPort1TxtField=new Ext.UI.TextField({width:200,cellCls:"x-sec-editor",value:"443",disabled:true}),this.httpsPort2Label=new Ext.BoxComponent({html:_TR("HTTPS_PORT2")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"}),this.httpsPort2TxtField=new Ext.UI.TextField({width:200,cellCls:"x-sec-editor",value:this.serviceCollection.https.port}),{xtype:"box",html:_TR("HTTPS_SSL_KEY")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},
this.httpsSSLKeyTxtField=new Ext.UI.TextField({width:200,cellCls:"x-sec-editor",value:this.serviceCollection.https.sslKeyHost})]}]}]});this.httpsEnableChkBox.setValue(true);this.httpsPort2TxtField.setValue(this.serviceCollection.https.port==="0"?"":this.serviceCollection.https.port);this.httpsSSLKeyTxtField.setValue(this.serviceCollection.https.sslKeyHost);this.httpsPort2Label.removeClass("x-sec-label-error");this.httpsServiceWindow.show();this.toggleFieldState("https",true)},httpsEnableCheckedEvent:function(a,
b){this.toggleFieldState("https",b)},onHttpsSettingsChanged:function(){var a=true;if(!this.isValidPortRange(this.httpsPort2TxtField.getValue())&&this.httpsPort2TxtField.getValue()!==""){this.httpsPort2Label.addClass("x-sec-label-error");a=false}else this.httpsPort2Label.removeClass("x-sec-label-error");if(a){a=this.httpsPort2TxtField.getValue()===""?0:this.httpsPort2TxtField.getValue();this.httpsBtn.setState(this.getBtnStrState(this.httpsEnableChkBox.checked));this.serviceCollection.https.port=a;
this.serviceCollection.https.sslKeyHost=this.httpsSSLKeyTxtField.getValue();this.serviceCollection.https.serviceObj.putEnable(this.httpsEnableChkBox.checked);if(this.httpsEnableChkBox.checked){this.serviceCollection.https.serviceObj.putHTTPSPort(a);this.serviceCollection.https.serviceObj.putHTTPSSslKeyHost(this.httpsSSLKeyTxtField.getValue())}if(a=_a(_7(_1.CLSIDS.MarvelDevice),"_i2")){a=_a(a,"_iq");var b=a.getTimeOut();a.putTimeOut(9E5);this.spServManager.commitSystemService("system_service_commit");
a.putTimeOut(b)}this.httpsServiceWindow.hide();this.connectionWarning()}},snmpServiceOnClicked:function(){if(this.snmpServiceWindow==undefined)this.snmpServiceWindow=new Ext.UI.Window({title:_TR("SNMP_SETTINGS"),modal:true,autoDestroy:true,autoWidth:true,autoHeight:true,resizable:false,bodyCssClass:"x-system-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_snmp",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),
handler:this.onSnmpSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.snmpEnableChkBox.setValue(this.getBtnBoolState(this.snmpBtn.getState()));this.snmpServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.snmpEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("SNMP_ENABLE"),disabled:false,cls:"x-inspector-checkbox-bg",listeners:{check:this.snmpEnableCheckedEvent,
scope:this}}),{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 17px 0px 17px 0px;",cellspacing:5},columns:2},items:[{xtype:"box",html:_TR("SNMP_COMMUNITY")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.snmpCommunityTxtField=new Ext.UI.TextField({cellCls:"x-system-editor",width:180}),{xtype:"box",html:_TR("SNMP_TRAP_DESTINATION")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.snmpTrapDestTxtField=new Ext.UI.TextField({cellCls:"x-system-editor",width:180,
value:this.serviceCollection.snmp.trapDest}),{xtype:"box",html:_TR("SNMP_HOST_ACCESS")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.snmpAllowHostTxtField=new Ext.UI.TextField({cellCls:"x-system-editor",width:180,value:this.serviceCollection.snmp.allowHost}),{id:this.snmpContactLbl=Ext.id(),xtype:"box",html:_TR("SNMP_CONTACT")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.snmpContactTxtField=new Ext.UI.TextField({cellCls:"x-system-editor",width:180,tooltipCfg:{html:_TR("SNMP_CONTACT_TIP_ERROR")},
value:this.serviceCollection.snmp.contact}),{id:this.snmpLocationLbl=Ext.id(),xtype:"box",html:_TR("SNMP_LOCATION")+_TR("COLON"),cls:"x-system-panel-service-dlglabel"},this.snmpLocationTxtField=new Ext.UI.TextField({cellCls:"x-system-editor",width:180,tooltipCfg:{html:_TR("SNMP_LOCATION_TIP_ERROR")},value:this.serviceCollection.snmp.location}),{xtype:"box",cls:"x-system-panel-service-dlglabel"},{xtype:"box",html:'<a href="'+this.serviceCollection.snmp.miburl+'">'+_TR("SNMP_DOWNLOAD_MIB")+"</a>",cls:"x-system-panel-service-dlglabel"}]}]}]});
this.snmpEnableChkBox.setValue(this.serviceCollection.snmp.enabled);this.snmpCommunityTxtField.setValue(this.serviceCollection.snmp.community);this.snmpTrapDestTxtField.setValue(this.serviceCollection.snmp.trapDest);this.snmpAllowHostTxtField.setValue(this.serviceCollection.snmp.allowHost);this.snmpContactTxtField.setValue(this.serviceCollection.snmp.contact);this.snmpLocationTxtField.setValue(this.serviceCollection.snmp.location);this.snmpServiceWindow.show();_.initElePHEvent(this.snmpCommunityTxtField,
"public");this.toggleFieldState("snmp",this.serviceCollection.snmp.enabled)},snmpEnableCheckedEvent:function(a,b){this.toggleFieldState("snmp",b)},onSnmpSettingsChanged:function(){if(this.validateSNMP()){this.snmpBtn.setState(this.getBtnStrState(this.snmpEnableChkBox.checked));var a=this.snmpCommunityTxtField.getValue();a=a==""?"public":a;this.serviceCollection.snmp.community=a;this.serviceCollection.snmp.trapDest=this.snmpTrapDestTxtField.getValue();this.serviceCollection.snmp.allowHost=this.snmpAllowHostTxtField.getValue();
this.serviceCollection.snmp.contact=this.snmpContactTxtField.getValue();this.serviceCollection.snmp.location=this.snmpLocationTxtField.getValue();this.serviceCollection.snmp.serviceObj.putEnable(this.snmpEnableChkBox.checked);if(this.snmpEnableChkBox.checked){this.serviceCollection.snmp.serviceObj.putSNMPCommunity(a);this.serviceCollection.snmp.serviceObj.putSNMPTrapDest(this.snmpTrapDestTxtField.getValue());this.serviceCollection.snmp.serviceObj.putSNMPAllowHost(this.snmpAllowHostTxtField.getValue())}this.serviceCollection.snmp.serviceObj.putSNMPContact(this.snmpEnableChkBox.checked?
this.snmpContactTxtField.getValue():"");this.serviceCollection.snmp.serviceObj.putSNMPLocation(this.snmpEnableChkBox.checked?this.snmpLocationTxtField.getValue():"");this.spServManager.commitSystemService("system_service_commit");this.snmpServiceWindow.hide()}},validateSNMP:function(){if(this.snmpContactTxtField.tooltip)this.snmpContactTxtField.tooltip.enabled=false;this.showError(this.snmpContactLbl,false);var a=this.snmpContactTxtField.getValue();this.snmpLocationTxtField.getValue();if(this.snmpEnableChkBox.checked&&
a.length>=128){this.showError(this.snmpContactLbl,true);this.snmpContactTxtField.tooltip.enabled=true;return false}return true},sshServiceOnClicked:function(){this.changeService(_TR("SSH"),this.serviceCollection.ssh,this.sshBtn)},sshServiceOnClickedExt:function(){if(this.sshServiceWindow==undefined)this.sshServiceWindow=new Ext.UI.Window({title:_TR("SSH_SETTINGS"),modal:true,autoWidth:false,width:400,autoHeight:true,resizable:false,bodyCssClass:"x-sec-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,
minimizable:false,maximizable:false,stateful:false,shim:true,help:"system_wnd_http",fbar:["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onSSHSettingsChanged,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.sshEnableChkBox.setValue(this.getBtnBoolState(this.sshBtn.getState()));this.sshServiceWindow.hide()},scope:this,cancelbtn:true}],items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"margin: 0px"},columns:1},items:[this.sshEnableChkBox=
new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("SSH_ENABLE"),cls:"x-inspector-checkbox-bg",listeners:{check:this.sshEnableCheckedEvent,scope:this}}),this.sshPswdAuthEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("SSH_PSWD_AUTH_ENABLE"),cls:"x-inspector-checkbox-bg"}),this.downloadBtn=new Ext.UI.Button({width:200,style:"margin-left: 3px;",text:_TR("BACKUP_DOWNLOAD_SSH_KEY")+_TR("ELLIPSIS"),handler:this.downloadSSHFile,scope:this,expandToText:true})]}]});this.sshEnableChkBox.setValue(this.serviceCollection.ssh.enabled);
this.sshPswdAuthEnableChkBox.setValue(this.serviceCollection.ssh.sshPswdAuthEnabled=="1");this.sshPswdAuthEnableChkBox.setDisabled(!this.serviceCollection.ssh.enabled);this.downloadBtn.setDisabled(!this.serviceCollection.ssh.enabled);this.sshServiceWindow.show();this.toggleFieldState("ssh",this.serviceCollection.ssh.enabled)},onSSHSettingsChanged:function(){this.sshBtn.setState(this.getBtnStrState(this.sshEnableChkBox.checked));this.serviceCollection.ssh.serviceObj.putEnable(this.sshEnableChkBox.checked);
this.serviceCollection.ssh.serviceObj.putSSHPswdAuthEnable(this.sshPswdAuthEnableChkBox.checked?"1":"0");var a=_a(_7(_1.CLSIDS.MarvelDevice),"_i2");if(a){a=_a(a,"_iq");var b=a.getTimeOut();a.putTimeOut(9E5);this.spServManager.commitSystemService("system_service_commit");a.putTimeOut(b)}this.sshServiceWindow.hide()},sshEnableCheckedEvent:function(a,b){this.downloadBtn.setDisabled(!b);this.sshPswdAuthEnableChkBox.setDisabled(!b);this.toggleFieldState("ssh",
b)},downloadSSHFile:function(){_a(_7(_._3.Controls.SSHKeyDownload),"ILogDownloader").Start(document.dbbroker)},replicateServiceOnClicked:function(){this.changeService(_TR("REPLICATE_SETTINGS"),this.serviceCollection.replicate,this.replicateBtn)},rsyncServiceOnClicked:function(){this.changeService(_TR("RSYNC"),this.serviceCollection.rsync,this.rsyncBtn)},rsyncOverSSHServiceOnClicked:function(){this.changeService(_TR("RSYNC_OVER_SSH"),this.serviceCollection.rsync_over_ssh,
this.rsyncOverSSHBtn)},upnpServiceOnClicked:function(){this.changeService(_TR("UPnP"),this.serviceCollection.upnp,this.upnpBtn)},isValidPortRange:function(a){return a>1023&&a<=65535?true:false},isValidPassivePorts:function(a,b){var c=parseInt(a),d=parseInt(b);return a==c&&b==d&&c>=32768&&d<=65535&&c<d?true:false},connectionWarning:function(){Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("SYS_CON_SSL"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400})},delegateShowAccountsTab:function(){if(!this.secTab)this.secTab=
_7(_._3.Security.SecurityTab);_a(this.secTab,"IExtNative").getNative().on("tabactivate",this.onSecurityTabActivate,this);var a=_a(_7(_._3.System.Frame),"ISystemFrame");a&&a.activateTab(this.secTab)},onSecurityTabActivate:function(){if(this.secTab){var a=_a(this.secTab,"IExtNative").getNative();a.un("tabactivate",this.onSecurityTabActivate,this);if(!this.usersTab)this.usersTab=_7(_._3.Security.UsersTab);_a(this.usersTab,
"IExtNative").getNative().on("tabactivate",this.onUsersSubTabActivate,this);a.selectTab(this.usersTab)}},onUsersSubTabActivate:function(){var a=_a(this.usersTab,"IExtNative").getNative();a.un("tabactivate",this.onUsersSubTabActivate,this);a.getPanelByIndex(0).showUserProperties(2)},toggleFieldState:function(a,b){switch(a){case "ftp":this.ftpPortTxtField.setDisabled(!b);this.ftpAuthComboxBox.setDisabled(!b);this.ftpResumeComboBox.setDisabled(!b);this.ftpMinRngTxtField.setDisabled(!b);this.ftpMaxRngTxtField.setDisabled(!b);
this.ftpMasqAddrTxtField.setDisabled(!b);this.ftpMasqAddrComboBox.setDisabled(!b);this.ftpsEnableChkBox.setDisabled(!b);this.forceftpsEnableChkBox.setDisabled(!b);this.ftpLogEnableChkBox.setDisabled(!b);this.limitEnableChkBox.setDisabled(!b);break;case "dlna":this.dlnaAutoScanComboBox.setDisabled(!b);this.dlnaRescanBtn.setDisabled(!b);this.dlnaTivoServerComboBox.setDisabled(!b);this.tivoCom1.setDisabled(!b);this.tivoCom2.setDisabled(!b);this.tivoCom3.setDisabled(!b);this.tivoArchivePathComboxBox.setDisabled(!b);
this.tivoScheduleHourComboxBox.setDisabled(!b);this.tivoScheduleMinComboxBox.setDisabled(!b);this.sunChkBox.setDisabled(!b);this.monChkBox.setDisabled(!b);this.tueChkBox.setDisabled(!b);this.wedChkBox.setDisabled(!b);this.thuChkBox.setDisabled(!b);this.friChkBox.setDisabled(!b);this.satChkBox.setDisabled(!b);a=this.tivoArray.length;a--;a>=0&&this["activateBtn"+a]&&this["activateBtn"+a].setDisabled(!b);this.serviceCollection.dlna.enabled||this.dlnaTivoServerComboBox.setDisabled(true);break;case "daap":this.daapShareNameTxtField.setDisabled(!b);
this.daapPasswordTxtField.setDisabled(!b);break;case "bonjour":this.bonjourAFPComboBox.setDisabled(!b);this.bonjourFrontviewComboBox.setDisabled(!b);this.bonjourReadyNASComboBox.setDisabled(!b);this.bonjourTimeMachineComboBox.setDisabled(!b);break;case "snmp":this.snmpCommunityTxtField.setDisabled(!b);this.snmpTrapDestTxtField.setDisabled(!b);this.snmpAllowHostTxtField.setDisabled(!b);this.snmpContactTxtField.setDisabled(!b);this.snmpLocationTxtField.setDisabled(!b);break;case "http":this.httpWebShareComboBox.setDisabled(!b);
this.httpAdminEnabledChkBox.setDisabled(!b);break;case "rsync":this.rsyncEnabledOverSSHChkBox.setDisabled(!b);break;case "ssh":break;case "https":this.httpsPort2TxtField.setDisabled(!b);this.httpsSSLKeyTxtField.setDisabled(!b);break;case "nfs":this.nfsThreadNumBox.setDisabled(!b);this.nfsAuthoritativeGroupBox.setDisabled(!b);this.nfsEnableV4ChkBox.setDisabled(!b);!b&&this.nfsEnableV4ChkBox.setValue(false);this.nfsDomainBox.setDisabled(!b||!this.nfsEnableV4ChkBox.checked);break;case "replicate":this.replicateUsernameTxtField.setDisabled(!b);
this.replicatePasswordTxtField.setDisabled(!b);default:break}},changeService:function(a,b){if(b.enabled){if(b.serviceObj.getName()==="upnpd")Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),msg:_TR("SERVICE_DISABLE_UPNP"),fn:function(c){if(c=="yes"){b.enabled=false;b.serviceObj.putEnable(false);this.spServManager.commitSystemService("system_service_commit")}},scope:this});else if(b.serviceObj.getName()==="file-search")Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),msg:String.format(_TR("SERVICE_DISABLE"),
_TR("FILE_SEARCH")),fn:function(c){if(c=="yes"){b.enabled=false;b.serviceObj.putEnable(false);this.spServManager.commitSystemService("system_service_commit")}},scope:this});else b.serviceObj.getName()==="ssh"?this.sshServiceOnClickedExt():Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),msg:String.format(_TR("SERVICE_DISABLE"),a),fn:function(c){if(c=="yes"){b.enabled=false;b.serviceObj.putEnable(false);this.spServManager.commitSystemService("system_service_commit")}},scope:this});return false}else if(b.noprop)if(b.serviceObj.getName()===
"ssh")Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),msg:_TR("ENABLE_SSH_WARNING"),fn:function(c){if(c=="yes")this.sshServiceOnClickedExt();else return false},scope:this});else if(b.serviceObj.getName()==="rsync_over_ssh"){b.enabled=true;b.serviceObj.putEnable(true);this.spServManager.commitSystemService("system_service_commit_rsync_ssh")}else{b.enabled=true;b.serviceObj.putEnable(true);this.spServManager.commitSystemService("system_service_commit")}return true},IPromptWindowEvents:{OnClosing:function(a){!Ext.isEmpty(a.getArgs())&&
!Ext.isEmpty(a.getArgs().delegatename)&&this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().validatefunc)&&this[a.getArgs().validatefunc](a)}},_i2y:{_o1:function(a,b){if(b=="system-services-update-sec-mode"||b=="system-services-commit-sec-mode"||b=="sync-update-security")this.disableButtons(true)},_o3:function(a,b,c){if(c=="system-services-update-sec-mode"||
c=="system-services-commit-sec-mode"||c=="sync-update-security"){this.disableButtons(false);c=="system-services-commit-sec-mode"&&this.spSecurityManager.updateADSMode("sync-update-security")}},_o2:function(a,b){switch(b){case "sync-update-security":case "security-update-usecurity":case "system-services-update-sec-mode":this.adsmode=this.spSecurityManager.getADSMode()=="ads";break}return _5}},disableButtons:function(a){this.countUpdates=this.countUpdates||0;if(a)++this.countUpdates;else--this.countUpdates;
if((a&&this.countUpdates||!a&&!this.countUpdates)&&this.btns)for(var b=0;b<this.btns.length;++b)this.btns[b].setDisabled(a||this.btns[b].serviceMounted)},IPanelItem:{refresh:function(){this.spServManager.updateSystemServiceInfo("system_service_refresh");this.spSecurityManager.updateADSMode("system-services-update-sec-mode")}},updateSysServices:function(){this.spServManager.updateSystemServiceInfo("sync-update-services")}});Ext.namespace("_s1");
_s1.UpsPanel=_._1(_._3.SystemSubSys.UpsPanel,_s0.BasePanel,IPanelItem,_i4,_i1i,{cls:"x-system-panel-upsconfig",expanded:false,updatesCount:0,help:"system_panel_ups",constructor:function(a){this.title=_TR("UPS");_s1.UpsPanel.superclass.constructor.call(this,a);this.wndUpsConfig=new _s1.UpsConfigWindow;this.wndUpsConfig.on("addClick",this.onWndAddClick,this);this.wndUpsConfig.on("applyClick",this.onWndApplyClick,
this)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spUpsConfigManager=a.getUpsConfigManager();_a(this.spUpsConfigManager,"_i1").Advise(this)}_s1.UpsPanel.superclass.initComponent.apply(this,arguments)},onReady:function(){this.el.addClass("x-system-panel-power");new Ext.UI.RoundButton({cls:this.cls+"-btn-add x-frontview-btn-plus-small",renderTo:this.topPlace,listeners:{click:this.onAddClick,scope:this}});this.lNoUps=
new Ext.BoxComponent({html:_TR("NO_UPS"),cls:this.cls+"-noups",hidden:true,renderTo:this.content});this.elUpsConfigs=this.content.createChild({cls:"x-system-panel-upsconfig-gridct"});this.elUpsConfigs.addClass("ui-white");this.elUpsConfigs.setDisplayed(false);this.elUpsConfigs.update('<div id="'+(this.gridButtonsNodeId=Ext.id())+'" class="x-system-panel-upsconfig-grid-buttonsct"></div><div id="'+(this.gridNodeId=Ext.id())+'" style="max-height: 110px;"></div>');this.bProp=new Ext.UI.RoundButton({cls:"x-frontview-btn-properties-small x-system-panel-upsconfig-grid-button",
disabled:true});this.bRemove=new Ext.UI.RoundButton({cls:"x-frontview-btn-minus-small x-system-panel-upsconfig-grid-button",disabled:true});this.bProp.on("click",this.onPropClick,this);this.bRemove.on("click",this.onRemoveClick,this);this.bRemove.render(this.gridButtonsNodeId);this.bProp.render(this.gridButtonsNodeId)},onAddClick:function(){this.wndUpsConfig.show();this.wndUpsConfig.load()},onWndAddClick:function(a,b){this.wndUpsConfig.hide();switch(a){case "SNMP":this.spUpsConfigManager.AddSnmpUpsConfig("system-upsconfig-add",
b.name,b.desc,b.address,b.community,b.mibs,b.threshold);break;case "REMOTE":this.spUpsConfigManager.AddRemoteUpsConfig("system-upsconfig-add",b.name,b.desc,b.address,b.username,b.password,b.threshold);break;case "LOCAL":this.spUpsConfigManager.AddLocalUpsConfig("system-upsconfig-add",b.name,b.desc,"0.0.0.0",b.localenabled,b.threshold);break}},onWndApplyClick:function(a,b){this.wndUpsConfig.hide();a.putName(b.name);a.putDescription(b.desc);switch(a.getType()){case "snmp":a.putSnmpAddress(b.address);
a.putSnmpCommunity(b.community);a.putSnmpMibs(b.mibs);break;case "remote":a.putRemoteAddress(b.address);a.putRemoteUserName(b.username);a.putRemotePassword(b.password);break;case "local":a.putLocalEnabled(b.localenabled);a.putLocalAddress("0.0.0.0");break}a.putShutdownThreshold(b.threshold);this.spUpsConfigManager.CommitUpsConfig("system-upsconfig-commit",a)},onPropClick:function(){if(this.selectedItem){this.wndUpsConfig.show();this.wndUpsConfig.load(this.selectedItem.upsconfig);this.wndUpsConfig.center()}},
onRemoveClick:function(){this.selectedItem&&Ext.UI.MessageBox.confirm({title:_TR("UPS_REMOVE"),msg:_TR("UPS_REMOVE_CONFIRM"),fn:function(a){a=="yes"&&this.spUpsConfigManager.DeleteUpsConfig("system-upsconfig-remove",this.selectedItem.upsconfig)},scope:this})},populateUpsConfigs:function(){var a=this.spUpsConfigManager.getUpsConfigs();this.wndUpsConfig.populateUpsConfigs(a);if(a.length){this.lNoUps.hide();this.elUpsConfigs.setDisplayed(true);var b="",c=false;this.upsConfigItems=[];Ext.each(a,function(d){var f=
"ui-fwgrid-row"+(c?" ui-fwgrid-rowalt":"");c=!c;var e=Ext.id();Ext.id();d=_a(d,"_i1g");var g=d.getName()||"",h=d.getDescription()||"",k=d.getType(),j=d.getUpsStatus(),m=d.getUpsRawStatus(),n=d.getUpsSerial()||"",p=d.getUpsModel()||"",o=d.getUpsMfr()||"",q;switch(k){case "snmp":q=d.getSnmpAddress();break;case "remote":q=d.getRemoteAddress();break;case "local":q=_TR("AUTO");break}var r=k="";if(m&&m!=_4)r=_TR("UPS_RAWSTATUS_"+m.toUpperCase());k=j=="ok"?"x-system-panel-led-green":"x-system-panel-led-orange";
b+='<tr id="'+e+'" class="'+f+'"><td class="cell cell-status '+k+'" title="'+r+'"><div class="x-ellipsis">'+r+'</div></td><td class="cell cell-name" title="'+g+'"><div class="x-ellipsis">'+g+'</div></td><td class="cell cell-desc" title="'+h+'"><div class="x-ellipsis">'+h+'</div></td><td class="cell cell-serial" title="'+n+'"><div class="x-ellipsis">'+n+'</div></td><td class="cell cell-model" title="'+p+'"><div class="x-ellipsis">'+p+'</div></td><td class="cell cell-mfr" title="'+o+'"><div class="x-ellipsis">'+
o+'</div></td><td class="cell cell-address" title="'+q+'"><div class="x-ellipsis">'+q+"</div></td></tr>";this.upsConfigItems.push({name:g,desc:h,address:q,upsconfig:d,rowId:e})},this);b='<table class="x-system-panel-upsconfig-grid" cellspacing="0"><tr class="ui-fwgrid-header"><td class="x-ellipsis cell cell-status">'+_TR("STATUS")+'</td><td class="x-ellipsis cell cell-name">'+_TR("NAME")+'</td><td class="x-ellipsis cell cell-desc">'+_TR("DESCRIPTION")+'</td><td class="x-ellipsis cell cell-serial">'+
_TR("SERIAL")+'</td><td class="x-ellipsis cell cell-model">'+_TR("MODEL")+'</td><td class="x-ellipsis cell cell-mfr">'+_TR("UPS_MFR")+'</td><td class="x-ellipsis cell cell-address">'+_TR("ADDRESS")+"</td></tr>"+b+"</table>";Ext.get(this.gridNodeId).update(b);Ext.each(this.upsConfigItems,function(d){d.row=Ext.get(d.rowId);d.row.on("click",function(){this.selectUpsConfigItem(d)},this)},this);this.selectUpsConfigItem(this.upsConfigItems[0])}else{this.lNoUps.show();this.elUpsConfigs.setDisplayed(false)}},
selectUpsConfigItem:function(a){this.selectedItem&&this.selectedItem.row.removeClass("ui-fwgrid-rowsel");(this.selectedItem=a)&&a.row.addClass("ui-fwgrid-rowsel");this.bProp.setDisabled(!a);this.bRemove.setDisabled(!a)},_i1i:{_o1:function(a,b){if(b=="system-upsconfig-update"||b=="system-upsconfig-add"||b=="system-upsconfig-remove"||b=="system-upsconfig-commit"){this.updatesCount||this.showProgress();++this.updatesCount}return _5},_o2:function(a,b){if(b=="system-upsconfig-update")this.populateUpsConfigs();
else if(b=="system-upsconfig-add"||b=="system-upsconfig-remove"||b=="system-upsconfig-commit")_a(this,"IPanelItem").refresh();return _5},_o3:function(a,b,c){if(c=="system-upsconfig-update"||c=="system-upsconfig-add"||c=="system-upsconfig-remove"||c=="system-upsconfig-commit"){--this.updatesCount;this.updatesCount||this.hideProgress()}if(a!=_5){if(a=_a(b,"_io").getLastNMLError())var d=a.getErrorCode(),f=a.getErrorDetails();if(a&&d){f=_TR(d)+"<br />"+f;_a(_7(_._3.ErrorReporter),
"IErrorReporter").report(f,"Code: "+d,_2.ERROR,{title:"",subTitle:f,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}if(c=="system-upsconfig-add"||c=="system-upsconfig-remove"||c=="system-upsconfig-commit")_a(this,"IPanelItem").refresh()}return _5}},IPanelItem:{refresh:function(){this.spUpsConfigManager.UpdateUpsConfigs("system-upsconfig-update")}}});Ext.namespace("_s1");
_s1.PowerPanel=_._1(_._3.SystemSubSys.PowerPanel,_s0.BasePanel,IPanelItem,_i4,_i2h,{expanded:true,panelCls:"x-system-panel-power",help:"system_panel_power",constructor:function(a){this.title=_TR("POWER_TIMER");_s1.PowerPanel.superclass.constructor.call(this,a);this.sdays=["sun","mon","tue","wed","thu","fri","sat"]},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spPowerManager=
a.getSystemManager().getPowerManager();_a(this.spPowerManager,"_i1").Advise(this)}_s1.PowerPanel.superclass.initComponent.apply(this,arguments)},initActionsFromUI:function(){for(var a=document.getElementById(this.tableinfoid),b=[],c=[],d,f,e,g=1,h;g<8;++g){d=a.rows[g];h=1;for(l=d.cells.length;h<l;++h)if(this.switchStatus=="0")if(d.cells[h].className.match(this.panelCls+"-hour-on")){f||(f={start:{day:g-1,hour:h-1,min:0}});if(g==1&&h==1)e=f;else if(g==7&&h==l-1)if(e)e.start=
f.start;else b.push(Ext.apply(f,{end:{day:0,hour:0,min:0}}))}else{if(f){b.push(Ext.apply(f,{end:{day:g-1,hour:h-1,min:0}}));f=undefined}}else{var k=d.cells[h].className;if(k.match(this.panelCls+"-hour-poweron"))c.push({day:g-1,hour:h-1,min:0,type:"ON"});else k.match(this.panelCls+"-hour-shutdown")&&c.push({day:g-1,hour:h-1,min:0,type:"OFF"})}}return{actions:b,actionsEvent:c}},applyTimer:function(){var a=this.initActionsFromUI(),b=a.actions||[];a=a.actionsEvent||[];var c=[],d;if(this.switchStatus==
"0")for(var f=0,e=b.length;f<e;++f){action=b[f];c.push(d=_a(new _1.pwact,"_i2f"));d.putDayOfWeek(this.sdays[action.start.day]);d.putHour(action.start.hour);d.putMinute(action.start.min);d.putAction("ON");c.push(d=_a(new _1.pwact,"_i2f"));d.putDayOfWeek(this.sdays[action.end.day]);d.putHour(action.end.hour);d.putMinute(action.end.min);d.putAction("OFF")}else{f=0;for(e=a.length;f<e;++f){action=a[f];c.push(d=_a(new _1.pwact,"_i2f"));d.putDayOfWeek(this.sdays[action.day]);
d.putHour(action.hour);d.putMinute(action.min);d.putAction(action.type)}}this.spPowerManager.removeAllActions();this.spPowerManager.appendActions(c);this.spPowerManager.setSwitchType(this.switchStatus);this.spPowerManager.commitPowerSchedule("system-power-commit-shedule");this.powerTimerWindow.hide()},updateTimerImage:function(a,b){a.update("");_.each(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],function(g){a.el.createChild({cls:this.panelCls+"-dw"+(g=="Sun"||g=="Sat"?"1":"2"),html:_TR(g.toUpperCase())})},
this);for(var c,d,f=0,e=b.length;f<e;++f){c=b[f];if(this.switchStatus=="0"){d=63*c.start.day+63*c.start.hour/24;c=63*(c.end.day-c.start.day)+63*(c.end.hour-c.start.hour)/24;a.el.createChild({cls:this.panelCls+"-timer-pr",style:String.format("left: {0}px; width: {1}px",d,c)})}else if(c.action=="ON"){d=63*c.day+63*c.hour/24;a.el.createChild({cls:this.panelCls+"-timer-pr",style:String.format("background:green; left: {0}px; width: {1}px",d,1)})}else if(c.action=="OFF"){d=63*c.day+63*c.hour/24;a.el.createChild({cls:this.panelCls+
"-timer-pr",style:String.format("background:red; left: {0}px; width: {1}px",d,1)})}}},updateTimer:function(a,b){if(a=document.getElementById(a)){for(var c={},d={},f={},e,g,h,k=0,j=b.length;k<j;++k){e=b[k];if(this.switchStatus=="0"){g=e.start.day*24+e.start.hour;h=(e.end.day-e.start.day)*24+(e.end.hour-e.start.hour);for(e=0;e<h;++e)c[g+e]=true}else if(e.action=="ON")f[e.day+"_"+e.hour]=true;else if(e.action=="OFF")d[e.day+"_"+e.hour]=true}for(k=1;k<8;++k){b=a.rows[k];e=1;for(j=b.cells.length;e<j;++e){g=
b.cells[e];c[(k-1)*24+(e-1)]?Ext.fly(g).addClass(this.panelCls+"-hour-on"):Ext.fly(g).removeClass(this.panelCls+"-hour-on");d[k-1+"_"+(e-1)]&&Ext.fly(g).removeClass(this.panelCls+"-hour-on").addClass(this.panelCls+"-hour-shutdown");f[k-1+"_"+(e-1)]&&Ext.fly(g).removeClass(this.panelCls+"-hour-on").addClass(this.panelCls+"-hour-poweron")}}}},prepareActions:function(){var a=this.spPowerManager.getActions(),b,c=[],d,f=[];this.switchStatus=this.spPowerManager.getSwitchType();d=0;for(var e=a.length;d<
e;++d)if((b=_a(a[d],"_i2f"))&&b!=_4){b={day:this.sdays.indexOf(b.getDayOfWeek()),hour:parseInt(b.getHour()||0),min:parseInt(b.getMinute()||0),action:b.getAction()};c.push(b)}c.sort(function(g,h){var k=g.day-h.day;k||(k=g.hour-h.hour);k||(k=g.min-h.min);k||(k=(g.action=="ON"?0:1)-(h.action=="ON"?0:1));return k});if(this.switchStatus=="0"){(d=c[0])&&d.action=="OFF"&&c.unshift({day:0,hour:0,min:0,action:"ON"});(d=c[c.length-1])&&d.action=="ON"&&c.push({day:7,hour:0,min:0,action:"OFF"});
d=0;for(e=c.length;d<e;d+=2){a=c[d];b=c[d+1];a&&b&&f.push({start:a,end:b})}}else{d=0;for(e=c.length;d<e;++d)f.push(c[d])}return f},initLable:function(a){this.switchStatus=a;$_(Ext.select(".power-panel-24hours-tr").elements).forEach(function(b){b=b.children;for(var c=1,d=b.length;c<d;c++){var f=c-1,e=localStorage.getItem("enable24Hour")=="true",g="";e||(g=f>=12?" "+_TR("PM"):" "+_TR("AM"));if(!e&&f>12)f-=12;if(g==" "+_TR("AM")&&f==0)f=12;b[c].title=a=="0"?String.format("{0}:00{1} - {0}:59{1}",f,g):
String.format("{0}:00{1}",f,g);Ext.get(b[c]).update(f+"")}});if(a=="0"){Ext.get("switch-state").dom.style.display="";Ext.get("switch-event").dom.style.display="none"}else if(a=="1"){Ext.get("switch-state").dom.style.display="none";Ext.get("switch-event").dom.style.display=""}},initBySwitch:function(a){this.initLable(a)},switchValidation:function(){var a=this.initActionsFromUI(),b=a.actions||[],c=a.actionsEvent||[],d,f;a.validation=true;if(this.switchStatus=="0")for(var e=0,g=b.length;e<g;++e){d=b[e];
c=d.start;f=d.end;if(c.day==f.day&&c.hour>f.hour){a.validation=false;this.switchBtnOnOff.setValue(true);break}}else{b=[];f=[];g=c.length;for(e=0;e<g;e++){d=c[e];if(d.type=="ON")b.push(d);else d.type=="OFF"&&f.push(d)}d=b.length==f.length;var h,k,j=false;for(e=0;e<g&&d;e+=2){h=c[e];k=c[e+1];if(h.type==k.type){d=false;break}}if(d&&g>0){e=c[0];g=c[g-1];if(e.type=="OFF")if(e.day!=0||!(g.day==6&&g.type=="ON"))d=false;else j=true}if(j){e=1;for(g=b.length;e<g-1&&d;e++)if(b[e].day==f[e].day&&b[e].hour>f[e].hour){d=
false;break}}else{e=0;for(g=b.length;e<g&&d;e++)if(b[e].day==f[e].day&&b[e].hour>f[e].hour){d=false;break}}if(!d){a.validation=false;this.switchBtnOnOff.setValue(false)}}return a},switchActionStatus:function(a,b,c,d,f){var e=document.getElementById(this.tableinfoid),g=null;if(e!=null)for(a=a;a<b;a++)for(var h=c;h<d;h++){g=Ext.get(e.rows[a].cells[h]);g.dom.className="x-system-panel-power-hour-off x-system-panel-power-hour-day";if(h<=8||h>=22)g.dom.className="x-system-panel-power-hour-off";g.addClass(f)}},
clearTable:function(){var a=document.getElementById(this.tableinfoid),b=null;if(a!=null)for(var c=1;c<8;c++)for(var d=1;d<25;d++){b=Ext.get(a.rows[c].cells[d]);b.dom.className="x-system-panel-power-hour-off x-system-panel-power-hour-day";if(d<=8||d>=22)b.dom.className="x-system-panel-power-hour-off"}},switchEventActions:function(a,b,c,d){for(c=c;c<d;++c){poaction=a[c];sdaction=b[c];sRow=poaction.day+1;eRow=sdaction.day+2;sCol=poaction.hour+1;eCol=sdaction.hour+1;if(poaction.day==sdaction.day)this.switchActionStatus(sRow,
eRow,sCol,eCol,this.panelCls+"-hour-on");else{this.switchActionStatus(sRow,sRow+1,sCol,25,this.panelCls+"-hour-on");this.switchActionStatus(sdaction.day+1,sdaction.day+2,1,sdaction.hour+1,this.panelCls+"-hour-on");if(sdaction.day-poaction.day>1)for(var f=sRow+1;f<eRow-1;++f)this.switchActionStatus(f,f+1,1,25,this.panelCls+"-hour-on")}}},switchActions:function(a){this.clearTable();var b=a.actions||[],c=a.actionsEvent||[],d;if(b.length>0){var f=0;for(a=b.length;f<a;++f){action=b[f];d=action.start;c=
action.end;this.switchActionStatus(d.day+1,d.day+2,d.hour+1,d.hour+2,this.panelCls+"-hour-poweron");this.switchActionStatus(c.day+1,c.day+2,c.hour+1,c.hour+2,this.panelCls+"-hour-shutdown")}}else{b=[];d=[];a=c.length;for(f=0;f<a;f++){action=c[f];if(action.type=="ON")b.push(action);else action.type=="OFF"&&d.push(action)}a=b.length;if(a>0&&b[0].day==6&&d[a-1].day==0){f=b.splice(a-1,1);c=d.splice(0,1);this.switchEventActions(b,d,0,a-1);this.switchActionStatus(7,8,f[0].hour+1,25,this.panelCls+"-hour-on");
this.switchActionStatus(1,2,1,c[0].hour+1,this.panelCls+"-hour-on")}else this.switchEventActions(b,d,0,a)}},switchOn:function(){var a=this.switchValidation();if(a.validation){this.initBySwitch("0");this.switchActions(a)}else Ext.UI.MessageBox.show({title:_TR("WARNING"),msg:_TR("POWER_TIMER_SWITCH_EVENT_WARNING"),buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.WARNING,fn:function(b){if(b=="yes"){this.clearTable();this.initBySwitch("0")}else this.switchBtnOnOff.setValue(true)}.bind(this)})},switchOff:function(){var a=
this.switchValidation();if(a.validation){this.initBySwitch("1");this.switchActions(a)}else{Ext.UI.MessageBox.show({title:_TR("WARNING"),msg:_TR("POWER_TIMER_SWITCH_WARNING"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING});this.switchBtnOnOff.setValue(false)}},switchNightStatus:function(a,b,c,d,f,e){var g=document.getElementById(this.tableinfoid);if(g!=null){f=f||"x-system-panel-power-hour-off";c=c||1;d=d||8;var h=Ext.get(g.rows[c].cells[a]).dom.className.replace(f,"");if(typeof e!="undefined")h=
e;e=null;for(c=c;c<d;c++)for(var k=a;k<b;k++){e=Ext.get(g.rows[c].cells[k]);e.dom.className=f;if(this.switchStatus=="0")h||e.addClass(this.panelCls+"-hour-on");else if(h)~h.indexOf("poweron")&&e.addClass(this.panelCls+"-hour-shutdown");else e.addClass(this.panelCls+"-hour-poweron")}}},onReady:function(){var a=this.panelCls+"-cell",b=this.panelCls+"-col";this.el.addClass("x-system-panel-power");var c=new Ext.UI.RoundButton({cls:"x-frontview-btn-settings"});c.on("click",function(){if(!this.powerTimerWindow){this.tableinfoid=
Ext.id();this.powerinfoid=Ext.id();this.powerinfoeventid=Ext.id();this.nightid1=Ext.id();this.dayid=Ext.id();this.nightid2=Ext.id();var d=[_TR("SU"),_TR("MO"),_TR("TU"),_TR("WE"),_TR("TH"),_TR("FR"),_TR("SA")],f=["SU","MO","TU","WE","TH","FR","SA"];this.days=[_TR("SUNDAY"),_TR("MONDAY"),_TR("TUESDAY"),_TR("WEDNESDAY"),_TR("THURSDAY"),_TR("FRIDAY"),_TR("SATURDAY")];var e="";e+='<table id="'+this.tableinfoid+'" cellpadding=0 cellspacing=1 border=0 >';e+=String.format('<tr><td id="{2}" class="{5}-{0}"  title="'+
_TR("POWERTIMER_TIP_NIGHT1")+'" colspan="3"></td><td colspan=5></td><td id="{3}" class="{5}-{1}"   title="'+_TR("POWERTIMER_TIP_DAY")+'" colspan="3"></td><td colspan=10></td><td id="{4}" class="{5}-{0}"  title="'+_TR("POWERTIMER_TIP_NIGHT2")+'" colspan=3></td><td></td><td/></tr>',"night","day",this.nightid1,this.dayid,this.nightid2,this.panelCls);for(var g=0;g<7;g++){var h=_TR("POWERTIMER_TIP_"+f[g]);e+=String.format('<tr><td class="{2}-timeday" title="{1}">{0}</td>',d[g],h,this.panelCls);for(h=0;h<
8;h++)e+='<td class="'+this.panelCls+'-hour-off" ></td>';for(;h<21;h++)e+='<td class="'+this.panelCls+"-hour-off "+this.panelCls+'-hour-day" ></td>';for(;h<24;h++)e+='<td class="'+this.panelCls+'-hour-off" ></td>';e+="</tr>"}e+='<tr class="power-panel-24hours-tr"><td class="'+this.panelCls+'-timeday"></td>';for(h=0;h<24;h++)e+=String.format('<td class="{1}-hours" title="{0}:00 - {0}:59">{0}</td>',h,this.panelCls);e+="</tr>";e+='<tr><td colspan="25"><div style="height: 10px;">&nbsp;</div><td></tr>';
e+='<tr id="switch-state"><td></td>';e+=String.format('<td id="{0}"  class="{1}rinfo" colspan="13" ></td>',this.powerinfoid,this.panelCls);e+=String.format('<td colspan="12"><div style="display: inline-block;" ><div class="{3}-houron"></div><div class="{3}-status">{0}</div></div><div style="display: inline-block;" ><div class="{3}-houroffday"></div><div class="{3}-status">{1}</div></div><div style="display: inline-block;" ><div class="{3}-houroffnight"></div><div class="{3}-status">{2}</div></div></td>',
_TR("ON_LC"),_TR("DAY_OFF"),_TR("NIGHT_OFF"),this.panelCls);e+="</tr>";e+='<tr id="switch-event"><td></td>';e+=String.format('<td id="{0}"  class="{1}rinfo" colspan="10" ></td>',this.powerinfoeventid,this.panelCls);e+=String.format('<td colspan="15"><div style="display: inline-block;" ><div class="{3}-hourpoweron"></div><div class="{3}-status">{0}</div></div><div style="display: inline-block;" ><div class="{3}-hourshutdown"></div><div class="{3}-status">{1}</div></div><div style="display: inline-block;" ><div class="{3}-houroffnight"></div><div class="{3}-status">{2}</div></div></td>',
_TR("POWER_TIMER_POWERON"),_TR("POWER_TIMER_SHUTDOWN"),_TR("POWER_TIMER_DAYNIGHT"),this.panelCls);e+="</tr>";e+="</table>";d=new Ext.Component({html:e,cls:this.panelCls+"-body"});d.on({afterrender:function(){this.updateTimer(this.tableinfoid,this._actions);Ext.get(this.tableinfoid).on("mouseover",function(j,m){j=this.days[m.parentNode.rowIndex-1];var n=m.cellIndex-1,p=localStorage.getItem("enable24Hour")=="true",o="";p||(o=n>=12?" "+_TR("PM"):" "+_TR("AM"));if(!p&&n>12)n-=12;if(o==" "+_TR("AM")&&
n==0)n=12;if(this.switchStatus=="0"){if(this.drag)this.drag=="add"?Ext.get(m).addClass(this.panelCls+"-hour-on"):Ext.get(m).removeClass(this.panelCls+"-hour-on");Ext.get(this.powerinfoid).update(String.format("{0}, {1}:00{2} - {1}:59{2}",j,n,o))}else Ext.get(this.powerinfoeventid).update(String.format("{0}, {1}:00{2}",j,n,o))},this,{delegate:"."+this.panelCls+"-hour-off"});Ext.get(this.tableinfoid).on("mousedown",function(j,m){this.drag=Ext.get(m).is("."+this.panelCls+"-hour-on")?"remove":"add";if(this.switchStatus==
"0")Ext.get(m).is("."+this.panelCls+"-hour-on")?Ext.get(m).removeClass(this.panelCls+"-hour-on").removeClass(this.panelCls+"-hour-shutdown").removeClass(this.panelCls+"-hour-poweron"):Ext.get(m).addClass(this.panelCls+"-hour-on");else if(Ext.get(m).is("."+this.panelCls+"-hour-poweron"))Ext.get(m).removeClass(this.panelCls+"-hour-poweron").addClass(this.panelCls+"-hour-shutdown");else Ext.get(m).is("."+this.panelCls+"-hour-shutdown")?Ext.get(m).removeClass(this.panelCls+"-hour-on").removeClass(this.panelCls+
"-hour-shutdown").removeClass(this.panelCls+"-hour-poweron"):Ext.get(m).addClass(this.panelCls+"-hour-poweron")},this,{delegate:"."+this.panelCls+"-hour-off"});Ext.get(this.tableinfoid).on("mouseup",function(){this.drag=null},this);Ext.get(this.tableinfoid).on("mouseleave",function(){this.drag=null;Ext.get(this.powerinfoid).update("");Ext.get(this.powerinfoeventid).update("")},this);Ext.get(this.tableinfoid).on("click",function(j,m){j=document.getElementById(this.tableinfoid);m=this.days.indexOf(m.title)+
1;j=Ext.get(j.rows[m].cells[1]).dom.className.replace("x-system-panel-power-hour-off","");this.switchNightStatus(1,9,m,m+1,"",j);this.switchNightStatus(9,22,m,m+1,"x-system-panel-power-hour-off x-system-panel-power-hour-day",j);this.switchNightStatus(22,25,m,m+1,"",j)},this,{delegate:"."+this.panelCls+"-timeday"});Ext.get(this.tableinfoid).on("click",function(j,m){j=m.cellIndex;this.switchNightStatus(j,j+1,"","",j<=8||j>=22?"":"x-system-panel-power-hour-off x-system-panel-power-hour-day")},this,{delegate:"."+
this.panelCls+"-hours"});Ext.get(this.nightid1).on("click",function(){this.switchNightStatus(1,9)},this);Ext.get(this.dayid).on("click",function(){this.switchNightStatus(9,22,"","","x-system-panel-power-hour-off x-system-panel-power-hour-day")},this);Ext.get(this.nightid2).on("click",function(){this.switchNightStatus(22,25)},this);var k=this.powerTimerWindow.header;k.dom.style.height="34px";k.parent().dom.style.height="60px";k=this.switchStatus;this.switchBtnOnOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",
textOn:"State",textOff:"Event",ison:k=="0",renderTo:this.btnTypeId,listeners:{click:this.onOnOffClick,scope:this}});if(k=="0")Ext.get(this.switchBtnOnOff.tblBtnId).dom.style.paddingTop="2px"},scope:this});f='   <div>                                        <div style="float:left;">'+_TR("POWER_TIMER")+'</div>                                        <div style="float:right;">                                            <div id="'+(this.btnTypeId=Ext.id())+'" style="height: 40px; cursor: pointer;"></div>                                        </div>                                    </div>                                    <div style="clear:both"></div>';
this.powerTimerWindow=new Ext.UI.Window({title:f,modal:true,width:560,resizable:false,bodyCssClass:"x-powerpanel-timer",headerCls:"powerpanel-header",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,help:"system_wnd_power_timer",fbar:[{xtype:"uibutton",text:_TR("APPLY"),handler:this.applyTimer,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.powerTimerWindow.hide()},scope:this,cancelbtn:true}],
items:[d]})}this.updateTimer(this.tableinfoid,this._actions);this.powerTimerWindow.show();this.initLable(this.switchStatus)},this);this.contentControl=new Ext.Container({style:"padding-top: 3px;",items:this.getExtTable(b,this.getExtRow("",this.getExtCell("",[this.getExtTable(a,this.getExtRow("",[this.getExtCell("",this.enableShedule=new Ext.UI.Checkbox({cls:a,width:200,checked:false,boxLabel:_TR("ENABLE_POWER_TIMER"),handler:function(d,f){this.spPowerManager.EnablePowerSchedule(f?"true":"false");
this.spPowerManager.commitPowerSchedule("commitEnablePowerSchedule")},scope:this}))])),this.getExtTable(a,this.getExtRow("",[this.getExtCell("",this.timershedule=new Ext.Container({cls:"x-system-panel-power-temp-timer"})),this.getExtCell(this.panelCls+"-props",c)]))])))})},onOnOffClick:function(a){Ext.get(a.tblBtnId).dom.style.paddingTop="0px";a.isOff()?this.switchOff():this.switchOn();return false},getExtCell:function(a,b){return Ext.isString(b)?new Ext.BoxComponent({autoEl:"td",cls:a,html:b}):new Ext.Container({autoEl:"td",
cls:a,items:b})},getExtRow:function(a,b){return new Ext.Container({autoEl:"tr",cls:a,items:b})},getExtTable:function(a,b){return new Ext.Container({autoEl:{tag:"table",cellpadding:0,cellspacing:0},cls:a,items:new Ext.Container({autoEl:"tbody",items:b})})},IPanelItem:{refresh:function(){this.spPowerManager.updatePowerSchedule("system-power-update-shedule")}},_i2h:{_o1:function(a,b){if(b!="system-power-update-shedule"&&b!="system-power-commit-shedule"&&b!="commitEnablePowerSchedule")return _5;
this.showProgress();return _5},OnNTFailed:function(a,b){_a(b,"_i2g");_2("Failed to uptain power information from device.");return _5},_o2:function(a,b){if(b!="system-power-update-shedule"&&b!="system-power-commit-shedule"&&b!="commitEnablePowerSchedule")return _5;this.contentControl.render(this.content);spPowerManager=_a(a,"_i2g");switch(b){case "system-power-update-shedule":this.updateTimerImage(this.timershedule,this._actions=this.prepareActions());
this.enableShedule.setValue(spPowerManager.getEnablePowerSchedule()=="true",true);break;case "system-power-commit-shedule":this.updateTimerImage(this.timershedule,this._actions=this.prepareActions());break;case "commitEnablePowerSchedule":this.spPowerManager.updatePowerSchedule("system-power-update-shedule");break}return _5},_o3:function(a,b,c){if(c!="system-power-update-shedule"&&c!="system-power-commit-shedule"&&c!="commitEnablePowerSchedule")return _5;this.hideProgress();return _5}}});
Ext.namespace("_s1");
_s1.UpdatePanel=_._1(_._3.SystemSubSys.UpdatePanel,_s0.BasePanel,IPanelItem,_i4,IPromptWindowEvents,_i45,_is,_i3w,{expanded:true,panelCls:"x-system-panel-update",help:"system_panel_update",constructor:function(a){this.title=_TR("UPDATE");_s1.UpdatePanel.superclass.constructor.call(this,a)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){_a(a,"_i1").Advise(this);
this.spSYSManager=a.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this);this.spFWManager=a.getFirmwareManager();_a(this.spFWManager,"_i1").Advise(this);this.spAlertsManager=this.spSYSManager.getAlertsManager();_a(this.spAlertsManager,"_i1").Advise(this)}this.vtracker=_a(_7(_._3.Controls.VersionTracker),"IVersionTracker");this.prompt=_a(_7(_._3.Controls.PromptWindow),"IPromptWindow");this.updprompt=
_a(_7(_._3.Controls.FirmwareWindow),"IPromptWindow");_s1.UpdatePanel.superclass.initComponent.apply(this,arguments)},onreleaseurlclicked:function(a){!Ext.isEmpty(a)&&a!="N/A"&&window.open(a)},onReady:function(){this.el.addClass(this.panelCls);this.renderContent()},renderContent:function(){var a=this.panelCls+"-col",b=this.panelCls+"-cell";a='<table class="'+a+'"><tr><td class="'+b+'"><div class="x-system-panel-update-title">'+_TR("CHECK_FOR_UPDATES")+'</div></td></tr><tr><td class="'+
b+'"><div style="width:350px" class="x-system-panel-name">'+_TR("SYSTEM_SETTINGS_UPDATE_UPDATECHANNEL_DESCRIPTION")+'</div></td></tr><tr><td class="'+b+'" id="'+(cbUpdateChannelId=Ext.id())+'"></td></tr><tr><td class="'+b+'"><div style="width:330px; margin-top:20px;" class="x-system-panel-name">'+_TR("CSYSTEM_UPDATE_CHECK_UPDATES")+'</div></td></tr><tr><td class="'+b+'" id="'+(bCheckForUpdateId=Ext.id())+'"></td></tr></table><table class="'+a+'"><tr><td class="'+b+'"><div class="x-system-panel-update-title">'+
_TR("SYSTEM_SETTINGS_UPDATE_MAINTENANCE_AND_UPDATES_TITLE")+'</div></td></tr><tr><td class="'+b+'" id="'+(ckNotiId=Ext.id())+'"></td></tr><tr><td><table><tr><td class="'+b+'" id="'+(ckAutoId=Ext.id())+'"></td><td style="padding-bottom:10px;" id="'+(ttAutoId=Ext.id())+'"></td></tr></table></td></tr><tr><td><table><tr><td class="'+b+'" id="'+(ckAutoFUId=Ext.id())+'"></td><td style="padding-bottom:10px;" id="'+(ttAutoFUId=Ext.id())+'"></td></tr></table></td></tr><tr><td id="'+(wSchedule=Ext.id())+'"></td></tr></table><table class="'+
a+'"><tr><td class="'+b+'"><div class="x-system-panel-update-title">'+_TR("INSTALL_FIRMWARE_MANUAL")+'</div></td></tr><tr><td class="'+b+'"><div style="width:360px" class="x-system-panel-name">'+_TR("CSYSTEM_UPDATE_FIRMWARE")+'</div></td></tr><tr><td class="'+b+'" id="'+(bUpdateId=Ext.id())+'"></td></tr></table><table class="'+a+'"><tr><td class="'+b+'"><div class="x-system-panel-update-title">'+_TR("RESET_FACTORY_DEFAULT")+'</div></td></tr><tr><td class="'+b+'"><div style="width:360px" class="x-system-panel-name">'+
_TR("RESET_FACTORY_DEFAULT_CLICK")+'</div></td></tr><tr><td class="'+b+'" id="'+(bPerformId=Ext.id())+'"></td></tr></table><div class="x-clear"></div>';this.bCheckForUpdate=new Ext.UI.Button({width:150,text:_TR("CHECK_FOR_UPDATES"),listeners:{click:this.onCheckForUpdateClick,scope:this},cls:this.panelCls+"-btncheck",expandToText:true,acceptbtn:true});b=new Ext.UI.Button({width:170,text:_TR("INSTALL_FIRMWARE"),listeners:{click:this.onUpdateClick,scope:this},cls:this.panelCls+"-btnfirmware",expandToText:true});
var c=new Ext.UI.Button({width:170,text:_TR("PERFORM_FACTORY_DEFAULT"),listeners:{click:this.onPerformClick,scope:this},cls:this.panelCls+"-btnperform",expandToText:true});this.cbUpdateChannel=new Ext.UI.ComboBox({width:170,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",listeners:{beforeselect:function(f,e,g){this.onBeforeChannelSelect(f,e,g)},select:function(f,e,g){this.onUpdateChannelChange(f,e,g)},scope:this}});var d=[];
d.push(["lts",_TR("UPDATE_CHANNEL_LONGTERM")]);d.push(["",_TR("UPDATE_CHANNEL_STABLE")]);d.push(["beta",_TR("UPDATE_CHANNEL_BETA")]);this.cbUpdateChannel.getStore().loadData(d);this.content.update(a);if(_.isIE){Ext.toArray(this.content.query(".x-system-panel-update-title")).forEach(function(f){Ext.get(f).setStyle("font-family","Arial")});Ext.toArray(this.content.query("b")).forEach(function(f){Ext.get(f).setStyle("font-family","Arial")})}b.render(bUpdateId);this.bCheckForUpdate.render(bCheckForUpdateId);
c.render(bPerformId);this.cbUpdateChannel.render(cbUpdateChannelId);this.spFWManager&&this.spFWManager.getUpdateChannelNML("system-getUpdateChannel");this.ckNotifications=new Ext.UI.Checkbox({boxLabel:_TR("SYSTEM_SETTINGS_UPDATE_NOTIFICATIONS_FOR_UPDATES"),renderTo:ckNotiId,listeners:{check:this.onNotificationsChange,scope:this}});this.ckAutomatic=new Ext.UI.Checkbox({boxLabel:_TR("SYSTEM_SETTINGS_UPDATE_AUTOMATIC_HOTFIX_UPDATE"),renderTo:ckAutoId,listeners:{check:this.onAutomaticChange,scope:this}});
new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:ttAutoId,listeners:{afterrender:function(f){new Ext.UI.ToolTip(f.el,{html:_TR("SYSTEM_SETTINGS_UPDATE_AUTOMATIC_HOTFIX_TOOLTIP")})},scope:this}});this.ckAutoFU=new Ext.UI.Checkbox({boxLabel:_TR("SYSTEM_SETTINGS_UPDATE_AUTOMATIC_FIRMWARE_UPDATE"),renderTo:ckAutoFUId,listeners:{check:this.onAutoFUChange,scope:this}});new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:ttAutoFUId,listeners:{afterrender:function(f){new Ext.UI.ToolTip(f.el,
{html:_TR("SYSTEM_SETTINGS_UPDATE_AUTOMATIC_FIRMWARE_UPDATE_TOOLTIP")})},scope:this}});this.cron=new Ext.CronSchedule({width:"auto",height:"auto",cls:"x-cronschedule-up",renderTo:wSchedule,listeners:{change:this.debounce(this.onCronScheduleChange,5E3),scope:this}});this.cron.initialUPMode()},debounce:function(a,b){var c;return function(){var d=this,f=arguments;clearTimeout(c);c=setTimeout(function(){a.apply(d,f)},b)}},onNotificationsChange:function(){if(this.initialVal)delete this.initialVal;else{_a(this.spAlertsManager.getSettings(),
"_ic").putFirmwareUpdate(this.ckNotifications.getValue()?"true":"false");this.spAlertsManager.commitSettings("system-alerts-commit-settings")}},onAutomaticChange:function(){this.spSYSManager.commitHotfixUpdate("system-commit-hotfixupdate",this.ckAutomatic.getValue()?"true":"false")},loadAutoFUData:function(a){if(a&&a.Enabled){this.ckAutoFU.setValue(true,true);this.cron.loadArgs({min:+a.Minute+"",hour:+a.Hour+"",dom:"*",month:"*",dow:a.DayOfWeek})}else{this.cron.ctWeekly.loadArgs({});
this.cron.ctStarting.loadArgs({})}},setAutoFU:function(a){var b=this.cron.ctWeekly.enDays.join(",")||"6",c=this.cron.ctStarting.getStrings(),d=c.min,f=c.hour;if(localStorage.getItem("enable24Hour")!="true")if(f==12){if(c.ampm==0)f=0}else if(c.ampm==1)f=+f+12;this.spSYSManager.commitAutoFWUpdate("system-set-autofm-update-setting",a?"1":"0",d+"",f+"",b)},onCronScheduleChange:function(){this.ckAutoFU.getValue()&&this.setAutoFU(true)},onAutoFUChange:function(a,b){if(b){a=this.spSYSManager.getAutoFWUpdate();
this.cron.loadArgs({min:+a.Minute+"",hour:+a.Hour+"",dom:"*",month:"*",dow:a.DayOfWeek})}this.setAutoFU(b)},onBeforeChannelSelect:function(a,b){this.updateChannelChange=a.getValue()!=b.data.id;this.uCLastSelText=a.lastSelectionText},onUpdateChannelChange:function(a,b){if(this.updateChannelChange){var c=this.uCLastSelText;switch(b.data.id){case "lts":case "":this.spFWManager.setUpdateChannel("system-setUpdateChannel",b.data.id);break;case "beta":var d=this.spFWManager,f=b.data.id;Ext.UI.MessageBox.show({title:"Beta Channel",
msg:_TR("SYSTEM_SETTINGS_UPDATE_UPDATECHANNEL_BETA_INFO"),buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.INFO,height:170,fn:function(e){if(e=="yes")d.setUpdateChannel("system-setUpdateChannel",f);else{e=a.store.data.items.length;for(var g=null,h=0;h<e;++h){g=a.store.data.items[h];if(g.data.text==c){a.setValue(g.data.id);break}}}}});break}}},onCheckForUpdateClick:function(){this.spFWManager&&this.spFWManager.checkForUpdate("system-update-checkForUpdate")},silentCheckForUpdate:function(){this.spFWManager&&
this.spFWManager.updateFirmwareDownloadProgress("system-update-refreshFWDownload-silent")},onUpdateClick:function(){_a(this.updprompt,"_i1").Advise(this);this.updprompt.Show(_s10.FirmwareWindow.ADDON,{upurl:document.fwupdateurl,caption:_TR("UPDATE_FIRMWARE"),iscustom:true,fieldname:_TR("FILE_NAME")+_TR("COLON"),okbtn:_TR("UPLOAD"),validatefunc:"validateuploading",delegatename:"delegateuploading"})},onPerformClick:function(){if(!this.performDlg){var a=this.panelCls+"-perform";
this.performDlg=new Ext.UI.Window({title:_TR("PERFORM_FACTORY_DEFAULT"),resizable:false,minimizable:false,maximizable:false,modal:true,buttonAlign:"right",width:400,footer:true,help:"system_wnd_factory",fbar:new Ext.Toolbar({items:[{xtype:"uibutton",text:_TR("OK"),width:100,listeners:{click:this.performFactory,scope:this},acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),width:100,listeners:{click:function(){this.performDlg.hide()},scope:this},cancelbtn:true}],enableOverflow:false}),html:'<div class="x-controls-prompt-icon-MESSAGE '+
a+'"><div class="'+a+'-text">'+_TR("PERFORM_FACTORY_DEFAULT_LN1")+"<br/>"+_TR("PERFORM_FACTORY_DEFAULT_LN2")+' "FACTORY"</div><div id="'+(this.performFieldId=Ext.id())+'" class="'+a+'-field"></div></div>'});this.performDlg.on("show",function(){this.performField.setValue("");this.performField.focus(false,true)},this);this.performField=new Ext.UI.TextField({width:253});this.performDlg.on("afterrender",function(){this.performField.render(document.getElementById(this.performFieldId))},this)}this.performDlg.show()},
showIndicator:function(){if(Ext.isEmpty(this.progressglb))this.progressglb=new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LSPECIAL,msgCls:"ui-mask-style1"});this.progressglb.show()},hideIndicator:function(){Ext.isEmpty(this.progressglb)||this.progressglb.hide()},showTabIndicator:function(a){a?this.parentTabItem.mask.show():this.parentTabItem.mask.hide()},performFactory:function(){if(this.performField.getValue()=="FACTORY"){localStorage.removeItem("safeMode");this.performDlg.hide();this.spSYSManager.PerfomFactoryDefault("system-update-performFactoryDefault")}},
validateuploading:function(a){if(a.getArgs().fsize>1E9){a.setResult(false);Ext.UI.MessageBox.show({title:_TR("ERROR"),msg:_TR("FIRMWARE_FILE_SIZE_TOO_BIG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300})}else a.setResult(true)},delegateuploading:function(){this.spFWManager.updateFirmwareDownloadProgress("system-update-refreshFWDownload")},updateSystem:function(){this.spFWManager&&this.spFWManager!=_4&&this.spFWManager.PerfomeLastFirmwareUpdate("system-update-perfomefirmwareupdate")},
updatefwdownload:function(){this.fwupdate||this.spFWManager.updateFirmwareDownloadProgress("system-update-updateFWDownload")},checkForUpdate:function(){},updatePackagesState:function(){this.fwupdate||!this.spFWManager||this.spFWManager.checkPackageUpdate("system-service-autocheckPackageUpdate")},_is:{_o1:function(a,b){b&&b.cmd&&this.rendered&&b.cmd=="local_update"&&this.parentTabItem.mask.show();return _5},_o2:function(a,b){if(b&&b.cmd)switch(b.cmd){case "local_update":this.hideIndicator();
_a(_7(_._3.System.Frame),"ISystemFrame").Reboot(_TR("UPDATE_FIRMWARE"),_TR("FIRMWARE_UPL_QUEST"),b.version);break}return _5},_o3:function(a,b,c){if(c&&c.cmd)switch(c.cmd){case "local_update":this.hideIndicator();if(a!=_5){_a(this.prompt,"_i1").Advise(this);this.prompt.Show(_s10.PromptWindow.ERROR,{caption:_TR("UPDATE_FIRMWARE"),message:_TR("SYS_FIRMWARE_FAIL")})}break}return _5}},_ib:{_o1:function(a,b){b=="system-get-hotfix-notification"&&
this.parentTabItem.mask.show();return _5},_o2:function(a,b){switch(b){case "system-get-hotfix-notification":this.ckNotifications.setValue(_a(this.spAlertsManager.getSettings(),"_ic").getFirmwareUpdate());delete this.initialVal;break}return _5},_o3:function(a,b,c){c=="system-get-hotfix-notification"&&this.parentTabItem.mask.hide();return _5}},_i45:{_o1:function(a,b){["system-update-performFactoryDefault","system-get-hotfix-setting","system-commit-hotfixupdate",
"system-set-autofm-update-setting"].indexOf(b)!=-1&&this.parentTabItem.mask.show();return _5},_o2:function(a,b){switch(b){case "system-update-performFactoryDefault":_a(_7(_._3.ConnectRepair.ConnectRepairWindow),"IExtNative").getNative().setFactoryMode(true);_a(_7(_._3.ConnectRepair.ConnectRepairWindow),"IConnectRepair").displayDeviceReboot();break;case "system-get-hotfix-setting":this.ckAutomatic.setValue(this.spSYSManager.getHotfixUpdate()==
"true",true);break;case "system-get-autofm-update-setting":this.loadAutoFUData(this.spSYSManager.getAutoFWUpdate());break;case "system-set-autofm-update-setting":this.spSYSManager.updateAutoFWUpdate("system-get-autofm-update-setting");break}return _5},_o3:function(a,b,c){if(c=="system-update-performFactoryDefault"||c=="system-get-hotfix-setting"||c=="system-commit-hotfixupdate"||c=="system-set-autofm-update-setting")this.parentTabItem.mask.hide();c==="system-update-performFactoryDefault"&&a!=
_5&&Ext.UI.MessageBox.error({msg:String.format('<div class="x-frontview-prompt-message">{0}</div>',_TR("SYSTEM_UPDATE_DEFAULT_FAIL"))});return _5}},_i3w:{_o1:function(a,b){if(this.rendered){switch(b){case "system-getUpdateChannel":case "system-setUpdateChannel":case "system-update-checkForUpdate":this.parentTabItem.mask.show();break;case "system-update-refreshFWDownload":this.fwupdate=true;case "system-update-cancelFWDownload":case "system-update-perfomefirmwareupdate":this.showProgress();
break;case "system-service-refreshPackageUpdate":case "system-service-checkPackageUpdate":case "system-service-updatePackages":this.showProgress();this.bCheckForUpdate.setDisabled(true);break}return _5}},_o2:function(a,b){if(!b||this.fwupdate&&b=="system-update-updateFWDownload")return _5;switch(b.toString()){case "system-update-refreshFWDownload":case "system-update-refreshFWDownload-silent":var c=_a(a,"_i3v");c=c.getDownloadState();switch(c){case "idle":b.toString()=="system-update-refreshFWDownload-silent"&&
this.spFWManager.checkForUpdate("system-update-checkForUpdate-silent");break;case "ready":case "pending":case "checking":this.progressWnd||(this.progressWnd=new _s1.DownloadProgressWindow);this.progressWnd.show();break}break;case "system-update-checkForUpdate":case "system-update-checkForUpdate-silent":var d,f,e;if(a=_a(this.spSYSManager.getSysInfo(),"_i43")){d=a.getFirmwareVersion();f=a.getFirmwareTime();f=f!=_4?+f:undefined}var g=_a(this.spFWManager.getFirmwareInfo(),
"_i42");if(g){c=g.getVersion();e=g.getTime();e=e!=_4?+e:undefined;a=g.getDescription();if(a.toLowerCase().indexOf("rc")!=-1)c=c+" ("+a+")"}if(d&&d!=_4&&c&&c!=_4)if(this.vtracker.CompareVersion(d,c,f,e)){b=_TR("DATE_FULL_FORMAT");if(b=="DATE_FULL_FORMAT")b="M d, Y";b='<table style="width:100%; margin-top:10px; " border=0 cellpadding=0 cellspacing=0 ><tr style="height: 20px; "><td style="width:40%; " valign=top><div class="x-inspector-filepreview-details-header-bg x-nowrapword">'+
_TR("CURRENT_VERSION")+_TR("COLON")+'&nbsp;</div></td><td style="width:60%; " valign=top><div class="x-inspector-filepreview-details-content-bg x-wrapword">'+d+'</div></td></tr><tr style="height: 20px; "><td style="width:40%; " valign=top><div class="x-inspector-filepreview-details-header-bg x-nowrapword">'+_TR("NEW_VERSION")+_TR("COLON")+'&nbsp;</div></td><td style="width:60%; " valign=top><div class="x-inspector-filepreview-details-content-bg x-wrapword">'+c+'</div></td></tr><tr style="height: 20px; "><td style="width:40%; " valign=top><div class="x-inspector-filepreview-details-header-bg x-nowrapword">'+
_TR("IMAGE_SIZE")+_TR("COLON")+'&nbsp;</div></td><td style="width:60%; " valign=top><div class="x-inspector-filepreview-details-content-bg x-wrapword">'+_s10.Utils.fileSize(g.getSize())+'</div></td></tr><tr style="height: 20px; "><td style="width:40%; " valign=top><div class="x-inspector-filepreview-details-header-bg x-nowrapword">'+_TR("RELEASE_NOTES")+_TR("COLON")+'&nbsp;</div></td><td id="'+(this.releaseUrlId=Ext.id())+'" style="width:60%; " valign=top><a class="x-wrapword" href="'+g.getUpdateURL()+
'">'+g.getDescription()+"</a></td></tr></table>";_a(this.prompt,"_i1").Advise(this);this.prompt.Show(_s10.PromptWindow.SYSUPDATE,{caption:_TR("FRONTVIEW_FIRMWARE_NOTIFICATION"),message:b,delegatename:"updateSystem",delegateparam:{url:g.getUpdateURL(),version:c,size:g.getSize()}});Ext.get(this.releaseUrlId).on("click",function(h){h.stopEvent();this.onreleaseurlclicked(g.getUpdateURL())},this)}else b.toString()!="system-update-checkForUpdate-silent"&&Ext.UI.MessageBox.info({title:_TR("UPD_SYS_MAN"),
msg:_TR("FIRMWARE_LATEST")});break;case "system-service-refreshPackageUpdate":c=_a(a,"_i3v");c=c.getPackageUpdates();if(c!=_4&&c.length!=0){b=null;for(d=0;d<c.length;++d){f=_a(c[d],"_i3x");if(f.getStatus()!=_4&&f.getStatus()!=""){b=true;break}}b?this.updatePackagesState.defer(this.interval,this):this.bCheckForUpdate.setDisabled(false)}break;case "system-service-autocheckPackageUpdate":c=_a(a,"_i3v");c=c.getPackageUpdates();if(c!=_4&&c.length==0){this.bCheckForUpdate.setDisabled(false);
_a(_7(_._3.Controls.PowerMenuItems),"IExtNative").getNative().onPowerItemClick({value:"restart",caption:_TR("REBOOT_SYSTEM")})}else this.updatePackagesState.defer(this.interval,this);break;case "system-service-checkPackageUpdate":c=_a(a,"_i3v");c=c.getPackageUpdates();if(c!=_4)if(c.length==0)Ext.UI.MessageBox.info({title:_TR("SERVICES"),msg:_TR("SERVICE_UPTODATE")});else{e="";b=null;for(d=0;d<c.length;++d){f=_a(c[d],"_i3x");e+=(e?", ":"")+f.getName();
if(f.getStatus()!=_4&&f.getStatus()!=""){b=true;break}}b?this.updatePackagesState.defer(this.interval,this):Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),msg:String.format(_TR("SERVICES_ASKFORUPDATE"),e),fn:function(h){if(h=="yes")!this.spFWManager||this.spFWManager.updatePackages("system-service-updatePackages")},scope:this})}return _5;case "system-service-updatePackages":this.updatePackagesState.defer(this.interval,this);break}return _5},_o3:function(a,b,c){switch(c){case "system-setUpdateChannel":this.rendered&&
this.parentTabItem.mask.hide();break;case "system-getUpdateChannel":this.rendered&&this.parentTabItem.mask.hide();this.cbUpdateChannel.setValue(this.spFWManager.getUpdateChannel());break;case "system-update-checkForUpdate":this.rendered&&this.parentTabItem.mask.hide();if(a!=_5){var d=_a(b,"_io").getLastNMLError();d&&Ext.UI.MessageBox.show({title:_TR("CHECK_FOR_UPDATES"),msg:String.format("{0} {1}",_TR(d.getErrorCode()),_TR("INTERNET_UNAVAILABLE_TIP")),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,
height:170})}break;case "system-update-checkForUpdate-silent":break;case "system-update-refreshFWDownload":case "system-update-cancelFWDownload":case "system-update-perfomefirmwareupdate":if(c=="system-update-refreshFWDownload")this.fwupdate=false;this.rendered&&this.hideProgress();break;case "system-service-refreshPackageUpdate":case "system-service-checkPackageUpdate":this.rendered&&this.hideProgress();this.bCheckForUpdate.setDisabled(false);break;case "system-service-updatePackages":this.rendered&&
this.hideProgress();break}switch(c){case "system-service-checkPackageUpdate":case "system-service-refreshPackageUpdate":case "system-service-updatePackages":a!=_5&&a!=E_PENDING&&_a(b,"_io").getLastNMLError();return _5}switch(c){case "system-update-checkForUpdate":case "system-update-refreshFWDownload":case "system-update-cancelFWDownload":case "system-update-perfomefirmwareupdate":if(a==_5&&c=="system-update-perfomefirmwareupdate"){this.spFWManager.updateFirmwareDownloadProgress("system-update-refreshFWDownloadfake");
this.spFWManager.updateFirmwareDownloadProgress("system-update-refreshFWDownload")}break}return _5}},IPromptWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);a.options&&a.options.delegatename&&a.options.delegatename=="checkForUpdate"&&this.checkForUpdate();return _5},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}},IPanelItem:{refresh:function(){this.fwupdate||
this.spFWManager.updateFirmwareDownloadProgress("system-update-refreshFWDownload");this.initialVal=true;this.spAlertsManager.updateSettings("system-get-hotfix-notification");this.spSYSManager.updateHotfixUpdate("system-get-hotfix-setting");this.spSYSManager.updateAutoFWUpdate("system-get-autofm-update-setting")}}});Ext.namespace("_s1");
_s1.BackupPanel=_._1(_._3.SystemSubSys.BackupPanel,_s0.BasePanel,IPanelItem,_i4,{expanded:false,panelCls:"x-system-panel-backup",help:"system_panel_backup",constructor:function(a){this.title=_TR("CONFIGURATION_BACKUP");_s1.BackupPanel.superclass.constructor.call(this,a)},onReady:function(){this.el.addClass(this.panelCls);var a=this.panelCls+"-col",b=this.panelCls+"-hint",c=this.panelCls+"-radio",d=this.panelCls+"-custom-options",f=this.panelCls+
"-cell1",e=this.panelCls+"-cell2",g=new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",listeners:{afterrender:function(o){new Ext.UI.ToolTip(o.el,{width:230,html:_TR("EVERYTHING_INFO")})}}}),h=new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",listeners:{afterrender:function(o){new Ext.UI.ToolTip(o.el,{width:230,html:_TR("SHARE_ACCESS_LC_INFO")})}}}),k=new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",listeners:{afterrender:function(o){new Ext.UI.ToolTip(o.el,
{width:230,html:_TR("SERVICES_INFO")})}}}),j=new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",listeners:{afterrender:function(o){new Ext.UI.ToolTip(o.el,{width:230,html:_TR("USERS_AND_GROUPS_INFO")})}}}),m=new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",listeners:{afterrender:function(o){new Ext.UI.ToolTip(o.el,{width:230,html:_TR("NETWORK_SETTINGS_INFO")})}}}),n=new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",listeners:{afterrender:function(o){new Ext.UI.ToolTip(o.el,
{width:230,html:_TR("MISC_SETTINGS_INFO")})}}});this.downloadBtn=new Ext.UI.Button({width:220,text:_TR("DOWN_CONF_ARCHIVE"),expandToText:true,cls:this.panelCls+"-download"});this.downloadBtn.on("click",this.startDownloadBackup,this);var p=new Ext.UI.RoundButton({cls:this.panelCls+"-rhintbtn x-frontview-btn-info",listeners:{afterrender:function(o){new Ext.UI.ToolTip(o.el,{width:230,html:_TR("RESTORE_INFO")})}}});this.browseBtn=new Ext.UI.FileUploadField({buttonText:_TR("BROWSE")+_TR("ELLIPSIS"),listeners:{scope:this,
afterrender:function(){this.browseBtn.fileInput.dom.name="file"}}});this.restoreBtn=new Ext.UI.Button({width:80,text:_TR("RESTORE"),cls:this.panelCls+"-restore",expandToText:true,scope:this,handler:function(){if(!this.backDlg){var o=this.panelCls+"-perform";this.backDlg=new Ext.UI.Window({title:_TR("PERFORM_RESTORE_BACKUP"),resizable:false,minimizable:false,maximizable:false,modal:true,buttonAlign:"right",width:400,footer:true,help:"system_wnd_restore_backup",fbar:new Ext.Toolbar({items:[{xtype:"uibutton",
text:_TR("OK"),width:100,listeners:{click:function(){this.browseBtn.disable();this.restoreBtn.disable();this.browseBtn.fileInput.dom.disabled=null;this.form.getForm().doAction("nvxsubmit",{url:document.fwupdateurl,scope:this,success:this.responseSuccess,failure:this.responseFailure});this.showProgress();this.backDlg.hide()},scope:this},acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),width:100,listeners:{click:function(){this.backDlg.hide()},scope:this},cancelbtn:true}],enableOverflow:false}),
html:'<div class="x-controls-prompt-icon-MESSAGE '+o+'"><div class="'+o+'-text">'+_TR("PERFORM_RESTORE_BACKUP_NOTE")+"</div></div>"})}this.backDlg.show()}});this.form=new Ext.form.FormPanel({bufferResize:0,frame:false,header:false,border:false,collapsible:false,fileUpload:true,baseCls:"x-plain",items:[new Ext.form.TextField({name:"command",value:"ConfigBackupRestore",inputType:"hidden"}),this.browseBtn],layout:"table"});(new Ext.Container({items:[this.getExtTable(a,[this.getExtRow("",[this.getExtCell(e,
[{cls:this.panelCls+"-header",html:_TR("DOWNLOAD"),xtype:"box"}]),this.getExtCell(e,"")]),this.getExtRow("",this.getExtCell("",this.getExtTable("",[this.getExtRow("",[this.getExtCell("",this.getExtTable(b,this.getExtRow("",[this.getExtCell(c,this.everything=new Ext.UI.Radio({handler:this.onCheckUpdate,scope:this,boxLabel:_TR("EVERYTHING"),name:"conf-backup-settings",strValue:"conf-backup-settings-everything",checked:true})),this.getExtCell("",g)]))),this.getExtCell("","")]),this.getExtRow("",[this.getExtCell("",
this.getExtTable(b,this.getExtRow("",[this.getExtCell(c,this.customOptions=new Ext.UI.Radio({handler:this.onCheckUpdate,scope:this,boxLabel:_TR("CUSTOM"),name:"conf-backup-settings",strValue:"conf-backup-settings-custom"})),this.getExtCell("")]))),this.getExtCell("","")]),this.getExtRow("",[this.getExtCell(d,this.getExtTable(b,this.getExtRow("",[this.getExtCell("",this.shares=new Ext.UI.Checkbox({handler:this.onCheckUpdate,scope:this,xtype:"uicheckbox",checked:false,disabled:true,boxLabel:_TR("SHARE_ACCESS_LC")})),
this.getExtCell("",h)]))),this.getExtCell("",this.getExtTable(b,this.getExtRow("",[this.getExtCell("",this.network=new Ext.UI.Checkbox({handler:this.onCheckUpdate,scope:this,xtype:"uicheckbox",checked:false,disabled:true,boxLabel:_TR("NETWORK_SETTINGS")})),this.getExtCell("",m)])))]),this.getExtRow("",[this.getExtCell(d,this.getExtTable(b,this.getExtRow("",[this.getExtCell("",this.services=new Ext.UI.Checkbox({handler:this.onCheckUpdate,scope:this,xtype:"uicheckbox",checked:false,disabled:true,boxLabel:_TR("SERVICES")})),
this.getExtCell("",k)]))),this.getExtCell("",this.getExtTable(b,this.getExtRow("",[this.getExtCell("",this.misc=new Ext.UI.Checkbox({handler:this.onCheckUpdate,scope:this,xtype:"uicheckbox",checked:false,disabled:true,boxLabel:_TR("MISC_SETTINGS")})),this.getExtCell("",n)])))]),this.getExtRow("",[this.getExtCell(d,this.getExtTable(b,this.getExtRow("",[this.getExtCell("",this.user_group=new Ext.UI.Checkbox({handler:this.onCheckUpdate,scope:this,xtype:"uicheckbox",checked:false,disabled:true,boxLabel:_TR("USERS_AND_GROUPS")})),
this.getExtCell("",j)])))])]))),this.getExtRow("",this.getExtCell("",this.downloadBtn))]),this.getExtTable(a,[this.getExtRow("",[this.getExtCell(e,[{cls:this.panelCls+"-header",html:_TR("RESTORE"),xtype:"box"},{cls:this.panelCls+"-header",items:p,xtype:"container"}]),this.getExtCell(e,"")]),this.getExtRow("",[this.getExtCell(f,'<nobr class="x-system-panel-name">'+_TR("BACKUP_SELECT_ARCHIVE")+_TR("COLON")+"</nobr>"),this.getExtCell(e,this.form)]),this.getExtRow("",[this.getExtCell(f,""),this.getExtCell(e,
this.restoreBtn)])])]})).render(this.content);new Ext.Container({cls:"x-clear",renderTo:this.content})},getExtCell:function(a,b){return Ext.isString(b)?new Ext.BoxComponent({autoEl:"td",cls:a,html:b}):new Ext.Container({autoEl:"td",cls:a,items:b})},getExtRow:function(a,b){return new Ext.Container({autoEl:"tr",cls:a,items:b})},getExtTable:function(a,b){return new Ext.Container({autoEl:{tag:"table",cellpadding:0,cellspacing:0},cls:a,items:new Ext.Container({autoEl:"tbody",items:b})})},_i45:{_o1:function(){return _5},
_o2:function(a,b){_a(a,"_i44");switch(b){case "perform_sys_restore":this.hideIndicator();Ext.UI.MessageBox.show({title:_TR("UPDATE_CONFIG"),msg:_TR("CONFIG_RESATRT_REQUIRED"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300});break}return _5},_o3:function(a,b,c){if(c=="perform_sys_restore"){this.hideIndicator();if(a!=_5)(a=_a(b,"_io").getLastNMLError())&&Ext.UI.MessageBox.show({title:_TR("ERROR"),msg:_TR(a.getErrorCode()),buttons:Ext.Msg.OK,
icon:Ext.MessageBox.WARNING,height:170,width:300});this.hideProgress()}return _5}},IPanelItem:{refresh:function(){}},responseSuccess:function(a,b){if(!Ext.isEmpty(b.result)&&b.result.success){this.browseBtn.enable();this.restoreBtn.enable();if(a=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.spSysManager.restoreSysConfig("perform_sys_restore");this.hideProgress();this.showIndicator()}}else this.responseFailure(a,
b)},responseFailure:function(a,b){this.browseBtn.enable();this.restoreBtn.enable();this.hideProgress();Ext.UI.MessageBox.show({title:_TR("ERROR"),msg:_TR(b.result&&b.result.description?b.result.description:"ERROR_SERV_UNREC"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.ERROR,height:170,width:300})},showIndicator:function(){if(!this.indicator)this.indicator=new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LSPECIAL,msgCls:"ui-mask-style1"});this.indicator.show()},hideIndicator:function(){this.indicator&&
this.indicator.hide()},showFileInfoPnl:function(a,b){var c=_s0.Widget.PromptWindow.QUESTION;this.setPromptButton(_TR("INSTALL"),true,_TR("CANCEL"),true);if(a){c=_s0.Widget.PromptWindow.ERROR;this.setPromptButton(_TR("INSTALL"),false,_TR("CANCEL"),true)}this.setTitle(b.caption,"");this.setPromptMessage(c,b,true);this.setActiveItem(c)},startDownloadBackup:function(){_a(_7(_._3.Controls.BackupDownloader),"ILogDownloader").Start(document.dbbroker,this.getCheckboxStatuses())},
onCheckUpdate:function(a,b){var c=["shares","services","user_group","network","misc"];if(a==this.everything){if(b){_.each(c,function(d){this[d].setDisabled(true);this[d].setValue(false)},this);this.downloadBtn.enable()}}else if(a==this.customOptions){if(b){this.statuses=this.getCheckboxStatuses();this.downloadBtn.disable();_.each(c,function(d){this[d].setDisabled(false);this[d].setValue(this.statuses[d])},this)}}else{this.downloadBtn.disable();_.each(c,function(d){!this[d].disabled&&this[d].checked&&
this.downloadBtn.enable()},this)}},getCheckboxStatuses:function(){return{everything:this.everything.checked,shares:this.shares.checked,services:this.services.checked,user_group:this.user_group.checked,network:this.network.checked,misc:this.misc.checked}}});Ext.namespace("_s1");
_s1.AlertsPanel=_._1(_._3.SystemSubSys.AlertsPanel,_s0.BasePanel,IPanelItem,_i4,_ib,_i3v,{panelCls:"x-system-panel-alerts",expanded:false,testAlertMessage:"AlertsTestMessage from alert panel",updatesCount:0,help:"system_panel_alerts",constructor:function(a){this.title=_TR("ALERTS");_s1.AlertsPanel.superclass.constructor.call(this,a)},initComponent:function(){_s1.AlertsPanel.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spSYSManager=a.getSystemManager();this.spAlertsManager=this.spSYSManager.getAlertsManager();this.spScrManager=a.getSecurityManager();this.spLCManager=this.spSYSManager.getLocaleManager();_a(this.spScrManager,"_i1").Advise(this);_a(this.spAlertsManager,"_i1").Advise(this)}},onReady:function(){this.el.addClass(this.panelCls);this.configFields={};this.settingsFields={};this.content.update('<div class="'+
this.panelCls+'-all"><div class="'+this.panelCls+'-container"><table><tr><td><div class="'+this.panelCls+'-header"><div class="'+this.panelCls+'-header-item" style="margin-right: 5px;"><nobr style="font-weight: bold;" class="x-system-panel-value">'+_TR("ALERT_EVENTS")+'</nobr></div><div id="'+(this.bQuestionId=Ext.id())+'" class="'+this.panelCls+'-header-item" style="margin-right: 5px;"></div></div></td></tr><tr><td id="'+(this.cbEventsId=Ext.id())+'"></td></tr><tr><td><table><tr><td>'+_TR("ALERT_SEVERITY")+
': </td><td id="'+(this.cbSeverityId=Ext.id())+'"></td></tr></table></td></tr><tr><td><div class="'+this.panelCls+'-header" style="padding-top: 20px;"><div class="'+this.panelCls+'-header-item" style="margin-right: 5px;"><nobr style="font-weight:bold" class="x-system-panel-value">'+_TR("OTHER_ALERT_SETTINGS")+'</nobr></div></div></td></tr><tr><td id="'+(this.shuthdId=Ext.id())+'"></td></tr><tr><td id="'+(this.shutfansId=Ext.id())+'"></td></tr></table></div><div class="'+this.panelCls+'-container"><table class="'+
this.panelCls+'-contacts"><tr><th><div class="'+this.panelCls+'-title">'+_TR("ALERT_CONTACTS")+'</div><div id="'+(this.pControlsID=Ext.id())+'" class="'+this.panelCls+'-controls"></div></th></tr><tr><td><div id="'+(this.pContactsID=Ext.id())+'"></div></td></tr></table></div><div id="'+(this.warningId=Ext.id())+'" class="'+this.panelCls+'-container" style="display: none;" ><div class="x-system-panel-alerts-smtp-error"><nobr>'+_TR("SMTP_NOT_CONFIGURED")+'</nobr></div></div><div id="'+(this.messageId=
Ext.id())+'" class="'+this.panelCls+'-container" style="display: none;" ><div class="x-system-panel-alerts-smtp-ok"><nobr>'+_TR("SMTP_CONFIGURED")+'</nobr></div></div><div id="'+(this.inputBoxId=Ext.id())+'" class="'+this.panelCls+'-container" style="margin-top: 0px;"><table><tr><td><div class="'+this.panelCls+'-header"><div class="'+this.panelCls+'-header-item" style="margin-right: 5px;"><nobr style="font-weight: bold;" class="x-system-panel-value">'+_TR("EMAIL_SERVER_ACCOUNT")+'</nobr></div></div></td></tr><tr><td><div class="emailBox gmailBox"><div class="emailIcon gmailIcon"></div><div id="'+
(this.imgGmailId=Ext.id())+'" class="emailText gmailText sign"></div></div></td><td><div class="emailBox outlookBox"><div class="emailIcon outlookIcon"></div><div id="'+(this.imgOutlookId=Ext.id())+'" class="emailText emailText-Micro sign"></div></div></td></tr></table><table style="width: 100%"><tr><td><div class="other-email-providers"><nobr>'+_TR("OTHER_EMAIL_PROVIDERS")+'</nobr></div></td></tr></table><table><tr class="'+this.panelCls+"-row "+this.panelCls+'-rowh" ><td class="'+this.panelCls+
"-cell "+this.panelCls+"-cell1 "+this.panelCls+'-setts"><nobr id="'+(this.lbUserId=Ext.id())+'" class="x-system-panel-name">'+_TR("USER")+_TR("COLON")+'</nobr></td><td id="'+(this.tfUserId=Ext.id())+'" class="'+this.panelCls+"-cell "+this.panelCls+'-cell2"></td></tr><tr class="'+this.panelCls+"-row "+this.panelCls+'-rowh" ><td class="'+this.panelCls+"-cell "+this.panelCls+"-cell1 "+this.panelCls+'-setts"><nobr id="'+(this.lbPswdId=Ext.id())+'" class="x-system-panel-name">'+_TR("PASSWORD")+_TR("COLON")+
'</nobr></td><td id="'+(this.tfPasswordId=Ext.id())+'" class="'+this.panelCls+"-cell "+this.panelCls+'-cell2"></td></tr></table><table><tr class="'+this.panelCls+'-row"><td class="'+this.panelCls+"-cell "+this.panelCls+"-cell1 "+this.panelCls+'-setts"><nobr id="'+(this.lbProviderId=Ext.id())+'" class="x-system-panel-name">'+_TR("EMAIL_PROVIDER")+_TR("COLON")+'</nobr></td><td id="'+(this.cbProviderId=Ext.id())+'" class="'+this.panelCls+"-cell "+this.panelCls+'-cell2"></td><td style="padding-bottom: 10px;" id="'+
(this.ttProviderId=Ext.id())+'"></td></tr></table><table><tr><td><div class="'+this.panelCls+'-header"><div id="'+(this.dAdvanceId=Ext.id())+'" class="'+this.panelCls+'-header-item x-system-panel-alerts-advance-collapse" style="cursor: pointer; margin-right: 5px; padding-left:10px; text-indent:5px;"><nobr style="font-weight: bold;" class="x-system-panel-value">'+_TR("ADVANCED_OPTIONS")+'</nobr></div></div></td></tr></table><table id="'+(this.tAdvanceId=Ext.id())+'"><tr class="'+this.panelCls+'-row"><td class="'+
this.panelCls+"-cell "+this.panelCls+"-cell1 "+this.panelCls+'-setts"><nobr id="'+(this.lbServerId=Ext.id())+'" class="x-system-panel-name">'+_TR("SMTP_SERVER")+_TR("COLON")+'</nobr></td><td id="'+(this.cbServerId=Ext.id())+'" class="'+this.panelCls+"-cell "+this.panelCls+'-cell2"></td></tr><tr class="'+this.panelCls+'-row"><td class="'+this.panelCls+"-cell "+this.panelCls+"-cell1 "+this.panelCls+'-setts"><nobr id="'+(this.lbPortId=Ext.id())+'" class="x-system-panel-name">'+_TR("SMTP_PORT")+_TR("COLON")+
'</nobr></td><td id="'+(this.tfPortId=Ext.id())+'" class="'+this.panelCls+"-cell "+this.panelCls+'-cell2"></td></tr><tr class="'+this.panelCls+'-row"><td class="'+this.panelCls+"-cell "+this.panelCls+"-cell1 "+this.panelCls+'-setts"><nobr class="x-system-panel-name">'+_TR("FROM")+_TR("COLON")+'</nobr></td><td id="'+(this.tfFromId=Ext.id())+'" class="'+this.panelCls+"-cell "+this.panelCls+'-cell2"></td></tr><tr class="'+this.panelCls+'-row"><td class="'+this.panelCls+"-cell "+this.panelCls+"-cell1 "+
this.panelCls+'-setts"><nobr class="x-system-panel-name">'+_TR("USE_TLS")+_TR("COLON")+'</nobr></td><td id="'+(this.cbTlsId=Ext.id())+'" class="'+this.panelCls+"-cell "+this.panelCls+'-cell2"></td></tr></table></div><div class="'+this.panelCls+'-container"><div id="'+(this.bClearId=Ext.id())+'" style="float: left; margin-right:20px;"></div><div id="'+(this.bSendId=Ext.id())+'" style="float: left;"></div></div></div><div class="x-clear"></div>');var a=this.getEmailImg(),b=a[0],c=a[1];b.on("click",
function(){_s0.GA.trackEvent({eventCategory:"System-Settings-Alerts",eventAction:"click",eventLabel:"Google"});if(!(b.hasClass("login")||b.hasClass("disabledText")))if(b.hasClass("signed"))window.open("https://mail.google.com/","_blank");else{this.currentClickEmail="GMail";this.winRef=_s7.openWindowCentered(location.protocol+"//"+location.host+"/emailservicecb.html","_blank",600,1050);this.spAlertsManager.deleteCurrentOauth2EmailService("system-alerts-delete-current-oauth2")}},
this);c.on("click",function(){_s0.GA.trackEvent({eventCategory:"System-Settings-Alerts",eventAction:"click",eventLabel:"Microsoft"});if(!(c.hasClass("login")||c.hasClass("disabledText")))if(c.hasClass("signed"))window.open("https://outlook.live.com/","_blank");else{this.currentClickEmail="Outlook";this.winRef=_s7.openWindowCentered(location.protocol+"//"+location.host+"/emailservicecb.html","_blank",600,1050);this.spAlertsManager.deleteCurrentOauth2EmailService("system-alerts-delete-current-oauth2")}},
this);var d=Ext.get(this.dAdvanceId),f=Ext.get(this.tAdvanceId);f.dom.style.display="none";d.on("click",function(){if(d.hasClass("x-system-panel-alerts-advance-expand")){d.removeClass("x-system-panel-alerts-advance-expand").addClass("x-system-panel-alerts-advance-collapse");f.dom.style.display="none"}else{d.removeClass("x-system-panel-alerts-advance-collapse").addClass("x-system-panel-alerts-advance-expand");f.dom.style.display=""}},this);this.bRemove=new Ext.UI.RoundButton({cls:"x-alerts-btn-minus",
disabled:true});this.bRemove.on("click",this.onRemoveEmailClick,this);this.bRemove.render(this.pControlsID);this.bAdd=new Ext.UI.RoundButton({cls:"x-alerts-btn-plus"});this.bAdd.on("click",this.onAddEmailClick,this);this.bAdd.render(this.pControlsID);this.configFields.tfUser=new Ext.UI.TextField({width:218,cls:"x-system-panel-alerts-text-box",enableKeyEvents:true,listeners:{keyup:this.enableApply,blur:this.onUserBlur,scope:this}});this.configFields.tfUser.render(this.tfUserId);this.configFields.tfPassword=
new Ext.UI.TextField({width:218,cls:"x-system-panel-alerts-text-box",enableKeyEvents:true,inputType:"password",listeners:{keyup:this.enableApply,scope:this}});this.configFields.tfPassword.render(this.tfPasswordId);this.configFields.cbProvider=new Ext.UI.ComboBox({width:220,cls:this.panelCls+"-combobox",store:new Ext.data.ArrayStore({fields:["Iserver","provider","username","server","port","encription","authentication","pswd"],data:[],idIndex:1}),valueField:"provider",displayField:"provider",triggerAction:"all",
lazyRender:true,mode:"local",listeners:{beforeselect:this.onSMTPChanging,select:this.onSMTPChange,scope:this}});this.configFields.cbProvider.render(this.cbProviderId);this.ttProvider=new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttProviderId,listeners:{afterrender:function(e){this.browseHostToolTip=new Ext.UI.ToolTip(e.el,{html:_TR("EMAIL_PROVIDER_TOOLTIP_MESSAGE")})},scope:this}});this.configFields.cbServer=new Ext.UI.ComboBox({width:220,cls:this.panelCls+"-combobox",store:new Ext.data.ArrayStore({fields:["id",
"text"]}),valueField:"id",displayField:"text",triggerAction:"all",lazyRender:true,mode:"local",editable:true,listeners:{keyup:this.enableApply,blur:this.onServerBlur,beforeselect:function(){},select:function(){},scope:this}});this.configFields.cbServer.render(this.cbServerId);this.configFields.tfPort=new Ext.UI.TextField({width:218,cls:"x-system-panel-alerts-text-box",maskRe:/[0-9]/,enableKeyEvents:true,listeners:{keyup:this.enableApply,scope:this}});this.configFields.tfPort.render(this.tfPortId);
this.configFields.tfFrom=new Ext.UI.TextField({width:218,cls:"x-system-panel-alerts-text-box",enableKeyEvents:true,listeners:{keyup:this.enableApply,scope:this}});this.configFields.tfFrom.render(this.tfFromId);this.configFields.cbTls=new Ext.UI.Checkbox({checked:false,listeners:{check:this.enableApply,scope:this}});this.configFields.cbTls.render(this.cbTlsId);this.bClear=new Ext.UI.Button({width:180,text:_TR("CLEAR"),cancelbtn:true,handler:this.onClearClick,scope:this});this.bClear.render(this.bClearId);
this.bSend=new Ext.UI.Button({xtype:"uibutton",width:180,text:_TR("APPLY_AND_SEND_MESSAGE"),acceptbtn:true,expandToText:true,handler:this.onApplyClick,scope:this});this.bSend.render(this.bSendId);this.bQuestion=new Ext.UI.RoundButton({cls:"x-frontview-btn-info"});this.bQuestion.render(this.bQuestionId);this.tooltip=new Ext.UI.ToolTip(this.bQuestion.el,{width:200,html:_TR("SYSTEM_ALERTS_EVENTS")});this.settingsFields.cbDFail=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:true,boxLabel:_TR("DISK_FAILURE"),
listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbDFail.render(this.cbEventsId);this.settingsFields.cbDFull=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:false,boxLabel:_TR("DISK_FULL"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbDFull.render(this.cbEventsId);this.settingsFields.cbQExceed=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:false,boxLabel:_TR("QUOTA_EXCEEDED"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbQExceed.render(this.cbEventsId);
this.settingsFields.cbFan=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:false,boxLabel:_TR("FAN"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbFan.render(this.cbEventsId);this.settingsFields.cbVolume=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:true,boxLabel:_TR("VOLUME"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbVolume.render(this.cbEventsId);this.settingsFields.cbDTemp=new Ext.UI.Checkbox({cls:this.panelCls+
"-cb",checked:true,disabled:false,boxLabel:_TR("DISK_TEMPERATURE"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbDTemp.render(this.cbEventsId);this.settingsFields.cbPower=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:false,boxLabel:_TR("POWER"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbPower.render(this.cbEventsId);this.settingsFields.cbUps=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:false,boxLabel:_TR("UPS"),
listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbUps.render(this.cbEventsId);this.settingsFields.cbPsu=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",checked:true,disabled:true,boxLabel:_TR("PSU"),hidden:true,listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbPsu.render(this.cbEventsId);this.settingsFields.cbAV=new Ext.UI.Checkbox({cls:this.panelCls+"-cb",boxLabel:_TR("ANTIVIRUS"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.cbAV.render(this.cbEventsId);
this.settingsFields.cbAV.setVisible(this.spSYSManager.getSupportAntiVirus()=="1");this.settingsFields.cbSeverity=new Ext.UI.ComboBox({width:100,cls:this.panelCls+"-combobox",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["Info",_TR("ALARM_INFO")],["Warnings",_TR("ALARM_WARNINGS")],["Errors",_TR("ALARM_ERRORS")]]}),valueField:"id",displayField:"text",triggerAction:"all",lazyRender:true,mode:"local",editable:true,listeners:{select:this.onCheck,scope:this}});this.settingsFields.cbSeverity.render(this.cbSeverityId);
this.settingsFields.shuthd=new Ext.UI.Checkbox({cls:this.panelCls+"-cb-full",checked:false,disabled:false,boxLabel:_TR("POWER_OFF_DISK_NO_RESP"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.shuthd.render(this.shuthdId);this.settingsFields.shutfans=new Ext.UI.Checkbox({cls:this.panelCls+"-cb-full",checked:true,disabled:false,boxLabel:_TR("POWER_OFF_TEMP_EX_SAFE"),listeners:{check:this.onCheck,scope:this}});this.settingsFields.shutfans.render(this.shutfansId);this.loadEmailXML();
Ext.get(this.inputBoxId).select("input").on("change",function(){this.bSend.setText(_TR("APPLY_AND_SEND_MESSAGE"))},this)},emailProviderArr:[],emailServerArr:[],loadEmailXML:function(){var a=this.emailProviderArr,b=this.emailServerArr,c=this.configFields.cbServer;Ext.Ajax.request({method:"GET",url:document.emailprovider?document.emailprovider:location.protocol+"//"+location.host+"/ispdb.xml",success:function(d){d=d.responseXML;if(d!=null){var f="";$_(d.getElementsByTagName("emailProvider")).forEach(function(e){if(!$_.find(a,
function(h){return h.id==e.getAttribute("id")})){var g={id:e.getAttribute("id"),domain:[],outgoingServer:{type:"",hostname:"",port:"",socketType:""}};$_(e.getElementsByTagName("domain")).forEach(function(h){g.domain.push(h.textContent)});$_(e.getElementsByTagName("outgoingServer")).forEach(function(h){f=h.getElementsByTagName("hostname").length>0?h.getElementsByTagName("hostname")[0].textContent:"";g.outgoingServer={type:h.getAttribute("type"),hostname:f,port:h.getElementsByTagName("port").length>
0?h.getElementsByTagName("port")[0].textContent:"",socketType:h.getElementsByTagName("socketType").length>0?h.getElementsByTagName("socketType")[0].textContent:""};f&&$_.findIndex(b,function(k){return k[0]==f})==-1&&b.push([f,f])});a.push(g)}});c.getStore().loadData(b)}},failure:function(){},autoAbort:false})},onClearClick:function(){var a=_a(this.spAlertsManager.getConfig(),"_i0");if(a){a.putContact(this.contactsToString());a.putProvider("");a.putUser("");a.putPassword("");a.putServer("");
a.putPort("");a.putFromName("");a.putTLS("false");this.currentClickBtn="clear";this.currentClickEmail=null;this.spAlertsManager.commitConfig("system-alerts-commit-config")}},onApplyClick:function(){this.bSend.text==_TR("APPLY_AND_SEND_MESSAGE")?this.apply():this.send()},apply:function(){if(this.validate()){var a=_a(this.spAlertsManager.getConfig(),"_i0");if(a){var b=this.contactsToString(),c=this.configFields.tfFrom.getValue();b=!b?c:b;if(b.indexOf(c)=="-1"){b=b.split(" ");b.unshift(c);
b=b.join(" ")}a.putContact(b);a.putProvider(this.configFields.cbProvider.getValue());a.putUser(this.configFields.tfUser.getValue());a.putPassword(this.configFields.tfPassword.getValue());a.putServer(this.configFields.cbServer.getValue());a.putPort(this.configFields.tfPort.getValue());a.putFromName(this.configFields.tfFrom.getValue());a.putTLS(this.configFields.cbTls.getValue()?"true":"false");a.putAuth(this.currentClickEmail=="GMail"||this.currentClickEmail=="Outlook"?"oauth2":"login");this.currentClickBtn=
"apply";this.spAlertsManager.commitConfig("system-alerts-commit-config")}}},send:function(){this.currentClickBtn=null;if(this.validate()&&this.validateContacts()){var a=_a(this.spAlertsManager.getConfig(),"_i0");if(a){var b=this.configFields.cbProvider.getValue();b=String.format("{0}:{1}",this.configFields.cbServer.getValue(),this.configFields.tfPort.getValue());a.putContact(this.contactsToString());a.putProvider(b);a.putUser(this.configFields.tfUser.getValue());a.putPassword(this.configFields.tfPassword.getValue());
a.putServer(this.configFields.cbServer.getValue());a.putPort(this.configFields.tfPort.getValue());a.putFromName(this.configFields.tfFrom.getValue());a.putTLS(this.configFields.cbTls.getValue()?"true":"false");this.spAlertsManager.sendTestMessage(this.testAlertMessage)}}},timeoutId:0,onCheck:function(a,b){var c="";switch(a.boxLabel){case _TR("DISK_FAILURE"):c="Disk Failure";break;case _TR("DISK_FULL"):c="Disk Full";break;case _TR("QUOTA_EXCEEDED"):c="Quota Exceeded";break;case _TR("FAN"):c="Fan";break;
case _TR("VOLUME"):c="Volume";break;case _TR("DISK_TEMPERATURE"):c="Disk Temperature";break;case _TR("POWER"):c="Power";break;case _TR("UPS"):c="UPS";break;case _TR("PSU"):c="PSU";break;case _TR("ANTIVIRUS"):c="Antivirus";break}_s0.GA.trackEvent({eventCategory:"System-Settings-Alerts",eventAction:"click",eventLabel:c+":"+b});if(a=_a(this.spAlertsManager.getSettings(),"_ic")){a.putMonitorDiskFailure(this.settingsFields.cbDFail.getValue()?"true":"false");a.putMonitorDiskFull(this.settingsFields.cbDFull.getValue()?
"true":"false");a.putMonitorQuotaExceed(this.settingsFields.cbQExceed.getValue()?"true":"false");a.putMonitorFan(this.settingsFields.cbFan.getValue()?"true":"false");a.putMonitorVolume(this.settingsFields.cbVolume.getValue()?"true":"false");a.putMonitorDiskTemp(this.settingsFields.cbDTemp.getValue()?"true":"false");a.putMonitorPower(this.settingsFields.cbPower.getValue()?"true":"false");a.putMonitorUPS(this.settingsFields.cbUps.getValue()?"true":"false");a.putMonitorPSU(this.settingsFields.cbPsu.getValue()?
"true":"false");a.putOffonDiskFail(this.settingsFields.shuthd.getValue()?"true":"false");a.putOffonDiskOverheat(this.settingsFields.shutfans.getValue()?"true":"false");a.putSeverity(this.settingsFields.cbSeverity.getValue());a.putMonitorAntivirus(this.settingsFields.cbAV.getValue()?"true":"false")}var d=this;if(!this.timeoutId)this.timeoutId=setTimeout(function(){_a(d.spAlertsManager.getSettings(),"_ic")&&d.spAlertsManager.commitSettings("system-alerts-commit-settings");d.timeoutId=
0},5E3)},onSMTPChanging:function(){this.backUpCustom(this.configFields.cbProvider.getValue())},enableApply:function(){this.bSend.setText(_TR("APPLY_AND_SEND_MESSAGE"));this.clearInvalid()},onServerBlur:function(){var a=this.configFields.cbServer.getValue();Ext.data.Record.create(["Iserver","provider","username","server","port","encription","authentication","pswd"]);var b=$_.find(this.emailProviderArr,function(d){return d.outgoingServer.hostname==a});if(b){var c=this.configFields;c.tfPort.setValue(b.outgoingServer.port);
b=b.outgoingServer.socketType.toLowerCase();c.cbTls.setValue(b.indexOf("tls")!=-1||b=="ssl")}},onUserBlur:function(){var a=this.configFields.tfUser.getValue();if(a&&this.validateEmail(a)){var b=a.split("@").pop(),c=this.currntUserEmailDomainArr,d=this.configFields.cbProvider,f=Ext.data.Record.create(["Iserver","provider","username","server","port","encription","authentication","pswd"]);c.indexOf(b)==-1&&c.push(b);var e=$_.find(this.emailProviderArr,function(h){return h.id==b});if(e){c=e.outgoingServer.socketType.toLowerCase();
var g=$_.findIndex(d.getStore().data.items,function(h){return h.data.provider==e.id});if(g==-1){d.store.add([new f({Iserver:_a(b,"ISysAlertsSMTPServer"),provider:e.id,username:a,fromName:a,server:e.outgoingServer.hostname,port:e.outgoingServer.port,encription:c.indexOf("tls")!=-1||c.indexOf("ssl")!=-1?"SSL":"",authentication:"",pswd:""})]);g=$_.findIndex(d.getStore().data.items,function(h){return h.data.provider==e.id})}else{f=d.getStore().getAt(g);f.data.username=a;f.data.fromName=a}d.setValue(e.id);
d=this.configFields;d.tfPassword.setValue("");d.cbServer.setValue(e.outgoingServer.hostname);d.tfPort.setValue(e.outgoingServer.port);d.cbTls.setValue(c.indexOf("tls")!=-1||c=="ssl");a&&d.tfFrom.setValue(a);this.setAdvReadonly(e.id)}else{d.setValue(_TR("CUSTOM"));d=this.configFields;d.cbServer.setValue("");d.tfPort.setValue("");d.cbTls.setValue(false);a&&d.tfFrom.setValue(a);this.setAdvReadonly(_TR("CUSTOM"));a=Ext.get(this.dAdvanceId);a.hasClass("x-system-panel-alerts-advance-collapse")&&a.dom.click()}}else!a&&
this.configFields.tfFrom.setValue("")},onSMTPChange:function(a,b){this.enableApply();a=this.configFields;var c=b.data.username;a.tfPassword.setValue("");if(b.get("provider").toLowerCase()!==_TR("RESET").toLowerCase()){c=b.get("username");fromName=b.get("fromName");c==""&&(fromName="");!fromName&&c&&(fromName=c);a.tfUser.setValue(c);a.cbServer.setValue(b.get("server"));a.tfPort.setValue(b.get("port"));c=b.get("encription").toLowerCase();a.cbTls.setValue(c.indexOf("tls")!=-1||c=="ssl");a.tfFrom.setValue(fromName);
a.tfPassword.setValue(b.get("pswd"))}this.setAdvReadonly(b.get("provider").toLowerCase())},clearInvalid:function(){this.configFields.tfUser.tooltip&&this.configFields.tfUser.hideValidateTooltip();this.configFields.tfPassword.tooltip&&this.configFields.tfPassword.hideValidateTooltip();this.configFields.cbServer.tooltip&&this.configFields.cbServer.hideValidateTooltip();this.configFields.tfPort.tooltip&&this.configFields.tfPort.hideValidateTooltip();Ext.get(this.lbUserId).removeClass("x-system-panel-alerts-err");
Ext.get(this.lbPswdId).removeClass("x-system-panel-alerts-err");Ext.get(this.lbServerId).removeClass("x-system-panel-alerts-err");Ext.get(this.lbPortId).removeClass("x-system-panel-alerts-err")},validateContacts:function(){if(this.contacts.length===0){Ext.UI.MessageBox.error({msg:_TR("ALERT_CONTACTS_ERROR")});return false}return true},validate:function(){this.clearInvalid();if(this.contacts.length>0||this.configFields.tfUser.getValue()!=""){if(this.configFields.cbServer.getValue().length===0){Ext.get(this.lbServerId).addClass("x-system-panel-alerts-err");
this.configFields.cbServer.showValidateTooltip(_TR("ALERT_SMTP_SERVER_ERRORTIP"));return false}var a=this.configFields.tfPort.getValue();if(a==""||a&&a.length>0&&!_.isNumber(a*1)){Ext.get(this.lbPortId).addClass("x-system-panel-alerts-err");this.configFields.tfPort.showValidateTooltip(_TR("ALERT_SMTP_PORT_ERRORTIP"));return false}}return true},updateEmailServerState:function(a){if(a){Ext.get(this.warningId).setDisplayed(true);Ext.get(this.messageId).setDisplayed(false)}else{Ext.get(this.warningId).setDisplayed(false);
Ext.get(this.messageId).setDisplayed(true)}},setAdvReadonly:function(){v=false;this.configFields.cbServer.setDisabled(v);this.configFields.tfPort.setDisabled(v);this.configFields.cbTls.setDisabled(v)},initialEmailInputStatus:function(a){var b=this.configFields;b.tfUser.setDisabled(a);b.tfPassword.setDisabled(a);b.cbProvider.setDisabled(a);b.cbServer.setDisabled(a);b.tfPort.setDisabled(a);b.tfFrom.setDisabled(a);b.cbTls.setDisabled(a)},initializeContacts:function(a){this.contacts=[];this.clearContactsList();
if(a){a=a.split(" ");for(var b,c=0,d=a.length;c<d;++c)(b=a[c].trim())&&this.appendContact(b)}if(this.contacts.length==0){this.initializeEmtyContactsList();this.resetProvidersList()}},initializeEmtyContactsList:function(){Ext.fly(this.pContactsID).createChild({tag:"div",cls:"x-system-panel-alerts-emptyitem",html:_TR("EMPTY")})},contactsToString:function(){for(var a="",b=0,c=this.contacts.length;b<c;++b)a+=(a?" ":"")+this.contacts[b].email;return a},getContact:function(a){for(var b=0,c=this.contacts.length;b<
c;++b)if(this.contacts[b].email===a)return this.contacts[b];return null},getSelectedContact:function(){if(!this.activeContact&&this.contacts.length>0)return this.contacts[0];else if(this.activeContact&&this.contacts.length>0)return this.activeContact;return null},backUpCustom:function(a){if(a.toLowerCase()===_TR("CUSTOM").toLowerCase()){a=this.configFields.cbProvider.getStore().getById(a);a.set("username",this.configFields.tfUser.getValue());a.set("server",this.configFields.cbServer.getValue());a.set("port",
this.configFields.tfPort.getValue());a.set("encription",this.configFields.cbTls.getValue()?"SSL":"");a.set("pswd",this.configFields.tfPassword.getValue());a.commit()}},selectContact:function(a){this.activeContact&&this.activeContact.node.removeClass("active");a&&a.node.addClass("active");this.bRemove.setDisabled(!a);if(this.activeContact!==a)this.activeContact=a},clearContactsList:function(){Ext.fly(this.pContactsID).update("");this.activeContact=null},appendContact:function(a){this.contacts.length===
0&&this.clearContactsList();var b=Ext.fly(this.pContactsID).createChild({tag:"div",cls:"x-system-panel-alerts-contactitem",html:a}),c;this.contacts.push(c={node:b,email:a});if(this.activeContact&&this.activeContact.email===a)this.activeContact=c;b.on("click",function(){this.selectContact(c)},this)},removeContact:function(a){for(var b=-1,c=0,d=this.contacts.length;c<d;++c)if(this.contacts[c].email===a.email)b=c;this.contacts.splice(b,1);a.node.un("click",function(){this.selectContact(a)},this);a.node.remove();
delete a;b=b<this.contacts.length?b:--b;b>=0?this.selectContact(this.contacts[b]):this.initializeEmtyContactsList();this.bSend.setText(_TR("APPLY_AND_SEND_MESSAGE"));sessionStorage.setItem("updateContactItem","1")},onRemoveEmailClick:function(){var a=this.activeContact;a&&this.removeContact(a)},validateEmail:function(a){return _.Utils.isValidEmail(a)},appendProvider:function(){var a=this.getSelectedContact();if(a){var b=a.email.split("@").pop(),c=this.currntUserEmailDomainArr,d=this.emailProviderArr,
f=this.configFields.cbProvider,e=Ext.data.Record.create(["Iserver","provider","username","server","port","encription","authentication","pswd"]);if(c.indexOf(b)==-1){c.push(b);if(c=$_.find(d,function(g){return g.id==b})){d=c.outgoingServer.socketType.toLowerCase();f.store.add([new e({Iserver:_a(b,"ISysAlertsSMTPServer"),provider:c.id,username:this.contacts.length==1?a.email:"",server:c.outgoingServer.hostname,port:c.outgoingServer.port,encription:d.indexOf("tls")!=-1||d.indexOf("ssl")!=-1?"SSL":
"",authentication:"",pswd:""})])}else{f=this.configFields;if(f.tfUser.getValue()==""&&f.tfFrom.getValue()==""){f.tfUser.setValue(a.email);f.tfFrom.setValue(a.email)}}if(this.contacts.length===1&&c){this.configFields.cbProvider.setValue(c.id);this.onSMTPChange(this.configFields.cbProvider,this.configFields.cbProvider.getStore().getAt(1))}}}},onEmailAdd:function(a,b){!this.getContact(b)&&this.appendContact(b);this.selectContact(this.getContactByEmail(this.contacts,b));this.backUpCustom(this.configFields.cbProvider.getValue());
this.appendProvider();this.bSend.setText(_TR("APPLY_AND_SEND_MESSAGE"));sessionStorage.setItem("updateContactItem","1")},getEditEmailWindow:function(){if(!this.editEmailWnd)this.editEmailWnd=new _s1.EmailWindow({validateEmail:this.validateEmail});this.editEmailWnd.un("change",this.onEmailAdd,this);this.editEmailWnd.on("change",this.onEmailAdd,this);return this.editEmailWnd},onAddEmailClick:function(){this.spScrManager.updateUsersWithAdmin("alert-account-email",true,false)},getContactByEmail:function(a,
b){for(var c=0,d=a.length;c<d;c++)if(a[c].email==b)return a[c]},resetProvidersList:function(){this.configFields.cbProvider.store.removeAll(true);this.configFields.cbProvider.store.loadData([[{},_TR("CUSTOM")]]);this.configFields.cbProvider.setValue(_TR("CUSTOM"));this.configFields.tfUser.setValue("");this.configFields.tfPassword.setValue("");this.configFields.cbServer.setValue("");this.configFields.tfPort.setValue("");this.configFields.tfFrom.setValue("");this.configFields.cbTls.setValue(false)},
showError:function(a){if(a=_a(a,"_io").getLastNMLError()){a=a.getErrorCode();switch(a){default:_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("ERROR"),title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},getEmailImg:function(){var a=Ext.get(this.imgGmailId),b=Ext.get(this.imgOutlookId);return[a,b]},initialImg:function(){var a=this.getEmailImg(),b=a[0];a=
a[1];b.parent("div").removeClass("disabledBox");a.parent("div").removeClass("disabledBox");b.removeClass("disabledText").removeClass("signed").addClass("sign");a.removeClass("disabledText").removeClass("signed").addClass("sign");b.update(_TR("ALERTS_GMAIL_SIGN"));a.update(_TR("ALERTS_OUTLOOK_SIGN"));return[b,a]},initialImgStatus:function(a){var b=this.initialImg(),c=b[0];b=b[1];switch(a){case "GMail":c.parent("div").removeClass("disabledBox");c.removeClass("disabledText").removeClass("sign").addClass("signed");
c.update(_TR("ALERTS_GMAIL_SIGNED"));b.parent("div").addClass("disabledBox");b.removeClass("sign").removeClass("signed").addClass("disabledText");b.update(_TR("ALERTS_OUTLOOK"));break;case "Outlook":c.parent("div").addClass("disabledBox");c.removeClass("sign").removeClass("signed").addClass("disabledText");c.update(_TR("ALERTS_GMAIL"));b.parent("div").removeClass("disabledBox");b.removeClass("disabledText").removeClass("sign").addClass("signed");b.update(_TR("ALERTS_OUTLOOK_SIGNED"));break}},IPanelItem:{refresh:function(){this.clearInvalid();
this.resetProvidersList();this.spAlertsManager.updateSettings("system-alerts-update-settings");this.spAlertsManager.updateConfig("system-alerts-update-config")}},startAuthWndPolling:function(){var a=this;clearInterval(a.pollAuthWndProcId);if(_.isIE)window.onstorage=function(b){if(b.key=="CurrentOAuth2Code"){window.onstorage=null;localStorage.setItem("CurrentOAuth2Code",b.newValue)}};this.pollAuthWndProcId=setInterval(function(){if(localStorage.getItem("CurrentOAuth2Code")){clearInterval(a.pollAuthWndProcId);
var b=a.currentClickEmail,c=a.currentOAuth2State,d=localStorage.getItem("CurrentOAuth2Code");a.spAlertsManager.exchangeAuthentication("system-alerts-exchange-current-oauth2",b,c,d)}},1E3)},_ib:{_o1:function(a,b){if(!$_.find(["system-alerts-update-smtp","system-alerts-update-config","system-alerts-update-settings","system-alerts-commit-settings","system-alerts-commit-config","system-alerts-update-servers","system-alerts-update-current-oauth2","system-alerts-update-current-oauth2-url",
"system-alerts-delete-current-oauth2","system-alerts-exchange-current-oauth2",this.testAlertMessage],function(c){return c==b}))return _5;this.parentTabItem.mask.show();return _5},_o2:function(a,b){a=_a(a,"_ia");switch(b){case "system-alerts-update-config":var c=_a(a.getConfig(),"_i0");this.initializeContacts(c.getContact());(b=this.getContactByEmail(this.contacts,c.getUser()))&&this.selectContact(b);this.updateEmailServerState(!!!(c.getServer()&&c.getServer()!==
_4&&c.getServer().length>0));var d=this.emailProviderArr,f=this.currntUserEmailDomainArr=[],e=Ext.data.Record.create(["Iserver","provider","username","server","port","encription","authentication","pswd"]),g=this.configFields.cbProvider,h=c.getContact().split(" ");h.push(c.getUser());var k=_TR("CUSTOM");a=this.initialImg();b=a[0];a=a[1];b.removeClass("login");a.removeClass("login");this.initialEmailInputStatus(false);$_($_.uniq(h)).forEach(function(j){var m=j.split("@").pop();if(f.indexOf(m)==
-1){f.push(m);var n=$_.find(d,function(p){return p.id==m});if(n){n.outgoingServer.socketType.toLowerCase();k==_TR("CUSTOM")&&(k=c.getUser()==j?n.id:_TR("CUSTOM"));g.store.add([new e({Iserver:_a(m,"ISysAlertsSMTPServer"),provider:n.id,username:c.getUser()==j?j:"",fromName:c.getFromName(),server:c.getServer()?c.getServer():n.outgoingServer.hostname,port:c.getPort()?c.getPort():n.outgoingServer.port,encription:c.getTLS()=="true"?"SSL":"",authentication:"",pswd:c.getUser()==j?c.getPassword():""})])}else if($_.findIndex(g.getStore().data.items,
function(p){return p.data.username==(c.getUser()||c.getFromName())})==-1){g.store.add([new e({Iserver:c,provider:c.getServer(),username:c.getUser()||c.getFromName(),fromName:c.getFromName(),server:c.getServer(),port:c.getPort(),encription:c.getTLS()=="true"?"SSL":"",authentication:"",pswd:c.getPassword()})]);k=c.getServer()}}});this.configFields.cbProvider.setValue(k);h=$_.findIndex(this.configFields.cbProvider.getStore().data.items,function(j){return j.data.username==(c.getUser()||c.getFromName())});
this.onSMTPChange(this.configFields.cbProvider,this.configFields.cbProvider.getStore().getAt(h==-1?0:h));h=c.getAuth();this.currentClickEmail=null;if(this.configFields.cbServer.getValue()&&h=="")h="login";this.ttProvider.setVisible(true);this.bClear.setText(_TR("CLEAR"));switch(h){case "oauth2":b.removeClass("login");a.removeClass("login");this.ttProvider.setVisible(false);this.bClear.setText(_TR("ALERTS_SIGNED_OUT"));this.spAlertsManager.updateCurrentOauth2EmailService("system-alerts-update-current-oauth2");
sessionStorage.getItem("updateContactItem")=="1"&&setTimeout(function(){this.send()}.bind(this),100);this.bSend.setText(_TR("SEND_MESSAGE"));break;case "login":b.parent("div").addClass("disabledBox");b.removeClass("sign").removeClass("signed").addClass("disabledText").addClass("login");b.update(_TR("ALERTS_GMAIL"));a.parent("div").addClass("disabledBox");a.removeClass("sign").removeClass("signed").addClass("disabledText").addClass("login");a.update(_TR("ALERTS_OUTLOOK"));this.bSend.setText(_TR("SEND_MESSAGE"));
if(this.currentClickBtn=="apply"){this.currentClickBtn=null;setTimeout(function(){this.send()}.bind(this),100)}break;default:this.bSend.setText(_TR("APPLY_AND_SEND_MESSAGE"));break}sessionStorage.removeItem("updateContactItem");break;case "system-alerts-update-settings":b=_a(a.getSettings(),"_ic");a=this.settingsFields;a.cbDFail.setValue(b.getMonitorDiskFailure()=="true",true);a.cbDFull.setValue(b.getMonitorDiskFull()=="true",true);a.cbQExceed.setValue(b.getMonitorQuotaExceed()==
"true",true);a.cbFan.setValue(b.getMonitorFan()=="true",true);a.cbVolume.setValue(b.getMonitorVolume()=="true",true);a.cbDTemp.setValue(b.getMonitorDiskTemp()=="true",true);a.cbPower.setValue(b.getMonitorPower()=="true",true);a.cbUps.setValue(b.getMonitorUPS()=="true",true);a.cbPsu.setValue(b.getMonitorPSU()=="true",true);a.shuthd.setValue(b.getOffonDiskFail()=="true",true);a.shutfans.setValue(b.getOffonDiskOverheat()=="true",true);h=b.getSeverity();h=h==""?"Info":h;h!="_4"&&a.cbSeverity.setValue(h);
a.cbAV.setValue(b.getMonitorAntivirus()=="true",true);break;case this.testAlertMessage:Ext.UI.MessageBox.info({msg:_TR("TEST_MSG_SENT"),scope:this});break;case "system-alerts-update-current-oauth2":this.initialImgStatus(this.currentClickEmail=this.spAlertsManager.getCurrentOAuth2Service());this.initialEmailInputStatus(true);break;case "system-alerts-delete-current-oauth2":this.spAlertsManager.updateCurrentOauth2Url("system-alerts-update-current-oauth2-url",this.currentClickEmail);break;case "system-alerts-update-current-oauth2-url":b=
this.spAlertsManager.getCurrentOAuth2Url();if(b!=_4){localStorage.removeItem("CurrentOAuth2Code");a=window.location.protocol+"//"+window.location.host+"/emailservicecb.html";h=this.spLCManager.getLocale();h=="auto"&&(h=this.spLCManager.getAutoLocale());this.winRef.location=b.replace(/(state=)[^&]*/gi,"$1"+(typeof _=="undefined"?_.OAuth2EnDeCryption:_.OAuth2EnDeCryption)("location="+a+"&locale_code="+h+"&version=2&csrfpId="+window.csrfId,"cloudstoragesync","ENCODE"));this.currentOAuth2State=
_.getQueryString(b,"state");this.startAuthWndPolling()}break;case "system-alerts-exchange-current-oauth2":b=this.spAlertsManager.getCurrentOAuth2Token();this.configFields.tfUser.setValue(b.email);this.onUserBlur();this.configFields.tfPassword.setValue(b.id);this.initialImgStatus(this.currentClickEmail);this.initialEmailInputStatus(true);break}return _5},_o3:function(a,b,c){if(!$_.find(["system-alerts-update-smtp","system-alerts-update-config","system-alerts-update-settings","system-alerts-commit-settings",
"system-alerts-commit-config","system-alerts-update-servers","system-alerts-update-current-oauth2","system-alerts-update-current-oauth2-url","system-alerts-delete-current-oauth2","system-alerts-exchange-current-oauth2",this.testAlertMessage],function(d){return d==c}))return _5;this.parentTabItem.mask.hide();c=="system-alerts-exchange-current-oauth2"&&this.apply();if(c=="system-alerts-commit-config"){this.resetProvidersList();this.spAlertsManager.updateConfig("system-alerts-update-config")}if(a!=
_5){a=_a(b,"_io").getLastNMLError();if(c==this.testAlertMessage)a?this.showError(b):Ext.UI.MessageBox.error({msg:'<div class="x-frontview-prompt-message">'+_TR("TEST_MSG_ERROR")+"</div>"});else this.showError(b)}return _5}},currntUserEmailDomainArr:[],_i2y:{_o1:function(a,b){switch(b){case "alert-account-email":this.parentTabItem.mask.show();break}return _5},_o2:function(a,b){switch(b){case "alert-account-email":a=this.spScrManager.getUsers();var c=
[],d="";a!==_4&&_.each(a,function(f){f=_a(f,"_i2z");d=f.getEmail();_.Utils.isValidEmail(d)&&c.push(d)},this);this.getEditEmailWindow(true).show().load($_.sortBy(c));break}return _5},_o3:function(a,b,c){switch(c){case "alert-account-email":this.parentTabItem.mask.hide();break}a!=_5&&this.showError(b);return _5}}});Ext.namespace("_s8");
_s1.UsbEncryptionKeys=_._1(_9,Ext.Container,{panelCls:"x-backup-jobs",cls:"x-backup-jobs",style:"margin:0px",constructor:function(){_s1.UsbEncryptionKeys.superclass.constructor.apply(this,arguments);this.spFSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getFSManager();_a(this.spFSManager,"_i1").Advise(this)},afterRender:function(){_s1.UsbEncryptionKeys.superclass.afterRender.apply(this,arguments);this.renderGrid();
this.createMenu()},renderGrid:function(){var a=[{header:"&#160;",width:33,fixed:true,hideable:false,menuDisabled:true,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="grid-backup-icon"></div>')).compile()},{header:_TR("MODEL"),width:150,dataIndex:"model"},{header:_TR("SERIAL"),dataIndex:"serial"},{header:_TR("ENCRYPTION_METHOD"),width:100,dataIndex:"method"},{id:"settings",header:"&#160;",width:36,fixed:true,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="x-frontview-icon-settings x-system-settings-usbkeys"><a></a></div>')).compile()},
{header:"&#160;",width:40,fixed:true,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="x-system-settings-usbkeys"><a></a></div>')).compile()}];this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true,handleMouseDown:function(b,c,d){if(!this.isSelected(c)){this.selectRow(c,d.ctrlKey||d.shiftKey);this.grid.getView().focusRow(c)}}});this.grid=new Ext.UI.GridPanel({id:"usb-keys-grid",uicls:"ui-fwgrid",autoHeight:true,disableScroll:true,sm:this.selModel,colModel:new Ext.grid.ColumnModel(a),
store:new Ext.data.Store({data:[],reader:new Ext.data.JsonReader({idProperty:"serial",fields:["model","serial","method"]})}),viewConfig:{forceFit:true,autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+_TR("NO_USB_ENCRYPTION_KEYS")+"</div>",deferEmptyText:false,getRowClass:function(b,c){b="x-grid3-row-even";if(c%2==1)b="x-grid3-row-odd";return b}},renderTo:this.el,listeners:{cellclick:function(b,c,d,f){b.getColumnModel().getColumnId(d)=="settings"&&this.showMenu(b.getView().getRow(c),
f.xy)},cellcontextmenu:function(b,c,d,f){this.showMenu(null,f.xy);f.preventDefault()},scope:this}});a=_a(_7(_._3.BackupSubSys.BackupTab),"IExtNative").getNative();a.on("tabactivate",this.onResized,this);a.content.on("resize",this.onResized,this);Ext.EventManager.on(window,"resize",this.onResized,this)},onResized:function(){this.grid.setWidth(this.el.getWidth())},createMenu:function(){this.itemDelete=new Ext.menu.Item({text:_TR("DELETE"),icon:false,ctCls:"x-frontview-icon-delete",
commandName:"delete",id:"usb-encryption-keys-context-menu-delete-btn"});this.menu=new Ext.UI.Menu({id:"usb-encryption-keys-context-menu",cls:"x-backup-jobs-menu",defaultAlign:"tr-br?",enableScrolling:false,items:[this.itemDelete],listeners:{itemclick:function(a){switch(a.commandName){case "delete":this.onRemoveClick();break}},scope:this}})},showMenu:function(a,b){if(this.selModel.getSelected())b?this.menu.showAt(b):this.menu.show(a)},onRemoveClick:function(){var a=this.grid.getSelectionModel().getSelected().get("serial");
Ext.UI.MessageBox.confirm({title:_TR("CONFIRMATION"),msg:String.format(_TR("WARN_DELETION"),Ext.util.Format.htmlEncode(a)),fn:function(b){b=="yes"&&this.spFSManager.removeUSBKey(a,"system-setting-remove-usb-encryption-key")},scope:this})},onDownloadClick:function(){var a=this.grid.getSelectionModel().getSelected();if(a){a=a.get("serial");var b=_a(_7(_._3.Controls.SSHKeyDownload),"ILogDownloader");b.Initialize({downloadId:a,resourceId:a,resourceType:"EncryptUsbKeys"});b.Start(document.dbbroker)}},
refresh:function(a){this.parentPanel=a;this.spFSManager.updateUSBKeys("system-setting-usb-encryption-keys")},populateUsbKeys:function(){var a=this.spFSManager.getUSBKeys()||[];this.grid.getStore().loadData(a);this.onResized()},_iz:{_o1:function(a,b){switch(b){case "system-setting-remove-usb-encryption-key":this.parentPanel.showProgress();break}},_o2:function(a,b){switch(b){case "system-setting-usb-encryption-keys":this.populateUsbKeys();break;case "system-setting-remove-usb-encryption-key":this.spFSManager.updateUSBKeys("system-setting-usb-encryption-keys");
break}return _5},_o3:function(a,b,c){switch(c){case "system-setting-remove-usb-encryption-key":this.parentPanel.hideProgress();break}var d;if(a!==_5)d=_a(b,"_io").getLastNMLError();d&&Ext.UI.MessageBox.error({title:_TR("USB_ENCRYPTION"),msg:_TR(d.getErrorCode())+"<br >"+d.getErrorDetails()})}}});_._2("_s1");
_s1.UsbEncryptionPanel=_._1(_._3.SystemSubSys.UsbEncryptionPanel,_s0.BasePanel,IPanelItem,_i4,_i35,{expanded:false,panelCls:"x-system-panel-usb",constructor:function(){this.title=_TR("USB_ENCRYPTION");this.spServManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);_s1.UsbEncryptionPanel.superclass.constructor.apply(this,arguments)},
onReady:function(){this.content.update('<div style="width:100%"><div style="font-weight:bolder; color: #4d4d4d">'+_TR("SAVED_USB_ENCRYPTION_KEYS")+'</div><div style="text-align: right; margin-right:20px;"><div id="'+(this.downloadBtnId=Ext.id())+'" style="display: inline-block;"></div></div><div id="'+(this.cmpKeysId=Ext.id())+'"></div></div>');this.downloadBtn=new Ext.UI.Button({width:150,text:_TR("READYDR_KEYS_EXPORT"),cls:this.panelCls+"-btndownloadkey",renderTo:this.downloadBtnId,listeners:{click:this.downloadKeyFn,
scope:this}});this.cmpKeys=new _s1.UsbEncryptionKeys({renderTo:this.cmpKeysId})},onExpandClick:function(){_s1.UsbEncryptionPanel.superclass.onExpandClick.apply(this,arguments);setTimeout(function(){this.cmpKeys.onResized()}.bind(this),500)},downloadKeyFn:function(){this.cmpKeys.onDownloadClick()},IPanelItem:{refresh:function(){this.cmpKeys.refresh(this)}},_i35:{_o1:function(a,b){switch(b){case "system_remotessh_refresh":this.showProgress();break}return _5},
_o2:function(a,b){switch(b){case "system_remotessh_refresh":break}return _5},_o3:function(){this.progress.hidden||this.hideProgress();return _5}}});Ext.namespace("_s1");
_s1.StoragePanel=_._1(_._3.SystemSubSys.StoragePanel,_9,Ext.Container,_i4,_i4h,_i3v,_i4t,IExtNative,_is,{hidden:true,hideMode:"visibility",volList:null,bay:null,buttonsCt:null,zfsDisksManager:null,zfsVolumesManager:null,updatesCount:0,cls:"storage-panel",help:"system_panel_storage",constructor:function(){_s1.StoragePanel.superclass.constructor.apply(this,arguments);
this.html='<div style="position: relative;"><div style="position: relative;" id="'+(this.scrollBlockId=Ext.id())+'"><table style="width: 100%;" border="0" cellpadding="0" cellspacing="0"><tr><td style="padding: 0 340px;"><table style="margin: 15px auto 0 auto;"><tr><td><div id="'+(this.bayId=Ext.id())+'"></div></td></tr></table></td></tr></table></div><div id="'+(this.volListId=Ext.id())+'"</div><div id="'+(this.buttonsId=Ext.id())+'"</div></div>';this.initButtons();this.initBay();this.initVolList()},
initComponent:function(){_s1.StoragePanel.superclass.initComponent.apply(this,arguments);var a=this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2");_a(a,"_i1").Advise(this);this.spSysManager=a.getSystemManager();this.zfsDisksManager=a.getZFSDisksManager();_a(this.zfsDisksManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.spVolumeScheduleManager=
a.getVolumeScheduleManager();_a(this.spVolumeScheduleManager,"_i1").Advise(this)},afterRender:function(){_s1.StoragePanel.superclass.afterRender.apply(this,arguments);this.volumesTitle=Ext.get(this.volumesTitle);this.scrollBlock=Ext.get(this.scrollBlockId);FocusManager.reg(this.scrollBlock,{keydown:function(a){if(a.target.tagName!="INPUT")switch(a.getKey()){case a.UP:this.scroller.scroll(-50);break;case a.DOWN:this.scroller.scroll(50);break}}},this);this.scroller=new Ext.UI.Scroller({dom:this.scrollBlock.dom,
margins:{top:2,right:1,bottom:1,left:1}});this.scroller.reg();this.volList.render(this.volListId);this.bay.render(this.bayId);this.buttonsCt.render(this.buttonsId);this.wndCreateVolume=new _s1.Storage.CreateVolumeWindow;this.wndCreateVolume.on("createClick",this.createVolume,this);this.wndDestroyVolume=new _s1.Storage.TypeConfirmWindow({title:_TR("DESTROY_VOLUME"),message:_TR("STORAGE_DESTROY_VOLUME_CONFIRM"),textApply:_TR("DESTROY"),textToEnter:"DESTROY",listeners:{applyclick:this.onDestroyClick,
scope:this}});this.wndExportVolume=new _s1.Storage.TypeConfirmWindow({title:_TR("EXPORT_VOLUME"),message:_TR("STORAGE_EXPORT_VOLUME_CONFIRM"),textApply:_TR("EXPORT"),textToEnter:"EXPORT",listeners:{applyclick:this.onExportClick,scope:this}});this.getParentTabItem().content.on("resize",this.onContentResize,this);this.getParentTabItem().on("show",this.onContentResize,this);this.getParentTabItem().parent.on("show",this.onContentResize,this);this.onContentResize();this.initTooltip()},onContentResize:function(a,
b,c){if(c=c||this.getParentTabItem().content.getHeight()){this.volList.setHeight(c-15);this.scrollBlock.setHeight(c-5)}if(b=b||this.getParentTabItem().content.getWidth()){b=Math.min(b-480,this.bay.racksCt.getWidth());Ext.get(this.bay.diskCtId).setWidth(b);this.bay.scroller.resize();this.bay.updateScrollerEffects();if(this.bay.getWidth()>b){Ext.get(this.bay.diskCtId).setWidth(this.bay.getWidth());this.bay.scroller.resize();this.bay.updateScrollerEffects()}}},setFilter:function(a){this.volList.setFilter(a)},
initTooltip:function(){this.tooltip=new Ext.UI.ToolTip(this.bay.el,{renderTo:this.el,cls:"storage-tooltip",html:_TR("STORAGE_NO_VOLUMES")});this.tooltip.destroyEvents(true);this.tooltip.el.on("click",function(){this.tooltip.enabled=false;this.tooltip.hide()},this);this.tooltip.on("hide",function(){this.tooltip.enabled=false},this);this.on("show",function(){this.tooltip&&this.tooltip.enabled&&this.tooltip.show()},this)},initButtons:function(){this.bRaidMode=new Ext.UI.LedButton({text:_TR("X-RAID"),
cls:this.cls+"-btn-raidmode",hidden:this.spSysManager.getSupportXRAID()!=="1",handler:this.onRaidModeClick,scope:this,width:110,disableToggle:true,state:"off"});this.bCreate=new Ext.UI.Button({text:_TR("NEW_VOLUME"),disabled:true,style:"float: left; margin-bottom: 10px;",handler:this.onCreateClick,scope:this,width:110});this.bFormat=new Ext.UI.Button({text:_TR("FORMAT"),disabled:true,style:"float: left; margin-bottom: 10px;",handler:this.onFormatClick,scope:this,width:110});this.bSpare=new Ext.UI.Button({text:_TR("GLOBAL_SPARE"),
disabled:true,style:"float: left;",handler:this.onGlobalSpareClick,scope:this,width:110});this.buttonsCt=new Ext.Container({width:110,items:[this.bRaidMode,this.bCreate,this.bFormat,this.bSpare],style:"position: absolute; right: 15px; top: 10px;"})},initVolList:function(){this.volList=new _s1.Storage.VolumesList;this.volList.on("volumeSelect",this.onVolumeSelect,this);this.volList.on("cancelClick",function(){this.bay.setAllSelected(false)},this);this.volList.on("expandClick",this.onExpandClick,
this);this.volList.on("expandGroupClick",this.onExpandGroupClick,this);this.volList.on("addParityClick",this.onAddParityClick,this);this.volList.on("createGroupClick",this.onCreateTierOrGroupClick,this);this.volList.on("createTierClick",this.onCreateTierOrGroupClick,this);this.volList.on("removeRaidGroup",this.onRemoveRaidGroup,this);this.volList.on("checkOnLowestTier",this.checkOnLowestTier,this);this.volList.on("destroyClick",function(a){var b=this.zfsVolumesManager.getVolumes();this.wndDestroyVolume.show();
this.wndDestroyVolume.load(a,b.length)},this);this.volList.on("startScrubClick",function(a){Ext.UI.MessageBox.confirm({title:'<div style="width: 100%; position: relative;">'+_TR("VOLUME_SCRUB_TITLE")+'<a style="position: absolute; height: 20px; width: 20px; right: 0; top: 0;" target="_blank" href="http://kb.netgear.com/app/answers/detail/a_id/26941/~/free-space-on-btrfs-volumes---an-overview-of-relevant-maintenance-tasks"><div class="x-system-help-button"></div></a></div>',msg:_TR("VOLUME_SCRUB_MESSAGE"),
buttons:{yes:_TR("RUN"),no:_TR("CANCEL")},fn:function(b){if(b=="yes")(b=this.zfsVolumesManager.getVolumeById(a.getVolumeId()))&&this.zfsVolumesManager.StartVolumeScrub(b,{toString:function(){return"system-storage-startscrub-zfsvolume"},volId:a.getVolumeId()})},scope:this})},this);this.volList.on("stopScrubClick",function(a){var b=this.zfsVolumesManager.getVolumeById(a.getVolumeId());b&&this.zfsVolumesManager.StopVolumeScrub(b,{toString:function(){return"system-storage-stopscrub-zfsvolume"},volId:a.getVolumeId()})},
this);this.volList.on("updateVolumeCommand",function(a){var b=this.zfsVolumesManager.getVolumeById(a.getVolumeId());b&&this.zfsVolumesManager.UpdateVolume(b,{toString:function(){return"system-storage-update-zfsvolume-silent"},volId:a.getVolumeId()})},this);this.volList.on("defragClick",function(a){Ext.UI.MessageBox.confirm({title:'<div style="width: 100%; position: relative;">'+_TR("VOLUME_DEFRAG_TITLE")+'<a style="position: absolute; height: 20px; width: 20px; right: 0; top: 0;" target="_blank" href="http://kb.netgear.com/app/answers/detail/a_id/26941/~/free-space-on-btrfs-volumes---an-overview-of-relevant-maintenance-tasks"><div class="x-system-help-button"></div></a></div>',
msg:_TR("VOLUME_DEFRAG_MESSAGE"),buttons:{yes:_TR("RUN"),no:_TR("CANCEL")},fn:function(b){if(b=="yes")(b=this.zfsVolumesManager.getVolumeById(a.getVolumeId()))&&this.zfsVolumesManager.DefragVolume(b,{toString:function(){return"system-storage-defrag-zfsvolume"},volId:a.getVolumeId()})},scope:this})},this);this.volList.on("trimClick",function(a){Ext.UI.MessageBox.confirm({title:'<div style="width: 100%; position: relative;">'+_TR("SSD_TRIM")+"</div>",msg:_TR("VOLUME_SSD_TRIM_MESSAGE"),buttons:{yes:_TR("RUN"),
no:_TR("CANCEL")},fn:function(b){if(b=="yes")(b=this.zfsVolumesManager.getVolumeById(a.getVolumeId()))&&this.zfsVolumesManager.TrimVolume(b,{toString:function(){return"system-storage-trim-zfsvolume"},volId:a.getVolumeId()})},scope:this})},this);this.volList.on("exportClick",function(a){this.wndExportVolume.show();this.wndExportVolume.load(a)},this);this.volList.on("startBalanceClick",function(a){Ext.UI.MessageBox.confirm({title:'<div style="width: 100%; position: relative;">'+_TR("VOLUME_BALANCE_TITLE")+
'<a style="position: absolute; height: 20px; width: 20px; right: 0; top: 0;" target="_blank" href="http://kb.netgear.com/app/answers/detail/a_id/26941/~/free-space-on-btrfs-volumes---an-overview-of-relevant-maintenance-tasks"><div class="x-system-help-button"></div></a></div>',msg:_TR("VOLUME_BALANCE_MESSAGE"),buttons:{yes:_TR("RUN"),no:_TR("CANCEL")},fn:function(b){if(b=="yes")(b=this.zfsVolumesManager.getVolumeById(a.getVolumeId()))&&this.zfsVolumesManager.StartVolumeBalance(b,{toString:function(){return"system-storage-startbalance-zfsvolume"},
volId:a.getVolumeId()})},scope:this})},this);this.volList.on("startDiskTestClick",function(a){Ext.UI.MessageBox.confirm({title:'<div style="width: 100%; position: relative;">'+_TR("VOLUME_TEST_DISK_TITLE")+'<a style="position: absolute; height: 20px; width: 20px; right: 0; top: 0;" target="_blank" href="http://kb.netgear.com/app/answers/detail/a_id/26941/~/free-space-on-btrfs-volumes---an-overview-of-relevant-maintenance-tasks"><div class="x-system-help-button"></div></a></div>',msg:_TR("VOLUME_TEST_DISK_MESSAGE"),
buttons:{yes:_TR("RUN"),no:_TR("CANCEL")},fn:function(b){if(b=="yes")(b=this.zfsVolumesManager.getVolumeById(a.getVolumeId()))&&this.zfsVolumesManager.StartVolumeDiskTest(b,{toString:function(){return"system-storage-startdisktest-zfsvolume"},volId:a.getVolumeId()})},scope:this})},this);this.volList.on("showProperties",function(a){var b=this.zfsVolumesManager.getVolumeById(a.getVolumeId());if(b){if(!this.prop){this.prop=new _s1.Storage.PropertiesWindow;this.prop.on("volpropapply",this.onVolPropApply,
this)}this.prop.show();this.prop.loadVolume(b,this.bay.jbots,a.getVolumeRaidLevel())}},this);this.volList.on("scheduleClick",function(a){var b=this.zfsVolumesManager.getVolumeById(a.getVolumeId());if(b){if(!this.prop){this.prop=new _s1.Storage.PropertiesWindow;this.prop.on("volpropapply",this.onVolPropApply,this)}this.prop.show();this.prop.loadVolume(b,this.bay.jbots,a.getVolumeRaidLevel());this.prop.selectTab(4)}},this);return this.volList},initBay:function(){this.bay=new _s1.Storage.Bay;
this.bay.on("selectionchange",function(a,b,c,d,f){this.countSelectedEnc=d.length;this.bCreate.disable();this.bFormat.disable();this.bSpare.disable();this.wndCreateVolume.raidmode=="flexraid"&&b&&!c&&!a&&this.bCreate.enable();f.length&&this.bFormat.enable();b&&!c&&this.bSpare.enable()},this);return this.bay},onVolPropApply:function(a){this.zfsVolumesManager.CommitVolume(a,"system-storage-commit-zfsvolume")},onVolumeSelect:function(a,b){this.bay.onVolumeSelect(a,b);if(this.selectedVolume=a){this.selectedVolume.VolumeRaidLevel!=
"50"&&!(a.DpvVirtualDevices.length>1&&a.DpvFirstVirtialDevice.getLevel()=="1")&&this.selectedVolume.VolumeRaidLevel!="60"&&this.bRaidMode.enable();this.selectedVolume.raidmode=="xraid"?this.bRaidMode.setState("on"):this.bRaidMode.setState("off")}},onRemoveRaidGroup:function(a,b){var c=this.zfsVolumesManager.getVolumeById(a.getVolumeId());c&&this.zfsVolumesManager.RemoveRaidGroup(c,b,{toString:function(){return"system-storage-startremovegroup-zfsvolume"},volId:a.getVolumeId()})},onCreateClick:function(){var a=
this.bay.getSelectedDpvInstances(),b;if(a.length===1)b=_TR("ALERTS_MSG_ON_SELECT_ONE_DISK");else if(!b&&a.length>1)b=this.checkIfDiffrentTier(a)&&this.getTier(a,true)>6?this.diffrentTierWarningGenirator("create",a):"";b?Ext.UI.MessageBox.confirm({title:_TR("MESSAGEBOX_WARNING"),msg:b,fn:function(c){c=="yes"&&this.onCreateVolume()},scope:this}):this.onCreateVolume()},checkIfDiffrentTier:function(a){var b,c=false;a.forEach(function(d){if(b){if(b!=d.getType())c=true}else b=d.getType()});return c},diffrentTierWarningGenirator:function(a,
b,c){function d(){for(var p=f(b,true),o=f(c),q,r,t,s=0;s<o.potTier.length;s++)if(o.potTier[s]&&o.potTier[s].key&&p.mapTier[o.potTier[s].key]){q=o.potTier[s].key;r=p.mapTier[o.potTier[s].key]}if(!q||!r){t=p.potTier.length-1;q=o.potTier[0]&&o.potTier[0].key;r=p.potTier[t]&&p.potTier[t].value;t=p.potTier[t]&&p.potTier[t].key}return String.format("{0} {1} {2} {3} <br><br>{4}",h,String.format(k,e[q]),String.format(j,r,e[t||q]),p.potTier&&p.potTier[0]&&p.potTier[0].key>6&&p.potTier[0].value>1&&String.format(m,
p.potTier[0].value,e[p.potTier[0].key])||"",String.format(n,g[a]))}function f(p,o){if(p.length==0)return null;var q={},r=o?"key":"value";o=p[0].getType();for(var t=1,s=0;s<p.length;s++){var u=p[s].getType();if(q[u]==null)q[u]=1;else q[u]++;if(q[u]>t){o=u;t=q[u]}}potTier=Object.keys(q).map(function(z){return{key:z,value:q[z]}}).sort(function(z,y){return z[r]<y[r]});return{mapTier:q,potTier:potTier,maxTier:o,count:t}}var e=["","SATA SMR","SATA 5900 RPM","SATA 7200 RPM","SAS 7200 RPM","SAS 10K RPM",
"SAS 15K RPM","SATA SSD","SAS SSD","NVME SSD","NVME OPTANE"],g={tier:_TR("STORAGE_QUESTIONS_TIPE_ADD_TIER"),group:_TR("STORAGE_QUESTIONS_TIPE_ADD_GROUP"),expand:_TR("STORAGE_QUESTIONS_TIPE_EXPAND_VOLUME"),parity:_TR("STORAGE_QUESTIONS_TIPE_ADD_PARITY")},h=_TR("STORAGE_ADD_WARNING_MSG_A"),k=_TR("STORAGE_ADD_WARNING_MSG_B"),j=_TR("STORAGE_ADD_WARNING_MSG_C"),m=_TR("STORAGE_ADD_WARNING_MSG_D"),n=_TR("STORAGE_ADD_WARNING_MSG_E");_TR("STORAGE_ADD_WARNING_MSG_F");return{create:function(){var p=f(b);return String.format("{0} {1} {2} <br><br>{3}",
h,String.format(j,p.count,e[p.maxTier]),p.potTier&&p.potTier[1]&&p.potTier[1].key>6&&p.potTier[1].value>1&&String.format(m,p.potTier[1].value,e[p.potTier[1].key])||"",String.format(n,_TR("STORAGE_QUESTIONS_TIPE_CREATE_A_VOLUME")))},tier:d,group:d,expand:d,parity:d}[a]()},onCreateVolume:function(){if(this.countSelectedEnc>1){this.wndCreateVolumeAcrossEncs=this.wndCreateVolumeAcrossEncs||new _s1.Storage.TypeConfirmWindow({title:_TR("CREATE_VOLUME"),message:_TR("CREATE_VOLUME_DIFF_ENC_CONFIRM"),
textApply:_TR("CREATE_VOLUME_DIFF_ENC_CONFIRM_PROCEED"),textToEnter:"PROCEED",listeners:{applyclick:this.showWindow,scope:this}});this.wndCreateVolumeAcrossEncs.show();this.wndCreateVolumeAcrossEncs.load()}else this.showWindow()},showWindow:function(){this.wndCreateVolume.show();this.wndCreateVolume.load(this.bay.getSelectedDisks().length)},onFormatClick:function(){var a=this.bay.getSelectedDpvInstances();this.wndFormatDisk=this.wndFormatDisk||new _s1.Storage.TypeConfirmWindow({title:_TR("FORMAT"),
message:_TR("STORAGE_FORMAT_DISK_CONFIRM"),textApply:_TR("FORMAT"),textToEnter:a&&a.length==1?"FORMAT":_TR("FORMAT_ALL_SELECTED_DRIVES"),listeners:{applyclick:this.onFormatConfirm,scope:this}});this.wndFormatDisk.show();this.wndFormatDisk.load()},onFormatConfirm:function(){this.zfsDisksManager.FormatDisks(this.bay.getSelectedDpvInstances(),"system-storage-format-disk")},onGlobalSpareClick:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.selectedVolume&&this.selectedVolume.getDpvVolume().getVirtualDevices();
var b=[],c=[],d=[];_.each(this.volList.items.items,function(r){r=r.getDpvVolume().getVirtualDevices();_.each(r,function(t){t=_a(t,"_i4m").getDisks();for(var s=0;s<t.length;++s)b.push(_a(t[s],"_i4d").getDiskId())})});if(a){a=a.getZFSDisksManager().getDiskEnclosures();for(var f=0;f<a.length;f++){var e=_a(a[f],"_i4e");_.each(b,function(r){if(r=e.getDiskById(r)){r=_a(r,"_i4d");c.push(+r.getCapacity());d.push(+r.getType())}},this)}}a=
this.bay.getSelectedDpvInstances();var g=true,h=true;f="";for(var k=this.bay.getSelectedDpvInstances(),j=0,m=a.length;j<m;++j){h=g=true;var n=a[j],p=n.getClass();if(!(p.indexOf("SATA")==-1&&p.indexOf("SAS")==-1)){var o=+n.getCapacity(),q=+n.getType();_.each(c,function(r){if(o<r)g=false},this);if(!g){f=_TR("STORAGE_OVER_CAPACITY");break}_.each(d,function(r){if(q<r)h=false},this);if(!h){f=_TR("STORAGE_OVER_TYPE");break}}}g&&h?this.zfsDisksManager.MakeSpare(k,"system-storage-append-spares"):Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),
msg:f,buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.WARNING,fn:function(r){r=="ok"&&this.zfsDisksManager.MakeSpare(k,"system-storage-append-spares")}.bind(this)})},onAddParityClick:function(a){var b=this.bay.getSelectedDpvInstances(),c=this.getTier(b),d=this.getTier(a.selectedGroupDisks);this.isHighestSSDTier(c,d)||this.isLowestSSDTier(c,d)?Ext.UI.MessageBox.confirm({title:_TR("MESSAGEBOX_WARNING"),msg:this.diffrentTierWarningGenirator("parity",b,a&&a.selectedGroupDisks),fn:function(f){f=="yes"&&this.continueAddParity(b,
a)},scope:this}):this.continueAddParity(b,a)},continueAddParity:function(a,b){(b=this.zfsVolumesManager.getVolumeById(b.getVolumeId()))&&this.zfsVolumesManager.AddParity(b,a,"system-storage-addparity-zfsvolume")},onExpandClick:function(a,b){var c=this.bay.getSelectedDpvInstances(),d=this.getTier(c),f=this.getTier(a.selectedGroupDisks);this.isHighestSSDTier(d,f)||this.isLowestSSDTier(d,f)?Ext.UI.MessageBox.confirm({title:_TR("MESSAGEBOX_WARNING"),msg:this.diffrentTierWarningGenirator("expand",c,a&&
a.selectedGroupDisks),fn:function(e){e=="yes"&&this.continueExpand(c,b,a)},scope:this}):this.continueExpand(c,b,a)},isHighestSSDTier:function(a,b){return a<7&&b>6},isLowestSSDTier:function(a,b){return a>6&&b<7},continueExpand:function(a,b,c){this.zfsVolumesManager.ExpandCapacity("system-storage-expand-zfsvolume",this.zfsVolumesManager.getVolumeById(c.getVolumeId()),a)},onExpandGroupClick:function(a,b){a=this.zfsVolumesManager.getVolumeById(a.getVolumeId());var c=this.bay.getSelectedDpvInstances();
this.zfsVolumesManager.ExpandRaidGroup("system-storage-expand-zfsvolume",a,c,b)},onCreateTierOrGroupClick:function(a,b,c){var d=this.bay.getSelectedDpvInstances();if(d.length>1&&this.checkIfDiffrentTier(d)&&this.getTier(d,true)>6)Ext.UI.MessageBox.confirm({title:_TR("MESSAGEBOX_WARNING"),msg:this.diffrentTierWarningGenirator(c?"group":"tier",d,a&&a.DrivesAll),fn:function(f){if(f=="yes")c?this.continueCreateGroup(a,b):this.continueCreateTier(a,b)},scope:this});else c?this.continueCreateGroup(a,b):
this.continueCreateTier(a,b)},continueCreateGroup:function(a,b){this.wndAddGroup=this.wndAddGroup||new _s1.Storage.AddGroupWindow({listeners:{applyclick:function(c,d,f,e){c=this.zfsVolumesManager.getVolumeById(d.getVolumeId());d=this.bay.getSelectedDpvInstances();this.zfsVolumesManager.ExpandNewRaidGroup("system-storage-expand-zfsvolume",c,d,e,f)},scope:this}});this.wndAddGroup.show();this.wndAddGroup.loadArgs({volume:a,manyEncs:b,disks:this.bay.getSelectedDpvInstances()});this.wndAddGroup.center()},
continueCreateTier:function(a,b){this.wndAddTier=this.wndAddTier||new _s1.Storage.AddTierWiard({listeners:{applyDataTierClick:function(c){this.applyDataTierRtnObj=c;var d=this.zfsVolumesManager.getVolumeById(c.volume.getVolumeId()),f=this.bay.getSelectedDpvInstances();this.zfsVolumesManager.ExpandNewRaidGroup("system-storage-expand-zfsvolume",d,f,c.concatenated,c.encMount)},scope:this}});this.wndAddTier.show();this.wndAddTier.loadArgs({volume:a,manyEncs:b,disks:this.bay.getSelectedDpvInstances()});
this.spVolumeScheduleManager.UpdateSchedules({cmd:"system-volschedulepanel-update-schedules"})},onDestroyClick:function(a){a.stopUpdateScrubResilverProgress();if(a=this.volumeToRemove=this.zfsVolumesManager.getVolumeById(a.getVolumeId())){var b=this.zfsVolumesManager.getVolumes().length,c=["DEAD","INACTIVE"],d=a.getState();if(this.selectedVolume.raidmode=="xraid"&&b==1&&c.indexOf(d)==-1){a.putVolumeMode("0");this.zfsVolumesManager.CommitVolume(a,"system-storage-commit-zfsvolume");this.bRaidMode.setState("off")}b=
_a(this.spDevice,"_iq").getTimeOut();_a(this.spDevice,"_iq").putTimeOut(3E5);this.zfsVolumesManager.RemoveVolume(a,"system-storage-remove-zfsvolume");_a(this.spDevice,"_iq").putTimeOut(b)}},onExportClick:function(a){(a=this.zfsVolumesManager.getVolumeById(a.getVolumeId()))&&this.zfsVolumesManager.Export(a,"system-storage-export-zfsvolume")},checkOnLowestTier:function(a){var b=0,c;a.DpvVirtualDevices.forEach(function(f){f=_a(f,"_i4m");
c=f.getTierType()<c?f.getTierType():c||f.getTierType();b=f.getTierType()>b?f.getTierType():b});var d=this.getTier(this.bay.getSelectedDpvInstances());if(c>6||b<=7){d=c>6&&d<=7||b<=7&&d>6;a.changeGroupB&&a.changeGroupB(d,b==7)}else a.changeGroupB&&a.changeGroupB(false)},getTier:function(a,b){var c,d=function(f,e){return b?f<e:f>e};a.forEach(function(f){if(c){if(d(c,f.getType()))c=f&&f.getType&&f.getType()}else c=f&&f.getType&&f.getType()});return c},onRaidModeClick:function(){if(this.selectedVolume)if(this.selectedVolume.raidmode==
"xraid")Ext.UI.MessageBox.confirm({title:_TR("FLEXRAID_MODE"),msg:_TR("FLEXRAID_MODE_CONFIRM"),fn:function(b){if(b=="yes"){b=this.selectedVolume.getDpvVolume();b.putVolumeMode("0");this.zfsVolumesManager.CommitVolume(b,"system-storage-commit-zfsvolume");this.bRaidMode.setState("off")}},scope:this});else if(this.manyEncsInVol)Ext.UI.MessageBox.info({title:_TR("XRAID_MODE"),msg:_TR("XRAID_MODE_MANY_ENCLOSURES")});else if(this.manyVolsInEnc)Ext.UI.MessageBox.info({title:_TR("XRAID_MODE"),msg:_TR("XRAID_MODE_MANY_VOLUMES")});
else if(this.existsRaid0OrRaid10)Ext.UI.MessageBox.info({title:_TR("XRAID_MODE"),msg:_TR("XRAID_MODE_RAID0_RAID10")});else if(this.existsExpandedVolume)Ext.UI.MessageBox.info({title:_TR("XRAID_MODE"),msg:_TR("XRAID_MODE_EXPANDED_VOLUMES")});else{var a=this.selectedVolume.getDpvVolume();Ext.UI.MessageBox.confirm({title:_TR("XRAID_MODE"),msg:_TR("XRAID_MODE_CONFIRM"),fn:function(b){if(b=="yes"){a.putVolumeMode("1");this.zfsVolumesManager.CommitVolume(a,"system-storage-commit-zfsvolume");this.bRaidMode.setState("on")}},
scope:this})}},createVolume:function(a,b,c,d,f,e,g,h,k,j){c=this.volumeToAppend=_a(new _1.zfsVol(false),"_i4o");f=this.bay.getSelectedDpvInstances();var m=_a(new _1.zfsvDev(false),"_i4m");m.putType("RAID");m.putLevel(b);m.putGroupsNumber(d);m.AppendDisks(f);c.AppendVirtualDevices([m]);c.putVolumeName(a);c.putQuota(e?"on":"off");c.putCreateDefaultShare(g);if(h){c.putEncryptionEnabled(true);c.putEncryptionMount(h);c.putEncryptionEmail(k?"1":"0");c.putEncryptionAllowOverwriteKey(j?
"1":"0")}localStorage.removeItem("safeMode");this.zfsVolumesManager.AppendVolume(c,"system-storage-append-zfsvolume");this.wndCreateVolume.hide()},getParentTabItem:function(){return this.parentTabItem},refresh:function(a){this.mask=this.mask||this.getParentTabItem().mask;this.disksSuccess=this.volumesSuccess=false;this.bay.selectedDisks=undefined;this.zfsVolumesManager.UpdateVolumes(a?"sync-update-zfsvolumes":"system-storage-update-zfsvolumes");this.zfsDisksManager.updateDiskEnclosures(a?"sync-update-zfsdisks":
"system-storage-update-zfsdisks")},populateVolumes:function(){var a=_a(this.spSysManager.getSysInfo(),"_i43");a=a&&a!=_4&&a.getReadOnlyDataVolumes()=="1";var b=this.zfsVolumesManager.getVolumes();this.bRaidMode.disable();this.bRaidMode.setState("off");if(b&&b!=_4){this.bay.populateVolumes(b);this.wndCreateVolume.populateVolumes(b);this.volList.populateVolumes(b,a);this.tooltip.enabled=this.tooltip.enabled&&b.length==0;this.isEmptyVolumesCollection=this.isEmptyVolumesCollection||
this.isEmptyVolumesCollection===undefined&&b.length==0;this.existsExpandedVolume=this.existsRaid0OrRaid10=this.manyEncsInVol=this.manyVolsInEnc=false;_.each(this.volList.items.items,function(c){_.each(this.bay.jbots,function(e){_.each(e.disksCt.items.items,function(g){if(g.volume&&g.volume.getGuid()==c.getDpvVolume().getGuid()){c.connectedJbots=c.connectedJbots||[];c.connectedJbots.indexOf(e)==-1&&c.connectedJbots.push(e);e.connectedVolumes=e.connectedVolumes||[];e.connectedVolumes.indexOf(c)==
-1&&e.connectedVolumes.push(c);if(e.connectedVolumes.length>1)this.manyVolsInEnc=true;if(c.connectedJbots.length>1)this.manyEncsInVol=true}},this)},this);if(c.getDpvVolume){var d=c.getDpvVolume().getRAIDLevel(),f=c.getDpvVolume().getVirtualDevices();if(d=="0"||d=="10")this.existsRaid0OrRaid10=true;if(f.length>1)this.existsExpandedVolume=true}},this)}else this.tooltip.enabled=false;this.fireEvent("populateVolumes",b)},populateDisks:function(){var a=this.zfsDisksManager.getDiskEnclosures(),b=this.zfsDisksManager.getHeadEnclosure();
this.bay.populateDisks(a,b)},populate:function(){if(this.volumesSuccess&&this.disksSuccess){this.show();this.populateDisks();this.populateVolumes();this.onContentResize();this.tooltip.enabled?this.tooltip.show():this.tooltip.hide()}},showError:function(a,b,c){if(a&&b){a=_TR(b)+"<br /><br />"+c;_a(_7(_._3.ErrorReporter),"IErrorReporter").report(a,"Code: "+b,_2.ERROR,{windowTitle:_TR("ZFSVOLUMES_FAILED"),title:"",subTitle:a,buttonInspect:false,buttonShowLog:false,buttonSend:false,
checkboxShow:false})}},showProgress:function(){this.updatesCount||this.mask.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.mask.hide()},_i3v:{_o1:function(a,b){if(b=="system-storage-update-zfsvolumes"||b=="sync-update-zfsvolumes"||b=="system-storage-update-zfsvolume"||b=="system-storage-commit-zfsvolume"||b=="system-storage-commit-zfsvolume-tier"||b=="system-storage-add-schedule"||b=="system-storage-startscrub-zfsvolume"||
b=="system-storage-stopscrub-zfsvolume"||b=="system-storage-startbalance-zfsvolume"||b=="system-storage-startdisktest-zfsvolume"||b=="system-storage-startremovegroup-zfsvolume"||b=="system-storage-append-zfsvolume"||b=="system-storage-remove-zfsvolume"||b=="system-storage-expand-zfsvolume"||b=="system-storage-addparity-zfsvolume"||b=="system-storage-export-zfsvolume"||b=="system-storage-trim-zfsvolume"||b=="system-storage-defrag-zfsvolume")this.showProgress();return _5},_o2:function(a,b){if(b==
"system-storage-update-zfsvolumes"||b=="sync-update-zfsvolumes"){this.volumesSuccess=true;this.populate()}if(b=="system-storage-startscrub-zfsvolume"||b=="system-storage-stopscrub-zfsvolume"||b=="system-storage-startbalance-zfsvolume"||b==" system-storage-startdisktest-zfsvolume"||b=="system-storage-startremovegroup-zfsvolume")if(b.volId){a=this.zfsVolumesManager.getVolumeById(b.volId);this.zfsVolumesManager.UpdateVolume(a,{toString:function(){return"system-storage-update-zfsvolume"},volId:b.volId})}if(b==
"system-storage-append-zfsvolume"){this.volumeToAppend.getEncryptionEnabled()=="1"&&Ext.UI.MessageBox.confirm({title:_TR("STORAGE_VOLUME_CREATE_ENC_SUCCESS"),msg:_TR("STORAGE_VOLUME_CREATE_ENC_SUCCESS_KEY_DOWNLOAD"),fn:function(f){if(f=="yes"){f=Ext.id();var e=document.createElement("iframe");document.body.appendChild(e);e.id=f;e.name=f;e.style.width="0px";e.style.height="0px";e.style.zIndex=-110;e.style.left="100px";e.style.top="100px";e.style.position="fixed";e.src=document.fsshare+this.volumeToAppend.getEncryptionMount()+
"/"+this.volumeToAppend.getVolumeName()+".key"}},scope:this});_a(_7(_._3.System.Frame),"IExtNative").getNative().alarmbar.onClearClick()}if(b=="system-storage-append-zfsvolume"||b=="system-storage-addparity-zfsvolume"||b=="system-storage-export-zfsvolume"||b=="system-storage-commit-zfsvolume")this.refresh(true);if(b=="system-storage-expand-zfsvolume"){var c=this.applyDataTierRtnObj;if(c){a=this.zfsVolumesManager.getVolumeById(c.volume.getVolumeId());a.putTierType(c.type);
c.type=="Data"&&a.putTierDataMigrationThreshold(c.percentage);this.zfsVolumesManager.CommitVolume(a,"system-storage-commit-zfsvolume-tier")}else this.refresh()}if(b=="system-storage-commit-zfsvolume-tier"){c=this.applyDataTierRtnObj;if((b=c.strings)&&c.type=="Data"){a=this.zfsVolumesManager.getVolumeById(c.volume.getVolumeId());c=b.hour;if(localStorage.getItem("enable24Hour")!="true")if(c==12){if(b.ampm==_TR("AM"))c=0}else if(b.ampm==_TR("PM"))c=+c+12;var d=_a(new _1.zfsVolSchedule,"_i4r");
d.putAction(7);d.putVolumeName(a.getVolumeName());d.putEnabled("1");d.putIntervalMinute(b.min);d.putIntervalHour(c);d.putIntervalDayOfMonth(b.dom);d.putIntervalMonth(b.month);d.putIntervalDayOfWeek(b.dow);d.putId((this.spVolumeScheduleManager.getSchedules().length||0)+1);this.spVolumeScheduleManager.AddSchedule(d,"system-storage-add-schedule");delete this.applyDataTierRtnObj}this.refresh(true)}return _5},OnVolumeAdd:function(){this.refresh(true)},_o3:function(a,b,c){if(c=="system-storage-update-zfsvolume"||
c=="system-storage-update-zfsvolume-silent")if(c.volId){this.volList.updateVolume(this.zfsVolumesManager.getVolumeById(c.volId));this.refresh()}if(c=="system-storage-update-zfsvolumes"||c=="sync-update-zfsvolumes"||c=="system-storage-update-zfsvolume"||c=="system-storage-commit-zfsvolume"||c=="system-storage-commit-zfsvolume-tier"||c=="system-storage-remove-zfsvolume"||c=="system-storage-add-schedule"||c=="system-storage-startscrub-zfsvolume"||c=="system-storage-stopscrub-zfsvolume"||c=="system-storage-startbalance-zfsvolume"||
c=="system-storage-startdisktest-zfsvolume"||c=="system-storage-startremovegroup-zfsvolume"||c=="system-storage-append-zfsvolume"||c=="system-storage-expand-zfsvolume"||c=="system-storage-addparity-zfsvolume"||c=="system-storage-export-zfsvolume"||c=="system-storage-replace-zfsdisks"||c=="system-storage-attach-zfsdisks"||c=="system-storage-detach-zfsdisk"||c=="system-storage-trim-zfsvolume"||c=="system-storage-defrag-zfsvolume"){c!="system-storage-remove-zfsvolume"&&this.hideProgress();if(c=="system-storage-remove-zfsvolume"){a==
_5&&this.refresh.defer(5E3,this,[true]);this.hideProgress.defer(5100,this)}if(a!=_5){a=_a(b,"_io").getLastNMLError();a.getErrorCode();this.refresh();a&&this.showError(a,a.getErrorCode(),a.getErrorDetails())}}return _5}},_i4h:{_o1:function(a,b){if(b=="system-storage-update-zfsdisks"||b=="sync-update-zfsdisks"||b=="system-storage-format-disk"||b=="system-storage-append-spares")this.showProgress();return _5},_o2:function(a,b){if(b=="system-storage-update-zfsdisks"||
b=="sync-update-zfsdisks"){this.disksSuccess=true;this.populate()}else if(b=="system-storage-append-spares"||b=="system-storage-format-disk")this.refresh();return _5},OnDiskAdd:function(){this.refresh()},OnDiskRemove:function(){this.refresh()},OnDiskUpdate:function(){this.refresh()},_o3:function(a,b,c){if(c=="system-storage-update-zfsdisks"||c=="sync-update-zfsdisks"||c=="system-storage-format-disk"||c=="system-storage-append-spares"){this.hideProgress();if(b=_a(b,"_io").getLastNMLError())var d=
b.getErrorCode(),f=b.getErrorDetails();a!=_5&&this.showError(b,d,f)}return _5}},_i4t:{_o1:function(a,b){if(b.cmd=="system-volschedulepanel-update-schedules"||b.cmd=="system-volschedulepanel-commit-schedule"||b.cmd=="system-volschedulepanel-add-schedule"||b.cmd=="system-volschedulepanel-remove-schedule")this.showProgress();return _5},_o3:function(a,b,c){if(c.cmd=="system-volschedulepanel-update-schedules"||c.cmd=="system-volschedulepanel-commit-schedule"||
c.cmd=="system-volschedulepanel-add-schedule"||c.cmd=="system-volschedulepanel-remove-schedule")this.hideProgress();return _5}},_is:{_o1:function(a,b){b=="shutdownEDAdevice"&&this.showProgress();return _5},_o2:function(a,b){if(b=="shutdownEDAdevice"){this.hideProgress();this.refresh(false)}return _5},_o3:function(a,b,c){if(c=="shutdownEDAdevice"){this.hideProgress();if(a!=_5){_a(this.prompt,"_i1").Advise(this);this.prompt.Show(_s10.PromptWindow.ERROR,
{caption:_TR("SHUTDOWN_SYSTEM"),message:_TR("EDA_SHUTDOWN_FAILED")})}}return _5}}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.VolumesList=_._1(Ext.Container,{cls:"storage-volumesct",isEmpty:true,constructor:function(){_s1.Storage.VolumesList.superclass.constructor.apply(this,arguments);_a(_7(_._3.System.SystemTab),"_i1").Advise(this)},initComponent:function(){_s1.Storage.VolumesList.superclass.initComponent.apply(this,arguments);this.on("afterrender",function(){this.scroller=new Ext.UI.Scroller({dom:this.el.dom,type:"vertical",dynamic:true,
margins:{top:2,right:1,bottom:1,left:1}});this.scroller.reg();FocusManager.reg(this.el,{keydown:function(a){if(a.target.tagName!="INPUT")switch(a.getKey()){case a.UP:this.onKeyDown("UP");break;case a.DOWN:this.onKeyDown("DOWN");break}}},this)},this)},onKeyDown:function(a){if(!this.isEmpty)if(a=this.items.itemAt(this.items.indexOf(this.selectedVolume)+(a=="UP"?-1:1))){this.selectVolume(a);a.el.scrollIntoView(this.el,true,true);this.scroller.resize()}},setFilter:function(a){var b=undefined;this.isEmpty||
this.items.each(function(c){var d=c.getVolumeName();if((new RegExp(RegExp.escape(a),"gi")).test(d)){c.show();b=b||c;if(c.getVolumeId()==this.selectedVolumeID)b=c}else c.hide()},this);this.selectVolume(b)},populateVolumes:function(a){this.removeAll();this.isEmpty=!a.length;Ext.each(a,function(b){(b=_a(b,"_i4o"))&&this.addVolume({DpvVolume:b,isReadOnlyVolumes:b.getReadOnly()=="1"})},this);this.setFilter("");if(this.isEmpty){this.add({xtype:"box",cls:"storage-volumesct-novolumes",html:_TR("STORAGE_NO_VOLUMES")});
this.doLayout()}},addVolume:function(a){a=new _s1.Storage.Volume(a);a.on("select",this.onSelectVolume,this);a.on("destroyClick",function(b){this.fireEvent("destroyClick",b)},this);a.on("cancelClick",function(b){this.fireEvent("cancelClick",b)},this);a.on("expandClick",function(b,c){this.fireEvent("expandClick",b,c)},this);a.on("expandGroupClick",function(b,c){this.fireEvent("expandGroupClick",b,c)},this);a.on("addParityClick",function(b){this.fireEvent("addParityClick",b)},this);a.on("createGroupClick",
function(b,c){this.fireEvent("createGroupClick",b,c,true)},this);a.on("createTierClick",function(b,c){this.fireEvent("createTierClick",b,c,false)},this);a.on("removeRaidGroup",function(b,c){this.fireEvent("removeRaidGroup",b,c)},this);a.on("createClick",function(b,c){this.fireEvent("createClick",b,c)},this);a.on("startScrubClick",function(b){this.fireEvent("startScrubClick",b)},this);a.on("stopScrubClick",function(b){this.fireEvent("stopScrubClick",b)},this);a.on("startBalanceClick",function(b){this.fireEvent("startBalanceClick",
b)},this);a.on("startDiskTestClick",function(b){this.fireEvent("startDiskTestClick",b)},this);a.on("updateVolumeCommand",function(b){this.fireEvent("updateVolumeCommand",b)},this);a.on("propertiesClick",function(b){this.fireEvent("showProperties",b)},this);a.on("managemodeselect",function(b,c){this.fireEvent("managemodeselect",b,c);return true},this);a.on("defragClick",function(b){this.fireEvent("defragClick",b)},this);a.on("trimClick",function(b){this.fireEvent("trimClick",b)},this);a.on("scheduleClick",
function(b){this.fireEvent("scheduleClick",b)},this);a.on("exportClick",function(b){this.fireEvent("exportClick",b)},this);a.on("checkOnLowestTier",function(b){this.fireEvent("checkOnLowestTier",b)},this);this.add(a);this.doLayout();a.inspector=this.inspector;a.inspGroupSum=this.inspGroupSum;a.inspGroupIOStats=this.inspGroupIOStats;return a},updateVolume:function(a){this.items.each(function(b){if(a.getVolumeId()==b.getVolumeId()){b.updateScrubResilverProgress(a.getScrubProgress(),a.getResilverProgress(),
a.getResilverRemaining(),a.getBalanceProgress(),a.getDisktestProgress(),a.getRemoveRAIDGroupProgress(),a.getBalanceType());b.updateStateLed(a.getState());return false}},this)},onSelectVolume:function(a,b){this.selectedVolumeID=a.getVolumeId();this.selectedVolume&&this.selectedVolume!=a&&this.selectedVolume.setSelected(false);this.selectedVolume=a;this.fireEvent("volumeSelect",a,b)},selectVolume:function(a){if(a&&a.setSelected)a.setSelected(true);else{this.fireEvent("volumeSelect");this.selectedVolume=
undefined}}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.Volume=_._1(Ext.BoxComponent,{cls:"storage-volumesct-volume",DpvVolume:"",DpvVolumeName:"",DpvVolumeId:"",VolumeRaidLevel:"",colorUsed:"#3cdd0c",colorSnap:"#feea81",colorFree:"#28a6ed",colorMeta:"#B2B2B2",constructor:function(a){this.initVolume(a.DpvVolume);_s1.Storage.Volume.superclass.constructor.call(this,a);this.addEvents("select","propertiesClick","scheduleClick","destroyClick","exportClick","addParityClick","cancelClick","createClick","createGroupClick",
"startScrubClick","stopScrubClick","updateScrubCommand","defragClick","trimClick","exportClick","checkOnLowestTier","createTierClick","removeRaidGroup");if(!_s1.Storage.Volume.TOOLTIP_TEMPLATE_GROUP)_s1.Storage.Volume.TOOLTIP_TEMPLATE_GROUP=new Ext.Template('<tr><td colspan="3" class="storage-volumeinfo-cellname">{name}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("STORAGE_DATA")+" "+_TR("STORAGE_ALLOCATE")+':</td><td><div style="background-color: '+this.colorUsed+
'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="storage-diskinfo-cellvalue">{dataAllocated}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("STORAGE_META_DATA")+" "+_TR("STORAGE_ALLOCATE")+':</td><td><div style="background-color: '+this.colorMeta+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="storage-diskinfo-cellvalue">{metaDataAllocated}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("UNALLOCATED")+':</td><td><div style="background-color: '+
this.colorFree+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="storage-diskinfo-cellvalue">{freeSpace}</td></tr>');if(!_s1.Storage.Volume.TOOLTIP_TEMPLATE_VOLUME)_s1.Storage.Volume.TOOLTIP_TEMPLATE_VOLUME=new Ext.Template('<tr><td colspan="3" class="storage-volumeinfo-cellname">'+_TR("VOLUME")+': {name}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("STORAGE_DATA")+" ("+_TR("STORAGE_USED_ALLOCATE")+'):</td><td><div style="background-color: '+
this.colorUsed+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="storage-diskinfo-cellvalue">{dataUsed}/{dataAllocated}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("STORAGE_META_DATA")+" ("+_TR("STORAGE_USED_ALLOCATE")+'):</td><td><div style="background-color: '+this.colorMeta+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="storage-diskinfo-cellvalue">{metaDataUsed}/{metaDataAllocated}</td></tr><tr><td class="storage-diskinfo-cellname">'+
_TR("UNALLOCATED")+':</td><td><div style="background-color: '+this.colorFree+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="storage-diskinfo-cellvalue">{freeSpace}</td></tr>')},initVolume:function(a){this.volumeIsrescanning=false;this.DpvVolumeName=a.getVolumeName();this.DpvVolumeId=a.getVolumeId();if((this.capacity=a.getCapacity())&&this.capacity!=_4)this.capacity*=1024;else this.capacity=0;if((this.available=a.getAvailable())&&this.available!=_4)this.available*=
1024;else this.available=0;if((this.snapshots=a.getUsedBySnapshotKB())&&this.snapshots!=_4&&this.snapshots*1>=0)this.snapshots*=1024;else if(this.snapshots*1===-115)this.volumeIsrescanning=true;else this.snapshots=0;this.state=a.getState();var b=0,c=false,d=0;accTiers=0;this.VolumeRaidLevel=a.getRAIDLevel();this.ChannelIDs=[];this.raidGroups=[];this.tiers=["","SATA SMR","SATA 5900 RPM","SATA 7200 RPM","SAS 7200 RPM","SAS 10K RPM","SAS 15K RPM","SATA SSD","SAS SSD","NVME SSD","NVME OPTANE"];this.DrivesHashByVdevId=
{};this.DrivesAll=[];this.DpvVirtualDevices=a.getVirtualDevices();this.DpvFirstVirtialDevice=_a(this.DpvVirtualDevices[0],"_i4m");Ext.each(this.DpvVirtualDevices,function(f,e){var g=_a(f,"_i4m");if(g){if(!c){c=accTiers&&g.getTierType()!=accTiers;accTiers=g.getTierType()}if(d<g.getTierType())d=g.getTierType();f=g.getVirtualDeviceId();this.DrivesHashByVdevId[f]=[];this.raidGroups.push([f,String.format(_TR("STORAGE_VOLUME_RAID_GROUP_NUMBER"),e+1)+" ("+this.tiers[g.getTierType()]+
")",this.DrivesHashByVdevId[f],g]);b+=g.getDisks().length;if((e=g.getDisks())&&e.length)for(g=0;g<e.length;++g){var h=_a(e[g],"_i4d").getDiskId(),k=_a(_7(_1.CLSIDS.Device5200),"_i2");if(k){k=k.getZFSDisksManager().getDiskEnclosures();for(var j=0;j<k.length;j++){var m=_a(k[j],"_i4e");if(m)if(m=m.getDiskById(h)){this.ChannelIDs.push(m.getChannelID());this.DrivesHashByVdevId[f].push(m);this.DrivesAll.push(m)}}}}}},this);this.VolumeRaidLabel=this.VolumeRaidLevel==
"JBOD"?this.VolumeRaidLevel:_TR("RAID")+" "+this.VolumeRaidLevel;this.CountDisks=b;this.scrub=a.getScrubProgress();this.resilver=a.getResilverProgress();this.resilverRemaining=a.getResilverRemaining();this.balance=a.getBalanceProgress();this.balanceType=a.getBalanceType();this.removeGroup=a.getRemoveRAIDGroupProgress();this.disktest=a.getDisktestProgress();this.raidmode=a.getVolumeMode()=="1"?"xraid":"flexraid";this.showRaidGroups=this.raidmode=="flexraid"&&this.raidGroups.length>1;this.encEnabled=
a.getEncryptionEnabled();this.highestTier=d;this.multiplyTiers=c},initComponent:function(){_s1.Storage.Volume.superclass.initComponent.apply(this,arguments);this.bStopScrub=new Ext.UI.RoundButton({cls:"x-system-btn-cancel"});this.bStopScrub.on("click",function(){this.stopUpdateScrubResilverProgress();this.scrubCancelled=true;this.fireEvent("stopScrubClick",this)},this);if(this.showRaidGroups)this.cbRaidGroup=new Ext.UI.ComboBox({width:292,mode:"local",triggerAction:"all",listeners:{select:function(f,
e){this.el.select("."+this.cls+"-raid-group").setDisplayed(false);this.el.select('[data-vdev-id="'+e.data.id+'"]').setDisplayed(true);this.selectedVirtialDevice=e.data.virtualDevice;this.selectedGroupDisks=e.data.disks;this.fireEvent("select",this,e.data.disks)},scope:this},store:new Ext.data.ArrayStore({id:0,fields:["id","text","disks","virtualDevice"],data:this.raidGroups}),valueField:"id",displayField:"text",value:this.raidGroups[0][0]});this.bExpand=new Ext.UI.Button({width:130,hidden:true,text:_TR("STORAGE_EXPAND_VOLUME"),
handler:this.onExpandClick,scope:this});this.bExpandGroup=new Ext.UI.Button({width:100,hidden:true,text:_TR("STORAGE_EXPAND_GROUP"),handler:this.onExpandGroupClick,scope:this});this.bAddParity=new Ext.UI.Button({width:130,hidden:true,text:_TR("STORAGE_ADD_PARITY"),handler:this.onAddParityClick,scope:this});this.bCreateGroup=new Ext.UI.Button({width:130,hidden:true,text:_TR("STORAGE_ADD_RAID_GROUP"),handler:this.onCreateGroupClick,scope:this});this.bCancel=new Ext.UI.Button({width:130,hidden:true,
text:_TR("CANCEL"),handler:this.onCancelClick,scope:this});this.pieChart=new Ext.UI.PieChart({cls:"storage-volumesct-volume-piechart",total:this.capacity,sectors:[{value:this.volumeIsrescanning?0:this.capacity-this.available-this.snapshots,color:this.colorUsed},{value:this.volumeIsrescanning?0:this.snapshots,color:this.colorSnap}]});this.prScrub=new Ext.UI.ProgressIndicator({width:258});this.prResilver=new Ext.UI.ProgressIndicator({width:290});this.prBalance=new Ext.UI.ProgressIndicator({width:290});
this.prRemoveGroup=new Ext.UI.ProgressIndicator({width:290});var a="VOLUME_STATE_TOOLTIP_"+this.state,b=_TR(a),c="",d='<div id="'+(this.bRemoveGroupId=Ext.id())+'" class="x-system-remove-group" style="float:right; width:26px;"></div>';if(this.showRaidGroups){_.each(this.raidGroups,function(f){var e="";_.each(f[2],function(g,h){var k=g.getDiskState();k=k=="ONLINE"?this.cls+"-disk-icon-ok":k=="RESYNC"?this.cls+"-disk-icon-resync":!k||k==_4||k=="UNKNOWN"?"":this.cls+"-disk-icon-error";e+='<div class="'+
this.cls+"-disk-icon "+k+'" data-disk-id="'+g.getDiskId()+'" data-disk-index-in-group="'+h+'"></div>'},this);c+='<div class="'+this.cls+'-raid-group" data-vdev-id="'+f[0]+'">'+e+"</div>"},this);c='<div class="'+this.cls+'-raid-groups"><div id="'+(this.cbRaidGroupId=Ext.id())+'"></div><div class="'+this.cls+'-raid-groups-content">'+c+d+'<div id="'+(this.bExpandGroupId=Ext.id())+'" class="'+this.cls+'-raid-group-buttons"></div><div class="x-clear"></div></div></div>'}this.html='<div id="'+(this.panelId=
Ext.id())+'" class="storage-volumesct-volume-bottomcorners"><div class="storage-volumesct-volume-content"><table cellpadding="0" cellspacing="0"><tr><td style="width: 80px; padding-left: 24px; vertical-align: top;"><div id="'+(this.pieChartId=Ext.id())+'"></div><div class="storage-volumesct-volume-name" title="'+this.DpvVolumeName+'">'+(this.DpvVolumeName||"")+'</div><div class="storage-volumesct-volume-led '+this.updateStateLed(this.state)+'" id="'+(this.ledId=Ext.id())+'"></div>'+(this.encEnabled==
"1"?'<div id="'+(this.encId=Ext.id())+'" class="storage-volumesct-volume-enc"></div>':"")+(this.DpvVolume.getTierType()!="Disable"&&this.multiplyTiers&&this.raidmode!="xraid"&&this.highestTier>6?'<div id="'+(this.lightId=Ext.id())+'" class="storage-volumesct-volume-lightning '+(this.encEnabled=="1"?"storage-volumesct-third":"")+'"></div>':"")+'</td><td style="vertical-align: top;font-size: 14px;"><div><table style="margin-left:20px"><tr><td class="storage-volumesct-volume-tdlabel x-ellipsis">'+_TR("VOLUME_DATA")+
_TR("COLON")+'</td><td><div style="background-color: '+this.colorUsed+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="x-ellipsis">'+(this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize(this.capacity-this.available-this.snapshots,0.01))+"</td></tr>"+(this.DpvVolume.getQuota()=="on"?'<tr><td class="storage-volumesct-volume-tdlabel x-ellipsis"">'+_TR("SNAPSHOTS")+_TR("COLON")+'</td><td><div style="background-color: '+this.colorSnap+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td class="x-ellipsis">'+
(this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize(this.snapshots,0.01))+"</td></tr>":"")+'<tr><td class="storage-volumesct-volume-tdlabel x-ellipsis">'+_TR("FREE")+_TR("COLON")+'</td><td><div style="background-color: '+this.colorFree+'; width: 10px; height: 10px; margin-right: 3px;"></div></td><td>'+_s10.Utils.fileSize(this.available,0.01)+'</td></tr><tr><td class="storage-volumesct-volume-tdlabel x-ellipsis"">'+_TR("TYPE")+_TR("COLON")+'</td><td colspan="2"><nobr>'+
this.VolumeRaidLabel+"</nobr></td></tr></table></div></td></tr></table>"+c+(["ONLINE","REDUNDANT","UNPROTECTED"].indexOf(this.state)==-1&&a!=b?'<div style="text-align: center;">'+b+"</div>":"")+(this.isReadOnlyVolumes?'<div style="text-align: center;">'+_TR("STORAGE_VOLUME_READONLY")+"</div>":"")+'<div class="storage-volumesct-volume-scrubsection" id="'+(this.boxScrubId=Ext.id())+'"><div><span id="'+(this.lScrubId=Ext.id())+'"></span></div><table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td><div id="'+
(this.prScrubId=Ext.id())+'"></div></td><td style="width: 25px;"><div id="'+(this.bStopScrubId=Ext.id())+'"></div></td></tr></table></div><div class="storage-volumesct-volume-resilversection" id="'+(this.boxResilverId=Ext.id())+'"><div><span id="'+(this.lResilverId=Ext.id())+'"></span></div><div><span id="'+(this.lResilverRemId=Ext.id())+'"></span></div><div id="'+(this.prResilverId=Ext.id())+'"></div></div><div class="storage-volumesct-volume-disktestsection" id="'+(this.boxDisktestId=Ext.id())+
'"><div><span id="'+(this.lDisktestId=Ext.id())+'"></span></div><div><span id="'+(this.lDisktestRemId=Ext.id())+'"></span></div></div><div class="storage-volumesct-volume-balancesection" id="'+(this.boxBalanceId=Ext.id())+'"><div><span id="'+(this.lBalanceId=Ext.id())+'"></span></div><div><span id="'+(this.lBalanceRemId=Ext.id())+'"></span></div><div id="'+(this.prBalanceId=Ext.id())+'"></div></div><div class="storage-volumesct-volume-balancesection" id="'+(this.boxRemoveGroupId=Ext.id())+'"><div><span id="'+
(this.lRemoveGroupId=Ext.id())+'"></span></div><div><span id="'+(this.lRemoveGroupRemId=Ext.id())+'"></span></div><div id="'+(this.prRemoveGroupId=Ext.id())+'"></div></div></div><table cellpadding="0" cellspacing="0" class="storage-volumesct-volume-buttons"><tr><td id="'+(this.bExpandId=Ext.id())+'"></td><td id="'+(this.bAddParityId=Ext.id())+'"></td></tr><tr><td id="'+(this.bCreateGroupId=Ext.id())+'"></td><td id="'+(this.bCancelId=Ext.id())+'"></td></tr></table></div>';this.on("afterrender",function(){if(this.showRaidGroups){var f;
this.bRemoveGroup=Ext.get(this.bRemoveGroupId);if(this.DpvVolume.getXRaidExpanded()=="1")f=new Ext.UI.ToolTip(this.bRemoveGroup,{html:"<div>"+_TR("VOLUME_REMOVE_RAID_GROUP_NOT_AVAILABLE")+"</div>",delay:500,width:150,autowidth:false});else{this.bRemoveGroup.addClass("x-system-remove-group-avail");this.bRemoveGroup.on("click",this.onRemoveGroupClick,this);f=new Ext.UI.ToolTip(this.bRemoveGroup,{html:"<div>"+_TR("VOLUME_REMOVE_RAID_GROUP")+"</div>",delay:500,width:150,autowidth:false})}this.bRemoveGroup.on("hover",
f.show,this)}this.pieChart.render(this.pieChartId);this.prScrub.render(this.prScrubId);this.prBalance.render(this.prBalanceId);this.prRemoveGroup.render(this.prRemoveGroupId);this.prResilver.render(this.prResilverId);this.tooltipInfo=new Ext.UI.ToolTip(this.pieChart.el,{html:"",delay:1E3,width:200,autowidth:false});this.tooltipInfo.update(this.getTooltipText());this.tooltipInfo.on("show",this.onShowTooltip,this);f=Ext.get(this.encId);var e=Ext.get(this.lightId);this.encTooltip=f&&new Ext.UI.ToolTip(f.dom,
{html:_TR("VOLUME_STATE_TOOLTIP_ENC")});this.lightTooltip=e&&new Ext.UI.ToolTip(e.dom,{html:_TR("VOLUME_STATE_TOOLTIP_LIGHT")});if(this.showRaidGroups){this.cbRaidGroup.render(this.cbRaidGroupId);this.el.select("."+this.cls+"-raid-group").setDisplayed(false);this.el.select('[data-vdev-id="'+this.cbRaidGroup.getValue()+'"]').setDisplayed(true);this.el.select("."+this.cls+"-disk-icon").each(function(h){h.on("mouseenter",this.onDiskMouseEnter,this);h.on("mouseleave",this.onDiskMouseLeave,this)},this);
this.bExpandGroup.render(this.bExpandGroupId)}this.bAddParity.render(this.bAddParityId);this.bExpand.render(this.bExpandId);this.bCreateGroup.render(this.bCreateGroupId);this.bCancel.render(this.bCancelId);this.createVolumeMenu();this.updateMenuButtons();if(this.ledId){if(this.ChannelIDs&&this.ChannelIDs.length>0&&this.state=="INACTIVE"){e=Ext.get(this.panelId);f=String.format(_TR("XRAID_MODE_INACTIVE_VOLUME_ALERT"),this.ChannelIDs.toString());var g=_TR("VOLUME_STATE_TOOLTIP_DEAD");if(this.DpvVolume.getEncryptionEnabled()==
"1"&&this.DpvVolume.getEncryptionKeyMissing()=="1"){f=String.format(_TR("LOGMSG_VOLUME_ENCRYPTION_KEY_MISSING_UI"),this.DpvVolume.getVolumeName());g=_TR("VOLUME_STATE_TOOLTIP_KEY_MISSING")}if(e)this.tooltip=new Ext.UI.ToolTip(e.dom,{width:230,html:f,attachPosition:Ext.UI.ToolTip.BORDER});e=_a(_7(_._3.System.Frame),"IExtNative").getNative().alarmbar;_a(e,"IAlarmReporter").reportAlarm(f,e.ALARM_ERROR)}switch(this.state){case "ONLINE":case "REDUNDANT":case "UNPROTECTED":this.ledtooltip=
new Ext.UI.ToolTip(Ext.get(this.ledId).dom,{html:_TR("VOLUME_STATE_TOOLTIP_ONLINE")});break;case "DEGRADED":this.ledtooltip=new Ext.UI.ToolTip(Ext.get(this.ledId).dom,{html:_TR("VOLUME_STATE_TOOLTIP_DEGRADED")});break;default:this.ledtooltip=new Ext.UI.ToolTip(Ext.get(this.ledId).dom,{html:g});break}}this.bStopScrub.render(this.bStopScrubId);this.el.on("click",function(h){if(!Ext.get(h.target).parent(".ui-button")&&!Ext.get(h.target).parent(".ui-roundbutton")&&!Ext.get(h.target).parent(".ui-combobox")){h.stopEvent();
this.setSelected(true);return false}this.setSelected(true)},this);this.updateScrubResilverProgress(this.scrub,this.resilver,this.resilverRemaining,this.balance,this.disktest,this.removeGroup,this.balanceType)},this)},onRemoveGroupClick:function(){var a=this.selectedVirtialDevice?this.selectedVirtialDevice:(this.selectedVirtialDevice=this.DpvFirstVirtialDevice),b=Math.floor;b=b(a.getDataAllocated())+b(a.getMetadataAllocated())+b(a.getUnallocated());a=+this.DpvVolume.getUnallocated()-b;b=this.DpvVolume.getCapacity()-
b;var c=Math.floor(a/b*100);if(c>1){this.wndDestroyVolume=new _s1.Storage.TypeConfirmWindow({title:_TR("VOLUME_REMOVE_RAID_GROUP"),message:String.format(_TR("VOLUME_REMOVE_RAID_GROUP_MSG"),this.convertKB(b),this.convertKB(a),this.getNewFreeClass(c)),textApply:_TR("OK"),textToEnter:"REMOVE",listeners:{applyclick:this.onRemoveConfirmClick,scope:this}});this.wndDestroyVolume.show()}else Ext.UI.MessageBox.info({title:_TR("VOLUME_REMOVE_RAID_GROUP"),msg:_TR("VOLUME_PREVENT_REMOVE_RAID_GROUP")})},
getNewFreeClass:function(a){var b="red";if(a>21)b="green";else if(a>5)b="yellow";return"storage-volumesct-volume-space-"+b},onRemoveConfirmClick:function(){this.fireEvent("removeRaidGroup",this.DpvVolume,this.selectedVirtialDevice.getVirtualDeviceId())},isPosibleRemoveGroup:function(){return true},getTooltipText:function(){if(!this.tooltipText){this.tooltipText=_s1.Storage.Volume.TOOLTIP_TEMPLATE_VOLUME.applyTemplate({className:this.raidmode=="flexraid"?"storage-volumeinfo":"",name:this.DpvVolume.getVolumeName()||
"",dataUsed:this.convertKB(this.DpvVolume.getDataUsed())||"",dataAllocated:this.convertKB(this.DpvVolume.getDataAllocated())||"",metaDataUsed:this.convertKB(this.DpvVolume.getMetadataUsed())||"",metaDataAllocated:this.convertKB(this.DpvVolume.getMetadataAllocated())||"",freeSpace:this.convertKB(this.DpvVolume.getUnallocated())||""});this.raidmode=="flexraid"&&this.DpvVirtualDevices.forEach(function(a,b){a=_a(a,"_i4m");this.tooltipText+=_s1.Storage.Volume.TOOLTIP_TEMPLATE_GROUP.applyTemplate({name:this.DpvVolume.getVolumeName()||
"",name:String.format(_TR("STORAGE_VOLUME_RAID_GROUP_NUMBER"),b+1),dataAllocated:this.convertKB(a.getDataAllocated())||"",metaDataAllocated:this.convertKB(a.getMetadataAllocated())||"",freeSpace:this.convertKB(a.getUnallocated())||""})},this);this.tooltipText="<table>"+this.tooltipText+"</table>"}return this.tooltipText},convertKB:function(a){return _s10.Utils.fileSize(a*1024,0.01)},createVolumeMenu:function(){(new Ext.UI.RoundButton({width:28,height:28,renderTo:this.pieChartId,cls:this.cls+
"-optbtn",iconCls:"x-frontview-btn-properties-large"})).on("click",this.onPropsClick,this);this.itemExport=new Ext.menu.Item({text:_TR("EXPORT"),ctCls:"x-frontview-icon-export",commandName:"export"});this.itemDefrag=new Ext.menu.Item({text:_TR("DEFRAG"),ctCls:"x-frontview-icon-defrag",commandName:"defrag"});this.itemScrab=new Ext.menu.Item({text:_TR("VOLUME_SCRUB"),ctCls:"x-frontview-icon-scrab",commandName:"scrab"});this.itemBalance=new Ext.menu.Item({text:_TR("VOLUME_BALANCE"),ctCls:"x-frontview-icon-volume-balance",
commandName:"balance"});this.itemDiskTest=new Ext.menu.Item({text:_TR("VOLUME_DISK_TEST"),ctCls:"x-frontview-icon-volume-disk-test",commandName:"diskTest"});this.itemTrim=new Ext.menu.Item({text:_TR("SSD_TRIM"),ctCls:"x-frontview-icon-trim",commandName:"trim"});this.itemDelete=new Ext.menu.Item({text:_TR("DESTROY"),ctCls:"x-frontview-icon-delete",commandName:"delete"});this.itemSchedule=new Ext.menu.Item({text:_TR("VOLUME_SCHEDULE"),ctCls:"x-frontview-icon-volume-schedule",commandName:"schedule"});
this.itemSettings=new Ext.menu.Item({text:_TR("SETTINGS"),ctCls:"x-frontview-icon-settings",commandName:"settings"});this.volumeMenu=new Ext.UI.Menu({cls:"x-system-menu",items:[this.itemDefrag,this.itemScrab,this.itemBalance,this.itemDiskTest,this.itemTrim,this.itemExport,this.itemDelete,this.itemSchedule,this.itemSettings],listeners:{itemclick:function(a){switch(a.commandName){case "export":this.fireEvent("exportClick",this);break;case "defrag":this.fireEvent("defragClick",this);break;case "scrab":this.fireEvent("startScrubClick",
this);break;case "balance":this.fireEvent("startBalanceClick",this);break;case "diskTest":this.fireEvent("startDiskTestClick",this);break;case "delete":this.fireEvent("destroyClick",this);break;case "settings":this.fireEvent("propertiesClick",this);break;case "schedule":this.fireEvent("scheduleClick",this);break;case "trim":this.fireEvent("trimClick",this);break}},scope:this}})},onPropsClick:function(a){this.volumeMenu.show.defer(100,this.volumeMenu,[a.el])},onShowTooltip:function(){this.tooltipInfo.setSize(50,
50);this.tooltipInfo.setWidth(this.tooltipInfo.getWidth()+this.tooltipInfo.body.dom.scrollWidth-this.tooltipInfo.body.getWidth(true));this.tooltipInfo.setHeight(this.tooltipInfo.getHeight()+this.tooltipInfo.body.dom.scrollHeight-this.tooltipInfo.body.getHeight(true)+12);var a=Ext.fly(document.body).getHeight(),b=this.tooltipInfo.el.getXY(),c=this.tooltipInfo.el.dom.offsetHeight;a=c-(b[1]+c-a);if(a<c){if(a<200)a=200;this.tooltipInfo.setHeight(a-(c-this.tooltipInfo.body.getHeight(true))-5)}},onDiskMouseEnter:function(a,
b){a=Ext.get(b);a=[this.DrivesHashByVdevId[this.cbRaidGroup.getValue()][a.getAttribute("data-disk-index-in-group")]];this.fireEvent("select",this,a);this.selectedGroupDisks=a},onDiskMouseLeave:function(a,b){Ext.get(b);a=this.DrivesHashByVdevId[this.cbRaidGroup.getValue()];this.fireEvent("select",this,a);this.selectedGroupDisks=a},updateMenuButtons:function(){var a=this.DpvVolume&&this.DpvVolume.getDiscardable&&this.DpvVolume.getDiscardable()=="1";this.itemScrab.setVisible(this.scrub==_4);this.itemBalance.setDisabled(this.state==
"INACTIVE");this.itemTrim.setDisabled(this.state=="INACTIVE"||!a);this.itemExport.setDisabled(this.state=="INACTIVE");this.itemDefrag.setDisabled(this.state=="INACTIVE");this.itemScrab.setDisabled(this.state=="INACTIVE"||this.resilver!=_4);this.itemSchedule.setDisabled(this.state=="INACTIVE");this.itemSettings.setDisabled(this.state=="INACTIVE")},updateStateLed:function(a){this.state=a;var b="";switch(a){case "ONLINE":case "REDUNDANT":case "UNPROTECTED":b="x-system-panel-led-green";break;case "DEGRADED":b=
"x-system-panel-led-orange";break;default:b="x-system-panel-led-red";break}if(this.isReadOnlyVolumes)b="x-system-panel-led-orange";if(this.ledId)if(a=Ext.get(this.ledId)){a.removeClass(this.cls+"-led-green");a.removeClass(this.cls+"-led-yellow");a.removeClass(this.cls+"-led-red");a.addClass(b)}this.selected&&this.inspGroupSum&&this.inspGroupSum.updateLabels(this);return b},stopUpdateScrubResilverProgress:function(){clearTimeout(this.updateVolTimeoutId)},updateScrubResilverProgress:function(a,b,c,
d,f,e,g){this.scrub=a;this.resilver=b;this.resilverRemaining=c;this.balance=d;this.removeGroup=e;this.disktest=f;this.balanceType=g;if(b!=_4){Ext.get(this.boxScrubId).setDisplayed(false);a=parseFloat(b);if(a>=0){Ext.get(this.boxResilverId).setDisplayed(true);Ext.get(this.lResilverId).update(String.format(_TR("VOLUME_RESILVER_PROGRESS"),b));if(!c||c==_4)Ext.get(this.lResilverRemId).update("");else if(!isNaN(Number(c))){b=Math.floor(c/60);c-=b*60;var h=Math.floor(c);c=Math.floor((c-h)*60);Ext.get(this.lResilverRemId).update(_TR("VOLUME_REMAINING_TIME")+
" "+String.format("{0}:{1}:{2}",String.leftPad(b,2,"0"),String.leftPad(h,2,"0"),String.leftPad(c,2,"0")))}a/=100;this.prResilver.updateProgress(a);this.updateVolTimeoutId=this.fireEvent.defer(1E4,this,["updateVolumeCommand",this])}else Ext.get(this.boxResilverId).setDisplayed(false)}else{Ext.get(this.boxResilverId).setDisplayed(false);if(a==_4)Ext.get(this.boxScrubId).setDisplayed(false);else{Ext.get(this.boxScrubId).setDisplayed(true);c=parseFloat(a);if(c>=0){Ext.get(this.lScrubId).update(String.format(_TR("VOLUME_SCRUB_PROGRESS"),
a));c/=100;this.prScrub.updateProgress(c);this.updateVolTimeoutId=this.fireEvent.defer(1E4,this,["updateVolumeCommand",this])}}}if(d==_4)Ext.get(this.boxBalanceId).setDisplayed(false);else{Ext.get(this.boxBalanceId).setDisplayed(true);c=parseFloat(d);a=_TR("VOLUME_BALANCE_PROGRESS");if(c>=0){switch(g){case "0":a=_TR("VOLUME_BALANCE_PROGRESS");break;case "1":a=_TR("VOLUME_METADATA_PROGRESS");break;case "2":a=_TR("VOLUME_DATATIER_PROGRESS");break}Ext.get(this.lBalanceId).update(String.format(a,
d));c/=100;this.prBalance.updateProgress(c);this.updateVolTimeoutId=this.fireEvent.defer(1E4,this,["updateVolumeCommand",this])}}if(e==_4)Ext.get(this.boxRemoveGroupId).setDisplayed(false);else{Ext.get(this.boxRemoveGroupId).setDisplayed(true);d=parseFloat(e);if(d>=0){Ext.get(this.lRemoveGroupId).update(String.format(_TR("VOLUME_REMOVE_GROUP_PROGRESS"),e));d/=100;this.prRemoveGroup.updateProgress(d);this.updateVolTimeoutId=this.fireEvent.defer(1E4,this,["updateVolumeCommand",this])}}if(f==_4)Ext.get(this.boxDisktestId).setDisplayed(false);
else{Ext.get(this.boxDisktestId).setDisplayed(true);if(f){Ext.get(this.lDisktestId).update(_TR("VOLUME_DISKTEST_PROGRESS"));this.updateVolTimeoutId=this.fireEvent.defer(1E4,this,["updateVolumeCommand",this])}}this.updateMenuButtons()},setSelected:function(a){if(a){this.addClass("storage-volumesct-volume-select");var b=this.showRaidGroups?this.DrivesHashByVdevId[this.cbRaidGroup.getValue()]:this.DrivesAll;this.fireEvent("select",this,b);this.selectedGroupDisks=b}else{this.removeClass("storage-volumesct-volume-select");
this.bExpand.hide();this.bExpandGroup.hide();this.bAddParity.hide();this.bCreateGroup.hide();this.bCancel.hide()}this.selected=a},setButtonsMode:function(a,b,c,d,f){a=this.VolumeRaidLevel;var e=this.DpvVolume.getConcatenated();e=this.DpvVirtualDevices;c=this.DpvFirstVirtialDevice?this.DpvFirstVirtialDevice.getDisks().length:0;var g=e.length,h=this.getHighestLowesrTiers(this.DpvVirtualDevices),k=this.getTier(f),j=this.isHighestSSDTier(h.highestTier,k)||this.isLowestSSDTier(h.lowestTier,k);count=b;
flexraid=this.raidmode=="flexraid";devicesLevelArray=[];e=this.DpvVolume.getConcatenated();createGroupEn=expandEn=addParityEn=false;this.selectedEmptyDisks=count;this.selectedEnclosures=d;this.bExpand.setVisible(count>0&&flexraid).disable();this.bExpandGroup.setVisible(false).disable();this.bAddParity.setVisible(count>0&&flexraid).disable();this.bCreateGroup.setVisible(count>0&&flexraid).disable();this.bCancel.setVisible(count>0&&flexraid);if(flexraid&&this.state!="INACTIVE"&&this.state!="DEGRADED"){Ext.each(this.DpvVirtualDevices,
function(m){m=_a(m,"_i4m");devicesLevelArray.push(m.getLevel())});if(this.resilver==_4){addParityEn=(a=="JBOD"||a=="0"||a=="5"||a=="50")&&count==g&&(devicesLevelArray.indexOf("1")==-1||a=="JBOD")&&devicesLevelArray.indexOf("6")==-1&&this.getBiggestCapacity(this.DrivesAll)<=this.getLowestCapacity(f);expandEn=((a=="1"||a=="10")&&count>=1||(a=="5"||a=="6")&&count>=1||(a=="50"||a=="60")&&count%g==0)&&this.getLowestCapacity(this.DrivesAll)<=this.getLowestCapacity(f)}createGroupEn=
(a=="JBOD"||a=="0")&&count>=1||(a=="1"||a=="10")&&count>=2||a=="5"&&count>=2||a=="6"&&(this.isSSDTier(k,h)?count>=2:count>=4)||a=="50"&&count>=c&&!j||a=="60"&&count>=c&&!j}this.fireEvent("checkOnLowestTier",this);this.bExpand.setDisabled(!expandEn);this.bAddParity.setDisabled(!addParityEn);this.bCreateGroup.setDisabled(!createGroupEn)},isSSDTier:function a(b,c){return a=this.isHighestSSDTier(c.highestTier,b)},getHighestLowesrTiers:function(a){var b=0,c;a.forEach(function(d){d=_a(d,"_i4m");
c=d.getTierType()<c?d.getTierType():c||d.getTierType();b=d.getTierType()>b?d.getTierType():b});return{lowestTier:c,highestTier:b}},isHighestSSDTier:function(a,b){return a<7&&b>6},isLowestSSDTier:function(a,b){return a>6&&b<7},getTier:function(a,b){var c,d=function(f,e){return b?f<e:f>e};a.forEach(function(f){if(c){if(d(c,f.getType()))c=f&&f.getType&&f.getType()}else c=f&&f.getType&&f.getType()});return c},getLowestCapacity:function(a){var b;if(a.length>0){b=a[0]&&a[0].getCapacity&&+a[0].getCapacity();
a.forEach(function(c){b=b>+c.getCapacity()?+c.getCapacity():b})}return b},getBiggestCapacity:function(a){return(a=$_.max(a,function(b){return b.getCapacity()}))?a.getCapacity():-1},onCancelClick:function(){this.fireEvent("cancelClick",this)},onExpandClick:function(){var a=this.isManyEncsSelected(),b="",c=this.selectedEmptyDisks.count,d=this.DpvFirstVirtialDevice.getDisks().length;if(a)b+=_TR("STORAGE_EXPAND_VOLUME_CONFIRM_DIFF_ENC")+"<br />";if(this.VolumeRaidLevel=="0")b+=_TR("STORAGE_EXPAND_VOLUME_CONFIRM_RAID0");
else if(this.VolumeRaidLevel=="5"||this.VolumeRaidLevel=="50"){if(d+c>6){b+=_TR("STORAGE_EXPAND_VOLUME_CONFIRM_RAID5");if(this.DpvVirtualDevices.length>1)b+=" "+_TR("STORAGE_EXPAND_VOLUME_CONFIRM_RAID50");b+="<br />"}}else if(this.VolumeRaidLevel=="6"||this.VolumeRaidLevel=="60")if(d+c>15){b+=_TR("STORAGE_EXPAND_VOLUME_CONFIRM_RAID6");if(this.DpvVirtualDevices.length>1)b+=" "+_TR("STORAGE_EXPAND_VOLUME_CONFIRM_RAID60");b+="<br />"}b+=_TR("STORAGE_EXPAND_VOLUME_CONFIRM");Ext.UI.MessageBox.confirm({title:_TR("STORAGE_EXPAND_VOLUME"),
msg:b,fn:function(f){f=="yes"&&this.fireEvent("expandClick",this,a)},scope:this})},onExpandGroupClick:function(){this.fireEvent("expandGroupClick",this,this.cbRaidGroup.getValue())},onAddParityClick:function(){var a=this.isManyEncsSelected();Ext.UI.MessageBox.confirm({title:_TR("STORAGE_ADD_PARITY"),msg:a?_TR("STORAGE_ADD_PARITY_CONFIRM_DIFF_ENC"):_TR("STORAGE_ADD_PARITY_CONFIRM"),fn:function(b){b=="yes"&&this.fireEvent("addParityClick",this)},scope:this})},changeGroupB:function(a){this.bCreateGroup.setText(a?
_TR("STORAGE_ADD_RAID_TIER"):_TR("STORAGE_ADD_RAID_GROUP"));this.bCreateGroup.setHandler(a?this.onCreateTierClick:this.onCreateGroupClick,this)},onCreateTierClick:function(){this.fireEvent("createTierClick",this,this.isManyEncsSelected(),false)},onCreateGroupClick:function(){this.fireEvent("createGroupClick",this,this.isManyEncsSelected(),true)},getDpvVolume:function(){return this.DpvVolume},getVolumeId:function(){return this.DpvVolumeId},getVolumeName:function(){return this.DpvVolumeName},getVolumeRaidLevel:function(){return this.VolumeRaidLevel},
getSelectedGroupRaidLevel:function(){var a=this.selectedVirtialDevice?this.selectedVirtialDevice:this.DpvFirstVirtialDevice;a=a?a.getLevel():"";return _TR("RAID")+" "+a},getVolumeRaidLabel:function(){return this.VolumeRaidLabel},destroy:function(){_s1.Storage.Volume.superclass.destroy.apply(this,arguments);this.tooltip&&this.tooltip.destroy();this.tooltipInfo&&this.tooltipInfo.destroy();this.ledtooltip&&this.ledtooltip.destroy();this.volumeMenu&&this.volumeMenu.destroy();this.encTooltip&&
this.encTooltip.destroy();this.lightTooltip&&this.lightTooltip.destroy()},isManyEncsSelected:function(){var a=this.selectedEnclosures.length>1;!a&&this.DiskEnclosures&&Ext.each(this.selectedEnclosures,function(b){if(this.DiskEnclosures.indexOf(b)==-1)a=true},this);return a}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.Bay=_._1(Ext.Container,{cls:"storage-bay",widthDisk:33,heightDisk:140,slots:[],constructor:function(){_s1.Storage.Bay.superclass.constructor.apply(this,arguments);this.addEvents("selectionchange")},initComponent:function(){_s1.Storage.Bay.superclass.initComponent.apply(this,arguments);this.racksCtId=Ext.id();this.html='<div id="'+(this.diskCtId=Ext.id())+'"><table cellpadding="0" cellspacing="0" id="'+this.racksCtId+'" style="margin: 0 auto 15px;"><tr><td></td></tr></table></div><div id="'+
(this.scrollEffectLeftId=Ext.id())+'" class="storage-bay-scroll-effect-left"></div><div id="'+(this.scrollEffectRightId=Ext.id())+'" class="storage-bay-scroll-effect-right"></div><div style="clear: both"></div><table id="'+(this.legendId=Ext.id())+'" class="storage-legend"><tr><td><div class="storage-legend-item"><span class="storage-legend-item-icon storage-legend-raid"></span><nobr><b>'+_TR("RAID")+'</b><span id="'+(this.legendRaidLevelId=Ext.id())+'"></span></nobr></div></td><td><div class="storage-legend-item"><span class="storage-legend-item-icon storage-legend-spare"></span><nobr><b>'+
_TR("SPARE")+'</b></span></nobr></div></td><td id="'+(this.tierLegendId=Ext.id())+'"><div class="storage-legend-item"><span class="storage-legend-item-icon storage-legend-log"></span><nobr><b>'+_TR("HIGHEST_TIER")+"</b></span></nobr></div></td></tr></table>";this.on("afterrender",this.onAfterRender,this)},onAfterRender:function(){this.racksCt=Ext.get(this.racksCtId);this.scrollEffectLeft=Ext.get(this.scrollEffectLeftId);this.scrollEffectRight=Ext.get(this.scrollEffectRightId);this.legend=Ext.get(this.legendId);
this.legend.setDisplayed(false);this.scroller=new Ext.UI.Scroller({dom:Ext.get(this.diskCtId).dom,type:"horizontal",dynamic:true,margins:{top:2,right:1,bottom:1,left:1}});this.scroller.reg();this.scroller.on("scroll",function(a){this.updateScrollerEffects(a)},this);this.scroller.scroll(0);this.tooltip=new Ext.UI.ToolTip(null,{html:"",delay:1E3,width:200,autowidth:false});this.tooltip.on("show",this.onShowTooltip,this);if(this.tierLegend=Ext.get(this.tierLegendId)){this.tierLegend.setVisibilityMode(Ext.Element.DISPLAY);
this.tierLegend.hide()}},onShowTooltip:function(){this.tooltip.setSize(50,50);this.tooltip.setWidth(this.tooltip.getWidth()+this.tooltip.body.dom.scrollWidth-this.tooltip.body.getWidth(true));this.tooltip.setHeight(this.tooltip.getHeight()+this.tooltip.body.dom.scrollHeight-this.tooltip.body.getHeight(true)+12);var a=Ext.fly(document.body).getHeight(),b=this.tooltip.el.getXY(),c=this.tooltip.el.dom.offsetHeight;a=c-(b[1]+c-a);if(a<c){if(a<200)a=200;this.tooltip.setHeight(a-(c-this.tooltip.body.getHeight(true))-
5)}},updateScrollerEffects:function(a){a=a||this.scroller;var b=this.racksCt.dom.scrollHeight;this.scrollEffectLeft.setHeight(b);this.scrollEffectRight.setHeight(b);if(a.target.dom.scrollLeft==0){if(!this.scrollEffectLeft.hidden){this.scrollEffectLeft.hide();this.scrollEffectLeft.hidden=true}}else if(this.scrollEffectLeft.hidden){this.scrollEffectLeft.show();this.scrollEffectLeft.hidden=false}if(a.target.dom.scrollLeft==a.target.dom.scrollWidth-a.target.dom.clientWidth){if(!this.scrollEffectRight.hidden){this.scrollEffectRight.hide();
this.scrollEffectRight.hidden=true}}else if(this.scrollEffectRight.hidden){this.scrollEffectRight.show();this.scrollEffectRight.hidden=false}},populateDisks:function(a,b){Ext.get(this.legendId).setDisplayed(true);var c="";this.jbots=[];if(b&&b.getRackAlignment()=="1"){this.addClass("storage-bay-head-v");this.headJbodIsHor=true}else{this.removeClass("storage-bay-head-v");this.headJbodIsHor=false}var d=[];Ext.each(a,function(g){if(g=_a(g,"_i4e")){var h=Ext.id(),k=Ext.id(),j=g?g.getPortName()||
"":"";if(j==_4)j="";g=new _s1.Storage.Jbot({diskEnc:g,idHtml:h,headJbodIsHor:this.headJbodIsHor});c+='<tr><td style="vertical-align: top; padding: 0 5px;" id="'+k+'"></td><td id="'+h+'" style="text-align: center; line-height: 0px;"></td></tr>';this.jbots.push(g);j!="Internal"&&d.push([k,j])}},this);c=String.format('<table cellpadding="0" cellspacing="0" id="'+this.racksCtId+'" style="margin: 0 auto 15px;">{0}</table>',c);Ext.get(this.diskCtId).update(c);this.racksCt=Ext.get(this.racksCtId);
Ext.each(this.jbots,function(g){g.render(g.idHtml)},this);this.scroller.resize();this.updateScrollerEffects();var f=_.Utils.throttle(this.onDiskChangeSelected,this,300);Ext.each(this.jbots,function(g){g.disksCt.items.each(function(h){h.on("startSelect",this.onStartSelectDisks,this);h.on("startDeselect",this.onStartDeselectDisks,this);h.on("select",f,this);h.on("deselect",f,this);_.isiOS||h.el.child("."+h.cls+"-fortooltip").on("mouseover",function(k,j){j=Ext.get(j);if(!this.tooltip.target||!this.tooltip.target.id!=
j.id){this.tooltip.initTarget(j);this.tooltip.hide();this.tooltip.update(h.getTooltipText())}},this)},this)},this);var e=this.selectedDisks;this.selectedDisks=undefined;e&&e.length&&Ext.each(this.jbots,function(g){g.disksCt.items.each(function(h){e.indexOf(h.disk.getDiskId())!=-1&&h.selectable&&h.setSelected(true)},this)},this);this.onDiskChangeSelected()},populateVolumes:function(a){this.smallestDiskSizeInVolumes=undefined;Ext.each(a,function(b){var c=_a(b,"_i4o");if((b=c.getVirtualDevices())&&
b.length)for(var d=0;d<b.length;++d){var f=_a(b[d],"_i4m");if(f.getType()!="SPARE"){var e=f.getDisks();if(e&&e.length)for(var g=0;g<e.length;++g)Ext.each(this.jbots,function(h){h.disksCt.items.each(function(k){if(k.disk.getDiskId()==_a(e[g],"_i4d").getDiskId()){k.volume=c;k.virtDevice=f;if(this.smallestDiskSizeInVolumes===undefined||this.smallestDiskSizeInVolumes>k.capacityInGB)this.smallestDiskSizeInVolumes=k.capacityInGB}},this)},this)}}},this);Ext.each(this.jbots,
function(b){b.disksCt.items.each(function(c){!c.volume&&c.disk.getPresent()=="0"&&c.hide()},this)},this)},onVolumeSelect:function(a,b){this.selectedVolume=a;var c=false,d=0,f=0;a&&a.DpvVirtualDevices&&Ext.each(a.DpvVirtualDevices,function(e){if(e=_a(e,"_i4m")){if(!c){c=f&&e.getTierType()!=f;f=e.getTierType()}if(e.getTierType()>d)d=e.getTierType()}});this.multiplyTiers=c;a&&a.DrivesAll&&Ext.each(a.DrivesAll,function(e){if(e)if(e.getType()>d)d=e.getType()});a?Ext.get(this.legendRaidLevelId).update(" ("+
a.getSelectedGroupRaidLevel()+")"):Ext.get(this.legendRaidLevelId).update("");a&&c&&a.DpvVolume&&d>6&&a.DpvVolume&&a.DpvVolume.getVolumeMode&&a.DpvVolume.getVolumeMode()!="1"?this.tierLegend.show():this.tierLegend.hide();this.changeSelectionMode(a,b);this.onDiskChangeSelected()},changeSelectionMode:function(a,b){var c=a?a.getDpvVolume():null,d;if(c){d=c.getVolumeMode();d=d=="1"?"xraid":"flexraid"}var f={},e=0,g=true,h=[],k=c&&c.getVirtualDevices();if(k&&k.length)for(var j=0;j<k.length;++j){var m=
_a(k[j],"_i4m");if(m.getTierType()==e){var n=m.getDisks();n.length>0&&n.forEach(function(p){p=_a(p,"_i4d");h.push(p.getDiskId())})}else if(m.getTierType()>e){n=m.getDisks();e=m.getTierType();h=[];if(n.length>0)h=n.map(function(p){p=_a(p,"_i4d");return p.getDiskId()})}}_.each(b,function(p){if(g)g=h.indexOf(p.getDiskId())!=-1;f[p.getDiskId()]=p},this);this.setAllActive(false);_.each(this.jbots,function(p){p.disksCt.items.each(function(o){if(o.volume){o.setState("FROM_VOLUME");
if(c&&o.volume.getGuid()==c.getGuid()){o.setActive(true,!!f[o.disk.getDiskId()],o.volume.getTierType()!="Disable"&&d!=="xraid"&&(f[o.disk.getDiskId()]?g:true)&&this.multiplyTiers&&e>6&&h.indexOf(o.disk.getDiskId())!==-1);if((o.virtDevice.getType()||"").toUpperCase()!="RAID")o.setSelectable(true);else{o.setSelectable(false);if(a.HardwareInterface===undefined||a.DiskCapacity===undefined||a.DiskRPM===undefined||a.DiskEnclosures===undefined){a.HardwareInterface=o.disk.getHardwareInterface();var q=Math.round(o.disk.getCapacity()/
107374182400)*100;if(a.DiskCapacity===undefined||q<a.DiskCapacity)a.DiskCapacity=q;if(a.DiskEnclosures===undefined)a.DiskEnclosures=[];q=p.diskEnc.getId();a.DiskEnclosures.indexOf(q)==-1&&a.DiskEnclosures.push(q);a.DiskRPM=o.rpm}}}else{o.setSelectable(false);o.setSelected(false)}}else{q=o.disk.getVolumeState();q=="ACTIVE"&&!o.isSpare&&o.setState("FROM_VOLUME");q=="EXPORTED"||q=="ACTIVE"?o.setSelectable(false):o.setSelectable(true)}o.isSpare&&o.disk.getDiskState()!="INUSE"&&o.setSelectable(true);o.isSignedByNetgear||
o.setSelectable(false);d=="xraid"&&o.setSelectable(false);parseInt(o.disk.getFormattable())&&o.setSelectable(true)},this)},this)},onDiskChangeSelected:function(){var a=0,b=0,c=0,d=[],f=[];this.selectedDisks=[];Ext.each(this.jbots,function(e){var g=0;e.disksCt.items.each(function(h){if(h.selected){this.selectedDisks.push(h.diskId);h.formattable&&f.push(h.disk);++g;if(h.volume)++b;else if(h.isSpare)++c;else++a}},this);e=e.diskEnc.getId();g&&d.indexOf(e)==-1&&d.push(e)},this);this.selectedVolume&&this.selectedVolume.setButtonsMode(b,
a,c,d,this.getSelectedDpvInstances());this.fireEvent("selectionchange",b,a,c,d,f)},setAllActive:function(a){Ext.each(this.jbots,function(b){b.disksCt.items.each(function(c){c.isSpare||c.setActive(a)},this)},this)},setAllSelected:function(a){Ext.each(this.jbots,function(b){b.disksCt.items.each(function(c){c.setSelected(a)},this)},this)},setAllSelectable:function(a){Ext.each(this.jbots,function(b){b.disksCt.items.each(function(c){c.setSelectable(a)},this)},this)},onStartSelectDisks:function(){Ext.each(this.jbots,
function(a){a.disksCt.items.each(function(b){b.onStartSelect()},this)},this)},onStartDeselectDisks:function(){Ext.each(this.jbots,function(a){a.disksCt.items.each(function(b){b.onStartDeselect()},this)},this)},getSelectedDisks:function(){var a=[];Ext.each(this.jbots,function(b){b.disksCt.items.each(function(c){c.selected&&a.push(c)},this)},this);return a},getSelectedDpvInstances:function(){var a=[];Ext.each(this.jbots,function(b){b.disksCt.items.each(function(c){c.selected&&a.push(c.disk)},this)},
this);return a}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.Jbot=_._1(Ext.Container,{cls:"storage-jbot",widthDisk:33,heightDisk:140,slots:[],constructor:function(){_s1.Storage.Jbot.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.Storage.Jbot.superclass.initComponent.apply(this,arguments);var a=this.diskEnc?this.diskEnc.getName()||"":"";if(a==_4)a="";var b=this.diskEnc?this.diskEnc.getPortName()||"":"";if(b==_4)b="";this.html='<div class="storage-jbot-name x-ellipsis" title="'+
a+'"><nobr>'+a+'</nobr></div><div class="storage-jbot-port x-ellipsis" title="'+b+'"><nobr>'+b+'</nobr></div><div class="storage-jbot-tl"><div class="storage-jbot-tr"><div class="storage-jbot-t"></div></div></div><div class="storage-jbot-l"><div class="storage-jbot-r"><div class="storage-disksct"><div id="'+(this.bayId=Ext.id())+'" style="margin: 0 auto;"></div></div></div></div><div class="storage-jbot-bl"><div class="storage-jbot-br"><div class="storage-jbot-b"></div></div></div>';this.on("afterrender",
this.onAfterRender,this)},onAfterRender:function(){this.disksCt=Ext.get(this.bayId);this.disksCt.items=new Ext.util.MixedCollection;this.diskEnc&&this.populateDisks(this.diskEnc)},populateDisks:function(a){var b=a.getDisks(),c=a.getRowsCount(),d=a.getColmsCount();this.setOrientation(a.getRackAlignment());this.setRowsColumnsCount(c,d);a="";for(var f=0;f<c;++f){for(var e="",g=0;g<d;++g)e+='<td><div id="'+this.bayId+"-"+(g+1)+"x"+(f+1)+'" class="storage-disksct-slot"></div></td>';a+="<tr>"+e+"</tr>"}a=
'<table style="width: 100%;" cellpadding="0" cellspacing="0">'+a+"</table>";this.disksCt.update(a);Ext.each(b,function(h){if(h=_a(h,"_i4d"))if(!(h.getPresent()=="0"&&h.getVolumeState()=="EXPORTED")){var k=h.getSlotName()||"",j=k.indexOf("x"),m=k.substring(0,j)-1;j=k.substring(j+1)-1;if(j<c&&m<d){if(this.slots[j][m]&&this.slots[j][m].disk&&this.slots[j][m].disk.getPresent()=="0"){this.disksCt.items.remove(this.slots[j][m]);this.slots[j][m].destroy();this.slots[j][m]=undefined}if(this.slots[j][m])h.getPresent()==
"1"&&_2("Error getting disks","Two or more disk in slot "+k,_TRACE_ACTIVE.ERROR,"Storage");else this.slots[j][m]=this.addDisk({volumeName:h.getVolumeName(),slotName:k,slotRow:j,slotColumn:m,disk:h,width:this.widthDisk,height:this.heightDisk})}else _2("Error getting disks","Disk in wrong slot "+k,_TRACE_ACTIVE.ERROR,"Storage")}},this)},addDisk:function(a){a=new _s1.Storage.Disk(a);var b=Ext.get(this.bayId+"-"+a.slotName);b&&a.render(b);this.disksCt.items.add(a);a.setSelectable(true);
return a},setOrientation:function(a){if(a=="1"){this.addClass(this.cls+"-hor");this.widthDisk=140;this.heightDisk=33;this.isHorOrient=true}else{this.removeClass(this.cls+"-hor");this.widthDisk=33;this.heightDisk=140;this.isHorOrient=false}},setRowsColumnsCount:function(a,b){if(a&&b){this.slots=[];for(b=0;b<a;++b)this.slots[b]=[];b=this.el.child(".storage-jbot-name");var c=this.el.child(".storage-jbot-port");if(this.isHorOrient||this.headJbodIsHor){a=this.heightDisk*a;b.setWidth(a);c.setWidth(a);b.setStyle("margin-top",
a/2+"px");b.setStyle("margin-left","-"+(a/2-9)+"px");c.setStyle("margin-bottom",a/2+"px");c.setStyle("margin-right","-"+(a/2-9)+"px")}else{b.setStyle("width","100%");b.setStyle("margin-top","0px");b.setStyle("margin-left","0px");c.setStyle("width","100%");c.setStyle("margin-bottom","0px");c.setStyle("margin-right","0px")}}}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.Disk=_._1(Ext.BoxComponent,{selectable:false,active:false,cls:"storage-disk",clsSelect:"storage-disk-select",clsSelectable:"storage-disk-selectable",clsFromVolume:"storage-disk-from-volume",clsHardRaid:"storage-disk-raid",clsHardMirror:"storage-disk-mirror",clsHardLog:"storage-disk-log",clsHardCache:"storage-disk-cache",clsHardSpare:"storage-disk-spare",clsHardFormat:"storage-disk-format",clsExported:"storage-disk-exported",constructor:function(a){_s1.Storage.Disk.superclass.constructor.call(this,
a);a=this.disk.getDiskState();a=a=="ONLINE"?this.cls+"-led-green":a=="RESYNC"?this.cls+"-led-yellow":!a||a==_4||a=="UNKNOWN"?"":this.cls+"-led-red";for(var b=this.disk.getCapacity(),c=0;b>1E3&&c<4;){b/=1E3;++c}b=b>=10?Math.round(b):b.toFixed(1)*1==Math.round(b)?Math.round(b):b.toFixed(1);b+=" "+[_TR("BYTES"),_TR("KB"),_TR("MB"),_TR("GB"),_TR("TB")][c];this.html='<div class="'+this.cls+'-content"><div class="'+a+'"></div><div class="'+this.cls+'-not-present-icon"></div><div class="'+this.cls+'-text">'+
this.disk.getHardwareInterface()+" "+b+'</div><div class="'+this.cls+'-fortooltip"></div></div>';this.addEvents("startSelect","startDeselect","select","deselect","contextMenu");this.diskId=this.disk.getDiskId();this.capacityInGB=Math.round(this.disk.getCapacity()/107374182400)*100;this.rpm=this.disk.getRPM();this.formattable=parseInt(this.disk.getFormattable());this.isSignedByNetgear=this.disk.getSignedByNetgear();if(this.isSignedByNetgear=document.__DEBUG||this.isSignedByNetgear=="1"||this.disk.getPresent()==
"0"){this.disk.getVolumeState()=="EXPORTED"&&this.addClass(this.clsExported);this.disk.getPresent()=="0"&&this.addClass(this.cls+"-not-present");if(this.disk.getIsGlobalSpare()=="1"){this.isSpare=true;this.setState("SPARE")}}else this.addClass(this.cls+"-not-netgear");if(!_s1.Storage.Disk.TOOLTIP_TEMPLATE)_s1.Storage.Disk.TOOLTIP_TEMPLATE=new Ext.Template('<table class="storage-diskinfo"><tr><td class="storage-diskinfo-cellname">'+_TR("ID")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{diskId}</td></tr><tr><td class="storage-diskinfo-cellname">'+
_TR("MODEL")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{model}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("SERIAL")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{serial}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("FIRMWARE_VERSION")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{firmwareVersion}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("RPM")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{RPM}</td></tr><tr><td class="storage-diskinfo-cellname">'+
_TR("SECTORS")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{sectors}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("CAPACITY")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{capacity}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("TEMPERATURE")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{temp}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("ATA_ERROR")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{ATAError}</td></tr><tr><td class="storage-diskinfo-cellname">'+
_TR("SLOT_NAME")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{slotName}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("HARDWARE_INTERFACE")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{hardwareInterface}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("VOLUME_NAME")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{volumeName}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("VOLUME_STATE")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{volumeState}</td></tr><tr><td class="storage-diskinfo-cellname">'+
_TR("VOLUME_HOST_ID")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{volumeHostId}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("DISK_STATE")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{diskState}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("CHANNEL")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{channelID}</td></tr><tr><td class="storage-diskinfo-cellname">'+_TR("DISK_CLASS")+_TR("COLON")+'</td><td class="storage-diskinfo-cellvalue">{className}</td></tr></table>')},
getTooltipText:function(){if(!this.tooltipText)if(this.isSignedByNetgear){var a=this.disk,b=a.getTemperature();if(!b||b==_4||b=="-1")b=_TR("N_A");this.tooltipText=_s1.Storage.Disk.TOOLTIP_TEMPLATE.applyTemplate({diskId:a.getDiskId()||"",model:a.getModel()||"",serial:a.getSerial()||"",firmwareVersion:a.getFirmwareVersion()||"",RPM:a.getRPM()||"",sectors:a.getSectors()||"",capacity:_s10.Utils.fileSize(a.getCapacity()),temp:b,ATAError:a.getATAError()||"",slotName:a.getSlotName()||
"",hardwareInterface:a.getHardwareInterface()||"",volumeName:a.getVolumeName()||"",volumeState:a.getVolumeState()||"",volumeHostId:a.getVolumeHostId()||"",diskState:a.getDiskState()||"",className:a.getClass()||"",channelID:a.getChannelID()||""})}else this.tooltipText='<span class="storage-diskinfo-nonetgear">'+_TR("DISK_NOT_NETGEAR")+"</span>";return this.tooltipText},onStartSelect:function(){function a(){this.setSelected(true)}if(this.selectable){this.el.on("mousemove",a,this);Ext.getDoc().on("mouseup",
function(){this.el.un("mousemove",a,this)},this)}},onStartDeselect:function(){function a(){this.setSelected(false)}if(this.selectable){this.el.on("mousemove",a,this);Ext.getDoc().on("mouseup",function(){this.el.un("mousemove",a,this)},this)}},onMouseDown:function(a){if(a.button==0)if(this.selected){this.setSelected(false);this.fireEvent("startDeselect")}else{this.setSelected(true);this.fireEvent("startSelect")}},onClick:function(a){if(a.button==0)this.selected||this.setSelected(true)},setActive:function(a,
b,c){if(this.active=a)c?this.setState("LOG"):this.setState(this.virtDevice?this.virtDevice.getType():"");else this.setState();this.removeClass("storage-disk-raid-hover");this.removeClass("storage-disk-log-hover");if(b&&c)this.addClass("storage-disk-log-hover");else b&&this.addClass("storage-disk-raid-hover")},setSelectable:function(a){if(a&&!this.selectable){this.addClass(this.clsSelectable);a=="nomultiple"?this.el.on("click",this.onClick,this):this.el.on("mousedown",this.onMouseDown,this)}else if(!a&&
this.selectable){this.removeClass(this.clsSelectable);this.setSelected(false);this.el.un("mousedown",this.onMouseDown,this);this.el.un("click",this.onClick,this)}this.selectable=a},setSelected:function(a){if(a&&!this.selected){this.addClass(this.clsSelect);this.selected=true;this.fireEvent("select",this)}else if(!a&&this.selected){this.removeClass(this.clsSelect);this.selected=false;this.fireEvent("deselect",this)}},setState:function(a){this.state=a=(a||"").toUpperCase();this.removeClass(this.clsHardRaid);
this.removeClass(this.clsHardMirror);this.removeClass(this.clsHardLog);this.removeClass(this.clsHardCache);this.removeClass(this.clsHardSpare);this.removeClass(this.clsFromVolume);switch(a){case "RAID":this.addClass(this.clsHardRaid);this.checkFormattable(this.clsHardRaid);break;case "MIRROR":this.addClass(this.clsHardRaid);this.checkFormattable(this.clsHardRaid);break;case "LOG":this.addClass(this.clsHardLog);this.checkFormattable(this.clsHardLog);break;case "CACHE":this.addClass(this.clsHardCache);
this.checkFormattable(this.clsHardCache);break;case "SPARE":this.addClass(this.clsHardSpare);break;case "FROM_VOLUME":this.addClass(this.clsFromVolume);this.checkFormattable(this.clsFromVolume);break}},checkFormattable:function(a){if(this.formattable){this.removeClass(a);this.addClass(this.clsHardFormat)}},getDpvInstance:function(){return this.disk}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.CreateVolumeWindow=_._1(Ext.UI.Window,{modal:true,width:320,autoWidth:true,resizable:false,cls:"storage-newvolume-window",help:"system_wnd_create_volume",constructor:function(){this.title=_TR("NEW_VOLUME");this.html='<div id="'+(this.boxStep1Id=Ext.id())+'"><table class="'+this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-name">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+
(this.tfNameId=Ext.id())+'"></td><td id="'+(this.cmpGraphId=Ext.id())+'" rowspan="5"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("PROTECTION_LEVEL")+_TR("COLON")+'</nobr></td><td id="'+(this.cbRaidId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("VOLUME_GROUPS_NUMBER")+_TR("COLON")+'</nobr></td><td id="'+(this.cbGroupsNumberId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("VOLUME_DRIVES_NUMBER_PER_GROUP")+
_TR("COLON")+'</nobr></td><td id="'+(this.tfDrivesNumberPerGroupId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("VOLUME_SPARE_DRIVES_NUMBER")+_TR("COLON")+'</nobr></td><td id="'+(this.tfSpareDrivesNumberId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell raid-cfg-desc" colspan="3"><nobr>'+_TR("DESCRIPTION")+_TR("COLON")+' <span id="'+(this.elDescId=Ext.id())+'"></span></nobr></td></tr></table></div><div id="'+(this.boxStep2Id=Ext.id())+
'"><table class="'+this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+'-datatable-labelcell">'+_TR("QUOTA")+':</td><td id="'+(this.chbQuotaId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell">'+_TR("VOLUME_CREATE_DEFAULT_SHARES")+':</td><td id="'+(this.chbCreateDefaultShareId=Ext.id())+'"></td></tr><tr><td colspan="2"><div style="margin: 10px; height: 1px; background: #ccc;"></div></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("VOLUME_ENCRYPTION_ENABLED")+
_TR("COLON")+'</nobr></td><td id="'+(this.chbEncEnId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"></td><td><div id="'+(this.lWarningId=Ext.id())+'" class="x-controls-prompt-icon-WARNING '+this.cls+'-datatable-encwarning">'+_TR("VOLUME_ENCRYPTION_WARNING")+'</div></td></tr><tr><td class="'+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-enc"><nobr>'+_TR("VOLUME_ENCRYPTION_MOUNT")+_TR("COLON")+'</nobr></td><td id="'+(this.cbEncUSBId=Ext.id())+'"></td></tr><tr><td class="'+
this.cls+'-datatable-labelcell"></td><td><div id="'+(this.lWarningExistKeyId=Ext.id())+'" class="x-controls-prompt-icon-WARNING '+this.cls+'-datatable-encwarning">'+_TR("VOLUME_ENCRYPTION_WARNING_EXIST_KEY")+'</div><div id="'+(this.chbOverwriteKeyId=Ext.id())+'" style="padding-bottom: 10px;"></div></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("VOLUME_ENCRYPTION_EMAIL")+_TR("COLON")+'</nobr></td><td id="'+(this.chbEncEmailId=Ext.id())+'"></td></tr></table></div>';this.bCreate=
new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CREATE"),handler:this.onApplyClick,scope:this,acceptbtn:true});this.bNext=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("NEXT"),handler:this.onNextClick,scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bCreate,this.bNext,this.bCancel];_s1.Storage.CreateVolumeWindow.superclass.constructor.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spFSManager=a.getFSManager();_a(this.spFSManager,"_i1").Advise(this);this.spSYSManager=a.getSystemManager();this.spLCManager=this.spSYSManager.getLocaleManager();this.zfsVolumesManager=a.getZFSVolumesManager()},afterRender:function(){_s1.Storage.CreateVolumeWindow.superclass.afterRender.apply(this,arguments);this.boxStep1=Ext.get(this.boxStep1Id);this.boxStep2=Ext.get(this.boxStep2Id);this.elDesc=
Ext.get(this.elDescId);this.tfName=new Ext.UI.TextField({width:150,cls:this.cls+"-datatable-cell",value:"",enableKeyEvents:true,tooltipCfg:{html:_TR("VOLUME_NAME_VALIDATE_MESSAGE_BTRFS"),enabled:true},listeners:{keyup:function(){this.chbEncEn.getValue()&&this.populateFS()},scope:this},renderTo:this.tfNameId});this.cbRaid=new Ext.UI.ComboBox({width:150,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:0,listeners:{select:this.onRaidLevelSelect,scope:this},store:new Ext.data.ArrayStore({id:0,
fields:["myId","text"],data:[]}),valueField:"myId",displayField:"text",renderTo:this.cbRaidId});this.cbGroupsNumber=new Ext.UI.ComboBox({width:150,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:0,listeners:{select:this.onGroupsNumberSelect,scope:this},store:new Ext.data.ArrayStore({id:0,fields:["id"],data:[]}),valueField:"id",displayField:"id",renderTo:this.cbGroupsNumberId});this.tfDrivesNumberPerGroup=new Ext.UI.TextField({width:150,readOnly:true,renderTo:this.tfDrivesNumberPerGroupId});
this.tfSpareDrivesNumber=new Ext.UI.TextField({width:150,readOnly:true,renderTo:this.tfSpareDrivesNumberId});this.cmpVolPerfGraph=new _s10.VolumePerformanceGraph({renderTo:this.cmpGraphId});this.chbQuota=new Ext.UI.Checkbox({renderTo:this.chbQuotaId,listeners:{check:function(a,b){b&&Ext.UI.MessageBox.info({icon:Ext.UI.MessageBox.WARNING,title:this.title,msg:_TR("QUOTA_ALERT_DESC")+"<br /><br />"+_TR("QUOTA_ALERT_ENABLE")})},scope:this}});this.chbCreateDefaultShare=new Ext.UI.Checkbox({renderTo:this.chbCreateDefaultShareId});
this.chbEncEn=new Ext.UI.Checkbox({listeners:{check:function(a,b){if(b){this.addClass(this.cls+"-enc-enabled");this.cbEncUSB.enable();this.populatedUSB&&this.populatedUSB.length?this.cbEncUSB.onSelect(this.cbEncUSB.store.data.get(0),0):this.cbEncUSB.setValue("");this.chbEncEmail.enable()}else{this.removeClass(this.cls+"-enc-enabled");Ext.get(this.lWarningExistKeyId).parent("tr").setDisplayed(false);this.chbOverwriteKey.setValue(false);this.cbEncUSB.disable();this.cbEncUSB.setValue("");this.chbEncEmail.disable();
this.chbEncEmail.setValue(false)}},scope:this},renderTo:this.chbEncEnId});this.cbEncUSB=new Ext.UI.ComboBox({width:310,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:0,store:new Ext.data.ArrayStore({id:0,fields:["myId","text"],data:[]}),valueField:"myId",displayField:"text",listeners:{select:function(a,b){this.spFSManager.getFsTreeNode(b.data.myId,"0","system-storage-createwnd-update-fs")},scope:this},renderTo:this.cbEncUSBId});this.chbOverwriteKey=new Ext.UI.Checkbox({boxLabel:_TR("VOLUME_ENCRYPTION_MOUNT_OVERWRITE_KEY"),
renderTo:this.chbOverwriteKeyId});this.chbEncEmail=new Ext.UI.Checkbox({renderTo:this.chbEncEmailId});Ext.get(this.lWarningExistKeyId).parent("tr").setDisplayed(false)},populateUSB:function(){var a=this.spFSManager.getVolumes(),b=this.populatedUSB=[];_.each(a,function(c){c=_a(c,"_i11");if(c.getEncrypt()!="1"){var d=c.getMountPoint(),f=d.split("/");c&&String(d).indexOf("/media")==0&&b.push([d,f[f.length-1]])}},this);this.cbEncUSB.store.loadData(b)},populateVolumes:function(a){this.volumeNames=
[];this.raidmode="flexraid";Ext.each(a,function(b){if(b=_a(b,"_i4o")){var c=b.getVolumeName();if(!c||c==_4)c="";this.volumeNames.push(c.toLowerCase());if(b.getVolumeMode()=="1")this.raidmode="xraid"}},this)},onRaidLevelSelect:function(){var a=this.cbRaid.getValue(),b=this.loadedDisksCount,c,d=[],f={50:Math.min(6,Math.floor(b/2)),60:Math.min(15,Math.floor(b/2))};c={50:3,60:4}[a];f=f[a];if(a==0)this.loadedDisksCount>1&&Ext.UI.MessageBox.warning({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("ALERTS_MSG_SWITCH_TO_RAID0")});
else if(a==5)b>6&&Ext.UI.MessageBox.warning({title:_TR("MESSAGEBOX_WARNING"),msg:String.format(_TR("STORAGE_VOLUME_RAID_GROUP_PERF_WARN"),6)});else a==6&&b>15&&Ext.UI.MessageBox.warning({title:_TR("MESSAGEBOX_WARNING"),msg:String.format(_TR("STORAGE_VOLUME_RAID_GROUP_PERF_WARN"),15)});if(a>10){this.tfDrivesNumberPerGroup.enable();this.cbGroupsNumber.enable();this.tfSpareDrivesNumber.enable();for(var e=Math.floor(b/f);e<=Math.floor(b/c);++e)Math.floor(b/e)<=f&&b/e>=c&&b%e<e&&d.push([e]);c=d[0][0];
if(a==60)if(b>47){if(c<4)c=4}else if(b>35){if(c<3)c=3}else if(b>15)if(c<2)c=2;this.cbGroupsNumber.store.loadData(d);this.cbGroupsNumber.setValue(c);this.onGroupsNumberSelect()}else{this.tfDrivesNumberPerGroup.setValue("").disable();this.cbGroupsNumber.setValue("").disable();this.tfSpareDrivesNumber.setValue("").disable();this.onRaidConfigChange()}},onGroupsNumberSelect:function(){var a=this.cbGroupsNumber.getValue();this.tfDrivesNumberPerGroup.setValue(Math.floor(this.loadedDisksCount/a));this.tfSpareDrivesNumber.setValue(this.loadedDisksCount%
a);this.onRaidConfigChange()},onRaidConfigChange:function(){var a=this.cbRaid.getValue(),b=this.cbGroupsNumber.getValue()||1,c=b*this.tfDrivesNumberPerGroup.getValue()||this.loadedDisksCount,d;if(a==50){if(b>10)d=String.format(_TR("STORAGE_VOLUME_RAID_PERF_WARN"),10)}else if(a==60)if(b>4)d=String.format(_TR("STORAGE_VOLUME_RAID_PERF_WARN"),4);this.elDesc.update(this.cmpVolPerfGraph.setState(a,b,c));d&&setTimeout(function(){Ext.UI.MessageBox.warning({title:_TR("MESSAGEBOX_WARNING"),msg:d})},50)},onNextClick:function(){if(this.validateStep1()){this.boxStep1.setDisplayed(false);
this.boxStep2.setDisplayed(true);this.bNext.hide();var a=this.bCreate;a.show();setTimeout(function(){a.focus()},500)}},onApplyClick:function(){if(this.validateStep2()){var a=this.cbRaid.getValue(),b=this.tfDrivesNumberPerGroup.getValue()||this.loadedDisksCount,c=this.cbGroupsNumber.getValue()||1,d=this.tfSpareDrivesNumber.getValue()||0;if(a==10){b=2;c=this.loadedDisksCount/2}this.bCreate.blur();this.fireEvent("createClick",this.tfName.getValue(),a,b,c,d,this.chbQuota.getValue(),this.chbCreateDefaultShare.getValue()?
"1":"0",this.cbEncUSB.getValue(),this.chbEncEmail.getValue(),this.chbOverwriteKey.getValue())}},validateStep1:function(){var a=false;this.removeClass(this.cls+"-error-name");var b=this.tfName.getValue(),c=this.volumeNames&&this.volumeNames.indexOf(b.toLowerCase())!=-1;if(b&&_.isValidBtrFSPoolName(b)&&!c)this.removeClass(this.cls+"-error-name");else{this.tfName.focus();this.addClass(this.cls+"-error-name");a=true}return!a},validateStep2:function(){var a=false;this.removeClass(this.cls+"-error-enc");
Ext.get(this.chbOverwriteKeyId).removeClass(this.cls+"-error-existkey");if(this.chbEncEn.getValue()&&!this.cbEncUSB.getValue()){this.addClass(this.cls+"-error-enc");a=true}if(this.keyExist&&!this.chbOverwriteKey.getValue()){Ext.get(this.chbOverwriteKeyId).addClass(this.cls+"-error-existkey");a=true}return!a},load:function(a){var b=+this.zfsVolumesManager.getVolumes().length;Ext.get(this.chbCreateDefaultShareId).parent("tr").setDisplayed(b==0);b==0&&this.chbCreateDefaultShare.setValue(false);this.boxStep1.setDisplayed(true);
this.boxStep2.setDisplayed(false);this.bNext.show();this.bCreate.hide();b=this.spLCManager.getLocale()!="ru"&&!(this.spLCManager.getLocale()=="auto"&&this.spLCManager.getAutoLocale()=="ru");Ext.get(this.chbEncEnId).parent("tr").setDisplayed(b);Ext.get(this.lWarningId).parent("tr").setDisplayed(b);Ext.get(this.cbEncUSBId).parent("tr").setDisplayed(b);Ext.get(this.chbEncEmailId).parent("tr").setDisplayed(b);Ext.get(this.lWarningExistKeyId).parent("tr").setDisplayed(b);this.keyExist=false;this.removeClass(this.cls+
"-error-name");this.removeClass(this.cls+"-error-enc");this.tfName.setValue("");this.populateFS([]);var c=1;if(a==1)b=[[1,"JBOD"]];else{b=[[0,"RAID 0"]];a==2&&b.push([1,"RAID 1"]);if(a>2){c=5;b.push([5,"RAID 5"]);if(a>3){b.push([6,"RAID 6"]);a%2==0&&b.push([10,"RAID 10"]);if(a>5){c=6;b.push([50,"RAID 50"]);if(a>7){b.push([60,"RAID 60"]);if(a>15)c=60}}}}}this.loadedDisksCount=a;this.cbRaid.store.loadData(b);this.cbRaid.setValue(c);this.onRaidLevelSelect();this.tfName.focus(false,true);this.populateUSB();
this.chbEncEn.setValue(false);this.chbQuota.setValue(false,true);(a=_a(this.spSYSManager.getSysInfo(),"_i43"))&&a!=_4&&a.getRackmount()=="0"&&this.chbQuota.setValue(true,true);this.onFirstShow()},populateFS:function(a){this.fsnames=a||this.fsnames||[];if(this.keyExist=this.fsnames.indexOf(this.tfName.getValue()+".key")!=-1)Ext.get(this.lWarningExistKeyId).parent("tr").setDisplayed(true);else{Ext.get(this.lWarningExistKeyId).parent("tr").setDisplayed(false);this.chbOverwriteKey.setValue(false)}},
_iz:{_o1:function(){return _5},OnFSTNodeReady:function(a,b){if(b=="system-storage-createwnd-update-fs"){var c=[];if(a=(new _.Xml.document(a.getNodeText())).selectSingleNode("fsgrab")){a=a.selectNodes("i")||[];_.each(a,function(d){c.push(d.getAttributeText("n"))},this)}this.populateFS(c)}return _5},_o3:function(){return _5}}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.PropertiesWindow=_._1(_9,Ext.UI.Window,_i3v,_i4t,{help:"system_wnd_prop_volume",constructor:function(){_.apply(this,{cls:"storage-volumeprop",modal:true,autoWidth:true,height:520,resizable:false,bodyCssClass:"x-system-prompt-body",minimizable:false,maximizable:false,title:_TR("PROPERTIES"),fbar:[{xtype:"uibutton",text:_TR("OK"),handler:function(){this.bApply.disabled?this.hide():this.onApplyClick(true)},scope:this,
acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true},this.bApply=new Ext.UI.Button({text:_TR("APPLY"),handler:function(){this.onApplyClick(false)},scope:this})]});_s1.Storage.PropertiesWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.Storage.PropertiesWindow.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.zfsVolumesManager=
a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.zfsDisksManager=a.getZFSDisksManager();_a(this.zfsDisksManager,"_i1").Advise(this);this.spVolumeScheduleManager=a.getVolumeScheduleManager();_a(this.spVolumeScheduleManager,"_i1").Advise(this);this.DrivesAll=[]},afterRender:function(){_s1.Storage.PropertiesWindow.superclass.afterRender.apply(this,arguments);this.sidebar=new Ext.UI.SideBar({renderTo:this.body});this.sidebar.addTab(_TR("SUMMARY"),
new Ext.Component({html:'<div class="storage-volumeprop-bar"><div class="storage-volumeprop-bar-raidmode"><table class="storage-diskinfo"><tr><td class="storage-volumeprop-label">'+_TR("CHECKSUM")+':</td><td id="'+(this.chbChecksumId=Ext.id())+'" class="storage-volumeprop-value"></td></tr><tr><td class="storage-volumeprop-label">'+_TR("QUOTA")+':</td><td id="'+(this.chbQuotaId=Ext.id())+'" class="storage-volumeprop-value"></td></tr></table></div><div id="'+(this.statsNodeId=Ext.id())+'"></div></div>'}));
this.sidebar.addTab(_TR("RAID"),new Ext.Component({html:'<div class="storage-volumeprop-raid-tab"><table><tr><td id="'+(this.cmpSwitchRaidTypeId=Ext.id())+'" style="width: 400px; vertical-align: top;"></td><td id="'+(this.cmpVolPerfGraphId=Ext.id())+'" style="vertical-align: top;"></td></tr></table></div>'}));this.sidebar.addTab(_TR("READYTIER"),new Ext.Component({html:'<table class="storage-diskinfo" id="'+(this.cbReadyTierId=Ext.id())+'"></table>'}));this.sidebar.addTab(_TR("DISKS"),new Ext.Component({html:'<div style="padding-bottom: 10px;"><table class="storage-diskinfo"><tr><td class="storage-diskinfo-cellname storage-volumeprop-label">'+
_TR("DISK")+':</td><td class="storage-diskinfo-cellvalue" id="'+(this.cbDiskNodeId=Ext.id())+'"></td></tr></table></div><div id="'+(this.disksNodeId=Ext.id())+'"></div>'}));this.sidebar.addTab(_TR("VOLUME_SCHEDULE"),new Ext.Component({html:'<div id="'+(this.bAddId=Ext.id())+'" style="height: 30px; padding: 0 15px 20px;"></div><div style="padding: 0 20px 20px 0;"><table class="ui-fwgrid-header" style="width: 100%; table-layout: fixed;" cellpadding="0" cellspacing="4"><tr><td style="width: 10%;"><div class="x-ellipsis" title="'+
_TR("VOLUME_SCHEDULE_VOLUME")+'">'+_TR("VOLUME_SCHEDULE_VOLUME")+'</div></td><td style="width: 25%;"><div class="x-ellipsis" title="'+_TR("VOLUME_SCHEDULE_ACTION")+'">'+_TR("VOLUME_SCHEDULE_ACTION")+'</div></td><td style="width: 15%;"><div class="x-ellipsis" title="'+_TR("VOLUME_SCHEDULE_STATE")+'">'+_TR("VOLUME_SCHEDULE_STATE")+'</div></td><td style="width: 50%;"><div class="x-ellipsis" title="'+_TR("VOLUME_SCHEDULE_OCCURS")+'">'+_TR("VOLUME_SCHEDULE_OCCURS")+'</div></td><td style="min-width: 30px; width: 30px;"></td><td style="min-width: 30px; width: 30px;"></td></tr></table><div id="'+
(this.gridId=Ext.id())+'" style="max-height: 210px; height: 210px;"></div><div id="'+(this.addScheduleId=Ext.id())+'" style="height: 40px; width: 554px; padding-top: 20px;"></div></div>'}));this.sidebar.addTab(_TR("VOLUME_SNAPSHOT_PRUNE"),new Ext.Component({html:'<table class="storage-diskinfo"><tr><td class="storage-volumeprop-prune-label">'+_TR("VOLUME_SNAPSHOT_PRUNE_LABEL")+':</td><td id="'+(this.sfPruneNodeId=Ext.id())+'"></td><td class="storage-volumeprop-prune-label-percent">%</td></tr><tr><td class="storage-volumeprop-prune-desc" colspan="3">'+
_TR("VOLUME_SNAPSHOT_PRUNE_DESC")+"</td></tr></table>"}));this.scroller=new Ext.UI.Scroller({dom:Ext.get(this.gridId).dom,type:"vertical"});this.scroller.reg();this.wnd=new _s1.VolumeScheduleWindow({listeners:{applyclick:function(a,b){a=b.__s.uiInfo;Ext.get(a.txtId).update(this.wnd.getHumanString());Ext.get(a.volId).update(b.getVolumeName());Ext.get(a.enId).update(b.getEnabled()=="1"?"Enabled":"Disabled");b=b.getAction();switch(b){case "1":b=_TR("VOLUME_SCHEDULE_DEDUP");break;case "2":b=
_TR("VOLUME_SCHEDULE_SCRUB");break;case "3":b=_TR("VOLUME_SCHEDULE_DEFRAG");break;case "4":b=_TR("VOLUME_SCHEDULE_BALANCE");break;case "5":b=_TR("VOLUME_SCHEDULE_DISKTEST");break;case "6":b=_TR("VOLUME_SCHEDULE_SSD_TRIM");break;case "7":b=_TR("VOLUME_SCHEDULE_DATA_MIGRATION");break}Ext.get(a.actionId).update(b);this.bApply.enable()},addclick:function(a,b){this.spVolumeScheduleManager.AddSchedule(b,{cmd:"system-volschedulepanel-add-schedule"})},scope:this}});this.chbChecksum=new Ext.UI.Checkbox({renderTo:this.chbChecksumId,
listeners:{check:function(){this.bApply.enable()},scope:this}});this.chbQuota=new Ext.UI.Checkbox({renderTo:this.chbQuotaId,listeners:{check:function(){this.bApply.enable()},scope:this}});this.cmpVolumeTypeLabel=new Ext.Component({cls:"header",renderTo:this.cmpSwitchRaidTypeId});this.cbReadyTier=new Ext.Component({cls:"header",renderTo:this.cbReadyTierId});this.cmpSwitchRaidType=new _s1.Storage.SwitchRaidType({renderTo:this.cmpSwitchRaidTypeId,listeners:{change:function(){this.bApply.enable()},
scope:this}});this.cmpVolPerfGraph=new _s10.VolumePerformanceGraph({renderTo:this.cmpVolPerfGraphId});this.cbDisk=new Ext.UI.ComboBox({width:120,mode:"local",triggerAction:"all",value:0,renderTo:this.cbDiskNodeId,store:new Ext.data.ArrayStore({id:0,fields:["id","text","component"]}),valueField:"id",displayField:"text",listeners:{select:function(a,b){this.diskCmps&&_.each(this.diskCmps,function(c){c&&c.hide()},this);b.data.component.show()},scope:this}});this.statsTab=new _s1.StorageInspectorGroupIOStats({renderTo:this.statsNodeId,
listeners:{refreshClick:function(){this.zfsVolumesManager.UpdateVolumeIOStat(this.volume,"system-storage-update-zfsvolumeiostat")},scope:this}});this.bAdd=new Ext.UI.Button({xtype:"uibutton",text:_TR("ADD"),handler:this.onAdd,width:80,style:"float: right;",scope:this});this.bAdd.render(this.addScheduleId);this.sfPrune=new Ext.UI.SpinnerField({width:50,minValue:5,maxValue:99,incrementValue:1,alternateIncrementValue:10,renderTo:this.sfPruneNodeId,listeners:{change:this.onPruneChange,spin:this.onPruneChange,
valid:this.onPruneChange,scope:this}})},setDisksVolume:function(a){this.DrivesAll=[];Ext.each(a,function(b){if(b=_a(b,"_i4m"))if((b=b.getDisks())&&b.length)for(var c=0;c<b.length;++c)for(var d=_a(b[c],"_i4d").getDiskId(),f=this.zfsDisksManager.getDiskEnclosures(),e=0;e<f.length;e++){var g=_a(f[e],"_i4e");if(g)(g=g.getDiskById(d))&&this.DrivesAll.push(g)}},this)},loadVolume:function(a,b){this.sidebar.selectTab(0);this.setTitle(_a(a,"_i4o").getVolumeName());
this.volume=a;this.zfsVolumesManager.UpdateVolumeIOStat(a,"system-storage-update-zfsvolumeiostat");this.chbChecksum.setValue(a.getChecksum()=="on",true);this.chbQuota.setValue(a.getQuota()=="on",true);b=this.populateDisks(b);var c=a.getVirtualDevices(),d=a.getRAIDLevel(),f=c.length,e=a.getConcatenated();this.setDisksVolume(c);c=this.isEvenDrivesNumberInEachGroup(c);this.cmpVolumeTypeLabel.update(String.format(_TR("STORAGE_VOLUME_PROPS_TYPE"),d=="JBOD"?d:"RAID"+d,d=="50"||d=="60"?String.format(_TR("STORAGE_VOLUME_PROPS_TYPE_GROUPS"),
f):""));this.cmpSwitchRaidType.setVisible((a.getVolumeMode()=="1"?"xraid":"flexraid")!="xraid"&&(d=="5"||d=="6"||d=="50"||d=="60")&&f>1).setDisabled(!c||e&&this.isVarySizeDisks(this.DrivesAll)||e&&a.getXRaidExpanded()=="1").setValue(e?"concatenated":"stripe");this.cmpVolPerfGraph.setState(d,f,b,e);(a=a.getSnapshotPruneThreshold())&&a!=_4&&!isNaN(+a)?this.sfPrune.setValue(100-a):this.sfPrune.setValue("");this.removeClass("storage-volumeprop-error-prune");this.bApply.disable();this.center();d=this.volume&&
this.volume.getRAIDLevel();a="";var g=false,h=false;Ext.each(this.volume.getVirtualDevices(),function(k){if(_a(k,"_i4m").getTierType()>6)g=true;else h=true});a=(b=this.volume.getTierType()!="Disable"&&this.volume.getVirtualDevices().length>1&&g&&h)?'<tr><td><div style="font-size: 16px;" >'+_TR("READY_TIER_ONLINE")+'</div></td></tr><tr><td><div style="padding-top: 25px;" id="'+(this.dataVolumeId=Ext.id())+'"></div></td></tr><tr><td><p style="padding-left:27px;">'+_TR("READY_TIER_CONFIGURE_METADATA2")+
'</p></td></tr><tr><td><div style="font-size:16px; padding-top:20px; padding-left:27px;"><div style="float:left;">'+_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_MIGRATION")+'</div><div style="float:left;" id="'+(this.dataTierMigrationHelpId=Ext.id())+'"></div></div></td></tr><tr><td><table class="td-data-tier-changerate" cellpadding="0" cellspacing="0" style="clear: both; padding-left: 27px; text-indent:20px;"><tr><td id="'+(this.spnPercentageLblId=Ext.id())+'">'+_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_USEDPERCENTAGE")+
'</td><td style="padding-left:5px;" id="'+(this.spnPercentageId=Ext.id())+'"></td><td>%</td></tr></table></td></tr><tr><td><div style="padding-top: 10px;" id="'+(this.metadataVolumeId=Ext.id())+'"></div></td></tr><tr><td><p style="padding-left:27px;">'+_TR("READY_TIER_CONFIGURE_METADATA")+"</p></td></tr>":'<tr><td><div style="font-size: 16px;" >'+_TR("READY_TIER_OFFLINE")+"</div></td></tr><br/><tr><td><p>"+_TR("READY_TIER_CONFIGURE")+"</p></td></tr><br/><tr><td><p>"+_TR("READY_TIER_CONFIGURE_METADATA")+
"</p></td></tr><br/><tr><td><p>"+_TR("READY_TIER_CONFIGURE_METADATA2")+"</p></td></tr>";this.cbReadyTier.update(a);if(b){this.radioDataVolume=new Ext.UI.Radio({boxLabel:_TR("STORAGE_ADD_RAID_TIER_P1_DATATIER_RADIO_LABLE"),cls:"add-tier-radio",name:"add-tier-mode",checked:true,listeners:{check:function(){this.bApply.enable()},scope:this}});this.radioDataVolume.render(this.dataVolumeId);this.radioMetadataVolume=new Ext.UI.Radio({boxLabel:_TR("STORAGE_ADD_RAID_TIER_P1_METADATA_RADIO_LABLE"),cls:"add-tier-radio",
name:"add-tier-mode",listeners:{check:function(){this.bApply.enable()},scope:this}});this.radioMetadataVolume.render(this.metadataVolumeId);new Ext.UI.RoundButton({cls:"x-frontview-btn-info",style:"margin-left: 5px;",renderTo:this.dataTierMigrationHelpId,listeners:{afterrender:function(k){new Ext.UI.ToolTip(k.el,{html:_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_MIGRATION_HELP")})}}});this.spnPercentageLbl=Ext.get(this.spnPercentageLblId);this.spnPercentage=new Ext.UI.SpinnerField({width:48,minValue:1,
maxValue:100,value:90,selectOnFocus:true,alternateIncrementValue:10,renderTo:this.spnPercentageId,listeners:{change:function(){this.bApply.enable()},spin:function(){this.bApply.enable()},scope:this}});a=this.volume.getTierType();b=this.volume.getTierDataMigrationThreshold();this.radioDataVolume.setValue(a=="Data");this.radioMetadataVolume.setValue(a!="Data");b&&this.spnPercentage.setValue(b)}},isHighestSSDTier:function(a,b){return b<6&&a>6},getTier:function(a,b){var c,d=function(f,e){return b?f<e:
f>e};a.forEach(function(f){if(c){if(d(c,f.getType()))c=f&&f.getType&&f.getType()}else c=f&&f.getType&&f.getType()});return c},isEvenDrivesNumberInEachGroup:function(a){for(var b=true,c=_a(a[0],"_i4m").getDisks().length,d=1;d<a.length;++d)if(c!=_a(a[d],"_i4m").getDisks().length){b=false;break}return b},isVarySizeDisks:function(a){for(var b=true,c=+a[0].getCapacity(),d=1;d<a.length;++d)if(c!=+a[d].getCapacity()){b=false;break}return!b},selectTab:function(a){this.sidebar.selectTab(a)},
onPruneChange:function(){this.bApply.disabled&&this.volume.getSnapshotPruneThreshold()!=100-this.sfPrune.getValue()&&this.bApply.enable()},onApplyClick:function(a){if(this.validate()){var b=this.chbQuota.getValue()?"on":"off";this.volume.getQuota()==b?this.checkWarningSwitchRadaType(a):Ext.UI.MessageBox.confirm({title:this.title,msg:_TR("QUOTA_ALERT_DESC")+"<br /><br />"+(b=="on"?_TR("QUOTA_ALERT_ENABLE"):_TR("QUOTA_ALERT_DISABLE")),buttons:{yes:_TR("OK"),no:_TR("CANCEL")},fn:function(c){c=="yes"&&
this.checkWarningSwitchRadaType(a)},scope:this})}},checkWarningSwitchRadaType:function(a){!this.volume.getConcatenated()&&this.cmpSwitchRaidType.getValue()==="concatenated"&&(!this.isEvenDrivesNumberInEachGroup(this.volume.getVirtualDevices())||this.isVarySizeDisks(this.DrivesAll))?Ext.UI.MessageBox.confirm({title:this.title,msg:_TR("SWITCH_RAID_TYPE_WARNING"),buttons:{yes:_TR("OK"),no:_TR("CANCEL")},fn:function(b){if(b=="yes"){this.onApplyConfirm(a);this.cmpSwitchRaidType.setDisabled(true)}},scope:this}):
this.onApplyConfirm(a)},onApplyConfirm:function(a){this.volume.putChecksum(this.chbChecksum.getValue()?"on":"off");this.volume.putQuota(this.chbQuota.getValue()?"on":"off");this.volume.putSnapshotPruneThreshold(100-this.sfPrune.getValue());this.cmpSwitchRaidType.hidden||this.volume.putConcatenated(this.cmpSwitchRaidType.getValue()=="concatenated");if(this.radioDataVolume){var b=this.radioDataVolume.getValue()?"Data":"Metadata",c=this.spnPercentage.getValue();this.volume.putTierType(b);b=="Data"&&
this.volume.putTierDataMigrationThreshold(c)}this.fireEvent("volpropapply",this.volume);this.bApply.disable();this.commitSchedule();a&&this.hide()},validate:function(){var a=true;this.removeClass("storage-volumeprop-error-prune");var b=+this.sfPrune.getValue();if(isNaN(b)||b<5||b>99){this.addClass("storage-volumeprop--error-prune");a=false}if(this.spnPercentageLbl){this.spnPercentageLbl.removeClass("x-bac-label-error");if(!this.spnPercentage.getValue()){this.spnPercentageLbl.addClass("x-bac-label-error");
a=false}}return a},commitSchedule:function(){_.each(this.spVolumeScheduleManager.getSchedules(),function(a){a=_a(a,"_i4r");if(a.IsMarkedToDelete())this.spVolumeScheduleManager.RemoveSchedule(a,{cmd:"system-volschedulepanel-remove-schedule"});else a.IsDirty()&&this.spVolumeScheduleManager.CommitSchedule(a,{cmd:"system-volschedulepanel-commit-schedule"})},this)},onShow:function(){this.createEmptyScheduleTable(_TR("EMPTY"));this.spVolumeScheduleManager.UpdateSchedules({cmd:"system-volschedulepanel-update-schedules"})},
populateDisks:function(a){this.diskCmps&&_.each(this.diskCmps,function(c){c&&c.destroy()},this);this.diskCmps=[];var b=[];Ext.each(a,function(c){c.disksCt.items.each(function(d){if(d.volume&&d.volume.getVolumeId()==this.volume.getVolumeId()){var f=new Ext.Component({renderTo:this.disksNodeId,html:d.getTooltipText()});b.push([d.disk.getDiskId(),_TR("DISK")+" "+d.disk.getSlotName(),f])}this.diskCmps.push(f)},this)},this);this.cbDisk.store.loadData(b);this.cbDisk.onSelect(this.cbDisk.store.data.get(0),
0);return b.length},createEmptyScheduleTable:function(a){var b=Ext.get(this.gridId);this.cleanScheduleTable(b);b.insertHtml("afterbegin",this.getEmptyTableRow(0,""));b.insertHtml("afterbegin",this.getEmptyTableRow(1,a));b.insertHtml("afterbegin",this.getEmptyTableRow(2,""))},getEmptyTableRow:function(a,b){return'<table class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td style="width: 100%;"><div style="width: 100%; text-align: center;">'+b+"</div></td></tr></table>"},
cleanScheduleTable:function(a){a=a.dom;for(var b=a.firstChild;b;){var c=b.nextSibling;a.removeChild(b);b=c}},populateSchedules:function(){var a=Ext.get(this.gridId);this.cleanScheduleTable(a);var b=0;this.maxIdSchedule=0;if(!this.wnd.rendered){this.wnd.show();this.wnd.hide()}_.each(this.spVolumeScheduleManager.getSchedules(),function(c){c=_a(c,"_i4r");this.wnd.loadArgs({spVolumeSchedule:c,spVolume:this.volume});var d=c.getId();if(this.maxIdSchedule<d)this.maxIdSchedule=d*1;
if(this.volume.getVolumeName()==c.getVolumeName()){this.addScheduleItem(a,c);++b}},this);b||this.createEmptyScheduleTable(_TR("EMPTY"))},addScheduleItem:function(a,b){var c=this.wnd.getHumanString();b.getId();var d=b.getVolumeName(),f=b.getAction();switch(f){case "1":f=_TR("VOLUME_SCHEDULE_DEDUP");break;case "2":f=_TR("VOLUME_SCHEDULE_SCRUB");break;case "3":f=_TR("VOLUME_SCHEDULE_DEFRAG");break;case "4":f=_TR("VOLUME_SCHEDULE_BALANCE");break;case "5":f=_TR("VOLUME_SCHEDULE_DISKTEST");break;case "6":f=
_TR("VOLUME_SCHEDULE_SSD_TRIM");break;case "7":f=_TR("VOLUME_SCHEDULE_DATA_MIGRATION");break}var e=b.getEnabled()=="1"?"Enabled":"Disabled",g=null,h=null,k=Ext.id(),j={volId:Ext.id(),actionId:Ext.id(),enId:Ext.id(),txtId:Ext.id()};a.insertHtml("afterbegin",'<table id="'+k+'" class="ui-fwgrid-row'+(i%2==1?"alt":"")+'" style="width: 100%; table-layout: fixed;" cellpadding="0" cellspacing="4"><tr><td style="width: 10%;"><div id="'+j.volId+'" class="x-ellipsis" title="'+d+'">'+d+'</div></td><td style="width: 25%;"><div id="'+
j.actionId+'" class="x-ellipsis" title="'+f+'">'+f+'</div></td><td style="width: 15%;"><div id="'+j.enId+'" class="x-ellipsis" title="'+e+'">'+e+'</div></td><td style="width: 50%;"><div id="'+j.txtId+'" class="x-ellipsis" title="'+c+'">'+c+'</div></td><td style="min-width: 30px; width: 30px; text-align: center;"><div id="'+(g=Ext.id())+'" title="'+_TR("EDIT")+'"></div></td><td style="min-width: 30px; width: 30px; text-align: center;"><div id="'+(h=Ext.id())+'" title="'+_TR("DELETE")+'"></div></td></tr></table>');
b.__s.uiInfo=j;a=new Ext.UI.RoundButton({cls:"x-sec-sshkey-delete-btn",width:24,height:24});a.render(h);a.on("click",function(n){this.onKeyDelete(n,k,b)},this);h=new Ext.UI.RoundButton({cls:"x-sec-sshkey-edit-btn",width:24,height:24});h.render(g);h.on("click",function(n){this.onKeyEdit(n,k,b)},this);var m=Ext.get(k);m.on("click",function(n,p){n=Ext.get(p).parent("table");if(!n.hasClass("ui-fwgrid-rowsel")&&m.id===n.id){this.selectedRow&&this.selectedRow.removeClass("ui-fwgrid-rowsel");n.addClass("ui-fwgrid-rowsel");
this.selectedRow=n}},this)},onKeyDelete:function(a,b,c){c&&Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:_TR("ALERT_REMOVE_SCHEDULE_CONFIRM"),fn:function(d){if(d=="yes"){this.bApply.enable();Ext.get(b).remove();c.MarkToDelete()}},scope:this})},onKeyEdit:function(a,b,c){if(c){this.wnd.show();this.wnd.loadArgs({spVolumeSchedule:c,maxIdSchedule:this.maxIdSchedule,spVolume:this.volume})}},onAdd:function(){this.wnd.show();this.wnd.loadArgs({maxIdSchedule:this.maxIdSchedule,spVolume:this.volume})},
_i3v:{_o2:function(a,b){b=="system-storage-update-zfsvolumeiostat"&&this.statsTab.updateLabels(this.volume.getIOStat());return _5}},_i4t:{OnFailed:function(a,b){if(!this.rendered)return _5;a=b.getErrorCause();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(a,"Code: "+b.getErrorCode(),_2.ERROR,{windowTitle:_TR("SERVICE_OPERATION_ERROR_TITLE"),title:"",subTitle:a,buttonInspect:false,buttonShowLog:false,buttonSend:false,
checkboxShow:false});_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.hideIndicatorExt();return _5},_o2:function(a,b){switch(b.cmd){case "system-volschedulepanel-update-schedules":this.populateSchedules();break;case "system-volschedulepanel-add-schedule":case "system-volschedulepanel-commit-schedule":case "system-volschedulepanel-remove-schedule":this.spVolumeScheduleManager.UpdateSchedules({cmd:"system-volschedulepanel-update-schedules"});break}return _5}}});
Ext.namespace("_s1","_s1.Storage");
_s1.Storage.TypeConfirmWindow=_._1(Ext.UI.Window,{modal:true,width:400,autoWidth:true,autoCreate:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",cls:"storage-typeconfirm-window",help:"system_wnd_export_volume",constructor:function(a){a=a||{};_.applyIf(a,{title:_TR("CONFIRM"),textToEnter:"PROCEED",textApply:_TR("APPLY"),textCancel:_TR("CANCEL"),message:""});_.apply(this,a);this.html=
'<table cellspacing="0"><tr><td valign="top" style="padding-top: 5px;"><div class="x-controls-prompt-icon-MESSAGE"></div></td><td><table class="'+this.cls+'-datatable" cellspacing="0"><tr><td id="'+(this.tdMessageId=Ext.id())+'" class="'+this.cls+'-datatable-labelcell" style="">'+this.message+' "'+this.textToEnter+'"</td></tr><tr><td id="'+(this.tfTextId=Ext.id())+'"></td></tr></table></td></tr></table>';this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:this.textApply,handler:function(){if(this.validate()){this.fireEvent("applyclick",
this.args);this.hide()}},scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:this.textCancel,handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bApply,this.bCancel];_s1.Storage.TypeConfirmWindow.superclass.constructor.call(this,a);this.tfText=new Ext.UI.TextField({width:292,value:""});this.on("afterrender",function(){this.tfText.render(this.tfTextId)},this)},validate:function(){var a=this.tfText.getValue();if(a&&a==
this.textToEnter)return true;else{this.tfText.focus();return false}},load:function(a){this.args=a||{};this.volumnsLen=arguments.length>=2?arguments[1]:0;this.tfText.setValue("");this.tfText.focus(false,true);var b=Ext.fly(this.tdMessageId),c=a.getDpvVolume().getState(),d=["DEAD","INACTIVE"];a.getDpvVolume().raidmode=="xraid"&&this.volumnsLen==1&&d.indexOf(c)==-1?b.update(this.message+' "'+this.textToEnter+'"'):b.update(_TR("STORAGE_DESTROY_VOLUME_CONFIRM_X_RAID")+' "'+this.textToEnter+'"')}});
Ext.namespace("_s1","_s1.Storage");
_s1.Storage.AddGroupWindow=_._1(Ext.UI.Window,{modal:true,width:320,autoWidth:true,autoCreate:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",cls:"storage-expandvolume-window",help:"system_wnd_expand_volume",constructor:function(){this.title=_TR("STORAGE_ADD_RAID_GROUP");this.html='<div class="x-controls-prompt-icon-MESSAGE"><div id="'+(this.lMsgId=Ext.id())+'" class="'+this.cls+'-lraid"></div><div id="'+
(this.boxEncId=Ext.id())+'" class="'+this.cls+'-boxenc"><div class="'+this.cls+'-lenc">'+_TR("STORAGE_EXPAND_VOLUME_CONFIRM_ENCRYPTION")+'</div><table class="'+this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-enc"><nobr>'+_TR("VOLUME_ENCRYPTION_MOUNT_VOLUME")+_TR("COLON")+'</nobr></td><td id="'+(this.cbEncUSBId=Ext.id())+'"></td></tr></table></div><div id="'+(this.boxRaidTypeId=Ext.id())+'" class="'+this.cls+'-boxraid"></div><div id="'+
(this.lConfirmId=Ext.id())+'" class="'+this.cls+'-lconfirm"></div></div>';this.bApply=new Ext.UI.Button({width:100,text:_TR("APPLY"),handler:this.onApplyClick,scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bApply,this.bCancel];_s1.Storage.AddGroupWindow.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spFSManager=a.getFSManager();this.zfsDisksManager=a.getZFSDisksManager()},afterRender:function(){_s1.Storage.CreateVolumeWindow.superclass.afterRender.apply(this,arguments);this.lMsg=Ext.get(this.lMsgId);this.boxEnc=Ext.get(this.boxEncId);this.boxRaidType=Ext.get(this.boxRaidTypeId);this.lConfirm=Ext.get(this.lConfirmId);this.cbEncUSB=new Ext.UI.ComboBox({width:250,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:0,store:new Ext.data.ArrayStore({id:0,
fields:["id","text"],data:[]}),valueField:"id",displayField:"text",renderTo:this.cbEncUSBId});this.cmpSwitchRaidType=new _s1.Storage.SwitchRaidType({renderTo:this.boxRaidTypeId})},populateUSB:function(){var a=this.spFSManager.getVolumes(),b=this.populatedUSB=[];_.each(a,function(c){(c=_a(c,"_i11"))&&String(c.getMountPoint()).indexOf("/media")==0&&b.push([c.getMountPoint(),c.getMountPoint().split("/")[2]])},this);this.cbEncUSB.store.loadData(b)},onApplyClick:function(){if(this.validate()){this.fireEvent("applyclick",
this,this.loadedArgs.volume,this.cbEncUSB.getValue(),this.cmpSwitchRaidType.getValue()=="concatenated");this.hide()}},validate:function(){var a=false;this.removeClass(this.cls+"-error-enc");if(this.loadedArgs.volume.getDpvVolume().getEncryptionEnabled()=="1"&&!this.cbEncUSB.getValue()){this.addClass(this.cls+"-error-enc");a=true}return!a},getSmallestSizeDisk:function(a,b){a=b?this.getDisksForGroup(a):a;b=+a[0].getCapacity();for(var c=1;c<a.length;++c)if(b>+a[c].getCapacity())b=+a[c].getCapacity();
return b},getDisksForGroup:function(a){for(var b=[],c=1;c<a.length;++c)for(var d=_a(a[c],"_i4d").getDiskId(),f=this.zfsDisksManager.getDiskEnclosures(),e=0;e<f.length;e++){var g=_a(f[e],"_i4e");if(g)(g=g.getDiskById(d))&&b.push(g)}return b},loadArgs:function(a){var b=a.disks,c=a.volume.DpvVolume,d=c.getVirtualDevices(),f=_a(d[0],"_i4m").getDisks(),e=c.getRAIDLevel(),g=e=="JBOD"||e=="0"||e=="1"||e=="10"||b.length<f.length||this.getSmallestSizeDisk(b)<
this.getSmallestSizeDisk(f,true),h="";f=String.format(Math.floor(b.length/f.length)==1?_TR("STORAGE_VOLUME_RAID_GROUP_DESC"):_TR("STORAGE_VOLUME_RAID_GROUPS_DESC"),Math.floor(b.length/f.length),"RAID"+e,f.length)+(b.length%f.length?String.format("<br />"+_TR("STORAGE_VOLUME_RAID_GROUPS_DESC_UNUSED"),b.length%f.length):"");b=(!g?_TR("STORAGE_VOLUME_RAID_CONC_ALL_DISKS")+"<br />":"")+String.format(_TR("STORAGE_VOLUME_RAID_GROUP_DESC"),1,e=="JBOD"?b.length==1?"JBOD":"RAID0":"RAID"+(e=="1"&&b.length>=
3?"5":e),b.length);this.removeClass(this.cls+"-error-enc");this.loadedArgs=a;this.populateUSB();switch(e){case "JBOD":case "0":h=_TR("STORAGE_ADD_RAID_GROUP_NO_PARITY");break;case "1":case "10":case "5":case "50":h=_TR("STORAGE_ADD_RAID_GROUP_ONE_DRIVE_PARITY");break;case "6":case "60":h=_TR("STORAGE_ADD_RAID_GROUP_TWO_DRIVES_PARITY");break}this.lMsg.update(_TR("STORAGE_ADD_RAID_GROUP_MSG")+" "+h);this.lConfirm.update(a.manyEncs?_TR("STORAGE_EXPAND_VOLUME_CONFIRM_DIFF_ENC"):_TR("STORAGE_EXPAND_VOLUME_CONFIRM"));
if(c.getEncryptionEnabled()=="1"){this.boxEnc.setDisplayed(true);this.populatedUSB&&this.populatedUSB.length?this.cbEncUSB.onSelect(this.cbEncUSB.store.data.get(0),0):this.cbEncUSB.setValue("")}else{this.boxEnc.setDisplayed(false);this.cbEncUSB.setValue("")}if(d.length==1){this.cmpSwitchRaidType.setSingleConcMode(g).setDisabled(g).setValue(g||c.getConcatenated()?"concatenated":"stripe",f,b);this.boxRaidType.setDisplayed(true)}else{this.cmpSwitchRaidType.setValue(c.getConcatenated()?"concatenated":
"stripe");this.boxRaidType.setDisplayed(false)}}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.AddTierWindow=_._1(Ext.UI.Window,{modal:true,width:400,autoCreate:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",cls:"storage-expandvolume-window",help:"system_wnd_expand_volume",constructor:function(){this.title=_TR("STORAGE_ADD_RAID_TIER");this.html='<div class="x-controls-prompt-icon-MESSAGE"><div class="'+this.cls+'-lraid">'+String.format(_TR("STORAGE_ADD_RAID_TIER_MSG"),
'<span class="cfg-desc" id="'+(this.performanceId=Ext.id())+'"></span>')+'</div><div id="'+(this.boxEncId=Ext.id())+'" class="'+this.cls+'-boxenc"><div class="'+this.cls+'-lenc">'+_TR("STORAGE_EXPAND_VOLUME_CONFIRM_ENCRYPTION")+'</div><table class="'+this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-enc"><nobr>'+_TR("VOLUME_ENCRYPTION_MOUNT_VOLUME")+_TR("COLON")+'</nobr></td><td id="'+(this.cbEncUSBId=Ext.id())+'"></td></tr></table></div><div  class=" storage-switch-raid-type"><div  class="x-form-cb-label" >'+
_TR("STORAGE_EXPAND_VOLUME_METADATA_TIER")+"</div><ul><li>"+_TR("STORAGE_EXPAND_VOLUME_METADATA_HIGHER_TIER")+"</li><li>"+_TR("STORAGE_EXPAND_VOLUME_METADATA_TIER_SEQUENTIAL")+'</li></ul><div class="cfg-desc" id="'+(this.raidStateId=Ext.id())+'"></div></div><div class="'+this.cls+'-lconfirm">'+_TR("STORAGE_EXPAND_VOLUME_CONFIRM");this.bApply=new Ext.UI.Button({width:100,text:_TR("APPLY"),handler:this.onApplyClick,scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,
text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bApply,this.bCancel];_s1.Storage.AddTierWindow.superclass.constructor.apply(this,arguments);this.spFSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getFSManager()},afterRender:function(){_s1.Storage.CreateVolumeWindow.superclass.afterRender.apply(this,arguments);this.raidState=Ext.get(this.raidStateId);this.boxEnc=Ext.get(this.boxEncId);this.performanceState=
Ext.get(this.performanceId);this.cbEncUSB=new Ext.UI.ComboBox({width:215,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:0,store:new Ext.data.ArrayStore({id:0,fields:["id","text"],data:[]}),valueField:"id",displayField:"text",renderTo:this.cbEncUSBId})},onApplyClick:function(){if(this.validate()){this.fireEvent("applyclick",this,this.loadedArgs.volume,this.cbEncUSB.getValue(),true);this.hide()}},validate:function(){var a=false;this.removeClass(this.cls+"-error-enc");if(this.loadedArgs.volume.getDpvVolume().getEncryptionEnabled()==
"1"&&!this.cbEncUSB.getValue()){this.addClass(this.cls+"-error-enc");a=true}return!a},populateUSB:function(){var a=this.spFSManager.getVolumes(),b=this.populatedUSB=[];_.each(a,function(c){(c=_a(c,"_i11"))&&String(c.getMountPoint()).indexOf("/media")==0&&b.push([c.getMountPoint(),c.getDescription()])},this);this.cbEncUSB.store.loadData(b)},loadArgs:function(a){this.loadedArgs=a;var b=a.disks,c=a.volume.DpvVirtualDevices;a=a.volume.DpvVolume;var d=a.getRAIDLevel(),f,e,g;g=d=="1"&&b.length>=
3?"5":d=="6"&&b.length==2?"1":d=="6"&&b.length==3?"5":d;d=String.format(_TR("STORAGE_VOLUME_RAID_GROUP_DESC"),1,d=="JBOD"?b.length==1?"JBOD":"RAID0":"RAID"+g,b.length);this.populateUSB();this.raidState.update(d);b.forEach(function(h){if(f){if(f>h.getType())f=h.getType()}else f=h.getType()});c.forEach(function(h){h=_a(h,"_i4m");if(e){if(e>h.getTierType())e=h.getTierType()}else e=h.getTierType()});if(a.getEncryptionEnabled()=="1"){this.boxEnc.setDisplayed(true);this.populatedUSB&&
this.populatedUSB.length?this.cbEncUSB.onSelect(this.cbEncUSB.store.data.get(0),0):this.cbEncUSB.setValue("")}else{this.boxEnc.setDisplayed(false);this.cbEncUSB.setValue("")}this.performanceState&&this.performanceState.update(e<f?_TR("STORAGE_ADD_RAID_TIER_IMPROVE"):_TR("STORAGE_ADD_RAID_TIER_KEEP"))}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.AddTierWiardFirstPage=_._1(Ext.Container,{help:"system_wnd_expand_volume",constructor:function(){_s1.Storage.AddTierWiardFirstPage.superclass.constructor.apply(this,arguments);this.on("afterrender",this.onReady,this)},onReady:function(){this.el.update('<div><table cellpadding="0" cellspacing="0" style="width:100%"><tr><td style="padding: 0 27px;">'+_TR("STORAGE_ADD_RAID_TIER_P1_ILLUSTRATION")+'</td></tr><tr><td style="padding-top: 25px;" id="'+(this.dataVolumeId=
Ext.id())+'"></td></tr><tr><td style="padding: 0 27px;">'+_TR("STORAGE_ADD_RAID_TIER_P1_ILLUSTRATION_DATATIER")+'</td></tr><tr><td style="padding: 10px 27px 0px 27px;" id="'+(this.raidState1Id=Ext.id())+'"></td></tr><tr><td style="padding-top: 25px;" id="'+(this.metadataVolumeId=Ext.id())+'"></td></tr><tr><td style="padding: 0 27px;">'+_TR("STORAGE_ADD_RAID_TIER_P1_ILLUSTRATION_METATIER")+'</td></tr><tr><td style="padding: 10px 27px 0px 27px;" id="'+(this.raidState2Id=Ext.id())+'"></td></tr></table></div>');
this.radioDataVolume=new Ext.UI.Radio({boxLabel:_TR("STORAGE_ADD_RAID_TIER_P1_DATATIER_RADIO_LABLE"),cls:"add-tier-radio",name:"add-tier-mode",checked:true});this.radioDataVolume.render(this.dataVolumeId);this.radioMetadataVolume=new Ext.UI.Radio({boxLabel:_TR("STORAGE_ADD_RAID_TIER_P1_METADATA_RADIO_LABLE"),cls:"add-tier-radio",name:"add-tier-mode"});this.radioMetadataVolume.render(this.metadataVolumeId);this.raidState1=Ext.get(this.raidState1Id);this.raidState2=Ext.get(this.raidState2Id)},loadArg:function(a){var b=
a.disks;a=a.volume.DpvVolume.getRAIDLevel();var c;c=a=="1"&&b.length>=3?"5":a=="6"&&b.length==2?"1":a=="6"&&b.length==3?"5":a;b=String.format(_TR("STORAGE_VOLUME_RAID_GROUP_DESC"),1,a=="JBOD"?b.length==1?"JBOD":"RAID0":"RAID"+c,b.length);this.raidState1.update(b);this.raidState2.update(b);this.radioDataVolume.setValue(true)}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.AddTierWiardSecondPage=_._1(Ext.Container,{help:"system_wnd_expand_volume",clss:"storage-expandvolume-window",constructor:function(){_s1.Storage.AddTierWiardSecondPage.superclass.constructor.apply(this,arguments);this.on("afterrender",this.onReady,this)},onReady:function(){this.el.update('<div id="'+(this.dataTierDivId=Ext.id())+'"><table cellpadding="0" cellspacing="0" style="width:100%"><tr><td style="font-size:16px;"><div style="float:left;">'+_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_MIGRATION")+
'</div><div style="float:left;" id="'+(this.dataTierMigrationHelpId=Ext.id())+'"></div></td></tr><tr><td class="td-data-tier-changerate" style="padding-top:10px; text-indent:20px;"><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.spnPercentageLblId=Ext.id())+'">'+_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_USEDPERCENTAGE")+'</td><td style="padding-left:5px;" id="'+(this.spnPercentageId=Ext.id())+'"></td><td>%</td></tr></table></td></tr><tr><td style="font-size: 16px; padding-top:10px;">'+_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_TITLE")+
'</td></tr><tr><td class="td-data-tier-changerate" style="padding-top:10px; text-indent:20px;"><table cellpadding="0" cellspacing="0"><tr><td>'+_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_DATACHANGE")+'</td><td style="padding-left:5px;" id="'+(this.spnRateId=Ext.id())+'"></td><td>GB</td><td><div id="'+(this.spnRateHelpId=Ext.id())+'"></div></td></tr></table></td></tr><tr><td style="padding-left:20px; padding-top:10px;" id="'+(this.cronId=Ext.id())+'"></td></tr></table></div><div id="'+(this.metaDataDivId=
Ext.id())+'" style="padding: 0 50px; padding-bottom: 100px"><table cellpadding="0" cellspacing="0" style="width:100%"><tr><td style="font-size: 16px; font-weight:bolder;padding-top: 20px;">'+_TR("STORAGE_ADD_RAID_TIER_P2_METADATA_TITLE")+'</td></tr><tr><td style="padding-top: 20px;font-size:15px;">'+_TR("STORAGE_ADD_RAID_TIER_P2_METADATA_INFO")+'</td></tr></table></div><div id="'+(this.boxEncId=Ext.id())+'" style="padding-top:10px;"><div style="padding-bottom:10px;">'+_TR("STORAGE_EXPAND_VOLUME_CONFIRM_ENCRYPTION")+
'</div><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.cbEncUSBLblId=Ext.id())+'"><nobr>'+_TR("VOLUME_ENCRYPTION_MOUNT_VOLUME")+_TR("COLON")+'</nobr></td><td id="'+(this.cbEncUSBId=Ext.id())+'"></td></tr></table></div><div id="'+(this.dataTierDivConfirmId=Ext.id())+'" style="padding-top:10px;">'+_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_APPLYCONFIRM")+"</div>");this.cron=new Ext.CronSchedule({renderTo:this.cronId,width:430,height:260});this.spnRate=new Ext.UI.SpinnerField({width:70,minValue:1,
value:90,selectOnFocus:true,renderTo:this.spnRateId,onBlur:_.Utils.throttle(this.adjustSchedule,this,1E3),listeners:{spin:this.adjustSchedule,scope:this}});new Ext.UI.RoundButton({cls:"x-frontview-btn-info",style:"margin-left: 5px;",renderTo:this.spnRateHelpId,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_DATACHANGE_HELP")})}}});new Ext.UI.RoundButton({cls:"x-frontview-btn-info",style:"margin-left: 5px;",renderTo:this.dataTierMigrationHelpId,
listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("STORAGE_ADD_RAID_TIER_P2_DATATIER_MIGRATION_HELP")})}}});this.spnPercentage=new Ext.UI.SpinnerField({width:48,minValue:1,maxValue:100,value:90,selectOnFocus:true,alternateIncrementValue:10,renderTo:this.spnPercentageId,onBlur:_.Utils.throttle(this.adjustSchedule,this,1E3),listeners:{spin:this.adjustSchedule,scope:this}});this.cbEncUSB=new Ext.UI.ComboBox({width:215,mode:"local",triggerAction:"all",value:0,store:new Ext.data.ArrayStore({id:0,
fields:["id","text"],data:[]}),valueField:"id",displayField:"text",renderTo:this.cbEncUSBId});this.spnPercentageLbl=Ext.get(this.spnPercentageLblId);this.cbEncUSBLbl=Ext.get(this.cbEncUSBLblId);this.boxEnc=Ext.get(this.boxEncId);this.spFSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getFSManager()},adjustSchedule:function(){var a=this.spnRate.getValue();a=this.totalDataTierCapacity*this.spnPercentage.getValue()/100/(a*1024*1024*1024);if(a<1)this.cron.loadArgs({min:"",hour:"0",
dom:"",month:"",dow:""});else if(a<2)this.cron.loadArgs({min:"",hour:"0",dom:"",month:"",dow:""});else if(a<4)this.cron.loadArgs({min:"",hour:"",dom:"",month:"",dow:"2,4,6"});else a<5?this.cron.loadArgs({min:"",hour:"",dom:"",month:"",dow:"4,6"}):this.cron.loadArgs({min:"",hour:"",dom:"",month:"",dow:"6"})},populateUSB:function(){var a=this.spFSManager.getVolumes(),b=this.populatedUSB=[];_.each(a,function(c){(c=_a(c,"_i11"))&&String(c.getMountPoint()).indexOf("/media")==0&&b.push([c.getMountPoint(),
c.getMountPoint().split("/")[2]])},this);this.cbEncUSB.store.loadData(b)},initPage:function(a){var b=a.volume.DpvVolume;this.populateUSB();if(b.getEncryptionEnabled()=="1"){this.boxEnc.setDisplayed(true);this.populatedUSB&&this.populatedUSB.length?this.cbEncUSB.onSelect(this.cbEncUSB.store.data.get(0),0):this.cbEncUSB.setValue("")}else{this.boxEnc.setDisplayed(false);this.cbEncUSB.setValue("")}this.spnPercentage.setValue(90);this.spnRate.setValue(Math.round(+this.totalDataTierCapacity/10737418240));
a.radioDataVolumeChecked==true&&this.adjustSchedule()},loadArg:function(a){this.loadedArgs=a;Ext.get(this.dataTierDivId).setDisplayed(a.radioDataVolumeChecked==true);Ext.get(this.metaDataDivId).setDisplayed(a.radioDataVolumeChecked!=true);Ext.get(this.dataTierDivConfirmId).setDisplayed(a.radioDataVolumeChecked==true);if(a.radioDataVolumeChecked==true)Ext.get(this.boxEncId).dom.style.padding="10px 0px 0px 0px";else Ext.get(this.boxEncId).dom.style.padding="10px 50px 0px 50px";this.cron.loadArgs({min:"",
hour:"",dom:"",month:"",dow:""});this.cron.loadDatetierPattern();var b=a.disks,c=a.volume.DpvVolume.getRAIDLevel(),d;d=c=="1"&&b.length>=3?"5":c=="6"&&b.length==2?"1":c=="6"&&b.length==3?"5":c;var f=[];b.forEach(function(k){f.push(k.getCapacity())});var e=Math.min.apply(null,f),g=+f.length,h=0;d=c=="JBOD"?b.length==1?"JBOD":"RAID0":"RAID"+d;switch(d){case "JBOD":case "RAID0":h=e*g;break;case "RAID1":h=e*(g/2);break;case "RAID5":h=e*(g-1);break;case "RAID6":h=e*(g-2);break;case "RAID10":h=e*(g/2);
break}this.totalDataTierCapacity=h;this.spnRate.maxValue=parseInt(h/1024/1024/1024);this.initPage(a)},validate:function(){var a=false;this.cbEncUSBLbl.removeClass("x-bac-label-error");this.spnPercentageLbl.removeClass("x-bac-label-error");if(this.loadedArgs.volume.getDpvVolume().getEncryptionEnabled()=="1"&&!this.cbEncUSB.getValue()){this.cbEncUSBLbl.addClass("x-bac-label-error");a=true}if(!this.spnPercentage.getValue()){this.spnPercentageLbl.addClass("x-bac-label-error");a=true}if(this.loadedArgs.radioDataVolumeChecked==
true&&!this.cron.getHumanString())a=true;return!a},validSchedule:function(){var a=this.spnRate.getValue();return this.totalDataTierCapacity*this.spnPercentage.getValue()/100/(a*1024*1024*1024)}});Ext.namespace("_s1","_s1.Storage");
_s1.Storage.AddTierWiard=_._1(Ext.UI.Window,{modal:true,width:500,constrainHeader:true,minimizable:false,maximizable:false,resizable:false,cls:"storage-expandvolume-window",style:"box-shadow:0px",help:"system_wnd_expand_volume",constructor:function(){this.title=_TR("STORAGE_ADD_RAID_TIER");this.fbar=this.getFooter();_s1.Storage.AddTierWiard.superclass.constructor.apply(this,arguments)},getFooter:function(){this.nextBtn=new Ext.UI.Button({id:"datatier-add-next-btn",
text:_TR("NEXT"),width:100,acceptbtn:true,handler:this.onNextBtnClicked,scope:this});this.backBtn=new Ext.UI.Button({id:"datatier-add-back-btn",text:_TR("BACK"),hidden:true,width:100,handler:this.onBackClick,scope:this});this.cancelBtn=new Ext.UI.Button({id:"datatier-add-cancel-btn",text:_TR("CANCEL"),width:100,handler:this.onCancelClick,scope:this});this.finishBtn=new Ext.UI.Button({id:"datatier-add-finish-btn",text:_TR("FINISH"),width:100,hidden:true,acceptbtn:true,handler:this.onFinishClick,scope:this});
return["->",this.nextBtn,this.cancelBtn,this.backBtn,this.finishBtn]},afterRender:function(){_s1.Storage.AddTierWiard.superclass.afterRender.apply(this,arguments);this.Wizard1=new _s1.Storage.AddTierWiardFirstPage;this.Wizard1.render(this.body);this.Wizard2=new _s1.Storage.AddTierWiardSecondPage;this.Wizard2.render(this.body)},loadArgs:function(a){this.loadedArgs=a;this.Wizard1.loadArg(this.loadedArgs)},showButtons:function(a){if(a){this.nextBtn.show();this.backBtn.hide();
this.cancelBtn.show();this.finishBtn.hide()}else{this.nextBtn.hide();this.backBtn.show();this.cancelBtn.show();this.finishBtn.show()}},reset:function(){this.Wizard2.hide();this.Wizard1.show();this.showButtons(true)},onShow:function(){_s1.Storage.AddTierWiard.superclass.onShow.apply(this,arguments);this.reset();this.center()},onNextBtnClicked:function(){this.Wizard2.show();this.Wizard1.hide();this.showButtons(false);this.loadedArgs.radioDataVolumeChecked=this.Wizard1.radioDataVolume.getValue();
this.Wizard2.loadArg(this.loadedArgs)},onBackClick:function(){this.Wizard2.hide();this.Wizard1.show();this.showButtons(true)},onCancelClick:function(){this.hide()},onFinishClick:function(){if(this.Wizard2.validate()){var a={volume:this.loadedArgs.volume,encMount:this.Wizard2.cbEncUSB.getValue(),concatenated:true,type:this.Wizard1.radioDataVolume.getValue()?"Data":"Metadata",percentage:this.Wizard2.spnPercentage.getValue(),strings:this.loadedArgs.radioDataVolumeChecked?this.Wizard2.cron.getStrings():
undefined};if(this.Wizard2.validSchedule()<1)this.warningSchedule=Ext.UI.MessageBox.show({title:_TR("WARNING"),msg:_TR("STORAGE_ADD_RAID_TIER_SCHEDULE_WARNING"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.WARNING,fn:function(b){if(b=="ok"){this.fireEvent("applyDataTierClick",a);this.hide()}}.bind(this)});else{this.fireEvent("applyDataTierClick",a);this.hide()}}}});Ext.namespace("_s1.Storage");
_s1.Storage.SwitchRaidType=_._1(Ext.Container,{cls:"storage-switch-raid-type",constructor:function(){this.html='<div><div id="'+(this.rStripeId=Ext.id())+'"></div><ul><li>'+_TR("STORAGE_VOLUME_RAID_STRIPE_DRIVES")+"</li><li>"+_TR("STORAGE_VOLUME_RAID_STRIPE_PERF")+'</li></ul><div id="'+(this.lStripeCfgId=Ext.id())+'" class="cfg-desc"></div></div><div><div id="'+(this.rConcId=Ext.id())+'"></div><ul><li>'+_TR("STORAGE_VOLUME_RAID_CONC_DRIVES")+"</li><li>"+_TR("STORAGE_VOLUME_RAID_CONC_PERF")+
'</li></ul><div id="'+(this.lConcCfgId=Ext.id())+'" class="cfg-desc"></div><div>';_s1.Storage.SwitchRaidType.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.Storage.SwitchRaidType.superclass.afterRender.apply(this,arguments);this.rStripe=new Ext.UI.Radio({name:"storage-switch-raid-type",boxLabel:_TR("STORAGE_VOLUME_RAID_STRIPE"),renderTo:this.rStripeId,listeners:{check:this.onChange,scope:this}});this.rConc=new Ext.UI.Radio({name:"storage-switch-raid-type",
boxLabel:_TR("STORAGE_VOLUME_RAID_CONC"),renderTo:this.rConcId,listeners:{check:this.onChange,scope:this}});this.rStripe.setValue(this.value!="concatenated");this.lStripeCfg=Ext.get(this.lStripeCfgId);this.lConcCfg=Ext.get(this.lConcCfgId)},onChange:function(){this.fireEvent("change",this)},getValue:function(){return this.rStripe.getValue()?"stripe":"concatenated"},setValue:function(a,b,c){this.rStripe.setValue(a=="stripe");this.rConc.setValue(a=="concatenated");this.lStripeCfg.update(b||"");this.lConcCfg.update(c||
"");return this},setDisabled:function(a){this.rStripe.setDisabled(a);this.rConc.setDisabled(a);return this},setSingleConcMode:function(a){Ext.get(this.rStripeId).parent().setDisplayed(!a);return this}});Ext.namespace("_s1","_s1.Storage");
_s1.HostnameWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,closeAction:"hide",cls:"frontview-hostnamewindow",help:"system_wnd_hostname",constructor:function(){this.title=_TR("NEW_HOSTNAME");this.html='<table class="frontview-hostnamewindow-datatable" cellspacing="0" cellpadding="0"><tr><td class="frontview-hostnamewindow-datatable-cell frontview-hostnamewindow-datatable-labelcell">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfHostnameId=Ext.id())+'"></td></tr></table>';
this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("OK"),handler:function(){this.validate()&&this.fireEvent("applyClick",this.tfHostname.getValue())},scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bApply,this.bCancel];_s1.HostnameWindow.superclass.constructor.apply(this,arguments);this.tfHostname=new Ext.UI.TextField({width:310,inputMaxLength:15,
tooltipCfg:{html:_TR("HOSTNAME_TOOLTIP"),enabled:true}});this.on("afterrender",function(){this.tfHostname.render(this.tfHostnameId)},this)},validate:function(){var a=this.tfHostname.getValue();if(_.isValidHostname(a)){this.removeClass("frontview-hostnamewindow-error");return true}else{this.tfHostname.focus();this.addClass("frontview-hostnamewindow-error");return false}},load:function(a){this.removeClass("frontview-hostnamewindow-error");this.tfHostname.setValue(a)}});_._2("_s1");
_s1.SharesDataView=Ext.extend(Ext.DataView,{selectedClass:"x-system-share-selected",itemSelector:"table.x-system-share",singleSelect:true,constructor:function(a){_s2.VolumeDataView.superclass.constructor.call(this,a);this.store=new Ext.data.Store({autoDestroy:true,reader:new Ext.data.JsonReader({idProperty:"id",fields:["id","name","type","ref","chart","typetitle","btnid","consumedtitle","usedtitle","usedvalue","volume"]})});this.tpl=new Ext.XTemplate('<tpl for=".">','<table class="x-system-share x-system-{volume}-share" cellpadding="0" cellspacing="0">',
"<tr>",'<td class="x-system-share-valign">',"<tpl if=\"type == 'NAS'\">",'<div class="x-system-share-nas"></div>',"</tpl>","<tpl if=\"type == 'SAN'\">",'<div class="x-system-share-san"><div class="x-system-share-san-chart" style="background-position:{chart}"></div></div>',"</tpl>",'<div class="x-system-share-name x-ellipsis">{name}</div>','</td><td class="x-system-share-valign">','<table cellpadding="0" cellspacing="0">',"<tr>",'<td class="x-system-share-value x-ellipsis">{typetitle}</td>',"</tr>",
"<tr>",'<td class="x-system-share-value x-ellipsis">{volume}</td>',"</tr>","<tr>",'<td class="x-system-share-value">',"<div>{usedtitle}</div>",'<div class="x-system-hardware-vol-graph"><div class="x-system-hardware-vol-graphsize',"<tpl if=\"usedvalue &gt; 130 && type == 'NAS'\">","2","</tpl>","<tpl if=\"usedvalue &lt; 131 || type == 'SAN'\">","1","</tpl>",'" style="width: {usedvalue}px"></div></div>',"</td>","</tr>","</table>","</td>","</tr>","</table>","</tpl>")}});
Ext.namespace("_s1","_s1.Storage");
_s1.UpsConfigWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,minimizable:false,maximizable:false,resizable:false,cls:"x-system-upsconfig-window",help:"system_wnd_ups",constructor:function(){this.createTitle=_TR("UPS_ADD");this.changeTitle=_TR("UPS_SETTINGS");this.title=this.createTitle;this.html='<table class="'+this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-name">'+_TR("NAME")+
_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-desc">'+_TR("DESCRIPTION")+_TR("COLON")+'</td><td id="'+(this.tfDescriptionId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-cell-empty" colspan="2"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("TYPE")+_TR("COLON")+'</nobr></td><td id="'+(this.cbTypeId=Ext.id())+'"></td></tr><tr><td class="'+
this.cls+'-datatable-cell-empty" colspan="2"></td></tr><tr class="'+this.cls+'-datatable-row-address"><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-address">'+_TR("ADDRESS")+_TR("COLON")+'</td><td id="'+(this.tfAddressId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-only-remote"><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-username">'+_TR("USER")+_TR("COLON")+'</td><td id="'+(this.tfUserId=
Ext.id())+'"></td></tr><tr class="'+this.cls+'-only-remote"><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-password">'+_TR("PASSWORD")+_TR("COLON")+'</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-only-snmp"><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-community">'+_TR("COMMUNITY")+_TR("COLON")+'</td><td id="'+(this.tfCommunityId=Ext.id())+'"></td></tr><tr class="'+
this.cls+'-only-snmp"><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-mibs">'+_TR("UPS_MIBS")+_TR("COLON")+'</td><td id="'+(this.cbMibsId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-only-local"><td class="'+this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-threshold">'+_TR("UPS_SHUTDOWNTHRESHOLD")+_TR("COLON")+'</td><td id="'+(this.cbThresholdId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-only-local"><td class="'+
this.cls+"-datatable-cell "+this.cls+"-datatable-labelcell "+this.cls+'-datatable-labelcell-localenabled"></td><td id="'+(this.cbLocalEnabledId=Ext.id())+'"></td></tr></table>';this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("APPLY"),handler:this.onApplyClick,scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=[this.bApply,this.bCancel];_s1.UpsConfigWindow.superclass.constructor.apply(this,
arguments);this.addEvents("createClick");this.tfName=new Ext.UI.TextField({width:300,cls:this.cls+"-datatable-cell",value:""});this.tfDescription=new Ext.UI.TextField({width:300,cls:this.cls+"-datatable-cell",value:""});this.cbType=new Ext.UI.ComboBox({width:300,lazyRender:true,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:"SNMP",store:new Ext.data.ArrayStore({id:0,fields:["id","text"],data:[["SNMP",_TR("UPS_SNMP")],["REMOTE",_TR("UPS_REMOTE")],["LOCAL",_TR("UPS_LOCAL")]]}),
valueField:"id",displayField:"text",listeners:{scope:this,select:this.onTypeSelect}});this.bTypeTooltip=new Ext.UI.RoundButton({width:19,height:19,style:"float: right; margin-top: 6px;",iconCls:"x-system-btn-question"});this.tfAddress=new Ext.UI.TextField({width:300,cls:this.cls+"-datatable-cell",value:""});this.tfUserName=new Ext.UI.TextField({width:300,cls:this.cls+"-datatable-cell",value:""});this.tfPassword=new Ext.UI.TextField({width:300,cls:this.cls+"-datatable-cell",inputType:"password",value:""});
this.tfCommunity=new Ext.UI.TextField({width:300,cls:this.cls+"-datatable-cell",value:"",tooltipCfg:{html:_TR("UPS_ERRORTIP_COMMUNITY"),enabled:true}});this.cbMibs=new Ext.UI.ComboBox({width:300,lazyRender:true,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:"mge",store:new Ext.data.ArrayStore({id:0,fields:["id","text"],data:[["mge",_TR("UPS_MGE")],["apcc",_TR("UPS_APCC")],["netvision",_TR("UPS_NETVISION")],["pw",_TR("UPS_PW")],["aphel_genesisII",_TR("UPS_APHEL_GENESISII")],
["aphel_revelation",_TR("UPS_APHEL_REVELATION")],["raritan",_TR("UPS_RARITAN")],["baytech",_TR("UPS_BAYTECH")],["cpqpower",_TR("UPS_CPQPOWER")],["cyberpower",_TR("UPS_CYBERPOWER")]]}),valueField:"id",displayField:"text"});this.cbThreshold=new Ext.UI.ComboBox({width:300,lazyRender:true,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",value:"0",store:new Ext.data.ArrayStore({id:0,fields:["id","text"],data:[["0",_TR("UPS_AUTO")],["10",_TR("10%")],["20",_TR("20%")],["30",_TR("30%")],["40",
_TR("40%")],["50",_TR("50%")],["60",_TR("60%")],["70",_TR("70%")],["80",_TR("80%")],["90",_TR("90%")]]}),valueField:"id",displayField:"text"});this.cbLocalEnabled=new Ext.UI.Checkbox({cls:this.cls+"-datatable-cell",checked:false,boxLabel:_TR("ENABLE_MONITOR_UPS")});this.on("afterrender",function(){this.tfName.render(this.tfNameId);this.tfDescription.render(this.tfDescriptionId);this.cbType.render(this.cbTypeId);this.tfAddress.render(this.tfAddressId);this.tfUserName.render(this.tfUserId);this.tfPassword.render(this.tfPasswordId);
this.tfCommunity.render(this.tfCommunityId);_.initElePHEvent(this.tfCommunity,"public");this.cbMibs.render(this.cbMibsId);this.cbThreshold.render(this.cbThresholdId);this.cbLocalEnabled.render(this.cbLocalEnabledId)},this)},initComponent:function(){_s1.UpsConfigWindow.superclass.initComponent.apply(this,arguments)},onTypeSelect:function(){switch(this.cbType.getValue()){case "SNMP":this.addClass(this.cls+"-snmp");this.removeClass(this.cls+"-remote");this.removeClass(this.cls+"-local");
this.bTypeTooltip.hide();break;case "REMOTE":this.removeClass(this.cls+"-snmp");this.addClass(this.cls+"-remote");this.removeClass(this.cls+"-local");this.bTypeTooltip.show();break;case "LOCAL":this.removeClass(this.cls+"-snmp");this.removeClass(this.cls+"-remote");this.addClass(this.cls+"-local");this.bTypeTooltip.hide();break}this.clearErrors()},onApplyClick:function(){if(this.validate()){var a=this.tfCommunity.getValue()||"public";this.upsconfig?this.fireEvent("applyclick",this.upsconfig,{name:this.tfName.getValue()||
"UPS",desc:this.tfDescription.getValue(),address:this.tfAddress.getValue(),community:a,mibs:this.cbMibs.getValue(),username:this.tfUserName.getValue()||"monuser",password:this.tfPassword.getValue()||"pass",threshold:this.cbThreshold.getValue(),localenabled:this.cbLocalEnabled.getValue()}):this.fireEvent("addclick",this.cbType.getValue(),{name:this.tfName.getValue()||"UPS",desc:this.tfDescription.getValue(),address:this.tfAddress.getValue(),community:a,mibs:this.cbMibs.getValue(),username:this.tfUserName.getValue()||
"monuser",password:this.tfPassword.getValue()||"pass",threshold:this.cbThreshold.getValue(),localenabled:this.cbLocalEnabled.getValue()})}},populateUpsConfigs:function(a){this.upsNames=[];Ext.each(a,function(b){if((b=_a(b,"_i1g"))&&b.getType().toString().toUpperCase()=="SNMP"){b=b.getName();if(!b||b==_4)b="";this.upsNames.push(b.toLowerCase())}},this)},validate:function(){var a=false,b=this.cbType.getValue(),c=this.tfName.getValue(),d=this.upsNames&&this.upsNames.indexOf(c.toLowerCase())!=
-1,f=/(([a-zA-Z])+([a-zA-Z0-9])*)/g;if(b=="SNMP"&&!c||c.replace(f,"")!=""||c.length>15||b=="SNMP"&&d){this.addClass(this.cls+"-error-name");a=true}else this.removeClass(this.cls+"-error-name");f=this.tfAddress.getValue()||"";f=f.replace(/(^\s+)|(\s+$)/,"");if(b=="LOCAL")f&&f.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}(\/\d+)?$/);else if(!f||!_.Utils.isValidIPAddress(f)){this.addClass(this.cls+"-error-address");a=true}else this.removeClass(this.cls+"-error-address");if(b=="SNMP"){b=this.tfCommunity.getValue()||
"public";f=/(([a-zA-Z])+([a-zA-Z0-9\-_\.!])*)/g;if(!b||b.replace(f,"")!=""||b.length>31){this.addClass(this.cls+"-error-community");a=true}else this.removeClass(this.cls+"-error-community")}return!a},clearErrors:function(){this.removeClass(this.cls+"-error-name");this.removeClass(this.cls+"-error-desc");this.removeClass(this.cls+"-error-community");this.removeClass(this.cls+"-error-address");this.removeClass(this.cls+"-error-username");this.removeClass(this.cls+"-error-password")},load:function(a){this.clearErrors();
if(this.upsconfig=a){this.bApply.setText(_TR("APPLY"));this.cbType.store.loadData([["SNMP",_TR("UPS_SNMP")],["REMOTE",_TR("UPS_REMOTE")],["LOCAL",_TR("UPS_LOCAL")]]);this.setTitle(this.changeTitle);this.tfName.setValue(a.getName());this.tfDescription.setValue(a.getDescription());var b=a.getType();if(b==_4)b="";this.cbType.setValue(b.toUpperCase());this.onTypeSelect();switch(b.toUpperCase()){case "SNMP":this.tfAddress.setValue(a.getSnmpAddress());this.tfCommunity.setValue(a.getSnmpCommunity());
this.cbMibs.setValue(a.getSnmpMibs());break;case "REMOTE":this.tfAddress.setValue(a.getRemoteAddress());this.tfUserName.setValue(a.getRemoteUserName());this.tfPassword.setValue(a.getRemotePassword());break;case "LOCAL":this.cbLocalEnabled.setValue(a.getLocalEnabled());break}this.tfName.disable();this.tfDescription.disable();this.cbType.disable();this.tfAddress.disable();this.tfUserName.disable();this.tfPassword.disable();this.tfAddress.disable();this.tfCommunity.disable();this.cbMibs.disable();this.cbThreshold.setValue(a.getShutDownThreshold())}else{this.bApply.setText(_TR("ADD"));
this.cbType.store.loadData([["SNMP",_TR("UPS_SNMP")],["REMOTE",_TR("UPS_REMOTE")]]);this.setTitle(this.createTitle);this.tfName.setValue("");this.tfName.focus(false,true);this.tfDescription.setValue("");this.tfName.enable();this.tfDescription.enable();this.cbType.enable();this.tfAddress.enable();this.tfUserName.enable();this.tfPassword.enable();this.tfAddress.enable();this.tfCommunity.enable();this.cbMibs.enable();this.cbType.onSelect(this.cbType.store.data.get(0),0);this.onTypeSelect();this.tfAddress.setValue("");
this.tfCommunity.setValue("public");this.cbMibs.onSelect(this.cbMibs.store.data.get(0),0);this.tfUserName.setValue("");this.tfPassword.setValue("");this.cbThreshold.setValue("20")}}});Ext.namespace("_s1");
_s1.BaseChartPanel=_._1(_s0.BasePanel,IPanelItem,{expanded:true,cls:"x-system-panel-chartpanel",clsChartLoading:"x-system-panel-chartpanel-progress",chartInitHeight:250,chartPaddingRight:50,chartDifferenceWidth:0,chartDifferenceHeight:3,chartOffsetX:0,chartOffsetY:0,chartLegendRowHeight:14,chartCountLegendRowForEntity:1,widthPanelTitle:170,timeoutUpdateOnResize:150,typeStats:"",titleChartText:"",backgroundChart:"ffffff",isEmptyCollection:true,constructor:function(a){this.lPeriodText=
_TR("PERIOD");this.lIntervalText=_TR("UPDATE");_s1.BaseChartPanel.superclass.constructor.call(this,a)},initComponent:function(){_s1.BaseChartPanel.superclass.initComponent.apply(this);this.on("collapse",function(){this.stopUpdate()},this);this.on("expand",function(){this.startUpdate()},this)},onReady:function(){this.parentTabItem.on("show",function(){this.startUpdate()},this);this.parentTabItem.parent.on("show",function(){this.startUpdate()},this);this.panelData=this.content.createChild();
this.panelData.setDisplayed(false);this.renderComboBoxes();this.renderChartBox();_a(_7(_._3.SystemSubSys.PerformanceTab),"IExtNative").getNative().content.on("resize",function(a,b){if(!this.isEmptyCollection){if(this.procUpdateInResizeId){clearTimeout(this.procUpdateInResizeId);this.procUpdateInResizeId=undefined}var c=this;b=b-c.widthPanelTitle-c.chartPaddingRight;if(b<(this.chartResizer.minWidth||0))b=this.chartResizer.minWidth||0;if(b!=c.chartResizer.el.getWidth())this.procUpdateInResizeId=
setTimeout(function(){c.chartResizer.resizeTo(b,c.chartResizer.el.getHeight()||c.chartHeight)},this.timeoutUpdateOnResize)}},this)},renderComboBoxes:function(){this.panelData.update('<div class="'+this.cls+'-comboboxes"><div style="float: left;"><div class="x-system-panel-name x-system-panel-chartpanel-combobox-label">'+this.lEntityText+_TR("COLON")+'</div><div id="'+(this.cbEntityId=Ext.id())+'" style="float: left;"></div></div><div id="'+(this.divGroupId=Ext.id())+'" style="float: left;"><div class="x-system-panel-name x-system-panel-chartpanel-combobox-label">'+
_TR("GROUP")+_TR("COLON")+'</div><div id="'+(this.cbGroupId=Ext.id())+'" style="float: left;"></div></div><div id="'+(this.cbId=Ext.id())+'" style="float: left;"></div><div style="float: left;"><div class="x-system-panel-name x-system-panel-chartpanel-combobox-label">'+this.lPeriodText+_TR("COLON")+'</div><div id="'+(this.cbPeriodId=Ext.id())+'" style="float: left;"></div></div><div style="float: left;"><div class="x-system-panel-name x-system-panel-chartpanel-combobox-label">'+this.lIntervalText+
_TR("COLON")+'</div><div id="'+(this.cbIntervalId=Ext.id())+'" style="float: left;"></div></div><div class="x-clear"></div></div><div id="'+(this.chartId=Ext.id())+'"></div><div id="'+(this.emptyLabelId=Ext.id())+'" class="x-system-panel-chartpanel-widget-wide" style="display: none;">'+(this.emptyCollectionText||"")+"</div>");this.cbEntity=new Ext.UI.ComboBox({width:120,cls:this.cls+"-combobox",typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["text","ref"]}),
valueField:"ref",displayField:"text",listeners:{select:function(a,b){this.cascadeVolume();this.selectedEntity=b.data.ref;this.startUpdate({entity:b.data.ref})},scope:this}});this.cbPeriod=new Ext.UI.ComboBox({width:80,cls:this.cls+"-combobox",typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["text","ref"],data:[["5 "+_TR("MIN"),"5_min"],["30 "+_TR("MIN"),"30_min"],["1 "+_TR("HOUR"),"1_hour"],["4 "+_TR("HOUR"),"4_hour"],["12 "+_TR("HOUR"),"12_hour"],["1 "+_TR("DAY"),
"1_day"],["1 "+_TR("WEEK"),"1_week"],["1 "+_TR("MONTH"),"1_month"],["1 "+_TR("YEAR"),"1_year"]]}),value:"1_hour",valueField:"ref",displayField:"text",listeners:{select:function(a,b){this.startUpdate({period:b.data.ref})},scope:this}});this.cbInterval=new Ext.UI.ComboBox({width:80,cls:this.cls+"-combobox",typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["text","ref"],data:[["1 "+_TR("MIN"),6E4],["3 "+_TR("MIN"),18E4],["5 "+_TR("MIN"),3E5],["10 "+_TR("MIN"),6E5],
["20 "+_TR("MIN"),12E5],["30 "+_TR("MIN"),18E5]]}),value:6E4,valueField:"ref",displayField:"text",listeners:{select:function(a,b){this.startUpdate({interval:b.data.ref})},scope:this}});this.divGroup=Ext.get(this.divGroupId);this.divGroup.setDisplayed(false);this.cbEntity.render(this.cbEntityId);this.cbPeriod.render(this.cbPeriodId);this.cbInterval.render(this.cbIntervalId)},cascadeVolume:function(){},selectEntity:function(a){a=this.cbEntity.store.find("ref",a);a=a==-1?0:a;this.cbEntity.onSelect(this.cbEntity.store.getAt(a),
0)},renderChartBox:function(){var a=Ext.id();(new Ext.Container({cls:"x-system-panel-chartpanel-widget-wide",style:"padding-right: "+(this.chartPaddingRight-15)+"px;",html:'<div class="x-system-panel-chartpanel-shadow-t"><div class="x-system-panel-chartpanel-shadow-tl"><div class="x-system-panel-chartpanel-shadow-tr"><div class="x-system-panel-chartpanel-shadow-tbg"></div></div></div></div><div class="x-system-panel-chartpanel-shadow-c"><div class="x-system-panel-chartpanel-shadow-cl"><div class="x-system-panel-chartpanel-shadow-cr"><div class="x-system-panel-chartpanel-shadow-cbg" id="'+
a+'"></div></div></div></div><div class="x-system-panel-chartpanel-shadow-b"><div class="x-system-panel-chartpanel-shadow-bl"><div class="x-system-panel-chartpanel-shadow-br"><div class="x-system-panel-chartpanel-shadow-bbg"></div></div></div></div>'})).render(this.chartId);a=Ext.get(a);this.titleChart=new Ext.BoxComponent({style:"padding: 4px 6px;",html:this.titleChartText});this.titleChart.render(a);this.vChart=a.createChild({cls:"x-system-panel-chartpanel-chart"});this.imgChart=this.vChart.createChild({tag:"img",
style:"visibility: hidden;"});this.chartMask=new Ext.UI.LoadMask(this.vChart,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",background:false,frame:false,delay:0});this.chartMask.show();this.centerMask();this.imgChart.on("load",function(){this.imgChart.setStyle("visibility","visible");this.chartMask.hide()},this);this.imgChart.on("error",function(){this.imgChart.setStyle("visibility","hidden");this.chartMask.show();this.centerMask()},this);(this.chartResizer=new Ext.Resizable(this.vChart,{handles:"s",
minHeight:this.chartInitHeight,minWidth:750,pinned:true})).on("resize",function(b,c,d){if(!this.isEmptyCollection){this.centerMask();if(d!=this.chartHeight||c!=this.chartWidth){this.chartWidth=c;this.chartHeight=d;this.startUpdate({})}}},this)},centerMask:function(){if(this.chartMask.config.spinner){var a=this.chartMask.config.spinner.parent();if(a)if(this.content.getWidth()){a.center(this.chartMask.el);this.maskPosition=[a.getLeft(true),a.getTop(true)]}else if(this.maskPosition){a.setLeft(this.maskPosition[0]);
a.setTop(this.maskPosition[1])}}},getDefaultValue:function(){return""},startUpdate:function(a){this.initChartWidth();a=a||{};a.width=this.chartWidth-this.chartDifferenceWidth;a.height=this.chartHeight-this.chartDifferenceHeight;if(a.width||a.height){var b=this.getUrlByParams(a);if(b){(function(){var d=(this.chartHeight||0)-1200;if(a.entity==""){var f=this.cbEntity.store.getCount()-1;d-=this.chartLegendRowHeight*this.chartCountLegendRowForEntity*f}else d-=this.chartLegendRowHeight*this.chartCountLegendRowForEntity;
this.vChart.dom.style.backgroundPosition="left "+d+"px"}).call(this);this.imgChart.setStyle("visibility","hidden");this.chartMask.show();this.centerMask();this.stopUpdate();this.populateChart(b);var c=this;this.procUpdateId=setInterval(function(){c.populateChart(b)},a.interval)}}},getUrlByParams:function(a){a.entity=a.entity||this.cbEntity.getValue();a.period=a.period||this.cbPeriod.getValue();a.value=a.value||this.getDefaultValue();a.interval=a.interval||this.cbInterval.getValue();if(a.period&&a.value&&
a.interval&&a.entity){if(a.entity=="all")a.entity="";return document.statsimgurl+"?type="+this.typeStats+"&name="+a.entity+"&value="+a.value+"&period="+a.period+"&width="+a.width+"&height="+a.height+"&back="+this.backgroundChart+"&csrfpId="+window.csrfId}},populateChart:function(a){if(this.content.getWidth())this.imgChart.dom.src=a+"&randParam="+Math.random()},stopUpdate:function(){if(this.procUpdateId){clearInterval(this.procUpdateId);this.procUpdateId=undefined}},initChartWidth:function(){if(!this.widthInit||
this.chartWidth===undefined){var a=this.content.getWidth()-this.chartPaddingRight;if(a>(this.chartResizer.minWidth||0)){this.widthInit=true;this.chartResizer.resizeTo(a,this.chartResizer.el.getHeight()||this.chartHeight||0);this.chartMask.show();this.centerMask()}}},initChartHeight:function(){if(this.isEmptyCollection)this.vChart.setDisplayed(false);else{this.vChart.setDisplayed(true);if(!this.heightInit){var a=this.chartInitHeight+(this.cbEntity.store.getCount()-1)*this.chartLegendRowHeight*this.chartCountLegendRowForEntity;
if(a>0){this.heightInit=true;this.chartResizer.minHeight=a;this.chartResizer.resizeTo(this.chartResizer.el.getWidth()||this.chartWidth,a);this.chartMask.show();this.centerMask()}}}},updateChartTitle:function(a){if(a){Ext.get(this.chartId).setDisplayed(false);Ext.get(this.emptyLabelId).setDisplayed(true);this.cbEntity.disable();this.cbPeriod.disable();this.cbInterval.disable()}else{Ext.get(this.chartId).setDisplayed(true);Ext.get(this.emptyLabelId).setDisplayed(false);this.cbEntity.enable();this.cbPeriod.enable();
this.cbInterval.enable()}},populateEntities:function(){var a=[[_TR("ALL"),"all"]];this.cbEntity.store.removeAll();this.cbEntity.store.loadData(a);return a},onRefreshReady:function(){if(!this.refreshInit){this.expanded&&this.panelData.setDisplayed(true);this.refreshInit=true}}});Ext.namespace("_s1");
_s1.VolumeChartPanel=_._1(_._3.SystemSubSys.VolumeChartPanel,_s1.BaseChartPanel,_i4,_i3v,{typeStats:"volume",backgroundChart:"ffffff",chartCountLegendRowForEntity:2,help:"system_panel_volume",constructor:function(a){this.title=_TR("VOLUME");this.titleChartText=_TR("VOLUME_THROUGHPUT");this.emptyCollectionText=_TR("OVERVIEW_NO_VOLUMES");this.lEntityText=_TR("VOLUME");this.lValueText=_TR("TYPE");_s1.VolumeChartPanel.superclass.constructor.call(this,
a)},initComponent:function(){_s1.VolumeChartPanel.superclass.initComponent.apply(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this)}},renderComboBoxes:function(){_s1.VolumeChartPanel.superclass.renderComboBoxes.apply(this);this.cbValue=new Ext.UI.ComboBox({width:120,cls:this.cls+"-combobox",typeAhead:true,mode:"local",triggerAction:"all",
store:new Ext.data.ArrayStore({fields:["text","ref"],data:[[_TR("STORAGE_IOSTATS_OPERATIONS"),"oper"]]}),valueField:"ref",value:"oper",displayField:"text",listeners:{select:function(a,b){this.startUpdate({value:b.data.ref})},scope:this}});Ext.get(this.cbId).update('<div class="x-system-panel-name x-system-panel-chartpanel-combobox-label">'+this.lValueText+_TR("COLON")+'</div><div id="'+(this.cbValueId=Ext.id())+'" style="float: left;"></div>');this.cbValue.render(this.cbValueId);this.cbGroup=new Ext.UI.ComboBox({width:120,
cls:this.cls+"-combobox",typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["all",_TR("ALL")]]}),valueField:"id",displayField:"text",value:"all",renderTo:this.cbGroupId,listeners:{select:function(a){a=a.getValue();this.typeStats=a=="all"?"volume":"raid";this.startUpdate({entity:a=="all"?this.cbEntity.getValue():a})},scope:this}})},cascadeVolume:function(){_s1.VolumeChartPanel.superclass.cascadeVolume.call(this);var a=this.cbEntity.getValue();
this.typeStats="volume";if(a=="all")this.divGroup.setDisplayed(false);else{for(var b=this.volumes,c=null,d=[["all",_TR("ALL")]],f=0;f<b.length;++f){var e=_a(b[f],"_i4o");if(e.getVolumeName()==a){c=e;break}}if(c){b=c.getVirtualDevices();if(b.length>1){_.each(b,function(g,h){if(g=_a(g,"_i4m")){g.getVirtualDeviceId();d.push([a+"-RAID%20Group"+(h+1),_TR("GROUP")+(h+1)])}});this.cbGroup.store.loadData(d);this.cbGroup.setValue("all");this.divGroup.setDisplayed(true)}}}},
getDefaultValue:function(){return this.cbValue.getValue()},populateVolumes:function(a){for(var b=_s1.VolumeChartPanel.superclass.populateEntities.call(this),c=0;c<a.length;++c){var d=_a(a[c],"_i4o").getVolumeName();b.push([d,d])}this.cbEntity.store.loadData(b);this.selectEntity(this.selectedEntity)},updateChartTitle:function(a){_s1.VolumeChartPanel.superclass.updateChartTitle.apply(this,arguments);a?this.cbValue.disable():this.cbValue.enable()},IPanelItem:{refresh:function(){this.zfsVolumesManager.UpdateVolumes("system-volumechart-update-zfsvolumes");
return _5}},_i3v:{_o1:function(a,b){if(b=="system-volumechart-update-zfsvolumes"||b=="sync-update-zfsvolumes")this.showProgress();return _5},_o2:function(a,b){if(b=="system-volumechart-update-zfsvolumes"||b=="sync-update-zfsvolumes"){this.onRefreshReady();this.volumes=this.zfsVolumesManager.getActiveVolumes();this.populateVolumes(this.volumes);this.isEmptyCollection=this.volumes.length==0;this.updateChartTitle(this.isEmptyCollection);this.initChartHeight()}return _5},
_o3:function(a,b,c){if(c=="system-volumechart-update-zfsvolumes"||c=="sync-update-zfsvolumes")this.hideProgress();return _5}}});Ext.namespace("_s1");
_s1.NetworkChartPanel=_._1(_._3.SystemSubSys.NetworkChartPanel,_s1.BaseChartPanel,_i4,_i24,{typeStats:"network",chartCountLegendRowForEntity:2,updateCount:0,help:"system_panel_network",constructor:function(a){this.title=_TR("NETWORK");this.titleChartText=_TR("NETWORK_THROUGHPUT");this.emptyCollectionText=_TR("NO_NETWORKS");this.lEntityText=_TR("NETWORK");this.lProtocolText=_TR("PROTOCOL");_s1.NetworkChartPanel.superclass.constructor.call(this,
a)},initComponent:function(){_s1.NetworkChartPanel.superclass.initComponent.apply(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.networkManager=a.getNetworkManager();_a(this.networkManager,"_i1").Advise(this)}},renderComboBoxes:function(){_s1.NetworkChartPanel.superclass.renderComboBoxes.apply(this);this.cbProto=new Ext.UI.ComboBox({width:120,cls:this.cls+"-combobox",typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["text",
"ref"],data:[[_TR("ALL"),"all"],[_TR("CIFS"),"CIFS"],[_TR("NFS"),"NFS"],[_TR("AFP"),"AFP"],[_TR("HTTP"),"80"],[_TR("HTTPS"),"HTTPS"],[_TR("SSH"),"22"],[_TR("iSCSI"),"3260"],[_TR("SMTP"),"SMTP"]]}),valueField:"ref",value:"all",displayField:"text",listeners:{select:function(a,b){this.startUpdate({proto:b.data.ref})},scope:this}});Ext.get(this.cbId).update('<div class="x-system-panel-name x-system-panel-chartpanel-combobox-label">'+this.lProtocolText+_TR("COLON")+'</div><div id="'+(this.cbProtoId=Ext.id())+
'" style="float: left;"></div>');this.cbProto.render(this.cbProtoId)},getDefaultValue:function(){return"pkts"},getUrlByParams:function(a){var b=_s1.NetworkChartPanel.superclass.getUrlByParams.apply(this,arguments);if(b){a.proto=a.proto||this.cbProto.getValue();if(a.proto){if(a.proto=="all")a.proto="";b+="&proto="+a.proto;return b}}},populateNetworks:function(a,b){var c=[];_.each(a,function(d){if(d=_a(d,"_i27")){var f=d.getName();c.push([f,f]);_.each(d.getVNICS(),function(e){if(e=
_a(e,"_i28")){e=e.getName();c.push([e,e])}},this)}},this);_.each(b,function(d){if(d=_a(d,"_i1y")){var f=d.getName();c.push([f,f]);_.each(d.getVNICS(),function(e){if(e=_a(e,"_i28")){e=e.getName();c.push([e,e])}},this)}},this);this.cbEntity.store.removeAll();this.cbEntity.store.loadData(c);this.cbEntity.store.sort("text");this.cbEntity.store.insert(0,[new this.cbEntity.store.recordType({text:_TR("ALL"),ref:"all"})]);this.selectEntity(this.selectedEntity)},
updateChartTitle:function(a){_s1.NetworkChartPanel.superclass.updateChartTitle.apply(this,arguments);a?this.cbProto.disable():this.cbProto.enable()},IPanelItem:{refresh:function(){this.bonds=this.niks=undefined;this.networkManager.updateBONDS("system-networkchart-update-bonds");this.networkManager.updateNICS("system-networkchart-update-nics");return _5}},_i24:{_o1:function(a,b){if(b=="system-volumechart-update-bonds"||b=="system-networkchart-update-nics"){this.updateCount||
this.showProgress();this.updateCount++}return _5},_o2:function(a,b){if(b=="system-networkchart-update-bonds")this.bonds=this.networkManager.getBONDS();else if(b=="system-networkchart-update-nics")this.nics=this.networkManager.getNICS();else return _5;if(this.bonds!=undefined&&this.nics!=undefined){this.onRefreshReady();this.populateNetworks(this.nics,this.bonds);this.isEmptyCollection=this.nics.length+this.bonds.length==0;this.updateChartTitle(this.isEmptyCollection);this.initChartHeight()}return _5},
_o3:function(a,b,c){if(c=="system-volumechart-update-bonds"||c=="system-networkchart-update-nics"){this.updateCount--;this.updateCount||this.hideProgress()}return _5}}});Ext.namespace("_s1");
_s1.UtilizationPanel=_._1(_._3.SystemSubSys.UtilizationPanel,_s1.BaseChartPanel,_i4,_i3v,{typeStats:"volume",backgroundChart:"ffffff",help:"system_panel_util",constructor:function(a){this.title=_TR("UTILIZATION");this.titleChartText=_TR("VOLUME_UTILIZATION");this.emptyCollectionText=_TR("OVERVIEW_NO_VOLUMES");this.lEntityText=_TR("VOLUME");_s1.UtilizationPanel.superclass.constructor.call(this,a)},initComponent:function(){_s1.UtilizationPanel.superclass.initComponent.apply(this);
var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this)}},getDefaultValue:function(){return"utilizn"},populateVolumes:function(a){for(var b=_s1.UtilizationPanel.superclass.populateEntities.call(this),c=0;c<a.length;++c){var d=_a(a[c],"_i4o").getVolumeName();b.push([d,d])}this.cbEntity.store.loadData(b);this.selectEntity(this.selectedEntity)},IPanelItem:{refresh:function(){this.zfsVolumesManager.UpdateVolumes("system-utilization-update-zfsvolumes");
return _5}},_i3v:{_o1:function(a,b){if(b=="system-utilization-update-zfsvolumes"||b=="sync-update-zfsvolumes")this.showProgress();return _5},_o2:function(a,b){if(b=="system-utilization-update-zfsvolumes"||b=="sync-update-zfsvolumes"){this.onRefreshReady();this.volumes=this.zfsVolumesManager.getActiveVolumes();this.populateVolumes(this.volumes);this.isEmptyCollection=this.volumes.length==0;this.updateChartTitle(this.isEmptyCollection);this.initChartHeight()}return _5},
_o3:function(a,b,c){if(c=="system-utilization-update-zfsvolumes"||c=="sync-update-zfsvolumes")this.hideProgress();return _5}}});Ext.namespace("_s1");
_s1.TemperaturePanel=_._1(_._3.SystemSubSys.TemperaturePanel,_s1.BaseChartPanel,_i4,{typeStats:"temperature",backgroundChart:"ffffff",help:"system_panel_temp",constructor:function(a){this.title=_TR("TEMPERATURE");this.titleChartText=_TR("TEMPERATURE");this.lEntityText=_TR("TEMPERATURE");_s1.TemperaturePanel.superclass.constructor.call(this,a)},getDefaultValue:function(){return"deg"},onRefreshReady:function(){if(!this.refreshInit){var a=_s1.TemperaturePanel.superclass.populateEntities.apply(this,
arguments);a.push([_TR("SYS"),"systemp"],[_TR("CPU"),"cputemp"]);this.cbEntity.store.loadData(a);this.cbEntity.onSelect(this.cbEntity.store.getAt(0),0);_s1.TemperaturePanel.superclass.onRefreshReady.apply(this,arguments);this.isEmptyCollection=false;this.updateChartTitle(this.isEmptyCollection);this.initChartHeight()}},IPanelItem:{refresh:function(){this.onRefreshReady();return _5}}});_._2("_s1");
_s1.PerformancePanel=_._1(_._3.SystemSubSys.PerformancePanel,_s0.BasePanel,IPanelItem,_i4,_i45,{expanded:false,innerEnable:false,help:"system_panel_perfomance",constructor:function(a){this.title=_TR("PERFORMANCE");_s1.PerformancePanel.superclass.constructor.call(this,a)},initComponent:function(){_s1.PerformancePanel.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");if(a){this.spSYSManager=a.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this)}},onReady:function(){this.content.update('<table style="background-color: transparent; border: none;margin: 0 25px 5px 25px;"><tr><td colspan="2"><div class="x-system-panel-name">'+_TR("PERFORMANCE_WARNING_INFO")+'</div></td></tr><tr><td id="'+(this.diskcacheChkId=Ext.id())+'"class="x-bac-chklabel" style="width:150px;"></td><td id="'+(this.helpBtnId=Ext.id())+'"class="x-bac-chklabel"></td></tr></table>');
this.diskcacheChk=new Ext.UI.Checkbox({xtype:"uicheckbox",checked:false,boxLabel:_TR("ENABLE_DISK_CACHE_LABEL"),columnWidth:0.2,handler:function(a,b){this.enableDiskcache(a,b)},scope:this});this.diskcacheChk.render(this.diskcacheChkId);this.helpBtn=new Ext.UI.RoundButton({iconCls:"x-system-btn-question",width:20,height:20,anchor:"20%",cls:this.cls+"-hintbtn",columnWidth:0.8,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:350,html:_TR("ENABLE_DISK_CACHE_INFO")})}}});this.helpBtn.render(this.helpBtnId)},
enableDiskcache:function(a,b){this.innerEnable||this.spSYSManager.commitDiskcache("enableDiskcache",b==true?1:0)},IPanelItem:{refresh:function(){this.spSYSManager.updateDiskcache("updateDiskcacheStatus")}},_i45:{_o1:function(a,b){if(b=="enableDiskcache"||b=="updateDiskcacheStatus")this.showProgress();return _5},_o2:function(a,b){switch(b){case "updateDiskcacheStatus":this.innerEnable=true;this.diskcacheChk.setValue(this.spSYSManager.getDiskcacheStatus()=="1"?true:false);
this.innerEnable=false;break;case "enableDiskcache":this.spSYSManager.updateDiskcache("updateDiskcacheStatus");break}return _5},_o3:function(){this.progress.hidden||this.hideProgress();return _5}}});_._2("_s1");
_s1.SupportPanel=_._1(_._3.SystemSubSys.SupportPanel,_s0.BasePanel,IPanelItem,_i4,_i35,{expanded:false,panelCls:"x-system-panel-support",help:"system_panel_support",constructor:function(){this.title=_TR("SUPPORT_SETTING");this.spServManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);_s1.SupportPanel.superclass.constructor.apply(this,
arguments)},onReady:function(){this.el.addClass(this.panelCls);this.content.update('<div class="'+this.panelCls+'-content" style="width:400px;"><div style="font-weight:bolder; padding-bottom:10px;">'+_TR("REMOTE_SSH_SECURE_DIAGNOSTIC_MODE")+'</div><div id="'+(this.sshChkId=Ext.id())+'"></div><table class="'+this.panelCls+'-table"><tr><td class="'+this.panelCls+'-table-label">'+_TR("REMOTE_SSH_PORT")+_TR("COLON")+'</td><td id="'+(this.portFieldId=Ext.id())+'"></td></tr><tr><td class="'+this.panelCls+
'-table-label">'+_TR("REMOTE_SSH_COMMENT")+_TR("COLON")+'</td><td id="'+(this.commentFieldId=Ext.id())+'"></td></tr><tr><td colspan="2" style="width:100%; height:20px;"></td></tr><tr><td></td><td id="'+(this.applyButtonId=Ext.id())+'"></td></tr></table></div><div class="'+this.panelCls+'-content" style="width:400px;"><div style="font-weight:bolder; padding-bottom:10px;">'+_TR("READYNAS_FEEDBACK_MODE")+'</div><div id="'+(this.gaChkId=Ext.id())+'"></div></div>');this.sshChk=new Ext.UI.Checkbox({boxLabel:_TR("REMOTE_SSH_SECURE_DIAGNOSTIC_MODE"),
renderTo:this.sshChkId,listeners:{check:this.sshEnableCheckedEvent,scope:this}});this.sshPortTxtField=new Ext.UI.TextField({disabled:true,width:200,renderTo:this.portFieldId});this.commentField=new Ext.UI.TextField({inputMaxLength:30,width:200,renderTo:this.commentFieldId});this.applyButton=new Ext.UI.Button({cls:this.panelCls+"-bapply",text:_TR("APPLY"),renderTo:this.applyButtonId,listeners:{click:this.sshAppliedEvent,scope:this}});this.gaChk=new Ext.UI.Checkbox({boxLabel:_TR("READYNAS_FEEDBACK_CKB"),
renderTo:this.gaChkId,listeners:{check:$_.debounce(this.gaEnableCheckedEvent,2E3,{leading:true,maxWait:5E3}),scope:this}})},sshEnableCheckedEvent:function(a,b){this.commentField.setDisabled(!b)},sshAppliedEvent:function(){this.sshChk.getValue()?Ext.UI.MessageBox.confirm({title:_TR("REMOTE_SSH_SECURE_DIAGNOSTIC_MODE"),msg:String.format(_TR("REMOTE_SSH_SECURE_DIAGNOSTIC_MODE_WARNING"),document.link_remote_access_policy||"#"),fn:function(a){a=="yes"&&this.spServManager.commitRemoteSSH("system_remote_ssh_commit",
this.sshChk.getValue(),this.commentField.getValue(),this.sshPortTxtField.getValue())},scope:this}):this.spServManager.commitRemoteSSH("system_remote_ssh_commit",this.sshChk.getValue(),this.commentField.getValue(),this.sshPortTxtField.getValue())},gaEnableCheckedEvent:function(a,b){sessionStorage.setItem("allowGA",b?"1":"0");this.spServManager.commitGASetting("system_gasetting_commit",b+"")},IPanelItem:{refresh:function(){this.spServManager.updateRemoteSSH("system_remotessh_refresh");this.spServManager.updateGASetting("system_gasetting_refresh")}},
_i35:{_o1:function(a,b){if(b=="system_remotessh_refresh"||b=="system_remote_ssh_commit")this.showProgress();return _5},_o2:function(a,b){switch(b){case "system_remotessh_refresh":this.sshChk.setValue(this.spServManager.getRemoteSSHStatus());this.sshPortTxtField.setValue(this.spServManager.getRemoteSSHPort());this.commentField.setValue(this.spServManager.getRemoteSSHComment());break;case "system_gasetting_refresh":a=this.spServManager.getGASetting()=="true";this.gaChk.setValue(a,
true);sessionStorage.setItem("allowGA",a?"1":"0");break;case "system_gasetting_commit":location.href="./";break}return _5},_o3:function(a,b,c){this.progress.hidden||this.hideProgress();c=="system_remote_ssh_commit"&&this.spServManager.updateRemoteSSH("system_remotessh_refresh");return _5}}});Ext.namespace("_s1");
_s1.TemperatureWidget=_._1(Ext.BoxComponent,{cls:"x-system-health-tempwidget",constructor:function(){this.html=String.format('<div style="text-align:center"><span class="{0}-title x-ellipsis"></span></div><div class="{0}-termometr"><div class="{0}-indicator"></div></div><div class="{0}-text"></div>',this.cls);_s1.TemperatureWidget.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.TemperatureWidget.superclass.afterRender.apply(this,
arguments);var a=Math.round(59*this.value/(this.maxValue-this.minValue));a=a<0?0:a>59?59:a;this.el.child("."+this.cls+"-indicator").setHeight(a);this.el.child("."+this.cls+"-title").update(this.title).set({title:this.title}).addClass(this.status=="ok"?"x-system-panel-led-green":"x-system-panel-led-red");this.el.child("."+this.cls+"-text").update(this.value+" &deg;C <br/>"+Math.round(this.value*1.8+32)+" &deg;F").set({title:this.tooltip})}});Ext.namespace("_s1");
_s1.FANWidget=_._1(Ext.BoxComponent,{cls:"x-system-health-fanwidget",hasSpeedInfo:true,constructor:function(){_s1.FANWidget.superclass.constructor.apply(this,arguments);this.html=String.format('<div style="text-align:center"><span class="{0}-title"></span></div><div class="{0}-fan"><div class="{0}-fan-blades"></div><div class="{0}-fan-grille"></div></div><div class="{0}-text"></div><div id="'+(this.idSpeed=Ext.id())+'" class="x-hide-display" '+(!this.hasSpeedInfo?
'style="display:none;"':"")+"></div>",this.cls);this.addEvents("speedclick")},setSpeedInfo:function(a){Ext.fly(this.idSpeed).removeClass("x-hide-display");this.cbSpeed.el.dom.value=a},afterRender:function(){this.coolerEl=this.el.child("."+this.cls+"-fan");this.el.child("."+this.cls+"-title").update(this.title).set({title:this.title}).addClass(this.status=="ok"?"x-system-panel-led-green":"x-system-panel-led-red");this.el.child("."+this.cls+"-text").update(this.value+" "+_TR("RPM"));this.cbSpeed=new Ext.UI.ComboBox({width:100,
mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["text","value"],data:[]})});this.cbSpeed.render(this.idSpeed);this.cbSpeed.onLoad=function(){this.fireEvent("speedclick",this,this.cbSpeed.el)}.bind(this);this.speed&&this.setSpeedInfo(this.speed);if(Ext.UI.isCSSAnimationSupported){this.el.addClass(this.cls+"-css-animation");var a=Math.round(this.value/1E3);if(a>3)a=3;this.el.addClass(this.cls+"-speed-"+a)}else{if(!_s1.FANWidget.procUpdateId){_s1.FANWidget.entities=
[];_s1.FANWidget.procUpdateId=setInterval(function(){for(var b=0;b<_s1.FANWidget.entities.length;++b){var c=_s1.FANWidget.entities[b];if(c.coolerEl)c.coolerEl.dom.style.backgroundPosition=-Math.round(c.coolerPos)*78+"px 0";c.coolerPos+=c.coolerDelta;if(c.coolerPos>=11)c.coolerPos=0}},150)}_s1.FANWidget.entities.push(this);this.coolerPos=_s1.FANWidget.entities.length;this.coolerDelta=this.value/1E3}},destroy:function(){_s1.FANWidget.entities&&
_s1.FANWidget.entities.remove(this);_s1.FANWidget.superclass.destroy.apply(this,arguments)}});Ext.namespace("_s1");
_s1.PSUWidget=_._1(Ext.BoxComponent,{cls:"x-system-health-psuwidget",constructor:function(){this.html=String.format('<div style="text-align:center"><span class="{0}-title x-ellipsis"></span></div><div class="{0}-icon"><div class="{0}-fan"><div class="{0}-fan-blades"></div><div class="{0}-fan-grille"></div></div><div class="{0}-power"></div><div class="x-clear"></div></div>',this.cls);_s1.PSUWidget.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.PSUWidget.superclass.afterRender.apply(this,
arguments);this.status=="on"&&this.el.addClass(this.cls+"-fan-animated");this.el.child("."+this.cls+"-title").update(this.title).set({title:this.title}).addClass(this.status=="on"?"x-system-panel-led-green":"x-system-panel-led-red")}});Ext.namespace("_s1");
_s1.UPSWidget=_._1(Ext.BoxComponent,{cls:"x-system-health-upswidget",constructor:function(){this.html=String.format('<div style="text-align:center"><span class="{0}-title x-ellipsis"></span></div><div class="{0}-icon"><div class="{0}-battery"><div class="{0}-battery-ct"><div class="{0}-battery-fill"></div></div></div><div class="{0}-power"></div><div class="x-clear"></div></div><div class="{0}-text"></div>',this.cls);_s1.UPSWidget.superclass.constructor.apply(this,
arguments)},afterRender:function(){_s1.UPSWidget.superclass.afterRender.apply(this,arguments);var a="",b="",c="",d=0;if(!this.status||this.status==_4||this.status=="not_present"){a="x-system-panel-led-black";b="Remote Error";c="0%, 0 min"}else{a="x-system-panel-led-green";if(this.status=="warn")a="x-system-panel-led-orange";else if(this.status!="ok")a="x-system-panel-led-red";b=_TR("UPS_RAWSTATUS_"+this.rstatus);c=this.charge+", "+this.runtime;d=parseInt(this.charge)}this.el.child("."+
this.cls+"-title").update(this.title).set({title:b}).addClass(a);this.el.child("."+this.cls+"-text").update(_TR("HEALTH_BATTERY_CHARGE")+":<br />"+c).set({title:_TR("HEALTH_BATTERY_CHARGE")+":\n"+c});this.el.child("."+this.cls+"-battery-fill").setHeight(d+"%")}});Ext.namespace("_s1");
_s1.AppsAddonsPanel=_._1(_._3.SystemSubSys.AppsAddonsPanel,_s0.BasePanel,IPanelItem,_i4,{help:"system_panel_apps",constructor:function(){this.title=_TR("APPS");_s1.AppsAddonsPanel.superclass.constructor.apply(this,arguments);this.filteredApps={}},initComponent:function(){_s1.AppsAddonsPanel.superclass.initComponent.apply(this,arguments);this.spSLAManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSmartLocalAppManager();
_a(this.spSLAManager,"_i1").Advise(this)},onReady:function(){this.dataview=new Ext.DataView({emptyText:String.format('<div class="x-frontview-dataview-emptybg x-system-panel-apps-empty">{0}</div>',_TR("NO_RUNNING_ADDONS")),store:new Ext.data.JsonStore({fields:["name","icon","launchurl"]}),tpl:new Ext.XTemplate('<tpl for="."><div class="x-system-apps-wrap"><div style="text-align:center;"><a href="{launchurl}" target="_blank"><img width="64" height="64" src="{icon}"/></a></div><div class="x-system-apps-name" title="{name}"><a class="x-frontview-link" href="{launchurl}" target="_blank">{name}</a></div></div></tpl>'),
renderTo:this.content})},populateApps:function(){for(var a=[],b=this.spSLAManager.getLocalLaunchableApps(),c=0;c<b.length;++c){var d=_a(b[c],"_i3l");if(d&&!this.filteredApps[d.getAppId()]){var f=d.getId(),e=d.getName();d=_s6.replaceLocalhost(d.getLaunchURL()||"");a.push({name:e,icon:location.protocol+"//"+location.host+"/apps/logo/"+f+".png",launchurl:d})}}this.dataview.getStore().loadData(a)},IPanelItem:{refresh:function(){this.spSLAManager.updateLocalLaunchableApps("system-apps-update")}},
_i3o:{_o1:function(a,b){b=="system-apps-update"&&this.showProgress()},_o2:function(a,b){b=="system-apps-update"&&this.populateApps()},_o3:function(a,b,c){if(c=="system-apps-update"){this.hideProgress();a!=_5&&_a(b,"_io").getLastNMLError().getErrorCode()=="22001010002"&&this.dataview.getStore().loadData([])}}}});Ext.namespace("_s1");
_s1.FeatureDetectionPanel=_._1(_._3.SystemSubSys.FeatureDetectionPanel,_s0.BasePanel,IPanelItem,_i4,{constructor:function(){_s1.FeatureDetectionPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.FeatureDetectionPanel.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spCSManager=a.getCloudStorageAmazonDriveManager();_a(this.spCSManager,
"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)},onReady:function(){this.hide()},getCloudService:function(a){for(var b=this.spServManager.getSystemServices(),c=0;c<b.length;++c){var d=_a(b[c],"_i32");if(d.getName()==a)return d}return null},populateConnectionStatus:function(){var a=this.conStatus=_a(this.spCSManager.getConnectionStatus(),"ICloudStatus");!this.getCloudService("amazon-drive").getEnable()&&
a.getStatus()=="Failed"&&a.getFail_Code()=="4"&&a.getFail_Info()=="MIGRATION_CONFLICT"&&this.spCSManager.updateConnections("amazon_detection_update_connections")},populateConnections:function(){var a=this.spCSManager.getAmazonSessions();if(!this.ACDConflictWnd)this.ACDConflictWnd=new _s7.Storage.FixConflict;this.ACDConflictWnd.on("hide",this.onFixACDMigrationConflictHide,this);this.ACDConflictWnd.on("FixACDMigrationConflict",this.onFixACDMigrationConflict,this);this.ACDConflictWnd.show();
this.ACDConflictWnd.loadArgs(a)},onFixACDMigrationConflictHide:function(){this.ACDConflictWnd.un("hide",this.onFixACDMigrationConflictHide,this);this.ACDConflictWnd.un("FixACDMigrationConflict",this.onFixACDMigrationConflict,this)},onFixACDMigrationConflict:function(a,b){this.acdSessionArrID=[];if(a){a=0;for(var c=b.length;a<c;++a)b[a].Remote_Path!="/"&&this.acdSessionArrID.push(b[a].Id)}else{a=0;for(c=b.length;a<c;++a)if(b[a].Remote_Path=="/")this.acdSessionArrID.push(b[a].Id);else b[a].ckbval||
this.acdSessionArrID.push(b[a].Id)}this.acdSessionArrID.length>0&&this.spCSManager.deleteACDSession("amazon_delete_session",this.acdSessionArrID.shift());delete objArr;this.ACDConflictWnd.un("FixACDMigrationConflict")},IPanelItem:{refresh:function(){this.spCSManager.updateConnectionStatus("amazon_detection_update_connection_status")}},ICloudStorageManagerEvents:{_o1:function(a,b){switch(b){case "amazon_detection_update_connection_status":case "amazon_detection_update_connections":case "amazon_delete_session":this.showProgress();
break}},_o2:function(a,b){switch(b){case "amazon_detection_update_connection_status":this.populateConnectionStatus();break;case "amazon_detection_update_connections":this.populateConnections();break;case "amazon_delete_session":this.acdSessionArrID.length!=0&&this.spCSManager.deleteACDSession("amazon_delete_session",this.acdSessionArrID.shift());break}},_o3:function(a,b,c){switch(c){case "amazon_detection_update_connection_status":case "amazon_detection_update_connections":case "amazon_delete_session":this.hideProgress();
break}}}});Ext.namespace("_s1");
_s1.FeaturedAppsPanel=_._1(_._3.SystemSubSys.FeaturedAppsPanel,_s0.BasePanel,IPanelItem,_i4,{help:"system_panel_featured_apps",hidden:true,constructor:function(){this.title=_TR("APPS_FEATURED");_s1.FeaturedAppsPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.FeaturedAppsPanel.superclass.initComponent.apply(this,arguments);this.spSLAManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSmartLocalAppManager();
_a(this.spSLAManager,"_i1").Advise(this);this.setVisible(false)},onReady:function(){this.dataview=new Ext.DataView({store:new Ext.data.JsonStore({fields:["elId","icon","name","spApp"]}),itemSelector:"div.x-system-apps-wrap",tpl:new Ext.XTemplate('<div  id="'+(this.hideButtonId=Ext.id())+'" class="x-system-futured-apps-hide-button"></div><tpl for="."><div id="{elId}" class="x-system-apps-wrap"><div style="text-align:center;"><a href="{launchurl}" target="_blank"><img width="64" height="64" src="{icon}"/></a></div><div class="x-system-apps-name" title="{name}"><a class="x-frontview-link">{name}</a></div></div></tpl>'),
renderTo:this.content,listeners:{click:this.onDVClick,scope:this}})},populateApps:function(){var a=[],b=this.spSLAManager.getFeaturedApps();if(b!=_4)for(var c=0;c<b.length;++c){var d=_a(b[c],"_i3l");d&&d!=_4&&!d.isInstalled()&&a.push({elId:Ext.id(),icon:location.protocol+"//"+location.host+"/apps/logo/"+d.getId()+".png",name:d.getName(),spApp:d})}this.appsExists=a.length>0;this.setPanelVisible();this.dataview.getStore().loadData(a);(this.hideButton=Ext.get(this.hideButtonId))&&
this.hideButton.on("click",function(){this.spSLAManager.commitFeaturedAppsVisible("system-fapps-update-visible",false)},this)},setPanelVisible:function(){this.featuredIsVisabile=this.spSLAManager.getFeaturedAppsVisible();this.setVisible(this.appsExists&&this.featuredIsVisabile)},onDVClick:function(a,b,c,d){d.preventDefault();var f=this.dataview.getStore().getAt(b).get("spApp");Ext.UI.MessageBox.confirm({title:_TR("APPS_FEATURED"),msg:String.format(_TR("APPS_INSTALL_CONFIRM"),f.getName()),fn:function(e){if(e==
"yes"){e=this.initAppSmartWrapper(f);_a(e,"IExtNative").getNative().ongetclicked()}},scope:this})},initAppSmartWrapper:function(a){this._cocmpApp&&_a(a,"_i1").Unadvise(this._cocmpApp);var b=a.getId(),c=a.getAppId(),d=a.getStatus(),f=a.getName(),e=a.getAuthor(),g=a.getVersion(),h=a.getDescription(),k=a.getServiceName()||"",j=_s6.replaceLocalhost(a.getConfigURL()||""),m=_s6.replaceLocalhost(a.getLaunchURL()||"");a.getDebianPackageName();a.getServiceName();
var n=location.protocol+"//"+location.host+"/apps/logo/"+b+".png",p=a.getNewAppVersion(),o=p===_4?false:true,q=a.getInfoURL()===_4||a.getInfoURL()===undefined||a.getInfoURL()===""?"":a.getInfoURL(),r=_a(_7(_._3.SmartAppsSubSys.FreeApps),"IApps");r.Initialize({iapp:a,appid:b,name:f,description:h,author:e,version:g,genieId:c,appState:d,configUrl:j,launchUrl:m,icon:n,type:"local",ready:"true",infoUrl:q,service:k,newAvail:o,newVersion:p});return this._cocmpApp=r},IPanelItem:{refresh:function(){this.spSLAManager.updateFeaturedApps("system-fapps-update");
this.spSLAManager.updateFeaturedAppsVisible("system-fapps-visabile-update")}},_i3o:{_o1:function(a,b){b=="system-fapps-update"&&this.showProgress()},_o2:function(a,b){b=="system-fapps-update"&&this.populateApps()},_o3:function(a,b,c){a={"system-fapps-update":function(){this.hideProgress()}.bind(this),"system-fapps-update":function(){this.hideProgress();this.setPanelVisible()}.bind(this),"system-fapps-visabile-update":function(){this.setPanelVisible()}.bind(this),
"system-fapps-update-visible":function(){this.spSLAManager.updateFeaturedAppsVisible("system-fapps-visabile-update")}.bind(this)};a[c]&&a[c]()}}});_._2("_s1");
_s1.NewsChannelPanel=_._1(_._3.SystemSubSys.NewsChannelPanel,_s0.BasePanel,IPanelItem,_i4,{cls:"x-system-newschannel",help:"system_panel_news",constructor:function(){this.title=_TR("VIDEOS");this.videos=[{title:_TR("VIDEO_READYCLOUD"),video:"http://www.youtube.com/embed/fGdzxpsi04I",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABLAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGODM0MUI5QThGNDYxMUUyOTkyRDlCQkFCODMzNUYwMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGODM0MUI5QjhGNDYxMUUyOTkyRDlCQkFCODMzNUYwMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkY4MzQxQjk4OEY0NjExRTI5OTJEOUJCQUI4MzM1RjAyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY4MzQxQjk5OEY0NjExRTI5OTJEOUJCQUI4MzM1RjAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAwICAgICAwICAwUDAwMFBQQDAwQF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"},
{title:_TR("VIDEO_TIME_MACHINE"),video:"http://www.youtube.com/embed/f54guD2Utws",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABLAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFRkFFNDgwNzhGNDYxMUUyQkQxQ0E4OUQ2QkJFNkNCMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFRkFFNDgwODhGNDYxMUUyQkQxQ0E4OUQ2QkJFNkNCMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkVGQUU0ODA1OEY0NjExRTJCRDFDQTg5RDZCQkU2Q0IxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVGQUU0ODA2OEY0NjExRTJCRDFDQTg5RDZCQkU2Q0IxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAwICAgICAwICAwUDAwMFBQQDAwQF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R29n3WcNsco4Pj8cvla6UOd4kZa1tS4mgcQ6p4joCCG+2xua4bbMts46MxRwMmmPia3uipqIDXBvaPE1FeroQbWgICAgICAgICAgICAgICAgICAgICAgICAgICDHbgzAwGJmyptpbsxGNrba3bqlkdLI2NoaOs1cEGv/AN1totkkhkkmY+F74pmmF3YfHq1jhUGmnjSvUOlBRvNjaMjdcTrh48Mz8LaQdgBxJOoClNB6f+xoGfxuSZnsRYZS2128d81koYS3W0OYXaSRqFQfIgh/MrDw/F9putOnX/sTVp4bpejw610tPDprw6SAg9+12nieF7Tc6tWj/alpq8QRdPh0pqcOPRTj0cUEtm+C+Bdb3NxQBjjrY+PhI3U3/cY3q6fJ1oLj2N3/ACJe8P8Awgexu/5EveH/AIQPY3f8iXvD/wAIKxRvhn0mV8gc0mjyDQgj5EFwgICAgICAgICAgICAgICAgICAgICAgICAgICAg86GV1aRXprT/wCeVBUtaa1A48D8yCG6fDBEJpZWW7IzUyPIDRUFvGpA61VWs2nCIxlTNoiMZWn5zjf1S1+0Z/Or35fV+GfSVvrafxR6n5zjf1S1+0Z/On5fV+GfSTrafxR6n5zjf1S1+0Z/On5fV+GfSTrafxR6pLe/truTwrW/gmfSuiMteaeWgcVRbSvWMZiY9yqupW04RMSudFx6xvc86tLhouPWN7nnQGRyCTxJHh3DSAG06TXylBKgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDhHxnXHs/JnWTQHJWTSPL9Mr0P5Frzdz/wW/scf81Thsf8UPhU5OOnACvzBfQnSl5Bi3G3teXE0EV1LnXxBrG+PAYTrL49AkLRpJo4uJZ1mlPKRpLX3sTMRpxOU4544efl5/pDaV0ttMYzf6vX7mvZyfE2ORdb4q49qg0seJCG9kvGrRUVBLAQCfLVbLb11L0xvGE/px9/2MHWilbYVnGHU/hHv2y89MRE3hqtr+tOFaW7iuQ+dNPDtN59tf8AydF8tT/9Cv0W+x9/L5weziAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgxO5tqbb3ninYPdeNgytg9zJHWl0wSR64zVrqHrB61mbTea+11Opo3mls44MfX2+lr05NSsWjKWn/ALdeRv8AROM+7hbv+p+7fzF/VrP9E2H8Kvoft15G/wBE4z7uE/qfu38xf1P9E2H8Kvoft15G/wBE4z7uE/qfu38xf1P9E2H8Kvoy22eT/K/ZmVbnNrbYscZkGMfGy8t4GtkayTg4B3VUdKw933vf7rT6etq2tXKZ4MjQ7ZtdC/Pp6da2ziG4LSNmICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICD/2Q=="},
{title:_TR("VIDEO_ANTIVIRUS"),video:"http://www.youtube.com/embed/X7UxJpGXMEQ",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABLAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowNEE4OUQzQThGNDcxMUUyQjI3RkRDMTEzREZFMTBDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowNEE4OUQzQjhGNDcxMUUyQjI3RkRDMTEzREZFMTBDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA0QTg5RDM4OEY0NzExRTJCMjdGREMxMTNERkUxMEM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA0QTg5RDM5OEY0NzExRTJCMjdGREMxMTNERkUxMEM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAwICAgICAwICAwUDAwMFBQQDAwQF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"},
{title:_TR("VIDEO_ITUNES"),video:"http://www.youtube.com/embed/wAti6EMfUVY",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABLAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpENDA0MUVBNDhGNDYxMUUyOUY2NUM4RkFBMTIxQzkyQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpENDA0MUVBNThGNDYxMUUyOUY2NUM4RkFBMTIxQzkyQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ0MDQxRUEyOEY0NjExRTI5RjY1QzhGQUExMjFDOTJCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ0MDQxRUEzOEY0NjExRTI5RjY1QzhGQUExMjFDOTJCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAwICAgICAwICAwUDAwMFBQQDAwQF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"},
{title:_TR("VIDEO_REMOTE"),video:"http://www.youtube.com/embed/ieGiWtK2VMY",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABLAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMUE1NjREQzhGNDYxMUUyOTUwREUzNDQwQUI5RDkxNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMUE1NjRERDhGNDYxMUUyOTUwREUzNDQwQUI5RDkxNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxQTU2NERBOEY0NjExRTI5NTBERTM0NDBBQjlEOTE3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxQTU2NERCOEY0NjExRTI5NTBERTM0NDBBQjlEOTE3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAwICAgICAwICAwUDAwMFBQQDAwQF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"},
{title:_TR("VIDEO_READYDROP"),video:"http://www.youtube.com/embed/HAgII4MNZVM",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABLAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMTAzNTc0RjhGNDYxMUUyQThDNjlFQzMwOEQyODM0QyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMTAzNTc1MDhGNDYxMUUyQThDNjlFQzMwOEQyODM0QyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIxMDM1NzREOEY0NjExRTJBOEM2OUVDMzA4RDI4MzRDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkIxMDM1NzRFOEY0NjExRTJBOEM2OUVDMzA4RDI4MzRDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAwICAgICAwICAwUDAwMFBQQDAwQF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"},
{title:_TR("VIDEO_READYDLNA"),video:"http://www.youtube.com/embed/x75Y0BGArok",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABLAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MSA2NC4xNDA5NDksIDIwMTAvMTIvMDctMTA6NTc6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDOTI5NTVENDhGNDYxMUUyQTkwNkExNDI4NTFCQkY5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDOTI5NTVENThGNDYxMUUyQTkwNkExNDI4NTFCQkY5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM5Mjk1NUQyOEY0NjExRTJBOTA2QTE0Mjg1MUJCRjk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM5Mjk1NUQzOEY0NjExRTJBOTA2QTE0Mjg1MUJCRjk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAwICAgICAwICAwUDAwMFBQQDAwQF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"},
{title:_TR("VIDEO_PLEXMEDIASERVER"),video:"http://www.youtube.com/embed/sBqJCjDuqzw",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QNtaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6RjgzNDFCOUI4RjQ2MTFFMjk5MkQ5QkJBQjgzMzVGMDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzQ4QjdFRUFBQzJGMTFFMjg2NERCOTMzQkJDRURBMzIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzQ4QjdFRTlBQzJGMTFFMjg2NERCOTMzQkJDRURBMzIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDZDNUM4N0M2MEFCRTIxMUFFQkRGRUZDNEVGRTgwMTMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjgzNDFCOUI4RjQ2MTFFMjk5MkQ5QkJBQjgzMzVGMDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94Onht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"},
{title:_TR("VIDEO_DATAPROTECTION"),video:"http://www.youtube.com/embed/qqe8b1iOiR8",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QNtaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6RjgzNDFCOUI4RjQ2MTFFMjk5MkQ5QkJBQjgzMzVGMDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDM5Q0YyNTZBQzMwMTFFMjk2RERBOTJDNTUzQ0I3QTgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDM5Q0YyNTVBQzMwMTFFMjk2RERBOTJDNTUzQ0I3QTgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDZDNUM4N0M2MEFCRTIxMUFFQkRGRUZDNEVGRTgwMTMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjgzNDFCOUI4RjQ2MTFFMjk5MkQ5QkJBQjgzMzVGMDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94Onht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"},
{title:_TR("VIDEO_TOOLLESSDRIVE"),video:"http://www.youtube.com/embed/FqUH5_oYrjQ",preview:"data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QNtaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6RjgzNDFCOUI4RjQ2MTFFMjk5MkQ5QkJBQjgzMzVGMDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjZDMTQxNUFBQzMxMTFFMkIxMjM5M0JCNjBGQjA1MUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjZDMTQxNTlBQzMxMTFFMkIxMjM5M0JCNjBGQjA1MUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDZDNUM4N0M2MEFCRTIxMUFFQkRGRUZDNEVGRTgwMTMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjgzNDFCOUI4RjQ2MTFFMjk5MkQ5QkJBQjgzMzVGMDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAACAgICAgICAgICAwICAgMEAwICAwQFBAQEBAQFBgUFBQUFBQYGBwcIBwcGCQkKCgkJDAwMDAwMDAwMDAwMDAwMAQMDAwUEBQkGBgkNCwkLDQ8ODg4ODw8MDAwMDA8PDAwMDAwMDwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCACzASwDAREAAhEBAxEB/8QAuwABAAAGAwEAAAAAAAAAAAAAAAQFBgcICQIDCgEBAQEBAQEBAQAAAAAAAAAAAAABAgMEBQYQAAEDAwEGAQYIBg4HCQEAAAEAAgMRBAUGITESEwcIQVFhcSIUCYGRocEykiMVsUJScjOz0WKCosJzk6M0VHQ1FhfhskNT0yYY8GPDJESEpCVFGREBAQACAQMCAwUFCQEAAAAAAAERAgMhEgQxBUFRE4GRIjIGYXFCIxTwobHB0VJiUxUW/9oADAMBAAIRAxEAPwDf4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg83fdD3XdwmjuvvVnSOmOqmocbicNqS/tsVjLa6LI4II3nhYwAbGtG5demGM3LGi67z+7gFwg6tarcPA+2SE/hWbhuZU5cd5PeS8ng6q6uc2v8AXZR+BwWW5hKX93XeS8uLup+riXeBv5/k+0Q6IH/qo7w+LiPVLWLvK05K4I+LmodHUe53vBc6v+aOsK7+E5S5p8XOQ6OmTuX7vJKl/VDVu3w+9Ln/AI6HRDO7hO7G5H2vU3Vrmne0ZW6Fd/gJ/Mh0Qdj1u64Za/htM91N1SWs4nxj72vWkkNO2omJ2IXC6Vp1e6tt5dOqesB6rf8A9zIeT+PRlUFr1j6v19XqtrBtDt/+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"}];
_s1.NewsChannelPanel.superclass.constructor.apply(this,arguments)},onReady:function(){_s1.NewsChannelPanel.superclass.onReady.apply(this,arguments);this.setContentHeight();Ext.EventManager.on(window,"resize",this.setContentHeight,this);this.content.update('<iframe src="https://replicate.readynas.com/Firmware/index.html" style="width: 100%;height: 100%;" frameborder="0"></iframe>');_a(_7(_._3.FrontView.HelpTab),"IExtNative").getNative().on("resize",
this.setContentHeight,this)},setContentHeight:function(){var a=this.el.parent().getHeight()-20;if(a<0)a=60;this.content.setHeight(a)}});_._2("_s1");
_s1.DownloadProgressWindow=_._1(_9,Ext.UI.Window,_i20,{help:"system_wnd_firmware",constructor:function(){_.apply(this,{modal:true,width:380,resizable:false,minimizable:false,maximizable:false,title:_TR("FIRMWARE"),html:this.getHtml(),fbar:this.getFooter(),interval:5E3,listeners:{afterrender:this.onAfterRender,show:this.onWShow,scope:this}});_s1.DownloadProgressWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.DownloadProgressWindow.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spFWManager=a.getFirmwareManager();_a(this.spFWManager,"_i1").Advise(this)}},getHtml:function(){return'<table cellpadding=0 cellspacing=0 border=0 style="width:100%;table-layout: fixed;"><tr><td class="x-system-update-sts" id="'+(this.infoId=Ext.id())+'"></td></tr><td class="x-system-update-error" id="'+(this.errorId=Ext.id())+'"></td></tr></table>'},getFooter:function(){return[this.cancelBtn=new Ext.UI.Button({width:100,
text:_TR("CANCEL"),hidden:true,acceptbtn:true,handler:function(){Ext.UI.MessageBox.confirm({title:_TR("CANCEL_DOWNLOAD_TITLE"),msg:_TR("CANCEL_DOWNLOAD"),fn:function(a){if(a=="yes"){this.spFWManager.cancelFirmwareDownload("system-update-cancelFWDownload");this.statusmessage.update(_TR("CANCELLING"))}},scope:this})},scope:this}),this.retryBtn=new Ext.UI.Button({width:true,text:_TR("RETRY"),hidden:true,handler:this.updateSystem,scope:this,acceptbtn:true}),this.rebootBtn=new Ext.UI.Button({width:100,
text:_TR("REBOOT"),hidden:true,handler:function(){this.hide();_a(_7(_._3.ConnectRepair.ConnectRepairWindow),"IExtNative").getNative().setFirmwareMode(true);_a(_7(_._3.Controls.PowerMenuItems),"IExtNative").getNative().onPowerItemClick({value:"restart",caption:_TR("REBOOT_SYSTEM"),confirmed:true})},scope:this,acceptbtn:true}),this.hideBtn=new Ext.UI.Button({width:100,text:_TR("CLOSE"),handler:function(){this.hide()},scope:this})]},onAfterRender:function(){(new Ext.Component({cls:"",
html:_TR("DOWNLOAD")+_TR("ELLIPSIS"),hidden:false})).render(this.infoId);this.statusmessage=Ext.get(this.infoId);this.statusmessage.setVisibilityMode(Ext.Element.DISPLAY);(new Ext.Component({cls:"",html:_TR("6001010001"),hidden:false})).render(this.errorId);this.errMessage=Ext.get(this.errorId);this.errMessage.setVisibilityMode(Ext.Element.DISPLAY);this.dprogress=new Ext.UI.ProgressIndicator({cls:"x-system-update-progress",width:268,value:0,hidden:false});this.dprogress.render(this.body)},onWShow:function(){this.center();
this.updateState()},updateState:function(){switch(this.spFWManager.getDownloadState()){case "idle":this.hideDownload();this.hide();break;case "ready":var a=_a(this.spFWManager.getFirmwareInfo(),"_i42"),b=a?a.getVersion():"";a=a?a.getDescription():"";b=a.indexOf("RC")!=-1?b+" ("+a+")":b;this.statusmessage.update(String.format(_TR("DOWNLOAD_FWCOMPLETE"),b));this.statusmessage.show();this.rebootBtn.show();this.hideCtrls([this.errMessage,this.dprogress,this.cancelBtn,this.retryBtn]);
break;case "pending":this.statusmessage.update(_TR("DOWNLOAD")+_TR("ELLIPSIS"));b=this.spFWManager.getDownloadProgress();this.dprogress.show();this.dprogress.updateProgress(parseFloat(b)/100,"");this.statusmessage.show();this.cancelBtn.show();this.hideCtrls([this.errMessage,this.retryBtn,this.rebootBtn]);this.updatefwdownload.defer(this.interval,this);break;case "checking":if(this.rendered){this.statusmessage.update(_TR("CHECKING")+_TR("ELLIPSIS"));this.statusmessage.show();this.hideCtrls([this.dprogress,
this.cancelBtn,this.errMessage,this.retryBtn,this.rebootBtn])}this.updatefwdownload.defer(this.interval,this);break}},updateSystem:function(){if(this.spFWManager&&this.spFWManager!=_4){this.hideDownload();this.spFWManager.PerfomeLastFirmwareUpdate("system-update-perfomefirmwareupdate")}},updatefwdownload:function(){this.fwupdate||this.spFWManager.updateFirmwareDownloadProgress("system-update-updateFWDownload")},hideDownload:function(){this.rendered&&this.hideCtrls([this.statusmessage,this.errMessage,
this.dprogress,this.cancelBtn,this.retryBtn,this.rebootBtn])},hideCtrls:function(a){this.rendered&&_.each(a,function(b){b.hide()},this)},_i3w:{_o2:function(a,b){if(!b||this.fwupdate&&b=="system-update-updateFWDownload")return _5;switch(b.toString()){case "system-update-updateFWDownload":_a(a,"_i3v");this.updateState();break;case "system-update-cancelFWDownload":this.hideDownload();this.hide();break}return _5},_o3:function(a,b,c){switch(c){case "system-update-updateFWDownload":case "system-update-cancelFWDownload":if(a!=
_5)if(a=_a(b,"_io").getLastNMLError()){this.errMessage.update(_TR(a.getErrorCode()));this.errMessage.show();this.retryBtn.show();this.hideCtrls([this.statusmessage,this.dprogress,this.cancelBtn,this.rebootBtn])}else{this.hideDownload();this.errMessage.update(_TR("UPDATE_UNKNOWN_ERROR"));this.errMessage.show()}break}return _5}}});_._2("_s1");
_s1.VideoWindow=_._1(Ext.UI.Window,{layout:"fit",cls:"x-system-newschannel-previewwnd",resizable:false,modal:true,title:"",help:"system_wnd_video",constructor:function(){this.items=[{xtype:"container",layout:"border",items:[this.imgCt=new Ext.BoxComponent({region:"center",style:"text-align: center; overflow: hidden;"})]}];_s1.VideoWindow.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.VideoWindow.superclass.afterRender.apply(this,
arguments);this.loadMask=new Ext.UI.LoadMask(this.imgCt.el,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",background:false,frame:false,delay:0});this.bClose=new Ext.UI.RoundButton({cls:this.cls+"-close",renderTo:this.el,listeners:{click:function(){this.hide()},scope:this}})},onShow:function(){_s1.VideoWindow.superclass.onShow.apply(this,arguments);this.calcSize();Ext.EventManager.addListener(window,"resize",this.calcSize,this);this.doLayout(false,false);this.center();this.imgCt.el.update('<iframe style="width: 100%; height: 100%;" frameborder="0" vspace="0" hspace="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" scrolling="auto" src="'+
this.videoUrl+'"></iframe>')},onHide:function(){_s1.VideoWindow.superclass.onHide.apply(this,arguments);this.imgCt.el.update("");Ext.EventManager.removeListener(window,"resize",this.calcSize,this)},calcSize:function(){var a=Ext.getBody().getSize();a.width*=0.8;a.height*=0.8;this.setSize(a);this.center()},loadVideo:function(a){this.videoUrl=a},showIFrame:function(a){this.currentIFrame=a;a.bPreview.setDisplayed(false);a.bFrame.update(String.format('<iframe width="640" height="360" src="{0}" frameborder="0" allowfullscreen></iframe>',
a.video))}});Ext.namespace("_s1");
_s1.VolumeScheduleWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,minimizable:false,maximizable:false,resizable:false,cls:"x-system-volumeschedule-window",help:"system_wnd_volume_schedule",constructor:function(){this.createTitle=_TR("VOLUME_SCHEDULE_ADD");this.changeTitle=_TR("VOLUME_SCHEDULE_SETTINGS");this.title=this.createTitle;this.html='<table class="'+this.cls+'-datatable" cellspacing="0" style="margin: 0 auto;"><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+
_TR("VOLUME_SCHEDULE_VOLUME")+_TR("COLON")+'</nobr></td><td id="'+(this.cbVolumeId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("VOLUME_SCHEDULE_ACTION")+_TR("COLON")+'</nobr></td><td id="'+(this.cbActionId=Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell" colspan="2" style="height: 15px;"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell"><nobr>'+_TR("VOLUME_SCHEDULE_ENABLED")+_TR("COLON")+'</nobr></td><td id="'+(this.chbEnabledId=
Ext.id())+'"></td></tr><tr><td class="'+this.cls+'-datatable-labelcell" colspan="2" style="height: 15px;"></td></tr><tr><td id="'+(this.sId=Ext.id())+'" colspan="2"></td></tr></table>';this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("APPLY"),handler:this.onApplyClick,scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=[this.bApply,this.bCancel];_s1.VolumeScheduleWindow.superclass.constructor.apply(this,
arguments);this.cbVolume=new Ext.UI.ComboBox({width:300,lazyRender:true,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",disabled:true,store:new Ext.data.ArrayStore({id:0,fields:["id","text"],data:[]}),valueField:"id",displayField:"text",listeners:{scope:this}});this.chbEnabled=new Ext.UI.Checkbox({})},initComponent:function(){_s1.VolumeScheduleWindow.superclass.initComponent.apply(this,arguments);this.zfsVolumesManager=_a(_7(_1.CLSIDS.Device5200),
"_i2").getZFSVolumesManager()},afterRender:function(){_s1.VolumeScheduleWindow.superclass.afterRender.apply(this,arguments);this.cbVolume.render(this.cbVolumeId);this.chbEnabled.render(this.chbEnabledId);this.cron=new Ext.CronSchedule({renderTo:this.body});this.cbVolume.setDisabled(true)},onApplyClick:function(){if(this.validate()){var a=this.cron.getStrings(),b=a.hour;if(localStorage.getItem("enable24Hour")!="true")if(b==12){if(a.ampm==_TR("AM"))b=0}else if(a.ampm==_TR("PM"))b=+b+
12;var c=_a(this.spVolumeSchedule||new _1.zfsVolSchedule,"_i4r");c.putAction(this.cbAction.getValue());c.putVolumeName(this.cbVolume.getValue());c.putEnabled(this.chbEnabled.getValue()?"1":"0");c.putIntervalMinute(a.min);c.putIntervalHour(b);c.putIntervalDayOfMonth(a.dom);c.putIntervalMonth(a.month);c.putIntervalDayOfWeek(a.dow);if(this.spVolumeSchedule)this.fireEvent("applyclick",this,c);else{c.putId(this.maxIdSchedule+1);this.fireEvent("addclick",this,c)}this.hide()}},validate:function(){this.clearErrors();
if(!this.cbVolume.getValue()||!this.getHumanString())return false;return true},clearErrors:function(){},renderOptionsMenu:function(){var a=this.spVolume&&this.spVolume.getDiscardable&&this.spVolume.getDiscardable()=="1",b=a?"":"x-combo-grayed-out-item";this.spVolume.getTierType();if(!this.cbAction){b=[["2",_TR("VOLUME_SCHEDULE_SCRUB")],["3",_TR("VOLUME_SCHEDULE_DEFRAG")],["4",_TR("VOLUME_SCHEDULE_BALANCE")],["5",_TR("VOLUME_SCHEDULE_DISKTEST")],["6",_TR("VOLUME_SCHEDULE_SSD_TRIM"),b],["7",_TR("VOLUME_SCHEDULE_DATA_MIGRATION"),
this.spVolume.getTierType()=="Data"?"":"x-combo-grayed-out-item"]];this.cbAction=new Ext.UI.ComboBox({width:300,lazyRender:true,cls:this.cls+"-datatable-cell",mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({id:0,fields:["id","text","grayedOutComboItem"],data:b}),tpl:'<tpl for="."><div class="x-combo-list-item {grayedOutComboItem}">{text}</div></tpl>',valueField:"id",displayField:"text",listeners:{beforeselect:function(c,d){return!(!a&&d.id=="6"||this.spVolume.getTierType()!="Data"&&
d.id=="7")},select:function(c){c.getValue()=="7"?this.cron.loadDatetierPattern():this.cron.loadPattern()},scope:this}});this.cbAction.render(this.cbActionId)}},loadArgs:function(a){a=a||{};this.clearErrors();var b=this.spVolumeSchedule=a.spVolumeSchedule;this.spVolume=a.spVolume;this.maxIdSchedule=a.maxIdSchedule||0;!this.cdAction&&this.renderOptionsMenu();var c=[];_.each(this.zfsVolumesManager.getActiveVolumes(),function(d){d=_a(d,"_i4o");d=d.getVolumeId();c.push([d,d])},this);this.cbVolume.store.loadData(c);
if(b){this.bApply.setText(_TR("APPLY"));this.setTitle(this.changeTitle);this.cbVolume.setValue(this.spVolume.getVolumeName());a=b.getAction();this.cbAction.setValue(a);a=="7"?this.cron.loadDatetierPattern():this.cron.loadPattern();this.chbEnabled.setValue(b.getEnabled()=="1");this.cron.loadArgs({min:b.getIntervalMinute(),hour:b.getIntervalHour(),dom:b.getIntervalDayOfMonth(),month:b.getIntervalMonth(),dow:b.getIntervalDayOfWeek()})}else{this.bApply.setText(_TR("ADD"));this.setTitle(this.createTitle);
this.cbVolume.setValue(this.spVolume.getVolumeName());this.cbAction.onSelect(this.cbAction.store.data.get(0),0);this.chbEnabled.setValue(true);this.cron.loadArgs({min:"",hour:"",dom:"",month:"",dow:""})}},getHumanString:function(){return this.cron.getHumanString()}});_._2("_s1");
_s1.VolumeSchedulePanel=_._1(_._3.SystemSubSys.VolumeSchedulePanel,_s0.BasePanel,IPanelItem,_i4,_i4t,{expanded:true,help:"system_panel_schedule",constructor:function(){this.title=_TR("VOLUME_SCHEDULE");_s1.VolumeSchedulePanel.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.VolumeSchedulePanel.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");if(a){this.spVolumeScheduleManager=a.getVolumeScheduleManager();_a(this.spVolumeScheduleManager,"_i1").Advise(this)}},onReady:function(){this.content.update('<div id="'+(this.bAddId=Ext.id())+'" style="height: 30px; padding: 0 15px 20px;"></div><div style="padding: 0 20px 20px 0;"><table class="ui-fwgrid-header" style="width: 100%; table-layout: fixed;" cellpadding="0" cellspacing="0"><tr><td style="width: 10%;"><div class="x-ellipsis" title="'+_TR("VOLUME_SCHEDULE_VOLUME")+
'">'+_TR("VOLUME_SCHEDULE_VOLUME")+'</div></td><td style="width: 10%;"><div class="x-ellipsis" title="'+_TR("VOLUME_SCHEDULE_ACTION")+'">'+_TR("VOLUME_SCHEDULE_ACTION")+'</div></td><td style="width: 10%;"><div class="x-ellipsis" title="'+_TR("VOLUME_SCHEDULE_STATE")+'">'+_TR("VOLUME_SCHEDULE_STATE")+'</div></td><td style="width: 70%;"><div class="x-ellipsis" title="'+_TR("VOLUME_SCHEDULE_OCCURS")+'">'+_TR("VOLUME_SCHEDULE_OCCURS")+'</div></td></tr></table><div id="'+(this.gridId=Ext.id())+'" style="max-height: 275px;"></div></div>');
this.scroller=new Ext.UI.Scroller({dom:Ext.get(this.gridId).dom,type:"vertical"});this.scroller.reg();this.wnd=new _s1.VolumeScheduleWindow({listeners:{applyclick:function(a,b){this.spVolumeScheduleManager.CommitSchedule(b,"system-volschedulepanel-commit-schedule")},addclick:function(a,b){this.spVolumeScheduleManager.AddSchedule(b,"system-volschedulepanel-add-schedule")},scope:this}});new Ext.UI.Button({text:_TR("ADD"),renderTo:this.bAddId,style:"float: right;",listeners:{click:function(){this.wnd.show();
this.wnd.loadArgs({maxIdSchedule:this.maxIdSchedule})},scope:this}});this.menuItem=new Ext.UI.Menu({cls:"x-system-menu",items:[new Ext.menu.Item({text:_TR("SETTINGS"),icon:false,ctCls:"x-frontview-icon-settings",commandName:"settings"}),new Ext.menu.Item({text:_TR("DELETE"),icon:false,ctCls:"x-frontview-icon-delete",commandName:"delete"})],listeners:{itemclick:function(a){switch(a.commandName){case "settings":if(this.selectedItem){this.wnd.show();this.wnd.loadArgs({spVolumeSchedule:this.selectedItem.schedule,
maxIdSchedule:this.maxIdSchedule})}break;case "delete":this.selectedItem&&Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:_TR("ALERT_REMOVE_SCHEDULE_CONFIRM"),fn:function(b){b=="yes"&&this.spVolumeScheduleManager.RemoveSchedule(this.selectedItem.schedule,"system-volschedulepanel-remove-schedule")},scope:this});break}},scope:this}})},populateSchedules:function(){var a="";this.schedules=[];var b=0;this.maxIdSchedule=0;if(!this.wnd.rendered){this.wnd.show();this.wnd.hide()}_.each(this.spVolumeScheduleManager.getSchedules(),
function(d){d=_a(d,"_i4r");this.wnd.loadArgs({spVolumeSchedule:d});var f=this.wnd.getHumanString(),e=d.getId();this.schedules[b]={schedule:d,txt:f,id:e};if(this.maxIdSchedule<e)this.maxIdSchedule=e*1;e=d.getVolumeName();var g=d.getAction();switch(g){case "1":g=_TR("VOLUME_SCHEDULE_DEDUP");break;case "2":g=_TR("VOLUME_SCHEDULE_SCRUB");break;case "3":g=_TR("VOLUME_SCHEDULE_DEFRAG");break;case "4":g=_TR("VOLUME_SCHEDULE_BALANCE");break;case "5":g=_TR("VOLUME_SCHEDULE_DISKTEST");
break;case "6":g=_TR("VOLUME_SCHEDULE_SSD_TRIM");break}d=d.getEnabled()=="1"?"Enabled":"Disabled";a+='<table id="'+(this.schedules[b].itemNodeId=Ext.id())+'" class="ui-fwgrid-row'+(b%2==1?"alt":"")+'" style="width: 100%; table-layout: fixed;" cellpadding="0" cellspacing="0"><tr><td style="width: 10%;"><div class="x-ellipsis" title="'+e+'">'+e+'</div></td><td style="width: 10%;"><div class="x-ellipsis" title="'+g+'">'+g+'</div></td><td style="width: 10%;"><div class="x-ellipsis" title="'+d+'">'+d+
'</div></td><td style="width: 70%;"><div class="x-ellipsis" title="'+f+'">'+f+"</div></td></tr></table>";++b},this);Ext.get(this.gridId).update(a);for(b=0;b<this.schedules.length;++b){var c=this.schedules[b];c.row=Ext.get(c.itemNodeId);c.row.item=c;c.row.on("click",function(d,f){this.selectedItem&&this.selectedItem.row.removeClass("ui-fwgrid-rowsel");if(f=Ext.get(f).parent("table")){f.addClass("ui-fwgrid-rowsel");this.selectedItem=f.item;this.menuItem.showAt(d.getXY())}},this)}},IPanelItem:{refresh:function(){this.spVolumeScheduleManager.UpdateSchedules("system-volschedulepanel-update-schedules")}},
_i4t:{_o1:function(a,b){if(b=="system-volschedulepanel-update-schedules"||b=="system-volschedulepanel-commit-schedule"||b=="system-volschedulepanel-add-schedule"||b=="system-volschedulepanel-remove-schedule")this.showProgress();return _5},OnFailed:function(a,b){if(!this.rendered)return _5;a=b.getErrorCause();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(a,"Code: "+b.getErrorCode(),_2.ERROR,{windowTitle:_TR("SERVICE_OPERATION_ERROR_TITLE"),
title:"",subTitle:a,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false});_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.hideIndicatorExt();return _5},_o2:function(a,b){switch(b){case "system-volschedulepanel-update-schedules":this.populateSchedules();break;case "system-volschedulepanel-commit-schedule":case "system-volschedulepanel-add-schedule":case "system-volschedulepanel-remove-schedule":_a(this,"IPanelItem").refresh();break}return _5},
_o3:function(a,b,c){if(c=="system-volschedulepanel-update-schedules"||c=="system-volschedulepanel-commit-schedule"||c=="system-volschedulepanel-add-schedule"||c=="system-volschedulepanel-remove-schedule")this.hideProgress();return _5}}});_._2("_s1");
_s1.HomeFolderPanel=_._1(_._3.SystemSubSys.HomeFolderPanel,_s0.BasePanel,IPanelItem,_i4,_i45,{expanded:true,cls:"x-system-homefolder",help:"system_panel_home_folder",constructor:function(){this.title=_TR("HOMEFOLDERPANEL_HOME_FOLDER");_s1.HomeFolderPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.HomeFolderPanel.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");if(a){this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this)}},onReady:function(){this.content.update('<table><tr><td class="'+this.cls+"-label "+this.cls+'-mainlabel"><div id="'+(this.bOnOffId=Ext.id())+'"></div></td><td class="'+this.cls+"-label "+this.cls+'-mainlabel">'+_TR("HOMEFOLDERPANEL_PRIVATE_SHARES_ENABLED")+'</td></tr><tr><td></td><td id="'+(this.chbNfsEnabledId=Ext.id())+'" class="'+this.cls+'-label"></td></tr><tr><td></td><td id="'+(this.chbFtpEnabledId=
Ext.id())+'" class="'+this.cls+'-label"></td></tr></table>');this.bOnOff=new Ext.UI.ButtonOnOff({cls:"x-sh-inspector-center",renderTo:this.bOnOffId,textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),labelwidth:40,listeners:{valuechanged:this.onOnOffChange,scope:this}});this.chbNfsEnabled=new Ext.UI.Checkbox({renderTo:this.chbNfsEnabledId,boxLabel:_TR("HOMEFOLDERPANEL_EXPORT_NFS_ENABLED"),listeners:{check:this.onNfsCheck,scope:this}});this.chbFtpEnabled=new Ext.UI.Checkbox({renderTo:this.chbFtpEnabledId,boxLabel:_TR("HOMEFOLDERPANEL_EXPORT_FTP_ENABLED"),
listeners:{check:this.onFtpCheck,scope:this}})},onOnOffChange:function(a){if(this.homeFoldersOptions){a=!a.isOff();this.homeFoldersOptions.putEnabled(a?"1":"0");if(!a){this.homeFoldersOptions.putNfsEnabled("0");this.homeFoldersOptions.putFtpEnabled("0");this.chbNfsEnabled.setValue(false,true);this.chbFtpEnabled.setValue(false,true)}this.spSysManager.CommitHomeFolderOptions("system-homefolderpanel-commit-homefolderoptions")}},onNfsCheck:function(a,b){if(this.homeFoldersOptions){this.homeFoldersOptions.putNfsEnabled(b?
"1":"0");this.spSysManager.CommitHomeFolderOptions("system-homefolderpanel-commit-homefolderoptions")}},onFtpCheck:function(a,b){if(this.homeFoldersOptions){this.homeFoldersOptions.putFtpEnabled(b?"1":"0");this.spSysManager.CommitHomeFolderOptions("system-homefolderpanel-commit-homefolderoptions")}},populateHomeFolderOptions:function(){var a=this.homeFoldersOptions=this.spSysManager.getHomeFolderOptions();if(a&&a!=_4){var b=a.getEnabled()=="0";this.bOnOff.changeUI(b,false);this.chbNfsEnabled.setDisabled(b);
this.chbFtpEnabled.setDisabled(b);this.chbNfsEnabled.setValue(a.getNfsEnabled()=="1",true);this.chbFtpEnabled.setValue(a.getFtpEnabled()=="1",true)}},IPanelItem:{refresh:function(){this.spSysManager.UpdateHomeFolderOptions("system-homefolderpanel-update-homefolderoptions")}},_i45:{_o1:function(a,b){if(b=="system-homefolderpanel-update-homefolderoptions"||b=="system-homefolderpanel-commit-homefolderoptions")this.showProgress();return _5},_o2:function(a,b){switch(b){case "system-homefolderpanel-update-homefolderoptions":this.populateHomeFolderOptions();
break;case "system-homefolderpanel-commit-homefolderoptions":_a(this,"IPanelItem").refresh();break}return _5},_o3:function(a,b,c){if(c=="system-homefolderpanel-update-homefolderoptions"||c=="system-homefolderpanel-commit-homefolderoptions")this.hideProgress();return _5}}});Ext.namespace("_s1");
_s1.SpinDownPanel=_._1(_._3.SystemSubSys.SpinDownPanel,_s0.BasePanel,IPanelItem,_i4,_i2h,{expanded:true,panelCls:"x-system-panel-power",innerEnable:false,help:"system_panel_spindown",constructor:function(a){this.title=_TR("SPINDOWN_TITLE");_s1.SpinDownPanel.superclass.constructor.call(this,a);this.sdays=["sun","mon","tue","wed","thu","fri","sat"];this.spSpindownManager2=[];this.spindownStore=new Ext.data.ArrayStore({fields:["value",
"idx"],data:[["5","1"],["10","2"],["15","3"],["20","4"],["25","5"],["30","6"],["35","7"],["40","8"],["45","9"],["50","10"],["55","11"],["60","12"],["90","13"],["120","14"],["180","15"],["240","16"]],idIndex:1})},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spPowerManager=a.getSystemManager().getPowerManager();_a(this.spPowerManager,"_i1").Advise(this)}_s1.SpinDownPanel.superclass.initComponent.apply(this,arguments)},
applysdTimer:function(){this.spindownTimerWindow.hide();this.spSpindownManager2=[];var a=Ext.get(this.sdtableinfoid).child("."+this.panelCls+"-hour-off"),b={};b.startD=0;b.startH=0;b.startM=0;b.endD=0;b.endH=1;b.endM=0;b.ac=a.is("."+this.panelCls+"-hour-on")?"ON":"OFF";table=document.getElementById(this.sdtableinfoid);for(a=1;a<8;a++)for(var c=0;c<table.rows[a].cells.length;c++)if(!(a==1&&c==1||table.rows[a].cells[c].className.indexOf(this.panelCls+"-hour-off")==-1)){var d="OFF";if(table.rows[a].cells[c].className.indexOf(this.panelCls+
"-hour-on")!=-1)d="ON";b.endD=a-1;b.endH=c-1;if(b.ac!=d){var f=_a(new _1.pwact,"_i2f");f.putDayOfWeek(this.sdays[b.startD]);f.putHour(""+b.startH);f.putMinute("0");f.putAction(b.ac);this.spSpindownManager2.push(f);b.startD=b.endD;b.startH=b.endH;b.ac=d}}f=_a(new _1.pwact,"_i2f");f.putDayOfWeek(this.sdays[b.startD]);f.putHour(""+b.startH);f.putMinute("0");f.putAction(b.ac);this.spSpindownManager2.push(f);this.spSpindownManager2.length>0&&this.spSpindownManager2[0].getDayOfWeek()==
"sun"&&this.spSpindownManager2[0].getHour()==0&&this.spSpindownManager2.length!=1&&this.spSpindownManager2[this.spSpindownManager2.length-1].getAction()=="ON"&&this.spSpindownManager2.shift();this.spPowerManager.removeAllSpindownActions();this.spPowerManager.appendSpindownActions(this.spSpindownManager2);this.spPowerManager.commitSpindown("commitSpindown")},updateTimerImage:function(a,b){a.update("");_.each(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],function(e){a.el.createChild({cls:this.panelCls+
"-dw"+(e=="Sun"||e=="Sat"?"1":"2"),html:_TR(e.toUpperCase())})},this);for(var c=0;c<b.length-1;c++){var d=b[c],f=b[c+1];d.action=="ON"&&a.el.createChild({cls:this.panelCls+"-timer-pr",style:String.format("left: {0}px; width: {1}px",63*d.day+63*d.hour/24,63*(f.day-d.day)+63*(f.hour-d.hour)/24)})}},updateSpindownTimerImage:function(a,b){this.radioAllTime.un("check",this.onRadioAllTimeChecked,this);this.radioSchedule.un("check",this.onRadioScheduleChecked,this);var c=this.spPowerManager.getSpindownStatus();
if(c=="true"||c==true){this.radioAllTime.enable();this.radioSchedule.enable();c=false;this.updateTimerImage(a,b);if(b.length>1){var d=b[0];d.action=="OFF"&&a.el.createChild({cls:this.panelCls+"-timer-pr",style:String.format("left: {0}px; width: {1}px",0,63*d.day+63*d.hour/24)});if(b.length==2){a=b[0];b=b[1];if(a.action=="ON"&&a.day==0&&a.hour==0&&a.minute==0&&b.action=="OFF"&&b.day==6&&b.hour==24&&b.minute==0)c=true}}c?this.radioAllTime.setValue(true):this.radioSchedule.setValue(true);this.sdproperties.enable()}else{this.updateTimerImage(a,
[]);this.radioAllTime.setValue(false);this.radioSchedule.setValue(false);this.radioAllTime.disable();this.radioSchedule.disable();this.sdproperties.disable()}this.radioAllTime.on("check",this.onRadioAllTimeChecked,this);this.radioSchedule.on("check",this.onRadioScheduleChecked,this)},updateTimer:function(a,b){a=document.getElementById(a);if(!(a==null||Ext.isEmpty(b))){for(var c=0;c<a.rows.length;++c)for(var d=0;d<a.rows[c].cells.length;++d)Ext.get(a.rows[c].cells[d]).removeClass(this.panelCls+"-hour-on");
for(var f=0;f<b.length-1;f++){var e=b[f],g=b[f+1];if(e.action=="ON"){if(e.day==g.day){c=e.day+1;d=e.hour+1}else{c=e.day+1;for(d=e.hour+1;d<25;d++)Ext.get(a.rows[c].cells[d]).addClass(this.panelCls+"-hour-on");if(g.day-e.day>1)for(c=e.day+2;c<g.day+1;c++)for(d=1;d<25;d++)Ext.get(a.rows[c].cells[d]).addClass(this.panelCls+"-hour-on");c=g.day+1;d=1}for(;d<g.hour+1;d++)Ext.get(a.rows[c].cells[d]).addClass(this.panelCls+"-hour-on")}else{if(e.day==g.day){c=e.day+1;d=e.hour+1}else{c=e.day+1;for(d=e.hour+
1;d<25;d++)Ext.get(a.rows[c].cells[d]).removeClass(this.panelCls+"-hour-on");if(g.day-e.day>1)for(c=e.day+2;c<g.day+1;c++)for(d=1;d<25;d++)Ext.get(a.rows[c].cells[d]).removeClass(this.panelCls+"-hour-on");c=g.day+1;d=1}for(;d<g.hour+1;d++)Ext.get(a.rows[c].cells[d]).removeClass(this.panelCls+"-hour-on")}}}},updateSpindownTimer:function(a,b){(a=b.action=="OFF")&&b.unshift({action:"ON",day:0,hour:0,minute:0});this.updateTimer(this.sdtableinfoid,b);a&&b.shift()},updateSpindown:function(){var a=this.spPowerManager.getSpindownStatus();
if(a=="true"||a==true){this.spindownTime.enable();this.enableSpinUp.enable();this.enableSpinUpHandring=false;this.enableSpinUp.setValue(this.spPowerManager.getSpinUpOnTakingSnap());this.enableSpinUpHandring=true}else{this.enableSpinUpHandring=false;this.enableSpinUp.setValue(false);this.enableSpinUpHandring=true;this.spindownTime.disable();this.enableSpinUp.disable()}this.enableSpindown.setValue(a);this.spPowerManager.getSpindownTime()=="0"?this.spindownTime.setValue("5"):this.spindownTime.setValue(this.spPowerManager.getSpindownTime())},
sortActions:function(a){var b;if(a=="power"){b=this.PowerManagerActions=[];a=this.spPowerManager.getActions()}else{b=this.SpindownManagerActions=[];a=this.spPowerManager.getSpindownActions()}_.each(a,function(f){f=_a(f,"_i2f");if(f!=_4&&f!=null)b.push({day:this.sdays.indexOf(f.getDayOfWeek()),hour:f.getHour()==""?0:this.getInt(f.getHour()),minute:f.getMinute()==""?0:this.getInt(f.getMinute()),action:f.getAction()})},this);for(a=0;a<b.length;a++)for(var c=0;c<b.length-1;c++){var d=
this.getActTime(b[c]);if(this.getActTime(b[c+1])<d){d=b[c];b[c]=b[c+1];b[c+1]=d}}b.length>0&&b[0].action=="OFF"&&b.splice(0,0,{day:0,hour:0,minute:0,action:"ON"});b.length>0&&b[b.length-1].action=="ON"&&b.push({day:6,hour:24,minute:0,action:"OFF"})},getInt:function(a){if(a.length==2)return 10*parseInt(a[0])+parseInt(a[1]);return parseInt(a)},getActTime:function(a){return new Date(1,1,a.day+1,a.hour,a.minute,0,0)},initLable:function(a){this.switchStatus=a;$_(Ext.select(".spin-down-24hours-tr").elements).forEach(function(b){b=
b.children;for(var c=1,d=b.length;c<d;c++){var f=c-1,e=localStorage.getItem("enable24Hour")=="true",g="";e||(g=f>=12?" "+_TR("PM"):" "+_TR("AM"));if(!e&&f>12)f-=12;if(g==" "+_TR("AM")&&f==0)f=12;b[c].title=String.format("{0}:00{1} - {0}:59{1}",f,g);Ext.get(b[c]).update(f+"")}})},onReady:function(){var a=this.panelCls+"-cell",b=this.panelCls+"-col";this.el.addClass("x-system-panel-power");var c=this.sdproperties=new Ext.UI.RoundButton({cls:"x-frontview-btn-settings"});c.on("click",function(){if(!this.spindownTimerWindow){this.sdtableinfoid=
Ext.id();this.sdpowerinfoid=Ext.id();this.sdnightid1=Ext.id();this.sddayid=Ext.id();this.sdnightid2=Ext.id();var d=[_TR("SU"),_TR("MO"),_TR("TU"),_TR("WE"),_TR("TH"),_TR("FR"),_TR("SA")],f=["SU","MO","TU","WE","TH","FR","SA"];this.sddays=[_TR("SUNDAY"),_TR("MONDAY"),_TR("TUESDAY"),_TR("WEDNESDAY"),_TR("THURSDAY"),_TR("FRIDAY"),_TR("SATURDAY")];var e='<table id="'+this.sdtableinfoid+'" cellpadding="0" cellspacing="1" border="0" >';e+=String.format('<tr><td id="{2}" class="{5}-{0}"  title="'+_TR("POWERTIMER_TIP_NIGHT1")+
'" colspan="3"></td><td colspan=5></td><td id="{3}" class="{5}-{1}"   title="'+_TR("POWERTIMER_TIP_DAY")+'" colspan="3"></td><td colspan=10></td><td id="{4}" class="{5}-{0}"  title="'+_TR("POWERTIMER_TIP_NIGHT2")+'" colspan=3></td><td></td><td/></tr>',"night","day",this.sdnightid1,this.sddayid,this.sdnightid2,this.panelCls);for(var g=0;g<7;g++){var h=_TR("POWERTIMER_TIP_"+f[g]);e+=String.format('<tr><td class="{2}-timeday" title="{1}">{0}</td>',d[g],h,this.panelCls);for(h=0;h<8;h++)e+='<td class="'+
this.panelCls+'-hour-off" ></td>';for(;h<21;h++)e+='<td class="'+this.panelCls+"-hour-off "+this.panelCls+'-hour-day" ></td>';for(;h<24;h++)e+='<td class="'+this.panelCls+'-hour-off" ></td>';e+="</tr>"}e+='<tr class="spin-down-24hours-tr"><td class="'+this.panelCls+'-timeday"></td>';for(h=0;h<24;h++)e+=String.format('<td class="{1}-hours" title="{0}:00 - {0}:59">{0}</td>',h,this.panelCls);e+="</tr>";e+='<tr><td colspan="25"><div style="height: 10px;">&nbsp;</div><td></tr>';e+="<tr><td></td>";e+=String.format('<td id="{0}"  class="{1}rinfo" colspan=14 ></td>',
this.sdpowerinfoid,this.panelCls);e+=String.format('<td colspan="12"><div style="display: inline-block;" ><div class="{3}-houron"></div><div class="{3}-status">{0}</div></div><div style="display: inline-block;" ><div class="{3}-houroffday"></div><div class="{3}-status">{1}</div></div><div style="display: inline-block;" ><div class="{3}-houroffnight"></div><div class="{3}-status">{2}</div></div></td>',_TR("ON_LC"),_TR("DAY_OFF"),_TR("NIGHT_OFF"),this.panelCls);e+="</tr>";e+="</table>";d=new Ext.Component({html:e,
cls:this.panelCls+"-body"});d.on({afterrender:function(){this.updateSpindownTimer(this.sdtableinfoid,this.SpindownManagerActions);Ext.get(this.sdtableinfoid).on("mouseover",function(k,j){k=j.cellIndex-1;var m=localStorage.getItem("enable24Hour")=="true",n="";m||(n=k>=12?" "+_TR("PM"):" "+_TR("AM"));if(!m&&k>12)k-=12;if(n==" "+_TR("AM")&&k==0)k=12;if(this.sddrag)this.sddrag=="add"?Ext.get(j).addClass(this.panelCls+"-hour-on"):Ext.get(j).removeClass(this.panelCls+"-hour-on");Ext.get(this.sdpowerinfoid).update(String.format("{0}, {1}:00{2} - {1}:59{2}",
this.sddays[j.parentNode.rowIndex-1],k,n))},this,{delegate:"."+this.panelCls+"-hour-off"});Ext.get(this.sdtableinfoid).on("mousedown",function(k,j){this.sddrag=Ext.get(j).is("."+this.panelCls+"-hour-on")?"remove":"add";Ext.get(j).toggleClass(this.panelCls+"-hour-on")},this,{delegate:"."+this.panelCls+"-hour-off"});Ext.get(this.sdtableinfoid).on("mouseup",function(){this.sddrag=null},this);Ext.get(this.sdtableinfoid).on("mouseleave",function(){this.sddrag=null;Ext.get(this.sdpowerinfoid).update("")},
this);Ext.get(this.sdtableinfoid).on("click",function(k,j){k=false;j=Ext.get(j).next("."+this.panelCls+"-hour-off");if(j.is("."+this.panelCls+"-hour-on"))k=true;for(;j!=null;){k?j.removeClass(""+this.panelCls+"-hour-on"):j.addClass(""+this.panelCls+"-hour-on");j=j.next("."+this.panelCls+"-hour-off")}},this,{delegate:"."+this.panelCls+"-timeday"});Ext.get(this.sdtableinfoid).on("click",function(k,j){k=false;var m=document.getElementById(this.sdtableinfoid);if(m!=null){j=j.cellIndex;if(Ext.get(m.rows[1].cells[j]).is("."+
this.panelCls+"-hour-on"))k=true;for(var n=1;n<8;n++)k?Ext.get(m.rows[n].cells[j]).removeClass(this.panelCls+"-hour-on"):Ext.get(m.rows[n].cells[j]).addClass(this.panelCls+"-hour-on")}},this,{delegate:"."+this.panelCls+"-hours"});Ext.get(this.sdnightid1).on("click",function(){var k=false,j=document.getElementById(this.sdtableinfoid);if(j!=null){if(Ext.get(j.rows[1].cells[1]).is("."+this.panelCls+"-hour-on"))k=true;for(var m=1;m<8;m++)for(var n=1;n<9;n++)k?Ext.get(j.rows[m].cells[n]).removeClass(this.panelCls+
"-hour-on"):Ext.get(j.rows[m].cells[n]).addClass(this.panelCls+"-hour-on")}},this);Ext.get(this.sddayid).on("click",function(){var k=false,j=document.getElementById(this.sdtableinfoid);if(j!=null){if(Ext.get(j.rows[1].cells[9]).is("."+this.panelCls+"-hour-on"))k=true;for(var m=1;m<8;m++)for(var n=9;n<22;n++)k?Ext.get(j.rows[m].cells[n]).removeClass(this.panelCls+"-hour-on"):Ext.get(j.rows[m].cells[n]).addClass(this.panelCls+"-hour-on")}},this);Ext.get(this.sdnightid2).on("click",function(){var k=
false,j=document.getElementById(this.sdtableinfoid);if(j!=null){if(Ext.get(j.rows[1].cells[22]).is("."+this.panelCls+"-hour-on"))k=true;for(var m=1;m<8;m++)for(var n=22;n<25;n++)k?Ext.get(j.rows[m].cells[n]).removeClass(this.panelCls+"-hour-on"):Ext.get(j.rows[m].cells[n]).addClass(this.panelCls+"-hour-on")}},this)},scope:this});this.spindownTimerWindow=new Ext.UI.Window({title:_TR("SPINDOWN_TIMER"),modal:true,width:560,resizable:false,bodyCssClass:"x-powerpanel-timer",autoCreate:true,constrain:true,
constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,help:"system_wnd_spindown",fbar:[{xtype:"uibutton",text:_TR("APPLY"),handler:this.applysdTimer,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.spindownTimerWindow.hide()},scope:this,cancelbtn:true}],items:[d]})}this.updateSpindownTimer(this.sdtableinfoid,this.SpindownManagerActions);this.spindownTimerWindow.show();this.initLable()},this);(new Ext.Component({html:_TR("SPINDOWN_DESC"),
style:"padding-top: 3px; margin-bottom: 20px"})).render(this.content);this.contentControl=this.getExtTable(b,this.getExtRow("",this.getExtCell("",[this.getExtTable(a+" x-system-panel-power-line-spindown",this.getExtRow("",[this.getExtCell("",this.enableSpindown=new Ext.UI.Checkbox({cls:a+" x-system-panel-power-line",checked:false,boxLabel:_TR("ENABLE_SPINDOWN_1"),handler:function(d,f){if(!this.innerSpindownEnable){this.spPowerManager.putSpindownStatus(f?"true":"false");this.spPowerManager.putSpindownTime(this.spindownTime.getValue());
if(f)this.enableAllTime();else{this.spindownTime.setValue("5");this.enableSchedule()}}},scope:this})),this.getExtCell("",this.spindownTime=new Ext.UI.ComboBox({width:70,store:this.spindownStore,valueField:"value",displayField:"value",triggerAction:"all",lazyRender:true,mode:"local",listeners:{select:this.onSpinTimeChanged,scope:this}})),this.getExtCell("",'<div class="x-system-panel-service-text">&nbsp;&nbsp;'+_TR("ENABLE_SPINDOWN_2")+"&nbsp;&nbsp;</div>"),this.getExtCell("",new Ext.UI.RoundButton({iconCls:"x-system-btn-question",
width:18,height:18,listeners:{afterrender:function(d){new Ext.UI.ToolTip(d.el,{width:230,html:_TR("SPINDOWN_TIP")})}}}))])),this.getExtTable(a,[this.getExtRow("",[this.getExtCell(this.panelCls+"-spindown-spinup-block",this.enableSpinUp=new Ext.UI.Checkbox({cls:a+" x-system-panel-power-line",checked:false,boxLabel:_TR("SPINDOWN_SPINUP_ON_TAKING_SNAP"),handler:function(d,f){if(this.enableSpinUpHandring){this.spPowerManager.putSpinUpOnTakingSnap(f);this.spPowerManager.commitSpindown("commitSpindown")}},
scope:this}))])]),this.getExtTable(a,[this.getExtRow("",[this.getExtCell(this.panelCls+"-spindown-radio-block",this.radioAllTime=new Ext.UI.Radio({boxLabel:_TR("SPINDOWN_ALL_TIME"),name:"disk-spin-down-mode",cls:this.panelCls+"-spindown-radio-all-time"}))]),this.getExtRow("",[this.getExtCell(this.panelCls+"-spindown-radio-block",this.radioSchedule=new Ext.UI.Radio({boxLabel:_TR("SPINDOWN_SCHEDULE"),name:"disk-spin-down-mode"}))])]),this.getExtTable(a,this.getExtRow("",[this.getExtCell(this.panelCls+
"-spindown-schedule-block",this.spindowntimershedule=new Ext.Container({cls:"x-system-panel-power-temp-timer"})),this.getExtCell(this.panelCls+"-props",c)]))])))},onRadioAllTimeChecked:function(a,b){b&&this.enableAllTime()},onRadioScheduleChecked:function(a,b){b&&this.enableSchedule()},enableAllTime:function(){var a=_a(new _1.pwact,"_i2f");a.putDayOfWeek("sun");a.putHour("00");a.putMinute("00");a.putAction("ON");this.spPowerManager.removeAllSpindownActions();this.spPowerManager.appendSpindownActions([a]);
this.spPowerManager.commitSpindown("commitSpindown")},enableSchedule:function(){var a=_a(new _1.pwact,"_i2f");a.putDayOfWeek("sun");a.putHour("00");a.putMinute("00");a.putAction("OFF");this.spPowerManager.removeAllSpindownActions();this.spPowerManager.appendSpindownActions([a]);this.spPowerManager.commitSpindown("commitSpindown")},onSpinTimeChanged:function(a,b){a=b.get("value");this.spPowerManager.putSpindownStatus(this.enableSpindown.getValue()?"true":"false");this.spPowerManager.putSpindownTime(a);
this.spPowerManager.commitSpindown("commitSpindown")},getExtCell:function(a,b){return Ext.isString(b)?new Ext.BoxComponent({autoEl:"td",cls:a,html:b}):new Ext.Container({autoEl:"td",cls:a,items:b})},getExtRow:function(a,b){return new Ext.Container({autoEl:"tr",cls:a,items:b})},getExtTable:function(a,b){return new Ext.Container({autoEl:{tag:"table",cellpadding:0,cellspacing:0},cls:a,items:new Ext.Container({autoEl:"tbody",items:b})})},IPanelItem:{refresh:function(){this.spPowerManager.updateSpindown("updateSpindown")}},
_i2h:{_o1:function(a,b){if(b!="updateSpindown"&&b!="commitSpindown")return _5;this.showProgress();return _5},OnNTFailed:function(a,b){_a(b,"_i2g");_2("Failed to uptain power information from device.");return _5},_o2:function(a,b){if(b!="updateSpindown"&&b!="commitSpindown")return _5;this.contentControl.render(this.content);spPowerManager=_a(a,"_i2g");switch(b){case "updateSpindown":this.innerSpindownEnable=true;this.updateSpindown();
this.sortActions("spindown");this.updateSpindownTimerImage(this.spindowntimershedule,this.SpindownManagerActions);this.innerSpindownEnable=false;break;case "commitSpindown":this.spPowerManager.updateSpindown("updateSpindown");break}return _5},_o3:function(a,b,c){if(c!="updateSpindown"&&c!="commitSpindown")return _5;this.hideProgress();return _5}}});Ext.namespace("_s1");
_s1.WakeOnLanPanel=_._1(_._3.SystemSubSys.WakeOnLanPanel,_s0.BasePanel,IPanelItem,_i4,_i2h,{expanded:true,panelCls:"x-system-panel-power",innerEnable:false,help:"system_panel_wake_on_lan",constructor:function(a){this.title=_TR("WAKE_ON_LAN_TITLE");_s1.WakeOnLanPanel.superclass.constructor.call(this,a)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spPowerManager=a.getSystemManager().getPowerManager();
_a(this.spPowerManager,"_i1").Advise(this)}_s1.WakeOnLanPanel.superclass.initComponent.apply(this,arguments)},onReady:function(){var a=this.panelCls+"-cell",b=this.panelCls+"-col";this.el.addClass("x-system-panel-power");(new Ext.Component({html:_TR("WAKE_ON_LAN_DESC"),style:"padding-top: 3px; margin-bottom: 20px;"})).render(this.content);this.contentControl=this.getExtTable(b,this.getExtRow("",this.getExtCell("",[this.getExtTable(a,this.getExtRow("",[this.getExtCell("",
this.enableWake=new Ext.UI.Checkbox({cls:a+" x-system-panel-power-wlan",checked:false,boxLabel:_TR("ENABLE_WAKE_ON_LAN"),handler:function(c,d){if(!this.innerWakeEnable){this.spPowerManager.putWakeOnLanStatus(d?true:false);this.spPowerManager.commitWakeOnLAN("commitEnableWakeOnLAN")}},scope:this}))]))])))},getExtCell:function(a,b){return Ext.isString(b)?new Ext.BoxComponent({autoEl:"td",cls:a,html:b}):new Ext.Container({autoEl:"td",cls:a,items:b})},getExtRow:function(a,b){return new Ext.Container({autoEl:"tr",
cls:a,items:b})},getExtTable:function(a,b){return new Ext.Container({autoEl:{tag:"table",cellpadding:0,cellspacing:0},cls:a,items:new Ext.Container({autoEl:"tbody",items:b})})},IPanelItem:{refresh:function(){this.spPowerManager.updateWakeOnLAN("updateWakeOnLAN")}},_i2h:{_o1:function(a,b){if(b!="updateWakeOnLAN"&&b!="commitEnableWakeOnLAN")return _5;this.showProgress();return _5},OnNTFailed:function(a,b){_a(b,"_i2g");_2("Failed to uptain power information from device.");
return _5},_o2:function(a,b){if(b!="commitEnableWakeOnLAN"&&b!="updateWakeOnLAN")return _5;this.contentControl.render(this.content);spPowerManager=_a(a,"_i2g");switch(b){case "updateWakeOnLAN":this.innerWakeEnable=true;this.enableWake.setValue(spPowerManager.getWakeOnLanStatus());this.innerWakeEnable=false;break;case "commitEnableWakeOnLAN":this.spPowerManager.updateWakeOnLAN("updateWakeOnLAN");break}return _5},_o3:function(a,b,c){if(c!="updateWakeOnLAN"&&c!="commitEnableWakeOnLAN")return _5;
this.hideProgress();return _5}}});Ext.namespace("_s1","_s1.Storage");
_s1.FormatUSBWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,closeAction:"hide",cls:"frontview-hostnamewindow",help:"system_wnd_usbformat",constructor:function(){this.title=_TR("FORMAT");this.html='<table class="frontview-hostnamewindow-datatable" cellspacing="0" cellpadding="0"><tr><td class="frontview-hostnamewindow-datatable-cell frontview-hostnamewindow-datatable-labelcell">'+_TR("FILE_SYSTEM")+_TR("COLON")+'</td><td id="'+(this.fileSystemId=Ext.id())+
'"></td></tr><tr><td style="height:5px;" colspan="2"></td></tr><tr><td class="frontview-hostnamewindow-datatable-cell frontview-hostnamewindow-datatable-labelcell">'+_TR("ENCRYPTION")+_TR("COLON")+'</td><td id="'+(this.encryptionTypeId=Ext.id())+'"></td></tr><tr><td style="height:5px;" colspan="2"></td></tr><tr><td class="frontview-hostnamewindow-datatable-cell frontview-hostnamewindow-datatable-labelcell" style="position:relative"><div class="usb-warning"></div></td><td>'+_TR("USB_ENCRYPTION_WARNING")+
'</td></tr><tr><td style="height:5px;" colspan="2"></td></tr><tr><td class="frontview-hostnamewindow-datatable-cell frontview-hostnamewindow-datatable-labelcell">'+_TR("VOLUME_ENCRYPTION_EMAIL")+_TR("COLON")+'</td><td id="'+(this.sendKeybyEmailId=Ext.id())+'"></td></tr><tr><td style="height:5px;" colspan="2"></td></tr><tr><td class="frontview-hostnamewindow-datatable-cell frontview-hostnamewindow-datatable-labelcell">'+_TR("SHARE_TAB_LABEL_DEVICE_LABEL")+_TR("COLON")+'</td><td id="'+(this.deviceLblId=
Ext.id())+'"></td></tr></table>';this.bApply=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("OK"),handler:function(){var a={fs:this.fsComboxBox.getValue(),lbl:this.tfDeviceLbl.getValue(),et:this.etComboxBox.getValue(),ske:this.ckSendKeybyEmail.getValue()?"1":"0"};this.validation()&&this.fireEvent("applyClick",a)},scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",
this.bApply,this.bCancel];_s1.FormatUSBWindow.superclass.constructor.apply(this,arguments);this.fsComboxBox=new Ext.UI.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[]}),valueField:"id",displayField:"text"});this.etComboxBox=new Ext.UI.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[["None",
"None"],["AES-128","AES-128"],["AES-256","AES-256"]]}),valueField:"id",displayField:"text",value:"None",listeners:{select:this.onEtComboxBoxSelected,scope:this}});this.ckSendKeybyEmail=new Ext.UI.Checkbox({disabled:true});this.tfDeviceLbl=new Ext.UI.TextField({width:200});this.on("afterrender",function(){this.fsComboxBox.render(this.fileSystemId);this.etComboxBox.render(this.encryptionTypeId);this.ckSendKeybyEmail.render(this.sendKeybyEmailId);this.tfDeviceLbl.render(this.deviceLblId)},this)},onEtComboxBoxSelected:function(a,
b,c){this.ckSendKeybyEmail.setDisabled(c==0)},validation:function(){var a=this.tfDeviceLbl.getValue(),b;switch(this.fsComboxBox.getValue()){case "ext2":case "ext3":case "ext4":b=16;break;case "ntfs":b=128;break;case "vfat":b=11;break;case "btrfs":b=255;break}if(a&&a.replace(/[^\x00-\xff]/g,"01").length>b){this.tfDeviceLbl.showValidateTooltip(String.format(_TR("SHARE_TAB_LABEL_LEN"),b));return false}return true},load:function(a,b){this.setTitle(_TR("FORMAT")+" "+a);a=[["ext3",_TR("EXT3")],["ext4",
_TR("EXT4")],["ntfs",_TR("NTFS")],["btrfs",_TR("BTRFS")]];var c="ext3";if(b<=2199023255552){a.splice(0,0,["vfat",_TR("FAT32")]);c="vfat"}this.fsComboxBox.getStore().loadData(a);this.fsComboxBox.setValue(c)}});Ext.namespace("_s1");
_s1.EmailWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,validateEmail:null,help:"system_wnd_email",constructor:function(a){this.title=_TR("ALERT_ADD_CONTACT");this.html=this.getHtml();this.fbar=this.getFooter();_s1.EmailWindow.superclass.constructor.call(this,a);this.addEvents("change")},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-system-panel-alerts-wnd-email"><nobr>'+
_TR("EMAIL")+':</nobr></td><td id="'+(this.cbEmailId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("ADD"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s1.EmailWindow.superclass.afterRender.call(this,a);this.cbEmail=new Ext.UI.ComboBox({width:310,mode:"local",triggerAction:"all",
store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",editable:true,tpl:'<tpl for="."><div class="x-combo-list-item" title="{text}">{text}</div></tpl>',listeners:{beforeselect:function(){},select:function(){},scope:this}});this.cbEmail.render(this.cbEmailId)},afterShow:function(){_s1.EmailWindow.superclass.afterShow.call(this);this.cbEmail.tooltip&&this.cbEmail.hideValidateTooltip()},onAddClick:function(){var a=this.cbEmail.el.dom.value.trim();if(this.validateEmail&&
!this.validateEmail(a))this.cbEmail.showValidateTooltip(_TR("USERS_ERRORTIP_EMAIL"));else{a&&this.fireEvent("change",this,a);this.hide()}},load:function(a){var b=[];a=$_.uniq(a);_.each(a,function(c){b.push([c,c])},this);this.cbEmail.getStore().loadData(b);this.cbEmail.setValue("")}});Ext.namespace("_s1");
_s1.FileSearchServiceWindow=_._1(_9,Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,cls:"x-system-file-search",help:"system_wnd_file_search",constructor:function(){this.title=_TR("FILE_SEARCH");this.items=this.sidebar=new Ext.UI.SideBar;this.fbar=["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onApplyClick,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.chbEnabled.setValue(this.service.getEnable());
this.hide()},scope:this,cancelbtn:true}];var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);_s1.FileSearchServiceWindow.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.FileSearchServiceWindow.superclass.afterRender.apply(this,arguments);
this.boxGen=new Ext.Container({cls:"box-gen",items:[this.chbEnabled=new Ext.UI.Checkbox({boxLabel:_TR("ENABLED"),cls:"chb-enabled",listeners:{check:this.onEnableCheck,scope:this}}),this.chbIndexContent=new Ext.UI.Checkbox({boxLabel:_TR("FILE_SEARCH_INDEXING_CONTENT"),disabled:true,cls:"chb-index-content",listeners:{check:this.onIndexContentCheck,scope:this}}),this.chbEnableNumbers=new Ext.UI.Checkbox({style:"margin-left:25px;",boxLabel:_TR("FILE_SEARCH_IGNORE_INDEXING_NUMBERS"),disabled:true}),this.lProgress=
new Ext.Component({html:"&nbsp;"}),this.lIndexed=new Ext.Component({html:"&nbsp;"}),{xtype:"container",cls:"btns",items:[this.bReset=new Ext.UI.Button({text:_TR("FILE_SEARCH_INDEXING_RESET"),width:120,disabled:true,handler:this.onResetClick,scope:this,cls:"btn-reset"}),this.bPause=new Ext.UI.Button({text:_TR("FILE_SEARCH_INDEXING_PAUSE"),width:120,disabled:true,handler:this.onPauseClick,scope:this,cls:"btn-pause"}),{xtype:"component",cls:"x-clear"}]},this.lPerf=new Ext.Component({html:_TR("FILE_SEARCH_INDEXING_PERF")})]});
this.sidebar.addTab(_TR("GENERAL"),this.boxGen);new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.chbIndexContent.wrap.child("label"),style:"margin-left: 10px; display: inline-block;",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("FILE_SEARCH_INDEXING_CONTENT_TYPES")+":<br />1. *.doc / *.docx<br />2. *.ppt / *.pptx<br />3. *.xls / *.xlsx<br />4. *.epub<br />5. *.html<br />6. *.xml<br />7. *.txt"})}}});this.boxShares=new _s1.FileSearchSharesGrid({});
this.sidebar.addTab(_TR("SHARES"),this.boxShares);this.boxAdv=new Ext.Container({cls:"box-adv",items:[this.gridExcludedFiles=new _s1.FileSearchExludeGrid({title:_TR("FILE_SEARCH_EXCLUDED_FILES"),titleAdd:_TR("FILE"),width:280,height:154,cls:"grid"}),this.gridExcludedFolders=new _s1.FileSearchExludeGrid({title:_TR("FILE_SEARCH_EXCLUDED_FOLDERS"),titleAdd:_TR("FOLDER"),width:280,height:154,cls:"grid"})]});this.sidebar.addTab(_TR("SPECIFIC_SETTINGS"),this.boxAdv);this.loadMask=
new Ext.UI.LoadMask(this.bwrap,{frame:false})},show:function(){_s1.FileSearchServiceWindow.superclass.show.apply(this,arguments);this.sidebar.selectTab(0);this.populateService();this.populateStats();this.spServManager.updateFileSearchStats("system-services-filesearch-update-indexstats")},onApply:function(){this.service.putEnable(this.chbEnabled.getValue());this.service.putIndexContent(this.chbIndexContent.getValue());this.service.putIgnoreNumbers(!this.chbEnableNumbers.getValue());this.service.putExcludedFiles(this.gridExcludedFiles.getValue());
this.service.putExcludedFolders(this.gridExcludedFolders.getValue());this.fireEvent("applyclick",this,this.chbEnabled.getValue());this.boxShares.commitShares();this.hide()},onApplyClick:function(){if(this.chbEnableNumbers.getValue()==this.service.getIgnoreNumbers())Ext.UI.MessageBox.confirm({title:this.title,msg:_TR("FILE_SEARCH_ENABLE_NUMBERS_MESSAGE"),fn:function(a){if(a=="yes"){this.service.putNeedResetIndex(true);this.onApply()}},scope:this});else{this.service.putNeedResetIndex(false);this.onApply()}},
onResetClick:function(){Ext.UI.MessageBox.confirm({title:_TR("FILE_SEARCH"),msg:_TR("FILE_SEARCH_INDEXING_RESET_CONFRIM"),fn:function(a){a=="yes"&&this.spServManager.resetFileSearchIndex("system-services-filesearch-reset-index")},scope:this})},onPauseClick:function(){this.stats&&this.stats.getStatus()=="INDEX_STATUS_PAUSED"?this.spServManager.resumeFileSearchIndex("system-services-filesearch-resume-index"):Ext.UI.MessageBox.confirm({title:_TR("FILE_SEARCH"),msg:_TR("FILE_SEARCH_INDEXING_PAUSE_CONFRIM"),
fn:function(a){a=="yes"&&this.spServManager.pauseFileSearchIndex("system-services-filesearch-pause-index")},scope:this})},onEnableCheck:function(a,b){if(b){this.chbIndexContent.enable();this.chbIndexContent.getValue()&&this.chbEnableNumbers.enable()}else{this.chbIndexContent.disable();this.chbEnableNumbers.disable();this.chbIndexContent.setValue(false);this.chbEnableNumbers.setValue(false)}this.gridExcludedFiles.setDisabled(!b);this.gridExcludedFolders.setDisabled(!b);this.boxShares.setDisabled(!b)},
onIndexContentCheck:function(a,b){if(b)this.chbEnableNumbers.enable();else{this.chbEnableNumbers.disable();this.chbEnableNumbers.setValue(false)}},populateService:function(){if(this.service=this.spServManager.getSystemServiceByName("file-search")){var a=this.service.getEnable();this.chbEnabled.setValue(a);this.chbIndexContent.setValue(a&&this.service.getIndexContent());this.chbIndexContent.setDisabled(!a);this.chbEnableNumbers.setValue(a&&!this.service.getIgnoreNumbers());this.chbEnableNumbers.setDisabled(!this.chbIndexContent.getValue());
this.bReset.setDisabled(!a);this.bPause.setDisabled(!a);this.gridExcludedFiles.setValue(this.service.getExcludedFiles());this.gridExcludedFiles.setDisabled(!a);this.gridExcludedFolders.setValue(this.service.getExcludedFolders());this.gridExcludedFolders.setDisabled(!a);this.boxShares.setDisabled(!a);this.boxShares.populateShares()}},populateStats:function(){var a=this.spServManager.getFileSearchStats(),b;if(a&&a!=_4){this.stats=a;b=a.getStatus();if(b=="INDEX_STATUS_IN_PROGRESS"){clearTimeout(this.procUpdateId);
this.procUpdateId=this.spServManager.updateFileSearchStats.defer(this.hidden?6E4:1E4,this.spServManager,["system-services-filesearch-update-indexstats"])}if(this.rendered){if(b=="INDEX_STATUS_IN_PROGRESS")this.lProgress.el.update(String.format(_TR("FILE_SEARCH_INDEXING_PROGRESS")));else b=="INDEX_STATUS_PAUSED"?this.lProgress.el.update(_TR("FILE_SEARCH_INDEXING_PAUSED")):this.lProgress.el.update("&nbsp;");b=="INDEX_STATUS_IN_PROGRESS"||b=="INDEX_STATUS_COMPLETED"||b=="INDEX_STATUS_PAUSED"?this.lIndexed.el.update(String.format(_TR("FILE_SEARCH_INDEXING_RESULTS"),
a.getFilesNumber(),a.getFoldersNumber())):this.lIndexed.el.update("&nbsp;");b=="INDEX_STATUS_PAUSED"?this.bPause.setText(_TR("FILE_SEARCH_INDEXING_RESUME")):this.bPause.setText(_TR("FILE_SEARCH_INDEXING_PAUSE"))}}},processError:function(a,b){if(a!=_5)if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();if(b){b=b.getErrorDetails();var c=_TR(a);_a(_7(_._3.ErrorReporter),"IErrorReporter").report(c,"Code: "+a,_2.ERROR,{windowTitle:_TR("FILE_SEARCH"),title:"",
subTitle:c+"<br />"+b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},_i35:{_o1:function(a,b){if(b=="system-services-filesearch-reset-index"||b=="system-services-filesearch-pause-index"||b=="system-services-filesearch-resume-index")this.loadMask.show()},_o3:function(a,b,c){if(c=="system-services-filesearch-update-indexstats"){this.populateStats();this.processError(a,b,c)}else if(c=="system-services-filesearch-reset-index"){this.loadMask.hide();
clearTimeout(this.procUpdateId);this.procUpdateId=this.spServManager.updateFileSearchStats.defer(3E3,this.spServManager,["system-services-filesearch-update-indexstats"]);this.processError(a,b,c)}else if(c=="system-services-filesearch-pause-index"||c=="system-services-filesearch-resume-index"){this.loadMask.hide();clearTimeout(this.procUpdateId);this.procUpdateId=this.spServManager.updateFileSearchStats.defer(500,this.spServManager,["system-services-filesearch-update-indexstats"]);this.processError(a,
b,c)}}},_i3b:{_o3:function(a,b,c){this.rendered&&c=="system-file-search-commit-shares"&&this.spShareManager.updateShares("system-file-search-update-shares")}}});
_s1.FileSearchExludeGrid=_._1(Ext.Container,{constructor:function(a){_.apply(this,a);this.html='<table style="margin-top: 20px; width: 100%;"><tr><td style="width: 90%;"><h5>'+this.title+'</h5></td><td id="'+(this.bAddId=Ext.id())+'" style="width: 20px;"></td><td id="'+(this.bDeleteId=Ext.id())+'" style="width: 20px;"></td></tr></table><div id="'+(this.gridId=Ext.id())+'" style="max-height: 120px;"></div>';_s1.FileSearchExludeGrid.superclass.constructor.apply(this,
arguments)},afterRender:function(){_s1.FileSearchExludeGrid.superclass.afterRender.apply(this,arguments);this.bAdd=new Ext.UI.RoundButton({cls:"x-frontview-btn-plus-small",renderTo:this.bAddId,listeners:{click:this.onAddClick,scope:this}});this.bDelete=new Ext.UI.RoundButton({cls:"x-frontview-btn-minus-small",renderTo:this.bDeleteId,listeners:{click:this.onDeleteClick,scope:this}});this.grid=new Ext.UI.GridPanel({header:false,autoHeight:true,bufferResize:0,singleSelect:true,trackMouseOver:false,
store:new Ext.data.Store({autoDestroy:true,reader:new Ext.data.ArrayReader({idIndex:0},Ext.data.Record.create(["name"]))}),cm:new Ext.grid.ColumnModel({columns:[{header:_TR("NAME"),id:"name"}]}),renderTo:this.gridId,viewConfig:{emptyText:'<div class="x-frontview-dataview-emptybg" style="font-size: 16px;">'+_TR("EMPTY")+"</div>",deferEmptyText:false,forceFit:true,markDirty:false},listeners:{rowclick:this.onGridRowClick,scope:this}});this.scroller=new Ext.UI.Scroller({dom:Ext.get(this.gridId).dom,type:"vertical"});
this.scroller.reg()},setDisabled:function(a){_s1.FileSearchExludeGrid.superclass.setDisabled.apply(this,arguments);this.bAdd.setDisabled(a);this.grid.setDisabled(a)},setValue:function(a){var b=this.grid.getStore();b.removeAll();for(var c=0;c<a.length;c++)b.add([new Ext.data.Record({name:a[c]})]);this.bDelete.disable()},getValue:function(){for(var a=this.grid.getStore().data.items,b=[],c=0;c<a.length;c++)b.push(a[c].data.name);return b},onGridRowClick:function(){this.bDelete.setDisabled(!this.getSelectedItem())},
onDeleteClick:function(){var a=this.getSelectedItem();this.grid.getStore().remove(a);this.bDelete.disable()},onAddClick:function(){this.wndAdd=this.wndAdd||new _s1.FileSearchExludeGrid.Add({title:this.titleAdd,listeners:{addclick:function(a,b){this.grid.getStore().add([new Ext.data.Record({name:b})])},scope:this}});this.wndAdd.show()},getSelectedItem:function(){var a=this.grid.getSelectionModel().getSelections();return a&&a.length?a[0]:null}});
_s1.FileSearchExludeGrid.Add=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,constructor:function(){this.html='<table><tr><td id="'+(this.lFileId=Ext.id())+'">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>';this.fbar=[{xtype:"uibutton",text:_TR("ADD"),width:100,acceptbtn:true,listeners:{click:this.onAddClick,scope:this}},{xtype:"uibutton",text:_TR("CANCEL"),width:100,cancelbtn:true,listeners:{click:function(){this.hide()},scope:this}}];
_s1.FileSearchExludeGrid.Add.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.FileSearchExludeGrid.Add.superclass.afterRender.apply(this,arguments);this.lFile=Ext.get(this.lFileId);this.tfFile=new Ext.UI.TextField({width:300,renderTo:this.tfNameId})},show:function(){_s1.FileSearchExludeGrid.Add.superclass.show.apply(this,arguments);this.lFile.removeClass("x-controls-prompt-label-error");this.tfFile.reset()},onAddClick:function(){if(this.validate()){this.fireEvent("addclick",
this,this.tfFile.getValue());this.hide()}},validate:function(){var a=false;this.lFile.removeClass("x-controls-prompt-label-error");if(!this.tfFile.getValue()){this.lFile.addClass("x-controls-prompt-label-error");this.tfFile.focus();a=true}return!a}});
_s1.FileSearchSharesGrid=_._1(Ext.Container,{cls:"x-system-file-search-shares",constructor:function(a){_.apply(this,a);_s1.FileSearchSharesGrid.superclass.constructor.apply(this,arguments)},initComponent:function(){_s1.FileSearchSharesGrid.superclass.initComponent.apply(this,arguments);this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager()},afterRender:function(){_s1.FileSearchSharesGrid.superclass.afterRender.apply(this,
arguments);this.scroller=new Ext.UI.Scroller({dom:this.el.dom,type:"vertical"});this.scroller.reg()},setDisabled:function(a){_s1.FileSearchSharesGrid.superclass.setDisabled.apply(this,arguments);this.disabled=a},populateShares:function(){var a=this.dataShares=[],b=this.spShareManager.getShares(),c=true,d;this.el.update("");for(var f=0,e=b.length;f<e;++f){d=_a(b[f],"_i38");var g=d.getIndexed();if(c)c=g;a.push({id:d.getId(),name:d.getName(),checked:g,spShare:d})}a.length>50&&a.unshift({id:"All",
name:_TR("ALL"),checked:c});b="";f=0;for(e=a.length;f<e;++f)b+='<table class="'+this.cls+"-table ui-fwgrid-row"+(f%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+'-cell-chb"><div id="'+(a[f].chbId=Ext.id())+'"></div></td><td class="'+this.cls+'-cell-name"><div class="x-ellipsis" title="'+a[f].name+'">'+a[f].name+"</div></td></tr></table>";this.el.update(b);f=0;for(e=a.length;f<e;++f){b={checked:a[f].checked,disabled:this.disabled,renderTo:a[f].chbId};if(a.length>50&&a[f].id===
"All")b.listeners={check:this.setAllShares,scope:this};else if(a.length>50)b.listeners={check:this.allCheck,scope:this};a[f].chb=new Ext.UI.Checkbox(b)}},setAllShares:function(a,b){a=this.dataShares;for(var c=0,d=a.length;c<d;++c)a[c].chb.getValue()!=b&&a[c].id!=="All"&&a[c].chb.setValue(b)},allCheck:function(){for(var a=this.dataShares,b=true,c=0,d=a.length;c<d;++c)if(b&&a[c].id!=="All")b=a[c].chb.getValue();if(a[0]&&a[0].chb&&a[0].id==="All"){a[0].chb.suspendEvents(false);a[0].chb.setValue(b);a[0].chb.resumeEvents()}},
commitShares:function(){for(var a=this.dataShares,b=[],c=0,d=a.length;c<d;++c)if(a[c].chb.getValue()!=a[c].checked&&a[c].id!=="All"){a[c].spShare.putIndexed(a[c].chb.getValue());b.push(a[c].spShare)}b.length&&this.spShareManager.commitShares("system-file-search-commit-shares",b)}});Ext.namespace("_s1");
_s1.AuditServiceWindow=_._1(_9,Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,cls:"x-system-audit-search",constructor:function(){this.title=_TR("AUDIT_SETTINGS");this.fbar=["->",{xtype:"uibutton",text:_TR("APPLY"),handler:this.onApplyClick,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}];var a=_a(_7(_1.CLSIDS.Device5200),"_i2");
this.spServManager=a.getSystemServiceManager();this.spShareManager=a.getShareManager();_a(this.spServManager,"_i1").Advise(this);_a(this.spShareManager,"_i1").Advise(this);_s1.AuditServiceWindow.superclass.constructor.apply(this,arguments)},afterRender:function(){_s1.AuditServiceWindow.superclass.afterRender.apply(this,arguments);this.sidebar=new Ext.UI.SideBar;this.sidebar.render(this.body);this.boxGen=new _s1.AuditGeneralSettings({});
this.sidebar.addTab(_TR("GENERAL"),this.boxGen);this.boxShares=new _s1.AuditSharesGrid({});this.sidebar.addTab(_TR("SHARES"),this.boxShares);this.boxRet=new _s1.AuditRetentionSettings({});this.sidebar.addTab(_TR("AUDIT_SETTING_RETENTION"),this.boxRet);this.loadMask=new Ext.UI.LoadMask(this.bwrap,{frame:false})},show:function(){_s1.AuditServiceWindow.superclass.show.apply(this,arguments);this.sidebar.selectTab(0);this.populateService()},onApply:function(){this.boxGen.apply(this.service);
this.boxRet.apply(this.service);this.fireEvent("applyclick",this,this.service);this.hide()},onApplyClick:function(){this.boxRet.validation()&&this.onApply()},populateService:function(){if(this.service=this.spServManager.getSystemServiceByName("audit")){var a=this.service.getEnable();this.boxGen.initPage(this.boxShares,this.boxRet,this);this.boxGen.setDisabled(!a);this.boxGen.populateInputValue(this.service);this.boxShares.setDisabled(!a);this.boxShares.populateShares();this.boxRet.setDisabled(!a);
this.boxRet.populateInputValue(this.service)}},_i3b:{_o3:function(a,b,c){c=="system-audit-commit-shares"&&this.spShareManager.updateShares("system-audit-update-shares")}}});
_s1.AuditGeneralSettings=_._1(_9,Ext.Container,{cls:"x-system-audit-general",constructor:function(a){_s1.AuditGeneralSettings.superclass.constructor.call(this,a);this.html='<table cellpadding="0" cellspacing="8"><tr><td id="'+(this.ckEnableAuditId=Ext.id())+'"></td></tr><tr><td id="'+(this.ckAuditLoginId=Ext.id())+'"></td></tr><tr><td><table cellpadding="0" cellspacing="0"><tr><td style="padding-right:5px;" id="'+(this.ckAuditAccessId=Ext.id())+'"></td><td id="'+
(this.cbAuditAccessId=Ext.id())+'"></td></tr></table></td></tr><tr><td >'+_TR("ARCHIVE_DESTINATION")+_TR("COLON")+'</td></tr><tr><td style="padding-left:20px;"><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.pathId=Ext.id())+'"></td><td id="'+(this.browseBtnId=Ext.id())+'"></td></tr></table></td></tr><tr><td style="padding-left:40px;" id="'+(this.compressBtnId=Ext.id())+'"></td></tr></table>'},afterRender:function(){_s1.AuditGeneralSettings.superclass.afterRender.apply(this);
this.ckEnableAudit=new Ext.UI.Checkbox({boxLabel:_TR("ENABLED_AUDIT"),renderTo:this.ckEnableAuditId,listeners:{check:this.onEnableAuditChange,scope:this}});this.ckAuditLogin=new Ext.UI.Checkbox({boxLabel:_TR("AUDIT_LOGIN_ATTEMPTS"),renderTo:this.ckAuditLoginId});this.ckAuditAccess=new Ext.UI.Checkbox({boxLabel:_TR("AUDIT_ACCESS_LEVEL")+_TR("COLON"),renderTo:this.ckAuditAccessId});this.cbAuditAccess=new Ext.UI.ComboBox({width:110,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id",
"text"],data:[["Read/Write",_TR("READ_WRITE")],["Read-Only",_TR("READ_ONLY")],["Write-Only",_TR("WRITE_ONLY")]]}),valueField:"id",displayField:"text",value:"Read/Write",renderTo:this.cbAuditAccessId});this.path=new Ext.UI.TextField({width:200,renderTo:this.pathId,readOnly:true});this.browseButton=new Ext.UI.Button({id:Ext.id(),width:80,style:"margin-left: 3px;",text:_TR("BROWSE"),handler:this.browseFolder,scope:this,renderTo:this.browseBtnId,expandToText:true});this.cbCompress=new Ext.UI.Checkbox({boxLabel:_TR("LOGS_TAB_SETTINGS_AUDIT_COMPRESS"),
renderTo:this.compressBtnId})},onEnableAuditChange:function(a,b){this.setDisabled(!b);this.boxShares.setDisabled(!b);this.boxRet.setDisabled(!b)},initPage:function(a,b,c){this.boxShares=a;this.boxRet=b;this.parent=c},setDisabled:function(a){this.ckAuditLogin.setDisabled(a);this.ckAuditAccess.setDisabled(a);this.cbAuditAccess.setDisabled(a);this.path.setDisabled(a);this.browseButton.setDisabled(a);this.cbCompress.setDisabled(a)},populateInputValue:function(a){this.ckEnableAudit.setValue(a.getEnable()==
"1");this.ckAuditLogin.setValue(a.getAuditLoginAttempts()=="1");this.ckAuditAccess.setValue(a.getAuditAccessLevelC()=="1");this.cbAuditAccess.setValue(a.getAuditAccessLevelT());var b=a.getAuditPath();this.path.setValue(b);this.cbCompress.setValue(a.getAuditCompress()=="1");this.parent.fbar.items.items[1].setDisabled(b=="")},onCancelSelectFile:function(){this.bw.setAuditMode(false);this.bw.un("cancel",this.onCancelSelectFile,this);this.bw.un("selected",this.onSelectFile,this);this.parent.fbar.items.items[1].setDisabled(this.path.getValue()==
"")},onSelectFile:function(a){this.path.setValue(a.path);this.bw.setAuditMode(false);this.parent.fbar.items.items[1].setDisabled(false)},browseFolder:function(){this.bw=this.bw||CComSingleton(_s9.BrowseWindow);this.bw.on("selected",this.onSelectFile,this);this.bw.on("cancel",this.onCancelSelectFile,this);this.bw.show();this.bw.setAuditMode(true)},apply:function(a){a.putEnable(this.ckEnableAudit.getValue());a.putAuditLoginAttempts(this.ckAuditLogin.getValue()?"1":"0");a.putAuditAccessLevelC(this.ckAuditAccess.getValue()?
"1":"0");a.putAuditAccessLevelT(this.cbAuditAccess.getValue());a.putAuditPath(this.path.getValue());a.putAuditCompress(this.cbCompress.getValue()?"1":"0")}});
_s1.AuditSharesGrid=_._1(_9,Ext.Container,{cls:"x-system-file-search-shares",constructor:function(a){_.apply(this,a);_s1.FileSearchSharesGrid.superclass.constructor.call(this,a)},initComponent:function(){_s1.FileSearchSharesGrid.superclass.initComponent.apply(this);this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager()},afterRender:function(){_s1.FileSearchSharesGrid.superclass.afterRender.apply(this);
this.scroller=new Ext.UI.Scroller({dom:this.el.dom,type:"vertical"});this.scroller.reg()},setDisabled:function(a){_s1.FileSearchSharesGrid.superclass.setDisabled.apply(this,arguments);this.disabled=a;for(var b=this.dataShares||[],c=0,d=b.length;c<d;++c)b[c].chb.setDisabled(a)},populateShares:function(){var a=this.dataShares=[],b=this.spShareManager.getShares(),c=true,d,f="";this.el.update("");for(var e=0,g=b.length;e<g;++e){d=_a(b[e],"_i38");if(!d.getSN()){var h=d.getAuditEnabled();
c&&(c=h);a.push({id:d.getId(),name:d.getName(),checked:h,spShare:d})}}a.length>50&&a.unshift({id:"All",name:_TR("ALL"),checked:c});e=0;for(g=a.length;e<g;++e)f+='<table class="'+this.cls+"-table ui-fwgrid-row"+(e%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+'-cell-chb"><div id="'+(a[e].chbId=Ext.id())+'"></div></td><td class="'+this.cls+'-cell-name"><div class="x-ellipsis" title="'+a[e].name+'">'+a[e].name+"</div></td></tr></table>";this.el.update(f);e=0;for(g=a.length;e<
g;++e){b={checked:a[e].checked,disabled:this.disabled,renderTo:a[e].chbId};if(a.length>50&&a[e].id==="All")b.listeners={check:this.setAllShares,scope:this};else if(a.length>50)b.listeners={check:this.allCheck,scope:this};a[e].chb=new Ext.UI.Checkbox(b)}},setAllShares:function(a,b){a=this.dataShares;for(var c=0,d=a.length;c<d;++c)a[c].chb.getValue()!=b&&a[c].id!=="All"&&a[c].chb.setValue(b)},allCheck:function(){for(var a=this.dataShares,b=true,c=0,d=a.length;c<d;++c)if(b&&a[c].id!=="All")b=a[c].chb.getValue();
if(a[0]&&a[0].chb&&a[0].id==="All"){a[0].chb.suspendEvents(false);a[0].chb.setValue(b);a[0].chb.resumeEvents()}},commitShares:function(){for(var a=this.dataShares,b=[],c=0,d=a.length;c<d;++c)if(a[c].chb.getValue()!=a[c].checked&&a[c].id!=="All"){a[c].spShare.putAuditEnabled(a[c].chb.getValue());b.push(a[c].spShare)}b.length&&this.spShareManager.commitShares("system-audit-commit-shares",b)}});
_s1.AuditRetentionSettings=_._1(_9,Ext.Container,{cls:"x-system-audit-retention",constructor:function(a){_s1.AuditRetentionSettings.superclass.constructor.call(this,a);this.html='<table cellpadding="0" cellspacing="5"><tr><td><table cellpadding="0" cellspacing="0"><tr><td style="padding-right:5px;" id="'+(this.lblLinesId=Ext.id())+'"><nobr>'+_TR("LOGS_TAB_SETTINGS_AUDIT_LINES")+_TR("COLON")+'</nobr></td><td style="padding-right:5px;" id="'+(this.linesId=
Ext.id())+'"></td><td id="'+(this.ttLinesId=Ext.id())+'"></td></tr></table></td></tr><tr><td><table cellpadding="0" cellspacing="0"><tr><td style="padding-right:5px;" id="'+(this.ckTimeId=Ext.id())+'"></td><td style="padding-right:5px;" id="'+(this.timeId=Ext.id())+'"></td><td id="'+(this.cbTimeUitId=Ext.id())+'"></td></tr></table></td></tr></table>'},afterRender:function(){_s1.AuditGeneralSettings.superclass.afterRender.apply(this);this.lines=new Ext.UI.TextField({width:75,renderTo:this.linesId,
tooltipCfg:{html:_TR("LOGS_TAB_SETTINGS_AUDIT_LINES_WARNING")},listeners:{change:this.onLinesChange,scope:this}});this.ttLines=new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttLinesId,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("LOGS_TAB_SETTINGS_AUDIT_LINES_TOOLTIP")})},scope:this}});this.ckTime=new Ext.UI.Checkbox({boxLabel:_TR("LOGS_TAB_SETTINGS_AUDIT_TIME")+_TR("COLON"),renderTo:this.ckTimeId});this.time=new Ext.UI.TextField({width:75,renderTo:this.timeId,
tooltipCfg:{html:_TR("LOGS_TAB_SETTINGS_AUDIT_TIME_WARNING")},listeners:{change:this.onTimeChange,scope:this}});this.cbTimeUit=new Ext.UI.ComboBox({width:75,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["Days",_TR("BROWSE_TIMELINE_DAYS")],["Weeks",_TR("BROWSE_TIMELINE_WEEKS")],["Months",_TR("BROWSE_TIMELINE_MONTHS")]]}),valueField:"id",displayField:"text",renderTo:this.cbTimeUitId})},setDisabled:function(a){_s1.AuditRetentionSettings.superclass.setDisabled.apply(this,
arguments);this.lines.setDisabled(a);this.ckTime.setDisabled(a);this.time.setDisabled(a);this.cbTimeUit.setDisabled(a)},populateInputValue:function(a){this.lines.setValue(a.getAuditLines());this.ckTime.setValue(a.getAuditEnableTime()=="1");a=a.getAuditDay();var b="Days",c="";if(a!=""){a=+a;if(a>210){b="Months";c=a/30}else if(a>7)if(a%7==0&&a%30==0||a%30==0){c=a/30;b="Months"}else if(a%7==0){c=a/7;b="Weeks"}else c=a;else c=a;this.time.setValue(c)}this.cbTimeUit.setValue(b)},onLinesChange:function(a,
b){if(b!=""){var c=Ext.fly(this.lblLinesId).dom;c.style.color="";if(a.tooltip.enabled=!/^\d+(?=\.{0,1}\d+$|$)/.test(b))c.style.color="#CC3300";else{b>1E6&&a.setValue(1E6);b<1E3&&a.setValue(1E3)}}},onTimeChange:function(a,b){if(b!=""){var c=Ext.fly(this.ckTime.id).next().dom;c.style.color="";if(a.tooltip.enabled=!/^\d+(?=\.{0,1}\d+$|$)/.test(b))c.style.color="#CC3300";else b>30&&a.setValue(30)}},validation:function(){return!(this.lines.tooltip.enabled||this.time.tooltip.enabled)},apply:function(a){a.putAuditLines(this.lines.getValue());
a.putAuditEnableTime(this.ckTime.getValue()?"1":"0");var b=this.time.getValue(),c=this.cbTimeUit.getValue();if(b!=""){b=+b;switch(c){case "Days":b=b;break;case "Weeks":b*=7;break;case "Months":b*=30;break}}a.putAuditDay(b)}});
_._2("_","_._3","_._3.ShareSubSys","_._3.ShareSubSys.fsbrowse");_._3.ShareSubSys.PromptWindow="ShareSubSys.PromptWindow";_._3.ShareSubSys.ShareLUNTab="ShareSubSys.ShareLUNTab";_._3.ShareSubSys.VolumePanel="ShareSubSys.VolumePanel";_._3.ShareSubSys.MediaVolumePanel="ShareSubSys.MediaVolumePanel";_._3.ShareSubSys.VolumesView="ShareSubSys.VolumesView";_._3.ShareSubSys.VolumeDataView="ShareSubSys.VolumeDataView";
_._3.ShareSubSys.Browse="ShareSubSys.Browse";Ext.namespace("_s2");_s2.ISelected=_._1(IExtNative,{ISelected:{getSelected:function(){return _3},getSelectedIndex:function(){return _3},IsEmpty:function(){return _3},RefreshSelected:function(){return _3}}});var ISelected=_s2.ISelected;
_s2.IDataView=_._1(ISelected,{IDataView:{RefreshData:function(){return _3},AddData:function(){return _3},RemoveData:function(){return _3},SelectData:function(){return _3},IsDataEmpty:function(){return _3},getData:function(){return _3}}});var IDataView=_s2.IDataView;
_s2.IDataViewEvents=_._1(_i6,{IDataViewEvents:{OnItemSelected:function(){return _3},OnItemBrowsed:function(){return _3},OnDataRefreshed:function(){return _3},OnItemDelete:function(){return _3},OnGoBack:function(){return _3}}});var IDataViewEvents=_s2.IDataViewEvents;_._2("_s2");
_s2.ShareLUNTab=_._1(_._3.ShareSubSys.ShareLUNTab,_s0.TabItem,ISystemFrameTab,_i4,{card:true,help:"shares_tab",constructor:function(){_s2.ShareLUNTab.superclass.constructor.apply(this,arguments)},ISystemFrameTab:{getTitle:function(){return _TR("FOLDERS_LUNS")},getCfg:function(){return{id:"shares-tab"}}}});_s0.RegisterTab(_._3.System.Frame,_._3.ShareSubSys.ShareLUNTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s2");
_s2.ShareItem=function(a,b,c,d){this.type=a;this.node=b;(this.hfoptions=_a(b,"IHomeFolderOptions"))&&(this.node=_a(b,"_i38"));this.volume=c;this.snapscount=d;this.maxSize=_a(_7(_._3.ShareSubSys.VolumesView),"IExtNative").getNative().maxSize};
_s2.ShareItem.prototype={getId:function(){return this.type=="NAS"||this.type=="SAN"?this.node.getId():this.type=="HOME"?"home":""},getName:function(){return this.type=="NAS"||this.type=="SAN"?this.node.getName():this.type=="HOME"?_TR("SHARE_HOME_FOLDERS"):""},getLabel:function(){return this.node.getLabel()},getCloneInfo:function(){var a="";if(this.type=="NAS")a=(a=this.node.getCloneState())&&a!=_4?a:"";else if(this.type=="SAN")a=(a=this.node.getCloneState())&&a!=_4?a:"";return a},
getComment:function(){return this.type=="NAS"||this.type=="SAN"?this.node.getComment():""},getPath:function(){return this.type=="NAS"?this.node.getPath():this.type=="SAN"?"/"+this.node.getVolumeId()+"/"+this.node.getName():""},getType:function(){return this.type},getTypeTitle:function(){return this.type=="NAS"?_TR("SHARED_FOLDER"):this.type=="SAN"?_TR("ISCSI_LUN"):this.type=="HOME"?_TR("SHARE_TYPE_SPECIAL"):""},getDlnaType:function(){if(this.type=="NAS"){var a=this.getNode().getProtocolByName("dlna");
if(a&&a!=_4&&a.getAvailable()){var b=a.getMediaType();b=b&&b!=_4?b.toLowerCase():""}return b||""}else return""},getSize:function(){if(this.type=="NAS"){var a=this.getAllocatedSize();if(_.isNumber(a)){a=this.getFreeSize()+a;var b=this.getNode().getRefQuotaMB()*1024;return b&&a>b?b:a}return a}else return this.type=="SAN"?parseInt(this.node.getSize())*1024:""},getFreeSize:function(){return this.type=="NAS"?parseInt(this.node.getAvailableMB())*1024*1024:this.type=="SAN"?this.getSize()-this.getAllocatedSize():
""},getAllocatedSize:function(){if(this.type=="NAS"){var a=this.node.getUsedByDatasetMB()*1,b=this.node.getUsedBySnapshotsMB()*1;if(b===-115||a===-115)return _TR("CALCULATING");return(a+b)*1024*1024}else return this.type=="SAN"?parseInt(this.node.getAllocated())*1024:""},getAvailableSize:function(){if(this.type=="NAS"){var a=this.node.getUsedByDatasetMB()*1;a=a===_4?0:a;var b=this.node.getRefQuotaMB()*1;b=b===_4?0:b;if(b!==0||b===0&&a===-115){if(a!==-115&&b!==-115)return Math.max(b-a,0)*1024*
1024;return _TR("CALCULATING")}else return this.getVolumeAvailable()*1024}else return""},getChartText:function(){var a=this.getAllocatedSize(),b=(!_.isNumber(a)?0:a)+this.getFreeSize();a=(!_.isNumber(a)?0:a)/b*100;a=a>100?100:a;a=3.6*a;switch(this.type){case "NAS":a=Math.round(a/9);return"-"+a*38+"px";case "SAN":a=Math.round(a/19);return"-"+a*64+"px";default:return""}},getProtocolsText:function(){var a=this.getType();if(a=="NAS"||a=="HOME"){a=["cifs","nfs","afp","ftp","rsync","http","dlna","daap"];
for(var b,c="",d=0;d<a.length;++d)if((b=this.getNode().getProtocolByName(a[d]))&&b.getAvailable())c+=(c?", ":"")+_TR(b.getName().toUpperCase());return c?c:""}else if(a=="SAN")return this.getNode().getShared()?"iSCSI":""},getSnapProtection:function(){var a,b;switch(this.type){case "NAS":this.node.getFirstSnapshotCreationTime();this.node.getLastSnapshotCreationTime();case "SAN":a=this.node.getFirstSnapshotCreationTime();b=this.node.getLastSnapshotCreationTime()}return a&&a!=_4&&b&&b!=_4&&b!=
a?_s10.Utils.unixTime(b-a):""},getVolumeId:function(){return this.volume?this.volume.getVolumeId():""},getVolume:function(){return this.volume},getVolumeAvailable:function(){if(this.volumeAvailSize===undefined){var a=this.volume.getAvailable();if(a&&a!=_4)this.volumeAvailSize=parseInt(a)}return this.volumeAvailSize},getNode:function(){return this.node},getMigration:function(){return this.type=="NAS"||this.type=="SAN"?this.node.getMigration():""},getPermissions:function(){if(this.getType()==
"SAN")return{items:[],over:[],overLength:0,type:this.getType()};var a=_a(_7(_1.CLSIDS.Device5200),"_i2"),b=a.getSecurityManager();a=a.getSystemManager();var c=b.getADSMode()=="ads",d=c?[]:b.getUsers(),e=c?[]:b.getGroups(),f=c?[]:b.getRCUsers(),g=c?undefined:_a(a.getCloudOwner(),"_i2z"),h;b=[];a=false;if((h=this.getNode().getProtocolByName("cifs"))&&h.getAvailable()){a=true;this.appendUserGroupProtocol(b,h,d,e,c,f,g)}if((h=this.getNode().getProtocolByName("afp"))&&
h.getAvailable()){a=true;this.appendUserGroupProtocol(b,h,d,e,c,f,g)}if((h=this.getNode().getProtocolByName("ftp"))&&h.getAvailable()){a=true;this.appendUserGroupProtocol(b,h,d,e,c,f,g)}if((h=this.getNode().getProtocolByName("http"))&&h.getAvailable()){a=true;this.appendUserGroupProtocol(b,h,d,e,c,f,g)}if((h=this.getNode().getProtocolByName("nfs"))&&h.getAvailable()){a=true;this.appendNFSProtocol(b,h)}b.sort(function(m,n){var o=m.role-n.role;if(o)return o;o=0;m.read&&o++;m.write&&o++;var p=0;n.read&&
p++;n.write&&p++;if(o=p-o)return o;if(m.name<n.name)return-1;if(m.name>n.name)return 1;return 0});var j=[],k=[];c={};d=false;g=function(m){j.length<6?j.push(m):k.push(m)};h=0;for(var l=b.length;h<l;++h){e=b[h];if(e.role<5)if(e.write){g(e);break}else{if(e.read&&!d){d=true;g(e)}}else if(e.write||e.read&&!d)if(!c[f=e.role+e.type+e.name]){c[f]=true;g(e)}}return{accessible:a,items:j,over:k,overLength:k.length,type:this.getType()}},getData:function(){var a=this.volume.getQuota()=="on",b=this.getNode().getVolumeId()==
"media",c=this.getAllocatedSize(),d=this.getAvailableSize(),e=this.getSize(),f=(!_.isNumber(c)?c:_s10.Utils.fileSize(c))||"-";d=(!_.isNumber(d)?d:_s10.Utils.fileSize(d))||"-";var g=this.snapscount||0;if(this.getType()=="HOME"){g=this.node.getSnapshotScheduleInterval();g=this.node.getCustomSnapshotManagement()?"SNAPSHOT_MANAGEMENT_CUSTOM":this.node.getEnableProtection()?g+"":"never";g=_TR(g.toUpperCase()).toLowerCase()}else if(b)g="-";if(!a&&!b)f=d="-";return{id:this.getId(),name:this.getName(),
label:b?this.getLabel():"",node:this,cloneinfo:this.getCloneInfo(),usedtitle:!_.isNumber(c)?c:_s10.Utils.fileSize(c)+" "+_TR("OF")+" "+(e?_s10.Utils.fileSize(e):_TR("AVAILABLE")),allocation:_s10.Utils.fileSize(e),consumed:f,available:d,type:this.getType(),typetitle:this.getTypeTitle(),protocols:this.getProtocolsText()||"-",snapshots:g,snapprotection:this.getSnapProtection(),ref:this,charth:c&&_.isNumber(c)&&e?Math.round(64*c/e):0,chartback:"13px -"+(64-(c&&_.isNumber(c)&&
e?Math.round(64*c/e):0))+"px",btnid:Ext.id(),shared:this.getType()=="NAS"?!!this.getProtocolsText():true,sharestate:"none",migration:this.getMigration()?"x-sh-panel-share-migration":"",dlnatype:this.getDlnaType(),readydropicon:this.getType()=="NAS"&&(this.getName()+"").toLowerCase()=="readydrop"?"readydropicon":"",readydricon:this.getType()=="NAS"&&this.node.isReadyDRShare(),thicksan:!(this.getType()=="SAN"&&this.node.getSparse()),permissions:this.getPermissions()}},appendNFSProtocol:function(a,b){var c=
b.getDefaultAccess();c={type:"host",role:2,name:"Anyhost",read:c=="ReadOnly"||c=="ReadWrite",write:c=="ReadWrite"};b=b.getHosts();var d,e;a.push(c);for(var f=0,g=b.length;f<g;++f){d=_a(b[f],"_i3f");e={type:"host",role:3,name:d.getHostName(),read:c.read,write:c.write};d=d.getAccess();if(d=="ReadWrite")e.read=e.write=true;else if(d=="ReadOnly")e.read=true;a.push(e)}},appendUserGroupProtocol:function(a,b,c,d,e,f,g){var h=b.getDefaultAccess(),j=b.getAllowGuestAccess()=="1";h={type:"group",
role:4,name:"Everyone",read:h=="ReadOnly"||h=="ReadWrite",write:h=="ReadWrite"};a.push({type:"group",role:1,name:"Anonymous",read:h.read&&j,write:h.write&&j},h);if(e){d=b.getGroups();c=b.getUsers()}this.appendGroupProtocol(a,b,d,h);this.appendUserProtocol(a,b,c,h);if(!e)if(g&&g!=_4&&f)if((c=g.getName())&&c!=_4){a.push({type:"user",role:6,name:c,read:true,write:true});this.appendUserProtocol(a,b,f,h)}},appendGroupProtocol:function(a,b,c,d){for(var e,f,g=0;g<c.length;++g){e=_a(c[g],"_i2v");
f={type:"group",role:5,name:e.getName(),read:d.read,write:d.write};if(e=b.getGroupById(e.getId())){e=e.getAccess();if(e=="ReadWrite")f.read=f.write=true;else if(e=="ReadOnly")f.read=true}a.push(f)}},appendUserProtocol:function(a,b,c,d){for(var e,f,g=0;g<c.length;++g){e=_a(c[g],"_i2z");f={type:"user",role:6,name:e.getName(),read:d.read,write:d.write};if(e.getName()=="admin")f.read=f.write=true;else if(e=b.getUserById(e.getId())){e=e.getAccess();if(e=="ReadWrite")f.read=f.write=true;else if(e==
"ReadOnly")f.read=true}a.push(f)}}};Ext.namespace("_s2");
_s2.AuditShareSetting=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,updatesCount:0,constructor:function(a){this.title=_TR("DESTROY_DATASET");this.html=this.getHtml();this.fbar=this.getFooter();this.spServManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);_s2.AuditShareSetting.superclass.constructor.call(this,a)},getHtml:function(){return'<table cellpadding="0" cellspacing="5"><tr><td><nobr>'+
_TR("DESTROY_SHARE_WARNING_MESSAGE_1")+"</nobr></td></tr><tr><td>"+_TR("DESTROY_SHARE_WARNING_MESSAGE_2")+'</td></tr><tr><td><table cellpadding="0" cellspacing="10"><tr><td id="'+(this.pathId=Ext.id())+'"></td><td id="'+(this.browseBtnId=Ext.id())+'"></td></tr></table></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("OK"),width:100,acceptbtn:true});a.on("click",this.onOKClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},
this);return["->",a,b]},afterRender:function(a){_s2.AuditShareSetting.superclass.afterRender.call(this,a);this.path=new Ext.UI.TextField({width:300,renderTo:this.pathId,readOnly:true});this.browseButton=new Ext.UI.Button({id:Ext.id(),width:80,style:"margin-left: 3px;",text:_TR("BROWSE"),handler:this.browseFolder,scope:this,renderTo:this.browseBtnId,expandToText:true});this.maskProgress=new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},
onCancelSelectFile:function(){this.bw.setAuditMode(false);this.bw.browse.setAuditSharePath(undefined);this.bw.un("cancel",this.onCancelSelectFile,this);this.bw.un("selected",this.onSelectFile,this)},onSelectFile:function(a){this.path.setValue(a.path);this.bw.setAuditMode(false);this.bw.browse.setAuditSharePath(undefined)},browseFolder:function(){this.bw=this.bw||CComSingleton(_s9.BrowseWindow);this.bw.on("selected",this.onSelectFile,this);this.bw.on("cancel",this.onCancelSelectFile,this);this.bw.show();
this.bw.setAuditMode(true);this.bw.browse.setAuditSharePath(this.auditService.getAuditPath())},afterShow:function(){_s2.AuditShareSetting.superclass.afterShow.call(this);this.spServManager.updateSystemServiceInfo("sync-update-audit-services")},onOKClick:function(){this.auditService.putAuditPath(this.path.getValue());this.spServManager.commitSystemService("system-service-audit-commit");this.fireEvent("DestroySelectedShare")},populateInputVal:function(){this.auditService=this.spServManager.getSystemServiceByName("audit");
this.path.setValue(this.auditService.getAuditPath())},showProgress:function(){this.updatesCount||this.maskProgress&&this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress&&this.maskProgress.hide()},_i35:{_o1:function(a,b){b=="sync-update-audit-services"&&this.showProgress();return _5},_o2:function(a,b){switch(b.toString()){case "sync-update-audit-services":this.populateInputVal();break;case "system-service-audit-commit":this.hide();
break}return _5},_o3:function(a,b,c){c=="sync-update-audit-services"&&this.hideProgress();return _5}}});Ext.namespace("_s2");
_s2.VolumesView=_._1(_._3.ShareSubSys.VolumesView,_s0.TabItem,ISystemFrameTab,_i4,_i3v,_i3b,_i4l,{inspector:false,selectedShareId:undefined,requestedShareId:undefined,newShareRequest:false,help:"shares_tab_shares",constructor:function(){_s2.VolumesView.superclass.constructor.call(this);this.tabView=_a(_7(_._3.System.Frame),"IExtNative");this.sharesTab=_a(_7(_._3.ShareSubSys.ShareLUNTab),
"IExtNative");this.on("tabinitialize",this.TabInitialize,this);this.on("tabactivate",this.TabActivate,this)},initComponent:function(){this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td  id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';this.content.addClass("ui-alt");var a=this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2");this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,
"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.spFSManager=a.getFSManager();_a(this.spFSManager,"_i1").Advise(this);this.spSnapshotManager=a.getZFSSnapshotsManager();_a(this.spSnapshotManager,"_i1").Advise(this);this.spSystemManager=a.getSystemManager();_a(this.spSystemManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,
"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_s2.VolumesView.superclass.initComponent.call(this);this.emptyMessage=new Ext.BoxComponent({html:_TR("SHARES_NO_VOLUMES"),cls:"x-shares-view-panel-novolumes",hidden:true});this.content.on("afterrender",function(){this.emptyMessage.render(this.content.el)},this);this.createShareMenu()},oninitialized:function(){this.createFilters();this.createButtons();this.refresh()},refresh:function(){this.zfsVolumesManager.UpdateVolumes("shares-volumes-update-zfsvolumes")},
populateVolumes:function(a){this.updateVolumePanels(a);this.updateVolumesFilter(a)},updateVolumePanels:function(a){var b=_a(this,"IPanelList"),c,d,e,f;b.removeAll();if(a.length){this.emptyMessage.hide();for(var g=0;g<a.length;++g){c=_a(a[g],"_i4o");if(c.getVolumeName()){d=c.getEjectable()?_a(_7(_._3.ShareSubSys.MediaVolumePanel),"IPanelItem"):_a(_7(_._3.ShareSubSys.VolumePanel),"IPanelItem");e=_a(d,"IExtNative").getNative();
e.setVolume(c);(e.prevPanel=f)&&(f.nextPanel=d);f=e;b.addPanel(d);d.refresh()}}}else this.emptyMessage.show()},updateVolumesFilter:function(a){var b,c=new Array(["-1",_TR("ALL_VOLUMES"),null]);this.volumesCombo.store.removeAll();for(var d=0;d<a.length;++d){b=_a(a[d],"_i4o");b.getEjectable()?c.push(["media","media",b]):c.push([b.getGuid(),b.getVolumeName(),b])}this.volumesCombo.store.loadData(c);this.volumesCombo.onSelect(this.volumesCombo.store.data.get(0),0)},populateShares:function(a,
b){for(var c,d={},e,f,g={},h=this.maxSize=0;h<a.length;++h){c=_a(a[h],"_i38");this.maxSize=Math.max(this.maxSize,parseInt(c.getAvailableMB())*1024*1024);this.maxSize=Math.max(this.maxSize,parseInt(c.getUsedMB())*1024*1024)}for(h=0;h<b.length;++h){c=_a(b[h],"_i1j");this.maxSize=Math.max(this.maxSize,parseInt(c.getSize())*1024)}for(h=0;h<a.length;++h){c=_a(a[h],"_i38");e=c.getVolumeId();d[e]||(d[e]=[]);f=this.zfsVolumesManager.getVolumeById(e);d[e].push(new _s2.ShareItem("NAS",
c,f,c.getCountOfContinuousSnapshots()+c.getCountOfManualSnapshots()));e=g[e]=g[e]||{usedds:0,usedsnap:0,usedrefreserv:0};f=c.getUsedByDatasetMB();var j=c.getUsedBySnapshotsMB();c=c.getUsedByRefReservatonMB();f=f==_4?0:f;j=j==_4?0:j;c=c==_4?0:c;e.usedds+=f*1024*1024;e.usedsnap+=j*1024*1024;e.usedrefreserv+=c*1024*1024}if(this.homeFolderOptions)if((e=_a(this.homeFolderOptions,"_i38").getVolumeId())&&e!=_4){f=this.zfsVolumesManager.getVolumeById(e);d[e]||(d[e]=[]);d[e].push(new _s2.ShareItem("HOME",
this.homeFolderOptions,f))}for(var k in d)d[k]=d[k].sort(function(l,m){l=l.getName().toLowerCase();m=m.getName().toLowerCase();return l<m?-1:l>m?1:0});for(h=0;h<b.length;++h){c=_a(b[h],"_i1j");e=c.getVolumeId();d[e]||(d[e]=[]);f=this.zfsVolumesManager.getVolumeById(e);d[e].push(new _s2.ShareItem("SAN",c,f,c.getCountOfContinuousSnapshots()+c.getCountOfManualSnapshots()));e=g[e]=g[e]||{usedds:0,usedsnap:0,usedrefreserv:0};f=c.getUsedByDataset();j=c.getUsedBySnapshots();c=c.getUsedByRefReservation();
f=f==_4?0:f;j=j==_4?0:j;c=c==_4?0:c;e.usedds+=f*1024;e.usedsnap+=j*1024;e.usedrefreserv+=c*1024}this.loadSharesToPanels(d,g);this.typesCombo.setValue("ALL");this.tfSearch.setValue("");this.shareItems=d},populateHomeFolderOptions:function(){var a=this.spSystemManager.getHomeFolderOptions();if(a&&a!=_4)this.homeFolderOptions=a;else delete this.homeFolderOptions},loadSharesToPanels:function(a,b){this.selectedPanel=undefined;for(var c=_a(this,"IPanelList").getPanelItems(),d,e,f=
0;f<c.length;++f){d=_a(c[f],"IExtNative").getNative();d.on("addshare",this.onAddShare,this);d.on("selectshare",this.onSelectShare,this);d.on("itementer",this.onEnter,this);d.on("adduser",this.onShareAddUser,this);d.on("itemoptions",this.onShareOptions,this);d.on("itemrendered",this.onShareRendered,this);d.on("itemcontextmenu",this.onShareContextMenu,this);d.on("recoverclick",function(h,j){this.onRecoverClick(j)},this);var g=d.getVolume().getVolumeId();e=a[g]||[];d.loadShares(e,this.usbFolders);
e=b[g]||{usedds:0,usedsnap:0,usedrefreserv:0};d.updateVolumeLabels(e.usedds,e.usedsnap,e.usedrefreserv)}},onEnter:function(a,b){a=b.getType();if(a=="NAS"||a=="HOME"){this.shareMenu.hide.defer(100,this.shareMenu);var c=_a(_7(_._3.ShareSubSys.Browse),"IExtNative");if(c){this.sharesTab.getNative().selectTab(c);c.getNative().loadPath(a=="NAS"?b.getNode().getPath():"/"+b.getNode().getVolumeId()+"/home")}}},onSelectShare:function(a,b){a&&this.setActiveShare(a,b)},onShareAddUser:function(a,
b){this.showPermissions(b)},onShareOptions:function(a,b,c){if(b){this.reviewShareMenu(b);if(c=c||a.dataview.getSelectedNodes()[0])this.shareMenu.show.defer(100,this.shareMenu,[c])}},onShareRendered:function(a,b){if(this.requestedShareId){this.selectedShareId=this.requestedShareId;this.requestedShareId=undefined}if(this.selectedShareId==b.getId()){a.selectShareById(b.getId());(a=this.wndPermissions)&&!a.hidden&&a.share&&a.share.getId()==b.getId()&&a.show(b)}},onShareContextMenu:function(a,b,c){if(b){this.reviewShareMenu(b);
this.shareMenu.showAt.defer(100,this.shareMenu,[c.getXY()])}},onCloneClick:function(a){if(!this.wndRecover){this.wndRecover=CComSingleton(_s9.RecoverWindow);this.wndRecover.show()}var b=this.wndRecover.init(this.spDevice);this.wndRecover.hide();var c={path:"/",fsprovider:b.fsprovider};if(a)c=a.type=="SAN"?{path:a.getPath(),lun:a.node,fsprovider:b.fsprovider}:a.type=="HOME"?{path:a.getPath(),fsprovider:b.fsprovider}:{path:a.getPath(),share:a,fsprovider:b.fsprovider};b.fsprovider.getLastSnapshot(c,
this.refresh)},onRecoverClick:function(a){if(!this.wndRecover){this.wndRecover=CComSingleton(_s9.RecoverWindow);this.wndRecover.show()}var b=this.wndRecover.init(this.spDevice);this.wndRecover.show();if(a)if(a.type=="SAN")this.wndRecover.loadArgsToBrowse({path:a.getPath(),lun:a.node,fsprovider:b.fsprovider});else a.type=="HOME"?this.wndRecover.loadArgsToBrowse({path:a.getPath(),fsprovider:b.fsprovider}):this.wndRecover.loadArgsToBrowse({path:a.getPath(),share:a,fsprovider:b.fsprovider});else this.wndRecover.loadArgsToBrowse({path:"/",
fsprovider:b.fsprovider})},onAddShare:function(a,b){this.showDataSetWindow(a,b)},onRemoveShare:function(a){var b=this.getDestroyDatasetWindow();b.show();b.load(a,this.shareItems)},removeShare:function(a){var b=_a(a,"_i38")?"NAS":"SAN";if(b=="NAS"){this.selectedShare=a;this.spShareManager.removeShare(a,"shares-volumes-remove-share")}else b=="SAN"&&this.spShareManager.removeLUN(a,"shares-volumes-remove-lun");this.selectedShareId=undefined},migrateShare:function(a,b){var c=a.getType();b.getVolumeId();
a.getName();if(c=="NAS")this.spShareManager.migrateShare(a.getNode(),b.getVolumeId(),"shares-volumes-migrate-share");else c=="SAN"&&this.spShareManager.migrateLUN(a.getNode(),b.getVolumeId(),"shares-volumes-migrate-lun")},ISystemFrameTab:{getTitle:function(){return _TR("SHARES")},getCfg:function(){return{id:"shares-shares-tab",cls:"x-sh-shares-btn"}}},onResize:function(a,b,c,d){_s2.VolumesView.superclass.onResize.call(this,a,b,c,d);this.mask&&this.resizeMask()},TabInitialize:function(){this.oninitialized();
FocusManager.reg(this.content.el,{keydown:function(a){if(a.target.tagName!="INPUT"&&this.selectedPanel){var b=this.selectedPanel.dataview;switch(a.getKey()){case a.UP:b.onkeyup(a);break;case a.DOWN:b.onkeydown(a);break;case a.LEFT:b.onkeyleft(a);break;case a.RIGHT:b.onkeyright(a);break}}}},this);this.mask.on("hide",function(){this.isActiveTab()&&FocusManager.setActive(this.content.el)},this);this.mask.on("show",function(){this.isActiveTab()&&FocusManager.setActive(this.mask.mask)},this)},TabActivate:function(){this.mask.config.hidden?
FocusManager.setActive(this.content.el):FocusManager.setActive(this.mask.mask);this.mask&&!this.mask.hidden&&_a(this.mask,"ISyncWindowResizeEvent").OnResize();return _5},isActiveTab:function(){return this.tabView.__s.desktopPanel.layout.activeItem==this.sharesTab.getNative()&&this.sharesTab.__s.content.layout.activeItem==this},_i3v:{_o1:function(a,b){if(!(b=="sync-update-zfsvolumes"&&!this.rendered)){if(b=="shares-volumes-update-zfsvolumes"||b=="sync-update-zfsvolumes")this.mask.show();
return _5}},_o2:function(a,b){if(!(b=="sync-update-zfsvolumes"&&!this.rendered)){if(b=="shares-volumes-update-zfsvolumes"||b=="sync-update-zfsvolumes"){a=[];var c=this.zfsVolumesManager.getActiveVolumes();for(b=0;b<c.length;b++)a.push(c[b]);c=this.zfsVolumesManager.getEjectableVolumes();for(b=0;b<c.length;b++)a.push(c[b]);this.populateVolumes(a);this.spShareManager.getDefaultSettingBitRotProtection()==_4?this.spShareManager.UpdateDefaultSettings("shares-volumes-update-defsettings"):this.spShareManager.updateShares("shares-volumes-update-shares")}else b==
"shares-volumes-update-zfsvolumes-silent"&&this.spShareManager.updateShares("shares-volumes-update-shares-silent");return _5}},_o3:function(a,b,c){if(a!=_5){if(c=="sync-update-zfsvolumes"&&!this.rendered)return;if(c=="shares-volumes-update-zfsvolumes"||c=="sync-update-zfsvolumes")this.mask.hide()}return _5}},_i3b:{_o1:function(a,b){if(this.rendered){if(b=="shares-volumes-update-shares"||b=="shares-volumes-update-luns"||b=="sync-update-shares"||b=="sync-update-luns"||
b=="shares-volumes-add-share"||b=="shares-volumes-add-lun"||b=="shares-volumes-remove-share"||b=="shares-volumes-remove-lun"||b=="shares-volumes-expand-lun"||b=="shares-volumes-commit-lun"||b=="shares-volumes-commit-share"||b=="shares-propwnd-commit-lun"||b=="shares-propwnd-commit-share"||b=="shares-volumes-migrate-share"||b=="shares-volumes-migrate-lun"||b=="shares-volumes-reset-share")this.mask.show();return _5}},_o2:function(a,b){if(this.rendered){b=="shares-volumes-update-defsettings"&&
this.spShareManager.updateShares("shares-volumes-update-shares");if(b=="shares-volumes-update-shares"||b=="sync-update-shares")this.spSystemManager.UpdateHomeFolderOptions("shares-volumes-update-homefolderoptions");if(b=="shares-volumes-update-luns"||b=="sync-update-luns"||b=="shares-volumes-update-luns-silent"||b=="system-shares-update-luns"){if(b=="shares-volumes-update-luns-silent"||b=="system-shares-update-luns"){a=[];for(var c=this.zfsVolumesManager.getActiveVolumes(),d=0;d<c.length;d++)a.push(c[d]);
c=this.zfsVolumesManager.getEjectableVolumes();for(d=0;d<c.length;d++)a.push(c[d]);this.populateVolumes(a)}a=this.spShareManager.getShares();d=this.spShareManager.getLUNS();this.populateShares(a,d)}if(b=="shares-volumes-add-share"||b=="shares-volumes-remove-share"||b=="shares-volumes-commit-share"||b=="shares-propwnd-commit-share"||b=="shares-volumes-migrate-share"){this.zfsVolumesManager.UpdateVolumes("sync-update-zfsvolumes");this.necessarySyncShares=true;this.spServManager.updateSystemServiceInfo("sync-update-services")}if(b==
"shares-volumes-add-lun"||b=="shares-volumes-remove-lun"||b=="shares-volumes-commit-lun"||b=="shares-propwnd-commit-lun"||b=="shares-volumes-expand-lun"||b=="shares-volumes-migrate-lun"){this.zfsVolumesManager.UpdateVolumes("sync-update-zfsvolumes");this.necessarySyncLuns=true}b=="shares-volumes-update-shares-silent"&&this.spShareManager.updateLUNS("shares-volumes-update-luns-silent");return _5}},_o3:function(a,b,c){if(this.rendered){if(c=="shares-volumes-update-luns"||c=="sync-update-luns"||
c=="shares-volumes-reset-share"||c=="system-shares-update-luns")this.mask.hide();if(a!=_5&&a!=E_PENDING)if(c=="shares-volumes-update-shares"||c=="shares-volumes-update-luns"||c=="sync-update-shares"||c=="sync-update-luns"||c=="shares-volumes-add-share"||c=="shares-volumes-add-lun"||c=="shares-volumes-remove-share"||c=="shares-volumes-remove-lun"||c=="shares-volumes-expand-lun"||c=="shares-volumes-commit-lun"||c=="shares-volumes-commit-share"||c=="shares-propwnd-commit-lun"||c=="shares-propwnd-commit-share"||
c=="shares-volumes-migrate-share"||c=="shares-volumes-migrate-lun"||c=="shares-volumes-reset-share"){this.mask.hide();this.newShareRequest=false;if(!this.isManagerOwner(c))return;if(c=="shares-volumes-commit-lun"||c=="shares-propwnd-commit-lun"||c=="shares-volumes-add-lun"||c=="shares-volumes-expand-lun"||c=="shares-volumes-remove-lun")this.spShareManager.updateLUNS("shares-volumes-update-luns");if(c=="shares-volumes-commit-share"||c=="shares-propwnd-commit-share"||c=="shares-volumes-add-share")this.spShareManager.updateShares("shares-volumes-update-shares");
if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();if(a=="1004050000"&&c=="shares-volumes-remove-share"){if(!this.AuditShareSettingWnd)this.AuditShareSettingWnd=new _s2.AuditShareSetting;this.AuditShareSettingWnd.on("DestroySelectedShare",function(){this.spShareManager.removeShare(this.selectedShare,"shares-volumes-remove-share");delete this.selectedShare},this);this.AuditShareSettingWnd.show()}else{b=b.getErrorDetails();b=_TR(a)+"<br />"+b;if(c=="shares-volumes-remove-lun")b=
_TR(a);_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("SHARE_FAILED"),title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}return _5}},OnSHMigrated:function(){this.zfsVolumesManager.UpdateVolumes("shares-volumes-update-zfsvolumes-silent");return _5},OnSHChangePermission:function(a){var b=_a(_7(_._3.System.Frame),"IExtNative").getNative().alarmbar;
_a(b,"IAlarmReporter").reportAlarm(String.format("{0} '{1}'.",_TR("SHARE_RESET_PERMISSIONS_COMPLETE"),a),b.ALARM_INFO);this.zfsVolumesManager.UpdateVolumes("shares-volumes-update-zfsvolumes-silent");return _5}},_i4l:{_o1:function(a,b){b=="shares-volumes-add-snapshot"&&this.rendered&&this.mask.show();return _5},_o2:function(a,b){if(b=="shares-volumes-add-snapshot"&&this.rendered){this.spShareManager.updateShares("sync-update-shares");Ext.UI.MessageBox.info({title:_TR("NEW_SNAPSHOT"),
msg:_TR("SNAPSHOT_SUCCESSFULLY_CREATED")})}b=="shares-recovery-remove-snapshot"&&this.rendered&&this.spShareManager.updateShares("sync-update-shares");b=="shares-recovery-rollback-snapshot"&&this.rendered&&this.spShareManager.updateShares("sync-update-shares");return _5},_o3:function(a,b,c){if(a!=_5&&this.rendered){c=="shares-volumes-add-snapshot"&&this.mask.hide();if(!this.isManagerOwner(c)&&c&&c.cmd!="timeline-change-snapshots")return;if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();
b=b.getErrorDetails();b=_TR(a)+"<br />"+b;_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a,_2.ERROR,{windowTitle:_TR("SNAPSHOT_FAILED"),title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5}},_i45:{_o1:function(a,b){if(b=="shares-volumes-update-homefolderoptions"||b=="shares-propwnd-commit-hfoptions"||b=="shares-volumes-update-rcowner")this.mask.show();return _5},_o3:function(a,
b,c){if(c=="shares-propwnd-commit-hfoptions"){this.spSystemManager.UpdateHomeFolderOptions("shares-volumes-update-homefolderoptions");this.spServManager.updateSystemServiceInfo("sync-update-services")}else if(c=="shares-volumes-update-homefolderoptions"){this.populateHomeFolderOptions();this.spSystemManager.updateCloudOwner("shares-volumes-update-rcowner")}else c=="shares-volumes-update-rcowner"&&this.spSecurityManager.updateADSMode("shares-volumes-update-mode");if(c=="shares-propwnd-commit-hfoptions"||
c=="shares-volumes-update-homefolderoptions"||c=="shares-volumes-update-rcowner")if(a!=_5&&a!=E_PENDING){this.mask.hide();if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();b=b.getErrorDetails();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("SHARE_FAILED"),title:"",subTitle:_TR(a)+"<br />"+b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5}},_iz:{_o2:function(a,
b){if(b=="share-update-media-volumes"){a=_a(a,"_iy").getVolumes();this.usbFolders=[];_.each(a,function(c){c=_a(c,"_i11");this.usbFolders.push({folderName:c.getMountPoint().replace("media","").replace(/\//g,""),readOnly:c.getReadOnly()=="1"})},this);this.spSecurityManager.updateUsersWithAdmin("shares-volumes-update-users",true,false)}}},_i2y:{_o1:function(a,b){if(b=="shares-volumes-update-groups"||b=="shares-volumes-update-users"||b=="shares-volumes-update-mode"||
b=="shares-volumes-update-rcusers")this.mask.show()},_o3:function(a,b,c){c=="sync-update-security"&&this.rendered&&this.refresh();if(c=="shares-volumes-update-mode")this.spSecurityManager.getADSMode()=="user"?this.spSecurityManager.updateGroups("shares-volumes-update-groups"):this.spShareManager.updateLUNS(this.necessarySyncLuns?"sync-update-luns":"shares-volumes-update-luns");else if(c=="shares-volumes-update-groups")this.spSecurityManager.UpdateRCUsers("shares-volumes-update-rcusers");else if(c==
"shares-volumes-update-rcusers")this.spFSManager.updateVolumes("share-update-media-volumes");else if(c=="shares-volumes-update-users")this.spShareManager.updateLUNS(this.necessarySyncLuns?"sync-update-luns":"shares-volumes-update-luns");else c=="security-defuser-commit-defuserprofile"&&this.rendered&&this.spSystemManager.UpdateHomeFolderOptions("shares-volumes-update-homefolderoptions");if(c=="shares-volumes-update-groups"||c=="shares-volumes-update-users"||c=="shares-volumes-update-mode"||c=="shares-volumes-update-rcusers")if(a!=
_5&&a!=E_PENDING){this.mask.hide();if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();b=b.getErrorDetails();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("SHARE_FAILED"),title:"",subTitle:_TR(a)+"<br />"+b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}},createFilters:function(){this.volumesCombo=new Ext.UI.ComboBox({width:110,typeAhead:true,mode:"local",triggerAction:"all",
store:new Ext.data.ArrayStore({fields:["id","text","ref"]}),valueField:"id",displayField:"text"});this.volumesCombo.on("select",this.onVolumeSelect,this);this.typesCombo=new Ext.UI.ComboBox({style:"margin-left:10px;",width:110,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ALL",_TR("ALL")],["NAS",_TR("NAS")],["SAN",_TR("SAN")]]}),value:"ALL",valueField:"id",displayField:"text",listeners:{select:this.onTypeSelect,scope:this}});this.tfSearch=
new Ext.UI.TextField({cls:"x-shares-search-field",width:150,enableKeyEvents:true,emptyText:_TR("FILTER_BY_NAME"),listeners:{keyup:this.onSearchClick,specialkey:this.onSpecialKeyPress,change:this.onSearchClick,scope:this}});this.searchBtn=new Ext.UI.RoundButton({iconCls:"x-frontview-btn-search",cls:"x-shares-search-btn",width:15,height:15});this.searchBtn.on("click",this.onSearchClick,this)},createButtons:function(){(new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",
html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),listeners:{afterrender:function(a){a.el.on("click",function(){this.onRefreshClick()},this)},scope:this}})).render(this.buttonsId)},createShareMenu:function(){this.itemBrowse=new Ext.menu.Item({text:_TR("BROWSE"),ctCls:"x-frontview-icon-browse",commandName:"browse"});this.itemRecovery=new Ext.menu.Item({text:_TR("RECOVERY"),ctCls:"x-frontview-icon-rollback",commandName:"recovery"});this.itemClone=new Ext.menu.Item({text:_TR("CLONE"),
ctCls:"x-browse-menu-icon-clone",commandName:"clone"});this.itemOpen=new Ext.menu.Item({text:_TR("OPEN"),ctCls:"x-frontview-icon-open",commandName:"open"});this.itemMap=new Ext.menu.Item({text:_TR("MAP_DRIVE"),ctCls:"x-frontview-icon-mapdrive",commandName:"mapdrive"});this.itemSnapshot=new Ext.menu.Item({text:_TR("SNAPSHOT"),ctCls:"x-frontview-icon-snapshot",commandName:"snapshot"});this.itemDelete=new Ext.menu.Item({text:_TR("DELETE"),ctCls:"x-frontview-icon-delete",commandName:"delete"});this.itemEject=
new Ext.menu.Item({text:_TR("EJECT"),ctCls:"x-frontview-icon-eject",commandName:"eject"});this.itemSettings=new Ext.menu.Item({text:_TR("SETTINGS"),ctCls:"x-frontview-icon-settings",commandName:"settings"});this.shareMenu=new Ext.UI.Menu({cls:"x-share-menu",items:[this.itemBrowse,this.itemRecovery,this.itemClone,this.itemSnapshot,this.itemDelete,this.itemEject,this.itemSettings],listeners:{itemclick:function(a){var b=this.shareMenu.share;if(b)switch(a.commandName){case "browse":this.shareMenu.hide.defer(100,
this.shareMenu);if(a=_a(_7(_._3.ShareSubSys.Browse),"IExtNative")){this.sharesTab.getNative().selectTab(a);_a(this.shareMenu.share,"IHomeFolderOptions")?a.getNative().loadPath("/"+b.getVolumeId()+"/home"):a.getNative().loadPath(b.getPath())}break;case "recovery":this.shareMenu.hide.defer(100,this.shareMenu);this.onRecoverClick(b);break;case "clone":this.shareMenu.hide.defer(100,this.shareMenu);this.onCloneClick(b);break;case "open":break;case "share":this.fireEvent("sharingclick",
this,b);break;case "delete":this.onRemoveShare(b);break;case "snapshot":this.showSnaphotWindow(b);break;case "eject":_a(_7(_1.CLSIDS.Device5200),"_i2").ejectVolume("/"+b.getId(),"eject_usb_volume");break;case "settings":this.showProperties.defer(100,this,[b]);break}},show:function(){this.selectedPanel&&this.selectedPanel.addClass("x-sh-panel-volume-under-options")},hide:function(){this.selectedPanel&&this.selectedPanel.removeClass("x-sh-panel-volume-under-options")},scope:this}})},
reviewShareMenu:function(a){this.shareMenu.share=a.node||a;var b=a.volume?a.volume.getEjectable():false,c=!!_a(this.shareMenu.share,"IHomeFolderOptions"),d=!!_a(this.shareMenu.share,"_i38");this.itemBrowse.setVisible(c||d);this.itemRecovery.setVisible(!c&&d&&!b);this.itemRecovery.setDisabled(this.shareMenu.share&&this.shareMenu.share.getFirstSnapshotCreationTime&&!this.shareMenu.share.getFirstSnapshotCreationTime());this.itemClone.setVisible(a.node.isReadyDRShare()===true);this.itemClone.setDisabled(a.node.isReadyDRShare()===
true&&this.shareMenu.share&&this.shareMenu.share.getFirstSnapshotCreationTime&&!this.shareMenu.share.getFirstSnapshotCreationTime());this.itemEject.setVisible(b);this.itemDelete.setVisible((a.getType()=="NAS"||a.getType()=="SAN")&&!b);this.itemSnapshot.setVisible((a.getType()=="NAS"&&!a.node.isReadyDRShare()||a.getType()=="SAN")&&!b);this.itemOpen.setVisible(!b&&d);this.itemMap.setVisible(!b&&d)},onRefreshClick:function(){this.refresh()},onVolumeSelect:function(a,b,c){a=b.data.id;b=_a(this,
"IPanelList").getPanelItems();if(a=="-1"){for(c=0;c<b.length;++c)_a(b[c],"IExtNative").getNative().show();this.content.removeClass("x-sh-panel-white")}else{var d=null;for(c=0;c<b.length;++c){d=_a(b[c],"IExtNative").getNative();a=="media"&&d.getVolume().getEjectable()||d.getVolume().getGuid()==a?d.show():d.hide()}this.content.addClass("x-sh-panel-white")}},onTypeSelect:function(){this.setFilter(this.typesCombo.getValue(),this.tfSearch.getValue())},onSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ESC:this.tfSearch.setValue("");
return false}},onSearchClick:function(){this.setFilter(this.typesCombo.getValue(),this.tfSearch.getValue())},setFilter:function(a,b){a=a=="ALL"?"":a;b=b||"";for(var c=_a(this,"IPanelList").getPanelItems(),d,e=0;e<c.length;++e){d=_a(c[e],"IExtNative").getNative();d.dataview.store.filter([{property:"type",value:new RegExp(a)},{property:"name",value:new RegExp(b)}])}},showDataSetWindow:function(a,b){var c=this.getAddDatasetWindow();c.setVolume(a);c.show();c.clear();b&&c.onTypeSelected(b)},
getAddDatasetWindow:function(){if(!this.addDataWindow){this.addDataWindow=new _s2.AddDataSet;this.addDataWindow.on("addsharerequest",this.onAddShareRequest,this)}return this.addDataWindow},getDestroyDatasetWindow:function(){if(!this.destroyDataWindow){this.destroyDataWindow=new _s2.DestroyDataSet;this.destroyDataWindow.on("destroysharerequest",function(a,b){this.removeShare(b)},this)}return this.destroyDataWindow},onAddShareRequest:function(a,b,c,d){this.requestedShareId=d.getVolumeName()+
"/"+c;this.newShareRequest=b},onUpdateShareNameRequest:function(a,b){this.requestedShareId=b.getVolumeId()+"/"+b.getName()},showSnaphotWindow:function(a){var b=this.getAddSnapshotWindow();b.show();b.load(a);b.clear()},getAddSnapshotWindow:function(){if(!this.addSnapshotWindow)this.addSnapshotWindow=new _s2.AddSnapshot;return this.addSnapshotWindow},shareToScsi:function(a){a.getNode().putShared(true);this.spShareManager.commitLUN(a.getNode(),"shares-volumes-commit-lun")},showProperties:function(a){this.wndDataSetSettings=
this.wndDataSetSettings||new _s2.DataSetSettings;this.wndDataSetSettings.show();this.wndDataSetSettings.clear();if(_a(a,"IHomeFolderOptions"))this.wndDataSetSettings.loadHFOptions(a);else if(_a(a,"_i38"))this.wndDataSetSettings.loadShare(a);else _a(a,"_i1j")&&this.wndDataSetSettings.loadLun(a)},showPermissions:function(a){this.wndPermissions=this.wndPermissions||new _s2.Permissions;this.wndPermissions.show(a)},showAccessWnd:function(){this.wndShareAccess=
this.wndShareAccess||new _s2.ShareAccess;this.wndShareAccess.show();this.wndShareAccess.load(this.selectedShare)},showFileFolderWnd:function(){this.wndShareFileFolder=this.wndShareFileFolder||new _s2.ShareFileFolder;this.wndShareFileFolder.show();this.wndShareFileFolder.load(this.selectedShare)},setActiveShare:function(a,b){this.clearSelections(a);if(b){this.selectedShareId=b.getId();this.selectedShare=b;this.selectedPanel=a;a=a.dataview.getSelectedNodes();Ext.get(a[0]).scrollIntoView(this.content.el,
true,true);this.scroller.resize()}},clearSelections:function(a){for(var b=_a(this,"IPanelList").getPanelItems(),c,d=0;d<b.length;++d){c=_a(b[d],"IExtNative").getNative();c!=a&&c.dataview.clearSelections(true)}},onMigrateClick:function(a,b){var c=b.share,d=b.volume;c.getVolumeId()!=d.getVolumeName()&&Ext.UI.MessageBox.confirm({title:_TR("DATASET_MIGRATION"),msg:String.format(_TR("SHARES_DATASET_MIGRATION_CONFIRM"),c.getName(),d.getVolumeName()),icon:Ext.UI.MessageBox.WARNING,fn:function(e){e==
"yes"&&this.migrateShare(c,d)},scope:this})},showCommunicationError:function(){_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR("COMM_ERROR"),"",_2.ERROR,{title:"",subTitle:_TR("COMM_ERROR"),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})},isManagerOwner:function(a){return typeof a=="string"&&a.indexOf("shares-volumes-")==0}});
_s0.RegisterTab(_._3.ShareSubSys.ShareLUNTab,_._3.ShareSubSys.VolumesView,"ISystemFrame","ISystemFrameTab");_._2("_s2");
_s2.Browse=_._1(_._3.ShareSubSys.Browse,_s0.TabItem,ISystemFrameTab,_i4,ISystemFrameEvents,{footer:false,preventscroll:true,help:"shares_tab_browse",constructor:function(){_s2.Browse.superclass.constructor.apply(this,arguments);this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2");this.tabView=_a(_7(_._3.System.Frame),"IExtNative");this.sharesTab=_a(_7(_._3.ShareSubSys.ShareLUNTab),
"IExtNative");this.on("tabinitialize",this.TabInitialize,this);this.on("tabactivate",this.TabActivate,this);this.tabView.getNative().on("tabactivate",function(){this.browse&&this.browse.doLayout(false,false)},this);this.sharesTab.getNative().on("tabactivate",function(){this.browse&&this.browse.doLayout(false,false)},this)},initComponent:function(){this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td  id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';
_s2.Browse.superclass.initComponent.apply(this,arguments)},getBorderItems:function(){var a=_s2.Browse.superclass.getBorderItems.apply(this,arguments);this.content.layout=new Ext.layout.FitLayout;this.content.add(this.browse=new _s9);this.browse.on("newwndclick",function(b,c,d,e){window.open("./browse.html#path="+encodeURIComponent(c)+(e?"&rec=1":""))},this);return a},refresh:function(){this.browse.refresh()},loadPath:function(a){this.browse.loadPath(a)},ISystemFrameTab:{getTitle:function(){return _TR("BROWSE")},
getCfg:function(){return{id:"shares-browse-tab",cls:"x-sh-browse-btn",notSelectable:false}}},TabInitialize:function(){new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),renderTo:this.buttonsId,listeners:{afterrender:function(c){c.el.on("click",function(){this.refresh()},this)},scope:this}});var a=this.spDevice.getNetworkManager().getHostname(),b=_a(this.spDevice.getSystemManager().getSysInfo(),
"_i43");b=(b=b&&b!=_4?b.getModel():"")&&b!=_4?b:"";this.browse.populateDevices([{name:a&&a!=_4?a:_TR("DEVICE"),id:a&&a!=_4?a:_TR("DEVICE"),model:b,spDevice:this.spDevice}]);this.browse.doLayout(false,false)},TabActivate:function(){this.browse.doLayout(false,false);this.browse.refresh()}});_s0.RegisterTab(_._3.ShareSubSys.ShareLUNTab,_._3.ShareSubSys.Browse,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s2");
_s2.VolumePanel=_._1(_._3.ShareSubSys.VolumePanel,_s0.BasePanel,IPanelItem,{panelCls:"x-sh-panel-volume",help:"shares_panel_volume",constructor:function(a){this.title="&#160;";this.cls=this.panelCls;_s2.VolumePanel.superclass.constructor.call(this,a);this.addEvents("addshare","selectshare","sharemenu","itementer","adduser","itemoptions","itemrendered","itemcontextmenu")},setVolume:function(a){this.volume=a},getVolume:function(){return this.volume},getSelectedShare:function(){var a=
this.dataview.getSelectedRecords();if(a.length>0)return a[0].data.ref;return null},loadShares:function(a){var b=[];this.dataview.store.removeAll();for(var c=0;c<a.length;++c)b.push(a[c].getData());clearTimeout(this.procIdLoadToStore);this.itemsToLoad=b;this.loadShareToStore();a.length==0?this.emptyMsg.removeClass("x-hide-display"):this.emptyMsg.addClass("x-hide-display")},loadShareToStore:function(){if(this.itemsToLoad.length){var a=this.itemsToLoad[0];this.itemsToLoad=this.itemsToLoad.slice(1);this.dataview.store.loadData(a,
true);this.procIdLoadToStore=this.loadShareToStore.defer(10,this);this.fireEvent("itemrendered",this,a.node)}},selectShareById:function(a){a=this.dataview.store.find("id",a);if(a>-1){this.dataview.select(a);return true}return false},onReady:function(){this.renderTop();this.renderDataView()},updateVolumeLabels:function(a,b,c){this.volumeIsrescanning=false;this.amountData=a||this.amountData||0;this.amountSnap=b||this.amountSnap||0;this.amountRefRes=c||this.amountRefRes||0;if(this.volume){a=this.volume.getQuota()==
"on";this.updateTitle(this.volume.getVolumeName());this.title.set({title:this.volume.getVolumeName()});c=this.volume.getAvailable();b=parseInt(this.volume.getCapacity());c=parseInt(c);var d=parseInt(this.volume.getUsedBySnapshotKB());if(d*1===-115)this.volumeIsrescanning=true;var e=this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize(1024*c,0.01)+" "+_TR("FREE_OF")+" "+_s10.Utils.fileSize(1024*b,0.01);this.bottomPlace.child(".x-sh-panel-volume-consumedbar-label").update(e);
this.bottomPlace.child(".x-sh-panel-volume-consumedbar-graph").set({title:this.volumeIsrescanning?_TR("CALCULATING"):String.format("{0}: {1}\n",_TR("VOLUME_DATA"),_s10.Utils.fileSize((b-c-d)*1024,0.01))+(a?String.format("{0}: {1}\n",_TR("SNAPSHOTS"),_s10.Utils.fileSize(d*1024,0.01)):"")+String.format("{0}: {1}",_TR("VOLUME_FREE"),_s10.Utils.fileSize(c*1024,0.01))});this.bottomPlace.child(".x-sh-panel-volume-consumedbar-data").setWidth((this.volumeIsrescanning?0:Math.round(100*
(b-c-d)/b))+"%");this.bottomPlace.child(".x-sh-panel-volume-consumedbar-snaps").setWidth((this.volumeIsrescanning?0:Math.round(100*d/b))+"%");this.bottomPlace.child(".x-sh-panel-volume-consumedbar-legend .x-sh-panel-volume-consumedbar-data").parent().set({title:String.format("{0}: {1}",_TR("VOLUME_DATA"),this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize((b-c-d)*1024,0.01))});this.bottomPlace.child(".x-sh-panel-volume-consumedbar-legend .x-sh-panel-volume-consumedbar-snaps").parent().set({title:String.format("{0}: {1}",
_TR("SNAPSHOTS"),this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize(d*1024,0.01))}).setDisplayed(a);this.bottomPlace.child(".x-sh-panel-volume-consumedbar-legend .x-sh-panel-volume-consumedbar-free").parent().set({title:String.format("{0}: {1}",_TR("VOLUME_FREE"),this.volumeIsrescanning?_TR("CALCULATING"):_s10.Utils.fileSize(c*1024,0.01))});this.content.removeClass("x-sh-panel-volume-without-quota");a||this.content.addClass("x-sh-panel-volume-without-quota")}},renderTop:function(){var a=
Ext.id();this.content.update('<div id="'+a+'" class="x-sh-panel-toolbar"></div><div class="ui-fwgrid"><div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset"><table cellspacing="0" cellpadding="0" border="0"><tr class="x-grid3-hd-row"><td class="x-grid3-hd x-grid3-cell x-grid3-td-0 x-grid3-cell-first" style="width:20%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on"><div class="x-grid3-hd-inner-wrap">'+_TR("NAME")+'</div></div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-1" style="width:15%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+
_TR("PROTOCOLS")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-1 x-sh-panel-col-snapshots" style="width:12%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+_TR("SNAPSHOTS")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-2 x-sh-panel-only-vol-with-quota" style="width:10%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+_TR("AVAILABLE")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-3 x-sh-panel-only-vol-with-quota" style="width:12%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+
_TR("CONSUMED")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-4 x-sh-panel-col-permissions" style="width:31%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+_TR("PERMISSIONS")+'<div class="x-sh-panel-share-item-perm"><div title="'+_TR("READ_ONLY")+'">'+_TR("READ_ONLY")+'</div><div class="rw" title="'+_TR("READ_WRITE")+'">'+_TR("READ_WRITE")+'</div></div></div></td></tr></table></div></div></div></div><table id="'+(this.emptyMsgId=Ext.id())+'" class="x-sh-panel-share x-sh-panel-share-empty x-hide-display" cellpadding="0" cellspacing="0" border="0"><tr><td><div class="x-grid-empty"><div class="x-frontview-dataview-emptybg">'+
_TR("NO_SHARES")+"</div></div></td></tr></table>");this.bottomPlace.update('<div class="x-sh-panel-volume-consumedbar"><div class="x-sh-panel-volume-consumedbar-graph"><div class="x-sh-panel-volume-consumedbar-data"></div><div class="x-sh-panel-volume-consumedbar-snaps"></div><div class="x-clear"></div></div><div class="x-sh-panel-volume-consumedbar-label x-ellipsis"></div><div class="x-sh-panel-volume-consumedbar-legend"><div class="x-sh-panel-volume-consumedbar-legend-row x-ellipsis" title="'+_TR("VOLUME_DATA")+
'"><div class="x-sh-panel-volume-consumedbar-data"></div><span>'+_TR("VOLUME_DATA")+'</span></div><div class="x-sh-panel-volume-consumedbar-legend-row x-ellipsis" title="'+_TR("SNAPSHOTS")+'"><div class="x-sh-panel-volume-consumedbar-snaps"></div><span>'+_TR("SNAPSHOTS")+'</span></div><div class="x-sh-panel-volume-consumedbar-legend-row x-ellipsis" title="'+_TR("VOLUME_FREE")+'"><div class="x-sh-panel-volume-consumedbar-free"></div><span>'+_TR("VOLUME_FREE")+"</span></div></div></div>");new Ext.UI.Button({cls:"x-sh-panel-volume-recover",
width:135,text:_TR("SNAPSHOTS"),expandToText:true,listeners:{click:this.onRecoverClick,scope:this},renderTo:a});this.addShare=new Ext.UI.Button({cls:"x-sh-panel-volume-addshare",width:135,text:_TR("NEW_SHARE"),expandToText:true,acceptbtn:true,listeners:{click:function(){this.fireEvent("addshare",this.getVolume(),"NAS")},scope:this},renderTo:a});this.emptyMsg=Ext.get(this.emptyMsgId)},renderDataView:function(){if(this.volume){this.dataview=new _s2.VolumeDataView;this.dataview.on("selectionchange",
this.onSelectionChange,this);this.dataview.on("dblclick",this.onItemEnter,this);this.dataview.on("addclick",this.onAddClick,this);this.dataview.on("optionsclick",this.onOptionsClick,this);this.dataview.on("contextmenu",this.onContextMenu,this);this.dataview.render(this.content);if(this.prevPanel&&this.prevPanel.dataview){this.dataview.prevDataview=this.prevPanel.dataview;this.prevPanel.dataview.nextDataview=this.dataview}}},onSelectionChange:function(a){if(a){a=a.getSelectedRecords();this.fireEvent("selectshare",
this,a.length>0?a[0].data.ref:null)}},onItemEnter:function(a){if(a){a=a.getSelectedRecords();this.fireEvent("itementer",this,a.length>0?a[0].data.ref:null)}},onAddClick:function(a,b,c){if(a){a=a.getSelectedRecords();this.fireEvent("adduser",this,a.length>0?a[0].data.ref:null,c)}},onOptionsClick:function(a,b,c){if(a){a=a.getSelectedRecords();this.fireEvent("itemoptions",this,a.length>0?a[0].data.ref:null,c)}},onContextMenu:function(a,b,c,d){d.preventDefault();a.select(b);a=a.getSelectedRecords();this.fireEvent("itemcontextmenu",
this,a.length>0?a[0].data.ref:null,d)},onRecoverClick:function(){var a=this.dataview.getSelectedRecords();this.fireEvent("recoverclick",this,a.length>0?a[0].data.ref:null)}});Ext.namespace("_s2");
_s2.MediaVolumePanel=_._1(_._3.ShareSubSys.MediaVolumePanel,_s0.BasePanel,IPanelItem,{panelCls:"x-sh-panel-volume x-sh-panel-mediavolume",constructor:function(){this.title=_TR("EXTERNAL_STORAGES");this.cls=this.panelCls;_s2.MediaVolumePanel.superclass.constructor.apply(this,arguments);this.addEvents("selectshare","sharemenu","adduser","itemoptions","itemrendered","itemcontextmenu")},setVolume:function(a){this.volume=a},getVolume:function(){return this.volume},
getSelectedShare:function(){var a=this.dataview.getSelectedRecords();if(a.length>0)return a[0].data.ref;return null},loadShares:function(a,b){var c=[],d,e=b||[];this.dataview.store.removeAll();for(b=0;b<a.length;++b){d=a[b].getData();var f=$_.find(e,function(g){return g.folderName==d.name});f&&(d.readydricon=f.readOnly);c.push(d)}this.dataview.store.loadData(c);a.length==0?this.emptyMsg.removeClass("x-hide-display"):this.emptyMsg.addClass("x-hide-display");b=0;for(c=a.length;b<c;++b)this.fireEvent("itemrendered",
this,a[b])},selectShareById:function(a){a=this.dataview.store.find("id",a);if(a>-1){this.dataview.select(a);return true}return false},onReady:function(){this.renderTop();this.renderDataView()},updateVolumeLabels:function(a,b,c){this.amountData=a||this.amountData||0;this.amountSnap=b||this.amountSnap||0;this.amountRefRes=c||this.amountRefRes||0},renderTop:function(){this.content.update('<div class="ui-fwgrid"><div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset"><table cellspacing="0" cellpadding="0" border="0"><tr class="x-grid3-hd-row"><td class="x-grid3-hd x-grid3-cell x-grid3-td-0 x-grid3-cell-first" style="width:20%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on"><div class="x-grid3-hd-inner-wrap">'+
_TR("NAME")+'</div></div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-1" style="width:15%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+_TR("PROTOCOLS")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-1" style="width:12%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+_TR("SNAPSHOTS")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-2" style="width:10%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+_TR("AVAILABLE")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-3" style="width:12%"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+
_TR("CONSUMED")+'</div></td><td class="x-grid3-hd x-grid3-cell x-grid3-td-4"><div class="x-grid3-hd-inner x-grid3-hd-0" unselectable="on">'+_TR("PERMISSIONS")+'<div class="x-sh-panel-share-item-perm"><div title="'+_TR("READ_ONLY")+'">'+_TR("READ_ONLY")+'</div><div class="rw" title="'+_TR("READ_WRITE")+'">'+_TR("READ_WRITE")+'</div></div></div></td></tr></table></div></div></div></div><table id="'+(this.emptyMsgId=Ext.id())+'" class="x-sh-panel-share x-sh-panel-share-empty x-hide-display" cellpadding="0" cellspacing="0" border="0"><tr><td><div class="x-grid-empty"><div class="x-frontview-dataview-emptybg">'+
_TR("NO_SHARES")+"</div></div></td></tr></table>");this.emptyMsg=Ext.get(this.emptyMsgId)},renderDataView:function(){if(this.volume){this.content.addClass(this.panelCls+"-media");this.dataview=new _s2.VolumeDataView;this.dataview.on("selectionchange",this.onSelectionChange,this);this.dataview.on("dblclick",this.onItemEnter,this);this.dataview.on("addclick",this.onAddClick,this);this.dataview.on("optionsclick",this.onOptionsClick,this);this.dataview.on("contextmenu",this.onContextMenu,
this);this.dataview.render(this.content);if(this.prevPanel&&this.prevPanel.dataview){this.dataview.prevDataview=this.prevPanel.dataview;this.prevPanel.dataview.nextDataview=this.dataview}}},onSelectionChange:function(a){if(a){a=a.getSelectedRecords();this.fireEvent("selectshare",this,a.length>0?a[0].data.ref:null)}},onItemEnter:function(a){if(a){a=a.getSelectedRecords();this.fireEvent("itementer",this,a.length>0?a[0].data.ref:null)}},onAddClick:function(a,b,c){if(a){a=a.getSelectedRecords();this.fireEvent("adduser",
this,a.length>0?a[0].data.ref:null,c)}},onOptionsClick:function(a,b,c){if(a){a=a.getSelectedRecords();this.fireEvent("itemoptions",this,a.length>0?a[0].data.ref:null,c)}},onContextMenu:function(a,b,c,d){d.preventDefault();a.select(b);a=a.getSelectedRecords();this.fireEvent("itemcontextmenu",this,a.length>0?a[0].data.ref:null,d)}});_._2("_s2");
_s2.VolumeDataView=Ext.extend(Ext.UI.ChainDataView,{overClass:"x-sh-panel-share-over",selectedClass:"x-sh-panel-share-selected",itemSelector:"table.x-sh-panel-share",singleSelect:true,keyHandlers:false,constructor:function(a){_s2.VolumeDataView.superclass.constructor.call(this,a);this.addEvents("addclick","optionsclick");this.store=new Ext.data.Store({autoDestroy:true,reader:new Ext.data.JsonReader({idProperty:"id",fields:["id","name","cloneinfo","allocation","available","consumed",
"type","typetitle","snapshots","snapprotection","snapshottype","ref","charth","chartback","shared","migration","consumedtitle","usedtitle","usedvalue","protocols","dlnatype","readydropicon","readydricon","thicksan","permissions"]})});this.tpl=new Ext.XTemplate('<tpl for=".">','<table class="x-sh-panel-share {migration}" cellpadding="0" cellspacing="0" border="0">',"<tr>",'<td style="width:20%">','<div class="x-sh-panel-share-item">',"<tpl if=\"type == 'NAS'\">","<div ",'class="x-sh-panel-share-item-icon x-sh-recovery-grid-cell-icon-share ',
'<tpl if="!!dlnatype">x-sh-recovery-grid-cell-icon-dlna-{dlnatype}</tpl> ','<tpl if="!!readydropicon">x-sh-recovery-grid-cell-icon-readydropicon</tpl>','<tpl if="!!readydricon">x-sh-recovery-grid-cell-icon-readydricon</tpl>','">',"</div>","</tpl>","<tpl if=\"type == 'SAN'\">",'<div class="x-sh-panel-share-item-icon x-sh-recovery-grid-cell-icon-san <tpl if="!!thicksan">x-sh-recovery-grid-cell-icon-san-thick</tpl>"></div>',"</tpl>","<tpl if=\"type == 'HOME'\">",'<div class="x-sh-panel-share-item-icon x-sh-recovery-grid-cell-icon-home"></div>',
"</tpl>",'<tpl if="!shared"><div class="x-sh-panel-share-nas-notshared" title="'+_TR("NOT_SHARED")+'"></div></tpl>','<tpl if="!!readydricon"><div class="x-sh-panel-share-nas-readonly" title="'+_TR("READONLY")+'"></div></tpl>','<div class="x-sh-panel-share-item-name x-ellipsis">','<span title="{name}">{name}</span>','<tpl if="!!cloneinfo">','<br/><span class="x-sh-panel-share-item-name-origin" title="'+_TR("ORIGIN")+': {cloneinfo}">'+_TR("ORIGIN")+": {cloneinfo}</span>","</tpl>","</div>","</div>",
"</td>",'<td style="width:15%">',"{protocols}","</td>",'<td style="width:12%" class="x-sh-panel-col-snapshots">','<div class="x-ellipsis" title="{snapshots}<tpl if="!!snapprotection">'+String.format(" ({snapprotection} {0})",_TR("PROTECTION")).toLowerCase()+'</tpl>">',"{snapshots}",'<tpl if="!!snapprotection">',String.format(" ({snapprotection} {0})",_TR("PROTECTION")).toLowerCase(),"</tpl>","</div>","</td>",'<td style="width:10%" class="x-sh-panel-only-vol-with-quota">','<div class="x-ellipsis" title="{available}">{available}</div>',
"</td>",'<td style="width:12%" class="x-sh-panel-only-vol-with-quota">','<div class="x-ellipsis" title="{consumed}"><tpl if="!!readydricon && consumed==\'0\'"">-</tpl>','<tpl if="!readydricon">{consumed}</tpl>',"</div>","</td>",'<td style="width:31%" class="x-sh-panel-share-item-perm x-sh-panel-col-permissions">','<tpl for="permissions.items">','<div <tpl if="write">class="rw" title="'+_TR("READ_WRITE")+'"</tpl> <tpl if="read && !write">title="'+_TR("READ_ONLY")+'"</tpl>>{name}</div>',"</tpl>","<tpl if=\"!permissions.items.length && permissions.type!='SAN'\">",
'<div class="ns">'+_TR("NOT_SHARED")+"</div>","</tpl>","<tpl if=\"!permissions.items.length && permissions.type=='SAN'\">",'<div class="ns">'+_TR("ISCSI")+"</div>","</tpl>",'<tpl if="permissions.over.length">','<tpl for="permissions">','<div class="over" title="<tpl for="over">{name}\n</tpl>">+{overLength}</div>',"</tpl>","</tpl>",'<div class="x-sh-panel-share-item-btns"></div></td>',"</tr>","</table>","</tpl>")},updateIndexes:function(a,b){_s2.VolumeDataView.superclass.updateIndexes.call(this,
a,b);a=a;for(b=this.store.data.items.length;a<b;++a)this.createRowButtons(a)},createRowButtons:function(a){var b=Ext.get(this.all.elements[a]),c=this.store.data.items[a],d=b?Ext.get(b.query(".x-sh-panel-share-item-btns")[0]):undefined;if(d){var e=c&&c.data.id=="home",f=c&&!e&&c.data.permissions.accessible,g=Ext.id();b=Ext.id();d.update('<a id="'+g+'" class="x-sh-panel-share-item-add'+(!f?" x-sh-panel-share-item-add-disabled":"")+(e||c.data.type=="SAN"?" x-hide-display":"")+'" href="#">+</a><a id="'+
b+'" class="x-sh-panel-share-item-options" href="#"><i></i></a>');(c=Ext.get(g))&&c.on("click",function(j){j.preventDefault();if(f){this.select(a);this.fireEvent("addclick",this,a,h)}},this);var h=Ext.get(b);h&&h.on("click",function(j){j.preventDefault();this.select(a);this.fireEvent("optionsclick",this,a,h)},this)}}});Ext.namespace("_s2");
_s2.AddDataSet=_._1(Ext.UI.Window,{modal:true,width:650,resizable:false,minimizable:false,maximizable:false,cls:"x-sh-wndadddataset",help:"shares_wnd_add_ds",constructor:function(a){this.newShareTitle=_TR("NEW_SHARE");this.newLUNTitle=_TR("NEW_LUN");this.title=this.newShareTitle;this.html=this.getHtml();this.fbar=this.getFooter();_s2.AddDataSet.superclass.constructor.call(this,a);this.addEvents("addsharerequest")},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spShareManager=a.getShareManager();this.spSystemManager=a.getSystemManager();this.spSecurityManager=a.getSecurityManager();this.isLunOver8TBSupported=this.spSystemManager.getSupportLunOver8TB()=="1";_s2.AddDataSet.superclass.initComponent.apply(this,arguments);this.on("show",this.onWShow,this);this.volumeCombo=new Ext.UI.ComboBox({width:310,mode:"local",triggerAction:"all",listeners:{collapse:function(b){this.setVolume(b.getValue())},scope:this},store:new Ext.data.ArrayStore({fields:["id",
"text"],data:[]}),valueField:"id",displayField:"text"})},getHtml:function(){function a(b,c){return'<table class="'+c+'-protocols-item" cellpadding="0" cellspacing="0"><tr><td id="'+b+'"></td></tr></table>'}return'<div><div class="'+this.cls+'-type x-hide-display" id="'+(this.segmNodeId=Ext.id())+'"></div><table cellpadding="0" cellspacing="0"><tr id="'+(this.volumeRowId=Ext.id())+'"><td class="x-sh-text">'+_TR("VOLUME")+':</td><td id="'+(this.volumeNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text '+
this.cls+'-text-name">'+_TR("NAME")+':</td><td id="'+(this.nameNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text '+this.cls+'-text-desc">'+_TR("DESCRIPTION")+':</td><td id="'+(this.descNodeId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-chbline"><td class="x-sh-text"></td><td id="'+(this.bitRotProtectionNodeId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-chbline"><td class="x-sh-text"></td><td><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.compressionNodeId=Ext.id())+'" style="padding-left: 30px;"></td><td id="'+
(this.compressionSizeNoteId=Ext.id())+'"></td></tr></table></td></tr><tr class="'+this.cls+'-chbline"><td class="x-sh-text"></td><td id="'+(this.autoDefragId=Ext.id())+'"></td></tr><tr><td class="x-sh-text">'+_TR("SNAPSHOT_SCHEDULE")+':</td><td id="'+(this.intervalNodeId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-nas-row"><td style="height:10px" colspan="2"></td></tr><tr class="'+this.cls+"-nas-row "+this.cls+'-chbline"><td valign="top"><div class="x-sh-text" style="line-height: 36px;">'+_TR("PROTOCOL")+
":<div></td><td>"+a(this.cifsNodeId=Ext.id(),this.cls)+a(this.nfsNodeId=Ext.id(),this.cls)+a(this.afpNodeId=Ext.id(),this.cls)+a(this.dlnaNodeId=Ext.id(),this.cls)+'<div class="x-clear"></div>'+a(this.ftpNodeId=Ext.id(),this.cls)+a(this.rsyncNodeId=Ext.id(),this.cls)+a(this.httpNodeId=Ext.id(),this.cls)+a(this.daapNodeId=Ext.id(),this.cls)+'</td></tr><tr class="'+this.cls+'-nas-row"><td style="height:10px" colspan="2"></td></tr><tr class="'+this.cls+'-nas-row"><td class="x-sh-text '+this.cls+'-text-nassize">'+
_TR("SIZE")+':</td><td id="'+(this.boxQuotasId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-san-row"><td style="height:10px" colspan="2"></td></tr><tr class="'+this.cls+'-san-row"><td class="x-sh-text">'+_TR("PROVISION")+':</td><td id="'+(this.provisionNodeId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-san-row"><td class="x-sh-text '+this.cls+'-text-sansize">'+_TR("SIZE")+':</td><td><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.sizeSanTxtNodeId=Ext.id())+'" style="padding-right:5px"></td><td id="'+
(this.sizeSanCmbNodeId=Ext.id())+'"></td></tr></table></td></tr><tr class="'+this.cls+'-san-row" id="'+(this.maxSizeSanNodeId=Ext.id())+'"><td></td><td style="padding-top: 5px;">'+_TR("MAXIMUM_SIZE")+': <span></span></td></tr><tr class="'+this.cls+'-san-row"><td class="x-sh-text">'+_TR("BLOCK_SIZE_LUN")+':</td><td id="'+(this.blockSizeId=Ext.id())+'"></td></tr><tr class="'+this.cls+'-san-row" id="'+(this.boxAlertThresholdId=Ext.id())+'"><td class="x-sh-text">'+_TR("SAN_THIN_ALERT_THRESHOLD")+':</td><td><table cellpadding="0" cellspacing="0"><tr><td id="'+
(this.sfAlertThresholdId=Ext.id())+'" style="padding-right:5px"></td><td>%</td></tr></table></td></tr></table></div>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("CREATE"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s2.AddDataSet.superclass.afterRender.call(this,a);this.nameText=new Ext.UI.TextField({width:310,renderTo:this.nameNodeId});
this.descText=new Ext.UI.TextField({width:310,maxLength:390,renderTo:this.descNodeId});this.compressionCheck=new Ext.UI.Checkbox({boxLabel:_TR("COMPRESSION"),renderTo:this.compressionNodeId});this.compressionSizeNote=new Ext.BoxComponent({html:_TR("SAN_COMPRESSION_LIMIT"),style:"padding-top: 2px; padding-left: 5px;",renderTo:this.compressionSizeNoteId});this.bitRotProtectionCheck=new Ext.UI.Checkbox({boxLabel:_TR("SHARE_BITROTPROTECTION"),listeners:{check:this.onBitRotProtectionCheck,scope:this},
renderTo:this.bitRotProtectionNodeId});this.autoDefragCheck=new Ext.UI.Checkbox({boxLabel:_TR("SHARE_DEFRAG"),listeners:{check:this.onAutoDefragCheck,scope:this},renderTo:this.autoDefragId});this.intervalCombo=new Ext.UI.ComboBox({width:310,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["never",_TR("NEVER")],["hourly",_TR("HOURLY")],["daily",_TR("DAILY")],["weekly",_TR("WEEKLY")]]}),valueField:"id",displayField:"text",renderTo:this.intervalNodeId,
listeners:{select:this.onProtectionIntervalSelect,scope:this}});this.volumeCombo.render(this.volumeNodeId);this.provisionCombo=new Ext.UI.ComboBox({width:310,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[[true,_TR("THIN")],[false,_TR("THICK")]]}),valueField:"id",displayField:"text",listeners:{select:function(b,c){this.maxSizeSanNode.setDisplayed(!c.data.id);this.boxAlertThreshold.setDisplayed(!!c.data.id);this.syncShadow();this.updateCompression()},
scope:this},renderTo:this.provisionNodeId});this.blockSizeCombo=new Ext.UI.ComboBox({width:310,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["512","512 bytes"],["4096","4 KB"]]}),value:"512",valueField:"id",displayField:"text",renderTo:this.blockSizeId});this.sizeSanTxt=new Ext.UI.TextField({width:230,renderTo:this.sizeSanTxtNodeId});this.sizeSanCmb=new Ext.UI.ComboBox({width:75,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id",
"text"],data:[["MB",_TR("MB")],["GB",_TR("GB")],["TB",_TR("TB")]]}),valueField:"id",displayField:"text",listeners:{select:function(b,c){b=this.maxSize;switch(c.data.id){case "TB":b/=1024;case "GB":b/=1024;case "MB":b/=1024}b=Math.floor(b*1E3)/1E3;if(c.data.id=="MB")b=Math.floor(b);this.maxSizeToCompare=b;this.maxSizeSanNode.last().last().update(String.format(this._8tbLimited?"{0} {1}":"{0} {1} (90{2})",b,c.data.text,_TR("%_OF_FREE")))},scope:this},renderTo:this.sizeSanCmbNodeId});this.maxSizeSanNode=
Ext.get(this.maxSizeSanNodeId);this.boxAlertThreshold=Ext.get(this.boxAlertThresholdId);this.sfAlertThreshold=new Ext.UI.SpinnerField({width:50,value:80,minValue:0,maxValue:99,incrementValue:1,alternateIncrementValue:10,renderTo:this.sfAlertThresholdId});this.cifsCheck=new Ext.UI.Checkbox({value:true,boxLabel:_TR("CIFS")});this.nfsCheck=new Ext.UI.Checkbox({boxLabel:_TR("NFS")});this.afpCheck=new Ext.UI.Checkbox({boxLabel:_TR("AFP")});this.dlnaCheck=new Ext.UI.Checkbox({boxLabel:_TR("DLNA")});this.httpCheck=
new Ext.UI.Checkbox({boxLabel:_TR("HTTP")});this.ftpCheck=new Ext.UI.Checkbox({boxLabel:_TR("FTP")});this.rsyncCheck=new Ext.UI.Checkbox({boxLabel:_TR("RSYNC")});this.daapCheck=new Ext.UI.Checkbox({boxLabel:_TR("DAAP")});this.cifsCheck.render(this.cifsNodeId);this.nfsCheck.render(this.nfsNodeId);this.afpCheck.render(this.afpNodeId);this.ftpCheck.render(this.ftpNodeId);this.rsyncCheck.render(this.rsyncNodeId);this.httpCheck.render(this.httpNodeId);this.dlnaCheck.render(this.dlnaNodeId);this.daapCheck.render(this.daapNodeId);
this.boxQuotas=new _s2.QuotasBlock({renderTo:this.boxQuotasId,volume:this.volume,listeners:{valid:function(){this.removeClass(this.cls+"-err-nassize")},invalid:function(){this.addClass(this.cls+"-err-nassize")},scope:this}});this.onTypeSelected("NAS")},onWShow:function(){Ext.fly(this.volumeRowId).setDisplayed(!!this.showVolume);this.showVolume=false},updateCompression:function(){if(this.bitRotProtectionCheck.getValue()&&(this.typeDataSet=="NAS"||this.typeDataSet=="SAN"&&this.provisionCombo.getValue()))this.compressionCheck.setDisabled(false);
else{this.compressionCheck.setDisabled(true);this.compressionCheck.reset()}this.compressionSizeNote.setVisible(this.typeDataSet=="SAN"&&!this.provisionCombo.getValue())},populateVolumes:function(){if(!this.zfsVolumesManager){var a=this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a)this.zfsVolumesManager=a.getZFSVolumesManager()}a=this.zfsVolumesManager.getActiveVolumes();var b=[];if(a&&a!=_4)for(var c=0;c<a.length;++c){var d=_a(a[c],"_i4o");b.push([d,
d.getVolumeName()])}this.volumeCombo.getStore().loadData(b);d=b.length?b[0][0]:null;this.volumeCombo.setValue(d);d&&this.setVolume(d)},setVolume:function(a){this.volume=a;if(this.boxQuotas)this.boxQuotas.volume=a;this._8tbLimited=false;if(a){var b=a.getCapacity();a=a.getAvailable();if(b>0&&b!=_4&&a>0&&a!=_4){b=parseInt(a)-parseInt(b)*0.1;if(b<0)b=0;this.maxSize=Math.floor(b);if(!this.isLunOver8TBSupported)if(this.maxSize>8589933568){this.maxSize=8589933568;this._8tbLimited=true}}else this.maxSize=
undefined}else{this.showVolume=true;this.populateVolumes()}if(this.sizeSanCmb){b=this.maxSize;switch(this.sizeSanCmb.getValue()){case "TB":b/=1024;case "GB":b/=1024;case "MB":b/=1024}b=Math.floor(b*1E3)/1E3;if(this.sizeSanCmb.getValue()=="MB")b=Math.floor(b);this.maxSizeToCompare=b;this.maxSizeSanNode.last().last().update(String.format(this._8tbLimited?"{0} {1}":"{0} {1} (90{2})",b,_TR(this.sizeSanCmb.getValue()),_TR("%_OF_FREE")))}},getVolume:function(){return this.volume},onBitRotProtectionCheck:function(a,
b){if(b&&this.spShareManager.getDefaultSettingBitRotProtectionPerformanceWarning()=="1"){this.bitRotProtectionCheck.setValue(false,true);Ext.UI.MessageBox.confirm({title:_TR("SHARE_BITROTPROTECTION_PERFORMANCE_WARNING_TITLE"),msg:_TR("SHARE_BITROTPROTECTION_PERFORMANCE_WARNING"),fn:function(c){if(c=="yes"){this.bitRotProtectionCheck.setValue(true,true);this.updateCompression()}},scope:this})}else this.updateCompression()},onAutoDefragCheck:function(){},onProtectionIntervalSelect:function(){this.typeDataSet==
"SAN"&&this.intervalCombo.getValue()!="never"&&!this.provisionCombo.getValue()&&Ext.UI.MessageBox.info({title:_TR("SNAPSHOT_SCHEDULE"),msg:_TR("CONTINUOUS_PROTECTION_THICK_LUN_PERFORMANCE")})},onTypeSelected:function(a){this.typeDataSet=a;if(a=="SAN"){this.setTitle(this.newLUNTitle);this.addClass(this.cls+"-san");this.removeClass(this.cls+"-nas");this.intervalCombo.setValue("never");this.updateCompression()}else if(a=="NAS"){this.setTitle(this.newShareTitle);this.addClass(this.cls+"-nas");this.removeClass(this.cls+
"-san");this.updateCompression();a="never";if(this.spShareManager.getDefaultSettingContinuousProtection()=="1")switch(this.spShareManager.getDefaultSettingContinuousProtectionFrequency()){case "1":a="hourly";break;case "2":a="daily";break;case "3":a="weekly";break}this.intervalCombo.setValue(a)}this.syncShadow()},onAddClick:function(){if(this.validate()){var a=this.typeDataSet,b=this.nameText.getValue();if(a=="NAS")(a=this.getUserByName(b))?Ext.UI.MessageBox.confirm({title:_TR("NEW_SHARE"),msg:String.format(_TR("NEW_SHARE_CONFIRM_IGNORE_CONFLICT_USER_NAME"),
b,a.getName()),fn:function(n){n=="yes"&&this.createShare()},scope:this}):this.createShare();else if(a=="SAN"){a=this.getVolume();var c=this.descText.getValue(),d=this.bitRotProtectionCheck.getValue(),e=this.autoDefragCheck.getValue(),f=this.intervalCombo.getValue(),g=f!="never",h=this.compressionCheck.getValue(),j=_a(new _1.lun,"_i1j"),k=this.sizeSanTxt.getValue(),l=this.sizeSanCmb.getValue();k=this.generateSize(k,l);k=Math.floor(k/1024)*1024;l=this.provisionCombo.getValue();var m=this.blockSizeCombo.getValue();
j.putName(b);j.putComment(c);j.putVolumeId(a.getVolumeName());j.putSize(k);j.putSparse(l);j.putBlockSize(m);j.putAlertThreshold(this.sfAlertThreshold.getValue());j.putLogbias("latency");j.putCompression(h);j.putBitRotProtection(d);j.putAutoDefrag(e);j.putEnableProtection(g);g&&j.putSnapshotScheduleInterval(f);this.spShareManager.appendLUN(j,"shares-volumes-add-lun");this.fireEvent("addsharerequest",this,"SAN",b,a);this.hide()}}},createShare:function(){var a=this.getVolume(),b=this.nameText.getValue(),
c=this.descText.getValue(),d=this.compressionCheck.getValue(),e=this.bitRotProtectionCheck.getValue(),f=this.autoDefragCheck.getValue(),g=this.intervalCombo.getValue(),h=g!="never",j=this.share;j.putName(b);j.putComment(c);j.putPath("/"+a.getVolumeName()+"/"+b);j.putVolumeId(a.getVolumeName());j.putLogbias("latency");j.putCompression(d);j.putBitRotProtection(e?"1":"0");j.putAutoDefrag(f?"1":"0");j.putEnableProtection(h);h&&j.putSnapshotScheduleInterval(g);c=_a(new _1.sproto("cifs"),"_i3c");
c.putAvailable(this.cifsCheck.getValue());c.putDefaultAccess("ReadWrite");c.putAllowGuestAccess(1);c.putEnableOplocks(0);c.putFolderCreateGroupRights("ReadWrite");c.putFolderCreateEveryOneRights("ReadWrite");c.putFileCreateGroupRights("ReadWrite");c.putFileCreateEveryOneRights("ReadWrite");d=_a(new _1.sproto("afp"),"_i3c");d.putAvailable(this.afpCheck.getValue());d.putDefaultAccess("ReadWrite");d.putNewFileFolderPermAutoset(true);d.putFileCreateGroupRights("ReadWrite");d.putFileCreateEveryOneRights("ReadWrite");
d.putFolderCreateGroupRights("ReadWrite");d.putFolderCreateEveryOneRights("ReadWrite");e=this.spSecurityManager.getRCUsers();for(i=0;i<e.length;++i)if(f=_a(e[i],"_i2z")){g=_a(new _1.user,"_i2z");g.putId(f.getId());g.putAccess("Disabled");c.appendUser(g);g=_a(new _1.user,"_i2z");g.putId(f.getId());g.putAccess("Disabled");d.appendUser(g)}j.appendProtocol(c);j.appendProtocol(d);c=_a(new _1.sproto("dlna"),"_i3c");c.putAvailable(this.dlnaCheck.getValue());c.putDefaultAccess("ReadOnly");
j.appendProtocol(c);c=_a(new _1.sproto("daap"),"_i3c");c.putAvailable(this.daapCheck.getValue());j.appendProtocol(c);c=_a(new _1.sproto("nfs"),"_i3c");c.putAvailable(this.nfsCheck.getValue());j.appendProtocol(c);c=_a(new _1.sproto("ftp"),"_i3c");c.putAvailable(this.ftpCheck.getValue());c.putDefaultAccess("ReadWrite");j.appendProtocol(c);c=_a(new _1.sproto("rsync"),"_i3c");c.putAvailable(this.rsyncCheck.getValue());c.putDefaultAccess("ReadOnly");
j.appendProtocol(c);c=_a(new _1.sproto("http"),"_i3c");c.putAvailable(this.httpCheck.getValue());c.putDefaultAccess("ReadOnly");j.appendProtocol(c);this.spShareManager.addShare(j,"","","","shares-volumes-add-share");this.fireEvent("addsharerequest",this,"NAS",b,a);this.hide()},generateSize:function(a,b){switch(b){case "TB":a*=1024;case "GB":a*=1024;case "MB":a*=1024;case "KB":a*=1}return a},validate:function(){if(this.nameText.tooltip){this.nameText.hideValidateTooltip();this.descText.hideValidateTooltip()}this.removeClass(this.cls+
"-err-name");this.removeClass(this.cls+"-err-desc");this.removeClass(this.cls+"-err-sansize");this.removeClass(this.cls+"-err-nassize");if(!_.isValidShareName(this.nameText.getValue())){this.addClass(this.cls+"-err-name");this.nameText.showValidateTooltip(_TR("SHARE_NAME_TOOLTIP"));return false}if(this.descText.getValue()&&this.descText.getValue().length>392){this.addClass(this.cls+"-err-desc");this.descText.showValidateTooltip(_TR("SHARE_TAB_DESC_REST_LEN"));return false}if(!this.isUniqName(this.nameText.getValue())){this.addClass(this.cls+
"-err-name");this.nameText.showValidateTooltip(_TR("SHARE_INSPECTOR_ERRORTIP_NAME_DUP"));return false}var a=this.typeDataSet;if(a=="NAS"){if(!this.boxQuotas.validate())return false}else if(a=="SAN"){a=this.sizeSanTxt.getValue();if(/^\d+(\.\d+)?$/.test(a)){if(!this.provisionCombo.getValue()&&this.maxSizeToCompare)if(a<=0||a>this.maxSizeToCompare){this.addClass(this.cls+"-err-sansize");return false}}else{this.addClass(this.cls+"-err-sansize");return false}}return true},isUniqName:function(a){var b,
c;a=a.toUpperCase();b=this.spShareManager.getShares();for(var d=0;d<b.length;++d){c=_a(b[d],"_i38");if(c.getName().toUpperCase()==a)return false}b=this.spShareManager.getLUNS();for(d=0;d<b.length;++d){c=_a(b[d],"_i1j");if(c.getName().toUpperCase()==a)return false}return true},getUserByName:function(a){var b,c;a=a.toUpperCase();b=[this.spSystemManager.getCloudOwner()].concat(this.spSecurityManager.getUsers()).concat(this.spSecurityManager.getRCUsers());for(var d=0;d<b.length;++d)if((c=
_a(b[d],"_i2z"))&&c.getName().toUpperCase()==a)return c;return null},clear:function(){this.removeClass(this.cls+"-err-name");this.nameText.reset();this.descText.reset();this.compressionCheck.reset();this.compressionCheck.setDisabled(false);this.bitRotProtectionCheck.setValue(this.spShareManager.getDefaultSettingBitRotProtection()=="1");this.blockSizeCombo.setValue("512");this.onTypeSelected("NAS");this.removeClass(this.cls+"-err-sansize");this.provisionCombo.onSelect(this.provisionCombo.store.data.get(1),
1);this.sizeSanTxt.reset();this.sizeSanCmb.onSelect(this.sizeSanCmb.store.data.get(1),1);this.sfAlertThreshold.reset();this.removeClass(this.cls+"-err-nassize");this.cifsCheck.reset();this.nfsCheck.reset();this.afpCheck.reset();this.ftpCheck.reset();this.rsyncCheck.reset();this.httpCheck.reset();this.dlnaCheck.reset();this.daapCheck.reset();this.center();this.nameText.focus(false,true);this.share=_a(new _1.share,"_i38");this.boxQuotas.loadShare(this.share)}});Ext.namespace("_s1");
_s2.DestroyDataSet=_._1(Ext.UI.Window,{modal:true,autoWidth:true,autoCreate:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",cls:"x-sh-wnd-destroydataset",textToEnter:"DESTROY",help:"shares_wnd_destroy_ds",constructor:function(a){this.title=_TR("DESTROY_DATASET");this.html='<table cellspacing="0"><tr><td valign="top" style="padding-top: 5px;"><div class="x-controls-prompt-icon-MESSAGE"></div></td><td><table class="'+
this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+'-datatable-labelcell" style=""><span class="clones-prompt">'+_TR("SHARES_DESTROY_DATASET_CONFIRM_CLONES")+"<br ><br ></span>"+_TR("SHARES_DESTROY_DATASET_CONFIRM")+' "'+this.textToEnter+'"</td></tr><tr><td id="'+(this.tfTextId=Ext.id())+'"></td></tr></table></td></tr></table>';this.bDestroy=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("DESTROY"),handler:function(){if(this.validate()){this.fireEvent("destroysharerequest",this,
this.share);this.hide()}},scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bDestroy,this.bCancel];_s2.DestroyDataSet.superclass.constructor.call(this,a);this.addEvents("destroysharerequest");this.tfText=new Ext.UI.TextField({width:330,value:""});this.on("afterrender",function(){this.tfText.render(this.tfTextId)},this)},validate:function(){var a=this.tfText.getValue();
if(a&&a==this.textToEnter)return true;else{this.tfText.focus();return false}},load:function(a,b){this.share=a;this.tfText.setValue("");this.tfText.focus(false,true);var c=false;for(var d in b){Ext.each(b[d],function(e){if(e.getCloneInfo()==a.getName()){c=true;return false}},this);if(c)break}c?this.addClass(this.cls+"-clones"):this.removeClass(this.cls+"-clones");this.syncShadow()}});Ext.namespace("_s2");
_s2.AddSnapshot=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,help:"shares_wnd_add_snapshot",constructor:function(a){this.title=_TR("NEW_SNAPSHOT");this.html=this.getHtml();this.fbar=this.getFooter();_s2.AddSnapshot.superclass.constructor.call(this,a)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a)this.spSnapshotManager=a.getZFSSnapshotsManager();_s2.AddSnapshot.superclass.initComponent.call(this)},
getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-sh-wnd-snapshot-text x-sh-wnd-snapshot-text-name"><nobr>'+_TR("NAME")+':</nobr></td><td id="'+(this.nameNodeId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("CREATE"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s2.AddSnapshot.superclass.afterRender.call(this,
a);this.nameText=new Ext.UI.TextField({width:310,enableKeyEvents:true,listeners:{keyup:this.validate,scope:this}});this.nameText.render(this.nameNodeId)},onAddClick:function(){if(this.validate()){var a=this.nameText.getValue(),b=this.share.getVolumeId(),c=this.share.getName();this.spSnapshotManager.CreateSnapshot(b,c,a,"shares-volumes-add-snapshot");this.hide()}},load:function(a){this.share=a},validate:function(){var a=true;this.removeClass("x-sh-wnd-snapshot-err-name");if(_.isValidSnapshotName(this.nameText.getValue()))this.nameText.hideValidateTooltip();
else{this.addClass("x-sh-wnd-snapshot-err-name");this.nameText.showValidateTooltip(_TR("SNAPSHOT_NAME_TOOLTIP"));a=false}return a},clear:function(){this.removeClass("x-sh-wnd-snapshot-err-name");this.nameText.reset();this.center();this.nameText.focus(false,true)}});Ext.namespace("_s2");
_s2.AddHost=Ext.extend(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,help:"shares_wnd_add_host",constructor:function(a){this.title=_TR("ADD_HOST");this.html=this.getHtml();this.fbar=this.getFooter();_s2.AddHost.superclass.constructor.call(this,a);this.idx=0},initComponent:function(){this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager();_s2.AddHost.superclass.initComponent.call(this)},
getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-sh-text x-sh-wnd-host-text-address">'+_TR("IP_ADDRESS")+':</td><td id="'+(this.addressNodeId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("ADD"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s2.AddHost.superclass.afterRender.call(this,
a);this.addressText=new Ext.UI.TextField({enableKeyEvents:true,width:310});this.addressText.render(this.addressNodeId);this.addressText.on("keyup",function(){this.validate()},this)},onAddClick:function(){if(this.validate()){var a=this.addressText.getValue(),b=_a(new _1.sprotohost,"_i3f");b.putUIId(this.idx);b.putHostName(a);b.putAccess("Disabled");this.protocol.appendHost(b);this.fireEvent("sharechanged",this,b);this.hide();++this.idx}},load:function(a,b){this.share=a;this.protocol=
b},validate:function(){this.removeClass("x-sh-wnd-host-err-address");if(!this.addressText.getValue().replace(/\s/g,"")){this.addClass("x-sh-wnd-host-err-address");return false}for(var a=this.protocol.getHosts(),b=0;b<a.length;b++)if(_a(a[b],"_i3f").getHostName()==this.addressText.getValue()){this.addClass("x-sh-wnd-host-err-address");return false}return true},clear:function(){this.removeClass("x-sh-wnd-host-err-address");this.addressText.reset();this.center();this.addressText.focus(false,
true)}});Ext.namespace("_s2");
_s2.ExpandLun=_._1(Ext.Container,{constructor:function(a){this.html=this.getHtml();_s2.ExpandLun.superclass.constructor.call(this,a)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spSysManager=a.getSystemManager();this.spShareManager=a.getShareManager();this.spZFSVolumesManager=a.getZFSVolumesManager();this.isLunOver8TBSupported=this.spSysManager.getSupportLunOver8TB()=="1";_s2.ExpandLun.superclass.initComponent.call(this)},
getHtml:function(){return'<div class="x-sh-wnd-expand"><div class="x-controls-prompt-icon-WARNING x-sh-wnd-expand-warn">'+_TR("SHARE_EXPAND_WARNING")+'</div><table cellpadding="0" cellspacing="0"><tr><td class="x-sh-wnd-expand-text">'+_TR("CURRENT_SIZE")+':</td><td class="x-sh-wnd-expand-text x-sh-wnd-expand-size" id="'+(this.currentSizeNodeId=Ext.id())+'" colspan="2"></td></tr><tr class="x-sh-wnd-expand-avail"><td class="x-sh-wnd-expand-text">'+_TR("MAXIMUM_SIZE")+':</td><td class="x-sh-wnd-expand-text x-sh-wnd-expand-size" id="'+
(this.availSpaceNodeId=Ext.id())+'" colspan="2"></td></tr><tr><td class="x-sh-wnd-expand-text x-sh-wnd-expand-text-size">'+_TR("NEW_SIZE")+':</td><td class="x-sh-wnd-expand-field" id="'+(this.newSizeTxtNodeId=Ext.id())+'" style="width:175px;"></td><td id="'+(this.newSizeCmbNodeId=Ext.id())+'" style="width:60px;"></td></tr></table></div>'},afterRender:function(a){_s2.ExpandLun.superclass.afterRender.call(this,a);this.currentSizeNode=Ext.get(this.currentSizeNodeId);this.availSpaceNode=Ext.get(this.availSpaceNodeId);
this.newSizeTxt=new Ext.UI.TextField({width:175,enableKeyEvents:true,listeners:{keyup:function(){this.isSizeChanged=true;this.fireEvent("sharechanged",this)},change:function(){this.isSizeChanged=true;this.fireEvent("sharechanged",this)},scope:this}});this.newSizeCmb=new Ext.UI.ComboBox({width:60,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["MB",_TR("MB")],["GB",_TR("GB")],["TB",_TR("TB")]]}),valueField:"id",displayField:"text",listeners:{select:this.onCmbSizeSelect,
scope:this}});this.newSizeTxt.render(this.newSizeTxtNodeId);this.newSizeCmb.render(this.newSizeCmbNodeId)},onApplyClick:function(){if(this.validate()){var a=this.newSizeTxt.getValue(),b=this.newSizeCmb.getValue();this.lun.putSize(Math.floor(this.generateSize(a,b)/1024)*1024)}},onCmbSizeSelect:function(a,b){this.updateSizeLabels(b.data.id,b.data.text);this.fireEvent("sharechanged",this)},updateSizeLabels:function(a,b){this.curSizeToCompare=Math.ceil(this.generateSizeLabel(this.curSize,a)*1E3)/1E3;
if(a=="MB")this.curSizeToCompare=Math.ceil(this.curSizeToCompare);this.currentSizeNode.update(this.curSizeToCompare+" "+b);!this.isSizeChanged&&this.newSizeTxt.setValue(this.curSizeToCompare);if(this.maxSize!==undefined){if(this.maxSize==this.curSize)this.maxSizeToCompare=this.curSizeToCompare;else{this.maxSizeToCompare=Math.floor(this.generateSizeLabel(this.maxSize,a)*1E3)/1E3;if(a=="MB")this.maxSizeToCompare=Math.floor(this.maxSizeToCompare)}this.availSpaceNode.update(this.maxSizeToCompare+" "+
b)}},load:function(a){this.removeClass("x-sh-wnd-expand-err-size");this.lun=a;this.isSizeChanged=false;var b=this.fileSize(this.curSize=a.getSize()*1024);this.newSizeTxt.setValue(b[0]);this.newSizeCmb.setValue(b[1]);if(a.getSparse()){this.removeClass("x-sh-wnd-expand-thick");this.maxSizeToCompare=this.maxSize=undefined}else{this.addClass("x-sh-wnd-expand-thick");if(a=a.getAvailable()){this.maxSize=Math.floor(a*0.9)*1024;if(!this.isLunOver8TBSupported)this.maxSize=Math.min(this.maxSize,8796093022208);
if(this.maxSize<this.curSize)this.maxSize=this.curSize}}this.updateSizeLabels(b[1],_TR(b[1]))},validate:function(){this.removeClass("x-sh-wnd-expand-err-size");var a=this.newSizeTxt.getValue();this.newSizeCmb.getValue();if(!/^\d+(\.\d+)?$/.test(a)){this.addClass("x-sh-wnd-expand-err-size");return false}if(a<this.curSizeToCompare||this.maxSizeToCompare!==undefined&&a>this.maxSizeToCompare){this.addClass("x-sh-wnd-expand-err-size");return false}return true},fileSize:function(a){try{var b=a/1024;if(b<
1){if(b>0)return[a,"BYTES"];return a}var c=b/1024;if(c<1)return[Math.round(b),"KB"];b=c/1024;if(b<1)return[Math.round(c),"MB"];c=b/1024;if(c<1)return[Math.round(b),"GB"];return[Math.round(c),"TB"]}catch(d){}return[a,"BYTES"]},generateSize:function(a,b){switch(b){case "TB":a*=1024;case "GB":a*=1024;case "MB":a*=1024;case "KB":a*=1}return a},generateSizeLabel:function(a,b){switch(b){case "TB":a/=1024;case "GB":a/=1024;case "MB":a/=1024;case "KB":a/=1024}return a}});Ext.namespace("_s2");
_s2.HostsBlock=Ext.extend(Ext.Component,{constructor:function(a){_s2.HostsBlock.superclass.constructor.call(this,a);this.items=[];this.isRSYNC=this.isFTP=this.isHTTP=false},initComponent:function(){_s2.HostsBlock.superclass.initComponent.call(this);this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager()},afterRender:function(){_s2.HostsBlock.superclass.afterRender.apply(this,arguments);this.el.update(this.getHtml());
this.dataNode=Ext.get(this.dataNodeId);this.emptyNode=Ext.get(this.emptyNodeId);this.filterCombo=this.getComboBox(145,[["hosts",_TR("HOSTS")]]);this.filterCombo.on("select",this.onFilterSelect,this);this.search=new Ext.UI.TextField({width:145,enableKeyEvents:true});this.search.on("change",this.onSearchChanged,this);this.search.on("keyup",this.onSearchChanged,this);this.searchBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-search"});this.addHostBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-plus-small"});
this.addHostBtn.on("click",this.onAddHostClick,this);this.removeHostBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-minus-small"});this.removeHostBtn.on("click",this.onRemoveHostClick,this);this.filterCombo.render(this.filterNodeId);this.search.render(this.searchNodeId);_.initElePHEvent(this.search,_TR("FILTER_BY_HOSTS"));this.searchBtn.render(this.searchBtnNodeId);this.addHostBtn.render(this.addNodeId);this.removeHostBtn.render(this.removeNodeId);this.scroller=new Ext.UI.Scroller({dom:this.dataNode.dom,
type:"vertical"});this.scroller.reg()},getHtml:function(){return'<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-col" style="width:145px; display:none;" id="'+(this.filterNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:145px;" id="'+(this.searchNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:15px;" id="'+(this.searchBtnNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" align="right" id="'+(this.addNodeId=
Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:25px;" align="right" id="'+(this.removeNodeId=Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator"></div><table class="x-sh-inspector-table ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("IP_ADDRESS")+'</td><td id="'+(this.roColId=Ext.id())+'" class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;display:none;"><div style="width:80px;text-align:center;white-space:nowrap;" title="'+
_TR("READ_ONLY")+'">'+_TR("READ_ONLY")+'</td><td id="'+(this.rwColId=Ext.id())+'" class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;display:none;"><div style="width:80px;text-align:center;white-space:nowrap;" title="'+_TR("READ_WRITE")+'">'+_TR("READ_WRITE")+'</td><td id="'+(this.pwdColId=Ext.id())+'" class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;display:none;"><div style="width:80px;text-align:center;white-space:nowrap;" title="'+_TR("PASSWORD")+'">'+_TR("PASSWORD")+
'</td></tr></table><div id="'+(this.dataNodeId=Ext.id())+'" class="x-sh-inspector-grid x-sh-inspector-grid-hosts-fixed" style="display:none"></div><div id="'+(this.emptyNodeId=Ext.id())+'" class="x-sh-inspector-grid"><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table><table class="x-sh-inspector-table ui-fwgrid-rowalt" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell x-sh-empty-msg">'+
_TR("EMPTY")+'</td></tr></table><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table></div>'},load:function(a,b){this.share=a;this.protocol=b;this.loadData();this.appendRules();this.checkMigration();this.filterCombo.onSelect(this.filterCombo.store.data.get(0),0)},loadData:function(){var a,b="",c=this.protocol.getHosts();this.items=[];for(var d=0;d<c.length;++d){a=_a(c[d],"_i3f");
this.items.push({type:"host",name:a.getHostName(),host:a})}for(d=0;d<this.items.length;++d)b+='<table id="'+(this.items[d].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(d%2==0?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+this.items[d].type+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" title="'+this.items[d].name+'">'+this.items[d].name+
'</div></td><td id="'+(this.items[d].readonlyNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td><td id="'+(this.items[d].readwriteNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;'+(this.isHTTP?"display:none;":"")+'"></td></tr></table>';this.dataNode.update(b);Ext.each(this.items,function(e){if(this.isFTP||this.isHTTP){var f=new Ext.UI.Checkbox({item:e,cls:"x-sh-inspector-checkbox-center"});f.render(e.readonlyNodeId);f.on("check",function(h){this.onHostChecked(h,
"readonly")},this);f.el.on("click",function(h){h.stopEvent()},this);var g=new Ext.UI.Checkbox({item:e,cls:"x-sh-inspector-checkbox-center"});g.render(e.readwriteNodeId);g.on("check",function(h){this.onHostChecked(h,"readwrite")},this);g.el.on("click",function(h){h.stopEvent()},this);e.readonly=f;e.readwrite=g}e.row=Ext.get(e.itemNodeId);e.row.on("click",function(){this.onItemSelect(e)},this)},this);this.removeHostBtn.disable()},enableFTPHostAccess:function(){Ext.getDom(this.roColId).style.display=
"";Ext.getDom(this.roColId).innerHTML=_TR("READ_ONLY");Ext.getDom(this.roColId).title=_TR("READ_ONLY");Ext.getDom(this.rwColId).style.display="";this.isFTP=true},enableHTTPHostAccess:function(){Ext.getDom(this.roColId).style.display="";Ext.getDom(this.roColId).innerHTML=_TR("ACCESS");Ext.getDom(this.roColId).title=_TR("ACCESS");this.isHTTP=true},onItemSelect:function(a){this.selectItem(a)},selectItem:function(a){this.selectedItem&&this.selectedItem.row.removeClass("ui-fwgrid-rowsel");if(this.selectedItem=
a){this.selectedItem.row.addClass("ui-fwgrid-rowsel");this.selectedItem.host&&this.removeHostBtn.enable()}},deselectAll:function(){this.selectItem(null)},appendRules:function(){if(this.isFTP||this.isHTTP){var a,b=this.items.length;this.defaultAccess=this.protocol.getDefaultAccess();for(var c=0;c<b;++c)if(this.items[c].type=="host"){a=this.items[c].host;if(this.defaultAccess==="ReadWrite"){this.items[c].readwrite.hide();this.items[c].readwrite.setDisabled(true)}else if(this.defaultAccess==="ReadOnly"){this.items[c].readonly.setValue(true,
true);this.items[c].readwrite.setValue(false,false)}if(a){access=a.getAccess();if(access=="ReadOnly"){this.items[c].readonly.setValue(true,true);this.items[c].readwrite.setValue(false,true)}else if(access=="ReadWrite"){this.items[c].readwrite.setValue(true,true);this.items[c].readonly.setValue(false,true)}}}}},onHostChecked:function(a,b){var c=a.item,d="Disabled";if(a.checked&&b=="readwrite"){c.readonly.setValue(false,true);d="ReadWrite"}if(a.checked&&b=="readonly"){c.readwrite.setValue(false,true);
d="ReadOnly"}switch(c.type){case "host":c.host.putAccess(d);break;default:break}this.appendRules();this.fireEvent("sharechanged",this)},onFilterSelect:function(a,b,c){a=true;for(c=0;c<this.items.length;++c){this.items[c].row.setDisplayed(true);a=this.items[c].row.hidden=false}this.search.setValue("");this.deselectAll();this.filterData("");this.dataNode.setDisplayed(!a);this.emptyNode.setDisplayed(a)},onSearchChanged:function(){this.filterData(this.search.getValue())},onAddHostClick:function(){var a=
this.getHostWindow();a.show();a.load(this.share,this.protocol);a.clear()},onRemoveHostClick:function(){this.selectedItem&&this.selectedItem.host&&Ext.UI.MessageBox.confirm({title:_TR("REMOVE_HOST"),msg:_TR("SHARES_REMOVE_HOST_CONFIRM"),fn:function(a){a=="yes"&&this.removeHost(this.selectedItem.host)},scope:this})},removeHost:function(a){this.protocol.removeHostById(a.getUIId());this.load(this.share,this.protocol);this.fireEvent("sharechanged",this)},filterData:function(a){a=a.toLowerCase();a=new RegExp(a);
for(var b=true,c=0,d=0;d<this.items.length;++d)if(!this.items[d].row.hidden)if(a.exec(this.items[d].name.toLowerCase())==null)this.items[d].row.setDisplayed(false);else{this.items[d].row.setDisplayed(true);this.items[d].row.removeClass("ui-fwgrid-row").removeClass("ui-fwgrid-rowalt");this.items[d].row.addClass("ui-fwgrid-row"+(++c%2==0?"alt":""));b=false}this.deselectAll();this.dataNode.setDisplayed(!b);this.emptyNode.setDisplayed(b)},getHostWindow:function(){if(!this.hostWindow){this.hostWindow=
new _s2.AddHost;this.hostWindow.on("sharechanged",function(){this.load(this.share,this.protocol);this.fireEvent("sharechanged",this)},this)}return this.hostWindow},getComboBox:function(a,b){return new Ext.UI.ComboBox({width:a,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:b}),valueField:"id",displayField:"text"})},checkMigration:function(){var a=this.share.getMigration();this.addHostBtn.setVisible(!a);this.removeHostBtn.setVisible(!a);
if(a)for(a=0;a<this.items.length;++a)this.items[a].readwrite.disable()}});Ext.namespace("_s2");
_s2.NfsHostsBlock=Ext.extend(_s2.HostsBlock,{constructor:function(a){_s2.NfsHostsBlock.superclass.constructor.call(this,a)},getHtml:function(){return'<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-col" style="width:145px; display:none;" id="'+(this.filterNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:145px;" id="'+(this.searchNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:15px;" id="'+
(this.searchBtnNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" align="right" id="'+(this.addNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:25px;" align="right" id="'+(this.removeNodeId=Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator"></div><table class="x-sh-inspector-table ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("IP_ADDRESS")+'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;"><div style="width:80px;text-align:center;white-space:nowrap;" class="x-ellipsis" title="'+
_TR("READ_ONLY")+'">'+_TR("READ_ONLY")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;"><div style="width:80px;text-align:center;white-space:nowrap;" class="x-ellipsis" title="'+_TR("READ_WRITE")+'">'+_TR("READ_WRITE")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;"><div style="width:80px;text-align:center;white-space:nowrap;" class="x-ellipsis" title="'+_TR("ROOT_ACCESS")+'">'+_TR("ROOT_ACCESS")+'</div></td></tr></table><div id="'+
(this.dataNodeId=Ext.id())+'" class="x-sh-inspector-grid x-sh-inspector-grid-hosts-nfs '+(this.fixedHeight?"x-sh-inspector-grid-hosts-fixed":"")+'"></div><div id="'+(this.emptyNodeId=Ext.id())+'" class="x-sh-inspector-grid">'+(this.fixedHeight?'<table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table>':"")+'<table class="x-sh-inspector-table ui-fwgrid-row'+(this.fixedHeight?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell x-sh-empty-msg">'+
_TR("EMPTY")+"</td></tr></table>"+(this.fixedHeight?'<table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table>':"")+"</div>"},loadData:function(){for(var a,b="",c=this.protocol.getHosts(),d=0;d<this.items.length;++d){this.items[d].readonly.destroy();this.items[d].readwrite.destroy();this.items[d].rootaccess.destroy()}this.items=[{type:"any",name:_TR("ANY_HOST"),host:null}];for(d=0;d<c.length;++d){a=
_a(c[d],"_i3f");this.items.push({type:"host",name:a.getHostName(),host:a})}for(d=0;d<this.items.length;++d)b+='<table id="'+(this.items[d].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(d%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+this.items[d].type+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" title="'+
this.items[d].name+'">'+this.items[d].name+'</div></td><td id="'+(this.items[d].readonlyNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td><td id="'+(this.items[d].readwriteNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td><td id="'+(this.items[d].rootaccessNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td></tr></table>';this.dataNode.update(b);Ext.each(this.items,function(e){var f=new Ext.UI.Checkbox({item:e,cls:"x-sh-inspector-checkbox-center"});
f.render(e.readonlyNodeId);f.on("check",function(j){this.onHostChecked(j,"readonly")},this);f.el.on("click",function(j){j.stopEvent()},this);var g=new Ext.UI.Checkbox({item:e,cls:"x-sh-inspector-checkbox-center"});g.render(e.readwriteNodeId);g.on("check",function(j){this.onHostChecked(j,"readwrite")},this);g.el.on("click",function(j){j.stopEvent()},this);var h=new Ext.UI.Checkbox({item:e,cls:"x-sh-inspector-checkbox-center",hidden:e.type=="any"});h.render(e.rootaccessNodeId);h.on("check",function(j){this.onHostChecked(j,
"rootaccess")},this);h.el.on("click",function(j){j.stopEvent()},this);e.readonly=f;e.readwrite=g;e.rootaccess=h;e.row=Ext.get(e.itemNodeId);e.row.on("click",function(){this.onItemSelect(e)},this)},this);this.removeHostBtn.disable()},appendRules:function(){var a,b=this.share.isReadyDRShare();this.defaultAccess=this.protocol.getDefaultAccess();for(var c=0;c<this.items.length;++c){this.items[c].readonly.show();this.items[c].readwrite.show();this.items[c].readonly.setValue(false,true);this.items[c].readwrite.setValue(false,
true);this.items[c].rootaccess.setValue(false,true);if(this.items[c].type=="host"){a=this.items[c].host;if(this.defaultAccess==="ReadWrite"){this.items[c].readonly.show();this.items[c].readwrite.hide();this.items[c].readwrite.setDisabled(true)}else if(this.defaultAccess==="ReadOnly"){this.items[c].readwrite.show();this.items[c].readonly.hide();this.items[c].readonly.setDisabled(true)}else{this.items[c].readwrite.show();this.items[c].readonly.show();this.items[c].readwrite.setDisabled(false);this.items[c].readonly.setDisabled(false)}if(a){var d=
a.getAccess();if(d=="ReadWrite")this.items[c].readwrite.setValue(true,true);else d=="ReadOnly"&&this.items[c].readonly.setValue(true,true);a=a.getRootPrivilege();this.items[c].rootaccess.setValue(a,true).setDisabled(!a&&d=="Disabled"&&this.defaultAccess=="Disabled")}}else if(this.items[c].type=="any"){d=this.protocol.getDefaultAccess();if(d=="ReadWrite")this.items[c].readwrite.setValue(true,true);else d=="ReadOnly"&&this.items[c].readonly.setValue(true,true);for(a=0;a<this.items.length;++a)if(this.items[a].type==
"host"){this.items[a].readonly.enable();this.items[a].readwrite.enable();if(d=="ReadOnly")this.items[a].readonly.disable();else d=="ReadWrite"&&this.items[a].readwrite.disable()}}b&&this.items[c].readwrite.hide()}},onHostChecked:function(a,b){var c=a.item,d=this.protocol,e=c.host;if(b=="rootaccess")e.putRootPrivilege(c.rootaccess.checked);else{a.checked&&b=="readwrite"&&c.readonly.setValue(false,true);a.checked&&b=="readonly"&&c.readwrite.setValue(false,true);a="Disabled";if(c.readonly.checked)a=
"ReadOnly";if(c.readwrite.checked)a="ReadWrite";if(c.type=="host")e.putAccess(a);else c.type=="any"&&d.putDefaultAccess(a)}d=d.getDefaultAccess();for(e=0;e<this.items.length;++e){c=this.items[e];c.type=="host"&&c.host.getAccess()=="Disabled"&&d=="Disabled"&&c.host.putRootPrivilege(false)}this.fireEvent("sharechanged",this);this.appendRules()},checkMigration:function(){var a=this.share.getMigration();this.addHostBtn.setVisible(!a);this.removeHostBtn.setVisible(!a);if(a)for(a=0;a<this.items.length;++a){this.items[a].readonly.disable();
this.items[a].readwrite.disable();this.items[a].rootaccess.disable()}}});Ext.namespace("_s2");
_s2.NfsAdvancedBlock=_._1(_9,Ext.Component,{constructor:function(a){_s2.NfsAdvancedBlock.superclass.constructor.call(this,a)},initComponent:function(){_s2.NfsAdvancedBlock.superclass.initComponent.call(this);this.on("sharechanged",function(){this.load(this.share,this.protocol)},this)},afterRender:function(){_s2.NfsAdvancedBlock.superclass.afterRender.apply(this,arguments);this.el.update('<table border="0" cellpadding="0" cellspacing="0"><tr><td colspan="2"><h6>'+
_TR("NFS_PERFORMANCE")+'</h6></td></tr><tr><td></td><td id="'+(this.enableASyncId=Ext.id())+'"></td></tr><tr><td colspan="2" style="height: 24px;"></td></tr><tr><td colspan="2"><h6>'+_TR("NFS_USER_ID_MAPPING")+'</h6></td></tr><tr><td class="x-sh-text">'+_TR("NFS_UID_GID_SQUASHING")+':</td><td id="'+(this.squashType=Ext.id())+'"></td></tr><tr><td class="x-sh-text">'+_TR("NFS_ANONYMOUS_UID")+':</td><td id="'+(this.userId=Ext.id())+'"></td></tr><tr><td class="x-sh-text">'+_TR("NFS_ANONYMOUS_GID")+':</td><td id="'+
(this.groupId=Ext.id())+'"></td></tr></table>');this.asyncCkb=new Ext.UI.Checkbox({boxLabel:_TR("ENABLE_ASYNC"),renderTo:this.enableASyncId,listeners:{check:function(a,b){if(this.protocol){this.protocol.putDefaultSync(b?0:1);this.fireEvent("sharechanged",this)}},scope:this}});this.cbSquashType=new Ext.UI.ComboBox({disabled:false,width:150,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["no_root_squash",_TR("NFS_NO_ROOT_SQUASH")],["root_squash",
_TR("NFS_ROOT_SQUASH")],["all_squash",_TR("NFS_ALL_SQUASH")]]}),value:"root_squash",valueField:"id",displayField:"text",renderTo:this.squashType,listeners:{select:function(a,b){if(this.protocol){if(b.data.id==="no_root_squash"){this.protocol.putUserId(99);this.protocol.putGroupId(99);this.tfUserId.setDisabled(true);this.tfGroupId.setDisabled(true)}else{this.tfUserId.setDisabled(false);this.tfGroupId.setDisabled(false)}this.protocol.putSquashType(b.data.id);this.fireEvent("sharechanged",this)}},scope:this}});
this.tfUserId=new Ext.UI.TextField({submitEmptyText:false,emptyText:_TR("NFS_GUEST"),width:150,renderTo:this.userId,maskRe:/\d/,listeners:{change:function(a,b){if(this.protocol){this.protocol.putUserId(b==""?99:b);this.fireEvent("sharechanged",this)}},scope:this}});this.tfGroupId=new Ext.UI.TextField({emptyText:_TR("NFS_GUEST"),maskRe:/\d/,width:150,renderTo:this.groupId,listeners:{change:function(a,b){if(this.protocol){this.protocol.putGroupId(b==""?99:b);this.fireEvent("sharechanged",this)}},scope:this}})},
load:function(a,b){this.share=a;this.protocol=b;a=this.protocol.getDefaultSync()=="0";b=this.protocol.getUserId();var c=this.protocol.getGroupId();this.asyncCkb.setValue(a,true);this.cbSquashType.setValue(this.protocol.getSquashType());this.tfUserId.setValue(b==99?"":b);this.tfGroupId.setValue(c==99?"":c)}});Ext.namespace("_s2");
_s2.UsersBlock=_._1(_9,Ext.Component,_i2y,{everyone:"Everyone",constructor:function(a){_s2.UsersBlock.superclass.constructor.call(this,a);this.items=[];this.addEvents("refresh")},initComponent:function(){_s2.UsersBlock.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spShareManager=a.getShareManager();this.spSystemManager=a.getSystemManager();this.spSecurityManager=a.getSecurityManager();
_a(this.spSecurityManager,"_i1").Advise(this)},afterRender:function(){_s2.UsersBlock.superclass.afterRender.apply(this,arguments);this.el.update('<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-col" style="width:145px;" id="'+(this.filterNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:145px;" id="'+(this.searchNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:15px;" id="'+(this.searchBtnNodeId=
Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:500px;" align="right" id="'+(this.refreshNodeId=Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator"></div>'+this.getTableHeader("x-sh-inspector-table")+'<div id="'+(this.dataNodeId=Ext.id())+'" class="x-sh-inspector-grid"></div><div id="'+(this.emptyNodeId=Ext.id())+'" class="x-sh-inspector-grid"><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table><table class="x-sh-inspector-table ui-fwgrid-rowalt" cellpadding="0" cellspacing="0"><tr><td id="'+
(this.emptyNodeTextId=Ext.id())+'" class="x-sh-inspector-grid-cell x-sh-empty-msg">'+_TR("EMPTY")+'</td></tr></table><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table></div><div class="x-sh-inspector-separator"></div><div id="'+(this.anonymousNodeId=Ext.id())+'" class="x-sh-inspector-grid-anonymous"></div>');this.dataNode=Ext.get(this.dataNodeId);this.emptyNode=Ext.get(this.emptyNodeId);
this.filterCombo=this.getComboBox(145,[["all",_TR("ALL")],["user",_TR("USERS")],["group",_TR("GROUPS")]]);this.filterCombo.on("select",this.onFilterSelect,this);this.search=new Ext.UI.TextField({width:145,enableKeyEvents:true,renderTo:this.searchNodeId});this.search.on("change",this.onSearchChanged,this);this.search.on("keyup",this.onSearchChanged,this);(new Ext.UI.RoundButton({cls:"x-frontview-btn-search",renderTo:this.searchBtnNodeId})).on("click",this.onSearchClick,this);(this.refreshBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-refresh-blue",
renderTo:this.refreshNodeId})).on("click",this.onRefreshClick,this);(this.addBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-plus-small",renderTo:this.refreshNodeId,hidden:true})).on("click",this.onAddClick,this);this.anonymousCheck=new Ext.UI.Checkbox({boxLabel:_TR("CIFS_ANONYMOUS"),renderTo:this.anonymousNodeId});this.anonymousCheck.on("check",this.onAnonymousCheck,this);this.filterCombo.render(this.filterNodeId);this.scroller=new Ext.UI.Scroller({dom:this.dataNode.dom,type:"vertical"});this.scroller.reg()},
getTableHeader:function(a){return'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("NAME")+'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;"><div class="x-ellipsis" style="width:80px;text-align:center;white-space: nowrap;" title="'+_TR("READ_ONLY")+'">'+_TR("READ_ONLY")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width:80px;"><div class="x-ellipsis" style="width:80px;text-align:center;white-space: nowrap;" title="'+
_TR("READ_WRITE")+'">'+_TR("READ_WRITE")+"</div></td></tr></table>"},getTableRow:function(a,b){var c=b.group&&b.name=="admin"?"admingroup":b.user&&b.user.isAdmin&&b.user.isAdmin()?"adminuser":b.rcuser?b.user==this.rcowner?"rcadminuser":"rcuser":b.type;return'<table id="'+(b.itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+c+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" title="'+
b.name+'">'+b.name+'</div></td><td id="'+(b.readonlyNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td><td id="'+(b.readwriteNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td></tr></table>'},load:function(a,b,c,d,e,f,g){this.adsMode=e;this.share=a;this.protocolName=(this.protocol=b)&&b.getName?b.getName():"";if(this.protocol=="filefolder-access")this.acllist=this.share.getAccessAclList();else if(this.protocol=="filefolder-default")this.acllist=
this.share.getDefaultAclList();else delete this.acllist;this.users=c;this.groups=d;this.rcusers=f;this.rcowner=_a(g,"_i2z");this.loadData();this.appendRules();this.checkMigration();this.filterCombo.onSelect(this.filterCombo.store.data.get(0),0);if(this.adsMode=="ads"&&this.adsMode.notSync=="1"){this.addBtn.show();this.refreshBtn.hide()}else{this.addBtn.hide();this.refreshBtn.show()}},loadData:function(){for(var a=0;a<this.items.length;++a){this.items[a].readonly.destroy();this.items[a].readwrite.destroy()}var b;
this.items=new Array({type:"group",name:this.everyone,email:""});if(this.adsMode=="ads"){this.groups=this.protocol.getGroups();this.users=this.protocol.getUsers()}for(a=0;a<this.groups.length;++a){b=_a(this.groups[a],"_i2v");this.items.push({type:"group",name:b.getName(),email:"",group:b})}for(a=0;a<this.users.length;++a){b=_a(this.users[a],"_i2z");this.items.push({type:"user",name:b.getName(),email:b.getEmail(),user:b})}if(this.adsMode=="user")if(this.rcowner&&this.rcowner!=_4&&
this.rcusers)if((a=this.rcowner.getName())&&a!=_4){this.items.push({type:"user",name:a,email:this.rcowner.getEmail(),user:this.rcowner,rcuser:this.rcowner});for(a=0;a<this.rcusers.length;++a){b=_a(this.rcusers[a],"_i2z");this.items.push({type:"user",name:b.getName(),email:b.getEmail(),user:b,rcuser:b})}}b="";for(a=0;a<this.items.length;++a)b+=this.getTableRow(a,this.items[a]);this.dataNode.update(b);for(a=0;a<this.items.length;++a){b=new Ext.UI.Checkbox({item:this.items[a],cls:"x-sh-inspector-checkbox-center"});
b.render(this.items[a].readonlyNodeId);b.on("check",function(d){this.onUserChecked(d,"readonly")},this);var c=new Ext.UI.Checkbox({item:this.items[a],cls:"x-sh-inspector-checkbox-center"});c.render(this.items[a].readwriteNodeId);c.on("check",function(d){this.onUserChecked(d,"readwrite")},this);this.items[a].readonly=b;this.items[a].readwrite=c;this.items[a].row=Ext.get(this.items[a].itemNodeId)}},appendRules:function(){var a,b=this.items.length,c=this.protocol,d=this.share.isReadyDRShare();this.defaultAccess=
c.getDefaultAccess();for(var e=0;e<b;e+=1){this.items[e].readonly.show();this.items[e].readonly.setDisabled(false);this.items[e].readwrite.show();this.items[e].readwrite.setDisabled(false);if(this.items[e].type=="user")if(this.items[e].user.isAdmin()||this.items[e].user==this.rcowner){this.items[e].readonly.setDisabled(true);this.items[e].readwrite.setDisabled(true);this.items[e].readonly.setValue(c.getName()=="http",true);this.items[e].readwrite.setValue(c.getName()!="http",true);if(a=c.getUserById(this.items[e].user.getId())){a=
a.getAccess();if(a=="ReadOnly"||a=="Disabled"){this.items[e].readonly.setDisabled(false);this.items[e].readwrite.setDisabled(false);this.items[e].readonly.setValue(a=="ReadOnly",true);this.items[e].readwrite.setValue(false,true)}}}else{a=c.getUserById(this.items[e].user.getId());if(this.items[e].rcuser){this.items[e].readonly.setDisabled(true);this.items[e].readwrite.setDisabled(true)}else if(this.defaultAccess==="ReadWrite"){this.items[e].readwrite.hide();this.items[e].readwrite.setDisabled(true)}else if(this.defaultAccess===
"ReadOnly"){this.items[e].readonly.hide();this.items[e].readonly.setDisabled(true)}if(a){a=a.getAccess();if(a=="ReadWrite")this.items[e].readwrite.setValue(true,true);else a=="ReadOnly"&&this.items[e].readonly.setValue(true,true)}}else if(this.items[e].type=="group")if(this.items[e].group)if(this.items[e].name=="admin"){this.items[e].readonly.setDisabled(true);this.items[e].readwrite.setDisabled(true);this.items[e].readonly.setValue(c.getName()=="http",true);this.items[e].readwrite.setValue(c.getName()!=
"http",true)}else{a=c.getGroupById(this.items[e].group.getId());if(this.defaultAccess==="ReadWrite"){this.items[e].readwrite.hide();this.items[e].readwrite.setDisabled(true)}else if(this.defaultAccess==="ReadOnly"){this.items[e].readonly.hide();this.items[e].readonly.setDisabled(true)}if(a){a=a.getAccess();if(a=="ReadWrite")this.items[e].readwrite.setValue(true,true);else a=="ReadOnly"&&this.items[e].readonly.setValue(true,true)}}else{a=c.getDefaultAccess();if(a=="ReadWrite")this.items[e].readwrite.setValue(true,
true);else a=="ReadOnly"&&this.items[e].readonly.setValue(true,true);this.anonymousCheck.setDisabled(a=="Disabled");a=="Disabled"?this.anonymousCheck.setValue(false,true):this.anonymousCheck.setValue(c.getAllowGuestAccess()=="1",true)}if(d){this.items[e].readwrite.hide();this.items[e].readwrite.setDisabled(true)}}},onAddClick:function(){var a=this.wndAddAdsUser=this.wndAddAdsUser||new _s2.AddAdsUser({listeners:{sharechanged:function(){this.loadData();this.appendRules();this.fireEvent("sharechanged",
this)},scope:this}});a.show();a.load(this.share,this.protocol);a.clear()},onUserChecked:function(a,b){var c=a.item,d=this.protocol;a.checked&&b=="readwrite"&&c.readonly.setValue(false,true);a.checked&&b=="readonly"&&c.readwrite.setValue(false,true);a="Disabled";if(c.readwrite.checked)a="ReadWrite";else if(c.readonly.checked)a="ReadOnly";switch(c.type){case "user":b=d.getUserById(c.user.getId());if(!b){b=_a(new _1.user,"_i2z");b.putId(c.user.getId());d.appendUser(b)}b.putAccess(a);if(a=="Disabled"&&
!(c.user.isAdmin()||c.user==this.rcowner))d.removeUser(b);break;case "group":if(c.group){b=d.getGroupById(c.group.getId());if(!b){b=_a(new _1.group,"_i2v");b.putId(c.group.getId());d.appendGroup(b)}b.putAccess(a);a=="Disabled"&&d.removeGroup(b)}else{d.putDefaultAccess(a);a=="Disabled"&&d.putAllowGuestAccess(false)}break;default:break}this.appendRules();this.fireEvent("sharechanged",this)},onAnonymousCheck:function(a,b){this.protocol.putAllowGuestAccess(b);this.appendRules();this.fireEvent("sharechanged",
this)},onFilterSelect:function(a,b,c){a=this.filterCombo.getValue();b=true;for(c=0;c<this.items.length;++c)if(a==this.items[c].type||a=="all"){this.items[c].row.setDisplayed(true);b=this.items[c].row.hidden=false}else{this.items[c].row.setDisplayed(false);this.items[c].row.hidden=true}this.search.setValue("");this.filterData("");this.dataNode.setDisplayed(!b);this.emptyNode.setDisplayed(b)},onSearchChanged:function(){if(this.adsMode=="ads"&&this.adsMode.notSync=="0"){var a=this.search.getValue().trim();
this.lastFilter!=a&&this.tryToSearch(a);(this.lastFilter=a)&&this.hideSearchProgress()}else{a=this.search.getValue();this.filterData(a)}},onSearchClick:function(){this.lastFilter=undefined;this.onSearchChanged()},onRefreshClick:function(){this.fireEvent("refresh",this)},filterData:function(a){a=a.toLowerCase();a=new RegExp(a);for(var b=true,c=0,d=0;d<this.items.length;++d)if(!this.items[d].row.hidden)if(a.exec(this.items[d].name.toLowerCase())==null)this.items[d].row.setDisplayed(false);else{this.items[d].row.setDisplayed(true);
this.items[d].row.removeClass("ui-fwgrid-row").removeClass("ui-fwgrid-rowalt");this.items[d].row.addClass("ui-fwgrid-row"+(++c%2==1?"":"alt"));b=false}this.dataNode.setDisplayed(!b);this.emptyNode.setDisplayed(b)},checkMigration:function(){if(this.share.getMigration()){for(var a=0;a<this.items.length;++a){this.items[a].readonly.disable();this.items[a].readwrite.disable()}this.anonymousCheck.disable()}},_i2y:{_o1:function(a,b){if(b=="shares-volumes-query-groups"||b=="shares-volumes-query-users"||
b=="shares-volumes-query-all")this.showSearchProgress();return _5},_o2:function(a,b){if(_s2.UsersBlock.prototype.queryOwner==this){if(b=="shares-volumes-query-all")if(!b.query||b.query==this.lastFilter){this.usersQueryResults=this.spSecurityManager.getQueryUsers();a=new String("shares-volumes-query-groups");a.query=b.query;this.spSecurityManager.queryGroups(this.adsQueryText,0,25,a)}if(b=="shares-volumes-query-users")if(!b.query||b.query==this.lastFilter)this.loadAdsQueryResults(this.spSecurityManager.getQueryUsers(),
[]);if(b=="shares-volumes-query-groups")if(!b.query||b.query==this.lastFilter)this.loadAdsQueryResults(this.usersQueryResults,this.spSecurityManager.getQueryGroups());return _5}},_o3:function(a,b,c){if(c=="shares-volumes-query-groups"||c=="shares-volumes-query-users")this.hideSearchProgress();a!=_5&&c=="shares-volumes-query-all"&&this.hideSearchProgress();return _5}},getComboBox:function(a,b){return new Ext.UI.ComboBox({width:a,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id",
"text"],data:b}),valueField:"id",displayField:"text"})},showSearchProgress:function(){this.search.wrap.addClass("x-sh-inspector-search-progress")},hideSearchProgress:function(){this.search.wrap.removeClass("x-sh-inspector-search-progress")},showSearchList:function(){var a=this.getSearchList(),b=this.filterCombo.el.getXY();b[1]+=this.filterCombo.el.getHeight();a.showAt(b)},hideSearchList:function(){this.getSearchList().hide()},tryToSearch:function(a){clearTimeout(this.searchRequestProcessId);var b=
this;this.searchRequestProcessId=setTimeout(function(){b.sendSearchRequest(a)},500)},sendSearchRequest:function(a){var b;this.adsQueryType=this.filterCombo.getValue();this.adsQueryText=a;this.usersQueryResults=[];_s2.UsersBlock.prototype.queryOwner=this;if(a.length>0)switch(this.adsQueryType){case "all":b=new String("shares-volumes-query-all");b.query=a;this.spSecurityManager.queryUsers(a,0,25,b);break;case "user":b=new String("shares-volumes-query-users");b.query=a;this.spSecurityManager.queryUsers(a,
0,50,b);break;case "group":b=new String("shares-volumes-query-groups");b.query=a;this.spSecurityManager.queryGroups(a,0,50,b);break}},loadAdsQueryResults:function(a,b){var c=this.getSearchList();this.showSearchList();c.loadData(a,b,this.defaultAccess,this.items,this.protocolName)},getSearchList:function(){if(!this.searchList){this.searchList=new _s2.AdsSearchList({width:447,maxHeight:200});this.searchList.on("itemchecked",this.onSearchItemChecked,this)}return this.searchList},onSearchItemChecked:function(a,
b,c){var d=this.protocol;switch(a){case "user":a=d.getUserById(b.getId());if(!a){a=_a(new _1.user,"_i2z");a.putId(b.getId());a.putName(b.getName());d.appendUser(a)}a.putAccess(c);c=="Disabled"&&d.removeUser(a);break;case "group":a=d.getGroupById(b.getId());if(!a){a=_a(new _1.group,"_i2v");a.putId(b.getId());a.putName(b.getName());d.appendGroup(a)}a.putAccess(c);c=="Disabled"&&d.removeGroup(a);break;default:break}this.loadData();this.appendRules();this.hideSearchList();this.fireEvent("sharechanged",
this)}});Ext.namespace("_s2");
_s2.DlnaMediaBlock=_._1(_9,Ext.Component,{constructor:function(a){_s2.DlnaMediaBlock.superclass.constructor.call(this,a)},initComponent:function(){_s2.DlnaMediaBlock.superclass.initComponent.call(this)},afterRender:function(){_s2.DlnaMediaBlock.superclass.afterRender.apply(this,arguments);this.el.update('<table cellpadding="0" cellspacing="10" border="0"><tr><td><div id="'+(this.allMediaId=Ext.id())+'"></div></td></tr><tr><td><div id="'+
(this.videoMediaId=Ext.id())+'"></div></td></tr><tr><td><div id="'+(this.audioMediaId=Ext.id())+'"></div></td></tr><tr><td><div id="'+(this.imageMediaId=Ext.id())+'"></div></td></tr></table>');this.allMediaCB=new Ext.UI.Checkbox({boxLabel:_TR("ALL"),listeners:{check:function(){if(this.protocol){this.fireEvent("sharechanged",this);this.updateState()}},scope:this}});this.videoMediaCB=new Ext.UI.Checkbox({boxLabel:_TR("VIDEO"),listeners:{check:function(){if(this.protocol){this.fireEvent("sharechanged",
this);this.updateState()}},scope:this}});this.audioMediaCB=new Ext.UI.Checkbox({boxLabel:_TR("AUDIO"),listeners:{check:function(){if(this.protocol){this.fireEvent("sharechanged",this);this.updateState()}},scope:this}});this.imageMediaCB=new Ext.UI.Checkbox({boxLabel:_TR("IMAGES"),listeners:{check:function(){if(this.protocol){this.fireEvent("sharechanged",this);this.updateState()}},scope:this}});this.allMediaCB.render(this.allMediaId);this.videoMediaCB.render(this.videoMediaId);this.audioMediaCB.render(this.audioMediaId);
this.imageMediaCB.render(this.imageMediaId)},updateState:function(){if(this.allMediaCB.checked){this.videoMediaCB.setDisabled(true);this.audioMediaCB.setDisabled(true);this.imageMediaCB.setDisabled(true);this.videoMediaCB.setValue(false,true);this.audioMediaCB.setValue(false,true);this.imageMediaCB.setValue(false,true);this.protocol.putMediaType("All")}else if(this.videoMediaCB.checked&&this.imageMediaCB.checked&&this.audioMediaCB.checked){this.allMediaCB.setDisabled(false);this.videoMediaCB.setDisabled(true);
this.audioMediaCB.setDisabled(true);this.imageMediaCB.setDisabled(true);this.allMediaCB.setValue(true,true);this.videoMediaCB.setValue(false,true);this.audioMediaCB.setValue(false,true);this.imageMediaCB.setValue(false,true);this.protocol.putMediaType("All")}else if(this.videoMediaCB.checked&&this.audioMediaCB.checked){this.allMediaCB.setValue(false,true);this.imageMediaCB.setValue(false,true);this.protocol.putMediaType("Video,Audio")}else if(this.imageMediaCB.checked&&this.audioMediaCB.checked){this.allMediaCB.setValue(false,
true);this.videoMediaCB.setValue(false,true);this.protocol.putMediaType("Images,Audio")}else if(this.videoMediaCB.checked&&this.imageMediaCB.checked){this.allMediaCB.setValue(false,true);this.audioMediaCB.setValue(false,true);this.protocol.putMediaType("Images,Video")}else{if(this.videoMediaCB.checked)this.protocol.putMediaType("Video");else if(this.audioMediaCB.checked)this.protocol.putMediaType("Audio");else this.imageMediaCB.checked&&this.protocol.putMediaType("Images");this.allMediaCB.setDisabled(false);
this.videoMediaCB.setDisabled(false);this.audioMediaCB.setDisabled(false);this.imageMediaCB.setDisabled(false)}},disableAll:function(){this.allMediaCB.setDisabled(true);this.videoMediaCB.setDisabled(true);this.audioMediaCB.setDisabled(true);this.imageMediaCB.setDisabled(true);this.allMediaCB.setValue(false,true);this.videoMediaCB.setValue(false,true);this.audioMediaCB.setValue(false,true);this.imageMediaCB.setValue(false,true)},enableAll:function(){this.allMediaCB.setDisabled(false);this.videoMediaCB.setDisabled(false);
this.audioMediaCB.setDisabled(false);this.imageMediaCB.setDisabled(false);this.allMediaCB.setValue(false,true);this.videoMediaCB.setValue(false,true);this.audioMediaCB.setValue(false,true);this.imageMediaCB.setValue(false,true)},onSerOnOffClicked:function(a){if(a.isOff()){this.disableAll();this.protocol.putDefaultAccess("Disabled")}else{this.enableAll();this.protocol.putDefaultAccess("ReadOnly")}},load:function(a,b,c){this.share=a;this.protocol=b;this.serviceBtn=c;this.serviceBtn.on("valuechanged",
this.onSerOnOffClicked,this);if(this.serviceBtn.ison==false)this.disableAll();else{a=this.protocol.getMediaType();this.allMediaCB.setValue(false,true);this.videoMediaCB.setValue(false,true);this.audioMediaCB.setValue(false,true);this.imageMediaCB.setValue(false,true);switch(a){case "All":this.allMediaCB.setValue(true,true);break;case "Audio":this.audioMediaCB.setValue(true,true);break;case "Video":this.videoMediaCB.setValue(true,true);break;case "Images":this.imageMediaCB.setValue(true,true);break;
case "Video,Audio":this.videoMediaCB.setValue(true,true);this.audioMediaCB.setValue(true,true);break;case "Images,Audio":this.imageMediaCB.setValue(true,true);this.audioMediaCB.setValue(true,true);break;case "Images,Video":this.imageMediaCB.setValue(true,true);this.videoMediaCB.setValue(true,true);break}this.updateState()}}});Ext.namespace("_s2");
_s2.AdsSearchList=Ext.extend(Ext.UI.Menu,{cls:"x-sh-inspector-searchmenu",tpl:"div",constructor:function(){this.renderTo=Ext.getBody();_s2.AdsSearchList.superclass.constructor.apply(this,arguments);this.rows=[];this.addEvents("itemchecked")},afterRender:function(){_s2.AdsSearchList.superclass.afterRender.apply(this,arguments);this.renderGrid()},onHide:function(){_s2.AdsSearchList.superclass.onHide.apply(this,arguments)},getHeader:function(a,b){return b==
"http"?'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("NAME")+'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;">'+_TR("ACCESS")+"</td></tr></table>":'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("NAME")+
'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;">'+_TR("READ_ONLY")+'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;">'+_TR("READ_WRITE")+"</td></tr></table>"},renderGrid:function(){this.el.update('<div id="'+(this.headerNodeId=Ext.id())+'">'+this.getHeader("x-sh-inspector-table")+'</div><div id="'+(this.dataNodeId=Ext.id())+'" class="x-sh-inspector-grid"></div><div id="'+(this.emptyNodeId=Ext.id())+'" class="x-sh-inspector-grid"><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;">'+
_TR("NO_RESULTS")+"</td></tr></table></div>");this.dataNode=Ext.get(this.dataNodeId);this.emptyNode=Ext.get(this.emptyNodeId);this.scroller=new Ext.UI.Scroller({dom:this.dataNode.dom,type:"vertical"});this.scroller.reg()},loadData:function(a,b,c,d,e){Ext.get(this.headerNodeId).update(this.getHeader("x-sh-inspector-table",e));for(var f=0;f<this.rows.length;++f){this.rows[f].readonly.destroy();this.rows[f].readwrite&&this.rows[f].readwrite.destroy()}this.rows=[];for(f=0;f<b.length;++f){group=_a(b[f],
"_i2v");this.rows.push({type:"group",name:group.getName(),email:"",value:group})}for(f=0;f<a.length;++f){user=_a(a[f],"_i2z");this.rows.push({type:"user",name:user.getName(),email:user.getEmail(),value:user})}a="";for(f=0;f<this.rows.length;++f)a+='<table id="'+(this.rows[f].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(f%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+
this.rows[f].type+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" title="'+this.rows[f].name+'">'+this.rows[f].name+'</div></td><td id="'+(this.rows[f].readonlyNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td>'+(e=="http"?"":'<td id="'+(this.rows[f].readwriteNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td>')+"</tr></table>";this.dataNode.update(a);f=this.rows.length<1;this.dataNode.setDisplayed(!f);
this.emptyNode.setDisplayed(f);for(f=0;f<this.rows.length;++f){a=new Ext.UI.Checkbox({item:this.rows[f]});a.render(this.rows[f].readonlyNodeId);a.on("check",function(j){this.onUserChecked(j,"ReadOnly")},this);if(e!="http"){var g=new Ext.UI.Checkbox({item:this.rows[f]});g.render(this.rows[f].readwriteNodeId);g.on("check",function(j){this.onUserChecked(j,"ReadWrite")},this)}if(c==="ReadOnly"||c==="5"){a.hide();a.setDisabled(true)}else if(c==="ReadWrite"||c==="7"){g&&g.hide();g&&g.setDisabled(true)}this.rows[f].readonly=
a;this.rows[f].readwrite=g;this.rows[f].row=Ext.get(this.rows[f].itemNodeId);for(b=0;b<d.length;++b){var h=d[b];if(h.type==this.rows[f].type&&h.name==this.rows[f].name){a.setValue(h.readonly.getValue(),true);g&&h.readwrite&&g.setValue(h.readwrite.getValue(),true);break}}}},onUserChecked:function(a,b){var c=a.item;a.checked||(b="Disabled");this.fireEvent("itemchecked",c.type,c.value,b)}});_._2("_s2");
_s2.BaseAccessGroup=Ext.extend(Ext.Component,{protocol:"",initComponent:function(){this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager();_s2.BaseAccessGroup.superclass.initComponent.call(this)},afterRender:function(){this.button=this.getOnOffBtn();this.button.on("valuechanged",this.onTypeChange,this);this.buttonCt=this.el.createChild({tag:"div",style:"padding-bottom: 10px;"});this.button.render(this.buttonCt);this.sidebar=new Ext.UI.SideBar;
this.sidebar.render(this.el)},load:function(a,b){if(a=_a(a,"_i38")){this.sidebar.show();this.sidebar.selectTab(0);this.share=a;this.button.changeUI(!this.getProtocolByName(this.protocol).getAvailable(),false);this.onShareLoaded(a,b);this.checkMigration()}_a(a,"IHomeFolderOptions")&&this.sidebar.hide()},setHeight:function(){},onShareLoaded:function(){},onTypeChange:function(a){a=!a.isOff();_s0.GA.trackEvent({eventCategory:"Shares-NetworkAccess",eventAction:"click",eventLabel:this.protocol+
":"+(a?"On":"Off")});this.protocol=="afp"&&a&&Ext.UI.MessageBox.show({title:"AFP",msg:_TR("TIME_MACHINE_AFP_WARNING"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,fn:function(){}});this.share&&this.getProtocolByName(this.protocol).putAvailable(a);this.fireEvent("sharechanged",this)},getProtocolByName:function(a){var b=this.share.getProtocolByName(a);if(!b||b==_4){b=_a(new _1.sproto(a),"_i3c");this.share.appendProtocol(b)}return b},getOnOffBtn:function(){return new Ext.UI.ButtonOnOff({cls:"x-sh-inspector-center",
textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),labelwidth:40})},checkMigration:function(){this.button.setDisabled(this.share.getMigration())}});_._2("_s2");
_s2.CifsAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"cifs",initComponent:function(){_s2.CifsAccessGroup.superclass.initComponent.call(this);this.addEvents("refresh")},afterRender:function(){_s2.CifsAccessGroup.superclass.afterRender.apply(this,arguments);this.encryptionCmbCt=this.el.createChild({tag:"div"});this.encryptionCmbCt.update('<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-text">'+_TR("SMB3_ENCRYPTION_TITLE")+
':</td><td id="'+(this.encryptionCmbHomeID=Ext.id())+'"></td></tr></table>');this.encryptionHomeCmb=new Ext.UI.ComboBox({mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["enabled","Enabled"],["desired","Desired"],["required","Required"]]}),valueField:"id",displayField:"text",width:200,renderTo:this.encryptionCmbHomeID,listeners:{beforeselect:function(a,b,c){this.onBeforeEncryptionSelect(a,b,c)},select:this.onEncryptionHomeSelect,scope:this}});this.button.on("beforeclick",
this.onButtonBeforeClick,this);this.usersBlock=new _s2.UsersBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this);this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol))},scope:this}});this.usersBlock.on("refresh",this.onUsersBlockRefresh,this);this.sidebar.addTab(_TR("SECURITY"),this.usersBlock);this.hostsBlock=new _s2.HostsBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.sidebar.addTab(_TR("HOSTS"),
this.hostsBlock);this.dfsBlock=new _s2.DFSBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.dfsBlock.on("refresh",this.onDFSBlockRefresh,this);this.dfsGroup=new Ext.Component;this.dfsGroup.on("afterrender",this.onDfsGroupReady,this);this.sidebar.addTab(_TR("FOLDERS"),this.dfsGroup);this.specificGroup=new Ext.BoxComponent({width:400});this.specificGroup.on("afterrender",this.onSpecificGroupReady,this);this.sidebar.addTab(_TR("SPECIFIC_SETTINGS"),
this.specificGroup)},onButtonBeforeClick:function(a){if(!a.isOff()){for(var b=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemServiceManager().getSystemServices(),c,d,e=0;e<b.length;++e){c=_a(b[e],"_i32");if(c.getName()=="readycloud"){d=c;break}}if(d&&d.getEnable()){Ext.UI.MessageBox.confirm({title:_TR("CIFS_SETTINGS"),msg:_TR("SHARES_DISABLE_CIFS"),icon:Ext.MessageBox.WARNING,width:400,fn:function(f){f=="yes"&&a.setValue(true)},scope:this});return false}}},onDfsGroupReady:function(a){var b=
'<div class="x-sh-inspector-users"><div class="x-sh-inspector-separator"></div><div id="'+(this.dfsSubNodeId=Ext.id())+'"></div></div>';a.el.update(b);this.dfsBlock.render(this.dfsSubNodeId)},onDFSBlockRefresh:function(){this.fireEvent("refresh",this)},onUsersBlockRefresh:function(){this.fireEvent("refresh",this)},onShareLoaded:function(a,b){this.share=a;this.encryptionCmbCt.setVisible(!!_a(a,"IHomeFolderOptions"));this.ejectable=b;this.tryToLoadData()},loadUsersAndGroups:function(a,b,c,d,
e){this.adsMode=c;this.users=a;this.groups=b;this.rcusers=d;this.rcowner=e;this.tryToLoadData()},tryToLoadData:function(){this.share&&this.users&&this.groups&&this.loadData()},loadData:function(){this.loadSpecifiSettings();var a=this.getProtocolByName(this.protocol);this.usersBlock.load(this.share,a,this.users,this.groups,this.adsMode,this.rcusers,this.rcowner);this.hostsBlock.load(this.share,a);this.ejectable||this.share.isReadyDRShare()?this.sidebar.hideTab(2):this.sidebar.showTab(2);this.dfsBlock.loadDFsSetting(this.share,
a);this.dfsBlock.setVisible(!this.ejectable)},onSpecificGroupReady:function(a){var b='<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-text" style="width: 60%;">'+_TR("SMB3_ENCRYPTION_TITLE")+':</td><td id="'+(this.encryptionCmbID=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("STRICT_SYNC")+':</td><td id="'+(this.strictSyncId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("HIDE_THIS_SHARE")+':</td><td id="'+
(this.hideShareNodeId=Ext.id())+'"></td></tr><tr style="display:none"><td class="x-sh-text" style="width: 60%;">'+_TR("FS_CASE_INSENSITIVE")+':</td><td><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.insensitiveId=Ext.id())+'"></td><td><div id="'+(this.insensitiveHelpId=Ext.id())+'"></div></td></tr></table><td></tr></table>';a.el.update(b);this.strictSyncCheck=new Ext.UI.Checkbox;this.strictSyncCheck.on("check",this.onStrictSyncCheck,this);this.strictSyncCheck.render(this.strictSyncId);
this.hideShareCheck=new Ext.UI.Checkbox;this.hideShareCheck.on("check",this.onHideShareCheck,this);this.hideShareCheck.render(this.hideShareNodeId);this.insensitiveCheck=new Ext.UI.Checkbox;this.insensitiveCheck.on("check",this.onInsensitiveCheck,this);this.insensitiveCheck.render(this.insensitiveId);new Ext.UI.RoundButton({cls:"x-frontview-btn-info",style:"margin-left: 5px;",renderTo:this.insensitiveHelpId,listeners:{afterrender:function(c){new Ext.UI.ToolTip(c.el,{html:_TR("FS_CASE_INSENSITIVE_TOOLTIP")})}}});
this.encryptionCmb=new Ext.UI.ComboBox({mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["enabled","Enabled"],["desired","Desired"],["required","Required"]]}),valueField:"id",displayField:"text",width:200,renderTo:this.encryptionCmbID,listeners:{beforeselect:function(c,d,e){this.onBeforeEncryptionSelect(c,d,e)},select:this.onEncryptionSelect,scope:this}})},onBeforeEncryptionSelect:function(a){this.lastEncriptionSelTxt=a.lastSelectionText},onEncryptionSelect:function(a,
b){var c=this.getProtocolByName(this.protocol),d=this.lastEncriptionSelTxt.toLowerCase(),e=this.usersBlock.anonymousCheck;e.setDisabled(false);b.data.id=="desired"||b.data.id=="required"?Ext.UI.MessageBox.show({title:"",msg:_TR("SMB3_ENCRYPTION_PERSHARE_MESSAGE"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.INFO,fn:function(f){if(f=="cancel")a.setValue(d);else{c.putSmbEncryptOption(b.data.id);e.setValue(false);e.setDisabled(true)}}}):c.putSmbEncryptOption("");this.loadSpecifiSettings();this.fireEvent("sharechanged",
this)},onEncryptionHomeSelect:function(a,b){a=this.getProtocolByName(this.protocol);this.lastEncriptionSelTxt.toLowerCase();b.data.id=="desired"||b.data.id=="required"?a.putSmbEncryptOption(b.data.id):a.putSmbHomeEncryptOption("");this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},setEncryptionStatus:function(a){var b=this.getProtocolByName(this.protocol),c=_a(this.share,"IHomeFolderOptions")?this.encryptionHomeCmb:this.encryptionCmb;c.setValue("Enabled");if(a){if(a=="desired"||
a=="required"){this.usersBlock.anonymousCheck.setValue(false);this.usersBlock.anonymousCheck.setDisabled(true)}else this.usersBlock.anonymousCheck.setDisabled(false);c.disable(true);a=a.toLowerCase();a=a[0].toUpperCase()+a.substring(1,a.length);c.setValue(a)}else{c.enable(true);a=b.getSmbEncryptOption();a!=_4&&a!=""&&c.setValue(a)}},loadSpecifiSettings:function(){var a=this.getProtocolByName(this.protocol),b;b=a.getStrictSync()=="1";this.strictSyncCheck.setValue(b,true);b=a.getShareDisplayOption()==
"1";this.hideShareCheck.setValue(b,true);b=a.getFsCaseInsensitive()=="1";this.insensitiveCheck.setValue(b,true);a=this.share.getMigration();this.strictSyncCheck.setDisabled(a);this.hideShareCheck.setDisabled(a);this.insensitiveCheck.setDisabled(a)},checkPermissionAutoSet:function(){},onHideShareCheck:function(a,b){this.getProtocolByName(this.protocol).putShareDisplayOption(b);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},setInsensitiveVal:function(a){this.getProtocolByName(this.protocol).putFsCaseInsensitive(a);
this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onInsensitiveCheck:function(a,b){b?Ext.UI.MessageBox.show({title:"",msg:_TR("FS_CASE_INSENSITIVE_WARNING"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.WARNING,fn:function(c){c=="ok"&&this.setInsensitiveVal(b)}.bind(this)}):this.setInsensitiveVal(b)},onStrictSyncCheck:function(a,b){this.getProtocolByName(this.protocol).putSStrictSync(b);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},getAccessCombo:function(){return new Ext.UI.ComboBox({width:100,
typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["Disabled",_TR("DISABLED")],["ReadOnly",_TR("READ_ONLY")],["ReadWrite",_TR("READ_WRITE")]]}),valueField:"id",displayField:"text"})}});_._2("_s2");
_s2.NfsAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"nfs",afterRender:function(a){_s2.NfsAccessGroup.superclass.afterRender.call(this,a);this.hostsBlock=new _s2.NfsHostsBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.sidebar.addTab(_TR("HOSTS"),this.hostsBlock);this.advBlock=new _s2.NfsAdvancedBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});
this.sidebar.addTab(_TR("SPECIFIC_SETTINGS"),this.advBlock)},onShareLoaded:function(){this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol));this.advBlock.load(this.share,this.getProtocolByName(this.protocol))}});_._2("_s2");
_s2.AfpAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"afp",initComponent:function(){_s2.AfpAccessGroup.superclass.initComponent.call(this);this.addEvents("refresh")},afterRender:function(a){_s2.AfpAccessGroup.superclass.afterRender.call(this,a);this.usersBlock=new _s2.UsersBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.usersBlock.on("refresh",this.onUsersBlockRefresh,this);this.sidebar.addTab(_TR("SECURITY"),
this.usersBlock);this.specificGroup=new Ext.BoxComponent({width:400});this.specificGroup.on("afterrender",this.onSpecificGroupReady,this);this.sidebar.addTab(_TR("SPECIFIC_SETTINGS"),this.specificGroup)},onUsersBlockRefresh:function(){this.fireEvent("refresh",this)},onShareLoaded:function(a){this.share=a;this.tryToLoadData()},loadUsersAndGroups:function(a,b,c,d,e){this.adsMode=c;this.users=a;this.groups=b;this.rcusers=d;this.rcowner=e;this.tryToLoadData()},tryToLoadData:function(){this.share&&this.users&&
this.groups&&this.loadData()},loadData:function(){if(this.share.isReadyDRShare())this.sidebar.hideTab(1);else{this.sidebar.showTab(1);this.loadSpecifiSettings()}this.usersBlock.load(this.share,this.getProtocolByName(this.protocol),this.users,this.groups,this.adsMode,this.rcusers,this.rcowner)},onSpecificGroupReady:function(a){var b='<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-text" style="width: 60%;">'+_TR("PERMISSIONS_AUTOSET")+':</td><td id="'+(this.folderPermissionNodeId=
Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator"></div><table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FOLDER_CREATION_GROUP_RIGHTS")+':</td><td id="'+(this.folderGroupNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FOLDER_CREATION_EVERY_RIGHTS")+':</td><td id="'+(this.folderEveryoneNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FILE_CREATION_GROUP_RIGHTS")+
':</td><td id="'+(this.fileGroupNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FILE_CREATION_EVERY_RIGHTS")+':</td><td id="'+(this.fileEveryoneNodeId=Ext.id())+'"></td></tr></table>';a.el.update(b);this.folderPermissionCheck=new Ext.UI.Checkbox;this.folderPermissionCheck.on("check",this.onFolderPermissionCheck,this);this.folderPermissionCheck.render(this.folderPermissionNodeId);this.folderGroupCombo=this.getAccessCombo();this.folderGroupCombo.on("select",this.onFolderGroupSelect,
this);this.folderGroupCombo.render(this.folderGroupNodeId);this.folderEveryCombo=this.getAccessCombo();this.folderEveryCombo.on("select",this.onFolderEverySelect,this);this.folderEveryCombo.render(this.folderEveryoneNodeId);this.fileGroupCombo=this.getAccessCombo();this.fileGroupCombo.on("select",this.onFileGroupSelect,this);this.fileGroupCombo.render(this.fileGroupNodeId);this.fileEveryCombo=this.getAccessCombo();this.fileEveryCombo.on("select",this.onFileEverySelect,this);this.fileEveryCombo.render(this.fileEveryoneNodeId)},
loadSpecifiSettings:function(){var a=this.getProtocolByName(this.protocol),b;b=a.getNewFileFolderPermAutoset()=="1";this.folderPermissionCheck.setValue(b,true);this.checkPermissionAutoSet(b);b=a.getFolderCreateGroupRights();this.folderGroupCombo.setValue(b);b=a.getFolderCreateEveryOneRights();this.folderEveryCombo.setValue(b);b=a.getFileCreateGroupRights();this.fileGroupCombo.setValue(b);b=a.getFileCreateEveryOneRights();this.fileEveryCombo.setValue(b);a=this.share.getMigration();this.folderPermissionCheck.setDisabled(a);
if(a){this.folderGroupCombo.disable();this.folderEveryCombo.disable();this.fileGroupCombo.disable();this.fileEveryCombo.disable()}},checkPermissionAutoSet:function(a){this.folderGroupCombo.setDisabled(!a);this.folderEveryCombo.setDisabled(!a);this.fileGroupCombo.setDisabled(!a);this.fileEveryCombo.setDisabled(!a)},onFolderPermissionCheck:function(a,b){this.getProtocolByName(this.protocol).putNewFileFolderPermAutoset(b);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onFolderGroupSelect:function(a,
b){a=b.data.id;this.getProtocolByName(this.protocol).putFolderCreateGroupRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onFolderEverySelect:function(a,b){a=b.data.id;this.getProtocolByName(this.protocol).putFolderCreateEveryOneRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onFileGroupSelect:function(a,b){a=b.data.id;this.getProtocolByName(this.protocol).putFileCreateGroupRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},
onFileEverySelect:function(a,b){a=b.data.id;this.getProtocolByName(this.protocol).putFileCreateEveryOneRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},getAccessCombo:function(){return new Ext.UI.ComboBox({width:100,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["Disabled",_TR("DISABLED")],["ReadOnly",_TR("READ_ONLY")],["ReadWrite",_TR("READ_WRITE")]]}),valueField:"id",displayField:"text"})}});_._2("_s2");
_s2.FtpAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"ftp",initComponent:function(){_s2.FtpAccessGroup.superclass.initComponent.call(this);this.addEvents("refresh")},afterRender:function(a){_s2.FtpAccessGroup.superclass.afterRender.call(this,a);this.usersBlock=new _s2.UsersBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this);this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol))},scope:this}});
this.usersBlock.on("afterrender",this.onUsersBlockAfterRender,this);this.usersBlock.on("refresh",this.onUsersBlockRefresh,this);this.sidebar.addTab(_TR("SECURITY"),this.usersBlock);this.hostsBlock=new _s2.HostsBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.sidebar.addTab(_TR("HOSTS"),this.hostsBlock);this.hostsBlock.enableFTPHostAccess()},onUsersBlockAfterRender:function(a){Ext.getDom(a.anonymousNodeId).style.display="none"},onUsersBlockRefresh:function(){this.fireEvent("refresh",
this)},onShareLoaded:function(a){this.share=a;this.tryToLoadData()},loadUsersAndGroups:function(a,b,c){this.adsMode=c;this.users=a;this.groups=b;this.tryToLoadData()},tryToLoadData:function(){this.share&&this.users&&this.groups&&this.loadData()},loadData:function(){this.usersBlock.load(this.share,this.getProtocolByName(this.protocol),this.users,this.groups,this.adsMode);this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol))},onSpecificGroupReady:function(a){var b='<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-text" style="width: 60%;">'+
_TR("PERMISSIONS_AUTOSET")+':</td><td id="'+(this.folderPermissionNodeId=Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator"></div><table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FOLDER_CREATION_GROUP_RIGHTS")+':</td><td id="'+(this.folderGroupNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FOLDER_CREATION_EVERY_RIGHTS")+':</td><td id="'+(this.folderEveryoneNodeId=Ext.id())+
'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FILE_CREATION_GROUP_RIGHTS")+':</td><td id="'+(this.fileGroupNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 60%;">'+_TR("FILE_CREATION_EVERY_RIGHTS")+':</td><td id="'+(this.fileEveryoneNodeId=Ext.id())+'"></td></tr></table>';a.el.update(b);this.folderPermissionCheck=new Ext.UI.Checkbox;this.folderPermissionCheck.on("check",this.onFolderPermissionCheck,this);this.folderPermissionCheck.render(this.folderPermissionNodeId);
this.folderGroupCombo=this.getAccessCombo();this.folderGroupCombo.on("select",this.onFolderGroupSelect,this);this.folderGroupCombo.render(this.folderGroupNodeId);this.folderEveryCombo=this.getAccessCombo();this.folderEveryCombo.on("select",this.onFolderEverySelect,this);this.folderEveryCombo.render(this.folderEveryoneNodeId);this.fileGroupCombo=this.getAccessCombo();this.fileGroupCombo.on("select",this.onFileGroupSelect,this);this.fileGroupCombo.render(this.fileGroupNodeId);this.fileEveryCombo=this.getAccessCombo();
this.fileEveryCombo.on("select",this.onFileEverySelect,this);this.fileEveryCombo.render(this.fileEveryoneNodeId)},loadSpecifiSettings:function(){var a=this.getProtocolByName(this.protocol),b;b=a.getNewFileFolderPermAutoset()=="1";this.folderPermissionCheck.setValue(b,true);this.checkPermissionAutoSet(b);b=a.getFolderCreateGroupRights();this.folderGroupCombo.setValue(b==_4?"":b);b=a.getFolderCreateEveryOneRights();this.folderEveryCombo.setValue(b==_4?"":b);b=a.getFileCreateGroupRights();this.fileGroupCombo.setValue(b==
_4?"":b);b=a.getFileCreateEveryOneRights();this.fileEveryCombo.setValue(b==_4?"":b);a=this.share.getMigration();this.folderPermissionCheck.setDisabled(a);if(a){this.folderGroupCombo.disable();this.folderEveryCombo.disable();this.fileGroupCombo.disable();this.fileEveryCombo.disable()}},checkPermissionAutoSet:function(a){this.folderGroupCombo.setDisabled(!a);this.folderEveryCombo.setDisabled(!a);this.fileGroupCombo.setDisabled(!a);this.fileEveryCombo.setDisabled(!a)},onFolderPermissionCheck:function(a,
b){this.getProtocolByName(this.protocol).putNewFileFolderPermAutoset(b);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onFolderGroupSelect:function(a,b){a=b.data.id;this.getProtocolByName(this.protocol).putFolderCreateGroupRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onFolderEverySelect:function(a,b){a=b.data.id;this.getProtocolByName(this.protocol).putFolderCreateEveryOneRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onFileGroupSelect:function(a,
b){a=b.data.id;this.getProtocolByName(this.protocol).putFileCreateGroupRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},onFileEverySelect:function(a,b){a=b.data.id;this.getProtocolByName(this.protocol).putFileCreateEveryOneRights(a);this.loadSpecifiSettings();this.fireEvent("sharechanged",this)},getAccessCombo:function(){return new Ext.UI.ComboBox({width:100,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["Disabled",
_TR("DISABLED")],["ReadOnly",_TR("READ_ONLY")],["ReadWrite",_TR("READ_WRITE")]]}),valueField:"id",displayField:"text"})}});_._2("_s2");
_s2.HttpAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"http",webdavOn:false,initComponent:function(){_s2.HttpAccessGroup.superclass.initComponent.call(this);this.addEvents("refresh")},afterRender:function(a){_s2.HttpAccessGroup.superclass.afterRender.call(this,a);this.usersBlock=new _s2.HttpUsersBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this);this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol))},
scope:this}});this.usersBlock.on("afterrender",this.onUsersBlockAfterRender,this);this.usersBlock.on("refresh",this.onUsersBlockRefresh,this);this.sidebar.addTab(_TR("SECURITY"),this.usersBlock);this.hostsBlock=new _s2.HostsBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.sidebar.addTab(_TR("HOSTS"),this.hostsBlock);this.hostsBlock.enableHTTPHostAccess();this.webdavBlock=new _s2.WebDavBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",
this)},scope:this}});this.sidebar.addTab(_TR("WEBDAV"),this.webdavBlock)},onUsersBlockAfterRender:function(a){Ext.getDom(a.anonymousNodeId).style.display="none"},onUsersBlockRefresh:function(){this.fireEvent("refresh",this)},changeUsersGridMaxHeight:function(a){this.groupHeight=a;this.recalcUsersGridMaxHeight()},recalcUsersGridMaxHeight:function(){if(this.groupHeight)this.usersBlock.setMaxHeight(this.groupHeight-(this.specificGroup.expanded?582:330))},onShareLoaded:function(a){this.share=a;this.tryToLoadData()},
loadUsersAndGroups:function(a,b,c){this.adsMode=c;this.users=a;this.groups=b;this.tryToLoadData()},tryToLoadData:function(){this.share&&this.users&&this.groups&&this.loadData()},loadData:function(){this.usersBlock.load(this.share,this.getProtocolByName(this.protocol),this.users,this.groups,this.adsMode);this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol));this.httpPro=this.getProtocolByName(this.protocol);this.webdavBlock.load(this.share,this.getProtocolByName(this.protocol))}});
_._2("_s2");_s2.DaapAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"daap",initComponent:function(){_s2.DaapAccessGroup.superclass.initComponent.call(this);this.addEvents("refresh")},afterRender:function(a){_s2.DaapAccessGroup.superclass.afterRender.call(this,a)}});_._2("_s2");
_s2.DlnaAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"dlna",initComponent:function(){_s2.DlnaAccessGroup.superclass.initComponent.call(this);this.addEvents("refresh")},afterRender:function(a){_s2.DlnaAccessGroup.superclass.afterRender.call(this,a);this.addEvents("refresh");this.mediaBlock=new _s2.DlnaMediaBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.sidebar.addTab("MEDIA SETTINGS",
this.mediaBlock)},onShareLoaded:function(){this.mediaBlock.load(this.share,this.getProtocolByName(this.protocol),this.button)}});_._2("_s2");
_s2.RsyncAccessGroup=Ext.extend(_s2.BaseAccessGroup,{protocol:"rsync",initComponent:function(){_s2.RsyncAccessGroup.superclass.initComponent.call(this);this.addEvents("refresh")},afterRender:function(a){_s2.RsyncAccessGroup.superclass.afterRender.call(this,a);this.usersBlock=new _s2.RsyncUsersBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this);this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol))},
scope:this}});this.sidebar.addTab(_TR("SECURITY"),this.usersBlock);this.hostsBlock=new _s2.HostsBlock({listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},scope:this}});this.sidebar.addTab(_TR("HOSTS"),this.hostsBlock)},onShareLoaded:function(a){this.share=a;this.loadData()},loadUsersAndGroups:function(){this.loadData()},loadData:function(){this.usersBlock.load(this.share,this.getProtocolByName(this.protocol));this.hostsBlock.load(this.share,this.getProtocolByName(this.protocol));
var a=this.usersBlock.defaultaccessCmb,b=a.getStore();b.loadData([]);if(this.share.isReadyDRShare()){b.loadData([["ReadOnly",_TR("READ_ONLY")]]);a.setValue("ReadOnly")}else b.loadData([["ReadWrite",_TR("READ_WRITE")],["ReadOnly",_TR("READ_ONLY")]])}});Ext.namespace("_s2");
_s2.UsersQuotasBlock=_._1(_s2.UsersBlock,{constructor:function(a){_s2.UsersQuotasBlock.superclass.constructor.call(this,a)},afterRender:function(){_s2.UsersQuotasBlock.superclass.afterRender.apply(this,arguments);this.anonymousCheck.hide()},getTableHeader:function(a){return'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell x-sh-inspector-grid-cell-name" style="width:185px;">'+
_TR("NAME")+'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;">'+_TR("QUOTA_MB")+'</td><td class="x-sh-inspector-grid-hcell" style="width:20px;text-align:center;"></td><td class="x-sh-inspector-grid-hcell" style="width:120px;text-align:center;">'+_TR("USED")+"</td></tr></table>"},getSearchList:function(){if(!this.searchList){this.searchList=new _s2.AdsQuotasSearchList({width:447,maxHeight:200});this.searchList.on("itemapply",this.onApplyClick,this)}return this.searchList},
loadData:function(){for(var a=0;a<this.items.length;++a){this.items[a].pUsed.destroy();this.items[a].tfQuota.destroy();this.items[a].bApply.destroy()}var b={},c,d,e,f={};this.items=[];var g=this.share.getNode().getGroupQuotas();for(a=0;a<g.length;++a){c=_a(g[a],"_i3g");d=c.getHardLimitMB();c=_a(g[a],"IShareGroupQuota");if((e=c.getGroupId())&&e!=_4&&d&&d!=_4){d=this.spSecurityManager.getGroupById(e);b[e]=c;this.items.push({type:"group",name:d?d.getName():c.getGroupName(),
id:e,gquota:c,secGroup:d})}}g=this.share.getNode().getUserQuotas();for(a=0;a<g.length;++a){c=_a(g[a],"_i3g");d=c.getHardLimitMB();c=_a(c,"IShareUserQuota");if((e=c.getUserId())&&e!=_4&&d&&d!=_4){d=this.spSecurityManager.getUserById(e);f[e]=d;this.items.push({type:"user",name:d?d.getName():c.getUserName(),id:e,uquota:c,secUser:d})}}for(a=0;a<this.groups.length;++a){d=_a(this.groups[a],"_i2v");b[d.getId()]||this.items.push({type:"group",name:d.getName(),id:d.getId(),
secGroup:d})}for(a=0;a<this.users.length;++a){d=_a(this.users[a],"_i2z");f[d.getId()]||this.items.push({type:"user",name:d.getName(),id:d.getId(),secUser:d})}b="";for(a=0;a<this.items.length;++a)b+='<table id="'+(this.items[a].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+this.items[a].type+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" style="width: 185px;" title="'+
this.items[a].name+'">'+this.items[a].name+'</div></td><td id="'+(this.items[a].tfQuotaNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td><td id="'+(this.items[a].bApplyNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:20px;"></td><td id="'+(this.items[a].pUsedNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:120px;"></td></tr></table>';this.dataNode.update(b);for(a=0;a<this.items.length;++a){b=new Ext.UI.ProgressIndicator({item:this.items[a],
width:116});b.render(this.items[a].pUsedNodeId);f=new Ext.UI.TextField({item:this.items[a],width:78,enableKeyEvents:true,maskRe:/\d/});f.render(this.items[a].tfQuotaNodeId);f.on("keydown",function(h){h.item.bApply.enable()},this);f.on("change",function(h){h.item.bApply.enable()},this);c=new Ext.UI.RoundButton({item:this.items[a],iconCls:"x-frontview-btn-apply",disabled:true});c.render(this.items[a].bApplyNodeId);c.on("click",this.onApplyClick,this);this.items[a].pUsed=b;this.items[a].tfQuota=f;this.items[a].bApply=
c;this.items[a].row=Ext.get(this.items[a].itemNodeId)}},appendRules:function(){for(var a=this.items.length,b=0;b<a;b+=1){var c;if(this.items[b].type=="user")c=_a(this.items[b].uquota,"_i3g");else if(this.items[b].type=="group")c=_a(this.items[b].gquota,"_i3g");if(c){var d=c.getHardLimitMB();if(d){d*=1;this.items[b].pUsed.updateProgress(c.getUsedMB()/d);this.items[b].tfQuota.setValue(d)}else{this.items[b].pUsed.updateProgress(0);this.items[b].tfQuota.setValue("")}}}},onApplyClick:function(a){var b=
false;a=a.item;var c=a.tfQuota.getValue();if(a.type=="user")if(a.uquota){c?_a(a.uquota,"_i3g").putHardLimitMB(c):this.share.getNode().removeUserQuota(a.uquota);b=true}else{if(a.secUser&&c){b=new _1.suquota;b=_a(b,"IShareUserQuota");b.putUserId(a.id);b=_a(b,"_i3g");b.putHardLimitMB(c);this.share.getNode().appendUserQuota(b);b=true}}else if(a.type=="group")if(a.gquota){c?_a(a.gquota,"_i3g").putHardLimitMB(c):this.share.getNode().removeGroupQuota(a.gquota);
b=true}else if(a.secGroup&&c){b=new _1.sgquota;b=_a(b,"IShareGroupQuota");b.putGroupId(a.id);b=_a(b,"_i3g");b.putHardLimitMB(c);this.share.getNode().appendGroupQuota(b);b=true}b&&this.spShareManager.commitShare(this.share.getNode(),"shares-volumes-commit-share")}});Ext.namespace("_s2");
_s2.AdsQuotasSearchList=Ext.extend(_s2.AdsSearchList,{constructor:function(a){_s2.AdsQuotasSearchList.superclass.constructor.call(this,a);this.addEvents("itemapply")},getHeader:function(a){return'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("NAME")+'</td><td class="x-sh-inspector-grid-hcell" style="width:180px;">'+_TR("EMAIL")+
'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;text-align:center;">'+_TR("QUOTA_MB")+'</td><td class="x-sh-inspector-grid-hcell" style="width:35px;text-align:center;"></td></tr></table>'},loadData:function(a,b,c,d){for(c=0;c<this.rows.length;++c){this.rows[c].tfQuota.destroy();this.rows[c].bApply.destroy()}this.rows=[];for(c=0;c<b.length;++c){group=_a(b[c],"_i2v");this.rows.push({type:"group",name:group.getName(),id:group.getId(),email:"",value:group,secGroup:group})}for(c=
0;c<a.length;++c){user=_a(a[c],"_i2z");this.rows.push({type:"user",name:user.getName(),id:user.getId(),email:user.getEmail(),value:user,secUser:user})}a="";for(c=0;c<this.rows.length;++c)a+='<table id="'+(this.rows[c].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(c%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+this.rows[c].type+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-uname x-ellipsis" title="'+
this.rows[c].name+'">'+this.rows[c].name+'</div></td><td class="x-sh-inspector-grid-cell" style="width:180px;"><div class="x-sh-inspector-grid-cell-umail x-ellipsis" title="'+this.rows[c].email+'">'+this.rows[c].email+'</div></td><td id="'+(this.rows[c].tfQuotaNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td><td id="'+(this.rows[c].bApplyNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:35px;"></td></tr></table>';this.dataNode.update(a);c=this.rows.length<
1;this.dataNode.setDisplayed(!c);this.emptyNode.setDisplayed(c);for(c=0;c<this.rows.length;++c){a=new Ext.UI.TextField({item:this.rows[c],width:78,enableKeyEvents:true,maskRe:/\d/});a.render(this.rows[c].tfQuotaNodeId);a.on("keypress",function(f){f.item.bApply.enable()},this);b=new Ext.UI.RoundButton({item:this.rows[c],iconCls:"x-frontview-btn-apply",disabled:true});b.render(this.rows[c].bApplyNodeId);b.on("click",this.onApplyClick,this);this.rows[c].tfQuota=a;this.rows[c].bApply=b;this.rows[c].row=
Ext.get(this.rows[c].itemNodeId);for(b=0;b<d.length;++b){var e=d[b];if(e.type==this.rows[c].type&&e.id==this.rows[c].id){a.setValue(e.tfQuota.getValue());if(e.type=="user")this.rows[c].uquota=e.uquota;else if(e.type=="group")this.rows[c].gquota=e.gquota;break}}}},onApplyClick:function(a){this.fireEvent("itemapply",a);this.hide()}});Ext.namespace("_s2");
_s2.RsyncUsersBlock=_._1(_9,Ext.Component,{constructor:function(a){_s2.RsyncUsersBlock.superclass.constructor.call(this,a);this.items=[]},initComponent:function(){_s2.UsersBlock.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spShareManager=a.getShareManager();this.spSecurityManager=a.getSecurityManager()},afterRender:function(){this.el.update('<table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td style="width:150px;" class="x-sh-inspector-rsync-cell">'+
_TR("DEFAULT_ACCESS")+_TR("COLON")+'</td><td id="'+(this.accessNodeId=Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator"></div><div id="'+(this.pwdNodeId=Ext.id())+'"></div><div class="x-sh-inspector-separator"></div><table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-col" style="width:145px;display:none;" id="'+(this.filterNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:145px;" id="'+(this.searchNodeId=Ext.id())+
'"></td><td class="x-sh-inspector-col" style="width:15px;" id="'+(this.searchBtnNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" align="right" id="'+(this.addNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:25px;" align="right" id="'+(this.removeNodeId=Ext.id())+'"></td><td class="x-sh-inspector-col" style="width:25px;" align="right" id="'+(this.settingsNodeId=Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator"></div>'+this.getTableHeader("x-sh-inspector-table")+
'<div id="'+(this.dataNodeId=Ext.id())+'" class="x-sh-inspector-grid"></div><div id="'+(this.emptyNodeId=Ext.id())+'" class="x-sh-inspector-grid"><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table><table class="x-sh-inspector-table ui-fwgrid-rowalt" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell x-sh-empty-msg">'+_TR("EMPTY")+'</td></tr></table><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table></div>');
this.dataNode=Ext.get(this.dataNodeId);this.emptyNode=Ext.get(this.emptyNodeId);this.pswd=new Ext.UI.Checkbox({bufferResize:0,boxLabel:"",checked:false,disabled:false,boxLabel:_TR("ENABLE_PASSWORD_PROTECTION"),listeners:{check:this.checked,scope:this}});this.pswd.render(this.pwdNodeId);this.filterCombo=this.getComboBox(145,[["all",_TR("ALL")],["user",_TR("USERS")],["group",_TR("GROUPS")]]);this.filterCombo.on("select",this.onFilterSelect,this);this.search=new Ext.UI.TextField({width:145,enableKeyEvents:true});
this.search.on("change",this.onSearchChanged,this);this.search.on("keyup",this.onSearchChanged,this);var a=new Ext.UI.RoundButton({cls:"x-frontview-btn-search"});a.on("click",this.onSearchClick,this);this.filterCombo.render(this.filterNodeId);this.search.render(this.searchNodeId);_.initElePHEvent(this.search,_TR("FILTER_BY_USERS"));a.render(this.searchBtnNodeId);this.addHostBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-plus-small"});this.addHostBtn.on("click",this.onAddUserClick,this);this.removeHostBtn=
new Ext.UI.RoundButton({cls:"x-frontview-btn-minus-small"});this.removeHostBtn.on("click",this.onRemoveUserClick,this);this.settingsUserBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-properties"});this.settingsUserBtn.on("click",this.onSettingsUserClick,this);this.addHostBtn.render(this.addNodeId);this.removeHostBtn.render(this.removeNodeId);this.settingsUserBtn.render(this.settingsNodeId);this.scroller=new Ext.UI.Scroller({dom:this.dataNode.dom,type:"vertical"});this.scroller.reg();this.userWindow=
new _s2.AddRsyncUser({listeners:{sharechanged:function(){this.load(this.share,this.protocol);this.fireEvent("sharechanged",this)},scope:this}});this.defaultaccessCmb=new Ext.UI.ComboBox({cls:"x-sh-inspector-settings-control-right",width:120,displayField:"text",valueField:"id",queryMode:"local",typeAhead:false,triggerAction:"all",lazyRender:false,mode:"local",forceSelection:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ReadWrite",_TR("READ_WRITE")],["ReadOnly",_TR("READ_ONLY")]]}),
listeners:{select:this.rightsChanged,scope:this}});this.defaultaccessCmb.render(this.accessNodeId)},getTableHeader:function(a){return'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("NAME")+'</td><td class="x-sh-inspector-grid-hcell" style="width:100px;text-align:center;">'+_TR("PASSWORD")+"</td></tr></table>"},load:function(a,b){this.share=a;this.protocol=b;this.loadData();
this.appendRules();this.filterCombo.onSelect(this.filterCombo.store.data.get(0),0)},loadData:function(){this.selectedItem=undefined;var a=true,b={},c;this.items=[];var d=this.protocol.getEnablePasswordProtection()=="Disabled";this.pswd.setValue(!d,true);this.disableControls(d);var e=this.existUsers=this.protocol.getUsers();for(d=0;d<e.length;++d){a=false;c=_a(e[d],"_i2z");this.spSecurityManager.getUserById(c.getId());b[c.getId()]=c;this.items.push({type:"user",name:c.getName(),user:c})}b=
"";for(d=0;d<this.items.length;++d)b+='<table id="'+(this.items[d].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(d%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+this.items[d].type+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" title="'+this.items[d].name+'">'+this.items[d].name+'</div></td><td class="x-sh-inspector-grid-cell" style="width:100px;text-align:center;">&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;</td></tr></table>';
this.dataNode.update(b);this.dataNode.setDisplayed(!a);this.emptyNode.setDisplayed(a);Ext.each(this.items,function(f){f.row=Ext.get(f.itemNodeId);f.row.on("click",function(){this.onItemSelect(f)},this)},this);this.removeHostBtn.disable();this.settingsUserBtn.disable()},appendRules:function(){var a=this.protocol.getDefaultAccess()=="ReadOnly"?"ReadOnly":"ReadWrite";this.defaultaccessCmb.setValue(a);this.protocol.putDefaultAccess(a)},checked:function(a,b){this.protocol.putEnablePasswordProtection(b?
"Enabled":"Disabled");if(b){this.addHostBtn.setDisabled(!b);this.removeHostBtn.setDisabled(b);this.settingsUserBtn.setDisabled(b)}else this.disableControls(!b);this.fireEvent("sharechanged",this)},disableControls:function(a){this.addHostBtn.setDisabled(a);this.removeHostBtn.setDisabled(a);this.settingsUserBtn.setDisabled(a)},onItemSelect:function(a){this.selectItem(a)},selectItem:function(a){this.selectedItem&&this.selectedItem.row.removeClass("ui-fwgrid-rowsel");if(this.selectedItem=a){this.selectedItem.row.addClass("ui-fwgrid-rowsel");
this.removeHostBtn.enable();this.settingsUserBtn.enable()}},deselectAll:function(){this.selectItem(null)},onFilterSelect:function(a,b,c){a=this.filterCombo.getValue();b=true;for(c=0;c<this.items.length;++c)if(a==this.items[c].type||a=="all"){this.items[c].row.setDisplayed(true);b=this.items[c].row.hidden=false}else{this.items[c].row.setDisplayed(false);this.items[c].row.hidden=true}this.search.setValue("");this.filterData("");this.dataNode.setDisplayed(!b);this.emptyNode.setDisplayed(b)},rightsChanged:function(a,
b){this.protocol.putDefaultAccess(b.data.id);this.fireEvent("sharechanged",this)},onSearchChanged:function(){this.filterData(this.search.getValue())},onSearchClick:function(){this.lastFilter=undefined;this.onSearchChanged()},filterData:function(a){a=a.toLowerCase();a=new RegExp(a);for(var b=true,c=0,d=0;d<this.items.length;++d)if(!this.items[d].row.hidden)if(a.exec(this.items[d].name.toLowerCase())==null)this.items[d].row.setDisplayed(false);else{this.items[d].row.setDisplayed(true);this.items[d].row.removeClass("ui-fwgrid-row").removeClass("ui-fwgrid-rowalt");
this.items[d].row.addClass("ui-fwgrid-row"+(++c%2==1?"":"alt"));b=false}this.dataNode.setDisplayed(!b);this.emptyNode.setDisplayed(b)},getComboBox:function(a,b){return new Ext.UI.ComboBox({width:a,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:b}),valueField:"id",displayField:"text"})},onAddUserClick:function(){this.userWindow.setArgs({share:this.share,protocol:this.protocol,user:undefined,existUsers:this.existUsers});this.userWindow.show()},
onRemoveUserClick:function(){this.selectedItem&&Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("WARN_DELETION"),this.selectedItem.name),fn:function(a){a=="yes"&&this.removeUser()},scope:this})},onSettingsUserClick:function(){if(this.selectedItem){this.userWindow.setArgs({share:this.share,protocol:this.protocol,user:this.selectedItem.user,existUsers:this.existUsers});this.userWindow.show()}},removeUser:function(){this.protocol.removeUser(this.selectedItem.user);this.load(this.share,
this.protocol);this.fireEvent("sharechanged",this)}});Ext.namespace("_s2");
_s2.AddFolder=Ext.extend(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,help:"shares_wnd_add_folder",constructor:function(a){this.title=_TR("NEW_DFS");this.html=this.getHtml();this.fbar=this.getFooter();_s2.AddFolder.superclass.constructor.call(this,a)},initComponent:function(){this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager();_s2.AddFolder.superclass.initComponent.call(this)},
getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-sh-text x-sh-wnd-addfolder-text-name">'+_TR("DFS_NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td class="x-sh-text x-sh-wnd-addfolder-text-address">'+_TR("DFS_ADDRESS")+':</td><td id="'+(this.tfAddressId=Ext.id())+'"></td></tr><tr><td class="x-sh-text x-sh-wnd-addfolder-text-share">'+_TR("DFS_REMOTE_SHARE")+':</td><td id="'+(this.tfShareId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=
new Ext.UI.Button({text:_TR("ADD"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s2.AddFolder.superclass.afterRender.call(this,a);this.tfName=new Ext.UI.TextField({enableKeyEvents:true,width:310,tooltipCfg:{html:_TR("SHARE_INSPECTOR_ERRORTIP_NAME")},renderTo:this.tfNameId,listeners:{keyup:this.validate,scope:this}});
this.tfAddress=new Ext.UI.TextField({enableKeyEvents:true,width:310,tooltipCfg:{html:_TR("SHARE_INSPECTOR_ERRORTIP_IP")},renderTo:this.tfAddressId,listeners:{keyup:this.validate,scope:this}});this.tfShare=new Ext.UI.TextField({enableKeyEvents:true,width:310,tooltipCfg:{html:_TR("SHARE_INSPECTOR_ERRORTIP_SHARENAME")},renderTo:this.tfShareId,listeners:{keyup:this.validate,scope:this}})},onAddClick:function(){if(this.validate()){var a=this.tfName.getValue(),b=this.tfAddress.getValue(),c=this.tfShare.getValue();
this.dfsview.getStore().add([new Ext.data.Record({name:a,address:b,remoteshare:c})]);var d=_a(new _1.sprotodfs,"_i3d");d.putName(a);d.putAddress(b);d.putRemoteShare(c);this.protocol.appendDFSFolder(d);this.fireEvent("sharechanged",this);this.hide()}},load:function(a,b,c){this.share=a;this.protocol=b;this.dfsview=c},validate:function(){var a=true;this.removeClass("x-sh-wnd-addfolder-err-name");this.removeClass("x-sh-wnd-addfolder-err-address");this.removeClass("x-sh-wnd-addfolder-err-share");
var b=this.tfName.getValue(),c=this.tfAddress.getValue(),d=this.tfShare.getValue();if(!_.isValidFolderName(b)){this.addClass("x-sh-wnd-addfolder-err-name");a=false}if(!_.isValidIPAddress(c)){this.addClass("x-sh-wnd-addfolder-err-address");a=false}if(_.isValidShareName(d)){c=this.dfsview.getStore().data.items;for(d=0;d<c.length;d++){var e=c[d];if(e&&e.data.name==b){this.addClass("x-sh-wnd-addfolder-err-name");a=false;break}}}else{this.addClass("x-sh-wnd-addfolder-err-share");a=false}return a},
clear:function(){this.removeClass("x-sh-wnd-addfolder-err-name");this.removeClass("x-sh-wnd-addfolder-err-address");this.removeClass("x-sh-wnd-addfolder-err-share");this.tfName.reset();this.tfAddress.reset();this.tfShare.reset();this.center();this.tfName.focus(false,true)}});_._2("_s2");
_s2.AddRsyncUser=_._1(Ext.UI.Window,_i2y,{help:"shares_wnd_add_rsuser",constructor:function(){_.apply(this,{modal:true,autoWidth:true,resizable:false,bodyCssClass:"x-sh-wnd-dataset",minimizable:false,maximizable:false,title:_TR("NEW_USER"),html:this.getHtml(),fbar:this.getFooter()});_s2.AddRsyncUser.superclass.constructor.apply(this,arguments)},initComponent:function(){_s2.AddRsyncUser.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");if(a)this.spShareManager=a.getShareManager()},getHtml:function(){return'<table cellpadding="0" cellspacing="0" style="width:370px;"><tr><td class="x-sh-text" id="'+(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" id="'+(this.lPasswordId=Ext.id())+'">'+_TR("PASSWORD")+_TR("COLON")+'</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" id="'+(this.lRePasswordId=Ext.id())+'">'+
_TR("RE_ENTER_PASSWORD")+_TR("COLON")+'</td><td id="'+(this.tfRePasswordId=Ext.id())+'"></td></tr></table>'},getFooter:function(){return[{xtype:"uibutton",text:_TR("APPLY"),handler:this.onAddUserClicked,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}]},afterRender:function(){_s2.AddRsyncUser.superclass.afterRender.apply(this,arguments);this.tfName=new Ext.UI.TextField({width:230,inputMaxLength:31,cellCls:"x-sec-editor",
tooltipCfg:{html:_TR("USERS_ERRORTIP_NAME")}});this.tfPassword=new Ext.UI.TextField({width:230,inputType:"password",cellCls:"x-sec-editor",tooltipCfg:{html:_TR("USERS_ERRORTIP_PWD")}});this.tfRePassword=new Ext.UI.TextField({width:230,inputType:"password",cellCls:"x-sec-editor",tooltipCfg:{html:_TR("USERS_ERRORTIP_PWD")}});this.tfName.render(this.tfNameId);this.tfPassword.render(this.tfPasswordId);this.tfRePassword.render(this.tfRePasswordId);this.lName=Ext.get(this.lNameId);this.lPassword=Ext.get(this.lPasswordId);
this.lRePassword=Ext.get(this.lRePasswordId)},onShow:function(){this.clearErrors();this.setTitle(this.user?_TR("UPDATE_USER"):_TR("NEW_USER"));this.tfName.setDisabled(this.user);this.tfName.setValue(this.user?this.user.getName():"");this.tfPassword.setValue(this.user?this.user.getPassword():"");this.tfRePassword.setValue(this.user?this.user.getPassword():"");this.center()},onAddUserClicked:function(){this.clearErrors();var a=false,b=this.tfName.getValue().trim(),c=this.tfPassword.getValue(),d=this.tfRePassword.getValue(),
e=(new RegExp(/^[a-z_][a-z0-9_-]{0,30}$/i)).exec(b);if(!e||e.length!=1||e[0].length!=b.length||!this.user&&this.existUserNames&&this.existUserNames.indexOf(b)!=-1){a=true;this.showError(this.lName);this.tfName.focus(false,true);if(this.tfName.tooltip)this.tfName.tooltip.enabled=true}if(c==""||c!=d){this.showError(this.lPassword);this.showError(this.lRePassword);if(this.tfPassword.tooltip)this.tfPassword.tooltip.enabled=true;if(this.tfRePassword.tooltip)this.tfRePassword.tooltip.enabled=true;if(!a){this.tfPassword.focus(false,
true);a=true}}if(!a){this.hide();if(this.user){this.user.putName(b);this.user.putPassword(c)}else{a=_a(new _1.user,"_i2z");a.putName(b);a.putId(b);a.putPassword(c);this.protocol.appendUser(a)}this.fireEvent("sharechanged",this)}},clearErrors:function(){_.each([this.tfName,this.tfPassword,this.tfRePassword],function(a){!a.tooltip||(a.tooltip.enabled=false)});_.each([this.lName,this.lPassword,this.lRePassword],function(a){a.removeClass("x-sec-label-error")})},clearValues:function(){_.each([this.tfName,
this.tfPassword,this.tfRePassword],function(a){a.setValue("")})},showError:function(a){a.addClass("x-sec-label-error")},setArgs:function(a){_.apply(this,a);this.existUserNames=[];this.existUsers&&_.each(this.existUsers,function(b){(b=_a(b,"_i2z"))&&this.existUserNames.push(b.getName())},this)}});Ext.namespace("_s2");
_s2.DFSBlock=_._1(_9,Ext.Component,IPromptWindowEvents,{constructor:function(a){_s2.DFSBlock.superclass.constructor.call(this,a)},initComponent:function(){_s2.DFSBlock.superclass.initComponent.call(this);this.on("sharechanged",function(){this.loadDFsSetting(this.share,this.protocol)},this)},afterRender:function(){_s2.UsersBlock.superclass.afterRender.apply(this,arguments);this.el.update('<div id="'+(this.enableDfsBtnId=Ext.id())+'"></div><div class="x-sh-inspector-separator"></div><table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td id="'+
(this.searchFieldId=Ext.id())+'" style="width: 250px; padding-right: 5px;"></td><td id="'+(this.searchBtnId=Ext.id())+'"style="width:30px;"></td><td id="'+(this.plusBtnId=Ext.id())+'" align="right"></td><td id="'+(this.minusBtnId=Ext.id())+'" style="width:30px;padding-left: 5px;"></td></tr><tr><td id="'+(this.dfsviewId=Ext.id())+'" colspan="5" style="padding-top: 5px;"></td></tr></table><div class="x-sh-inspector-separator"></div>');this.enableDfsChb=new Ext.UI.Checkbox({boxLabel:_TR("ENABLE_DFS"),
listeners:{check:function(a,b){this.disableDFScomps(!b);if(this.protocol){this.protocol.putEnableDFS(b);this.fireEvent("sharechanged",this)}},scope:this}});this.enableDfsChb.render(this.enableDfsBtnId);this.searchField=new Ext.UI.TextField({disabled:this.isdisabled,width:250,enableKeyEvents:true,listeners:{keyup:this.onkeypress,specialkey:this.onspecialkeypress,beforeclear:this.onfilterclear,scope:this}});this.searchField.render(this.searchFieldId);_.initElePHEvent(this.searchField,_TR("FILTER_RESULTS"));
this.searchBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-search",disabled:this.isdisabled});this.searchBtn.render(this.searchBtnId);this.minusBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-minus-small",listeners:{click:this.onminusclick,scope:this}});this.minusBtn.render(this.minusBtnId);this.plusBtn=new Ext.UI.RoundButton({cls:"x-frontview-btn-plus-small",listeners:{click:this.onplusclick,scope:this}});this.plusBtn.render(this.plusBtnId);this.dfsview=new Ext.UI.GridPanel({bufferResize:0,height:250,
disableSelection:false,singleSelect:true,trackMouseOver:false,disabled:this.isdisabled,autoExpandColumn:"name",listeners:{rowclick:this.onselected,scope:this},store:new Ext.data.Store({autoDestroy:true,reader:new Ext.data.ArrayReader({idIndex:0},Ext.data.Record.create(["name","nameLabel","address","remoteshare"]))}),cm:new Ext.grid.ColumnModel({sortable:true,columns:[{id:"name",dataIndex:"nameLabel",header:_TR("DFS_NAME"),align:"center",width:50,sortable:true,resizable:false},{id:"address",dataIndex:"address",
header:_TR("DFS_ADDRESS"),align:"center",width:100,sortable:true,resizable:false},{id:"remoteshare",dataIndex:"remoteshare",header:_TR("DFS_REMOTE_SHARE"),align:"center",flex:1,sortable:true,resizable:false}]}),plugins:[],viewConfig:{forceFit:true,autoFill:true,deferEmptyText:false,scrollOffset:0,emptyText:'<table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table><table class="x-sh-inspector-table ui-fwgrid-rowalt" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell x-sh-empty-msg">'+
_TR("EMPTY")+'</td></tr></table><table class="x-sh-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="text-align:center;"></td></tr></table>'}});this.dfsview.render(this.dfsviewId)},onselected:function(){this.minusBtn.enable()},disableDFScomps:function(a){if(a){this.searchField.disable();this.searchBtn.disable();this.minusBtn.disable();this.plusBtn.disable();this.dfsview.disable()}else{this.searchField.enable();this.searchBtn.enable();this.minusBtn.disable();
this.plusBtn.enable();this.dfsview.enable()}},loadDFsSetting:function(a,b){this.share=a;this.protocol=b;a=this.protocol.getEnableDFS()=="1";this.enableDfsChb.setValue(a,true);this.disableDFScomps(!a);a=this.protocol.getDFSList();var c=this.dfsview.getStore();c.removeAll();a&&a.length>0&&_.each(a,function(d){var e=_a(d,"_i3d");d=e.getName();var f=e.getAddress();e=e.getRemoteShare();c.add([new Ext.data.Record({name:d,nameLabel:Ext.util.Format.htmlEncode(d),address:f,remoteshare:e})])},
this)},onkeypress:function(){this.onsearchclick();this.getSelectedItem().length>0?this.minusBtn.disable():this.minusBtn.enable()},onspecialkeypress:function(a,b){switch(b.getKey()){case b.ENTER:this.onsearchclick();b.stopEvent();break;case b.ESC:this.dfsview.store.clearFilter();this.searchField.setValue("");b.stopEvent();break}},onfilterclear:function(){this.dfsview.store.clearFilter()},onsearchclick:function(a,b){b&&b.stopEvent();this.applyFilter()},applyFilter:function(){this.dfsview.store.clearFilter();
this.filterByField("name","address","remoteshare",this.searchField.getValue())},filterByField:function(a,b,c,d){this.dfsview.store.filterBy(function(e){var f=e.get(a),g=e.get(b);e=e.get(c);d=d.toLowerCase();var h=new RegExp(d.trim());if(h.exec(f.toLowerCase())!=null)return true;else if(h.exec(g.toLowerCase())!=null)return true;else if(h.exec(e.toLowerCase())!=null)return true;return false},this)},onminusclick:function(a,b){b&&b.stopEvent();a=this.getSelectedItem();a.length>0&&Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),
msg:String.format(_TR("WARN_DELETION"),Ext.util.Format.htmlEncode(a)),fn:function(c){if(c=="yes"){var d=this.getSelectedItem();c=this.dfsview.getStore();for(var e=0;e<d.length;e++)if(d[e]!=null&&this.getIndex(d[e])>=0){c.data.items.remove(c.data.items[this.getIndex(d[e])]);this.protocol.removeDFSFolder(d[e])}d=c.data.items;c.removeAll();c.add(d);this.fireEvent("sharechanged",this);this.minusBtn.disable()}},scope:this})},onplusclick:function(a,b){b&&b.stopEvent();a=this.wndAddFolder||new _s2.AddFolder({listeners:{sharechanged:function(){this.fireEvent("sharechanged",
this)},scope:this}});a.show();a.load(this.share,this.protocol,this.dfsview)},getIndex:function(a){for(var b=this.dfsview.getStore().data.items,c=0;c<b.length;c++)if(b[c].data.name==a)return c;return-1},getSelectedItem:function(){var a=[],b=this.dfsview.getSelectionModel().getSelections();if(b!=null)for(var c=0;c<b.length;c++)a.push(b[c].data.name);return a}});Ext.namespace("_s2");
_s2.WebDavBlock=_._1(_9,Ext.Component,{constructor:function(a){_s2.WebDavBlock.superclass.constructor.call(this,a)},initComponent:function(){_s2.WebDavBlock.superclass.initComponent.call(this);this.on("sharechanged",function(){this.load(this.share,this.protocol)},this)},afterRender:function(){_s2.WebDavBlock.superclass.afterRender.apply(this,arguments);this.el.update('<div id="'+(this.enableWebDavBtnId=Ext.id())+'"></div>');this.enableWebDavChb=
new Ext.UI.Checkbox({boxLabel:_TR("ENABLE_WEBDAV"),listeners:{check:function(a,b){if(this.protocol){this.protocol.putEnableWebDav(b?1:0);this.protocol.putWebDavDefaultAccess("Disabled");this.protocol.putWebDavAllowGuestAccess(0);this.fireEvent("sharechanged",this)}},scope:this}});this.enableWebDavChb.render(this.enableWebDavBtnId)},load:function(a,b){this.share=a;this.protocol=b;this.enableWebDavChb.setValue(this.protocol.getEnableWebDav()=="1",true)}});Ext.namespace("_s2");
_s2.DataSetProperties=_._1(Ext.Container,{help:"shares_tab_ds_properties",constructor:function(){this.title=_TR("PROPERTIES");this.html=this.getHtml();_s2.DataSetProperties.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spShareManager=a.getShareManager();this.zfsVolumesManager=a.getZFSVolumesManager();this.spFSManager=a.getFSManager();this.spZFSVolumesManager=a.getZFSVolumesManager()},getHtml:function(){return'<div class="x-sh-wnd-dataset" style="width: 600px; margin: 0 auto;"><table cellpadding="0" cellspacing="0"><tr><td class="x-sh-text x-sh-wndadddataset-text-name">'+
_TR("NAME")+':</td><td id="'+(this.nameNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text x-sh-wndadddataset-text-desc">'+_TR("DESCRIPTION")+':</td><td id="'+(this.descNodeId=Ext.id())+'"></td></tr><tr class="usbTr"><td class="x-sh-text x-sh-wndadddataset-text-lbl">'+_TR("SHARE_TAB_LABEL_DEVICE_LABEL")+':</td><td id="'+(this.deviceLblId=Ext.id())+'"></td></tr><tr class="usbTr"><td class="x-sh-text">'+_TR("SHARE_TAB_LABEL_MODEL_NAME")+':</td><td id="'+(this.modelNameId=Ext.id())+'"></td></tr><tr class="usbTr"><td class="x-sh-text">'+
_TR("SHARE_TAB_LABEL_SERIAL_NUMBER")+':</td><td id="'+(this.serialNumberId=Ext.id())+'"></td></tr><tr><td style="height:5px" colspan="2"></td></tr><tr class="x-sh-wnd-dataset-row-only-notejectable x-sh-wnd-dataset-row-only-notreadydr"><td class="x-sh-text"></td><td class="x-sh-wnd-dataset-types" id="'+(this.bitRotProtectionNodeId=Ext.id())+'"></td></tr><tr class="x-sh-wnd-dataset-row-only-notejectable x-sh-wnd-dataset-row-only-notreadydr"><td class="x-sh-text"></td><td><table cellpadding="0" cellspacing="0"><tr><td class="x-sh-wnd-dataset-types" id="'+
(this.compressionNodeId=Ext.id())+'" style="padding-left: 30px;"></td><td class="x-sh-wnd-dataset-types" id="'+(this.compressionSizeNoteId=Ext.id())+'"></td></tr></table></td></tr><tr class="'+this.cls+'-chbline"><td class="x-sh-text"></td><td id="'+(this.autoDefragId=Ext.id())+'"></td></tr><tr><td class="x-sh-text">'+_TR("CONSUMED")+':</td><td id="'+(this.shareSizeId=Ext.id())+'"></td></tr><tr><td style="height:5px" colspan="2"></td></tr><tr class="x-sh-wnd-dataset-row-only-san"><td class="x-sh-text x-sh-wndadddataset-text-desc">'+
_TR("SYNC_WRITES")+':</td><td id="'+(this.syncWritesNodeId=Ext.id())+'"></td></tr><tr class="x-sh-wnd-dataset-row-only-notejectable x-sh-wnd-dataset-row-only-nas"><td style="height:5px" colspan="2"></td></tr><tr class="x-sh-wnd-dataset-row-only-notejectable x-sh-wnd-dataset-row-only-notreadydr x-sh-wnd-dataset-row-only-nas"><td class="x-sh-text x-sh-wnd-dataset-text-nassize">'+_TR("SIZE")+':</td><td id="'+(this.boxQuotasId=Ext.id())+'"></td></tr><tr class="x-sh-wnd-dataset-row-only-san"><td class="x-sh-text">'+
_TR("PROVISION")+':</td><td class="x-sh-wnd-dataset-types" id="'+(this.lProvisionId=Ext.id())+'"></td></tr><tr class="x-sh-wnd-dataset-row-only-san" id="'+(this.sanSizeNodeId=Ext.id())+'"><td class="x-sh-text">'+_TR("SIZE")+':</td><td class="x-sh-wnd-dataset-types"><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.lSizeSanId=Ext.id())+'"></td><td id="'+(this.sanExpandNodeId=Ext.id())+'" class="x-sh-inspector-expandbtn"><a>'+_TR("EXPAND_SIZE_LINK")+'</a></td></tr></table></td></tr><tr class="x-sh-wnd-dataset-row-only-san"><td class="x-sh-text">'+
_TR("BLOCK_SIZE_LUN")+':</td><td class="x-sh-wnd-dataset-types" id="'+(this.lBlockSizeId=Ext.id())+'"></td></tr><tr class="x-sh-wnd-dataset-row-only-san" id="'+(this.boxAlertThresholdId=Ext.id())+'"><td class="x-sh-text">'+_TR("SAN_THIN_ALERT_THRESHOLD")+':</td><td class="x-sh-wnd-dataset-types"><table cellpadding="0" cellspacing="0"><tr><td id="'+(this.sfAlertThresholdId=Ext.id())+'" style="padding-right:5px"></td><td>%</td></tr></table></td></tr></table><div id="'+(this.expandSizeSanId=Ext.id())+
'"></div></div>'},afterRender:function(a){_s2.DataSetProperties.superclass.afterRender.call(this,a);this.tfName=new Ext.UI.TextField({width:310,enableKeyEvents:true,renderTo:this.nameNodeId,listeners:{keyup:this.onPropertyChange,change:this.onPropertyChange,scope:this}});this.tfDesc=new Ext.UI.TextField({width:310,enableKeyEvents:true,renderTo:this.descNodeId,listeners:{keyup:this.onPropertyChange,change:this.onPropertyChange,scope:this}});this.tfDeviceLbl=new Ext.UI.TextField({width:310,
enableKeyEvents:true,renderTo:this.deviceLblId,listeners:{keyup:this.onPropertyChange,change:this.onPropertyChange,scope:this}});this.tfModelName=new Ext.UI.TextField({width:310,enableKeyEvents:true,renderTo:this.modelNameId,listeners:{keyup:this.onPropertyChange,change:this.onPropertyChange,scope:this}});this.tfSerialNumber=new Ext.UI.TextField({width:310,enableKeyEvents:true,renderTo:this.serialNumberId,listeners:{keyup:this.onPropertyChange,change:this.onPropertyChange,scope:this}});this.chbCompression=
new Ext.UI.Checkbox({boxLabel:_TR("COMPRESSION"),renderTo:this.compressionNodeId,listeners:{check:this.onPropertyChange,scope:this}});this.compressionSizeNote=new Ext.BoxComponent({html:_TR("SAN_COMPRESSION_LIMIT"),renderTo:this.compressionSizeNoteId,style:"padding-top: 2px; padding-left: 5px;"});this.chbBitRotProtection=new Ext.UI.Checkbox({boxLabel:_TR("SHARE_BITROTPROTECTION"),renderTo:this.bitRotProtectionNodeId,listeners:{check:this.onPropertyChange,scope:this}});this.chbBitRotProtection.on("check",
this.onBitRotProtectionCheck,this);this.autoDefragCheck=new Ext.UI.Checkbox({boxLabel:_TR("SHARE_DEFRAG"),listeners:{check:this.onPropertyChange,scope:this},renderTo:this.autoDefragId});this.cbSyncWrites=new Ext.UI.ComboBox({width:310,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["standard",_TR("ALLOWED")],["always",_TR("FORCED")],["disabled",_TR("DISABLED")]]}),value:"standard",valueField:"id",displayField:"text",renderTo:this.syncWritesNodeId,
listeners:{select:this.onPropertyChange,scope:this}});this.lProvision=Ext.get(this.lProvisionId);this.lBlockSize=Ext.get(this.lBlockSizeId);this.lSizeSan=Ext.get(this.lSizeSanId);this.boxAlertThreshold=Ext.get(this.boxAlertThresholdId);this.sfAlertThreshold=new Ext.UI.SpinnerField({width:50,value:80,minValue:0,maxValue:99,incrementValue:1,alternateIncrementValue:10,renderTo:this.sfAlertThresholdId,enableKeyEvents:true,listeners:{keyup:this.onPropertyChange,change:this.onPropertyChange,spin:this.onPropertyChange,
scope:this}});Ext.get(this.sanExpandNodeId).on("click",this.onSanExpandClick,this);this.sanExpand=new _s2.ExpandLun({listeners:{sharechanged:this.onPropertyChange,scope:this}});this.sanExpand.render(this.expandSizeSanId);this.boxQuotas=new _s2.QuotasBlock({renderTo:this.boxQuotasId,listeners:{sharechanged:function(){this.fireEvent("sharechanged",this)},valid:function(){this.removeClass("x-sh-wnd-dataset-err-nassize")},invalid:function(){this.addClass("x-sh-wnd-dataset-err-nassize")},
scope:this}})},mbToSize:function(a){if(a===0)return"0 MB";var b=Math.floor(Math.log(a)/Math.log(1024));a=(a/Math.pow(1024,b)).toFixed(1);a=~a.indexOf(".0")?+a.replace(".0",""):a;return a+" "+["MB","GB","TB","PB","EB","ZB","YB"][b]},updateCalculateTxt:function(){alert("Hello World")},setConsumed:function(a){Ext.fly(this.shareSizeId).update(String.format(_TR("SHARE_CONSUMED"),a[0],a[1],this.mbToSize(+a[2]))).parent("tr").setDisplayed(true)},loadShare:function(a){this.share=this.lun=undefined;var b=
this.zfsVolumesManager.getVolumeById(a.getVolumeId()).getEjectable(),c=a.isReadyDRShare();this.sanExpand.hide();this.removeClass("x-sh-wnd-dataset-err-name");this.removeClass("x-sh-wnd-dataset-ejectable");this.removeClass("x-sh-wnd-dataset-readydr");this.removeClass("x-sh-wnd-dataset-nas");this.removeClass("x-sh-wnd-dataset-san");this.removeClass("x-sh-wnd-dataset-err-lbl");this.addClass("x-sh-wnd-dataset-nas");b&&this.addClass("x-sh-wnd-dataset-ejectable");c&&this.addClass("x-sh-wnd-dataset-readydr");
this.chbCompression.setValue(a.getCompression()=="1"?true:false,true);this.tfName.setValue(a.getName());this.tfDesc.setValue(a.getComment());if(b){a.getName();var d=a.getLabel();this.tfDeviceLbl.setValue(d).setDisabled(!!!d);this.tfModelName.setValue(a.getModelName()).setDisabled(true);this.tfSerialNumber.setValue(a.getSN()).setDisabled(true);var e=this.spFSManager.getVolumes();_.each(e,function(f){f=_a(f,"_i11");if(f.getMountPoint().replace("media","").replace(/\//g,"")==a.getName())this.curUSBVol=
f},this);e=this.curUSBVol.getFSFormat();this.tfDeviceLbl.setValue(d).setDisabled(["ext2","ext3","ext4","ntfs","vfat","btrfs"].indexOf(e)==-1)}this.chbBitRotProtection.setValue(a.getBitRotProtection()=="1",true);this.chbBitRotProtection.setDisabled(false);this.autoDefragCheck.setValue(a.getAutoDefrag()=="1",true);this.autoDefragCheck.setVisible(!b);this.chbCompression.setDisabled(a.getBitRotProtection()!="1");this.compressionSizeNote.hide();c||this.boxQuotas.loadShare(a);this.share=a;b=Ext.fly(this.shareSizeId);
b.addClass("x-sh-dataset-settings-calculate").update(_TR("SHARE_FILEFOLDER_CALCULATE"));b.addListener("click",this.calculateSize,this)},calculateSize:function(){var a=Ext.fly(this.shareSizeId);a.removeClass("x-sh-dataset-settings-calculate").update(_TR("SHARE_FILEFOLDER_CALCULATE")+"...");a.removeListener("click",this.calculateSize,this);this.fireEvent("sharecalculate",this.share.getId())},loadLun:function(a){this.lun=this.share=undefined;this.sanExpand.hide();this.removeClass("x-sh-wnd-dataset-err-name");
this.removeClass("x-sh-wnd-dataset-ejectable");this.removeClass("x-sh-wnd-dataset-readydr");this.removeClass("x-sh-wnd-dataset-nas");this.removeClass("x-sh-wnd-dataset-san");this.addClass("x-sh-wnd-dataset-san");this.chbBitRotProtection.setValue(a.getBitRotProtection()=="on"?true:false,true);this.chbBitRotProtection.setDisabled(true);this.autoDefragCheck.setValue(a.getAutoDefrag()=="on"?true:false,true);this.tfName.setDisabled(false);this.tfName.setValue(a.getName());this.tfDesc.setValue(a.getComment());
var b=a.getSize()*1024,c=a.getSparse();this.lProvision.update(c?_TR("THIN"):_TR("THICK"));var d=a.getBlockSize();this.lBlockSize.update(d==_4?"":_s10.Utils.fileSize(d,0));this.boxAlertThreshold.setDisplayed(c);this.chbCompression.setValue(a.getCompression()=="on"?true:false,true);if(c){a.getBitRotProtection()=="on"?this.chbCompression.setDisabled(false):this.chbCompression.setDisabled(true);this.compressionSizeNote.hide()}else{this.chbCompression.setDisabled(true);this.compressionSizeNote.show()}c=
a.getSync();c=!c||c==_4?"standard":c;this.cbSyncWrites.setValue(c,true);this.lSizeSan.update(_s10.Utils.fileSize(b));Ext.get(this.sanSizeNodeId).setDisplayed(true);this.sfAlertThreshold.setValue(a.getAlertThreshold());this.lun=a},onSanExpandClick:function(){Ext.get(this.sanSizeNodeId).setDisplayed(false);this.sanExpand.show();this.sanExpand.load(this.lun)},onBitRotProtectionCheck:function(a,b){if(b&&(this.share?this.share.getBitRotProtection()!=="1":this.lun.getBitRotProtection()!=="on")&&
this.spShareManager.getDefaultSettingBitRotProtectionPerformanceWarning()=="1"){this.chbBitRotProtection.setValue(false,true);Ext.UI.MessageBox.confirm({title:_TR("SHARE_BITROTPROTECTION_PERFORMANCE_WARNING_TITLE"),msg:_TR("SHARE_BITROTPROTECTION_PERFORMANCE_WARNING"),fn:function(c){if(c=="yes"){this.chbBitRotProtection.setValue(true,true);this.chbCompression.setDisabled(false)}},scope:this})}if(this.chbBitRotProtection.getValue())this.chbCompression.setDisabled(false);else{this.chbCompression.setDisabled(true);
this.chbCompression.setValue(false)}},onPropertyChange:function(){if(this.share||this.lun)this.fireEvent("sharechanged",this)},onApplyClick:function(){var a=this.tfName.getValue(),b=this.tfDesc.getValue(),c=this.chbBitRotProtection.getValue(),d=this.autoDefragCheck.getValue();if(this.share){var e=this.share;e.putName(a);e.putComment(b);e.putCompression(this.chbCompression.getValue());e.putBitRotProtection(c?"1":"0");e.putAutoDefrag(d?"1":"0");e.getSN()&&e.putLabel(this.tfDeviceLbl.getValue())}else if(this.lun){c=
this.lun;d=this.autoDefragCheck.getValue();c.putAutoDefrag(d);c.putName(a);c.putComment(b);c.putCompression(this.chbCompression.getValue());this.sanExpand.hidden||this.sanExpand.onApplyClick();c.putSync(this.cbSyncWrites.getValue());c.putAlertThreshold(this.sfAlertThreshold.getValue())}return true},validate:function(){if(this.tfName.tooltip){this.tfName.hideValidateTooltip();this.tfDesc.hideValidateTooltip()}this.removeClass("x-sh-wnd-dataset-err-name");this.removeClass("x-sh-wnd-dataset-err-desc");
this.removeClass("x-sh-wnd-dataset-err-nassize");this.removeClass("x-sh-wnd-dataset-err-lbl");if(!_.isValidShareName(this.tfName.getValue())){this.addClass("x-sh-wnd-dataset-err-name");this.tfName.showValidateTooltip(_TR("SHARE_NAME_TOOLTIP"));return false}if(this.tfDesc.getValue()&&this.tfDesc.getValue().length>392){this.addClass("x-sh-wnd-dataset-err-desc");this.tfDesc.showValidateTooltip(_TR("SHARE_TAB_DESC_REST_LEN"));return false}if(this.curUSBVol){var a=this.tfDeviceLbl.getValue(),b;switch(this.curUSBVol.getFSFormat()){case "ext2":case "ext3":case "ext4":b=
16;break;case "ntfs":b=128;break;case "vfat":b=11;break;case "btrfs":b=255;break}if(a&&a.replace(/[^\x00-\xff]/g,"01").length>b){this.addClass("x-sh-wnd-dataset-err-lbl");this.tfDeviceLbl.showValidateTooltip(String.format(_TR("SHARE_TAB_LABEL_LEN"),b));return false}}if(!this.isUniqName(this.tfName.getValue())){this.addClass("x-sh-wnd-dataset-err-name");this.tfName.showValidateTooltip(_TR("SHARE_INSPECTOR_ERRORTIP_NAME_DUP"));return false}if(!this.sanExpand.hidden)if(!this.sanExpand.validate())return false;
if(this.share&&!this.share.isReadyDRShare()&&!this.boxQuotas.validate())return false;return true},isUniqName:function(a){var b,c,d=a.toUpperCase(),e=(this.share?this.share:this.lun).getName(),f=(this.share?this.share:this.lun).getId();b=this.spShareManager.getShares();for(var g=0;g<b.length;++g){c=_a(b[g],"_i38");if(c.getName().toUpperCase()===d&&c.getId()!==f)return false}b=this.spShareManager.getLUNS();for(g=0;g<b.length;++g){c=_a(b[g],"_i1j");if(c.getName().toUpperCase()==d){if(c.getId()==
f)return e==a;return false}}return true}});_._2("_s2");
_s2.ShareAccess=_._1(_9,Ext.Container,_i2y,_i45,{style:"margin: 0 auto;",updatesCount:0,help:"shares_tab_ds_access",constructor:function(a){this.title=_TR("ACCESS");_s2.ShareAccess.superclass.constructor.call(this,a)},initComponent:function(){this.html='<div class="x-sh-inspector-access-segm" id="'+(this.typesNodeId=Ext.id())+'"></div><div id="'+(this.cifsNodeId=Ext.id())+'"></div><div id="'+(this.nfsNodeId=Ext.id())+'"></div><div id="'+
(this.afpNodeId=Ext.id())+'"></div><div id="'+(this.ftpNodeId=Ext.id())+'"></div><div id="'+(this.rsyncNodeId=Ext.id())+'"></div><div id="'+(this.httpNodeId=Ext.id())+'"></div><div id="'+(this.dlnaNodeId=Ext.id())+'"></div><div id="'+(this.daapNodeId=Ext.id())+'"></div>';_s2.ShareAccess.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);
this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();this.zfsVolumesManager=a.getZFSVolumesManager();this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)},setHeight:function(a){a-=Ext.get(this.typesNodeId).getHeight();this.groupHeight=a;this.cifs&&this.cifs.setHeight(a);this.nfs&&this.nfs.setHeight(a);this.afp&&this.afp.setHeight(a);this.ftp&&this.ftp.setHeight(a);this.rsync&&
this.rsync.setHeight(a);this.http&&this.http.setHeight(a);this.dlna&&this.dlna.setHeight(a);this.daap&&this.daap.setHeight(a)},onParentScroll:function(){this.cifs&&this.cifs.usersBlock.hideSearchList();this.afp&&this.afp.usersBlock.hideSearchList();this.ftp&&this.ftp.usersBlock.hideSearchList();this.http&&this.http.usersBlock.hideSearchList()},afterRender:function(){_s2.ShareAccess.superclass.afterRender.apply(this,arguments);var a=this.warnHash={cifs:this.getTabBtn(_TR("CIFS"),"cifs"),
nfs:this.getTabBtn(_TR("NFS"),"nfs"),afp:this.getTabBtn(_TR("AFP"),"afp"),ftp:this.getTabBtn(_TR("FTP"),"ftp"),rsync:this.getTabBtn(_TR("RSYNC"),"rsync"),http:this.getTabBtn(_TR("HTTP"),"http"),dlna:this.getTabBtn(_TR("DLNA"),"dlna"),daap:this.getTabBtn(_TR("iTunes"),"daap")};this.tabs=new Ext.UI.SegmentedLedControl({cls:"x-sh-inspector-center",items:[a.cifs,a.nfs,a.afp,a.ftp,a.rsync,a.http,a.dlna,a.daap]});this.tabs.on("buttonchecked",this.onTabItemSelect,this);this.tabs.render(this.typesNodeId);
a.cifs.press()},onRefresh:function(){this.updatesCount||this.refresh()},refresh:function(){this.spSecurityManager.updateADSMode("shares-volumes-access-update-adsmode")},populateUsersAndGroups:function(a,b,c,d,e){this.security={users:a,groups:b,adsMode:c,rcusers:d,rcowner:e};this.cifs&&this.cifs.loadUsersAndGroups(a,b,c,d,e);this.afp&&this.afp.loadUsersAndGroups(a,b,c,d,e);this.ftp&&this.ftp.loadUsersAndGroups(a,b,c,d,e);this.http&&this.http.loadUsersAndGroups(a,b,c,d,e)},showProgress:function(){++this.updatesCount},
hideProgress:function(){--this.updatesCount},_i2y:{_o1:function(a,b){if(!(b=="sync-update-users"&&!this.rendered))if(!(b=="sync-update-groups"&&!this.rendered)){if(b=="shares-volumes-access-update-users"||b=="sync-update-users"||b=="shares-volumes-access-update-groups"||b=="sync-update-groups"||b=="shares-volumes-access-update-rcusers"||b=="shares-volumes-access-update-adsmode")this.showProgress();return _5}},_o2:function(a,b){if(!(b=="sync-update-users"&&!this.rendered))if(!(b==
"sync-update-groups"&&!this.rendered)){if(b=="shares-volumes-access-update-adsmode"||b=="sync-update-security"){a=this.spSecurityManager.getADSMode();if(a=="user")this.spSecurityManager.updateUsersWithAdmin("shares-volumes-access-update-users",true,false);else{a=new String(a);a.notSync=this.spSecurityManager.getNotSyncAdsAccounts();this.populateUsersAndGroups([],[],a)}}else if(b=="shares-volumes-access-update-users"||b=="sync-update-users")this.spSecurityManager.updateGroups("shares-volumes-access-update-groups");
else if(b=="shares-volumes-access-update-groups"||b=="sync-update-groups")this.spSecurityManager.UpdateRCUsers("shares-volumes-access-update-rcusers");else b=="shares-volumes-access-update-rcusers"&&this.spSysManager.updateCloudOwner("shares-volumes-access-update-rcowner");return _5}},_o3:function(a,b,c){if(!(c=="sync-update-users"&&!this.rendered))if(!(c=="sync-update-groups"&&!this.rendered)){if(c=="shares-volumes-access-update-users"||c=="sync-update-users"||c=="shares-volumes-access-update-groups"||
c=="sync-update-groups"||c=="shares-volumes-access-update-rcusers"||c=="shares-volumes-access-update-adsmode")this.hideProgress();return _5}}},_i35:{_o1:function(a,b){b=="sync-update-services"&&this.showProgress();return _5},_o2:function(a,b){switch(b.toString()){case "sync-update-services":_.each(this.spServManager.getSystemServices(),function(c){c=_a(c,"_i32");switch(c.getName()){case "cifs":this.globalSmbEncrypt=c.getCifsSmbEncrypt();break}},
this);this.cifs.setEncryptionStatus(this.globalSmbEncrypt);break}return _5},_o3:function(a,b,c){c=="sync-update-services"&&this.hideProgress();return _5}},_i45:{_o1:function(a,b){b=="shares-volumes-access-update-rcowner"&&this.showProgress();return _5},_o2:function(a,b){if(b=="shares-volumes-access-update-rcowner"){a=this.spSecurityManager.getUsers();b=this.spSecurityManager.getGroups();var c=this.spSecurityManager.getADSMode(),d=this.spSecurityManager.getRCUsers(),
e=_a(this.spSysManager.getCloudOwner(),"_i2z");c=new String(c);c.notSync=this.spSecurityManager.getNotSyncAdsAccounts();this.populateUsersAndGroups(a,b,c,d,e);this.spServManager.updateSystemServiceInfo("sync-update-services")}return _5},_o3:function(a,b,c){c=="shares-volumes-access-update-rcowner"&&this.hideProgress();return _5}},clear:function(){this.tabs.setPressedButton(0)},loadShare:function(a){this.share=a;this.cifs&&this.cifs.load(a,this.zfsVolumesManager.getVolumeById(this.share.getVolumeId()).getEjectable());
this.nfs&&this.nfs.load(a);this.afp&&this.afp.load(a);this.ftp&&this.ftp.load(a);this.rsync&&this.rsync.load(a);this.http&&this.http.load(a);this.dlna&&this.dlna.load(a);this.daap&&this.daap.load(a);for(var b in this.warnHash){var c=this.share.getProtocolByName(b);c&&c!=_4&&c.getAvailable()?this.warnHash[b].setEnabledLed(true):this.warnHash[b].setEnabledLed(false)}b=!!_a(a,"IHomeFolderOptions");a=a.isReadyDRShare();this.warnHash.rsync.setDisabled(b);this.warnHash.http.setDisabled(b);this.warnHash.dlna.setDisabled(a);
this.warnHash.daap.setDisabled(b||a);this.tryToRefresh()},tryToRefresh:function(){this.share&&!this.updatesCount&&this.refresh()},onTabItemSelect:function(a){this.cifs&&this.cifs.hide();this.nfs&&this.nfs.hide();this.afp&&this.afp.hide();this.ftp&&this.ftp.hide();this.rsync&&this.rsync.hide();this.http&&this.http.hide();this.dlna&&this.dlna.hide();this.daap&&this.daap.hide();var b=this.security;switch(a.value){case "cifs":if(!this.cifs){this.cifs=new _s2.CifsAccessGroup({listeners:{sharechanged:this.onShareChanged,
scope:this}});this.cifs.on("refresh",this.onRefresh,this);this.cifs.render(this.cifsNodeId);this.groupHeight&&this.cifs.setHeight(this.groupHeight);b&&this.cifs.loadUsersAndGroups(b.users,b.groups,b.adsMode,b.rcusers,b.rcowner)}this.cifs.show();if(this.share){a=this.zfsVolumesManager.getVolumeById(this.share.getVolumeId());this.cifs.load(this.share,a?a.getEjectable():false)}this.hfoptions&&this.cifs.load(this.hfoptions);break;case "nfs":if(!this.nfs){this.nfs=new _s2.NfsAccessGroup({listeners:{sharechanged:this.onShareChanged,
scope:this}});this.nfs.render(this.nfsNodeId);this.groupHeight&&this.nfs.setHeight(this.groupHeight)}this.nfs.show();this.share&&this.nfs.load(this.share);this.hfoptions&&this.nfs.load(this.hfoptions);break;case "afp":if(!this.afp){this.afp=new _s2.AfpAccessGroup({listeners:{sharechanged:this.onShareChanged,scope:this}});this.afp.on("refresh",this.onRefresh,this);this.afp.render(this.afpNodeId);this.groupHeight&&this.afp.setHeight(this.groupHeight);b&&this.afp.loadUsersAndGroups(b.users,
b.groups,b.adsMode,b.rcusers,b.rcowner)}this.afp.show();this.share&&this.afp.load(this.share);this.hfoptions&&this.afp.load(this.hfoptions);break;case "ftp":if(!this.ftp){this.ftp=new _s2.FtpAccessGroup({listeners:{sharechanged:this.onShareChanged,scope:this}});this.ftp.on("refresh",this.onRefresh,this);this.ftp.render(this.ftpNodeId);this.groupHeight&&this.ftp.setHeight(this.groupHeight);b&&this.ftp.loadUsersAndGroups(b.users,b.groups,b.adsMode)}this.ftp.show();this.share&&this.ftp.load(this.share);
this.hfoptions&&this.ftp.load(this.hfoptions);break;case "rsync":if(!this.rsync){this.rsync=new _s2.RsyncAccessGroup({listeners:{sharechanged:this.onShareChanged,scope:this}});this.rsync.on("refresh",this.onRefresh,this);this.rsync.render(this.rsyncNodeId);this.groupHeight&&this.rsync.setHeight(this.groupHeight)}this.rsync.show();this.share&&this.rsync.load(this.share);this.hfoptions&&this.rsync.load(this.hfoptions);break;case "http":if(!this.http){this.http=new _s2.HttpAccessGroup({listeners:{sharechanged:this.onShareChanged,
scope:this}});this.http.on("refresh",this.onRefresh,this);this.http.render(this.httpNodeId);this.groupHeight&&this.http.setHeight(this.groupHeight);b&&this.http.loadUsersAndGroups(b.users,b.groups,b.adsMode)}this.http.show();this.share&&this.http.load(this.share);this.hfoptions&&this.http.load(this.hfoptions);break;case "dlna":if(!this.dlna){this.dlna=new _s2.DlnaAccessGroup({listeners:{sharechanged:this.onShareChanged,scope:this}});this.dlna.on("refresh",this.onRefresh,this);this.dlna.render(this.dlnaNodeId);
this.groupHeight&&this.dlna.setHeight(this.groupHeight)}this.dlna.show();this.share&&this.dlna.load(this.share);this.hfoptions&&this.dlna.load(this.hfoptions);break;case "daap":if(!this.daap){this.daap=new _s2.DaapAccessGroup({listeners:{sharechanged:this.onShareChanged,scope:this}});this.daap.on("refresh",this.onRefresh,this);this.daap.render(this.daapNodeId);this.groupHeight&&this.daap.setHeight(this.groupHeight)}this.daap.show();this.share&&this.daap.load(this.share);this.hfoptions&&
this.daap.load(this.hfoptions);break;default:break}},onShareChanged:function(){this.fireEvent("sharechanged",this)},getTabBtn:function(a,b){return new Ext.UI.SegmentedLedButton({text:a,value:b,width:85})},getAccessCombo:function(){return new Ext.UI.ComboBox({width:150,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["Disabled",_TR("DISABLED")],["ReadOnly",_TR("READ_ONLY")],["ReadWrite",_TR("READ_WRITE")]]}),valueField:"id",displayField:"text"})}});
_._2("_s2");
_s2.ShareFileFolder=_._1(_9,Ext.Container,_i45,_i2y,{style:"margin: 0 auto;",help:"shares_tab_ds_file",constructor:function(){_s2.ShareFileFolder.superclass.constructor.apply(this,arguments)},initComponent:function(){_s2.ShareFileFolder.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spShareManager=a.getShareManager();_a(this.spShareManager,
"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this)},afterRender:function(){_s2.ShareFileFolder.superclass.afterRender.apply(this,arguments);this.sidebar=new Ext.UI.SideBar;this.sidebar.render(this.el);this.cmpUsers=new Ext.BoxComponent({html:'<div id="'+(this.usersBlockNodeErrorId=Ext.id())+'"class="x-sh-inspector-permission-block"><div class="x-sh-inspector-permission-text">'+
_TR("NOT_SUPPORTED_FEATURE")+'</div></div><div id="'+(this.folderNodeId=Ext.id())+'"><table class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tr><td class="x-sh-text" style="width: 45%;">'+_TR("FOLDER_OWNER")+':</td><td id="'+(this.folderOwnerNodeId=Ext.id())+'"></td></tr><tr><td class="x-sh-text" style="width: 45%;">'+_TR("FOLDER_GROUP")+':</td><td id="'+(this.folderGroupNodeId=Ext.id())+'"></td></tr></table><div class="x-sh-inspector-separator-2"></div></div><div id="'+(this.allowDeleteByNoOwnerNodeId=
Ext.id())+'" class="x-sh-filefolder-alowdeletenoowner"></div><div class="x-sh-inspector-separator-4"></div><div id="'+(this.usersBlockNodeId=Ext.id())+'"></div>'});this.cmpDefaultUsers=new Ext.BoxComponent({html:'<div id="'+(this.defUsersBlockNodeErrorId=Ext.id())+'"class="x-sh-inspector-permission-block"><div class="x-sh-inspector-permission-text">'+_TR("NOT_SUPPORTED_FEATURE")+'</div></div><div id="'+(this.chbDefaultAclNodeId=Ext.id())+'"></div><div class="x-sh-inspector-separator-3"></div><div id="'+
(this.defUsersBlockNodeId=Ext.id())+'"></div>'});this.cmpReset=new Ext.BoxComponent({html:'<div id="'+(this.resetNodeErrorId=Ext.id())+'"class="x-sh-inspector-permission-block"><div class="x-sh-inspector-permission-text">'+_TR("NOT_SUPPORTED_FEATURE")+'</div></div><div id="'+(this.resetNodeId=Ext.id())+'" class="x-sh-inspector-permission-block"><div class="x-sh-inspector-permission-text">'+_TR("FILE_RESET_PERMISSION_1")+'</div><div class="x-sh-inspector-separator"></div><div class="x-sh-inspector-permission-text">'+
_TR("FILE_RESET_PERMISSION_2")+'</div><div class="x-sh-inspector-separator"></div><div class="x-sh-inspector-permission-btn" id="'+(this.bResetPermNodeId=Ext.id())+'"></div></div>'});this.sidebar.addTab(_TR("SECURITY"),this.cmpUsers);this.sidebar.addTab(_TR("SHARE_FILEFOLDER_DEFAULT"),this.cmpDefaultUsers);this.sidebar.addTab(_TR("SHARE_FILEFOLDER_RESET"),this.cmpReset);this.cbFolderOwner=new Ext.UI.ComboBox({width:200,lazyRender:true,mode:"local",triggerAction:"all",renderTo:this.folderOwnerNodeId,
store:new Ext.data.ArrayStore({id:0,fields:["id","text"],data:[]}),valueField:"id",displayField:"text",listeners:{select:this.onCbSelect,scope:this}});this.cbFolderGroup=new Ext.UI.ComboBox({width:200,lazyRender:true,mode:"local",triggerAction:"all",renderTo:this.folderGroupNodeId,store:new Ext.data.ArrayStore({id:0,fields:["id","text"],data:[]}),valueField:"id",displayField:"text",listeners:{select:this.onCbSelect,scope:this}});this.chbAllowDeleteByNoOwner=new Ext.UI.Checkbox({renderTo:this.allowDeleteByNoOwnerNodeId,
boxLabel:_TR("SHARE_FILEFOLDER_ALLOW_DELETE_BY_NO_OWNER"),listeners:{check:function(a,b){this.share.putNonOwnerDelete(b?"1":"0");this.fireEvent("sharechanged",this);this.fireEvent("shareaclchanged",this)},scope:this}});this.chbDefaultAcl=new Ext.UI.Checkbox({renderTo:this.chbDefaultAclNodeId,cls:"x-sh-filefolder-defaultcalchk",boxLabel:_TR("SHARE_FILEFOLDER_SPECIFY_PERMISSION_WHEN_NEW_FILE_FOLDER"),listeners:{check:function(a,b){this.share.putInheritAcl(b?"0":"1");a=this.security;this.defUsersBlock.setVisible(b);
a&&this.defUsersBlock.load(this.share,"filefolder-default",a.users,a.groups,a.adsMode,a.rcusers,a.rcowner);this.fireEvent("sharechanged",this);this.fireEvent("shareaclchanged",this)},scope:this}});this.bResetPerm=new Ext.UI.Button({width:180,expandToText:true,text:_TR("SHARE_RESET_PERMISSIONS"),renderTo:this.bResetPermNodeId,handler:this.onResetPermClick,scope:this});this.usersBlock=new _s2.FileAccessUsersBlock({renderTo:this.usersBlockNodeId,listeners:{shareaclchanged:function(){this.fireEvent("sharechanged",
this);this.fireEvent("shareaclchanged",this)},scope:this}});this.defUsersBlock=new _s2.FileAccessUsersBlock({renderTo:this.defUsersBlockNodeId,listeners:{shareaclchanged:function(){this.fireEvent("sharechanged",this);this.fireEvent("shareaclchanged",this)},scope:this}})},onCbSelect:function(a){if(a==this.cbFolderOwner){this.share.putFolderOwnerId(this.cbFolderOwner.getValue(),true);this.share.putFolderOwner(this.cbFolderOwner.getRawValue(),true)}else if(a==this.cbFolderGroup){this.share.putFolderGroupId(this.cbFolderGroup.getValue(),
true);this.share.putFolderGroup(this.cbFolderGroup.getRawValue(),true)}this.fireEvent("sharechanged",this);this.fireEvent("shareaclchanged",this)},onCbKeyUp:function(a){if(this.security.adsMode.notSync){if(a==this.cbFolderOwner){this.share.putFolderOwnerId(":"+this.cbFolderOwner.getRawValue(),true);this.share.putFolderOwner(this.cbFolderOwner.getRawValue(),true)}else if(a==this.cbFolderGroup){this.share.putFolderGroupId(":"+this.cbFolderGroup.getRawValue(),true);this.share.putFolderGroup(this.cbFolderGroup.getRawValue(),
true)}this.fireEvent("sharechanged",this);this.fireEvent("shareaclchanged",this)}else this.tryToSearch(a)},onCbBlur:function(a){if(a==this.cbFolderOwner)this.cbFolderOwner.getRawValue()!=this.share.getFolderOwner()&&this.cbFolderOwner.setRawValue(this.share.getFolderOwner(),true);else a==this.cbFolderGroup&&this.cbFolderGroup.getRawValue()!=this.share.getFolderGroup()&&this.cbFolderGroup.setRawValue(this.share.getFolderGroup(),true)},tryToSearch:function(a){clearTimeout(this.searchRequestProcessId);
var b=this;this.searchRequestProcessId=setTimeout(function(){b.sendSearchRequest(a)},500)},sendSearchRequest:function(a){this.adsQueryCb=a;this.adsQueryText=a.getRawValue();if(a==this.cbFolderOwner)this.spSecurityManager.queryUsers(this.adsQueryText,0,25,"shares-volumes-filefolder-query-users");else a==this.cbFolderGroup&&this.spSecurityManager.queryGroups(this.adsQueryText,0,25,"shares-volumes-filefolder-query-groups")},onApplyClick:function(){return true},onResetPermClick:function(){Ext.UI.MessageBox.confirm({title:_TR("SHARE_RESET_PERMISSIONS"),
msg:(this.security&&this.security.adsMode=="ads"?_TR("FILE_RESET_PERMISSION_5"):_TR("FILE_RESET_PERMISSION_3"))+"<br/><br/>"+_TR("FILE_RESET_PERMISSION_4"),width:550,fn:function(a){a=="yes"&&this.spShareManager.ChangePermissions(this.share,"shares-volumes-filefolder-reset-share")},scope:this})},loadShare:function(a){this.share=a;this.sidebar.selectTab(0);this.chbAllowDeleteByNoOwner.setValue(this.share.getNonOwnerDelete()=="1",true);this.spSecurityManager.updateADSMode("shares-volumes-filefolder-update-adsmode");
a=this.share.getAccessAclList();this.share.getDefaultAclList();var b=this.share.getInheritAcl();if(a&&a!=_4){this.usersBlock.show();Ext.fly(this.usersBlockNodeErrorId).setDisplayed(false);this.defUsersBlock.show();Ext.fly(this.defUsersBlockNodeErrorId).setDisplayed(false);this.chbDefaultAcl.show();this.chbAllowDeleteByNoOwner.show();Ext.get(this.folderNodeId).setDisplayed(true);Ext.get(this.resetNodeId).setDisplayed(true);Ext.fly(this.resetNodeErrorId).setDisplayed(false);if(b=="1"){this.defUsersBlock.hide();
this.chbDefaultAcl.setValue(false,true)}else{this.defUsersBlock.show();this.chbDefaultAcl.setValue(true,true)}}else{this.usersBlock.hide();Ext.fly(this.usersBlockNodeErrorId).setDisplayed(true);this.defUsersBlock.hide();Ext.fly(this.defUsersBlockNodeErrorId).setDisplayed(true);this.chbDefaultAcl.hide();this.chbAllowDeleteByNoOwner.hide();Ext.get(this.folderNodeId).setDisplayed(false);Ext.get(this.resetNodeId).setDisplayed(false);Ext.fly(this.resetNodeErrorId).setDisplayed(true)}},populate:function(a,
b,c){if(a=="user"){a=[["0","root"],["98","admin"],["99","guest"]];for(var d=0;d<b.length;++d){user=_a(b[d],"_i2z");a.push([user.getId(),user.getName()])}this.cbFolderOwner.setEditable(false);this.cbFolderOwner.un("keyup",this.onCbKeyUp,this);this.cbFolderOwner.un("blur",this.onCbBlur,this);this.cbFolderOwner.store.loadData(a);this.cbFolderOwner.setValue(this.share.getFolderOwnerId(),true);a=[["0","root"],["98","admin"],["99","guest"]];for(d=0;d<c.length;++d){group=_a(c[d],"_i2v");
a.push([group.getId(),group.getName()])}this.cbFolderGroup.setEditable(false);this.cbFolderGroup.un("keyup",this.onCbKeyUp,this);this.cbFolderGroup.un("blur",this.onCbBlur,this);this.cbFolderGroup.store.loadData(a);this.cbFolderGroup.setValue(this.share.getFolderGroupId(),true)}else{this.cbFolderOwner.setEditable(true);this.cbFolderOwner.store.loadData([[this.share.getFolderOwnerId(),this.share.getFolderOwner()]]);this.cbFolderOwner.setRawValue(this.share.getFolderOwner(),true);this.cbFolderOwner.on("keyup",
this.onCbKeyUp,this);this.cbFolderOwner.on("blur",this.onCbBlur,this);this.cbFolderGroup.setEditable(true);this.cbFolderGroup.store.loadData([[this.share.getFolderGroupId(),this.share.getFolderGroup()]]);this.cbFolderGroup.setRawValue(this.share.getFolderGroup(),true);this.cbFolderGroup.on("keyup",this.onCbKeyUp,this);this.cbFolderGroup.on("blur",this.onCbBlur,this)}},loadAdsQueryResults:function(a,b){var c;if(this.adsQueryCb==this.cbFolderOwner){c=[];for(var d=0;d<a.length;++d){user=_a(a[d],
"_i2z");c.push([user.getId(),user.getName()])}this.cbFolderOwner.store.loadData(c)}else if(this.adsQueryCb==this.cbFolderGroup){c=[];for(d=0;d<b.length;++d){group=_a(b[d],"_i2v");c.push([group.getId(),group.getName()])}this.cbFolderGroup.store.loadData(c)}},_i2y:{_o2:function(a,b){if(!(b=="sync-update-users"&&!this.rendered))if(!(b=="sync-update-groups"&&!this.rendered)){if(b=="shares-volumes-filefolder-update-adsmode"){this.security={};a=this.security.adsMode=new String(this.spSecurityManager.getADSMode());
if(a=="user")this.spSecurityManager.updateUsersWithAdmin("shares-volumes-filefolder-update-users",this.share,false);else{a.notSync=this.spSecurityManager.getNotSyncAdsAccounts();b=this.security.users=[];var c=this.security.groups=[],d=this.security.rcusers=[],e=this.security.rcowner={};this.populate(a,b,c);this.usersBlock.load(this.share,"filefolder-access",b,c,a,d,e);this.defUsersBlock.load(this.share,"filefolder-default",b,c,a,d,e)}}else if(b=="shares-volumes-filefolder-update-users"||b=="sync-update-users")this.spSecurityManager.updateGroups("shares-volumes-filefolder-update-groups");
else if(b=="shares-volumes-filefolder-update-groups"||b=="sync-update-groups")this.spSecurityManager.UpdateRCUsers("shares-volumes-filefolder-update-rcusers");else if(b=="shares-volumes-filefolder-update-rcusers")this.spSysManager.updateCloudOwner("shares-volumes-filefolder-update-rcowner");else if(b=="shares-volumes-filefolder-query-users")this.loadAdsQueryResults(this.spSecurityManager.getQueryUsers(),[]);else b=="shares-volumes-filefolder-query-groups"&&this.loadAdsQueryResults([],this.spSecurityManager.getQueryGroups());
return _5}}},_i45:{_o2:function(a,b){if(b=="shares-volumes-filefolder-update-rcowner"){this.security={};a=this.security.adsMode=new String(this.spSecurityManager.getADSMode());b=this.security.users=this.spSecurityManager.getUsers();var c=this.security.groups=this.spSecurityManager.getGroups(),d=this.security.rcusers=this.spSecurityManager.getRCUsers(),e=this.security.rcowner=_a(this.spSysManager.getCloudOwner(),"_i2z");this.populate(a,b,c);this.usersBlock.load(this.share,
"filefolder-access",b,c,a,d,e);this.defUsersBlock.load(this.share,"filefolder-default",b,c,a,d,e)}return _5}}});Ext.namespace("_s2");
_s2.DataSetSettings=_._1(_9,Ext.UI.Window,_i45,_i3b,{modal:true,width:780,height:650,resizable:false,minimizable:false,maximizable:false,updatesCount:0,help:"shares_wnd_edit_ds",constructor:function(){this.title="";this.cls="x-sh-datasetsettingswnd";this.html=this.getHtml();this.buttonAlign="left";this.fbar=this.getFooter();_s2.DataSetSettings.superclass.constructor.apply(this,arguments)},initComponent:function(){_s2.DataSetSettings.superclass.initComponent.call(this);
var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.spSystemManager=a.getSystemManager();_a(this.spSystemManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();this.on("show",function(){this.center()},this)},getHtml:function(){this.bTabProp=
new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("PROPERTIES"),value:"properties",width:150});this.bTabNet=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("ACCESS_NETWORK"),value:"network",width:150});this.bTabSnaps=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("SNAPSHOTS"),value:"snapshots",width:150});this.bTabFF=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("ACCESS_FILE_AND_FOLDER"),value:"filefolder",width:150});this.tabs=new Ext.UI.SegmentedControl({items:[this.bTabProp,
this.bTabNet,this.bTabSnaps,this.bTabFF],style:"margin: 20px auto;"});this.tabs.on("buttonchecked",this.onTabItemSelect,this);this.bTabHFQuotas=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("QUOTAS"),value:"quotas",width:150});this.bTabHFSnapshots=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("SNAPSHOTS_SCHEDULE"),value:"snapshots",width:150});this.bTabHFIndividual=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("SNAPSHOTS_INDIVIDUAL_USER_SETTINGS"),
value:"snapshots-individual",width:150});this.bTabHFAccess=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("ACCESS"),value:"network",width:150});this.tabsHF=new Ext.UI.SegmentedControl({items:[this.bTabHFSnapshots,this.bTabHFIndividual,this.bTabHFAccess],style:"margin: 20px auto;"});this.tabsHF.on("buttonchecked",this.onTabItemSelect,this);return'<div class="" id="'+(this.tabNodeId=Ext.id())+'"></div>'},getFooter:function(){this.bApply=new Ext.UI.Button({text:_TR("APPLY"),width:100,
disabled:true});this.bApply.on("click",this.onApplyClick,this);this.bOk=new Ext.UI.Button({text:_TR("OK"),width:100,acceptbtn:true});this.bOk.on("click",this.onOkClick,this);this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});this.bCancel.on("click",function(){this.hide()},this);return["->",this.bOk,this.bCancel,this.bApply]},loadShare:function(a){this.shareChanged=false;this.hfoptions=this.lun=this.share=undefined;this.shareaclchanged=false;this.bApply.disable();this.bTabSnaps.setText(_TR("SNAPSHOTS"));
if(a=_a(a,"_i3"))if(a=_a(a.clone(),"_i38")){this.share=a;this.setTitle(a.getName());a.isReadyDRShare()&&this.bTabSnaps.setText(_TR("RETENTION"));this.bTabNet.enable();this.bTabSnaps.enable();this.bTabFF.setDisabled(a.isReadyDRShare());this.propTab.loadShare(a);this.netTab&&this.netTab.loadShare(a);this.snapsTab&&this.snapsTab.loadShare(a);this.ffTab&&this.ffTab.loadShare(a)}},loadLun:function(a){this.shareChanged=false;this.hfoptions=this.lun=this.share=undefined;this.shareaclchanged=
false;this.bApply.disable();this.bTabSnaps.setText(_TR("SNAPSHOTS"));if(a=_a(a,"_i3"))if(a=_a(a.clone(),"_i1j")){this.lun=a;this.setTitle(a.getName());this.bTabNet.disable();this.bTabSnaps.enable();this.bTabFF.disable();this.propTab.loadLun(a);this.snapsTab&&this.snapsTab.loadLun(a)}},loadHFOptions:function(a){this.shareChanged=false;this.hfoptions=this.lun=this.share=undefined;this.shareaclchanged=false;this.bApply.disable();this.bTabSnaps.setText(_TR("SNAPSHOTS"));if(a=_a(a,
"_i3"))if(a=_a(a.clone(),"IHomeFolderOptions")){this.hfoptions=a;this.setTitle(_TR("SHARE_HOME_FOLDERS"));this.netTab&&this.netTab.loadShare(_a(this.hfoptions,"_i38"));this.snapsTab&&this.snapsTab.loadHFOptions(a);this.snapsIndTab&&this.snapsIndTab.loadHFOptions(a);this.quotasTab&&this.quotasTab.refresh();this.updateUsers()}if(this.tabsHF.hidden){this.tabs.hide();this.tabsHF.show()}this.tabsHF.setPressedButton(0)},clear:function(){this.tabs.show();this.tabsHF.hide();this.tabs.setPressedButton(0);
this.netTab&&this.netTab.clear();this.okclick=false;this.syncShadow()},validateCifsHostAccess:function(a){a&&_a(_a(a,"_i38").getProtocolByName("cifs"),"_i3c").getDefaultAccess()},afterRender:function(a){_s2.DataSetSettings.superclass.afterRender.call(this,a);a=this.header.parent();this.tabs.render(a);this.tabsHF.render(a);this.propTab=new _s2.DataSetProperties({listeners:{sharechanged:this.onShareChanged,sharecalculate:this.onShareCalculate,scope:this}});
this.propTab.render(this.tabNodeId);this.body.on("click",function(){this.syncShadow()},this);this.syncShadow();this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0})},onHide:function(){_s2.DataSetSettings.superclass.onHide.apply(this,arguments);delete this.hfoptions},onShareChanged:function(){this.shareChanged=true;this.bApply.enable()},onShareCalculate:function(a){this.spSystemManager.updateShareConsumed(a,"shares-get-consumed")},
onUsersChanged:function(){this.bApply.enable()},onRefresh:function(){this.updateUsers()},onTabItemSelect:function(a){if(this.tabs.isVisible()&&a.value!="properties"&&!this.propTab.validate())setTimeout(function(){this.bTabProp.press()}.bind(this),50);else{switch(a.value){case "properties":this.netTab&&this.netTab.hide();this.ffTab&&this.ffTab.hide();this.snapsTab&&this.snapsTab.hide();this.snapsIndTab&&this.snapsIndTab.hide();this.quotasTab&&this.quotasTab.hide();this.propTab.show();break;case "network":if(!this.netTab){this.netTab=
new _s2.ShareAccess({listeners:{sharechanged:this.onShareChanged,scope:this}});this.netTab.render(this.tabNodeId);this.share&&this.netTab.loadShare(this.share);this.hfoptions&&this.netTab.loadShare(_a(this.hfoptions,"_i38"));this.netTab.setHeight(this.body.getSize(true).height)}this.propTab.hide();this.ffTab&&this.ffTab.hide();this.snapsTab&&this.snapsTab.hide();this.snapsIndTab&&this.snapsIndTab.hide();this.quotasTab&&this.quotasTab.hide();this.netTab.show();break;case "snapshots":if(!this.snapsTab){this.snapsTab=
new _s2.Settings.Snapshots({listeners:{sharechanged:this.onShareChanged,scope:this}});this.snapsTab.render(this.tabNodeId);this.share&&this.snapsTab.loadShare(this.share);this.lun&&this.snapsTab.loadLun(this.lun);this.hfoptions&&this.snapsTab.loadHFOptions(this.hfoptions)}this.propTab.hide();this.netTab&&this.netTab.hide();this.ffTab&&this.ffTab.hide();this.snapsIndTab&&this.snapsIndTab.hide();this.quotasTab&&this.quotasTab.hide();this.snapsTab.show();break;case "snapshots-individual":if(!this.snapsIndTab){this.snapsIndTab=
new _s2.HFUsersProtectionBlock({listeners:{userschanged:this.onUsersChanged,refresh:this.onRefresh,scope:this}});this.snapsIndTab.render(this.tabNodeId);this.snapsIndTab.loadHFOptions(this.hfoptions)}this.propTab.hide();this.netTab&&this.netTab.hide();this.ffTab&&this.ffTab.hide();this.snapsTab&&this.snapsTab.hide();this.quotasTab&&this.quotasTab.hide();this.snapsIndTab.show();break;case "filefolder":if(!this.ffTab){this.ffTab=new _s2.ShareFileFolder({listeners:{sharechanged:this.onShareChanged,
shareaclchanged:function(){this.shareaclchanged=true},scope:this}});this.ffTab.render(this.tabNodeId);this.share&&this.ffTab.loadShare(this.share)}this.propTab.hide();this.netTab&&this.netTab.hide();this.snapsTab&&this.snapsTab.hide();this.snapsIndTab&&this.snapsIndTab.hide();this.quotasTab&&this.quotasTab.hide();this.ffTab.show();break;case "quotas":if(!this.tabsHF.hidden){if(!this.quotasTab){this.quotasTab=new _s2.HFUsersQuotasBlock({listeners:{sharechanged:this.onShareChanged,usersschanged:this.onUsersChanged,
scope:this}});this.quotasTab.render(this.tabNodeId);this.quotasTab.refresh()}this.propTab.hide();this.netTab&&this.netTab.hide();this.ffTab&&this.ffTab.hide();this.snapsTab&&this.snapsTab.hide();this.snapsIndTab&&this.snapsIndTab.hide();this.quotasTab.show()}break}this.syncShadow()}},onOkClick:function(){this.okclick=true;this.bApply.disabled?this.hide():this.onApplyClick()},onApply:function(){var a=true;this.validateCifsHostAccess(this.share);if(this.shareChanged)if(this.share){if(!this.propTab.onApplyClick()){this.tabs.setPressedButton(0);
a=false}if(this.ffTab&&!this.share.isReadyDRShare()&&!this.ffTab.onApplyClick()){this.tabs.setPressedButton(3);a=false}if(a){this.snapsTab&&this.snapsTab.onApplyClick();this.commitShareName=this.share.getName();this.shareaclchanged?this.spShareManager.commitShareAcl(this.share,"shares-propwnd-commit-shareacl"):this.spShareManager.commitShare(this.share,"shares-propwnd-commit-share")}}else if(this.lun){if(this.propTab.onApplyClick()){this.snapsTab&&this.snapsTab.onApplyClick();this.commitLunName=this.lun.getName();
this.spShareManager.commitLUN(this.lun,"shares-propwnd-commit-lun")}}else if(this.hfoptions){this.snapsTab&&this.snapsTab.onApplyClick();this.spSystemManager.CommitHomeFolderOptions("shares-propwnd-commit-hfoptions",this.hfoptions)}var b=[];if(this.snapsIndTab)b=this.snapsIndTab.applyUsersSettings();if(this.quotasTab)b=this.quotasTab.applyUsersSettings(b);b.length&&this.spSecurityManager.commitUsers("shares-propwnd-commit-users",b);a&&this.bApply.disable()},onApplyClick:function(){var a=false;if(this.share&&
this.shareChanged)if(this.propTab.validate()){var b=this.propTab.curUSBVol&&this.propTab.curUSBVol.getFSFormat(),c=this.share;if(c.getSN()&&this.propTab.tfDeviceLbl.getValue()!=c.getLabel()&&(b=="ntfs"||b=="btrfs")){a=true;Ext.UI.MessageBox.show({title:_TR("WARNING"),msg:_TR("SHARE_TAB_LABEL_WARNING_MESSAGE"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.WARNING,fn:function(d){d!="ok"&&this.propTab.tfDeviceLbl.setValue(c.getLabel());this.onApply()}.bind(this)})}}else a=true;!a&&this.onApply()},onResize:function(){_s2.DataSetSettings.superclass.onResize.apply(this,
arguments);this.maskProgress&&_a(this.maskProgress,"ISyncWindowResizeEvent").OnResize();this.netTab&&this.netTab.setHeight(this.body.getSize(true).height);this.syncShadow()},updateUsers:function(){this.spSecurityManager.getADSMode()=="user"?this.spSecurityManager.updateUsersWithAdmin("shares-propwnd-update-users",true,false):this.spSecurityManager.updateADSMode("shares-propwnd-update-adsmode")},showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;
this.updatesCount||this.maskProgress.hide()},_i3b:{_o1:function(a,b){if(b=="shares-propwnd-update-shares"||b=="shares-propwnd-update-luns"||b=="shares-propwnd-commit-share"||b=="shares-propwnd-commit-shareacl"||b=="shares-get-consumed"||b=="shares-propwnd-commit-lun")this.showProgress();return _5},_o2:function(a,b){if(b=="shares-propwnd-update-shares")if(this.okclick)this.hide();else{if(this.commitShareName){this.loadShare(this.spShareManager.getShareByName(this.commitShareName));
this.commitShareName=undefined}}else if(b=="shares-propwnd-update-luns")if(this.okclick)this.hide();else{if(this.commitLunName){this.loadLun(this.spShareManager.getLunByName(this.commitLunName));this.commitLunName=undefined}}else if(b=="shares-propwnd-commit-share")this.spShareManager.updateShares("shares-propwnd-update-shares");else if(b=="shares-propwnd-commit-shareacl")this.spShareManager.commitShare(this.share,"shares-propwnd-commit-share");else if(b=="shares-propwnd-commit-lun")this.spShareManager.updateLUNS("shares-propwnd-update-luns");
else b=="shares-get-consumed"&&this.propTab.setConsumed(this.spShareManager.getShareConsumed());return _5},_o3:function(a,b,c){if(c=="shares-propwnd-update-shares"||c=="shares-propwnd-update-luns"||c=="shares-propwnd-commit-share"||c=="shares-propwnd-commit-shareacl"||c=="shares-get-consumed"||c=="shares-propwnd-commit-lun")this.hideProgress();if(a==_4){if(a=_a(b,"_io").getLastNMLError())var d=a.getErrorCode(),e=a.getErrorDetails();else c=="shares-propwnd-commit-share"&&this.spShareManager.commitShare(this.share,
"shares-propwnd-commit-share");if(a&&d&&e){c=_TR(d)+"<br />"+e;this.hide();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(c,"Code: "+d,_2.ERROR,{windowTitle:_TR("SHARE_FAILED"),title:"",subTitle:c,buttonInspect:false,buttonShowLog:false,buttonReport:d!="21003010016",checkboxShow:false})}}return _5}},_i45:{_o1:function(a,b){if(b=="shares-volumes-update-homefolderoptions"||b=="shares-propwnd-commit-hfoptions")this.showProgress();return _5},
_o3:function(a,b,c){if(c=="shares-volumes-update-homefolderoptions"||c=="shares-propwnd-commit-hfoptions")this.hideProgress();if(c=="shares-propwnd-commit-hfoptions"){if(this.okclick){delete this.hfoptions;this.hide()}}else if(c=="shares-volumes-update-homefolderoptions")this.hfoptions&&this.loadHFOptions(this.spSystemManager.getHomeFolderOptions());else c=="shares-propwnd-update-rcowner"&&this.spSecurityManager.UpdateRCUsers("shares-propwnd-update-rcusers");if(c=="shares-volumes-update-homefolderoptions"||
c=="shares-propwnd-commit-hfoptions"||c=="shares-volumes-update-homefolderoptions"||c=="shares-propwnd-update-rcowner")if(a==_4)if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();b=b.getErrorDetails();if(a&&b){b=_TR(a)+"<br />"+b;this.hide();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a,_2.ERROR,{windowTitle:_TR("SHARE_FAILED"),title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5},
OnShareConsumed:function(){this.propTab.setConsumed(arguments);return _5}},_i2y:{_o1:function(a,b){b=="shares-propwnd-commit-users"&&this.showProgress();return _5},_o3:function(a,b,c){if(c=="shares-propwnd-update-adsmode"||c=="sync-update-security"){c=this.spSecurityManager.getADSMode();c=="user"&&this.spSecurityManager.updateUsersWithAdmin("shares-propwnd-update-users",true,false)}else if(c=="shares-propwnd-update-users")this.spSystemManager.updateCloudOwner("shares-propwnd-update-rcowner");
else if(c=="shares-propwnd-commit-users"){c=this.spSecurityManager.getADSMode();c=="user"&&this.spSecurityManager.updateUsersWithAdmin("shares-propwnd-update-users",true,false);this.okclick&&!this.shareChanged&&this.hide();this.hideProgress();if(a==_4)if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();b=b.getErrorDetails();if(a&&b){b=_TR(a)+"<br />"+b;_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a,_2.ERROR,{title:"",subTitle:b,buttonInspect:false,
buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}return _5}}});
_s2.Permissions=_._1(_9,Ext.UI.Window,{modal:true,resizable:false,closeAction:"hide",width:620,cls:"x-sh-permissionswnd",constructor:function(){this.html='<div><div id="'+(this.boxUsersId=Ext.id())+'"></div><div class="'+this.cls+'-ads-note">'+_TR("PERMISSIONS_ADS_NOTE")+'</div><div id="'+(this.boxSearchId=Ext.id())+'"></div></div>';_s2.Permissions.superclass.constructor.apply(this,arguments)},initComponent:function(){this.bApply=new Ext.UI.Button({text:_TR("APPEND"),
width:100,acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({text:_TR("CLOSE"),width:100,cancelbtn:true,handler:this.onCancelClick,scope:this});this.fbar=["->",this.bApply,this.bCancel];_s2.Permissions.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spShareManager=a.getShareManager();this.spSystemManager=a.getSystemManager();_a(this.spSystemManager,"_i1").Advise(this);
this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this)},afterRender:function(){_s2.Permissions.superclass.afterRender.apply(this,arguments);this.usersBlock=new _s2.PermissionsBlock({renderTo:this.boxUsersId,listeners:{changed:function(){this.maskProgress.show();this.spShareManager.commitShare(this.share.node,"shares-volumes-commit-share")},scope:this}});this.searchBlock=new _s2.PermissionsSearch({renderTo:this.boxSearchId,
listeners:{changed:function(){this.maskProgress.show();this.spShareManager.commitShare(this.share.node,"shares-volumes-commit-share")},scope:this}});this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0})},show:function(a){this.share=a;_s2.Permissions.superclass.show.call(this);this.reviewState();this.usersBlock.clear();this.searchBlock.clear();this.maskProgress.show();this.spSystemManager.updateCloudOwner("shares-permissions-update-rcowner")},
reviewState:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2").getSecurityManager().getADSMode()=="ads";this.setTitle(a?_TR("PERMISSIONS_ADS"):_TR("PERMISSIONS"));this.el[a?"addClass":"removeClass"](this.cls+"-ads")},populate:function(){this.maskProgress.hide();this.usersBlock.load(this.share);this.searchBlock.load(this.share)},onApplyClick:function(){var a=this.searchBlock.getSelection(),b=a.item,c=this.share.node.getProtocolByName(a.protocol);a=a.access;if(b.role==1){c.putDefaultAccess(a);
c.putAllowGuestAccess(true)}else if(b.role==2)c.putDefaultAccess(a);else if(b.role==3)b.item.putAccess(a);else if(b.role==4)c.putDefaultAccess(a);else if(b.role==5){var d=b.item.getId(),e=c.getGroupById(d);if(!e){e=_a(new _1.group,"_i2v");e.putId(d);e.putName(b.name);c.appendGroup(e)}e.putAccess(a)}else if(b.role==6){d=b.item.getId();e=c.getUserById(d);if(!e){e=_a(new _1.user,"_i2z");e.putId(d);e.putName(b.name);c.appendUser(e)}e.putAccess(a)}this.maskProgress.show();this.spShareManager.commitShare(this.share.node,
"shares-volumes-commit-share")},onCancelClick:function(){this.hide()},_i45:{_o3:function(a,b,c){c=="shares-permissions-update-rcowner"&&this.spSecurityManager.updateADSMode("shares-permissions-update-mode")}},_i2y:{_o3:function(a,b,c){if(c=="shares-permissions-update-mode"){this.reviewState();this.spSecurityManager.getADSMode()=="user"?this.spSecurityManager.updateGroups("shares-permissions-update-groups"):this.populate()}else if(c=="shares-permissions-update-groups")this.spSecurityManager.UpdateRCUsers("shares-permissions-update-rcusers");
else if(c=="shares-permissions-update-rcusers")this.spSecurityManager.updateUsersWithAdmin("shares-permissions-update-users",true,false);else c=="shares-permissions-update-users"&&this.populate()}}});
_s2.PermissionsBlock=_._1(_9,Ext.Component,{cls:"x-sh-permissionsblock",tableCls:"x-sh-permissionsblock-table",constructor:function(){_s2.PermissionsBlock.superclass.constructor.apply(this,arguments);this.groups=[];this.addEvents("changed")},afterRender:function(){this.el.update('<table class="'+this.tableCls+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="'+this.cls+'-data-expand"></td><td class="'+this.cls+'-data-name"><div>'+_TR("NAME")+
'</div></td><td class="'+this.cls+'-data-protocol"><div>'+_TR("PROTOCOLS")+'</div></td><td class="'+this.cls+'-data-combobox"><div>'+_TR("ACCESS")+'</div></td><td class="'+this.cls+'-data-delete"></td></tr></table><div id="'+(this.dataNodeId=Ext.id())+'" class="'+this.tableCls+" "+this.cls+'-data"></div>');this.dataNode=Ext.get(this.dataNodeId);this.scroller=new Ext.UI.Scroller({dom:this.dataNode.dom,type:"vertical"});this.scroller.reg()},load:function(a){for(var b=this.groups=this.loadProtocols(a.node),
c,d,e="",f=0,g="",h=0,j=b.length;h<j;++h){c=b[h];f=c.items.length;g="";for(var k=0;k<f;++k){d=c.items[k];g+='<table id="'+(d.rowId=Ext.id())+'" class="'+this.tableCls+" "+this.cls+"-data-item ui-fwgrid-row"+(h%2==1?"alt":"")+(f==1?" x-hide-display":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-frontview-panel-btn '+this.cls+"-data-expand "+this.cls+'-data-expand-hidden"><div class="x-frontview-panel-expand"></div></div></td><td class="'+this.cls+'-data-name"><div class="x-ellipsis" title="'+
d.name+'">'+d.name+'</div></td><td class="'+this.cls+'-data-protocol"><div class="x-ellipsis" title="'+_TR(d.protocol.getName().toUpperCase())+'">'+_TR(d.protocol.getName().toUpperCase())+'</div></td><td id="'+(d.cbId=Ext.id())+'" class="'+this.cls+'-data-combobox"></td><td id="'+(d.bDelId=Ext.id())+'" class="'+this.cls+'-data-delete"></td></tr></table>'}e+='<table id="'+(c.rowId=Ext.id())+'" class="'+this.tableCls+" ui-fwgrid-row"+(h%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td id="'+
(c.expandId=Ext.id())+'" class="x-frontview-panel-btn '+this.cls+"-data-expand "+(f<2||c.type=="admin"||c.type=="rcowner"||c.type=="rcuser"?this.cls+"-data-expand-hidden":"")+'"><div class="x-frontview-panel-expand x-frontview-panel-collapse"></div></div></td><td class="'+this.cls+'-data-name"><div class="x-ellipsis x-sh-permissionsblock-'+c.type+'" title="'+c.name+'">'+c.name+'</div></td><td class="'+this.cls+'-data-protocol"><div class="x-ellipsis" title="'+c.desc+'">'+c.desc+'</div></td><td id="'+
(c.cbId=Ext.id())+'" class="'+this.cls+'-data-combobox"></td><td id="'+(c.bDelId=Ext.id())+'" class="'+this.cls+'-data-delete"></td></tr></table><div id="'+(c.treeId=Ext.id())+'" class="x-hide-display">'+g+"</div>"}this.dataNode.update(e);h=0;for(j=b.length;h<j;++h){c=b[h];this.appendGroupRules(c,a.node);for(k=0;k<c.items.length;++k)this.appendItemRules(c.items[k],a.node)}},clear:function(){for(var a,b=0,c=this.groups.length;b<c;++b){a=this.groups[b];a.cb.destroy();for(var d=0;d<a.items.length;++d)a.items[d].cb.destroy()}this.dataNode.update("");
this.scroller.resize()},appendGroupRules:function(a,b){a.row=Ext.get(a.rowId);a.expand=Ext.get(a.expandId).on("click",function(c){this.onGroupExpandClick(c,a)},this);a.tree=Ext.get(a.treeId);a.cb=new Ext.UI.ComboBox({item:a,width:110,renderTo:a.cbId,mode:"local",triggerAction:"all",valueField:"id",displayField:"text",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ReadOnly",_TR("READ_ONLY")],["ReadWrite",_TR("READ_WRITE")]]}),listeners:{select:function(c){this.onGroupPermSelect(c,a)},
expand:function(c){this.onItemExpand(c,b)},scope:this}});if(a.write)a.cb.setValue("ReadWrite",true);else a.read&&a.cb.setValue("ReadOnly",true);a.bDel=new Ext.BoxComponent({item:a,html:"&#215;",renderTo:a.bDelId});a.bDel.el.on("click",function(){this.onGroupDelete(a)},this);if(a.role==6&&(a.type=="admin"||a.type=="rcowner")){a.cb.disable();a.bDel.hide()}if(a.items.length==1&&a.items[0].protocol.getName()=="http"){a.cb.store.loadData([["ReadOnly",_TR("READ_ONLY")]]);a.cb.setValue("ReadOnly")}},appendItemRules:function(a,
b){a.row=Ext.get(a.rowId);a.cb=new Ext.UI.ComboBox({item:a,width:110,renderTo:a.cbId,mode:"local",triggerAction:"all",valueField:"id",displayField:"text",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ReadOnly",_TR("READ_ONLY")],["ReadWrite",_TR("READ_WRITE")]]}),listeners:{select:function(c){this.onItemPermSelect(c,a)},expand:function(c){this.onItemExpand(c,b)},scope:this}});if(a.write)a.cb.setValue("ReadWrite",true);else a.read&&a.cb.setValue("ReadOnly",true);a.bDel=new Ext.BoxComponent({item:a,
html:"&#215;",renderTo:a.bDelId});a.bDel.el.on("click",function(){this.onItemDelete(a)},this);if(a.role==6&&(a.type=="admin"||a.type=="rcowner")){a.cb.disable();a.bDel.hide()}if(a.protocol.getName()=="http"){a.cb.store.loadData([["ReadOnly",_TR("READ_ONLY")]]);a.cb.setValue("ReadOnly")}},onGroupExpandClick:function(a,b){a=Ext.get(b.expand.query(".x-frontview-panel-expand")[0]);if(a.hasClass("x-frontview-panel-collapse")){a.removeClass("x-frontview-panel-collapse");b.tree.removeClass("x-hide-display")}else{a.addClass("x-frontview-panel-collapse");
b.tree.addClass("x-hide-display")}},onGroupPermSelect:function(a,b){this.changeItemsPerm(b.items,a.getValue())},onGroupDelete:function(a){this.deleteItems(a.items)},onItemPermSelect:function(a,b){this.changeItemsPerm([b],a.getValue())},onItemDelete:function(a){this.deleteItems([a])},onItemExpand:function(a,b){a=a.store;var c;if(b.isReadyDRShare()&&(c=a.getAt(a.find("id","ReadWrite"))))a.remove(c)},changeItemsPerm:function(a,b){for(var c,d=0,e=a.length;d<e;++d){c=a[d];c.role==1||c.role==2||c.role==
4?c.protocol.putDefaultAccess(b):c.item.putAccess(b)}this.fireEvent("changed",this)},deleteItems:function(a){for(var b,c=0,d=a.length;c<d;++c){b=a[c];if(b.role==1)b.protocol.putAllowGuestAccess(false);else if(b.role==2)b.protocol.putDefaultAccess("Disabled");else if(b.role==3)b.item.putAccess("Disabled");else if(b.role==4){b.protocol.putAllowGuestAccess(false);b.protocol.putDefaultAccess("Disabled")}else if(b.role==5)b.protocol.removeGroup(b.item);else b.role==6&&b.protocol.removeUser(b.item)}this.fireEvent("changed",
this)},loadProtocols:function(a){var b=_a(_7(_1.CLSIDS.Device5200),"_i2"),c=b.getSecurityManager(),d=b.getSystemManager(),e=c.getADSMode()=="ads",f=e?[]:c.getUsers();b=e?[]:c.getGroups();var g=e?[]:c.getRCUsers();d=e?undefined:_a(d.getCloudOwner(),"_i2z");var h;c=[];(h=a.getProtocolByName("cifs"))&&this.appendUserGroupProtocol(c,h,f,b,e,g,d);(h=a.getProtocolByName("afp"))&&this.appendUserGroupProtocol(c,h,f,b,e,g,d);(h=a.getProtocolByName("ftp"))&&this.appendUserGroupProtocol(c,
h,f,b,e,g,d);(h=a.getProtocolByName("http"))&&this.appendUserGroupProtocol(c,h,f,b,e,g,d);(h=a.getProtocolByName("nfs"))&&this.appendNFSProtocol(c,h);var j=["cifs","nfs","afp","ftp","http"];c.sort(function(k,l){var m=k.role-l.role;if(m)return m;if(k.name<l.name)return-1;if(k.name>l.name)return 1;return j.indexOf(k.protocol.getName())-j.indexOf(l.protocol.getName())});b=[];f={};a=0;for(e=c.length;a<e;++a){d=c[a];if(!(!d.protocol.getAvailable()||!d.read&&!d.write)){if(!f[g=d.role+d.type+d.name])b.push(f[g]=
{type:d.type,role:d.role,name:d.name,desc:"",read:false,write:false,items:[]});g=f[g];g.desc+=(g.desc?", ":"")+_TR(d.protocol.getName().toUpperCase());if(!g.read&&d.read)g.read=true;if(!g.write&&d.write)g.write=true;g.items.push(d)}}c=[];a=0;for(e=b.length;a<e;++a){g=b[a];g.items.sort(function(k,l){var m=0;k.read&&m++;k.write&&m++;var n=0;l.read&&n++;l.write&&n++;if(m=n-m)return m;return j.indexOf(k.protocol.getName())-j.indexOf(l.protocol.getName())});c.push(g)}return c},appendNFSProtocol:function(a,
b){var c=b.getDefaultAccess(),d={protocol:b,type:"host",role:2,name:"Anyhost",read:c=="ReadOnly"||c=="ReadWrite",write:c=="ReadWrite"};c=b.getHosts();var e;a.push(d);for(var f=0,g=c.length;f<g;++f){e=_a(c[f],"_i3f");d={protocol:b,item:e,type:"host",role:3,name:e.getHostName(),read:false,write:false};e=e.getAccess();if(e=="ReadWrite")d.read=d.write=true;else if(e=="ReadOnly")d.read=true;a.push(d)}},appendUserGroupProtocol:function(a,b,c,d,e,f,g){var h=b.getDefaultAccess(),j=b.getAllowGuestAccess()==
"1";h={protocol:b,item:undefined,type:"group",role:4,name:"Everyone",read:h=="ReadOnly"||h=="ReadWrite",write:h=="ReadWrite"};a.push({protocol:b,item:undefined,type:"group",role:1,name:"Anonymous",read:h.read&&j,write:h.write&&j},h);if(e){d=b.getGroups();c=b.getUsers()}this.appendGroupProtocol(a,b,d,h);this.appendUserProtocol(a,b,c,h);if(!e)if(g&&g!=_4&&f)if((c=g.getName())&&c!=_4){a.push({protocol:b,item:undefined,type:"rcowner",role:6,name:c,read:true,write:true});this.appendUserProtocol(a,
b,f,h,"rcuser")}},appendGroupProtocol:function(a,b,c){for(var d,e,f=0;f<c.length;++f){d=_a(c[f],"_i2v");e={protocol:b,item:undefined,type:"group",role:5,name:d.getName(),read:false,write:false};if(d=e.item=b.getGroupById(d.getId())){d=d.getAccess();if(d=="ReadWrite")e.read=e.write=true;else if(d=="ReadOnly")e.read=true}a.push(e)}},appendUserProtocol:function(a,b,c,d,e){for(var f,g=0;g<c.length;++g){f=_a(c[g],"_i2z");d={protocol:b,item:undefined,type:e||"user",role:6,name:f.getName(),
read:false,write:false};if(f.isAdmin()){d.type="admin";d.read=d.write=true}else if(f=d.item=b.getUserById(f.getId())){f=f.getAccess();if(f=="ReadWrite")d.read=d.write=true;else if(f=="ReadOnly")d.read=true}a.push(d)}}});
_s2.PermissionsSearch=_._1(_9,Ext.Component,{cls:"x-sh-permissionssearch",tableCls:"x-sh-permissionssearch-table",constructor:function(){_s2.PermissionsSearch.superclass.constructor.apply(this,arguments);this.items=[];this.map={};this.addEvents("changed")},afterRender:function(){var a=Ext.id(),b=Ext.id(),c=Ext.id();Ext.id();this.el.update('<div class="'+this.cls+'-filter"><table class="'+this.tableCls+'" cellpadding="0" cellspacing="0"><tr><td id="'+a+'" class="'+
this.cls+'-data-name"></td><td id="'+b+'" class="'+this.cls+'-data-protocol"></td><td id="'+c+'" class="'+this.cls+'-data-combobox"></td></tr></table></div>');this.cmpitems=new Ext.UI.ComboBox({width:214,renderTo:a,mode:"local",triggerAction:"all",valueField:"id",displayField:"text",store:new Ext.data.ArrayStore({fields:["id","text"]})});this.cmpitems.on("expand",this.onItemsExpand,this);this.cmpitems.on("beforeselect",this.onItemsBeforeSelect,this);this.cmpprotocols=new Ext.UI.ComboBox({width:185,
renderTo:b,mode:"local",triggerAction:"all",valueField:"id",displayField:"text",store:new Ext.data.ArrayStore({fields:["id","text"]})});this.cmpprotocols.on("select",this.onProtocolSelect,this);this.cmpaccess=new Ext.UI.ComboBox({width:150,renderTo:c,mode:"local",triggerAction:"all",valueField:"id",displayField:"text",store:new Ext.data.ArrayStore({fields:["id","text"]})})},getSelection:function(){return{item:this.map[this.cmpitems.getValue()],protocol:this.cmpprotocols.getValue(),access:this.cmpaccess.getValue()}},
load:function(a){if(this.share&&this.share.node.getId()!=a.node.getId())this.prevItem=this.prevProto=undefined;this.share=a;this.loadProtocols()},clear:function(){this.prevItem=this.cmpitems.getValue();this.cmpitems.setValue("");this.prevProto=this.cmpprotocols.getValue();this.cmpprotocols.setValue("")},onProtocolSelect:function(){this.reviewFields()},onItemsExpand:function(a){var b=a.list.id;if(!this.map[b]){this.map[b]=true;a=a.list.addClass("x-sh-permissionssearch-list").query(".x-combo-list-item");
b=0;for(var c=a.length;b<c;++b)Ext.get(a[b]).addClass(this.cls+"-"+this.items[b].type)}},onItemsBeforeSelect:function(a,b){b=this.map[b.data.id];if(b.role==-3){a.collapse();a=this.getHostWindow();a.show();a.load(this.share.node,b.item);a.clear();return false}},loadProtocols:function(){var a=this.share,b=[],c;(c=a.node.getProtocolByName("cifs"))&&c.getAvailable()&&b.push(["cifs",_TR("CIFS")]);(c=a.node.getProtocolByName("nfs"))&&c.getAvailable()&&b.push(["nfs",_TR("NFS")]);(c=a.node.getProtocolByName("afp"))&&
c.getAvailable()&&b.push(["afp",_TR("AFP")]);(c=a.node.getProtocolByName("ftp"))&&c.getAvailable()&&b.push(["ftp",_TR("FTP")]);(c=a.node.getProtocolByName("http"))&&c.getAvailable()&&b.push(["http",_TR("HTTP")]);a=this.prevProto;var d;c=0;for(var e=b.length;c<e;++c)if(a==b[c][0]){d=b[c][0];break}this.cmpprotocols.store.loadData(b);b.length>0?this.cmpprotocols.setValue(d||b[0][0]):this.cmpprotocols.setValue("");this.reviewFields()},reviewFields:function(){var a=this.share,b=this.cmpprotocols.getValue(),
c=_a(_7(_1.CLSIDS.Device5200),"_i2"),d=c.getSecurityManager();c.getSystemManager();var e=(c=d.getADSMode()=="ads")?[]:d.getUsers(),f=c?[]:d.getGroups();d=this.items=[];var g,h,j,k=b=="cifs",l=b=="nfs";g=b=="afp";var m=b=="ftp";c=b=="http";var n=k||l||g||m||c;h=n&&!l;var o=n&&!l;m=n&&!l;n=n&&l;(k||g)&&d.push({item:undefined,type:"group",role:1,name:"Anonymous"});l&&d.push({item:undefined,type:"host",role:2,name:"Anyhost"});if(n){n=a.node.getProtocolByName(b).getHosts();b=
0;for(k=n.length;b<k;++b){g=_a(n[b],"_i3f");g={item:g,type:"host",role:3,name:g.getHostName()};d.push(g)}}h&&d.push({item:undefined,type:"group",role:4,name:"Everyone"});if(o){b=0;for(k=f.length;b<k;++b){h=_a(f[b],"_i2v");g={item:h,type:"group",role:5,name:h.getName()};g.name!="admin"&&d.push(g)}}if(m){b=0;for(k=e.length;b<k;++b){f=_a(e[b],"_i2z");g={item:f,type:"user",role:6,name:f.getName()};f.isAdmin()||d.push(g)}}l&&d.push({item:a.node.getProtocolByName("nfs"),
type:"plus",role:-3,name:_TR("ADD_HOST")});e=this.map={};l=[];m=this.prevItem;b=0;for(k=d.length;b<k;++b){g=d[b];e[f=g.role+g.type+g.name]=g;l.push([f,d[b].name]);if(m==f)j=f}this.cmpitems.store.loadData(l);l.length>0?this.cmpitems.setValue(j||l[0][0]):this.cmpitems.setValue("");l=[j=["ReadOnly",_TR("READ_ONLY")]];if(!c&&!a.node.isReadyDRShare())l.push(j=["ReadWrite",_TR("READ_WRITE")]);this.cmpaccess.store.loadData(l);l.length>0?this.cmpaccess.setValue(j[0]):this.cmpaccess.setValue("")},getHostWindow:function(){if(!this.hostWindow){this.hostWindow=
new _s2.AddHost;this.hostWindow.on("sharechanged",function(a,b){a=b.getHostName();b="3host"+a;this.cmpitems.store.loadData([[b,a]],true);this.cmpitems.setValue(b);this.fireEvent("changed",this)},this)}return this.hostWindow}});Ext.namespace("_s1");
_s2.RollbackSnap=_._1(Ext.UI.Window,{modal:true,autoWidth:true,autoCreate:true,constrainHeader:true,minimizable:false,maximizable:false,resizable:false,shim:true,buttonAlign:"left",closable:true,closeAction:"hide",cls:"x-sh-wnd-destroydataset",help:"shares_wnd_rollback_snap",constructor:function(a){this.title=_TR("ROLLBACK_SNAP");this.textToEnter="DELETE DATA";this.html='<table cellspacing="0"><tr><td valign="top" style="padding-top: 5px;"><div class="x-controls-prompt-icon-MESSAGE"></div></td><td><table class="'+
this.cls+'-datatable" cellspacing="0"><tr><td class="'+this.cls+'-datatable-labelcell" style="">'+_TR("ROLLBACK_SNAP_QUESTION")+'</td></tr><tr><td id="'+(this.tfTextId=Ext.id())+'"></td></tr></table></td></tr></table>';this.bDestroy=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("ROLLBACK"),handler:function(){if(this.validate()){this.fireEvent("rollbackapply",this,this.snap);this.hide()}},scope:this,acceptbtn:true});this.bCancel=new Ext.UI.Button({xtype:"uibutton",width:100,text:_TR("CANCEL"),
handler:function(){this.hide()},scope:this,cancelbtn:true});this.fbar=["->",this.bDestroy,this.bCancel];_s2.RollbackSnap.superclass.constructor.call(this,a);this.tfText=new Ext.UI.TextField({width:292,value:""});this.on("afterrender",function(){this.tfText.render(this.tfTextId)},this)},validate:function(){var a=this.tfText.getValue();if(a&&a==this.textToEnter)return true;else{this.tfText.focus();return false}},load:function(a){this.snap=a;this.tfText.setValue("");this.tfText.focus(false,
true);this.syncShadow()}});Ext.namespace("_s2");
_s2.HttpUsersBlock=_._1(_s2.UsersBlock,{constructor:function(a){_s2.HttpUsersBlock.superclass.constructor.call(this,a)},initComponent:function(){_s2.HttpUsersBlock.superclass.initComponent.call(this)},afterRender:function(){_s2.HttpUsersBlock.superclass.afterRender.apply(this,arguments)},getTableHeader:function(a){return'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell">'+_TR("NAME")+
'</td><td class="x-sh-inspector-grid-hcell" style="width:80px;"><div class="x-ellipsis" style="width:80px;text-align:center;white-space: nowrap;" title="'+_TR("ACCESS")+'">'+_TR("ACCESS")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width:0px; display: none;"><div class="x-ellipsis" style="width:0px;text-align:center;white-space: nowrap;" title="'+_TR("READ_WRITE")+'">'+_TR("READ_WRITE")+"</div></td></tr></table>"},getTableRow:function(a,b){var c=b.group&&b.name=="admin"?"admingroup":
b.user&&b.user.isAdmin()?"adminuser":b.rcuser?b.user==this.rcowner?"rcadminuser":"rcuser":b.type;return'<table id="'+(b.itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+c+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" title="'+b.name+'">'+b.name+'</div></td><td id="'+(b.readonlyNodeId=
Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:80px;"></td><td id="'+(b.readwriteNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width:0px; display: none;"></td></tr></table>'}});Ext.namespace("_s2");
_s2.FileAccessUsersBlock=_._1(_s2.UsersBlock,{constructor:function(){_s2.FileAccessUsersBlock.superclass.constructor.apply(this,arguments)},afterRender:function(){_s2.FileAccessUsersBlock.superclass.afterRender.apply(this,arguments);this.anonymousCheck.hide();this.el.child(".x-sh-inspector-grid").setStyle("max-height","175px")},loadData:function(){for(var a=0;a<this.items.length;++a){this.items[a].readonly&&this.items[a].readonly.destroy();this.items[a].readwrite&&
this.items[a].readwrite.destroy()}if(this.acllist&&this.acllist!=_4){var b;this.items=new Array({type:"group",name:"Everyone",email:""},{type:"user",name:_TR("FOLDER_OWNER"),email:""},{type:"group",name:_TR("FOLDER_GROUP"),email:""});if(this.adsMode=="ads"){this.groups=[];this.users=[];_.each(this.acllist.getGroupAcls(),function(d){d=_a(d,"IShareAcl");d.getName()!="admin"&&d.getName()!="guest"&&this.items.push({type:"group",name:d.getName(),id:d.getId(),email:"",group:d,acl:d})},this);
_.each(this.acllist.getUserAcls(),function(d){d=_a(d,"IShareAcl");d.getName()!="admin"&&d.getName()!="guest"&&this.items.push({type:"user",name:d.getName(),id:d.getId(),email:"",user:d,acl:d})},this)}for(a=0;a<this.groups.length;++a){b=_a(this.groups[a],"_i2v");this.items.push({type:"group",name:b.getName(),id:b.getId(),email:"",group:b})}this.items.push({type:"group",name:"guest",id:"99",email:""});for(a=0;a<this.users.length;++a){b=_a(this.users[a],"_i2z");this.items.push({type:"user",
name:b.getName(),id:b.getId(),email:b.getEmail(),user:b})}this.items.push({type:"user",name:"guest",id:"99",email:""});if(this.adsMode=="user")if(this.rcowner&&this.rcowner!=_4&&this.rcusers)if((a=this.rcowner.getName())&&a!=_4){this.items.push({type:"user",name:a,email:this.rcowner.getEmail(),user:this.rcowner,rcuser:this.rcowner});for(a=0;a<this.rcusers.length;++a){b=_a(this.rcusers[a],"_i2z");this.items.push({type:"user",name:b.getName(),email:b.getEmail(),user:b,rcuser:b})}}b=
"";for(a=0;a<this.items.length;++a)b+=this.getTableRow(a,this.items[a]);this.dataNode.update(b);for(a=0;a<this.items.length;++a){b=new Ext.UI.Checkbox({item:this.items[a],cls:"x-sh-inspector-checkbox-center",disabled:this.protocolName=="cifs"&&this.items[a].name=="admin"});b.render(this.items[a].readonlyNodeId);b.on("check",function(d){this.onUserChecked(d,"readonly")},this);var c=new Ext.UI.Checkbox({item:this.items[a],cls:"x-sh-inspector-checkbox-center",disabled:this.protocolName=="cifs"&&this.items[a].name==
"admin"});c.render(this.items[a].readwriteNodeId);c.on("check",function(d){this.onUserChecked(d,"readwrite")},this);this.items[a].readonly=b;this.items[a].readwrite=c;this.items[a].row=Ext.get(this.items[a].itemNodeId)}}},appendRules:function(){if(this.acllist&&this.acllist!=_4){this.defaultAccess=this.acllist.getOtherAcl().getPermissions();for(var a=this.items.length,b=0;b<a;b+=1){this.items[b].readonly.show();this.items[b].readonly.setDisabled(false);this.items[b].readwrite.show();this.items[b].readwrite.setDisabled(false);
if(this.items[b].type=="user")if(this.items[b].user&&this.items[b].user.isAdmin&&this.items[b].user.isAdmin()){this.items[b].readonly.setDisabled(true);this.items[b].readwrite.setDisabled(true);this.items[b].readonly.setValue(false,true);this.items[b].readwrite.setValue(true,true)}else{if(this.items[b].name==_TR("FOLDER_OWNER"))var c=this.acllist.getUserOwnerAcl().getPermissions();else{if(this.defaultAccess==="7"){this.items[b].readwrite.hide();this.items[b].readwrite.setDisabled(true)}else if(this.defaultAccess===
"5"){this.items[b].readonly.hide();this.items[b].readonly.setDisabled(true)}if(this.items[b].rcuser){this.items[b].readonly.setDisabled(true);this.items[b].readwrite.setDisabled(true)}c=(c=this.acllist.getUserAclById(this.items[b].id))?c.getPermissions():"0"}if(c=="7")this.items[b].readwrite.setValue(true,true);else c=="5"&&this.items[b].readonly.setValue(true,true)}else if(this.items[b].type=="group")if(this.items[b].name=="admin"){this.items[b].readonly.setDisabled(true);this.items[b].readwrite.setDisabled(true);
this.items[b].readonly.setValue(false,true);this.items[b].readwrite.setValue(true,true)}else{if(this.items[b].name==_TR("FOLDER_GROUP"))c=this.acllist.getGroupOwnerAcl().getPermissions();else if(this.items[b].name=="Everyone")c=this.defaultAccess;else{if(this.defaultAccess==="7"){this.items[b].readwrite.hide();this.items[b].readwrite.setDisabled(true)}else if(this.defaultAccess==="5"){this.items[b].readonly.hide();this.items[b].readonly.setDisabled(true)}c=(c=this.acllist.getGroupAclById(this.items[b].id))?
c.getPermissions():"0"}if(c=="7")this.items[b].readwrite.setValue(true,true);else c=="5"&&this.items[b].readonly.setValue(true,true)}}}},onUserChecked:function(a,b){var c=a.item,d=this.share;a.checked&&b=="readwrite"&&c.readonly.setValue(false,true);a.checked&&b=="readonly"&&c.readwrite.setValue(false,true);var e="Disabled",f="0";if(c.readwrite.checked){e="ReadWrite";f="7"}else if(c.readonly.checked){e="ReadOnly";f="5"}switch(c.type){case "user":if(c.name==_TR("FOLDER_OWNER")){d.putOwnerRights(e);
this.acllist.getUserOwnerAcl().putPermissions(f)}else{var g=this.acllist.getUserAclById(c.id);if(!g){g=_a(new _1.sacl,"IShareAcl");g.putType("user");g.putId(c.id);this.acllist.addAcl(g)}f=="0"?this.acllist.removeAcl(g):g.putPermissions(f)}break;case "group":if(c.name==_TR("FOLDER_GROUP")){d.putGroupRights(e);this.acllist.getGroupOwnerAcl().putPermissions(f);this.acllist.getMaskAcl().putPermissions(f)}else if(c.name=="Everyone"){d.putEveryoneRights(e);d.putEveryoneAccessRights(e);g=this.acllist.getOtherAcl();
g.putPermissions(f)}else{g=this.acllist.getGroupAclById(c.id);if(!g){g=_a(new _1.sacl,"IShareAcl");g.putType("group");g.putId(c.id);this.acllist.addAcl(g)}f=="0"?this.acllist.removeAcl(g):g.putPermissions(f)}break;default:break}switch(c.type){case "user":if(d.getFolderOwner()==c.name){g=0;for(var h=this.items.length;g<h;++g){c=this.items[g];if(c.name==_TR("FOLDER_OWNER")){if(a.checked)if(b=="readwrite")c.readonly.setValue(false,true);else b=="readonly"&&c.readwrite.setValue(false,true);else if(b==
"readwrite")c.readwrite.setValue(false,true);else b=="readonly"&&c.readonly.setValue(false,true);d.putOwnerRights(e);this.acllist.getUserOwnerAcl().putPermissions(f);break}}}else if(_TR("FOLDER_OWNER")==c.name){g=0;for(h=this.items.length;g<h;++g){c=this.items[g];if(c.name==d.getFolderOwner()){if(a.checked)if(b=="readwrite")c.readonly.setValue(false,true);else b=="readonly"&&c.readwrite.setValue(false,true);else if(b=="readwrite")c.readwrite.setValue(false,true);else b=="readonly"&&c.readonly.setValue(false,
true);g=this.acllist.getUserAclById(c.id);if(!g){g=_a(new _1.sacl,"IShareAcl");g.putType("user");g.putId(c.id);this.acllist.addAcl(g)}f=="0"?this.acllist.removeAcl(g):g.putPermissions(f);break}}}break;case "group":if(d.getFolderGroup()==c.name){g=0;for(h=this.items.length;g<h;++g){c=this.items[g];if(c.name==_TR("FOLDER_GROUP")){if(a.checked)if(b=="readwrite")c.readonly.setValue(false,true);else b=="readonly"&&c.readwrite.setValue(false,true);else if(b=="readwrite")c.readwrite.setValue(false,
true);else b=="readonly"&&c.readonly.setValue(false,true);d.putGroupRights(e);this.acllist.getGroupOwnerAcl().putPermissions(f);this.acllist.getMaskAcl().putPermissions(f);break}}}else if(_TR("FOLDER_GROUP")==c.name){g=0;for(h=this.items.length;g<h;++g){c=this.items[g];if(c.name==d.getFolderGroup()){if(a.checked)if(b=="readwrite")c.readonly.setValue(false,true);else b=="readonly"&&c.readwrite.setValue(false,true);else if(b=="readwrite")c.readwrite.setValue(false,true);else b=="readonly"&&c.readonly.setValue(false,
true);g=this.acllist.getGroupAclById(c.id);if(!g){g=_a(new _1.sacl,"IShareAcl");g.putType("group");g.putId(c.id);this.acllist.addAcl(g)}f=="0"?this.acllist.removeAcl(g):g.putPermissions(f);break}}}break}this.appendRules();this.fireEvent("shareaclchanged",this)},onSearchItemChecked:function(a,b,c){var d=_a(new _1.sacl,"IShareAcl");d.putType(a);d.putId(b.getId());d.putName(b.getName());d.putPermissions(c=="ReadWrite"?"7":c=="ReadOnly"?"5":"0");this.acllist.addAcl(d);this.loadData();
this.appendRules();this.hideSearchList();this.fireEvent("shareaclchanged",this)}});Ext.namespace("_s2");
_s2.AddAdsUser=Ext.extend(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,cls:"x-sh-wnd-addadsuser",help:"shares_wnd_add_adsuser",constructor:function(){this.title=_TR("ADD_USER");this.html=this.getHtml();this.fbar=this.getFooter();_s2.AddAdsUser.superclass.constructor.apply(this,arguments);this.spSecurityManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSecurityManager()},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-sh-text '+
this.cls+'-text-name">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr id="'+(this.boxTypeId=Ext.id())+'"><td class="x-sh-text '+this.cls+'-text-type">'+_TR("TYPE")+':</td><td id="'+(this.cbTypeId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("ADD"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",
a,b]},afterRender:function(){_s2.AddAdsUser.superclass.afterRender.apply(this,arguments);this.tfName=new Ext.UI.TextField({enableKeyEvents:true,width:310,renderTo:this.tfNameId,listeners:{keyup:this.validate,scope:this}});this.boxType=Ext.get(this.boxTypeId);this.cbType=new Ext.UI.ComboBox({width:310,typeAhead:true,mode:"local",triggerAction:"all",renderTo:this.cbTypeId,store:new Ext.data.ArrayStore({fields:["id","text"],data:[["user",_TR("USER")],["group",_TR("GROUP")]]}),value:"user",
valueField:"id",displayField:"text",listeners:{select:this.validate,scope:this}})},onAddClick:function(){if(this.validate()){if(this.acllist){var a=_a(new _1.sacl,"IShareAcl");a.putName(this.tfName.getValue());a.putType(this.cbType.getValue());a.putId(this.tfName.getValue());a.putPermissions("0");this.acllist.addAcl(a);this.fireEvent("sharechanged",this)}else if(this.protocol=="hf-snaps-protection"){a=_a(new _1.user,"_i2z");a.putName(this.tfName.getValue());a.putIsDomainMember("1");
this.fireEvent("useradded",this,a)}else{if(this.cbType.getValue()=="user"){a=_a(new _1.user,"_i2z");a.putId(this.tfName.getValue());a.putName(this.tfName.getValue());a.putAccess("Disabled");a.putIsDomainMember("1");this.protocol.appendUser(a)}else{a=_a(new _1.group,"_i2v");a.putId(this.tfName.getValue());a.putName(this.tfName.getValue());a.putAccess("Disabled");a.putIsDomainMember("1");this.protocol.appendGroup(a)}this.fireEvent("sharechanged",this)}this.hide()}},load:function(a,
b){this.share=a;this.protocol=b;if(this.protocol=="filefolder-access")this.acllist=this.share.getAccessAclList();else if(this.protocol=="filefolder-default")this.acllist=this.share.getDefaultAclList();else delete this.acllist;this.protocol=="hf-snaps-protection"?this.boxType.setDisplayed(false):this.boxType.setDisplayed(true);this.userNames={};if(this.acllist){a=this.acllist.getUserAcls();_.each(a,function(c){c=_a(c,"IShareAcl");this.userNames[c.getName()]=c.getName()},this);this.groupNames=
{};a=this.acllist.getGroupAcls();_.each(a,function(c){c=_a(c,"IShareAcl");this.groupNames[c.getName()]=c.getName()},this)}else if(this.protocol=="hf-snaps-protection"){a=this.spSecurityManager.getQueryUsers();_.each(a,function(c){c=_a(c,"_i2z");this.userNames[c.getName()]=c.getName()},this)}else{a=this.protocol.getUsers();_.each(a,function(c){c=_a(c,"_i2z");this.userNames[c.getName()]=c.getName()},this);this.groupNames={};a=this.protocol.getGroups();_.each(a,function(c){c=
_a(c,"_i2v");this.groupNames[c.getName()]=c.getName()},this)}},validate:function(){var a=true;this.removeClass(this.cls+"-err-name");var b=this.tfName.getValue();if(!b.replace(/\s/g,"")||this.cbType.getValue()=="user"&&this.userNames[b]||this.cbType.getValue()=="group"&&this.groupNames[b]){this.addClass(this.cls+"-err-name");a=false}return a},clear:function(){this.removeClass(this.cls+"-err-name");this.tfName.reset();this.tfName.focus(false,true);this.cbType.reset();this.center()}});Ext.namespace("_s2");
_s2.QuotasBlock=_._1(Ext.Container,{constructor:function(){this.html=this.getHtml();_s2.QuotasBlock.superclass.constructor.apply(this,arguments)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spShareManager=a.getShareManager();this.spZFSVolumesManager=a.getZFSVolumesManager();_s2.QuotasBlock.superclass.initComponent.apply(this,arguments)},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td id="'+
(this.chbQuotaNasNodeId=Ext.id())+'" class="x-sh-wnd-dataset-types x-sh-wnd-dataset-types-quotalabel"><td id="'+(this.tfQuotaNasNodeId=Ext.id())+'" class="x-sh-wnd-dataset-types x-sh-wnd-dataset-types-quotatf"><td id="'+(this.cbQuotaNasNodeId=Ext.id())+'" class="x-sh-wnd-dataset-types"></tr></table>'},afterRender:function(){_s2.QuotasBlock.superclass.afterRender.apply(this,arguments);this.chbQuotaNas=new Ext.UI.Checkbox({cls:"x-ellipsis",width:85,boxLabel:_TR("QUOTA"),renderTo:this.chbQuotaNasNodeId,
listeners:{check:this.onPropertyChange,scope:this}});this.tfQuotaNas=new Ext.UI.TextField({disabled:true,enableKeyEvents:true,maskRe:/\d/,renderTo:this.tfQuotaNasNodeId,listeners:{keyup:this.onPropertyChange,change:this.onPropertyChange,scope:this}});this.tfQuotaNas.setWidth(145);this.cbQuotaNas=new Ext.UI.ComboBox({disabled:true,width:75,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["MB",_TR("MB")],["GB",_TR("GB")],["TB",_TR("TB")]]}),
value:"GB",valueField:"id",displayField:"text",renderTo:this.cbQuotaNasNodeId,listeners:{select:this.onPropertyChange,scope:this}})},onPropertyChange:function(a){this.fireEvent("sharechanged",this);var b=this.volume||this.spZFSVolumesManager.getVolumeById(this.share.getVolumeId());if(a==this.chbQuotaNas){a=this.chbQuotaNas.getValue();this.tfQuotaNas.setDisabled(!a);this.cbQuotaNas.setDisabled(!a);a&&b.getQuota()!="on"&&Ext.UI.MessageBox.info({icon:Ext.UI.MessageBox.WARNING,msg:_TR("QUOTA_ALERT_ENABLE_VOL")+
"<br /><br />"+_TR("QUOTA_ALERT_DESC")+"<br /><br />"+_TR("QUOTA_ALERT_ENABLE")})}else a==this.cbQuotaNas&&this.tfQuotaNas.setValue(this.generateSizeLabel(this.share.getRefQuotaMB(),this.cbQuotaNas.getValue()));a=/^\d+$/;var c=this.nasSizeIsValid=true;if(this.share.getUsedByDatasetMB()!=_4&&this.share.getVolumeId()!=""){c=false;var d=parseInt(this.share.getUsedByDatasetMB());b=parseInt(b.getAvailable()/1024)}else b=parseInt(this.volume.getAvailable()/1024);var e=0;if(this.chbQuotaNas.getValue())e=
this.tfQuotaNas.getValue();if(!a.test(e)||!a.test(0))this.nasSizeIsValid=false;else{e=this.generateSize(e,this.cbQuotaNas.getValue());if(c){if(e<0||e>b)this.nasSizeIsValid=false}else if(e>0&&e<d||e>b+d)this.nasSizeIsValid=false;this.share.putRefQuotaMB(e)}},loadShare:function(a){this.nasSizeIsValid=true;this.fireEvent("valid");var b=a.getRefQuotaMB();b=b&&b!=_4?parseInt(b):0;this.cbQuotaNas.setValue("GB");if(b){this.chbQuotaNas.setValue(true,true);if(b>=1048576){this.cbQuotaNas.setValue("TB",
true);this.tfQuotaNas.setValue(this.generateSizeLabel(b,"TB"),true)}else if(b>=1024){this.cbQuotaNas.setValue("GB",true);this.tfQuotaNas.setValue(this.generateSizeLabel(b,"GB"),true)}else{this.tfQuotaNas.setValue(b,true);this.cbQuotaNas.setValue("MB")}}else{this.chbQuotaNas.setValue(false,true);this.tfQuotaNas.setValue("")}this.tfQuotaNas.setDisabled(!b);this.cbQuotaNas.setDisabled(!b);this.share=a},validate:function(){this.fireEvent("valid");if(!this.nasSizeIsValid){this.fireEvent("invalid");return false}return true},
generateSize:function(a,b){switch(b){case "TB":a*=1024;case "GB":a*=1024}return a},generateSizeLabel:function(a,b){switch(b){case "TB":a/=1024;case "GB":a/=1024}return a}});Ext.namespace("_s2");
_s2.HFUsersQuotasBlock=_._1(_9,_s2.UsersQuotasBlock,{updateCount:0,help:"shares_tab_ds_quotas",constructor:function(){_s2.HFUsersQuotasBlock.superclass.constructor.apply(this,arguments)},afterRender:function(){_s2.HFUsersQuotasBlock.superclass.afterRender.apply(this,arguments);this.filterCombo.setValue("user");Ext.get(this.filterNodeId).setDisplayed(false);this.dataNode.setStyle({maxHeight:"304px"});this.search.setWidth(295);this.search.emptyText=
_TR("ENTER_NAME_TO_SEARCH_USERS")},getTableHeader:function(a){return'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0" style="table-layout: fixed;"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell x-sh-inspector-grid-cell-name" style="width: auto;"><div class="x-ellipsis">'+_TR("NAME")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width: 150px;"><div class="x-ellipsis">'+_TR("LIMIT_GB")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width: 200px;"><div class="x-ellipsis">'+
_TR("CONSUMED_GB")+"</div></td></tr></table>"},load:function(){_s2.HFUsersQuotasBlock.superclass.load.apply(this,arguments);this.filterCombo.setValue("user")},loadData:function(){this.clear();var a;this.items=[];for(var b=0;b<this.users.length;++b){a=_a(this.users[b],"_i2z");this.items.push({type:"user",name:a.getName(),id:a.getId(),secUser:a})}if(this.rcowner&&this.rcowner!=_4&&this.rcusers)if((b=this.rcowner.getName())&&b!=_4){this.items.push({type:"user",name:b,id:this.rcowner.getId(),
secUser:this.rcowner,rcuser:this.rcowner});for(b=0;b<this.rcusers.length;++b){a=_a(this.rcusers[b],"_i2z");this.items.push({type:"user",name:a.getName(),id:a.getId(),secUser:a,rcuser:a})}}a="";for(b=0;b<this.items.length;++b)a+='<table id="'+(this.items[b].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(b%2==1?"alt":"")+'" cellpadding="0" cellspacing="0" style="table-layout: fixed;"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+
(this.items[b].rcuser?this.items[b].secUser==this.rcowner?"rcadminuser":"rcuser":this.items[b].type)+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" style="width: auto;" title="'+this.items[b].name+'">'+this.items[b].name+'</div></td><td id="'+(this.items[b].tfQuotaNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width: 150px;"></td><td id="'+(this.items[b].pUsedNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width: 100px;"></td><td id="'+
(this.items[b].lUsedNodeId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width: 100px;"></td></tr></table>';this.dataNode.update(a);this.dataNode.setDisplayed(!!a);this.emptyNode.setDisplayed(!a);for(b=0;b<this.items.length;++b){a=new Ext.UI.ProgressIndicator({item:this.items[b],width:90,hidden:true,renderTo:this.items[b].pUsedNodeId});var c=new Ext.UI.TextField({item:this.items[b],width:108,emptyText:_TR("USER_SETTINGS_HOME_FOLDER_CAPACITY_UNLIMITED"),enableKeyEvents:true,maskRe:/\d/,renderTo:this.items[b].tfQuotaNodeId,
listeners:{keydown:this.onQuotaChange,change:this.onQuotaChange,scope:this}});this.items[b].pUsed=a;this.items[b].lUsed=Ext.get(this.items[b].lUsedNodeId);this.items[b].tfQuota=c;this.items[b].row=Ext.get(this.items[b].itemNodeId)}},appendRules:function(){for(var a=this.items.length,b=0;b<a;b+=1){var c=this.items[b].secUser.getHomeFolder();if(c&&c!=_4){var d=c.getSizeLimit();d=d!=_4?d/1024/1024/1024:"";this.items[b].tfQuota.setValue(d?d:"");d&&this.items[b].pUsed.show();c=c.getSizeUsed();
c=c==_4||c=="0"?"0":(c/1024/1024/1024).toFixed(3);this.items[b].lUsed.update(c);if(d&&c!="0"){d=(c*100/d).toFixed();this.items[b].lUsed.update(c+" ("+d+"%)");this.items[b].pUsed.updateProgress(d/100)}}}},onQuotaChange:function(a){if(this.itemsToCommit.indexOf(a.item)==-1){this.itemsToCommit.push(a.item);this.fireEvent("usersschanged",this)}},applyUsersSettings:function(a){var b,c,d,e;for(b=0;b<this.itemsToCommit.length;++b){c=this.itemsToCommit[b];d=c.secUser;_.each(a,function(f){if(f.getId()==
d.getId())d=f},this);e=d.getHomeFolder();if(!e||e==_4)e=c.secUser.createHomeFolder();e.putSizeLimit((c.tfQuota.getValue()||0)*1024*1024*1024);a.indexOf(d)==-1&&a.push(c.secUser)}this.itemsToCommit=[];return a},checkMigration:function(){},loadAdsQueryResults:function(a){this.users=a;this.loadData();this.appendRules()},onRefreshClick:function(){this.refresh()},refresh:function(){this.clear()},clear:function(){for(var a=0;a<this.items.length;++a){this.items[a].pUsed.destroy();this.items[a].tfQuota.destroy()}this.items=
[];this.itemsToCommit=[];this.dataNode.update("")},_i2y:{_o2:function(a,b){_s2.HFUsersQuotasBlock.superclass._i2y._o2.apply(this,arguments);if(b=="shares-propwnd-update-adsmode"||b=="sync-update-security"){var c=this.spSecurityManager.getADSMode();if(c!="user"){c=new String(c);c.notSync=this.spSecurityManager.getNotSyncAdsAccounts();this.load(null,null,[],[],c)}}if(b=="shares-propwnd-update-rcusers"||b=="sync-update-users"){c=this.spSecurityManager.getADSMode();
c=new String(c);c.notSync=this.spSecurityManager.getNotSyncAdsAccounts();this.load(null,null,this.spSecurityManager.getUsers(),[],c,this.spSecurityManager.getRCUsers(),this.spSystemManager.getCloudOwner())}if(b=="shares-propwnd-commit-users"){c=this.spSecurityManager.getADSMode();c!="user"&&this.lastFilter&&this.tryToSearch(this.lastFilter)}return _5}}});Ext.namespace("_s2");
_s2.HFUsersProtectionBlock=_._1(_s2.UsersBlock,{cls:"",constructor:function(){_s2.HFUsersProtectionBlock.superclass.constructor.apply(this,arguments)},afterRender:function(){_s2.HFUsersProtectionBlock.superclass.afterRender.apply(this,arguments);this.anonymousCheck.hide();this.filterCombo.setValue("user");Ext.get(this.filterNodeId).setDisplayed(false);this.dataNode.setStyle({maxHeight:"300px"});this.search.setWidth(295);this.search.emptyText=
_TR("ENTER_NAME_TO_SEARCH_USERS");this.initializeDefaultState()},initializeDefaultState:function(){this.spSecurityManager.getADSMode()=="ads"?Ext.get(this.emptyNodeTextId).update(_TR("EMPTY_HF")):Ext.get(this.emptyNodeTextId).update(_TR("EMPTY"))},getTableHeader:function(a){return'<table class="'+a+' ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sh-inspector-grid-hcell" style="width:35px;"></td><td class="x-sh-inspector-grid-hcell x-sh-inspector-grid-cell-name" style="width: auto;"><div class="x-ellipsis">'+
_TR("NAME")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width: 110px;"><div class="x-ellipsis" style="text-align: center;">'+_TR("PROTECTION")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width: 160px;"><div class="x-ellipsis" style="text-align: center;">'+_TR("SNAPSHOT_ALLOW_ACCESS")+'</div></td><td class="x-sh-inspector-grid-hcell" style="width: 200px;"><div class="x-ellipsis">'+_TR("FOLDER")+"</div></td></tr></table>"},loadHFOptions:function(){this.onRefreshClick()},load:function(){this.initializeDefaultState();
_s2.HFUsersProtectionBlock.superclass.load.apply(this,arguments);this.filterCombo.setValue("user")},loadData:function(){this.clear();var a;this.items=[];for(var b=0;b<this.users.length;++b){a=_a(this.users[b],"_i2z");this.items.push({type:"user",name:a.getName(),id:a.getId(),secUser:a})}if(this.rcowner&&this.rcowner!=_4&&this.rcusers)if((b=this.rcowner.getName())&&b!=_4){this.items.push({type:"user",name:b,id:this.rcowner.getId(),secUser:this.rcowner,rcuser:this.rcowner});
for(b=0;b<this.rcusers.length;++b){a=_a(this.rcusers[b],"_i2z");this.items.push({type:"user",name:a.getName(),id:a.getId(),secUser:a,rcuser:a})}}a="";var c;for(b=0;b<this.items.length;++b){c=this.items[b].rcuser?this.items[b].secUser==this.rcowner?"rcadminuser":"rcuser":this.items[b].secUser.isAdmin()?"adminuser":this.items[b].type;a+='<table id="'+(this.items[b].itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+(b%2==1?"alt":"")+'" cellpadding="0" cellspacing="0" style="table-layout: fixed;"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+
c+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" style="width: auto;" title="'+this.items[b].name+'">'+this.items[b].name+'</div></td><td id="'+(this.items[b].chbProtectId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width: 110px;"></td><td id="'+(this.items[b].chbFolderId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width: 160px;"></td><td class="x-sh-inspector-grid-cell" style="width: 200px;"><div class="x-ellipsis" id="'+
(this.items[b].lFolderId=Ext.id())+'"></div></td></tr></table>'}this.dataNode.update(a);this.dataNode.setDisplayed(!!a);this.emptyNode.setDisplayed(!a);for(b=0;b<this.items.length;++b){this.items[b].chbProtect=new Ext.UI.Checkbox({cls:"x-sh-inspector-checkbox-center",item:this.items[b],renderTo:this.items[b].chbProtectId,listeners:{check:this.onCheck,scope:this}});this.items[b].chbFolder=new Ext.UI.Checkbox({cls:"x-sh-inspector-checkbox-center",item:this.items[b],renderTo:this.items[b].chbFolderId,
listeners:{check:this.onCheck,scope:this}});this.items[b].lFolder=Ext.get(this.items[b].lFolderId);this.items[b].row=Ext.get(this.items[b].itemNodeId)}},appendRules:function(){for(var a,b,c=this.items.length,d=0;d<c;d+=1){a=this.items[d];if((b=a.secUser.getHomeFolder())&&b!=_4){a.chbProtect.setValue(b.getSnapProtectionEnabled()=="1",true);a.chbFolder.setValue(b.getVisibleSnapshot()=="1",true);a.lFolder.update(b.getVisibleSnapFolder());a.lFolder.set({title:b.getVisibleSnapFolder()})}}},onCheck:function(a){if(this.itemsToCommit.indexOf(a.item)==
-1){this.itemsToCommit.push(a.item);this.fireEvent("userschanged",this)}},applyUsersSettings:function(){var a,b,c,d=[];for(a=0;a<this.itemsToCommit.length;++a){b=this.itemsToCommit[a];c=b.secUser.getHomeFolder();if(!c||c==_4)c=b.secUser.createHomeFolder();c.putSnapProtectionEnabled(b.chbProtect.getValue()?"1":"0");c.putVisibleSnapshot(b.chbFolder.getValue()?"1":"0");d.push(b.secUser)}this.itemsToCommit=[];return d},checkMigration:function(){},onAddClick:function(){var a=this.wndAddAdsUser;_s2.HFUsersProtectionBlock.superclass.onAddClick.apply(this,
arguments);a||this.wndAddAdsUser.on("useradded",function(b,c){this.items.push({type:"user",name:c.getName(),id:c.getId(),secUser:c});b=this.items[this.items.length-1];c='<table id="'+(b.itemNodeId=Ext.id())+'" class="x-sh-inspector-table ui-fwgrid-row'+((this.items.length-1)%2==1?"alt":"")+'" cellpadding="0" cellspacing="0" style="table-layout: fixed;"><tr><td class="x-sh-inspector-grid-cell" style="width:35px;"><div class="x-sh-inspector-grid-'+b.type+'"></div></td><td class="x-sh-inspector-grid-cell"><div class="x-sh-inspector-grid-cell-name x-ellipsis" title="'+
b.name+'">'+b.name+'</div></td><td id="'+(b.chbProtectId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width: 110px;"></td><td id="'+(b.chbFolderId=Ext.id())+'" class="x-sh-inspector-grid-cell" style="width: 160px;"></td><td class="x-sh-inspector-grid-cell" style="width: 200px;"><div class="x-ellipsis" id="'+(b.lFolderId=Ext.id())+'"></div></td></tr></table>';this.dataNode.insertHtml("beforeEnd",c);this.dataNode.setDisplayed(!!c);this.emptyNode.setDisplayed(!c);b.chbProtect=new Ext.UI.Checkbox({item:b,
renderTo:b.chbProtectId,listeners:{check:this.onCheck,scope:this}});b.chbFolder=new Ext.UI.Checkbox({item:b,renderTo:b.chbFolderId,listeners:{check:this.onCheck,scope:this}});b.lFolder=Ext.get(b.lFolderId);b.row=Ext.get(b.itemNodeId)},this)},onSearchChanged:function(){_s2.HFUsersProtectionBlock.superclass.onSearchChanged.apply(this,arguments);if(this.adsMode=="ads"&&this.adsMode.notSync=="0")this.search.getValue()||this.spSecurityManager.queryUsersWithHFProtectOrAccess("shares-propwnd-query-users-protected")},
loadAdsQueryResults:function(a){this.users=a;this.loadData();this.appendRules()},onRefreshClick:function(){this.refresh();_s2.HFUsersProtectionBlock.superclass.onRefreshClick.apply(this,arguments)},refresh:function(){this.clear()},clear:function(){for(var a=0;a<this.items.length;++a){this.items[a].chbProtect.destroy();this.items[a].chbFolder.destroy()}this.items=[];this.itemsToCommit=[];this.dataNode.update("")},_i2y:{_o3:function(a,b,c){_s2.HFUsersProtectionBlock.superclass._i2y._o2.apply(this,
arguments);if(c=="shares-propwnd-update-adsmode"||c=="sync-update-security"){var d=this.spSecurityManager.getADSMode();if(d!="user"){d=new String(d);d.notSync=this.spSecurityManager.getNotSyncAdsAccounts();this.load(null,"hf-snaps-protection",[],[],d);this.spSecurityManager.queryUsersWithHFProtectOrAccess("shares-propwnd-query-users-protected")}}else if(c=="shares-propwnd-update-rcusers"||c=="sync-update-users"){d=this.spSecurityManager.getADSMode();d=new String(d);d.notSync=this.spSecurityManager.getNotSyncAdsAccounts();
this.load(null,"hf-snaps-protection",this.spSecurityManager.getUsers(),[],d,this.spSecurityManager.getRCUsers(),this.spSystemManager.getCloudOwner())}else if(c=="shares-propwnd-commit-users"){d=this.spSecurityManager.getADSMode();if(d!="user")this.lastFilter?this.tryToSearch(this.lastFilter):this.spSecurityManager.queryUsersWithHFProtectOrAccess("shares-propwnd-query-users-protected")}else if(c=="shares-propwnd-query-users-protected"){d=this.spSecurityManager.getADSMode();if(d!="user"){d=new String(d);
d.notSync=this.spSecurityManager.getNotSyncAdsAccounts();this.load(null,"hf-snaps-protection",this.spSecurityManager.getQueryUsers(),[],d)}}}}});Ext.namespace("_s2.Settings");
_s2.Settings.Snapshots=_._1(Ext.Container,{constructor:function(){this.html=this.getHtml();_s2.Settings.Snapshots.superclass.constructor.apply(this,arguments);this.zfsVolumesManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getZFSVolumesManager()},getHtml:function(){return'<div class="x-sh-wnd-dataset" style="width: 600px; margin: 0 auto;"><div class="x-sh-inspector-permission-block x-sh-wnd-dataset-row-only-ejectable"><div class="x-sh-inspector-permission-text">'+_TR("NOT_SUPPORTED_FEATURE")+
'</div></div><table cellpadding="0" cellspacing="0" class="x-sh-wnd-dataset-row-only-notejectable" style="margin: 0 auto;"><tr><td id="'+(this.lSmartId=Ext.id())+'" class="x-sh-text">'+_TR("SNAPSHOT_MANAGEMENT")+':</td><td id="'+(this.booSmartId=Ext.id())+'" class="x-sh-value"></td></tr><tr id="'+(this.boxSmartSchedId=Ext.id())+'"><td class="x-sh-text">'+_TR("SNAPSHOT_SCHEDULE")+':</td><td id="'+(this.cbIntervalId=Ext.id())+'"></td></tr><tr id="'+(this.boxCustomSchedId=Ext.id())+'" ><td colspan="2"><div style="width: 470px; margin: 0 auto;"><div id="'+
(this.cmpScheduleId=Ext.id())+'" style="margin-bottom: 8px;"><div style="padding: 8px 0;">'+_TR("SNAPSHOT_SCHEDULE")+':</div></div><div id="'+(this.chbNotEmptyId=Ext.id())+'" style="padding: 8px 0; margin-bottom: 8px"></div><div id="'+(this.cmpRetentionId=Ext.id())+'"></div></div></td></tr><tr class="x-sh-wnd-dataset-row-only-nas"><td style="height: 8px" colspan="2"></td></tr><tr class="x-sh-wnd-dataset-row-only-nas x-sh-wnd-dataset-row-only-notejectable"><td class="x-sh-text"></td><td id="'+(this.chbSnapAccessId=
Ext.id())+'"></td></tr><tr class="x-sh-wnd-dataset-row-only-nas"><td class="x-sh-text">'+_TR("FOLDER")+':</td><td id="'+(this.tfSnapFolderId=Ext.id())+'"></td></tr><tr class="x-sh-wnd-dataset-row-only-nas x-sh-wnd-dataset-row-only-notejectable" id="'+(this.boxPrevVersionsId=Ext.id())+'"><td class="x-sh-text"></td><td id="'+(this.chbPrevVersionsId=Ext.id())+'"></td></tr><tr id="'+(this.boxSmartSchedDescId=Ext.id())+'" ><td colspan="2"><div class="x-sh-dataset-settings-snaps-snaps-desc"><div>'+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_SCHEDULE")+
"</div><ul><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_SCHEDULE_HOURLY")+"</li><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_SCHEDULE_DAILY")+"</li><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_SCHEDULE_WEEKLY")+"</li></ul><div>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_RETENTION")+"</div><ul><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_RETENTION_HOURLY")+"</li><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_RETENTION_DAILY")+"</li><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_RETENTION_WEEKLY")+"</li><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_RETENTION_MONTHLY")+
"</li></ul><ul><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_PROMOTION_DAILY")+"</li><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_PROMOTION_WEEKLY")+"</li><li>"+_TR("SNAPSHOT_SMART_MANAGEMENT_DESC_PROMOTION_MONTHLY")+"</li></ul></div></td></tr></table></div>"},afterRender:function(){_s2.Settings.Snapshots.superclass.afterRender.apply(this,arguments);this.boxSmartSched=Ext.get(this.boxSmartSchedId);this.boxSmartSchedDesc=Ext.get(this.boxSmartSchedDescId);this.boxCustomSched=Ext.get(this.boxCustomSchedId);
this.boxPrevVersions=Ext.get(this.boxPrevVersionsId);this.lSmart=Ext.get(this.lSmartId);this.booSmart=new Ext.UI.ButtonOnOff({textOn:_TR("SNAPSHOT_MANAGEMENT_SMART"),textOff:_TR("SNAPSHOT_MANAGEMENT_CUSTOM"),labelwidth:40,renderTo:this.booSmartId,listeners:{valuechanged:this.onSmartChange,scope:this}});this.cbInterval=new Ext.UI.ComboBox({width:310,typeAhead:true,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["never",_TR("NEVER")],["hourly",_TR("HOURLY")],
["daily",_TR("DAILY")],["weekly",_TR("WEEKLY")]]}),valueField:"id",displayField:"text",renderTo:this.cbIntervalId,listeners:{select:this.onPropertyChange,scope:this}});this.chbNotEmpty=new Ext.UI.Checkbox({boxLabel:_TR("SNAPSHOT_DO_NOT_CREATE_WITHOUT_CHANGES"),renderTo:this.chbNotEmptyId,listeners:{check:this.onPropertyChange,scope:this}});this.chbSnapAccess=new Ext.UI.Checkbox({boxLabel:_TR("SNAPSHOT_ALLOW_ACCESS"),renderTo:this.chbSnapAccessId,listeners:{check:this.onPropertyChange,scope:this}});
this.tfSnapFolder=new Ext.UI.TextField({width:310,readOnly:true,disabled:true,renderTo:this.tfSnapFolderId});this.chbPrevVersions=new Ext.UI.Checkbox({boxLabel:_TR("SNAPSHOT_ALLOW_ACCESS_WINDOWS_PREV_VERSIONS"),renderTo:this.chbPrevVersionsId,listeners:{check:this.onPropertyChange,scope:this}});this.elSchedule=Ext.get(this.cmpScheduleId);this.cmpSchedule=new _s2.Settings.Snapshots.Schedule({renderTo:this.elSchedule,listeners:{change:this.onPropertyChange,scope:this}});this.cmpRetention=
new _s2.Settings.Snapshots.Retention({renderTo:this.cmpRetentionId,listeners:{change:this.onPropertyChange,scope:this}})},clear:function(){this.hfoptions=this.lun=this.share=undefined;this.removeClass("x-sh-wnd-dataset-ejectable");this.removeClass("x-sh-wnd-dataset-nas");this.removeClass("x-sh-wnd-dataset-san");this.removeClass("x-sh-wnd-dataset-home");this.lSmart.update(_TR("SNAPSHOT_MANAGEMENT")+":");this.boxSmartSched.setDisplayed(false);this.boxSmartSchedDesc.setDisplayed(false);this.boxCustomSched.setDisplayed(false);
this.boxPrevVersions.setDisplayed(false)},loadShare:function(a){this.clear();this.addClass("x-sh-wnd-dataset-nas");this.zfsVolumesManager.getVolumeById(a.getVolumeId()).getEjectable()&&this.addClass("x-sh-wnd-dataset-ejectable");var b=!a.getCustomSnapshotManagement(),c=a.isReadyDRShare();this.booSmart.changeUI(!b);this.boxSmartSched.setDisplayed(b&&!c);this.boxSmartSchedDesc.setDisplayed(b&&!c);this.boxCustomSched.setDisplayed(!b);this.boxPrevVersions.setDisplayed(!b);this.chbSnapAccess.setValue(a.getVisibleSnapshot(),
true);this.tfSnapFolder.setValue(a.getVisibleSnapFolder());this.chbPrevVersions.setValue(a.getPrevVersionsAccessible(),true);b=a.getSnapshotScheduleInterval();b=a.getEnableProtection()?b:"never";this.cbInterval.setValue(b);this.chbNotEmpty.setValue(a.getNonEmptySnapshots(),true);if(a.isReadyDRShare()){this.lSmart.update(_TR("RETENTION_MANAGEMENT")+":");this.elSchedule.setDisplayed(false);this.chbNotEmpty.hide()}else{this.elSchedule.setDisplayed(true);this.cmpSchedule.loadSchedule(a.getCustomSnapshotSchedule());
this.chbNotEmpty.show()}this.cmpRetention.loadDataset(a);this.share=a},loadLun:function(a){this.clear();this.addClass("x-sh-wnd-dataset-san");var b=!a.getCustomSnapshotManagement();this.booSmart.changeUI(!b);this.boxSmartSched.setDisplayed(b);this.boxSmartSchedDesc.setDisplayed(b);this.boxCustomSched.setDisplayed(!b);b=a.getSnapshotScheduleInterval();b=a.getEnableProtection()?b:"never";this.cbInterval.setValue(b);this.chbNotEmpty.setValue(a.getNonEmptySnapshots(),true);this.elSchedule.setDisplayed(true);
this.cmpSchedule.loadSchedule(a.getCustomSnapshotSchedule());this.cmpRetention.loadDataset(a);this.lun=a},loadHFOptions:function(a){this.clear();this.addClass("x-sh-wnd-dataset-home");var b=_a(a,"_i38"),c=!b.getCustomSnapshotManagement();this.booSmart.changeUI(!c);this.boxSmartSched.setDisplayed(c);this.boxSmartSchedDesc.setDisplayed(c);this.boxCustomSched.setDisplayed(!c);c=b.getSnapshotScheduleInterval();c=b.getEnableProtection()?c:"never";this.cbInterval.setValue(c);this.chbNotEmpty.setValue(b.getNonEmptySnapshots(),
true);this.elSchedule.setDisplayed(true);this.cmpSchedule.loadSchedule(b.getCustomSnapshotSchedule());this.cmpRetention.loadDataset(b);this.hfoptions=a},onSmartChange:function(a){var b=!this.booSmart.isOff(),c=this.share&&this.share.isReadyDRShare();this.boxSmartSched.setDisplayed(b&&!c);this.boxSmartSchedDesc.setDisplayed(b&&!c);this.boxCustomSched.setDisplayed(!b);this.boxPrevVersions.setDisplayed(!b);this.chbPrevVersions.setVisible(!b);this.onPropertyChange(a)},onPropertyChange:function(){if(this.share||
this.lun||this.hfoptions)this.fireEvent("sharechanged",this)},onApplyClick:function(){var a=this.cbInterval.getValue(),b=a!="never",c=this.chbSnapAccess.getValue(),d=!this.booSmart.isOff(),e=this.chbNotEmpty.getValue();if(this.share){var f=this.share;f.putCustomSnapshotManagement(!d);f.putVisibleSnapshot(c);f.putPrevVersionsAccessible(this.chbPrevVersions.getValue());f.putEnableProtection(b);b&&f.putSnapshotScheduleInterval(a);if(!f.isReadyDRShare()){f.putCustomSnapshotSchedule(this.cmpSchedule.getSchedule());
f.putNonEmptySnapshots(e)}this.cmpRetention.onApplyClick(f)}else if(this.lun){c=this.lun;c.putCustomSnapshotManagement(!d);c.putEnableProtection(b);b&&c.putSnapshotScheduleInterval(a);c.putNonEmptySnapshots(e);c.putCustomSnapshotSchedule(this.cmpSchedule.getSchedule());this.cmpRetention.onApplyClick(c)}else if(this.hfoptions){c=_a(this.hfoptions,"_i38");c.putCustomSnapshotManagement(!d);c.putEnableProtection(b);b&&c.putSnapshotScheduleInterval(a);c.putNonEmptySnapshots(e);c.putCustomSnapshotSchedule(this.cmpSchedule.getSchedule());
this.cmpRetention.onApplyClick(c)}}});Ext.namespace("_s2.Settings.Snapshots");
_s2.Settings.Snapshots.Retention=_._1(Ext.Container,{cls:"x-sh-dataset-settings-snaps-retention",constructor:function(){this.html=this.getHtml();_s2.Settings.Snapshots.Retention.superclass.constructor.apply(this,arguments)},getHtml:function(){return'<div><h4 id="'+(this.elTitleId=Ext.id())+'">'+_TR("SNAPSHOT_RETENTION")+'</h4><div class="radio-row"><div id="'+(this.rTimeId=Ext.id())+'"></div><div id="'+(this.sfTimeId=Ext.id())+'"></div><div id="'+(this.cbTimeId=Ext.id())+
'"></div><div class="x-clear"></div></div><div class="radio-row"><div id="'+(this.rNumberId=Ext.id())+'"></div><div id="'+(this.sfNumberId=Ext.id())+'"></div><div class="txt">'+_TR("SNAPSHOT_RETENTION_NUMBER_2")+'</div><div class="x-clear"></div></div></div>'},afterRender:function(){_s2.Settings.Snapshots.Retention.superclass.afterRender.apply(this,arguments);this.elTitle=Ext.get(this.elTitleId);this.rTime=new Ext.UI.Radio({name:"fw-shares-settings-snaps-retention-type",boxLabel:_TR("SNAPSHOT_RETENTION_LIFETIME"),
renderTo:this.rTimeId,listeners:{check:this.onChange,scope:this}});this.rNumber=new Ext.UI.Radio({name:"fw-shares-settings-snaps-retention-type",boxLabel:_TR("SNAPSHOT_RETENTION_NUMBER_1"),renderTo:this.rNumberId,listeners:{check:this.onChange,scope:this}});this.sfTime=new Ext.UI.SpinnerField({width:75,minValue:1,incrementValue:1,alternateIncrementValue:10,renderTo:this.sfTimeId,listeners:{spin:this.onChange,focus:this.onChange,scope:this}});this.cbTime=new Ext.UI.ComboBox({width:100,typeAhead:true,
mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["days",_TR("DAYS")],["weeks",_TR("WEEKS")],["months",_TR("MOUNTH")]]}),valueField:"id",displayField:"text",renderTo:this.cbTimeId,value:"days",listeners:{select:this.onChange,scope:this}});this.sfNumber=new Ext.UI.SpinnerField({width:75,minValue:1,maxValue:999,incrementValue:1,alternateIncrementValue:10,renderTo:this.sfNumberId,listeners:{spin:this.onChange,focus:this.onChange,scope:this}})},onChange:function(a){if(a==
this.rTime||a==this.rNumber)this.setFieldsEnabled(this.rNumber.getValue()?"number":"lifetime");this.fireEvent("change",this)},loadDataset:function(a){this.elTitle.setDisplayed(!a.isReadyDRShare||!a.isReadyDRShare());var b=a.getSnapshotRetentionType();this.setFieldsEnabled(b);b=="number"?this.rNumber.setValue(true):this.rTime.setValue(true);(b=a.getSnapshotRetentionNumber())&&b!=_4&&!isNaN(+b)?this.sfNumber.setValue(b):this.sfNumber.setRawValue("");if((a=a.getSnapshotRetentionLifeTime())&&a!=_4&&
!isNaN(+a)){a=Math.round(a/60/60/24);if(a%30==0){a/=30;this.cbTime.setValue("months")}else if(a%7==0){a/=7;this.cbTime.setValue("weeks")}else this.cbTime.setValue("days");this.sfTime.setValue(a)}else{this.sfTime.setRawValue("");this.cbTime.setValue("days")}},setFieldsEnabled:function(a){a=a=="number";this.sfTime.setDisabled(a);this.cbTime.setDisabled(a);this.sfNumber.setDisabled(!a)},onApplyClick:function(a){var b=+this.sfNumber.getValue()>99999?99999:this.sfNumber.getValue();a.putSnapshotRetentionType(this.rNumber.getValue()?
"number":"lifetime");a.putSnapshotRetentionNumber(b);b=this.sfTime.getValue();switch(this.cbTime.getValue()){case "days":break;case "weeks":b*=7;break;case "months":b*=30;break}b=b>4161?4161:b;a.putSnapshotRetentionLifeTime(b*24*60*60)}});Ext.namespace("_s2.Settings.Snapshots");
_s2.Settings.Snapshots.Schedule=_._1(Ext.Container,{constructor:function(){this.html=this.getHtml();_s2.Settings.Snapshots.Schedule.superclass.constructor.apply(this,arguments)},getHtml:function(){return'<div class="x-system-panel-power-temp-timer" style="display: inline-block;"><div class="x-system-panel-power-dw1">'+_TR("SUN")+'</div><div class="x-system-panel-power-dw2">'+_TR("MON")+'</div><div class="x-system-panel-power-dw2">'+_TR("TUE")+'</div><div class="x-system-panel-power-dw2">'+
_TR("WED")+'</div><div class="x-system-panel-power-dw2">'+_TR("THU")+'</div><div class="x-system-panel-power-dw2">'+_TR("FRI")+'</div><div class="x-system-panel-power-dw1">'+_TR("SAT")+'</div><div id="'+(this.elDataId=Ext.id())+'"></div></div><div class="x-system-panel-power-props" id="'+(this.bPropsId=Ext.id())+'" style="display: inline-block;"></div>'},afterRender:function(){_s2.Settings.Snapshots.Schedule.superclass.afterRender.apply(this,arguments);this.elData=Ext.get(this.elDataId);
this.bProps=new Ext.UI.RoundButton({cls:"x-frontview-btn-settings",renderTo:this.bPropsId,listeners:{click:this.onPropsClick,scope:this}})},onPropsClick:function(){this.wndSchedule||(this.wndSchedule=new _s2.Settings.Snapshots.Schedule.Wnd({listeners:{apply:function(a,b){this.loadSchedule(b);this.fireEvent("change",this)},scope:this}}));this.wndSchedule.show();this.wndSchedule.loadSchedule(this.loadedSchedule)},loadSchedule:function(a){var b="",c,d;if(a&&a!=_4){this.loadedSchedule=
a;for(c=0;c<a.length;++c)for(d=0;d<a[c].length;++d)if(a[c][d])b+='<div class="x-system-panel-power-timer-pr" style="left: '+(63*c+d*2.625)+'px; width: 2.625px"></div>'}else this.loadedSchedule=null;this.elData.update(b)},getSchedule:function(){return this.loadedSchedule}});Ext.namespace("_s2.Settings.Snapshots.Schedule");
_s2.Settings.Snapshots.Schedule.Wnd=_._1(Ext.UI.Window,{modal:true,width:560,resizable:false,minimizable:false,maximizable:false,bodyCssClass:"x-powerpanel-timer",basePowerCls:"x-system-panel-power",constructor:function(){this.title=_TR("SNAPSHOT_SCHEDULE");this.html=this.getHtml();this.fbar=[{xtype:"uibutton",text:_TR("APPLY"),handler:this.onApplyClick,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}];_s2.Settings.Snapshots.Schedule.Wnd.superclass.constructor.apply(this,
arguments)},getHtml:function(){var a=[_TR("SU"),_TR("MO"),_TR("TU"),_TR("WE"),_TR("TH"),_TR("FR"),_TR("SA")],b=["SU","MO","TU","WE","TH","FR","SA"],c,d,e;this.sddays=[_TR("SUNDAY"),_TR("MONDAY"),_TR("TUESDAY"),_TR("WEDNESDAY"),_TR("THURSDAY"),_TR("FRIDAY"),_TR("SATURDAY")];e=String.format('<tr><td id="{2}" class="{5}-{0}"  title="'+_TR("POWERTIMER_TIP_NIGHT1")+'" colspan="3"></td><td colspan=5></td><td id="{3}" class="{5}-{1}"   title="'+_TR("POWERTIMER_TIP_DAY")+'" colspan="3"></td><td colspan=10></td><td id="{4}" class="{5}-{0}"  title="'+
_TR("POWERTIMER_TIP_NIGHT2")+'" colspan=3></td><td></td><td/></tr>',"night","day",this.elNight1Id=Ext.id(),this.elDayId=Ext.id(),this.elNight2Id=Ext.id(),this.basePowerCls);for(c=0;c<7;c++){d=_TR("POWERTIMER_TIP_"+b[c]);e+=String.format('<tr><td class="{2}-timeday" title="{1}">{0}</td>',a[c],d,this.basePowerCls);for(d=0;d<8;d++)e+='<td class="'+this.basePowerCls+'-hour-off" ></td>';for(;d<21;d++)e+='<td class="'+this.basePowerCls+"-hour-off "+this.basePowerCls+'-hour-day" ></td>';for(;d<24;d++)e+=
'<td class="'+this.basePowerCls+'-hour-off" ></td>';e+="</tr>"}e+='<tr class="schedule-24hours-tr"><td class="'+this.basePowerCls+'-timeday"></td>';for(d=0;d<24;d++)e+=String.format('<td class="{1}-hours" title="{0}:00 - {0}:59">{0}</td>',d,this.basePowerCls);e+="</tr>";e+='<tr><td colspan="25"><div style="height: 10px;">&nbsp;</div><td></tr>';e+="<tr><td></td>";e+=String.format('<td id="{0}"  class="{1}rinfo" colspan=14 ></td>',this.sdpowerinfoid=Ext.id(),this.basePowerCls);e+=String.format('<td colspan="12"><div style="display: inline-block;" ><div class="{3}-houron"></div><div class="{3}-status">{0}</div></div><div style="display: inline-block;" ><div class="{3}-houroffday"></div><div class="{3}-status">{1}</div></div><div style="display: inline-block;" ><div class="{3}-houroffnight"></div><div class="{3}-status">{2}</div></div></td>',
_TR("ON_LC"),_TR("DAY_OFF"),_TR("NIGHT_OFF"),this.basePowerCls);e+="</tr>";return e='<div class="'+this.basePowerCls+'-body"><table id="'+(this.elTableDaysId=Ext.id())+'" cellpadding="0" cellspacing="1">'+e+"</table></div>"},initLable:function(){Ext.select(".schedule-24hours-tr").elements.length!=0&&$_(Ext.select(".schedule-24hours-tr").elements).forEach(function(a){a=a.children;for(var b=1,c=a.length;b<c;b++){var d=b-1,e=localStorage.getItem("enable24Hour")=="true",f="";e||(f=d>=12?" "+_TR("PM"):
" "+_TR("AM"));if(!e&&d>12)d-=12;if(f==" "+_TR("AM")&&d==0)d=12;a[b].title=String.format("{0}:00{1} - {0}:59{1}",d,f);Ext.get(a[b]).update(d+"")}})},afterRender:function(){_s2.Settings.Snapshots.Schedule.Wnd.superclass.afterRender.apply(this,arguments);this.elTableDays=Ext.get(this.elTableDaysId);this.bProps=new Ext.UI.RoundButton({cls:"x-frontview-btn-settings",renderTo:this.bPropsId});this.elTableDays.on("mouseover",function(a,b){if(this.sddrag)this.sddrag=="add"?Ext.get(b).addClass(this.basePowerCls+
"-hour-on"):Ext.get(b).removeClass(this.basePowerCls+"-hour-on");a=b.cellIndex-1;var c=localStorage.getItem("enable24Hour")=="true",d="";c||(d=a>=12?" "+_TR("PM"):" "+_TR("AM"));if(!c&&a>12)a-=12;if(d==" "+_TR("AM")&&a==0)a=12;Ext.get(this.sdpowerinfoid).update(String.format("{0}, {1}:00{2} - {1}:59{2}",this.sddays[b.parentNode.rowIndex-1],a,d))},this,{delegate:"."+this.basePowerCls+"-hour-off"});this.elTableDays.on("mousedown",function(a,b){this.sddrag=Ext.get(b).is("."+this.basePowerCls+"-hour-on")?
"remove":"add";Ext.get(b).toggleClass(this.basePowerCls+"-hour-on")},this,{delegate:"."+this.basePowerCls+"-hour-off"});this.elTableDays.on("mouseup",function(){this.sddrag=null},this);this.elTableDays.on("mouseleave",function(){this.sddrag=null;Ext.get(this.sdpowerinfoid).update("")},this);this.elTableDays.on("click",function(a,b){a=false;b=Ext.get(b).next("."+this.basePowerCls+"-hour-off");if(b.is("."+this.basePowerCls+"-hour-on"))a=true;for(;b!=null;){a?b.removeClass(""+this.basePowerCls+"-hour-on"):
b.addClass(""+this.basePowerCls+"-hour-on");b=b.next("."+this.basePowerCls+"-hour-off")}},this,{delegate:"."+this.basePowerCls+"-timeday"});this.elTableDays.on("click",function(a,b){a=false;var c=this.elTableDays.dom;b=b.cellIndex;if(Ext.get(c.rows[1].cells[b]).is("."+this.basePowerCls+"-hour-on"))a=true;for(var d=1;d<8;d++)a?Ext.get(c.rows[d].cells[b]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(c.rows[d].cells[b]).addClass(this.basePowerCls+"-hour-on")},this,{delegate:"."+this.basePowerCls+
"-hours"});Ext.get(this.elDayId).on("click",function(){var a=false,b=this.elTableDays.dom;if(Ext.get(b.rows[1].cells[9]).is("."+this.basePowerCls+"-hour-on"))a=true;for(var c=1;c<8;c++)for(var d=9;d<22;d++)a?Ext.get(b.rows[c].cells[d]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(b.rows[c].cells[d]).addClass(this.basePowerCls+"-hour-on")},this);Ext.get(this.elNight1Id).on("click",function(){var a=false,b=this.elTableDays.dom;if(Ext.get(b.rows[1].cells[1]).is("."+this.basePowerCls+"-hour-on"))a=
true;for(var c=1;c<8;c++)for(var d=1;d<9;d++)a?Ext.get(b.rows[c].cells[d]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(b.rows[c].cells[d]).addClass(this.basePowerCls+"-hour-on")},this);Ext.get(this.elNight2Id).on("click",function(){var a=false,b=this.elTableDays.dom;if(Ext.get(b.rows[1].cells[22]).is("."+this.basePowerCls+"-hour-on"))a=true;for(var c=1;c<8;c++)for(var d=22;d<25;d++)a?Ext.get(b.rows[c].cells[d]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(b.rows[c].cells[d]).addClass(this.basePowerCls+
"-hour-on")},this)},loadSchedule:function(a){for(var b=this.elTableDays.dom,c=0;c<7;c++)for(var d=0;d<24;d++){Ext.get(b.rows[c+1].cells[d+1]).removeClass(this.basePowerCls+"-hour-on");a&&a[c]&&a[c][d]&&Ext.get(b.rows[c+1].cells[d+1]).addClass(this.basePowerCls+"-hour-on")}this.initLable()},onApplyClick:function(){for(var a=this.elTableDays.dom,b=[],c=0;c<7;c++){b[c]=[];for(var d=0;d<24;d++)b[c].push(Ext.get(a.rows[c+1].cells[d+1]).hasClass(this.basePowerCls+"-hour-on")?1:0)}this.fireEvent("apply",
this,b);this.hide()}});
_._2("_s3");
_s3.SanTab=_._1(_._3.System.SanTab,_s0.TabItem,ISystemFrameTab,_i4,_i3b,_i3v,{help:"iscsi_tab",updatesCount:0,constructor:function(){_s3.SanTab.superclass.constructor.call(this,arguments);this.tabView=_a(_7(_._3.System.Frame),"IExtNative");_a(this.tabView,"_i1").Advise(this);this.on("tabinitialize",this.TabInitialize,this);this.on("tabactivate",this.TabActivate,this);this.propertiesGroupWindow=
new _s3.PropertiesGroupWindow},initComponent:function(){this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td  id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.spISCSIManager=a.getISCSIManager();_a(this.spISCSIManager,
"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this)}_s3.SanTab.superclass.initComponent.call(this);this.createMenus()},createMenus:function(){this.itemAssign=new Ext.menu.Item({text:_TR("ASSIGN"),ctCls:"x-frontview-icon-assign",commandName:"assign"});var a=new Ext.menu.Item({text:_TR("DELETE"),ctCls:"x-frontview-icon-delete",commandName:"delete"}),b=new Ext.menu.Item({text:_TR("SETTINGS"),ctCls:"x-frontview-icon-settings",
commandName:"settings"});this.assignMenu=new Ext.UI.Menu({cls:"x-san-menu",items:[this.itemAssign,a,b],listeners:{itemclick:function(c){var d=this.assignMenu.item;if(d)switch(c.commandName){case "assign":this.selectGroupWnd||(this.selectGroupWnd=new _s3.SelectGroupWindow);this.selectGroupWnd.setLUN(d);this.selectGroupWnd.show();break;case "delete":(c=_a(_7(_._3.ShareSubSys.VolumesView),"IExtNative"))&&c.getNative().onRemoveShare(d);break;case "settings":(c=_a(_7(_._3.ShareSubSys.VolumesView),
"IExtNative"))&&c.getNative().showProperties.defer(100,c.getNative(),[d]);break}},scope:this}});a=new Ext.menu.Item({text:_TR("UNASSIGN"),ctCls:"x-frontview-icon-delete",commandName:"delete"});b=new Ext.menu.Item({text:_TR("SETTINGS"),ctCls:"x-frontview-icon-settings",commandName:"settings"});this.grouplunMenu=new Ext.UI.Menu({cls:"x-san-menu",items:[a,b],listeners:{itemclick:function(c){var d=this.grouplunMenu.item;if(d)switch(c.commandName){case "delete":this.onLunExclude(d);break;case "settings":(c=
_a(_7(_._3.ShareSubSys.VolumesView),"IExtNative"))&&c.getNative().showProperties.defer(100,c.getNative(),[d]);break}},scope:this}})},oninitialized:function(){this.createButtons();this.refresh()},refresh:function(){this.zfsVolumesManager.UpdateVolumes("san-update-zfsvolumes");this.spISCSIManager.updateLUNGroups("san-update-lungroups");this.spISCSIManager.updateHosts("san-update-hosts")},createButtons:function(){(new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",
html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),listeners:{afterrender:function(a){a.el.on("click",function(){this.refresh()},this)},scope:this}})).render(this.buttonsId)},showAddGroupWindow:function(){var a=this.getAddGroupWindow();a.show();a.clear();a.load(this.numberForNewGroup,this.existNames,this.existTargets)},showPropertiesGroupWindow:function(a){var b=this.propertiesGroupWindow;b.show();if(this.initiatorsRefreshed){b.populateInitiators(this.spISCSIManager.getHosts());
this.initiatorsRefreshed=false}b.load(a,this.existTargets)},populateLunGroups:function(a){this.initGroupPanels(a)},initGroupPanels:function(a){var b=_a(this,"IPanelList"),c,d,f,e;b.removeAll();d=_a(_7(_._3.SanSubSys.UnassignedPanel),"IPanelItem");f=_a(d,"IExtNative").getNative();f.on("itemclick",function(i,j){if(j){this.itemAssign.setDisabled(this.spISCSIManager.getLUNGroups()==_4||!this.spISCSIManager.getLUNGroups().length);this.assignMenu.item=j;this.assignMenu.show.defer(100,
this.assignMenu,[Ext.get(i.dataview.getSelectedNodes()[0])])}else this.assignMenu.item=null},this);e=f;b.addPanel(d);this.numberForNewGroup=1;this.existNames=[];this.existTargets=[];for(var h=0;h<a.length;++h){c=_a(a[h],"_i1k");d=_a(_7(_._3.SanSubSys.GroupPanel),"IPanelItem");f=_a(d,"IExtNative").getNative();f.on("itemclick",this.onGroupLunClick,this);f.setGroup(c);var g=c.getName();if(g&&g!=_4){g=g.toLowerCase();this.existNames.push(g);if(g.indexOf("group")==
0&&g.length>5)if((g=parseInt(g.substring(5)))&&g>=this.numberForNewGroup)this.numberForNewGroup=g+1}(c=c.getTargets())&&_.each(c,function(i){if(i=_a(i,"_i1o"))if((i=i.getName())&&i!=_4){i=i.toLowerCase();this.existTargets.push(i)}},this);f.prevPanel=e;e=f;b.addPanel(d)}},onGroupLunClick:function(a,b){if(b){this.grouplunMenu.item=b;this.grouplunMenu.show.defer(100,this.grouplunMenu,[Ext.get(a.dataview.getSelectedNodes()[0])])}else this.grouplunMenu.item=null},populateLuns:function(a){this.selectedPanel=
undefined;for(var b={},c,d,f=_a(this,"IPanelList").getPanelItems(),e=0;e<a.length;++e){c=_a(a[e],"_i1j");if(c.getShared()){d=c.getLUNGroupName()||-1;b[d]||(b[d]=[]);b[d].push(c)}}for(e=0;e<f.length;++e){c=_a(f[e],"IExtNative").getNative();c.on("addlunrequest",this.onAddLunRequest,this);c.on("itemselect",this.onItemSelect,this);a=b[c.getGroupName()]||[];c.loadLuns(a);this.setActiveLun(c,a)}},onAddLunRequest:function(a,b,c,d){this.requestedLunId=d.getVolumeName()+"/"+c},onItemSelect:function(a,
b){this.selectLun(a,b)},setActiveLun:function(a,b){if(this.requestedLunId){this.selectedLunId=this.requestedLunId;this.requestedLunId=undefined}for(var c=0,d=b.length;c<d;++c)if(b[c].getId()==this.selectedLunId){a.dataview.select(c);break}},onLunExclude:function(a){Ext.UI.MessageBox.confirm({title:_TR("EXCLUDE_LUN"),msg:_TR("SAN_EXCLUDE_LUN_CONFIRM"),fn:function(b){if(b=="yes"){a.putLUNGroupName("");this.spShareManager.commitLUN(a,"san-commit-lun")}},scope:this})},ISystemFrameTab:{getTitle:function(){return _TR("ISCSI")},
getCfg:function(){return{id:"iscsi-tab"}}},TabInitialize:function(){this.oninitialized();FocusManager.reg(this.content.el,{keydown:function(a){if(a.target.tagName!="INPUT"&&this.selectedPanel){var b=this.selectedPanel.dataview;switch(a.getKey()){case a.UP:b.onkeyup(a);break;case a.DOWN:b.onkeydown(a);break;case a.LEFT:b.onkeyleft(a);break;case a.RIGHT:b.onkeyright(a);break}}}},this);this.mask.on("hide",function(){this.isActiveTab()&&FocusManager.setActive(this.content.el)},this);this.mask.on("show",
function(){this.isActiveTab()&&FocusManager.setActive(this.mask.mask)},this)},TabActivate:function(){this.mask.config.hidden?FocusManager.setActive(this.content.el):FocusManager.setActive(this.mask.mask)},isActiveTab:function(){return this.tabView.__s.desktopPanel.layout.activeItem==this},showMask:function(){if(!this.updatesCount){var a=this.propertiesGroupWindow;a.hidden?this.mask.show():a.maskInWindow.show()}++this.updatesCount},hideMask:function(){--this.updatesCount;if(!this.updatesCount){var a=
this.propertiesGroupWindow;a.hidden||a.maskInWindow.hide();this.mask.hide()}},_i1n:{_o1:function(a,b){if(!(b=="sync-update-lungroups"&&!this.rendered)){if(b=="san-update-lungroups"||b=="sync-update-lungroups"||b=="san-update-hosts"||b=="san-add-lungroup"||b=="san-remove-lungroup"||b=="san-commit-lungroup"||b=="san-add-host"||b=="san-remove-host"||b=="san-commit-host")this.showMask();return _5}},_o2:function(a,b){if(!(b=="sync-update-lungroups"&&!this.rendered)){if(b=="san-update-lungroups"||
b=="sync-update-lungroups"){this.populateLunGroups(this.spISCSIManager.getLUNGroups());this.spShareManager.updateLUNS("san-update-luns")}if(b=="san-add-lungroup"||b=="san-remove-lungroup"||b=="san-commit-lungroup")this.spISCSIManager.updateLUNGroups("sync-update-lungroups");if(b=="san-add-host"||b=="san-remove-host"||b=="san-commit-host")this.spISCSIManager.updateHosts("san-update-hosts");b=="san-remove-host"&&this.spISCSIManager.updateLUNGroups("san-update-lungroups");if(b=="san-update-hosts"){a=
this.propertiesGroupWindow;if(a.hidden)this.initiatorsRefreshed=true;else{a.populateInitiators(this.spISCSIManager.getHosts());a.populateGroupHosts();this.initiatorsRefreshed=false}}return _5}},_o3:function(a,b,c){if(!(c=="sync-update-lungroups"&&!this.rendered)){if(c=="san-update-lungroups"||c=="sync-update-lungroups"||c=="san-update-hosts"||c=="san-add-lungroup"||c=="san-remove-lungroup"||c=="san-commit-lungroup"||c=="san-add-host"||c=="san-remove-host"||c=="san-commit-host")this.hideMask();
if(a!=_5){if(!this.isManagerOwner(c))return;c=="san-add-lungroup"&&this.getAddGroupWindow().show();if(c=="san-commit-lungroup"){this.propertiesGroupWindow.show();this.spISCSIManager.updateLUNGroups("san-update-lungroups")}if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();b=b.getErrorDetails();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a,_2.ERROR,{windowTitle:_TR("LUNGROUP_FAILED"),title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,
buttonSend:false,checkboxShow:false})}}return _5}}},_i3b:{_o1:function(a,b){if(this.rendered){if(b=="san-update-luns"||b=="sync-update-luns"||b=="san-commit-lun"||b=="shares-propwnd-commit-lun"||b=="shares-volumes-add-lun"||b=="shares-volumes-remove-lun")this.showMask();return _5}},_o2:function(a,b){if(this.rendered){if(b=="san-update-luns"||b=="sync-update-luns")this.populateLuns(this.spShareManager.getLUNS());if((b=="san-commit-lun"||b=="shares-propwnd-commit-lun"||
b=="shares-volumes-add-lun"||b=="shares-volumes-remove-lun")&&this.isVisible())this.spShareManager.updateLUNS("sync-update-luns");return _5}},_o3:function(a,b,c){if(this.rendered){if(c=="san-update-luns"||c=="sync-update-luns"||c=="san-commit-lun"||c=="shares-propwnd-commit-lun"||c=="shares-volumes-add-lun"||c=="shares-volumes-remove-lun")this.hideMask();if(a!=_5){if(!this.isManagerOwner(c))return;c=="san-commit-lun"&&this.spShareManager.updateLUNS("san-update-luns");if(b=_a(b,"_io").getLastNMLError()){a=
b.getErrorCode();b=b.getErrorDetails();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a,_2.ERROR,{windowTitle:_TR("LUN_FAILED"),title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5}}},_i3v:{_o2:function(a,b){if((b=="san-update-zfsvolumes"||b=="sync-update-zfsvolumes")&&this.rendered){a=this.zfsVolumesManager.getActiveVolumes();this.novolumes=a==_4||a.length==0}return _5}},
selectLun:function(a,b){if(b){this.selectedLunId=b.getId();this.selectedPanel&&this.selectedPanel!=a&&this.selectedPanel.dataview.clearSelections(true);this.selectedPanel=a;a=a.dataview.getSelectedNodes();if(a.length)if(a=Ext.get(a[0])){a.scrollIntoView(this.content.el,true,true);this.scroller.resize()}}},getAddGroupWindow:function(){if(!this.addGroupWindow)this.addGroupWindow=new _s3.AddGroupWindow;return this.addGroupWindow},isManagerOwner:function(a){return typeof a=="string"&&a.indexOf("san-")==
0}});_s0.RegisterTab(_._3.System.Frame,_._3.System.SanTab,"ISystemFrame","ISystemFrameTab");_._2("_","_._3","_._3.SanSubSys");_._3.SanSubSys.GroupPanel="SanSubSys.GroupPanel";_._3.SanSubSys.UnassignedPanel="SanSubSys.UnassignedPanel";Ext.namespace("_s3");
_s3.BasePanel=_._1(_s0.BasePanel,{type:"",cls:"x-san-panel-group",constructor:function(a){_s3.BasePanel.superclass.constructor.call(this,a);this.addEvents("itemclick","itemselect")},getGroupName:function(){return-1},loadLuns:function(a){var b=[];this.dataview.store.removeAll();for(var c=0;c<a.length;++c){var d=a[c].getAllocated(),f=a[c].getSize();b.push({id:a[c].getId(),name:a[c].getName(),ref:a[c],charth:d&&f?Math.round(64*d/f):0,chartback:"0px "+-(64-(d&&f?Math.round(64*
d/f):0))+"px",empty:"x-san-panel-lun-icon-empty",thicksan:!a[c].getSparse()})}this.dataview.store.loadData(b)},onReady:function(){this.topBar=new Ext.Component({cls:"x-san-panel-bar",renderTo:this.content});this.dataview=new _s3.GroupDataView;this.dataview.on("click",this.onItemClick,this);this.dataview.on("selectionchange",this.onSelectionChange,this);this.dataview.render(this.content);if(this.prevPanel&&this.prevPanel.dataview){this.dataview.prevDataview=this.prevPanel.dataview;this.prevPanel.dataview.nextDataview=
this.dataview}},onItemClick:function(a,b,c){a=a.getRecord(c);this.fireEvent("itemclick",this,a?a.data.ref:null)},onSelectionChange:function(a){a=a.getSelectedRecords();this.fireEvent("itemselect",this,a.length>0?a[0].data.ref:null)}});Ext.namespace("_s3");
_s3.GroupPanel=_._1(_._3.SanSubSys.GroupPanel,_s3.BasePanel,{type:"assigned",help:"iscsi_panel_group",constructor:function(a){_s3.GroupPanel.superclass.constructor.call(this,a);this.addEvents("contextmenu");if(a=_a(_7(_1.CLSIDS.Device5200),"_i2"))this.spISCSIManager=a.getISCSIManager()},setGroup:function(a){this.group=a},getGroup:function(){return this.group},getGroupName:function(){return this.group.getName()},onReady:function(){this.renderTitle();
_s3.GroupPanel.superclass.onReady.call(this);new Ext.UI.Button({text:_TR("DESTROY"),cls:"x-san-top-buttons-delgroup",width:125,renderTo:this.topBar.el,listeners:{click:function(){Ext.UI.MessageBox.confirm({title:_TR("REMOVE_LUNGROUP"),msg:_TR("SAN_REMOVE_LUNGROUP_CONFIRM"),fn:function(a){a=="yes"&&this.spISCSIManager.RemoveLUNGroup(this.group,"san-remove-lungroup")},scope:this})},scope:this}});new Ext.UI.Button({text:_TR("PROPERTIES"),cls:"x-san-top-buttons-groupprop",width:125,renderTo:this.topBar.el,
listeners:{click:function(){_a(_7(_._3.System.SanTab),"IExtNative").getNative().showPropertiesGroupWindow(this.group)},scope:this}})},renderTitle:function(){if(this.group){this.updateTitle(this.group.getName());this.bottomPlace.update('<table class="x-san-panel-group-infotbl" cellpadding="0" cellspacing="0"><tr><td class="x-san-panel-group-infotbl-cell"><h1>'+_TR("TARGET")+":</h1></td></tr>"+this.getTargetsHtml()+'<tr><td class="x-san-panel-group-infotbl-cell"><h1>'+_TR("SECURITY_AND_ACCESS")+
"</h1></td></tr>"+this.getSecurityHtml()+'<tr><td class="x-san-panel-group-infotbl-cell"><h1>'+_TR("ALLOWED_CLIENTS")+":</h1></td></tr>"+this.getHostsHtml()+"</table>")}},getTargetsHtml:function(){for(var a=this.group.getTargets(),b="",c,d=0;d<a.length;++d){c=_a(a[d],"_i1o");c=c.getName();b+='<tr><td class="x-san-panel-group-infotbl-cell"><div><span class="x-selectable" title="'+c+'">'+c.substring(0,30)+"</span></div></td></tr>"}return b},getSecurityHtml:function(){var a=this.group.getChapAuth()==
"1";return'<tr><td class="x-san-panel-group-infotbl-cell"><div class="x-ellipsis"><span>'+_TR("CHAP")+": "+(a?_TR("ENABLED"):_TR("DISABLED"))+"</span></div></td></tr>"},getHostsHtml:function(){var a=function(e){return'<tr><td class="x-san-panel-group-infotbl-cell"><div class="x-ellipsis"><span title="'+e+'">'+e+"</span></div></td></tr>"};if(this.group.getAllHosts())return a(_TR("ANY"));else{for(var b=this.group.getHosts(),c="",d,f=0;f<b.length;++f){d=_a(b[f],"_i1l");d=d.getName();c+=a(d)}return c||
a(_TR("NONE"))}},onPropertiesClick:function(a,b){this.fireEvent("contextmenu",this,a);b.stopEvent()}});Ext.namespace("_s3");
_s3.UnassignedPanel=_._1(_._3.SanSubSys.UnassignedPanel,_s3.BasePanel,_i3v,{type:"unassigned",help:"iscsi_panel_unassigned",constructor:function(a){_s3.UnassignedPanel.superclass.constructor.call(this,a);if(a=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,
"_i1").Advise(this)}this.addEvents("addlunrequest")},loadLuns:function(a){_s3.UnassignedPanel.superclass.loadLuns.call(this,a)},onReady:function(){this.updateTitle(_TR("UNASSIGNED_LUNS"));_s3.UnassignedPanel.superclass.onReady.call(this);new Ext.Component({renderTo:this.topBar.el,html:'<div class="x-san-top-buttons-div"><div id="'+(this.btniSNSId=Ext.id())+'"></div><div style="clear:both; height:5px; width:100%;"></div><div id="'+(this.btnNewLunId=Ext.id())+'"></div><div style="clear:both; height:5px; width:100%;"></div><div id="'+
(this.btnNewGroupId=Ext.id())+'"></div></div>'});this.iSNSBtn=new Ext.UI.LedButton({text:_TR("ISNS_SETTING_BTN"),disableToggle:true,width:125,iconCls:"ui-ledbutton-icon-off",renderTo:this.btniSNSId});this.iSNSBtn.render(this.btniSNSId);this.iSNSBtn.on("click",this.iSNSBtnOnClicked,this);this.iSNSBtn.setState("off");this.newLunBtn=new Ext.UI.Button({text:_TR("NEW_LUN"),cls:"x-san-top-buttons-newlun",acceptbtn:true,width:125,renderTo:this.btnNewLunId,listeners:{click:this.onNewLunClick,scope:this}});
new Ext.UI.Button({text:_TR("NEW_GROUP"),width:125,renderTo:this.btnNewGroupId,listeners:{click:function(){_a(_7(_._3.System.SanTab),"IExtNative").getNative().showAddGroupWindow()},scope:this}});this.wndiSNS=new _s3.ISNSWindows;this.wndiSNS.on("change",this.oniSNSApply,this);this.reviewVolumes();this.spServManager.updateSystemServiceInfo("sync-update-services-isns")},iSNSBtnOnClicked:function(){this.wndiSNS.show();this.wndiSNS.loadArgs(this.isnsService)},oniSNSApply:function(a){this.iSNSBtn.setState(a?
"on":"off")},reviewVolumes:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){a=a.getZFSVolumesManager().getActiveVolumes();this.newLunBtn.setDisabled(a==_4||a.length==0)}},onNewLunClick:function(){_s0.GA.trackEvent({eventCategory:"iSCSI",eventAction:"click",eventLabel:"New LUN"});if(!this.volumesview){this.volumesview=_a(_7(_._3.ShareSubSys.VolumesView),"IExtNative").getNative();this.volumesview.getAddDatasetWindow().on("addsharerequest",
this.onAddLunRequest,this)}this.volumesview.showDataSetWindow(null,"SAN")},onAddLunRequest:function(a,b,c,d){this.fireEvent("addlunrequest",this,b,c,d)},showError:function(a){if(a=_a(a,"_io").getLastNMLError()){a=a.getErrorCode();switch(a){default:_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("ERROR"),title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},
_i3v:{_o2:function(a,b){if((b=="san-update-zfsvolumes"||b=="sync-update-zfsvolumes")&&this.rendered)this.reviewVolumes();return _5}},_i35:{_o1:function(a,b){switch(b){case "sync-update-services-isns":this.showProgress();break}return _5},_o2:function(a,b){switch(b.toString()){case "sync-update-services-isns":if(a=$_.find(this.spServManager.getSystemServices(),function(c){return _a(c,"_i32").getName()=="isns"})){this.isnsService=
_a(a,"_i32");this.iSNSBtn.setState(this.isnsService.getEnable()?"on":"off")}break}return _5},_o3:function(a,b,c){switch(c){case "sync-update-services-isns":this.hideProgress();break}a!=_5&&this.showError(b);return _5}}});_._2("_s3");
_s3.GroupDataView=Ext.extend(Ext.UI.ChainDataView,{selectedClass:"x-san-panel-lun-selected",itemSelector:"div.x-san-panel-lun",singleSelect:true,keyHandlers:false,constructor:function(a){_s3.GroupDataView.superclass.constructor.call(this,a);this.store=new Ext.data.Store({autoDestroy:true,reader:new Ext.data.JsonReader({idProperty:"id",fields:["id","name","comment","ref","charth","chartback","empty","btnid","thicksan"]})});this.tpl=['<tpl for=".">','<div id="{id}" class="x-san-panel-lun <tpl if="!!thicksan"> x-san-panel-lun-thick</tpl>">',
'<div class="x-san-panel-lun-icon"><div class="x-san-panel-lun-chart" style="height:{charth}px;background-position:{chartback}"></div></div>','<div class="x-san-panel-lun-name x-ellipsis" title="{name}">{name}</div>',"</div>","</tpl>"]}});Ext.namespace("_s3");
_s3.ISNSWindows=_._1(_9,Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,updatesCount:0,constructor:function(a){this.title=_TR("ISNS_TITLE");this.html=this.getHtml();this.fbar=this.getFooter();_s3.ISNSWindows.superclass.constructor.call(this,a);this.addEvents("change")},initComponent:function(){_s3.ISNSWindows.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");
if(a){this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)}},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td id="'+(this.iSNSEnableChkBoxId=Ext.id())+'"></td><td id="'+(this.iSNSEnableChkBoxTTId=Ext.id())+'"></td></tr></table><table style="margin-top:25px;" cellpadding="0" cellspacing="0"><tr><td id="'+(this.iSNSLblId=Ext.id())+'" style="white-space:nowrap; padding: 0px 5px 0px 28px">'+_TR("ISNS_SERVER")+':</td><td id="'+
(this.iSNSId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("APPLY"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.iSNSLbl.removeClass("x-bac-label-error");this.hide()},this);return["->",a,b]},afterRender:function(a){_s3.ISNSWindows.superclass.afterRender.call(this,a);this.iSNSText=new Ext.UI.TextField({width:300,renderTo:this.iSNSId,
tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_HOST")}});this.iSNSLbl=Ext.get(this.iSNSLblId);this.iSNSEnableChkBox=new Ext.UI.Checkbox({bufferResize:0,boxLabel:_TR("ISNS_ENABLE"),renderTo:this.iSNSEnableChkBoxId});new Ext.UI.RoundButton({cls:"x-frontview-btn-info",style:"margin-left:5px;",renderTo:this.iSNSEnableChkBoxTTId,listeners:{afterrender:function(b){new Ext.UI.ToolTip(b.el,{html:_TR("ISNS_ENABLE_TOOLTIP")})},scope:this}});this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,
msgCls:"ui-mask-style1",delay:0,frame:false})},validate:function(){this.iSNSLbl.removeClass("x-bac-label-error");var a=false;if(this.iSNSEnableChkBox.getValue()){var b=this.iSNSText.getValue();this.iSNSLbl.removeClass("x-bac-label-error");this.iSNSText.tooltip.enabled=false;if(!_.isValidDomainName(b)&&!_.isValidIPAddress(b)&&!_.Utils.isValidIPv6Address(b)){this.iSNSLbl.addClass("x-bac-label-error");a=this.iSNSText.tooltip.enabled=true}}return!a},onAddClick:function(){if(this.validate()){this.isnsService.putEnable(this.iSNSEnableChkBox.getValue());
this.isnsService.putISNSServer(this.iSNSText.getValue());this.spServManager.commitSystemService("system-service-commit-isns")}},loadArgs:function(a){this.isnsService=a;this.iSNSEnableChkBox.setValue(this.isnsService.getEnable());this.iSNSText.setValue(this.isnsService.getISNSServer())},showProgress:function(){if(!this.updatesCount){this.maskProgress.show();this.maskProgress.mask.setDisplayed(false)}++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},
showError:function(a){if(a=_a(a,"_io").getLastNMLError()){a=a.getErrorCode();switch(a){default:_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("ERROR"),title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},_i35:{_o1:function(a,b){switch(b){case "system-service-commit-isns":this.showProgress();break}return _5},_o2:function(a,
b){switch(b.toString()){case "system-service-commit-isns":this.fireEvent("change",this.iSNSEnableChkBox.getValue());this.hide();break}return _5},_o3:function(a,b,c){switch(c){case "system-service-commit-isns":this.hideProgress();break}a!=_5&&this.showError(b);return _5}}});Ext.namespace("_s3");
_s3.AddGroupWindow=Ext.extend(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,help:"iscsi_wnd_add_group",constructor:function(a){this.title=_TR("NEW_LUNGROUP");this.html=this.getHtml();this.fbar=this.getFooter();_s3.AddGroupWindow.superclass.constructor.call(this,a)},initComponent:function(){_s3.AddGroupWindow.superclass.initComponent.call(this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spISCSIManager=
a.getISCSIManager();this.spNetworkManager=a.getNetworkManager();_a(this.spNetworkManager,"_i1").Advise(this)}},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-san-wnd-group-text x-san-wnd-group-text-name">'+_TR("NAME")+':</td><td id="'+(this.nameNodeId=Ext.id())+'"></td></tr><tr><td class="x-san-wnd-group-text x-san-wnd-group-text-target">'+_TR("TARGET")+':</td><td id="'+(this.targetNodeId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=
new Ext.UI.Button({text:_TR("CREATE"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s3.AddGroupWindow.superclass.afterRender.call(this,a);this.nameText=new Ext.UI.TextField({idth:410,tooltipCfg:{html:_TR("LUNGROUP_NAME_ERROR")},enableKeyEvents:true});this.nameText.on("keyup",this.onNameTextKeyUp,this);this.targetText=
new Ext.UI.TextField({tooltipCfg:{html:_TR("LUNGROUP_TRGET_ERROR")},width:410});this.targetText.on("change",this.onTargetTextChange,this);this.nameText.render(this.nameNodeId);this.targetText.render(this.targetNodeId)},onNameTextKeyUp:function(){if(!this.targetChanged){name=this.nameText.getValue();this.targetText.setValue(this.genTarget+(name?":"+name:""))}},onTargetTextChange:function(){this.targetChanged=true},onAddClick:function(){if(this.validate()){var a=this.nameText.getValue(),b=_a(new _1.scsitarget,
"_i1o");b.putName(this.targetText.getValue().toLowerCase());b=[b];var c=_a(new _1.lungroup,"_i1k");c.putName(a);c.putTargets(b);this.spISCSIManager.AppendLUNGroup(c,"san-add-lungroup");this.hide()}},validate:function(){this.removeClass("x-san-wnd-group-err-name");this.removeClass("x-san-wnd-group-err-target");var a=false,b=this.nameText.getValue();b=b.toLowerCase();if(this.nameText.tooltip)this.nameText.tooltip.enabled=false;if(this.existNames.indexOf(b)!=-1||!this.isValidName(b)){this.addClass("x-san-wnd-group-err-name");
a=this.nameText.tooltip.enabled=true}b=this.targetText.getValue();b=b.toLowerCase();if(this.targetText.tooltip)this.targetText.tooltip.enabled=false;if(this.existTargets.indexOf(b)!=-1||!_s10.Utils.isValidIQN(b)){this.addClass("x-san-wnd-group-err-target");a=this.targetText.tooltip.enabled=true}return!a},clear:function(){this.removeClass("x-san-wnd-group-err-name");this.removeClass("x-san-wnd-group-err-target");this.nameText.reset();this.targetText.reset();this.targetChanged=false;this.center();
this.nameText.focus(false,true)},load:function(a,b,c){this.existNames=b;this.existTargets=c;a="group"+(a||"1");this.nameText.setValue(a);this.genTarget=this.generateTarget();this.targetText.setValue(this.genTarget+(a?":"+a:""));this.targetChanged=false},generateTarget:function(){var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],b=this.spNetworkManager.getHostname();b=b&&b!=_4?b+":":"";b=b.replace(/[^0-9a-z\-\.:]/gi,"-");for(var c="",d=0;d<8;++d)c+=a[parseInt(Math.random()*
16)];return"iqn.1994-11.com.netgear:"+b+c},isValidName:function(a){if(a.length==0)return false;var b;b=/[\-\.:]/g;if(a.replace(/[a-zA-Z0-9\-\.:]/g,"")!=""||a.replace(b,"")=="")return false;return true}});Ext.namespace("_s3");
_s3.PropertiesGroupWindow=Ext.extend(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,fakePsw:"\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf",initiators:{},updatesCount:0,help:"iscsi_wnd_edit_group",constructor:function(a){this.title=_TR("PROPERTIES_LUNGROUP");this.html=this.getHtml();this.fbar=this.getFooter();_s3.PropertiesGroupWindow.superclass.constructor.call(this,a);this.wndInitiatorSettings=new _s3.InitiatorSettingsWindow},initComponent:function(){_s3.PropertiesGroupWindow.superclass.initComponent.call(this);
var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spISCSIManager=a.getISCSIManager();this.networkManager=a.getNetworkManager();_a(this.networkManager,"_i1").Advise(this);this.networkVLANManager=a.getNetworkVLANManager();_a(this.networkVLANManager,"_i1").Advise(this)}},getHtml:function(){return'<div class="x-san-wnd-group"><table cellpadding="0" cellspacing="0"><tr><td class="x-san-wnd-group-text">'+_TR("NAME")+':</td><td class="x-san-wnd-group-text-name" id="'+
(this.nameNodeId=Ext.id())+'"></td></tr><tr><td class="x-san-wnd-group-text x-san-wnd-group-text-target">'+_TR("TARGET")+':</td><td id="'+(this.targetNodeId=Ext.id())+'"></td></tr><tr><td class="x-san-wnd-group-text"></td><td id="'+(this.chapNodeId=Ext.id())+'"></td></tr><tr><td class="x-san-wnd-group-text x-san-wnd-group-text-target">'+_TR("DEDICATED_LINK")+':</td><td id="'+(this.cbDedicatedLinkId=Ext.id())+'"></td></tr><tr><td class="x-san-wnd-group-text x-san-wnd-group-toppadding">'+_TR("ALLOWED_INITIATORS")+
':</td><td class="x-san-wnd-group-toppadding" id="'+(this.clientsNodeId=Ext.id())+'"></td></tr><tr><td class="x-san-wnd-group-text"></td><td><div class="x-san-wnd-group-gridinit-buttonsct"><div id="'+(this.gridButtonsNodeId=Ext.id())+'" class="x-san-wnd-group-gridinit-buttons"></div></div><table class="x-san-wnd-group-gridinit" cellspacing="0"><tr><td class="x-ellipsis cell cell-name ui-fwgrid-header">'+_TR("INITIATOR_IGN")+'</td><td class="x-ellipsis cell cell-chap ui-fwgrid-header">'+_TR("INITIATOR_CHAP_SECRET")+
'</td><td class="x-ellipsis cell cell-allowed ui-fwgrid-header">'+_TR("INITIATOR_ALLOWED")+'</td></tr></table><div id="'+(this.gridNodeId=Ext.id())+'" style="max-height: 120px;"></div></td></tr><tr><td></td><td class="x-san-wnd-group-toppadding">'+_TR("LUNGROUP_CHAP_PASSWORD")+'</td></tr><tr><td class="x-san-wnd-group-text x-san-wnd-group-text-pass">'+_TR("PASSWORD")+':</td><td style="padding: 2px 0;" id="'+(this.passwordNodeId=Ext.id())+'"></td></tr><tr><td class="x-san-wnd-group-text x-san-wnd-group-text-conf">'+
_TR("RE_PASSWORD")+':</td><td style="padding: 2px 0;" id="'+(this.confirmNodeId=Ext.id())+'"></td></tr></table></div>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("APPLY"),width:100,acceptbtn:true});a.on("click",this.onApplyClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s3.PropertiesGroupWindow.superclass.afterRender.call(this,a);this.nameText=Ext.get(this.nameNodeId);
this.targetText=new Ext.UI.TextField({tooltipCfg:{html:_TR("LUNGROUP_TRGET_ERROR")},width:410});this.radioAllClients=new Ext.UI.Radio({boxLabel:_TR("ANY"),name:"AllowedClients",cls:"x-san-wnd-group-clients"});this.radioSelectedClients=new Ext.UI.Radio({cls:"x-san-wnd-group-margin",boxLabel:_TR("SELECTED"),name:"AllowedClients"});this.radioAllClients.on("check",this.onAllClientsCheck,this);this.chapCheck=new Ext.UI.Checkbox({boxLabel:_TR("USE_CHAP_AUTH")});this.cbDedicatedLink=new Ext.UI.ComboBox({width:302,
mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["","Any"]]}),valueField:"id",displayField:"text",value:"",renderTo:this.cbDedicatedLinkId});this.passwordText=new Ext.UI.TextField({width:410,inputType:"password",selectOnFocus:true,tooltipCfg:{html:_TR("INITIATOR_SETTINGS_ERRORTIP_PASSWORD"),enabled:true},listeners:{change:function(){this.passwordChanged=true;this.confirmText.getValue()==this.fakePsw&&this.confirmText.setValue("")},scope:this}});this.confirmText=
new Ext.UI.TextField({width:410,inputType:"password",selectOnFocus:true,tooltipCfg:{html:_TR("INITIATOR_SETTINGS_ERRORTIP_CONFIRM"),enabled:true},listeners:{change:function(){this.passwordChanged=true;this.passwordText.getValue()==this.fakePsw&&this.passwordText.setValue("")},scope:this}});this.targetText.render(this.targetNodeId);this.radioAllClients.render(this.clientsNodeId);this.radioSelectedClients.render(this.clientsNodeId);this.chapCheck.render(this.chapNodeId);this.passwordText.render(this.passwordNodeId);
this.confirmText.render(this.confirmNodeId);this.gridNode=Ext.get(this.gridNodeId);this.scrollerGrid=new Ext.UI.Scroller({dom:this.gridNode.dom});this.scrollerGrid.reg();this.gridButtonsNode=Ext.get(this.gridButtonsNodeId);this.bPropHost=new Ext.UI.RoundButton({cls:"x-san-wnd-group-gridinit-button x-frontview-btn-properties-small",disabled:true});this.bRemoveHost=new Ext.UI.RoundButton({cls:"x-san-wnd-group-gridinit-button x-frontview-btn-minus-small",disabled:true});this.bCreateHost=new Ext.UI.RoundButton({cls:"x-san-wnd-group-gridinit-button x-frontview-btn-plus-small"});
this.bPropHost.on("click",this.onPropHostClick,this);this.bRemoveHost.on("click",this.onRemoveHostClick,this);this.bCreateHost.on("click",this.onCreateHostClick,this);this.bCreateHost.render(this.gridButtonsNode);this.bRemoveHost.render(this.gridButtonsNode);this.bPropHost.render(this.gridButtonsNode);this.maskInWindow=new Ext.UI.LoadMask(this.bwrap,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0})},onPropHostClick:function(){if(this.selectedInitiator){this.wndInitiatorSettings.show();
this.wndInitiatorSettings.load(this.selectedInitiator.initiator);this.wndInitiatorSettings.center()}},onRemoveHostClick:function(){this.selectedInitiator&&Ext.UI.MessageBox.confirm({title:_TR("INITIATOR_REMOVE"),msg:_TR("INITIATOR_REMOVE_CONFIRM"),fn:function(a){a=="yes"&&this.spISCSIManager.RemoveHost(this.selectedInitiator.initiator,"san-remove-host")},scope:this})},onCreateHostClick:function(){this.wndInitiatorSettings.show();this.wndInitiatorSettings.load();this.wndInitiatorSettings.center()},
onChapCheck:function(a,b){this.removeClass("x-san-wnd-group-err-pass");this.removeClass("x-san-wnd-group-err-conf");this.passwordText.setDisabled(!b);this.confirmText.setDisabled(!b)},onAllClientsCheck:function(a,b){for(var c in this.initiators)this.initiators[c].chbAllowed.setDisabled(b);this.bCreateHost.setDisabled(b);this.bRemoveHost.setDisabled(b||!this.initiatorsListLength);this.bPropHost.setDisabled(b||!this.initiatorsListLength)},onApplyClick:function(){if(this.validate()){var a=this.getTargets(),
b=this.getHosts(),c=this.radioAllClients.getValue(),d=this.chapCheck.getValue(),f=this.passwordText.getValue(),e=this.group;e.putAllHosts(c);e.putTargets(a);e.putHosts(b);e.putChapAuth(d);if(this.passwordChanged){e.putChapSecret("1");e.putChapSecretValueBase64(_.Utils.Base64.encode(f))}else e.putChapSecret("0");e.putDedicatedLink(this.cbDedicatedLink.getValue());this.hide();this.spISCSIManager.CommitLUNGroup(e,"san-commit-lungroup")}},populateGroupHosts:function(){for(var a in this.initiators)this.initiators[a].chbAllowed.setValue(false);
if(this.group)for(var b=this.group.getHosts(),c=0;c<b.length;++c){a=_a(b[c],"_i1l");a=a.getName();this.initiators[a]&&this.initiators[a].chbAllowed.setValue(true)}},populateInitiators:function(a){var b="",c=false;this.initiators={};this.initiatorsListLength=0;Ext.each(a,function(e){if(e=_a(e,"_i1l")){var h="ui-fwgrid-row"+(c?" ui-fwgrid-rowalt":"");c=!c;var g=Ext.id(),i=Ext.id(),j=e.getName();b+='<tr id="'+g+'"><td class="'+h+'"><div class="x-ellipsis cell cell-name" title="'+
j+'">'+j+'</div></td><td class="'+h+'"><div class="x-ellipsis cell cell-chap">'+(e.getChapSecret()=="1"?"\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf":"")+'</div></td><td class="'+h+'"><div class="x-ellipsis cell cell-allowed" id="'+i+'"></div></td></tr>';this.initiators[e.getName()]={initiator:e,rowId:g,chbAllowedId:i};++this.initiatorsListLength}},this);b||(b='<tr><td class="ui-fwgrid-row" colspan="3">&nbsp;</td></tr><tr><td class="ui-fwgrid-rowalt" colspan="3" style="text-align: center;">'+_TR("EMPTY")+
'</td></tr><tr><td class="ui-fwgrid-row" colspan="3">&nbsp;</td></tr>');b=String.format('<table class="x-san-wnd-group-gridinit" cellspacing="0">{0}</table>',b);this.gridNode.update(b);var d=undefined;for(var f in this.initiators)(function(){var e=this.initiators[f];d=d||e;e.row=Ext.get(e.rowId);e.row.on("click",function(){this.selectHost(e)},this);e.chbAllowed=new Ext.UI.Checkbox({cls:"cell-allowed-chb"});e.chbAllowed.render(e.chbAllowedId)}).call(this);if(d){this.bRemoveHost.enable();this.bPropHost.enable()}else{this.bRemoveHost.disable();
this.bPropHost.disable()}this.selectHost(d);this.syncShadow();this.scrollerGrid.resize()},validate:function(){this.removeClass("x-san-wnd-group-err-target");this.removeClass("x-san-wnd-group-err-pass");this.removeClass("x-san-wnd-group-err-conf");var a=false,b=this.targetText.getValue();b=b.toLowerCase();if(this.targetText.tooltip)this.targetText.tooltip.enabled=false;if(this.targetsForThisGroup.indexOf(b)==-1&&this.existTargets.indexOf(b)!=-1||!_s10.Utils.isValidIQN(b)){this.addClass("x-san-wnd-group-err-target");
a=this.targetText.tooltip.enabled=true}if((b=this.passwordText.getValue())&&b!=this.fakePsw&&(b.length<12||b.length>16)){this.addClass("x-san-wnd-group-err-pass");a=true}var c=this.confirmText.getValue();if(b!=c){this.addClass("x-san-wnd-group-err-conf");a=true}return!a},load:function(a,b){this.isVlansLoaded=this.isBondsLoaded=this.isNicsLoaded=false;this.networkManager.updateNICS("iscsi-update-nics");this.networkManager.updateBONDS("iscsi-update-bonds");this.networkVLANManager.UpdateVLANs("iscsi-update-vlans");
this.existTargets=b;this.passwordChanged=false;this.removeClass("x-san-wnd-group-err-target");this.removeClass("x-san-wnd-group-err-pass");this.removeClass("x-san-wnd-group-err-conf");this.group=a;this.passwordChanged=false;this.setTitle(String.format("{0}",a.getName()));this.nameText.update(a.getName());b=a.getTargets();for(var c,d="",f=0;f<b.length;++f){c=_a(b[f],"_i1o");d+=f>0?"\n":"";d+=c.getName()}this.targetsForThisGroup=d.toLowerCase();this.targetText.setValue(d);b=a.getAllHosts();
this.radioAllClients.setValue(b);this.radioSelectedClients.setValue(!b);this.populateGroupHosts();b=a.getChapAuth();b=b==="0"?false:!!b;this.chapCheck.setValue(b);b=a.getChapSecret();if(b=this.chapSecret=b==="0"?false:!!b){this.passwordText.setValue(this.fakePsw);this.confirmText.setValue(this.fakePsw)}else{this.passwordText.setValue("");this.confirmText.setValue("")}this.center()},selectHost:function(a){this.selectedInitiator&&this.selectedInitiator.row.removeClass("ui-fwgrid-rowsel");(this.selectedInitiator=
a)&&a.row.addClass("ui-fwgrid-rowsel")},getTargets:function(){for(var a=this.parse(this.targetText.getValue()),b=[],c,d=0;d<a.length;++d){c=_a(new _1.scsitarget,"_i1o");c.putName(a[d]);b.push(c)}return b},getHosts:function(){var a=[];for(var b in this.initiators){var c=this.initiators[b];c.chbAllowed.getValue()&&a.push(c.initiator)}return a},parse:function(a){a=a.split("\n");for(var b=[],c=0;c<a.length;++c)a[c].length>0&&b.push(a[c]);return b},populateDedicatedLink:function(){var a=
this.networkManager.getNICS(),b=this.networkManager.getBONDS(),c=this.networkVLANManager.getVLANs(),d=[["","Any"]],f=this.group.getDedicatedLink(),e="";a!=_4&&a.length!=0&&_.each(a,function(h){h=_a(h,"_i27");var g=h.getName(),i=g+":"+h.getIPAddress();if(h.getState()!="down"){d.push([g,i]);if(g==f)e=g}},this);b!=_4&&b.length!=0&&_.each(b,function(h){var g=_a(h,"_i1y");h=g.getName();g=h+":"+g.getIPAddress();d.push([h,g]);if(h==f)e=h},this);c!=_4&&c.length!=
0&&_.each(c,function(h){var g=h.getName();h=g+":"+h.getIPAddress();d.push([g,h]);if(g==f)e=g},this);this.cbDedicatedLink.getStore().loadData(d);this.cbDedicatedLink.setValue(e)},reportError:function(a){_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})},_i24:{_o2:function(a,b){if(b=="iscsi-update-nics")this.isNicsLoaded=
true;else if(b=="iscsi-update-bonds")this.isBondsLoaded=true;this.isNicsLoaded&&this.isBondsLoaded&&this.isVlansLoaded&&this.populateDedicatedLink();return _5},_o3:function(a,b,c){if(c=="iscsi-update-nics"||c=="iscsi-update-bonds")if(a!=_5){a=_a(b,"_io").getLastNMLError();!a||this.reportError(a.getErrorCode())}}},INetworkVLANManagerEvents:{_o2:function(a,b){if(b=="iscsi-update-vlans")this.isVlansLoaded=true;this.isNicsLoaded&&this.isBondsLoaded&&this.isVlansLoaded&&this.populateDedicatedLink()},
_o3:function(a,b,c){if(c=="iscsi-update-vlans")if(a!=_5){a=_a(b,"_io").getLastNMLError();!a||this.reportError(a.getErrorCode())}}}});Ext.namespace("_s3");
_s3.InitiatorSettingsWindow=Ext.extend(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,fakePsw:"\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf",cls:"x-san-wnd-initiator",help:"iscsi_wnd_edit_initiator",constructor:function(a){this.title=this.titleSettings=_TR("INITIATOR_SETTINGS");this.titleCreation=_TR("INITIATOR_CREATE");this.html=this.getHtml();this.fbar=this.getFooter();_s3.InitiatorSettingsWindow.superclass.constructor.call(this,a)},initComponent:function(){_s3.InitiatorSettingsWindow.superclass.initComponent.call(this);
var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a)this.spISCSIManager=a.getISCSIManager()},getHtml:function(){return'<table cellpadding="0" cellspacing="0" class="'+this.cls+'-table"><tr><td class="'+this.cls+"-labelcell "+this.cls+'-label-name">'+_TR("NAME")+':</td><td><div id="'+(this.nameNodeId=Ext.id())+'" class="'+this.cls+'-value-name x-ellipsis"></div></td></tr><tr><td class="'+this.cls+"-labelcell "+this.cls+'-label-pass">'+_TR("PASSWORD")+':</td><td id="'+(this.passwordNodeId=
Ext.id())+'"></td></tr><tr><td class="'+this.cls+"-labelcell "+this.cls+'-label-conf">'+_TR("RE_PASSWORD")+':</td><td id="'+(this.confirmNodeId=Ext.id())+'"></td></tr></table>'},getFooter:function(){this.applyBtn=new Ext.UI.Button({text:_TR("APPLY"),width:100,acceptbtn:true});this.applyBtn.on("click",this.onApplyClick,this);var a=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});a.on("click",function(){this.hide()},this);return["->",this.applyBtn,a]},afterRender:function(a){_s3.InitiatorSettingsWindow.superclass.afterRender.call(this,
a);this.tbName=new Ext.UI.TextField({width:270,tooltipCfg:{html:_TR("INITIATOR_SETTINGS_ERRORTIP_NAME"),enabled:true}});this.passwordText=new Ext.UI.TextField({width:270,inputType:"password",tooltipCfg:{html:_TR("INITIATOR_SETTINGS_ERRORTIP_PASSWORD"),enabled:true},selectOnFocus:true,listeners:{change:function(){this.passwordChanged=true;this.confirmText.getValue()==this.fakePsw&&this.confirmText.setValue("")},scope:this}});this.confirmText=new Ext.UI.TextField({width:270,inputType:"password",tooltipCfg:{html:_TR("INITIATOR_SETTINGS_ERRORTIP_CONFIRM"),
enabled:true},selectOnFocus:true,listeners:{change:function(){this.passwordChanged=true;this.passwordText.getValue()==this.fakePsw&&this.passwordText.setValue("")},scope:this}});this.nameNode=Ext.get(this.nameNodeId);this.tbName.render(this.nameNode.parent());this.passwordText.render(this.passwordNodeId);this.confirmText.render(this.confirmNodeId)},onApplyClick:function(){if(this.validate()){var a=this.passwordText.getValue(),b=this.tbName.getValue(),c=this.host;if(!c){c=_a(new _1.scsihost,
"_i1l");c.putName(b)}if(this.passwordChanged){c.putChapSecret("1");c.putChapSecretValueBase64(_.Utils.Base64.encode(a))}else c.putChapSecret("0");this.hide();if(this.host)this.passwordChanged&&this.spISCSIManager.CommitHost(c,"san-commit-host");else this.spISCSIManager.AppendHost(c,"san-add-host")}},load:function(a){this.passwordChanged=false;this.removeClass(this.cls+"-err-name");this.removeClass(this.cls+"-err-pass");this.removeClass(this.cls+"-err-conf");if(this.host=a){this.setTitle(this.titleSettings);
this.applyBtn.setText(_TR("APPLY"));this.tbName.hide();this.nameNode.update(a.getName());this.nameNode.set({title:a.getName()});this.chapSecret=a.getChapSecret();if(this.chapSecret=="1"){this.passwordText.setValue(this.fakePsw);this.confirmText.setValue(this.fakePsw)}else{this.passwordText.setValue("");this.confirmText.setValue("")}}else{this.setTitle(this.titleCreation);this.applyBtn.setText(_TR("CREATE"));this.tbName.show();this.nameNode.update("");this.nameNode.set({title:""});this.tbName.setValue("");
this.passwordText.setValue("");this.confirmText.setValue("")}},validate:function(){var a=false;this.removeClass(this.cls+"-err-name");this.removeClass(this.cls+"-err-pass");this.removeClass(this.cls+"-err-conf");var b=this.tbName.getValue(),c=this.passwordText.getValue(),d=this.confirmText.getValue();if(!this.host){if(!_s10.Utils.isValidIQN(b)){this.addClass(this.cls+"-err-name");a=true}b=b.toLowerCase();var f=this.spISCSIManager.getHosts();Ext.each(f,function(e){e=_a(e,"_i1l");
if(e.getName().toLowerCase()==b){this.addClass(this.cls+"-err-name");a=true;return false}},this)}if(c&&c!=this.fakePsw&&(c.length<12||c.length>16)){this.addClass(this.cls+"-err-pass");a=true}if(c!=d){this.addClass(this.cls+"-err-conf");a=true}return!a}});Ext.namespace("_s3");
_s3.SelectGroupWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,help:"iscsi_wnd_select_group",constructor:function(){this.title=_TR("SELECT_LUNGROUP");this.html=this.getHtml();this.fbar=this.getFooter();_s3.SelectGroupWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s3.SelectGroupWindow.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");if(a){this.spShareManager=a.getShareManager();this.spISCSIManager=a.getISCSIManager()}this.on("show",function(){this.load();this.center()},this)},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-san-selectwnd-lbl">'+_TR("ASSIGN_TO")+':</td><td id="'+(this.nameNodeId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("APPLY"),width:100,acceptbtn:true});a.on("click",this.onAddClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),
width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(){_s3.SelectGroupWindow.superclass.afterRender.apply(this,arguments);this.assignTo=new Ext.UI.ComboBox({width:310,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[]}),valueField:"id",displayField:"text",value:null});this.assignTo.render(this.nameNodeId)},onAddClick:function(){this.lun.putLUNGroupName(this.assignTo.getValue().getName());this.spShareManager.commitLUN(this.lun,
"san-commit-lun");this.hide()},setLUN:function(a){this.lun=a},load:function(){for(var a=this.spISCSIManager.getLUNGroups(),b=[],c,d=0;d<a.length;++d){c=_a(a[d],"_i1k");b.push([c,c.getName()])}this.assignTo.getStore().loadData(b);this.assignTo.setValue(b[0][0])}});
_._2("_","_._3","_._3.Security");_._3.Security.SecurityTab="Security.SecurityTab";_._3.Security.UsersTab="Security.SecurityUsersTab";_._3.Security.GroupsTab="Security.SecurityGroupsTab";_._3.Security.CloudUsersTab="Security.SecurityCloudUsersTab";_._3.Security.AuthenticationTab="Security.AuthenticationTab";_._3.Security.DefaultUserTab="Security.DefaultUserTab";_._3.Security.UsersPanel="Security.UsersPanel";
_._3.Security.GroupsPanel="Security.GroupsPanel";_._3.Security.CloudUsersPanel="Security.CloudUsersPanel";_._3.Security.AuthenticationPanel="Security.AuthenticationPanel";_._3.Security.DefaultUserPanel="Security.DefaultUserPanel";_._3.Security.PromptWindow="Security.PromptWindow";_._3.Security.SshPromptWindow="Security.SshPromptWindow";_._2("_s4");
_s4.SecurityTab=_._1(_._3.Security.SecurityTab,_s0.TabItem,ISystemFrameTab,_i4,{card:true,help:"security_tab",constructor:function(){_s4.SecurityTab.superclass.constructor.apply(this,arguments)},ISystemFrameTab:{getTitle:function(){return _TR("USERS_GROUPS")},getCfg:function(){return{id:"accounts-tab"}}}});_s0.RegisterTab(_._3.System.Frame,_._3.Security.SecurityTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s4");
_s4.BaseTab=_._1(_s0.TabItem,ISystemFrameTab,_i2y,_i3v,{constructor:function(){_s4.BaseTab.superclass.constructor.apply(this,arguments);this.on("tabinitialize",this.oninitialized,this)},initComponent:function(){_s4.BaseTab.superclass.initComponent.apply(this,arguments);this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td  id="'+(this.buttonsId=
Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this)}},oninitialized:function(){this.refreshBtn=new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',
_TR("REFRESH")),renderTo:this.buttonsId});this.refreshBtn.el.on("click",this.refresh,this)},refresh:function(){_.each(_a(this,"IPanelList").getPanelItems(),function(a){a.refresh()},this)},_i3v:{_o2:function(a,b){if(b=="security-update-zfsvolumes"||b=="sync-update-zfsvolumes"){a=this.zfsVolumesManager.getActiveVolumes();this.novolumes=a==_4||a.length==0}return _5}}});_._2("_s4");
_s4.UsersTab=_._1(_._3.Security.UsersTab,_s4.BaseTab,{preventscroll:true,help:"security_tab_users",oninitialized:function(){_s4.UsersTab.superclass.oninitialized.apply(this,arguments);_a(this,"IPanelList").addPanel(_a(_7(_._3.Security.UsersPanel),"IPanelItem"));this.on("tabactivate",this.ontabactivate,this)},ontabactivate:function(){this.refresh()},ISystemFrameTab:{getTitle:function(){return _TR("USERS")},
getCfg:function(){return{id:"accounts-users-tab",cls:"x-sec-users-btn"}}},onResize:function(a,b,c,d){_s4.UsersTab.superclass.onResize.call(this,a,b,c,d);this.mask&&this.resizeMask()}});_s0.RegisterTab(_._3.Security.SecurityTab,_._3.Security.UsersTab,"ISystemFrame","ISystemFrameTab");_._2("_s4");
_s4.GroupsTab=_._1(_._3.Security.GroupsTab,_s4.BaseTab,{preventscroll:true,help:"security_tab_groups",oninitialized:function(){_s4.GroupsTab.superclass.oninitialized.apply(this,arguments);_a(this,"IPanelList").addPanel(_a(_7(_._3.Security.GroupsPanel),"IPanelItem"));this.refresh()},ISystemFrameTab:{getTitle:function(){return _TR("GROUPS")},getCfg:function(){return{id:"accounts-groups-tab",cls:"x-sec-groups-btn"}}}});
_s0.RegisterTab(_._3.Security.SecurityTab,_._3.Security.GroupsTab,"ISystemFrame","ISystemFrameTab");_._2("_s4");
_s4.CloudUsersTab=_._1(_._3.Security.CloudUsersTab,_s4.BaseTab,{help:"security_tab_cloud_users",oninitialized:function(){_s4.CloudUsersTab.superclass.oninitialized.apply(this,arguments);_a(this,"IPanelList").addPanel(_a(_7(_._3.Security.CloudUsersPanel),"IPanelItem"));this.refresh()},ISystemFrameTab:{getTitle:function(){return _TR("CLOUD_USERS")},getCfg:function(){return{id:"accounts-cloudusers-tab",cls:"x-sec-cloudusers-btn"}}}});
_s0.RegisterTab(_._3.Security.SecurityTab,_._3.Security.CloudUsersTab,"ISystemFrame","ISystemFrameTab");_._2("_s4");
_s4.AuthenticationTab=_._1(_._3.Security.AuthenticationTab,_s4.BaseTab,{help:"security_tab_auth",oninitialized:function(){_s4.AuthenticationTab.superclass.oninitialized.apply(this,arguments);_a(this,"IPanelList").addPanel(_a(_7(_._3.Security.AuthenticationPanel),"IPanelItem"));this.refresh()},ISystemFrameTab:{getTitle:function(){return _TR("AUTHENTICATION")},getCfg:function(){return{id:"accounts-authentication-tab",
cls:"x-sec-authentication-btn"}}}});_s0.RegisterTab(_._3.Security.SecurityTab,_._3.Security.AuthenticationTab,"ISystemFrame","ISystemFrameTab");_._2("_s4");
_s4.DefaultUserTab=_._1(_._3.Security.DefaultUserTab,_s4.BaseTab,{help:"security_tab_default_user",oninitialized:function(){_s4.UsersTab.superclass.oninitialized.apply(this,arguments);_a(this,"IPanelList").addPanel(_a(_7(_._3.Security.DefaultUserPanel),"IPanelItem"));this.refresh()},ISystemFrameTab:{getTitle:function(){return _TR("DEFAULT_USER")},getCfg:function(){return{id:"accounts-defaultuser-tab",cls:"x-sec-users-btn"}}}});
_s0.RegisterTab(_._3.Security.SecurityTab,_._3.Security.DefaultUserTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s4");
_s4.UsersPanel=_._1(_._3.Security.UsersPanel,_s0.BasePanel,IPanelItem,_i4,_i3b,{panelCls:"x-security-upanel",help:"security_panel_users",constructor:function(){this.title=_TR("USERS");this.cls="x-security-upanel";this.adsmode=false;this.page=1;this.pagesize=20;this.addEvents("updated");this.userReqHash={users:[],reqcount:1};this.selectedUserPropTab=0;_s4.UsersPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){_s4.UsersPanel.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);var b=a.getSSHKeyManager();_a(b,"_i1").Advise(this);this.spAlertsManager=a.getSystemManager().getAlertsManager();_a(this.spAlertsManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();
_a(this.spShareManager,"_i1").Advise(this);this.spSystemManager=a.getSystemManager();_a(this.spSystemManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spSecurityManager.UpdateLoginUserName("system-update-login-user-name")}this.on("beforecollapse",function(){return false})},onReady:function(){this.parentTab=_a(this,"IPanelItem").getParentTabItem();this.topBar=new Ext.Component({cls:this.panelCls+
"-bar",renderTo:this.content});this.adsBar=new Ext.Component({cls:this.panelCls+"-adsbar",hidden:true,renderTo:this.topBar.el});this.addButton=new Ext.UI.Button({cls:this.panelCls+"-add",width:125,expandToText:true,text:_TR("NEW_USER"),acceptbtn:true,hidden:true,handler:this.onAddClicked,scope:this,renderTo:this.topBar.el});this.renderToolbarAD(this.adsBar.el);this.createMenu()},getUGrid:function(){return new _s4.UsersGrid},getADGrid:function(){return new _s4.ADUsersGrid},
renderToolbarAD:function(a){this.pageEdit=new Ext.UI.TextField({width:60,maskRe:/^[0-9]*$/,enableKeyEvents:true,value:"1",listeners:{specialkey:this.onPageSpecialKeyPress,change:this.onPageChangeClick,scope:this}});var b=Ext.id(),c=Ext.id(),d=Ext.id(),f=Ext.id(),e=Ext.id(),g=Ext.id();new Ext.Component({cls:"x-sec-pager",hidden:false,renderTo:a,html:String.format('<table cellpadding="0" cellspacing="0" border="0"><tr><td><div id="{0}" class="x-sec-pager-first x-sec-pager-disable"></div></td><td><div id="{1}" class="x-sec-pager-left x-sec-pager-disable"></div></td><td class="x-sec-pager-text">{2}</td><td id="{3}"></td><td class="x-sec-pager-text">{4}&nbsp;<span id="{5}">1</span></td><td><div id="{6}" class="x-sec-pager-right x-sec-pager-disable"></div></td><td><div id="{7}" class="x-sec-pager-last x-sec-pager-disable"></div></td></tr></table>',
b,c,_TR("PAGE"),e,_TR("OF"),g,d,f),listeners:{scope:this,afterrender:function(){this.firstBtn=Ext.get(b);this.firstBtn.on("click",this.onFirstClick,this);this.prevBtn=Ext.get(c);this.prevBtn.on("click",this.onPrevClick,this);this.pageEdit.render(e);this.pageCount=Ext.get(g);this.nextBtn=Ext.get(d);this.nextBtn.on("click",this.onNextClick,this);this.lastBtn=Ext.get(f);this.lastBtn.on("click",this.onLastClick,this)}}});new Ext.UI.RoundButton({cls:"x-frontview-btn-search x-sec-search-btn",renderTo:a,
listeners:{click:this.onADSearchClick,scope:this}});this.tfADSearch=new Ext.UI.TextField({cls:"x-sec-search-field",width:150,enableKeyEvents:true,renderTo:a,listeners:{specialkey:this.onADSpecialKeyPress,scope:this}})},onSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ESC:this.tfSearch.setValue("");return false}},onADSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ESC:this.tfADSearch.setValue("");return false;case b.ENTER:this.queryRecords(this.tfADSearch.getValue(),1);return false}},
updatePagerButtons:function(){this.firstBtn.removeClass("x-sec-pager-disable");this.prevBtn.removeClass("x-sec-pager-disable");this.nextBtn.removeClass("x-sec-pager-disable");this.lastBtn.removeClass("x-sec-pager-disable");if(this.page==1){this.firstBtn.addClass("x-sec-pager-disable");this.prevBtn.addClass("x-sec-pager-disable")}if(this.page==this.totalpages){this.nextBtn.addClass("x-sec-pager-disable");this.lastBtn.addClass("x-sec-pager-disable")}},onPageSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ENTER:a=
parseInt(this.pageEdit.getValue());if(a>this.totalpages)a=this.totalpages;a!=this.page&&this.queryRecords(this.tfADSearch.getValue(),a);return false}},onADSearchClick:function(){this.queryRecords(this.tfADSearch.getValue(),1)},onPageChangeClick:function(){},onSearchClick:function(a,b){if(b)if(b.stopEvent)b.stopEvent();else return;var c=this.tfSearch.getValue();this.grid.clearFilter();c&&this.grid.filterBy(function(d){d=_a(d,this.getIItem()).getName();return(new RegExp(RegExp.escape(c),"gi")).test(d)},
this);this.grid.selectFirstRow()},onFirstClick:function(){this.page!=1&&this.queryRecords(this.tfADSearch.getValue(),1)},onPrevClick:function(){this.page!=1&&this.queryRecords(this.tfADSearch.getValue(),this.page-1)},onNextClick:function(){this.page<this.totalpages&&this.queryRecords(this.tfADSearch.getValue(),this.page+1)},onLastClick:function(){this.page!=this.totalpages&&this.queryRecords(this.tfADSearch.getValue(),this.totalpages)},updateContent:function(){this.grid&&this.grid.hide();if(this.adsmode){if(!this.adgrid){this.adgrid=
this.getADGrid();this.adgrid.on("selectRow",this.showMenu,this);this.adgrid.parentTabItem=this;this.adgrid.render(this.content)}this.toolbar=this.toolbarAD;this.grid=this.adgrid}else{if(!this.ugrid){this.ugrid=this.getUGrid();this.ugrid.on("selectRow",this.showMenu,this);this.ugrid.parentTabItem=this;this.ugrid.render(this.content)}this.toolbar=this.toolbaru;this.grid=this.ugrid}this.adsBar.setVisible(this.adsmode);this.addButton.setVisible(!this.adsmode);!this.grid||this.grid.show()},populateUsers:function(a){if(a.reqcount==
0){this.grid.populateRows(a.users);this.fireEvent("updated",this.grid)}},onAddClicked:function(){this.propWindow||(this.propWindow=new _s4.UserWindow);this.propWindow.populate(null,this.adsmode);this.propWindow.show()},createMenu:function(){this.itemLock=new Ext.menu.Item({text:_TR("DISABLE"),icon:false,ctCls:"x-security-icon-user",commandName:"lock"});this.itemDelete=new Ext.menu.Item({text:_TR("DELETE"),icon:false,ctCls:"x-frontview-icon-delete",commandName:"delete"});this.itemSettings=
new Ext.menu.Item({text:_TR("SETTINGS"),icon:false,ctCls:"x-frontview-icon-settings",commandName:"settings"});this.itemMenu=new Ext.UI.Menu({cls:"x-security-menu",items:[this.itemLock,this.itemDelete,this.itemSettings],anchorPosition:"top",listeners:{itemclick:function(a){switch(a.commandName){case "lock":this.onLockClicked();break;case "delete":this.onRemoveClicked();break;case "settings":this.onPropertiesClicked();break}},scope:this}})},showMenu:function(a,b){var c=_a(a.entity,"_i2z"),d=
c.getIsLocked()=="1";this.itemMenu.item=c;this.itemLock.show();this.itemDelete.show();this.itemSettings.removeClass("x-security-icon-margin-settings");if(c.getName()=="admin"){this.itemDelete.hide();this.itemSettings.addClass("x-security-icon-margin-settings")}if(this.adsmode){this.itemLock.hide();this.itemDelete.hide();this.itemSettings.addClass("x-security-icon-margin-settings")}if(c.getName()==this.spSecurityManager.getLoginUserName()){this.itemDelete.hide();this.itemLock.hide();this.itemSettings.addClass("x-security-icon-margin-settings")}this.itemMenu.show(a.tr);
d?Ext.get(Ext.get(this.itemLock.id).query(".x-menu-item-text")[0]).update(_TR("ENABLE")):Ext.get(Ext.get(this.itemLock.id).query(".x-menu-item-text")[0]).update(_TR("DISABLE"));b.stopEvent();return false},onLockClicked:function(){var a=this.grid.getSelected();if(a){a=_a(a.entity,"_i2z");a.putIsLocked(a.getIsLocked()=="1"?"0":"1");this.spScrManager.commitUser("security-commit-user",a)}},onRemoveClicked:function(){var a=this.grid.getSelected();if(a){a=_a(a.entity,"_i2z");Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),
msg:_TR("CONFIRM_DELETION_USER"),fn:function(b){b=="yes"&&this.spScrManager.removeUser(a,"security-remove-user")},scope:this})}},onPropertiesClicked:function(){this.showProperties()},showProperties:function(){this.propWindow||(this.propWindow=new _s4.UserWindow);this.propWindow.populate(_a(this.grid.getSelected().entity,"_i2z"),this.adsmode);Ext.isNumber(this.selectedUserPropTab)&&this.propWindow.setAcctiveTab(this.selectedUserPropTab);this.propWindow.show()},showAdminProperties:function(a){this.un("updated",
this.showAdminProperties,this);if(this.grid){a=this.grid.getByName("admin");_.each(a,function(b){var c=_a(b.entity,"_i2z");if(c&&c.getName()=="admin"){this.grid.select(b);this.showProperties()}},this)}else{this.selectedUserPropTab=a;this.on("updated",this.showAdminProperties,this)}},showUserProperties:function(a){this.un("updated",this.showUserProperties,this);if(this.grid){this.grid.selectFirstRow();this.showProperties()}else{this.selectedUserPropTab=a;this.on("updated",this.showUserProperties,
this)}},showLoginUserProperties:function(a){this.un("updated",this.showLoginUserProperties,this);if(this.grid){loginUserName=this.spSecurityManager.getLoginUserName();a=this.grid.getByName(loginUserName);_.each(a,function(b){var c=_a(b.entity,"_i2z");if(c&&c.getName()==loginUserName){this.grid.select(b);this.showProperties()}},this)}else{this.selectedUserPropTab=a;this.on("updated",this.showLoginUserProperties,this)}},showError:function(a){if(a=_a(a,"_io").getLastNMLError()){a=
a.getErrorCode();switch(a){case "2013020801":Ext.UI.MessageBox.warning({title:_TR("USERS"),msg:_TR(a)});break;default:_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},queryRecords:function(a,b){this.page=b;this.userReqHash={users:[],reqcount:1};!a||a.length===0?this.spScrManager.queryUsersWithAdmin(a,(b-1)*this.pagesize,this.pagesize,
"security-query-users"):this.spScrManager.queryUsers(a,(b-1)*this.pagesize,this.pagesize,"security-query-users")},innerRefresh:function(){this.spScrManager.updateUsersWithAdmin("sync-update-users",true,false)},isVisible:function(){var a=_s4.UsersPanel.superclass.isVisible.call(this);if(a)a=this.getWidth()>0&&this.getHeight()>0;return a},IPanelItem:{refresh:function(){this.tfADSearch.setValue("");this.page=1;this.spScrManager.updateADSMode("security-update-usecurity");var a=_a(this.spAlertsManager.getConfig(),
"_i0");if(!a||a.getServer()===_4||a.getServer()==="")this.spAlertsManager.updateConfig("system-alerts-update-config");this.spShareManager.updateShares("shares-volumes-update-shares");return _5}},_i2y:{_o1:function(a,b){if(!this.rendered)return _5;switch(b){case "security-update-users":case "security-update-ugroups":case "security-add-user":case "security-commit-user":case "security-remove-user":case "security-update-usecurity":case "security-query-users":case "security-commit-user-win":this.parentTab.mask.show();
break;case "sync-update-users":this.userReqHash={users:[],reqcount:1};break}return _5},_o2:function(a,b){if(!this.rendered)return _5;switch(b){case "security-query-users":this.pageEdit.setRawValue(this.page);this.totalpages=Math.ceil(this.spScrManager.getQueryUsersCount()/this.pagesize);if(!this.totalpages)this.totalpages=1;this.pageCount.update(this.totalpages);this.updatePagerButtons();this.userReqHash.reqcount-=1;a=this.spScrManager.getQueryUsers();if(a!==_4)this.userReqHash.users=
this.userReqHash.users.concat(a);this.populateUsers(this.userReqHash);break;case "security-update-users":case "sync-update-users":this.userReqHash.reqcount-=1;a=this.spScrManager.getUsers();a!==_4&&_.each(a,function(c){c=_a(c,"_i2z");if(c.getName()==="admin")this.userReqHash.users.unshift(c);else!this.adsmode&&c.getName()!=="admin"&&this.userReqHash.users.push(c)},this);this.populateUsers(this.userReqHash);break;case "security-add-user":case "security-commit-user":case "security-commit-user-win":this.innerRefresh();
break;case "security-remove-user":this.innerRefresh();this.spShareManager.updateShares("sync-update-shares");break;case "sync-update-security":case "security-update-usecurity":this.adsmode=this.spScrManager.getADSMode()=="ads";this.updateContent();break}return _5},_o3:function(a,b,c){if(!this.rendered)return _5;if(a==_5)if(c=="security-update-users"||c=="sync-update-users"||c=="security-query-users")this.parentTab.mask.hide();else if(c=="security-update-usecurity"||c=="sync-update-security")if(this.adsmode){this.userReqHash=
{users:[],reqcount:1};this.spScrManager.queryUsersWithAdmin("",0,this.pagesize,"security-query-users")}else{this.zfsVolumesManager.UpdateVolumes("security-update-zfsvolumes");this.spScrManager.updateGroups("security-update-ugroups")}else if(c=="security-update-ugroups")this.spScrManager.UpdateDefaultUserProfile("security-update-udefuser");else{if(c=="security-update-udefuser"){this.userReqHash={users:[],reqcount:1};this.spScrManager.updateUsersWithAdmin("security-update-users",true,false)}}else{if(c==
"security-add-user"||c=="security-commit-user"||c=="security-commit-user-win"||c=="security-remove-user")this.spScrManager.updateUsersWithAdmin("sync-update-users",true,false);else if(c=="security-update-users"||c=="security-update-ugroups"||c=="sync-update-users"||c=="security-query-users"||c=="security-update-usecurity")this.parentTab.mask.hide();if(c=="security-add-user"||c=="security-commit-user"||c=="security-remove-user"||c=="security-update-users"||c=="security-update-ugroups"||c=="sync-update-users"||
c=="security-update-usecurity")this.showError(b)}return _5}},ISSHManagerEvents:{_o1:function(a,b){switch(b){case "security-add-sshkeys":case "security-edit-sshkeys":case "security-delete-sshkeys":case "security-update-sshkeys":this.parentTab.mask.show();break}return _5},_o3:function(a,b,c){switch(c){case "security-add-sshkeys":case "security-edit-sshkeys":case "security-delete-sshkeys":case "security-update-sshkeys":this.parentTab.mask.hide();break}return _5}},_i3b:{_o2:function(){return _5}},
_i3v:{_o2:function(a,b){if(b=="security-update-zfsvolumes"||b=="sync-update-zfsvolumes"){a=this.zfsVolumesManager.getActiveVolumes();this.novolumes=a==_4||a.length==0}return _5}}});Ext.namespace("_s4");
_s4.CloudUsersPanel=_._1(_._3.Security.CloudUsersPanel,_s0.BasePanel,IPanelItem,_i4,_i45,_i2y,{expanded:true,updatesCount:0,help:"security_panel_cloud_users",constructor:function(){this.title=_TR("CLOUD_USERS");_s4.CloudUsersPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spSecurityManager=a.getSecurityManager();
_a(this.spSecurityManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);_s4.CloudUsersPanel.superclass.initComponent.apply(this,arguments);this.on("beforecollapse",function(){return false})},onReady:function(){this.parentTab=_a(this,"IPanelItem").getParentTabItem();this.content.update('<div class="x-security-upanel-bar" id="'+(this.btnCntId=Ext.id())+'"></div><div style="margin-right: 15px;"><table style="width: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-header"><tr><td style="width: 40%;"><div class="x-cloud-users-header">'+
_TR("EMAIL")+'</div></td><td style="width: 30%;"><div>'+_TR("NAME")+'</div></td><td style="max-width: 0px; display: none;"><div>'+_TR("TYPE")+'</div></td></tr></table><div id="'+(this.dataCntId=Ext.id())+'" class="x-cloud-users-data"></div></div>');this.usersView=new Ext.DataView({singleSelect:true,selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["email","name","type"]}),blockRefresh:true,scrollOffset:0,itemSelector:"table",tpl:new Ext.XTemplate('<tpl for="."><table style="width: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-row"><tr><td style="width: 40%;"><div class="x-cloud-users-{type}row x-ellipsis">{email}</div></td><td style="width: 30%;"><div class="x-ellipsis">{name}</div></td><td style="max-width: 0px; display: none;"><div class="x-ellipsis">ReadyCLOUD</div></td></tr></table></tpl>'),
listeners:{scope:this,selectionchange:this.onSelectUser}});this.usersView.render(this.dataCntId);this.removeButton=new Ext.UI.Button({cls:"x-cloud-users-remove",width:125,expandToText:true,text:_TR("USER_REMOVE"),acceptbtn:true,handler:this.onRemoveUser,scope:this,renderTo:this.btnCntId});this.addButton=new Ext.UI.Button({cls:"x-cloud-users-invite",width:125,expandToText:true,text:_TR("INVITE_CLOUD_USER"),acceptbtn:true,handler:this.onAddUser,scope:this,renderTo:this.btnCntId})},refresh:function(){this.removeButton.disable();
this.rcOwnerUpdated=this.rcUsersUpdated=false;this.spSecurityManager.UpdateRCUsers("cloud-users-update-rcusers");this.spSysManager.updateCloudOwner("cloud-users-update-rcowner")},populate:function(){if(this.rcUsersUpdated&&this.rcOwnerUpdated){var a=[],b=_a(this.spSysManager.getCloudOwner(),"_i2z"),c=this.spSecurityManager.getRCUsers(),d;b&&b!=_4&&b.getName()!=_4&&b.getName().length>0&&a.push({name:b.getName(),email:b.getEmail(),type:"owner"});for(b=0;b<c.length;++b){d=_a(c[b],
"_i2z");a.push({name:d.getName(),email:d.getEmail(),type:d.getIsLocked()=="1"?"m":"cloud"})}a=a.sort(function(f,e){if(f.type=="owner"&&e.type!="owner")return-1;if(f.type!="owner"&&e.type=="owner")return 1;if(f.type=="cloud"&&e.type!="cloud")return-1;if(f.type!="cloud"&&e.type=="cloud")return 1;if(f.email<e.email)return-1;if(f.email>e.email)return 1;return 0});this.usersView.getStore().loadData(a);this.usersView.refresh()}},showTabProgress:function(){this.parentTab.mask.show();++this.updatesCount},
hideTabProgress:function(){--this.updatesCount;this.updatesCount||this.parentTab.mask.hide()},onRemoveUser:function(){Ext.UI.MessageBox.warning({title:_TR("REMOVE_REMOTE_ACCESS_USER"),msg:'<span class="x-cloud-panel-msgwnd">'+String.format(_TR("REMOVE_REMOTE_ACCESS_USER_THROUGH_READYCLOUD"),document.links_cloud)+"</span>"})},onAddUser:function(){Ext.UI.MessageBox.show({title:_TR("ADD_REMOTE_ACCESS_USER"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,width:400,msg:'<span class="x-cloud-panel-msgwnd">'+
String.format(_TR("ADD_REMOTE_ACCESS_USER_THROUGH_READYCLOUD"),document.links_cloud)+"</span>"})},onSelectUser:function(a,b){this.removeButton.setDisabled(!b.length)},IPanelItem:{refresh:function(){this.refresh()}},_i2y:{_o1:function(a,b){if(!this.rendered)return _5;b=="cloud-users-update-rcusers"&&this.showTabProgress();return _5},_o2:function(a,b){if(!this.rendered)return _5;if(b=="cloud-users-update-rcusers"){this.rcUsersUpdated=true;this.populate()}return _5},
_o3:function(a,b,c){if(!this.rendered)return _5;if(c=="cloud-users-update-rcusers")this.hideTabProgress();else c=="sync-update-security"&&this.refresh();return _5}},_i45:{_o1:function(a,b){if(!this.rendered)return _5;b=="cloud-users-update-rcowner"&&this.showTabProgress();return _5},_o2:function(a,b){if(!this.rendered)return _5;if(b=="cloud-users-update-rcowner"||b=="cloud-update-devowner"){this.rcOwnerUpdated=true;this.populate()}return _5},_o3:function(a,
b,c){if(!this.rendered)return _5;if(c=="cloud-users-update-rcowner")this.hideTabProgress();else if(c=="cloudopt-commit-devowner"||c=="cloudopt-remove-devowner")this.refresh();return _5}}});Ext.namespace("_s4");
_s4.GroupsPanel=_._1(_._3.Security.GroupsPanel,_s0.BasePanel,IPanelItem,_i4,{panelCls:"x-security-upanel",help:"security_panel_groups",constructor:function(){this.title=_TR("GROUPS");this.cls="x-security-upanel";this.adsmode=false;this.page=1;this.pagesize=20;_s4.GroupsPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){_s4.GroupsPanel.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");if(a){this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this)}this.on("beforecollapse",function(){return false})},onReady:function(){this.parentTab=_a(this,"IPanelItem").getParentTabItem();this.topBar=new Ext.Component({cls:this.panelCls+
"-bar",renderTo:this.content});this.adsBar=new Ext.Component({cls:this.panelCls+"-adsbar",hidden:true,renderTo:this.topBar.el});this.addButton=new Ext.UI.Button({cls:this.panelCls+"-addgroup",width:125,expandToText:true,text:_TR("NEW_GROUP"),acceptbtn:true,hidden:true,handler:this.onAddClicked,scope:this,renderTo:this.topBar.el});this.renderToolbarAD(this.adsBar.el);this.createMenu()},getGGrid:function(){return new _s4.GroupsGrid},getADGrid:function(){return new _s4.ADGroupsGrid},
renderToolbarAD:function(a){this.pageEdit=new Ext.UI.TextField({width:60,maskRe:/^[0-9]*$/,enableKeyEvents:true,value:"1",listeners:{specialkey:this.onPageSpecialKeyPress,change:this.onPageChangeClick,scope:this}});var b=Ext.id(),c=Ext.id(),d=Ext.id(),f=Ext.id(),e=Ext.id(),g=Ext.id();new Ext.Component({cls:"x-sec-pager",hidden:false,renderTo:a,html:String.format('<table cellpadding="0" cellspacing="0" border="0"><tr><td><div id="{0}" class="x-sec-pager-first x-sec-pager-disable"></div></td><td><div id="{1}" class="x-sec-pager-left x-sec-pager-disable"></div></td><td class="x-sec-pager-text">{2}</td><td id="{3}"></td><td class="x-sec-pager-text">{4}&nbsp;<span id="{5}">1</span></td><td><div id="{6}" class="x-sec-pager-right x-sec-pager-disable"></div></td><td><div id="{7}" class="x-sec-pager-last x-sec-pager-disable"></div></td></tr></table>',
b,c,_TR("PAGE"),e,_TR("OF"),g,d,f),listeners:{scope:this,afterrender:function(){this.firstBtn=Ext.get(b);this.firstBtn.on("click",this.onFirstClick,this);this.prevBtn=Ext.get(c);this.prevBtn.on("click",this.onPrevClick,this);this.pageEdit.render(e);this.pageCount=Ext.get(g);this.nextBtn=Ext.get(d);this.nextBtn.on("click",this.onNextClick,this);this.lastBtn=Ext.get(f);this.lastBtn.on("click",this.onLastClick,this)}}});new Ext.UI.RoundButton({cls:"x-frontview-btn-search x-sec-search-btn",renderTo:a,
listeners:{click:this.onADSearchClick,scope:this}});this.tfADSearch=new Ext.UI.TextField({cls:"x-sec-search-field",width:150,enableKeyEvents:true,renderTo:a,listeners:{specialkey:this.onADSpecialKeyPress,scope:this}})},onSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ESC:this.tfSearch.setValue("");return false}},onADSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ESC:this.tfADSearch.setValue("");return false;case b.ENTER:this.queryRecords(this.tfADSearch.getValue(),1);return false}},
updatePagerButtons:function(){this.firstBtn.removeClass("x-sec-pager-disable");this.prevBtn.removeClass("x-sec-pager-disable");this.nextBtn.removeClass("x-sec-pager-disable");this.lastBtn.removeClass("x-sec-pager-disable");if(this.page==1){this.firstBtn.addClass("x-sec-pager-disable");this.prevBtn.addClass("x-sec-pager-disable")}if(this.page==this.totalpages){this.nextBtn.addClass("x-sec-pager-disable");this.lastBtn.addClass("x-sec-pager-disable")}},onPageSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ENTER:a=
parseInt(this.pageEdit.getValue());if(a>this.totalpages)a=this.totalpages;a!=this.page&&this.queryRecords(this.tfADSearch.getValue(),a);return false}},onADSearchClick:function(){this.queryRecords(this.tfADSearch.getValue(),1)},onPageChangeClick:function(){},onSearchClick:function(a,b){if(b)if(b.stopEvent)b.stopEvent();else return;var c=this.tfSearch.getValue();this.grid.clearFilter();c&&this.grid.filterBy(function(d){d=_a(d,this.getIItem()).getName();return(new RegExp(RegExp.escape(c),"gi")).test(d)},
this);this.grid.selectFirstRow()},onFirstClick:function(){this.page!=1&&this.queryRecords(this.tfADSearch.getValue(),1)},onPrevClick:function(){this.page!=1&&this.queryRecords(this.tfADSearch.getValue(),this.page-1)},onNextClick:function(){this.page<this.totalpages&&this.queryRecords(this.tfADSearch.getValue(),this.page+1)},onLastClick:function(){this.page!=this.totalpages&&this.queryRecords(this.tfADSearch.getValue(),this.totalpages)},updateContent:function(){this.grid&&this.grid.hide();if(this.adsmode){if(!this.adgrid){this.adgrid=
this.getADGrid();this.adgrid.parentTabItem=this;this.adgrid.render(this.content)}this.toolbar=this.toolbarAD;this.grid=this.adgrid}else{if(!this.ggrid){this.ggrid=this.getGGrid();this.ggrid.on("selectRow",this.showMenu,this);this.ggrid.parentTabItem=this;this.ggrid.render(this.content)}this.toolbar=this.toolbaru;this.grid=this.ggrid}this.adsBar.setVisible(this.adsmode);this.addButton.setVisible(!this.adsmode);!this.grid||this.grid.show()},populateGroups:function(){var a=this.adsmode?this.spScrManager.getQueryGroups():
this.spScrManager.getGroups();a=a!=_4?a:[];this.grid.populateRows(a);if(a.length==0&&!this.adsmode)if(this.askShown!=true&&this.isVisible()){Ext.UI.MessageBox.confirm({title:_TR("SEC_TAB_GROUP_NO"),msg:String.format("{0}",_TR("QUEST_CREATE_ONE")),fn:function(b){b=="yes"&&this.onAddClicked()},scope:this});this.askShown=true}},onAddClicked:function(){this.addWindow||(this.addWindow=new _s4.GroupsAddWindow(this.spScrManager));this.addWindow.show()},createMenu:function(){this.itemDelete=
new Ext.menu.Item({text:_TR("DELETE"),icon:false,ctCls:"x-frontview-icon-delete",commandName:"delete"});this.itemSettings=new Ext.menu.Item({text:_TR("SETTINGS"),icon:false,ctCls:"x-frontview-icon-settings",commandName:"settings"});this.itemMenu=new Ext.UI.Menu({cls:"x-security-menu",items:[this.itemDelete,this.itemSettings],anchorPosition:"top",listeners:{itemclick:function(a){switch(a.commandName){case "delete":this.onRemoveClicked();break;case "settings":this.onPropertiesClicked();break}},scope:this}})},
showMenu:function(a,b){this.itemMenu.item=_a(a.entity,"_i2v");this.itemDelete.setVisible(this.itemMenu.item.getName()!="admin");this.itemMenu.show(a.tr);b.stopEvent();return false},onRemoveClicked:function(){this.rowsForRemoval=[this.grid.getSelected()];var a="";if(this.rowsForRemoval.length!=0){this.groupsForRemoval=[];_.each(this.rowsForRemoval,function(b){b=_a(b.entity,"_i2v");a+=(a?", ":"")+b.getName();this.groupsForRemoval.push(b)},this);this.spScrManager.getGroups()!=_4&&
this.spScrManager.getGroups().length==this.rowsForRemoval.length?Ext.UI.MessageBox.error({title:_TR("SECURITY"),msg:_TR("SEC_ONE_GROUP")}):Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("WARN_DELETION"),a),fn:function(b){b=="yes"&&this.removeGroups()},scope:this})}},removeGroups:function(){if(this.groupsForRemoval.length)this.spScrManager.removeGroup(this.groupsForRemoval.shift(),"security-remove-group");else{this.refresh("sync-update-groups");this.spShareManager.updateShares("sync-update-shares")}},
onPropertiesClicked:function(){this.propWindow||(this.propWindow=new _s4.GroupWindow);this.propWindow.show();this.propWindow.populate(_a(this.grid.getSelected().entity,"_i2v"),this.adsmode)},showError:function(a){if(a=_a(a,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}},
queryRecords:function(a,b){this.page=b;this.spScrManager.queryGroups(a,(b-1)*this.pagesize,this.pagesize,"security-query-groups")},refresh:function(){this.page=1;this.spScrManager.updateADSMode("security-update-gsecurity")},IPanelItem:{refresh:function(){this.tfADSearch.setValue("");this.page=1;this.spScrManager.updateADSMode("security-update-gsecurity");return _5}},_i2y:{_o1:function(a,b){if(!this.rendered)return _5;if(b=="security-update-groups"||b=="security-update-gusers"||
b=="security-add-group"||b=="security-commit-group"||b=="security-remove-group"||b=="security-update-gsecurity"||b=="security-query-groups")this.parentTab.mask.show();return _5},_o2:function(a,b){if(!this.rendered)return _5;switch(b){case "security-query-groups":this.pageEdit.setRawValue(this.page);this.totalpages=Math.ceil(this.spScrManager.getQueryGroupsCount()/this.pagesize);if(!this.totalpages)this.totalpages=1;this.pageCount.update(this.totalpages);this.updatePagerButtons();case "security-update-groups":case "sync-update-groups":this.populateGroups();
break;case "security-add-group":case "security-commit-group":this.refresh("sync-update-groups");break;case "security-remove-group":this.removeGroups();break;case "sync-update-security":case "security-update-gsecurity":this.adsmode=this.spScrManager.getADSMode()=="ads";this.updateContent();break}return _5},_o3:function(a,b,c){if(!this.rendered)return _5;switch(c){case "security-update-groups":case "sync-update-groups":case "security-query-groups":this.parentTab.mask.hide();break;case "security-update-gusers":this.spScrManager.updateGroups("security-update-groups");
break;case "security-add-group":case "security-commit-group":case "security-remove-group":this.spScrManager.updateGroups("sync-update-groups");break;case "sync-update-security":case "security-update-gsecurity":if(this.adsmode)this.spScrManager.queryGroups("",0,this.pagesize,"security-query-groups");else{this.zfsVolumesManager.UpdateVolumes("security-update-zfsvolumes");this.spScrManager.updateUsersWithAdmin("security-update-gusers",true,false)}break}if(a!=_5)if(c=="security-add-group"||c=="security-commit-group"||
c=="security-remove-group")this.showError(b);return _5}},_i3v:{_o2:function(a,b){if(b=="security-update-zfsvolumes"||b=="sync-update-zfsvolumes"){a=this.zfsVolumesManager.getActiveVolumes();this.novolumes=a==_4||a.length==0}return _5}}});_._2("_s4");
_s4.AuthenticationPanel=_._1(_._3.Security.AuthenticationPanel,_s0.BasePanel,_i4,_i2y,_i45,{panelCls:"x-security-authpanel",help:"security_panel_auth",constructor:function(){this.title=_TR("AUTHENTICATION");this.interval=3E3;_s4.AuthenticationPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){_s4.AuthenticationPanel.superclass.initComponent.apply(this,arguments);if(this.spDevice=
_a(_7(_1.CLSIDS.Device5200),"_i2")){_a(this.spDevice,"_i1").Advise(this);this.spSecurityManager=this.spDevice.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spSysManager=this.spDevice.getSystemManager();_a(this.spSysManager,"_i1").Advise(this)}this.updprompt=_a(_7(_._3.Controls.FirmwareWindow),"IPromptWindow");this.on("beforecollapse",function(){return false})},onReady:function(){this.renderTitle();
var a=Ext.id(),b=Ext.id(),c=Ext.id(),d=Ext.id(),f=Ext.id(),e=Ext.id(),g=Ext.id(),h=Ext.id(),i=Ext.id(),l=Ext.id(),j=Ext.id(),m=Ext.id(),k=Ext.id(),n=Ext.id(),o=Ext.id();this.content.update('<div id="'+a+'"><table><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1" style="padding-bottom: 12px;"><nobr class="x-system-panel-name">'+_TR("ACCESS_TYPE")+_TR("COLON")+'</nobr></td><td id="'+b+'" class="'+this.panelCls+'-cell" style="padding-bottom: 12px;"></td></tr></table><table style="float:left"><tr><td class="'+
this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr id="'+c+'" class="x-system-panel-name '+this.panelCls+'-domain">'+_TR("NETBIOS_DOMAIN_NAME")+_TR("COLON")+'</nobr></td><td id="'+f+'" class="'+this.panelCls+'-cell"></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name '+this.panelCls+'-realm">'+_TR("DNS_REALM_NAME")+_TR("COLON")+'</nobr></td><td id="'+d+'" class="'+this.panelCls+'-cell"></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+
'-cell1"><nobr class="x-system-panel-name">'+_TR("ORGANIZATIONAL_UNIT")+_TR("COLON")+'</nobr></td><td id="'+e+'" class="'+this.panelCls+'-cell"></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name">'+_TR("TRUSTED_USERS_VISIBILITY")+_TR("COLON")+'</nobr></td><td id="'+g+'" class="'+this.panelCls+'-cell"></td></tr></table><table style="float:left"><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name '+this.panelCls+
'-admin">'+_TR("ADMINISTRATOR_NAME")+_TR("COLON")+'</nobr></td><td id="'+h+'" class="'+this.panelCls+'-cell"></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name '+this.panelCls+'-psw">'+_TR("ADMINISTRATOR_PASSWORD")+_TR("COLON")+'</nobr></td><td id="'+i+'" class="'+this.panelCls+'-cell"></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name">'+_TR("SERVER_ADDRESS")+_TR("COLON")+'</nobr></td><td id="'+
l+'" class="'+this.panelCls+'-cell"></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name '+this.panelCls+'-realm">'+_TR("SECURITY_NOT_SYNC_ADS_ACCOUNTS")+_TR("COLON")+'</nobr></td><td id="'+j+'" class="'+this.panelCls+'-cell"></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name '+this.panelCls+'-realm">'+_TR("SECURITY_IMPORT_TIMEOUT")+_TR("COLON")+'</nobr></td><td><table cellspadding="0" cellspacing="0"><tr><td id="'+
(this.spnImportTimeoutId=Ext.id())+'"></td><td style="padding-left:5px;" id="'+(this.ttImportTimeoutId=Ext.id())+'"></td></tr></table></td></tr><tr><td class="'+this.panelCls+"-cell "+this.panelCls+'-cell1"><nobr class="x-system-panel-name">'+_TR("ADS_IDMAP")+_TR("COLON")+'</nobr></td><td class="'+this.panelCls+'-cell"><a id="'+m+'" href="#" class="x-item-disabled">'+_TR("ADS_IMPORT")+'</a> / <a id="'+k+'" href="#" class="x-item-disabled">'+_TR("ADS_EXPORT")+'</a></td></tr></table><div style="clear:both;"></div><div id="'+
n+'" style="float: left; padding: 8px 2px 0 258px;"></div><div id="'+o+'" style="float: left; padding: 8px 2px 0 258px;"></div></div>');this.dataPanel=Ext.get(a);this.dataPanel.setDisplayed(false);this.cbMode=new Ext.UI.ComboBox({width:160,mode:"local",triggerAction:"all",value:0,store:new Ext.data.ArrayStore({fields:["text","mode"],data:[[_TR("LOCAL_USERS"),"user"],["Active Directory","ads"]]}),valueField:"mode",displayField:"text",listeners:{select:this.onModeSelect,scope:this}});this.cbMode.render(b);
this.tfRealm=new Ext.UI.TextField({width:160});this.tfRealm.render(d);this.lbName=Ext.get(c);this.tfDomain=new Ext.UI.TextField({width:160});this.tfDomain.on("change",this.onDomainChange,this);this.tfDomain.render(f);this.tfOrganization=new Ext.UI.TextField({width:160});this.tfOrganization.render(e);this.tfTrusteddomain=new Ext.UI.Checkbox({disabled:true});this.tfTrusteddomain.render(g);this.tfAdmin=new Ext.UI.TextField({width:160});this.tfAdmin.render(h);this.tfPassword=new Ext.UI.TextField({width:160,
inputType:"password"});this.tfPassword.render(i);this.tfIPAddress=new Ext.UI.TextField({width:160});this.tfIPAddress.render(l);this.chbNotSync=new Ext.UI.Checkbox({disabled:true});this.chbNotSync.render(j);this.lImport=Ext.get(m).on("click",this.onImportClick,this);this.lExport=Ext.get(k).on("click",this.onExportClick,this);this.lExportTooltip=new Ext.UI.ToolTip(k,{html:_TR("ADS_IDMAP_NO_RID_EXPORT")});this.lExportTooltip.on("beforeshow",this.onExportTooltipBeforeShow,this);this.bApply=new Ext.UI.Button({text:_TR("APPLY"),
width:164,disabled:true,renderTo:n,listeners:{click:this.onApplyClick,scope:this}});this.bRefresh=new Ext.UI.Button({text:_TR("REFRESH_ADS_ACCOUNTS"),width:164,disabled:true,expandToText:true,renderTo:o,listeners:{click:this.onRefreshClick,scope:this}});this.spnImportTimeout=new Ext.UI.SpinnerField({width:150,value:1,minValue:1,maxValue:600,incrementValue:1,alternateIncrementValue:10,allowDecimals:false,validationDelay:1E3,renderTo:this.spnImportTimeoutId});this.ttImportTimeout=new Ext.UI.RoundButton({cls:"x-frontview-btn-info",
renderTo:this.ttImportTimeoutId,listeners:{afterrender:function(p){new Ext.UI.ToolTip(p.el,{html:_TR("SECURITY_IMPORT_TIMEOUT_TIP")})},scope:this}});this.cbMode.onSelect(this.cbMode.store.data.get(0),0)},renderTitle:function(){this.bottomPlace.addClass("x-security-update-bottom");this.statusmessage=new Ext.Component({cls:"x-frontview-led-green x-security-update-sts",hidden:true});this.statusmessage.render(this.bottomPlace);this.errMessage=new Ext.Component({cls:"x-security-security-error",hidden:true});
this.errMessage.render(this.bottomPlace);this.dprogress=new Ext.UI.ProgressIndicator({cls:"x-security-update-progress",width:110,value:0,hidden:true});this.dprogress.render(this.bottomPlace)},onDomainChange:function(){var a=this.tfDomain.getValue();a=a.toUpperCase();this.tfDomain.setValue(a)},onModeSelect:function(a,b){var c;typeof a=="string"?(c=a):(c=b.data.mode);switch(c){case "user":this.setLocalMode();break;case "ads":this.setActiveMode();break;case "rcmode":this.setRCMode();break;default:break}this.tfPassword.setValue("")},
setLocalMode:function(){this.tfDomain.setDisabled(false);this.lbName.update(_TR("WORKGROUP_NAME")+_TR("COLON"));this.tfRealm.setDisabled(true);this.tfOrganization.setDisabled(true);this.tfTrusteddomain.setDisabled(true);this.tfAdmin.setDisabled(true);this.tfPassword.setDisabled(true);this.tfIPAddress.setDisabled(true);this.chbNotSync.setDisabled(true);this.spnImportTimeout.setDisabled(true)},setActiveMode:function(){this.tfDomain.setDisabled(false);this.lbName.update(_TR("NETBIOS_DOMAIN_NAME")+_TR("COLON"));
this.tfRealm.setDisabled(false);this.tfOrganization.setDisabled(false);this.tfTrusteddomain.setDisabled(false);this.tfAdmin.setDisabled(false);this.tfPassword.setDisabled(false);this.tfIPAddress.setDisabled(false);this.chbNotSync.setDisabled(false);this.spnImportTimeout.setDisabled(false)},setRCMode:function(){this.tfDomain.setDisabled(true);this.lbName.update(_TR("WORKGROUP_NAME")+_TR("COLON"));this.tfRealm.setDisabled(true);this.tfOrganization.setDisabled(true);this.tfTrusteddomain.setDisabled(true);
this.tfAdmin.setDisabled(false);this.tfPassword.setDisabled(false);this.tfIPAddress.setDisabled(true);this.chbNotSync.setDisabled(true);this.spnImportTimeout.setDisabled(true)},onApplyClick:function(){var a=this.cbMode.getValue(),b=this.tfRealm.getValue(),c=this.tfDomain.getValue(),d=this.tfOrganization.getValue(),f=this.tfTrusteddomain.getValue()?"1":"0",e=this.tfAdmin.getValue(),g=this.tfPassword.getValue(),h=this.tfIPAddress.getValue(),i=this.chbNotSync.getValue()?"1":"0",l=this.spnImportTimeout.getValue();
if(this.validate(a,b,c,d,e,g,h,i)){var j=this.getReadyCLOUDService();if(a==="ads"&&j&&j.getEnable()){j=_a(this.spSysManager.getCloudOwner(),"_i2z");var m="";if(j&&j!=_4)m=j.getEmail();Ext.UI.MessageBox.confirm({width:480,title:_TR("ADS_CONFIRM_SWITCHING"),msg:String.format(_TR("ADS_SWITCH_DISABLE_CLOUD")),fn:function(k){if(k=="yes"){k=_a(this.spDevice,"_iq").getTimeOut();_a(this.spDevice,"_iq").putTimeOut(12E4);this.spSecurityManager.commitADSMode(a,b,c,
d,e,g,h,f,"system-security-commit",i,l);_a(this.spDevice,"_iq").putTimeOut(k)}},scope:this})}else{j=_a(this.spDevice,"_iq").getTimeOut();_a(this.spDevice,"_iq").putTimeOut(12E4);this.spSecurityManager.commitADSMode(a,b,c,d,e,g,h,f,"system-security-commit",i,l);_a(this.spDevice,"_iq").putTimeOut(j)}}},onRefreshClick:function(){this.hideDownload();this.spSecurityManager.refreshAds("system-security-refreshAds")},onImportClick:function(a){a.preventDefault();
if(!this.lImport.hasClass("x-item-disabled")){_a(this.updprompt,"_i1").Advise(this);this.updprompt.Show(_s10.FirmwareWindow.ADDON,{upurl:document.fwbroker,params:{command:"AdsIdMapUpload"},submittype:"adssubmit",caption:_TR("ADS_IDMAP_IMPORT"),iscustom:true,fieldname:_TR("FILE_NAME")+_TR("COLON"),okbtn:_TR("UPLOAD"),validatefunc:"validateuploading",delegatename:"delegateuploading"})}},validateuploading:function(a){if(a.getArgs().fsize>1E8){a.setResult(false);Ext.UI.MessageBox.show({title:_TR("ERROR"),
msg:_TR("ADS_FILE_SIZE_TOO_BIG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300})}else a.setResult(true)},delegateuploading:function(){this.spSecurityManager.backupADSIDMap("system-security-importadsidmap")},onExportClick:function(a){a.preventDefault();this.lExport.hasClass("x-item-disabled")||_a(_7(_._3.Controls.ADSIDMapDownloader),"ILogDownloader").Start(document.dbbroker)},onExportTooltipBeforeShow:function(){return this.adsMode!="user"&&this.spSecurityManager.getADSIDMapMode()==
"rid"},clearErrors:function(){this.el.removeClass("x-security-authpanel-error-domain");this.el.removeClass("x-security-authpanel-error-realm");this.el.removeClass("x-security-authpanel-error-admin");this.el.removeClass("x-security-authpanel-error-psw")},validate:function(a,b,c,d,f,e){this.clearErrors();b=false;if(!c||!_.isValidHostname(c)){b=true;this.el.addClass("x-security-authpanel-error-domain")}if(a=="rcmode"||a=="ads"){if(!f){b=true;this.el.addClass("x-security-authpanel-error-admin")}if(!e){b=
true;this.el.addClass("x-security-authpanel-error-psw")}}return!b},showProgress:function(){if(this.updatesCount===undefined)this.updatesCount=0;this.updatesCount||_s4.AuthenticationPanel.superclass.showProgress.apply(this,arguments);++this.updatesCount},hideProgress:function(){if(this.updatesCount===undefined)this.updatesCount=0;this.updatesCount>0&&--this.updatesCount;this.updatesCount||_s4.AuthenticationPanel.superclass.hideProgress.apply(this,arguments)},updatefwdownload:function(){this.fwupdate||
this.spSecurityManager.updateADSProgress("system-update-progress")},hideCtrls:function(a){_.each(a,function(b){b.hide()},this)},hideDownload:function(){this.hideCtrls([this.statusmessage,this.errMessage,this.dprogress])},getReadyCLOUDService:function(){for(var a=this.spDevice.getSystemServiceManager().getSystemServices(),b,c=0;c<a.length;++c){b=_a(a[c],"_i32");if(b.getName()=="readycloud")return b}return null},_i2y:{_o1:function(a,b){switch(b){case "system-refresh-progress":this.fwupdate=
true;case "system-security-update":case "system-security-commit":case "sync-update-security":case "system-security-refreshAds":case "system-security-importadsidmap":this.showProgress();this.bApply.disable();this.bRefresh.disable();this.lImport.addClass("x-item-disabled");this.lExport.addClass("x-item-disabled");break}return _5},_o2:function(a,b){if(!b||this.fwupdate&&b=="system-update-progress")return _5;a=this.spSecurityManager;switch(b.toString()){case "system-refresh-progress":case "system-update-progress":a=
_a(a.getADSProgress(),"_i2u");switch(a.getState()){case "idle":case "complete":this.hideDownload();this.bApply.enable();if(this.adsMode!="user"&&this.spSecurityManager.getNotSyncAdsAccounts()!="1"){this.bRefresh.enable();this.lImport.removeClass("x-item-disabled");this.spSecurityManager.getADSIDMapMode()!="rid"&&this.lExport.removeClass("x-item-disabled")}if(a.getState()=="complete"&&b=="system-update-progress"){this.statusmessage.update(_TR("ADS_IMPORT_COMPLETE"));this.statusmessage.show()}break;
case "running":this.statusmessage.update(_TR("ADS_IMPORT")+_TR("ELLIPSIS"));a=a.getPercent();this.dprogress.show();this.dprogress.updateProgress(parseFloat(a)/100,"");this.statusmessage.show();this.hideCtrls([this.errMessage]);this.updatefwdownload.defer(this.interval,this);break;case "error":this.errMessage.update(_TR("ADS_IMPORT_ERROR"));this.errMessage.show();this.hideCtrls([this.dprogress,this.statusmessage]);this.bApply.enable();if(this.adsMode!="user"&&this.spSecurityManager.getNotSyncAdsAccounts()!=
"1"){this.bRefresh.enable();this.lImport.removeClass("x-item-disabled");this.spSecurityManager.getADSIDMapMode()!="rid"&&this.lExport.removeClass("x-item-disabled")}break}break;case "system-security-update":case "sync-update-security":this.clearErrors();if((b=this.adsMode=a.getADSMode())&&b!=_4){this.cbMode.setValue(b);this.onModeSelect(b);b=a.getADSRealm();if(!b||b==_4)b="";this.tfRealm.setValue(b);b=a.getADSDomain();if(!b||b==_4)b="";this.tfDomain.setValue(b);b=a.getADSOrganization();
if(!b||b==_4)b="";this.tfOrganization.setValue(b);this.tfTrusteddomain.setValue(a.getTrustedUsersVisibility()=="1");b=a.getADSAdminName();if(!b||b==_4)b="";this.tfAdmin.setValue(b);this.tfPassword.setValue("");b=a.getADSController();if(!b||b==_4)b="";this.tfIPAddress.setValue(b);b=a.getNotSyncAdsAccounts();if(!b||b==_4)b="0";this.chbNotSync.setValue(b);a=a.getTimeout();if(!a||a==_4)a="";this.spnImportTimeout.setValue(a)}this.dataPanel.setDisplayed(true);break;case "system-security-commit":this.hideDownload();
a.updateADSMode("sync-update-security");a.updateUsersWithAdmin("sync-update-users",true,false);a.updateGroups("sync-update-groups");Ext.UI.MessageBox.info({title:_TR("SECURITY_SETTINGS"),msg:_TR("SECURITY_SETTINGS_COMMIT_SUCCESS")});this.cbMode.getValue()=="ads"&&this.spSysManager.removeCloudOwner("system-disable-cloudservice");break;case "system-security-importadsidmap":this.bRefresh.enable();this.lImport.removeClass("x-item-disabled");this.spSecurityManager.getADSIDMapMode()!="rid"&&this.lExport.removeClass("x-item-disabled");
Ext.UI.MessageBox.info({title:_TR("ADS_IDMAP_IMPORT"),msg:_TR("ADS_IDMAP_IMPORT_SUCCESS")});break}return _5},OnRefreshAds:function(){this.hideProgress();this.bApply.enable();if(this.adsMode!="user"&&this.spSecurityManager.getNotSyncAdsAccounts()!="1"){this.bRefresh.enable();this.lImport.removeClass("x-item-disabled");this.spSecurityManager.getADSIDMapMode()!="rid"&&this.lExport.removeClass("x-item-disabled")}},_o3:function(a,b,c){c=="system-security-update"&&this.adsMode!="user"&&this.spSecurityManager.updateADSProgress("system-refresh-progress");
if((c=="sync-update-security"||c=="system-security-refreshAds")&&this.adsMode!="user")this.updatefwdownload.defer(2E3,this);if((c=="system-security-update"||c=="sync-update-security")&&this.adsMode=="user")this.bApply.enable();if(c=="system-refresh-progress")this.fwupdate=false;if(c=="system-security-update"||c=="system-security-commit"||c=="sync-update-security"||c=="system-refresh-progress"||c=="system-security-refreshAds"||c=="system-security-importadsidmap"){this.hideProgress();if(a!=_5){var d=
_a(b,"_io").getLastNMLError();if(d){b=d.getErrorCode();b=(b=_TR(b)==b?"":_TR(b))?b+"<br />":"";d=d.getErrorDetails();d=b+d;_a(_7(_._3.ErrorReporter),"IErrorReporter").report(d,"Code: "+b,_2.ERROR,{windowTitle:_TR("SECURITY_FAILED"),title:"",subTitle:d,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}this.bApply.enable()}c=="system-update-progress"&&a!=_5&&this.updatefwdownload.defer(this.interval,this);return _5}},IPanelItem:{refresh:function(){this.spSecurityManager.updateADSMode("system-security-update");
this.spSysManager.updateCloudOwner("system-update-cloudowner")}},IPromptWindowEvents:{OnClosing:function(a){!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().delegatename)&&this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}}});Ext.namespace("_s4");
_s4.DefaultUserPanel=_._1(_._3.Security.DefaultUserPanel,_s0.BasePanel,IPanelItem,_i4,{panelCls:"x-security-defuser",gridCls:"x-security-defuser-grid",help:"security_panel_default_user",constructor:function(){this.title=_TR("DEFAULT_USER");_s4.DefaultUserPanel.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spScrManager=a.getSecurityManager();_a(this.spScrManager,
"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.on("beforecollapse",function(){return false});this.editMask=new _s4.BitSet;this.editMask.initCallbackOnSetAny(function(){this.editMask.isAnyBitSet()?this.bApply.enable():this.bApply.disable()},this);this.valueSet={txt:undefined,cb:undefined}},onReady:function(){this.content.update('<div class="'+this.panelCls+'-desc">'+_TR("DEFAULT_USER_DESCRIPTION")+
'</div><div class="'+this.panelCls+'-content"><div class="'+this.panelCls+'-block"><table cellpadding="0" cellspacing="0"><tr><td class="'+this.panelCls+'-blocktitle" colspan="2">'+_TR("USER_SETTINGS_HOME_FOLDER")+'</td></tr><tr><td class="'+this.panelCls+'-label">'+_TR("USER_SETTINGS_HOME_FOLDER_PROTECTION")+':</td><td id="'+(this.booHFProtectionId=Ext.id())+'"></td></tr></table></div><div class="'+this.panelCls+'-block"><table cellpadding="0" cellspacing="0"><tr><td class="'+this.panelCls+'-blocktitle" colspan="2">'+
_TR("USER_SETTINGS_PRIVATE_TIME_MACHINE")+'</td></tr><tr><td class="'+this.panelCls+'-label">'+_TR("USER_SETTINGS_PRIVATE_TIME_MACHINE")+':</td><td id="'+(this.booTMId=Ext.id())+'"></td></tr><tr><td class="'+this.panelCls+'-label">'+_TR("USER_SETTINGS_PRIVATE_TIME_MACHINE_CAPACITY")+':</td><td id="'+(this.tfTMCapacityId=Ext.id())+'"></td></tr></table></div><div id="'+(this.boxGroupsId=Ext.id())+'" class="'+this.panelCls+'-block"><div class="'+this.panelCls+'-blocktitle" colspan="2">'+_TR("USER_SETTINGS_GROUP_MEMBERSHIP")+
'</div><table cellpadding="0" cellspacing="0"><tr><td class="'+this.panelCls+'-label">'+_TR("PRIMARY_GROUP")+':</td><td id="'+(this.cbPrimaryGroupId=Ext.id())+'"></td></tr></table></div><div class="x-clear"></div><div class="'+this.panelCls+'-buttons" id="'+(this.bApplyId=Ext.id())+'"></div><div class="x-clear"></div></div><div class="x-clear"></div>');this.boxGroups=Ext.get(this.boxGroupsId);this.boxGroups.setDisplayed(false);this.booHFPtotection=new Ext.UI.ButtonOnOff({textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),
labelwidth:40,renderTo:this.booHFProtectionId,listeners:{valuechanged:function(){this.editMask.setBit(1)},scope:this}});this.booTM=new Ext.UI.ButtonOnOff({textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),labelwidth:40,renderTo:this.booTMId,listeners:{valuechanged:function(){this.editMask.setBit(2)},scope:this}});this.tfTMCapacity=new Ext.UI.TextField({width:76,emptyText:_TR("USER_SETTINGS_PRIVATE_TIME_MACHINE_CAPACITY_UNLIMITED"),maskRe:/\d/,renderTo:this.tfTMCapacityId,listeners:{change:function(a,b){if(this.valueSet.txt===
b)this.editMask.reSetBit(5);else this.editMask.isBitSet(5)||this.editMask.setBit(5)},scope:this}});this.cbPrimaryGroup=new Ext.UI.ComboBox({width:180,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"text",displayField:"text",renderTo:this.cbPrimaryGroupId,listeners:{select:function(a){if(this.valueSet.cb===a.getValue())this.editMask.reSetBit(4);else this.editMask.isBitSet(4)||this.editMask.setBit(4)},scope:this}});this.bApply=new Ext.UI.Button({text:_TR("APPLY"),
handler:this.onApplyClick,scope:this,disabled:true,renderTo:this.bApplyId})},onApplyClick:function(){if(this.editMask.isAnyBitSet()){var a=this.spScrManager.getDefaultUserProfile(),b=a.getHomeFolder();if(!b||b==_4)b=a.createHomeFolder();b.putSnapProtectionEnabled(this.booHFPtotection.isOff()?"0":"1");b=a.getTimeMachine();if(!b||b==_4)b=a.createTimeMachine();b.putEnabled(this.booTM.isOff()?"0":"1");b.putSizeLimit(this.tfTMCapacity.getValue()||0);a.putGroupName(this.cbPrimaryGroup.getValue());
this.valueSet.txt=this.tfTMCapacity.getValue();this.valueSet.cb=this.cbPrimaryGroup.getValue();this.spScrManager.CommitDefaultUserProfile("security-defuser-commit-defuserprofile")}},populateProfile:function(){var a,b=this.spScrManager.getDefaultUserProfile();(a=b.getHomeFolder())&&a!=_4?this.booHFPtotection.changeUI(a.getSnapProtectionEnabled()!="1",false):this.booHFPtotection.changeUI(true,false);if((a=b.getTimeMachine())&&a!=_4){var c=a.getSizeLimit();c=c==_4?"0":(c*1).toFixed(0);this.tfTMCapacity.setValue(c==
"0"?"":c);this.booTM.changeUI(a.getEnabled()!="1",false)}else{this.tfTMCapacity.setValue("");this.booTM.changeUI(true,false)}a=this.cbPrimaryGroup.getStore().findExact("text",b.getGroupName());b="";if(this.cbPrimaryGroup.getStore().getCount()>0)if(a=this.cbPrimaryGroup.getStore().getAt(a<0?0:a))b=a.data.text;this.cbPrimaryGroup.setValue(b);this.valueSet.cb=this.cbPrimaryGroup.getValue();this.valueSet.txt=this.tfTMCapacity.getValue();this.editMask.reset()},populateGroups:function(){var a=this.spScrManager.getGroups(),
b,c;this.groupItems=[];var d=[];for(b=0;b<a.length;++b){c=_a(a[b],"_i2v");this.groupItems.push({name:c.getName(),group:c});d.push([c.getId(),c.getName()])}this.cbPrimaryGroup.getStore().loadData(d)},populateMode:function(){this.boxGroups.setDisplayed(this.spScrManager.getADSMode()!="ads")},showProgress:function(){if(this.updatesCount===undefined)this.updatesCount=0;this.updatesCount||_s4.AuthenticationPanel.superclass.showProgress.apply(this,arguments);++this.updatesCount},
hideProgress:function(){if(this.updatesCount===undefined)this.updatesCount=0;this.updatesCount>0&&--this.updatesCount;this.updatesCount||_s4.AuthenticationPanel.superclass.hideProgress.apply(this,arguments)},_i2y:{_o1:function(a,b){switch(b){case "security-defuser-update-defuserprofile":case "security-defuser-commit-defuserprofile":case "security-defuser-update-mode":this.showProgress();break}return _5},_o3:function(a,b,c){switch(c){case "security-defuser-update-defuserprofile":this.hideProgress();
this.populateProfile();break;case "security-defuser-commit-defuserprofile":this.hideProgress();_a(this,"IPanelItem").refresh();break;case "sync-update-groups":this.populateGroups();this.populateProfile();break;case "security-defuser-update-mode":this.hideProgress();this.populateMode();break}if(c=="security-defuser-update-defuserprofile"||c=="security-defuser-commit-defuserprofile"||c=="security-defuser-update-mode")if(a!=_5)if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();
a=(a=_TR(a)==a?"":_TR(a))?a+"<br />":"";b=b.getErrorDetails();b=a+b;_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a,_2.ERROR,{windowTitle:_TR("SECURITY_FAILED"),title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}},_i3v:{_o2:function(a,b){if(b=="security-defuser-update-zfsvolumes"||b=="sync-update-zfsvolumes"){a=this.zfsVolumesManager.getActiveVolumes();if(a!=_4&&a.length)this.bigMask&&
this.bigMask.hide();else{this.bigMask=this.bigMask||new Ext.UI.LoadMask(this.el.parent(),{frame:false,spinner:false});this.bigMask.show()}}}},IPanelItem:{refresh:function(){this.zfsVolumesManager.UpdateVolumes("security-defuser-update-zfsvolumes");this.spScrManager.UpdateDefaultUserProfile("security-defuser-update-defuserprofile");this.spScrManager.updateADSMode("security-defuser-update-mode");this.populateMode();this.populateGroups()}}});_._2("_s4");
_s4.BaseGrid=_._1(Ext.Container,{cls:"x-sec-grid",headerTmpl:"",rowTmpl:"",constructor:function(){this.headerBox=new Ext.BoxComponent({cls:"x-sec-grid-width-700",html:'<table cellspacing="0" cellpadding="0" class="x-sec-grid-table ui-fwgrid-header">'+this.headerTmpl+"</table>"});this.contentBox=new Ext.BoxComponent({cls:"x-sec-grid-width-700"});this.scrollBox=new Ext.Container({items:this.contentBox});this.items=[this.headerBox,this.scrollBox];_s4.BaseGrid.superclass.constructor.call(this);
this.addEvents("selectRow");this.contentBox.on("afterrender",function(){this.scroller=new Ext.UI.Scroller({dom:this.scrollBox.el.dom,type:"vertical",margins:{top:2,right:1,bottom:1,left:1}});this.scroller.reg()},this);this.headerBox.on("afterrender",function(){this.tab=_a(_7(_._3.Security.SecurityTab),"IExtNative").getNative();this.tab.on("resize",this.onTabResize,this);this.onTabResize()},this)},onTabResize:function(){var a=this.tab.getWidth()-(this.parentTabItem.bottomPlace.getWidth()||
170)-35,b=this.tab.getHeight()-190;if(a&&b){this.scrollBox.setSize(a,b);this.headerBox.setWidth(a)}},populateRows:function(a){this.selectedRow=undefined;var b="";this.rows=[];var c=-1;_.each(a,function(d,f){var e=Ext.id(),g=Ext.id();this.rows.push({id:this.getIdByEntity(d),name:this.getNameByEntity(d),entity:d,trId:e,cbId:g,index:++c});b+=this.getHtmlByEntity(d,e,g,f)},this);this.contentBox.el.update(b);_.each(this.rows,function(d){d.tr=Ext.get(d.trId);if(d.tr){d.tr.on("click",function(f){this.onRowClick(d,
f)},this);d.tr.setVisibilityMode(Ext.Element.DISPLAY)}},this)},getNameByEntity:function(){return""},getIdByEntity:function(){return 0},getHtmlByEntity:function(){return""},onRowClick:function(a,b){this.select(a,b)},select:function(a,b){this.deselectAll();a.tr.addClass("ui-fwgrid-rowsel");this.selectedRow=a;a.tr.scrollIntoView(this.scrollBox.el,true,true);this.scroller.resize();b&&b.target.className.indexOf("checkbox")==-1&&this.fireEvent("selectRow",a,b)},selectFirstRow:function(){_.each(this.rows,
function(a){if(!a.hidden){this.select(a);return false}},this)},deselectAll:function(){this.selectedRow=undefined;_.each(this.rows,function(a){a.tr.removeClass("ui-fwgrid-rowsel")},this)},getSelected:function(){return this.selectedRow},getSelectedRows:function(){var a=[];_.each(this.rows,function(b){b.cb.checked&&a.push(b)},this);!a.length&&this.selectedRow&&a.push(this.selectedRow);return a},getById:function(a){var b=undefined;_.each(this.rows,function(c){if(c.id==a){b=c;return false}},this);
return b},getByName:function(a){var b=[];_.each(this.rows,function(c){c.name==a&&b.push(c)},this);return b},clearFilter:function(){var a=0;_.each(this.rows,function(b){b.hidden=false;b.tr.show();a%2!=0?b.tr.addClass("ui-fwgrid-rowalt"):b.tr.removeClass("ui-fwgrid-rowalt");++a},this)},filterBy:function(a,b){var c=0;_.each(this.rows,function(d){if(a.call(b,d.entity)){d.hidden=false;d.tr.show();c%2!=0?d.tr.addClass("ui-fwgrid-rowalt"):d.tr.removeClass("ui-fwgrid-rowalt");++c}else{d.hidden=true;
d.tr.hide()}},this)}});_._2("_s4");
_s4.UsersGrid=_._1(_s4.BaseGrid,{constructor:function(){this.headerTmpl='<tr><td class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-cell-name">'+_TR("NAME")+'</div></td><td class="x-sec-grid-mail"><div class="x-ellipsis">'+_TR("EMAIL")+'</div></td><td class="x-sec-grid-id"><div class="x-ellipsis" title="'+_TR("UID")+'">'+_TR("UID")+'</div></td><td class="x-sec-grid-group"><div class="x-ellipsis">'+_TR("PRIMARY_GROUP")+"</div></td></tr>";this.rowTmpl='<table cellspacing="0" cellpadding="0" class="x-sec-grid-table {1}"><tr id="{0}"><td class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-uname">{2}</div></td><td class="x-sec-grid-mail"><div class="x-ellipsis" title="{3}">{3}</div></td><td class="x-sec-grid-id"><div class="x-ellipsis">{4}</div></td><td class="x-sec-grid-group x-sec-grid-cell-padding-right"><div class="x-ellipsis">{5}</div></td></tr></table>';
_s4.UsersGrid.superclass.constructor.call(this)},getNameByEntity:function(a){return _a(a,"_i2z").getName()},getIdByEntity:function(a){return _a(a,"_i2z").getId()},getHtmlByEntity:function(a,b,c,d){a=_a(a,"_i2z");c=a.getIsLocked()=="1";return String.format(this.rowTmpl,b,(d%2==0?"ui-fwgrid-row":"ui-fwgrid-rowalt")+(c?" x-sec-grid-udisabled":"")+(a.isAdmin()?" x-sec-grid-admin":""),String.format(c?_TR("USER_DISABLED"):"{0}",a.getName()||""),a.getEmail()||"",a.getId()||
"",a.getGroupName()||"",a.getPassword()||"")}});_._2("_s4");
_s4.GroupsGrid=_._1(_s4.BaseGrid,{constructor:function(){this.headerTmpl='<tr><td class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-cell-name">'+_TR("NAME")+'</div></td><td class="x-sec-grid-id"><div class="x-ellipsis">'+_TR("GID")+'</div></td><td class="x-sec-grid-memb"><div class="x-ellipsis x-sec-grid-cell-padding-right">'+_TR("SECONDARY_MEMBERS")+"</div></td></tr>";this.rowTmpl='<table cellspacing="0" cellpadding="0" class="x-sec-grid-table {1}"><tr id="{0}"><td class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-gname">{2}</div></td><td class="x-sec-grid-id"><div class="x-ellipsis">{3}</div></td><td class="x-sec-grid-memb x-sec-grid-cell-padding-right"><div class="x-ellipsis">{4}</div></td></tr></table>';
_s4.GroupsGrid.superclass.constructor.call(this)},getNameByEntity:function(a){return _a(a,"_i2v").getName()},getIdByEntity:function(a){return _a(a,"_i2v").getId()},getHtmlByEntity:function(a,b,c,d){a=_a(a,"_i2v");var f="";a.getSecondaryMembers()!=_4&&_.each(a.getSecondaryMembers(),function(e){e=_a(e,"_i2z");if(f!="")f+=", ";f+=e.getName()},this);return String.format(this.rowTmpl,b,(d%2==0?"ui-fwgrid-row":"ui-fwgrid-rowalt")+(a.getName()=="admin"?
" x-sec-grid-admin":""),a.getName()||"",a.getId()||"",f)}});_._2("_s4");
_s4.ADUsersGrid=_._1(_s4.BaseGrid,{constructor:function(){this.tableCls="x-sec-ugrid-table";this.headerTmpl='<tr><td class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-cell-name">'+_TR("NAME")+'</div></td><td class="x-sec-grid-mail"><div class="x-ellipsis">'+_TR("EMAIL")+'</div></td><td class="x-sec-grid-group"><div class="x-ellipsis">'+_TR("PRIMARY_GROUP")+"</div></td></tr>";this.rowTmpl='<table cellspacing="0" cellpadding="0" class="x-sec-grid-table {1}"><tr id="{0}"><td id="{2}" class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-uname">{5}</div></td><td class="x-sec-grid-mail"><div class="x-ellipsis">{3}</div></td><td class="x-sec-grid-group x-sec-grid-cell-padding-right"><div class="x-ellipsis">{4}</div></td></tr></table>';
_s4.ADUsersGrid.superclass.constructor.call(this)},getNameByEntity:function(a){return _a(a,"_i2z").getName()},getIdByEntity:function(a){return _a(a,"_i2z").getId()},getHtmlByEntity:function(a,b,c,d){a=_a(a,"_i2z");var f=a.getIsLocked()=="1";return String.format(this.rowTmpl,b,(d%2==0?"ui-fwgrid-row":"ui-fwgrid-rowalt")+(f?" x-sec-grid-udisabled":"")+(a.isAdmin()?" x-sec-grid-admin":""),c,a.getEmail()||"",a.getGroupName()||"",String.format(f?_TR("USER_DISABLED"):
"{0}",a.getName()||""))}});_._2("_s4");
_s4.ADGroupsGrid=_._1(_s4.BaseGrid,{constructor:function(){this.tableCls="x-sec-ggrid-table";this.headerTmpl='<tr><td class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-cell-name">'+_TR("NAME")+"</div></td></tr>";this.rowTmpl='<table cellspacing="0" cellpadding="0" class="x-sec-grid-table {1}"><tr id="{0}"><td id="{2}" class="x-sec-grid-name"><div class="x-ellipsis x-sec-grid-gname">{3}</div></td></tr></table>';_s4.ADGroupsGrid.superclass.constructor.call(this)},
getNameByEntity:function(a){return _a(a,"_i2v").getName()},getIdByEntity:function(a){return _a(a,"_i2v").getId()},getHtmlByEntity:function(a,b,c,d){a=_a(a,"_i2v");return String.format(this.rowTmpl,b,(d%2==0?"ui-fwgrid-row":"ui-fwgrid-rowalt")+(a.getName()=="admin"?" x-sec-grid-admin":""),c,a.getName()||"")}});_._2("_s4");
_s4.UserWindow=_._1(Ext.UI.Window,_i2y,ISSHManagerEvents,_i45,IPromptWindowEvents,{chBoxes:[],help:"security_wnd_edit_user",constructor:function(){_.apply(this,{modal:true,autoWidth:true,height:490,resizable:false,minimizable:false,maximizable:false,title:_TR("PROPERTIES"),fbar:this.getFooter(),cls:"x-sec-userwnd mar-left",dirtyGroups:true});_s4.UserWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s4.UserWindow.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this);this.spsshManager=a.getSSHKeyManager();_a(this.spsshManager,"_i1").Advise(this);this.spSYSManager=a.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this);this.spAlertsManager=this.spSYSManager.getAlertsManager();_a(this.spAlertsManager,"_i1").Advise(this);this.spSecurityManager=
a.getSecurityManager();this.spShareManager=a.getShareManager();this.zfsVolumesManager=a.getZFSVolumesManager()}this.usersTab=_a(_7(_._3.Security.UsersTab),"IExtNative").getNative();this.updprompt=_a(_7(_._3.Controls.FirmwareWindow),"IPromptWindow");this.sshprompt=_a(_7(_._3.Security.SshPromptWindow),"IPromptWindow");this.prompt=_a(_7(_._3.Controls.PromptWindow),"IPromptWindow");this.pwdRecMask=
new _s4.BitSet;this.selectedTab=0},getPropsHtml:function(a){return'<div id="'+(this.userSectionId=Ext.id())+'" style="display: '+(a?"block":"none")+';" ><div id="'+(this.warningId=Ext.id())+'" class="x-sec-add-warn">'+_TR("SEC_VOLUME_ALERT")+'</div><table cellpadding="0" cellspacing="0" ><tr><td class="x-sec-dlglabel" id="'+(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel">'+_TR("UID")+_TR("COLON")+
'</td><td id="'+(this.tfUserId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel" id="'+(this.lEmailId=Ext.id())+'">'+_TR("EMAIL")+_TR("COLON")+'</td><td id="'+(this.tfEmailId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel" id="'+(this.lPasswordId=Ext.id())+'">'+_TR("PASSWORD")+_TR("COLON")+'</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel" id="'+(this.lRePasswordId=Ext.id())+'">'+_TR("RE_ENTER_PASSWORD")+_TR("COLON")+'</td><td id="'+(this.tfRePasswordId=
Ext.id())+'"></td></tr></table></div>'},getAdminPropsHtml:function(a){return'<div id="'+(this.adminSectionId=Ext.id())+'" style="display: '+(a?"block":"none")+';" ><table cellpadding="0" cellspacing="0" ><tr><td class="x-sec-dlglabel" id="'+(this.lAdminOldPasswordId=Ext.id())+'">'+_TR("PASSWORD_OLD")+_TR("COLON")+'</td><td id="'+(this.tfAdminOldPasswordId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel" id="'+(this.lAdminPswdId=Ext.id())+'">'+_TR("NEW_PASSWORD")+_TR("COLON")+'</td><td id="'+
(this.tfAdminPswdId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel" id="'+(this.lAdminRePswdId=Ext.id())+'">'+_TR("RE_NEW_PASSWORD")+_TR("COLON")+'</td><td id="'+(this.tfAdminRePswdId=Ext.id())+'"></td></tr><tr><td colspan="2" id="'+(this.chAdminPasswordRecId=Ext.id())+'" style="padding-top: 10px;"></td></tr><tr><td colspan="2" ><div id="'+(this.rbAdminResetButtonId=Ext.id())+'" style="margin-left: 20px; margin-top: 14px;"></div><div style="margin-left: 20px; margin-top: 14px;"><div id="'+(this.rbAdminRecoveryQwestId=
Ext.id())+'"></div><table style="table-layout:fixed; margin-top: 14px; padding-left: 0px;" cellpadding="0" cellspacing="0" ><tr><td class="x-sec-dlglabel-180" id="'+(this.lPswdRecQuestId=Ext.id())+'">'+_TR("RECOVERY_QUESTION")+_TR("COLON")+'</td><td id="'+(this.tfPswdRecQuestId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel-180" id="'+(this.lPswdRecAnswrId=Ext.id())+'">'+_TR("RECOVERY_ANSWER")+_TR("COLON")+'</td><td id="'+(this.tfPswdRecAnswrId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel-180" id="'+
(this.lPswdRecEmailId=Ext.id())+'">'+_TR("RECOVERY_EMAIL")+_TR("COLON")+'</td><td id="'+(this.tflPswdRecEmailId=Ext.id())+'"></td></tr></table></div></td></tr></table></div>'},getGroupsHtml:function(){return'<div class="x-security-defuser-grid"><table cellpadding="0" cellspacing="0"><tr><td class="x-sec-dlglabel">'+_TR("PRIMARY_GROUP")+_TR("COLON")+'</td><td id="'+(this.cbPrimaryGroupId=Ext.id())+'"></td></tr></table></div>'},getSSHHtml:function(){return'<div style="height: 100%; width: 100%;"><div id="'+
(this.shellAccChbId=Ext.id())+'" style="height: 40px; width: 100%;"></div></div><div style="width: 480px; height: 240px;">'+this.getTableHeader()+'<div id="'+(this.sshKeysConainer=Ext.id())+'" style="width: 100%; height: 210px; overflow-y: hidden;"></div></div><div id="'+(this.sshKeysImport=Ext.id())+'" style="height: 50px; width: 484px; padding-top: 20px;"></div>'},getTableHeader:function(){return'<table style="width: 480px; max-width: 480px;" class=" ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td style="width: 0px;  display: none;"><div class="x-ellipsis">'+
_TR("KEY_COMMENT")+'</div></td><td style="width: 330px;"><div class="x-ellipsis">'+_TR("KEY_INFO")+'</div></td><td style="width: 0px;  display: none;"><div class="x-ellipsis" style="width: 100%; " title="'+_TR("KEY_FINGERPRINT")+'">'+_TR("KEY_FINGERPRINT")+'</div></td><td style="min-width: 80px; max-width: 80px;"><div class="x-ellipsis" style="text-align: center; " title="'+_TR("RSYNC_ONLY")+'">'+_TR("RSYNC_ONLY")+'</div></td><td style="min-width: 30px; max-width: 30px;"></td><td style="min-width: 40px; max-width: 40px;"></td></tr></table>'},
getTableRow:function(a,b,c){var d=Ext.util.Format.htmlEncode(b.getTitle()),f=Ext.util.Format.htmlEncode(b.getComment());return'<table id="'+(c.rowId=Ext.id())+'" style="width: 480px; max-width: 480px;" class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td style="width: 0px; display: none;"><div  id="'+(c.cmtId=Ext.id())+'" class="x-ellipsis" title="'+f+'">'+f+'</div></td><td style="width: 330px; max-width: 330px;"><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;" >'+
_TR("TITLE")+'</div><div  id="'+(c.titleId=Ext.id())+'" class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+d+'">'+d+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4; display:'+(Ext.isEmpty(f)?"none;":"block;")+'">'+_TR("COMMENT")+'</div><div  id="'+(c.cmtId=Ext.id())+'" class="x-ellipsis" style="height: 30px; line-height: 20px; display:'+(Ext.isEmpty(f)?"none;":"block;")+'" title="'+f+'">'+f+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+
_TR("FINGERPRINT")+'</div><div  id="'+(c.fingerId=Ext.id())+'" class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+b.getFingerPrint()+'">'+b.getFingerPrint()+'</div></td><td style="width: 0px; display: none;"><div class="x-ellipsis" title="'+b.getFingerPrint()+'">'+b.getFingerPrint()+'</div></td><td style="min-width: 80px; max-width: 80px; text-align: center; vertical-align: bottom;"><div id="'+(c.chId=Ext.id())+'" style="height: 30px;"></div></td><td style="min-width: 30px; max-width: 30px; text-align: left; vertical-align: bottom;"><div id="'+
(c.bt2Id=Ext.id())+'" title="'+_TR("EDIT")+'" style="height: 32px;"></div></td><td style="min-width: 40px; max-width: 40px; text-align: left; vertical-align: bottom;"><div id="'+(c.btId=Ext.id())+'" title="'+_TR("DELETE")+'" style="height: 32px;"></div></td></tr></table>'},getEmptyTableRow:function(a,b){return'<table class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td style="width: 100%;"><div style="width: 100%; text-align: center;">'+b+"</div></td></tr></table>"},
getFooter:function(){return[this.bApply=new Ext.UI.Button({xtype:"uibutton",text:_TR("APPLY"),handler:function(){this.onApply()},scope:this,acceptbtn:true}),{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.requestInfo=undefined;this.hide()},scope:this,cancelbtn:true}]},afterRender:function(){_s4.UserWindow.superclass.afterRender.apply(this,arguments);this.sidebar=new Ext.UI.SideBar({renderTo:this.body});this.propsGroup=new Ext.Container({html:this.getPropsHtml(true)+this.getAdminPropsHtml(false)});
this.sidebar.addTab(_TR("PROPERTIES"),this.propsGroup);this.groupsGroup=new Ext.Container({html:this.getGroupsHtml()});this.sidebar.addTab(_TR("GROUPS"),this.groupsGroup);this.sshGroup=new Ext.Container({html:this.getSSHHtml()});this.sidebar.addTab(_TR("SSH"),this.sshGroup);this.shellAcc=new Ext.UI.Checkbox({checked:false,cls:"x-sec-editor-shell-access",boxLabel:_TR("ALLOW_SHELL_ACCESS"),listeners:{check:this.onShellAccApply,scope:this}});this.shellAcc.render(this.shellAccChbId);this.bImport=new Ext.UI.Button({xtype:"uibutton",
text:_TR("IMPORT_PUBLIC_KEY"),handler:this.onImport,width:160,style:"float: right;",scope:this});this.bImport.render(this.sshKeysImport);this.nameMask=new RegExp(/^[a-z_]+[a-z0-9\._-]{0,30}$/i);this.tfName=new Ext.UI.TextField({width:345,inputMaxLength:31,cls:"x-sec-editor-user",tooltipCfg:{html:_TR("USERS_ERRORTIP_NAME")},renderTo:this.tfNameId,listeners:{keyup:this.onUserNameChange,change:this.onUserNameChange,scope:this}});this.tfUID=new Ext.UI.TextField({width:345,cls:"x-sec-editor-user",emptyText:_TR("SECURITY_AUTO"),
maskRe:/^[0-9]*$/,renderTo:this.tfUserId});this.tfEmail=new Ext.UI.TextField({width:345,cls:"x-sec-editor-user",renderTo:this.tfEmailId,tooltipCfg:{html:_TR("USERS_ERRORTIP_EMAIL")}});this.tfPassword=new Ext.UI.TextField({width:345,inputType:"password",cls:"x-sec-editor-user",renderTo:this.tfPasswordId,tooltipCfg:{html:_TR("USERS_ERRORTIP_PWD")}});this.tfRePassword=new Ext.UI.TextField({width:345,inputType:"password",cls:"x-sec-editor-user",renderTo:this.tfRePasswordId,tooltipCfg:{html:_TR("USERS_ERRORTIP_PWD")}});
this.lName=Ext.get(this.lNameId);this.lEmail=Ext.get(this.lEmailId);this.lPassword=Ext.get(this.lPasswordId);this.lRePassword=Ext.get(this.lRePasswordId);this.tfAdminPassword=new Ext.UI.TextField({width:345,inputType:"password",cls:"x-sec-editor-user",disabled:true,renderTo:this.tfAdminPswdId,tooltipCfg:{html:_TR("USERS_ERRORTIP_PWD")}});this.tfAdminPassword.getVisibilityEl().child("div.ui-textfield-mc").createChild('<div style="width: 0px; height: 0px;"><input tabindex="-1" type="password" size="20" autocomplete="off" class="x-form-text x-form-field" autocapitalize="off" style="width: 0px; height: 0px;" /><div>',
this.tfAdminPassword.getVisibilityEl().child("input"));this.tfAdminRePassword=new Ext.UI.TextField({width:345,inputType:"password",disabled:true,cls:"x-sec-editor-user",renderTo:this.tfAdminRePswdId,tooltipCfg:{html:_TR("USERS_ERRORTIP_PWD")}});this.tfAdminOldPassword=new Ext.UI.TextField({width:345,inputType:"password",cls:"x-sec-editor-user",renderTo:this.tfAdminOldPasswordId,enableKeyEvents:true,tooltipCfg:{html:_TR("USERS_ERRORTIP_OLD_PWD")},listeners:{keyup:function(){if(this.tfAdminOldPassword.getValue()&&
!this.enabled)this.enableRecoveryMode(true);else!this.tfAdminOldPassword.getValue()&&this.enabled&&this.enableRecoveryMode(false)},scope:this}});this.lAdminPassword=Ext.get(this.lAdminPswdId);this.lAdminRePassword=Ext.get(this.lAdminRePswdId);this.lAdminOldPassword=Ext.get(this.lAdminOldPasswordId);this.enablePswdRecovery=new Ext.UI.Checkbox({boxLabel:_TR("ENABLE_PSWD_RECOVERY"),disabled:true,renderTo:this.chAdminPasswordRecId,checked:false,listeners:{check:function(a,b){this.tfAdminOldPassword.getValue()&&
this.onEnablePswdRecoveryCheck(a,b)},scope:this}});this.radioButtonResetPswd=new Ext.UI.Radio({boxLabel:_TR("PHYSICAL_RESET_BUTTON"),disabled:true,renderTo:this.rbAdminResetButtonId,checked:true,name:"reset_pswd",listeners:{check:function(a,b){this.onRadioChecked(a,b)},scope:this}});this.radioButtonRecoveryQwest=new Ext.UI.Radio({boxLabel:_TR("EMAIL_NEW_PSWD"),renderTo:this.rbAdminRecoveryQwestId,checked:false,disabled:true,name:"recovery_qwest",listeners:{beforechange:function(){var a=_a(this.spAlertsManager.getConfig(),
"_i0");if(!a||a.getServer()===_4||a.getServer()===""){_a(this.prompt,"_i1").Advise(this);this.prompt.Show(_s10.PromptWindow.QUESTION,{caption:_TR("PASS_REC"),message:_TR("EMAIL_ALERTS_CONFIGURATION_MSG"),delegatename:"delegateShowAlertsTab",okbtn:_TR("OK"),cancelbtn:_TR("CANCEL")});return false}return true},check:function(a,b){this.onRadioChecked(a,b)},scope:this}});this.tfPswdRecQuest=new Ext.UI.TextField({width:280,cls:"x-sec-editor-adm",disabled:true,renderTo:this.tfPswdRecQuestId,
tooltipCfg:{html:_TR("SECURITY_PWD_REC_QUEST")}});this.tfPswdRecAnswr=new Ext.UI.TextField({width:280,cls:"x-sec-editor-adm",disabled:true,renderTo:this.tfPswdRecAnswrId,tooltipCfg:{html:_TR("SECURITY_PWD_REC_ANSW")}});this.tflPswdRecEmail=new Ext.UI.TextField({width:280,cls:"x-sec-editor-adm",disabled:true,renderTo:this.tflPswdRecEmailId,tooltipCfg:{html:_TR("USERS_ERRORTIP_EMAIL")}});this.lPswdRecQuest=Ext.get(this.lPswdRecQuestId);this.lPswdRecAnswr=Ext.get(this.lPswdRecAnswrId);this.lPswdRecEmail=
Ext.get(this.lPswdRecEmailId);this.cbPrimaryGroup=new Ext.UI.ComboBox({width:345,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"text",displayField:"text",renderTo:this.cbPrimaryGroupId,listeners:{select:function(){},scope:this}})},enableRecoveryMode:function(a){this.tfAdminPassword.setDisabled(!a);this.enablePswdRecovery.setDisabled(!a);this.tfAdminRePassword.setDisabled(!a);if(this.enablePswdRecovery.getValue()){this.radioButtonResetPswd.setDisabled(!a);
this.radioButtonRecoveryQwest.setDisabled(!a)}if(this.radioButtonRecoveryQwest.getValue()){this.tfPswdRecQuest.setDisabled(!a);this.tfPswdRecAnswr.setDisabled(!a);this.tflPswdRecEmail.setDisabled(!a)}this.enabled=a},onShow:function(){_s4.UserWindow.superclass.onShow.apply(this,arguments);this.chBoxes.splice(0,this.chBoxes.length);Ext.fly(this.warningId).setDisplayed(!!this.usersTab.novolumes);this.spsshManager.updateKeys("security-update-sshkeys");this.tfAdminPassword.setValue("");
this.tfAdminRePassword.setValue("");this.tfAdminOldPassword.setValue("");this.tflPswdRecEmail.setValue("");this.tfPswdRecQuest.setValue("");this.tfPswdRecAnswr.setValue("");this.center();this.clearErrors();this.sidebar.selectTab(this.selectedTab);this.selectedTab=0;this.populateGroups();this.createEmptyKeysTable(_TR("EMPTY"));var a=Ext.get(this.userSectionId),b=Ext.get(this.adminSectionId),c=this.user;if(c){this.adsmode?this.sidebar.hideTab(2):this.sidebar.showTab(2);this.disableSSHImport(false);
if(c.getName()==="admin"){this.sidebar.showTab(2);a.setDisplayed(false);b.setDisplayed(true);a=_a(this.spAlertsManager.getConfig(),"_i0");!a||a.getServer()===_4||a.getServer()===""?this.disablePswdQwestRecoverySettings(true):this.disablePswdQwestRecoverySettings(this.radioButtonRecoveryQwest.getValue()?false:true)}else{a.setDisplayed(true);b.setDisplayed(false)}this.bApply.setText(_TR("APPLY"));this.setTitle(c.getName());Ext.get(this.tfUserId).parent("tr").setDisplayed(false);
this.tfName.setRawValue(c.getName());this.tfName.startValue=c.getName();this.cbPrimaryGroup.setValue(c.getGroupName());this.tfEmail.setValue(c.getEmail());this.tfPassword.setValue(c.getPassword());this.tfRePassword.setValue(c.getPassword());this.shellAcc.setValue(c.getShellAccess());this.setDisabled(this.adsmode);this.disableAdminSettings(false);if(c.getName()==="admin"||this.adsmode)this.disableAdminSettings(true)}else{this.adsmode?this.sidebar.hideTab(2):this.sidebar.showTab(2);this.disableSSHImport(true);
a.setDisplayed(true);b.setDisplayed(false);this.bApply.setText(_TR("CREATE"));this.setTitle(_TR("NEW_USER"));Ext.get(this.tfUserId).parent("tr").setDisplayed(true);this.tfName.setRawValue("");this.tfName.startValue="";this.tfUID.setValue("");this.tfEmail.setValue("");this.tfPassword.setValue("");this.tfRePassword.setValue("");this.shellAcc.setValue(false);if((c=this.spScrManager.getDefaultUserProfile())&&c!=_4){b=this.cbPrimaryGroup.getStore().findExact("text",c.getGroupName());a="";if(this.cbPrimaryGroup.getStore().getCount()>
0)if(b=this.cbPrimaryGroup.getStore().getAt(b<0?0:b))a=b.data.text;this.cbPrimaryGroup.setValue(a)}this.setDisabled(false);this.disableAdminSettings(false);if(c&&c!=_4&&c.getName()==="admin"||this.adsmode)this.disableAdminSettings(true)}this.tfName.focus(false,true);this.enableRecoveryMode(false)},onHide:function(){this.updprompt.Hide();this.sshprompt.Hide()},setAcctiveTab:function(a){this.selectedTab=a},populate:function(a,b){this.user=a;this.adsmode=b},setDisabled:function(a){_.each([this.tfName,
this.cbPrimaryGroup,this.tfEmail,this.tfPassword,this.tfRePassword],function(b){b.setDisabled(a)},this)},disableAdminSettings:function(a){this.setDisabled(a);this.cbPrimaryGroup.setDisabled(a)},disableSSHImport:function(a){this.bImport.setDisabled(a)},disablePswdRecoverySettings:function(a){_.each([this.radioButtonResetPswd,this.radioButtonRecoveryQwest],function(b){b.setDisabled(a)},this);this.disablePswdQwestRecoverySettings(a||!(!a&&this.radioButtonRecoveryQwest.getValue()))},disablePswdQwestRecoverySettings:function(a){_.each([this.tfPswdRecQuest,
this.tfPswdRecAnswr,this.tflPswdRecEmail],function(b){b.setDisabled(a)},this)},createEmptyKeysTable:function(a){var b=Ext.get(this.sshKeysConainer);this.cleanKeysTable(b);b.insertHtml("afterbegin",this.getEmptyTableRow(0,""));b.insertHtml("afterbegin",this.getEmptyTableRow(1,a));b.insertHtml("afterbegin",this.getEmptyTableRow(2,""))},cleanKeysTable:function(a){a=a.dom;for(var b=a.firstChild;b;){var c=b.nextSibling;a.removeChild(b);b=c}},disableRSyncOnlyChBoxes:function(a){for(var b=0;b<this.chBoxes.length;++b)this.chBoxes[b].setDisabled(a)},
populateKeysTable:function(a,b,c){var d=Ext.get(this.sshKeysConainer);this.cleanKeysTable(d);var f=0;b!=_4&&_.each(b,function(e){var g={rowId:null,cmtId:null,titleId:null,fingerId:null,chId:null,btId:null,bt2Id:null};e=_a(e,"ISSH");if(this.user&&e.getUserId()==this.user.getId()){d.insertHtml("afterbegin",this.getTableRow(f,e,g));var h=new Ext.UI.Checkbox({width:20,disabled:c,checked:e.getReadOnly()});h.render(g.chId);h.wrap.setStyle({margin:"0 auto"});h.on("check",function(i){this.onKeyChecked(i,
e)},this);this.chBoxes.push(h);h=new Ext.UI.RoundButton({cls:"x-sec-sshkey-delete-btn",width:24,height:24});h.render(g.btId);h.on("click",function(i){this.onKeyDelete(i,g.rowId,e)},this);h=new Ext.UI.RoundButton({cls:"x-sec-sshkey-edit-btn",width:24,height:24});h.render(g.bt2Id);h.on("click",function(i){this.onKeyEdit(i,g.titleId,e)},this);f++}},this);f?ScrollManager.reg(d.dom,ScrollManager.VERTICAL):this.createEmptyKeysTable(a)},populateGroups:function(){var a=this.spScrManager.getGroups();this.groupItems=
[];var b=[];if(this.adsmode||this.user&&this.user.getName()==="admin")b.push([this.user.getGroupName(),this.user.getGroupName()]);else a!=_4&&_.each(a,function(c){c=_a(c,"_i2v");this.groupItems.push({name:c.getName(),group:c});b.push([c.getId(),c.getName()])},this);this.cbPrimaryGroup.getStore().loadData(b);this.cbPrimaryGroup.setValue(b.length?b[0][1]:"")},onShellAccApply:function(){this.pwdRecMask.setBit(1);this.disableRSyncOnlyChBoxes(!this.shellAcc.getValue())},onUserNameChange:function(){if(this.user){this.tfPassword.setValue("");
this.tfRePassword.setValue("");this.showError(this.lPassword,true);this.showError(this.lRePassword,true);this.tfPassword.tooltip.enabled=true;this.tfRePassword.tooltip.enabled=true;this.validateName()}},onEnablePswdRecoveryCheck:function(a,b){this.pwdRecMask.setBit(2);this.disablePswdRecoverySettings(!b)},onRadioChecked:function(a,b){if(a.name==="reset_pswd"&&b){this.pwdRecMask.reSetBit(4);this.pwdRecMask.setBit(3);this.disablePswdQwestRecoverySettings(true);this.radioButtonRecoveryQwest.setValue(false)}else if(a.name===
"recovery_qwest"&&b){this.pwdRecMask.reSetBit(3);this.pwdRecMask.setBit(4);this.disablePswdQwestRecoverySettings(false);this.radioButtonResetPswd.setValue(false)}},onKeyChecked:function(a,b){b.putReadOnly(a.checked)},onKeyDelete:function(a,b,c){Ext.get(b).remove();c.MarkToDelete()},onKeyEdit:function(a,b,c){_a(this.sshprompt,"_i1").Advise(this);this.sshprompt.Show(_s4.PromptWindow.SSHKEY,{caption:_TR("EDIT"),delegatename:"delegateEditing",validatefunc:"validateEditing",
elId:b,interfaceName:"ISSH",ssh:c})},findConflictUserNameWithExistingShares:function(){for(var a=this.tfName.getValue().trim().toUpperCase(),b=this.spShareManager.getShares(),c=0;c<b.length;++c){var d=_a(b[c],"_i38");if(a===d.getName().toUpperCase())return d.getName()}return false},validateName:function(){if(this.tfName.tooltip)this.tfName.tooltip.enabled=false;this.showError(this.lName,false);var a=false,b=this.tfName.getValue().trim();if(!this.nameMask.test(b)&&!_.Utils.isValidEmail(b)){a=
true;this.showError(this.lName,true);this.tfName.tooltip.enabled=true}_.each(this.spScrManager.getUsers(),function(c){if((c=_a(c,"_i2z"))&&c.getName()==b&&(!this.user||c.getId()!=this.user.getId())){this.showError(this.lName,true);a=this.tfName.tooltip.enabled=true;return false}},this);return!a},validateEmail:function(){if(this.tfEmail.tooltip)this.tfEmail.tooltip.enabled=false;this.showError(this.lEmail,false);var a=false,b=this.tfEmail.getValue().trim();if(b!=""&&!_.Utils.isValidEmail(b)){this.showError(this.lEmail,
true);a=this.tfEmail.tooltip.enabled=true}return!a},validateAdminSets:function(){var a=false,b=this.tfAdminPassword.getValue(),c=this.tfAdminRePassword.getValue();this.tfAdminOldPassword.getValue();var d=this.tflPswdRecEmail.getValue(),f=this.tfPswdRecQuest.getValue(),e=this.tfPswdRecAnswr.getValue(),g=this.enablePswdRecovery.getValue();this.radioButtonRecoveryQwest.getValue();if(this.tfAdminPassword.tooltip)this.tfAdminPassword.tooltip.enabled=false;if(this.tfAdminRePassword.tooltip)this.tfAdminRePassword.tooltip.enabled=
false;if(this.tfAdminOldPassword.tooltip)this.tfAdminOldPassword.tooltip.enabled=false;if(this.tflPswdRecEmail.tooltip)this.tflPswdRecEmail.tooltip.enabled=false;if(this.tfPswdRecQuest.tooltip)this.tfPswdRecQuest.tooltip.enabled=false;if(this.tfPswdRecAnswr.tooltip)this.tfPswdRecAnswr.tooltip.enabled=false;this.showError(this.lAdminPassword,false);this.showError(this.lAdminRePassword,false);this.showError(this.lAdminOldPassword,false);this.showError(this.lPswdRecQuest,false);this.showError(this.lPswdRecAnswr,
false);this.showError(this.lPswdRecEmail,false);if(b&&(!c||b!=c)){this.showError(this.lAdminRePassword,true);a=this.tfAdminRePassword.tooltip.enabled=true}else if(this.requireOldPassword()){this.showError(this.lAdminOldPassword,true);a=this.tfAdminOldPassword.tooltip.enabled=true}else if(g&&this.radioButtonRecoveryQwest.getValue()&&this.isRecoveryFieldsChanged())if(f)if(!e||e==f){this.showError(this.lPswdRecAnswr,true);a=true}else{if(!d||!Ext.form.VTypes.email(d)){this.showError(this.lPswdRecEmail,
true);a=this.tflPswdRecEmail.tooltip.enabled=true}}else{this.showError(this.lPswdRecQuest,true);a=true}return!a},requireOldPassword:function(){return!this.tfAdminOldPassword.getValue()&&(this.tfAdminPassword.getValue()||this.tfAdminRePassword.getValue()||this.isRecoveryFieldsChanged())},isRecoveryFieldsChanged:function(){return this.spSysManager.getRecoveryEnabled()==="1"!==this.enablePswdRecovery.getValue()||this.spSysManager.getRecoveryMethod()==="reset"!==this.radioButtonResetPswd.getValue()||
this.spSysManager.getRecoveryMethod()==="email"!==this.radioButtonRecoveryQwest.getValue()||this.tflPswdRecEmail.getValue()||this.tfPswdRecAnswr.getValue()||this.tfPswdRecQuest.getValue()},validatePwd:function(){if(this.tfPassword.tooltip)this.tfPassword.tooltip.enabled=false;if(this.tfRePassword.tooltip)this.tfRePassword.tooltip.enabled=false;this.showError(this.lPassword,false);this.showError(this.lRePassword,false);var a=false,b=this.tfPassword.getValue(),c=this.tfRePassword.getValue();if(b==""||
c==""||b!=c){this.showError(this.lPassword,true);this.tfPassword.tooltip.enabled=true;this.showError(this.lRePassword,true);a=this.tfRePassword.tooltip.enabled=true}return!a},validate:function(){var a=this.user,b=true;if((!a||a.getName()!=="admin")&&!this.adsmode){b=this.validateName();b=this.validateEmail()&&b;b=this.validatePwd()&&b}else if(a&&a.getName()==="admin")b=this.validateAdminSets()&&b;b||this.sidebar.selectTab(0);return b},pwdComplexity:function(a){if(a=="")return true;return(new RegExp("^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-ZW_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-zW_!@#$%^&*`~()-+=]+$)(?![0-9W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9W_!@#$%^&*`~()-+=]{8,}$")).test(a)},
onApply:function(a,b){var c=this.validate(),d=false,f=this.findConflictUserNameWithExistingShares();if(c)if(a||!f){c=null;if(this.user)c=this.spScrManager.getUserById(this.user.getId());if(!this.adsmode){if(!c){d=true;c=this.spScrManager.createUser();c.putId(this.tfUID.getValue().trim());f=c.getTimeMachine();f=!f||f==_4?c.createTimeMachine():f;var e=this.spScrManager.getDefaultUserProfile();if(e&&e!=_4)if((e=e.getTimeMachine())&&e!=_4){var g=e.getSizeLimit();g=g==_4?"0":g;f.putSizeLimit(g);
e=e.getEnabled();e=e==_4?"0":e;f.putEnabled(e)}}f=this.tfPassword.getValue();if(!b&&c.getName()!=="admin"&&!this.pwdComplexity(f)){Ext.UI.MessageBox.confirm({title:this.title,msg:String.format(_TR("NEW_WEAK_PASSWORD_CONFIRM_IGNORE")),icon:Ext.UI.MessageBox.WARNING,fn:function(h){h=="yes"&&this.onApply(a,true)},scope:this});return}c.putName(this.tfName.getValue().trim());c.putGroupName(this.cbPrimaryGroup.getValue());c.putEmail(this.tfEmail.getValue().trim());c.putPassword(this.tfPassword.getValue());
c.putShellAccess(this.shellAcc.getValue());if(this.user&&c.getName()!=="admin"&&!this.adsmode){f!="\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf"&&this.spSecurityManager.getLoginUserName()!="admin"&&(this.updateUserPwd=true);this.spScrManager.commitUser("security-commit-user-win",c)}else!this.user&&c.getName()!=="admin"&&!this.adsmode&&this.spScrManager.AddUser("security-add-user",c)}if(c.getName()==="admin")if(!Ext.isEmpty(this.spSYSManager))if((f=this.tfAdminPassword.getValue())||this.pwdRecMask.isAnyBitSet()||
this.isEmailRadio){if(!b&&!this.pwdComplexity(f)){Ext.UI.MessageBox.confirm({title:this.title,msg:String.format(_TR("NEW_WEAK_PASSWORD_CONFIRM_IGNORE")),icon:Ext.UI.MessageBox.WARNING,fn:function(h){h=="yes"&&this.onApply(a,true)},scope:this});return}this.isRecoveryFieldsChanged()?this.spSYSManager.SetAdminPasswordRecovery(this.tfAdminOldPassword.getValue(),this.enablePswdRecovery.getValue(),this.radioButtonResetPswd.getValue()?"reset":"email",this.tfPswdRecQuest.getValue(),this.tfPswdRecAnswr.getValue(),
this.tflPswdRecEmail.getValue(),"refreshpswdrecovery"):this.spSYSManager.SetAdminPasswordInfo(this.shellAcc.getValue(),"refreshpswdinfo")}d||this.commitShhKeys();this.hide()}else Ext.UI.MessageBox.confirm({title:this.title,msg:String.format(_TR("NEW_USER_CONFIRM_IGNORE_CONFLICT_SHARE_NAME"),this.tfName.getValue().trim(),f),icon:Ext.UI.MessageBox.WARNING,fn:function(h){h=="yes"&&this.onApply(true)},scope:this})},onImport:function(){_a(this.updprompt,"_i1").Advise(this);this.updprompt.Show(_s10.FirmwareWindow.ADDON,
{upurl:document.fsupload,params:{path:"/tmp/"},submittype:"sshsubmit",caption:_TR("IMPORT_PUBLIC_KEY"),iscustom:true,fieldname:_TR("FILE_NAME")+_TR("COLON"),okbtn:_TR("UPLOAD"),validatefunc:"validateuploading",delegatename:"delegateuploading"})},delegateuploading:function(a){var b=this.spsshManager.createKey();b.putUserId(this.user.getId());b.putReadOnly(true);b.putTitle(a.getArgs().fname);b.putFilePath(a.getArgs().params.path+a.getArgs().fname);this.spsshManager.addKey(b,"security-add-sshkeys")},
validateuploading:function(a){if(a.getArgs().fsize>1E6){a.setResult(false);Ext.UI.MessageBox.show({title:_TR("ERROR"),msg:_TR("SSH_FILE_SIZE_TOO_BIG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300})}else a.setResult(true)},delegateEditing:function(a){a.getArgs().ssh.putTitle(a.getArgs().arg1)==_5&&Ext.get(a.getArgs().elId).update(Ext.util.Format.htmlEncode(a.getArgs().arg1))},validateEditing:function(a){!a.getArgs().arg1||!a.getArgs().arg1.trim()?a.setResult(false):a.setResult(true)},
delegateShowAlertsTab:function(){this.hide();if(!this.sysTab)this.sysTab=_7(_._3.System.SystemTab);_a(this.sysTab,"IExtNative").getNative().on("tabactivate",this.onSystemTabActivate,this);var a=_a(_7(_._3.System.Frame),"ISystemFrame");a&&a.activateTab(this.sysTab)},onSystemTabActivate:function(){if(this.sysTab){var a=_a(this.sysTab,"IExtNative").getNative();a.un("tabactivate",this.onSystemTabActivate,this);if(!this.settsTab)this.settsTab=
_7(_._3.SystemSubSys.SettingsTab);_a(this.settsTab,"IExtNative").getNative().on("tabactivate",this.onSettingsSubTabActivate,this);a.selectTab(this.settsTab)}},onSettingsSubTabActivate:function(){var a=_a(this.settsTab,"IExtNative").getNative();a.un("tabactivate",this.onSettingsSubTabActivate,this);a=a.getPanelItems();for(var b=0;b<a.length;++b){var c=_a(a[b],"IExtNative").getNative();if(c.help==="system_panel_alerts"){c.expand();c.scrollIntoView();return}}},
showError:function(a,b){b?a.addClass("x-sec-label-error"):a.removeClass("x-sec-label-error")},clearErrors:function(){_.each([this.tfName,this.cbPrimaryGroup,this.tfEmail,this.tfPassword,this.tfRePassword],function(a){!a.tooltip||(a.tooltip.enabled=false)});_.each([this.lName,this.lEmail,this.lPassword,this.lRePassword,this.lAdminPassword,this.lAdminRePassword,this.lAdminOldPassword],function(a){a.removeClass("x-sec-label-error")})},clearValues:function(){_.each([this.tfName,this.tfEmail,this.tfPassword,
this.tfRePassword],function(a){a.setValue("")})},commitShhKeys:function(){_.each(this.spsshManager.getKeys(),function(a){a=_a(a,"ISSH");if(a.IsMarkedToDelete())this.spsshManager.deleteKey(a,"security-delete-sshkeys");else a.IsDirty()&&this.spsshManager.editKey(a,"security-edit-sshkeys")},this)},updateAuthentication:function(){localStorage.setItem("isFromLogOut","1");_a(_7(_._3.ConnectRepair.ConnectRepairWindow),"IExtNative").getNative().logOut()},_i2y:{_o1:function(a,
b){switch(b){case "security-update-ugroups":case "sync-update-groups":break}return _5},_o2:function(a,b){switch(b){case "security-update-ugroups":case "sync-update-groups":this.populateGroups();break;case "security-add-user":break;case "security-commit-user-win":if(this.updateUserPwd){delete this.updateUserPwd;window.updatePwd=true;this.updateAuthentication()}break}return _5}},ISSHManagerEvents:{_o1:function(a,b){switch(b){case "security-add-sshkeys":case "security-edit-sshkeys":case "security-delete-sshkeys":case "security-update-sshkeys":break}return _5},
_o2:function(a,b){switch(b){case "security-add-sshkeys":this.spsshManager.updateKeys("security-update-sshkeys");break;case "security-update-sshkeys":a=_a(a,"ISSHManager").getKeys();if(this.user&&this.user!=_4){if(this.user.getName()==="admin"){this.spSYSManager.UpdateAdminPasswordRecovery("wizard-update-pswdrecovery");this.spSYSManager.UpdateAdminInfo("wizard-update-admininfo")}var c=this.user.getShellAccess()==0}this.populateKeysTable(_TR("EMPTY"),a,c);break}return _5},_o3:function(a,
b,c){switch(c){case "security-add-sshkeys":case "security-edit-sshkeys":case "security-delete-sshkeys":case "security-update-sshkeys":if(a==_4){if(a=_a(b,"_io").getLastNMLError())var d=a.getErrorCode(),f=a.getErrorDetails();if(a&&d&&f){f=_TR(d)+"<br />"+f;this.hide();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(f,"Code: "+d,_2.ERROR,{windowTitle:_TR("SHARE_FAILED"),title:"",subTitle:f,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}break}return _5}},
IPromptWindowEvents:{OnClosing:function(a){!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().delegatename)&&this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().validatefunc)&&this[a.getArgs().validatefunc](a)}},_i45:{_o3:function(a,b,c){switch(c){case "wizard-update-pswdrecovery":this.pwdRecMask.reset();this.spSysManager=_a(b,"_i44");
a=_a(b,"_i44");a={enabled:a.getRecoveryEnabled()==="1",method:a.getRecoveryMethod()};this.tflPswdRecEmail.setValue("");this.tfPswdRecQuest.setValue("");this.tfPswdRecAnswr.setValue("");this.enablePswdRecovery.setValue(a.enabled);this.isEmailRadio=false;if(a.enabled&&a.method==="email"){this.radioButtonResetPswd.setValue(false);this.radioButtonRecoveryQwest.setValue(true);this.isEmailRadio=true;this.pwdRecMask.reset()}else{this.radioButtonResetPswd.setValue(true);this.radioButtonRecoveryQwest.setValue(false)}this.pwdRecMask.reset();
break;case "wizard-update-admininfo":a=_a(b,"_i44");a=+a.getAdminShellAccess();this.shellAcc.setValue(a==1);this.disableRSyncOnlyChBoxes(a==0);break;case "refreshpswdrecovery":case "refreshpswdinfo":case "refreshpswd":if(a!=_5){if(a=_a(b,"_io").getLastNMLError()){b=_TR(a.getErrorCode())+"<br /><br />"+a.getErrorCause();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+a.getErrorCode(),_2.ERROR,{windowTitle:_TR("ERROR"),title:_TR("ERROR"),
subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}else if(c==="refreshpswdrecovery")this.spSYSManager.SetAdminPasswordInfo(this.shellAcc.getValue(),"refreshpswdinfo");else if(c==="refreshpswdinfo"){if(this.tfAdminPassword.getValue()){window.updatePwd=true;this.spSYSManager.SetAdminPassword(this.tfAdminPassword.getValue(),this.tfAdminOldPassword.getValue(),"refreshpswd")}}else if(c==="refreshpswd")this.spSecurityManager.getLoginUserName()=="admin"?this.updateAuthentication():
delete window.updatePwd;break}return _5}}});
_s4.PromptWindow=_._1(_._3.Security.SshPromptWindow,_s10.PromptWindow,_i4,{width:600,constructor:function(){this.commentIds={};_s4.PromptWindow.superclass.constructor.call(this,this.config)},initComponent:function(){_s4.PromptWindow.superclass.initComponent.apply(this,arguments);this.add(this.addingFolderContainer())},addingFolderContainer:function(){return{innerId:_s4.PromptWindow.SSHKEY,bufferResize:0,xtype:"container",
items:[this.keyTitlelbl=new Ext.BoxComponent({html:_TR("KEY_TITLE_LABEL")+_TR("COLON"),cls:"x-sec-prompt-label x-ellipsis",cellCls:"x-sh-prompt-label-sm-cell"}),this.keyTitle=new Ext.UI.TextField({style:"width: 100%; box-sizing: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; height: 28px;",cls:"x-sh-prompt-text",cellCls:"x-sh-prompt-text-cell"}),this.commentIds.el1=new Ext.BoxComponent({style:"height: 10px;"}),this.commentIds.el2=new Ext.BoxComponent({style:"height: 10px;"}),
this.commentIds.el3=this.keyCommentlbl=new Ext.BoxComponent({html:_TR("KEY_COMMENT_LABEL")+_TR("COLON"),cls:"x-sec-prompt-label x-ellipsis",cellCls:"x-sh-prompt-label-sm-cell"}),this.commentIds.el4=this.keyComment=new Ext.UI.TextField({style:"width: 100%; box-sizing: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; height: 28px;",readOnly:true,cls:"x-sh-prompt-text",cellCls:"x-sh-prompt-text-cell"}),new Ext.BoxComponent({style:"height: 10px;"}),new Ext.BoxComponent({style:"height: 10px;"}),
this.fingerprintlbl=new Ext.BoxComponent({html:_TR("KEY_FINGERPRINT_LABEL")+_TR("COLON"),cls:"x-sec-prompt-label x-ellipsis",cellCls:"x-sh-prompt-label-sm-cell"}),this.fingerprint=new Ext.UI.TextField({readOnly:true,style:"width: 100%; box-sizing: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; height: 28px;",cls:"x-sh-prompt-text",cellCls:"x-sh-prompt-text-cell"})],layout:"table",layoutConfig:{tableAttrs:{style:{width:"100%"}},columns:2}}},reset:function(){this.keyTitle.clearInvalid();
this.keyTitle.reset();this.fingerprint.reset();this.keyComment.reset();_s4.PromptWindow.superclass.reset.call(this)},resetInvalidMark:function(){this.keyTitlelbl.removeClass("x-sec-label-error");_s4.PromptWindow.superclass.resetInvalidMark.call(this)},assignMark:function(a){_s4.PromptWindow.superclass.assignMark.call(this,a);this.keyTitlelbl.addClass("x-sec-label-error");this.initTipTarget(this.keyTitlelbl.id);return a},initPrompt:function(){_s4.PromptWindow.superclass.initPrompt.call(this);
this.setTitle(this.options.caption,"");this.setPromptButton(_TR("OK"),true,_TR("CANCEL"),true);this.setActiveItem(this.type);var a=_a(this.options.ssh,this.options.interfaceName);this.keyTitle.setValue(a.getTitle());this.fingerprint.setValue(a.getFingerPrint());if(a.getComment()!=_3){this.keyComment.setValue(a.getComment());this.setDisplayedIfSupported(true)}else this.setDisplayedIfSupported(false)},setDisplayedIfSupported:function(a){for(var b in this.commentIds)if(typeof b!="function"&&
typeof b!="undefined")if(a)this.commentIds[b].show&&this.commentIds[b].show();else this.commentIds[b].hide&&this.commentIds[b].hide()},apply:function(a,b){switch(this.type){case _s4.PromptWindow.SSHKEY:a=!Ext.isEmpty(a.getArgs())?a:new _s10.PromptWindowEventArgs(this.options);if(!Ext.isEmpty(a.getArgs()))a.getArgs().arg1=this.keyTitle.getValue();this[b](a);break}_s4.PromptWindow.superclass.apply.call(this,a,b)}});_s4.PromptWindow.SSHKEY="SSHKEY";
_s4.BitSet=function(){var a=function(){for(var b=1;1<<b!==1;)++b;return b};return function(){var b=0,c=a(),d=[],f=function(){if(d.length>0)for(var e=0;e<d.length;++e)d[e].cb.call(d[e].scope)};this.initCallbackOnSetAny=function(e,g){d.push({cb:e,scope:g?g:this})};this.setBit=function(e){if(e<c){b=this.isBitSet(e)?b&~(1<<e):b|1<<e;f();return true}return false};this.reSetBit=function(e){if(e<c){b&=~(1<<e);f();return true}return false};this.isBitSet=function(e){if(e<c){e=1<<e;return(b&
e)===e}return false};this.isAnyBitSet=function(){return b!==0};this.reset=function(){b=0;f()}}}();Ext.namespace("_s4");
_s4.GroupWindow=_._1(_9,Ext.UI.Window,_i2y,{help:"security_wnd_edit_group",constructor:function(){_.apply(this,{modal:true,width:450,resizable:false,minimizable:false,maximizable:false,title:_TR("PROPERTIES"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onWShow,scope:this}});_s4.GroupWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s4.GroupWindow.superclass.initComponent.apply(this,
arguments);this.addEvents("add");var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this)}},getHtml:function(){return'<div class="" id="'+(this.tabNodeId=Ext.id())+'"></div>'},populate:function(a,b){this.groupId=a.getId();this.setTitle(a.getName());this.groupTab.populate(a,b);this.membersTab.populate(a,b);this.groupTab.tfName.setDisabled(a.getName()=="admin")},getFooter:function(){return[{xtype:"uibutton",
text:_TR("APPLY"),handler:this.onApply,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.groupTab=new _s4.GroupGeneralGroup;this.groupTab.render(this.tabNodeId);this.membersTab=new _s4.SecondaryMembersGroup;this.membersTab.on("refreshClick",function(){this.zfsVolumesManager.UpdateVolumeIOStat(this.volume,"system-storage-update-zfsvolumeiostat")},this);this.membersTab.render(this.tabNodeId)},
onWShow:function(){this.center()},onApply:function(){var a=this.getGroupById(this.groupId);if(a&&this.groupTab.validate()){var b=this.groupTab.tfName.getValue().trim();a.putName(b);var c=[];_.each(this.membersTab.items,function(d){!d.check.disabled&&d.check.checked&&c.push(d.user)});a.putSecondaryMembers(c);this.spScrManager.commitGroups("security-commit-group");this.hide()}},getGroupById:function(a){for(var b=this.spScrManager.getGroups(),c=0;c<b.length;++c){var d=_a(b[c],"_i2v");if(d.getId()==
a)return d}return null}});_._2("_s4");
_s4.GroupsAddWindow=_._1(Ext.UI.Window,_i2y,{help:"security_wnd_add_group",constructor:function(){_.apply(this,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,title:_TR("NEW_GROUP"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onShow,scope:this}});_s4.GroupsAddWindow.superclass.constructor.call(this)},initComponent:function(){_s4.GroupsAddWindow.superclass.initComponent.call(this);
var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spScrManager=a.getSecurityManager();this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this)}this.groupTab=_a(_7(_._3.Security.GroupsTab),"IExtNative").getNative()},getHtml:function(){return'<div id="'+(this.warningId=Ext.id())+'" class="x-sec-add-warn">'+_TR("SEC_VOLUME_ALERT")+'</div><table cellpadding="0" cellspacing="0" ><tr><td class="x-sec-dlglabel" id="'+
(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td class="x-sec-dlglabel">'+_TR("GID")+_TR("COLON")+'</td><td id="'+(this.tfGroupId=Ext.id())+'"></td></tr></table>'},getFooter:function(){return[{xtype:"uibutton",text:_TR("CREATE"),handler:this.onAddGroupClicked,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.requestInfo=undefined;this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.tfGID=
new Ext.UI.TextField({width:290,cellCls:"x-sec-editor",emptyText:_TR("SECURITY_AUTO"),maskRe:/^[0-9]*$/});this.tfName=new Ext.UI.TextField({width:290,inputMaxLength:31,cellCls:"x-sec-editor"});this.tfGID.render(this.tfGroupId);this.tfName.render(this.tfNameId);this.lName=Ext.get(this.lNameId)},onShow:function(){Ext.fly(this.warningId).setDisplayed(!!this.groupTab.novolumes);this.clear();this.center();this.tfName.focus(false,true)},onAddGroupClicked:function(){this.clearErrors();var a=false,b=this.tfName.getValue().trim(),
c=(new RegExp(/^[a-z_][a-z0-9_-]{0,30}$/i)).exec(b);if(!c||c.length!=1||c[0].length!=b.length){a=true;this.showError(this.lName);this.tfName.focus(false,true);if(this.tfName.tooltip)this.tfName.tooltip.enabled=true}_.each(this.spScrManager.getGroups(),function(d){if((d=_a(d,"_i2v"))&&d.getName()==b){a=true;this.showError(this.lName);this.tfName.focus(false,true);if(this.tfName.tooltip)this.tfName.tooltip.enabled=true;return false}},this);if(!a){this.hide();this.requestInfo={name:b};this.spScrManager.addGroup(this.tfGID.getValue().trim(),
b,"security-add-group")}},clear:function(){this.clearErrors();this.clearValues()},clearErrors:function(){if(this.tfName.tooltip)this.tfName.tooltip.enabled=false;this.lName.removeClass("x-sec-label-error")},clearValues:function(){this.tfGID.setValue("");this.tfName.setValue("")},showError:function(a){a.addClass("x-sec-label-error")}});_._2("_s4");
_s4.SecondaryMembersGroup=_._1(_._3.Security.SecondaryMembersGroup,_8("_i2y"),Ext.Container,IExtNative,{constructor:function(){_.apply(this,{dirty:true});_s4.SecondaryMembersGroup.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this)}this.on("afterrender",this.onReady,
this)},initComponent:function(){_s4.SecondaryMembersGroup.superclass.initComponent.apply(this,arguments)},onReady:function(){this.el.update('<table cellpadding="0" cellspacing="0" class="x-sec-inspector-table" style="margin-top: 20px;"><tr><td/></tr><tr><td id="'+(this.tfSearchId=Ext.id())+'"></td></tr><tr><td ><table class="x-sec-inspector-table ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td class="x-sec-inspector-grid-hname">'+_TR("NAME")+'</td></tr></table><div id="'+
(this.userDataNodeId=Ext.id())+'" style="display:none" class="x-sec-inspector-grid"></div><div id="'+(this.userEmptyNodeId=Ext.id())+'" class="x-sec-inspector-grid"><table class="x-sec-inspector-table ui-fwgrid-row" cellpadding="0" cellspacing="0"><tr><td class="x-sec-inspector-grid-empty">'+_TR("EMPTY")+"</td></tr></table></div></td></tr></table>");this.usersDataNode=Ext.get(this.userDataNodeId);this.usersEmptyNode=Ext.get(this.userEmptyNodeId);this.usersScroller=new Ext.UI.Scroller({dom:this.usersDataNode.dom,
type:"vertical"});this.usersScroller.reg();Ext.get(this.tfSearchId).insertHtml("beforeEnd",'<div class="x-frontview-btn-search" style="float:right; margin-left: 5px;"><div class="ui-roundbutton-icon"></div></div>');this.tfSearch=new Ext.UI.TextField({cls:"x-sec-inspsearch",width:150,enableKeyEvents:true,emptyText:_TR("FILTER_BY_NAME"),listeners:{keyup:this.onSearchClick,specialkey:this.onSpecialKeyPress,change:this.onSearchClick,scope:this}});this.tfSearch.render(this.tfSearchId)},populate:function(a){this.tfSearch.reset();
this.group=a;this.dirty&&this.populateUsers();this.group&&this.filterValues(true)},populateUsers:function(){var a="",b=this.spScrManager.getUsers();this.items=[];if(b&&b!=_4&&b.length!=0)for(var c=0;c<b.length;++c){user=_a(b[c],"_i2z");this.items.push({name:user.getName(),uid:user.getId(),group:user.getGroupName(),user:user})}for(c=0;c<this.items.length;++c)a+='<table id="'+(this.items[c].itemNodeId=Ext.id())+'" class="x-sec-inspector-table" cellpadding="0" cellspacing="0"><tr><td id="'+
(this.items[c].selectedNodeId=Ext.id())+'" class="x-sec-inspector-grid-cell" style="width:14px;"></td><td><div class="x-sec-inspector-grid-cell-name x-ellipsis">'+this.items[c].name+"</div></td></tr></table>";this.usersDataNode.update(a);for(c=0;c<this.items.length;++c){a=new Ext.UI.Checkbox({item:this.items[c]});a.render(this.items[c].selectedNodeId);this.items[c].check=a;this.items[c].row=Ext.get(this.items[c].itemNodeId)}this.dirty=false},filterValues:function(a){var b=-1,c=true,d=[];this.group.getSecondaryMembers()!=
_4&&_.each(this.group.getSecondaryMembers(),function(i){i=_a(i,"_i2z");d.push(i.getId())},this);for(var f=this.group.getName(),e=0;e<this.items.length;++e){var g=this.items[e],h=g.row;if((new RegExp(RegExp.escape(this.tfSearch.getValue()),"gi")).test(g.name)){h.setDisplayed(true);h.removeClass("ui-fwgrid-row").removeClass("ui-fwgrid-rowalt");h.addClass("ui-fwgrid-row"+(++b%2==1?"alt":""));c=false}else h.setDisplayed(false);if(a)if(g.group==f){g.check.setValue(true);g.check.disable()}else{g.check.enable();
g.check.setValue(d.indexOf(g.uid)!=-1)}}this.usersDataNode.setDisplayed(!c);this.usersEmptyNode.setDisplayed(c)},onSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ESC:this.tfSearch.setValue("");return false}},onSearchClick:function(a,b){if(b)if(b.stopEvent)b.stopEvent();else return;this.filterValues(false)},_i2y:{_o2:function(a,b){switch(b){case "sync-update-users":case "sync-update-groups":this.dirty=true;break}return _5}}});_._2("_s4");
_s4.GroupGeneralGroup=Ext.extend(Ext.Container,{constructor:function(a){this.cls="x-security-group-general";_s4.GroupGeneralGroup.superclass.constructor.call(this,a);this.on("afterrender",this.onReady,this);if(a=_a(_7(_1.CLSIDS.Device5200),"_i2"))this.spScrManager=a.getSecurityManager()},onReady:function(){this.tfName=new Ext.UI.TextField({width:320,inputMaxLength:31});this.el.update('<table cellpadding="0" cellspacing="0" style="float: right;"><tr><td id="'+
(this.nameLblId=Ext.id())+'" class="x-sec-dlglabel">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>');this.tfName.render(this.tfNameId)},populate:function(a,b){this.clearErrors();if(this.group=a){this.tfName.setValue(a.getName());this.tfName.setDisabled(b)}else{this.tfName.setValue("");this.tfName.setDisabled(true)}},clearErrors:function(){_.each([this.nameLblId],function(a){Ext.fly(a).removeClass("x-sec-label-error")})},validate:function(){this.clearErrors();
var a=true,b=this.tfName.getValue().trim(),c=(new RegExp(/^[a-z_][a-z0-9_-]{0,30}$/i)).exec(b);if(!c||c.length!=1||c[0].length!=b.length){a=false;Ext.fly(this.nameLblId).addClass("x-sec-label-error");this.tfName.focus(false,true)}_.each(this.spScrManager.getGroups(),function(d){if((d=_a(d,"_i2v"))&&d.getId()!=this.group.getId()&&d.getName()==b){a=false;Ext.fly(this.nameLblId).addClass("x-sec-label-error");this.tfName.focus(false,true);return false}},this);return a}});
_._2("_","_._3","_._3.NetworkSubSys");_._3.NetworkSubSys.NetworkTab="NetworkSubSys.NetworkTab";_._3.NetworkSubSys.LinksTab="NetworkSubSys.LinksTab";_._3.NetworkSubSys.RoutesTab="NetworkSubSys.RoutesTab";_._3.NetworkSubSys.RoutesPanel="NetworkSubSys.RoutesPanel";_._3.NetworkSubSys.ProxyPanel="NetworkSubSys.ProxyPanel";Ext.namespace("_s5");
_s5.NetworkTab=_._1(_._3.NetworkSubSys.NetworkTab,_s0.TabItem,ISystemFrameTab,_i4,{card:true,help:"network_tab",constructor:function(){_s5.NetworkTab.superclass.constructor.apply(this,arguments)},ISystemFrameTab:{getTitle:function(){return _TR("NETWORK")},getCfg:function(){return{id:"networks-tab"}}}});_s0.RegisterTab(_._3.System.Frame,_._3.NetworkSubSys.NetworkTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s5");
_s5.LinksTab=_._1(_._3.NetworkSubSys.LinksTab,_s0.TabItem,ISystemFrameTab,_i24,{help:"network_tab_links",constructor:function(){_s5.LinksTab.superclass.constructor.apply(this,arguments);this.lparams=["network-update-nics","sync-update-nics","network-commit-nic","network-create-vnic","network-remove-vnic","network-commit-vnic","network-create-bond","network-commit-bond","network-append-bondnic","network-remove-bond","network-update-bonds",
"network-add-vlan","network-commit-vlan","network-remove-vlan","network-update-vlans"];this.updatesCount=0;this.on("tabinitialize",this.onTabInitialized,this)},initComponent:function(){this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.networkManager=a.getNetworkManager();_a(this.networkManager,
"_i1").Advise(this);this.networkVLANManager=a.getNetworkVLANManager();_a(this.networkVLANManager,"_i1").Advise(this);this.spSYSManager=a.getSystemManager();_a(this.spSYSManager,"_i1").Advise(this);_s5.LinksTab.superclass.initComponent.apply(this)},onTabInitialized:function(){this.mask=new Ext.UI.LoadMask(this.getMaskedEl(),{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0});new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",
html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),renderTo:this.buttonsId,listeners:{afterrender:function(a){a.el.on("click",function(){this.refresh()},this)},scope:this}});this.refresh()},refresh:function(){this.isVlansLoaded=this.isBondsLoaded=this.isNicsLoaded=false;this.networkManager.updateNICS("network-update-nics");this.networkManager.updateBONDS("network-update-bonds");this.networkVLANManager.UpdateVLANs("network-update-vlans");return _5},checkTeamingLinkVisibility:function(){var a=
_a(this.spSYSManager.getSysInfo(),"_i43");if(a){_a(this.spSYSManager,"_i1").Unadvise(this);if((a.getModel()+"").toLowerCase().replace(/\s/g,"")!="readynas102"&&a.getRackmount()=="0")if(!this.teamingLink&&this.content.el)this.teamingLink=this.content.el.createChild({tag:"div",cls:"x-network-links-note",html:_TR("LINKS_NOTE")})}},populateAdapters:function(){if(this.isNicsLoaded&&this.isBondsLoaded&&this.isVlansLoaded){var a=this.networkManager.getNICS(),b=this.networkManager.getBONDS(),
c=_a(this,"IPanelList");c.removeAll();if(a!=_4&&a.length!=0){a.sort(function(d,e){d=_a(d,"_i27");e=_a(e,"_i27");if(d.getName()==e.getName())return 0;else if(d.getName()>e.getName())return 1;return-1});_.each(a,function(d){d=new _s5.LinkPanel({type:"nic",adapter:_a(d,"_i27")});c.addPanel(d,"IPanelItem")},this)}_.each(b,function(d){d=new _s5.LinkPanel({type:"bond",adapter:_a(d,"_i1y")});c.addPanel(d,
"IPanelItem")},this);this.teamingLink&&this.content.el.appendChild(this.teamingLink)}},showProgress:function(){this.updatesCount||this.mask&&this.mask.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.mask&&this.mask.hide()},reportError:function(a){_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})},
ISystemFrameTab:{getTitle:function(){return _TR("NETWORK_LINKS")},getCfg:function(){return{id:"networks-links-tab",cls:"x-network-links-btn"}}},_i24:{_o1:function(a,b){this.lparams.indexOf(b)!=-1&&this.showProgress()},OnBONDCreated:function(){this.refresh()},OnNetworkError:function(a){this.reportError(a.getErrorCode());this.refresh()},OnVNICUpdated:function(){this.refresh()},_o2:function(a,b){if(b=="network-update-nics")this.isNicsLoaded=true;else if(b=="network-update-bonds")this.isBondsLoaded=
true;if(b=="network-update-nics"||b=="network-update-bonds")this.populateAdapters();return _5},_o3:function(a,b,c){if(this.lparams.indexOf(c)!=-1)if(a!=_5&&a!=E_PENDING){this.hideProgress();a=_a(b,"_io").getLastNMLError();!a||this.reportError(a.getErrorCode())}else if(a==E_PENDING)this.hideProgress.defer(5E3,this);else switch(c){case "network-commit-nic":case "network-commit-bond":case "network-append-bondnic":this.refresh.defer(5E3,this);this.hideProgress.defer(5E3,this);break;
default:this.hideProgress();break}}},INetworkVLANManagerEvents:{_o1:function(a,b){this.lparams.indexOf(b)!=-1&&this.showProgress()},_o2:function(a,b){if(b=="network-update-vlans"){this.isVlansLoaded=true;this.populateAdapters()}},_o3:function(a,b,c){if(this.lparams.indexOf(c)!=-1){if(a!=_5&&a!=E_PENDING){a=_a(b,"_io").getLastNMLError();!a||this.reportError(a.getErrorCode())}else switch(c){case "network-add-vlan":case "network-remove-vlan":case "network-commit-vlan":this.refresh();
break}this.hideProgress()}}},_i45:{_o2:function(a,b){_a(a,"_i44");switch(b){case "system-hardware-update-sysinfo":case "system-hardware-sync-sysinfo":this.checkTeamingLinkVisibility();break}}}});_s0.RegisterTab(_._3.NetworkSubSys.NetworkTab,_._3.NetworkSubSys.LinksTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s5");
_s5.RoutesTab=_._1(_._3.NetworkSubSys.RoutesTab,_s0.TabItem,ISystemFrameTab,_i24,{help:"network_tab_routes",constructor:function(){_s5.RoutesTab.superclass.constructor.apply(this,arguments);this.on("tabinitialize",this.TabInitialize,this)},initComponent:function(){this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';
var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.networkManager=a.getNetworkManager();_a(this.networkManager,"_i1").Advise(this)}_s5.RoutesTab.superclass.initComponent.apply(this)},oninitialized:function(){var a=_a(this,"IPanelList");a.addPanel(_a(_7(_._3.NetworkSubSys.RoutesPanel),"IPanelItem"));a.addPanel(_a(_7(_._3.NetworkSubSys.ProxyPanel),"IPanelItem"));(new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",
html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),listeners:{afterrender:function(b){b.el.on("click",function(){this.refresh()},this)},scope:this}})).render(this.buttonsId)},refresh:function(){_.each(_a(this,"IPanelList").getPanelItems(),function(a){a.refresh()},this);return _5},ISystemFrameTab:{getTitle:function(){return _TR("SPECIFIC_SETTINGS")},getCfg:function(){return{id:"networks-advanced-tab",cls:"x-network-adv-btn"}}},TabInitialize:function(){this.oninitialized();
this.refresh()}});_s0.RegisterTab(_._3.NetworkSubSys.NetworkTab,_._3.NetworkSubSys.RoutesTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s5");
_s5.LinkPanel=_._1(_s0.BasePanel,{panelCls:"x-network-panel-network",constructor:function(a){this.type=a.type;this.adapter=a.adapter;_s5.LinkPanel.superclass.constructor.apply(this,a);a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.networkManager=a.getNetworkManager();this.networkVLANManager=a.getNetworkVLANManager();this.tplLink=(new Ext.XTemplate('<div class="x-network-panel-network-tpl"><div class="x-network-panel-network-pict {iconCls}"><tpl if="!!values.num"><div class="'+
this.panelCls+'-bcountcontainer"><div class="'+this.panelCls+'-bcount">{num}</div></div></tpl><tpl if="!!values.optBtn"><div class="'+this.panelCls+'-optbtn x-frontview-btn-properties-large" id={optBtn}></div></tpl></div><table cellpadding="0" cellspacing="0" style="width: 290px;" class="'+this.panelCls+'-table"><tpl if="!!values.name"><tr><td class="x-network-panel-name"></td><td class="x-network-panel-value x-network-panel-header">{name}</td></tr></tpl><tpl if="!!values.mac"><tr><td class="x-network-panel-name">'+
_TR("MAC_ADDRESS")+':</td><td class="x-network-panel-value x-selectable">{mac}</td></tr></tpl><tr><td class="x-network-panel-name">'+_TR("MTU")+':</td><td class="x-network-panel-value">{mtu}</td></tr><tpl if="!!values.vlanId"><tr><td class="x-network-panel-name">'+_TR("VLAN_ID")+':</td><td class="x-network-panel-value">{vlanId}</td></tr></tpl><tpl if="!!values.bondOver"><tr><td class="x-network-panel-name">'+_TR("OVER")+':</td><td class="x-network-panel-value">{bondOver}</td></tr></tpl><tr><td class="x-network-panel-name">'+
_TR("IP_SETTINGS")+':</td><td class="x-network-panel-value x-selectable">{ipType}</td></tr><tr><td class="x-network-panel-name">'+_TR("IP_ADDRESS")+':</td><td class="x-network-panel-value x-selectable">{ip}</td></tr><tr><td class="x-network-panel-name">'+_TR("IPV6_LOCAL_ADDRESS")+':</td><td class="x-network-panel-value x-ellipsis x-selectable" title="{ipv6Local}/{ipv6LocalPrefix}">{ipv6Local}/{ipv6LocalPrefix}</td></tr><tr><td class="x-network-panel-name">'+_TR("IPV6_ADDRESS")+':</td><td class="x-network-panel-value x-ellipsis x-selectable" title="{ipv6}/{ipv6Prefix}">{ipv6}/{ipv6Prefix}</td></tr><tpl if="!!values.bandwidth"><tr><td class="x-network-panel-name x-ellipsis">'+
_TR("STORAGE_IOSTATS_BANDWIDTH")+':</td><td class="x-network-panel-value x-selectable">{bandwidth}</td></tr></tpl><tpl if="!!values.teamingMode"><tr><td class="x-network-panel-name">'+_TR("TEAMING_MODE")+':</td><td class="x-network-panel-value">{teamingMode}</td></tr></tpl></table><div class="x-clear"></div></div>')).compile()},onReady:function(){if(this.type&&this.adapter){var a=this.type,b=this.adapter,c=b.getName(),d,e=b.getState(),f={type:this.type,mac:this.formatMACAddressLabel(b.getMACAddress()),
mtu:b.getMTU(),ip:b.getIPAddress(),ipv6Local:b.getIPv6AddressLocal(),ipv6LocalPrefix:b.getPrefixLengthLocal(),ipv6:b.getIPv6Address(),ipv6Prefix:b.getPrefixLength()};if(a=="nic"){d=b.getSpeed();f.iconCls=this.panelCls+"-im-"+a+(d>1E3?"-10gb":"")+(e=="down"?"-disable":"");f.ipType=_TR(b.getIPType())+", "+_TR(b.getIPv6Type());f.bandwidth=this.formatSpeedLabel(d,e)}else if(a=="bond"){d=b.getOver().split(" ").length;f.iconCls=this.panelCls+"-im-"+a+(e=="down"?"-disable":"")+(d<4?"-"+d:"");f.num=d;f.ipType=
_TR(b.getIPType()||"ipv4dhcp");f.bondOver=b.getOver();f.teamingMode=this.formatTeamingMode(b.getMode(),b.getPolicy(),b.getBackupPrimary())}this.updateTitle(c);new Ext.UI.RoundButton({width:28,height:28,renderTo:this.topPlace,iconCls:"x-frontview-btn-properties-large",listeners:{click:this.onContextMenu,scope:this}});this.bottomPlace.update(this.tplLink.apply(f));a=this.networkVLANManager.getVLANs();var g="";this.hashVlans={};_.each(a,function(h){if(h.getBase()==c){g+=this.tplLink.apply({iconCls:this.panelCls+
"-im-vlan"+(h.getSpeed()>1E3?"-10gb":"")+(h.getState()=="down"?"-disable":""),name:h.getName(),optBtn:"networks-vlan-optbtn-"+h.getName(),mtu:h.getMTU(),vlanId:h.getId(),ipType:_TR(h.getIPType())+", "+_TR(h.getIPv6Type()),ip:h.getIPAddress(),ipv6Local:h.getIPv6AddressLocal(),ipv6LocalPrefix:h.getPrefixLengthLocal(),ipv6:h.getIPv6Address(),ipv6Prefix:h.getPrefixLength()});this.hashVlans[h.getName()]=h}},this);this.content.update(g);this.content.select("."+this.panelCls+"-optbtn").on("click",this.onVlanContextMenu,
this)}},formatMACAddressLabel:function(a){if(!a||a.toString().length==0)return"";a=a.toUpperCase().split(":");for(var b=a[0].length==1?"0"+a[0]:a[0],c=1;c<a.length;++c)b=b+":"+(a[c].length==1?"0"+a[c]:a[c]);return b},formatSpeedLabel:function(a){return a<1E3?String.format("{0} {1}",a,_TR("MBPS")):String.format("{0} {1}",a/1E3,_TR("GBPS"))},formatTeamingMode:function(a,b,c){var d={lacp:_TR("IEEE 802.3ad LACP"),backup:_TR("Active Backup"),transmit:_TR("Transmit Load Balancing"),adaptive:_TR("Adaptive Load Balancing"),
robin:_TR("Round-Robin"),xor:_TR("XOR"),broadcast:_TR("Broadcast")}[a];switch(a){case "lacp":case "xor":a={l2:_TR("BOND_LAYER_2"),"l2+3":_TR("BOND_LAYER_23"),"l3+4":_TR("BOND_LAYER_34")};d+=" ("+a[b]+")";break;case "backup":d+=" ("+c+")";break}return d},onContextMenu:function(a){this.menu||this.createMenu();var b=this.networkManager.getNICS();this.menuItemDelete.setVisible(this.type=="bond");this.menuItemBond.setVisible(this.type=="nic"&&b!=_4&&b.length>1&&this.adapter.getState()!="down");this.menuItemVLAN.setVisible(true);
delete this.menu.vlan;this.menu.show(a.el)},onVlanContextMenu:function(a,b){var c,d;if(b&&b.id&&(c=b.id.split("-").pop())&&this.hashVlans&&(d=this.hashVlans[c])){this.menu||this.createMenu();this.menuItemDelete.setVisible(true);this.menuItemBond.setVisible(false);this.menuItemVLAN.setVisible(false);this.menu.vlan=d;this.menu.show(b)}},createMenu:function(){this.menuItemDelete=new Ext.menu.Item({text:_TR("DELETE"),ctCls:"x-frontview-icon-delete",commandName:"delete"});this.menuItemBond=new Ext.menu.Item({text:_TR("NEW_BOND_MENU"),
ctCls:"x-frontview-icon-bond",commandName:"bond"});this.menuItemVLAN=new Ext.menu.Item({text:_TR("VLAN_ADD"),ctCls:"x-frontview-icon-add-vlan",commandName:"vlan"});var a=new Ext.menu.Item({text:_TR("SETTINGS"),ctCls:"x-frontview-icon-settings",commandName:"settings"});this.menu=new Ext.UI.Menu({cls:"x-network-menu",items:[this.menuItemDelete,this.menuItemBond,this.menuItemVLAN,a],listeners:{itemclick:function(b){switch(b.commandName){case "delete":if(this.menu.vlan)Ext.UI.MessageBox.confirm({title:_TR("VLAN_DELETE_CONFIRM_TITLE"),
msg:String.format(_TR("WARN_DELETION"),this.menu.vlan.getName()),fn:function(c){c=="yes"&&this.networkVLANManager.RemoveVLAN("network-remove-vlan",this.menu.vlan)},scope:this});else this.type=="bond"&&Ext.UI.MessageBox.confirm({title:_TR("BOND_DELETE_CONFIRM_TITLE"),msg:String.format(_TR("WARN_DELETION"),this.adapter.getName()),fn:function(c){c=="yes"&&this.networkManager.RemoveBOND(this.adapter,"network-remove-bond")},scope:this});break;case "bond":if(!this.newBondWindow)this.newBondWindow=new _s5.NewBondWindow;
b=this.newBondWindow;b.setNics(this.adapter);b.show().center();break;case "vlan":if(!this.wndNewVLAN)this.wndNewVLAN=new _s5.NewVLAN;this.wndNewVLAN.show();this.wndNewVLAN.loadArgs(this.adapter);break;case "settings":if(this.menu.vlan){if(!this.vlanPropWindow)this.vlanPropWindow=new _s5.VLANOptionsWindow;b=this.vlanPropWindow;b.update(this.menu.vlan);b.show().center()}else if(this.type=="nic"){if(!this.nicPropWindow)this.nicPropWindow=new _s5.VNICOptionsWindow;
b=this.nicPropWindow;b.update(this.adapter);b.show().center()}else if(this.type=="bond"){if(!this.bondPropWindow)this.bondPropWindow=new _s5.BondOptionsWindow;b=this.bondPropWindow;b.update(this.adapter);b.show().center()}break}},scope:this}})}});Ext.namespace("_s5");
_s5.RoutesPanel=_._1(_._3.NetworkSubSys.RoutesPanel,_s0.BasePanel,{panelCls:"x-network-panel-network",help:"network_panel_routes",constructor:function(){this.title=_TR("ROUTES");_s5.RoutesPanel.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.networkManager=a.getNetworkManager();_a(this.networkManager,"_i1").Advise(this);this.networkVLANManager=a.getNetworkVLANManager();
_a(this.networkVLANManager,"_i1").Advise(this)},onReady:function(){this.boxRoutes=new _s5.Routes({renderTo:this.content})},IPanelItem:{refresh:function(){this.networkManager.updateNICS("network-update-nics");this.networkManager.updateBONDS("network-update-bonds");this.networkVLANManager.UpdateVLANs("network-update-vlans")}},_i24:{_o2:function(a,b){if(b=="network-update-nics"||b=="network-update-bonds")this.boxRoutes.populate()}},INetworkVLANManagerEvents:{_o2:function(a,
b){b=="network-update-vlans"&&this.boxRoutes.populate()}}});Ext.namespace("_s5");
_s5.ProxyPanel=_._1(_._3.NetworkSubSys.ProxyPanel,_s0.BasePanel,{panelCls:"x-network-panel-network",help:"network_panel_proxy",constructor:function(){this.title=_TR("PROXY");_s5.ProxyPanel.superclass.constructor.apply(this,arguments);this.spNetProxyManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getNetworkProxyManager();_a(this.spNetProxyManager,"_i1").Advise(this)},onReady:function(){new Ext.Container({items:[new Ext.Container({cls:"x-network-proxy-list-btns",
items:[this.bRemove=new Ext.UI.RoundButton({cls:"x-network-proxy-list-btn x-frontview-btn-minus-small",disabled:true,width:30,height:30,listeners:{click:this.onRemoveClick,scope:this}}),this.bAdd=new Ext.UI.RoundButton({cls:"x-network-proxy-list-btn x-frontview-btn-plus-small",width:30,height:30,listeners:{click:this.onAddClick,scope:this}}),this.bEdit=new Ext.UI.RoundButton({cls:"x-network-proxy-list-btn x-frontview-btn-properties-small",disabled:true,width:30,height:30,listeners:{click:this.onEditClick,
scope:this}})]}),new Ext.Component({cls:"x-clear"}),this.boxDVHeader=new Ext.Container({html:'<table class=" x-network-proxy-list-row" cellpadding="0" cellspacing="0"><tr><td><div class="x-ellipsis x-network-proxy-with-icon">'+_TR("TYPE")+'</div></td><td><div class="x-ellipsis">'+_TR("ADDRESS")+'</div></td><td><div class="x-ellipsis">'+_TR("PORT")+'</div></td><td><div class="x-ellipsis">'+_TR("USER_NAME")+"</div></td></tr></table>",cls:"ui-fwgrid-header"}),this.dv=new Ext.DataView({overClass:"ui-fwgrid-rowhover",
selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["protocol","address","port","username","spServer"]}),singleSelect:true,blockRefresh:true,scrollOffset:0,style:"max-height: 300px;",itemSelector:"table",tpl:new Ext.XTemplate('<tpl for="."><table  class="ui-fwgrid-row x-network-proxy-list-row" cellpadding="0" cellspacing="0"><tr><td><div class="x-ellipsis x-network-proxy-with-icon x-network-proxy-icon">{protocol}</div></td><td><div class="x-ellipsis">{address}</div></td><td><div class="x-ellipsis">{port}</div></td><td><div class="x-ellipsis">{username}</div></td></tr></table></tpl>'),
listeners:{selectionchange:this.onSelectionChange,scope:this}})],renderTo:this.content});(new Ext.UI.Scroller({dom:this.dv.el.dom,type:"vertical"})).reg();this.loadMask=new Ext.UI.LoadMask(this.bwrap,{frame:false})},populate:function(){var a=[],b=this.spNetProxyManager.getServers();b=b!=_4?b:[];_.each(b,function(c){a.push({protocol:c.getProtocol().toUpperCase(),address:c.getAddress(),port:c.getPort(),username:c.getUsername(),spServer:c})},this);this.dv.getStore().loadData(a);this.dv.refresh();
this.bAdd.setDisabled(a.length>=2)},onSelectionChange:function(a,b){this.bRemove.setDisabled(!b.length);this.bEdit.setDisabled(!b.length)},getWndSettings:function(){if(!this.wndSettings)this.wndSettings=new _s5.Proxy.Settings;return this.wndSettings},onAddClick:function(){this.getWndSettings().show()},onEditClick:function(){this.getWndSettings().show(this.dv.getSelectedRecords()[0].get("spServer"))},onRemoveClick:function(){var a=this.dv.getSelectedRecords();if(a.length){var b=a[0];
Ext.UI.MessageBox.confirm({title:_TR("PROXY"),msg:_TR("WARN_DELETION_RECORD"),fn:function(c){if(c=="yes"){this.spNetProxyManager.RemoveServer("network-proxy-remove-server",b.get("spServer"));this.loadMask.show()}},scope:this})}},IPanelItem:{refresh:function(){this.spNetProxyManager.UpdateServers("network-proxy-fetch-servers")}},INetworkProxyManagerEvents:{_o3:function(a,b,c){if(c=="network-proxy-fetch-servers"||c=="network-proxy-remove-server"){this.loadMask.hide();if(a!=_5){if(b=_a(b,
"_io").getLastNMLError()){a=b.getErrorCode();if(b){b=b.getErrorDetails();c=_TR(a);_a(_7(_._3.ErrorReporter),"IErrorReporter").report(c,"Code: "+a,_2.ERROR,{windowTitle:_TR("PROXY"),title:"",subTitle:c+"<br />"+b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}else if(c=="network-proxy-fetch-servers")this.populate();else c=="network-proxy-remove-server"&&_a(this,"IPanelItem").refresh()}}}});Ext.namespace("_s5");
_s5.NewBondWindow=_._1(Ext.UI.Window,{help:"network_wnd_add_bond",constructor:function(){_.apply(this,{modal:true,width:610,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,title:_TR("NEW_BOND"),bodyCssClass:"x-network-newbonddialog",html:this.getHtml(),fbar:this.getFooter(),bondWithChks:[]});_s5.NewBondWindow.superclass.constructor.call(this)},initComponent:function(){_s5.NewBondWindow.superclass.initComponent.call(this);
this.on("afterrender",this.onAfterRender,this);this.on("show",this.onWShow,this);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a)this.networkManager=a.getNetworkManager();this.teamingMode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",listeners:{scope:this,collapse:this.onTeamingModeChange},store:new Ext.data.ArrayStore({fields:["id","text"],data:[["lacp",_TR("IEEE 802.3ad LACP")],["backup",_TR("Active Backup")],["transmit",_TR("Transmit Load Balancing")],
["adaptive",_TR("Adaptive Load Balancing")],["robin",_TR("Round-Robin")],["xor",_TR("XOR")],["broadcast",_TR("Broadcast")]]}),valueField:"id",displayField:"text",value:"robin"});this.hashL2=new Ext.UI.Radio({cls:"x-network-hashchk",boxLabel:_TR("BOND_LAYER_2"),strValue:"l2",name:"bond_hash"});this.hashL3=new Ext.UI.Radio({cls:"x-network-hashchk",boxLabel:_TR("BOND_LAYER_23"),strValue:"l2+3",name:"bond_hash"});this.hashL4=new Ext.UI.Radio({cls:"x-network-hashchk",boxLabel:_TR("BOND_LAYER_34"),strValue:"l3+4",
name:"bond_hash"});this.hashs=[this.hashL2,this.hashL3,this.hashL4];this.primaryDevice=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[]}),valueField:"id",displayField:"text"});this.hashs=[this.hashL2,this.hashL3,this.hashL4]},getHtml:function(){return'<table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel">'+_TR("ADAPTER")+':</td><td id="'+(this.adapterId=Ext.id())+'" /></tr><tr><td class="x-network-dlglabel">'+
_TR("BOND_WITH")+':</td><td id="'+(this.bondWithId=Ext.id())+'" /></tr><tr><td class="x-network-dlglabel">'+_TR("TEAMING_MODE")+':</td><td id="'+(this.teamingId=Ext.id())+'" /></tr><tr><td style="height: 10px;" colspan="2">&nbsp;</td></tr><tr id="'+(this.hashTypeRowId=Ext.id())+'" ><td class="x-network-dlglabelhash">'+_TR("HASH_TYPE")+':</td><td><div id="'+(this.hashTypeId=Ext.id())+'"></div></td></tr><tr id="'+(this.primaryDevRowId=Ext.id())+'"><td class="x-network-dlglabel">'+_TR("PRIMARY_DEVICE")+
':</td><td><div id="'+(this.primaryDevId=Ext.id())+'"></div></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("CREATE"),width:100,scope:this,acceptbtn:true});a.on("click",this.onCreateClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,scope:this,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},onAfterRender:function(){this.teamingMode.render(this.teamingId);this.hashL2.render(this.hashTypeId);this.hashL3.render(this.hashTypeId);
this.hashL4.render(this.hashTypeId);this.primaryDevice.render(this.primaryDevId)},onWShow:function(){Ext.fly(this.adapterId).update(this.nic1.getName());this.renderBondWith();this.primaryDevice.getStore().loadData([[this.nic1,this.nic1.getName()]]);this.primaryDevice.setValue(this.nic1);this.teamingMode.setValue("robin");Ext.fly(this.hashTypeRowId).setDisplayed(false);Ext.fly(this.primaryDevRowId).setDisplayed(false);this.hashL2.setValue(true);this.center();this.teamingMode.focus(false,true)},renderBondWith:function(){for(var a=
this.networkManager.getNICS(),b=0;b<this.bondWithChks.length;++b)this.bondWithChks[b].destroy();this.bondWithChks=[];if(a!=_4&&a.length!=0)for(b=0;b<a.length;++b){var c=_a(a[b],"_i27"),d=c.getName();this.nic1.getName()!=d&&this.bondWithChks.push(new Ext.UI.Checkbox({cls:"x-network-nicchk",boxLabel:d,adapter:c,renderTo:this.bondWithId,listeners:{check:this.onBondWithChange,scope:this}}))}},onCreateClick:function(){var a="";_.each(this.hashs,function(d){if(d.getValue()){a+=d.strValue;
return false}});for(var b=[this.nic1],c=0;c<this.bondWithChks.length;++c)this.bondWithChks[c].getValue()&&b.push(this.bondWithChks[c].adapter);if(this.networkManager&&b.length>1){this.networkManager.AppendG2BOND(b,this.teamingMode.getValue(),a,this.primaryDevice.getValue(),"network-create-bond");this.hide()}},onTeamingModeChange:function(a){a=a.getValue();Ext.fly(this.hashTypeRowId).setDisplayed(a==="lacp"||a==="transmit"||a==="xor");Ext.fly(this.primaryDevRowId).setDisplayed(a==="backup"||a==="transmit"||
a==="adaptive")},setNics:function(a){this.nic1=a},onBondWithChange:function(){var a=[];a.push([this.nic1,this.nic1.getName()]);for(var b=0;b<this.bondWithChks.length;++b)this.bondWithChks[b].getValue()&&a.push([this.bondWithChks[b].adapter,this.bondWithChks[b].adapter.getName()]);this.primaryDevice.getStore().loadData(a);this.primaryDevice.setValue(this.nic1)}});Ext.namespace("_s5");
_s5.BondOptionsWindow=_._1(Ext.UI.Window,{modal:true,width:510,height:600,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,cls:"x-network-nicsettingswnd",help:"network_wnd_edit_bond",constructor:function(){this.html=this.getHtml();this.fbar=this.getFooter();_s5.BondOptionsWindow.superclass.constructor.apply(this,arguments);this.networkManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getNetworkManager();this.dnsserversv4=
{};this.dnsserversv6={}},getFooter:function(){return[{xtype:"uibutton",text:_TR("APPLY"),handler:function(){this.onApplyClick()},scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}]},getHtml:function(){return'<div id="'+(this.scId=Ext.id())+'"></div><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt" id="'+(this.gTabId=Ext.id())+'"><tr><td class="x-network-dlglabel">'+_TR("NAME")+_TR("COLON")+'</td><td><div id="'+
(this.nameId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.mtuLblId=Ext.id())+'" class="x-network-dlglabel">'+_TR("MTU")+_TR("COLON")+'</td><td><div id="'+(this.mtuId=Ext.id())+'"></div></td></tr></table><div id="'+(this.ipv4TabId=Ext.id())+'"><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel">'+_TR("CONFIGURE_IPV4")+_TR("COLON")+'</td><td id="'+(this.ipSettingsId=Ext.id())+'" /></tr><tr><td id="'+(this.ipv4Title=Ext.id())+'" class="x-network-dlglabel">'+
_TR("IPV4_ADDRESS")+_TR("COLON")+'</td><td><div id="'+(this.ipId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.subnetTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("SUBNET_MASK")+_TR("COLON")+'</td><td><div id="'+(this.subnetId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.gatewayTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("ROUTER")+_TR("COLON")+'</td><td><div id="'+(this.gatewayId=Ext.id())+'"></div></td></tr></table><div id="'+(this.dnsv4Id=Ext.id())+'"></div><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td id="'+
(this.searchDomainTitle=Ext.id())+'">'+_TR("SEARCH_DOMAINS")+_TR("COLON")+'</td><td id="'+(this.searchDomainsId=Ext.id())+'" /></tr></table></div><div id="'+(this.ipv6TabId=Ext.id())+'"><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel">'+_TR("CONFIGURE_IPV6")+_TR("COLON")+'</td><td id="'+(this.ipv6modeId=Ext.id())+'" /></tr><tr><td id="'+(this.routerTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("ROUTER")+_TR("COLON")+'</td><td><div id="'+
(this.routerId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.ipv6LocalTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("IPV6_LOCAL_ADDRESS")+_TR("COLON")+'</td><td><div id="'+(this.ipv6LocalId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.ipv6Title=Ext.id())+'" class="x-network-dlglabel">'+_TR("IPV6_ADDRESS")+_TR("COLON")+'</td><td><div id="'+(this.ipv6Id=Ext.id())+'"></div></td></tr><tr><td id="'+(this.prefixTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("PREFIX_LENGTH")+_TR("COLON")+
'</td><td><div id="'+(this.prefixId=Ext.id())+'"></div></td></tr></table><div id="'+(this.dnsv6Id=Ext.id())+'"></div></div><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt" id="'+(this.modeTabId=Ext.id())+'" style="margin-top:40px;"><tr><td class="x-network-dlglabel">'+_TR("TEAMING_MODE")+_TR("COLON")+'</td><td id="'+(this.teamingId=Ext.id())+'" /></tr><tr id="'+(this.hashTypeRowId=Ext.id())+'" ><td class="x-network-dlglabel">'+_TR("HASH_TYPE")+_TR("COLON")+'</td><td><div id="'+
(this.hashTypeId=Ext.id())+'"></div></td></tr><tr id="'+(this.primaryDevRowId=Ext.id())+'" style="display: none"><td class="x-network-dlglabel">'+_TR("PRIMARY_DEVICE")+_TR("COLON")+'</td><td><div id="'+(this.primaryDevId=Ext.id())+'"></div></td></tr></table>'},afterRender:function(){_s5.BondOptionsWindow.superclass.afterRender.apply(this,arguments);this.genTab=Ext.get(this.gTabId);this.genTab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv4Tab=Ext.get(this.ipv4TabId);this.ipv4Tab.setVisibilityMode(Ext.Element.DISPLAY);
this.ipv4Tab.hide();this.ipv6Tab=Ext.get(this.ipv6TabId);this.ipv6Tab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv6Tab.hide();this.modeTab=Ext.get(this.modeTabId);this.modeTab.setVisibilityMode(Ext.Element.DISPLAY);this.modeTab.hide();this.sCtrl=new Ext.UI.SegmentedControl({cls:"x-network-ipsettings",items:[new Ext.UI.SegmentedButton({text:_TR("GENERAL"),width:80,scope:this,click:this.onGeneralClick}),new Ext.UI.SegmentedButton({text:_TR("TCP_IPv4"),width:80,scope:this,click:this.onTCPIPv4Click}),
new Ext.UI.SegmentedButton({text:_TR("TCP_IPv6"),width:80,scope:this,click:this.onTCPIPv6Click}),new Ext.UI.SegmentedButton({text:_TR("Mode"),width:80,scope:this,click:function(){this.genTab.hide();this.ipv4Tab.hide();this.ipv6Tab.hide();this.modeTab.show()}})]});this.sCtrl.render(this.header.parent());this.name=new Ext.Component({cls:"x-network-valuelabel"});this.name.render(this.nameId);this.mtuLbl=Ext.get(this.mtuLblId);this.mtu=new Ext.UI.TextField({width:245,maskRe:/[0-9]/,tooltipCfg:{html:_TR("MTU_VNIC_ERROR_TIP")}});
this.mtu.render(this.mtuId);this.searchDomains=new Ext.UI.TextField({width:245,renderTo:this.searchDomainsId});this.searchDomainTitle=Ext.get(this.searchDomainTitle);this.ipv4mode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",listeners:{scope:this,select:this.onIpv4ModeChange,beforeselect:this.onIpv4ModeBChange},store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ipv4dhcp",_TR("IPV4_DHCP")],["ipv4custom",_TR("IPV4_STATIC")],["ipv4disable",_TR("DISABLE")]]}),valueField:"id",
displayField:"text",emptyText:_TR("OFF")});this.ipv4mode.render(this.ipSettingsId);this.ipv4Title=Ext.get(this.ipv4Title);this.subnetTitle=Ext.get(this.subnetTitle);this.gatewayTitle=Ext.get(this.gatewayTitle);this.routerTitle=Ext.get(this.routerTitle);this.ipv6Title=Ext.get(this.ipv6Title);this.ipv6LocalTitle=Ext.get(this.ipv6LocalTitle);this.prefixTitle=Ext.get(this.prefixTitle);this.ip=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.ip.render(this.ipId);this.ipLbl=new Ext.Component({cls:"x-network-valuelabel"});
this.ipLbl.render(this.ipId);this.subnet=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.subnet.render(this.subnetId);this.subnetLbl=new Ext.Component({cls:"x-network-valuelabel"});this.subnetLbl.render(this.subnetId);this.router=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.router.render(this.gatewayId);this.routerLbl=new Ext.Component({cls:"x-network-valuelabel"});this.routerLbl.render(this.gatewayId);this.ipv6mode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",
listeners:{scope:this,select:this.onIpv6ModeChange,beforeselect:this.onIpv6ModeBChange},store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ipv6auto",_TR("IPV6_AUTO")],["ipv6dhcp",_TR("IPV6_DHCP")],["ipv6custom",_TR("IPV6_STATIC")],["ipv6disable",_TR("DISABLE")]]}),valueField:"id",displayField:"text",emptyText:_TR("OFF")});this.ipv6mode.render(this.ipv6modeId);this.routerv6=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/});this.routerv6.render(this.routerId);this.routerv6Lbl=new Ext.Component({cls:"x-network-valuelabel"});
this.routerv6Lbl.render(this.routerId);this.ipv6Local=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/,readOnly:true});this.ipv6Local.render(this.ipv6LocalId);this.ipv6LocalLbl=new Ext.Component({cls:"x-network-valuelabel"});this.ipv6LocalLbl.render(this.ipv6LocalId);this.ipv6=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/});this.ipv6.render(this.ipv6Id);this.ipv6Lbl=new Ext.Component({cls:"x-network-valuelabel"});this.ipv6Lbl.render(this.ipv6Id);this.prefix=new Ext.UI.TextField({width:245});
this.prefix.render(this.prefixId);this.prefixLbl=new Ext.Component({cls:"x-network-valuelabel"});this.prefixLbl.render(this.prefixId);this.ipv4controls=[this.ip,this.subnet,this.router];this.ipv4lbls=[this.ipLbl,this.subnetLbl,this.routerLbl];this.ipv4titles=[this.ipv4Title,this.subnetTitle,this.gatewayTitle,this.routerTitle];this.ipv6controls=[this.routerv6,this.ipv6Local,this.ipv6,this.prefix];this.ipv6lbls=[this.routerv6Lbl,this.ipv6LocalLbl,this.ipv6Lbl,this.prefixLbl];this.dnsv4View=new _s5.DNSDataView({renderTo:this.dnsv4Id});
this.dnsv6View=new _s5.DNSDataView({renderTo:this.dnsv6Id});this.teamingMode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",listeners:{scope:this,collapse:this.onTeamingModeChange},store:new Ext.data.ArrayStore({fields:["id","text"],data:[["lacp",_TR("IEEE 802.3ad LACP")],["backup",_TR("Active Backup")],["transmit",_TR("Transmit Load Balancing")],["adaptive",_TR("Adaptive Load Balancing")],["robin",_TR("Round-Robin")],["xor",_TR("XOR")],["broadcast",_TR("Broadcast")]]}),
valueField:"id",displayField:"text",value:"lacp"});this.teamingMode.render(this.teamingId);this.hashL2=new Ext.UI.Radio({cls:"x-network-hashchk",boxLabel:_TR("BOND_LAYER_2"),strValue:"l2",name:"bond_hash"});this.hashL2.render(this.hashTypeId);this.hashL3=new Ext.UI.Radio({cls:"x-network-hashchk",boxLabel:_TR("BOND_LAYER_23"),strValue:"l2+3",name:"bond_hash"});this.hashL3.render(this.hashTypeId);this.hashL4=new Ext.UI.Radio({cls:"x-network-hashchk",boxLabel:_TR("BOND_LAYER_34"),strValue:"l3+4",name:"bond_hash"});
this.hashL4.render(this.hashTypeId);this.hashs=[this.hashL2,this.hashL3,this.hashL4];this.primaryDevice=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id"],data:[]}),valueField:"id",displayField:"id"});this.primaryDevice.render(this.primaryDevId);this.adapter&&this.innerUpdate(this.adapter)},onGeneralClick:function(){this.ipv4Tab.hide();this.ipv6Tab.hide();this.modeTab.hide();this.genTab.show()},onTCPIPv4Click:function(){this.ipv6Tab.hide();
this.genTab.hide();this.modeTab.hide();this.ipv4Tab.show()},onTCPIPv6Click:function(){this.genTab.hide();this.ipv4Tab.hide();this.modeTab.hide();this.ipv6Tab.show()},onIpv4ModeBChange:function(a,b){a=b.get("id");(b=this.ipv4mode.getValue())&&this.saveDNSServersForV4(b,a)},onIpv4ModeChange:function(){var a=this.ipv4mode.getValue();if(a){this.setTCPState(a);this.updateDNSServersForV4(a)}},onIpv6ModeBChange:function(a,b){a=b.get("id");(b=this.ipv6mode.getValue())&&this.saveDNSServersForV6(b,a)},onIpv6ModeChange:function(){var a=
this.ipv6mode.getValue();if(a){this.setTCPv6State(a);this.updateDNSServersForV6(a)}if(a=="ipv6disable"){this.routerTitle.hide();this.ipv6Title.hide();this.ipv6LocalTitle.hide();this.prefixTitle.hide();this.routerv6.hide();this.ipv6Local.hide();this.ipv6.hide();this.prefix.hide();this.dnsv6View.hide()}else{this.routerTitle.show();this.ipv6Title.show();this.ipv6LocalTitle.show();this.prefixTitle.show();this.dnsv6View.show()}},onTeamingModeChange:function(a){a=a.getValue();Ext.fly(this.hashTypeRowId).setDisplayed(a===
"lacp"||a==="transmit"||a==="xor");Ext.fly(this.primaryDevRowId).setDisplayed(a==="backup"||a==="transmit"||a==="adaptive")},onApplyClick:function(){this.tryApply1()&&this.tryApply2()&&this.doApply()},tryApply1:function(){if(!this.validateInterface()){Ext.UI.MessageBox.confirm({title:_TR("DNS_SETTINGS"),msg:_TR("NETWORK_AVAILABILITY_IS_RECOMMENDED"),buttons:{yes:_TR("OK"),no:_TR("CANCEL")},fn:function(a){a=="yes"&&this.doApply()},scope:this});return false}return true},tryApply2:function(){this.validateDNS()||
Ext.UI.MessageBox.confirm({title:_TR("NETWORK_SETTINGS"),msg:_TR("NETWORK_DNS_SETTINGS_IS_RECOMMENDED"),buttons:{yes:_TR("OK"),no:_TR("CANCEL")},fn:function(a){a=="yes"&&this.doApply()},scope:this});return true},doApply:function(){var a=false,b=_a(_7(_1.CLSIDS.Device5200),"_i2");if(b){var c=-1;this.validateIP()||(c=1);this.validateMTU()||(c=0);if(c==-1){this.adapter.putMTU(parseInt(this.mtu.getValue()));this.adapter.putDomainName(this.searchDomains.getValue());this.adapter.putIPType(this.ipv4mode.getValue());
this.adapter.putIPv6Type(this.ipv6mode.getValue());this.adapter.putIPAddress(this.ip.getValue());this.adapter.putIPv6Address(this.ipv6.getValue());this.adapter.putSubnet(this.subnet.getValue());this.adapter.putRouter(this.router.getValue());this.adapter.putRouterv6(this.routerv6.getValue());this.adapter.putPrefixLength(this.prefix.getValue());var d=[],e=-1;this.dnsv4View.getDVStore().each(function(g){var h=_a(new _1.dns(false),"_i1z");h.putIP(g.get("dns"));h.putPriority(++e);d.push(h)},
this);this.dnsv6View.getDVStore().each(function(g){var h=_a(new _1.dns(false),"_i1z");h.putIP(g.get("dns"));h.putPriority(++e);d.push(h)},this);this.adapter.putDNSRecords(d);this.adapter.putMode(this.teamingMode.getValue());this.adapter.putBackupPrimary(this.primaryDevice.getValue());var f="";_.each(this.hashs,function(g){if(g.getValue()){f+=g.strValue;return false}});this.adapter.putPolicy(f);b.getNetworkManager().commitBOND(this.adapter,"network-commit-bond");a=true}else{this.sCtrl.setPressedButton(c,
true);if(c==2)this.onTCPIPv6Click();else c==1?this.onTCPIPv4Click():this.onGeneralClick()}}a&&this.hide()},validateInterface:function(){for(var a=this.networkManager.getBONDS(),b=a.length,c=0;c<a.length;++c){var d=_a(a[c],"_i1y");if(!d||d==_4||d.getState()=="down")--b}if(b<=1&&(this.ipv6mode.getValue()==="ipv6disable"||this.ipv4mode.getValue()==="ipv4disable"))return false;return true},validateDNS:function(){if(this.ipv6mode.getValue()==="ipv6custom"&&this.dnsv6View.getDVStore().getCount()===
0||this.ipv4mode.getValue()==="ipv4custom"&&this.dnsv4View.getDVStore().getCount()===0)return false;return true},validateIP:function(){var a=true;this.ipv4Title.removeClass("x-network-errorlabel");this.subnetTitle.removeClass("x-network-errorlabel");this.gatewayTitle.removeClass("x-network-errorlabel");this.routerTitle.removeClass("x-network-errorlabel");this.ipv6Title.removeClass("x-network-errorlabel");if(this.ipv4mode.getValue()=="ipv4custom"){if(!_.isValidIPAddress(this.ip.getValue())){a=false;
this.ipv4Title.addClass("x-network-errorlabel")}if(this.subnet.getValue()&&!_.isValidNetmask(this.subnet.getValue())){a=false;this.subnetTitle.addClass("x-network-errorlabel")}if(this.router.getValue()&&!_.isValidIPAddress(this.router.getValue())){a=false;this.gatewayTitle.addClass("x-network-errorlabel")}}if(this.ipv6mode.getValue()=="ipv6custom"){if(!_.Utils.isValidIPv6Address(this.ipv6.getValue())){a=false;this.ipv6Title.addClass("x-network-errorlabel")}if(this.routerv6.getValue()&&!_.Utils.isValidIPv6Address(this.routerv6.getValue())){a=
false;this.routerTitle.addClass("x-network-errorlabel")}}var b=this.searchDomains.getValue().split(" ");_.each(b,function(c){if(c!=""&&!_.isValidDomainName(c)){this.searchDomainTitle.addClass("x-network-errorlabel");a=false}},this);return a},validateMTU:function(){if(!parseInt(this.mtu.getValue())){this.mtu.tooltip.enabled=true;this.mtuLbl.addClass("x-network-errorlabel");return false}return true},update:function(a){this.adapter=a;this.rendered&&this.innerUpdate(a)},innerUpdate:function(a){this.setTitle(String.format("{0}",
a.getName()));this.mtu.tooltip.enabled=false;this.mtuLbl.removeClass("x-network-errorlabel");this.ipv4Title.removeClass("x-network-errorlabel");this.subnetTitle.removeClass("x-network-errorlabel");this.gatewayTitle.removeClass("x-network-errorlabel");this.routerTitle.removeClass("x-network-errorlabel");this.ipv6Title.removeClass("x-network-errorlabel");this.sCtrl.itemAt(0).press(true);this.ipv4Tab.hide();this.ipv6Tab.hide();this.modeTab.hide();this.genTab.show();var b=a.getIPType()==_4?"ipv4dhcp":
a.getIPType(),c=a.getIPv6Type()==_4?"ipv6dhcp":a.getIPv6Type();this.ipv4mode.setValue(b=="ipv4dhcp"||b=="ipv4custom"||b=="ipv4disable"?b:undefined);this.ipv6mode.setValue(c=="ipv6dhcp"||c=="ipv6custom"||c=="ipv6disable"?c:undefined);this.setTCPState(b);this.setTCPv6State(c);this.searchDomains.setValue(a.getDomainName());this.name.update(a.getName());this.mtu.setValue(a.getMTU());this.ip.setValue(a.getIPAddress());this.ipLbl.update(a.getIPAddress());b=String.format("{0}/{1}",a.getIPv6AddressLocal(),
a.getPrefixLengthLocal());this.ipv6Local.setValue(b);this.ipv6LocalLbl.update(b);this.ipv6.setValue(a.getIPv6Address());this.ipv6Lbl.update(a.getIPv6Address());this.router.setValue(a.getRouter());this.routerLbl.update(a.getRouter());this.routerv6.setValue(a.getRouterv6());this.routerv6Lbl.update(a.getRouterv6());this.subnet.setValue(a.getSubnet());this.subnetLbl.update(a.getSubnet());this.prefix.setValue(a.getPrefixLength());this.prefixLbl.update(a.getPrefixLength());var d=[],e=[];_.each(a.getDNSRecords(),
function(g){g=_a(g,"_i1z").getIP();if(_.isValidIPAddress(g))d.push({dns:g});else _.Utils.isValidIPv6Address(g)&&e.push({dns:g})},this);this.dnsv4View.getDVStore().loadData(d);this.dnsv4View.refreshDV();this.dnsv6View.getDVStore().loadData(e);this.dnsv6View.refreshDV();var f=[];b=a.getOver().split(" ");_.each(b,function(g){f.push([g])},this);this.primaryDevice.getStore().loadData(f);this.teamingMode.setValue(a.getMode());this.onTeamingModeChange(this.teamingMode);this.primaryDevice.setValue(a.getBackupPrimary()?
a.getBackupPrimary():f[0]);for(b=0;b<this.hashs.length;++b){c=this.hashs[b];c.setValue(a.getPolicy()==c.strValue)}},setTCPState:function(a){this.setVisibleState(this.ipv4controls,a=="ipv4custom");this.setVisibleState(this.ipv4lbls,a=="ipv4dhcp");this.setVisibleState(this.ipv4titles,a!=="ipv4disable");this.setVisibleState([this.dnsv4View],a!=="ipv4disable");this.ipv4mode.setDisabled(a=="unknown")},setTCPv6State:function(a){this.setVisibleState(this.ipv6controls,a=="ipv6custom");this.setVisibleState(this.ipv6lbls,
a=="ipv6auto"||a=="ipv6dhcp");this.ipv6mode.setDisabled(a=="unknown")},saveDNSServersForV4:function(a,b){this.dnsserversv4[a]=this.cloneStore(this.dnsv4View.getDVStore());if(b==="ipv4custom")this.dnsserversv4[b]||(this.dnsserversv4[b]=this.cloneStore(this.dnsv4View.getDVStore()))},updateDNSServersForV4:function(a){this.dnsv4View.getDVStore().loadData([]);this.dnsserversv4[a]&&this.dnsv4View.setDVStore(this.dnsserversv4[a]);this.dnsv4View.refreshDV()},saveDNSServersForV6:function(a,b){this.dnsserversv6[a]=
this.cloneStore(this.dnsv6View.getDVStore());if(b==="ipv6custom")this.dnsserversv6[b]||(this.dnsserversv6[b]=this.cloneStore(this.dnsv6View.getDVStore()))},updateDNSServersForV6:function(a){this.dnsv6View.getDVStore().loadData([]);this.dnsserversv6[a]&&this.dnsv6View.setDVStore(this.dnsserversv6[a]);this.dnsv4View.refreshDV()},setVisibleState:function(a,b){_.each(a,function(c){c.setVisible(b)},this)},cloneStore:function(a){var b=new Ext.data.JsonStore({fields:["dns"]});a=a.getRange();var c,d;for(c=
0;c<a.length;c++){d=Ext.util.JSON.decode(Ext.util.JSON.encode(a[c].copy().data));b.add(new Ext.data.Record(d,d.id))}b.fireEvent("load",b);return b}});Ext.namespace("_s5");
_s5.VNICOptionsWindow=_._1(Ext.UI.Window,{modal:true,width:610,height:600,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,cls:"x-network-nicsettingswnd",help:"network_wnd_edit_vnic",constructor:function(){this.fbar=this.getFooter();this.html=this.getHtml();_s5.VNICOptionsWindow.superclass.constructor.apply(this,arguments);this.networkManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getNetworkManager();this.dnsserversv4=
{};this.dnsserversv6={}},getFooter:function(){return[{xtype:"uibutton",text:_TR("APPLY"),handler:function(){this.onApplyClick()},scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}]},getHtml:function(){return'<div id="'+(this.scId=Ext.id())+'"></div><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt" id="'+(this.gTabId=Ext.id())+'"><tr><td class="x-network-dlglabel">'+_TR("NAME")+_TR("COLON")+'</td><td><div id="'+
(this.nameId=Ext.id())+'"></div></td></tr><tr><td class="x-network-dlglabel">'+_TR("BANDWIDTH_LIMIT")+_TR("COLON")+'</td><td><div id="'+(this.speedId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.mtuLblId=Ext.id())+'" class="x-network-dlglabel">'+_TR("MTU")+_TR("COLON")+'</td><td><div id="'+(this.mtuId=Ext.id())+'"></div></td></tr></table><div id="'+(this.ipv4TabId=Ext.id())+'"><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel">'+_TR("CONFIGURE_IPV4")+
_TR("COLON")+'</td><td id="'+(this.ipSettingsId=Ext.id())+'" /></tr><tr><td id="'+(this.ipv4Title=Ext.id())+'" class="x-network-dlglabel">'+_TR("IPV4_ADDRESS")+_TR("COLON")+'</td><td><div id="'+(this.ipId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.subnetTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("SUBNET_MASK")+_TR("COLON")+'</td><td><div id="'+(this.subnetId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.gatewayTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("ROUTER")+_TR("COLON")+
'</td><td><div id="'+(this.gatewayId=Ext.id())+'"></div></td></tr></table><div id="'+(this.dnsv4Id=Ext.id())+'"></div><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td id="'+(this.searchDomainTitle=Ext.id())+'">'+_TR("SEARCH_DOMAINS")+_TR("COLON")+'</td><td id="'+(this.searchDomainsId=Ext.id())+'" /></tr></table></div><div id="'+(this.ipv6TabId=Ext.id())+'"><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel">'+_TR("CONFIGURE_IPV6")+
_TR("COLON")+'</td><td id="'+(this.ipv6modeId=Ext.id())+'" /></tr><tr><td id="'+(this.routerTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("ROUTER")+_TR("COLON")+'</td><td><div id="'+(this.routerId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.ipv6LocalTitle=Ext.id())+'"class="x-network-dlglabel">'+_TR("IPV6_LOCAL_ADDRESS")+_TR("COLON")+'</td><td><div id="'+(this.ipv6LocalId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.ipv6Title=Ext.id())+'" class="x-network-dlglabel">'+_TR("IPV6_ADDRESS")+
_TR("COLON")+'</td><td><div id="'+(this.ipv6Id=Ext.id())+'"></div></td></tr><tr><td id="'+(this.prefixTitle=Ext.id())+'"class="x-network-dlglabel">'+_TR("PREFIX_LENGTH")+_TR("COLON")+'</td><td><div id="'+(this.prefixId=Ext.id())+'"></div></td></tr></table><div id="'+(this.dnsv6Id=Ext.id())+'"></div></div>'},afterRender:function(){_s5.VNICOptionsWindow.superclass.afterRender.apply(this,arguments);this.genTab=Ext.get(this.gTabId);this.genTab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv4Tab=
Ext.get(this.ipv4TabId);this.ipv4Tab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv4Tab.hide();this.ipv6Tab=Ext.get(this.ipv6TabId);this.ipv6Tab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv6Tab.hide();this.sCtrl=new Ext.UI.SegmentedControl({cls:"x-network-ipsettings",items:[new Ext.UI.SegmentedButton({text:_TR("GENERAL"),width:100,scope:this,click:this.onGeneralClick}),new Ext.UI.SegmentedButton({text:_TR("TCP_IPv4"),width:100,scope:this,click:this.onTCPIPv4Click}),new Ext.UI.SegmentedButton({text:_TR("TCP_IPv6"),
width:100,scope:this,click:this.onTCPIPv6Click})]});this.sCtrl.render(this.header.parent());this.name=new Ext.Component({cls:"x-network-valuelabel"});this.name.render(this.nameId);this.mtuLbl=Ext.get(this.mtuLblId);this.mtu=new Ext.UI.TextField({width:245,maskRe:/[0-9]/,tooltipCfg:{html:_TR("MTU_VNIC_ERROR_TIP")}});this.mtu.render(this.mtuId);this.speed=Ext.get(this.speedId);this.searchDomains=new Ext.UI.TextField({width:245,renderTo:this.searchDomainsId});this.searchDomainTitle=Ext.get(this.searchDomainTitle);
this.ipv4mode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",listeners:{scope:this,select:this.onIpv4ModeChange,beforeselect:this.onIpv4ModeBChange},store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ipv4dhcp",_TR("IPV4_DHCP")],["ipv4custom",_TR("IPV4_STATIC")],["ipv4disable",_TR("DISABLE")]]}),valueField:"id",displayField:"text",emptyText:_TR("OFF")});this.ipv4mode.render(this.ipSettingsId);this.ipv4Title=Ext.get(this.ipv4Title);this.subnetTitle=Ext.get(this.subnetTitle);
this.gatewayTitle=Ext.get(this.gatewayTitle);this.routerTitle=Ext.get(this.routerTitle);this.ipv6Title=Ext.get(this.ipv6Title);this.ipv6LocalTitle=Ext.get(this.ipv6LocalTitle);this.prefixTitle=Ext.get(this.prefixTitle);this.ip=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.ip.render(this.ipId);this.ipLbl=new Ext.Component({cls:"x-network-valuelabel"});this.ipLbl.render(this.ipId);this.subnet=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.subnet.render(this.subnetId);this.subnetLbl=
new Ext.Component({cls:"x-network-valuelabel"});this.subnetLbl.render(this.subnetId);this.router=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.router.render(this.gatewayId);this.routerLbl=new Ext.Component({cls:"x-network-valuelabel"});this.routerLbl.render(this.gatewayId);this.ipv6mode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",listeners:{scope:this,select:this.onIpv6ModeChange,beforeselect:this.onIpv6ModeBChange},store:new Ext.data.ArrayStore({fields:["id","text"],
data:[["ipv6dhcp",_TR("IPV6_AUTO_DHCP")],["ipv6custom",_TR("IPV6_STATIC")],["ipv6disable",_TR("DISABLE")]]}),valueField:"id",displayField:"text",emptyText:_TR("OFF")});this.ipv6mode.render(this.ipv6modeId);this.routerv6=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/});this.routerv6.render(this.routerId);this.routerv6Lbl=new Ext.Component({cls:"x-network-valuelabel"});this.routerv6Lbl.render(this.routerId);this.ipv6Local=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/,readOnly:true});
this.ipv6Local.render(this.ipv6LocalId);this.ipv6LocalLbl=new Ext.Component({cls:"x-network-valuelabel"});this.ipv6LocalLbl.render(this.ipv6LocalId);this.ipv6=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/});this.ipv6.render(this.ipv6Id);this.ipv6Lbl=new Ext.Component({cls:"x-network-valuelabel"});this.ipv6Lbl.render(this.ipv6Id);this.prefix=new Ext.UI.TextField({width:245});this.prefix.render(this.prefixId);this.prefixLbl=new Ext.Component({cls:"x-network-valuelabel"});this.prefixLbl.render(this.prefixId);
this.ipv4controls=[this.ip,this.subnet,this.router];this.ipv4lbls=[this.ipLbl,this.subnetLbl,this.routerLbl];this.ipv4titles=[this.ipv4Title,this.subnetTitle,this.gatewayTitle,this.routerTitle];this.ipv6controls=[this.routerv6,this.ipv6Local,this.ipv6,this.prefix];this.ipv6lbls=[this.routerv6Lbl,this.ipv6LocalLbl,this.ipv6Lbl,this.prefixLbl];this.dnsv4View=new _s5.DNSDataView({renderTo:this.dnsv4Id});this.dnsv6View=new _s5.DNSDataView({renderTo:this.dnsv6Id});this.adapter&&
this.innerUpdate(this.adapter)},onGeneralClick:function(){this.ipv4Tab.hide();this.ipv6Tab.hide();this.genTab.show()},onTCPIPv4Click:function(){this.ipv6Tab.hide();this.genTab.hide();this.ipv4Tab.show()},onTCPIPv6Click:function(){this.genTab.hide();this.ipv4Tab.hide();this.ipv6Tab.show()},onIpv4ModeBChange:function(a,b){a=b.get("id");(b=this.ipv4mode.getValue())&&this.saveDNSServersForV4(b,a)},onIpv4ModeChange:function(){var a=this.ipv4mode.getValue();if(a){this.setTCPState(a);this.updateDNSServersForV4(a)}},
onIpv6ModeBChange:function(a,b){a=b.get("id");(b=this.ipv6mode.getValue())&&this.saveDNSServersForV6(b,a)},onIpv6ModeChange:function(){var a=this.ipv6mode.getValue();if(a){this.setTCPv6State(a);this.updateDNSServersForV6(a)}if(a=="ipv6disable"){this.routerTitle.hide();this.ipv6Title.hide();this.ipv6LocalTitle.hide();this.prefixTitle.hide();this.routerv6.hide();this.ipv6Local.hide();this.ipv6.hide();this.prefix.hide();this.dnsv6View.hide()}else{this.routerTitle.show();this.ipv6Title.show();this.ipv6LocalTitle.show();
this.prefixTitle.show();this.dnsv6View.show()}},onApplyClick:function(){this.tryApply1()&&this.tryApply2()&&this.doApply()},tryApply1:function(){if(!this.validateInterface()){Ext.UI.MessageBox.confirm({title:_TR("DNS_SETTINGS"),msg:_TR("NETWORK_AVAILABILITY_IS_RECOMMENDED"),buttons:{yes:_TR("OK"),no:_TR("CANCEL")},fn:function(a){a=="yes"&&this.doApply()},scope:this});return false}return true},tryApply2:function(){if(!this.validateDNS()){Ext.UI.MessageBox.confirm({title:_TR("NETWORK_SETTINGS"),msg:_TR("NETWORK_DNS_SETTINGS_IS_RECOMMENDED"),
buttons:{yes:_TR("OK"),no:_TR("CANCEL")},fn:function(a){a=="yes"&&this.doApply()},scope:this});return false}return true},doApply:function(){var a=false,b=_a(_7(_1.CLSIDS.Device5200),"_i2");if(b){var c=-1;if(this.validateIPv4())if(this.validateIPv6())this.validateMTU()||(c=0);else c=2;else c=1;if(c==-1){this.adapter.putMTU(parseInt(this.mtu.getValue()));this.adapter.putDomainName(this.searchDomains.getValue());this.adapter.putIPType(this.ipv4mode.getValue());this.adapter.putIPv6Type(this.ipv6mode.getValue());
this.adapter.putIPAddress(this.ip.getValue());this.adapter.putIPv6Address(this.ipv6.getValue());this.adapter.putSubnet(this.subnet.getValue());this.adapter.putRouter(this.router.getValue());this.adapter.putRouterv6(this.routerv6.getValue());this.adapter.putPrefixLength(this.prefix.getValue());var d=[],e=-1;this.dnsv4View.getDVStore().each(function(f){var g=_a(new _1.dns(false),"_i1z");g.putIP(f.get("dns"));g.putPriority(++e);d.push(g)},this);this.dnsv6View.getDVStore().each(function(f){var g=
_a(new _1.dns(false),"_i1z");g.putIP(f.get("dns"));g.putPriority(++e);d.push(g)},this);this.adapter.putDNSRecords(d);b.getNetworkManager().commitNIC(this.adapter,"network-commit-nic");a=true}else{this.sCtrl.setPressedButton(c,true);if(c==2)this.onTCPIPv6Click();else c==1?this.onTCPIPv4Click():this.onGeneralClick()}}a&&this.hide()},validateDNS:function(){if(this.ipv6mode.getValue()==="ipv6custom"&&this.dnsv6View.getDVStore().getCount()===0||this.ipv4mode.getValue()==="ipv4custom"&&this.dnsv4View.getDVStore().getCount()===
0)return false;return true},validateInterface:function(){for(var a=this.networkManager.getNICS(),b=a.length,c=0;c<a.length;++c){var d=_a(a[c],"_i27");if(!d||d==_4||d.getState()=="down")--b}if(b<=1&&(this.ipv6mode.getValue()==="ipv6disable"||this.ipv4mode.getValue()==="ipv4disable"))return false;return true},validateIPv4:function(){var a=true;this.ipv4Title.removeClass("x-network-errorlabel");this.subnetTitle.removeClass("x-network-errorlabel");this.gatewayTitle.removeClass("x-network-errorlabel");
this.searchDomainTitle.removeClass("x-network-errorlabel");if(this.ipv4mode.getValue()=="ipv4custom"){if(!_.isValidIPAddress(this.ip.getValue())){a=false;this.ipv4Title.addClass("x-network-errorlabel")}if(this.subnet.getValue()&&!_.isValidNetmask(this.subnet.getValue())){a=false;this.subnetTitle.addClass("x-network-errorlabel")}if(this.router.getValue()&&!this.routerIpv4ValidationException(this.router.getValue())&&!_.isValidIPAddress(this.router.getValue())){a=false;this.gatewayTitle.addClass("x-network-errorlabel")}}var b=
this.searchDomains.getValue().split(" ");_.each(b,function(c){if(c!=""&&!_.isValidDomainName(c)){this.searchDomainTitle.addClass("x-network-errorlabel");a=false}},this);return a},validateIPv6:function(){var a=true;this.routerTitle.removeClass("x-network-errorlabel");this.ipv6Title.removeClass("x-network-errorlabel");if(this.ipv6mode.getValue()=="ipv6custom"){if(!_.Utils.isValidIPv6Address(this.ipv6.getValue())){a=false;this.ipv6Title.addClass("x-network-errorlabel")}if(this.routerv6.getValue()&&
!this.routerIpv6ValidationException(this.router.getValue())&&!_.Utils.isValidIPv6Address(this.routerv6.getValue())){a=false;this.routerTitle.addClass("x-network-errorlabel")}}return a},routerIpv4ValidationException:function(a){if(/^0\.0\.0\.0$/.test(a))return true;return false},routerIpv6ValidationException:function(a){if(/^::0$/.test(a))return true;return false},validateMTU:function(){if(!parseInt(this.mtu.getValue())){this.mtu.tooltip.enabled=true;this.mtuLbl.addClass("x-network-errorlabel");
return false}return true},update:function(a){this.adapter=a;this.rendered&&this.innerUpdate(a)},innerUpdate:function(a){this.setTitle(String.format("{0}",a.getName()));this.mtu.tooltip.enabled=false;this.mtuLbl.removeClass("x-network-errorlabel");this.ipv4Title.removeClass("x-network-errorlabel");this.subnetTitle.removeClass("x-network-errorlabel");this.gatewayTitle.removeClass("x-network-errorlabel");this.routerTitle.removeClass("x-network-errorlabel");this.ipv6Title.removeClass("x-network-errorlabel");
this.searchDomainTitle.removeClass("x-network-errorlabel");this.sCtrl.itemAt(0).press(true);this.ipv4Tab.hide();this.ipv6Tab.hide();this.genTab.show();var b=a.getIPType()==_4?"ipv4dhcp":a.getIPType(),c=a.getIPv6Type()==_4?"ipv6dhcp":a.getIPv6Type();this.ipv4mode.setValue(b=="ipv4dhcp"||b=="ipv4custom"||b=="ipv4disable"?b:undefined);this.onIpv4ModeChange();this.ipv6mode.setValue(c=="ipv6dhcp"||c=="ipv6custom"||c=="ipv6disable"?c:undefined);this.onIpv6ModeChange();this.setTCPState(b);this.setTCPv6State(c);
this.searchDomains.setValue(a.getDomainName());this.name.update(a.getName());this.mtu.setValue(a.getMTU());this.speed.update(a.getSpeed());this.ip.setValue(a.getIPAddress());this.ipLbl.update(a.getIPAddress());b=String.format("{0}/{1}",a.getIPv6AddressLocal(),a.getPrefixLengthLocal());this.ipv6Local.setValue(b);this.ipv6LocalLbl.update(b);this.ipv6.setValue(a.getIPv6Address());this.ipv6Lbl.update(a.getIPv6Address());this.router.setValue(a.getRouter());this.routerLbl.update(a.getRouter());this.routerv6.setValue(a.getRouterv6());
this.routerv6Lbl.update(a.getRouterv6());this.subnet.setValue(a.getSubnet());this.subnetLbl.update(a.getSubnet());this.prefix.setValue(a.getPrefixLength());this.prefixLbl.update(a.getPrefixLength());this.dnssv4=[];this.dnssv6=[];_.each(a.getDNSRecords(),function(d){d=_a(d,"_i1z").getIP();if(_.isValidIPAddress(d))this.dnssv4.push({dns:d});else _.Utils.isValidIPv6Address(d)&&this.dnssv6.push({dns:d})},this);this.dnsv4View.getDVStore().loadData(this.dnssv4);this.dnsv4View.refreshDV();
this.dnsv6View.getDVStore().loadData(this.dnssv6);this.dnsv6View.refreshDV()},setTCPState:function(a){this.setVisibleState(this.ipv4controls,a=="ipv4custom");this.setVisibleState(this.ipv4lbls,a=="ipv4dhcp");this.setVisibleState(this.ipv4titles,a!=="ipv4disable");this.setVisibleState([this.dnsv4View],a!=="ipv4disable");this.ipv4mode.setDisabled(a=="unknown")},saveDNSServersForV4:function(a,b){this.dnsserversv4[a]=this.cloneStore(this.dnsv4View.getDVStore());if(b==="ipv4custom")this.dnsserversv4[b]||
(this.dnsserversv4[b]=this.cloneStore(this.dnsv4View.getDVStore()))},updateDNSServersForV4:function(a){this.dnsv4View.getDVStore().loadData([]);this.dnsserversv4[a]&&this.dnsv4View.setDVStore(this.dnsserversv4[a]);this.dnsv4View.refreshDV()},saveDNSServersForV6:function(a,b){this.dnsserversv6[a]=this.cloneStore(this.dnsv6View.getDVStore());if(b==="ipv6custom")this.dnsserversv6[b]||(this.dnsserversv6[b]=this.cloneStore(this.dnsv6View.getDVStore()))},updateDNSServersForV6:function(a){this.dnsv6View.getDVStore().loadData([]);
this.dnsserversv6[a]&&this.dnsv6View.setDVStore(this.dnsserversv6[a]);this.dnsv6View.refreshDV()},setTCPv6State:function(a){this.setVisibleState(this.ipv6controls,a=="ipv6custom");this.setVisibleState(this.ipv6lbls,a=="ipv6auto"||a=="ipv6dhcp");this.ipv6mode.setDisabled(a=="unknown")},setVisibleState:function(a,b){_.each(a,function(c){c.setVisible(b)},this)},cloneStore:function(a){var b=new Ext.data.JsonStore({fields:["dns"]});a=a.getRange();var c,d;for(c=0;c<a.length;c++){d=Ext.util.JSON.decode(Ext.util.JSON.encode(a[c].copy().data));
b.add(new Ext.data.Record(d,d.id))}b.fireEvent("load",b);return b}});Ext.namespace("_s5");
_s5.VLANOptionsWindow=_._1(Ext.UI.Window,{modal:true,width:610,height:600,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,cls:"x-network-nicsettingswnd",constructor:function(){this.fbar=this.getFooter();this.html=this.getHtml();_s5.VLANOptionsWindow.superclass.constructor.apply(this,arguments);this.networkVLANManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getNetworkVLANManager();this.dnsserversv4={};this.dnsserversv6=
{}},getFooter:function(){return[{xtype:"uibutton",text:_TR("APPLY"),handler:function(){this.onApplyClick()},scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}]},getHtml:function(){return'<div id="'+(this.scId=Ext.id())+'"></div><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt" id="'+(this.gTabId=Ext.id())+'"><tr><td class="x-network-dlglabel">'+_TR("NAME")+_TR("COLON")+'</td><td><div id="'+(this.nameId=Ext.id())+
'"></div></td></tr><tr><td id="'+(this.idLblId=Ext.id())+'" class="x-network-dlglabel">'+_TR("VLAN_ID")+_TR("COLON")+'</td><td><div id="'+(this.lIdId=Ext.id())+'"></div></td></tr><tr><td class="x-network-dlglabel">'+_TR("BANDWIDTH_LIMIT")+_TR("COLON")+'</td><td><div id="'+(this.speedId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.mtuLblId=Ext.id())+'" class="x-network-dlglabel">'+_TR("MTU")+_TR("COLON")+'</td><td><div id="'+(this.mtuId=Ext.id())+'"></div></td></tr></table><div id="'+(this.ipv4TabId=
Ext.id())+'"><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel">'+_TR("CONFIGURE_IPV4")+_TR("COLON")+'</td><td id="'+(this.ipSettingsId=Ext.id())+'" /></tr><tr><td id="'+(this.ipv4Title=Ext.id())+'" class="x-network-dlglabel">'+_TR("IPV4_ADDRESS")+_TR("COLON")+'</td><td><div id="'+(this.ipId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.subnetTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("SUBNET_MASK")+_TR("COLON")+'</td><td><div id="'+
(this.subnetId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.gatewayTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("ROUTER")+_TR("COLON")+'</td><td><div id="'+(this.gatewayId=Ext.id())+'"></div></td></tr></table><div id="'+(this.dnsv4Id=Ext.id())+'"></div><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td id="'+(this.searchDomainTitle=Ext.id())+'">'+_TR("SEARCH_DOMAINS")+_TR("COLON")+'</td><td id="'+(this.searchDomainsId=Ext.id())+'" /></tr></table></div><div id="'+
(this.ipv6TabId=Ext.id())+'"><table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel">'+_TR("CONFIGURE_IPV6")+_TR("COLON")+'</td><td id="'+(this.ipv6modeId=Ext.id())+'" /></tr><tr><td id="'+(this.routerTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("ROUTER")+_TR("COLON")+'</td><td><div id="'+(this.routerId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.ipv6LocalTitle=Ext.id())+'"class="x-network-dlglabel">'+_TR("IPV6_LOCAL_ADDRESS")+_TR("COLON")+
'</td><td><div id="'+(this.ipv6LocalId=Ext.id())+'"></div></td></tr><tr><td id="'+(this.ipv6Title=Ext.id())+'" class="x-network-dlglabel">'+_TR("IPV6_ADDRESS")+_TR("COLON")+'</td><td><div id="'+(this.ipv6Id=Ext.id())+'"></div></td></tr><tr><td id="'+(this.prefixTitle=Ext.id())+'"class="x-network-dlglabel">'+_TR("PREFIX_LENGTH")+_TR("COLON")+'</td><td><div id="'+(this.prefixId=Ext.id())+'"></div></td></tr></table><div id="'+(this.dnsv6Id=Ext.id())+'"></div></div>'},afterRender:function(){_s5.VLANOptionsWindow.superclass.afterRender.apply(this,
arguments);this.genTab=Ext.get(this.gTabId);this.genTab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv4Tab=Ext.get(this.ipv4TabId);this.ipv4Tab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv4Tab.hide();this.ipv6Tab=Ext.get(this.ipv6TabId);this.ipv6Tab.setVisibilityMode(Ext.Element.DISPLAY);this.ipv6Tab.hide();this.sCtrl=new Ext.UI.SegmentedControl({cls:"x-network-ipsettings",items:[new Ext.UI.SegmentedButton({text:_TR("GENERAL"),width:100,scope:this,click:this.onGeneralClick}),new Ext.UI.SegmentedButton({text:_TR("TCP_IPv4"),
width:100,scope:this,click:this.onTCPIPv4Click}),new Ext.UI.SegmentedButton({text:_TR("TCP_IPv6"),width:100,scope:this,click:this.onTCPIPv6Click})]});this.sCtrl.render(this.header.parent());this.name=new Ext.Component({cls:"x-network-valuelabel"});this.name.render(this.nameId);this.idLbl=Ext.get(this.idLblId);this.lId=new Ext.Component({cls:"x-network-valuelabel",renderTo:this.lIdId});this.mtuLbl=Ext.get(this.mtuLblId);this.mtu=new Ext.UI.TextField({width:245,maskRe:/[0-9]/,tooltipCfg:{html:_TR("MTU_VNIC_ERROR_TIP")},
renderTo:this.mtuId});this.speed=Ext.get(this.speedId);this.searchDomains=new Ext.UI.TextField({width:245,renderTo:this.searchDomainsId});this.searchDomainTitle=Ext.get(this.searchDomainTitle);this.ipv4mode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",listeners:{scope:this,select:this.onIpv4ModeChange,beforeselect:this.onIpv4ModeBChange},store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ipv4dhcp",_TR("IPV4_DHCP")],["ipv4custom",_TR("IPV4_STATIC")],["ipv4disable",_TR("DISABLE")]]}),
valueField:"id",displayField:"text",emptyText:_TR("OFF")});this.ipv4mode.render(this.ipSettingsId);this.ipv4Title=Ext.get(this.ipv4Title);this.subnetTitle=Ext.get(this.subnetTitle);this.gatewayTitle=Ext.get(this.gatewayTitle);this.routerTitle=Ext.get(this.routerTitle);this.ipv6Title=Ext.get(this.ipv6Title);this.ipv6LocalTitle=Ext.get(this.ipv6LocalTitle);this.prefixTitle=Ext.get(this.prefixTitle);this.ip=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.ip.render(this.ipId);this.ipLbl=new Ext.Component({cls:"x-network-valuelabel"});
this.ipLbl.render(this.ipId);this.subnet=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.subnet.render(this.subnetId);this.subnetLbl=new Ext.Component({cls:"x-network-valuelabel"});this.subnetLbl.render(this.subnetId);this.router=new Ext.UI.TextField({width:245,maskRe:/[0-9.]/});this.router.render(this.gatewayId);this.routerLbl=new Ext.Component({cls:"x-network-valuelabel"});this.routerLbl.render(this.gatewayId);this.ipv6mode=new Ext.UI.ComboBox({width:245,mode:"local",triggerAction:"all",
listeners:{scope:this,select:this.onIpv6ModeChange,beforeselect:this.onIpv6ModeBChange},store:new Ext.data.ArrayStore({fields:["id","text"],data:[["ipv6dhcp",_TR("IPV6_AUTO_DHCP")],["ipv6custom",_TR("IPV6_STATIC")],["ipv6disable",_TR("DISABLE")]]}),valueField:"id",displayField:"text",emptyText:_TR("OFF")});this.ipv6mode.render(this.ipv6modeId);this.routerv6=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/});this.routerv6.render(this.routerId);this.routerv6Lbl=new Ext.Component({cls:"x-network-valuelabel"});
this.routerv6Lbl.render(this.routerId);this.ipv6Local=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/,readOnly:true});this.ipv6Local.render(this.ipv6LocalId);this.ipv6LocalLbl=new Ext.Component({cls:"x-network-valuelabel"});this.ipv6LocalLbl.render(this.ipv6LocalId);this.ipv6=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:]/});this.ipv6.render(this.ipv6Id);this.ipv6Lbl=new Ext.Component({cls:"x-network-valuelabel"});this.ipv6Lbl.render(this.ipv6Id);this.prefix=new Ext.UI.TextField({width:245});
this.prefix.render(this.prefixId);this.prefixLbl=new Ext.Component({cls:"x-network-valuelabel"});this.prefixLbl.render(this.prefixId);this.ipv4controls=[this.ip,this.subnet,this.router];this.ipv4lbls=[this.ipLbl,this.subnetLbl,this.routerLbl];this.ipv4titles=[this.ipv4Title,this.subnetTitle,this.gatewayTitle,this.routerTitle];this.ipv6controls=[this.routerv6,this.ipv6Local,this.ipv6,this.prefix];this.ipv6lbls=[this.routerv6Lbl,this.ipv6LocalLbl,this.ipv6Lbl,this.prefixLbl];this.dnsv4View=new _s5.DNSDataView({renderTo:this.dnsv4Id});
this.dnsv6View=new _s5.DNSDataView({renderTo:this.dnsv6Id});this.adapter&&this.innerUpdate(this.adapter)},onGeneralClick:function(){this.ipv4Tab.hide();this.ipv6Tab.hide();this.genTab.show()},onTCPIPv4Click:function(){this.ipv6Tab.hide();this.genTab.hide();this.ipv4Tab.show()},onTCPIPv6Click:function(){this.genTab.hide();this.ipv4Tab.hide();this.ipv6Tab.show()},onIpv4ModeBChange:function(a,b){a=b.get("id");(b=this.ipv4mode.getValue())&&this.saveDNSServersForV4(b,a)},onIpv4ModeChange:function(){var a=
this.ipv4mode.getValue();if(a){this.setTCPState(a);this.updateDNSServersForV4(a)}},onIpv6ModeBChange:function(a,b){a=b.get("id");(b=this.ipv6mode.getValue())&&this.saveDNSServersForV6(b,a)},onIpv6ModeChange:function(){var a=this.ipv6mode.getValue();if(a){this.setTCPv6State(a);this.updateDNSServersForV6(a)}if(a=="ipv6disable"){this.routerTitle.hide();this.ipv6Title.hide();this.ipv6LocalTitle.hide();this.prefixTitle.hide();this.routerv6.hide();this.ipv6Local.hide();this.ipv6.hide();this.prefix.hide();
this.dnsv6View.hide()}else{this.routerTitle.show();this.ipv6Title.show();this.ipv6LocalTitle.show();this.prefixTitle.show();this.dnsv6View.show()}},onApplyClick:function(){this.validateDNS()?this.doApply():Ext.UI.MessageBox.confirm({title:_TR("NETWORK_SETTINGS"),msg:_TR("NETWORK_DNS_SETTINGS_IS_RECOMMENDED"),buttons:{yes:_TR("OK"),no:_TR("CANCEL")},fn:function(a){a=="yes"&&this.doApply()},scope:this})},doApply:function(){var a=false,b=-1;this.validateIP()||(b=1);this.validateMTU()||(b=0);if(b==-1){this.adapter.putMTU(parseInt(this.mtu.getValue()));
this.adapter.putDomainName(this.searchDomains.getValue());this.adapter.putIPType(this.ipv4mode.getValue());this.adapter.putIPv6Type(this.ipv6mode.getValue());this.adapter.putIPAddress(this.ip.getValue());this.adapter.putIPv6Address(this.ipv6.getValue());this.adapter.putSubnet(this.subnet.getValue());this.adapter.putRouter(this.router.getValue());this.adapter.putRouterv6(this.routerv6.getValue());this.adapter.putPrefixLength(this.prefix.getValue());var c=[],d=-1;this.dnsv4View.getDVStore().each(function(e){var f=
_a(new _1.dns(false),"_i1z");f.putIP(e.get("dns"));f.putPriority(++d);c.push(f)},this);this.dnsv6View.getDVStore().each(function(e){var f=_a(new _1.dns(false),"_i1z");f.putIP(e.get("dns"));f.putPriority(++d);c.push(f)},this);this.adapter.putDNSRecords(c);this.networkVLANManager.CommitVLAN("network-commit-vlan",this.adapter);a=true}else{this.sCtrl.setPressedButton(b,true);if(b==2)this.onTCPIPv6Click();else b==1?this.onTCPIPv4Click():this.onGeneralClick()}a&&this.hide()},
validateDNS:function(){if(this.ipv6mode.getValue()==="ipv6custom"&&this.dnsv6View.getDVStore().getCount()===0||this.ipv4mode.getValue()==="ipv4custom"&&this.dnsv4View.getDVStore().getCount()===0)return false;return true},validateIP:function(){var a=true;this.ipv4Title.removeClass("x-network-errorlabel");this.subnetTitle.removeClass("x-network-errorlabel");this.gatewayTitle.removeClass("x-network-errorlabel");this.routerTitle.removeClass("x-network-errorlabel");this.ipv6Title.removeClass("x-network-errorlabel");
if(this.ipv4mode.getValue()=="ipv4custom"){if(!_.isValidIPAddress(this.ip.getValue())){a=false;this.ipv4Title.addClass("x-network-errorlabel")}if(this.subnet.getValue()&&!_.isValidNetmask(this.subnet.getValue())){a=false;this.subnetTitle.addClass("x-network-errorlabel")}if(this.router.getValue()&&!_.isValidIPAddress(this.router.getValue())){a=false;this.gatewayTitle.addClass("x-network-errorlabel")}}if(this.ipv6mode.getValue()=="ipv6custom"){if(!_.Utils.isValidIPv6Address(this.ipv6.getValue())){a=
false;this.ipv6Title.addClass("x-network-errorlabel")}if(this.routerv6.getValue()&&!_.Utils.isValidIPv6Address(this.routerv6.getValue())){a=false;this.routerTitle.addClass("x-network-errorlabel")}}var b=this.searchDomains.getValue().split(" ");_.each(b,function(c){if(c!=""&&!_.isValidDomainName(c)){this.searchDomainTitle.addClass("x-network-errorlabel");a=false}},this);return a},validateMTU:function(){if(!parseInt(this.mtu.getValue())){this.mtu.tooltip.enabled=true;this.mtuLbl.addClass("x-network-errorlabel");
return false}return true},update:function(a){this.adapter=a;this.rendered&&this.innerUpdate(a)},innerUpdate:function(a){this.setTitle(String.format("{0}",a.getName()));this.mtu.tooltip.enabled=false;this.mtuLbl.removeClass("x-network-errorlabel");this.ipv4Title.removeClass("x-network-errorlabel");this.subnetTitle.removeClass("x-network-errorlabel");this.gatewayTitle.removeClass("x-network-errorlabel");this.routerTitle.removeClass("x-network-errorlabel");this.ipv6Title.removeClass("x-network-errorlabel");
this.sCtrl.itemAt(0).press(true);this.ipv4Tab.hide();this.ipv6Tab.hide();this.genTab.show();var b=a.getIPType()==_4?"ipv4dhcp":a.getIPType(),c=a.getIPv6Type()==_4?"ipv6dhcp":a.getIPv6Type();this.ipv4mode.setValue(b=="ipv4dhcp"||b=="ipv4custom"||b=="ipv4disable"?b:undefined);this.onIpv4ModeChange();this.ipv6mode.setValue(c=="ipv6dhcp"||c=="ipv6custom"||c=="ipv6disable"?c:undefined);this.onIpv6ModeChange();this.setTCPState(b);this.setTCPv6State(c);this.searchDomains.setValue(a.getDomainName());
this.name.update(a.getName());this.lId.update(a.getId());this.mtu.setValue(a.getMTU());this.speed.update(a.getSpeed());this.ip.setValue(a.getIPAddress());this.ipLbl.update(a.getIPAddress());b=String.format("{0}/{1}",a.getIPv6AddressLocal(),a.getPrefixLengthLocal());this.ipv6Local.setValue(b);this.ipv6LocalLbl.update(b);this.ipv6.setValue(a.getIPv6Address());this.ipv6Lbl.update(a.getIPv6Address());this.router.setValue(a.getRouter());this.routerLbl.update(a.getRouter());this.routerv6.setValue(a.getRouterv6());
this.routerv6Lbl.update(a.getRouterv6());this.subnet.setValue(a.getSubnet());this.subnetLbl.update(a.getSubnet());this.prefix.setValue(a.getPrefixLength());this.prefixLbl.update(a.getPrefixLength());this.dnssv4=[];this.dnssv6=[];_.each(a.getDNSRecords(),function(d){d=_a(d,"_i1z").getIP();if(_.isValidIPAddress(d))this.dnssv4.push({dns:d});else _.Utils.isValidIPv6Address(d)&&this.dnssv6.push({dns:d})},this);this.dnsv4View.getDVStore().loadData(this.dnssv4);this.dnsv4View.refreshDV();
this.dnsv6View.getDVStore().loadData(this.dnssv6);this.dnsv6View.refreshDV()},setTCPState:function(a){this.setVisibleState(this.ipv4controls,a=="ipv4custom");this.setVisibleState(this.ipv4lbls,a=="ipv4dhcp");this.setVisibleState(this.ipv4titles,a!=="ipv4disable");this.setVisibleState([this.dnsv4View],a!=="ipv4disable");this.ipv4mode.setDisabled(a=="unknown")},saveDNSServersForV4:function(a,b){this.dnsserversv4[a]=this.cloneStore(this.dnsv4View.getDVStore());if(b==="ipv4custom")this.dnsserversv4[b]||
(this.dnsserversv4[b]=this.cloneStore(this.dnsv4View.getDVStore()))},updateDNSServersForV4:function(a){this.dnsv4View.getDVStore().loadData([]);this.dnsserversv4[a]&&this.dnsv4View.setDVStore(this.dnsserversv4[a]);this.dnsv4View.refreshDV()},saveDNSServersForV6:function(a,b){this.dnsserversv6[a]=this.cloneStore(this.dnsv6View.getDVStore());if(b==="ipv6custom")this.dnsserversv6[b]||(this.dnsserversv6[b]=this.cloneStore(this.dnsv6View.getDVStore()))},updateDNSServersForV6:function(a){this.dnsv6View.getDVStore().loadData([]);
this.dnsserversv6[a]&&this.dnsv6View.setDVStore(this.dnsserversv6[a]);this.dnsv4View.refreshDV()},setTCPv6State:function(a){this.setVisibleState(this.ipv6controls,a=="ipv6custom");this.setVisibleState(this.ipv6lbls,a=="ipv6auto"||a=="ipv6dhcp");this.ipv6mode.setDisabled(a=="unknown")},setVisibleState:function(a,b){_.each(a,function(c){c.setVisible(b)},this)},cloneStore:function(a){var b=new Ext.data.JsonStore({fields:["dns"]});a=a.getRange();var c,d;for(c=0;c<a.length;c++){d=Ext.util.JSON.decode(Ext.util.JSON.encode(a[c].copy().data));
b.add(new Ext.data.Record(d,d.id))}b.fireEvent("load",b);return b}});Ext.namespace("_s5");
_s5.NewDnsWindow=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,help:"network_wnd_add_dns",constructor:function(){this.type=_s5.NewDnsWindow.Type.Add;this.title=_TR("NEW_DNS");this.html=this.getHtml();this.fbar=this.getFooter();_s5.NewDnsWindow.superclass.constructor.apply(this,arguments)},getHtml:function(){return'<table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td id="'+
(this.nameTitle=Ext.id())+'" class="x-network-dlglabel">'+_TR("IP_ADDRESS")+_TR("COLON")+'</td><td id="'+(this.nameId=Ext.id())+'"></td></tr></table>'},getFooter:function(){this.bAdd=new Ext.UI.Button({text:_TR("ADD"),width:100,scope:this,acceptbtn:true});this.bAdd.on("click",this.onAddClicked,this);var a=new Ext.UI.Button({text:_TR("CANCEL"),width:100,scope:this,cancelbtn:true});a.on("click",function(){this.hide()},this);return["->",this.bAdd,a]},afterRender:function(){_s5.NewDnsWindow.superclass.afterRender.apply(this,
arguments);this.nameTitle=Ext.get(this.nameTitle);this.name=new Ext.UI.TextField({width:245,maskRe:/[a-zA-Z0-9:.]/});this.name.render(this.nameId)},show:function(a,b){_s5.NewDnsWindow.superclass.show.call(this);this.type=a?a:_s5.NewDnsWindow.Type.Add;switch(this.type){case _s5.NewDnsWindow.Type.Add:this.bAdd.setText(_TR("ADD"));break;case _s5.NewDnsWindow.Type.Edit:this.name.setValue(b);this.bAdd.setText(_TR("APPLY"));break}},onShow:function(){_s5.NewDnsWindow.superclass.onShow.apply(this,
arguments);this.nameTitle.removeClass("x-network-errorlabel");this.center();this.name.setValue("");this.name.focus(false,true)},onAddClicked:function(){if(!_.isValidIPAddress(this.name.getValue())&&!_.Utils.isValidIPv6Address(this.name.getValue()))this.nameTitle.addClass("x-network-errorlabel");else{this.hide();this.fireEvent("apply",this.name.getValue(),this.type)}},clear:function(){this.rendered&&this.name.setValue("")}});_s5.NewDnsWindow.Type={Add:0,Edit:1};Ext.namespace("_s5");
_s5.NewVLAN=_._1(_9,Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,cls:"x-network-addvlan",help:"network_wnd_add_vlan",constructor:function(){this.title=_TR("VLAN_ADD");this.html=this.getHtml();this.fbar=this.getFooter();_s5.NewVLAN.superclass.constructor.apply(this,arguments);this.networkVLANManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getNetworkVLANManager();
_a(this.networkVLANManager,"_i1").Advise(this)},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td class="x-network-dlglabel">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-addvlan-id">'+_TR("VLAN_ID")+':</td><td id="'+(this.tfIdId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("ADD"),width:100,scope:this,acceptbtn:true,listeners:{click:this.onApplyClick,
scope:this}}),b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,scope:this,cancelbtn:true,listeners:{click:function(){this.hide()},scope:this}});return["->",a,b]},afterRender:function(){_s5.NewVLAN.superclass.afterRender.apply(this,arguments);this.tfName=new Ext.UI.TextField({width:245,readOnly:true,renderTo:this.tfNameId});this.tfId=new Ext.UI.TextField({width:245,maskRe:/[0-9]/,tooltipCfg:{html:_TR("VLAN_ERROR_TIP"),enabled:true},renderTo:this.tfIdId,enableKeyEvents:true,listeners:{change:this.onIdChange,
keyup:this.onIdChange,specialkey:this.onIdChange,scope:this}})},onShow:function(){_s5.NewVLAN.superclass.onShow.apply(this,arguments);this.center();this.clear()},onIdChange:function(){var a=this.tfId.getValue();this.tfName.setValue(a?this.adapter.getName()+"."+a:"")},onApplyClick:function(){var a=this.tfId.getValue();if(!a||a<1||a>4094){this.addClass("x-network-addvlan-error-id");this.tfId.focus(false,true)}else{this.hide();var b=this.networkVLANManager.createVLAN();b.putBase(this.adapter.getName());
b.putId(a);this.networkVLANManager.AddVLAN("network-add-vlan",b)}},loadArgs:function(a){this.adapter=a},clear:function(){this.removeClass("x-network-addvlan-error-id");this.tfName.reset();this.tfId.reset();this.tfId.focus(false,true)},INetworkVLANManagerEvents:{_o2:function(a,b){b=="network-add-vlan"&&this.hide()}}});Ext.namespace("_s5");
_s5.DNSDataView=_._1(Ext.Container,{cls:"x-network-dialog-dns",getDVStore:function(){return this.dv.getStore()},setDVStore:function(a){return this.dv.setStore(a)},refreshDV:function(){return this.dv.refresh()},constructor:function(a){_.apply(this,a);this.html='<div class="x-network-dnsservers ui-fwgrid-header" id="'+(this.elHeaderId=Ext.id())+'">'+_TR("DNS_SERVERS")+"</div>";_s5.DNSDataView.superclass.constructor.apply(this,arguments)},afterRender:function(){_s5.DNSDataView.superclass.afterRender.apply(this,
arguments);this.bRemove=new Ext.UI.RoundButton({cls:"x-frontview-btn-minus-small x-network-dnsbtn",disabled:true,renderTo:this.elHeaderId,listeners:{click:this.onRemoveClick,scope:this}});this.bAdd=new Ext.UI.RoundButton({cls:"x-frontview-btn-plus-small x-network-dnsbtn",renderTo:this.elHeaderId,listeners:{click:this.onAddClick,scope:this}});this.bEdit=new Ext.UI.RoundButton({cls:"x-frontview-btn-properties-small x-network-dnsbtn",disabled:true,renderTo:this.elHeaderId,listeners:{click:this.onEditClick,
scope:this}});this.dv=new Ext.DataView({cls:"x-network-dnss",overClass:"ui-fwgrid-rowhover",selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["dns"]}),singleSelect:true,blockRefresh:true,scrollOffset:0,itemSelector:"div",tpl:new Ext.XTemplate('<tpl for="."><div class="ui-fwgrid-row x-network-dnsrow">{dns}</div></tpl>'),renderTo:this.el,listeners:{selectionchange:this.onSelectionChange,scope:this}});(new Ext.UI.Scroller({dom:this.dv.el.dom,type:"vertical"})).reg()},onAddClick:function(){if(!this.wndAddDNS)this.wndAddDNS=
new _s5.NewDnsWindow({listeners:{apply:this.onAddApply,scope:this}});this.wndAddDNS.show()},onEditClick:function(){if(!this.wndAddDNS)this.wndAddDNS=new _s5.NewDnsWindow({listeners:{apply:this.onAddApply,scope:this}});var a=this.dv.getSelectedRecords()[0].data.dns;this.wndAddDNS.show(_s5.NewDnsWindow.Type.Edit,a)},onAddApply:function(a,b){var c=this.dv.getStore();switch(b?b:_s5.NewDnsWindow.Type.Add){case _s5.NewDnsWindow.Type.Add:c.add(new c.recordType({dns:a}));
this.dv.select(c.getCount()-1);break;case _s5.NewDnsWindow.Type.Edit:this.dv.getSelectedRecords()[0].set("dns",a);break}},onRemoveClick:function(){if(this.dv.getSelectionCount()>0){this.dv.getStore().remove(this.dv.getSelectedRecords()[0]);this.dv.refresh()}},onSelectionChange:function(){this.bRemove.setDisabled(!this.dv.getSelectedIndexes().length);this.bEdit.setDisabled(!this.dv.getSelectedIndexes().length)}});
_s5.Routes=_._1(_9,Ext.Container,{cls:"x-network-routesdv",masks:["0.0.0.0","128.0.0.0","192.0.0.0","224.0.0.0","240.0.0.0","248.0.0.0","252.0.0.0","254.0.0.0","255.0.0.0","255.128.0.0","255.192.0.0","255.224.0.0","255.240.0.0","255.248.0.0","255.252.0.0","255.254.0.0","255.255.0.0","255.255.128.0","255.255.192.0","255.255.224.0","255.255.240.0","255.255.248.0","255.255.252.0","255.255.254.0","255.255.255.0","255.255.255.128","255.255.255.192","255.255.255.224","255.255.255.240",
"255.255.255.248","255.255.255.252","255.255.255.254","255.255.255.255"],constructor:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.networkManager=a.getNetworkManager();this.networkVLANManager=a.getNetworkVLANManager();_s5.Routes.superclass.constructor.apply(this,arguments)},afterRender:function(){_s5.Routes.superclass.afterRender.apply(this,arguments);new Ext.Container({cls:"x-network-routesdv-btns",renderTo:this.el,items:[this.bRemove=
new Ext.UI.RoundButton({cls:"x-network-routesdv-btn x-frontview-btn-minus-small",disabled:true,width:30,height:30,listeners:{click:this.onRemoveClick,scope:this}}),this.bAdd=new Ext.UI.RoundButton({cls:"x-network-routesdv-btn x-frontview-btn-plus-small",width:30,height:30,listeners:{click:this.onAddClick,scope:this}}),this.bEdit=new Ext.UI.RoundButton({cls:"x-network-routesdv-btn x-frontview-btn-properties-small",disabled:true,width:30,height:30,listeners:{click:this.onEditClick,scope:this}})]});
new Ext.Component({cls:"x-clear",renderTo:this.el});this.boxDVHeader=new Ext.Container({html:'<table class=" x-network-routesdv-row" cellpadding="0" cellspacing="0"><tr><td><div class="x-ellipsis x-network-routesdv-with-icon">'+_TR("IP_ADDRESS")+'</div></td><td><div class="x-ellipsis">'+_TR("SUBNET_MASK")+'</div></td><td><div class="x-ellipsis">'+_TR("GATEWAY")+'</div></td><td><div class="x-ellipsis">'+_TR("ADAPTER")+"</div></td></tr></table>",cls:"ui-fwgrid-header",renderTo:this.el});this.dv=new Ext.DataView({overClass:"ui-fwgrid-rowhover",
selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["ip","mask","gateway","cidr","adapter","sproute","spadapter"]}),singleSelect:true,blockRefresh:true,scrollOffset:0,style:"max-height: 300px;",itemSelector:"table",tpl:new Ext.XTemplate('<tpl for="."><table  class="ui-fwgrid-row x-network-routesdv-row" cellpadding="0" cellspacing="0"><tr><td><div class="x-ellipsis x-network-routesdv-with-icon x-network-routesdv-icon">{ip}</div></td><td><div class="x-ellipsis">{mask}</div></td><td><div class="x-ellipsis">{gateway}</div></td><td><div class="x-ellipsis">{adapter}</div></td></tr></table></tpl>'),
renderTo:this.el,listeners:{scope:this,selectionchange:this.onSelectionChange}});(new Ext.UI.Scroller({dom:this.dv.el.dom,type:"vertical"})).reg();this.loadMask=new Ext.UI.LoadMask(this.bwrap,{frame:false});this.populate()},populate:function(){var a=[],b=this.networkManager.getNICS();b=b!=_4?b:[];var c=this.networkManager.getBONDS();c=c!=_4?c:[];var d=this.networkVLANManager.getVLANs();d=d!=_4?d:[];b=b.concat(c).concat(d);_.each(b,function(e){e=_a(e,"_i27")||_a(e,
"_i1y")||_a(e,"INetworkVLAN");var f=e.getRoutes().slice(),g,h,i,k;_.each(f,function(j){j=_a(j,"INetworkRoute");g=j.getDestCIDRAddress();h=g.substr(0,g.indexOf("/"));i=g.substr(g.indexOf("/"));k=i.substr(i.indexOf(":")+1);i=this.masks[i.substr(1,i.indexOf(":")-1)];a.push({ip:h,mask:i,gateway:k,cidr:g,adapter:e.getName(),sproute:j,spadapter:e})},this)},this);this.dv.getStore().loadData(a);this.dv.refresh();this.bAdd.setDisabled(!b.length);this.loadMask.hide()},deleteRoute:function(a){var b=
a.get("spadapter"),c=b.getRoutes(),d=[],e=a.get("cidr");_.each(c,function(f){if(_a(f,"INetworkRoute").getDestCIDRAddress()!=e)d.push(f);else e=""},this);b.putRoutes(d);return b},onSelectionChange:function(a,b){this.bRemove.setDisabled(!b.length);this.bEdit.setDisabled(!b.length)},onAddClick:function(){if(!this.wndNewRoute){this.wndNewRoute=new _s5.NewRoute;this.wndNewRoute.on("add",this.onAddRoute,this)}this.wndNewRoute.show()},onEditClick:function(){if(!this.wndNewRoute){this.wndNewRoute=
new _s5.NewRoute;this.wndNewRoute.on("add",this.onAddRoute,this)}var a=this.dv.getSelectedRecords()[0];this.wndNewRoute.show(_s5.NewDnsWindow.Type.Edit,a)},onAddRoute:function(a,b,c,d,e,f){this.loadMask.show();a=_a(new _1.nroute,"INetworkRoute");b=b+"/"+this.masks.indexOf(c)+":"+d;a.putDestCIDRAddress(b);f===_s5.NewDnsWindow.Type.Edit&&this.deleteRoute(this.dv.getSelectedRecords()[0]);e.putRoutes(e.getRoutes().concat([a]));this.commitAdapter(e)},onRemoveClick:function(){var a=
this.dv.getSelectedRecords();if(a.length){var b=a[0];Ext.UI.MessageBox.confirm({title:_TR("ROUTES"),msg:_TR("WARN_DELETION_ROUTE"),fn:function(c){if(c=="yes"){this.loadMask.show();this.commitAdapter(this.deleteRoute(b))}},scope:this})}},commitAdapter:function(a){if(_a(a,"_i27"))this.networkManager.commitNIC(a,"network-commit-nic");else if(_a(a,"_i1y"))this.networkManager.commitBOND(a,"network-commit-bond");else _a(a,"INetworkVLAN")&&this.networkVLANManager.CommitVLAN("network-commit-vlan",
a)}});Ext.namespace("_s5");
_s5.NewRoute=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,cls:"x-network-addroute",help:"network_wnd_add_route",constructor:function(){this.type=_s5.NewDnsWindow.Type.Add;this.title=_TR("NEW_ROUTE");this.html=this.getHtml();this.fbar=this.getFooter();var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.networkManager=a.getNetworkManager();this.networkVLANManager=a.getNetworkVLANManager();
_s5.NewRoute.superclass.constructor.apply(this,arguments)},getHtml:function(){return'<table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel x-network-dlglabel-ip">'+_TR("IP_ADDRESS")+':</td><td id="'+(this.tfIpId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-dlglabel-mask">'+_TR("SUBNET_MASK")+':</td><td id="'+(this.tfMaskId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-dlglabel-gateway">'+_TR("GATEWAY")+
':</td><td id="'+(this.tfGatewayId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-dlglabel-adapter">'+_TR("ADAPTER")+':</td><td id="'+(this.cbAdapterId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-dlglabel-adapterip">'+_TR("ADAPTER_IPV4_ADDRESS")+':</td><td id="'+(this.tfAdapterIpId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-dlglabel-adaptermask">'+_TR("ADAPTER_SUBNET_MASK")+':</td><td id="'+(this.tfAdapterMaskId=Ext.id())+'"></td></tr></table>'},
getFooter:function(){this.bAdd=new Ext.UI.Button({text:_TR("ADD"),width:100,scope:this,acceptbtn:true});this.bAdd.on("click",this.onAddClick,this);var a=new Ext.UI.Button({text:_TR("CANCEL"),width:100,scope:this,cancelbtn:true});a.on("click",function(){this.hide()},this);return["->",this.bAdd,a]},afterRender:function(){_s5.NewRoute.superclass.afterRender.apply(this,arguments);this.tfIp=new Ext.UI.TextField({width:300,maskRe:/[a-zA-Z0-9:.]/,renderTo:this.tfIpId});this.tfMask=new Ext.UI.TextField({width:300,
maskRe:/[0-9.]/,renderTo:this.tfMaskId});this.tfGateway=new Ext.UI.TextField({width:300,maskRe:/[a-zA-Z0-9:.]/,renderTo:this.tfGatewayId});this.cbAdapter=new Ext.UI.ComboBox({width:300,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","spadapter","ip","mask"],data:[]}),valueField:"spadapter",displayField:"id",renderTo:this.cbAdapterId,listeners:{select:function(a,b){this.tfAdapterIp.setValue(b.get("ip"));this.tfAdapterMask.setValue(b.get("mask"))},scope:this}});this.tfAdapterIp=
new Ext.UI.TextField({width:300,readOnly:true,renderTo:this.tfAdapterIpId});this.tfAdapterMask=new Ext.UI.TextField({width:300,readOnly:true,renderTo:this.tfAdapterMaskId})},show:function(a,b){_s5.NewRoute.superclass.show.call(this);this.type=a?a:_s5.NewDnsWindow.Type.Add;switch(this.type){case _s5.NewDnsWindow.Type.Add:this.cbAdapter.setDisabled(false);this.bAdd.setText(_TR("ADD"));break;case _s5.NewDnsWindow.Type.Edit:this.cbAdapter.setDisabled(true);
for(a=0;a<this.cbAdapter.getStore().getCount();++a)if(this.cbAdapter.getStore().getAt(a).data.id===b.data.adapter)break;this.cbAdapter.onSelect(this.cbAdapter.store.data.get(a),0);this.tfIp.setValue(b.data.ip);this.tfMask.setValue(b.data.mask);this.tfGateway.setValue(b.data.gateway);this.bAdd.setText(_TR("APPLY"));break}},onShow:function(){_s5.NewRoute.superclass.onShow.apply(this,arguments);this.center();this.clear();var a=[],b=this.networkManager.getNICS();b=b!=_4?b:[];var c=this.networkManager.getBONDS();
c=c!=_4?c:[];var d=this.networkVLANManager.getVLANs();d=d!=_4?d:[];b=b.concat(c).concat(d);_.each(b,function(e){e=_a(e,"_i27")||_a(e,"_i1y")||_a(e,"INetworkVLAN");a.push([e.getName(),e,e.getIPAddress(),e.getSubnet()])},this);this.cbAdapter.getStore().loadData(a);this.cbAdapter.onSelect(this.cbAdapter.store.data.get(0),0)},onAddClick:function(){var a=false,b=this.tfIp.getValue(),c=this.tfMask.getValue(),d=this.tfGateway.getValue(),e=this.cbAdapter.getValue();
this.removeClass(this.cls+"-error-ip");this.removeClass(this.cls+"-error-gateway");this.removeClass(this.cls+"-error-mask");this.removeClass(this.cls+"-error-adapter");if(!this.isValidIPAddress(b)){this.addClass(this.cls+"-error-ip");a=true}if(!_.isValidNetmask(c)){this.addClass(this.cls+"-error-mask");a=true}if(_.isValidIPAddress(d)){var f=this.tfAdapterIp.getValue(),g=this.tfAdapterMask.getValue();d=this.tfGateway.getValue();f=f.split(".");g=g.split(".");var h=d.split("."),i;if(f.length==g.length&&
f.length==h.length)for(i=0;i<f.length;++i){if((parseInt(f[i])&parseInt(g[i]))!=(parseInt(h[i])&parseInt(g[i]))){this.addClass(this.cls+"-error-adapter");a=true;break}}else{this.addClass(this.cls+"-error-adapter");a=true}}else{this.addClass(this.cls+"-error-gateway");a=true}if(!a){this.hide();this.fireEvent("add",this,b,c,d,e,this.type)}},isValidIPAddress:function(a){if(!/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(a))return false;a=a.split(".");for(var b=0;b<a.length;b++)if(parseInt(parseFloat(a[b]))>
255)return false;return true},clear:function(){this.removeClass(this.cls+"-error-ip");this.removeClass(this.cls+"-error-gateway");this.removeClass(this.cls+"-error-mask");this.removeClass(this.cls+"-error-adapter");this.tfIp.setValue("");this.tfMask.setValue("");this.tfGateway.setValue("");this.tfAdapterIp.setValue("");this.tfAdapterMask.setValue("");this.tfIp.focus(false,true)}});Ext.namespace("_s5.Proxy");
_s5.Proxy.Settings=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,stateful:false,shim:true,cls:"x-network-proxy-settings",help:"network_proxy_settings",constructor:function(){this.title=_TR("PROXY_SETTINGS");this.html=this.getHtml();this.fbar=this.getFooter();this.spNetProxyManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getNetworkProxyManager();_a(this.spNetProxyManager,"_i1").Advise(this);
_s5.Proxy.Settings.superclass.constructor.apply(this,arguments)},getHtml:function(){return'<table cellpadding="0" cellspacing="0" class="x-network-dialog-opt"><tr><td class="x-network-dlglabel x-network-dlglabel-type">'+_TR("TYPE")+':</td><td id="'+(this.cbProtocolId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-dlglabel-address">'+_TR("ADDRESS")+':</td><td id="'+(this.tfAddressId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel x-network-dlglabel-port">'+
_TR("PORT")+':</td><td id="'+(this.tfPortId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel">'+_TR("USER_NAME")+':</td><td id="'+(this.tfUsernameId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel">'+_TR("PASSWORD")+':</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr><tr><td class="x-network-dlglabel"></td><td id="'+(this.bTestId=Ext.id())+'"></td></tr></table>'},getFooter:function(){this.bApply=new Ext.UI.Button({text:_TR("ADD"),width:100,acceptbtn:true,handler:this.onApplyClick,
scope:this});return["->",this.bApply,new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true,handler:function(){this.hide()},scope:this})]},afterRender:function(){_s5.Proxy.Settings.superclass.afterRender.apply(this,arguments);this.cbProtocol=new Ext.UI.ComboBox({width:300,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id"],data:[]}),valueField:"id",displayField:"id",renderTo:this.cbProtocolId});this.tfAddress=new Ext.UI.TextField({width:300,maskRe:/[a-zA-Z0-9.]/,
renderTo:this.tfAddressId});this.tfPort=new Ext.UI.TextField({width:300,maskRe:/[0-9]/,inputMaxLength:5,renderTo:this.tfPortId});this.tfUsername=new Ext.UI.TextField({width:300,renderTo:this.tfUsernameId});this.tfPassword=new Ext.UI.TextField({width:300,inputType:"password",renderTo:this.tfPasswordId});this.bTest=new Ext.UI.Button({text:_TR("TEST_CONNECTION"),width:150,style:"margin-top: 10px",handler:this.onTestClick,scope:this,renderTo:this.bTestId});this.loadMask=new Ext.UI.LoadMask(this.bwrap,
{frame:false})},show:function(a){_s5.Proxy.Settings.superclass.show.call(this);if(a)a=_a(_a(a,"_i3").clone(),"INetworkProxyServer");var b=["HTTP","HTTPS"],c=[],d=this.spNetProxyManager.getServers();d=d!=_4?d:[];_.each(d,function(e){if(!a||e.getId()!=a.getId())b.remove(e.getProtocol().toUpperCase())});_.each(b,function(e){c.push([e])});this.cbProtocol.getStore().loadData(c);if(this.spServer=a){this.cbProtocol.setValue(a.getProtocol().toUpperCase());this.tfAddress.setValue(a.getAddress());
this.tfPort.setValue(a.getPort());this.tfUsername.setValue(a.getUsername());this.tfPassword.setValue(a.getPassword());this.bApply.setText(_TR("APPLY"))}else{this.cbProtocol.setValue(b[0]);this.bApply.setText(_TR("ADD"))}},onShow:function(){_s5.Proxy.Settings.superclass.onShow.apply(this,arguments);this.center();this.clear()},validate:function(){var a=false,b=this.tfAddress.getValue(),c=this.tfPort.getValue();this.removeClass(this.cls+"-error-address");this.removeClass(this.cls+"-error-port");
if(!_.isValidIPAddress(b)&&!_.Utils.isValidDomainName(b)){this.addClass(this.cls+"-error-address");a=true}if(!c){this.addClass(this.cls+"-error-port");a=true}return!a},onApplyClick:function(){if(this.validate()){var a=this.spServer||this.spNetProxyManager.createServer();a.putProtocol(this.cbProtocol.getValue().toLowerCase());a.putAddress(this.tfAddress.getValue());a.putPort(this.tfPort.getValue());a.putUsername(this.tfUsername.getValue());a.putPassword(this.tfPassword.getValue());this.spServer?
this.spNetProxyManager.CommitServer("network-proxy-commit-server",a):this.spNetProxyManager.AddServer("network-proxy-add-server",a)}},onTestClick:function(){if(this.validate()){var a=this.spServer||this.spNetProxyManager.createServer();a.putProtocol(this.cbProtocol.getValue().toLowerCase());a.putAddress(this.tfAddress.getValue());a.putPort(this.tfPort.getValue());a.putUsername(this.tfUsername.getValue());a.putPassword(this.tfPassword.getValue());this.spNetProxyManager.TestConnection("network-proxy-test-server",
a)}},clear:function(){this.removeClass(this.cls+"-error-address");this.removeClass(this.cls+"-error-port");this.tfAddress.setValue("");this.tfPort.setValue("");this.tfUsername.setValue("");this.tfPassword.setValue("");this.loadMask.hide();this.tfAddress.focus(false,true)},INetworkProxyManagerEvents:{_o1:function(a,b){if(b=="network-proxy-commit-server"||b=="network-proxy-add-server"||b=="network-proxy-test-server")this.loadMask.show()},OnTestConnection:function(a,b,c,d){if(b=="network-proxy-test-server")c?
Ext.UI.MessageBox.info({msg:_TR("NETWORK_PROXY_TESTCONNECTION_SUCCESS")}):Ext.UI.MessageBox.info({msg:String.format(_TR("NETWORK_PROXY_TESTCONNECTION_FAIL"),d||"")})},_o3:function(a,b,c){if(c=="network-proxy-commit-server"||c=="network-proxy-add-server"||c=="network-proxy-test-server"){this.loadMask.hide();if(a!=_5){if(b=_a(b,"_io").getLastNMLError()){a=b.getErrorCode();if(b){b=b.getErrorDetails();c=_TR(a);_a(_7(_._3.ErrorReporter),"IErrorReporter").report(c,
"Code: "+a,_2.ERROR,{windowTitle:this.title,title:"",subTitle:c+"<br />"+b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}else if(c=="network-proxy-commit-server"||c=="network-proxy-add-server"){this.hide();this.spNetProxyManager.UpdateServers("network-proxy-fetch-servers")}}}}});
_._2("_","_._3","_._3.SmartAppsSubSys");_._3.SmartAppsSubSys.IAppsTab="SmartAppsSubSys.IAppsTab";_._3.SmartAppsSubSys.IAppsTabList="SmartAppsSubSys.IAppsTabList";_._3.SmartAppsSubSys.IApps="SmartAppsSubSys.IApps";_._3.SmartAppsSubSys.InstalledAppsTab="SmartAppsSubSys.InstalledAppsTab";_._3.SmartAppsSubSys.InstalledApps="SmartAppsSubSys.InstalledApps";_._3.SmartAppsSubSys.FreeAppsTab="SmartAppsSubSys.FreeAppsTab";
_._3.SmartAppsSubSys.FreeApps="SmartAppsSubSys.FreeApps";_._3.SmartAppsSubSys.FeaturedAppsMenu="SmartAppsSubSys.FeaturedAppsMenu";_._3.SmartAppsSubSys.BaseTab="SmartAppsSubSys.BaseTab";_._3.SmartAppsSubSys.GenieTab="SmartAppsSubSys.GenieTab";Ext.namespace("_s6");_s6.IAppsTabList=_._1(IExtNative,{IAppsTabList:{AddTab:function(){return _3},RemoveTab:function(){return _3}}});var IAppsTabList=_s6.IAppsTabList;
Ext.namespace("_s6");_s6.IAppsTab=_._1(IExtNative,{IAppsTab:{getTitle:function(){return _3},getStyle:function(){return _3},getContent:function(){return _3}}});var IAppsTab=_s6.IAppsTab;Ext.namespace("_s6");_s6.IApps=_._1(IExtNative,{IApps:{Initialize:function(){return _3}}});var IApps=_s6.IApps;Ext.namespace("_s6");
_s6.GenieTab=_._1(_._3.SmartAppsSubSys.GenieTab,_s0.TabItem,ISystemFrameTab,_i4,{card:true,help:"apps_tab",constructor:function(){_s6.GenieTab.superclass.constructor.call(this,arguments);this.on("tabactivate",this.TabActivate,this);this.on("tabdeactivate",this.TabDeactivate,this);this.isRefreshDone=false},ISystemFrameTab:{getTitle:function(){return _TR("GENIE_MAIN_TAB")},getCfg:function(){return{id:"apps-tab"}}},TabActivate:function(){this.isRefreshDone||
_a(this.content.layout.activeItem.selectedTabs,"IDataView").RefreshData(true)},TabDeactivate:function(){this.isRefreshDone=false}});_s0.RegisterTab(_._3.System.Frame,_._3.SmartAppsSubSys.GenieTab,"ISystemFrame","ISystemFrameTab");_s6.replaceLocalhost=function(a){return a.match(/localhost:[\d]+/)?a.replace("localhost",location.hostname):a.replace("localhost",location.host)};_._2("_s6");
_s6.BaseTab=_._1(_s0.TabItem,ISystemFrameTab,_i4,IAppsTabList,{constructor:function(){_s6.BaseTab.superclass.constructor.call(this,arguments);this.tabList=_a(this,"IAppsTabList");this.selectedTabs=null;this.categories=[];this.defaultCategories=["APP_CAT_ALL","APP_CAT_FEATURED_APPS","APP_CAT_SECURITY_HOME","APP_CAT_SECURITY_NETWORK","APP_CAT_GAMING","APP_CAT_MEDIA","APP_CAT_ENERGY","APP_CAT_HOME_CONTROL","APP_CAT_STORAGE","APP_CAT_SUPPORT_TECH",
"APP_CAT_NETWORK_MANAGE","APP_CAT_PRODUCTIVITY","APP_CAT_BUSINESS","APP_CAT_OTHER","APP_CAT_HEALTH"];this.on("tabinitialize",this.TabInitialize,this);this.on("tabactivate",this.TabActivate,this);this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td id="'+(this.searchId=this.groupsId=Ext.id())+'" style="vertical-align: middle;"></td><td id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>'},refresh:function(){_a(this.selectedTabs,
"IDataView").RefreshData(true);return _5},installLocalApp:function(a,b){localStorage.setItem("fname",b);this.spSLAManager.installAppDryRun("install_upload_app_dry_run",b)},onTabInitialized:function(){var a=this.spSLAManager.getFeaturedApps();this.featuredAppsNames=[];if(a!=_4)for(var b=0;b<a.length;++b){var c=_a(a[b],"_i3l");c&&c!=_4&&!c.isInstalled()&&this.featuredAppsNames.push(c.getName())}(new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",
html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),listeners:{afterrender:function(e){e.el.on("click",function(){this.refresh()},this)},scope:this}})).render(this.buttonsId);(new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-smapps-upload-btn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("UPLOAD")),listeners:{afterrender:function(e){e.el.on("click",function(){(new _s6.UploadWindow({listeners:{upload:function(f,
g){this.installLocalApp(f,g)},scope:this}})).show()},this)},scope:this}})).render(this.buttonsId);var d=new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-smapps-reverse-btn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("GENIE_REVERSE")),listeners:{afterrender:function(e){e.el.on("click",function(){this.reverseApps();d[this._srev?"addClass":"removeClass"]("reversed")},this)},scope:this}});d.render(this.buttonsId);this.searchField=new Ext.UI.TextField({cls:"x-smapps-search-field",
width:250,emptyText:_TR("FILTER_BY_NAME"),enableKeyEvents:true,listeners:{keyup:function(e,f){clearTimeout(this.searchProcId);this.searchProcId=setTimeout(function(){this.applySearch()}.bind(this),500);f.getKey()==f.ENTER&&this.applySearch()},scope:this}});this.searchField.render(this.searchId);(new Ext.UI.RoundButton({iconCls:"x-smapps-search-icon",cls:"x-smapps-search-btn",width:28,height:28,listeners:{click:function(){this.applySearch()},scope:this}})).render(this.searchId)},prepareApps:function(a,
b){if(this.searchField){this.searchField.setValue("");this._sapps=a.length?a:[];this._scb=b;this._srev=!!this._srev;this._sapps.sort(function(c,d){c=this.extractAppData(c).name.toUpperCase();d=this.extractAppData(d).name.toUpperCase();var e=1;if(this._srev)e=-1;if(c>d)return e;else if(c<d)return-e;return 0}.bind(this));b(this._sapps)}},initCategory:function(){this.sideBar&&this.sideBar.destroy();this.categories=[];this.renderCategories=true;this.renderedCategoriesList=false;this.category="APP_CAT_ALL";
this.sideBar=new Ext.UI.SideBar({style:"vertical-align: middle; position: absolute; margin-top: 36px;",listeners:{contextmenu:this.FeaturedAppsMenu,select:function(a,b,c){this.category=this.categories[c];this.applySearch()},scope:this},renderTo:this.groupsId})},FeaturedAppsMenu:function(a,b){if(b==="APP_CAT_FEATURED_APPS"){this.menu=this.menu||new _s6.FeaturedAppsMenu({visible:this.spSLAManager.getFeaturedAppsVisible(),listeners:{itemclick:function(c){this.setFeaturedAppsVisible(c.commandName===
"show"?true:false)},scope:this}});this.menu.setVisible(this.spSLAManager.getFeaturedAppsVisible());this.menu.show(a.el,"tl-b?")}},setFeaturedAppsVisible:function(a){this.spSLAManager.commitFeaturedAppsVisible("system-fapps-update-visible",a);this.menu.setVisible(a)},addCategory:function(a){(a===_4||!a||!this.checkCategoryDefault(a))&&(a="APP_CAT_OTHER");a&&this.categories.indexOf(a)===-1&&this.categories.push(a)},renderCategoriesList:function(){if(!this.renderedCategoriesList){this.renderedCategoriesList=
true;this.categories.sort(function(a,b){if(this.defaultCategories.indexOf(a)>this.defaultCategories.indexOf(b))return 1;if(this.defaultCategories.indexOf(a)<this.defaultCategories.indexOf(b))return-1;return 0}.bind(this));this.categories.unshift("APP_CAT_ALL");this.categories.forEach(function(a){this.sideBar.addTab(_TR("GENIE_"+a),new Ext.Component,a)},this)}},reverseApps:function(){this.searchField.setValue("");if(this._sapps&&this._scb){this._srev=!this._srev;this._sapps.reverse();this._scb(this._sapps)}},
checkCategoryDefault:function(a){return this.defaultCategories.indexOf(a)>-1},extractAppData:function(a){var b=(a=_a(a,"_i3"))?a.getXml():undefined;a=b?b.getNodeText("Name"):"";var c=b?b.getNodeText("Author"):"",d=b?b.getNodeText("Description"):"";b=b&&b.getNodeText("Category")?b.getNodeText("Category"):"APP_CAT_OTHER";return{name:a,author:c,desc:d,category:b}},applySearch:function(){clearTimeout(this.searchProcId);var a=this.searchField.getValue().toUpperCase(),b=this._sapps,c=this._scb,
d=this.renderCategories?[]:a?[]:b,e;if(this.renderCategories?a||this.category:a)for(var f,g,h=0,i=b.length;h<i;++h){f=this.extractAppData(e=b[h]);g=(f.name+"\n"+f.author+"\n"+f.desc).toUpperCase().match(a);f=this.category==="APP_CAT_ALL"||this.featuredAppsNames.indexOf(f.name)!=-1&&this.category==="APP_CAT_FEATURED_APPS"||(!this.checkCategoryDefault(f.category)?"APP_CAT_OTHER":f.category)===this.category;if(this.renderCategories?g&&f:g)d.push(e)}c&&c(d)},IAppsTabList:{AddTab:function(a){a=_a(a,
"IAppsTab");if(!Ext.isEmpty(a))this.selectedTabs=a;return _5},RemoveTab:function(){return _3}},TabInitialize:function(){_7(_._3.SmartAppsSubSys.GenieTab).__s.isRefreshDone=true;this.onTabInitialized()},TabActivate:function(){this.refresh()}});Ext.namespace("_s6");
_s6.UploadWindow=_._1(_9,Ext.UI.Window,{footer:true,resizable:false,width:450,modal:true,closeAction:"hide",updatesCount:0,constructor:function(){this.title=_TR("UPLOAD_APP");this.keys=[{key:13,fn:this.onUploadClick,scope:this}];_s6.UploadWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){this.uploadBtn=new Ext.UI.Button({width:100,text:_TR("UPLOAD"),acceptbtn:true});this.uploadBtn.on("click",this.onUploadClick,this);this.cancelBtn=
new Ext.UI.Button({width:100,text:_TR("CANCEL"),cancelbtn:true});this.cancelBtn.on("click",this.onCancelClick,this);this.fbar={buttonAlign:"left",items:["->",this.uploadBtn,this.cancelBtn]};_s6.UploadWindow.superclass.initComponent.apply(this,arguments)},afterRender:function(a){_s6.UploadWindow.superclass.afterRender.call(this,a);this.el.addClass("x-rc-access-temporary");this.filebrowse=new Ext.XTemplate('<div id="'+(this.filebrowserfakeId=Ext.id())+'" style="height: 30px;" ></div>',
_.isiOS?"":'<input type="file" name="file" class="x-rd-window-upload-file-input" id="'+(this.filebrowserId=Ext.id())+'"/><input type="hidden" name="MAX_FILE_SIZE" value="104857600" /> ');this.filebrowse.compile();this.form=new Ext.form.FormPanel({innerId:Ext.id(),bufferResize:0,frame:false,header:false,border:false,collapsible:false,fileUpload:true,items:[this.filename=new Ext.UI.TextField({typeAhead:true,readOnly:!_.isiOS,width:276}),this.filenamelbtn=new Ext.BoxComponent({html:this.filebrowse.apply(),
cls:"x-rd-window-upload-file-button"})],layout:"table",layoutConfig:{tableAttrs:{style:{width:"100%"}},columns:3}});this.form.render(this.body);this.browseBtn=new Ext.UI.Button({width:100,cls:"fl",text:"Browse",expandToText:true,scope:this});this.browseBtn.render(this.filebrowserfakeId);this.filebrowser=Ext.get(this.filebrowserId);this.filebrowser.on("change",this.updateFieldText,this);this.filebrowser.on("mouseover",function(){this.browseBtn.el.addClass(this.browseBtn.overCls)},this);this.filebrowser.on("mouseout",
function(){this.browseBtn.el.removeClass(this.browseBtn.overCls)},this)},onUploadClick:function(){if(Ext.get(this.filebrowserId))Ext.get(this.filebrowserId).dom.value&&this.uploadForm();else this.hide()},uploadForm:function(){var a=this.form.getForm();this.hide();if(this.fileExt!=="deb"||!this.fileExt)Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("SMART_UPLOAD_APP_ERROR"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400});else{a.errorReader=new Ext.data.XmlReader({successProperty:"success",
record:"response"},Ext.data.Record.create([{name:"response"}]));a.doAction("submit",{url:"/admin-cgi/localapp.cgi",scope:this,success:this.responseSuccess,failure:this.responseFailure})}},resetForm:function(){var a=this.form.getForm();if(a.isValid()){this.stopUpload(document.getElementById(a.abortId));a.el.dom.reset();a.abortId=null}},stopUpload:function(a){if(a){if(a.document&&a.document.execCommand)a.document.execCommand("Stop");else a.contentWindow&&a.contentWindow.stop&&a.contentWindow.stop();
Ext.removeNode(a)}},onCancelClick:function(){this.resetForm();this.hide()},responseSuccess:function(a,b){a=null;try{a=b.result.pid}catch(c){}b=this.filename.getValue();this.fireEvent("upload",a,b)},responseFailure:function(){},clearFieldText:function(){this.filename.setValue("")},updateFieldText:function(){var a=document.getElementById(this.filebrowserId);if(a)if(a.files&&a.files.length>1){var b="";_.each(a.files,function(d){b+=(b?", ":"")+"'"+d.name+"'"},this);this.filename.setValue(b)}else{var c=
String(a.value).lastIndexOf("\\");a=this.fileNameValue=c!=-1?a.value.substr(c+1,a.value.length):a.value;this.filename.setValue(a);a=a.split(".");this.fileExt=a[a.length-1]}}});Ext.namespace("_s6");
_s6.InstalledAppsTab=_._1(_._3.SmartAppsSubSys.InstalledAppsTab,_s6.BaseTab,IAppsTab,IDataView,_i3o,IPromptWindowEvents,{help:"apps_tab_installed",constructor:function(){_s6.InstalledAppsTab.superclass.constructor.apply(this,arguments);if(this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spSLAManager=this.spDevice.getSmartLocalAppManager();_a(this.spSLAManager,"_i1").Advise(this);
this.spServManager=this.spDevice.getSystemServiceManager();this.zfsVolumesManager=this.spDevice.getZFSVolumesManager()}this.noVolMessage=new Ext.BoxComponent({html:_TR("SHARES_NO_VOLUMES"),cls:"x-frontview-dataview-emptybg",hidden:true});this.noAppMessage=new Ext.BoxComponent({html:_TR("NO_INSTALLED_ADDONS"),cls:"x-frontview-dataview-emptybg",hidden:true});this.on("afterrender",function(a){ScrollManager.reg(a.el)},this);this.content.on("afterrender",function(){this.noVolMessage.render(this.content.el);
this.noAppMessage.render(this.content.el)},this);this.prompt=_a(_7(_._3.Controls.PromptWindow),"IPromptWindow");this.filteredApps={}},onTabInitialized:function(){_s6.InstalledAppsTab.superclass.onTabInitialized.call(this,false);this.tabList.AddTab(_a(this,"IAppsTab"));this.panelList=_a(this,"IPanelList");this.progress=new Ext.UI.LoadMask(this.content.el,{type:Ext.UI.LoadMask.LARGE,delay:100})},ISystemFrameTab:{getTitle:function(){return _TR("GENIE_INSTALLED_TAB")},
getCfg:function(){return{id:"apps-installed-tab",cls:"x-smapps-installed-btn"}}},IAppsTab:{getTitle:function(){return _TR("GENIE_INSTALLED_TAB")},getStyle:function(){return{width:110}},getContent:function(){return _a(this,"IExtNative").getNative()}},IDataView:{RefreshData:function(){var a=this.zfsVolumesManager.getActiveVolumes();this.noAppMessage.hide();if(a!=_4&&a.length==0){this.noVolMessage.show();this.content.removeAll()}else{this.noVolMessage.hide();this.spSLAManager.updateLocalInstalledApps("update_local_installed_apps")}return _5},
AddData:function(){return _5},RemoveData:function(){return _5}},ISelected:{getSelected:function(){return{name:"",installdate:"",description:""}},IsEmpty:function(){return true}},IPromptWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}},_i3o:{_o1:function(a,
b){switch(b){case "update_local_installed_apps":this.showIndicator();break}return _5},_o2:function(a,b){switch(b){case "update_local_installed_apps":this.prepareApps(this.spSLAManager.getLocalInstalledApps(),function(c){this.populateLocalApps(c)}.bind(this));break;case "polling_check_localapp_update_status":if(this.spSLAManager.getAppBackgroundProcessStatus()==="not-exists"){this.isBackProcPollingStarted=false;window.clearInterval(this.backProcPollInterval);this.hideIndicatorExt();this.refreshDataSet()}break;
case "local_apps_check_update":this.checkAppsUpdate();break}return _5},OnQueue:function(a,b,c){switch(c){case "local_apps_check_update":this.pid=a;break}},OnReceiveProgressData:function(a){var b=this;if(this.progBar&&a.getProgressPercentage()>0){this.newBarWidth=Math.floor(a.getProgressPercentage()/100*this.totalBarWidth);var c=this.progBar.getWidth();if(this.progressInterval==undefined)this.progressInterval=setInterval(function(){if(c<b.newBarWidth){c+=1;b.progBar.setWidth(c)}else b.exitProgress()},
10)}var d=a.getStatusMsgString();if(d&&d!==_4&&this.progMsgStatus){this.progMsgStatus.show();this.progMsgStatus.update(d)}this.progStatus&&this.progStatus.update(_TR("SMART_APP_PROGRESS_"+a.getStatusString()));return _5},OnInstallationAbort:function(a){var b=_TR("GENIE_OPERATION_FAILED"),c=_TR(a.getLogMsg()).replace("{AppName}",a.getPackageName());a.getLogMsg()=="LOGMSG_APPLICATION_INSTALLER_PLEASE_RUN_CHECK_UPDATE"?Ext.UI.MessageBox.confirm({title:b,msg:c,fn:function(d){if(d=="yes"){this.spSLAManager.commitCheckUpdate("local_apps_check_update");
this.hideIndicatorExt()}},scope:this}):Ext.UI.MessageBox.error({title:b,msg:c,fn:function(d){d=="ok"&&this.hideIndicatorExt()},scope:this});return _5},_o3:function(a,b,c){switch(c){case "update_local_installed_apps":this.hideIndicator();this.inprocess=false;break}return _5}},exitProgress:function(){window.clearInterval(this.progressInterval);this.progressInterval=undefined},restartSystem:function(a){_a(_7(_1.CLSIDS.MarvelDevice),"_i2").reboot(a.getArgs().arg1,{cmd:"systemreboot",
msg:_TR("DEVICE_IN_REBOOT")});return true},refreshDataSet:function(){_a(this,"IDataView").RefreshData(true,true)},populateLocalApps:function(a){this.content.removeAll();this.dupApps=[];_.each(a,function(b){b=_a(b,"_i3l");if(!Ext.isEmpty(b)&&!this.filteredApps[b.getAppId()]){var c=b.getId(),d=b.getAppId(),e=b.getStatus(),f=b.getName(),g=b.getAuthor(),h=b.getVersion(),i=b.getDescription(),m=b.getServiceName()||"",n=_s6.replaceLocalhost(b.getConfigURL()||""),
o=_s6.replaceLocalhost(b.getLaunchURL()||"");b.getDebianPackageName();b.getServiceName();var p=location.protocol+"//"+location.host+"/apps/logo/"+c+".png",j=b.getNewAppVersion(),q=j===_4?false:true,k=b.getInfoURL()===_4||b.getInfoURL()===undefined||b.getInfoURL()===""?"":b.getInfoURL(),l=_a(_7(_._3.SmartAppsSubSys.InstalledApps),"IApps");l.Initialize({iapp:b,appid:c,name:f,description:i,author:g,version:h,genieId:d,appState:e,configUrl:n,launchUrl:o,
icon:p,type:"local",ready:"true",infoUrl:k,service:m,newAvail:q,newVersion:j});_a(b,"_i1").Advise(this);this.addApp(l)}},this);this.content.items.length===0&&this.noAppMessage.show()},checkAppsUpdate:function(){if(!this.isBackProcPollingStarted){this.appBackProcPoll();this.showIndicatorExt("local","check")}},appBackProcPoll:function(){var a=this;if(!this.isBackProcPollingStarted){this.backProcPollInterval=setInterval(function(){a.appBackProcPolling()},2E3);this.isBackProcPollingStarted=
true}},appBackProcPolling:function(){this.spSLAManager.updateAppBackgroundProcessStatus("polling_check_localapp_update_status",this.pid)},showIndicator:function(){Ext.isEmpty(this.progress)||this.progress.show()},hideIndicator:function(){Ext.isEmpty(this.progress)||this.progress.hide()},showIndicatorExt:function(a,b,c){var d="",e="",f=false;switch(a){case "local":if(b==="install"){d=_TR("GENIE_INSTALLING_APP");e=_TR("SMART_INST_PROCESSING");f=true;if(c)d=String.format(_TR("GENIE_INSTALLING_APP_NAME"),
c)}else if(b==="remove"){d=_TR("GENIE_REMOVING_APP");e=_TR("SMART_INST_PROCESSING");f=false}else if(b==="toggle"){d=_TR("GENIE_TOGGLING_APP_SERVICE");e=_TR("SMART_INST_PROCESSING");f=false}else if(b==="upgrade"){d=_TR("GENIE_UPGRADING_APP");e=_TR("SMART_INST_PROCESSING");f=true}else if(b==="check"){d="Updating list...";e=_TR("SMART_INST_PROCESSING");f=false}break}this.showProgressWindow(d,e,f)},hideIndicatorExt:function(){this.hideProgressWindow()},showProgressWindow:function(a,b,c){if(this.progWin==
undefined)this.progWin=new Ext.UI.Window({title:a,modal:true,width:410,resizable:false,bodyCssClass:"x-sec-prompt-body",autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,buttonAlign:"left",fbar:[this.indicator=new Ext.BoxComponent({cls:"x-controls-prompt-progress-bg"}),"->",this.okBtn=new Ext.UI.Button({text:_TR("OK"),disabled:true,scope:this,acceptbtn:true})],cls:"example-cls",items:[{xtype:"container",layout:"table",layoutConfig:{tableAttrs:{style:"text-align:left; width:100%;"},
columns:1},items:[this.progMsg=new Ext.BoxComponent({xtype:"box",html:b,cls:"x-smapps-progress-text"}),{xtype:"box",style:{height:"10px"}},this.progStatus=new Ext.BoxComponent({xtype:"box",html:_TR("SMART_APP_PROGRESS_PROCESSING"),cls:"x-smapps-progress-text",hidden:true}),this.progMsgStatus=new Ext.BoxComponent({xtype:"box",html:"",cls:"x-smapps-progress-text",hidden:true}),this.progBar=new Ext.BoxComponent({xtype:"box",width:0,cls:"x-smapps-progress",hidden:true})]}]});this.progWin.setTitle(a);
this.progWin.show();this.progMsg.update(b);this.progStatus.update(_TR("SMART_APP_PROGRESS_PROCESSING"));this.progMsgStatus.update("");if(c){this.progBar.setWidth(0);this.progStatus.show();this.progBar.show();this.newBarWidth=0;this.totalBarWidth=this.progStatus.getWidth()}else{this.progStatus.hide();this.progBar.hide()}if(Ext.isEmpty(this.progressInst))this.progressInst=new Ext.UI.LoadMask(this.indicator.el,{type:Ext.UI.LoadMask.MIDDLE,msgCls:"ui-mask-style1"});this.progressInst.show()},hideProgressWindow:function(){if(this.progWin&&
this.progressInst){this.progWin.hide();this.progressInst.hide();this.exitProgress();this.progMsg.update("");this.progStatus.update("");this.progMsgStatus.update("");this.progBar.setWidth(0);this.totalBarWidth=this.newBarWidth=0}},addApp:function(a){this.panelList.addPanel(_a(a,"IExtNative").getNative());return _5},removeApp:function(a){this.panelList.removePanel(_a(a,"IExtNative").getNative());return _5}});
_s0.RegisterTab(_._3.SmartAppsSubSys.GenieTab,_._3.SmartAppsSubSys.InstalledAppsTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s6");
_s6.InstalledApps=_._1(_._3.SmartAppsSubSys.InstalledApps,_.JSCom._9,Ext.BoxComponent,_i3m,IApps,{constructor:function(){this.itemTmpl=new Ext.XTemplate('<tpl if="app_isReady==\'false\'"><div style="display:none;"></tpl><tpl if="app_isReady==\'true\'"><div></tpl><table class="x-frontview-panel-table x-smapps-container" cellpadding="0" cellspacing="0"><tbody><tr>','<td class="x-smapps-leftcol">','<table cellpadding="0" cellspacing="0" border="0" class="x-smapps-font14">',
'<tr><td><img class="x-smapps-icon" src="{apps_icon}"/></td></tr>','<tr><td class="x-smapps-launch-btn" id="'+(this.launchbtnId=Ext.id())+'"></td></tr>',"</table>","</td>",'<td class="x-smapps-rightcol">','<table cellpadding="0" cellspacing="0" border="0" class="x-smapps-font14">','<tr><td><div class="x-smapps-title">{apps_name}</div></td></tr>','<tr><td class="x-smapps-developer"><span class="x-smapps-label">'+_TR("GENIE_DEVELOPER")+_TR("COLON")+" </span><span>{apps_author}</span></td></tr>",'<tr><td class="x-smapps-version"><div class="x-smapps-version-wrap x-ellipsis"><span class="x-smapps-label">'+
_TR("GENIE_VERSION_INSTALLED")+_TR("COLON")+' </span><span title="{apps_version}">{apps_version}</span></div></td></tr>','<tpl if="apps_hasNewVer==true"><tr><td class="x-smapps-version"><div class="x-smapps-version-wrap x-ellipsis"><span class="x-smapps-label">'+_TR("GENIE_VERSION_AVAILABLE")+_TR("COLON")+' </span><span title="{apps_newVer}">{apps_newVer}</span></div></td></tr></tpl>','<tr><td class="x-smapps-onoffbtn">','<table cellpadding="0" cellspacing="0" border="0" width="100%">','<tr><td  id="'+
(this.onoffbtnId=Ext.id())+'" align="left"></td>','<td id="'+(this.updatebtnId=Ext.id())+'" align="right"></td></tr></table>',"</td></tr>",'<tr><td class="x-smapps-label"><div id="'+(this.descId=Ext.id())+'" class="x-smapps-desc" title="{apps_title}">{apps_desc}</div></td></tr>','<tpl if="apps_infourl!=\'\'"><tr><td class="x-smapps-paddingtop10"><a class="x-smapps-link" href="{apps_infourl}" target="_blank">'+_TR("GENIE_DEVELOPER_WEBSITE")+"</a></td>","</tr></tpl>",'<tr><td class="x-smapps-paddingtop10">',
'<a id="'+(this.configLnk=Ext.id())+'" class="x-smapps-link" href="{apps_configurl}" target="_blank">'+_TR("GENIE_APP_SETTINGS_LINK")+"</a>",'<span id="'+(this.sepBar=Ext.id())+'" class="x-smapps-separator">|</span>','<a id="'+(this.removeLink=Ext.id())+'" class="x-smapps-link" href="#">'+_TR("GENIE_REMOVE_LINK")+"</a></td>","</tr>","</table>","</td>","</tr></tbody></table></div>");this.itemTmpl.compile();this.spDevice=_a(_7(_1.CLSIDS.MarvelDevice),"_i2");this.spSLAManager=
this.spDevice.getSmartLocalAppManager();_s6.InstalledApps.superclass.constructor.call(this,arguments)},initComponent:function(){Ext.apply(this,{forceLayout:true,autoDestroy:true,layout:"fit",bufferResize:0,cls:"x-addons-newaddonitem-bg",html:this.itemTmpl.apply({apps_icon:"images/smartnapps/addon_big.png",apps_name:"",apps_id:"",apps_genieid:"",apps_desc:"",apps_title:"",apps_reviews:"",apps_state:"",apps_rating:"",apps_version:"",apps_author:"",apps_myrating:"",apps_reviewid:"",apps_configurl:"",
apps_launchurl:"",apps_infourl:"",apps_type:"",apps_service:"",apps_islogin:"",app_isReady:"",apps_hasNewVer:"",apps_newVer:""})});_s6.InstalledApps.superclass.initComponent.apply(this,arguments);this.on("afterrender",this.onrendered,this)},IApps:{Initialize:function(a){this.iapp=a.iapp;this.html=this.initialConfig.html=this.itemTmpl.apply({apps_icon:Ext.isEmpty(a.icon)||a.icon==_4?"images/smartnapps/addon_default.png":a.icon,apps_name:a.name,apps_id:a.appid,apps_genieid:a.genieId,
apps_desc:a.description!=_4?a.description:"",apps_title:a.description!=_4?a.description.replace(/[\"]/g,"&quot;"):"",apps_reviews:a.reviews,apps_state:a.appState,apps_rating:a.rating,apps_version:a.version,apps_author:a.author,apps_myrating:a.myrating,apps_reviewid:a.reviewId,apps_configurl:a.configUrl,apps_launchurl:a.launchUrl,apps_infourl:a.infoUrl,apps_type:a.type,apps_service:a.service,apps_islogin:a.islogin,app_isReady:a.ready,apps_hasNewVer:a.newAvail,apps_newVer:a.newVersion});_a(this.iapp,
"_i1").Advise(this);this.createButton(a);return _5}},_i3m:{_o2:function(a,b){switch(b){case "remove_local_app_dry_run":a=this.iapp.getUnInstallRelativeApps();a.length>0?Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("REMOVE_LOCAL_APP_DRY_RUN"),this.iapp.getName(),a.join(", ")),fn:function(c){c=="yes"&&this.onremovelocalclicked()},scope:this}):Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("WARN_DELETION"),
this.iapp.getName()),fn:function(c){c=="yes"&&this.onremovelocalclicked()},scope:this});break;case "remove_local_app":if(!this.isPollingStarted){this.pollAction="remove";this.appBackProPoll()}break;case "upgrade_local_app":if(!this.isPollingStarted){this.pollAction="upgrade";this.appBackProPoll()}break;case "polling_remove_local_app_status":this.iapp.getAppBackgroundProcessStatus()==="not-exists"&&this.stopAppStatusPolling();break;case "polling_upgrade_local_app_status":this.iapp.getAppBackgroundProcessStatus()===
"not-exists"&&this.stopAppStatusPolling();break;case "commit_localapp_state":a=_7(_._3.SmartAppsSubSys.InstalledAppsTab);this.iapp.isInstalled()?a.__s.showIndicatorExt("local","toggle"):a.__s.showIndicatorExt("local","install");this.pollAction="toggle";this.appBackProPoll.defer(100,this);break;case "polling_run_localapp_service_status":if(this.iapp.getServiceActiveState()==="active"||this.iapp.getServiceActiveState()==="inactive")this.stopAppStatusPolling();if(this.iapp.getServiceActiveState()===
"failed"){this.stopAppStatusPolling();Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),msg:String.format(_TR("GENIE_ERROR_TURNON_FAILED"),this.iapp.getName()),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400})}break;case "polling_stop_localapp_service_status":if(this.iapp.getServiceActiveState()==="inactive"||this.iapp.getServiceActiveState()==="failed")this.stopAppStatusPolling();break}return _5},OnQueue:function(a,b,c){switch(c){case "remove_local_app":case "upgrade_local_app":this.pid=
a;break}},OnFailed:function(a,b,c){switch(c){case "commit_localapp_state":this.refreshInstalledTab();a=_TR(b.getErrorCode());_a(_7(_._3.ErrorReporter),"IErrorReporter").report(a,"Code: "+b.getErrorCode(),_2.ERROR,{windowTitle:_TR("GENIE_ERROR_INITIALIZE_FAILED"),title:"",subTitle:a,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false});break}return _5}},stopAppStatusPolling:function(){this.isPollingStarted=false;window.clearInterval(this.pollInterval);
_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.hideIndicatorExt();this.refreshInstalledTab()},appBackProPoll:function(){var a=this;if(!this.isPollingStarted){this.pollInterval=setInterval(function(){a.appBackProPolling()},2E3);this.isPollingStarted=true}},appBackProPolling:function(){if(this.pollAction&&this.pollAction==="remove")this.iapp.updateAppBackgroundProcessStatus("polling_remove_local_app_status",this.pid);else if(this.pollAction&&this.pollAction==="upgrade")this.iapp.updateAppBackgroundProcessStatus("polling_upgrade_local_app_status",
this.pid);else if(this.pollAction&&this.pollAction==="toggle"&&this.appStatus)if(this.appStatus.action==="run")this.iapp.updateServiceProcessStatus("polling_run_localapp_service_status",this.appStatus.id);else this.appStatus.action==="stop"&&this.iapp.updateServiceProcessStatus("polling_stop_localapp_service_status",this.appStatus.id)},refreshInstalledTab:function(){_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.refreshDataSet()},createButton:function(a){this.launchBtn=new Ext.UI.Button({text:_TR("GENIE_LAUNCH_APP_BUTTON"),
width:150,properties:a,listeners:{scope:this,click:function(){window.open(a.launchUrl)}}});this.updateBtn=new Ext.UI.Button({text:_TR("GENIE_UPDATE_BUTTON"),properties:a,listeners:{scope:this,click:this.updateApp}});this.onoffLocalBtn=new Ext.UI.ButtonOnOff({properties:a,listeners:{scope:this,click:this.onofflocalclicked}})},updateBtnStatus:function(){if(this.iapp.getStatus()==="running"){this.onoffLocalBtn.setValue(false);this.launchBtn.setDisabled(false)}else{this.onoffLocalBtn.setValue(true);this.launchBtn.setDisabled(true)}if(this.iapp.getServiceName()===
undefined||this.iapp.getServiceName()===""){this.onoffLocalBtn.setValue(false);this.onoffLocalBtn.setDisabled(true);this.launchBtn.setDisabled(false)}if(this.iapp.getConfigURL()===undefined||this.iapp.getConfigURL()===""){Ext.getDom(this.configLnk).style.display="none";Ext.getDom(this.sepBar).style.display="none"}if(this.iapp.getLaunchURL()===undefined||this.iapp.getLaunchURL()==="")this.launchBtn.setDisabled(true);if(this.iapp.getAppType()==="local"&&this.iapp.isPreinstalled()==="1"){Ext.getDom(this.sepBar).style.display=
"none";Ext.getDom(this.removeLink).style.display="none"}},onrendered:function(){this.launchBtn.rendered||this.launchBtn.render(this.launchbtnId);Ext.get(this.removeLink).on("click",function(){this.iapp.uninstallAppDryRun("remove_local_app_dry_run",this.iapp.getId())},this);this.onoffLocalBtn.rendered||this.onoffLocalBtn.render(this.onoffbtnId);!this.updateBtn.rendered&&this.iapp.getNewAppVersion()!==_4&&this.updateBtn.render(this.updatebtnId);this.updateBtnStatus();var a=Ext.get(this.descId);
a&&a.dom.scrollHeight>a.dom.offsetHeight&&a.addClass("x-smapps-desc-shadow")},onremovelocalclicked:function(){this.iapp.uninstallApp("remove_local_app",this.iapp.getId());_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.showIndicatorExt("local","remove")},updateApp:function(){this.iapp.commitAppUpgrade("upgrade_local_app",this.iapp.getId());_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.showIndicatorExt("local","upgrade")},showProgress:function(){_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.showIndicator()},
onofflocalclicked:function(){if(this.spSLAManager)if(this.iapp.getStatus()==="running"){this.appStatus={id:this.iapp.getServiceName(),action:"stop"};this.iapp.commitAppState("commit_localapp_state",this.iapp.getId(),"stopped");this.launchBtn.setDisabled(true)}else{this.appStatus={id:this.iapp.getServiceName(),action:"run"};this.iapp.commitAppState("commit_localapp_state",this.iapp.getId(),"running");this.iapp.getLaunchURL()===undefined||this.iapp.getLaunchURL()===""?this.launchBtn.setDisabled(true):
this.launchBtn.setDisabled(false)}}});Ext.namespace("_s6");
_s6.FreeAppsTab=_._1(_._3.SmartAppsSubSys.FreeAppsTab,_s6.BaseTab,IAppsTab,IDataView,_i3o,{help:"apps_tab_available",constructor:function(){_s6.FreeAppsTab.superclass.constructor.apply(this,arguments);if(this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spSLAManager=this.spDevice.getSmartLocalAppManager();_a(this.spSLAManager,"_i1").Advise(this);this.spServManager=this.spDevice.getSystemServiceManager();
this.zfsVolumesManager=this.spDevice.getZFSVolumesManager()}this.noVolMessage=new Ext.BoxComponent({html:_TR("SHARES_NO_VOLUMES"),cls:"x-frontview-dataview-emptybg",hidden:true});this.on("afterrender",function(a){ScrollManager.reg(a.el)},this);this.content.on("afterrender",function(){this.noVolMessage.render(this.content.el);this.content.addClass("x-frontview-tabitem-available-app")},this);this.filteredApps={}},onTabInitialized:function(){_s6.FreeAppsTab.superclass.onTabInitialized.apply(this,
arguments);this.tabList.AddTab(_a(this,"IAppsTab"));this.panelList=_a(this,"IPanelList");this.progress=new Ext.UI.LoadMask(this.content.el,{type:Ext.UI.LoadMask.LARGE,delay:100});var a=this.spSLAManager.getFeaturedApps();this.featuredAppsIds=[];if(a!=_4)for(var b=0;b<a.length;++b){var c=_a(a[b],"_i3l");c&&c!=_4&&!c.isInstalled()&&this.featuredAppsIds.push(c.getId())}},ISystemFrameTab:{getTitle:function(){return _TR("GENIE_AVAILABLE_TAB")},getCfg:function(){return{id:"apps-available-tab",
cls:"x-smapps-available-btn"}}},IAppsTab:{getTitle:function(){return _TR("AVAILABLE")},getStyle:function(){return{width:110}},getContent:function(){return _a(this,"IExtNative").getNative()}},IDataView:{RefreshData:function(){this.initCategory();var a=this.zfsVolumesManager.getActiveVolumes();if(a!=_4&&a.length==0)this.noVolMessage.show();else{this.noVolMessage.hide();this.spSLAManager.updateEOLApps("update_eol_apps")}return _5},AddData:function(){return _5},RemoveData:function(){return _5}},
ISelected:{getSelected:function(){return{name:"",installdate:"",description:""}},IsEmpty:function(){return true}},_i3o:{_o1:function(a,b){switch(b){case "update_local_available_apps":case "update_eol_apps":this.showIndicator();break}b.cmd==="install_local_app"&&this.showIndicator();return _5},_o2:function(a,b){switch(b){case "install_upload_app_dry_run":var c=localStorage.getItem("fname");a=this.spSLAManager.getInstallRelativeApps();if(a.length>0)if(a.length==
1&&a[0].id=="readynasos"&&this.spSLAManager.getBrokenState()=="Depend")Ext.UI.MessageBox.show({title:_TR("ERROR"),msg:String.format(_TR("APP_REQUIRE_HIGHER_FW_VERSION"),a[0].version.split(" ")[1]),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300});else{var d=[];$_(a).forEach(function(e){d.push(e.name)});Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("INSTALL_LOCALAPP_DRY_RUN"),c,d.join(", ")),fn:function(e){e=="yes"&&this.spSLAManager.commitAppInstall({cmd:"install_local_app",
name:c,pid:void 0},c)},scope:this})}else this.spSLAManager.commitAppInstall({cmd:"install_local_app",name:c,pid:void 0},c);break;case "update_local_available_apps":this.prepareApps(this.spSLAManager.getLocalAvailableApps(),function(e){this.populateLocalApps(e)}.bind(this));break;case "update_eol_apps":this.EOLApps=this.spSLAManager.getEOLApps();break;case "polling_install_local_app_status":if(this.spSLAManager.getAppBackgroundProcessStatus()==="not-exists"){this.isBackProcPollingStarted=false;window.clearInterval(this.backProcPollInterval);
a=_7(_._3.SmartAppsSubSys.InstalledAppsTab);a.__s.hideIndicatorExt();a.__s.refreshDataSet()}break}return _5},OnQueue:function(a,b,c){if(c.cmd==="install_local_app")if(!this.isBackProcPollingStarted){if(!c.pid)c.pid=a;this.appBackProcPoll(c.pid);_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.showIndicatorExt("local","install",c.name)}},_o3:function(a,b,c){switch(c){case "update_local_available_apps":this.hideIndicator();this.inprocess=false;break;case "update_eol_apps":this.hideIndicator();
this.inprocess=false;a==_5&&this.spSLAManager.updateLocalAvailableApps("update_local_available_apps");break;case "system-fapps-update-visible":this.spSLAManager.updateFeaturedAppsVisible("system-fapps-visabile-update");break}if(c.cmd==="install_local_app"){this.hideIndicator();this.inprocess=false}if(c=="install_upload_app_dry_run"&&a!=_5)if((a=_a(b,"_io").getLastNMLError())&&a.getErrorCode()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),
"Code: "+a,_2.ERROR,{windowTitle:_TR("ERROR"),title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}return _5}},refreshDataSet:function(){_a(this,"IDataView").RefreshData(true,true);_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.refreshDataSet()},populateLocalApps:function(a){if(!this.enterPopulate){this.enterPopulate=true;this.content.removeAll();this.dupApps=[];var b=_a(_7(_1.CLSIDS.Device5200),
"_i2");_a(b.getSystemManager().getSysInfo(),"_i43").getModel().replace("ReadyNAS ","");var c=this.EOLApps;_.each(a,function(d){d=_a(d,"_i3l");if(!Ext.isEmpty(d)&&!this.filteredApps[d.getAppId()]){this.addCategory(this.featuredAppsIds.indexOf(d.getId())===-1?d.getCategory():"APP_CAT_FEATURED_APPS");setTimeout(function(){var e=d.getId(),f=d.getAppId(),g=d.getStatus(),h=d.getName(),i=d.getAuthor(),m=d.getVersion(),n=d.getDescription(),o=d.getServiceName()||"",p=_s6.replaceLocalhost(d.getConfigURL()||
""),j=_s6.replaceLocalhost(d.getLaunchURL()||"");d.getDebianPackageName();d.getServiceName();var q=location.protocol+"//"+location.host+"/apps/logo/"+e+".png",k=d.getNewAppVersion(),l=k===_4?false:true,s=d.getInfoURL()===_4||d.getInfoURL()===undefined||d.getInfoURL()===""?"":d.getInfoURL(),r=_a(_7(_._3.SmartAppsSubSys.FreeApps),"IApps"),u=$_.find(c,function(t){return t.Name==h});r.Initialize({iapp:d,appid:e,name:h,description:n,author:i,version:m,
genieId:f,appState:g,configUrl:p,launchUrl:j,icon:q,type:"local",ready:"true",infoUrl:s,service:o,newAvail:l,newVersion:k,unSupported:!!u});_a(d,"_i1").Advise(this);this.addApp(r)}.bind(this),25)}},this);this.renderCategoriesList();delete this.enterPopulate}},installLocalApp:function(a,b){this.spSLAManager.commitAppInstall({cmd:"install_local_app",name:b,pid:a},b)},appBackProcPoll:function(a){var b=this;if(!this.isBackProcPollingStarted){this.backProcPollInterval=setInterval(function(){b.appBackProcPolling(a)},
2E3);this.isBackProcPollingStarted=true}},appBackProcPolling:function(a){this.spSLAManager.updateAppBackgroundProcessStatus("polling_install_local_app_status",a)},showIndicator:function(){Ext.isEmpty(this.progress)||this.progress.show()},hideIndicator:function(){Ext.isEmpty(this.progress)||this.progress.hide()},addApp:function(a){this.panelList.addPanel(_a(a,"IExtNative").getNative());return _5},removeApp:function(a){this.panelList.removePanel(_a(a,"IExtNative").getNative());return _5}});
_s0.RegisterTab(_._3.SmartAppsSubSys.GenieTab,_._3.SmartAppsSubSys.FreeAppsTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s6");
_s6.FreeApps=_._1(_._3.SmartAppsSubSys.FreeApps,_.JSCom._9,Ext.BoxComponent,_i3m,IApps,{constructor:function(){this.itemTmpl=new Ext.XTemplate('<table class="x-frontview-panel-table x-smapps-container" cellpadding="0" cellspacing="0"><tbody><tr>','<td class="x-smapps-leftcol">','<table cellpadding="0" cellspacing="0" border="0" class="x-smapps-font14">','<tr><td><img class="x-smapps-icon" src="{apps_icon}"/></td></tr>','<tr><td class="x-smapps-launch-btn" id="'+
(this.purchasebtnId=Ext.id())+'"></td></tr>',"</table>","</td>",'<td class="x-smapps-rightcol">','<table cellpadding="0" cellspacing="0" border="0" class="x-smapps-font14">','<tr><td><div class="x-smapps-title">{apps_name}</div></td></tr>','<tr><td class="x-smapps-developer"><span class="x-smapps-label">'+_TR("GENIE_DEVELOPER")+_TR("COLON")+" </span><span>{apps_author}</span></td></tr>",'<tr><td class="x-smapps-version"><span class="x-smapps-label">'+_TR("VERSION")+_TR("COLON")+" </span><span>{apps_version}</span></td></tr>",
'<tr><td class="x-smapps-label" style="padding-top:11px;"><div id="'+(this.descId=Ext.id())+'" class="x-smapps-desc" title="{apps_title}">{apps_desc}</div></td></tr>','<tpl if="apps_infourl!=\'\'"><tr><td class="x-smapps-paddingtop10"><a class="x-smapps-link" href="{apps_infourl}" target="_blank">'+_TR("GENIE_DEVELOPER_WEBSITE")+"</a></td></tr></tpl>","</table>","</td>","</tr></tbody></table>");this.itemTmpl.compile();_s6.FreeApps.superclass.constructor.call(this,arguments);this.spSYSManager=
_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemManager();this.vtracker=_a(_7(_._3.Controls.VersionTracker),"IVersionTracker")},initComponent:function(){Ext.apply(this,{forceLayout:true,autoDestroy:true,layout:"fit",bufferResize:0,cls:"x-addons-newaddonitem-bg",html:this.itemTmpl.apply({apps_icon:"images/smartnapps/addon_big.png",apps_name:"",apps_id:"",apps_genieid:"",apps_desc:"",apps_title:"",apps_reviews:"",apps_state:"",apps_rating:"",apps_version:"",
apps_author:"",apps_myrating:"",apps_reviewid:"",apps_configurl:"",apps_launchurl:"",apps_infourl:"",apps_type:"",apps_service:"",apps_islogin:"",app_isReady:"",apps_hasNewVer:"",apps_newVer:""})});_s6.FreeApps.superclass.initComponent.apply(this,arguments);this.installing=false;this.on("afterrender",this.onrendered,this)},IApps:{Initialize:function(a){this.iapp=a.iapp;this.unSupported=a.unSupported;this.html=this.initialConfig.html=this.itemTmpl.apply({apps_icon:Ext.isEmpty(a.icon)||
a.icon==_4?"images/smartnapps/addon_default.png":a.icon,apps_name:a.name,apps_id:a.appid,apps_genieid:a.genieId,apps_desc:a.description!=_4?a.description:"",apps_title:a.description!=_4?a.description.replace(/[\"]/g,"&quot;"):"",apps_reviews:a.reviews,apps_state:a.appState,apps_rating:a.rating,apps_version:a.version,apps_author:a.author,apps_myrating:a.myrating,apps_reviewid:a.reviewId,apps_configurl:a.configUrl,apps_launchurl:a.launchUrl,apps_infourl:a.infoUrl,apps_type:a.type,apps_service:a.service,
apps_islogin:a.islogin,app_isReady:a.ready,apps_hasNewVer:a.newAvail,apps_newVer:a.newVersion});_a(this.iapp,"_i1").Advise(this);this.createButton(a);return _5}},_i3m:{_o2:function(a,b){switch(b){case "install_localapp_dry_run":if(localStorage.getItem("Install_Dry_Run"))return _5;else localStorage.setItem("Install_Dry_Run","1");a=this.iapp.getInstallRelativeApps();if(a.length>0)if(a.length==1&&a[0].id=="readynasos"&&this.iapp.getBrokenState()=="Depend")Ext.UI.MessageBox.show({title:_TR("ERROR"),
msg:String.format(_TR("APP_REQUIRE_HIGHER_FW_VERSION"),a[0].version.split(" ")[1]),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300});else{var c=[];$_(a).forEach(function(d){c.push(d.name)});Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("INSTALL_LOCALAPP_DRY_RUN"),this.iapp.getName(),c.join(", ")),fn:function(d){d=="yes"&&this.iapp.commitAppInstall("commit_install_localapp",this.iapp.getId())},scope:this})}else this.iapp.commitAppInstall("commit_install_localapp",
this.iapp.getId());break;case "commit_install_localapp":_7(_._3.SmartAppsSubSys.InstalledAppsTab).__s.showIndicatorExt("local","install",this.iapp.getName());this.appBackProPoll.defer(3E3,this);break;case "polling_install_local_app_status":this.iapp.getAppBackgroundProcessStatus()==="not-exists"&&this.stopAppStatusPolling();break}return _5},OnQueue:function(a,b,c){switch(c){case "commit_install_localapp":this.pid=a;break}}},stopAppStatusPolling:function(){var a=_a(_7(_._3.SmartAppsSubSys.GenieTab),
"IExtNative").getNative(),b=_a(_7(_._3.SmartAppsSubSys.InstalledAppsTab),"IExtNative").getNative(),c=_a(_7(_._3.SmartAppsSubSys.FreeAppsTab),"IExtNative").getNative();b.hideIndicatorExt();if(a.rendered){a.content.layout.activeItem&&a.content.layout.activeItem.id==c.id&&a.selectTab(b);c.rendered&&this.refreshFreeTab()}this.isPollingStarted=false;window.clearInterval(this.pollInterval);a=_7(_._3.SystemSubSys.AppsAddonsPanel);
_a(a,"IPanelItem").refresh();a=_7(_._3.SystemSubSys.FeaturedAppsPanel);_a(a,"IPanelItem").refresh()},appBackProPoll:function(){var a=this;if(!this.isPollingStarted){this.pollInterval=setInterval(function(){a.appBackProPolling()},2E3);this.isPollingStarted=true}},appBackProPolling:function(){this.iapp.updateAppBackgroundProcessStatus("polling_install_local_app_status",this.pid)},refreshFreeTab:function(){_7(_._3.SmartAppsSubSys.FreeAppsTab).__s.refreshDataSet()},
showIndicator:function(){},hideIndicator:function(){},createButton:function(a){var b=_TR("GENIE_INSTALL_BUTTON");if(this.iapp.isInstalled())b=_TR("GENIE_INSTALLED_BUTTON");this.purchaseBtn=new Ext.UI.Button({text:b,width:150,properties:a,disabled:this.iapp.isInstalled(),listeners:{scope:this,click:this.ongetclicked}});this.updateBtnStatus(a)},updateBtnStatus:function(){if(this.iapp.isInstalled()){this.purchaseBtn.text=_TR("GENIE_INSTALLED_BUTTON");this.purchaseBtn.setDisabled(true)}else{this.purchaseBtn.text=
_TR("GENIE_INSTALL_BUTTON");this.purchaseBtn.setDisabled(false)}},onrendered:function(){this.purchaseBtn.rendered||this.purchaseBtn.render(this.purchasebtnId);var a=Ext.get(this.descId);a&&a.dom.scrollHeight>a.dom.offsetHeight&&a.addClass("x-smapps-desc-shadow")},ongetclicked:function(){_s0.GA.trackEvent({eventCategory:"Apps-Available",eventAction:"click",eventLabel:"Install-"+this.iapp.getName()});localStorage.removeItem("Install_Dry_Run");if(this.unSupported){var a=this.iapp.getName();
Ext.UI.MessageBox.confirm({title:a,msg:String.format(_TR("INSTALL_EOL_APP_CONFIRM_MESSAGE"),a),width:450,fn:function(b){b=="yes"&&this.iapp.installAppDryRun("install_localapp_dry_run",this.iapp.getId())},scope:this})}else this.iapp.installAppDryRun("install_localapp_dry_run",this.iapp.getId())}});Ext.namespace("_s6");
_s6.FeaturedAppsMenu=_._1(_9,Ext.UI.Menu,{cls:"x-browse-menu",constructor:function(a){this.visible=!!a.visible;var b=Ext.menu.Item;this.showOnOverview=new b({text:_TR("Show on overview"),icon:false,ctCls:"x-featured-apps-menu-item-plus",commandName:"show"});this.hideOnOverview=new b({text:_TR("Hide on overview"),icon:false,ctCls:"x-featured-apps-menu-item-minus",commandName:"hide"});this.setVisible(this.visible);this.items=[this.showOnOverview,this.hideOnOverview];
_s6.FeaturedAppsMenu.superclass.constructor.apply(this,arguments)},setVisible:function(a){this.showOnOverview.setVisible(!a);this.hideOnOverview.setVisible(a)}});
_._2("_","_._3","_._3.CloudSubSys");_._3.CloudSubSys.CloudTab="CloudSubSys.CloudTab";Ext.namespace("_s7");
_s7.CloudTab=_._1(_._3.CloudSubSys.CloudTab,_s0.TabItem,ISystemFrameTab,_i4,{card:false,help:"cloud_tab",constructor:function(){_s7.CloudTab.superclass.constructor.apply(this,arguments);this.on("tabinitialize",this.TabInitialize,this)},initComponent:function(){this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%; height:100%;"><tr><td><div class="x-cloud-statepanel x-ellipsis"><div id="'+(this.step1Id=Ext.id())+
'" class="x-cloud-state-step1 x-ellipsis" style="float: left;"></div><div id="'+(this.step2Id=Ext.id())+'" class="x-cloud-state-step2 x-ellipsis" style="float: left;"></div><div id="'+(this.questionId=Ext.id())+'" class="x-ellipsis" style="float: left; margin-top: 20px;"></div></div></td><td  id="'+(this.buttonsId=Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';_s7.CloudTab.superclass.initComponent.apply(this,arguments);this.updatesCount=0},refresh:function(){this.readyCloudPanel&&
this.readyCloudPanel.refresh();this.amazonDrivePanel&&this.amazonDrivePanel.refresh();this.as3DrivePanel&&this.as3DrivePanel.refresh();this.wasabiPanel&&this.wasabiPanel.refresh();this.azureDrivePanel&&this.azureDrivePanel.refresh();this.vaultPanel&&this.vaultPanel.refresh();this.gdPanel&&this.gdPanel.refresh();this.oneDrivePanel&&this.oneDrivePanel.refresh();this.dbPanel&&this.dbPanel.refresh()},ISystemFrameTab:{getTitle:function(){return _TR("CLOUD")},getCfg:function(){return{id:"cloud-tab"}}},
showProgress:function(){++this.updatesCount;this.mask.show()},hideProgress:function(){if(--this.updatesCount<=0){this.mask.hide();this.updatesCount=0}},afterRender:function(){_s7.CloudTab.superclass.afterRender.apply(this,arguments)},TabInitialize:function(){this.readyCloudPanel=new _s7.ReadyCloudPanel;this.readyCloudPanel.questionId=this.questionId;this.readyCloudPanel.render(this.content.el);this.readyCloudPanel.showProgress=this.showProgress.bind(this);this.readyCloudPanel.hideProgress=
this.hideProgress.bind(this);this.readyCloudPanel.step1Id=this.step1Id;this.readyCloudPanel.step2Id=this.step2Id;this.vaultPanel=new _s7.VaultPanel;this.vaultPanel.render(this.content.el);this.vaultPanel.showProgress=this.showProgress.bind(this);this.vaultPanel.hideProgress=this.hideProgress.bind(this);this.amazonDrivePanel=new _s7.Storage.AmazonDrive;this.amazonDrivePanel.render(this.content.el);this.amazonDrivePanel.showProgress=this.showProgress.bind(this);this.amazonDrivePanel.hideProgress=
this.hideProgress.bind(this);this.as3DrivePanel=new _s7.Storage.AS3;this.as3DrivePanel.render(this.content.el);this.as3DrivePanel.showProgress=this.showProgress.bind(this);this.as3DrivePanel.hideProgress=this.hideProgress.bind(this);this.dbPanel=new _s7.Storage.DB;this.dbPanel.render(this.content.el);this.dbPanel.showProgress=this.showProgress.bind(this);this.dbPanel.hideProgress=this.hideProgress.bind(this);this.gdPanel=new _s7.Storage.GD;this.gdPanel.render(this.content.el);
this.gdPanel.showProgress=this.showProgress.bind(this);this.gdPanel.hideProgress=this.hideProgress.bind(this);this.azureDrivePanel=new _s7.Storage.Azure;this.azureDrivePanel.render(this.content.el);this.azureDrivePanel.showProgress=this.showProgress.bind(this);this.azureDrivePanel.hideProgress=this.hideProgress.bind(this);this.oneDrivePanel=new _s7.Storage.OneDrive;this.oneDrivePanel.render(this.content.el);this.oneDrivePanel.showProgress=this.showProgress.bind(this);this.oneDrivePanel.hideProgress=
this.hideProgress.bind(this);this.wasabiPanel=new _s7.Storage.Wasabi;this.wasabiPanel.render(this.content.el);this.wasabiPanel.showProgress=this.showProgress.bind(this);this.wasabiPanel.hideProgress=this.hideProgress.bind(this);new Ext.Component({cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),renderTo:this.buttonsId,listeners:{afterrender:function(a){a.el.on("click",function(){this.refresh()},
this)},scope:this}});setInterval(function(){this.refresh()}.bind(this),3E5);this.refresh()}});_s0.RegisterTab(_._3.System.Frame,_._3.CloudSubSys.CloudTab,"ISystemFrame","ISystemFrameTab");
_s7.openWindowCentered=function(a,b,c,d){var e=0,f=0;try{var g=window.screenTop!=undefined?window.screenTop:screen.top,h=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;e=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-d/2+(window.screenLeft!=undefined?window.screenLeft:screen.left);f=h/2-c/2+g}catch(i){}(a=window.open(a,b,"scrollbars=yes,width="+
d+",height="+c+",top="+f+",left="+e))&&a.focus&&a.focus();return a};Ext.namespace("_s7.Storage");_s7.Storage.showError=function(a,b){if(b){var c=b.getErrorCode();b=b.getErrorDetails();if(c&&b){b=_TR(c)+"<br /><br />"+b;_a(_7(_._3.ErrorReporter),"IErrorReporter").report(b,"Code: "+c,_2.ERROR,{windowTitle:a,title:"",subTitle:b,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}};
_s7.Storage.replaceRedirectState=function(a,b){return a.replace(/(state=)[^&]*/gi,"$1"+encodeURIComponent(window.location.protocol+"//"+window.location.host+b))};Ext.namespace("_s7");
_s7.StatePanel=_._1(_9,Ext.Component,{help:"cloud_panel_state",constructor:function(){var a=new Ext.Template('<div class="x-{cls}-panel"><div id="{iconId}" class="x-cloud-service-icon x-cloud-service-dis"></div><div class="x-cloud-service-cnt"><a href="{url}" target="_blank" class="x-cloud-link">{ttl}</a><div id="{uId}"></div><div class="x-cloud-services-remote-tip">{tip}</div><div id="{btnId}" style="height: 40px;"></div></div></div>',{compiled:true,disableFormats:true});
this.btnsIds={cloud:{iid:Ext.id(),bid:Ext.id(),uid:Ext.id()},replicate:{iid:Ext.id(),bid:Ext.id(),uid:Ext.id()}};this.html='<div style="margin: 0 auto; max-width: 1020px;"><div style="float:left; ">'+a.apply({cls:"cloud",url:document.links_cloud,ttl:_TR("READY_CLOUD"),tip:_TR("CLOUD_READYCLOUD_TIP"),btnId:this.btnsIds.cloud.bid,iconId:this.btnsIds.cloud.iid,uId:this.btnsIds.cloud.uid})+"</div>"+a.apply({cls:"replicate",url:"https://replicate.readynas.com",ttl:_TR("READYNAS")+" "+_TR("REPLICATE"),
tip:_TR("CLOUD_READYNAS_REPLICATE_TIP"),btnId:this.btnsIds.replicate.bid,iconId:this.btnsIds.replicate.iid,uId:this.btnsIds.replicate.uid})+"</div>";this.updatesCount=0;_s7.StatePanel.superclass.constructor.apply(this,arguments);a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spP2PManager=a.getP2PManager();_a(this.spP2PManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.spServManager=
a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this)},afterRender:function(){_s7.StatePanel.superclass.afterRender.apply(this,arguments);this.bQuestion=new Ext.UI.RoundButton({cls:"x-cloud-state-quest"});this.bQuestion.render(this.questionId);this.errorTip=new Ext.UI.ToolTip(this.bQuestion.el,{width:200,html:""});this.bQuestion.hide();this.btns={cloud:{onoffh:this.onCloudOnOff,
setsh:this.onCloudSettings,bt:"READY_CLOUD",authBt:_TR("READY_CLOUD_JOIN_BUTTON")},replicate:{onoffh:this.onReplicateOnOff,setsh:this.onReplicateSettings,bt:"",authBt:_TR("REGISTER")}};for(var a in this.btns){this.btns[a].onOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.btnsIds[a].bid,listeners:{beforeclick:this.btns[a].onoffh,scope:this}});this.btns[a].auth=new Ext.UI.Button({text:this.btns[a].authBt,cls:"x-cloud-settingsbtn",renderTo:this.btnsIds[a].bid,
scope:this,handler:this.btns[a].setsh});this.btns[a].users=new Ext.UI.Button({text:_TR("USERS"),cls:"x-cloud-settingsbtn",renderTo:this.btnsIds[a].bid,scope:this,handler:this.OnUsersClick,stitle:this.btns[a].bt});this.btns[a].icon=Ext.get(this.btnsIds[a].iid);this.btns[a].user=Ext.get(this.btnsIds[a].uid)}this.btns.cloud.sets=new Ext.UI.Button({text:_TR("SETTINGS"),cls:"x-cloud-settingsbtn",renderTo:this.btnsIds.cloud.bid,scope:this,handler:this.onRemoteSettings,stitle:this.btns.cloud.bt});this.btns.cloud.users.setVisible(false)},
OnUsersClick:function(a){if(a.stitle=="READY_CLOUD"){this.cloudUsersWnd||(this.cloudUsersWnd=new _s7.CloudUsersWindow);this.cloudUsersWnd.show()}else{this.remoteUsersWnd||(this.remoteUsersWnd=new _s7.RemoteUsersWindow);this.remoteUsersWnd.stype=a.stitle;this.remoteUsersWnd.show()}},refresh:function(){this.isServicesUpdated=this.isOwnerUpdated=false;this.disableButtons();this.startP2PPolling();this.spSysManager.updateCloudOwner("cloud-update-devowner");this.spServManager.updateSystemServiceInfo("cloud-update-services")},
disableButtons:function(){for(var a in this.btns){this.btns[a].onOff.disable();this.btns[a].auth.disable();this.btns[a].users.disable()}},setRCVisible:function(a){this.btns.cloud.auth.setVisible(a);this.btns.cloud.users.setVisible(false);this.btns.cloud.sets.setVisible(a)},setRPVisible:function(a){this.btns.replicate.auth.setVisible(a);this.btns.replicate.users.setVisible(a)},resetPolling:function(){this.counter=0},startP2PPolling:function(){this.resetPolling();this.p2pStatusPolling()},p2pStatusPolling:function(){if(this.counter===
0){this.spP2PManager.updateP2PConfigurations("cloud-state-update");++this.counter}else if(this.currentState!=="LOGIN"&&this.counter<6){this.spP2PManager.updateP2PConfigurations("cloud-state-update");++this.counter}else{if(this.counter===6){if(this.currentState==="START"||this.currentState==="REGISTER"){Ext.fly(this.step2Id).update(_TR("SERVICES_OFFLINE")).removeClass("x-cloud-state-step-ok").removeClass("x-cloud-step-connecting").removeClass("x-frontview-icon-progress-small").addClass("x-cloud-state-step-error");
this.bQuestion.show()}if(this.currentState==="START")this.errorTip.update(_TR("SERVICE_STARTED"));else this.currentState==="REGISTER"&&this.errorTip.update(_TR("SERVICE_REGISTERED"))}this.resetPolling()}},updateSysServices:function(){this.spServManager.updateSystemServiceInfo("cloud-update-services")},getReplicateService:function(){for(var a=this.spServManager.getSystemServices(),b=0;b<a.length;++b){var c=_a(a[b],"_i32");if(c.getName()=="replicate")return c}return null},getReadyCLOUDService:function(){for(var a=
this.spServManager.getSystemServices(),b=0;b<a.length;++b){var c=_a(a[b],"_i32");if(c.getName()=="readycloud")return c}return null},onCloudOnOff:function(a){var b=true;if(a.isOff())if((a=_a(this.spSysManager.getCloudOwner(),"_i2z"))&&a.getName()){this.getReadyCLOUDService().putEnable(true);this.spServManager.commitSystemService("cloud-services-readycloud-commit");return true}else{this.rcOptionsWnd||(this.rcOptionsWnd=new _s7.ReadyCloudOptionsWindow({firstShow:true,
cloudopt:this.discoverOn}));this.rcOptionsWnd.show(null,null,{leave:false});return false}else{b=false;Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),msg:String.format(_TR("SERVICE_DISABLE"),_TR("READY_CLOUD")),icon:Ext.MessageBox.WARNING,width:400,fn:function(c){if(c=="yes"){this.getReadyCLOUDService().putEnable(false);this.spServManager.commitSystemService("cloud-services-readycloud-commit");b=true}},scope:this})}return b},onReplicateOnOff:function(a){var b=true,c=this.getReplicateService();if(c)if(a.isOff())if(c.getReplicateOwner()){c.putEnable(true);
this.spServManager.commitSystemService("cloud-services-replicate-commit");return true}else{this.replicateOptionsWnd||(this.replicateOptionsWnd=new _s7.ReplicateOptionsWindow);this.replicateOptionsWnd.show()}else{b=false;Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),icon:Ext.MessageBox.WARNING,msg:String.format(_TR("SERVICE_DISABLE"),_TR("READYNAS")+" "+_TR("REPLICATE")),width:400,fn:function(d){if(d=="yes"){c.putEnable(false);this.spServManager.commitSystemService("cloud-services-replicate-commit");
b=true}},scope:this});return b}return false},onCloudSettings:function(){this.rcOptionsWnd||(this.rcOptionsWnd=new _s7.ReadyCloudOptionsWindow({firstShow:true,cloudopt:this.discoverOn}));this.rcOptionsWnd.show(null,null,{leave:this.btns.cloud.auth.getText()===_TR("LEAVE_RC")})},onReplicateSettings:function(){this.replicateOptionsWnd||(this.replicateOptionsWnd=new _s7.ReplicateOptionsWindow);this.replicateOptionsWnd.show()},onRemoteSettings:function(){this.remoteOptionsWnd||
(this.remoteOptionsWnd=new _s7.RemoteOptionsWindow);this.remoteOptionsWnd.show()},populateReplicateService:function(){var a=this.getReplicateService();if(a){this.btns.replicate.onOff.enable();this.btns.replicate.auth.enable();if(a.getEnable()){this.btns.replicate.onOff.setValue(false);this.setRPVisible(true);this.btns.replicate.icon.removeClass("x-cloud-service-dis");this.btns.replicate.user.setDisplayed(true)}else{this.btns.replicate.onOff.setValue(true);this.setRPVisible(false);this.btns.replicate.icon.addClass("x-cloud-service-dis");
this.btns.replicate.user.setDisplayed(false)}(a=a.getReplicateOwner())&&a!==""&&a!==_4?this.btns.replicate.auth.setText(_TR("UNREGISTER")):this.btns.replicate.auth.setText(_TR("REGISTER"))}},populateReadyCLOUDService:function(){if(this.isOwnerUpdated&&this.isServicesUpdated){this.btns.cloud.onOff.enable();this.btns.cloud.auth.enable();this.btns.cloud.onOff.setValue(true);this.btns.cloud.icon.addClass("x-cloud-service-dis");this.btns.cloud.user.setDisplayed(false);this.setRCVisible(false);var a=
_a(this.spSysManager.getCloudOwner(),"_i2z");if(!a||!a.getName()){this.btns.cloud.users.setDisabled(true);this.btns.cloud.auth.setText(_TR("READY_CLOUD_JOIN_BUTTON"))}else{this.btns.cloud.users.setDisabled(false);this.btns.cloud.auth.setText(_TR("LEAVE_RC"));var b=this.getReadyCLOUDService();if(b)if(b.getEnable()){this.btns.cloud.onOff.setValue(false);this.setRCVisible(true);this.btns.cloud.icon.removeClass("x-cloud-service-dis");this.btns.cloud.user.setDisplayed(true);this.btns.cloud.user.update("<span>"+
_TR("SIGNED_IN_AS")+'&nbsp;</span><span style="color: rgb(128, 128, 128);">'+a.getName()+"</span>")}}}this.reviewRemoteBlockState()},reviewRemoteBlockState:function(){if(this.isOwnerUpdated&&this.isServicesUpdated){var a=_a(this.spSysManager.getCloudOwner(),"_i2z");a&&a.getName()&&this.getReadyCLOUDService().getEnable()}},_i20:{_o1:function(a,b){["cloud-services-remote-update","cloud-services-settings-commit","cloud-services-remote-start","cloud-services-remote-stop"].indexOf(b)!=
-1&&this.showProgress()},_o2:function(a,b){switch(b){case "cloud-state-update":a=this.spP2PManager.getP2PStatus();b=this.currentState=this.spP2PManager.getP2PState();var c=this.spP2PManager.getNetworkConn(),d=Ext.get(this.step1Id),e=Ext.get(this.step2Id),f=this.bQuestion;e.removeClass("x-cloud-state-step-ok").removeClass("x-cloud-state-step-error").removeClass("x-cloud-step-connecting").removeClass("x-frontview-icon-progress-small");if(a){d.setDisplayed(true);if(c){d.update(_TR("INTERNET_CONNECTION")).addClass("x-cloud-state-step-ok");
e.setDisplayed(true);switch(b){case "UNAVAILABLE":e.update(_TR("SERVICES_OFFLINE")).addClass("x-cloud-state-step-error");f.show();this.errorTip.update(_TR("SERVICE_UNAVAILABLE"));break;case "START":case "REGISTER":e.update(_TR("SERVICE_CONNECTING")).addClass("x-cloud-step-connecting").addClass("x-frontview-icon-progress-small");f.hide();break;case "LOGIN":e.update(_TR("SERVICES_AVAILABLE")).addClass("x-cloud-state-step-ok");f.hide();break}}else{d.update(_TR("INTERNET_UNAVAILABLE")).removeClass("x-cloud-state-step-ok");
e.setDisplayed(false);f.show();this.errorTip.update(_TR("INTERNET_UNAVAILABLE_TIP"))}}else{this.resetPolling();d.update("").removeClass("x-cloud-state-step-ok");e.update("");f.hide()}this.reviewRemoteBlockState();break;case "cloud-services-remote-start":this.startP2PPolling();break;case "cloud-services-remote-stop":this.refresh();break}return _5},_o3:function(a,b,c){["cloud-services-remote-update","cloud-services-settings-commit","cloud-services-remote-start","cloud-services-remote-stop"].indexOf(c)!=
-1&&this.hideProgress();c=="cloud-state-update"&&this.p2pStatusPolling.defer(5E3,this)}},_i45:{_o1:function(a,b){["cloud-update-devowner","cloudopt-commit-devowner","cloudopt-remove-devowner"].indexOf(b)!=-1&&this.showProgress();return _5},_o2:function(a,b){this.rendered&&b=="cloudopt-commit-devowner"&&this.refresh();if(b=="cloud-update-devowner"){this.isOwnerUpdated=true;this.populateReadyCLOUDService()}},_o3:function(a,b,c){["cloud-update-devowner","cloudopt-commit-devowner",
"cloudopt-remove-devowner"].indexOf(c)!=-1&&this.hideProgress();"cloudopt-remove-devowner"==c&&this.spSysManager.updateCloudOwner("cloud-update-devowner");return _5}},_i35:{_o1:function(a,b){["cloud-update-services","cloud-services-replicate-commit","cloud-services-readycloud-commit","cloud-services-replicatewnd-commit"].indexOf(b)!=-1&&this.showProgress()},_o2:function(a,b){switch(b){case "cloud-update-services":this.populateReplicateService();this.isServicesUpdated=
true;this.populateReadyCLOUDService();break}return _5},_o3:function(a,b,c){["cloud-update-services","cloud-services-replicate-commit","cloud-services-readycloud-commit","cloud-services-replicatewnd-commit"].indexOf(c)!=-1&&this.hideProgress();if(c=="cloud-services-replicate-commit"||c=="cloud-services-readycloud-commit"||c=="cloud-services-replicatewnd-commit"){this.showProgress();(function(){this.refresh();this.hideProgress()}).defer(1E3,this)}return _5}},_i2y:{_o3:function(a,
b,c){if(!this.rendered)return _5;switch(c){case "sync-update-security":this.refresh();break}return _5}}});Ext.namespace("_s7");
_s7.InsightPanel=_._1(_9,Ext.Component,{help:"cloud_panel_state",constructor:function(){var a=new Ext.Template('<div class="x-{cls}-panel"><div style="position: relative" id="{iconId}" class="x-cloud-service-icon x-cloud-service-dis"><div id="{statusId}" class="x-cloud-storage-status"></div></div><div class="x-cloud-service-cnt"><a href="{url}" target="_blank" class="x-cloud-link">{ttl}</a><div id="{uId}"></div><div class="x-cloud-services-remote-tip">{tip}</div><div id="{btnId}" style="height: 40px;"></div></div></div>',{compiled:true,
disableFormats:true});this.btnsIds={insight:{iid:Ext.id(),bid:Ext.id(),sid:Ext.id(),uid:Ext.id()}};this.html='<div style="float:left; min-height:210px;">'+a.apply({cls:"insight",url:"https://www.netgear.com/insight",ttl:_TR("INSIGHT_TITLE"),tip:_TR("INSIGHT_DESCRIPTION"),btnId:this.btnsIds.insight.bid,iconId:this.btnsIds.insight.iid,statusId:this.btnsIds.insight.sid,uId:this.btnsIds.insight.uid})+"</div>";_s7.InsightPanel.superclass.constructor.apply(this,arguments);a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)},afterRender:function(){_s7.InsightPanel.superclass.afterRender.apply(this,arguments);this.btns={insight:{onoffh:this.onInsightOnOff}};for(var a in this.btns){this.btns[a].onOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.btnsIds[a].bid,
listeners:{beforeclick:this.btns[a].onoffh,scope:this}});this.btns[a].icon=Ext.get(this.btnsIds[a].iid);this.btns[a].user=Ext.get(this.btnsIds[a].uid)}},refresh:function(){this.isServicesUpdated=false;this.spSysManager.updateInsightAgent("insight-update-agent")},getInsightService:function(){for(var a=this.spServManager.getSystemServices(),b=0;b<a.length;++b){var c=_a(a[b],"_i32");if(c.getName()=="insight-agentd")return c}return null},onInsightOnOff:function(a){var b=this.getInsightService();
if(b)if(a.isOff()){if(b.getReplicateOwner()){b.putEnable(true);this.spServManager.commitSystemService("cloud-services-insight-commit");return true}}else{b.putEnable(false);this.spServManager.commitSystemService("cloud-services-insight-commit");return true}return false},populateInsightService:function(){if(this.isOwnerUpdated){var a=this.btns.insight,b=this.getInsightService();a.onOff.enable();a.onOff.setValue(!b.getEnable());a.icon.addClass("x-cloud-service-dis");a.user.setDisplayed(false);if((b=
_a(this.spSysManager.getInsightAgent(),"IInsightAgent"))&&b.getUserName()){a.icon.removeClass("x-cloud-service-dis");a.user.setDisplayed(true);var c="<span>"+_TR("INSIGHT_REGISTEREDTO")+"&nbsp;",d='<span style="color: rgb(128, 128, 128);">'+b.getUserName()+"</span>";a.user.update(c+d)}a="gray";c=_TR("CLOUD_STATUS_DISABLED");d=Ext.get(this.btnsIds.insight.sid);if(b&&b.getRegistered()&&b.getRConnected()&&b.getUserName()){a="#47DA02";c=_TR("CLOUD_STATUS_ENABLED")}d.dom.style.backgroundColor=a;
d.dom.title=c}},_i35:{_o1:function(a,b){b=="cloud-services-insight-commit"&&this.showProgress()},_o2:function(a,b){if(b=="cloud-services-insight-commit"){this.hideProgress();this.refresh()}return _5},_o3:function(){return _5}},_i45:{_o1:function(a,b){["insight-update-agent"].indexOf(b)!=-1&&this.showProgress();return _5},_o2:function(a,b){if(b=="insight-update-agent"){this.isOwnerUpdated=true;this.populateInsightService()}},_o3:function(a,
b,c){["insight-update-agent"].indexOf(c)!=-1&&this.hideProgress();return _5}}});Ext.namespace("_s7");
_s7.ReadyCloudPanel=_._1(_9,Ext.Component,{help:"cloud_panel_state",constructor:function(){var a=new Ext.Template('<div class="x-{cls}-panel"><div style="position: relative" id="{iconId}" class="x-cloud-service-icon x-cloud-service-dis"><div id="{statusId}" class="x-cloud-storage-status"></div></div><div class="x-cloud-service-cnt"><a href="{url}" target="_blank" class="x-cloud-link">{ttl}</a><div id="{uId}"></div><div class="x-cloud-services-remote-tip">{tip}</div><div id="{btnId}" style="height: 40px;"></div></div></div>',{compiled:true,
disableFormats:true});this.btnsIds={cloud:{iid:Ext.id(),bid:Ext.id(),sid:Ext.id(),uid:Ext.id()}};this.html='<div style="float:left; min-height:210px;">'+a.apply({cls:"cloud",url:document.links_cloud,ttl:_TR("READY_CLOUD"),tip:_TR("CLOUD_READYCLOUD_TIP"),btnId:this.btnsIds.cloud.bid,iconId:this.btnsIds.cloud.iid,statusId:this.btnsIds.cloud.sid,uId:this.btnsIds.cloud.uid})+"</div>";this.updatesCount=0;_s7.ReadyCloudPanel.superclass.constructor.apply(this,arguments);a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spP2PManager=a.getP2PManager();_a(this.spP2PManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this)},afterRender:function(){_s7.ReadyCloudPanel.superclass.afterRender.apply(this,arguments);
this.bQuestion=new Ext.UI.RoundButton({cls:"x-cloud-state-quest"});this.bQuestion.render(this.questionId);this.errorTip=new Ext.UI.ToolTip(this.bQuestion.el,{width:200,html:""});this.bQuestion.hide();this.btns={cloud:{onoffh:this.onCloudOnOff,setsh:this.onCloudSettings,bt:"READY_CLOUD",authBt:_TR("READY_CLOUD_JOIN_BUTTON")}};for(var a in this.btns){this.btns[a].onOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.btnsIds[a].bid,listeners:{beforeclick:this.btns[a].onoffh,
scope:this}});this.btns[a].auth=new Ext.UI.Button({text:this.btns[a].authBt,cls:"x-cloud-settingsbtn",renderTo:this.btnsIds[a].bid,scope:this,handler:this.btns[a].setsh});this.btns[a].users=new Ext.UI.Button({text:_TR("USERS"),cls:"x-cloud-settingsbtn",renderTo:this.btnsIds[a].bid,scope:this,handler:this.OnUsersClick,stitle:this.btns[a].bt});this.btns[a].icon=Ext.get(this.btnsIds[a].iid);this.btns[a].user=Ext.get(this.btnsIds[a].uid)}this.btns.cloud.sets=new Ext.UI.Button({text:_TR("SETTINGS"),cls:"x-cloud-settingsbtn",
renderTo:this.btnsIds.cloud.bid,scope:this,handler:this.onRemoteSettings,stitle:this.btns.cloud.bt});this.btns.cloud.users.setVisible(false)},OnUsersClick:function(a){if(a.stitle=="READY_CLOUD"){this.cloudUsersWnd||(this.cloudUsersWnd=new _s7.CloudUsersWindow);this.cloudUsersWnd.show()}else{this.remoteUsersWnd||(this.remoteUsersWnd=new _s7.RemoteUsersWindow);this.remoteUsersWnd.stype=a.stitle;this.remoteUsersWnd.show()}},refresh:function(){this.isServicesUpdated=this.isOwnerUpdated=
false;this.disableButtons();this.spSysManager.updateCloudNetConn("cloud-update-netconn");this.spSysManager.updateCloudOwner("cloud-update-devowner");this.spServManager.updateSystemServiceInfo("cloud-update-services")},disableButtons:function(){for(var a in this.btns){this.btns[a].onOff.disable();this.btns[a].auth.disable();this.btns[a].users.disable()}},setRCVisible:function(a){this.btns.cloud.auth.setVisible(a);this.btns.cloud.users.setVisible(false);this.btns.cloud.sets.setVisible(a)},resetPolling:function(){this.counter=
0},startP2PPolling:function(){this.resetPolling();this.p2pStatusPolling()},p2pStatusPolling:function(){if(this.counter===0){this.spP2PManager.updateP2PConfigurations("cloud-state-update");++this.counter}else if(this.currentState!=="LOGIN"&&this.counter<6){this.spP2PManager.updateP2PConfigurations("cloud-state-update");++this.counter}else{if(this.counter===6){if(this.currentState==="START"||this.currentState==="REGISTER"){Ext.fly(this.step2Id).update(_TR("SERVICES_OFFLINE")).removeClass("x-cloud-state-step-ok").removeClass("x-cloud-step-connecting").removeClass("x-frontview-icon-progress-small").addClass("x-cloud-state-step-error");
this.bQuestion.show()}if(this.currentState==="START")this.errorTip.update(_TR("SERVICE_STARTED"));else this.currentState==="REGISTER"&&this.errorTip.update(_TR("SERVICE_REGISTERED"))}this.resetPolling()}},updateSysServices:function(){this.spServManager.updateSystemServiceInfo("cloud-update-services")},getReadyCLOUDService:function(){for(var a=this.spServManager.getSystemServices(),b=0;b<a.length;++b){var c=_a(a[b],"_i32");if(c.getName()=="readycloud")return c}return null},onCloudOnOff:function(a){_s0.GA.trackEvent({eventCategory:"Cloud",
eventAction:"click",eventLabel:"ReadyCLOUD"});var b=true;if(a.isOff())if((a=_a(this.spSysManager.getCloudOwner(),"_i2z"))&&a.getName()){this.getReadyCLOUDService().putEnable(true);this.spServManager.commitSystemService("cloud-services-readycloud-commit");return true}else{this.rcOptionsWnd||(this.rcOptionsWnd=new _s7.ReadyCloudOptionsWindow({firstShow:true,cloudopt:this.discoverOn}));this.rcOptionsWnd.show(null,null,{leave:false});return false}else{b=false;Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),
msg:String.format(_TR("SERVICE_DISABLE"),_TR("READY_CLOUD")),icon:Ext.MessageBox.WARNING,width:400,fn:function(c){if(c=="yes"){this.getReadyCLOUDService().putEnable(false);this.spServManager.commitSystemService("cloud-services-readycloud-commit");b=true}},scope:this})}return b},onCloudSettings:function(){this.rcOptionsWnd||(this.rcOptionsWnd=new _s7.ReadyCloudOptionsWindow({firstShow:true,cloudopt:this.discoverOn}));this.rcOptionsWnd.show(null,null,{leave:this.btns.cloud.auth.getText()===
_TR("LEAVE_RC")})},onReplicateSettings:function(){this.replicateOptionsWnd||(this.replicateOptionsWnd=new _s7.ReplicateOptionsWindow);this.replicateOptionsWnd.show()},onRemoteSettings:function(){this.remoteOptionsWnd||(this.remoteOptionsWnd=new _s7.RemoteOptionsWindow);this.remoteOptionsWnd.show()},populateReadyCLOUDService:function(){if(this.isOwnerUpdated&&this.isServicesUpdated){this.btns.cloud.onOff.enable();this.btns.cloud.auth.enable();this.btns.cloud.onOff.setValue(true);
this.btns.cloud.icon.addClass("x-cloud-service-dis");this.btns.cloud.user.setDisplayed(false);this.setRCVisible(false);var a="gray",b=_TR("CLOUD_STATUS_DISABLED"),c=Ext.get(this.btnsIds.cloud.sid),d=_a(this.spSysManager.getCloudOwner(),"_i2z");if(!d||!d.getName()){this.btns.cloud.users.setDisabled(true);this.btns.cloud.auth.setText(_TR("READY_CLOUD_JOIN_BUTTON"))}else{this.btns.cloud.users.setDisabled(false);this.btns.cloud.auth.setText(_TR("LEAVE_RC"));var e=this.getReadyCLOUDService();if(e)if(e.getEnable()){a=
"#47DA02";b=_TR("CLOUD_STATUS_ENABLED");this.btns.cloud.onOff.setValue(false);this.setRCVisible(true);this.btns.cloud.icon.removeClass("x-cloud-service-dis");this.btns.cloud.user.setDisplayed(true);this.btns.cloud.user.update("<span>"+_TR("SIGNED_IN_AS")+'&nbsp;</span><span style="color: rgb(128, 128, 128);">'+d.getName()+"</span>");this.startP2PPolling()}}c.dom.style.backgroundColor=a;c.dom.title=b}this.reviewRemoteBlockState()},reviewRemoteBlockState:function(){if(this.isOwnerUpdated&&this.isServicesUpdated){var a=
_a(this.spSysManager.getCloudOwner(),"_i2z");a&&a.getName()&&this.getReadyCLOUDService().getEnable()}},_i20:{_o1:function(a,b){["cloud-services-remote-update","cloud-services-settings-commit","cloud-services-remote-start","cloud-services-remote-stop"].indexOf(b)!=-1&&this.showProgress()},_o2:function(a,b){switch(b){case "cloud-state-update":a=this.spP2PManager.getP2PStatus();b=this.spSysManager.getCloudNetConn();var c=this.currentState=this.spP2PManager.getP2PState(),
d=Ext.get(this.step2Id),e=this.bQuestion;if(a&&b==1){d.setDisplayed(true);switch(c){case "UNAVAILABLE":d.update(_TR("SERVICES_OFFLINE")).addClass("x-cloud-state-step-error");e.show();this.errorTip.update(_TR("SERVICE_UNAVAILABLE"));break;case "START":case "REGISTER":d.update(_TR("SERVICE_CONNECTING")).addClass("x-cloud-step-connecting").addClass("x-frontview-icon-progress-small");e.hide();break;case "LOGIN":d.update(_TR("SERVICES_AVAILABLE")).addClass("x-cloud-state-step-ok");e.hide();break}}else{this.resetPolling();
d.setDisplayed(false);d.update("");b==1?e.hide():e.show()}this.reviewRemoteBlockState();break;case "cloud-services-remote-start":this.startP2PPolling();break;case "cloud-services-remote-stop":this.refresh();break}return _5},_o3:function(a,b,c){["cloud-services-remote-update","cloud-services-settings-commit","cloud-services-remote-start","cloud-services-remote-stop"].indexOf(c)!=-1&&this.hideProgress();c=="cloud-state-update"&&this.p2pStatusPolling.defer(5E3,this)}},_i45:{_o1:function(a,
b){["cloud-update-devowner","cloud-update-netconn","cloudopt-commit-devowner","cloudopt-remove-devowner"].indexOf(b)!=-1&&this.showProgress();return _5},_o2:function(a,b){this.rendered&&b=="cloudopt-commit-devowner"&&this.refresh();if(b=="cloud-update-devowner"){this.isOwnerUpdated=true;this.populateReadyCLOUDService()}if(b=="cloud-update-netconn"){a=this.spSysManager.getCloudNetConn();b=Ext.get(this.step1Id);var c=this.bQuestion;b.setDisplayed(true);if(a!=1){b.update(_TR("INTERNET_UNAVAILABLE")).removeClass("x-cloud-state-step-ok");
c.show();this.errorTip.update(_TR("INTERNET_UNAVAILABLE_TIP"))}else{b.update(_TR("INTERNET_CONNECTION")).addClass("x-cloud-state-step-ok");c.hide()}}},_o3:function(a,b,c){["cloud-update-devowner","cloud-update-netconn","cloudopt-commit-devowner","cloudopt-remove-devowner"].indexOf(c)!=-1&&this.hideProgress();"cloudopt-remove-devowner"==c&&this.spSysManager.updateCloudOwner("cloud-update-devowner");return _5}},_i35:{_o1:function(a,b){["cloud-update-services","cloud-services-readycloud-commit",
"cloud-services-replicatewnd-commit"].indexOf(b)!=-1&&this.showProgress()},_o2:function(a,b){switch(b){case "cloud-update-services":this.isServicesUpdated=true;this.populateReadyCLOUDService();break}return _5},_o3:function(a,b,c){["cloud-update-services","cloud-services-readycloud-commit","cloud-services-replicatewnd-commit"].indexOf(c)!=-1&&this.hideProgress();if(c=="cloud-services-readycloud-commit"||c=="cloud-services-replicatewnd-commit"){this.showProgress();(function(){this.refresh();
this.hideProgress()}).defer(1E3,this)}return _5}},_i2y:{_o3:function(a,b,c){if(!this.rendered)return _5;switch(c){case "sync-update-security":this.refresh();break}return _5}}});Ext.namespace("_s7");
_s7.ReplicatePanel=_._1(_9,Ext.Component,{help:"cloud_panel_state",constructor:function(){var a=new Ext.Template('<div class="x-{cls}-panel"><div id="{iconId}" class="x-cloud-service-icon x-cloud-service-dis"></div><div class="x-cloud-service-cnt"><a href="{url}" target="_blank" class="x-cloud-link">{ttl}</a><div id="{uId}"></div><div class="x-cloud-services-remote-tip">{tip}</div><div id="{btnId}" style="height: 40px;"></div></div></div>',{compiled:true,disableFormats:true});
this.btnsIds={replicate:{iid:Ext.id(),bid:Ext.id(),uid:Ext.id()}};this.html='<div style="float:left; min-height:210px;">'+a.apply({cls:"replicate",url:"https://replicate.readynas.com",ttl:_TR("READYNAS")+" "+_TR("REPLICATE"),tip:_TR("CLOUD_READYNAS_REPLICATE_TIP"),btnId:this.btnsIds.replicate.bid,iconId:this.btnsIds.replicate.iid,uId:this.btnsIds.replicate.uid})+"</div>";this.updatesCount=0;_s7.ReplicatePanel.superclass.constructor.apply(this,arguments);a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spP2PManager=a.getP2PManager();_a(this.spP2PManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this)},afterRender:function(){_s7.ReplicatePanel.superclass.afterRender.apply(this,arguments);
this.bQuestion=new Ext.UI.RoundButton({cls:"x-cloud-state-quest"});this.bQuestion.render(this.questionId);this.errorTip=new Ext.UI.ToolTip(this.bQuestion.el,{width:200,html:""});this.bQuestion.hide();this.btns={replicate:{onoffh:this.onReplicateOnOff,setsh:this.onReplicateSettings,bt:"",authBt:_TR("REGISTER")}};for(var a in this.btns){this.btns[a].onOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.btnsIds[a].bid,listeners:{beforeclick:this.btns[a].onoffh,
scope:this}});this.btns[a].auth=new Ext.UI.Button({text:this.btns[a].authBt,cls:"x-cloud-settingsbtn",renderTo:this.btnsIds[a].bid,scope:this,handler:this.btns[a].setsh});this.btns[a].users=new Ext.UI.Button({text:_TR("USERS"),cls:"x-cloud-settingsbtn",renderTo:this.btnsIds[a].bid,scope:this,handler:this.OnUsersClick,stitle:this.btns[a].bt});this.btns[a].icon=Ext.get(this.btnsIds[a].iid);this.btns[a].user=Ext.get(this.btnsIds[a].uid)}},OnUsersClick:function(a){if(a.stitle=="READY_CLOUD"){this.cloudUsersWnd||
(this.cloudUsersWnd=new _s7.CloudUsersWindow);this.cloudUsersWnd.show()}else{this.remoteUsersWnd||(this.remoteUsersWnd=new _s7.RemoteUsersWindow);this.remoteUsersWnd.stype=a.stitle;this.remoteUsersWnd.show()}},refresh:function(){this.isServicesUpdated=this.isOwnerUpdated=false;this.disableButtons();this.spSysManager.updateCloudOwner("cloud-update-devowner");this.spServManager.updateSystemServiceInfo("cloud-update-services")},disableButtons:function(){for(var a in this.btns){this.btns[a].onOff.disable();
this.btns[a].auth.disable();this.btns[a].users.disable()}},setRPVisible:function(a){this.btns.replicate.auth.setVisible(a);this.btns.replicate.users.setVisible(a)},updateSysServices:function(){this.spServManager.updateSystemServiceInfo("cloud-update-services")},getReplicateService:function(){for(var a=this.spServManager.getSystemServices(),b=0;b<a.length;++b){var c=_a(a[b],"_i32");if(c.getName()=="replicate")return c}return null},onReplicateOnOff:function(a){_s0.GA.trackEvent({eventCategory:"Cloud",
eventAction:"click",eventLabel:"ReadyNAS Replicate"});var b=true,c=this.getReplicateService();if(c)if(a.isOff())if(c.getReplicateOwner()){c.putEnable(true);this.spServManager.commitSystemService("cloud-services-replicate-commit");return true}else{this.replicateOptionsWnd||(this.replicateOptionsWnd=new _s7.ReplicateOptionsWindow);this.replicateOptionsWnd.show()}else{b=false;Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),icon:Ext.MessageBox.WARNING,msg:String.format(_TR("SERVICE_DISABLE"),
_TR("READYNAS")+" "+_TR("REPLICATE")),width:400,fn:function(d){if(d=="yes"){c.putEnable(false);this.spServManager.commitSystemService("cloud-services-replicate-commit");b=true}},scope:this});return b}return false},onReplicateSettings:function(){this.replicateOptionsWnd||(this.replicateOptionsWnd=new _s7.ReplicateOptionsWindow);this.replicateOptionsWnd.show()},onRemoteSettings:function(){this.remoteOptionsWnd||(this.remoteOptionsWnd=new _s7.RemoteOptionsWindow);this.remoteOptionsWnd.show()},
populateReplicateService:function(){var a=this.getReplicateService();if(a){this.btns.replicate.onOff.enable();this.btns.replicate.auth.enable();if(a.getEnable()){this.btns.replicate.onOff.setValue(false);this.setRPVisible(true);this.btns.replicate.icon.removeClass("x-cloud-service-dis");this.btns.replicate.user.setDisplayed(true)}else{this.btns.replicate.onOff.setValue(true);this.setRPVisible(false);this.btns.replicate.icon.addClass("x-cloud-service-dis");this.btns.replicate.user.setDisplayed(false)}(a=
a.getReplicateOwner())&&a!==""&&a!==_4?this.btns.replicate.auth.setText(_TR("UNREGISTER")):this.btns.replicate.auth.setText(_TR("REGISTER"))}},_i45:{_o1:function(a,b){["cloud-update-devowner","cloudopt-commit-devowner","cloudopt-remove-devowner"].indexOf(b)!=-1&&this.showProgress();return _5},_o2:function(a,b){this.rendered&&b=="cloudopt-commit-devowner"&&this.refresh();if(b=="cloud-update-devowner")this.isOwnerUpdated=true},_o3:function(a,b,c){["cloud-update-devowner",
"cloudopt-commit-devowner","cloudopt-remove-devowner"].indexOf(c)!=-1&&this.hideProgress();"cloudopt-remove-devowner"==c&&this.spSysManager.updateCloudOwner("cloud-update-devowner");return _5}},_i35:{_o1:function(a,b){["cloud-update-services","cloud-services-replicate-commit","cloud-services-replicatewnd-commit"].indexOf(b)!=-1&&this.showProgress()},_o2:function(a,b){switch(b){case "cloud-update-services":this.populateReplicateService();this.isServicesUpdated=true;
break}return _5},_o3:function(a,b,c){["cloud-update-services","cloud-services-replicate-commit","cloud-services-replicatewnd-commit"].indexOf(c)!=-1&&this.hideProgress();if(c=="cloud-services-replicate-commit"||c=="cloud-services-replicatewnd-commit"){this.showProgress();(function(){this.refresh();this.hideProgress()}).defer(1E3,this)}return _5}},_i2y:{_o3:function(a,b,c){if(!this.rendered)return _5;switch(c){case "sync-update-security":this.refresh();break}return _5}}});
_s7.AmazonCloudDrive=_._1(_9,Ext.Component,_ih,_i3v,_i3b,{help:"backup_panel_amazonclouddrive",requestIndex:1,constructor:function(){var a=new Ext.Template('<div class="x-{cls}-panel"><div style="position: relative" id="{iconId}" id="{iconId}" class="x-cloud-service-icon x-cloud-service-dis"><div id="{staId}" class="x-cloud-storage-status"></div></div><div class="x-cloud-service-cnt"><a href="{url}" target="_blank" class="x-cloud-link">{ttl}</a><div id="{uId}"></div><div class="x-cloud-services-remote-tip">{tip}</div><table style="display:none;" id="{statusId}" cellpadding="0" cellspacing="0" border="0"><tr><td style="vertical-align: bottom; height: 45px;"><table cellpadding="0" cellspacing="0" border="0"><tr><td id="{progressId}" ></td><td style="padding-left:5px; height:30px; ">'+
_TR("CLOUD_DRIVE_PROGRESS_MSG")+'</td></tr></table></td></tr></table><div id="{btnId}" style="height: 40px;"></div></div></div>',{compiled:true,disableFormats:true});this.cntrlsIds={amazon:{iid:Ext.id(),btnId:Ext.id(),statusId:Ext.id(),progressId:Ext.id(),sid:Ext.id(),uid:Ext.id()}};this.html='<div style="float: left; min-height:210px;">'+a.apply({cls:"amazon",url:"https://www.amazon.com/clouddrive/home/",ttl:_TR("CLOUD_AMAZON_TITLE_EXT"),tip:String.format(_TR("CLOUD_AMAZON_INSTRUCTION"),'<a class="x-frontview-link" href="https://www.amazon.com/clouddrive/home/" target="_blank">https://www.amazon.com/clouddrive/home/</a>'),
btnId:this.cntrlsIds.amazon.btnId,iconId:this.cntrlsIds.amazon.iid,statusId:this.cntrlsIds.amazon.statusId,staId:this.cntrlsIds.amazon.sid,uId:this.cntrlsIds.amazon.uid,progressId:this.cntrlsIds.amazon.progressId})+"</div>";_s7.AmazonCloudDrive.superclass.constructor.apply(this,arguments);if(a=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();
_a(this.zfsVolumesManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)}this.amazonOptionsWnd=new _s7.AmazonOptionsWindow;this.amazonOptionsWnd.on("apply",this.onAmazonOptionWndApply,this);this.amazonOptionsWnd.on("cancel",this.onAmazonOptionWndCancel,this)},
afterRender:function(){_s7.AmazonCloudDrive.superclass.afterRender.apply(this,arguments);this.errorTip=new Ext.UI.ToolTip(Ext.get(this.questionId),{width:200,html:""});this.cntrls={amazon:{onoffh:this.onAmazonOnOff,synch:this.onAmazonSetts,shares:[]}};for(var a in this.cntrls){this.cntrls[a].onOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.cntrlsIds[a].btnId,listeners:{beforeclick:this.cntrls[a].onoffh,scope:this}});
this.cntrls[a].leave=new Ext.UI.Button({text:_TR("LEAVE_RC"),hidden:true,cls:"x-cloud-settingsbtn",renderTo:this.cntrlsIds[a].btnId,scope:this,handler:this.onLeaveClick});this.cntrls[a].setts=new Ext.UI.Button({text:_TR("SETTINGS"),cls:"x-cloud-settingsbtn",renderTo:this.cntrlsIds[a].btnId,scope:this,handler:this.cntrls[a].synch});this.cntrls[a].progress=new Ext.BoxComponent({cls:"x-frontview-panel-progress",hidden:false});this.cntrls[a].progress.render(this.cntrlsIds[a].progressId);this.cntrls[a].icon=
Ext.get(this.cntrlsIds[a].iid);this.cntrls[a].user=Ext.get(this.cntrlsIds[a].uid)}Ext.fly(this.cntrlsIds.amazon.statusId).setDisplayed(false)},onLeaveClick:function(){Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),icon:Ext.MessageBox.WARNING,msg:String.format(_TR("SERVICE_DISABLE"),_TR("CLOUD_AMAZON_TITLE_EXT")),width:400,fn:function(a){if(a=="yes"){this.cntrls.amazon.service.putAmazonState("not-authorized");this.spBKManager.commitAmazonProvisioningStatus("amazon_commit_status");Ext.fly(this.cntrlsIds.amazon.statusId).setDisplayed(false);
this.resetAmazonPolling();this.cntrls.amazon.icon.hasClass("x-cloud-service-dis")||this.cntrls.amazon.icon.addClass("x-cloud-service-dis")}},scope:this})},onAmazonOnOff:function(a){var b=this.conStatus,c=this.getCloudService("fvamazon");b=b.getJoined();var d=c.getEnable();if(a.isOff())if(b=="0"&&!d){this.cntrls.amazon.winRef=_s7.openWindowCentered(location.protocol+"//"+location.host+"/admin/auth.html","_blank",600,1050);this.spBKManager.updateAmazonAuthURL("amazon_update_authorization_url")}else{if(b==
"1"&&!d){c.putEnable(true);this.spServManager.commitSystemService("amazone_services_commit")}}else{c.putEnable(!d);this.spServManager.commitSystemService("amazone_services_commit")}return false},onAmazonSetts:function(){this.amazonOptionsWnd.show()},onAmazonOptionWndApply:function(a,b){this.spBKManager.syncAmazonShare("amazon_sync_shares",b.shares.length===0?"":b.shares,_a(this.spSysManager.getSysInfo(),"_i43").getSerial());this.spShareManager.commitShares("amazon_sync_nshares",b.nshares.length===
0?"":b.nshares)},onAmazonOptionWndCancel:function(){},refresh:function(){this.visibleAll(false);this.zfsVolumesManager.UpdateVolumes("ntdrives-update-zfsvolumes")},visibleAll:function(a){for(var b in this.cntrls)this.cntrls[b].setts.setVisible(a)},startAmazonIsAuthorizedPolling:function(){var a=this;this.resetAmazonPolling();this.cntrls.amazon.pollInterval=setInterval(function(){a.checkAmazonAuthStatus()},2E3)},resetAmazonPolling:function(){this.cntrls.amazon.counter=0;this.cntrls.amazon.isPolling=
false;this.cntrls.amazon.pollInterval&&clearInterval(this.cntrls.amazon.pollInterval)},checkAmazonAuthStatus:function(){this.cntrls.amazon.isPolling=true;if(this.cntrls.amazon.winRef.closed){this.amazonOptionsWnd.show();this.resetAmazonPolling();this.hideProgress()}},showAmazon:function(a){this.cntrls.amazon.setts.setVisible(a)},getCloudService:function(a){for(var b=this.spServManager.getSystemServices(),c=0;c<b.length;++c){var d=_a(b[c],"_i32");if(d.getName()==a)return d}return null},
bytesToSize:function(a){if(a===0)return"0 B";var b=Math.floor(Math.log(a)/Math.log(1024));a=(a/Math.pow(1024,b)).toFixed(1);a=~a.indexOf(".0")?+a.replace(".0",""):a;return a+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][b]},populateConnectionStatus:function(){var a=this.conStatus=_a(this.spBKManager.getConnectionStatus(),"ICloudStatus"),b=this.getCloudService("fvamazon");this.cntrls.amazon.onOff.setValue(!b.getEnable());this.cntrls.amazon.icon.addClass("x-cloud-service-dis");this.cntrls.amazon.user.setDisplayed(false);
this.cntrls.amazon.setts.setVisible(false);this.cntrls.amazon.leave.setVisible(false);var c=Ext.get(this.cntrlsIds.amazon.sid),d="gray";if(b.getEnable()){this.cntrls.amazon.icon.removeClass("x-cloud-service-dis");this.cntrls.amazon.user.setDisplayed(true);b="<span>"+_TR("CLOUD_SIGNED_AS")+"&nbsp;";var e='<span style="color: rgb(128, 128, 128);">'+a.getUser_Name()+"</span><br />";d=d="";var f=+a.getUsed(),g=+a.getCapacity();d="#4d4d4d";var h,i=_TR("CLOUD_STATUS_DISABLED");if(g!=0){h=parseInt(f/g*100);
d=h<80?"#4d4d4d":h>95?"red":"#F0D805";h+="% &#10;"+this.bytesToSize(f)+" of "+ +g/1073741824+" GB"}d="<span title='"+h+"' style='color:"+d+"'>"+this.bytesToSize(f)+" of "+this.bytesToSize(g)+" "+_TR("USED")+"</span>";d=a.getUser_Name()?b+e+d:d;this.cntrls.amazon.user.update(d);this.cntrls.amazon.setts.setVisible(true);this.cntrls.amazon.leave.setVisible(true);d="gray";switch(a.getStatus().toLowerCase()){case "disabled":d="gray";i=_TR("CLOUD_STATUS_DISABLED");break;case "enabled":d="#47DA02";i=_TR("CLOUD_STATUS_ENABLED");
break;case "syncing":d="blue";i=_TR("CLOUD_STATUS_SYNCING");break;case "failed":d="red";h="";switch(a.getFail_Code()){case "1":h=_TR("CLOUD_STATUS_FAILED_1");break;case "2":h=_TR("CLOUD_STATUS_FAILED_2");break;case "3":h=_TR("CLOUD_STATUS_FAILED_3");break;case "4":h=_TR("CLOUD_STATUS_FAILED_4");break}i=h;this.cntrls.amazon.user.update("");break}c.dom.style.backgroundColor=d;c.dom.setAttribute("title",i)}else{this.cntrls.amazon.onOff.setValue(true);c.dom.style.backgroundColor=d;c.dom.setAttribute("title",
"Disabled")}},_ih:{_o1:function(a,b){b==="amazon_commit_status"&&this.showProgress();b==="amazon_sync_shares"&&Ext.fly(this.cntrlsIds.amazon.statusId).setDisplayed(true);return _5},_o2:function(a,b){switch(b){case "amazon_update_connection_status":this.spServManager.updateSystemServiceInfo("amazone_update_protocol");break;case "amazon_update_status":a=this.conStatus=_a(this.spBKManager.getConnectionStatus(),"ICloudStatus");if(this.requestIndex<10&&a.getStatus()==
"Failed"&&a.getFail_Code()=="4"&&a.getFail_Info()=="INTERNAL_FAILURE")setTimeout(function(){this.requestIndex==1&&this.requestIndex++;this.spBKManager.updateConnectionStatus("amazon_update_connection_status")}.bind(this),15E3);else{this.hideProgress();this.requestIndex=1;this.cntrls.amazon.service=_a(this.spBKManager.getAmazon(),"IAmazon");if(this.cntrls.amazon.service&&this.cntrls.amazon.service!=_4){if(this.cntrls.amazon.counter){this.cntrls.amazon.counter++;this.cntrls.amazon.counter===
150&&this.resetAmazonPolling()}if(this.cntrls.amazon.service.getAmazonState()==="not-authorized"){this.showAmazon(false);this.cntrls.amazon.isPolling||this.cntrls.amazon.onOff.setValue(true);this.cntrls.amazon.icon.hasClass("x-cloud-service-dis")||this.cntrls.amazon.icon.addClass("x-cloud-service-dis")}else if(this.cntrls.amazon.service.getAmazonState()==="authorized"){this.resetAmazonPolling();this.cntrls.amazon.onOff.setValue(false);this.showAmazon(true);this.cntrls.amazon.icon.removeClass("x-cloud-service-dis")}else if(this.cntrls.amazon.service.getAmazonState()===
"denied"){this.resetAmazonPolling();this.cntrls.amazon.onOff.setValue(true);this.showAmazon(false);this.cntrls.amazon.service.putAmazonState("not-authorized");this.spBKManager.commitAmazonProvisioningStatus("amazon_commit_status");this.cntrls.amazon.icon.hasClass("x-cloud-service-dis")||this.cntrls.amazon.icon.addClass("x-cloud-service-dis");Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),msg:_TR("CLOUD_AMAZON_DENY_ACCESS_MSG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400})}}this.populateConnectionStatus()}break;
case "amazon_update_authorization_url":this.cntrls.amazon.authURL=this.spBKManager.getAmazonAuthURL();this.cntrls.amazon.winRef.location=this.cntrls.amazon.authURL+"&redirect_uri="+("https://cloudstoragesync.netgear.com/redirect.php&state=http://"+location.host+"/admin/amazoncb.html");this.startAmazonIsAuthorizedPolling();break;case "amazon_commit_status":this.cntrls.amazon.onOff.setValue(true);this.showAmazon(false);this.spBKManager.updateConnectionStatus("amazon_update_connection_status");break;
default:break}return _5},_o3:function(a,b,c){switch(c){case "amazon_commit_status":this.hideProgress();break;case "amazon_sync_shares":c="amazon";if((this.sync_shares=true)&&this.sync_nshares){this.spBKManager.updateConnectionStatus("amazon_update_connection_status");this.sync_shares=this.sync_nshares=null}Ext.fly(this.cntrlsIds[c].statusId).setDisplayed(false);break;case "amazon_update_authorization_url":if(a!=_5){a=_TR("CLOUD_AMAZON_TITLE");c="amazon";this.cntrls[c].onOff.setValue(true);
if(b=_a(b,"_io").getLastNMLError()){b=b.getErrorCode();b=="21011040000"&&Ext.UI.MessageBox.warning({title:a,width:400,msg:_TR(b)})}}default:break}return _5}},_i3b:{_o1:function(a,b){b=="amazon_sync_nshares"&&this.showProgress();return _5},_o3:function(a,b,c){if(c=="amazon_sync_nshares"){this.sync_nshares=true;if(this.sync_shares&&this.sync_nshares){this.spBKManager.updateConnectionStatus("amazon_update_connection_status");this.sync_shares=this.sync_nshares=
null}}return _5}},_i35:{_o1:function(a,b){b=="amazone_services_commit"&&this.showProgress()},_o2:function(a,b){if(b=="amazone_services_commit"){setTimeout(function(){this.refresh()}.bind(this),1E3);this.hideProgress()}return _5},_o3:function(a,b,c){c=="amazone_update_protocol"&&this.spBKManager.updateAmazonProvisioningStatus("amazon_update_status");return _5}},_i3v:{_o1:function(a,b){b==="ntdrives-update-zfsvolumes"&&this.showProgress()},
_o3:function(a,b,c){if(c==="ntdrives-update-zfsvolumes"){this.spBKManager.updateConnectionStatus("amazon_update_connection_status");this.hideProgress()}return _5}}});Ext.namespace("_s7");
_s7.EgnytePanel=_._1(_9,Ext.Component,_i3o,_i3m,{help:"cloud_panel_egnyte",appId:"EGNYTE_GENIEAPP_000001",constructor:function(){this.pnlTemplate=new Ext.Template('<div class="x-{cls}-panel"><div id="{iconId}" class="x-cloud-service-icon x-cloud-service-dis" style="background-image: url(\'{icone}\');" ></div><div class="x-cloud-service-cnt"><a href="{url}" target="_blank" class="x-cloud-link">{ttl}</a><div class="x-cloud-services-remote-tip">{tip}</div><div id="{btnId}" style="height: 40px;"></div></div></div>',{compiled:true,
disableFormats:true});this.html='<div style="margin: 0 auto; max-width: 1020px;"><div style="float: left; "><div id="'+(this.placeHolder=Ext.id())+'" style=""></div></div></div>';_s7.EgnytePanel.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spSLAManager=a.getSmartLocalAppManager();_a(this.spSLAManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager()}},afterRender:function(){_s7.EgnytePanel.superclass.afterRender.apply(this,
arguments);this.errorTip=new Ext.UI.ToolTip(Ext.get(this.questionId),{width:200,html:""});this.cntrls={egnyte:{onoffh:this.onEgnyteOnOff,runh:this.onEgnyteLaunch,removeh:this.onEgnyteRemove,updateh:this.onEgnyteUpdate}}},refresh:function(){this.spSLAManager.updateLocalAvailableApps("egnyte_availability_update")},stopAppStatusPolling:function(){this.appsData.egnyte.isPollingStarted=false;clearInterval(this.appsData.egnyte.pollInterval);this.refresh();this.hideProgress()},appBackProPoll:function(){var a=
this;if(!this.appsData.egnyte.isPollingStarted){this.appsData.egnyte.pollInterval=setInterval(function(){a.appBackProPolling()},2E3);this.appsData.egnyte.isPollingStarted=true;this.showProgress()}},appBackProPolling:function(){if(this.appsData.egnyte.pollAction&&this.appsData.egnyte.pollAction==="remove")this.appsData.egnyte.app.updateAppBackgroundProcessStatus("egnyte_remove_status",this.appsData.egnyte.pid);else if(this.appsData.egnyte.pollAction&&this.appsData.egnyte.pollAction==="upgrade")this.appsData.egnyte.app.updateAppBackgroundProcessStatus("egnyte_upgrade_status",
this.appsData.egnyte.pid);else if(this.appsData.egnyte.pollAction&&this.appsData.egnyte.pollAction==="toggle"&&this.appsData.egnyte.appStatus)if(this.appsData.egnyte.appStatus.action==="run")this.appsData.egnyte.app.updateServiceProcessStatus("egnyte_run_service_status",this.appsData.egnyte.appStatus.id);else this.appsData.egnyte.appStatus.action==="stop"&&this.appsData.egnyte.app.updateServiceProcessStatus("egnyte_stop_service_status",this.appsData.egnyte.appStatus.id)},intiEgnyte:function(a,b){Ext.get(this.placeHolder).update("");
if(this.appsData&&this.appsData.egnyte&&this.appsData.egnyte.app){_a(this.appsData.egnyte.app,"_i1").Unadvise(this);this.appsData.egnyte={}}for(var c=0;c<a.length;++c){var d=_a(a[c],b);if(!Ext.isEmpty(d)&&d.getAppId()===this.appId){this.appsData={egnyte:{bid:Ext.id(),iconId:Ext.id(),appid:d.getId(),genieid:d.getAppId(),status:d.getStatus(),appname:d.getName(),auth:d.getAuthor(),ver:d.getVersion(),desc:d.getDescription(),servicename:d.getServiceName()||"",config:_s6.replaceLocalhost(d.getConfigURL()||
""),launch:_s6.replaceLocalhost(d.getLaunchURL()||""),debian:d.getDebianPackageName(),sername:d.getServiceName(),iconurl:(location.host==="localhost"?document.addoniconpath:location.protocol+"//"+location.host)+"/apps/logo/"+d.getId()+".png",appType:"local",newVer:d.getNewAppVersion(),hasNewVer:d.getNewAppVersion()===_4?false:true,isReady:"true",infourl:d.getInfoURL()===_4||d.getInfoURL()===undefined||d.getInfoURL()===""?"#":d.getInfoURL(),isinstalled:d.isInstalled(),app:d}};
_a(d,"_i1").Advise(this);Ext.get(this.placeHolder).update(this.pnlTemplate.apply({cls:"egnyte",url:this.appsData.egnyte.infourl,ttl:this.appsData.egnyte.appname,vendor:this.appsData.egnyte.auth,version:this.appsData.egnyte.ver,tip:this.appsData.egnyte.desc,icone:this.appsData.egnyte.iconurl,btnId:this.appsData.egnyte.bid,iconId:this.appsData.egnyte.iconId}));this.cntrls.egnyte.onOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.appsData.egnyte.bid,
listeners:{beforeclick:this.cntrls.egnyte.onoffh,scope:this}});this.cntrls.egnyte.run=new Ext.UI.Button({text:_TR("MANAGE_RDN_EGNYTE"),cls:"x-cloud-settingsbtn",renderTo:this.appsData.egnyte.bid,scope:this,handler:this.cntrls.egnyte.runh});this.cntrls.egnyte.update=new Ext.UI.Button({text:_TR("UPDATE"),cls:"x-cloud-settingsbtn",renderTo:this.appsData.egnyte.bid,scope:this,handler:this.cntrls.egnyte.updateh});this.updateOnOffButtonState(this.appsData.egnyte,this.cntrls.egnyte.onOff,this.cntrls.egnyte.run,
this.cntrls.egnyte.update);return true}}return false},updateOnOffButtonState:function(a,b,c,d){if(a.status==="running"){b.setValue(false);c.setVisible(true);Ext.get(a.iconId).hasClass("x-cloud-service-dis")&&Ext.get(a.iconId).removeClass("x-cloud-service-dis")}else{b.setValue(true);c.setVisible(false);Ext.get(a.iconId).hasClass("x-cloud-service-dis")||Ext.get(a.iconId).addClass("x-cloud-service-dis")}if(a.servicename===undefined||a.servicename===""){b.setValue(true);c.setVisible(false);Ext.get(a.iconId).hasClass("x-cloud-service-dis")||
Ext.get(a.iconId).addClass("x-cloud-service-dis")}if(a.launch===undefined||a.launch===""){c.setVisible(false);Ext.get(a.iconId).hasClass("x-cloud-service-dis")||Ext.get(a.iconId).addClass("x-cloud-service-dis")}d.setVisible(a.hasNewVer)},onEgnyteOnOff:function(){var a=this.appsData.egnyte.app;if(this.appsData.egnyte.isinstalled)if(this.appsData.egnyte.status==="running")Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),icon:Ext.MessageBox.WARNING,width:400,msg:String.format(_TR("SERVICE_DISABLE"),
_TR("CLOUD_EGNYTE_TITLE")),fn:function(b){if(b=="yes"){this.appsData.egnyte.appStatus={id:this.appsData.egnyte.servicename,action:"stop"};a.commitAppState("egnyte_commit_state",a.getId(),"stopped");this.cntrls.egnyte.run.setVisible(false)}},scope:this});else{this.appsData.egnyte.appStatus={id:this.appsData.egnyte.servicename,action:"run"};a.commitAppState("egnyte_commit_state",a.getId(),"running")}else this.appsData.egnyte.app.commitAppInstall("egnyte_install",this.appsData.egnyte.app.getId());return false},
onEgnyteLaunch:function(){window.open(this.appsData.egnyte.launch)},onEgnyteUpdate:function(){this.appsData.egnyte.app.commitAppUpgrade("egnyte_upgrade",this.appsData.egnyte.app.getId())},_i3o:{_o1:function(a,b){switch(b){case "egnyte_availability_update":case "egnyte_installed_update":case "egnyte_check_update":this.showProgress();break}return _5},_o2:function(a,b){switch(b){case "egnyte_availability_update":a=this.spSLAManager.getLocalAvailableApps();this.intiEgnyte(a,
"_i3l")||this.spSLAManager.updateLocalInstalledApps("egnyte_installed_update");break;case "egnyte_installed_update":a=this.spSLAManager.getLocalInstalledApps();this.intiEgnyte(a,"_i3l");break;case "egnyte_polling_install_status":if(this.spSLAManager.getAppBackgroundProcessStatus()==="not-exists"){this.appsData.egnyte.isBackProcPollingStarted=false;clearInterval(this.appsData.egnyte.backProcPollInterval);this.refresh()}break;case "egnyte_check_update":this.appsData.egnyte.pollAction=
"upgrade";this.appBackProPoll();break}return _5},OnQueue:function(a,b,c){switch(c){case "egnyte_check_update":this.appsData.egnyte.pid=a;break}},OnReceiveProgressData:function(){return _5},OnInstallationAbort:function(a){var b=_TR("GENIE_OPERATION_FAILED"),c=_TR(a.getLogMsg()).replace("{AppName}",a.getPackageName());a.getLogMsg()=="LOGMSG_APPLICATION_INSTALLER_PLEASE_RUN_CHECK_UPDATE"?Ext.UI.MessageBox.confirm({title:b,msg:c,width:400,fn:function(d){if(d=="yes"){this.spSLAManager.commitCheckUpdate("egnyte_check_update");
this.hideIndicatorExt()}},scope:this}):Ext.UI.MessageBox.error({title:b,msg:c,width:400,fn:function(d){d=="ok"&&this.hideIndicatorExt()},scope:this});return _5},_o3:function(a,b,c){switch(c){case "egnyte_availability_update":case "egnyte_installed_update":case "egnyte_check_update":this.hideProgress();break}return _5}},_i3m:{_o1:function(a,b){switch(b){case "egnyte_remove":case "egnyte_upgrade":case "egnyte_commit_state":this.showProgress();break}return _5},_o2:function(a,
b){switch(b){case "egnyte_remove":break;case "egnyte_upgrade":if(!this.appsData.egnyte.isPollingStarted){this.appsData.egnyte.pollAction="upgrade";this.appBackProPoll()}break;case "egnyte_remove_status":this.appsData.egnyte.app.getAppBackgroundProcessStatus()==="not-exists"&&this.stopAppStatusPolling();break;case "egnyte_install":if(!this.appsData.egnyte.isPollingStarted){this.appsData.egnyte.pollAction="upgrade";this.appBackProPoll()}break;case "egnyte_upgrade_status":this.appsData.egnyte.app.getAppBackgroundProcessStatus()===
"not-exists"&&this.stopAppStatusPolling();break;case "egnyte_commit_state":this.appsData.egnyte.pollAction="toggle";this.appBackProPoll.defer(100,this);break;case "egnyte_run_service_status":if(this.appsData.egnyte.app.getServiceActiveState()==="active"||this.appsData.egnyte.app.getServiceActiveState()==="inactive")this.stopAppStatusPolling();if(this.appsData.egnyte.app.getServiceActiveState()==="failed"){this.stopAppStatusPolling();Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),msg:String.format(_TR("GENIE_ERROR_TURNON_FAILED"),
_TR("CLOUD_EGNYTE_TITLE")),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400})}break;case "egnyte_stop_service_status":if(this.appsData.egnyte.app.getServiceActiveState()==="inactive"||this.appsData.egnyte.app.getServiceActiveState()==="failed")this.stopAppStatusPolling();break}return _5},OnQueue:function(a,b,c){switch(c){case "egnyte_remove":case "egnyte_upgrade":this.appsData.egnyte.pid=a;break;case "egnyte_install":this.appsData.egnyte.pid=a;break}},_o3:function(a,b,c){switch(c){case "egnyte_remove":case "egnyte_upgrade":case "egnyte_commit_state":this.hideProgress();
break}return _5},OnFailed:function(a,b,c){switch(c){case "egnyte_commit_state":this.refresh();a=_TR(b.getErrorCode());_a(_7(_._3.ErrorReporter),"IErrorReporter").report(a,"Code: "+b.getErrorCode(),_2.ERROR,{windowTitle:_TR("GENIE_ERROR_INITIALIZE_FAILED"),title:"",subTitle:a,buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false});break}return _5}}});Ext.namespace("_s7");
_s7.VaultPanel=_._1(_9,Ext.Component,{loggedUser:"",hostName:"",loginType:"login",help:"backup_panel_vault",constructor:function(){this.html='<div style="float: left; min-height:210px;"><div class="x-vault-panel"><div style="position: relative" id="'+(this.iconId=Ext.id())+'" class="x-cloud-service-icon x-cloud-service-dis"><div style="top:50px;" id="'+(this.statusId=Ext.id())+'" class="x-cloud-storage-status"></div></div><div class="x-cloud-service-cnt"><a class="x-frontview-link" target="_blank" href="http://www.readynasvault.com">'+
_TR("VAULT_TITLE")+'</a><div class="x-cloud-services-remote-tip">'+String.format(_TR("VAULT_TIPS"),'<a class="x-frontview-link" href="http://www.readynasvault.com" target="_blank">http://www.readynasvault.com</a>')+'</div><div id="'+(this.userLoggedOn=Ext.id())+'" class="x-cloud-services-remote-tip"></div><div id="'+(this.enablevaultId=Ext.id())+'" style="height: 40px;" ></div></div></div></div>';_s7.VaultPanel.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.optionsWnd=new _s7.VaultOptionsWindow;this.optionsWnd.on("apply",this.onApply,this);this.optionsWnd.on("cancel",this.onCancel,this)},afterRender:function(){_s7.VaultPanel.superclass.afterRender.apply(this,
arguments);this.vaultTip=new Ext.BoxComponent({cls:"x-inspector-contents-header-help",style:"margin-left: 4px",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:300,html:String.format(_TR("VAULT_TIPS"),"http://www.readynasvault.com")})}}});this.managevaultBtn=new Ext.UI.Button({text:_TR("MANAGE_RDN_VAULT"),cls:"x-cloud-settingsbtn",disabled:false,listeners:{click:this.onForwardToReadnaspage,scope:this}});this.vaultOnoff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),
textOff:_TR("OFF_LC"),listeners:{beforeclick:this.onOnOff,scope:this}});this.vaultOnoff.setValue(true);this.volumeProxy=[];this.shareProxy=[];this.vaultOnoff.render(this.enablevaultId);this.managevaultBtn.render(this.enablevaultId);Ext.get(this.userLoggedOn).hide();this.managevaultBtn.setVisible(false)},onForwardToReadnaspage:function(){openWinHandler=window.open("https://vault.readynas.com/web_access/start.aspx?dname="+this.hostName+"&uname="+this.loggedUser,"AdvBackup","status=1,toolbar=1,resizable=1")},
onOnOff:function(a){_s0.GA.trackEvent({eventCategory:"Cloud",eventAction:"click",eventLabel:"ReadyNAS Vault"});a.isOff()?this.optionsWnd.show(null,null,{hostName:this.hostName,user:this.loggedUser,volumes:this.volumeProxy,volume:this.targetVolume,shares:this.shareProxy,share:this.targetShare}):Ext.UI.MessageBox.confirm({title:_TR("SERVICES"),msg:String.format(_TR("SERVICE_DISABLE"),_TR("VAULT_TITLE")),icon:Ext.MessageBox.WARNING,width:400,fn:function(b){b=="yes"&&this.userLogout()},scope:this});
return false},onApply:function(a,b){this.spBKManager.commitVaultStatus({cmd:"commitVault",status:b},true,b.volume)},onCancel:function(){this.vaultOnoff.setValue(true)},afterLoggedIn:function(){Ext.get(this.userLoggedOn).show();this.managevaultBtn.setVisible(true);var a="";a=this.loginType=="register"?_TR("SELECT_VOLUME")+_TR("COLON")+"&nbsp;<b>{0}</b>&nbsp;&nbsp;"+_TR("SELECT_SHARE")+_TR("COLON")+"&nbsp;<b>{1}</b>":_TR("SELECT_VOLUME")+_TR("COLON")+"&nbsp;<b>{0}</b>";a=String.format(a,this.targetVolume,
this.targetShare);Ext.get(this.userLoggedOn).update(_TR("VAULT_LOGIN_LABEL1")+" <b>"+this.loggedUser+"</b>&nbsp;&nbsp"+a+".")},getContent:function(){return this.getPanel()},userLogout:function(){this.spBKManager.commitVaultAction({cmd:"userLogoutAction"},"logout",this.loggedUser,"","")},setShares:function(a){this.shareProxy=[];this.shareProxy.push(new Array("none","None Selected"));for(var b=0;b<a.length;++b){var c=_a(a[b],"_ik");this.shareProxy.push(new Array("/"+c.getDropBoxShareId(),
c.getDropBoxShareName()))}this.targetShare="none"},setVolumes:function(a){this.volumeProxy=[];this.volumeProxy.push(new Array("none","None Selected"));for(var b=0;b<a.length;++b){var c=_a(a[b],"_i4o");this.volumeProxy.push(new Array(c.getVolumeId(),c.getVolumeName()))}},refresh:function(){this.spBKManager.updateVaultStatus({cmd:"updateVault"});this.zfsVolumesManager.UpdateVolumes({cmd:"vault-update-zfsvolumes"});this.spBKManager.updateDropBoxShareList({cmd:"vault_update_sharelist"})},
_ih:{_o1:function(a,b){if(!b.cmd||b.cmd!="updateVault"&&b.cmd!="commitVault"&&b.cmd!="userLoginAction"&&b.cmd!="userRegisterAction"&&b.cmd!="userLogoutAction"&&b.cmd!="commitVaultOnLogout"&&b.cmd!="vault_update_sharelist")return _5;this.showProgress();return _5},_o2:function(a,b){if(!b.cmd||b.cmd!="updateVault"&&b.cmd!="commitVault"&&b.cmd!="commitVaultOnLogout"&&b.cmd!="userLoginAction"&&b.cmd!="userRegisterAction"&&b.cmd!="userLogoutAction"&&b.cmd!="vault_update_sharelist")return _5;
switch(b.cmd){case "commitVault":if(b.status&&b.status.type==="login")this.spBKManager.commitVaultAction({cmd:"userLoginAction"},b.status.type,b.status.user,b.status.password,b.status.share);else b.status&&b.status.type==="registration"&&this.spBKManager.commitVaultAction({cmd:"userRegisterAction"},b.status.type,b.status.user,b.status.password,b.status.share);break;case "userLogoutAction":this.spBKManager.commitVaultStatus({cmd:"commitVaultOnLogout",status:{}},false,this.targetVolume);break;case "updateVault":a=
_a(this.spBKManager.getVault(),"_im");this.hostName=a.getHostname();this.loggedUser=a.getUsername();this.targetVolume=a.getVolume();this.targetShare=a.getDefaultJob();this.vaultOnoff.setValue(true);a=Ext.get(this.statusId);b="gray";var c=_TR("CLOUD_STATUS_DISABLED");if(Ext.isEmpty(this.loggedUser)){Ext.get(this.userLoggedOn).update("");Ext.get(this.userLoggedOn).hide();this.managevaultBtn.setVisible(false);Ext.get(this.iconId).hasClass("x-cloud-service-dis")||Ext.get(this.iconId).addClass("x-cloud-service-dis")}else{this.afterLoggedIn();
this.vaultOnoff.setValue(false);Ext.get(this.iconId).removeClass("x-cloud-service-dis");b="#47DA02";c=_TR("CLOUD_STATUS_ENABLED")}a.dom.style.backgroundColor=b;a.dom.title=c;this.targetVolume=this.targetVolume&&this.targetVolume!=_4&&this.targetVolume!==""?this.targetVolume:"none";break;case "vault_update_sharelist":this.setShares(this.spBKManager.getDropBoxShareList());break}return _5},_o3:function(a,b,c){if(!c.cmd||c.cmd!="updateVault"&&c.cmd!="commitVault"&&c.cmd!="commitVaultOnLogout"&&
c.cmd!="userLoginAction"&&c.cmd!="userRegisterAction"&&c.cmd!="userLogoutAction"&&c.cmd!="vault_update_sharelist")return _5;this.hideProgress();if(c.cmd=="commitVaultOnLogout"&&a==_5){Ext.UI.MessageBox.show({title:_TR("VAULT_TITLE"),msg:_TR("LOGOUT_SUCCESS_MSG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,height:170,width:400});this.refresh()}else if(c.cmd=="userLoginAction"&&a==_5){Ext.UI.MessageBox.show({title:_TR("VAULT_TITLE"),msg:_TR("LOGIN_SUCCESS_MSG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,
height:170,width:400});this.refresh();this.loginType="login"}else if(c.cmd=="userRegisterAction"&&a==_5){Ext.UI.MessageBox.show({title:_TR("VAULT_TITLE"),msg:_TR("REG_SUCCESS_MSG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,height:170,width:400});this.refresh();this.loginType="register"}else if(a!=_5)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorDetails();Ext.UI.MessageBox.show({title:_TR("VAULT_TITLE"),msg:_TR(a),buttons:Ext.Msg.OK,icon:Ext.MessageBox.ERROR,height:170,width:400})}return _5}},
_i3v:{_o2:function(a,b){if(b.cmd&&(b.cmd=="vault-update-zfsvolumes"||b.cmd=="sync-update-zfsvolumes")){this.spBKManager.updateDropBoxShareList("vault_update_sharelist");this.setVolumes(this.zfsVolumesManager.getActiveVolumes());if(this.targetVolume!="none")return _5;else this.targetVolume="none"}}},_i3b:{_o2:function(a,b){b=="sync-update-shares"&&this.spBKManager.updateDropBoxShareList("vault_update_sharelist")}}});Ext.namespace("_s7");
_s7.SecurityBlock=_._1(_9,Ext.Component,{cls:"x-cloud-usersblock",constructor:function(a){a.on("show",this.onWShow,this);this.html='<table cellpadding="0" cellspacing="0" border="0"<tr><td id="'+(this.incomingEnableId=Ext.id())+'" colspan="2"></td></tr><tr><td class="x-cloud-services-lbl">'+_TR("PROTOCOL")+_TR("COLON")+'</td><td id="'+(this.incomingProtocolId=Ext.id())+'"></td></tr><tr><td class="x-cloud-services-lbl">'+_TR("PORT")+_TR("COLON")+'</td><td id="'+(this.incomingPortId=
Ext.id())+'"></td></tr><tr><td id="'+(this.incomingEncryptId=Ext.id())+'" colspan="2"></td></tr></table>';_s7.SecurityBlock.superclass.constructor.apply(this,arguments)},initComponent:function(){_s7.SecurityBlock.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a)this.spP2PManager=a.getP2PManager();this.on("afterrender",function(){this.incomingEnable=new Ext.UI.Checkbox({cls:"x-cloud-services-incoming",boxLabel:_TR("SPECIFY_PORT_INCOMING"),
listeners:{scope:this,check:function(b,c){this.disableControls([this.incomingProtocol,this.incomingPort],!c)}}});this.incomingEnable.render(this.incomingEnableId);this.incomingProtocol=new Ext.UI.ComboBox({width:90,mode:"local",triggerAction:"all",disabled:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[["tcp",_TR("TCP")]]}),valueField:"id",displayField:"text",value:"tcp"});this.incomingProtocol.render(this.incomingProtocolId);this.incomingPort=new Ext.UI.TextField({width:90,maskRe:/[0-9]/,
disabled:true});this.incomingPort.render(this.incomingPortId);this.incomingEncrypt=new Ext.UI.Checkbox({boxLabel:_TR("ENCRYPTION")});this.incomingEncrypt.render(this.incomingEncryptId);this.incomingFirewall=new Ext.UI.Checkbox({boxLabel:_TR("FIREWALL")})},this)},onWShow:function(){this.incomingEnable.setValue(this.spP2PManager.getSpecConnEnableStatus(),false);this.incomingProtocol.setValue(this.spP2PManager.getSpecConnProtocol().toLowerCase());this.incomingPort.setValue(this.spP2PManager.getSpecConnPort());
this.incomingEncrypt.setValue(this.spP2PManager.getSecEncryptEnableStatus());this.incomingFirewall.setValue(this.spP2PManager.getSecFirewallEnableStatus())},disableControls:function(a,b){for(var c=0;c<a.length;++c)a[c].setDisabled(b)}});_._2("_s7");
_s7.AddUserWindow=_._1(_9,Ext.UI.Window,_i20,{help:"cloud_wnd_add_user",constructor:function(){_.apply(this,{title:_TR("INVITE_CLOUD_USER"),modal:true,autoDestroy:true,autoWidth:true,resizable:false,autoCreate:true,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,shim:true,buttonAlign:"left",fbar:this.getFooter(),html:this.getHtml()});_s7.AddUserWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s7.AddUserWindow.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spP2PManager=a.getP2PManager();_a(this.spP2PManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager()}this.on("afterrender",this.onAfterRender,this);this.on("show",this.resetWindowValues,this)},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td id="'+(this.labelId=Ext.id())+'" class="x-cloud-users-email">'+_TR("EMAIL")+':</td><td id="'+(this.emailId=Ext.id())+
'"></td><td id="'+(this.searchId=Ext.id())+'"></td></tr></table><div class="x-cloud-users-searchheader ui-fwgrid-header">'+_TR("QUERY_SEARCH_HEADER")+"</div>"},onAfterRender:function(){this.searchLabel=Ext.get(this.labelId);this.searchTxtField=new Ext.UI.TextField({uicls:"ui-textfield",width:200,renderTo:this.emailId,listeners:{scope:this,specialkey:this.onPageSpecialKeyPress}});this.searchBtn=new Ext.UI.Button({cls:"x-cloud-users-search",text:_TR("SEARCH"),expandToText:true,renderTo:this.searchId,
listeners:{scope:this,click:this.onRemoteUserSearch}});this.foundList=new Ext.DataView({cls:"x-cloud-users-searchgrid",singleSelect:true,selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["user"]}),blockRefresh:true,scrollOffset:0,itemSelector:"div",tpl:new Ext.XTemplate('<tpl for="."><div class="x-cloud-users-searchrow ui-fwgrid-row x-ellipsis">{user}</div></tpl>'),listeners:{scope:this,selectionchange:this.onFoundUserSelected}});this.foundList.render(this.body);(new Ext.UI.Scroller({dom:this.foundList.el.dom,
type:"vertical"})).reg()},getFooter:function(){return[this.indicator=new Ext.BoxComponent({cls:"x-cloud-progress-bg"}),"->",this.applyBtn=new Ext.UI.Button({text:_TR("INVITE"),handler:this.onAddInviteUser,disabled:true,scope:this,acceptbtn:true}),{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}]},onRemoteUserSearch:function(){if(_.Utils.isValidEmail(this.searchTxtField.getValue())){this.searchLabel.removeClass("x-cloud-users-error");this.foundList.store.removeAll();
this.applyBtn.disable();this.spP2PManager.queryP2PRemoteUsers("cloud-users-query",this.searchTxtField.getValue())}else this.searchLabel.addClass("x-cloud-users-error")},onFoundUserSelected:function(){this.applyBtn.enable()},resetWindowValues:function(){this.searchLabel.removeClass("x-cloud-users-error");this.applyBtn.disable();this.center();this.searchTxtField.focus(false,true)},onAddInviteUser:function(){var a=this.foundList.getSelectedRecords()[0].get("user");if(this.isUserExists(a))Ext.UI.MessageBox.error({title:_TR("CLOUD_USERS"),
msg:_TR("REMOTE_USER_EXISTS_WARNING")});else if(this.spP2PManager.appendP2PRemoteUser(a)===_5){this.spP2PManager.commitRemoteAccessList("cloud-users-commit-invite");this.hide()}},isUserExists:function(a){for(var b=this.spP2PManager.getP2PRemoteUsers(),c=0;c<b.length;++c){var d=_a(b[c],"_i2b");if(d&&a===d.getUserName())return true}return false},onPageSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ENTER:this.onRemoteUserSearch();return false}},showProgressIndicator:function(){this.indicator&&
this.indicator.addClass("x-frontview-icon-progress")},hideProgressIndicator:function(){this.indicator&&this.indicator.removeClass("x-frontview-icon-progress")},_i20:{_o1:function(a,b){if(!this.rendered)return _5;if("cloud-users-query"==b){this.showProgressIndicator();this.searchTxtField.disable();this.searchBtn.disable()}return _5},_o2:function(a,b){switch(b){case "cloud-users-query":if(this.spP2PManager.getP2PQueryUsers().length===0)Ext.UI.MessageBox.confirm({title:_TR("SEND_INVITATION"),
msg:_TR("CONFIRM_INVITATION"),fn:function(e){if(e=="yes")if(this.spP2PManager.appendP2PRemoteUser(this.searchTxtField.getValue(),true)===_5){this.spP2PManager.commitRemoteAccessList("cloud-users-commit-invite");this.hide()}},scope:this});else{a=[];this.foundList.store.removeAll();this.applyBtn.setDisabled(true);b=this.spP2PManager.getP2PQueryUsers();for(var c=0;c<b.length;++c){var d=_a(b[c],"_i2a");d&&a.push({user:d.getUserName()})}this.foundList.getStore().loadData(a);this.foundList.refresh()}break}return _5},
_o3:function(a,b,c){if(!this.rendered)return _5;if("cloud-users-query"==c){this.hideProgressIndicator();this.searchTxtField.enable();this.searchBtn.enable()}return _5}}});Ext.namespace("_s7");
_s7.CloudUsersWindow=_._1(_9,Ext.UI.Window,_i20,_i45,_i2y,{updatesCount:0,help:"cloud_wnd_cloud_users",modal:true,width:600,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",constructor:function(){_.apply(this,{title:_TR("READY_CLOUD")+" "+_TR("USERS"),html:this.getHtml(),fbar:this.getFooter()});_s7.CloudUsersWindow.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this)},getHtml:function(){return'<div id="'+(this.btnCntId=Ext.id())+'" class="x-cloud-users-btncnt"></div><table style="width: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-header"><tr><td style="width: 55%;"><div class="x-cloud-users-header">'+_TR("EMAIL")+'</div></td><td style="width: 45%;"><div>'+
_TR("NAME")+'</div></td></tr></table><div id="'+(this.dataCntId=Ext.id())+'" class=""></div>'},getFooter:function(){this.indicator=new Ext.BoxComponent({cls:"x-cloud-progress-bg"});return[this.indicator,"->",{xtype:"uibutton",text:_TR("OK"),handler:function(){this.hide()},scope:this}]},afterRender:function(){_s7.CloudUsersWindow.superclass.afterRender.apply(this,arguments);this.removeButton=new Ext.UI.Button({cls:"x-cloud-users-remove",width:125,disabled:true,expandToText:true,text:_TR("USER_REMOVE"),
acceptbtn:true,handler:this.onRemoveUser,scope:this,renderTo:this.btnCntId});this.inviteButton=new Ext.UI.Button({cls:"x-cloud-users-invite",width:125,expandToText:true,text:_TR("INVITE_CLOUD_USER"),acceptbtn:true,handler:this.onAddUser,scope:this,renderTo:this.btnCntId});this.usersView=new Ext.DataView({cls:"x-cloud-users-data",singleSelect:true,selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["email","name","type"]}),blockRefresh:true,scrollOffset:0,itemSelector:"table",tpl:new Ext.XTemplate('<tpl for="."><table style="width: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-row "><tr><td style="width: 55%;"><div class="x-cloud-users-{type}row x-ellipsis" title="{email}">{email}</div></td><td style="width: 45%;"><div class="x-ellipsis" title="{name}">{name}</div></td></tr></table></tpl>'),
listeners:{scope:this,selectionchange:this.onSelectUser}});this.usersView.render(this.dataCntId);(new Ext.UI.Scroller({dom:this.usersView.el.dom,type:"vertical"})).reg()},onShow:function(){_s7.CloudUsersWindow.superclass.onShow.apply(this,arguments);this.center();this.refresh()},onRemoveUser:function(){Ext.UI.MessageBox.warning({title:_TR("REMOVE_REMOTE_ACCESS_USER"),msg:'<span class="x-cloud-panel-msgwnd">'+String.format(_TR("REMOVE_REMOTE_ACCESS_USER_THROUGH_READYCLOUD"),document.links_cloud)+
"</span>"})},refresh:function(){this.removeButton.disable();this.rcOwnerUpdated=this.rcUsersUpdated=false;this.spSecurityManager.UpdateRCUsers("cloud-users-update-rcusers");this.spSysManager.updateCloudOwner("cloud-users-update-rcowner")},onAddUser:function(){Ext.UI.MessageBox.show({title:_TR("ADD_REMOTE_ACCESS_USER"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,width:400,msg:'<span class="x-cloud-panel-msgwnd">'+String.format(_TR("ADD_REMOTE_ACCESS_USER_THROUGH_READYCLOUD"),document.links_cloud)+
"</span>"})},onSelectUser:function(a,b){this.removeButton.setDisabled(!b.length)},populate:function(){if(this.rcUsersUpdated&&this.rcOwnerUpdated){var a=[],b=_a(this.spSysManager.getCloudOwner(),"_i2z"),c=this.spSecurityManager.getRCUsers(),d;b&&b.getName()&&a.push({email:b.getEmail(),name:b.getName(),type:"owner"});for(b=0;b<c.length;++b){d=_a(c[b],"_i2z");a.push({email:d.getEmail(),name:d.getName(),type:d.getIsLocked()=="1"?"m":"cloud"})}a=a.sort(function(e,f){if(e.type=="owner"&&
f.type!="owner")return-1;if(e.type!="owner"&&f.type=="owner")return 1;if(e.type=="cloud"&&f.type!="cloud")return-1;if(e.type!="cloud"&&f.type=="cloud")return 1;if(e.email<f.email)return-1;if(e.email>f.email)return 1;return 0});this.usersView.getStore().loadData(a);this.usersView.refresh()}},showProgress:function(){this.updatesCount||this.indicator&&this.indicator.addClass("x-frontview-icon-progress");++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.indicator&&
this.indicator.removeClass("x-frontview-icon-progress")},IPanelItem:{refresh:function(){this.refresh()}},_i2y:{_o1:function(a,b){b=="cloud-users-update-rcusers"&&this.showProgress();return _5},_o2:function(a,b){if(b=="cloud-users-update-rcusers"){this.rcUsersUpdated=true;this.populate()}return _5},_o3:function(a,b,c){c=="cloud-users-update-rcusers"&&this.hideProgress();return _5}},_i45:{_o1:function(a,b){b=="cloud-users-update-rcowner"&&
this.showProgress();return _5},_o2:function(a,b){if(b=="cloud-users-update-rcowner"||b=="cloud-update-devowner"){this.rcOwnerUpdated=true;this.populate()}return _5},_o3:function(a,b,c){c=="cloud-users-update-rcowner"&&this.hideProgress();return _5}}});Ext.namespace("_s7");
_s7.RemoteUsersWindow=_._1(_9,Ext.UI.Window,_i20,_i45,_i2y,{updatesCount:0,help:"cloud_wnd_remote_users",constructor:function(){_.apply(this,{modal:true,width:600,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",title:"",html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onWShow,scope:this}});_s7.RemoteUsersWindow.superclass.constructor.apply(this,
arguments)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spP2PManager=a.getP2PManager();_a(this.spP2PManager,"_i1").Advise(this);this.spSecurityManager=a.getSecurityManager();_a(this.spSecurityManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);_s7.RemoteUsersWindow.superclass.initComponent.apply(this,arguments)},getHtml:function(){return'<div id="'+
(this.btnCntId=Ext.id())+'" class="x-cloud-users-btncnt"></div><table style="width: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-header"><tr><td style="width: 50%;"><div class="x-cloud-users-header">'+_TR("NAME")+'</div></td><td style="width: 50%;"><div class="">'+_TR("TYPE")+'</div></td></tr></table><div id="'+(this.dataCntId=Ext.id())+'" class=""></div>'},getFooter:function(){this.indicator=new Ext.BoxComponent({cls:"x-cloud-progress-bg"});return[this.indicator,"->",{xtype:"uibutton",
text:_TR("OK"),handler:function(){this.hide()},scope:this}]},onAfterRender:function(){this.removeButton=new Ext.UI.Button({cls:"x-cloud-users-remove",width:125,disabled:true,expandToText:true,text:_TR("USER_REMOVE"),acceptbtn:true,handler:this.onRemoveUser,scope:this,renderTo:this.btnCntId});this.inviteButton=new Ext.UI.Button({cls:"x-cloud-users-invite",width:125,disabled:true,expandToText:true,text:_TR("INVITE_CLOUD_USER"),acceptbtn:true,handler:this.onAddUser,scope:this,renderTo:this.btnCntId});
this.usersView=new Ext.DataView({cls:"x-cloud-users-data",singleSelect:true,selectedClass:"ui-fwgrid-rowsel",store:new Ext.data.JsonStore({fields:["usr","type","typeLabel"]}),blockRefresh:true,scrollOffset:0,itemSelector:"table",tpl:new Ext.XTemplate('<tpl for="."><table style="width: 100%; table-layout: fixed;" cellpadding="0" class="ui-fwgrid-row "><tr><td style="width: 50%;"><div class="x-cloud-users-{type}row x-ellipsis" title="{usr}">{usr}</div></td><td style="width: 50%;"><div class="x-ellipsis">{typeLabel}</div></td></tr></table></tpl>'),
listeners:{scope:this,selectionchange:this.onSelectUser}});this.usersView.render(this.dataCntId);(new Ext.UI.Scroller({dom:this.usersView.el.dom,type:"vertical"})).reg()},onWShow:function(){this.stype=="READYDROP"?this.setTitle(_TR("READYDROP")+" "+_TR("USERS")):this.setTitle(_TR("READYNAS_REMOTE")+" "+_TR("USERS"));this.center();this.refresh()},onRemoveUser:function(){var a=this.usersView.getSelectedRecords()[0].get("usr");this.rcusersHash[a]?Ext.UI.MessageBox.warning({title:_TR("REMOVE_REMOTE_ACCESS_USER"),
msg:'<span class="x-cloud-panel-msgwnd">'+String.format(_TR("REMOVE_REMOTE_ACCESS_USER_THROUGH_READYCLOUD"),document.links_cloud)+"</span>"}):Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("WARN_DELETION"),a),fn:function(b){b=="yes"&&this.spP2PManager.removeP2PRemoteUser(a)===_5&&this.spP2PManager.commitRemoteAccessList("cloud-users-commit-remove")},scope:this})},refresh:function(){this.inviteButton.disable();this.removeButton.disable();this.rdUpdated=this.rcOwnerUpdated=
this.rcUsersUpdated=this.p2pUpdated=false;this.spP2PManager.updateRemoteAccessList("cloud-users-update");this.spSecurityManager.UpdateRCUsers("cloud-users-update-rcusers");this.spSysManager.updateCloudOwner("cloud-users-update-rcowner");this.spP2PManager.updateReadyDropStatus("cloud-users-update-rd")},onAddUser:function(){if(!this.addUserWindow)this.addUserWindow=new _s7.AddUserWindow;this.addUserWindow.show()},onSelectUser:function(a,b){this.removeButton.setDisabled(!b.length)},populate:function(){if(this.p2pUpdated&&
this.rcUsersUpdated&&this.rcOwnerUpdated&&this.rdUpdated){var a=this.spP2PManager.getReadyDropStatus()=="on"?"Remote, ReadyDROP":"Remote",b=[];this.accesslistHash={};this.rcusersHash={};var c=_a(this.spSysManager.getCloudOwner(),"_i2z");this.rcownername=c.getName();this.rcusersHash[this.rcownername]=c;c=this.spSecurityManager.getRCUsers();for(var d=0;d<c.length;++d){var e=_a(c[d],"_i2z"),f=e.getName();this.rcusersHash[/^leafuser_[0-9]+$/g.test(f)?e.getEmail():f]=e}e=this.spP2PManager.getP2PRemoteUsers();
for(d=0;d<e.length;++d){var g=_a(e[d],"_i2b");f=g.getUserName();if(g.getFullName()==="*email invite*")b.push({usr:f,type:"m",typeLabel:(g.getChannel()==4?"ReadyCLOUD, ":"")+a});else if(this.rcownername==f)b.push({usr:f,type:"owner",typeLabel:"ReadyCLOUD, "+a});else this.rcusersHash[f]?b.push({usr:f,type:"cloud",typeLabel:"ReadyCLOUD, "+a,disabled:this.rcusersHash[f].getIsLocked()=="1"?"x-cloud-users-cloudrow-disabled":""}):b.push({usr:f,type:"u",typeLabel:a});this.accesslistHash[f]=
g}for(d=0;d<c.length;++d){e=_a(c[d],"_i2z");f=e.getName();e=e.getEmail();!this.accesslistHash[f]&&!this.accesslistHash[e]&&b.push({usr:f,type:"m",typeLabel:"ReadyCLOUD, "+a})}b=b.sort(function(h,i){if(h.type=="owner"&&i.type!="owner")return-1;if(h.type!="owner"&&i.type=="owner")return 1;if((h.type=="cloud"||h.type=="u")&&i.type!="cloud"&&i.type!="u")return-1;if(h.type!="cloud"&&h.type!="u"&&(i.type=="cloud"||i.type=="u"))return 1;if(h.usr<i.usr)return-1;if(h.usr>i.usr)return 1;return 0});
this.usersView.getStore().loadData(b);this.usersView.refresh()}},showProgress:function(){this.updatesCount||this.indicator&&this.indicator.addClass("x-frontview-icon-progress");++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.indicator&&this.indicator.removeClass("x-frontview-icon-progress")},IPanelItem:{refresh:function(){this.refresh()}},_i20:{_o1:function(a,b){if(!this.rendered)return _5;["cloud-users-update","cloud-users-commit-invite",
"cloud-users-commit-add","cloud-users-commit-remove","cloud-services-remote-update"].indexOf(b)!=-1&&this.showProgress();return _5},_o2:function(a,b){if(!this.rendered)return _5;switch(b){case "cloud-users-update":this.p2pUpdated=true;this.populate();break;case "cloud-users-update-rd":case "cloud-services-rd-update":this.rdUpdated=true;this.populate();break}return _5},_o3:function(a,b,c){switch(c){case "cloud-users-commit-invite":case "cloud-users-commit-add":case "cloud-users-commit-remove":this.hideProgress();
this.refresh();break;case "cloud-users-update":case "cloud-services-remote-update":this.hideProgress();a=this.spP2PManager.getP2PStatus()==_4||this.spP2PManager.getP2PStatus()=="0";this.inviteButton.setDisabled(a);this.removeButton.setDisabled(a||!this.usersView.getSelectionCount());break}return _5}},_i2y:{_o1:function(a,b){b=="cloud-users-update-rcusers"&&this.showProgress();return _5},_o2:function(a,b){if(b=="cloud-users-update-rcusers"){this.rcUsersUpdated=
true;this.populate()}return _5},_o3:function(a,b,c){c=="cloud-users-update-rcusers"&&this.hideProgress();return _5}},_i45:{_o1:function(a,b){b=="cloud-users-update-rcowner"&&this.showProgress();return _5},_o2:function(a,b){if(b=="cloud-users-update-rcowner"||b=="cloud-update-devowner"){this.rcOwnerUpdated=true;this.populate()}return _5},_o3:function(a,b,c){c=="cloud-users-update-rcowner"&&this.hideProgress();return _5}}});Ext.namespace("_s8");
var hashtable=function(){var a=0,b={};this.add=function(c,d){if(!b[c]){b[c]=d;a++}return this};this.insert=function(c,d){b[c]=d;return this};this.getById=function(c,d){if(d){d(b[c]);return this}return b[c]};this.remove=function(c){if(b[c]){delete b[c];b[c]=null;a--}return this};this.clear=function(){for(var c in b)typeof b[c]!="function"&&this.remove(c);b={};return this};this.getLength=function(c){if(c){c(a);return this}return a};this.foreach=function(c){for(var d in b)b[d]&&typeof b[d]!="function"&&
c(b[d]);return this};this.toString=function(c,d,e){var f="";c=c?c:":";d=d?d:",";for(var g in b)if(typeof b[g]!="function"){if(f.length>0)f+=d;f+=g+(b[g]?c+b[g]:"")}if(e){e(f);return this}return f}};
_s7.CloudOptionBlock=_._1(_.JSCom._9,Ext.Container,{folderFilter:"AmazonCloudDrive",constructor:function(){_s7.CloudOptionBlock.superclass.constructor.apply(this,arguments);this.html=this.getHtml();this.shares=new hashtable;this.addEvents("change")},reset:function(){this.shares.clear();this.createEmptyKeysTable(_TR("EMPTY"))},addShare:function(a){var b=Ext.get(this.rowsConainer),c=this.shares.getLength();c===0&&this.cleanKeysTable(b);var d={rowId:null,
chId:null,titleId:null,cbId:null,isAmazonShare:a.name===this.folderFilter,amazonShId:null};b.insertHtml("beforeend",this.getTableRow(c,a.id,a.name,d));b=new Ext.UI.Checkbox({width:20,disabled:a.isDisabled,checked:a.isChecked});b.render(d.chId);b.wrap.setStyle({margin:"0 auto"});b.on("check",function(e){this.onKeyChecked(e,d.rowId)},this);if(d.amazonShId){c=new Ext.UI.RoundButton({cls:"x-frontview-btn-info"});c.render(d.amazonShId);new Ext.UI.ToolTip(c.el,{width:200,html:_TR("CLOUD_AMAZON_SHARE_CREATE")})}c=
[["never",_TR("NEVER"),false],["hourly",_TR("HOURLY"),false],["daily",_TR("DAILY"),false],["weekly",_TR("WEEKLY"),false]];if(a.isCustomSchedule)c=[["custom",_TR("CUSTOM"),false],["never",_TR("NEVER"),false],["hourly",_TR("HOURLY"),false],["daily",_TR("DAILY"),false],["weekly",_TR("WEEKLY"),false]];c=new Ext.UI.ComboBox({width:180,forceSelection:true,editable:false,mode:"local",triggerAction:"all",multiSelect:false,store:new Ext.data.ArrayStore({fields:["id","text","checked"],data:c}),valueField:"id",
displayField:"text",value:"0",emptyText:_TR("CLOUD_DRIVE_NON_SELECTED")});c.render(d.cbId);c.on("select",function(e,f){this.onSelect(e,f,d.rowId)},this);c.setValue(a.isSchedule&&a.schedule.length>0?a.schedule:a.isCustomSchedule?"custom":"never");c.setVisible(a.isChecked);this.shares.add(d.rowId,{shareId:a.id,shareName:a.name,ch:b,cb:c})},populate:function(){},showProgress:function(){this.createEmptyKeysTable(_TR("CLOUD_DRIVE_PROGRESS_MSG"))},hideProgress:function(){this.createEmptyKeysTable(_TR("EMPTY"))},
getValue:function(a){this.shares.foreach(function(b){if(b.ch.getValue())if(a){var c=b.cb.getValue();a(b.shareId,b.shareName,c.length>0?c:null)}})},afterRender:function(){var a=Ext.get(this.rowsConainer);ScrollManager.reg(a.dom,ScrollManager.VERTICAL)},onKeyChecked:function(a,b){this.shares.getById(b).cb.setVisible(a.checked);this.fireEvent("change",this)},onSelect:function(){this.fireEvent("change",this)},getHtml:function(){return'<div style="width: 610px; height: 260px;">'+this.getTableHeader()+
'<div id="'+(this.rowsConainer=Ext.id())+'" style="width: 100%; height: 230px; overflow-y: hidden;"></div></div>'},getTableHeader:function(){return'<table style="width: 610px; max-width: 610px;" class=" ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td><div class="x-ellipsis" style="width: 80px; text-align: center; " title="'+_TR("ENABLE")+'">'+_TR("ENABLE")+'</div></td><td style="width: 100%;"><div class="x-ellipsis" style="width: 100%;">'+_TR("SHARE_NAME").toUpperCase()+'</div></td><td><div class="x-ellipsis" style="width: 200px; " title="'+
_TR("SNAPSHOT_SCHEDULE")+'">'+_TR("SNAPSHOT_SCHEDULE")+"</div></td></tr></table>"},getTableRow:function(a,b,c,d){return'<table id="'+(d.rowId=Ext.id())+'" style="width: 610px; max-width: 610px;" class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td style="text-align: center; vertical-align: bottom;"><div id="'+(d.chId=Ext.id())+'" style="width: 80px; height: 28px;"></div></td><td style="width: 100%;"><div id="'+(d.titleId=Ext.id())+'" class="x-ellipsis" style="width: 100%; height: 30px; line-height: 30px;" title="'+
b+'"><span style="float: left;">'+c+"</span>"+(d.isAmazonShare?'<div id="'+(d.amazonShId=Ext.id())+'" style="float: left; width: 16px; height: 16px; margin-left: 4px; margin-top: 6px;" ></div>':"")+'</div></td><td><div id="'+(d.cbId=Ext.id())+'" style="width: 200px; min-width: 200px; max-width: 200px; line-height: 28px;" ></div></td></tr></table>'},getEmptyTableRow:function(a,b){return'<table class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td style="width: 100%;"><div style="width: 100%; text-align: center;">'+
b+"</div></td></tr></table>"},createEmptyKeysTable:function(a){var b=Ext.get(this.rowsConainer);this.cleanKeysTable(b);b.insertHtml("afterbegin",this.getEmptyTableRow(0,""));b.insertHtml("afterbegin",this.getEmptyTableRow(1,a));b.insertHtml("afterbegin",this.getEmptyTableRow(2,""))},cleanKeysTable:function(a){a=a.dom;for(var b=a.firstChild;b;){var c=b.nextSibling;a.removeChild(b);b=c}}});Ext.namespace("_s7");
Ext.override(Ext.Element,{getText:function(){return this.dom.textContent||this.dom.innerText||""}});
_s7.CloudLogsBlock=_._1(_.JSCom._9,Ext.Container,_ih,{currLogEntries:[],constructor:function(){this.html=this.getHtml();_s7.CloudLogsBlock.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this)}this.isLogEmpty=true;this.addEvents("change")},reset:function(){this.showRawLog(false);this.isLogEmpty=
true;this.currLogEntries.splice(0,this.currLogEntries.length);this.createEmptyKeysTable(_TR("EMPTY"));this.spBKManager.updateAmazonLogs("amazon_update_logs")},copyTo:function(){this.showRawLog(true);for(var a="",b=Ext.get(this.rowsConainer).first();b;){a+=Ext.get(b).getText()+"\r\n";b=b.next()}this.txta.setValue(a);this.txta.selectText()},showProgress:function(){this.createEmptyKeysTable(_TR("CLOUD_DRIVE_PROGRESS_MSG"))},hideProgress:function(){this.createEmptyKeysTable(_TR("EMPTY"))},stopTimer:function(){this.currLogEntries.splice(0,
this.currLogEntries.length);clearTimeout(this.timeoutId)},startTimer:function(){var a=this;this.timeoutId=setTimeout(function(){a.spBKManager.updateAmazonLogs("amazon_update_logs_timeout")},5E3)},scrollLastIntoView:function(){this.lastRow&&this.scrollIntoView(this.lastRow)},populate:function(a){if(a!=_4&&a.length>0){var b=this.currLogEntries.length,c=Ext.get(this.rowsConainer);if(this.currLogEntries.length===0||this.currLogEntries.length===1E3){this.currLogEntries.splice(0,this.currLogEntries.length);
this.cleanKeysTable(c);b=0}for(var d=null,e=a.length-1;e>=0;--e){var f=_a(a[e],"_i1v");if(this.currLogEntries.indexOf(f.getTime()+this.formatLogMessage(f))===-1){this.currLogEntries.push(f.getTime()+this.formatLogMessage(f));d=c.createChild({tag:"tr",style:"",html:this.getTableRow(_.formatDateTime(f.getDeviceTime()!==_4?f.getDeviceTime():new Date(f.getTime()*1E3)),this.formatLogMessage(f))});++b}}if(d){this.lastRow=d;this.scrollIntoView(d)}this.isLogEmpty=false}else{this.createEmptyKeysTable(_TR("EMPTY"));
this.isLogEmpty=true}this.fireEvent("change",this);this.startTimer()},showRawLog:function(a){Ext.get(this.formattedLogsId).setDisplayed(!a);Ext.get(this.notFormattedLogsId).setDisplayed(a)},scrollIntoView:function(a){var b=Ext.get(this.formattedLogsId),c=a.dom.offsetTop-b.dom.clientHeight;c=c+a.dom.clientHeight-(a.dom.clientHeight-b.dom.clientHeight);b.dom.scrollTop=c},formatLogDate:function(a){return a.toLocaleString()},formatLogMessage:function(a){var b=_TR(a.getMessageTag());a=a.getArgs();a!=_4&&
_.each(a,function(c){try{b=b.replace(new RegExp("{"+c.name+"}",["g"]),unescape(c.value))}catch(d){console.info(d)}},this);return b},getHtml:function(){return'<div id="'+(this.notFormattedLogsId=Ext.id())+'" style="width: 610px; height: 260px;"></div><div id="'+(this.formattedLogsId=Ext.id())+'" style="width: 610px; height: 260px;"><table style="width: 100%; height: 100%;" class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tbody id="'+(this.rowsConainer=Ext.id())+'"></tbody></table></div>'},
getTableRow:function(a,b){return'<td class="x-selectable" style="text-align: right; vertical-align: top;"><div class="x-ellipsis x-selectable" style="text-wrap: normal; color: #808fa8; margin-bottom: 8px; margin-right: 4px; font-size: 14px;" title="'+a+'">'+a+'</div></td><td class="x-selectable" style="text-align: left; vertical-align: top; width: 100%; padding-left: 5px;"><div class="x-selectable" style="text-wrap: normal; width: 100%; margin-bottom: 8px; font-size: 14px; padding-right: 14px;" title="'+
b.trim()+'">'+b.trim()+'</div></td><td style="width: 14px; min-width: 14px;"></td>'},getEmptyTableRow:function(a){return'<td style="width: 100%;"><div style="width: 100%; text-align: center;">'+a+"</div></td>"},createEmptyKeysTable:function(a){var b=Ext.get(this.rowsConainer);this.cleanKeysTable(b);b.createChild({tag:"tr",cls:"x-selectable",html:this.getEmptyTableRow(a)})},cleanKeysTable:function(a){a=a.dom;for(var b=a.firstChild;b;){var c=b.nextSibling;a.removeChild(b);b=c}},afterRender:function(){var a=
Ext.get(this.formattedLogsId);ScrollManager.reg(a.dom,ScrollManager.VERTICAL);this.txta=new Ext.UI.TextArea({width:"100%",height:260,renderTo:this.notFormattedLogsId,readonly:true,enableKeyEvents:true,listeners:{blur:function(){this.showRawLog(false)},focus:function(){},scope:this}})},_ih:{_o1:function(a,b){switch(b){case "amazon_update_logs":this.showProgress();break;default:break}return _5},_o2:function(a,b){switch(b){case "amazon_update_logs_timeout":case "amazon_update_logs":this.populate(this.spBKManager.getAmazonLogs());
break;default:break}return _5},_o3:function(a,b,c){switch(c){case "amazon_update_logs":a!=_5&&this.hideProgress();break;default:break}return _5}}});_._2("_s7");
_s7.VaultOptionsWindow=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_vault_options",modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",constructor:function(){_.apply(this,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",title:_TR("VAULT_OPTIONS"),html:this.getHtml(),listeners:{afterrender:this.onAfterRender,scope:this}});_s7.VaultOptionsWindow.superclass.constructor.apply(this,
arguments);this.addEvents("apply","cancel")},getHtml:function(){return'<table id="'+(this.infoId=Ext.id())+'" cellpadding="0" cellspacing="0" class="x-cloud-settings-rdcontent" style="width: 380px; display:block;"><tr><td class="x-cloud-rc-dlglabel" id="'+(this.lvolumeId=Ext.id())+'">'+_TR("SELECT_VOLUME")+_TR("COLON")+'</td><td id="'+(this.volumeId=Ext.id())+'"></td></tr><tr><td class="x-cloud-rc-dlglabel" id="'+(this.luserNameId=Ext.id())+'">'+_TR("VAULT_USER_MAIL")+_TR("COLON")+'</td><td id="'+
(this.userNameId=Ext.id())+'"></td></tr><tr><td class="x-cloud-rc-dlglabel" id="'+(this.lpasswordId=Ext.id())+'">'+_TR("VAULT_USER_PASSWORD")+_TR("COLON")+'</td><td id="'+(this.passwordId=Ext.id())+'"></td></tr><tr id="'+(this.confirmpwdRowId=Ext.id())+'"><td class="x-cloud-rc-dlglabel" id="'+(this.lconfirmpwdId=Ext.id())+'">'+_TR("VAULT_CONFIRM_PASSWORD")+_TR("COLON")+'</td><td id="'+(this.confirmpwdId=Ext.id())+'"></td></tr><tr id="'+(this.shareRowId=Ext.id())+'"><td class="x-cloud-rc-dlglabel" id="'+
(this.lshareId=Ext.id())+'">'+_TR("SELECT_SHARE")+_TR("COLON")+'</td><td id="'+(this.shareId=Ext.id())+'"></td></tr></table><div id="'+(this.buttonsId=Ext.id())+'" style="margin-top: 20px;height: 30px;"></div><div class="x-cloud-links-cntr"><div class="links"><a id="'+(this.registerLinkId=Ext.id())+'" href="#" class="x-cloud-link">'+_TR("VAULT_LOGIN_LABEL4")+'</a></div><div class="links" style="color:#ccc;padding: 0 3px;"> | </div><span class="links"><a id="'+(this.forgotLinkId=Ext.id())+'" href="#" class="x-cloud-link">'+
_TR("VAULT_LOGIN_LABEL2")+"</a></span></div>"},showLoginPanel:function(){Ext.get(this.registerLinkId).set({islogin:true});Ext.get(this.registerLinkId).update(_TR("VAULT_LOGIN_LABEL4"));Ext.get(this.confirmpwdRowId).setDisplayed(false);this.bApply.setText(_TR("VAULT_LOGIN"));this.mail.setValue("");this.password.setValue("");this.confirmpwd.setValue("")},showRegisterPanel:function(){Ext.get(this.registerLinkId).set({islogin:false});Ext.get(this.registerLinkId).update(_TR("VAULT_REG_LABEL2"));Ext.get(this.confirmpwdRowId).setDisplayed(true);
this.bApply.setText(_TR("VAULT_REGISTER"));this.mail.setValue("");this.password.setValue("");this.confirmpwd.setValue("")},enableForm:function(a){if(a==true){this.mail.enable();this.password.enable();this.confirmpwd.enable();this.share.enable()}else{this.mail.disable();this.password.disable();this.confirmpwd.disable();this.share.disable()}},loginValidate:function(){if(!_.Utils.isValidEmail(this.mail.getValue())){Ext.UI.MessageBox.warning({msg:_TR("VAULT_ERR_MSG1"),width:400});return false}return true},
registerValidate:function(){if(!_.Utils.isValidEmail(this.mail.getValue())){Ext.UI.MessageBox.warning({msg:_TR("VAULT_ERR_MSG1"),width:400});return false}if(this.password.getValue()!=this.confirmpwd.getValue()){Ext.UI.MessageBox.warning({msg:_TR("VAULT_ERR_MSG2"),width:400});return false}return true},reset:function(a){this.enableForm(false);this.showLoginPanel();this.volume.getStore().loadData(a.volumes);a.volume!=="none"&&this.enableForm(true);this.volume.setValue(a.volume);this.share.getStore().loadData(a.shares);
this.share.setValue(a.share)},onAfterRender:function(){_s7.VaultOptionsWindow.superclass.afterRender.apply(this,arguments);Ext.get(this.registerLinkId).on("click",this.onShowResetPanel,this);Ext.get(this.forgotLinkId).on("click",this.onResetPassword,this);this.vaultTip=new Ext.BoxComponent({cls:"x-inspector-contents-header-help",style:"margin-left: 4px",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:300,html:String.format(_TR("VAULT_TIPS"),"http://www.readynasvault.com")})}}});
this.mail=new Ext.UI.TextField({disabled:true,enableKeyEvents:true,width:260});this.password=new Ext.UI.TextField({disabled:true,enableKeyEvents:true,width:260,specialkey:this.onSpecialKeyPress,inputType:"password"});this.confirmpwd=new Ext.UI.TextField({disabled:true,enableKeyEvents:true,width:260,specialkey:this.onSpecialKeyPress,inputType:"password"});this.volumeProxy=new Ext.data.ArrayStore({fields:["id","text"],data:[]});this.volume=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",typeAhead:true,
triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:this.volumeProxy,valueField:"id",displayField:"text",width:260,listeners:{collapse:this.onSelectVolume,scope:this}});this.shareProxy=new Ext.data.ArrayStore({fields:["id","text"],data:[]});this.share=new Ext.UI.ComboBox({cellCls:"x-sec-newpref-cell",typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,value:"none",store:this.shareProxy,disabled:true,valueField:"id",displayField:"text",width:260});this.cancelbtn=
new Ext.UI.Button({text:_TR("CANCEL"),cancelbtn:true,width:125,disabled:false,scope:this,style:"float: right;margin-left: 10px;",renderTo:this.buttonsId});this.cancelbtn.on("click",this.onCancelClick,this);this.bApply=new Ext.UI.Button({text:_TR("VAULT_LOGIN"),acceptbtn:true,width:125,disabled:false,style:"float: right;margin-left: 10px;",renderTo:this.buttonsId});this.bApply.on("click",this.onApplyClick,this);this.volume.render(this.volumeId);this.share.render(this.shareId);this.mail.render(this.userNameId);
this.password.render(this.passwordId);this.confirmpwd.render(this.confirmpwdId);this.showLoginPanel()},show:function(a,b,c){_s7.VaultOptionsWindow.superclass.show.apply(this,arguments);this.center();Ext.fly(this.luserNameId).removeClass("x-cloud-error");Ext.fly(this.lpasswordId).removeClass("x-cloud-error");Ext.fly(this.confirmpwdRowId).removeClass("x-cloud-error");this.reset(c)},onResetPassword:function(){var a=document.getElementById(this.userNameId).value;_.isDefined(a)||(a="");window.open("https://vault.readynas.com/account/forgot_password.aspx?uname="+
a,"_blank","status=1,toolbar=1")},onShowResetPanel:function(){_.getAttribute(Ext.get(this.registerLinkId),"islogin")==="true"?this.showRegisterPanel():this.showLoginPanel()},onApplyClick:function(){var a={};if(_.getAttribute(Ext.get(this.registerLinkId),"islogin")==="true"){if(!this.loginValidate())return;a.type="login";a.user=this.mail.getValue();a.password=this.password.getValue()}else{if(!this.registerValidate())return;a.type="registration";a.user=this.mail.getValue();a.password=this.password.getValue();
a.passwordConfirm=this.confirmpwd.getValue()}a.volume=this.volume.getValue();a.share=this.share.getValue();this.hide();this.fireEvent("apply",this,a)},onCancelClick:function(){this.hide();this.fireEvent("cancel",this,{})},onSpecialKeyPress:function(a,b){if(b.getKey()==b.ENTER){this.onApplyClick();return false}return true},onSelectVolume:function(a){a.getValue()=="none"?this.enableForm(false):this.enableForm(true)}});_._2("_s7");
_s7.RemoteOptionsWindow=_._1(_9,Ext.UI.Window,_i20,{help:"cloud_wnd_remote_options",constructor:function(){_.apply(this,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,title:_TR("READY_CLOUD_SETS"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onWShow,scope:this}});_s7.RemoteOptionsWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s7.RemoteOptionsWindow.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spP2PManager=a.getP2PManager();this.zfsVolumesManager=a.getZFSVolumesManager()}},getHtml:function(){return'<div id="'+(this.warningId=Ext.id())+'" class="x-sec-add-warn">'+_TR("SEC_VOLUME_ALERT")+'</div><div style="text-align: center;"><span class="x-cloud-services-lbl">'+_TR("DEVICE_ID")+_TR(":")+'</span><span id="'+(this.devId=Ext.id())+'" class="x-cloud-services-device"></span></div>'},getFooter:function(){return[{xtype:"uibutton",
text:_TR("APPLY"),handler:function(){this.onApplyClicked();this.hide()},scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.sidebar=new Ext.UI.SideBar;this.sidebar.render(this.body);this.securityBlock=new _s7.SecurityBlock(this);this.sidebar.addTab(_TR("SECURITY"),this.securityBlock)},onWShow:function(){var a=this.zfsVolumesManager.getActiveVolumes();Ext.fly(this.warningId).setDisplayed(a==
_4||a.length==0);Ext.fly(this.devId).update(this.spP2PManager.getDeviceId());this.center()},onApplyClicked:function(){this.spP2PManager.putSpecConnEnableStatus(this.securityBlock.incomingEnable.getValue());this.spP2PManager.putSpecConnProtocol(this.securityBlock.incomingProtocol.getValue().toUpperCase());this.spP2PManager.putSpecConnPort(this.securityBlock.incomingPort.getValue());this.spP2PManager.putSecEncryptEnableStatus(this.securityBlock.incomingEncrypt.getValue());this.spP2PManager.putSecFirewallEnableStatus(this.securityBlock.incomingFirewall.getValue());
this.spP2PManager.commitP2PConfigurations("cloud-services-settings-commit");this.spP2PManager.getP2PStatus()?this.spP2PManager.startP2P("cloud-services-remote-toggle"):this.spP2PManager.stopP2P("cloud-services-remote-toggle")}});_._2("_s7");
_s7.ReadyCloudOptionsWindow=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_rc_options",modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",constructor:function(){this.title=_TR("READY_CLOUD_JOIN_DESC");this.html=this.getHtml();_s7.ReadyCloudOptionsWindow.superclass.constructor.apply(this,arguments);this.spDevice=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spSysManager=this.spDevice.getSystemManager();
_a(this.spSysManager,"_i1").Advise(this);this.spServManager=this.spDevice.getSystemServiceManager();this.spP2PManager=this.spDevice.getP2PManager()},getHtml:function(){return'<div id="'+(this.messagePanelId=Ext.id())+'" class=" x-dlg-icon" style="position:relative;"><div class="ext-mb-icon ext-mb-warning" style="position:absolute;top:0;left;0;width:44px;height:38px;"></div><div class="ext-mb-content" style="padding-left:70px;"><span id="'+(this.leaveMsgId=Ext.id())+'" class="ext-mb-text"></span><br /><br /><div id="'+
(this.chbRemoveHFId=Ext.id())+'"></div><br /></div></div><table id="'+(this.credPanelId=Ext.id())+'" cellpadding="0" cellspacing="0" class="x-cloud-settings-rdcontent" ><tr><td class="x-cloud-rc-dlglabel" id="'+(this.lAccountId=Ext.id())+'">'+_TR("EMAIL")+':</td><td id="'+(this.tfEmailId=Ext.id())+'"></td></tr><tr><td class="x-cloud-rc-dlglabel" id="'+(this.lPasswordId=Ext.id())+'">'+_TR("PASSWORD")+':</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr></table><div id="'+(this.buttonsId=Ext.id())+
'" style="margin-top: 20px;height: 30px;"></div><div id="'+(this.linksPanelId=Ext.id())+'" class="x-cloud-links-cntr"><div class="links"><a href="https://accounts.netgear.com/login?redirectUrl=https:%2F%2Freadycloud.netgear.com%2F" class="x-cloud-link" target="_blank">'+_TR("CLOUD_CREATE_ACCOUNT")+'</a></div><div class="links" style="color:#ccc; padding: 0 3px;"> | </div><span class="links"><a href="'+document.links_cloud+'/client/index.html#page=forgotaccount" class="x-cloud-link" target="_blank">'+
_TR("CLOUD_FORGOT_ACCOUNT")+'</a></span><div class="links" style="color:#ccc; padding: 0 3px;"> | </div><span class="links"><a href="'+document.links_cloud+'/client/terms.html" class="x-cloud-link" target="_blank">'+_TR("CLOUD_TERMS_OF_USE")+'</a></span><div class="links" style="color:#ccc; padding: 0 3px;"> | </div><span class="links"><a href="http://www.netgear.com/about/privacypolicy/" class="x-cloud-link" target="_blank">'+_TR("PRIVACY_POLICY")+"</a></span></div>"},afterRender:function(){_s7.ReadyCloudOptionsWindow.superclass.afterRender.apply(this,
arguments);this.chbRemoveHF=new Ext.UI.Checkbox({boxLabel:_TR("CLOUD_REMOVE_HOME_FOLDERS"),cls:"x-cloud-remove-hf-chb",renderTo:this.chbRemoveHFId});this.tfEmail=new Ext.UI.TextField({width:280,renderTo:this.tfEmailId,enableKeyEvents:true,listeners:{specialkey:this.onSpecialKeyPress,scope:this}});this.tfPassword=new Ext.UI.TextField({width:280,inputType:"password",renderTo:this.tfPasswordId,enableKeyEvents:true,listeners:{specialkey:this.onSpecialKeyPress,scope:this}});this.indicator=new Ext.Component({style:"float: left",
renderTo:this.buttonsId});this.bCancel=new Ext.UI.Button({text:_TR("CLOSE"),width:125,style:"float: right; margin-left: 10px;",renderTo:this.buttonsId,listeners:{click:this.onCancelClick,scope:this}});this.bApply=new Ext.UI.Button({text:_TR("READY_CLOUD_JOIN_BUTTON"),acceptbtn:true,width:125,style:"float: right; margin-left: 10px;",renderTo:this.buttonsId,listeners:{click:this.onApplyClick,scope:this}});this.bLeave=new Ext.UI.Button({text:_TR("LEAVE_RC"),acceptbtn:true,width:125,hidden:true,style:"float: right; margin-left: 10px;",
renderTo:this.buttonsId,listeners:{click:this.onLeaveClick,scope:this}})},show:function(a,b,c){_s7.ReadyCloudOptionsWindow.superclass.show.apply(this,arguments);this.enableCredentialPanel(c.leave);this.refresh();this.center()},enableCredentialPanel:function(a){Ext.get(this.credPanelId).setDisplayed(!a);Ext.get(this.linksPanelId).setDisplayed(!a);Ext.get(this.messagePanelId).setDisplayed(a);this.setTitle(_TR("LEAVE_RC"));a||this.setTitle(_TR("READY_CLOUD_JOIN_DESC"));a=_a(this.spSysManager.getCloudOwner(),
"_i2z");var b="";if(a&&a!=_4)b=a.getEmail();Ext.fly(this.leaveMsgId).update(String.format(_TR("QUEST_LEAVE_RC"),b));this.chbRemoveHF.setValue(true)},setControlsDisabled:function(a){for(var b=[this.bApply,this.bLeave,this.bCancel,this.tfEmail,this.tfPassword],c=0;c<b.length;++c)b[c].setDisabled(a)},refresh:function(){this.spSysManager.updateCloudOwner("cloudopt-update-devowner")},onApplyClick:function(){if(_.Utils.isValidEmail(this.tfEmail.getValue()))if(this.tfPassword.getValue().trim()){var a=
_a(new _1.user,"_i2z");a.putName(this.tfEmail.getValue().toLowerCase());a.putPassword(this.tfPassword.getValue());this.spSysManager.registerCloudOwner(a,"cloudopt-commit-devowner")}else this.tfPassword.focus(false,true);else{this.tfEmail.focus(false,true);this.tfEmail.showValidateTooltip(_TR("CLOUD_EMAIL_TOOLTIP")+'<br /> <br /><a href="'+document.links_cloud+'/client/index.html#page=upgradeaccount" class="x-cloud-link" target="_blank">'+_TR("CLOUD_UPGRADE_ACCOUNT")+"</a>")}},onCancelClick:function(){this.hide()},
onLeaveClick:function(){this.spSysManager.removeCloudOwner("cloudopt-remove-devowner",!this.chbRemoveHF.getValue())},getReadyCLOUDService:function(){for(var a=this.spServManager.getSystemServices(),b=0;b<a.length;++b){var c=_a(a[b],"_i32");if(c.getName()=="readycloud")return c}return null},onSpecialKeyPress:function(a,b){if(b.getKey()==b.ENTER){this.onApplyClick();return false}return true},showProgressIndicator:function(){this.indicator&&this.indicator.addClass("x-frontview-icon-progress")},
hideProgressIndicator:function(){this.indicator&&this.indicator.removeClass("x-frontview-icon-progress")},_i45:{_o1:function(a,b){if(this.rendered&&["cloudopt-remove-devowner","cloudopt-commit-devowner","cloudopt-update-devowner","cloud-update-devowner"].indexOf(b)!=-1){this.showProgressIndicator();this.setControlsDisabled(true)}return _5},_o2:function(a,b){if(b=="cloudopt-update-devowner"&&this.rendered){this.bApply.setDisabled(false);this.bLeave.setDisabled(false);this.bCancel.setDisabled(false);
this.tfEmail.focus(false,true);if((a=_a(this.spSysManager.getCloudOwner(),"_i2z"))&&a.getName()){this.bApply.hide();this.bLeave.show();this.tfEmail.setValue(a.getEmail()||a.getName());this.tfEmail.setDisabled(true);this.tfPassword.setDisabled(true)}else{this.bApply.show();this.bLeave.hide();this.tfEmail.setValue("");this.tfEmail.setDisabled(false);this.tfPassword.setValue("");this.tfPassword.setDisabled(false)}}else if(b=="cloudopt-commit-devowner"){a=this.getReadyCLOUDService();a.putEnable(true);
this.spServManager.commitSystemService("cloud-services-readycloud-commit")}else if(b=="cloudopt-remove-devowner"){a=this.getReadyCLOUDService();a.putEnable(false);this.spServManager.commitSystemService("cloud-services-readycloud-commit")}return _5},_o3:function(a,b,c){if(!this.rendered)return _5;c=="cloudopt-update-devowner"&&this.hideProgressIndicator();if((c=="cloudopt-remove-devowner"||c=="cloudopt-commit-devowner")&&a!=_5){if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();
b=_TR(a);if(a=="24002000006")b+='<br /> <br /><a href="'+document.links_cloud+'/client/index.html#page=upgradeaccount" class="x-cloud-link" target="_blank">'+_TR("CLOUD_UPGRADE_ACCOUNT")+"</a>";Ext.UI.MessageBox.info({title:_TR("READY_CLOUD"),msg:b,width:400,scope:this})}this.hideProgressIndicator();this.setControlsDisabled(false)}else c=="cloud-update-devowner"&&a==_5&&this.hide();return _5}}});_._2("_s7");
_s7.ReplicateOptionsWindow=_._1(_9,Ext.UI.Window,_i45,{help:"cloud_wnd_replicate_options",constructor:function(){_.apply(this,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",title:_TR("REPLICATE_SETTINGS"),html:this.getHtml(),listeners:{afterrender:this.onAfterRender,show:this.onWShow,scope:this}});_s7.ReplicateOptionsWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){_s7.ReplicateOptionsWindow.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spP2PManager=a.getP2PManager();this.spServManager=a.getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)}},getHtml:function(){return'<div id="'+(this.warningId=Ext.id())+'" class="x-sec-add-warn" style="display:none;">'+_TR("SEC_VOLUME_ALERT")+'</div><table id="'+(this.unRegContent=Ext.id())+'" cellpadding="0" cellspacing="0" class="x-cloud-settings-rdcontent" style="display:block;"><tr><td class="x-cloud-rc-dlglabel" id="'+
(this.lAccountId=Ext.id())+'">'+_TR("NAME")+':</td><td id="'+(this.tfAccountId=Ext.id())+'"></td></tr><tr><td class="x-cloud-rc-dlglabel" id="'+(this.lPasswordId=Ext.id())+'">'+_TR("PASSWORD")+':</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr></table><table id="'+(this.regContent=Ext.id())+'" cellpadding="0" cellspacing="0" class="x-cloud-settings-rdcontent" style="display:none;"><tr><td id="'+(this.regName=Ext.id())+'"></td></tr></table><div id="'+(this.buttonsId=Ext.id())+'" style="margin-top: 20px;height: 30px;"></div>'},
getFooter:function(){this.indicator=new Ext.BoxComponent({cls:"x-cloud-progress-bg"});this.bApply=new Ext.UI.Button({text:_TR("REPLICATE_REGISTER_BUTTON"),acceptbtn:true,width:125,disabled:false,btnState:"unreg"});this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:125,disabled:false,scope:this,handler:function(){this.hide()}});return[this.indicator,"->",this.bApply,this.bCancel]},disableControls:function(a){this.bApply.setDisabled(a);this.bCancel.setDisabled(a);this.tfAccount.setDisabled(a);
this.tfPassword.setDisabled(a)},onAfterRender:function(){this.tfAccount=new Ext.UI.TextField({width:280,renderTo:this.tfAccountId,enableKeyEvents:true,listeners:{specialkey:this.onSpecialKeyPress,scope:this}});this.tfPassword=new Ext.UI.TextField({width:280,inputType:"password",renderTo:this.tfPasswordId,enableKeyEvents:true,listeners:{specialkey:this.onSpecialKeyPress,scope:this}});this.indicator=new Ext.BoxComponent({cls:"x-cloud-progress-bg",style:"float: left",renderTo:this.buttonsId});this.bCancel=
new Ext.UI.Button({text:_TR("CANCEL"),width:125,disabled:false,scope:this,handler:function(){this.hide()},style:"float: right;margin-left: 10px;",renderTo:this.buttonsId});this.bApply=new Ext.UI.Button({text:_TR("REPLICATE_REGISTER_BUTTON"),acceptbtn:true,width:125,disabled:false,btnState:"unreg",style:"float: right;margin-left: 10px;",renderTo:this.buttonsId});this.bApply.on("click",this.onApplyClick,this)},onWShow:function(){this.center();Ext.fly(this.lAccountId).removeClass("x-cloud-error");Ext.fly(this.lPasswordId).removeClass("x-cloud-error");
this.tfAccount.setValue("");this.tfPassword.setValue("");for(var a=this.spServManager.getSystemServices(),b=0;b<a.length;++b){var c=_a(a[b],"_i32");if(c.getName()=="replicate"){this.replicate=c;this.tfAccount.setValue(c.getReplicateOwner());this.tfPassword.setValue(c.getReplicatePassword());if(c.getReplicateOwner()!==""){Ext.getDom(this.unRegContent).style.display="none";Ext.getDom(this.regContent).style.display="block";Ext.getDom(this.regName).innerHTML=String.format(_TR("REPLICATE_REGISTERED_USER_LABEL"),
c.getReplicateOwner());this.bApply.setText(_TR("REPLICATE_UNREGISTER_BUTTON"));this.bApply.btnState="reg"}else{Ext.getDom(this.unRegContent).style.display="block";Ext.getDom(this.regContent).style.display="none";this.bApply.setText(_TR("REPLICATE_REGISTER_BUTTON"));this.bApply.btnState="unreg";this.tfAccount.focus(false,true)}}}},onSpecialKeyPress:function(a,b){if(b.getKey()==b.ENTER){this.onApplyClick();return false}return true},onApplyClick:function(){var a,b=this.bApply.btnState=="unreg";Ext.fly(this.lAccountId).removeClass("x-cloud-error");
Ext.fly(this.lPasswordId).removeClass("x-cloud-error");if(b){if(!this.tfAccount.getValue().trim()){a=true;Ext.fly(this.lAccountId).addClass("x-cloud-error");this.tfAccount.focus(false,true)}if(!this.tfPassword.getValue().trim()){a||this.tfPassword.focus(false,true);a=true;Ext.fly(this.lPasswordId).addClass("x-cloud-error")}}if(!a){if(this.spP2PManager.getP2PStatus()==_4||this.spP2PManager.getP2PStatus()=="0")this.spP2PManager.startP2P("cloud-services-remote-toggle");a=this.spServManager.getSystemServices();
for(var c=0;c<a.length;++c){var d=_a(a[c],"_i32");if(d.getName()=="replicate"){this.replicate=d;break}}this.replicate.putReplicateOwner(b?this.tfAccount.getValue():"");this.replicate.putReplicatePassword(b?this.tfPassword.getValue():"");this.spServManager.commitSystemService("cloud-services-replicatewnd-commit-owner")}},showProgressIndicator:function(){this.indicator&&this.indicator.addClass("x-frontview-icon-progress")},hideProgressIndicator:function(){this.indicator&&this.indicator.removeClass("x-frontview-icon-progress")},
_i35:{_o1:function(a,b){if(["cloud-services-replicatewnd-commit","cloud-services-replicatewnd-commit-owner"].indexOf(b)!=-1){this.disableControls(true);this.showProgressIndicator()}return _5},_o3:function(a,b,c){if(c=="cloud-services-replicatewnd-commit-owner"){if(a==_5){this.replicate.putEnable(this.bApply.btnState=="unreg");this.spServManager.commitSystemService("cloud-services-replicatewnd-commit")}}else if(c=="cloud-services-replicatewnd-commit")if(a==_5){this.disableControls(false);
this.hideProgressIndicator();this.hide()}if(["cloud-services-replicatewnd-commit","cloud-services-replicatewnd-commit-owner"].indexOf(c)!=-1)if(a!=_5){this.disableControls(false);this.hideProgressIndicator();if(c=="cloud-services-replicatewnd-commit-owner"){a=_a(b,"_io").getLastNMLError();if(this.replicate&&a&&a.getErrorCode()=="15002020002"){this.replicate.putReplicateOwner("");this.replicate.putReplicatePassword("")}a&&Ext.UI.MessageBox.error({title:_TR("REPLICATE"),width:400,msg:_TR("REPLICATE_ACC_ERROR")})}}return _5}}});
_._2("_s7");
_s7.AmazonOptionsWindow=_._1(_9,Ext.UI.Window,_ih,_i3b,{help:"cloud_wnd_amazon_options",folderFilter:"AmazonCloudDrive",modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",constructor:function(){_.apply(this,{modal:true,height:420,width:850,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",title:_TR("AMAZON_OPTIONS"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,
scope:this}});_s7.AmazonOptionsWindow.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this)}this.addEvents("apply","cancel");this.rendered=false;this.syncOnShareObj=0},getHtml:function(){return""},getFooter:function(){return[this.bCopy=
new Ext.UI.Button({text:_TR("CLOUD_DRIVE_SELECT_ALL"),width:125,disabled:false,handler:function(){this.onCopyToClick()},scope:this}),"->",this.bApply=new Ext.UI.Button({text:_TR("CLOUD_DRIVE_SYNC_BUTTON"),acceptbtn:true,width:125,disabled:false,handler:function(){this.onApplyClick()},scope:this}),this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),bCancel:true,width:125,disabled:false,handler:function(){this.onCancelClick()},scope:this})]},reset:function(){this.syncOnShareObj=0;this.changed=false;
this.logBlock.reset();this.optBlock.reset();this.bCopy.hide();this.sidebar.selectedtab.component.id==this.logBlock.id?this.bApply.hide():this.bApply.show();this.spShareManager.updateShares("amazon-update-shares");this.spBKManager.updateAmazonShareList("amazon_update_sharelist")},hideAndApply:function(){this.logBlock.stopTimer();var a=[],b=[];this.optBlock.getValue(function(c,d,e){a.push(c);c=this.findNativeShare(c);if(e&&e!=="custom"){e==="never"?c.putEnableProtection(false):c.putEnableProtection(true);
c.putSnapshotScheduleInterval(e);c.putCustomSnapshotManagement(false);b.push(c)}}.bind(this));if(a.length==0)Ext.UI.MessageBox.show({title:_TR("CLOUD_AMAZON_NOFOLDER_SELECTED_TITLE"),msg:_TR("CLOUD_AMAZON_NOFOLDER_SELECTED_MESSAGE"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400});else{this.hide();this.fireEvent("apply",this,{shares:a,nshares:b})}},loadShares:function(){if(this.simpleShares!==_4)for(var a=0;a<this.simpleShares.length;++a){var b=false,c=_a(this.simpleShares[a],
"IAmazonShare");if(c.getSelectedShare()==="1")b=true;var d=this.findNativeShare(c.getAmazonShareId());this.optBlock.addShare({id:c.getAmazonShareId(),name:c.getAmazonShareName(),isChecked:b,isDisabled:false,schedule:d.getSnapshotScheduleInterval(),isSchedule:d.getEnableProtection(),isCustomSchedule:d.getCustomSnapshotManagement()})}},findNativeShare:function(a){if(this.shares!==_4)for(var b=0;b<this.shares.length;++b){var c=_a(this.shares[b],"_i38");if(c.getId()===a)return c}return null},
onAfterRender:function(){_s7.AmazonOptionsWindow.superclass.afterRender.apply(this,arguments);this.sidebar=new Ext.UI.SideBar;this.sidebar.render(this.body);this.sidebar.on("select",function(a){if(a.selectedtab.component.id==this.logBlock.id){this.logBlock.isLogEmpty?this.bCopy.hide():this.bCopy.show();this.bApply.hide();this.logBlock.scrollLastIntoView()}else{this.bCopy.hide();this.bApply.show()}},this);this.optBlock=new _s7.CloudOptionBlock(this);this.optBlock.on("change",
this.onOptChange,this);this.logBlock=new _s7.CloudLogsBlock(this);this.logBlock.on("change",this.onLogChange,this);this.sidebar.addTab(_TR("OPTIONS"),this.optBlock);this.sidebar.addTab(_TR("LOGS"),this.logBlock);this.rendered=true},show:function(a,b,c){_s7.AmazonOptionsWindow.superclass.show.apply(this,arguments);this.center();this.reset(c)},onApplyClick:function(){this.hideAndApply()},onCancelClick:function(){this.logBlock.stopTimer();this.hide();this.fireEvent("cancel",this,
{})},onCopyToClick:function(){this.logBlock.copyTo()},onSpecialKeyPress:function(a,b){if(b.getKey()==b.ENTER){this.onApplyClick();return false}return true},onOptChange:function(){this.changed=true},onLogChange:function(a){if(this.sidebar.selectedtab.component.id==a.id)a.isLogEmpty?this.bCopy.hide():this.bCopy.show()},_ih:{_o1:function(a,b){switch(b){case "amazon_update_sharelist":this.syncOnShareObj===0&&this.optBlock.showProgress();this.syncOnShareObj++;break;default:break}return _5},
_o2:function(a,b){switch(b){case "amazon_update_sharelist":this.simpleShares=this.spBKManager.getAmazonShareList();this.syncOnShareObj--;this.syncOnShareObj===0&&this.loadShares();break;default:break}return _5},_o3:function(a,b,c){switch(c){case "amazon_update_sharelist":if(a!=_5){this.syncOnShareObj--;this.syncOnShareObj===0&&this.optBlock.hideProgress();a=_TR("CLOUD_AMAZON_TITLE");if(b=_a(b,"_io").getLastNMLError()){b=b.getErrorCode();Ext.UI.MessageBox.warning({title:a,width:400,
msg:_TR(b)})}}default:break}return _5}},_i3b:{_o1:function(a,b){if(b=="amazon-update-shares"){this.syncOnShareObj===0&&this.optBlock.showProgress();this.syncOnShareObj++}return _5},_o2:function(a,b){if(this.rendered){if(b=="amazon-update-shares"){this.shares=this.spShareManager.getShares();this.syncOnShareObj--;this.syncOnShareObj===0&&this.loadShares()}return _5}},_o3:function(a,b,c){if(c=="amazon-update-shares")if(a!=_5){this.syncOnShareObj--;this.syncOnShareObj===
0&&this.optBlock.hideProgress()}return _5}}});Ext.namespace("_s7.Storage");
_s7.Storage.Panel=_._1(_9,Ext.Component,{url:"",title:"",tip:"",iconCls:"",isBeta:false,marginRight:false,singleConnection:false,authUrl:false,constructor:function(a){a=a||{};var b=new Ext.Template('<div class="x-{cls}-panel"><div style="position: relative" id="{iconId}" class="x-cloud-service-icon x-cloud-service-dis {iconCls}"><div id="{statusId}" class="x-cloud-storage-status"></div></div><div class="x-cloud-service-cnt"><a href="{url}" target="_blank" class="x-cloud-link">{title}</a>'+(this.isBeta?
"<sup> Beta</sup>":"")+'</tpl><div id="{uId}"></div><div class="x-cloud-services-remote-tip">{tip}</div><div id="{btnId}" style="height: 40px;"></div></div></div>',{compiled:true,disableFormats:true});this.cntrlsIds={iid:Ext.id(),btnId:Ext.id(),sid:Ext.id(),uid:Ext.id()};this.html='<div style="'+(a.marginRight?"margin-right: 20px;":"")+'float: left; min-height:210px;">'+b.apply({cls:"cloud-storage",url:this.url,title:this.title,tip:this.tip,iconCls:this.iconCls,btnId:this.cntrlsIds.btnId,statusId:this.cntrlsIds.sid,
uId:this.cntrlsIds.uid,iconId:this.cntrlsIds.iid})+"</div>";_s7.Storage.Panel.superclass.constructor.apply(this,arguments);this.spServManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemServiceManager();_a(this.spServManager,"_i1").Advise(this)},getCloudService:function(a){for(var b=this.spServManager.getSystemServices(),c=0;c<b.length;++c){var d=_a(b[c],"_i32");if(d.getName()==a)return d}return null},afterRender:function(){_s7.Storage.Panel.superclass.afterRender.apply(this,
arguments);this.cntrls={};this.cntrls.onOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.cntrlsIds.btnId,listeners:{beforeclick:this.onOnOffClick,scope:this}});this.cntrls.leave=new Ext.UI.Button({text:_TR("LEAVE_RC"),hidden:true,cls:"x-cloud-settingsbtn",renderTo:this.cntrlsIds.btnId,scope:this,handler:this.onLeaveClick});this.cntrls.setts=new Ext.UI.Button({text:_TR("SETTINGS"),hidden:true,cls:"x-cloud-settingsbtn",renderTo:this.cntrlsIds.btnId,
scope:this,handler:this.onSettsClick});this.cntrls.icon=Ext.get(this.cntrlsIds.iid);this.cntrls.user=Ext.get(this.cntrlsIds.uid)},refresh:function(){this.spCSManager.updateConnectionStatus(this.lpPrefix+"_update_connection_status")},onOnOffClick:function(a){var b=this.conStatus,c="",d="";switch(this.lpPrefix){case "amazondrive":c=this.getCloudService("amazon-drive");d="Amazon Drive";break;case "amazons3":c=this.getCloudService("amazon-s3");d="Amazon S3";break;case "wasabi":c=this.getCloudService("wasabi-s3");
d="Wasabi";break;case "azure":c=this.getCloudService("azure-ssb");d="Microsoft Azure";break;case "googledrive":c=this.getCloudService("google-drive");d="Google Drive";break;case "onedrive":c=this.getCloudService("one-drive");d="Microsoft OneDrive";break;case "dropbox":c=this.getCloudService("dropbox");d="Dropbox";break}_s0.GA.trackEvent({eventCategory:"Cloud",eventAction:"click",eventLabel:d});b=b.getJoined();d=c.getEnable();if(a.isOff())if(b=="0"&&!d){this.wndOptions.show(true);this.wndOptions.hide();
this.connections&&this.connections[0]?this.spCSManager.deleteConnections(this.lpPrefix+"_delete_conns_before_create"):this.wndOptions.showCreateWindow()}else{if(b=="1"&&!d){c.putEnable(true);this.spServManager.commitSystemService(this.lpPrefix+"_services_commit")}}else{c.putEnable(!d);this.spServManager.commitSystemService(this.lpPrefix+"_services_commit")}return false},onSettsClick:function(){if(this.singleConnection){this.wndOptions.show();this.wndOptions.hide();this.wndOptions.showEditWindow(_a(this.connections[0],
"ICloudStorageConnection"))}else this.wndOptions.show()},onLeaveClick:function(){Ext.UI.MessageBox.confirm({title:this.title,icon:Ext.MessageBox.WARNING,msg:this.msgConfirmDisable,width:400,fn:function(a){a=="yes"&&this.spCSManager.deleteConnections(this.lpPrefix+"_delete_connections")},scope:this})},bytesToSize:function(a){if(a===0)return"0 B";var b=Math.floor(Math.log(a)/Math.log(1024));a=(a/Math.pow(1024,b)).toFixed(1);a=~a.indexOf(".0")?+a.replace(".0",""):a;return a+" "+["B","KB","MB","GB","TB",
"PB","EB","ZB","YB"][b]},populateConnectionStatus:function(){var a=this.conStatus=_a(this.spCSManager.getConnectionStatus(),"ICloudStatus"),b="";switch(this.lpPrefix){case "amazondrive":b=this.getCloudService("amazon-drive");this.AmazonMigrationConflict=null;break;case "amazons3":b=this.getCloudService("amazon-s3");break;case "wasabi":b=this.getCloudService("wasabi-s3");break;case "azure":b=this.getCloudService("azure-ssb");break;case "googledrive":b=this.getCloudService("google-drive");break;
case "onedrive":b=this.getCloudService("one-drive");break;case "dropbox":b=this.getCloudService("dropbox");break}this.cntrls.onOff.setValue(!b.getEnable());this.cntrls.icon.addClass("x-cloud-service-dis");this.cntrls.user.setDisplayed(false);this.cntrls.setts.setVisible(false);this.cntrls.leave.setVisible(false);var c=Ext.get(this.cntrlsIds.sid),d="gray",e=_TR("CLOUD_STATUS_DISABLED");if(b.getEnable()){this.cntrls.icon.removeClass("x-cloud-service-dis");this.cntrls.user.setDisplayed(true);b="<span>"+
_TR("CLOUD_SIGNED_AS")+"&nbsp;";var f='<span style="color: rgb(128, 128, 128);">'+a.getUser_Name()+"</span><br />",g="";g="";g=+a.getUsed();var h=+a.getCapacity();d="#4d4d4d";var i="0 %";if(h!=0){i=parseInt(g/h*100);d=i<80?"#4d4d4d":i>95?"red":"#F0D805";i+="% &#10;"+this.bytesToSize(g)+" of "+ +h/1073741824+" GB"}g="<span title='"+i+"' style='color:"+d+"'>"+this.bytesToSize(g)+" of "+this.bytesToSize(h)+" "+_TR("USED")+"</span>";switch(this.lpPrefix){case "amazons3":case "wasabi":case "azure":g="";
break}g=a.getUser_Name()?b+f+g:g;this.cntrls.user.update(g);this.cntrls.setts.setVisible(true);this.cntrls.leave.setVisible(true);switch(a.getStatus().toLowerCase()){case "disabled":d="gray";e=_TR("CLOUD_STATUS_DISABLED");break;case "enabled":d="#47DA02";e=_TR("CLOUD_STATUS_ENABLED");break;case "syncing":d="blue";e=_TR("CLOUD_STATUS_SYNCING");break;case "failed":d="red";e="";switch(a.getFail_Code()){case "1":e=_TR("CLOUD_STATUS_FAILED_1");break;case "2":e=_TR("CLOUD_STATUS_FAILED_2");break;case "3":e=
_TR("CLOUD_STATUS_FAILED_3");break;case "4":e=_TR("CLOUD_STATUS_FAILED_4");break}e=e;this.cntrls.user.update("");break}c.dom.style.backgroundColor=d;c.dom.setAttribute("title",e)}else{this.cntrls.onOff.setValue(true);c.dom.style.backgroundColor=d;c.dom.title=e;if(this.authUrl&&(!(f=this.spCSManager.getAuthURL())||f==_4))this.spCSManager.updateAuthURL(this.lpPrefix+"_update_auth_url");if(this.lpPrefix=="amazondrive"&&a.getStatus()=="Failed"&&a.getFail_Code()=="4"&&a.getFail_Info()=="MIGRATION_CONFLICT")this.AmazonMigrationConflict=
true}this.spCSManager.updateConnections(this.lpPrefix+"_update_connections")},onFixACDMigrationConflict:function(a,b){this.acdSessionArrID=[];if(a){a=0;for(var c=b.length;a<c;++a)b[a].Remote_Path!="/"&&this.acdSessionArrID.push(b[a].Id)}else{a=0;for(c=b.length;a<c;++a)if(b[a].Remote_Path=="/")this.acdSessionArrID.push(b[a].Id);else b[a].ckbval||this.acdSessionArrID.push(b[a].Id)}this.acdSessionArrID.length>0&&this.spCSManager.deleteACDSession("amazondrive_delete_session",this.acdSessionArrID.shift());
delete objArr;this.ACDConflictWnd.un("FixACDMigrationConflict")},onFixACDMigrationConflictHide:function(){this.ACDConflictWnd.un("hide",this.onFixACDMigrationConflictHide,this);this.ACDConflictWnd.un("FixACDMigrationConflict",this.onFixACDMigrationConflict,this)},populateConnections:function(a){if(this.AmazonMigrationConflict){a=this.spCSManager.getAmazonSessions();if(!this.ACDConflictWnd)this.ACDConflictWnd=new _s7.Storage.FixConflict;this.ACDConflictWnd.on("hide",this.onFixACDMigrationConflictHide,
this);this.ACDConflictWnd.on("FixACDMigrationConflict",this.onFixACDMigrationConflict,this);this.ACDConflictWnd.show();this.ACDConflictWnd.loadArgs(a)}else{var b=false;(this.connections=a)&&this.connections[0]&&_.each(this.connections,function(d){if((d=_a(d,"ICloudStorageConnection"))&&d!=_4)if((d=d.getSessions())&&d[0]){b=true;return false}});if(b){this.cntrls.setts.setVisible(true);this.cntrls.icon.removeClass("x-cloud-service-dis")}else{var c;this.cntrls.setts.setVisible(false);this.cntrls.icon.hasClass("x-cloud-service-dis")||
this.cntrls.icon.addClass("x-cloud-service-dis");if(this.authUrl&&(!(c=this.spCSManager.getAuthURL())||c==_4))this.spCSManager.updateAuthURL(this.lpPrefix+"_update_auth_url")}}},_i35:{_o1:function(a,b){b==this.lpPrefix+"_services_commit"&&this.showProgress()},_o2:function(a,b){b==this.lpPrefix+"_services_commit"&&setTimeout(function(){this.hideProgress();this.refresh()}.bind(this),2E3);return _5},_o3:function(a,b,c){if(c==this.lpPrefix+"_update_protocol"){this.hideProgress();
this.refresh()}return _5}},ICloudStorageManagerEvents:{_o1:function(a,b){switch(b){case this.lpPrefix+"_update_connections":case this.lpPrefix+"_delete_connections":case this.lpPrefix+"_delete_conns_before_create":case this.lpPrefix+"_add_connection":case this.lpPrefix+"_edit_connection":case this.lpPrefix+"_options_add_session":case this.lpPrefix+"_options_add_session_just_created":case this.lpPrefix+"_options_edit_session":case this.lpPrefix+"_options_delete_session":case this.lpPrefix+
"_update_connection_status":case "amazondrive_delete_session":this.showProgress();break}},_o2:function(a,b){switch(b){case this.lpPrefix+"_update_connections":case this.lpPrefix+"_add_update_connections":case this.lpPrefix+"_auth_update_connections":this.populateConnections(this.spCSManager.getConnections());break;case this.lpPrefix+"_options_update_connections":case this.lpPrefix+"_delete_connections":this.spServManager.updateSystemServiceInfo(this.lpPrefix+"_update_protocol");break;case this.lpPrefix+
"_update_connection_status":this.populateConnectionStatus();break;case this.lpPrefix+"_delete_conns_before_create":this.wndOptions.showCreateWindow();break;case "amazondrive_delete_session":this.acdSessionArrID.length==0?this.refresh():this.spCSManager.deleteACDSession("amazondrive_delete_session",this.acdSessionArrID.shift());break}},_o3:function(a,b,c){switch(c){case this.lpPrefix+"_update_connections":case this.lpPrefix+"_delete_conns_before_create":a!=_5&&_s7.Storage.showError(this.title,
_a(b,"_io").getLastNMLError());case this.lpPrefix+"_add_connection":case this.lpPrefix+"_edit_connection":case this.lpPrefix+"_options_add_session":case this.lpPrefix+"_options_add_session_just_created":case this.lpPrefix+"_options_edit_session":case this.lpPrefix+"_options_delete_session":case this.lpPrefix+"_update_connection_status":case "amazondrive_delete_session":this.hideProgress();break}}}});_._2("_s7.Storage");
_s7.Storage.OptionsWindow=_._1(_9,Ext.UI.Window,{modal:true,width:740,height:400,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",constructor:function(){this.fbar=["->",this.bCancel=new Ext.UI.Button({text:_TR("CLOSE"),bCancel:true,width:125,disabled:false,handler:this.onCloseClick,scope:this})];_s7.Storage.OptionsWindow.superclass.constructor.apply(this,arguments)},afterRender:function(){_s7.Storage.OptionsWindow.superclass.afterRender.apply(this,
arguments);this.spinner=new Ext.UI.LoadMask(this.el,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0});this.boxConnections=new (this.ClsConnectionsBlock||_s7.Storage.Connections)({title:this.title,spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,authUrl:this.authUrl,renderTo:this.body,showProgress:this.showProgress.bind(this),hideProgress:this.hideProgress.bind(this)})},show:function(a){_s7.Storage.OptionsWindow.superclass.show.apply(this,
arguments);this.center();a||this.boxConnections.refresh()},showCreateWindow:function(){this.boxConnections.onAddClick()},showEditWindow:function(a,b){this.boxConnections.onEditClick(a,b)},onCloseClick:function(){this.hide()},onSpecialKeyPress:function(a,b){if(b.getKey()==b.ENTER){this.onCloseClick();return false}return true},hideProgress:function(){this.spinner.hide()},showProgress:function(){this.spinner.show()}});Ext.namespace("_s7.Storage");
_s7.Storage.Connections=_._1(_9,Ext.Container,{style:"display: table; height: 100%; width: 100%; position: relative;",singleConnection:false,authUrl:false,fields:{name:false,akey:false,skey:false,bucket:false,partSize:false,storageClass:false,uploadSpeed:true,downloadSpeed:true,polling:true,encryption:false},constructor:function(){this.html=this.getHtml();_s7.Storage.Connections.superclass.constructor.apply(this,arguments);_a(this.spCSManager,"_i1").Advise(this);
var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a)this.spLCManager=a.getSystemManager().getLocaleManager();this.wndConnCreate=new _s7.Storage.Connection.Create({title:this.title,fields:this.fields,lpPrefix:this.lpPrefix,spCSManager:this.spCSManager,listeners:{create:this.onCreate,scope:this}});this.wndConnEdit=new _s7.Storage.Connection.Edit({title:this.title,fields:this.fields,lpPrefix:this.lpPrefix,spCSManager:this.spCSManager,listeners:{logclick:this.onShowLog,
scope:this}});this.wndLogs=new _s7.Storage.LogsWindow({title:this.title,lpPrefix:this.lpPrefix,spCSManager:this.spCSManager});this.logRequests=0},afterRender:function(){_s7.Storage.Connections.superclass.afterRender.apply(this,arguments);var a=this.bAdd=new Ext.UI.RoundButton({cls:"x-cloud-add-btn",width:26,height:26});a.render(this.btAddId);a.on("click",this.onAddClick,this)},refresh:function(){this.spCSManager.updateConnections(this.lpPrefix+"_options_update_connections")},
initNewConnection:function(){var a=this.spCSManager.createConnection();this.singleConnection&&a.putName(this.singleConnection);return a},startAuthWndPolling:function(){var a=this;clearInterval(a.pollAuthWndProcId);this.pollAuthWndProcId=setInterval(function(){if(a.winRef.closed){_.isSafari&&localStorage.removeItem("fromSafariToGetToken");window.csrfpId=localStorage.getItem("csrfpId");clearInterval(a.pollAuthWndProcId);a.spCSManager.updateConnections(a.lpPrefix+"_auth_update_connections")}},1E3)},
startNewConnPolling:function(){var a=this;clearInterval(a.pollNewConnProcId);setTimeout(function(){clearInterval(a.pollNewConnProcId);a.spCSManager.updateConnections(a.lpPrefix+"_auth_update_connections")},3E5);a.pollNewConnProcId=setInterval(function(){a.spCSManager.updateConnections(a.lpPrefix+"_auth_update_connections")},3E3)},onAddClick:function(){var a=this,b=this.spLCManager.getLocale();if(b=="auto")b=this.spLCManager.getAutoLocale();if(this.authUrl){var c=window.location.protocol+"//"+window.location.host+
this.authUrl,d=this.spCSManager.getAuthURL(),e=window.csrfId;this.winRef=_s7.openWindowCentered(c,"_blank",600,1050);var f="location="+c+"&locale_code="+b+"&version=2&csrfpId="+e,g=typeof _=="undefined"?_.OAuth2EnDeCryption:_.OAuth2EnDeCryption;localStorage.removeItem("csrfpId");setTimeout(function(){this.winRef.location=d.replace(/(state=)[^&]*/gi,"$1"+g(f,"cloudstoragesync","ENCODE"));if(_.isSafari)localStorage.fromSafariToGetToken=1;_.isEdge||_.isIE11?a.startNewConnPolling():
a.startAuthWndPolling()}.bind(this),100)}else this.wndConnCreate.show(this.initNewConnection())},onEditClick:function(a,b){this.wndConnEdit.show(a,b)},onShowLog:function(a,b){this.wndLogs.show(b)},onCreate:function(a,b){this.onEditClick(b,true)},onDelete:function(a,b){Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:_TR("CLOUD_STORAGE_CONFIRM_DELETION_CONNECTION"),fn:function(c){c=="yes"&&this.spCSManager.deleteConnection(this.lpPrefix+"_options_remove_connection",b)},scope:this})},populate:function(a){var b=
Ext.get(this.contentId);this.cleanKeysTable(b);var c;if(a.length){for(var d=0;d<a.length;++d){var e=c=_a(a[d],"ICloudStorageConnection"),f={btId1:null,btId2:null,btId3:null};b.insertHtml("afterbegin",this.getTableRow(d,e,f));var g=new Ext.UI.RoundButton({cls:"x-cloud-edit-btn",width:26,height:26});g.render(f.btId1);g.on("click",function(){this.onEditClick(e)},this);g=new Ext.UI.RoundButton({cls:"x-frontview-icon-logs",width:26,height:26});g.render(f.btId2);g.on("click",function(h){this.onShowLog(h,
e)},this);g=new Ext.UI.RoundButton({cls:"x-cloud-delete-btn",width:26,height:26});g.render(f.btId3);g.on("click",function(h){this.onDelete(h,e)},this)}ScrollManager.reg(b.dom,ScrollManager.VERTICAL)}else b.insertHtml("afterbegin",this.getEmptyTableRow(_TR("CLOUD_AMAZONS3_NO_CONNECTIONS_AVAILABLE")));this.singleConnection&&a.length?this.bAdd.hide():this.bAdd.show();return c},getHtml:function(){return'<div style="position: relative; display: table-row; height: 100%; width: 100%;"><div style="position: relative; display: table-cell;"><div style="display: table; height: 100%; width: 100%; position: relative; ">'+
this.getTableHeader()+'<div style="position: relative; display: table-row; height: 100%; width: 100%; overflow-y: hidden;"><div style="position: relative; height: 100%; max-height: 100%; width: 100%; display: table-cell;"><div id="'+(this.contentId=Ext.id())+'" style="position: relative; height: 100%; max-height: 179px; width: 100%; display: block;"></div></div></div></div></div></div>'},getTableHeader:function(){return'<table style="position: relative; height: auto; width: 100%;" class=" ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td style="width: 100%;"><div class="x-ellipsis">'+
_TR("CLOUD_AMAZONS3_CONNECTION")+'</div></td><td style="min-width: 32px; max-width: 32px;"></td><td style="min-width: 32px; max-width: 32px;"></td><td style="min-width: 32px; max-width: 32px;"><div id="'+(this.btAddId=Ext.id())+'" title="'+_TR("CLOUD_STORAGE_ADD_CONNECTION")+'"></div></td></tr></table>'},getTableRow:function(a,b,c){return'<div style="position: relative; max-height: 100%; width: 100%; display: block;"><table style="position: relative; width: 100%;" class="x-sh-inspector-table ui-fwgrid-row'+
(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td style="width: 100%;">'+this.getTableRowData(b)+'</td><td style="min-width: 32px; max-width: 32px; text-align: left; vertical-align: bottom;"><div id="'+(c.btId1=Ext.id())+'" title="'+_TR("EDIT")+'" style="height: 32px;"></div></td><td style="min-width: 32px; max-width: 32px; text-align: left; vertical-align: bottom;"><div id="'+(c.btId2=Ext.id())+'" title="'+_TR("HISTORY")+'" style="height: 32px;"></div></td><td style="min-width: 32px; max-width: 32px; text-align: left; vertical-align: bottom;"><div id="'+
(c.btId3=Ext.id())+'" title="'+_TR("DELETE")+'" style="height: 32px;"></div></td></tr></table></div>'},getTableRowData:function(a){return'<div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;" >'+_TR("TITLE")+'</div><div class="x-ellipsis" style="height: 32px; line-height: 20px;" title="'+a.getName()+'">'+a.getName()+"</div>"},getEmptyTableRow:function(a){return'<div style="position: relative; display: table; height: 100%; width: 100%; "><div style="position: relative; display: table-row; height: 100%; width: 100%; "><div style="position: relative; display: table-cell; height: 100%; width: 100%; vertical-align: middle; text-align: center; ">'+
a+"</div></div></div>"},cleanKeysTable:function(a){a=a.dom;for(var b=a.firstChild;b;){var c=b.nextSibling;a.removeChild(b);b=c}},ICloudStorageManagerEvents:{_o1:function(a,b){if(b===this.lpPrefix+"_options_update_connections"||b===this.lpPrefix+"_add_update_connections"||b===this.lpPrefix+"_auth_update_connections"||b===this.lpPrefix+"_options_remove_connection"||b===this.lpPrefix+"_options_add_session"||b===this.lpPrefix+"_options_add_session_just_created"||b===this.lpPrefix+"_options_edit_session"||
b===this.lpPrefix+"_options_delete_session")this.showProgress()},_o2:function(a,b){if(b===this.lpPrefix+"_options_update_connections"||b==this.lpPrefix+"_add_update_connections"||b==this.lpPrefix+"_auth_update_connections"){if((a=this.populate(this.spCSManager.getConnections()))&&b==this.lpPrefix+"_auth_update_connections"){clearInterval(this.pollNewConnProcId);this.wndConnEdit.show(a,true)}}else if(b===this.lpPrefix+"_options_delete_session"||b===this.lpPrefix+"_edit_connection"||b===this.lpPrefix+
"_options_edit_session"||b===this.lpPrefix+"_options_add_session"||b===this.lpPrefix+"_options_add_session_just_created")this.refresh()},_o3:function(a,b,c){if(c===this.lpPrefix+"_options_update_connections"||c===this.lpPrefix+"_add_update_connections"||c===this.lpPrefix+"_auth_update_connections"||c===this.lpPrefix+"_options_remove_connection"||c===this.lpPrefix+"_options_add_session"||c===this.lpPrefix+"_options_add_session_just_created"||c===this.lpPrefix+"_options_edit_session"||c===this.lpPrefix+
"_options_delete_session"){this.hideProgress();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}c===this.lpPrefix+"_options_remove_connection"&&this.spCSManager.updateConnections(this.lpPrefix+"_options_update_connections")}}});_._2("_s7.Storage.Connection");
_s7.Storage.Connection.Create=_._1(_9,Ext.UI.Window,{index:1,modal:true,width:600,height:390,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",constructor:function(){_.apply(this,{fbar:this.getFooter()});_s7.Storage.Connection.Create.superclass.constructor.apply(this,arguments);this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.pages=[];this.connection=null;this.firstPage=1;this.lastPage=2;_a(this.spCSManager,
"_i1").Advise(this)},getFooter:function(){return[this.bBack=new Ext.UI.Button({text:_TR("BACK"),width:125,hidden:true,disabled:false,handler:function(){this.onBackClick()},scope:this}),"->",this.bApply=new Ext.UI.Button({text:_TR("NEXT"),acceptbtn:true,width:125,disabled:false,handler:function(){this.onNextClick()},scope:this}),this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),bCancel:true,width:125,disabled:false,handler:function(){this.onCancelClick()},scope:this})]},afterRender:function(){_s7.Storage.Connection.Create.superclass.afterRender.apply(this,
arguments);this.spinner=new Ext.UI.LoadMask(this.bwrap,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0});var a={title:this.title,lpPrefix:this.lpPrefix,spCSManager:this.spCSManager,fields:this.fields};this.isS3=false;switch(this.lpPrefix){case "azure":this.pages[1]=new _s7.Storage.Connection.AzureFirstPage(a);this.pages[2]=new _s7.Storage.Connection.AzureOptions(a);break;case "amazons3":this.isS3=true;this.pages[1]=new _s7.Storage.Connection.FirstPage(a);
this.pages[2]=new _s7.Storage.Connection.Options(a);break;case "wasabi":this.pages[1]=new _s7.Storage.Connection.WasabiFirstPage(a);this.pages[2]=new _s7.Storage.Connection.WasabiOptions(a);break}this.pages[1].render(this.body);this.pages[1].showProgress=this.showProgress.bind(this);this.pages[1].hideProgress=this.hideProgress.bind(this);this.pages[1].hide();this.pages[2].render(this.body);this.pages[2].showProgress=this.showProgress.bind(this);this.pages[2].hideProgress=
this.hideProgress.bind(this);this.pages[2].hide()},reset:function(){this.bBack.hide();this.bApply.setText(_TR("NEXT"));this.index=1;this.updatesCount=0;this.connection=null;for(var a=1;a<=this.lastPage;++a)if(this.pages[a]&&this.pages[a].doReset){this.pages[a].doReset();this.pages[a].hide()}},next:function(){if(this.index<this.lastPage&&this.pages[this.index].doValidate()){this.pages[this.index].doApply();this.pages[this.index].hide();this.pages[++this.index].show();this.pages[this.index].initAllPHEvent()}else if(this.index===
this.lastPage&&this.pages[this.index].doValidate()){this.pages[this.index].doApply();this.spCSManager.addConnection(this.lpPrefix+"_add_connection",this.connection)}this.index>this.firstPage&&this.bBack.show();this.index===this.lastPage&&this.bApply.setText(_TR("CREATE"))},back:function(){if(this.index>this.firstPage&&this.pages[this.index].doValidate()){this.pages[this.index].hide();this.pages[--this.index].show()}this.index<=this.firstPage&&this.bBack.hide();this.index<this.lastPage&&this.bApply.setText(_TR("NEXT"))},
show:function(a){this.updatesCount=0;this.connection=a;if(this.fields.akey||this.fields.skey||this.fields.bucket)this.index=this.firstPage=1;else this.index=this.firstPage=2;_s7.Storage.Connection.Create.superclass.show.apply(this);this.index===this.lastPage&&this.bApply.setText(_TR("CREATE"));this.center()},onShown:function(){for(var a=1;a<=this.lastPage;++a)this.pages[a]&&this.pages[a].init&&this.pages[a].init(this.connection);this.pages[this.index].show()},onHidden:function(){this.reset()},
onNextClick:function(){this.next()},onCancelClick:function(){this.hide()},onBackClick:function(){this.back()},onSpecialKeyPress:function(a,b){if(b.getKey()==b.ENTER){this.onNextClick();return false}return true},showProgress:function(){++this.updatesCount;this.spinner.show()},hideProgress:function(){if(--this.updatesCount<=0){this.spinner.hide();this.updatesCount=0}},ICloudStorageManagerEvents:{_o1:function(a,b){if(b===this.lpPrefix+"_add_connection"||b===this.lpPrefix+"_add_update_connections")this.showProgress()},
_o2:function(a,b){if(b===this.lpPrefix+"_add_connection")this.spCSManager.updateConnections(this.lpPrefix+"_add_update_connections");else if(b===this.lpPrefix+"_add_update_connections"){a=this.spCSManager.getConnections();var c;for(b=0;b<a.length;++b){c=_a(a[b],"ICloudStorageConnection");if(c.getName()===this.connection.getName()){this.connection.putId(c.getId());break}}this.hide();this.fireEvent("create",this,c)}},_o3:function(a,b,c){if(c===this.lpPrefix+"_add_connection"||c===this.lpPrefix+
"_add_update_connections"){this.hideProgress();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}}}});_._2("_s7.Storage.Connection");
_s7.Storage.Connection.Edit=_._1(_9,Ext.UI.Window,{modal:true,width:740,height:420,resizable:false,minimizable:false,maximizable:false,buttonAlign:"right",constructor:function(){this.fbar=[this.bApply=new Ext.UI.Button({text:_TR("APPLY"),acceptbtn:true,width:125,handler:this.onApplyClick,scope:this}),this.bClose=new Ext.UI.Button({text:_TR("CLOSE"),bCancel:true,width:125,handler:function(){this.hide()},scope:this})];_s7.Storage.Connection.Edit.superclass.constructor.apply(this,
arguments);_a(this.spCSManager,"_i1").Advise(this)},afterRender:function(){_s7.Storage.Connection.Edit.superclass.afterRender.apply(this,arguments);this.sidebar=new Ext.UI.SideBar({renderTo:this.body,listeners:{select:function(b,c){if(c&&c.component==this.blockOptions)this.needOptionsApply=true},scope:this}});this.blockSessions=new _s7.Storage.Connection.Sessions({lpPrefix:this.lpPrefix,spCSManager:this.spCSManager,title:this.title,fields:this.fields,listeners:{logclick:function(){this.fireEvent("logclick",
this,this.connection)},sessionwndapply:function(){this.bApply.enable();this.isJustCreated&&this.onApplyClick()},deletelast:function(){this.hide()},scope:this},width:500,height:300});this.sidebar.addTab(_TR("CLOUD_STORAGE_SESSIONS"),this.blockSessions);var a={lpPrefix:this.lpPrefix,spCSManager:this.spCSManager,fields:this.fields,width:500,height:300};this.blockOptions=~this.title.indexOf(_TR("CLOUD_AZURE_TITLE_EXT"))?new _s7.Storage.Connection.AzureOptions(a):new _s7.Storage.Connection.Options(a);
this.sidebar.addTab(_TR("OPTIONS"),this.blockOptions);this.spinner=new Ext.UI.LoadMask(this.bwrap,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0})},show:function(a,b){_s7.Storage.Connection.Edit.superclass.show.apply(this);this.updatesCount=0;this.isJustCreated=b;this.needOptionsApply=false;this.connection=a;this.blockSessions.doReset();this.blockOptions.doReset();this.blockSessions.init(this.connection,b);this.blockOptions.init(this.connection);this.sidebar.selectTab(0);
this.bApply.setDisabled(!a.getSessions().length);this.center()},onApplyClick:function(){if(this.isJustCreated)this.blockSessions.doApply(this.isJustCreated)||this.hide();else if(this.blockOptions.doValidate()){if(this.needOptionsApply){this.blockOptions.doApply();this.spCSManager.editConnection(this.lpPrefix+"_edit_connection",this.connection)}else this.hide();this.blockSessions.doApply()}},showProgress:function(){++this.updatesCount;this.spinner&&this.spinner.show()},hideProgress:function(){if(--this.updatesCount<=
0){this.spinner.hide();this.updatesCount=0}},ICloudStorageManagerEvents:{_o1:function(a,b){if(b===this.lpPrefix+"_edit_connection"||b===this.lpPrefix+"_options_add_session_just_created"||b===this.lpPrefix+"_options_delete_session")this.showProgress()},_o3:function(a,b,c){if(c===this.lpPrefix+"_edit_connection"||c===this.lpPrefix+"_options_add_session_just_created"||c===this.lpPrefix+"_options_delete_session"){this.hideProgress();this.hide();a!=_5&&_s7.Storage.showError(this.title,
_a(b,"_io").getLastNMLError())}}}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.BasePage=_._1(_9,Ext.Container,{style:"display: table; height: 100%; width: 100%; position: relative;",constructor:function(){_s7.Storage.Connection.BasePage.superclass.constructor.apply(this,arguments);this.isActive=false;this.connection=null},onShow:function(){_s7.Storage.Connection.BasePage.superclass.onShow.apply(this,arguments);this.isActive=true},onHide:function(){_s7.Storage.Connection.BasePage.superclass.onHide.apply(this,
arguments);this.isActive=false},init:function(a){this.connection=a},doValidate:function(){return true},doApply:function(){},doReset:function(){this.isActive=false},clearError:function(a,b){if(b.tooltip)b.tooltip.enabled=false;a.removeClass("x-bac-label-error")},validateInput:function(a,b,c){b.tooltip.enabled=false;a.removeClass("x-bac-label-error");if(!b.getValue()||c&&!c(b.getValue())){a.addClass("x-bac-label-error");b.tooltip.enabled=true;return false}return true}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.FirstPage=_._1(_s7.Storage.Connection.BasePage,{constructor:function(){this.html=this.getHtml();_s7.Storage.Connection.FirstPage.superclass.constructor.apply(this,arguments);_a(this.spCSManager,"_i1").Advise(this);this.wndNewBucket=new _s7.Storage.AS3.NewBucket({lpPrefix:this.lpPrefix,spCSManager:this.spCSManager});this.wndNewBucket.on("apply",this.onWndApply,this);this.wndNewBucket.on("cancel",this.onWndCancel,
this);this.data=null;this.isFetching=0},afterRender:function(){_s7.Storage.Connection.FirstPage.superclass.afterRender.apply(this,arguments);this.cbS3Server=new Ext.UI.ComboBox({width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["0",_TR("CLOUD_AMAZONS3_SERVERADDRESS_VALUE1")],["1",_TR("CLOUD_AMAZONS3_SERVERADDRESS_VALUE2")],["2",_TR("CLOUD_AMAZONS3_SERVERADDRESS_VALUE3")]]}),valueField:"id",displayField:"text",value:"0",renderTo:this.cbS3ServerId,
listeners:{select:function(a,b,c){this.onS3ServerChange(a,b,c)},scope:this}});this.lblS3Server=Ext.get(this.lS3ServerId);this.tfServerAddress=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:128,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_SERVERADDRESS_ERRORMESSAGE")},renderTo:this.tfServerAddressId});this.lbllS3Server=Ext.get(this.lServerAddressId);this.lbllS3Server.parent("tr").setDisplayed(false);this.tfDefaultRegion=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:128,
tooltipCfg:{html:_TR("CLOUD_AMAZONS3_DEFAULT_REGION_ERRORTIP")},renderTo:this.tfDefaultRegionId});this.lblDefaultRegion=Ext.get(this.lDefaultRegionId);this.lblDefaultRegion.parent("tr").setDisplayed(false);this.tfAKey=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:128,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_ACCESS_KEY_ERRORTIP")},renderTo:this.tfAKeyId,listeners:{keyup:this.onAKeyChange,change:this.onAKeyChange,scope:this}});this.lblAKey=Ext.get(this.lAKeyId);this.tfSKey=new Ext.UI.TextField({cls:"x-sec-editor-adm",
width:280,inputMaxLength:128,value:"grtPM2sgNhuBM2R+rEPFWzN2yJt6l9+bNfw+qVS/",tooltipCfg:{html:_TR("CLOUD_AMAZONS3_SECRECT_KEY_ERRORTIP")},renderTo:this.tfSKeyId,listeners:{keyup:this.onSKeyChange,change:this.onSKeyChange,scope:this}});this.lblSKey=Ext.get(this.lSKeyId);this.cbBucket=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbBucketId,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_BUCKETS_ERRORTIP")},
listeners:{select:function(a,b,c){this.onBucketSelect(a,b,c)},focus:this.onBeforeBucketSelect,scope:this}});this.lblBucket=Ext.get(this.lBucketId);this.cbBucket.getStore().loadData([]);this.fetchMask=new Ext.UI.LoadMask(Ext.get(this.cbBucketId),{type:Ext.UI.LoadMask.MIDDLE,msgCls:"ui-mask-style1",frame:false,background:false,delay:0});Ext.get(this.tfAKeyId).parent("tr").setDisplayed(this.fields.akey);Ext.get(this.tfSKeyId).parent("tr").setDisplayed(this.fields.skey);Ext.get(this.cbBucketId).parent("tr").setDisplayed(this.fields.bucket)},
onS3ServerChange:function(a,b){this.data=null;switch(b.data.id){case "0":case "1":Ext.get(this.lServerAddressId).parent("tr").setDisplayed(false);Ext.get(this.lblDefaultRegion).parent("tr").setDisplayed(false);break;case "2":Ext.get(this.lServerAddressId).parent("tr").setDisplayed(true);Ext.get(this.lblDefaultRegion).parent("tr").setDisplayed(true);break}},onAKeyChange:function(){this.clearError(this.lblAKey,this.tfAKey)},onSKeyChange:function(){this.clearError(this.lblSKey,this.tfSKey)},onBucketSelect:function(a,
b,c){if(b.data.id===""){a={};for(c=0;this.data&&this.data.connections&&c<this.data.connections.length;++c){b=_a(this.data.connections[c],"ICloudStorageConnection");a[b.getBucketName()]=true}for(c=0;c<this.data&&this.data.buckets&&this.data.buckets.length;++c)a[this.data.buckets[c].bucket]=true;this.wndNewBucket.show(this.getS3URL(),this.tfAKey.getValue(),this.tfSKey.getValue(),this.tfDefaultRegion.getValue(),a)}},getS3URL:function(){var a=_s7.AMAZON_S3_URL;switch(this.cbS3Server.getValue()){case "0":a=
_s7.AMAZON_S3_URL;break;case "1":a=_s7.AMAZON_S3_URL_C;break;case "2":a=this.tfServerAddress.getValue();break}return a},onBeforeBucketSelect:function(){if(!this.isFetching&&this.validateInput(this.lblAKey,this.tfAKey)&&this.validateInput(this.lblSKey,this.tfSKey)&&this.validateServerAddress()){this.spCSManager.updateBuckets(this.lpPrefix+"_conn-creation_update_buckets",this.getS3URL(),this.tfAKey.getValue(),this.tfSKey.getValue(),this.tfDefaultRegion.getValue());this.spCSManager.updateConnections(this.lpPrefix+
"_conn-creation_update_connections")}},onWndApply:function(a,b,c){this.spCSManager.addBucket(this.lpPrefix+"_conn-creation_add_bucket",this.getS3URL(),this.tfAKey.getValue(),this.tfSKey.getValue(),b,c,this.tfDefaultRegion.getValue())},onWndCancel:function(){this.wndNewBucket.hide()},onShow:function(){_s7.Storage.Connection.FirstPage.superclass.onShow.apply(this,arguments);this.tfAKey.setValue(this.connection.getAKey());this.tfSKey.setValue(this.connection.getSKey())},validateServerAddress:function(){var a=
this.cbS3Server.getValue();this.lbllS3Server.removeClass("x-bac-label-error");this.tfServerAddress.tooltip.enabled=false;this.lblDefaultRegion.removeClass("x-bac-label-error");this.tfDefaultRegion.tooltip.enabled=false;if(a=="2"){a=this.tfServerAddress.getValue();if(this.tfDefaultRegion.getValue()==""){this.lblDefaultRegion.addClass("x-bac-label-error");this.tfDefaultRegion.tooltip.enabled=true;return false}if(!((a.indexOf("http://")==0||a.indexOf("https://")==0)&&a.lastIndexOf("/")!=a.length-1)){this.tfServerAddress.tooltip.enabled=
true;this.lbllS3Server.addClass("x-bac-label-error");return false}}return true},doValidate:function(){if(this.isFetching||!this.validateServerAddress()||this.fields.akey&&!this.validateInput(this.lblAKey,this.tfAKey)||this.fields.skey&&!this.validateInput(this.lblSKey,this.tfSKey)||this.fields.bucket&&!this.validateInput(this.lblBucket,this.cbBucket,this.validateBucketName))return false;return true},validateBucketName:function(a){return!/[A-Z]/.test(a)},doApply:function(){this.connection.putAKey(this.tfAKey.getValue());
this.connection.putSKey(this.tfSKey.getValue());this.connection.putBucketName(this.cbBucket.getValue());this.connection.putServer(this.getS3URL());this.connection.putS3Region(this.tfDefaultRegion.getValue())},doReset:function(){_s7.Storage.Connection.FirstPage.superclass.doReset.apply(this,arguments);this.data=null;this.isFetching=0;this.fetchMask.hide();this.clearError(this.lbllS3Server,this.tfServerAddress);this.clearError(this.lblAKey,this.tfAKey);this.clearError(this.lblSKey,this.tfSKey);
this.clearError(this.lblBucket,this.cbBucket);this.clearValues()},populate:function(a){if(this.isActive){this.cbBucket.getStore().loadData([]);for(var b=[["",_TR("CLOUD_AMAZONS3_CREATE_BUCKET_CBITEM")]],c=0;c<a.buckets.length;++c){for(var d=false,e=0;e<a.connections.length;++e)if(_a(a.connections[e],"ICloudStorageConnection").getBucketName()===a.buckets[c].bucket)d=true;d||b.push([a.buckets[c].bucket,a.buckets[c].bucket])}this.cbBucket.getStore().loadData(b);(a=this.wndNewBucket.getValue())&&
a.length&&this.cbBucket.setValue(a)}},clearValues:function(){this.tfAKey.reset();this.tfSKey.reset();this.cbBucket.getStore().loadData([]);this.cbBucket.reset();this.cbS3Server.reset();this.tfServerAddress.reset();this.lbllS3Server.parent("tr").setDisplayed(false);this.tfDefaultRegion.reset();this.lblDefaultRegion.parent("tr").setDisplayed(false)},getHtml:function(){return'<div><table cellpadding="0" cellspacing="0" style="width: 100%;" ><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lS3ServerId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_SERVER")+_TR("COLON")+'</td><td id="'+(this.cbS3ServerId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lServerAddressId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_SERVERADDRESS")+_TR("COLON")+'</td><td id="'+(this.tfServerAddressId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lDefaultRegionId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_REGION")+_TR("COLON")+'</td><td id="'+(this.tfDefaultRegionId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lAKeyId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_ACCESS_KEY")+_TR("COLON")+'</td><td id="'+(this.tfAKeyId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lSKeyId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_SECRECT_KEY")+_TR("COLON")+'</td><td id="'+(this.tfSKeyId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lBucketId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_BUCKET_NAME")+_TR("COLON")+'</td><td ><div id="'+(this.cbBucketId=Ext.id())+'" style="width: 280px;"></div></td></tr></table></div>'},ICloudStorageManagerEvents:{_o1:function(a,
b){if(b===this.lpPrefix+"_conn-creation_update_connections"||b===this.lpPrefix+"_conn-creation_update_buckets"||b===this.lpPrefix+"_conn-creation_add_bucket")this.isFetching++||this.fetchMask.show()},_o2:function(a,b){if(b===this.lpPrefix+"_conn-creation_update_connections"){if(!this.data)this.data={};this.data.connections=this.spCSManager.getConnections();this.data.connections&&this.data.buckets&&this.populate(this.data)}if(b===this.lpPrefix+"_conn-creation_update_buckets"){if(!this.data)this.data=
{};this.data.buckets=this.spCSManager.getBuckets();this.data.connections&&this.data.buckets&&this.populate(this.data)}if(b===this.lpPrefix+"_conn-creation_add_bucket"){this.wndNewBucket.hide();this.spCSManager.updateBuckets(this.lpPrefix+"_conn-creation_update_buckets",this.getS3URL(),this.tfAKey.getValue(),this.tfSKey.getValue(),this.tfDefaultRegion.getValue());this.spCSManager.updateConnections(this.lpPrefix+"_conn-creation_update_connections")}},_o3:function(a,b,c){if(c===this.lpPrefix+"_conn-creation_update_connections"||
c===this.lpPrefix+"_conn-creation_update_buckets"||c===this.lpPrefix+"_conn-creation_add_bucket"){--this.isFetching||this.fetchMask.hide();var d=["37007000057","37007000058","37007000059","37007000060","37007000061","37007000062","37007000063","37007000064","37007000023","37007000024","37007000025","37007000026","37007000027","37007000028"];if(a!=_5){a=_a(b,"_io").getLastNMLError();b=a.getErrorCode();if(c===this.lpPrefix+"_conn-creation_add_bucket"&&~d.indexOf(b))Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),
msg:_TR(b),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400});else{if(c===this.lpPrefix+"_conn-creation_update_buckets"||c===this.lpPrefix+"_conn-creation_add_bucket"){this.cbBucket.getStore().loadData([]);this.cbBucket.setValue("")}_s7.Storage.showError(this.title,a)}}}}}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.Options=_._1(_s7.Storage.Connection.BasePage,{constructor:function(){this.html=this.getHtml();_s7.Storage.Connection.Options.superclass.constructor.apply(this,arguments)},initAllPHEvent:function(){_.initElePHEvent(this.spnUploadKbs,_TR("READYDR_UNLIMITED"));_.initElePHEvent(this.spnDownloadKbs,_TR("READYDR_UNLIMITED"))},afterRender:function(){_s7.Storage.Connection.Options.superclass.afterRender.apply(this,arguments);
this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:31,tooltipCfg:{html:_TR("CLOUD_STORAGE_CONNECTION_NAME_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId);this.cbPartSz=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",allowDecimals:false,decimalPrecision:0,store:new Ext.data.ArrayStore({fields:["id"],data:[["16MB"],["32MB"],["64MB"],["128MB"],
["256MB"],["512MB"],["1GB"],["2GB"],["5GB"]]}),valueField:"id",displayField:"id",value:"64MB",renderTo:this.cbPartSzId,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_PARTSIZE_ERRORTIP")},listeners:{beforeselect:function(a,b,c){this.onUploadChunkSizeSelect(a,b,c)},scope:this}});this.lblPartSz=Ext.get(this.lPartSzId);this.cbStClass=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbStClassId,
tooltipCfg:{html:_TR("CLOUD_AMAZONS3_STCLASS_ERRORTIP")}});this.lblStClass=Ext.get(this.lStClassId);this.lpPrefix=="wasabi"?this.cbStClass.getStore().loadData([["STANDARD",_TR("CLOUD_AMAZONS3_STORAGE_CLASS_STANDARD")]]):this.cbStClass.getStore().loadData([["STANDARD",_TR("CLOUD_AMAZONS3_STORAGE_CLASS_STANDARD")],["REDUCED_REDUNDANCY",_TR("CLOUD_AMAZONS3_STORAGE_CLASS_REDUCED_REDUNDANCY")],["STANDARD_IA",_TR("CLOUD_AMAZONS3_STORAGE_CLASS_SIA")]]);this.cbStClass.setValue("STANDARD");this.spnUploadKbs=
new Ext.UI.SpinnerField({width:280,minValue:0,maxValue:2147483647,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.spnUploadKbs.render(this.spnUploadKbsId);new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"display: inline-block; margin: 1px 0 0 5px; vertical-align: middle;",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("CLOUD_STORAGE_LOAD_SPEED_TIP")})}}});this.spnDownloadKbs=new Ext.UI.SpinnerField({width:280,minValue:0,
maxValue:2147483647,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.spnDownloadKbs.render(this.spnDownloadKbsId);new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"display: inline-block; margin: 1px 0 0 5px; vertical-align: middle;",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("CLOUD_STORAGE_LOAD_SPEED_TIP")})}}});this.spnSyncInterval=new Ext.UI.SpinnerField({width:180,value:1,minValue:1,maxValue:24,incrementValue:1,
alternateIncrementValue:10,allowDecimals:false,validationDelay:1E3,renderTo:this.spnSyncIntervalId});this.cbSyncInterval=new Ext.UI.ComboBox({width:95,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["0",_TR("CLOUD_SYNC_INTERVAL_SECONDS")],["1",_TR("CLOUD_SYNC_INTERVAL_MINUTES")],["2",_TR("CLOUD_SYNC_INTERVAL_HOURS")],["3",_TR("CLOUD_SYNC_INTERVAL_DAYS")]]}),valueField:"id",displayField:"text",renderTo:this.cbSyncIntervalId,listeners:{scope:this,collapse:this.onSyncIntervalSelected}});
this.chEncryption=new Ext.UI.Checkbox({checked:false,disabled:false});this.chEncryption.render(this.chEncryptionId);Ext.get(this.tfNameId).parent("tr").setDisplayed(this.fields.name);if(this.lpPrefix.toLowerCase()===_TR("CLOUD_AZURE_TITLE_EXT").toLowerCase()){Ext.get(this.cbPartSzId).parent("tr").setDisplayed(false);Ext.get(this.cbStClassId).parent("tr").setDisplayed(false)}else{Ext.get(this.cbPartSzId).parent("tr").setDisplayed(this.fields.partSize);Ext.get(this.cbStClassId).parent("tr").setDisplayed(this.fields.storageClass)}Ext.get(this.spnUploadKbsId).parent("tr").setDisplayed(this.fields.uploadSpeed);
Ext.get(this.spnDownloadKbsId).parent("tr").setDisplayed(this.fields.downloadSpeed);if(this.lpPrefix=="amazons3"){this.spnSyncInterval.setValue(1);this.cbSyncInterval.setValue("2")}else{this.spnSyncInterval.setValue(30);this.cbSyncInterval.setValue("0")}if(this.lpPrefix=="amazons3"||this.lpPrefix=="wasabi")Ext.get(this.chEncryptionId).parent("tr").setDisplayed(true)},onSyncIntervalSelected:function(a){var b=this.spnSyncInterval.getValue(),c=60,d=1;switch(a.getValue()){case "0":if(b>60)b=60;else if(b<
30)b=30;d=30;break;case "1":if(b>60)b=60;break;case "2":if(b>24)b=24;c=24;break;case "3":if(b>30)b=30;c=30;break}this.spnSyncInterval.maxValue=c;this.spnSyncInterval.minValue=d;this.spnSyncInterval.setValue(b)},onNameChange:function(){this.clearError(this.lblName,this.tfName)},onPartSzSelect:function(){this.clearError(this.lblPartSz,this.cbPartSzId)},onClassSelect:function(){this.clearError(this.lblStClass,this.cbStClassId)},onUploadChunkSizeSelect:function(a){var b=a.lastSelectionText;Ext.UI.MessageBox.show({title:"",
msg:_TR("CLOUD_AMAZONS3_PART_SIZE_WARNING"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.INFO,fn:function(c){c=="cancel"&&a.setValue(b)}})},clearValues:function(){this.tfName.setValue("");this.cbPartSz.setValue("64MB");this.cbStClass.setValue("STANDARD");this.spnUploadKbs.setValue();this.spnDownloadKbs.setValue();_.initElePHEvent(this.spnUploadKbs,_TR("READYDR_UNLIMITED"));_.initElePHEvent(this.spnDownloadKbs,_TR("READYDR_UNLIMITED"));if(this.lpPrefix=="amazons3"){this.spnSyncInterval.setValue(1);
this.cbSyncInterval.setValue("2")}else{this.spnSyncInterval.setValue(30);this.cbSyncInterval.setValue("0")}this.chEncryption.setValue(false)},getHtml:function(){return'<div><table cellpadding="0" cellspacing="0" style="width: 100%;" ><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lPartSzId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_PART_SIZE")+_TR("COLON")+'</td><td id="'+(this.cbPartSzId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lStClassId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_STORAGE_CLASS")+_TR("COLON")+'</td><td id="'+(this.cbStClassId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lUploadKbsId=Ext.id())+'">'+_TR("CLOUD_STORAGE_MAX_UPLOAD_KBS")+_TR("COLON")+'</td><td id="'+(this.spnUploadKbsId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;"  id="'+(this.lDownloadKbsId=Ext.id())+'">'+_TR("CLOUD_STORAGE_MAX_DOWNLOAD_KBS")+_TR("COLON")+'</td><td id="'+(this.spnDownloadKbsId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%; min-width: 80px; word-break: break-all; white-space: normal;">'+
_TR("CLOUD_SYNC_INTERVAL")+_TR("COLON")+'</td><td><table cellspadding="0" cellspacing="0"><tr><td id="'+(this.spnSyncIntervalId=Ext.id())+'"></td><td  style="padding-left:3px;" id="'+(this.cbSyncIntervalId=Ext.id())+'"></td></tr></table></td></tr><tr style="display:none;"><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" >'+_TR("CLOUD_AMAZONS3_ENCRYPTION")+_TR("COLON")+'</td><td id="'+(this.chEncryptionId=
Ext.id())+'"></td></tr></table></div>'},initElePHVal:function(a,b){var c=a.getValue(),d=Ext.get(a.el.dom).getAttribute("placeholder");if(b&&b!=d)a.setValue(b);else c==""&&d!=""&&a.setValue(d)},init:function(a){_s7.Storage.Connection.Options.superclass.init.apply(this,arguments);this.tfName.setValue(a.getName());this.cbPartSz.setValue(a.getPartSizeMB()+_TR("MB"));this.cbStClass.setValue(a.getStorageClass());var b=a.getMaxUploadKBS(),c=a.getMaxDownloadKBS();b!=0&&this.spnUploadKbs.setValue(b);
c!=0&&this.spnDownloadKbs.setValue(c);this.chEncryption.setValue(a.getServerEncryption());if(a.getId()){var d=+a.getPollingSec();b=60;c=1;if(d>=86400){d=d/3600/24;this.cbSyncInterval.setValue("3");b=30}else if(d>=3600){d=d/3600;this.cbSyncInterval.setValue("2");b=24}else if(d>=60){d=d/60;this.cbSyncInterval.setValue("1")}else{d=d;this.cbSyncInterval.setValue("0");c=30}this.spnSyncInterval.minValue=c;this.spnSyncInterval.maxValue=b;this.spnSyncInterval.setValue(d)}},doValidate:function(){if(this.fields.name&&
!this.validateInput(this.lblName,this.tfName)||this.fields.partSize&&!this.validateInput(this.lblPartSz,this.cbPartSz)||this.fields.storageClass&&!this.validateInput(this.lblStClass,this.cbStClass))return false;return true},doApply:function(){this.connection.putName(this.tfName.getValue());this.connection.putPartSizeMB(this.cbPartSz.getValue());this.connection.putStorageClass(this.cbStClass.getValue());var a=this.spnUploadKbs.getValue(),b=this.spnDownloadKbs.getValue();this.connection.putMaxUploadKBS(a==
""?"0":a);this.connection.putMaxDownloadKBS(b==""?"0":b);a=this.cbSyncInterval.getValue();b=+this.spnSyncInterval.getValue();switch(a){case "0":break;case "1":b*=60;break;case "2":b=b*60*60;break;case "3":b=b*24*60*60;break}this.connection.putPollingSec(b);this.connection.putServerEncryption(this.chEncryption.getValue())},doReset:function(){_s7.Storage.Connection.Options.superclass.doReset.apply(this,arguments);this.clearError(this.lblName,this.tfName);this.clearError(this.lblPartSz,this.cbPartSz);
this.clearError(this.lblStClass,this.cbStClass);this.clearValues()}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.Sessions=_._1(_s7.Storage.Connection.BasePage,{constructor:function(){this.html=this.getHtml();_s7.Storage.Connection.Sessions.superclass.constructor.apply(this,arguments);this.wndSession=new _s7.Storage.Session({title:this.title,lpPrefix:this.lpPrefix,spCSManager:this.spCSManager});this.wndSession.on("apply",this.onSessionWndApply,this);this.wndSession.on("cancel",this.onSessionWndCancel,this);_a(this.spCSManager,
"_i1").Advise(this);this.newsessions=[];this.editsessions=[]},afterRender:function(){_s7.Storage.Connection.Sessions.superclass.afterRender.apply(this,arguments);var a=new Ext.UI.RoundButton({cls:"x-cloud-add-btn",width:28,height:28});a.render(this.btAddId);a.on("click",this.onAddClick,this);a=new Ext.UI.RoundButton({cls:"x-frontview-icon-logs",width:28,height:28});a.render(this.btLogId);a.on("click",this.onLogClick,this)},onAddClick:function(){this.wndSession.show(this.connection,
this.spCSManager.createSession(),this.newsessions,null)},onLogClick:function(){this.fireEvent("logclick",this)},onSelect:function(a,b,c){this.editsessions.indexOf(b)===-1&&this.newsessions.indexOf(b)===-1&&this.editsessions.push(b);b.putSyncDirection(c.getValue())},onEditClick:function(a,b,c,d){b=Ext.get(b);c=Ext.get(c);this.wndSession.show(this.connection,a,this.newsessions,{local:b,remote:c,cb:d})},onDelete:function(a,b,c){Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:_TR("CLOUD_STORAGE_CONFIRM_DELETION_SESSION"),
fn:function(d){if(d=="yes"){d=-1;if((d=this.newsessions.indexOf(b))!==-1)this.newsessions.splice(d,1);else{if((d=this.editsessions.indexOf(b))!==-1)this.editsessions.splice(d,1);this.spCSManager.deleteSession(this.lpPrefix+"_options_delete_session",b)}d=Ext.get(this.contentId);for(var e=d.dom.firstChild;e;){var f=e.nextSibling;if(Ext.get(e).id===c){d.dom.removeChild(e);break}e=f}if(!d.dom.children.length){d.insertHtml("afterbegin",this.getEmptyTableRow(_TR("CLOUD_STORAGE_NO_SESSIONS_AVAILABLE")));
this.fireEvent("deletelast",this)}}},scope:this})},onSessionWndApply:function(a,b,c){if(c){this.editsessions.indexOf(b)===-1&&this.newsessions.indexOf(b)===-1&&this.editsessions.push(b);c.local.update(b.getLocalPath());c.remote.update(b.getRemotePath());c.cb.setValue(b.getSyncDirection())}else{a=this.connection.getSessions();c=Ext.get(this.contentId);a.length+this.newsessions.length||this.cleanKeysTable(c);this.newsessions.push(b);this.appendRow(c,a.length+this.newsessions.length-1,b);c.dom.scrollTop=
0}this.wndSession.hide();this.fireEvent("sessionwndapply",this)},onSessionWndCancel:function(){this.wndSession.hide()},appendRow:function(a,b,c){var d={rowId:null,btId1:null,btId2:null,cbId:null,lpathId:null,rpathId:null};a.insertHtml("afterbegin",this.getTableRow(b,c,d));a=new Ext.UI.RoundButton({cls:"x-cloud-edit-btn",width:26,height:26});a.render(d.btId1);a.on("click",function(){this.onEditClick(c,d.lpathId,d.rpathId,e)},this);a=new Ext.UI.RoundButton({cls:"x-cloud-delete-btn",width:28,height:28});
a.render(d.btId2);a.on("click",function(f){this.onDelete(f,c,d.rowId)},this);a=[["bidirection",_TR("CLOUD_STORAGE_BIDIRECTION")],["downsync",_TR("CLOUD_STORAGE_DOWNSYNC")],["upsync",_TR("CLOUD_STORAGE_UPSYNC")]];var e=new Ext.UI.ComboBox({width:280,forceSelection:true,editable:false,mode:"local",triggerAction:"all",multiSelect:false,store:new Ext.data.ArrayStore({fields:["id","text"],data:a}),valueField:"id",displayField:"text"});e.render(d.cbId);e.on("select",function(f){this.onSelect(f,c,e)},this);
e.setValue(c.getSyncDirection());Ext.get(d.lpathId).on("click",function(){this.onEditClick(c,d.lpathId,d.rpathId,e)},this);Ext.get(d.rpathId).on("click",function(){this.onEditClick(c,d.lpathId,d.rpathId,e)},this)},populate:function(){var a=this.sessions=this.connection.getSessions(),b=Ext.get(this.contentId);this.cleanKeysTable(b);if(a.length){for(var c=0;c<a.length;++c){var d=_a(a[c],"ICloudStorageSession");this.appendRow(b,c,d)}ScrollManager.reg(b.dom,ScrollManager.VERTICAL)}else b.insertHtml("afterbegin",
this.getEmptyTableRow(_TR("CLOUD_STORAGE_NO_SESSIONS_AVAILABLE")))},getHtml:function(){return'<div style="position: relative; display: table-row; height: 100%; width: 100%;"><div style="position: relative; display: table-cell;"><div style="display: table; height: 100%; width: 100%; position: relative; ">'+this.getTableHeader()+'<div style="position: relative; display: table-row; height: 100%; width: 100%; overflow-y: hidden;"><div style="position: relative; height: 100%; max-height: 100%; width: 100%; display: table-cell;"><div id="'+
(this.contentId=Ext.id())+'" style="position: relative; height: 100%; max-height: 200px; width: 100%; display: block;"></div></div></div></div></div></div>'},getTableHeader:function(){return'<table style="position: relative; height: auto; width: 100%; table-layout: fixed;" class=" ui-fwgrid-header" cellpadding="0" cellspacing="0"><tr><td style="width: 98%;"><div class="x-ellipsis">'+_TR("CLOUD_STORAGE_SESSION")+'</div></td><td style="width: 32px;"><div id="'+(this.btLogId=Ext.id())+'" title="'+_TR("HISTORY")+
'"></div></td><td style="width: 32px;"><div id="'+(this.btAddId=Ext.id())+'" title="'+_TR("CLOUD_STORAGE_ADD_SESSION")+'"></div></td></tr></table>'},getTableRow:function(a,b,c){return'<div id="'+(c.rowId=Ext.id())+'" style="position: relative; max-height: 100%; width: 100%; display: block;"><table style="position: relative; width: 100%; table-layout: fixed;" class="x-sh-inspector-table ui-fwgrid-row'+(a%2==1?"alt":"")+'" cellpadding="0" cellspacing="0"><tr><td style="width: 98%;"><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;" >'+
_TR("CLOUD_STORAGE_LOCAL_PATH")+'</div><a id="'+(c.lpathId=Ext.id())+'" class="x-ellipsis" href="#" style="width: 98%; height: 30px; line-height: 30px; display: block; margin-bottom: 5px;" title="'+b.getLocalPath()+'">'+b.getLocalPath()+'</a><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;" >'+_TR("CLOUD_STORAGE_REMOTE_PATH")+'</div><a id="'+(c.rpathId=Ext.id())+'" class="x-ellipsis" href="#" style="width: 98%; height: 30px; line-height: 30px; display: block; margin-bottom: 5px;" title="'+
b.getRemotePath()+'">'+b.getRemotePath()+'</a><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;" >'+_TR("CLOUD_STORAGE_SYNC_DIRECTION")+'</div><div id="'+(c.cbId=Ext.id())+'" style="line-height: 28px; margin-bottom: 5px;" ></div></td><td style="width: 32px; min-width: 32px; vertical-align: bottom;"><div id="'+(c.btId1=Ext.id())+'" style="line-height: 28px; margin-bottom: 5px;"></div></td><td style="width: 32px; vertical-align: bottom;"><div id="'+(c.btId2=Ext.id())+'" style="line-height: 28px; margin-bottom: 5px;"></div></td></tr></table></div>'},
getEmptyTableRow:function(a){return'<div style="position: relative; display: table; height: 100%; width: 100%; "><div style="position: relative; display: table-row; height: 100%; width: 100%; "><div style="position: relative; display: table-cell; height: 100%; width: 100%; vertical-align: middle; text-align: center; ">'+a+"</div></div></div>"},cleanKeysTable:function(a){a=a.dom;for(var b=a.firstChild;b;){var c=b.nextSibling;a.removeChild(b);b=c}},init:function(a,b){_s7.Storage.Connection.Sessions.superclass.init.apply(this,
arguments);this.populate();b&&this.onAddClick()},doValidate:function(){return true},doApply:function(a){for(var b=false,c=0;c<this.newsessions.length;++c){this.newsessions[c].putConnectionId(this.connection.getId());this.spCSManager.addSession(this.lpPrefix+"_options_add_session"+(a?"_just_created":""),this.newsessions[c]);b=true}for(c=0;c<this.editsessions.length;++c){this.editsessions[c].putConnectionId(this.connection.getId());this.spCSManager.editSession(this.lpPrefix+"_options_edit_session",
this.editsessions[c]);b=true}return b},doReset:function(){_s7.Storage.Connection.Sessions.superclass.doReset.apply(this,arguments);this.editsessions.splice(0);this.newsessions.splice(0)}});_._2("_s7.Storage");
_s7.Storage.LogsWindow=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_amazons3_logs",index:1,modal:true,height:420,width:850,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",constructor:function(){_.apply(this,{fbar:this.getFooter()});_s7.Storage.LogsWindow.superclass.constructor.apply(this,arguments);this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.pages={1:null};this.connection=null},getFooter:function(){return[this.bCopy=
new Ext.UI.Button({text:_TR("CLOUD_DRIVE_SELECT_ALL"),width:125,disabled:false,handler:function(){this.onCopyToClick()},scope:this}),"->",this.bCancel=new Ext.UI.Button({text:_TR("CLOSE"),bCancel:true,width:125,disabled:false,handler:function(){this.onCancelClick()},scope:this})]},reset:function(){},afterRender:function(){_s7.Storage.LogsWindow.superclass.afterRender.apply(this,arguments);this.spinner=new Ext.UI.LoadMask(this.el,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0});
this.pages[1]=new _s7.Storage.LogsGrid({lpPrefix:this.lpPrefix,spCSManager:this.spCSManager});this.pages[1].on("change",this.onLogChange,this);this.pages[1].render(this.body);this.pages[1].hide()},show:function(a){this.connection=a;_s7.Storage.LogsWindow.superclass.show.apply(this,arguments);this.center()},onShown:function(){this.pages[1].show(this.connection);this.bCopy.hide()},onHidden:function(){this.pages[1].hide();this.connection=null},onCancelClick:function(){this.hide()},
onSpecialKeyPress:function(a,b){if(b.getKey()==b.ENTER){this.onCancelClick();return false}return true},onCopyToClick:function(){this.pages[1].copyTo()},onLogChange:function(a){a.isLogEmpty?this.bCopy.hide():this.bCopy.show()}});Ext.namespace("_s7");
_s7.Storage.LogsGrid=_._1(_.JSCom._9,Ext.Container,{currLogEntries:[],constructor:function(){this.html=this.getHtml();_s7.Storage.LogsGrid.superclass.constructor.apply(this,arguments);_a(this.spCSManager,"_i1").Advise(this);this.isLogEmpty=true;this.connection=null;this.addEvents("change")},show:function(a){this.connection=a;this.isLogEmpty=true;_s7.Storage.LogsGrid.superclass.show.apply(this,arguments)},copyTo:function(){this.showRawLog(true);
for(var a="",b=Ext.get(this.rowsConainer).first();b;){a+=Ext.get(b).getText()+"\r\n";b=b.next()}this.txta.setValue(a);this.txta.selectText()},showProgress:function(){this.logRequests&&this.createEmptyKeysTable(_TR("CLOUD_DRIVE_PROGRESS_MSG"))},hideProgress:function(){this.logRequests||this.createEmptyKeysTable(_TR("EMPTY"))},stopTimer:function(){this.currLogEntries.splice(0,this.currLogEntries.length);clearTimeout(this.timeoutId);this.logRequests=0},startTimer:function(){if(!this.logRequests){var a=
this;this.timeoutId=setTimeout(function(){a.fetchLogs(a.lpPrefix+"_options_log")},5E3)}},scrollLastIntoView:function(){this.lastRow&&this.scrollIntoView(this.lastRow)},populate:function(a){if(a!=_4&&(a=a.logs)&&a.length>0){var b=this.currLogEntries.length,c=Ext.get(this.rowsConainer);if(this.currLogEntries.length===0||this.currLogEntries.length===1E3){this.currLogEntries.splice(0,this.currLogEntries.length);this.cleanKeysTable(c);b=0}for(var d=null,e=a.length-1;e>=0;--e){var f=_a(a[e],
"_i1v");if(this.currLogEntries.indexOf(f.getTime()+this.formatLogMessage(f))===-1){this.currLogEntries.push(f.getTime()+this.formatLogMessage(f));d=c.createChild({tag:"tr",style:"",html:this.getTableRow(_.formatDateTime(f.getDeviceTime()!==_4?f.getDeviceTime():new Date(f.getTime()*1E3)),_.Utils.Format.htmlEncode(this.formatLogMessage(f)))});++b}}if(d){this.lastRow=d;this.scrollIntoView(d)}this.isLogEmpty=false}else{this.createEmptyKeysTable(_TR("EMPTY"));this.isLogEmpty=true}this.fireEvent("change",
this);this.startTimer()},showRawLog:function(a){Ext.get(this.formattedLogsId).setDisplayed(!a);Ext.get(this.notFormattedLogsId).setDisplayed(a)},scrollIntoView:function(a){var b=Ext.get(this.formattedLogsId),c=a.dom.offsetTop-b.dom.clientHeight;c=c+a.dom.clientHeight-(a.dom.clientHeight-b.dom.clientHeight);b.dom.scrollTop=c},formatLogMessage:function(a){var b=_TR(a.getMessageTag());a=a.getArgs();a!=_4&&_.each(a,function(c){try{b=b.replace(new RegExp("{"+c.name+"}",["g"]),unescape(c.value))}catch(d){console.info(d)}},
this);return b},getHtml:function(){return'<div id="'+(this.notFormattedLogsId=Ext.id())+'" style="width: 100%; height: 260px;"></div><div id="'+(this.formattedLogsId=Ext.id())+'" style="width: 100%; height: 260px;"><table style="width: 100%;" class="x-sh-inspector-table" cellpadding="0" cellspacing="0"><tbody id="'+(this.rowsConainer=Ext.id())+'"></tbody></table></div>'},getTableRow:function(a,b){return'<td class="x-selectable" style="text-align: right; vertical-align: top;"><div class="x-ellipsis x-selectable" style="text-wrap: normal; color: #808fa8; margin-bottom: 8px; margin-right: 4px; font-size: 14px;" title="'+
a+'">'+a+'</div></td><td class="x-selectable" style="text-align: left; vertical-align: top; width: 100%; padding-left: 5px;"><div class="x-selectable" style="text-wrap: normal; width: 100%; margin-bottom: 8px; font-size: 14px; padding-right: 14px;" title="'+b.trim()+'">'+b.trim()+'</div></td><td style="width: 14px; min-width: 14px;"></td>'},getEmptyTableRow:function(a){return'<td style="width: 100%;"><div style="width: 100%; text-align: center;">'+a+"</div></td>"},createEmptyKeysTable:function(a){var b=
Ext.get(this.rowsConainer);this.cleanKeysTable(b);b.createChild({tag:"tr",cls:"x-selectable",html:this.getEmptyTableRow(a)})},cleanKeysTable:function(a){a=a.dom;for(var b=a.firstChild;b;){var c=b.nextSibling;a.removeChild(b);b=c}},fetchLogs:function(a){this.spCSManager.updateConnectionLog(a,this.connection)},afterRender:function(){var a=Ext.get(this.formattedLogsId);ScrollManager.reg(a.dom,ScrollManager.VERTICAL);this.txta=new Ext.UI.TextArea({width:"100%",height:260,renderTo:this.notFormattedLogsId,
readonly:true,enableKeyEvents:true,listeners:{blur:function(){this.showRawLog(false)},focus:function(){},scope:this}})},onShow:function(){_s7.Storage.LogsGrid.superclass.onShow.apply(this,arguments);this.showRawLog(false);this.currLogEntries.splice(0,this.currLogEntries.length);this.createEmptyKeysTable(_TR("EMPTY"));this.fetchLogs(this.lpPrefix+"_options_log")},onHide:function(){_s7.Storage.LogsGrid.superclass.onHide.apply(this,arguments);this.stopTimer()},ICloudStorageManagerEvents:{_o1:function(a,
b){switch(b){case this.lpPrefix+"_options_log":this.showProgress();break;default:break}},_o2:function(a,b){switch(b){case this.lpPrefix+"_options_log":this.populate(this.spCSManager.getConnectionLog());break;default:break}},_o3:function(a,b,c){switch(c){case this.lpPrefix+"_options_log":if(a!=_5){--this.logRequests;this.hideProgress();_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}break;default:break}}}});_._2("_s7.Storage");
_s7.Storage.Session=_._1(_9,Ext.UI.Window,{modal:true,width:640,resizable:false,minimizable:false,maximizable:false,constructor:function(a){a=a||{};_.apply(this,{title:(a.title?a.title+" - ":"")+_TR("CLOUD_STORAGE_SESSION"),html:this.getHtml(),fbar:this.getFooter()});delete a.title;_s7.Storage.Session.superclass.constructor.apply(this,arguments);this.addEvents("apply","cancel");this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.context=
this.session=this.connection=null;this.isActive=false;this.rbw=new _s7.Storage.RemoteBrowse({title:this.title,lpPrefix:this.lpPrefix,spCSManager:this.spCSManager});this.rbw.on("selected",this.onRSelectFile,this)},initComponent:function(){_s7.Storage.Session.superclass.initComponent.call(this)},getHtml:function(){return'<table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+
(this.llpathId=Ext.id())+'">'+_TR("CLOUD_STORAGE_LOCAL_PATH")+_TR("COLON")+'</td><td id="'+(this.tflpathId=Ext.id())+'"></td><td id="'+(this.blpathId=Ext.id())+'" style="padding-left: 5px;" ><td/></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lrpathId=Ext.id())+'">'+_TR("CLOUD_STORAGE_REMOTE_PATH")+_TR("COLON")+'</td><td id="'+(this.tfrpathId=Ext.id())+
'"></td><td id="'+(this.brpathId=Ext.id())+'" style="padding-left: 5px;"><td/></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;">'+_TR("CLOUD_STORAGE_SYNC_DIRECTION")+_TR("COLON")+'</td><td id="'+(this.cbSyncDirectionId=Ext.id())+'"></td><td><td/></tr></table>'},getFooter:function(){return[{xtype:"uibutton",text:_TR("CREATE"),handler:this.onCreate,scope:this,acceptbtn:true},
{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.fireEvent("cancel",this);this.hide()},scope:this,cancelbtn:true}]},afterRender:function(){_s7.Storage.Session.superclass.afterRender.apply(this,arguments);this.tfLPath=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,readOnly:true,tooltipCfg:{html:_TR("CLOUD_STORAGE_LOCAL_PATH_ERRORTIP")},renderTo:this.tflpathId});this.tfLPath.el.on("click",this.onLBrowseClick,this);this.lblLPath=Ext.get(this.llpathId);this.bBrowse=new Ext.UI.Button({width:80,
text:_TR("BROWSE"),handler:this.onLBrowseClick,scope:this,renderTo:this.blpathId});this.tfRPath=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,readOnly:true,tooltipCfg:{html:_TR("CLOUD_STORAGE_REMOTE_PATH_ERRORTIP")},renderTo:this.tfrpathId});this.tfRPath.el.on("click",this.onRBrowseClick,this);this.lblRPath=Ext.get(this.lrpathId);new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"display: inline-block; margin: 1px 0 0 5px; vertical-align: middle;",renderTo:this.lblRPath,
listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("CLOUD_STORAGE_REMOTE_PATH_TIP")})}}});this.bBrowse=new Ext.UI.Button({width:80,text:_TR("BROWSE"),handler:this.onRBrowseClick,scope:this,renderTo:this.brpathId});this.cbSyncDirection=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["bidirection",_TR("CLOUD_STORAGE_BIDIRECTION")],["downsync",_TR("CLOUD_STORAGE_DOWNSYNC")],["upsync",
_TR("CLOUD_STORAGE_UPSYNC")]]}),value:"bidirection",valueField:"id",displayField:"text",renderTo:this.cbSyncDirectionId})},show:function(a,b,c,d){this.connection=a;this.session=b;this.newsessions=c;this.context=d;_s7.Storage.Session.superclass.show.call(this)},onShown:function(){this.isActive=true;this.reset();this.center();if(this.session){this.tfLPath.setValue(this.session.getLocalPath());this.tfRPath.setValue(this.session.getRemotePath());this.cbSyncDirection.setValue(this.session.getSyncDirection())}},
onHidden:function(){this.context=this.session=this.connection=null;this.isActive=false;this.clearError(this.lblLPath,this.tfLPath);this.clearError(this.lblRPath,this.tfRPath)},onCreate:function(){this.clearError(this.lblLPath,this.tfLPath);this.clearError(this.lblRPath,this.tfRPath);if(this.validateInput(this.lblLPath,this.tfLPath,this.validateLPath.bind(this))&&this.validateInput(this.lblRPath,this.tfRPath,this.validateRPath.bind(this))){this.session.putLocalPath(this.tfLPath.getValue());this.session.putRemotePath(this.tfRPath.getValue());
this.session.putSyncDirection(this.cbSyncDirection.getValue());this.fireEvent("apply",this,this.session,this.context);this.hide()}},onLBrowseClick:function(){this.wndLocalBrowse=this.wndLocalBrowse||CComSingleton(_s9.BrowseWindow);this.wndLocalBrowse.on("selected",this.onLocalBrowseSelect,this);this.wndLocalBrowse.on("hide",this.onLocalBrowseHide,this);this.wndLocalBrowse.show();this.wndLocalBrowse.setCloudMode(true);this.wndLocalBrowse.browse.loadPath(this.tfLPath.getValue())},onLocalBrowseSelect:function(a){this.clearError(this.lblLPath,
this.tfLPath);this.tfLPath.setValue(a.path||"");this.wndLocalBrowse.setCloudMode(false)},onLocalBrowseHide:function(){this.wndLocalBrowse.setCloudMode(false);this.wndLocalBrowse.un("selected",this.onLocalBrowseSelect,this);this.wndLocalBrowse.un("hide",this.onLocalBrowseHide,this)},onRBrowseClick:function(){this.rbw.show(this.connection,this.tfRPath.getValue())},onRSelectFile:function(a,b){this.clearError(this.lblRPath,this.tfRPath);this.tfRPath.setValue(b)},reset:function(){this.clearError(this.lblLPath,
this.tfLPath);this.clearError(this.lblRPath,this.tfRPath);this.clearValues()},clearError:function(a,b){if(b.tooltip)b.tooltip.enabled=false;a.removeClass("x-bac-label-error")},clearValues:function(){this.tfLPath.setValue("");this.tfRPath.setValue("");this.cbSyncDirection.setValue("bidirection")},validateLPath:function(a){if(!a||a.split("/").length<=2)return false;else if(a!="/")a+="/";var b=true,c;_.each((this.newsessions||[]).concat(this.connection.getSessions()),function(d){if(d!=this.session&&
(d=_a(d,"ICloudStorageSession"))!=this.session&&d.getId()!=this.session.getId()){c=d.getLocalPath();if(c!="/")c+="/";if(c.indexOf(a)==0||a.indexOf(c)==0)return b=false}},this);return b},validateRPath:function(a){if(a){if(a!="/")a+="/"}else return false;var b=true,c;_.each((this.newsessions||[]).concat(this.connection.getSessions()),function(d){if(d!=this.session&&(d=_a(d,"ICloudStorageSession"))!=this.session){c=d.getRemotePath();if(c!="/")c+="/";if(c.indexOf(a)==0||a.indexOf(c)==
0)return b=false}},this);return b},validateInput:function(a,b,c){a.removeClass("x-bac-label-error");b.tooltip.enabled=false;if(!b.getValue()||c&&!c(b.getValue())){b.tooltip.enabled=true;a.addClass("x-bac-label-error");return false}return true}});Ext.namespace("_s7.Storage");
_s7.Storage.RemoteBrowse=_._1(_9,Ext.UI.Window,{modal:true,width:800,height:550,resizable:false,minimizable:false,maximizable:false,cls:"x-cloud-storage-remote-browse",updatesCount:0,constructor:function(){this.updatesState={shares:false,luns:false};this.html='<div id="'+(this.pathId=Ext.id())+'" style=" height: 36px; word-wrap: break-word; white-space: normal; word-break: normal;" ></div><div class="x-clear"></div>';this.fbar=this.getFooter();_s7.Storage.RemoteBrowse.superclass.constructor.apply(this,
arguments);this.wndNewDir=new _s7.Storage.RemoteBrowse.NewDir;this.wndNewDir.on("apply",this.onWndNewDirApply,this);this.wndNewDir.on("cancel",this.onWndNewDirCancel,this);this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.connection=null;this.rootDirName=this.dirId=this.root="";this.indexDirs={}},show:function(a,b){this.connection=a;a=this.connection.getName();var c=["Google Drive","One Drive","Amazon Drive"];this.root=b&&b!==_4&&c.indexOf(a)==-1?b:"";this.dirId=
"";this.indexDirs={};this.rootDirName=_TR("CLOUD_STORAGE_REMOTE_PATH_ROOT");_s7.Storage.RemoteBrowse.superclass.show.call(this)},afterRender:function(){_s7.Storage.RemoteBrowse.superclass.afterRender.apply(this,arguments);this.renderGrid();this.elPath=Ext.get(this.pathId);this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},getFooter:function(){this.bApply=new Ext.UI.Button({width:100,text:_TR("SELECT"),
acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this});return["->",this.bApply,this.bCancel]},renderGrid:function(){var a=[{header:"&#160;",width:42,fixed:true,hideable:false,menuDisabled:true,dataIndex:"type",xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="x-cloud-storage-remote-browse-share-icon"></div>')).compile()},{header:_TR("NAME"),width:100,dataIndex:"name"},{header:_TR("PATH"),
width:200,dataIndex:"path"},{header:'<div id="'+(this.bAddId=Ext.id())+'" class="x-cloud-add-btn" style="position: relative; top: 4px; height: 26px; "></div>',dataIndex:"",width:42,fixed:true}];this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true});this.grid=new Ext.UI.GridPanel({uicls:"ui-fwgrid",height:350,sm:this.selModel,colModel:new Ext.grid.ColumnModel(a),store:new Ext.data.ArrayStore({fields:["type","path","name","id"]}),viewConfig:{forceFit:true,autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+
_TR("CLOUD_STORAGE_NO_FOLDERS")+"</div>",enableRowBody:true,deferEmptyText:false},renderTo:this.body});this.grid.on("headerclick",this.onAddClick,this);this.grid.on("celldblclick",this.onRowDoubleClick,this)},onResized:function(){var a=this.elPath.getWidth();a>400||(a=400);this.grid.setWidth(a)},onShown:function(){_a(this.spCSManager,"_i1").Advise(this);this.center();this.onResized();this.updatePath(this.elPath,this.root);this.fetchRemoteDirectories()},onHidden:function(){_a(this.spCSManager,
"_i1").Unadvise(this);this.reset()},onWndNewDirApply:function(a,b){this.lpPrefix!="amazondrive"&&(b+=this.root+(this.root[this.root.length-1]=="/"?"":"/"));this.spCSManager.addDirectory(this.lpPrefix+"_options_add_directory",this.connection,b,this.dirId);this.wndNewDir.hide()},onWndNewDirCancel:function(){this.wndNewDir.hide()},onRowDoubleClick:function(){var a=this.selModel.getSelected();if(a){this.root=a.get("path");this.dirId=a.get("id");this.updatePath(this.elPath,this.root);this.fetchRemoteDirectories()}},
onApplyClick:function(){var a=this.selectedPath||"/",b=this.selModel.getSelected();if(b)a=b.get("path");a=a[0]==="/"?a:"/"+a;this.fireEvent("selected",this,a);this.hide()},onAddClick:function(a,b){b===3&&this.wndNewDir.show(this.hashData)},onPathClick:function(a,b){this.root=a||"";this.dirId=b||"";this.updatePath(this.elPath,this.root);this.fetchRemoteDirectories()},getDirectoryName:function(a){a=a.split("/");return a[a.length-1]||a[a.length-2]},updatePath:function(a,b){a.update("");this.selectedPath=
b;a.createChild({tag:"a",href:"#",html:this.rootDirName+"/",style:"padding-right: 2px;"}).on("click",function(){this.onPathClick()},this);for(var c=0,d=c;d<b.length;++d)if((b[d]==="/"||d===b.length-1)&&c<d){c&&a.createChild({tag:"span",html:"/",style:"padding-right: 2px;"});var e=d<b.length-1?d:undefined;c=b.substring(c,e);c=c[0]==="/"?c.substring(1,e):c;e=b.substring(0,e);a.createChild({tag:"a",href:"#",html:c,style:"padding-right: 2px;"}).on("click",function(f){return function(){this.onPathClick(f,
this.indexDirs[f]||f)}}(e),this);c=d}},reset:function(){this.connection=null;this.root="";this.grid.getStore().loadData([])},fetchRemoteDirectories:function(){var a="";a=this.dirId?this.dirId:this.root[this.root.length-1]==="/"||this.root===""?this.root:this.root+"/";this.spCSManager.updateDirectories(this.lpPrefix+"_options_update_directories",this.connection,a)},populateRemoteShares:function(a){var b=[];if(a&&a!=_4){this.hashData={};if(!this.dirId&&(this.connection.getName()==="Google Drive"||
this.connection.getName()==="One Drive"||this.connection.getName()==="Amazon Drive")&&a.length==1&&a[0].id){this.dirId=a[0].id;this.rootDirName=a[0].folder&&a[0].folder!="/"?a[0].folder:_TR("CLOUD_STORAGE_REMOTE_PATH_ROOT");this.updatePath(this.elPath,this.root);this.spCSManager.updateDirectories(this.lpPrefix+"_options_update_directories",this.connection,a[0].id)}else{var c=this;_.each(a,function(d){var e=c.getDirectoryName(d.folder),f=c.root+(c.root[c.root.length-1]=="/"?"":"/")+e;this.indexDirs[f]=
d.id;b.push(["share",f,e,d.id]);this.hashData[e]=true},this)}}this.grid.getStore().loadData(b)},showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},ICloudStorageManagerEvents:{_o1:function(a,b){if(b===this.lpPrefix+"_options_update_directories"||b===this.lpPrefix+"_options_add_directory")this.showProgress()},_o2:function(a,b){b===this.lpPrefix+"_options_update_directories"&&
this.populateRemoteShares(this.spCSManager.getDirectories());b===this.lpPrefix+"_options_add_directory"&&setTimeout(function(){this.fetchRemoteDirectories()}.bind(this),1E3)},_o3:function(a,b,c){if(c===this.lpPrefix+"_options_update_directories"||c===this.lpPrefix+"_options_add_directory"){this.hideProgress();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}}}});_._2("_s7.Storage.RemoteBrowse");
_s7.Storage.RemoteBrowse.NewDir=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_amazons3_new_directory",modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,constructor:function(){_.apply(this,{title:_TR("CLOUD_STORAGE_CREATE_DIRECTORY"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onShow,scope:this}});_s7.Storage.RemoteBrowse.NewDir.superclass.constructor.call(this);this.addEvents("apply",
"cancel");this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.hashData=null},getHtml:function(){return'<table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>'},getFooter:function(){return[{xtype:"uibutton",
text:_TR("CREATE"),handler:this.onCreate,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.fireEvent("cancel",this);this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:31,tooltipCfg:{html:_TR("CLOUD_STORAGE_REMOTE_NEW_DIR_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId)},
show:function(a){this.hashData=a;_s7.Storage.RemoteBrowse.NewDir.superclass.show.call(this)},getValue:function(){if(this.tfName)return this.tfName.getValue();return null},onShown:function(){this.isActive=true;this.reset();this.center();this.tfName.focus(false,true)},onHidden:function(){this.hashData=null},onCreate:function(){this.clearError(this.lblName,this.tfName);var a=this;if(this.validateInput(this.lblName,this.tfName,function(b){return!a.hashData||!a.hashData[b]})){this.fireEvent("apply",
this,this.tfName.getValue());this.hide()}},onNameChange:function(){this.clearError(this.lblName,this.tfName)},reset:function(){this.clearError(this.lblName,this.tfName);this.clearValues()},clearError:function(a,b){if(b.tooltip)b.tooltip.enabled=false;a.removeClass("x-bac-label-error")},clearValues:function(){this.tfName.setValue("")},validateInput:function(a,b,c){a.removeClass("x-bac-label-error");b.tooltip.enabled=false;var d=b.getValue();if(!d||c&&!c(d)){b.tooltip.enabled=true;a.addClass("x-bac-label-error");
return false}return true}});Ext.namespace("_s7.Storage");_s7.AMAZON_S3_URL="https://s3.amazonaws.com";_s7.AMAZON_S3_URL_C="https://s3.cn-north-1.amazonaws.com.cn";
_s7.Storage.AS3=_._1(_s7.Storage.Panel,{help:"backup_panel_as3box",lpPrefix:"amazons3",singleConnection:"Amazon S3",isBeta:false,constructor:function(){_.apply(this,{url:"https://aws.amazon.com",title:_TR("CLOUD_AMAZONS3_TITLE_EXT"),tip:String.format(_TR("CLOUD_AMAZONS3_INSTRUCTION"),'<a class="x-frontview-link" href="https://aws.amazon.com" target="_blank">https://aws.amazon.com</a>'),iconCls:"x-amazons3-icon",msgConfirmDisable:String.format(_TR("SERVICE_DISABLE"),
_TR("CLOUD_AMAZONS3_TITLE_EXT"))});_s7.Storage.AS3.superclass.constructor.apply(this,arguments);this.spCSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getCloudStorageAmazonS3Manager();_a(this.spCSManager,"_i1").Advise(this);this.wndOptions=new _s7.Storage.OptionsWindow({ClsConnectionsBlock:_s7.Storage.AS3.Connections,spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,authUrl:this.authUrl,
help:"cloud_wnd_amazons3_options",title:this.title})}});_._2("_s7.Storage.AS3");
_s7.Storage.AS3.NewBucket=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_amazons3_new_bucket",constructor:function(){_.apply(this,{modal:true,width:640,resizable:false,minimizable:false,maximizable:false,title:_TR("CLOUD_AMAZONS3_CREATE_BUCKET_WNDTITLE"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onShow,scope:this}});_s7.Storage.AS3.NewBucket.superclass.constructor.apply(this,arguments);this.addEvents("apply",
"cancel");this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.args=null;this.isActive=false;this.isFetching=0;_a(this.spCSManager,"_i1").Advise(this)},getHtml:function(){return'<table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lNameId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_BUCKET_NAME")+
_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lBucketLocationId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_BUCKET_LOCATIONS")+_TR("COLON")+'</td><td><div id="'+(this.cbBucketLocationId=Ext.id())+'" style="width: 280px;" ></div></td></tr></table>'},getFooter:function(){return[{xtype:"uibutton",text:_TR("CREATE"),
handler:this.onCreate,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.tfName.setValue("");this.fireEvent("cancel",this);this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:255,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_BUCKET_NAME_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId);
this.cbLocations=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbBucketLocationId,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_BUCKETS_LOCATION_ERRORTIP")},listeners:{focus:this.onBeforeBucketSelect,scope:this}});this.lblBucketsName=Ext.get(this.lBucketLocationId);this.fetchMask=new Ext.UI.LoadMask(Ext.get(this.cbBucketLocationId),{type:Ext.UI.LoadMask.MIDDLE,msgCls:"ui-mask-style1",
frame:false,background:false,delay:0})},show:function(a,b,c,d,e){this.args={buckets:e,server:a,akey:b,skey:c,sregion:d};_s7.Storage.AS3.NewBucket.superclass.show.call(this)},getValue:function(){if(this.tfName)return this.tfName.getValue();return null},onShown:function(){this.isActive=true;this.reset();this.center();this.tfName.focus(false,true)},onHidden:function(){this.args=null;this.isActive=false;this.isFetching=0},onCreate:function(){this.clearError(this.lblName,this.tfName);this.clearError(this.lblBucketsName,
this.cbLocations);var a=this;this.validateInput(this.lblName,this.tfName,function(b){if(a.args.buckets[b])return false;return true})&&this.validateInput(this.lblBucketsName,this.cbLocations)&&this.fireEvent("apply",this,this.tfName.getValue(),this.cbLocations.getValue())},onNameChange:function(){this.clearError(this.lblName,this.tfName)},onBeforeBucketSelect:function(){if(!this.isFetching){this.isFetching=1;this.fetchMask.show();this.spCSManager.updateBucketLocations(this.lpPrefix+"_conn-creation_update_buckets_location",
this.args.server,this.args.akey,this.args.skey,this.args.sregion)}},reset:function(){this.clearError(this.lblName,this.tfName);this.clearError(this.lblBucketsName,this.cbLocations);this.clearValues()},clearError:function(a,b){if(b.tooltip)b.tooltip.enabled=false;a.removeClass("x-bac-label-error")},clearValues:function(){this.cbLocations.getStore().loadData([]);this.tfName.setValue("")},validateInput:function(a,b,c){a.removeClass("x-bac-label-error");b.tooltip.enabled=false;if(!b.getValue()||c&&!c(b.getValue())){b.tooltip.enabled=
true;a.addClass("x-bac-label-error");return false}return true},populate:function(a){if(this.isActive){this.cbLocations.getStore().loadData([]);for(var b=[],c=0;c<a.length;++c)b.push([a[c].id,_TR(a[c].name)]);this.cbLocations.getStore().loadData(b)}},ICloudStorageManagerEvents:{_o1:function(){},_o2:function(a,b){b===this.lpPrefix+"_conn-creation_update_buckets_location"&&this.populate(this.spCSManager.getBucketLocations())},_o3:function(a,b,c){if(c===this.lpPrefix+"_conn-creation_update_buckets_location"){--this.isFetching||
this.fetchMask.hide();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}}}});Ext.namespace("_s7.Storage.AS3");
_s7.Storage.AS3.Connections=_._1(_s7.Storage.Connections,{fields:{name:false,akey:true,skey:true,bucket:true,partSize:true,storageClass:true,uploadSpeed:true,downloadSpeed:true,polling:true,encryption:true},constructor:function(){this.stClassTR={STANDARD:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_STANDARD"),REDUCED_REDUNDANCY:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_REDUCED_REDUNDANCY"),STANDARD_IA:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_SIA")};_s7.Storage.AS3.Connections.superclass.constructor.apply(this,
arguments)},initNewConnection:function(){var a=_s7.Storage.AS3.Connections.superclass.initNewConnection.apply(this,arguments);a.putServer(_s7.AMAZON_S3_URL);return a},getTableRowData:function(a){var b=_s7.Storage.AS3.Connections.superclass.getTableRowData.apply(this,arguments),c=this.stClassTR[a.getStorageClass()],d=a.getServerEncryption()?_TR("ON"):_TR("OFF");return b+'<div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_STORAGE_CLASS")+
'</div><div class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+c+'">'+c+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_BUCKET_NAME")+'</div><div class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+a.getBucketName()+'">'+a.getBucketName()+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_ENCRYPTED")+'<div class="x-ellipsis" style="height: 22px; line-height: 22px;" title="'+
d+'">'+d+"</div></div>"}});Ext.namespace("_s7.Storage");_s7.WASABI_URL="https://s3.wasabisys.com";
_s7.Storage.Wasabi=_._1(_s7.Storage.Panel,{help:"backup_panel_wasabibox",lpPrefix:"wasabi",singleConnection:"Wasabi",isBeta:false,constructor:function(){_.apply(this,{url:_s7.WASABI_URL,title:_TR("CLOUD_WASABI_TITLE_EXT"),tip:_TR("CLOUD_WASABI_INSTRUCTION"),iconCls:"x-wasabi-icon",msgConfirmDisable:String.format(_TR("SERVICE_DISABLE"),_TR("CLOUD_WASABI_TITLE_EXT"))});_s7.Storage.Wasabi.superclass.constructor.apply(this,arguments);this.spCSManager=
_a(_7(_1.CLSIDS.Device5200),"_i2").getCloudStorageWasabiManager();_a(this.spCSManager,"_i1").Advise(this);this.wndOptions=new _s7.Storage.OptionsWindow({ClsConnectionsBlock:_s7.Storage.Wasabi.Connections,spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,authUrl:this.authUrl,help:"cloud_wnd_wasabi_options",title:this.title})}});_._2("_s7.Storage.Wasabi");
_s7.Storage.Wasabi.NewBucket=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_wasabi_new_bucket",constructor:function(){_.apply(this,{modal:true,width:640,resizable:false,minimizable:false,maximizable:false,title:_TR("CLOUD_AMAZONS3_CREATE_BUCKET_WNDTITLE"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onShow,scope:this}});_s7.Storage.Wasabi.NewBucket.superclass.constructor.apply(this,arguments);this.addEvents("apply",
"cancel");this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.args=null;this.isActive=false;this.isFetching=0;_a(this.spCSManager,"_i1").Advise(this)},getHtml:function(){return'<table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lNameId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_BUCKET_NAME")+
_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lBucketLocationId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_BUCKET_LOCATIONS")+_TR("COLON")+'</td><td><div id="'+(this.cbBucketLocationId=Ext.id())+'" style="width: 280px;" ></div></td></tr></table>'},getFooter:function(){return[{xtype:"uibutton",text:_TR("CREATE"),
handler:this.onCreate,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.tfName.setValue("");this.fireEvent("cancel",this);this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:255,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_BUCKET_NAME_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId);
this.cbLocations=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbBucketLocationId,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_BUCKETS_LOCATION_ERRORTIP")},listeners:{focus:this.onBeforeBucketSelect,scope:this}});this.lblBucketsName=Ext.get(this.lBucketLocationId);this.fetchMask=new Ext.UI.LoadMask(Ext.get(this.cbBucketLocationId),{type:Ext.UI.LoadMask.MIDDLE,msgCls:"ui-mask-style1",
frame:false,background:false,delay:0})},show:function(a,b,c,d){this.args={buckets:d,server:a,akey:b,skey:c};_s7.Storage.Wasabi.NewBucket.superclass.show.call(this)},getValue:function(){if(this.tfName)return this.tfName.getValue();return null},onShown:function(){this.isActive=true;this.reset();this.center();this.tfName.focus(false,true)},onHidden:function(){this.args=null;this.isActive=false;this.isFetching=0},onCreate:function(){this.clearError(this.lblName,this.tfName);this.clearError(this.lblBucketsName,
this.cbLocations);var a=this;this.validateInput(this.lblName,this.tfName,function(b){if(a.args.buckets[b])return false;return true})&&this.validateInput(this.lblBucketsName,this.cbLocations)&&this.fireEvent("apply",this,this.tfName.getValue(),this.cbLocations.getValue())},onNameChange:function(){this.clearError(this.lblName,this.tfName)},onBeforeBucketSelect:function(){if(!this.isFetching){this.isFetching=1;this.fetchMask.show();this.spCSManager.updateBucketLocations(this.lpPrefix+"_conn-creation_update_buckets_location",
this.args.server,this.args.akey,this.args.skey)}},reset:function(){this.clearError(this.lblName,this.tfName);this.clearError(this.lblBucketsName,this.cbLocations);this.clearValues()},clearError:function(a,b){if(b.tooltip)b.tooltip.enabled=false;a.removeClass("x-bac-label-error")},clearValues:function(){this.cbLocations.getStore().loadData([]);this.tfName.setValue("")},validateInput:function(a,b,c){a.removeClass("x-bac-label-error");b.tooltip.enabled=false;if(!b.getValue()||c&&!c(b.getValue())){b.tooltip.enabled=
true;a.addClass("x-bac-label-error");return false}return true},populate:function(a){if(this.isActive){this.cbLocations.getStore().loadData([]);for(var b=[],c=0;c<a.length;++c)b.push([a[c].id,_TR(a[c].name)]);this.cbLocations.getStore().loadData(b)}},ICloudStorageManagerEvents:{_o1:function(){},_o2:function(a,b){b===this.lpPrefix+"_conn-creation_update_buckets_location"&&this.populate(this.spCSManager.getBucketLocations())},_o3:function(a,b,c){if(c===this.lpPrefix+"_conn-creation_update_buckets_location"){--this.isFetching||
this.fetchMask.hide();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}}}});Ext.namespace("_s7.Storage.Wasabi");
_s7.Storage.Wasabi.Connections=_._1(_s7.Storage.Connections,{fields:{name:false,akey:true,skey:true,bucket:true,partSize:true,storageClass:true,uploadSpeed:true,downloadSpeed:true,polling:true,encryption:true},constructor:function(){this.stClassTR={STANDARD:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_STANDARD"),REDUCED_REDUNDANCY:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_REDUCED_REDUNDANCY"),STANDARD_IA:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_SIA")};_s7.Storage.Wasabi.Connections.superclass.constructor.apply(this,
arguments)},initNewConnection:function(){var a=_s7.Storage.Wasabi.Connections.superclass.initNewConnection.apply(this,arguments);a.putServer(_s7.WASABI_URL);return a},getTableRowData:function(a){var b=_s7.Storage.Wasabi.Connections.superclass.getTableRowData.apply(this,arguments),c=this.stClassTR[a.getStorageClass()],d=a.getServerEncryption()?_TR("ON"):_TR("OFF");return b+'<div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_STORAGE_CLASS")+
'</div><div class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+c+'">'+c+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_BUCKET_NAME")+'</div><div class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+a.getBucketName()+'">'+a.getBucketName()+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_ENCRYPTED")+'<div class="x-ellipsis" style="height: 22px; line-height: 22px;" title="'+
d+'">'+d+"</div></div>"}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.WasabiFirstPage=_._1(_s7.Storage.Connection.BasePage,{constructor:function(){this.html=this.getHtml();_s7.Storage.Connection.WasabiFirstPage.superclass.constructor.apply(this,arguments);_a(this.spCSManager,"_i1").Advise(this);this.wndNewBucket=new _s7.Storage.Wasabi.NewBucket({lpPrefix:this.lpPrefix,spCSManager:this.spCSManager});this.wndNewBucket.on("apply",this.onWndApply,this);this.wndNewBucket.on("cancel",
this.onWndCancel,this);this.data=null;this.isFetching=0},afterRender:function(){_s7.Storage.Connection.WasabiFirstPage.superclass.afterRender.apply(this,arguments);this.tfServerAddress=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:128,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_SERVERADDRESS_ERRORMESSAGE")},renderTo:this.tfServerAddressId});this.lbllS3Server=Ext.get(this.lServerAddressId);this.lbllS3Server.parent("tr").setDisplayed(false);this.tfAKey=new Ext.UI.TextField({cls:"x-sec-editor-adm",
width:280,inputMaxLength:128,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_ACCESS_KEY_ERRORTIP")},renderTo:this.tfAKeyId,listeners:{keyup:this.onAKeyChange,change:this.onAKeyChange,scope:this}});this.lblAKey=Ext.get(this.lAKeyId);this.tfSKey=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:128,value:"grtPM2sgNhuBM2R+rEPFWzN2yJt6l9+bNfw+qVS/",tooltipCfg:{html:_TR("CLOUD_AMAZONS3_SECRECT_KEY_ERRORTIP")},renderTo:this.tfSKeyId,listeners:{keyup:this.onSKeyChange,change:this.onSKeyChange,scope:this}});
this.lblSKey=Ext.get(this.lSKeyId);this.cbBucket=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbBucketId,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_BUCKETS_ERRORTIP")},listeners:{select:function(a,b,c){this.onBucketSelect(a,b,c)},focus:this.onBeforeBucketSelect,scope:this}});this.lblBucket=Ext.get(this.lBucketId);this.cbBucket.getStore().loadData([]);this.fetchMask=
new Ext.UI.LoadMask(Ext.get(this.cbBucketId),{type:Ext.UI.LoadMask.MIDDLE,msgCls:"ui-mask-style1",frame:false,background:false,delay:0});Ext.get(this.tfAKeyId).parent("tr").setDisplayed(this.fields.akey);Ext.get(this.tfSKeyId).parent("tr").setDisplayed(this.fields.skey);Ext.get(this.cbBucketId).parent("tr").setDisplayed(this.fields.bucket)},onS3ServerChange:function(a,b){this.data=null;switch(b.data.id){case "0":case "1":Ext.get(this.lServerAddressId).parent("tr").setDisplayed(false);break;case "2":Ext.get(this.lServerAddressId).parent("tr").setDisplayed(true);
break}},onAKeyChange:function(){this.clearError(this.lblAKey,this.tfAKey)},onSKeyChange:function(){this.clearError(this.lblSKey,this.tfSKey)},onBucketSelect:function(a,b,c){if(b.data.id===""){a={};for(c=0;this.data&&this.data.connections&&c<this.data.connections.length;++c){b=_a(this.data.connections[c],"ICloudStorageConnection");a[b.getBucketName()]=true}for(c=0;c<this.data&&this.data.buckets&&this.data.buckets.length;++c)a[this.data.buckets[c].bucket]=true;this.wndNewBucket.show(this.getS3URL(),
this.tfAKey.getValue(),this.tfSKey.getValue(),a)}},getS3URL:function(){return _s7.WASABI_URL},onBeforeBucketSelect:function(){if(!this.isFetching&&this.validateInput(this.lblAKey,this.tfAKey)&&this.validateInput(this.lblSKey,this.tfSKey)){this.spCSManager.updateBuckets(this.lpPrefix+"_conn-creation_update_buckets",this.getS3URL(),this.tfAKey.getValue(),this.tfSKey.getValue());this.spCSManager.updateConnections(this.lpPrefix+"_conn-creation_update_connections")}},onWndApply:function(a,
b,c){this.spCSManager.addBucket(this.lpPrefix+"_conn-creation_add_bucket",this.getS3URL(),this.tfAKey.getValue(),this.tfSKey.getValue(),b,c)},onWndCancel:function(){this.wndNewBucket.hide()},onShow:function(){_s7.Storage.Connection.FirstPage.superclass.onShow.apply(this,arguments);this.tfAKey.setValue(this.connection.getAKey());this.tfSKey.setValue(this.connection.getSKey())},doValidate:function(){if(this.isFetching||this.fields.akey&&!this.validateInput(this.lblAKey,this.tfAKey)||this.fields.skey&&
!this.validateInput(this.lblSKey,this.tfSKey))return false;return true},validateBucketName:function(a){return!/[A-Z]/.test(a)},doApply:function(){this.connection.putAKey(this.tfAKey.getValue());this.connection.putSKey(this.tfSKey.getValue());this.connection.putBucketName(this.cbBucket.getValue());this.connection.putServer(this.getS3URL())},doReset:function(){_s7.Storage.Connection.WasabiFirstPage.superclass.doReset.apply(this,arguments);this.data=null;this.isFetching=0;this.fetchMask.hide();
this.clearError(this.lbllS3Server,this.tfServerAddress);this.clearError(this.lblAKey,this.tfAKey);this.clearError(this.lblSKey,this.tfSKey);this.clearError(this.lblBucket,this.cbBucket);this.clearValues()},populate:function(a){if(this.isActive){this.cbBucket.getStore().loadData([]);for(var b=[["",_TR("CLOUD_AMAZONS3_CREATE_BUCKET_CBITEM")]],c=0;c<a.buckets.length;++c){for(var d=false,e=0;e<a.connections.length;++e)if(_a(a.connections[e],"ICloudStorageConnection").getBucketName()===a.buckets[c].bucket)d=
true;d||b.push([a.buckets[c].bucket,a.buckets[c].bucket])}this.cbBucket.getStore().loadData(b);(a=this.wndNewBucket.getValue())&&a.length&&this.cbBucket.setValue(a)}},clearValues:function(){this.tfAKey.reset();this.tfSKey.reset();this.cbBucket.getStore().loadData([]);this.cbBucket.reset();this.tfServerAddress.reset();this.lbllS3Server.parent("tr").setDisplayed(false)},getHtml:function(){return'<div><table cellpadding="0" cellspacing="0" style="width: 100%;" ><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lServerAddressId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_SERVERADDRESS")+_TR("COLON")+'</td><td id="'+(this.tfServerAddressId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lAKeyId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_ACCESS_KEY")+_TR("COLON")+'</td><td id="'+(this.tfAKeyId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lSKeyId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_SECRECT_KEY")+_TR("COLON")+'</td><td id="'+(this.tfSKeyId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lBucketId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_BUCKET_NAME")+_TR("COLON")+'</td><td ><div id="'+(this.cbBucketId=Ext.id())+'" style="width: 280px;"></div></td></tr></table></div>'},ICloudStorageManagerEvents:{_o1:function(a,
b){if(b===this.lpPrefix+"_conn-creation_update_connections"||b===this.lpPrefix+"_conn-creation_update_buckets"||b===this.lpPrefix+"_conn-creation_add_bucket")this.isFetching++||this.fetchMask.show()},_o2:function(a,b){if(b===this.lpPrefix+"_conn-creation_update_connections"){if(!this.data)this.data={};this.data.connections=this.spCSManager.getConnections();this.data.connections&&this.data.buckets&&this.populate(this.data)}if(b===this.lpPrefix+"_conn-creation_update_buckets"){if(!this.data)this.data=
{};this.data.buckets=this.spCSManager.getBuckets();this.data.connections&&this.data.buckets&&this.populate(this.data)}if(b===this.lpPrefix+"_conn-creation_add_bucket"){this.wndNewBucket.hide();this.spCSManager.updateBuckets(this.lpPrefix+"_conn-creation_update_buckets",this.getS3URL(),this.tfAKey.getValue(),this.tfSKey.getValue());this.spCSManager.updateConnections(this.lpPrefix+"_conn-creation_update_connections")}},_o3:function(a,b,c){if(c===this.lpPrefix+"_conn-creation_update_connections"||
c===this.lpPrefix+"_conn-creation_update_buckets"||c===this.lpPrefix+"_conn-creation_add_bucket"){--this.isFetching||this.fetchMask.hide();var d=["45007000057","45007000058","45007000059","45007000060","45007000061","45007000062","45007000063","45007000064","45007000023","45007000024","45007000025","45007000026","45007000027","45007000028"];if(a!=_5){a=_a(b,"_io").getLastNMLError();b=a.getErrorCode();if(c===this.lpPrefix+"_conn-creation_add_bucket"&&~d.indexOf(b))Ext.UI.MessageBox.show({title:_TR("MESSAGEBOX_WARNING"),
msg:_TR(b),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:400});else{if(c===this.lpPrefix+"_conn-creation_update_buckets"||c===this.lpPrefix+"_conn-creation_add_bucket"){this.cbBucket.getStore().loadData([]);this.cbBucket.setValue("")}_s7.Storage.showError(this.title,a)}}}}}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.WasabiOptions=_._1(_s7.Storage.Connection.BasePage,{constructor:function(){this.html=this.getHtml();_s7.Storage.Connection.WasabiOptions.superclass.constructor.apply(this,arguments)},initAllPHEvent:function(){_.initElePHEvent(this.spnUploadKbs,_TR("READYDR_UNLIMITED"));_.initElePHEvent(this.spnDownloadKbs,_TR("READYDR_UNLIMITED"))},afterRender:function(){_s7.Storage.Connection.WasabiOptions.superclass.afterRender.apply(this,
arguments);this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:31,tooltipCfg:{html:_TR("CLOUD_STORAGE_CONNECTION_NAME_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId);this.cbPartSz=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id"],data:[["16MB"],["32MB"],["64MB"],["128MB"],["256MB"],["512MB"],
["1GB"],["2GB"],["5GB"]]}),valueField:"id",displayField:"id",value:"64MB",renderTo:this.cbPartSzId,tooltipCfg:{html:_TR("CLOUD_AMAZONS3_PARTSIZE_ERRORTIP")},listeners:{beforeselect:function(a,b,c){this.onUploadChunkSizeSelect(a,b,c)},scope:this}});this.lblPartSz=Ext.get(this.lPartSzId);this.cbStClass=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbStClassId,
tooltipCfg:{html:_TR("CLOUD_AMAZONS3_STCLASS_ERRORTIP")}});this.lblStClass=Ext.get(this.lStClassId);this.cbStClass.getStore().loadData([["STANDARD",_TR("CLOUD_AMAZONS3_STORAGE_CLASS_STANDARD")]]);this.cbStClass.setValue("STANDARD");this.spnUploadKbs=new Ext.UI.SpinnerField({width:280,minValue:0,maxValue:2147483647,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.spnUploadKbs.render(this.spnUploadKbsId);new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",
style:"display: inline-block; margin: 1px 0 0 5px; vertical-align: middle;",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("CLOUD_STORAGE_LOAD_SPEED_TIP")})}}});this.spnDownloadKbs=new Ext.UI.SpinnerField({width:280,minValue:0,maxValue:2147483647,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.spnDownloadKbs.render(this.spnDownloadKbsId);new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"display: inline-block; margin: 1px 0 0 5px; vertical-align: middle;",
listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("CLOUD_STORAGE_LOAD_SPEED_TIP")})}}});this.spnSyncInterval=new Ext.UI.SpinnerField({width:180,value:1,minValue:1,maxValue:24,incrementValue:1,alternateIncrementValue:10,allowDecimals:false,validationDelay:1E3,renderTo:this.spnSyncIntervalId});this.cbSyncInterval=new Ext.UI.ComboBox({width:95,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["0",_TR("CLOUD_SYNC_INTERVAL_HOURS")],
["1",_TR("CLOUD_SYNC_INTERVAL_DAYS")]]}),valueField:"id",displayField:"text",value:"0",renderTo:this.cbSyncIntervalId,listeners:{scope:this,collapse:this.onSyncIntervalSelected}});this.chEncryption=new Ext.UI.Checkbox({checked:false,disabled:false});this.chEncryption.render(this.chEncryptionId);Ext.get(this.tfNameId).parent("tr").setDisplayed(this.fields.name);if(this.lpPrefix.toLowerCase()===_TR("CLOUD_AZURE_TITLE_EXT").toLowerCase()){Ext.get(this.cbPartSzId).parent("tr").setDisplayed(false);Ext.get(this.cbStClassId).parent("tr").setDisplayed(false)}else{Ext.get(this.cbPartSzId).parent("tr").setDisplayed(this.fields.partSize);
Ext.get(this.cbStClassId).parent("tr").setDisplayed(this.fields.storageClass)}Ext.get(this.spnUploadKbsId).parent("tr").setDisplayed(this.fields.uploadSpeed);Ext.get(this.spnDownloadKbsId).parent("tr").setDisplayed(this.fields.downloadSpeed)},onSyncIntervalSelected:function(a){var b=this.spnSyncInterval.getValue(),c=24;switch(a.getValue()){case "0":if(b>24)b=24;c=24;break;case "1":if(b>30)b=30;c=30;break}this.spnSyncInterval.maxValue=c;this.spnSyncInterval.setValue(b)},onNameChange:function(){this.clearError(this.lblName,
this.tfName)},onPartSzSelect:function(){this.clearError(this.lblPartSz,this.cbPartSzId)},onClassSelect:function(){this.clearError(this.lblStClass,this.cbStClassId)},onUploadChunkSizeSelect:function(a){var b=a.lastSelectionText;Ext.UI.MessageBox.show({title:"",msg:_TR("CLOUD_AMAZONS3_PART_SIZE_WARNING"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.INFO,fn:function(c){c=="cancel"&&a.setValue(b)}})},clearValues:function(){this.tfName.setValue("");this.cbPartSz.setValue("64MB");this.cbStClass.setValue("STANDARD");
this.spnUploadKbs.setValue();this.spnDownloadKbs.setValue();_.initElePHEvent(this.spnUploadKbs,_TR("READYDR_UNLIMITED"));_.initElePHEvent(this.spnDownloadKbs,_TR("READYDR_UNLIMITED"));this.chEncryption.setValue(true);this.spnSyncInterval.setValue(1);this.cbSyncInterval.setValue("0")},getHtml:function(){return'<div><table cellpadding="0" cellspacing="0" style="width: 100%;" ><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lPartSzId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_PART_SIZE")+_TR("COLON")+'</td><td id="'+(this.cbPartSzId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lStClassId=Ext.id())+'">'+_TR("CLOUD_AMAZONS3_STORAGE_CLASS")+_TR("COLON")+'</td><td id="'+(this.cbStClassId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lUploadKbsId=Ext.id())+'">'+_TR("CLOUD_STORAGE_MAX_UPLOAD_KBS")+_TR("COLON")+'</td><td id="'+(this.spnUploadKbsId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;"  id="'+
(this.lDownloadKbsId=Ext.id())+'">'+_TR("CLOUD_STORAGE_MAX_DOWNLOAD_KBS")+_TR("COLON")+'</td><td id="'+(this.spnDownloadKbsId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%; min-width: 80px; word-break: break-all; white-space: normal;">'+_TR("CLOUD_SYNC_INTERVAL")+_TR("COLON")+'</td><td><table cellspadding="0" cellspacing="0"><tr><td id="'+(this.spnSyncIntervalId=Ext.id())+'"></td><td  style="padding-left:3px;" id="'+(this.cbSyncIntervalId=
Ext.id())+'"></td></tr></table></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" >'+_TR("CLOUD_AMAZONS3_ENCRYPTION")+_TR("COLON")+'</td><td id="'+(this.chEncryptionId=Ext.id())+'"></td></tr></table></div>'},init:function(a){_s7.Storage.Connection.WasabiOptions.superclass.init.apply(this,arguments);this.tfName.setValue(a.getName());this.cbPartSz.setValue(a.getPartSizeMB()+
_TR("MB"));this.cbStClass.setValue(a.getStorageClass());var b=a.getMaxUploadKBS(),c=a.getMaxDownloadKBS();b!=0&&this.spnUploadKbs.setValue(b);c!=0&&this.spnDownloadKbs.setValue(c);this.chEncryption.setValue(true);if(a.getId()){b=+a.getPollingSec();var d;c=30;if(b>=86400){d=b/3600/24;this.cbSyncInterval.setValue("1");c=30}else if(b>=3600){d=b/3600;this.cbSyncInterval.setValue("0");c=24}this.spnSyncInterval.maxValue=c;this.spnSyncInterval.setValue(d)}},doValidate:function(){if(this.fields.name&&!this.validateInput(this.lblName,
this.tfName)||this.fields.partSize&&!this.validateInput(this.lblPartSz,this.cbPartSz)||this.fields.storageClass&&!this.validateInput(this.lblStClass,this.cbStClass))return false;return true},doApply:function(){this.connection.putName(this.tfName.getValue());this.connection.putPartSizeMB(this.cbPartSz.getValue());this.connection.putStorageClass(this.cbStClass.getValue());var a=this.spnUploadKbs.getValue(),b=this.spnDownloadKbs.getValue();this.connection.putMaxUploadKBS(a==""?"0":a);this.connection.putMaxDownloadKBS(b==
""?"0":b);a=this.cbSyncInterval.getValue();b=+this.spnSyncInterval.getValue();b=a=="0"?b*60*60:b*24*60*60;this.connection.putPollingSec(b);this.connection.putServerEncryption(this.chEncryption.getValue())},doReset:function(){_s7.Storage.Connection.WasabiOptions.superclass.doReset.apply(this,arguments);this.clearError(this.lblName,this.tfName);this.clearError(this.lblPartSz,this.cbPartSz);this.clearError(this.lblStClass,this.cbStClass);this.clearValues()}});Ext.namespace("_s7.Storage");
_s7.AZURE_URL="https://portal.azure.com";
_s7.Storage.Azure=_._1(_s7.Storage.Panel,{help:"backup_panel_azurebox",lpPrefix:"azure",singleConnection:"Azure",isBeta:false,constructor:function(){_.apply(this,{url:"https://portal.azure.com",title:_TR("CLOUD_AZURE_TITLE_EXT"),tip:String.format(_TR("CLOUD_AZURE_INSTRUCTION"),'<a class="x-frontview-link" href="https://portal.azure.com" target="_blank">https://portal.azure.com</a>'),iconCls:"x-azure-icon",msgConfirmDisable:String.format(_TR("SERVICE_DISABLE"),_TR("CLOUD_AZURE_TITLE_EXT"))});
_s7.Storage.Azure.superclass.constructor.apply(this,arguments);this.spCSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getCloudStorageAzureManager();_a(this.spCSManager,"_i1").Advise(this);this.wndOptions=new _s7.Storage.OptionsWindow({ClsConnectionsBlock:_s7.Storage.Azure.Connections,spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,authUrl:this.authUrl,help:"cloud_wnd_azure_options",
title:this.title})}});Ext.namespace("_s7.Storage.Azure");
_s7.Storage.Azure.Connections=_._1(_s7.Storage.Connections,{fields:{name:false,akey:true,skey:true,bucket:true,partSize:true,storageClass:true,uploadSpeed:true,downloadSpeed:true,polling:true,encryption:true},constructor:function(){this.stClassTR={STANDARD:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_STANDARD"),REDUCED_REDUNDANCY:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_REDUCED_REDUNDANCY"),STANDARD_IA:_TR("CLOUD_AMAZONS3_STORAGE_CLASS_SIA")};_s7.Storage.Azure.Connections.superclass.constructor.apply(this,
arguments);this.wndConnEdit=new _s7.Storage.Connection.Edit({title:this.title,fields:this.fields,lpPrefix:this.lpPrefix,spCSManager:this.spCSManager,listeners:{logclick:this.onShowLog,scope:this}})},initNewConnection:function(){var a=_s7.Storage.Azure.Connections.superclass.initNewConnection.apply(this,arguments);a.putServer(_s7.AZURE_URL);return a},getTableRowData:function(a){var b=_s7.Storage.Azure.Connections.superclass.getTableRowData.apply(this,
arguments),c=this.stClassTR[a.getStorageClass()],d=a.getServerEncryption()?_TR("ON"):_TR("OFF");return b+'<div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_STORAGE_CLASS")+'</div><div class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+c+'">'+c+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_BUCKET_NAME")+'</div><div class="x-ellipsis" style="height: 30px; line-height: 20px;" title="'+
a.getContainerName()+'">'+a.getContainerName()+'</div><div class="x-ellipsis" style="height: 22px; line-height: 22px; color: #2469d4;">'+_TR("CLOUD_AMAZONS3_ENCRYPTED")+'<div class="x-ellipsis" style="height: 22px; line-height: 22px;" title="'+d+'">'+d+"</div></div>"}});_._2("_s7.Storage.Azure");
_s7.Storage.Azure.NewBucket=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_azure_new_bucket",constructor:function(){_.apply(this,{modal:true,width:640,resizable:false,minimizable:false,maximizable:false,title:_TR("CLOUD_AZURE_CREATE_CONTAINER_WNDTITLE"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onShow,scope:this}});_s7.Storage.Azure.NewBucket.superclass.constructor.apply(this,arguments);this.addEvents("apply",
"cancel");this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.args=null;this.isActive=false;this.isFetching=0;_a(this.spCSManager,"_i1").Advise(this)},getHtml:function(){return'<table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lNameId=Ext.id())+'">'+_TR("CLOUD_AZURE_CONTAINER_NAME")+
_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; display:none;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lBucketLocationId=Ext.id())+'">'+_TR("CLOUD_AZURE_BUCKET_LOCATIONS")+_TR("COLON")+'</td><td style="display:none;"><div id="'+(this.cbBucketLocationId=Ext.id())+'" style="width: 280px;" ></div></td></tr></table>'},getFooter:function(){return[{xtype:"uibutton",
text:_TR("CREATE"),handler:this.onCreate,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.fireEvent("cancel",this);this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:255,tooltipCfg:{html:_TR("CLOUD_AZURE_CONTAINER_NAME_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId);this.cbLocations=
new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbBucketLocationId,tooltipCfg:{html:_TR("CLOUD_AZURE_BUCKETS_LOCATION_ERRORTIP")},listeners:{focus:this.onBeforeBucketSelect,scope:this}});this.lblBucketsName=Ext.get(this.lBucketLocationId);this.fetchMask=new Ext.UI.LoadMask(Ext.get(this.cbBucketLocationId),{type:Ext.UI.LoadMask.MIDDLE,msgCls:"ui-mask-style1",
frame:false,background:false,delay:0})},show:function(a,b,c,d){this.args={buckets:d,server:a,akey:b,skey:c};_s7.Storage.Azure.NewBucket.superclass.show.call(this)},getValue:function(){if(this.tfName)return this.tfName.getValue();return null},onShown:function(){this.isActive=true;this.reset();this.center();this.tfName.focus(false,true)},onHidden:function(){this.args=null;this.isActive=false;this.isFetching=0},onCreate:function(){this.clearError(this.lblName,this.tfName);this.clearError(this.lblBucketsName,
this.cbLocations);var a=this;if(this.validateInput(this.lblName,this.tfName,function(b){if(a.args.buckets[b])return false;return true})){this.fireEvent("apply",this,this.tfName.getValue(),this.cbLocations.getValue());this.hide()}},onNameChange:function(){this.clearError(this.lblName,this.tfName)},onBeforeBucketSelect:function(){if(!this.isFetching){this.isFetching=1;this.fetchMask.show();this.spCSManager.updateBucketLocations(this.lpPrefix+"_conn-creation_update_buckets_location",this.args.server,
this.args.akey,this.args.skey)}},reset:function(){this.clearError(this.lblName,this.tfName);this.clearError(this.lblBucketsName,this.cbLocations);this.clearValues()},clearError:function(a,b){if(b.tooltip)b.tooltip.enabled=false;a.removeClass("x-bac-label-error")},clearValues:function(){this.cbLocations.getStore().loadData([]);this.tfName.setValue("")},validateInput:function(a,b,c){a.removeClass("x-bac-label-error");b.tooltip.enabled=false;if(!b.getValue()||c&&!c(b.getValue())){b.tooltip.enabled=true;
a.addClass("x-bac-label-error");return false}return true},populate:function(a){if(this.isActive){this.cbLocations.getStore().loadData([]);for(var b=[],c=0;c<a.length;++c)b.push([a[c].id,_TR(a[c].name)]);this.cbLocations.getStore().loadData(b)}},ICloudStorageManagerEvents:{_o1:function(){},_o2:function(a,b){b===this.lpPrefix+"_conn-creation_update_buckets_location"&&this.populate(this.spCSManager.getBucketLocations())},_o3:function(a,b,c){if(c===this.lpPrefix+"_conn-creation_update_buckets_location"){--this.isFetching||
this.fetchMask.hide();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}}}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.AzureFirstPage=_._1(_s7.Storage.Connection.BasePage,{constructor:function(){this.html=this.getHtml();_s7.Storage.Connection.AzureFirstPage.superclass.constructor.apply(this,arguments);_a(this.spCSManager,"_i1").Advise(this);this.wndNewBucket=new _s7.Storage.Azure.NewBucket({lpPrefix:this.lpPrefix,spCSManager:this.spCSManager});this.wndNewBucket.on("apply",this.onWndApply,this);this.wndNewBucket.on("cancel",
this.onWndCancel,this);this.data=null;this.isFetching=0},afterRender:function(){_s7.Storage.Connection.AzureFirstPage.superclass.afterRender.apply(this,arguments);this.tfAKey=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:128,tooltipCfg:{html:_TR("CLOUD_AZURE_ACCOUNT_ERRORTIP")},renderTo:this.tfAKeyId,listeners:{keyup:this.onAKeyChange,change:this.onAKeyChange,scope:this}});this.lblAKey=Ext.get(this.lAKeyId);this.tfSKey=new Ext.UI.TextField({cls:"x-sec-editor-adm",
width:280,inputMaxLength:128,tooltipCfg:{html:_TR("CLOUD_AZURE_ACCESS_KEY_ERRORTIP")},renderTo:this.tfSKeyId,listeners:{keyup:this.onSKeyChange,change:this.onSKeyChange,scope:this}});this.lblSKey=Ext.get(this.lSKeyId);this.cbBucket=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbBucketId,tooltipCfg:{html:_TR("CLOUD_AZURE_CONTAINER_ERRORTIP")},listeners:{select:function(a,
b,c){this.onBucketSelect(a,b,c)},focus:this.onBeforeBucketSelect,scope:this}});this.lblBucket=Ext.get(this.lBucketId);this.cbBucket.getStore().loadData([]);this.cbRegion=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbRegionId,tooltipCfg:{html:"Wrong region"}});this.lblRegion=Ext.get(this.lRegionId);this.cbRegion.getStore().loadData([["Global","Global"],
["China","China"]]);this.fetchMask=new Ext.UI.LoadMask(Ext.get(this.cbBucketId),{type:Ext.UI.LoadMask.MIDDLE,msgCls:"ui-mask-style1",frame:false,background:false,delay:0});Ext.get(this.tfAKeyId).parent("tr").setDisplayed(this.fields.akey);Ext.get(this.tfSKeyId).parent("tr").setDisplayed(this.fields.skey);Ext.get(this.cbBucketId).parent("tr").setDisplayed(this.fields.bucket)},onAKeyChange:function(){this.clearError(this.lblAKey,this.tfAKey)},onSKeyChange:function(){this.clearError(this.lblSKey,this.tfSKey)},
onBucketSelect:function(a,b,c){if(b.data.id===""){a={};for(c=0;this.data&&this.data.connections&&c<this.data.connections.length;++c){b=_a(this.data.connections[c],"ICloudStorageConnection");a[b.getContainerName()]=true}for(c=0;c<this.data&&this.data.buckets&&this.data.buckets.length;++c)a[this.data.buckets[c].bucket]=true;this.wndNewBucket.show(_s7.AMAZON_S3_URL,this.tfAKey.getValue(),this.tfSKey.getValue(),a)}},onBeforeBucketSelect:function(){if(!this.isFetching&&this.validateInput(this.lblAKey,
this.tfAKey)&&this.validateInput(this.lblSKey,this.tfSKey)&&this.validateInput(this.lblRegion,this.cbRegion)){this.spCSManager.updateBuckets(this.lpPrefix+"_conn-creation_update_buckets",this.tfAKey.getValue(),this.tfSKey.getValue(),this.cbRegion.getValue());this.spCSManager.updateConnections(this.lpPrefix+"_conn-creation_update_connections")}},onWndApply:function(a,b){this.spCSManager.addBucket(this.lpPrefix+"_conn-creation_add_bucket",this.tfAKey.getValue(),this.tfSKey.getValue(),b,this.cbRegion.getValue());
this.wndNewBucket.hide()},onWndCancel:function(){this.wndNewBucket.hide()},onShow:function(){_s7.Storage.Connection.AzureFirstPage.superclass.onShow.apply(this,arguments);this.tfAKey.setValue(this.connection.getAKey());this.tfSKey.setValue(this.connection.getSKey())},doValidate:function(){if(this.isFetching||this.fields.akey&&!this.validateInput(this.lblAKey,this.tfAKey)||this.fields.skey&&!this.validateInput(this.lblSKey,this.tfSKey)||this.fields.bucket&&!this.validateInput(this.lblBucket,
this.cbBucket,this.validateBucketName))return false;return true},validateBucketName:function(a){return!/[A-Z]/.test(a)},doApply:function(){this.connection.putAKey(this.tfAKey.getValue());this.connection.putSKey(this.tfSKey.getValue());this.connection.putContainerName(this.cbBucket.getValue());this.connection.putRegion(this.cbRegion.getValue())},doReset:function(){_s7.Storage.Connection.AzureFirstPage.superclass.doReset.apply(this,arguments);this.data=null;this.isFetching=0;this.fetchMask.hide();
this.clearError(this.lblAKey,this.tfAKey);this.clearError(this.lblSKey,this.tfSKey);this.clearError(this.lblBucket,this.cbBucket);this.clearError(this.lblRegion,this.cbRegion);this.clearValues()},populate:function(a){if(this.isActive){this.cbBucket.getStore().loadData([]);for(var b=[["",_TR("CLOUD_AZURE_CREATE_CONTAINER_CBITEM")]],c=0;c<a.buckets.length;++c){for(var d=false,e=0;e<a.connections.length;++e)if(_a(a.connections[e],"ICloudStorageConnection").getContainerName()===a.buckets[c].bucket)d=
true;d||b.push([a.buckets[c].bucket,a.buckets[c].bucket])}this.cbBucket.getStore().loadData(b);(a=this.wndNewBucket.getValue())&&a.length&&this.cbBucket.setValue(a)}},clearValues:function(){this.tfAKey.reset();this.tfSKey.reset();this.cbBucket.getStore().loadData([]);this.cbBucket.reset()},getHtml:function(){return'<div><table cellpadding="0" cellspacing="0" style="width: 100%;" ><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lAKeyId=Ext.id())+'">'+_TR("CLOUD_AZURE_ACCOUNT")+_TR("COLON")+'</td><td id="'+(this.tfAKeyId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lSKeyId=Ext.id())+'">'+_TR("CLOUD_AZURE_ACCESS_KEY")+_TR("COLON")+'</td><td id="'+(this.tfSKeyId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lRegionId=Ext.id())+'">'+_TR("CLOUD_AZURE_REGION_NAME")+_TR("COLON")+'</td><td ><div id="'+(this.cbRegionId=Ext.id())+'" style="width: 280px;"></div></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lBucketId=Ext.id())+'">'+_TR("CLOUD_AZURE_CONTAINER_NAME")+_TR("COLON")+'</td><td ><div id="'+(this.cbBucketId=Ext.id())+'" style="width: 280px;"></div></td></tr></table></div>'},
ICloudStorageManagerEvents:{_o1:function(a,b){if(b===this.lpPrefix+"_conn-creation_update_connections"||b===this.lpPrefix+"_conn-creation_update_buckets"||b===this.lpPrefix+"_conn-creation_add_bucket")this.isFetching++||this.fetchMask.show()},_o2:function(a,b){if(b===this.lpPrefix+"_conn-creation_update_connections"){if(!this.data)this.data={};this.data.connections=this.spCSManager.getConnections();this.data.connections&&this.data.buckets&&this.populate(this.data)}if(b===this.lpPrefix+
"_conn-creation_update_buckets"){if(!this.data)this.data={};this.data.buckets=this.spCSManager.getBuckets();this.data.connections&&this.data.buckets&&this.populate(this.data)}if(b===this.lpPrefix+"_conn-creation_add_bucket"){this.spCSManager.updateBuckets(this.lpPrefix+"_conn-creation_update_buckets",this.tfAKey.getValue(),this.tfSKey.getValue(),this.cbRegion.getValue());this.spCSManager.updateConnections(this.lpPrefix+"_conn-creation_update_connections")}},_o3:function(a,b,c){if(c===this.lpPrefix+
"_conn-creation_update_connections"||c===this.lpPrefix+"_conn-creation_update_buckets"||c===this.lpPrefix+"_conn-creation_add_bucket"){--this.isFetching||this.fetchMask.hide();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError())}}}});Ext.namespace("_s7.Storage");
_s7.Storage.Connection.AzureOptions=_._1(_s7.Storage.Connection.BasePage,{constructor:function(){this.html=this.getHtml();_s7.Storage.Connection.AzureOptions.superclass.constructor.apply(this,arguments)},initAllPHEvent:function(){_.initElePHEvent(this.spnUploadKbs,_TR("READYDR_UNLIMITED"));_.initElePHEvent(this.spnDownloadKbs,_TR("READYDR_UNLIMITED"))},afterRender:function(){_s7.Storage.Connection.AzureOptions.superclass.afterRender.apply(this,
arguments);this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:31,tooltipCfg:{html:_TR("CLOUD_STORAGE_CONNECTION_NAME_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId);this.cbPartSz=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id"],data:[["16"],["32"],["64"],["128"],["256"],["512"],["1024"],["2048"],
["5120"]]}),valueField:"id",displayField:"id",value:"64",renderTo:this.cbPartSzId,tooltipCfg:{html:_TR("CLOUD_AZURE_PARTSIZE_ERRORTIP")}});this.lblPartSz=Ext.get(this.lPartSzId);this.cbStClass=new Ext.UI.ComboBox({cls:"x-sec-editor-adm",width:280,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"]}),valueField:"id",displayField:"text",renderTo:this.cbStClassId,tooltipCfg:{html:_TR("CLOUD_AZURE_STCLASS_ERRORTIP")}});this.lblStClass=Ext.get(this.lStClassId);this.cbStClass.getStore().loadData([["STANDARD",
_TR("CLOUD_AZURE_STORAGE_CLASS_STANDARD")],["REDUCED_REDUNDANCY",_TR("CLOUD_AZURE_STORAGE_CLASS_REDUCED_REDUNDANCY")],["STANDARD_IA",_TR("CLOUD_AZURE_STORAGE_CLASS_SIA")]]);this.cbStClass.setValue("STANDARD");this.spnUploadKbs=new Ext.UI.SpinnerField({width:280,minValue:0,maxValue:2147483647,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.spnUploadKbs.render(this.spnUploadKbsId);new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"display: inline-block; margin: 1px 0 0 5px; vertical-align: middle;",
listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("CLOUD_STORAGE_LOAD_SPEED_TIP")})}}});this.spnDownloadKbs=new Ext.UI.SpinnerField({width:280,minValue:0,maxValue:2147483647,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.spnDownloadKbs.render(this.spnDownloadKbsId);new Ext.UI.RoundButton({cls:this.panelCls+"-hintbtn x-frontview-btn-info",style:"display: inline-block; margin: 1px 0 0 5px; vertical-align: middle;",listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,
{width:230,html:_TR("CLOUD_STORAGE_LOAD_SPEED_TIP")})}}});this.spnSyncInterval=new Ext.UI.SpinnerField({width:180,value:1,minValue:1,maxValue:24,incrementValue:1,alternateIncrementValue:10,allowDecimals:false,validationDelay:1E3,renderTo:this.spnSyncIntervalId});this.cbSyncInterval=new Ext.UI.ComboBox({width:95,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["0",_TR("CLOUD_SYNC_INTERVAL_HOURS")],["1",_TR("CLOUD_SYNC_INTERVAL_DAYS")]]}),valueField:"id",displayField:"text",
value:"0",renderTo:this.cbSyncIntervalId,listeners:{scope:this,collapse:this.onSyncIntervalSelected}});this.chEncryption=new Ext.UI.Checkbox({checked:false});this.chEncryption.render(this.chEncryptionId);Ext.get(this.tfNameId).parent("tr").setDisplayed(this.fields.name);Ext.get(this.spnUploadKbsId).parent("tr").setDisplayed(this.fields.uploadSpeed);Ext.get(this.spnDownloadKbsId).parent("tr").setDisplayed(this.fields.downloadSpeed)},onSyncIntervalSelected:function(a){var b=this.spnSyncInterval.getValue(),
c=24;switch(a.getValue()){case "0":if(b>24)b=24;c=24;break;case "1":if(b>30)b=30;c=30;break}this.spnSyncInterval.maxValue=c;this.spnSyncInterval.setValue(b)},onNameChange:function(){this.clearError(this.lblName,this.tfName)},onPartSzSelect:function(){this.clearError(this.lblPartSz,this.cbPartSzId)},onClassSelect:function(){this.clearError(this.lblStClass,this.cbStClassId)},clearValues:function(){this.tfName.setValue("");this.cbPartSz.setValue("64");this.cbStClass.setValue("STANDARD");this.spnUploadKbs.setValue();
this.spnDownloadKbs.setValue();_.initElePHEvent(this.spnUploadKbs,_TR("READYDR_UNLIMITED"));_.initElePHEvent(this.spnDownloadKbs,_TR("READYDR_UNLIMITED"));this.spnSyncInterval.setValue(1);this.cbSyncInterval.setValue("0");this.chEncryption.setValue(false)},getHtml:function(){return'<div><table cellpadding="0" cellspacing="0" style="width: 100%;" ><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'" ></td></tr><tr style="display:none;"><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lPartSzId=Ext.id())+'">'+_TR("CLOUD_AZURE_PART_SIZE")+_TR("COLON")+'</td><td id="'+(this.cbPartSzId=Ext.id())+'" ></td></tr><tr style="display:none;"><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+
(this.lStClassId=Ext.id())+'">'+_TR("CLOUD_AZURE_STORAGE_CLASS")+_TR("COLON")+'</td><td id="'+(this.cbStClassId=Ext.id())+'" ></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" id="'+(this.lUploadKbsId=Ext.id())+'">'+_TR("CLOUD_STORAGE_MAX_UPLOAD_KBS")+_TR("COLON")+'</td><td id="'+(this.spnUploadKbsId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;"  id="'+
(this.lDownloadKbsId=Ext.id())+'">'+_TR("CLOUD_STORAGE_MAX_DOWNLOAD_KBS")+_TR("COLON")+'</td><td id="'+(this.spnDownloadKbsId=Ext.id())+'"></td></tr><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%; min-width: 80px; word-break: break-all; white-space: normal;">'+_TR("CLOUD_SYNC_INTERVAL")+_TR("COLON")+'</td><td><table cellspadding="0" cellspacing="0"><tr><td id="'+(this.spnSyncIntervalId=Ext.id())+'"></td><td  style="padding-left:3px;" id="'+(this.cbSyncIntervalId=
Ext.id())+'"></td></tr></table></td></tr><tr style="display:none;"><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle; width: 50%;min-width: 80px; word-break: break-all; white-space: normal;" >'+_TR("CLOUD_AZURE_ENCRYPTION")+_TR("COLON")+'</td><td id="'+(this.chEncryptionId=Ext.id())+'"></td></tr></table></div>'},init:function(a){_s7.Storage.Connection.AzureOptions.superclass.init.apply(this,arguments);this.tfName.setValue(a.getName());this.cbPartSz.setValue(a.getPartSizeMB());
this.cbStClass.setValue(a.getStorageClass());var b=a.getMaxUploadKBS(),c=a.getMaxDownloadKBS();b!=0&&this.spnUploadKbs.setValue(b);c!=0&&this.spnDownloadKbs.setValue(c);this.chEncryption.setValue(a.getServerEncryption());if(a.getId()){b=+a.getPollingSec();var d;c=30;if(b>=86400){d=b/3600/24;this.cbSyncInterval.setValue("1");c=30}else if(b>=3600){d=b/3600;this.cbSyncInterval.setValue("0");c=24}this.spnSyncInterval.maxValue=c;this.spnSyncInterval.setValue(d)}},doValidate:function(){if(this.fields.name&&
!this.validateInput(this.lblName,this.tfName)||this.fields.partSize&&!this.validateInput(this.lblPartSz,this.cbPartSz)||this.fields.storageClass&&!this.validateInput(this.lblStClass,this.cbStClass))return false;return true},doApply:function(){this.connection.putName(this.tfName.getValue());this.connection.putPartSizeMB(this.cbPartSz.getValue());this.connection.putStorageClass(this.cbStClass.getValue());var a=this.spnUploadKbs.getValue(),b=this.spnDownloadKbs.getValue();this.connection.putMaxUploadKBS(a==
""?"0":a);this.connection.putMaxDownloadKBS(b==""?"0":b);a=this.cbSyncInterval.getValue();b=+this.spnSyncInterval.getValue();b=a=="0"?b*60*60:b*24*60*60;this.connection.putPollingSec(b);this.connection.putServerEncryption(this.chEncryption.getValue()?"1":"0")},doReset:function(){_s7.Storage.Connection.AzureOptions.superclass.doReset.apply(this,arguments);this.clearError(this.lblName,this.tfName);this.clearError(this.lblPartSz,this.cbPartSz);this.clearError(this.lblStClass,this.cbStClass);
this.clearValues()}});Ext.namespace("_s7.Storage");
_s7.Storage.GD=_._1(_s7.Storage.Panel,{help:"backup_panel_googledrive",lpPrefix:"googledrive",singleConnection:"Google Drive",authUrl:"/admin/googledrivecb.html",isBeta:false,constructor:function(){_.apply(this,{url:"https://drive.google.com",title:_TR("CLOUD_GOOGLE_DRIVE"),tip:String.format(_TR("CLOUD_GOOGLE_DRIVE_INSTRUCTION"),'<a class="x-frontview-link" href="https://drive.google.com" target="_blank">https://drive.google.com</a>'),iconCls:"x-googledrive-icon",
msgConfirmDisable:String.format(_TR("SERVICE_DISABLE"),_TR("CLOUD_GOOGLE_DRIVE"))});_s7.Storage.GD.superclass.constructor.apply(this,arguments);this.spCSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getCloudStorageGoogleDriveManager();_a(this.spCSManager,"_i1").Advise(this);this.wndOptions=new _s7.Storage.OptionsWindow({spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,authUrl:this.authUrl,help:"cloud_wnd_googledrive_options",
title:this.title})}});Ext.namespace("_s7.Storage");
_s7.Storage.OneDrive=_._1(_s7.Storage.Panel,{help:"backup_panel_onedrive",lpPrefix:"onedrive",singleConnection:"One Drive",authUrl:"/admin/onedrivecb.html",isBeta:false,constructor:function(){_.apply(this,{url:"https://onedrive.live.com",title:_TR("CLOUD_ONE_DRIVE"),tip:String.format(_TR("CLOUD_ONE_DRIVE_INSTRUCTION"),'<a class="x-frontview-link" href="https://onedrive.live.com" target="_blank">https://onedrive.live.com</a>'),iconCls:"x-onedrive-icon",msgConfirmDisable:String.format(_TR("SERVICE_DISABLE"),
_TR("CLOUD_ONE_DRIVE"))});_s7.Storage.OneDrive.superclass.constructor.apply(this,arguments);this.spCSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getCloudStorageOneDriveManager();_a(this.spCSManager,"_i1").Advise(this);this.wndOptions=new _s7.Storage.OptionsWindow({spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,authUrl:this.authUrl,help:"cloud_wnd_onedrive_options",title:this.title})}});Ext.namespace("_s7.Storage");
_s7.Storage.FixConflict=_._1(Ext.UI.Window,{modal:true,width:600,resizable:false,minimizable:false,maximizable:false,constructor:function(a){this.title=_TR("CLOUD_AMAZON_TITLE_EXT");this.html=this.getHtml();this.fbar=this.getFooter();_s7.Storage.FixConflict.superclass.constructor.call(this,a)},getHtml:function(){return'<table cellpadding="0" cellspacing="5"><tr><td>'+_TR("CLOUD_AMAZON_CONFLICT_TITLE")+'</td></tr><tr><td style="padding-top: 5px;" id="'+(this.wholeACDSyncId=
Ext.id())+'"></td></tr><tr><td style="padding-left:30px;">'+_TR("CLOUD_AMAZON_CONFLICT_TITLE1")+'</td></tr><tr><td style="padding-top: 5px;" id="'+(this.subDirectoryPerFolderSyncId=Ext.id())+'"></td></tr><tr><td style="padding-left:30px;">'+_TR("CLOUD_AMAZON_CONFLICT_TITLE2")+_TR("COLON")+'</td></tr><tr><td style="padding-left:30px; width:100%; height:110px; overflow:auto; display: inline-block;" id="'+(this.subFoldersId=Ext.id())+'"></td></tr></table>'},getFooter:function(){var a=new Ext.UI.Button({text:_TR("APPLY"),
width:100,acceptbtn:true});a.on("click",this.onApplyClick,this);var b=new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true});b.on("click",function(){this.hide()},this);return["->",a,b]},afterRender:function(a){_s7.Storage.FixConflict.superclass.afterRender.call(this,a);this.rdoWholeACDSync=new Ext.UI.Radio({boxLabel:_TR("CLOUD_AMAZON_CONFLICT_RDO1"),cls:"add-tier-radio",name:"acd-conflict-mode",renderTo:this.wholeACDSyncId,checked:true,listeners:{check:this.onWholeACDSyncClick,
scope:this}});this.rdoSubDirectoryPerFolderSync=new Ext.UI.Radio({boxLabel:_TR("CLOUD_AMAZON_CONFLICT_RDO2"),cls:"add-tier-radio",name:"acd-conflict-mode",renderTo:this.subDirectoryPerFolderSyncId,listeners:{check:this.onSubDirectoryPerFolderSyncClick,scope:this}});this.foldersEle=Ext.get(this.subFoldersId)},setCheckBoxStatus:function(a){for(var b=this.argObj,c=0,d=b.length;c<d;++c)b[c].ckb&&b[c].ckb.setDisabled(a)},onWholeACDSyncClick:function(a,b){b&&this.setCheckBoxStatus(true)},onSubDirectoryPerFolderSyncClick:function(a,
b){b&&this.setCheckBoxStatus(false)},loadArgs:function(a){var b="";this.argObj=a;for(var c=0,d=a.length;c<d;++c)if(a[c].Remote_Path!="/")b+='<tr><td><div id="'+(a[c].ckbid=Ext.id())+'"></div></td><td><div>'+a[c].Local_Path+"</div></td></tr>";if(b)b='<table cellpadding="0" cellspacing="5">'+b+"</table>";this.foldersEle.update(b);c=0;for(d=a.length;c<d;++c)if(a[c].Remote_Path!="/")a[c].ckb=new Ext.UI.Checkbox({disabled:true,checked:a[c].ckbval=true,renderTo:a[c].ckbid,listeners:{check:this.onFolderClick,
scope:this}})},onFolderClick:function(a,b){for(var c=this.argObj,d=0,e=c.length;d<e;++d)if(a==c[d].ckb)c[d].ckbval=b},onApplyClick:function(){this.fireEvent("FixACDMigrationConflict",this.rdoWholeACDSync.getValue(),this.argObj);this.hide()}});Ext.namespace("_s7.Storage");
_s7.Storage.AmazonDrive=_._1(_s7.Storage.Panel,{help:"backup_panel_amazonclouddrive",lpPrefix:"amazondrive",singleConnection:"Amazon Drive",authUrl:"/admin/amazondrivecb.html",isBeta:false,constructor:function(){_.apply(this,{url:"https://www.amazon.com/clouddrive/home/",title:_TR("CLOUD_AMAZON_TITLE_EXT"),tip:String.format(_TR("CLOUD_AMAZON_INSTRUCTION"),'<a class="x-frontview-link" href="https://www.amazon.com/clouddrive/home/" target="_blank">https://www.amazon.com/clouddrive/home/</a>'),
iconCls:"x-amazondrive-icon",msgConfirmDisable:String.format(_TR("SERVICE_DISABLE"),_TR("CLOUD_AMAZON_TITLE_EXT"))});_s7.Storage.AmazonDrive.superclass.constructor.apply(this,arguments);this.spCSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getCloudStorageAmazonDriveManager();_a(this.spCSManager,"_i1").Advise(this);this.wndOptions=new _s7.Storage.OptionsWindow({spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,
authUrl:this.authUrl,help:"cloud_wnd_amazon_options",title:this.title})}});Ext.namespace("_s7.Storage");
_s7.Storage.DB=_._1(_s7.Storage.Panel,{help:"backup_panel_dropbox",lpPrefix:"dropbox",singleConnection:"Dropbox",authUrl:"/admin/dropboxcb.html",constructor:function(){_.apply(this,{url:"https://www.dropbox.com",title:_TR("CLOUD_DROPBOX"),tip:String.format(_TR("CLOUD_DROPBOX_INSTRUCTION"),'<a class="x-frontview-link" href="https://www.dropbox.com" target="_blank">https://www.dropbox.com</a>'),iconCls:"x-dropbox-icon",msgConfirmDisable:String.format(_TR("SERVICE_DISABLE"),
_TR("CLOUD_DROPBOX"))});_s7.Storage.DB.superclass.constructor.apply(this,arguments);this.spCSManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getCloudStorageDropboxManager();_a(this.spCSManager,"_i1").Advise(this);this.wndOptions=new _s7.Storage.OptionsWindow({spCSManager:this.spCSManager,lpPrefix:this.lpPrefix,singleConnection:this.singleConnection,authUrl:this.authUrl,help:"cloud_wnd_dropbox_options",title:this.title})}});Ext.namespace("_s7.Storage.DB");
_s7.Storage.DB.Upgrade=_._1(Ext.UI.Window,{modal:true,width:400,resizable:false,minimizable:false,maximizable:false,constructor:function(){this.title=_TR("CLOUD_DROPBOX");this.html=this.getHtml();this.fbar=this.getFooter();this.updatesCount=0;_s7.Storage.DB.Upgrade.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spCSManager=a.getCloudStorageDropboxManager();_a(this.spCSManager,"_i1").Advise(this);
var b=a.getSystemManager();b=_a(b.getDeviceState(),"_it");this.spLCManager=a.getSystemManager().getLocaleManager();b&&b!=_4&&b.getDropboxV1Flag()&&this.spCSManager.updateAuthURL("sys_dropbox_update_auth_url")},getHtml:function(){return String.format(_TR("CLOUD_DROPBOX_UPGRADE"),_TR("OK"),_TR("DISABLE"))},getFooter:function(){var a=new Ext.UI.Button({text:_TR("OK"),width:100,acceptbtn:true,handler:this.onApplyClick,scope:this}),b=new Ext.UI.Button({text:_TR("DISABLE"),width:100,
cancelbtn:true,handler:this.onDisableClick,scope:this});return["->",a,b]},afterRender:function(){_s7.Storage.DB.Upgrade.superclass.afterRender.apply(this,arguments);this.loadMask=new Ext.UI.LoadMask(this.bwrap,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",background:false,frame:false,delay:0})},onApplyClick:function(){var a=location.protocol+"//"+location.host+"/admin/dropboxmigrcb.html",b=_s7.openWindowCentered(a,"_blank",600,1050),c=this.spCSManager.getAuthURL(),d=
window.csrfId,e=this.spLCManager.getLocale();if(e=="auto")e=this.spLCManager.getAutoLocale();b.location=c.replace(/(state=)[^&]*/gi,"$1"+(typeof _=="undefined"?_.OAuth2EnDeCryption:_.OAuth2EnDeCryption)("location="+a+"&locale_code="+e+"&version=2&csrfpId="+d,"cloudstoragesync","ENCODE"));this.hide()},onDisableClick:function(){this.spCSManager.cancelMigration("sys_dropbox_cancel_migration")},showProgress:function(){++this.updatesCount;this.mask.show()},hideProgress:function(){if(--this.updatesCount<=
0){this.mask.hide();this.updatesCount=0}},ICloudStorageManagerEvents:{_o1:function(a,b){switch(b){case "sys_dropbox_cancel_migration":this.showProgress();break}},_o2:function(a,b){switch(b){case "sys_dropbox_update_auth_url":this.show();break;case "sys_dropbox_cancel_migration":this.hide();break}},_o3:function(a,b,c){switch(c){case "sys_dropbox_cancel_migration":this.hideProgress();a!=_5&&_s7.Storage.showError(this.title,_a(b,"_io").getLastNMLError());break}}}});
_._2("_","_._3","_._3.BackupSubSys");_._3.BackupSubSys.BackupTab="BackupSubSys.BackupTab";_._3.BackupSubSys.BackupTargets="BackupSubSys.BackupTargets";Ext.namespace("_s8");
_s8.BackupTab=_._1(_._3.BackupSubSys.BackupTab,_s0.TabItem,ISystemFrameTab,_i4,{help:"backup_tab",constructor:function(){_s8.BackupTab.superclass.constructor.apply(this,arguments);this.on("tabinitialize",this.onTabInitialize,this);this.on("tabactivate",this.onTabActivate,this);this.on("tabdeactivate",this.onTabDeactivate,this);this.header.html='<table border="0" cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr><td id="'+(this.buttonsId=
Ext.id())+'" style="vertical-align: middle;"></td></tr></table>';this.spSysManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getSystemManager();this.isReadyDRSupported=this.spSysManager.getSupportReadyDR()=="1"},refresh:function(){this.spJobsPanel.refresh();this.isReadyDRSupported&&this.spReadyDRPanel.refresh()},onTabInitialize:function(){this.mask.updatesCount=0;this.mask.showProgress=function(){this.updatesCount||this.show();++this.updatesCount};this.mask.hideProgress=function(){--this.updatesCount;
this.updatesCount||this.hide()};this.spJobsPanel=new _s8.BackupJobs({mask:this.mask,renderTo:this.content.el});this.spReadyDRPanel=new _s8.ReadyDR({mask:this.mask,renderTo:this.content.el});this.isReadyDRSupported||this.spReadyDRPanel.hide();new Ext.Component({id:"backups-refresh-btn",cls:"x-frontview-tabitem-tabbtn x-frontview-tabitem-refreshbtn",html:String.format('<div class="x-frontview-tabitem-tabbtnicon"></div>{0}',_TR("REFRESH")),renderTo:this.buttonsId,listeners:{afterrender:function(a){a.el.on("click",
function(){this.refresh()},this)},scope:this}});new Ext.Component({id:"backups-timemachine-btn",cls:"x-frontview-tabitem-tabbtn x-bac-timemachine-btn",html:'<div class="x-frontview-tabitem-tabbtnicon"></div>'+_TR("TIME_MACHINE"),style:"float: right; cursor: pointer;",renderTo:this.buttonsId,listeners:{afterrender:function(a){a.el.on("click",function(){_s0.GA.trackEvent({eventCategory:"Backup",eventAction:"click",eventLabel:"Time Machine"});this.wndTM||(this.wndTM=new _s8.TimeMachine);
this.wndTM.show();this.wndTM.center()},this)},scope:this}});new Ext.Component({id:"backups-mtp-btn",cls:"x-frontview-tabitem-tabbtn x-bac-backupmedia-btn",html:'<div class="x-frontview-tabitem-tabbtnicon"></div>'+_TR("BACKUP_MTP"),style:"float: right; cursor: pointer;",renderTo:this.buttonsId,listeners:{afterrender:function(a){a.el.set({title:_TR("BACKUP_MTP_TITLE")});a.el.on("click",function(){_s0.GA.trackEvent({eventCategory:"Backup",eventAction:"click",eventLabel:"Import"});this.wndmedia||
(this.wndmedia=new _s8.BackupMedia);this.wndmedia.show();this.wndmedia.center()},this)},scope:this}});this.refresh()},onTabActivate:function(){this.refresh()},onTabDeactivate:function(){this.spReadyDRPanel.onTabDeactivate()},ISystemFrameTab:{getTitle:function(){return _TR("BACKUP")},getCfg:function(){return{id:"backups-tab"}}}});_s0.RegisterTab(_._3.System.Frame,_._3.BackupSubSys.BackupTab,"ISystemFrame","ISystemFrameTab");Ext.namespace("_s8");
_s8.BackupTargets=_._1(_._3.BackupSubSys.BackupTargets,_8(),_i4,{constructor:function(){_s8.BackupTargets.superclass.constructor.call(this);this.sourceData=[];this.sourceDataNew=[];this.destData=[];this.destDataNew=[];this.destStore=this.sourceStore=null},update:function(a){var b=a.getBackupSourceTargets();a=a.getBackupDestinationTargets();this.sourceData=[];this.sourceDataNew=[];this.destData=[];this.destDataNew=[];_.each(b,function(c){c=
_a(c,"_ii");if(c!=_4){var e=null;switch(c.getType().toLowerCase()){case "usb":e=String.format("{0} ({1})",_TR("BACKUP_USB"),_TR(c.getUSBSubType()));break;case "remote":e=String.format("{0}: {1}",c.getType(),_TR(c.getShareNameOrProtocol()));break;case "home":e=c.getShareNameOrProtocol()=="*"?_TR("BACKUP_ALLHOMESHARES"):String.format("{0}: {1}",c.getType(),c.getShareNameOrProtocol());break;case "timemachine":e=_TR("TIME_MACHINE");break;default:e=String.format("{0}: {1}",c.getType(),
c.getShareNameOrProtocol())}this.sourceData.push([c.getRefId(),c.getType(),c.getShareNameOrProtocol(),c.getPath(),e,c.getEjectable()]);this.sourceDataNew.push([c.getRefId(),e,c])}},this);_.each(a,function(c){c=_a(c,"_ii");if(c!=_4){var e=null;switch(c.getType().toLowerCase()){case "usb":e=String.format("{0} ({1})",_TR("BACKUP_USB"),_TR(c.getUSBSubType()));break;case "remote":e=String.format("{0}: {1}",c.getType(),_TR(c.getShareNameOrProtocol()));break;case "home":e=c.getShareNameOrProtocol()==
"*"?_TR("BACKUP_ALLHOMESHARES"):String.format("{0}: {1}",c.getType(),c.getShareNameOrProtocol());break;case "timemachine":e=_TR("TIME_MACHINE");break;default:e=String.format("{0}: {1}",c.getType(),c.getShareNameOrProtocol())}this.destData.push([c.getRefId(),c.getType(),c.getShareNameOrProtocol(),c.getPath(),e,c.getEjectable()]);this.destDataNew.push([c.getRefId(),e,c])}},this);this.sourceStore=new Ext.data.ArrayStore({fields:["id","type","name","path","sharename","autoeject"],idIndex:0,data:this.sourceData});
this.destStore=new Ext.data.ArrayStore({fields:["id","type","name","path","sharename","autoeject"],idIndex:0,data:this.destData})}});Ext.namespace("_s8");
_s8.BackupJobs=_._1(_9,Ext.Container,{cls:"x-backup-jobs",help:"backup_panel_jobs",constructor:function(){this.title=_TR("JOBS");_s8.BackupJobs.superclass.constructor.apply(this,arguments);this.typeinvalid=_TR("BACKUP_JOBS_INVALIDTYPE")},initComponent:function(){_s8.BackupJobs.superclass.initComponent.apply(this,arguments);this.updatebackups="backuptab_updatebackups";this.updatebuttons="backuptab_updateButtonBackups";this.commitbuttons="backuptab_commitButtonBackups";
this.autoupdatebackups="backuptab_autoupdatebackups";this.runbackup="backuptab_runBackup";this.cancelbackup="backuptab_cancelBackup";this.lParams=[this.updatebackups,this.runbackup,this.cancelbackup,this.updatebuttons,this.commitbuttons,"backuptab_commitBackupsAdd","backuptab_commitBackupsRemove","backuptab_commitBackups_sel","backuptab_updateBackupsTargets","backuptab_updateBackupsTargets_refresh"];var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spSysManager=a.getSystemManager();
this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.isPhysicalButtonSupported=this.spSysManager.getSupportBackupButton()=="1"},afterRender:function(){_s8.BackupJobs.superclass.afterRender.apply(this,arguments);this.topBar=new Ext.BoxComponent({cls:"x-backup-bar",
html:'<span class="x-frontview-panel-title"><span style="display:inline-block;">'+this.title+'</span><span style="display:inline-block; margin-left:5px;" id="'+(this.ttTitleId=Ext.id())+'"></span></span>',renderTo:this.el});new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttTitleId,listeners:{afterrender:function(b){new Ext.UI.ToolTip(b.el,{style:"font-style: italic;",html:_TR("JOBS_TOOLTIP")})},scope:this}});this.bBackupAll=new Ext.UI.Button({id:"backups-jobs-run-all-btn",cls:"x-backup-all",
width:125,expandToText:true,disabled:true,text:_TR("BACKUP_ALL"),handler:this.onBackupAllClick,scope:this,renderTo:this.topBar.el});new Ext.UI.Button({id:"backups-jobs-add-btn",cls:"x-backup-add",width:125,expandToText:true,text:_TR("ADD_BACKUP"),acceptbtn:true,handler:this.onAddBackupClick,scope:this,renderTo:this.topBar.el});this.faqLink=this.topBar.el.createChild({id:"backups-jobs-faq-btn",tag:"a",href:"http://kb.netgear.com/app/answers/detail/a_id/29788",target:"_blank",cls:"x-backup-faq",html:_TR("BACKUP_FAQ")});
this.renderGrid();var a=_a(_7(_._3.BackupSubSys.BackupTab),"IExtNative").getNative();a.on("tabactivate",this.onTabResized,this);a.content.on("resize",this.onTabResized,this);Ext.EventManager.on(window,"resize",this.onTabResized,this);this.tab=a.content;this.onTabResized();this.createTooltip()},createTooltip:function(){this.ttStatus=new Ext.UI.ToolTip(null,{html:"",delay:0,width:200,autowidth:false});this.ttStatus.on("hide",function(){this.ttStatus.destroyEvents()},this)},
renderGrid:function(){var a=[{header:"&#160;",width:33,fixed:true,hideable:false,menuDisabled:true,dataIndex:"",xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="grid-backup-icon"></div>')).compile()},{header:_TR("NAME"),width:100,dataIndex:"name"}];this.isPhysicalButtonSupported&&a.push({header:_TR("BACKUP_BUTTON"),width:60,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<tpl if="!!order">'+_TR("YES")+" </tpl>")).compile()});a=a.concat([{header:_TR("SOURCE")+" / "+_TR("DESTINATION"),width:200,
xtype:"templatecolumn",tpl:(new Ext.XTemplate("{source} \u2192 {destination}")).compile()},{header:_TR("SCHEDULE"),width:200,dataIndex:"schedule",renderer:{fn:this.renderSchedule,scope:this}},{header:_TR("STATUS"),width:100,dataIndex:"status",renderer:{fn:this.renderLocLabel,scope:this}},{header:_TR("BACKUP_DATE_LAST"),width:100,dataIndex:"statusDate"},{header:"&#160;",width:36,fixed:true,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="x-frontview-icon-settings"><a></a></div>')).compile()}]);
var b=new Ext.grid.ColumnModel(a);this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true,handleMouseDown:function(c,e,f){if(!this.isSelected(e)){this.selectRow(e,f.ctrlKey||f.shiftKey);this.grid.getView().focusRow(e)}}});this.grid=new Ext.UI.GridPanel({id:"backups-jobs-grid",uicls:"ui-fwgrid",autoHeight:true,enableDragDrop:this.isPhysicalButtonSupported,ddGroup:this.isPhysicalButtonSupported?"backup-jobs-DD":"",sm:this.selModel,colModel:b,store:new Ext.data.Store({data:[],reader:new Ext.data.JsonReader({idProperty:"id",
fields:["id","_ie","name","source","destination","schedule","status","statusDate","statusSpeed","statusRuntime","statusTransferred","statusLabel","order","progress","stype","sprotocol"]})}),viewConfig:{forceFit:true,autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+_TR("NO_BACKUPS")+"</div>",deferEmptyText:false,getRowClass:function(c,e){var f="x-grid3-row-even";if(e%2==1)f="x-grid3-row-odd";if(c.get("order"))f+=" x-bac-dd-avail";return f}},renderTo:this.el,listeners:{afterrender:function(c){if(this.isPhysicalButtonSupported){c.getRecordByNode=
function(e){e=this.getView().findRowIndex(e);return this.getStore().getAt(e)};c.dropZone=new Ext.dd.DropZone(c.getView().scroller,{ddGroup:"backup-jobs-DD",getTargetFromEvent:function(e){return e.getTarget(c.getView().rowSelector)},onNodeOver:function(e,f,g,h){f=c.getRecordByNode(e);if(h&&h.r&&h.r.get("order")&&f.get("order")&&f.get("order")!=h.r.get("order")){h=Ext.fly(e).getBox();if(g.xy&&g.xy[1]<h.y+h.height/2){Ext.fly(e).addClass("x-bac-dd-highlight-t");Ext.fly(e).removeClass("x-bac-dd-highlight-b")}else{Ext.fly(e).addClass("x-bac-dd-highlight-b");
Ext.fly(e).removeClass("x-bac-dd-highlight-t")}return this.dropAllowed}return this.dropNotAllowed},onNodeOut:function(e){Ext.fly(e).removeClass("x-bac-dd-highlight-t");Ext.fly(e).removeClass("x-bac-dd-highlight-b")},onNodeDrop:function(e,f,g,h){f=c.getRecordByNode(e);if(h&&h.r&&h.r.get("order")&&f.get("order")&&f.get("order")!=h.r.get("order")){f=f.get("order");e=Ext.fly(e).getBox();if(g.xy&&g.xy[1]<e.y+e.height/2)f-=1;c.fireEvent("changeorder",c,h.r.get("order"),f);return true}return false}});c.dragZone=
new Ext.grid.GridDragZone(c,{ddGroup:"backup-jobs-DD",getDragData:function(e){if(e=e.getTarget(this.grid.itemSelector,10)){d=e.cloneNode(true);d.id=Ext.id();var f=c.getRecordByNode(e);return{ddel:d,sourceEl:e,repairXY:Ext.fly(e).getXY(),sourceStore:c.getStore(),r:f}}},getRepairXY:function(){return this.dragData.repairXY},onBeforeDrag:function(e){return e&&e.r&&e.r.get("order")?true:false}})}},changeorder:this.onButtonOrderChange,cellclick:function(c,e,f){f==b.config.length-1&&this.showMenu(c.getView().getRow(e))},
cellcontextmenu:function(c,e,f,g){this.showMenu(null,g.xy);g.preventDefault()},mouseover:function(c){if(c.target&&c.target.className==this.cls+"-status-more"){c=Ext.get(c.target);var e=c.getAttribute("data-record");(e=this.grid.getStore().getById(e))&&this.showTooltip(c,e)}},scope:this}});this.createMenu()},convertKBPerSecToMBPerSec:function(a){return _s10.Utils.fileSize(a)},convertSecsToHumanReadableStr:function(a){var b=parseInt(a/3600),c=parseInt(a/60)%60;a=a%60;var e=function(f){return f>=
10?f:"0"+f};return String.format(_TR("FORMAT_HH_MM_SS"),e(b),e(c),e(a))},showTooltip:function(a,b){var c=this.ttStatus,e,f,g;if(b.get("statusLabel")=="BACKUP_STATUS__IN_PROGRESS"){e=this.convertKBPerSecToMBPerSec(b.get("statusSpeed"));f=this.convertSecsToHumanReadableStr(b.get("statusRuntime"));g=this.convertKBPerSecToMBPerSec(b.get("statusTransferred"));if(!(b.get("stype")=="remote"&&b.get("sprotocol")=="cifs-ab"&&(b.get("statusTransferred")||0)==0)){if(!c.target||c.target.dom!=a.dom)c.initTarget(a);
a=String.format(_TR("READYDR_JOBS_SPEED"),e)+"<br />"+String.format(_TR("READYDR_JOBS_RUNTIME"),f)+"<br />"+String.format(_TR("READYDR_JOBS_TRANSFERRED"),g);c.update(a);c.onTagerMouseMove()}}},onTabResized:function(){if(this.grid){var a=this.topBar.getWidth();a>400||(a=400);this.grid.setWidth(a)}},createMenu:function(){this.itemRun=new Ext.menu.Item({text:_TR("RUN"),icon:false,ctCls:"x-frontview-icon-run",commandName:"run",id:"backups-jobs-context-menu-run-btn"});this.itemStop=new Ext.menu.Item({text:_TR("CANCEL"),
icon:false,ctCls:"x-frontview-icon-cancel",commandName:"cancel",id:"backups-jobs-context-menu-stop-btn"});this.itemLog=new Ext.menu.Item({text:_TR("LOG"),icon:false,ctCls:"x-frontview-icon-log",commandName:"log",id:"backups-jobs-context-menu-log-btn"});this.itemDelete=new Ext.menu.Item({text:_TR("DELETE"),icon:false,ctCls:"x-frontview-icon-delete",commandName:"delete",id:"backups-jobs-context-menu-delete-btn"});this.itemSettings=new Ext.menu.Item({text:_TR("SETTINGS"),icon:false,ctCls:"x-frontview-icon-settings",
commandName:"settings",id:"backups-jobs-context-menu-settings-btn"});this.itemButtonAdd=new Ext.menu.Item({text:_TR("BACKUP_BUTTON_ADD"),icon:false,ctCls:"x-frontview-icon-add",commandName:"button-add",id:"backups-jobs-context-menu-include-btn"});this.itemButtonUp=new Ext.menu.Item({text:_TR("BACKUP_BUTTON_UP"),icon:false,ctCls:"x-frontview-icon-up",commandName:"button-up",id:"backups-jobs-context-menu-raise-btn"});this.itemButtonDown=new Ext.menu.Item({text:_TR("BACKUP_BUTTON_DOWN"),icon:false,ctCls:"x-frontview-icon-down",
commandName:"button-down",id:"backups-jobs-context-menu-reduce-btn"});this.itemButtonRemove=new Ext.menu.Item({text:_TR("BACKUP_BUTTON_REMOVE"),icon:false,ctCls:"x-frontview-icon-delete",commandName:"button-remove",id:"backups-jobs-context-menu-exclude-btn"});var a=[this.itemRun,this.itemStop,this.itemLog,this.itemDelete,this.itemSettings];if(this.isPhysicalButtonSupported)a=a.concat(["-",this.itemButtonAdd,this.itemButtonUp,this.itemButtonDown,this.itemButtonRemove]);this.menu=new Ext.UI.Menu({id:"backups-jobs-context-menu",
cls:"x-backup-jobs-menu",defaultAlign:"tr-br?",enableScrolling:false,items:a,listeners:{itemclick:function(b){switch(b.commandName){case "run":this.onRunBackupClick();break;case "cancel":this.onStopBackupClick();break;case "log":this.onLogClick();break;case "delete":this.onRemoveBackupClick();break;case "settings":this.onPropsBackupClick();break;case "button-add":this.onAddButtonClick();break;case "button-up":this.onUpButtonClick();break;case "button-down":this.onDownButtonClick();break;case "button-remove":this.onRemoveButtonClick();
break}},scope:this}})},showMenu:function(a,b){var c=this.selModel.getSelected();if(c){var e=["BACKUP_STATUS__IN_QUEUE","BACKUP_STATUS__STARTING","BACKUP_STATUS__IN_PROGRESS"].indexOf(c.get("statusLabel"))!=-1;this.itemRun.setVisible(!e);this.itemStop.setVisible(e);c=c.get("order");this.itemButtonAdd.setVisible(!c);this.itemButtonUp.setVisible(!!c&&c>1);this.itemButtonDown.setVisible(!!c&&c<this.buttonJobs.length);this.itemButtonRemove.setVisible(!!c);b?this.menu.showAt(b):this.menu.show(a)}},renderSchedule:function(a,
b){if(_TR("BACKUP_JOBS_NOTSCHEDULED")==a)b.css="x-bac-row-disabled";return a},formatSeconds:function(a){var b=parseInt(a);a=0;if(b>60){a=parseInt(b/60);b=parseInt(b%60);if(a>60){parseInt(a/60);a=parseInt(a%60)}}b=""+parseInt(b)+_TR("BACKUP_STATUS__WOL_WAKING_S");if(a>0)b=""+parseInt(a)+_TR("BACKUP_STATUS__WOL_WAKING_M")+" "+b;return b},renderLocLabel:function(a,b,c){var e="x-frontview-led-";switch(a){case "Starting":case "OK":case "ok":case "Ready":case "":e+="green";break;case "CANCELLING":case "CANCELLED":case "notice":e+=
"orange";break;case "warn":e+="red";break;default:e+="black";break}b.css="x-backup-panel-led "+e;a=c.get("statusLabel");b=(b=c.get("progress"))&&b!=_4&&b!="-1"?" ("+b+"%)":"";if(a=="BACKUP_STATUS__IN_PROGRESS")return'<span class="'+this.cls+'-status-more" data-record="'+c.get("id")+'">'+_TR(a)+"</span>";else if(a=="BACKUP_STATUS__WOL_WAKING"){console.log(this.formatSeconds(c.data._ie.getWakingRemainingTime()));return String.format(_TR("BACKUP_STATUS__WOL_WAKING"),this.formatSeconds(c.data._ie.getWakingRemainingTime()))}return _TR(a)+
b},getScheduleColumn:function(a){var b=a.getSheduleDayOfWeek()?a.getSheduleDayOfWeek().toUpperCase().split(","):"",c="";if(a.getSheduleEnabled()!="1")return _TR("BACKUP_JOBS_NOTSCHEDULED");else if(b.length==7)c=_TR("BACKUP_JOBS_DAILY");else _.each(b,function(g){c+=c==""?_TR(g):","+_TR(g)});b=localStorage.getItem("enable24Hour")=="true";var e=a.getSheduleStart(),f=a.getSheduleEnd();if(!b){e=e>12?e-12+" "+_TR("PM"):e==12?"12 "+_TR("PM"):e>0?(e.length==1?"0"+e:e)+" "+_TR("AM"):"12 "+_TR("AM");f=f>
12?f-12+" "+_TR("PM"):f==12?"12 "+_TR("PM"):f>0?(f.length==1?"0"+f:f)+" "+_TR("AM"):"12 "+_TR("AM")}return c=String.format("{0} {1} {2} {3} {4}-{5}",c,_TR("BACKUP_JOBS_EVERY"),a.getSheduleFrequency(),_TR("BACKUP_JOBS_HRBETWEEN"),e,f)},getSourceString:function(a,b){var c=this.sourceStore.findBy(function(e){return e.get("type")==a&&e.get("name")==b},this);return c==-1?this.typeinvalid:this.sourceStore.getAt(c).get("sharename")},getDestString:function(a,b){var c=this.destStore.findBy(function(e){return e.get("type")==
a&&e.get("name")==b},this);return c==-1?this.typeinvalid:this.destStore.getAt(c).get("sharename")},refresh:function(){clearTimeout(this.autoUpdateId);this.zfsVolumesManager.UpdateVolumes("backuptab-update-zfsvolumes")},updateBackups:function(){this.spBKManager.updateBackups(this.updatebackups)},populateBackups:function(){if(this.grid){this.buttonJobs=this.spBKManager.getButtonBackups();buttonJobsHash={};if(this.buttonJobs&&this.buttonJobs!=_4)_.each(this.buttonJobs,function(e,f){e=_a(e,
"_ie");buttonJobsHash[e.getId()]=f},this);else this.buttonJobs=[];this.backups=this.spBKManager.getBackups();var a=[],b,c;if(this.backups&&this.backups!=_4){_.each(this.backups,function(e){e=_a(e,"_ie");if(e!=_4){b={id:e.getId(),_ie:e,name:Ext.util.Format.htmlEncode(e.getName()),source:this.getSourceString(e.getSourceType(),e.getSourceShareNameOrProtocol()),destination:this.getDestString(e.getDestinationType(),e.getDestinationShareNameOrProtocol()),schedule:this.getScheduleColumn(e),
status:e.getStatusResult()==_4?"":e.getStatusResult(),statusDate:e.getStatusDate()==_4||e.getStatusDate()==""?"":_.formatDateTime(new Date(e.getStatusDate())),statusLabel:e.getStatus()==_4?"":e.getStatus(),order:_.isNumber(buttonJobsHash[e.getId()])?buttonJobsHash[e.getId()]+1:"",progress:e.getProgress(),stype:e.getSourceType(),sprotocol:e.getSourceShareNameOrProtocol()};if(e.getStatus()=="BACKUP_STATUS__IN_PROGRESS"){b.statusSpeed=e.getSpeed()==_4?0:e.getSpeed();b.statusRuntime=
e.getRuntime()==_4?0:e.getRuntime();b.statusTransferred=e.getTransferred()==_4?0:e.getTransferred()}a.push(b);if(e.getName()==this.addedBackupName)c=e}},this);a.sort(function(e,f){var g=e.name.toLowerCase(),h=f.name.toLowerCase();e=e.order;f=f.order;if(e&&f)return e-f;else if(e&&!f)return-1;else if(!e&&f)return 1;else if(g<h)return-1;else if(g>h)return 1;return 0})}else this.backups=[];this.grid.getStore().loadData(a);this.bBackupAll.setDisabled(!a.length);this.startAuto();this.onTabResized();
delete this.addedBackupName;c&&this.isPhysicalButtonSupported&&Ext.UI.MessageBox.confirm({title:_TR("BACKUP_BUTTON"),msg:_TR("BACKUP_BUTTON_OFFER_AFTER_CREATION"),fn:function(e){if(e=="yes"){this.spBKManager.appendButtonBackup(c.getId());this.spBKManager.commitButtonBackups(this.commitbuttons)}},scope:this})}},startAuto:function(){clearTimeout(this.autoUpdateId);this.pendingBackupIds=[];var a=false;this.grid.getStore()&&this.grid.getStore().each(function(b){var c=b.data.statusLabel;if(c&&(c=="BACKUP_STATUS__IN_QUEUE"||
c=="BACKUP_STATUS__IN_PROGRESS"||c=="BACKUP_STATUS__STARTING"||c=="BACKUP_STATUS__WOL_WAKING"||c=="BACKUP_STATUS__CANCELLING")){this.pendingBackupIds.push(b.data.id);a=true}},this);if(a)this.autoUpdateId=this.sendAutoRequest.defer(5E3,this)},sendAutoRequest:function(){if(!this.autoInProgress){this.autoInProgress=true;this.autoUpdateId=this.spBKManager.updateBackups(this.autoupdatebackups)}},updateAuto:function(){this.spBKManager.getBackups()!=_4&&_.each(this.spBKManager.getBackups(),function(a){if(_a(a,
"_ie")!=_4){a=_a(a,"_ie");var b=this.grid.getStore().getById(a.getId());if(b){b.data._ie=a;if(this.pendingBackupIds.indexOf(a.getId())!=-1){b.data.status=a.getStatusResult();b.data.statusLabel=a.getStatus();b.data.statusDate=_.formatDateTime(new Date(a.getStatusDate()));b.data.progress=a.getProgress();if(a.getStatus()=="BACKUP_STATUS__IN_PROGRESS"){b.data.statusSpeed=a.getSpeed()==_4?0:a.getSpeed();b.data.statusRuntime=a.getRuntime()==_4?0:a.getRuntime();b.data.statusTransferred=
a.getTransferred()==_4?0:a.getTransferred()}b.commit()}}}},this);this.startAuto()},onBackupAllClick:function(){clearTimeout(this.autoUpdateId);for(var a=this.grid.getStore().getRange(),b=0,c,e=[];b<a.length;++b)if((c=a[b].data.statusLabel)&&c!="BACKUP_STATUS__IN_QUEUE"&&c!="BACKUP_STATUS__IN_PROGRESS"&&c!="BACKUP_STATUS__STARTING"){a[b].data.status="Starting";a[b].data.statusLabel="BACKUP_STATUS__STARTING";a[b].commit();e.push(a[b].get("_ie"))}e.length&&this.spBKManager.runBackups(e,this.runbackup)},
pad:function(a,b){for(var c=a.toString().length;c<b;){a="0"+a;c++}return a},onAddBackupClick:function(){var a=[],b="",c=/^job_[0]?\d+$/,e="job_001";_.each(this.backups,function(f){f=_a(f,"_ie");if(f!=_4){b=Ext.util.Format.htmlEncode(f.getName());if((c.exec(b)||[]).length>0)a.push(b)}},this);a.sort(function(f,g){f=f.toLowerCase();g=g.toLowerCase();if(f<g)return-1;else if(f>g)return 1;return 0});if(a.length>0){e=+a[a.length-1].replace("job_","")+1;if(e<100)e=this.pad(e,3);e="job_"+
e}this.wzrdNewBackup||(this.wzrdNewBackup=new _s8.NewBackupWizard({listeners:{apply:function(f,g){this.addedBackupName=g.getName();this.spBKManager.addBackup(g,"backuptab_commitBackupsAdd")},scope:this}}));this.wzrdNewBackup.show();this.wzrdNewBackup.loadArgs(e);_s0.GA.trackEvent({eventCategory:"Backup",eventAction:"click",eventLabel:"Add Backup"})},onRemoveBackupClick:function(){if(this.grid.getSelectionModel().getSelections().length!=0){var a=this.grid.getSelectionModel().getSelected();
Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("WARN_DELETION"),a.get("name")),fn:function(b){b=="yes"&&this.spBKManager.deleteBackup(this.grid.getSelectionModel().getSelected().get("_ie"),"backuptab_commitBackupsRemove")},scope:this})}return _5},onRunBackupClick:function(a,b,c){clearTimeout(this.autoUpdateId);c=this.selModel.getSelected();c.data.status="Starting";c.data.statusLabel="BACKUP_STATUS__STARTING";c.commit();this.spBKManager.runBackups([c.get("_ie")],
this.runbackup)},onStopBackupClick:function(a,b,c){c=this.selModel.getSelected();Ext.UI.MessageBox.confirm({title:_TR("BACKUP"),msg:String.format(_TR("BACKUP_REST_CANCEL")+'&nbsp;"{0}" ?',c.get("name")),fn:function(e){if(e=="yes"){clearTimeout(this.autoUpdateId);c.data.status="CANCELLING";c.data.statusLabel="BACKUP_STATUS__CANCELLING";c.commit();this.spBKManager.cancelBackup(c.get("_ie"),this.cancelbackup)}},scope:this})},onPropsBackupClick:function(){this.propWindow||(this.propWindow=new _s8.BackupSettings);
this.propWindow.show();this.propWindow.loadBackup(this.selModel.getSelected().get("_ie"))},onLogClick:function(){this.onPropsBackupClick();this.propWindow.showLogTab()},onAddButtonClick:function(){this.spBKManager.appendButtonBackup(this.selModel.getSelected().get("id"));this.spBKManager.commitButtonBackups(this.commitbuttons)},onUpButtonClick:function(){var a=this.selModel.getSelected().get("order")-1,b=this.spBKManager.getButtonBackups(),c=b[a];b.splice(a,1);b.splice(a-1,0,c);this.spBKManager.commitButtonBackups(this.commitbuttons,
b)},onDownButtonClick:function(){var a=this.selModel.getSelected().get("order")-1,b=this.spBKManager.getButtonBackups(),c=b[a];b.splice(a,1);b.splice(a+1,0,c);this.spBKManager.commitButtonBackups(this.commitbuttons,b)},onButtonOrderChange:function(a,b,c){a=b-1;var e=this.spBKManager.getButtonBackups(),f=e[a];e.splice(a,1);a=c>b?c-1:c;e.splice(a,0,f);this.spBKManager.commitButtonBackups(this.commitbuttons,e)},onRemoveButtonClick:function(){this.spBKManager.removeButtonBackup(this.selModel.getSelected().get("id"));
this.spBKManager.commitButtonBackups(this.commitbuttons)},showIndicator:function(){this.mask.showProgress()},hideIndicator:function(){this.mask.hideProgress()},showError:function(a){if(a=_a(a,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}},_i3b:{_o2:function(a,
b){if(b=="sync-update-shares"||b=="shares-volumes-add-share")this.refresh()}},_i3v:{_o1:function(a,b){b=="backuptab-update-zfsvolumes"&&this.showIndicator()},_o2:function(a,b){if(b=="backuptab-update-zfsvolumes"||b=="sync-update-zfsvolumes"){a=this.zfsVolumesManager.getActiveVolumes();if(a!=_4&&a.length){this.bigMask&&this.bigMask.hide();this.spBKManager.updateBackupsTargets("backuptab_updateBackupsTargets_refresh")}else{this.bigMask=this.bigMask||new Ext.UI.LoadMask(this.el.parent(),
{frame:false,spinner:false});this.bigMask.show()}}},_o3:function(a,b,c){c=="backuptab-update-zfsvolumes"&&this.hideIndicator()}},_ih:{_o1:function(a,b){this.lParams.indexOf(b)!=-1&&this.showIndicator()},_o2:function(a,b){switch(b){case this.commitbuttons:this.spBKManager.updateButtonBackups(this.updatebuttons);break;case this.updatebackups:this.spBKManager.updateButtonBackups(this.updatebuttons);break;case "backuptab_updateBackupsTargets":case "backuptab_updateBackupsTargets_refresh":a=
_7(_._3.BackupSubSys.BackupTargets).__s;a.update(this.spBKManager);this.sourceData=a.sourceData;this.sourceDataNew=a.sourceDataNew;this.destData=a.destData;this.destDataNew=a.destDataNew;this.sourceStore=a.sourceStore;this.destStore=a.destStore;if(b=="backuptab_updateBackupsTargets_refresh")this.updateBackups();else this.grid&&this.grid.getStore().each(function(c){var e=c.get("_ie");c.data.source=this.getSourceString(e.getSourceType(),e.getSourceShareNameOrProtocol());c.data.destination=
this.getDestString(e.getDestinationType(),e.getDestinationShareNameOrProtocol());c.commit()},this);break;case "backuptab_commitBackupsAdd":case "backuptab_commitBackupsRemove":case "backuptab_commitBackups_sel":this.updateBackups();break}return _5},_o3:function(a,b,c){if(c==this.updatebuttons)this.populateBackups();else if(c==this.runbackup||c==this.cancelbackup)this.startAuto();else if(c==this.autoupdatebackups){this.autoInProgress=false;this.updateAuto()}if(this.lParams.indexOf(c)!=-1){this.hideIndicator();
if(a!=_5)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5}}});Ext.namespace("_s8");
_s8.BackupMedia=_._1(Ext.UI.Window,{modal:true,width:640,resizable:false,help:"backup_wnd_edit_media",constructor:function(){this.title=_TR("BACKUP_MTP_TITLE");this.html=this.getHtml();this.fbar=this.getFooter();_s8.BackupMedia.superclass.constructor.apply(this,arguments)},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a=_a(_7(_1.CLSIDS.Device5200),"_i2")){this.spBackupManager=a.getBackupManager();
_a(this.spBackupManager,"_i1").Advise(this);this.spLogManager=a.getLogManager();_a(this.spLogManager,"_i1").Advise(this)}_s8.BackupMedia.superclass.initComponent.apply(this,arguments)},getHtml:function(){return'<div style="margin-bottom:25px;">'+_TR("BACKUP_MTP_DESC")+'</div><table cellpadding="0" cellspacing="0" class="x-backup-media-line"><tr><td class="x-backup-media-label">'+_TR("BACKUP_MTP_ENABLE")+'</td><td id="'+(this.booEnabledId=Ext.id())+'"></td></tr></table><table cellpadding="0" cellspacing="0" class="x-backup-media-line" id="'+
(this.elLocationId=Ext.id())+'"><tr><td class="x-backup-media-label">'+_TR("BACKUP_MTP_PATH")+'</td><td id="'+(this.tfLocationId=Ext.id())+'"></td><td id="'+(this.btnLocationId=Ext.id())+'" style="padding-left:8px;"></td></tr></table><div style="padding-top:2px;"><div class="x-backup-media-label" style="height:32px;line-height:32px;">'+_TR("BACKUP_MTP_STATUS")+'</div><div class="x-backup-media-status" id="'+(this.elStatusId=Ext.id())+'"></div></div>'},getFooter:function(){return["->",this.bApply=
new Ext.UI.Button({text:_TR("APPLY"),width:100,handler:this.onApplyClick,scope:this,acceptbtn:true}),this.bDone=new Ext.UI.Button({text:_TR("OK"),width:100,handler:function(){this.hide()},scope:this,cancelbtn:true}),this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this,cancelbtn:true})]},afterRender:function(){_s8.BackupMedia.superclass.afterRender.apply(this,arguments);this.booEnabled=new Ext.UI.ButtonOnOff({textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),
labelwidth:40,renderTo:this.booEnabledId,listeners:{valuechanged:this.onEnabledChange,scope:this}});this.elLocation=Ext.get(this.elLocationId);this.tfLocation=new Ext.UI.TextField({width:230,maxLength:390,readOnly:true,renderTo:this.tfLocationId});this.btnLocation=new Ext.UI.Button({width:80,text:_TR("BROWSE"),handler:this.onBrowseClick,scope:this,expandToText:true,renderTo:this.btnLocationId});this.scrollStatus=new Ext.UI.Scroller({dom:this.elStatusId,type:"vertical"});this.scrollStatus.reg();this.maskProgress=
new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},onShow:function(){_s8.BackupMedia.superclass.onShow.apply(this,arguments);this.refresh()},refresh:function(){this.clear();this.updateConfig();this.updateLogs()},clear:function(){this.booEnabled.changeUI(true,false);this.tfLocation.setValue("");this.elLocation.removeClass("x-backup-media-cell-error");this.setViewMode(true)},validate:function(){if(!this.tfLocation.getValue().match(/^\/.+\/.+/)){this.elLocation.addClass("x-backup-media-cell-error");
return false}return true},updateConfig:function(){this.spBackupManager.updateMediaBackup("backup-media-update-config")},populateConfig:function(){var a=_a(this.spBackupManager.getMediaBackup(),"IMediaBackup"),b=false,c="";if(a&&a!=_4){b=a.getEnabled();c=a.getRoot()}this.booEnabled.changeUI(!b,true);this.tfLocation.setValue(c)},commitConfig:function(){var a=_a(this.spBackupManager.getMediaBackup(),"IMediaBackup");if(a&&a!=_4){a.putEnabled(!this.booEnabled.isOff());a.putRoot(this.tfLocation.getValue());
this.spBackupManager.commitMediaBackup("backup-media-commit-config")}},updateLogs:function(){this.spLogManager.QueryLogs(0,0,"'err','crit','emerge','warning','alert','info','notice'","'mbackup'",0,20,"","backup-media-query-logs")},populateLogs:function(){var a=Ext.get(this.elStatusId),b=this.spLogManager.getLogs(),c="";if(b.length>0)for(var e=0,f=b.length;e<f;++e)c+=this.getLogRow(_a(b[e],"_i1v"));else c='<tr><td colspan="3" class="x-frontview-dataview-emptybg" style="padding-top:6px;">'+_TR("BACKUP_MTP_STATUS_EMPTY")+
"</td></tr>";a.update('<table cellpadding="0" cellspacing="0" width="100%">'+c+"</table>")},getLogRow:function(a){var b="x-system-panel-led-";switch(a.getSeverity()){case "warning":case "alert":b+="orange";break;case "err":case "crit":case "emerge":b+="red";break;default:b+="green";break}var c=a.getLocalTime();c=c!=""?_.formatDateTime(new Date(c)):c;return'<tr class="x-system-panel-logs-row"><td class="x-system-panel-logs-cell1 x-selectable">'+c+'</td><td class="x-system-panel-logs-cell2" valign="top"><div style="width:20px;height:20px;" class="'+
b+'"></div></td><td class="x-system-panel-logs-cell x-selectable">'+this.formatLogMessage(a)+"</td></tr>"},formatLogMessage:function(a){var b=_TR(a.getMessageTag());a=a.getArgs();a!=_4&&_.each(a,function(c){b=b.replace(new RegExp("{"+c.name+"}",["g"]),c.value)},this);return b},onApplyClick:function(){this.validate()&&this.commitConfig()},onEnabledChange:function(){this.setViewMode(false)},onBrowseClick:function(){if(!this.bw){this.bw=new _s9.BrowseWindow;this.bw.on("selected",this.onSelectFile,
this)}this.bw.show();this.bw.setBackupMode("media")},onSelectFile:function(a){this.tfLocation.setValue(a.path);this.setViewMode(false);this.elLocation.removeClass("x-backup-media-cell-error")},_ih:{_o1:function(a,b){if(b=="backup-media-update-config"||b=="backup-media-commit-config")this.showProgress();return _5},_o2:function(a,b){if(b=="backup-media-update-config")this.populateConfig();else b=="backup-media-commit-config"&&this.hide();return _5},_o3:function(a,
b,c){if(c=="backup-media-update-config"||c=="backup-media-commit-config")this.hideProgress();return _5}},_i1x:{_o2:function(a,b){b=="backup-media-query-logs"&&this.populateLogs();return _5},OnDeviceAlarm:function(){this.hidden||this.updateLogs();return _5}},showProgress:function(){this.maskProgress.show()},hideProgress:function(){this.maskProgress.hide()},setViewMode:function(a){if(a){this.bApply.hide();this.bCancel.hide();this.bDone.show()}else{this.bApply.show();this.bCancel.show();
this.bDone.hide()}}});Ext.namespace("_s8");
_s8.NewBackupWizard=_._1(_9,Ext.UI.Window,{modal:true,width:990,height:620,resizable:false,minimizable:false,maximizable:false,cls:"x-sh-wndadddataset",help:"backup_wnd_add_backup",constructor:function(){this.title=_TR("BACKUP_JOB_NEW");this.fbar=this.getFooter();_s8.NewBackupWizard.superclass.constructor.apply(this,arguments);this.spTargets=_a(_7(_._3.BackupSubSys.BackupTargets),"_i6").__s},getFooter:function(){this.nextBtn=
new Ext.UI.Button({id:"backups-jobs-createwnd-next-btn",text:_TR("NEXT"),width:100,acceptbtn:true,handler:this.onNextBtnClicked,scope:this});this.cancelBtn=new Ext.UI.Button({id:"backups-jobs-createwnd-cancel-btn",text:_TR("CANCEL"),width:100,handler:this.onCancelClick,scope:this});this.backBtn=new Ext.UI.Button({id:"backups-jobs-createwnd-back-btn",text:_TR("BACK"),hidden:true,width:100,handler:this.onBackClick,scope:this});this.finishBtn=new Ext.UI.Button({id:"backups-jobs-createwnd-finish-btn",
text:_TR("FINISH"),width:100,hidden:true,acceptbtn:true,handler:this.onFinishClick,scope:this});return["->",this.nextBtn,this.cancelBtn,this.backBtn,this.finishBtn]},afterRender:function(){_s8.NewBackupWizard.superclass.afterRender.apply(this,arguments);this.basicPane=new _s8.NewBackupWizard.FirstStep;this.basicPane.render(this.body);this.schPane=new _s8.NewBackupWizard.SecondStep;this.schPane.render(this.body)},loadArgs:function(a){this.basicPane.controls.name.setValue(a)},
onShow:function(){_s8.NewBackupWizard.superclass.onShow.apply(this,arguments);this.reset();this.populate();this.center()},showButtons:function(a){if(a){this.nextBtn.show();this.cancelBtn.show();this.backBtn.hide();this.finishBtn.hide()}else{this.nextBtn.hide();this.cancelBtn.show();this.backBtn.show();this.finishBtn.show()}},onNextBtnClicked:function(){if(!this.basicPane.validation()){this.setTitle(_TR("BACKUP_JOB_NEW")+": "+_TR("SCHEDULE"));this.schPane.show();this.schPane.loadArgs({destinationShareNameOrProtocol:this.basicPane.getDestinationShareNameOrProtocol(),
isSrcLocal:this.basicPane.isSrcLocal,isDstLocal:this.basicPane.isDstLocal});this.basicPane.hide();this.showButtons(false)}},onCancelClick:function(){this.hide()},onBackClick:function(){this.setTitle(_TR("BACKUP_JOB_NEW"));this.schPane.hide();this.basicPane.show();this.showButtons(true)},onFinishClick:function(){if(!(this.basicPane.validation()||!this.schPane.schedComponent.validate()||!this.schPane.validate())){this.hide();var a=_a(new _1.backup,"_ie");this.basicPane.doApply(a);this.schPane.doApply(a);
var b=a.getSourceType().toLowerCase(),c=a.getSourceShareNameOrProtocol().toLowerCase(),e=a.getDestinationShareNameOrProtocol();b=="home"&&c=="*"&&(e=="rsync"||e=="rsync+ssh")&&a.putRsyncOption(16);this.fireEvent("apply",this,a)}},reset:function(){this.basicPane.reset();this.schPane.reset();this.setTitle(_TR("BACKUP_JOB_NEW"));this.schPane.hide();this.basicPane.show();this.showButtons(true)},populate:function(){this.basicPane.populate(this.spTargets.sourceData,this.spTargets.destData)}});Ext.namespace("_s8.NewBackupWizard");
_s8.NewBackupWizard.BrowseHost=_._1(_9,Ext.UI.Window,{modal:true,width:400,height:600,resizable:false,minimizable:false,maximizable:false,cls:"x-backup-readydr-browse",updatesCount:0,constructor:function(){this.html='<div id="'+(this.elHeaderId=Ext.id())+'"></div>';this.fbar=this.getFooter();_s8.NewBackupWizard.BrowseHost.superclass.constructor.apply(this,arguments);this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager();
_a(this.spShareManager,"_i1").Advise(this)},afterRender:function(){_s8.NewBackupWizard.BrowseHost.superclass.afterRender.apply(this,arguments);this.elHeader=Ext.get(this.elHeaderId);this.renderGrid();this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},getFooter:function(){this.bApply=new Ext.UI.Button({width:100,text:_TR("SELECT"),acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=
new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this});return["->",this.bApply,this.bCancel]},renderGrid:function(){var a=[{header:"&#160;",width:40,fixed:true,hideable:false,menuDisabled:true,dataIndex:"ModelCss",xtype:"templatecolumn",tpl:(new Ext.XTemplate(' <tpl if="ModelCss">                            <div style="background-size:32px; background-position:center center; height:32px; width:32px;" class="{ModelCss}"></div>                        </tpl>')).compile()},
{header:_TR("NAME"),width:100,dataIndex:"Hostname",sortable:true,css:"hostNameTxt"}];this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true,listeners:{selectionchange:function(){this.bApply.setDisabled(!this.selModel.getSelected())},scope:this}});this.grid=new Ext.UI.GridPanel({uicls:"ui-fwgrid",height:400,sm:this.selModel,colModel:new Ext.grid.ColumnModel(a),store:new Ext.data.ArrayStore({fields:["Hostname","Model","Serial","IPv4","IPv6","ModelCss","obj"]}),viewConfig:{forceFit:true,autoFill:true,
scrollOffset:0,emptyText:'<div id="'+(this.gvDefaultTitleId=Ext.id())+'" class="x-frontview-dataview-emptybg">'+_TR("BACKUP_BROWSEHOST_EMPTYGRID_MESSAGE")+"</div>",deferEmptyText:false},renderTo:this.body})},onShow:function(){_s8.NewBackupWizard.BrowseHost.superclass.onShow.apply(this,arguments);this.reset();this.center();this.onResized()},reset:function(){this.grid.getStore().loadData([]);this.bApply.disable()},onResized:function(){var a=this.elHeader.getWidth();a>200||(a=200);this.grid.setWidth(a)},
loadArgs:function(a,b){var c="",e="";switch(b){case "smb":case "cifs-ab":c=_TR("BACKUP_BROWSEHOST_WINDOW_SMB_TITLE");e=_TR("BACKUP_BROWSEHOST_EMPTYGRID_SMB_MESSAGE");break;case "ftp":c=_TR("BACKUP_BROWSEHOST_WINDOW_FTP_TITLE");e=_TR("BACKUP_BROWSEHOST_EMPTYGRID_FTP_MESSAGE");break;case "nfs":c=_TR("BACKUP_BROWSEHOST_WINDOW_NFS_TITLE");e=_TR("BACKUP_BROWSEHOST_EMPTYGRID_NFS_MESSAGE");break;case "rsync":c=_TR("BACKUP_BROWSEHOST_WINDOW_RSYNC_TITLE");e=_TR("BACKUP_BROWSEHOST_EMPTYGRID_RSYNC_MESSAGE");
break;case "rsync+ssh":c=_TR("BACKUP_BROWSEHOST_WINDOW_RSYNCSSH_TITLE");e=_TR("BACKUP_BROWSEHOST_EMPTYGRID_RSYNCSSH_MESSAGE");break}this.setTitle(c);this.defaultTitle=e;this.loadedArgs={hostIp:a};a?this.populateRemoteDevices():this.fetchReplisyncDevices(b)},onApplyClick:function(){var a=this.selModel.getSelected();a&&this.fireEvent("select",{Hostname:a.get("Hostname"),Model:a.get("Model"),Serial:a.get("Serial"),IPv4:a.get("IPv4"),IPv6:a.get("IPv6")});this.hide()},fetchReplisyncDevices:function(a){this.spShareManager.updateRemoteDevices("backup-update-remote-devices",
a)},populateRemoteDevices:function(){var a=this.spShareManager.getRemoteDevices(),b=[];a!=_4&&_.each(a,function(c){var e=null;if(e=_a(c,"IReplisyncDevice")){(c=e.getModel())&&c!=_4&&c.toLocaleLowerCase().replace(/\s/g,"");b.push([e.getHostname(),e.getModel(),e.getSerial(),e.getIPv4(),e.getIPv6(),"backup-remote-host-bg",e])}});this.populateCurrentDevice(b)},populateCurrentDevice:function(a){var b=this.loadedArgs.hostIp,c;b&&_.each(a,function(e,f){if(e[0]==b){c=f;return false}},this);
this.grid.getStore().loadData(a);b&&this.selModel.selectRow(c);a.length==0&&Ext.get(this.gvDefaultTitleId).update(this.defaultTitle)},showProgress:function(){if(!this.updatesCount){this.maskProgress.show();this.maskProgress.mask.setDisplayed(false)}++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},_i3b:{_o1:function(a,b){b=="backup-update-remote-devices"&&this.loadedArgs&&!this.loadedArgs.hostIp&&this.showProgress()},
_o3:function(a,b,c){if(c=="backup-update-remote-devices")if(this.loadedArgs&&!this.loadedArgs.hostIp){this.hideProgress();this.populateRemoteDevices()}}}});Ext.namespace("_s8.NewBackupWizard");
_s8.NewBackupWizard.Login=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,updatesCount:0,constructor:function(){this.title=_TR("BACKUP_BROWSSHARES_LOGIN_WINDOW_TITLE");this.html=this.getHtml();this.fbar=this.getFooter();_s8.NewBackupWizard.Login.superclass.constructor.apply(this,arguments)},initComponent:function(){_s8.NewBackupWizard.Login.superclass.initComponent.apply(this,arguments)},getHtml:function(){this.aDownLoadSSHKeyId=
Ext.id();return'<table cellpadding="0" cellspacing="0"><tr><td id="'+(this.lblLoginId=Ext.id())+'" class="x-bac-dlglabel"><nobr>'+_TR("LOGIN")+':</nobr></td><td id="'+(this.tfLoginId=Ext.id())+'" ></td></tr><tr><td id="'+(this.lblPasswordId=Ext.id())+'" class="x-bac-dlglabel"><nobr>'+_TR("PASSWORD")+':</nobr></td><td id="'+(this.tfPasswordId=Ext.id())+'" ></td></tr><tr><td id="'+(this.lblSSHId=Ext.id())+'" class="x-bac-dlglabel"></td><td>'+String.format(_TR("BACKUP_BROWSSHARES_DOWNLOAD_SSHKEY_HTML"),
this.aDownLoadSSHKeyId)+"</td></tr></table>"},getFooter:function(){return["->",new Ext.UI.Button({text:_TR("BACKUP_READYDR_ENHANCEMENTS_CONNECT_BUTTONNAME"),width:100,acceptbtn:true,listeners:{click:this.onConnectClick,scope:this}}),new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true,listeners:{click:function(){localStorage.removeItem("currentNodeID");this.hide()},scope:this}})]},afterRender:function(){_s9.CloneSnapshot.superclass.afterRender.apply(this,arguments);this.lblLogin=
Ext.get(this.lblLoginId);this.lblPassword=Ext.get(this.lblPasswordId);this.tfLogin=new Ext.UI.TextField({width:200,inputMaxLength:31,renderTo:this.tfLoginId});this.tfPassword=new Ext.UI.TextField({width:200,inputType:"password",renderTo:this.tfPasswordId});var a=Ext.get(this.aDownLoadSSHKeyId);a&&a.on("click",function(){_a(_7(_._3.Controls.SSHKeyDownload),"ILogDownloader").Start(document.dbbroker)});this.maskProgress=new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LARGE,
msgCls:"ui-mask-style1",delay:0,frame:false})},onConnectClick:function(){if(this.validate()){var a=this.tfLogin.getValue(),b=this.tfPassword.getValue();this.fireEvent("connect",a,b)}},loadArgs:function(a){if(a.protocol=="rsync+ssh"){Ext.get(this.lblPasswordId).parent("tr").setDisplayed(false);Ext.get(this.lblSSHId).parent("tr").setDisplayed(true)}else{Ext.get(this.lblPasswordId).parent("tr").setDisplayed(true);Ext.get(this.lblSSHId).parent("tr").setDisplayed(false)}this.clear()},validate:function(){var a=
true;this.lblLogin.removeClass("x-bac-label-error");var b=this.tfLogin.getValue();if(_.isEmpty(b)){this.lblLogin.addClass("x-bac-label-error");a=false}return a},clear:function(){this.tfLogin.setValue("");this.tfPassword.setValue("");this.center()}});_._2("_s7.Storage.RemoteBrowse");
_s8.NewBackupWizard.RemoteNewDir=_._1(_9,Ext.UI.Window,{help:"cloud_wnd_amazons3_new_directory",modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,constructor:function(){_.apply(this,{title:_TR("CLOUD_STORAGE_CREATE_DIRECTORY"),html:this.getHtml(),fbar:this.getFooter(),listeners:{afterrender:this.onAfterRender,show:this.onShow,scope:this}});_s8.NewBackupWizard.RemoteNewDir.superclass.constructor.call(this);this.addEvents("apply",
"cancel");this.on("show",this.onShown,this);this.on("hide",this.onHidden,this);this.hashData=null},getHtml:function(){return'<table cellpadding="0" cellspacing="0" style="width: 100%;"><tr><td style="text-align: right; padding-right: 5px; height: 36px; vertical-align: middle;min-width: 80px; width: 50%; max-width: 50%; word-break: break-all; white-space: normal;" id="'+(this.lNameId=Ext.id())+'">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>'},getFooter:function(){return[{xtype:"uibutton",
text:_TR("CREATE"),handler:this.onCreate,scope:this,acceptbtn:true},{xtype:"uibutton",text:_TR("CANCEL"),handler:function(){this.fireEvent("cancel",this);this.hide()},scope:this,cancelbtn:true}]},onAfterRender:function(){this.tfName=new Ext.UI.TextField({cls:"x-sec-editor-adm",width:280,inputMaxLength:80,tooltipCfg:{html:_TR("CLOUD_STORAGE_REMOTE_NEW_DIR_ERRORTIP")},renderTo:this.tfNameId,listeners:{keyup:this.onNameChange,change:this.onNameChange,scope:this}});this.lblName=Ext.get(this.lNameId)},
show:function(a){this.hashData=a;_s8.NewBackupWizard.RemoteNewDir.superclass.show.call(this)},getValue:function(){if(this.tfName)return this.tfName.getValue();return null},onShown:function(){this.isActive=true;this.reset();this.center();this.tfName.focus(false,true)},onHidden:function(){this.hashData=null},onCreate:function(){this.clearError(this.lblName,this.tfName);var a=this;if(this.validateInput(this.lblName,this.tfName,function(b){return!a.hashData||!a.hashData[b]})){this.fireEvent("apply",
this,this.tfName.getValue());this.hide()}},onNameChange:function(){this.clearError(this.lblName,this.tfName)},reset:function(){this.clearError(this.lblName,this.tfName);this.clearValues()},clearError:function(a,b){if(b.tooltip)b.tooltip.enabled=false;a.removeClass("x-bac-label-error")},clearValues:function(){this.tfName.setValue("")},validateInput:function(a,b,c){a.removeClass("x-bac-label-error");b.tooltip.enabled=false;if(!b.getValue()||c&&!c(b.getValue())){b.tooltip.enabled=true;a.addClass("x-bac-label-error");
return false}if(!_.isValidFolderName(b.getValue())){b.tooltip.enabled=true;a.addClass("x-bac-label-error");return false}return true}});Ext.namespace("_s8.NewBackupWizard");
_s8.NewBackupWizard.BrowseRemoteShares=_._1(_9,Ext.UI.Window,{modal:true,width:500,height:550,resizable:false,minimizable:false,maximizable:false,cls:"x-backup-readydr-browse",updatesCount:0,constructor:function(){this.html='<table style="width: 100%;"><tr><td><div style="float:left;" id="'+(this.bConnectAsId=Ext.id())+'"></div><div style="float:left; line-height:30px; margin-left:5px; font-size:14px;" id="'+(this.lConnectName=Ext.id())+'"></div><div style="clear:both;"</div></td><td><div style="float:right;" id="'+
(this.bNewFolderId=Ext.id())+'"></div><div style="float:right; margin-right:5px;" id="'+(this.bRefreshId=Ext.id())+'"></div><div style="clear:both;"</div></td></tr><tr><td colspan="2"><div style="margin-top:5px;" id="'+(this.dShareFolderTreeId=Ext.id())+'"></div></td></tr></table>';this.fbar=this.getFooter();_s8.NewBackupWizard.BrowseRemoteShares.superclass.constructor.apply(this,arguments);this.wndNewDir=new _s8.NewBackupWizard.RemoteNewDir;this.wndNewDir.on("apply",this.onWndNewDirApply,
this);this.wndNewDir.on("cancel",this.onWndNewDirCancel,this);this.root="";this.wndLogin=new _s8.NewBackupWizard.Login;this.wndLogin.on("connect",this.onLoginConnect,this)},onLoginConnect:function(a,b){this.fromLogin=1;this.loadedArgs.login=a;this.loadedArgs.password=b;if(a=localStorage.currentNodeID){a=this.root.findChild("id",a,true);var c=b="",e="";e=a;for(c=this.volumnName;e!=this.root;){b=e.text+(b!=""?"/":"")+b;e=e.parentNode}if(a.parentNode==this.root||a.parentNode.text==c)this.fetchRemoteDirectories(b);
else{a=b.split("/");if(c){c=a.shift()+"/";c+=a.shift()}else c=a.shift();e=a.join("/");this.fetchRemoteDirectories(c,e)}}else this.fetchRemoteDirectories()},initComponent:function(){var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spBackupManager=a.getBackupManager();_a(this.spBackupManager,"_i1").Advise(this)}_s8.BackupMedia.superclass.initComponent.apply(this,arguments)},afterRender:function(){_s8.NewBackupWizard.BrowseRemoteShares.superclass.afterRender.apply(this,
arguments);this.bConnectAs=new Ext.UI.Button({width:85,text:_TR("BACKUP_BROWSSHARES_CONNECT_BUTTON_NAME"),listeners:{click:function(){this.onConnectAsClick()},scope:this},scope:this,renderTo:this.bConnectAsId});this.bRefresh=new Ext.UI.RoundButton({cls:"x-browse-header-buttons-btn x-browse-header-refreshbtn2 backup-btn-refresh-icon",title:_TR("BACKUP_BROWSSHARES_REFRESH_BUTTON_NAME"),renderTo:this.bRefreshId,listeners:{click:function(){this.onRefreshClick()},scope:this}});this.bNewFolder=new Ext.UI.RoundButton({cls:"x-browse-header-buttons-btn x-browse-header-addfolder backup-btn-newfolder-icon",
title:_TR("NEW_FOLDER"),renderTo:this.bNewFolderId,listeners:{click:function(){this.onNewFolderClick()},scope:this}});this.root=new Ext.tree.TreeNode({text:"root",iconCls:"backup-iconCls",expanded:true});var a=this.fetchRemoteDirectories.bind(this);this.shareFolderTree=new Ext.tree.TreePanel({renderTo:this.dShareFolderTreeId,cls:"backup-remote-sharefolders-tree",height:340,style:"max-width:438px",autoScroll:true,border:false,useArrows:true,rootVisible:true,root:this.root,listeners:{beforeclick:function(b){if(b==
this.root)return false},beforeexpandnode:function(b){if(b!=this.root&&b.text!=localStorage.volumnName){localStorage.currentNodeID=b.id;var c="",e="",f="";f=b;for(e=localStorage.volumnName;b!=this.root;){c=b.text+(c!=""?"/":"")+c;b=b.parentNode}if(f.parentNode==this.root||f.parentNode.text==e)a(c);else{b=c.split("/");if(e){e=b.shift()+"/";e+=b.shift()}else e=b.shift();f=b.join("/");a(e,f)}}}}});this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",
delay:0,frame:false})},onConnectAsClick:function(){this.wndLogin.show();this.wndLogin.loadArgs(this.loadedArgs)},onRefreshClick:function(){this.loadArgs(this.loadedArgs)},onNewFolderClick:function(){if(this.shareFolderTree.getSelectionModel().getSelectedNode()){this.curSubFolderName=this.curSelNode=null;this.wndNewDir.show(this.hashData)}else Ext.UI.MessageBox.show({title:_TR("BACKUP_BROWSSHARES_MESSAGEBOX_TITLE"),msg:_TR("BACKUP_BROWSSHARES_MESSAGEBOX_CONTENT"),buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING})},
getFooter:function(){this.bApply=new Ext.UI.Button({width:100,text:_TR("SELECT"),acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this});return["->",this.bApply,this.bCancel]},loadArgs:function(a){this.setTitle(_TR("BACKUP_BROWSSHARES_WINDOW_TITLE"));this.volumnName=null;this.shareFolderTree.setVisible(false);localStorage.removeItem("currentNodeID");localStorage.removeItem("volumnName");this.loadedArgs=
a;this.fetchRemoteDirectories()},onWndNewDirApply:function(a,b){a=this.shareFolderTree.getSelectionModel().getSelectedNode();var c=this.loadedArgs;c={lp:this.lpND+"-"+this.loadedArgs.type,type:c.type,protocol:c.protocol,host:c.host,login:c.login||"",password:c.password||"",port:c.port};if(a){this.curSelNode=a;this.curSubFolderName=b;var e="",f="",g="";g=a;for(f=localStorage.volumnName;a!=this.root;){e=a.text+(e!=""?"/":"")+e;a=a.parentNode}if(g.parentNode==this.root||g.parentNode.text==f){f=e;g=b}else{a=
e.split("/");if(f){f=a.shift()+"/";f+=a.shift()}else f=a.shift();g=a.join("/")+"/"+b}c.share=f;c.subfolder=g;this.spBackupManager.createRemoteDir(c)}},onWndNewDirCancel:function(){this.wndNewDir.hide()},onApplyClick:function(){var a=this.shareFolderTree.getSelectionModel().getSelectedNode(),b="",c={};if(a){for(;a!=this.root;){b=a.text+(b!=""?"/":"")+b;a=a.parentNode}if(this.volumnName||this.loadedArgs.protocol=="rsync+ssh")b="/"+b;c.path=b;c.login=this.loadedArgs.login;c.password=this.loadedArgs.password;
this.fireEvent("select",c);this.hide()}},fetchRemoteDirectories:function(a,b){a=a||"";b=b||"";var c=this.loadedArgs;this.spBackupManager.updateRemoteDirectories({lp:this.lpRD+"-"+this.loadedArgs.type,type:c.type,protocol:c.protocol,host:c.host,share:a,subfolder:b,login:c.login||"",password:c.password||"",port:c.port})},populateRemoteShares:function(){var a=this.spBackupManager.getRemoteDirectories(),b=[],c=null;b=this.loadedArgs;var e=false;c=this.volumnName;var f=localStorage.currentNodeID;if(f){localStorage.removeItem("currentNodeID");
var g=this.root.findChild("id",f,true),h=this.root;g.eachChild(function(k){h.removeChild(k)});_.each(a,function(k){g.appendChild({text:c?k.replace("/"+c+"/",""):k,iconCls:"backup-iconCls",children:[]})})}else{h=this.root=new Ext.tree.TreeNode({text:"root",iconCls:"backup-iconCls",expanded:true});switch(b.protocol){case "nfs":case "rsync+ssh":e=true;break}this.shareFolderTree.rootVisible=e;if(a!=_4){if(a.length>0)switch(b.protocol){case "nfs":case "rsync+ssh":if(b=a[0].match(/\/(\S*)\//))c=b[1];
break}if(c){this.volumnName=localStorage.volumnName=c;var j=[];_.each(a,function(k){j.push({text:k.replace("/"+c+"/",""),iconCls:"backup-iconCls",children:[]})});h.appendChild({text:c,expand:false,iconCls:"backup-iconCls",children:j})}else _.each(a,function(k){h.appendChild({text:k,iconCls:"backup-iconCls",children:[]})})}this.shareFolderTree.setRootNode(h);this.shareFolderTree.setVisible(true)}Ext.get(this.lConnectName).update(this.loadedArgs.login)},showProgress:function(){!this.updatesCount&&
this.maskProgress&&this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;!this.updatesCount&&this.maskProgress&&this.maskProgress.hide()},lpRD:"backup-update-remote-directories",lpND:"backup-update-remote-newdir",_ih:{_o1:function(a,b){if(this.loadedArgs)if(b==this.lpRD+"-"+this.loadedArgs.type||b==this.lpND+"-"+this.loadedArgs.type)this.showProgress()},_o3:function(a,b,c){if(this.loadedArgs){if(c==this.lpRD+"-"+this.loadedArgs.type)if(a==
_4){if(a=_a(b,"_io").getLastNMLError())if(a.getErrorCode()=="7087020013"){this.wndLogin&&this.wndLogin.hide();this.bConnectAs.fireEvent("click")}else Ext.UI.MessageBox.error({title:this.title,msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}else{if(this.fromLogin==1){this.fromLogin=0;this.wndLogin.hide()}this.populateRemoteShares()}else if(c==this.lpND+"-"+this.loadedArgs.type)if(a==_4){if(a=_a(b,"_io").getLastNMLError())Ext.UI.MessageBox.error({title:this.title,
msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}else{this.wndNewDir.hide();a=this.curSelNode;a.appendChild(new Ext.tree.TreeNode({text:this.curSubFolderName,iconCls:"backup-iconCls"}));a.expand();this.curSubFolderName=this.curSelNode=null}this.hideProgress()}}}});Ext.namespace("_s8.NewBackupWizard");
_s8.NewBackupWizard.FirstStep=_._1(Ext.Container,{cls:"x-sh-wndadddataset",constructor:function(){_s8.NewBackupWizard.FirstStep.superclass.constructor.apply(this,arguments);this.controls={};this.isSrcLocal=true;this.isDstLocal=false;this.spBKManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getBackupManager();this.on("afterrender",this.onReady,this)},onReady:function(){this.el.update('<div><table style="margin-bottom: 20px;"><tr><td id="'+(this.lNameId=
Ext.id())+'" class="x-bac-label" align="left" style="min-width:70px;">'+_TR("BACKUP_JOB_NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table></div><table cellpadding="0" style="table-layout: fixed;"><tr><td valign="top" width="430px"><div id="'+(this.srctabId=Ext.id())+'"></div><div id="'+(this.srcsettingId=Ext.id())+'"></div></td><td width="0px" height="400px" style="position: relative; padding: 0 30px" ><div class="x-backup-wizard-arrow position"></div><div style="border-right: 1px solid #eee !important; position: absolute; top: 70px; width: 1px; height: 320px;"></div></td><td valign="top" width="430px"><div id="'+
(this.dsttabId=Ext.id())+'"></div><div id="'+(this.dstsettingId=Ext.id())+'"></div></td></tr></table>');this.controls.name=new Ext.UI.TextField({id:"backups-jobs-createwnd-name",width:324,tooltipCfg:{html:_TR("BACKUP_ERRORTIP_NAME")}});this.controls.name.render(this.tfNameId);this.controls.nameLbl=Ext.get(this.lNameId);this.srcLocalTab=new Ext.UI.SegmentedButton({id:"backups-jobs-createwnd-src-local-tab",xtype:"uisegmentedbutton",text:_TR("BACKUP_LOCAL"),value:"local",width:120});this.srcRemoteTab=
new Ext.UI.SegmentedButton({id:"backups-jobs-createwnd-src-remote-tab",xtype:"uisegmentedbutton",text:_TR("BACKUP_REMOTE"),value:"remote",width:120});this.srcTabs=new Ext.UI.SegmentedControl({items:[this.srcLocalTab,this.srcRemoteTab],style:"margin: 20px auto;"});this.srcTabs.on("buttonchecked",this.onSrcTabItemSelect,this);this.srcTabs.render(this.srctabId);this.srcLocal=new _s8.NewBackupWizard.LocalContent({id:"backups-jobs-createwnd-src-local",backupMode:"source",description:_TR("BACKUPJOB_LOCAL_TEXT")});
this.srcRemote=new _s8.NewBackupWizard.RemoteContent({id:"backups-jobs-createwnd-src-remote",description:_TR("BACKUPJOB_LOCAL_REM_TEXT"),type:"local"});this.srcLocal.render(this.srcsettingId);this.srcRemote.render(this.srcsettingId);this.dstLocalTab=new Ext.UI.SegmentedButton({id:"backups-jobs-createwnd-dst-local-tab",xtype:"uisegmentedbutton",text:_TR("BACKUP_LOCAL"),value:"local",width:120});this.dstRemoteTab=new Ext.UI.SegmentedButton({id:"backups-jobs-createwnd-dst-remote-tab",xtype:"uisegmentedbutton",
text:_TR("BACKUP_REMOTE"),value:"remote",width:120});this.dstTabs=new Ext.UI.SegmentedControl({items:[this.dstLocalTab,this.dstRemoteTab],style:"margin: 20px auto;"});this.dstTabs.on("buttonchecked",this.onDstTabItemSelect,this);this.dstTabs.render(this.dsttabId);this.dstLocal=new _s8.NewBackupWizard.LocalContent({id:"backups-jobs-createwnd-dst-local",backupMode:"destination",description:_TR("BACKUPJOB_REMOTE_LOC_HINT")});this.dstRemote=new _s8.NewBackupWizard.RemoteContent({id:"backups-jobs-createwnd-dst-remote",
description:_TR("BACKUPJOB_REMOTE_HINT"),type:"remote"});this.dstLocal.render(this.dstsettingId);this.dstRemote.render(this.dstsettingId);this.srcTabs.setPressedButton(0);this.dstTabs.setPressedButton(1)},onSrcTabItemSelect:function(a){switch(a.value){case "remote":this.srcLocal.hide();this.srcRemote.show();this.isSrcLocal=false;this.isDstLocal||this.dstTabs.setPressedButton(0);break;case "local":this.srcLocal.show();this.srcRemote.hide();this.isSrcLocal=true;break}},onDstTabItemSelect:function(a){switch(a.value){case "remote":this.dstLocal.hide();
this.dstRemote.show();this.isDstLocal=false;this.isSrcLocal||this.srcTabs.setPressedButton(0);break;case "local":this.dstLocal.show();this.dstRemote.hide();this.isDstLocal=true;break}},populate:function(a,b){this.controls.nameLbl.removeClass("x-bac-label-error");this.srcRemote.loadProtocols(a);this.dstRemote.loadProtocols(b);return _5},showError:function(a){a.addClass("x-bac-label-error")},validation:function(){var a=false;this.controls.nameLbl.removeClass("x-bac-label-error");this.controls.name.tooltip.enabled=
false;var b=this.controls.name.getValue().trim();if(b==""){v=false;this.showError(this.controls.nameLbl);a=this.controls.name.tooltip.enabled=true}else{b=b.toLowerCase();for(var c=this.spBKManager.getBackups(),e=0;e<c.length;++e)if(_a(c[e],"_ie").getName().toLowerCase()==b){v=false;this.showError(this.controls.nameLbl);a=this.controls.name.tooltip.enabled=true}}if(this.isSrcLocal){if(this.srcLocal.validation())a=true}else if(this.srcRemote.validation())a=true;if(this.isDstLocal){if(this.dstLocal.validation()||
this.dstLocal.destValidation())a=true}else if(this.dstRemote.validation())a=true;if(this.isSrcLocal&&this.isDstLocal){b=this.srcLocal.local.volume?this.srcLocal.local.volume.getVolumeName():"";if((this.dstLocal.local.volume?this.dstLocal.local.volume.getVolumeName():"")===b&&this.srcLocal.local.type=="volume"||this.dstLocal.local.type=="volume"||this.srcLocal.local.type=="volume"&&this.dstLocal.local.type=="home"){this.dstLocal.local.pathLbl.addClass("x-bac-label-error");a=true}}return a},doApply:function(a){a.putName(this.controls.name.getValue().trim());
if(this.isSrcLocal){a.putSourceType(this.srcLocal.local.type);if(this.srcLocal.local.shareName){a.putSourceShareNameOrProtocol(this.srcLocal.local.shareName);a.putSourcePath(this.srcLocal.local.subPath)}else a.putSourcePath(this.srcLocal.local.path.getValue());if(this.srcLocal.local.type=="volume"){a.putSourcePath("");a.putSourceShareNameOrProtocol(this.srcLocal.local.path.getValue().replace(/^\//,""))}if(this.srcLocal.local.type=="usb"||this.srcLocal.local.usbShare){a.putSourcePath(this.srcLocal.local.usbPath.getValue());
a.putSourceEject(this.srcLocal.local.autoEject.checked?1:0)}}else{var b=this.srcRemote.remote,c=b.protocol.getStore().getById(b.protocol.getValue()),e=b.host.getValue(),f=b.protocol.getStore().getById(b.protocol.getValue()).get("sharename");a.putSourceShareNameOrProtocol(f);if(c!=null){a.putSourceType(c.get("type"));a.putSourceShareNameOrProtocol(c.get("name"))}if(c.get("name").indexOf("cifs")==0)a.putSourcePath(String.format("//{0}/{1}",e,b.path.getValue()));else if(c.get("name")=="ftp")a.putSourcePath(String.format("ftp://{0}/{1}",
e,b.path.getValue()));else if(c.get("name")=="rsync")a.putSourcePath(String.format("{0}::{1}",e,b.path.getValue()));else if(c.get("name")=="rsync+ssh"||c.get("name")=="nfs"){f=c.get("name")=="nfs"?"{0}:{1}":"{0}:/{1}";a.putSourcePath(String.format(f,e,b.path.getValue()))}a.putSourceLogin(b.login.getValue());a.putSourcePassword(b.password.getValue());if(c.get("name")=="ftp"||c.get("name")=="rsync"||c.get("name")=="rsync+ssh"){b=b.port.getValue();a.putSourcePort(b?b:"0")}else a.putSourcePort(0)}if(this.isDstLocal){a.putDestinationType(this.dstLocal.local.type);
if(this.dstLocal.local.shareName){a.putDestinationShareNameOrProtocol(this.dstLocal.local.shareName);a.putDestinationPath(this.dstLocal.local.subPath)}else a.putDestinationPath(this.dstLocal.local.path.getValue());if(this.dstLocal.local.type=="usb"||this.dstLocal.local.usbShare){a.putDestinationPath(this.dstLocal.local.usbPath.getValue());a.putDestinationEject(this.dstLocal.local.autoEject.checked?1:0)}}else{c=this.dstRemote.remote;e=c.protocol.getStore().getById(c.protocol.getValue());var g=c.host.getValue();
b=c.port.getValue();c.protocol.getStore().getById(c.protocol.getValue()).get("sharename");if(e!=null){a.putDestinationType(e.get("type"));a.putDestinationShareNameOrProtocol(e.get("name"))}a.putDestinationPath(c.path.getValue());if(e.get("name").indexOf("cifs")==0)a.putDestinationPath(String.format("//{0}/{1}",g,c.path.getValue()));else if(e.get("name")=="ftp"){a.putDestinationPath(String.format("ftp://{0}/{1}",g,c.path.getValue()));a.putDestinationPort(b?b:"0")}else if(e.get("name")=="rsync"){a.putDestinationPath(String.format("{0}::{1}",
g,c.path.getValue()));a.putDestinationPort(b?b:"0")}else if(e.get("name")=="rsync+ssh"||e.get("name")=="nfs"){f=e.get("name")=="nfs"?"{0}:{1}":"{0}:/{1}";a.putDestinationPath(String.format(f,g,c.path.getValue()));if(e.get("name")=="rsync+ssh")a.putDestinationPort(b?b:"0")}a.putDestinationLogin(c.login.getValue());a.putDestinationPassword(c.password.getValue())}},getDestinationShareNameOrProtocol:function(){if(!this.isDstLocal){var a=this.dstRemote.remote.protocol.getStore().getById(this.dstRemote.remote.protocol.getValue());
if(a!=null)return a.get("name")}},reset:function(){this.controls.name.setValue("");this.srcLocal.show();this.srcLocal.reset();this.srcRemote.hide();this.srcRemote.reset();this.dstLocal.hide();this.dstLocal.reset();this.dstRemote.show();this.dstRemote.reset();this.srcTabs.setPressedButton(0);this.dstTabs.setPressedButton(1)}});Ext.namespace("_s8.NewBackupWizard");
_s8.NewBackupWizard.SecondStep=_._1(Ext.Container,{hidden:true,constructor:function(){this.scheduleOpt={};this.html='<div id="'+(this.boxSchedId=Ext.id())+'"></div><table id="'+(this.wakeOnT=Ext.id())+'"><tr><td class="x-bac-label">'+_TR("BACKUP_SCHEDULE_FULL")+_TR("COLON")+'</td><td id="'+(this.cbFullBackupId=Ext.id())+'"></td></tr><tr><td id="'+(this.wakeOnLblId=Ext.id())+'" class="x-bac-label">'+_TR("BACKUP_WAKE_ON_LAN_BEFORE_BACKUP")+_TR("COLON")+'</td><td id="'+(this.wakeOnId=
Ext.id())+'"></td></tr><tr><td class="x-bac-label">'+_TR("BACKUP_TIME_TO_WAIT")+_TR("COLON")+'</td><td><div style="float:left" id="'+(this.spnWaitId=Ext.id())+'"></div><div style="float:left" id="'+(this.spnWaitHelpId=Ext.id())+'"></div></td></tr></table><div class="x-window-dlg" style="margin: 20px 0 0 158px;"><div id="'+(this.chbBeforeId=Ext.id())+'" style="margin-bottom: 10px;"></div><div id="'+(this.chbBeforeTxtId=Ext.id())+'" class="ext-mb-warning x-backup-warning-indicator">'+_TR("BACKUP_INSPECTOR_OPT_REMOVE_LN2")+
"</div></div>";_s8.NewBackupWizard.SecondStep.superclass.constructor.apply(this,arguments)},afterRender:function(){_s8.NewBackupWizard.SecondStep.superclass.afterRender.apply(this,arguments);this.schedComponent=new _s8.BackupSettings.Schedule({renderTo:this.boxSchedId});this.chbBefore=new Ext.UI.Checkbox({id:"backups-jobs-createwnd-remove-dest-content-chb",boxLabel:_TR("BACKUP_INSPECTOR_OPT_REMOVE_LN1"),cls:"x-bac-chb-autoheight",renderTo:this.chbBeforeId});
this.cbFullBackup=new Ext.UI.ComboBox({width:150,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["FIRST_TIME",_TR("FIRST_TIME")],["EVERY_WEEK",_TR("EVERY_WEEK")],["EVERY_2_WEEKS",_TR("EVERY_2_WEEKS")],["EVERY_3_WEEKS",_TR("EVERY_3_WEEKS")],["EVERY_4_WEEKS",_TR("EVERY_4_WEEKS")],["EVERY_TIME",_TR("EVERY_TIME")],["NEVER",_TR("BU_NEVER")]]}),valueField:"id",displayField:"text",value:"FIRST_TIME",renderTo:this.cbFullBackupId});this.wakeOnLbl=Ext.get(this.wakeOnLblId);
this.wakeOn=new Ext.UI.TextField({width:250,renderTo:this.wakeOnId,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_MAC_ADDRESS")},listeners:{change:this.onWakeOnChange,scope:this}});this.spnWait=new Ext.UI.SpinnerField({width:48,minValue:1,maxValue:59,selectOnFocus:true,renderTo:this.spnWaitId});new Ext.UI.RoundButton({cls:" x-frontview-btn-info",style:"margin-left: 5px;",renderTo:this.spnWaitHelpId,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("BACKUP_TIME_TO_WAIT_TOOLTIP")})}}});
this.spnWait.setDisabled(true);this.spnWait.setValue(0)},onWakeOnChange:function(a,b){if(b!=""){this.spnWait.setDisabled(false);this.spnWait.getValue()==0&&this.spnWait.setValue(1)}else{this.spnWait.setDisabled(true);this.spnWait.setValue(0)}},isValidMacAddress:function(){this.wakeOnLbl.removeClass("x-bac-label-error");this.wakeOn.tooltip.enabled=false;var a=this.wakeOn.getValue();if(a=="")return true;if(!/^(([a-f0-9]{2}:){5}[a-f0-9]{2},?)+$/i.test(a)){this.wakeOnLbl.addClass("x-bac-label-error");
this.wakeOn.tooltip.enabled=true;return false}return true},reset:function(){this.schedComponent.populate();this.wakeOn.setValue("");this.spnWait.setDisabled(true);this.spnWait.setValue(0);this.chbBefore.setValue(false)},loadArgs:function(a){var b=a.destinationShareNameOrProtocol;b=b?b.toLowerCase():null;Ext.get(this.chbBeforeTxtId).removeClass("x-bac-disabled");this.chbBefore.setDisabled(false);this.chbBefore.setDisabled(b&&b.indexOf("rsync")>=0);if(b&&(b=="ftp"||b=="nfs"||b.indexOf("rsync")>=0)){this.chbBefore.setDisabled(true);
this.chbBefore.setValue(false);Ext.get(this.chbBeforeTxtId).addClass("x-bac-disabled")}Ext.get(this.wakeOnT).setDisplayed(!(a.isSrcLocal&&a.isDstLocal))},validate:function(){return this.isValidMacAddress()},doApply:function(a){this.schedComponent.doApply(a);a.putRemovePreviousBackup(this.chbBefore.getValue()?"1":"0");a.putFullBackupFrequency(this.cbFullBackup.getValue());a.putEmailThisToAlertEmail(0);a.putRsyncOption(0);a.putMiscOption(0);a.putWolAddress(this.wakeOn.getValue());a.putTimeToWait(this.spnWait.getValue())}});
Ext.namespace("_s8");
_s8.NewBackupWizard.LocalContent=_._1(Ext.Container,{hidden:true,description:"",constructor:function(a){this.local={};this.html='<table style="margin: 0 auto;"><tr><td colspan="3" style="text-align: center;">'+a.description+'</td></tr><tr><td height="20px" colspan="3"></td></tr><tr><td id="'+(this.pathLblId=Ext.id())+'" class="x-bac-label">'+_TR("LOCATION")+':</td><td id="'+(this.pathId=Ext.id())+'" style="width:230px;"></td><td align="left" id="'+(this.browseBtnId=Ext.id())+'"></td></tr><tr><td id="'+
(this.usbPathLblId=Ext.id())+'" class="x-bac-label">'+_TR("PATH")+':</td><td id="'+(this.usbPathId=Ext.id())+'" colspan="2"></td></tr><tr><td align="right" class="x-bac-label"></td><td id="'+(this.autoEjectId=Ext.id())+'" colspan="2"></td></tr></table>';_s8.NewBackupWizard.LocalContent.superclass.constructor.apply(this,arguments);this.spBKManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getBackupManager()},afterRender:function(){_s8.NewBackupWizard.LocalContent.superclass.afterRender.apply(this,
arguments);this.local.path=new Ext.UI.TextField({cls:"x-bac-form-text local-target-path-field",maxLength:390,readOnly:true});this.local.path.render(this.pathId);this.local.pathLbl=Ext.get(this.pathLblId);this.local.usbPath=new Ext.UI.TextField({cls:"x-bac-form-text local-target-usb-path-field",maxLength:390,hidden:true});this.local.usbPath.render(this.usbPathId);this.local.usbPathLbl=Ext.get(this.usbPathLblId);this.local.usbPathLbl.hide();this.browseButton=new Ext.UI.Button({id:"local-target-browse-btn",
width:80,style:"margin-left: 3px;",text:_TR("BROWSE"),handler:this.browseFolder,scope:this,expandToText:true});this.browseButton.render(this.browseBtnId);this.local.autoEject=new Ext.UI.Checkbox({cls:"local-target-usb-auto-eject-chb",bufferResize:0,boxLabel:_TR("BACKUP_AUTO_EJECT_DEVICE"),hidden:true});this.local.autoEject.render(this.autoEjectId)},browseFolder:function(){this.bw=this.bw||CComSingleton(_s9.BrowseWindow);this.bw.on("selected",this.onSelectFile,this);this.bw.on("cancel",this.onCancelSelectFile,
this);this.bw.show();this.bw.setBackupMode(this.backupMode)},onCancelSelectFile:function(){this.bw.setBackupMode(false);this.bw.un("cancel",this.onCancelSelectFile,this);this.bw.un("selected",this.onSelectFile,this)},onSelectFile:function(a){this.bw.un("cancel",this.onCancelSelectFile,this);this.bw.un("selected",this.onSelectFile,this);this.local.type="";this.local.volume=null;var b=a.share,c=a.backupTarget,e=a.path;e=e||"";this.local.type=a.type==="vol"?"volume":a.type;this.local.volume=a.volume||
a.fsprovider.getVolumeByPath(e);var f="";if(c){f=c?c.getType():"";this.local.type=f;this.local.shareName=c?c.getShareNameOrProtocol():""}this.local.usbShare=false;if(e.indexOf("/media")==0){a=this.spBKManager.getBackupSourceTargets();_.each(a,function(g){g=_a(g,"_ii");if(g.getPath()==e){this.local.type=g.getType();this.local.shareName=g.getShareNameOrProtocol();this.local.usbShare=true;f="usb"}},this)}if(f=="usb"){this.local.autoEject.show();this.local.usbPathLbl.show();this.local.usbPath.show()}else{this.local.autoEject.hide();
this.local.usbPathLbl.hide();this.local.usbPath.hide()}if(b&&f!="usb"){b=b.getName();this.local.type="share";this.local.shareName=b;b=e.split("/").splice(3);a="";if(b&&b.length>0)a=b.join("/");this.local.subPath=a}this.local.path.setValue(e);this.bw.setBackupMode(false)},validation:function(){var a=false;this.local.pathLbl.removeClass("x-bac-label-error");var b=this.local.path.getValue().trim();if(b==""||b==_TR("BACKUP_USB")||b==_TR("BROWSE_HOME_FOLDERS")){this.local.pathLbl.addClass("x-bac-label-error");
a=true}return a},destValidation:function(){var a=false;this.local.pathLbl.removeClass("x-bac-label-error");if(this.local.type==="volume"||this.local.type==="ejvol"||this.local.path.getValue().trim()==="/"){this.local.pathLbl.addClass("x-bac-label-error");a=true}return a},reset:function(){this.local.type="";this.local.shareName="";this.local.subPath="";this.local.pathLbl.removeClass("x-bac-label-error");this.local.path.setValue("");this.local.usbPath.setValue("");this.local.autoEject.hide();this.local.usbPath.hide();
this.local.usbPathLbl.hide()}});Ext.namespace("_s8");
_s8.NewBackupWizard.RemoteContent=_._1(_9,Ext.Container,IPromptWindowEvents,{description:"",hidden:true,constructor:function(a,b){this.remote={};this.type=b;this.html='<table style="margin: 0 auto;"><tr><td colspan="4" style="text-align: center;">'+a.description+'</td></tr><tr><td height="20px" colspan="4"></td></tr><tr><td id="'+(this.protocolLblId=Ext.id())+'" class="x-bac-label">'+_TR("PROTOCOL")+_TR("COLON")+'</td><td id="'+(this.protocolId=Ext.id())+'" colspan="3"></td></tr><tr><td id="'+
(this.hostLblId=Ext.id())+'" class="x-bac-label">'+_TR("HOST")+_TR("COLON")+'</td><td id="'+(this.hostId=Ext.id())+'"></td><td id="'+(this.bBrowseHostId=Ext.id())+'"></td><td style="padding-bottom: 10px;" id="'+(this.ttBrowseHostId=Ext.id())+'"></td></tr><tr><td id="'+(this.portLblId=Ext.id())+'" class="x-bac-label">'+_TR("PORT")+_TR("COLON")+'</td><td id="'+(this.portId=Ext.id())+'" colspan="3"></td></tr><tr style="display:none;"><td id="'+(this.pathSampleId=Ext.id())+'" class="x-bac-tip" colspan="4"></td></tr><tr><td id="'+
(this.pathLblId=Ext.id())+'" class="x-bac-label">'+_TR("share")+_TR("COLON")+'</td><td id="'+(this.pathId=Ext.id())+'" ></td><td id="'+(this.bBrowseShareId=Ext.id())+'"></td><td style="padding-bottom: 10px;" id="'+(this.ttBrowseShareId=Ext.id())+'"></td></tr><tr id="'+(this.loginCntrId=Ext.id())+'"><td class="x-bac-label">'+_TR("LOGIN")+_TR("COLON")+'</td><td id="'+(this.loginId=Ext.id())+'" colspan="3"></td></tr><tr id="'+(this.passwordCntrId=Ext.id())+'"><td class="x-bac-label">'+_TR("PASSWORD")+
_TR("COLON")+'</td><td id="'+(this.passwordId=Ext.id())+'" colspan="3"></td></tr><tr><td class="x-bac-label"><div id="'+(this.testProgressId=Ext.id())+'" class="x-bac-test-progress x-hide-display"><i></i></div></td><td id="'+(this.testBtnId=Ext.id())+'" colspan="3"></td></tr></table>';this.lparamTest="backuptab_testconnection";_s8.NewBackupWizard.RemoteContent.superclass.constructor.apply(this,arguments);this.spBKManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getBackupManager();
_a(this.spBKManager,"_i1").Advise(this);this.on("afterrender",this.onReady,this);this.wndBrowseHost=new _s8.NewBackupWizard.BrowseHost;this.wndBrowseHost.on("select",this.onHostSelected,this);this.wndBrowseRemoteShares=new _s8.NewBackupWizard.BrowseRemoteShares;this.wndBrowseRemoteShares.on("select",this.onRemoteSharesSelected,this)},IPromptWindowEvents:{OnClosing:function(a){Ext.isEmpty(a.getArgs().delegatename)||this[a.getArgs().delegatename](a)},OnClosed:function(a){_a(a,
"_i1").Unadvise(this);return _5},OnValidate:function(a){Ext.isEmpty(a.getArgs().validatefunc)||this[a.getArgs().validatefunc](a)}},onReady:function(){Ext.get(this.loginCntrId).setDisplayed(true);Ext.get(this.passwordCntrId).setDisplayed(true);this.remote.host=new Ext.UI.TextField({cls:"x-bac-form-text remote-target-host-field",width:226,renderTo:this.hostId,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_HOST")}});this.remote.hostLbl=Ext.get(this.hostLblId);this.remote.protocol=new Ext.UI.ComboBox({cls:"remote-target-protocol-combo",
width:315,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","type","name","path","sharename","autoeject"],idIndex:0,data:[]}),valueField:"id",displayField:"sharename",renderTo:this.protocolId,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_TYPE")},listeners:{scope:this,collapse:this.onProtocolSelected}});this.remote.protocolLbl=Ext.get(this.protocolLblId);this.remote.portLbl=Ext.get(this.portLblId);this.remote.port=new Ext.UI.TextField({cls:"x-bac-form-text remote-target-port-field",
renderTo:this.portId,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_PORT")}});Ext.get(this.portId).parent("tr").setDisplayed(false);this.remote.pathLbl=Ext.get(this.pathLblId);this.remote.path=new Ext.UI.TextField({cls:"x-bac-form-text remote-target-path-field",renderTo:this.pathId,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_NOT_VOLUME")}});this.remote.login=new Ext.UI.TextField({cls:"x-bac-form-text remote-target-login-field",inputMaxLength:31,renderTo:this.loginId});this.remote.password=new Ext.UI.TextField({cls:"x-bac-form-text remote-target-password-field",
inputType:"password",renderTo:this.passwordId});this.testProgress=Ext.get(this.testProgressId);this.testBtn=new Ext.UI.Button({cls:"remote-target-test-btn",text:_TR("TEST_CONNECTION"),width:150,renderTo:this.testBtnId});this.testBtn.on("click",this.onTestConnection,this);this.bBrowseHost=new Ext.UI.Button({width:80,text:_TR("BACKUP_DISCOVER_HOST_BUTTON_NAME"),handler:this.onBrowseHostClick,scope:this,renderTo:this.bBrowseHostId});this.bBrowseShare=new Ext.UI.Button({width:80,text:_TR("BROWSE"),handler:this.onBrowseShareClick,
scope:this,renderTo:this.bBrowseShareId});this.browseShareToolTip=this.browseHostToolTip=null;new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttBrowseHostId,listeners:{afterrender:function(a){this.browseHostToolTip=new Ext.UI.ToolTip(a.el,{html:_TR("BACKUP_SMB_HOST_TOOLTIP_MESSAGE")})},scope:this}});new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttBrowseShareId,listeners:{afterrender:function(a){this.browseShareToolTip=new Ext.UI.ToolTip(a.el,{html:_TR("BACKUP_SMB_SHARE_TOOLTIP_MESSAGE")})},
scope:this}})},onBrowseHostClick:function(){this.wndBrowseHost.show();var a="",b=this.remote.protocol.getValue()!=""?this.remote.protocol.getStore().getById(this.remote.protocol.getValue()):false;if(b)switch(b.get("name")){case "cifs":a="smb";break;case "cifs-ab":a="cifs-ab";break;case "ftp":a="ftp";break;case "nfs":a="nfs";break;case "rsync":a="rsync";break;case "rsync+ssh":a="rsync+ssh";break}this.wndBrowseHost.loadArgs(this.remote.host.getValue(),a)},onHostSelected:function(a){this.remote.host.setValue(a.Hostname);
this.remote.host.tooltip.enabled=false;this.remote.hostLbl.removeClass("x-bac-label-error");this.remote.path.setValue("")},onBrowseShareClick:function(){this.remote.host.tooltip.enabled=false;this.remote.hostLbl.removeClass("x-bac-label-error");var a=this.remote.host.getValue();if(!_.isValidDomainName(a)&&!_.isValidIPAddress(a)&&!_.Utils.isValidIPv6Address(a)){this.remote.hostLbl.addClass("x-bac-label-error");this.remote.host.tooltip.enabled=true}else{var b="",c=this.remote.protocol.getValue()!=
""?this.remote.protocol.getStore().getById(this.remote.protocol.getValue()):false;if(c)switch(c.get("name")){case "cifs":b="smb";break;case "cifs-ab":b="cifs-ab";break;case "ftp":b="ftp";break;case "nfs":b="nfs";break;case "rsync":b="rsync";break;case "rsync+ssh":b="rsync+ssh";break}this.initElePHVal(this.remote.port);a={type:this.type,host:a,protocol:b,port:this.remote.port.getValue(),path:this.remote.path.getValue()};if(this.remote.login.getValue()){a.login=this.remote.login.getValue();if(this.remote.password.getValue())a.password=
this.remote.password.getValue()}this.wndBrowseRemoteShares.show();this.wndBrowseRemoteShares.loadArgs(a)}},onRemoteSharesSelected:function(a){this.remote.path.setValue(a.path);this.remote.login.setValue(a.login);this.remote.password.setValue(a.password)},initElePHVal:function(a){var b=a.getValue(),c=Ext.get(a.el.dom).getAttribute("placeholder");b==""&&c!=""&&a.setValue(+c)},clearElePHVal:function(a){a.el.set({placeholder:""})},onProtocolSelected:function(){var a=Ext.get(this.pathSampleId);this.clearElePHVal(this.remote.port);
this.clearElePHVal(this.remote.path);Ext.get(this.loginCntrId).setDisplayed(true);Ext.get(this.passwordCntrId).setDisplayed(true);Ext.get(this.portId).parent("tr").setDisplayed(false);this.remote.host.setValue("");this.remote.path.setValue("");this.remote.port.setValue("");this.bBrowseHost.setDisabled(false);this.bBrowseShare.setDisabled(false);var b=this.remote.protocol.getValue()!=""?this.remote.protocol.getStore().getById(this.remote.protocol.getValue()):false;if(b){var c="",e="",f="",g="";switch(b.get("name")){case "cifs":a.update(String.format(_TR("BACKUP_CIFS_TIP"),
_TR("share")));c=_TR("BACKUP_SMB_HOST_TOOLTIP_MESSAGE");e=_TR("BACKUP_SMB_SHARE_TOOLTIP_MESSAGE");f="Backup";break;case "cifs-ab":a.update(String.format(_TR("BACKUP_CIFS_AB_TIP"),_TR("share")));c=_TR("BACKUP_SMB_HOST_TOOLTIP_MESSAGE");e=_TR("BACKUP_SMB_SHARE_TOOLTIP_MESSAGE");f="";break;case "ftp":a.update(String.format(_TR("BACKUP_FTP_TIP"),_TR("share")));Ext.get(this.portId).parent("tr").setDisplayed(true);c=_TR("BACKUP_HOST_TOOLTIP_MESSAGE");e=_TR("BACKUP_FTP_SHARE_TOOLTIP_MESSAGE");f="Backup";
g="21";break;case "nfs":Ext.get(this.loginCntrId).setDisplayed(false);Ext.get(this.passwordCntrId).setDisplayed(false);a.update(String.format(_TR("BACKUP_NFS_TIP"),_TR("share")));c=_TR("BACKUP_HOST_TOOLTIP_MESSAGE");e=_TR("BACKUP_NFS_SHARE_TOOLTIP_MESSAGE");f="/data/Backup";break;case "rsync":a.update(String.format(_TR("BACKUP_RSYNC_TIP"),_TR("share")));Ext.get(this.portId).parent("tr").setDisplayed(true);c=_TR("BACKUP_HOST_TOOLTIP_MESSAGE");e=_TR("BACKUP_RSYNC_SHARE_TOOLTIP_MESSAGE");f="Backup";
g="873";break;case "rsync+ssh":Ext.get(this.passwordCntrId).setDisplayed(false);a.update(String.format(_TR("BACKUP_RSYNC+SSH_TIP"),_TR("share")));Ext.get(this.portId).parent("tr").setDisplayed(true);c=_TR("BACKUP_HOST_TOOLTIP_MESSAGE");e=_TR("BACKUP_RSYNCSSH_SHARE_TOOLTIP_MESSAGE");f="/data/Backup";g="22";break}this.browseHostToolTip.body.update(c);this.browseShareToolTip.body.update(e);_.initElePHEvent(this.remote.path,f);_.initElePHEvent(this.remote.port,g)}},onTestConnection:function(){if(!this.validation()){var a=
_a(new _1.backup,"_ie"),b=this.remote.host.getValue().trim().split(":"),c=this.remote.protocol.getStore().getById(this.remote.protocol.getValue()).get("name"),e="";if(b[0]){if(c.indexOf("cifs")==0)e=String.format("//{0}/{1}",b?b[0]:"",this.remote.path.getValue());else if(c=="ftp")e=String.format("ftp://{0}/{1}",b?b[0]:"",this.remote.path.getValue());else if(c=="rsync")e=String.format("{0}::{1}",b?b[0]:"",this.remote.path.getValue());else if(c=="rsync+ssh"||c=="nfs")e=String.format("{0}:{1}",
b?b[0]:"",this.remote.path.getValue());a.putSourceShareNameOrProtocol(this.remote.protocol.getStore().getById(this.remote.protocol.getValue()).get("name"));a.putSourcePath(e);a.putSourceLogin(this.remote.login.getValue());a.putSourcePassword(this.remote.password.getValue());if(c=="ftp"||c=="rsync"||c=="rsync+ssh"){b=this.remote.port.getValue();a.putSourcePort(b?b:"0")}else a.putSourcePort(b&&b.length>1?b[1]:"0");b=new String(this.lparamTest);b.path=e;this.spBKManager.testBackupConnection(a,b)}else{this.remote.hostLbl.addClass("x-bac-label-error");
this.setTip(this.remote.host.tooltip,true)}}},loadProtocols:function(a){var b=this.remote.protocol.getStore();b.loadData(a);b.filter("sharename","remote");this.remote.protocol.setValue(b.getAt(0).get("id"));this.onProtocolSelected()},setTip:function(a,b){if(a)a.enabled=b},validation:function(){var a=false,b=this.remote.protocol.getStore().getById(this.remote.protocol.getValue()).get("name");this.remote.hostLbl.removeClass("x-bac-label-error");this.setTip(this.remote.host.tooltip,false);this.remote.pathLbl.removeClass("x-bac-label-error");
this.setTip(this.remote.path.tooltip,false);var c=this.remote.host.getValue();if(!_.isValidIPAddress(c)){var e=this.remote.protocol.getStore().getById(this.remote.protocol.getValue()).get("name");if(e!=="ftp"&&e!=="rsync"&&e!=="rsync+ssh"||!_.isValidIPAddressWithPort(c)){c=c;e=c.indexOf(".local");if(e>0)c=c.substring(0,e);if(!_.isValidHostname(c)&&!_.isValidDomainName(c)){this.remote.hostLbl.addClass("x-bac-label-error");a=this.remote.host.tooltip.enabled=true}}}c=this.remote.path.getValue();
this.remote.pathLbl.removeClass("x-bac-label-error");if(!_.isValidPath(c)||c==""||(b=="rsync+ssh"||b=="nfs")&&c[0]!="/"){this.remote.pathLbl.addClass("x-bac-label-error");a=this.remote.path.tooltip.enabled=true}if(Ext.get(this.hostId).parent("tr").dom.style.display!="none"){c=this.remote.host.getValue();this.remote.hostLbl.removeClass("x-bac-label-error");if(!_.isValidDomainName(c)&&!_.isValidIPAddress(c)&&!_.Utils.isValidIPv6Address(c)){this.remote.hostLbl.addClass("x-bac-label-error");a=
this.remote.host.tooltip.enabled=true}}if(Ext.get(this.portId).parent("tr").dom.style.display!="none"){b=this.remote.port.getValue();c=Ext.get(this.remote.port.el.dom).getAttribute("placeholder");this.remote.portLbl.removeClass("x-bac-label-error");if(b==""&&c!="")this.remote.port.setValue(b=+c);if(b&&!_.isValidPort(b)){this.remote.portLbl.addClass("x-bac-label-error");a=this.remote.port.tooltip.enabled=true}}return a},destValidation:function(){var a=false;this.remote.pathLbl.removeClass("x-bac-label-error");
this.setTip(this.remote.path.tooltip,false);var b=this.remote.path.getValue();if(!_.isValidPath(b)||this.isVolume(b))if(!_.isValidShareName(b)){this.remote.pathLbl.addClass("x-bac-label-error");a=this.remote.path.tooltip.enabled=true}return a},isVolume:function(a){var b=/^(.+)\\([^\\]+)/i;if(!/^(.+)\/([^\/]+)/i.exec(a)&&!b.exec(a))return true;return false},reset:function(){this.remote.hostLbl.removeClass("x-bac-label-error");this.remote.host.setValue("");this.remote.protocol.setValue(0);this.remote.port.setValue("");
this.remote.path.setValue("");this.remote.login.setValue("");this.remote.password.setValue("")},_ih:{_o1:function(a,b){if(b==this.lparamTest){this.testProgress.removeClass("x-hide-display");this.testBtn.disable()}},_o3:function(a,b,c){if(c==this.lparamTest){this.testProgress.addClass("x-hide-display");this.testBtn.enable();if(a==_5)Ext.UI.MessageBox.info({msg:_TR("BACKUP_JOBS_TESTCONNECTION_SUCCESS")+'<br /><span style="word-break: break-all; word-wrap: break-word; '+
(_.isIE?"display:block;":"")+'">'+c.path+"</span>"});else if((a=_a(b,"_io").getLastNMLError())&&a.getErrorCode()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("ERROR"),title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}}});Ext.namespace("_s8");
_s8.BackupSettings=_._1(_9,Ext.UI.Window,{help:"backup_wnd_edit_backup",modal:true,width:600,height:570,resizable:false,minimizable:false,maximizable:false,cls:"x-bac-settingswnd",constructor:function(){this.lparamTest="backuptab-props-testconnection";this.title=_TR("PROPERTIES");this.items=[this.generalBody=new _s8.BackupSettings.General,this.srcBody=new _s8.BackupSettings.Source,this.dstBody=new _s8.BackupSettings.Destination,
this.schedBody=new _s8.BackupSettings.Schedule,this.advBody=new _s8.BackupSettings.Advanced,this.optBody=new _s8.BackupSettings.Options,this.logBody=new _s8.BackupSettings.Log];this.fbar=[new Ext.UI.Button({id:"backups-jobs-settingswnd-apply-btn",text:_TR("APPLY"),width:100,handler:this.onApply,scope:this,acceptbtn:true}),new Ext.UI.Button({id:"backups-jobs-settingswnd-cancel-btn",text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this,
cancelbtn:true})];this.srcBody.destBody=this.dstBody;this.dstBody.srBody=this.srcBody;_s8.BackupSettings.superclass.constructor.apply(this,arguments);this.spBKManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getBackupManager();_a(this.spBKManager,"_i1").Advise(this)},afterRender:function(){_s8.BackupSettings.superclass.afterRender.apply(this,arguments);this.maskProgress=new Ext.UI.LoadMask(this.el.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",
delay:0,frame:false});this.bTabGeneral=new Ext.UI.SegmentedButton({id:"backups-jobs-settingswnd-gen-tab",xtype:"uisegmentedbutton",text:_TR("GENERAL"),value:"general",width:70});this.bTabSrc=new Ext.UI.SegmentedButton({id:"backups-jobs-settingswnd-src-tab",xtype:"uisegmentedbutton",text:_TR("SOURCE"),value:"src",width:70});this.bTabDest=new Ext.UI.SegmentedButton({id:"backups-jobs-settingswnd-dst-tab",xtype:"uisegmentedbutton",text:_TR("DESTINATION"),value:"dst",width:80});this.bTabSchedule=new Ext.UI.SegmentedButton({id:"backups-jobs-settingswnd-sched-tab",
xtype:"uisegmentedbutton",text:_TR("SCHEDULE"),value:"schedule",width:70});this.bTabAdvanced=new Ext.UI.SegmentedButton({id:"backups-jobs-settingswnd-adv-tab",xtype:"uisegmentedbutton",text:_TR("SPECIFIC_SETTINGS"),value:"advanced",width:80});this.bTabOptions=new Ext.UI.SegmentedButton({id:"backups-jobs-settingswnd-opt-tab",xtype:"uisegmentedbutton",text:_TR("OPTIONS"),value:"options",width:70});this.bTabLog=new Ext.UI.SegmentedButton({id:"backups-jobs-settingswnd-log-tab",xtype:"uisegmentedbutton",
text:_TR("BACKUP_LOG"),value:"log",width:90});this.tabs=new Ext.UI.SegmentedControl({items:[this.bTabGeneral,this.bTabSrc,this.bTabDest,this.bTabSchedule,this.bTabAdvanced,this.bTabOptions,this.bTabLog],style:"margin: 20px auto;",renderTo:this.header.parent(),listeners:{buttonchecked:this.onTabItemSelect,scope:this}})},onShow:function(){_s8.BackupSettings.superclass.onShow.apply(this,arguments);this.tabs.setPressedButton(0);this.center()},onTabItemSelect:function(a){this.generalBody.hide();
this.srcBody.hide();this.dstBody.hide();this.schedBody.hide();this.advBody.hide();this.optBody.hide();this.logBody.hide();switch(a.value){case "general":this.generalBody.show();break;case "src":this.srcBody.show();break;case "dst":this.dstBody.show();break;case "schedule":this.schedBody.show();break;case "advanced":this.advBody.show();break;case "options":this.optBody.show();break;case "log":this.logBody.show();break}},loadBackup:function(a){this.backup=a;this.setTitle(Ext.util.Format.htmlEncode(a.getName()));
this.generalBody.populate(a);this.srcBody.populate(a);this.dstBody.populate(a);this.schedBody.populate(a);this.advBody.populate(a);this.optBody.populate(a);this.logBody.populate(a)},showLogTab:function(){this.tabs.setPressedButton(this.tabs.initialConfig.items.indexOf(this.bTabLog))},onApply:function(){var a=this.backup;if(this.generalBody.validate()&&this.srcBody.validate()&&this.dstBody.validate()&&this.schedBody.validate()&&this.optBody.isValidMacAddress()){this.generalBody.doApply(a);this.srcBody.doApply(a);
this.dstBody.doApply(a);this.schedBody.doApply(a);this.advBody.doApply(a);this.optBody.doApply(a);this.spBKManager.commitBackups("backuptab_commitBackups_sel",[a]);this.hide()}else this.optBody.isValidMacAddress()?Ext.UI.MessageBox.error({msg:_TR("BACKUP_INSPECTOR_ERRORS")}):Ext.UI.MessageBox.error({msg:_TR("BACKUP_INSPECTOR_ERRORTIP_MAC_ADDRESS")})},_ih:{_o1:function(a,b){b==this.lparamTest&&this.maskProgress.show()},_o3:function(a,b,c){if(c==this.lparamTest){this.maskProgress.hide();
if(a==_5)Ext.UI.MessageBox.info({msg:_TR("BACKUP_JOBS_TESTCONNECTION_SUCCESS")+'<br /><span style="word-break: break-all; word-wrap: break-word;">'+c.path+"</span>"});else if((a=_a(b,"_io").getLastNMLError())&&a.getErrorCode()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{windowTitle:_TR("ERROR"),title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}}});
Ext.namespace("_s8");
_s8.BackupSettings.General=_._1(Ext.Container,{constructor:function(){this.html='<table style="width: 100%;"><tr><td id="'+(this.lNameId=Ext.id())+'" class="x-bac-label" style="width: 30%;">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>';_s8.BackupSettings.General.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spSysManager=a.getSystemManager();this.spBKManager=
a.getBackupManager()},afterRender:function(){_s8.BackupSettings.General.superclass.afterRender.apply(this,arguments);this.tfName=new Ext.UI.TextField({id:"backups-jobs-settingswnd-name-field",width:400,tooltipCfg:{html:_TR("BACKUP_ERRORTIP_NAME")},renderTo:this.tfNameId});this.lName=Ext.get(this.lNameId)},populate:function(a){this.lName.removeClass("x-bac-label-error");a?this.tfName.setValue(a.getName()):this.tfName.setValue("");this.backup=a},validate:function(){var a=false,b=this.tfName.getValue().trim(),
c;this.lName.removeClass("x-bac-label-error");this.tfName.tooltip.enabled=false;if(b){b=b.toLowerCase();for(var e=this.spBKManager.getBackups(),f=0;f<e.length;++f){c=_a(e[f],"_ie");if(c.getName().toLowerCase()==b&&c.getId()!=this.backup.getId()){this.lName.addClass("x-bac-label-error");a=this.tfName.tooltip.enabled=true}}}else{this.lName.addClass("x-bac-label-error");a=this.tfName.tooltip.enabled=true}return!a},doApply:function(a){a.putName(this.tfName.getValue().trim())}});Ext.namespace("_s8");
_s8.BackupSettings.Source=_._1(Ext.Container,{constructor:function(){this.title=_TR("BACKUP_SOURCE");this.controls={};this.lparamTest="backuptab-props-testconnection";this.typeinvalid=_TR("BACKUP_JOBS_INVALIDTYPE");this.isBrowseNew=true;this.html='<table style="margin: 0 auto 5px auto;"><tr><td id="'+(this.typeLblId=Ext.id())+'" class="x-bac-label">'+_TR("TYPE")+_TR("COLON")+'</td><td id="'+(this.sourceId=Ext.id())+'"></td><td></td></tr><tr><td id="'+(this.nameLblId=Ext.id())+
'" class="x-bac-label">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.nameId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.autoEjectRowId=Ext.id())+'"><td class="x-bac-label"></td><td id="'+(this.autoEjectId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.hostCntrId=Ext.id())+'"><td id="'+(this.hostLblId=Ext.id())+'" class="x-bac-label">'+_TR("HOST")+_TR("COLON")+'</td><td id="'+(this.hostId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.portCntrId=Ext.id())+'"><td id="'+(this.portLblId=Ext.id())+
'" class="x-bac-label">'+_TR("PORT")+_TR("COLON")+'</td><td id="'+(this.portId=Ext.id())+'"></td><td></td></tr><tr><td id="'+(this.pathLblId=Ext.id())+'"class="x-bac-label">'+_TR("PATH")+_TR("COLON")+'</td><td id="'+(this.pathId=Ext.id())+'" ></td><td id="'+(this.browseButtonId=Ext.id())+'" ></td></tr><tr id="'+(this.loginCntrId=Ext.id())+'"><td class="x-bac-label">'+_TR("LOGIN")+_TR("COLON")+'</td><td id="'+(this.loginId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.passwordCntrId=Ext.id())+'"><td class="x-bac-label">'+
_TR("PASSWORD")+_TR("COLON")+'</td><td id="'+(this.passwordId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.testButtonCntrId=Ext.id())+'"><td class="x-bac-label"/><td id="'+(this.testButtonId=Ext.id())+'"></td><td></td></tr></table>';_s8.BackupSettings.Source.superclass.constructor.apply(this,arguments);this.spBKManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getBackupManager()},afterRender:function(){_s8.BackupSettings.Source.superclass.afterRender.apply(this,
arguments);this.controls.typeLbl=Ext.get(this.typeLblId);this.controls.source=new Ext.UI.ComboBox({width:230,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","type","name","path","sharename","autoeject"],idIndex:0,data:[]}),disabled:true,valueField:"id",displayField:"type",tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_TYPE")},listeners:{scope:this,beforequery:function(a){a.forceAll=true;var b=this.destBody.controls.destination,c=b.getValue()!=this.typeinvalid&&
b.getStore().getById(b.getValue()).get("type").toLowerCase()=="remote";a.combo.getStore().loadData(this.cmbData);var e=[];a.combo.getStore().filterBy(function(f){var g=f.get("type");if(e.indexOf(g)==-1)if(!(c&&f.get("type").toLowerCase()=="remote")){e.push(g);return true}return false},this)},collapse:function(a){if(a.getValue()!=this.typeinvalid){a=a.getStore().getById(a.getValue());this.controls.name.getStore().clearFilter();this.controls.name.setValue(a.get("id"));a.get("name")=="*"&&this.destBody.updateBySource();
this.controls.path.setValue("");this.setDisabled(true);this.updateCtrlState(a.get("type").toLowerCase(),a.get("name").toLowerCase());this.setAutoEject(a.data.autoeject==="1"?true:false)}}}});this.controls.source.render(this.sourceId);this.controls.nameLbl=Ext.get(this.nameLblId);this.controls.name=new Ext.UI.ComboBox({width:230,mode:"local",triggerAction:"no",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","type","name","path","sharename","autoeject"],idIndex:0,data:[]}),valueField:"id",
displayField:"sharename",tooltipCfg:{html:_TR("BACKUP_ERRORTIP_SOURCE")},listeners:{scope:this,beforequery:function(a){a.forceAll=true;var b,c=a.combo.getStore().getById(a.combo.getValue());if(!c||a.combo.getRawValue()!=c.get("sharename"))b=a.combo.getRawValue();a.combo.getStore().loadData(this.cmbData);var e=this.controls.source.getValue()!=""?this.controls.source.getStore().getById(this.controls.source.getValue()).get("type"):"";a.combo.getStore().clearFilter();a.combo.getStore().filterBy(function(f){return f.get("type")==
e&&(!b||f.get("name").indexOf(b)!=-1||e=="home"&&f.get("name")=="*")},this);a.combo.getStore().snapshot=a.combo.getStore().data;if(e=="home"&&a.combo.getStore().getTotalCount()>20)a.combo.editable||a.combo.setEditable(true);else a.combo.editable&&a.combo.setEditable(false)},change:function(){this.isBrowseNew=true;this.controls.path.setValue("")},collapse:function(a){var b=this.controls.name.getValue()!=""?this.controls.name.getStore().getById(this.controls.name.getValue()):false;if(b){var c=b.get("name");
if(b.get("type")=="home"){var e=c=="*";this.controls.path.setDisabled(e);this.controls.browseButton.setDisabled(e);e&&this.destBody.updateBySource()}if(b.get("type")=="remote"){Ext.get(this.loginCntrId).setDisplayed(c!=="nfs");this.controls.login.setDisabled(c==="nfs");Ext.get(this.passwordCntrId).setDisplayed(c!=="rsync+ssh"&&c!=="nfs");this.controls.password.setDisabled(c==="rsync+ssh"||c==="nfs")}if(b.get("type")=="usb"){e=b.get("path")=="";this.controls.path.setDisabled(e);this.controls.browseButton.setDisabled(e)}}Ext.get(this.portId).parent("tr").setDisplayed(b.get("name")==
"ftp"||b.get("name")=="rsync"||b.get("name")=="rsync+ssh");a=a.getStore().getById(a.getValue());this.setAutoEject(a&&a.data.autoeject==="1"?true:false)}}});this.controls.name.render(this.nameId);this.controls.autoEjectRow=Ext.get(this.autoEjectRowId);this.controls.autoEject=new Ext.UI.Checkbox({boxLabel:_TR("BACKUP_AUTO_EJECT"),disabled:false});this.controls.autoEject.render(this.autoEjectId);this.controls.hostLbl=Ext.get(this.hostLblId);this.controls.host=new Ext.UI.TextField({width:230,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_HOST")}});
this.controls.host.render(this.hostId);this.controls.portLbl=Ext.get(this.portLblId);this.controls.port=new Ext.UI.TextField({width:230,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_PORT")}});this.controls.port.render(this.portId);this.controls.pathLbl=Ext.get(this.pathLblId);this.controls.path=new Ext.UI.TextField({width:230,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_NOT_VOLUME")}});this.controls.path.render(this.pathId);this.controls.browseButton=new Ext.UI.Button({width:80,style:"margin-left: 3px;",
text:_TR("BROWSE"),handler:this.browseFolder,scope:this,expandToText:true});this.controls.browseButton.render(this.browseButtonId);this.controls.login=new Ext.UI.TextField({width:230});this.controls.login.render(this.loginId);this.controls.password=new Ext.UI.TextField({inputType:"password",width:230});this.controls.password.render(this.passwordId);this.controls.testButton=new Ext.UI.Button({width:150,text:_TR("TEST_CONNECTION"),handler:this.onTestConnection,scope:this,expandToText:true});this.controls.testButton.render(this.testButtonId)},
browseFolder:function(){this.bw=this.bw||CComSingleton(_s9.BrowseWindow);this.bw.on("selected",this.onSelectFile,this);this.bw.show();var a=this.controls.name.getStore().getById(this.controls.name.getValue()).get("path");this.bw.setBackupMode("source");this.bw.browse.loadPath(a)},onSelectFile:function(a){this.bw.un("selected",this.onSelectFile,this);a=a.path||"";var b=this.controls.name.getStore().getById(this.controls.name.getValue()).get("path"),c="";if(a.indexOf(b)!=0||a==b){b=b.split("/");
var e=a.split("/"),f="";if(b[1]==e[1]){this.controls.name.getStore().each(function(g){if(g.get("path").toLowerCase()==("/"+e[1]+"/"+e[2]).toLowerCase()){f=g.get("id");return false}});if(f){this.controls.name.setValue(f);c=e.slice(3).join("/")}}}else c=a.replace(b+"/","");this.controls.path.setValue(c)},populate:function(a){this.setDisabled(true);this.updateTargets();Ext.get(this.portId).parent("tr").setDisplayed(false);if(a){this.jobId=a.getId();var b=a.getSourceType().toLowerCase(),c=a.getSourceShareNameOrProtocol()?
a.getSourceShareNameOrProtocol().toLowerCase():null;if(!this.cmbData){this.setDisabled(true);return}var e="";this.store.each(function(l){if(l.get("type").toLowerCase()==b&&l.get("name").toLowerCase()==c){e=l.get("id");return false}},this);this.controls.source.setValue(e);this.controls.name.setValue(e);a.getSourceEject()==="1"?this.controls.autoEject.setValue(true):this.controls.autoEject.setValue(false);if(e==""){this.controls.typeLbl.addClass("x-bac-label-error");this.controls.source.setValue(this.typeinvalid)}var f=
a.getSourcePath()!=null?a.getSourcePath():"";if(b!="remote"){this.controls.path.setValue(f);this.controls.host.setValue("")}else if(c=="rsync"){f=f.split("::");this.controls.host.setValue(f.length>=2?f[0]:"");this.controls.path.setValue(f.length>=2?f[1]:"");Ext.get(this.portId).parent("tr").setDisplayed(true);this.controls.port.setValue(a.getSourcePort()!=null?a.getSourcePort():"")}else if(c=="rsync+ssh"||c=="nfs"){var g=f.lastIndexOf(":"),h=f.substring(0,g),j=f.substring(g+(c=="nfs"?1:2));this.controls.host.setValue(h);
this.controls.path.setValue(j);if(c=="rsync+ssh"){Ext.get(this.portId).parent("tr").setDisplayed(true);this.controls.port.setValue(a.getSourcePort()!=null?a.getSourcePort():"")}}else if(c=="ftp"){f=f.substring(6);g=f.indexOf("/");var k=f.length;j=h="";if(g>0)h=f.substring(0,g);if(g+1<=k)j=f.substring(g+1,k);this.controls.host.setValue(h);this.controls.path.setValue(j);Ext.get(this.portId).parent("tr").setDisplayed(true);this.controls.port.setValue(a.getSourcePort()!=null?a.getSourcePort():"")}else{f=
f.replace("//","|");var m=f.indexOf("|");g=f.indexOf("/");k=f.length;j=h="";if(m+1<=g)h=f.substring(m+1,g);if(g+1<=k)j=f.substring(g+1,k);this.controls.host.setValue(h);this.controls.path.setValue(j)}this.controls.login.setValue(a.getSourceLogin()?a.getSourceLogin():"");this.controls.password.setValue(a.getSourcePassword()?a.getSourcePassword():"")}else{this.controls.source.setValue("");this.controls.host.setValue("");this.controls.name.setValue("");this.controls.autoEject.setValue("");this.controls.path.setValue("");
this.controls.login.setValue("");this.controls.password.setValue("")}if(a){this.updateCtrlState(this.controls.source.getValue()==this.typeinvalid?"":a.getSourceType().toLowerCase(),a.getSourceShareNameOrProtocol());this.setAutoEject(a.getSourceEjectable()==="1"?true:false)}},setAutoEject:function(a){if(a)this.controls.autoEjectRow.setDisplayed(true);else{this.controls.autoEjectRow.setDisplayed(false);this.controls.autoEject.setValue("")}},onTestConnection:function(){var a=_a(new _1.backup,
"_ie");a.putSourceShareNameOrProtocol(this.controls.name.getStore().getById(this.controls.name.getValue()).get("name"));var b=this.controls.host.getValue().trim().split(":"),c=this.controls.name.getStore().getById(this.controls.name.getValue()).get("name"),e="";if(b[0]){if(c.indexOf("cifs")==0)e=String.format("//{0}/{1}",b?b[0]:"",this.controls.path.getValue());else if(c=="ftp")e=String.format("ftp://{0}/{1}",b?b[0]:"",this.controls.path.getValue());else if(c=="rsync")e=String.format("{0}::{1}",
b?b[0]:"",this.controls.path.getValue());else if(c=="rsync+ssh"||c=="nfs")e=String.format("{0}:{1}",b?b[0]:"",this.controls.path.getValue());a.putSourcePath(e);a.putSourceLogin(this.controls.login.getValue());a.putSourcePassword(this.controls.password.getValue());if(c=="ftp"||c=="rsync"||c=="rsync+ssh"){b=this.controls.port.getValue();a.putSourcePort(b?b:"0")}else a.putSourcePort(b&&b.length>1?b[1]:"0");b=new String(this.lparamTest);b.path=e;this.spBKManager.testBackupConnection(a,b,this.jobId)}else{this.controls.hostLbl.addClass("x-bac-label-error");
this.setTip(this.controls.host.tooltip,true)}},setDisabled:function(a){this.controls.hostLbl.removeClass("x-bac-label-error");this.controls.typeLbl.removeClass("x-bac-label-error");this.controls.nameLbl.removeClass("x-bac-label-error");this.setTip(this.controls.source.tooltip,false);this.setTip(this.controls.name.tooltip,false);this.setTip(this.controls.host.tooltip,false);Ext.get(this.hostCntrId).setDisplayed(false);Ext.get(this.loginCntrId).setDisplayed(false);Ext.get(this.passwordCntrId).setDisplayed(false);
Ext.get(this.testButtonCntrId).setDisplayed(false);this.controls.name.setDisabled(a);this.controls.host.setDisabled(a);this.controls.path.setDisabled(a);this.controls.login.setDisabled(a);this.controls.password.setDisabled(a);this.controls.testButton.setDisabled(a);this.controls.browseButton.setDisabled(a)},setTip:function(a,b){if(a)a.enabled=b},updateCtrlState:function(a,b){if(a=="usb"){this.controls.name.enable();this.controls.path.enable();(a=this.controls.name.getValue()!=""?this.controls.name.getStore().getById(this.controls.name.getValue()):
false)&&a.get("path")!=""&&this.controls.browseButton.enable()}else if(a=="volume"){this.controls.name.enable();this.controls.path.enable();this.controls.browseButton.enable();this.isBrowseNew=true}else if(a=="share"||a=="home"){this.controls.name.enable();if(b!="*"){this.controls.path.enable();this.controls.browseButton.enable()}this.isBrowseNew=true}else if(a=="remote"){Ext.get(this.hostCntrId).setDisplayed(true);Ext.get(this.loginCntrId).setDisplayed(b!=="nfs");Ext.get(this.passwordCntrId).setDisplayed(b!==
"rsync+ssh"&&b!=="nfs");Ext.get(this.testButtonCntrId).setDisplayed(true);this.controls.name.enable();this.controls.host.enable();this.controls.path.enable();this.controls.login.setDisabled(b==="nfs");this.controls.password.setDisabled(b==="rsync+ssh"||b==="nfs");this.controls.testButton.enable()}},updateTargets:function(){var a=_7(_._3.BackupSubSys.BackupTargets).__s;this.cmbData=a.sourceData;this.store=a.sourceStore;this.controls.source.getStore().loadData(this.cmbData);this.controls.name.getStore().loadData(this.cmbData)},
validate:function(){var a=false,b=this.controls;b.typeLbl.removeClass("x-bac-label-error");this.setTip(b.source.tooltip,false);b.nameLbl.removeClass("x-bac-label-error");this.setTip(b.name.tooltip,false);b.hostLbl.removeClass("x-bac-label-error");this.setTip(b.host.tooltip,false);var c=b.name.getStore().getById(b.name.getValue()),e=b.host.getValue();if(c){if(c.get("type").toLowerCase()=="remote"&&!_.isValidIPAddress(e)){var f=c.get("name").toLowerCase();if(f!=="ftp"&&f!=="rsync"&&f!=="rsync+ssh"||
!_.isValidIPAddressWithPort(e)){e=e;f=e.indexOf(".local");if(f>0)e=e.substring(0,f);if(!_.isValidHostname(e)&&!_.isValidDomainName(e)){b.hostLbl.addClass("x-bac-label-error");a=b.host.tooltip.enabled=true}}}}else{b.typeLbl.addClass("x-bac-label-error");b.source.tooltip.enabled=true;b.source.setValue(this.typeinvalid);a=true}e=b.path.getValue();b.pathLbl.removeClass("x-bac-label-error");f=c.get("name").toLowerCase();if(c.get("type").toLowerCase()=="remote"&&(!_.isValidPath(e)||e==""||(f=="rsync+ssh"||
f=="nfs")&&e[0]!="/")){b.pathLbl.addClass("x-bac-label-error");a=b.path.tooltip.enabled=true}if(Ext.get(this.hostId).parent("tr").dom.style.display!="none"){c=b.host.getValue();b.hostLbl.removeClass("x-bac-label-error");if(!_.isValidDomainName(c)&&!_.isValidIPAddress(c)&&!_.Utils.isValidIPv6Address(c)){b.hostLbl.addClass("x-bac-label-error");a=b.host.tooltip.enabled=true}}if(Ext.get(this.portId).parent("tr").dom.style.display!="none"){c=b.port.getValue();b.portLbl.removeClass("x-bac-label-error");
if(!_.isValidPort(c)){b.portLbl.addClass("x-bac-label-error");a=b.port.tooltip.enabled=true}}return!a},doApply:function(a){var b=this.controls,c=b.name.getStore().getById(b.name.getValue()),e=b.host.getValue(),f=this.controls.port.getValue();if(c!=null){a.putSourceType(c.get("type"));a.putSourceShareNameOrProtocol(c.get("name"))}if(c.get("type").toLowerCase()!="remote")a.putSourcePath(b.path.getValue());else if(c.get("name").indexOf("cifs")==0)a.putSourcePath(String.format("//{0}/{1}",e,b.path.getValue()));
else if(c.get("name")=="ftp"){a.putSourcePath(String.format("ftp://{0}/{1}",e,b.path.getValue()));a.putSourcePort(f?f:"0")}else if(c.get("name")=="rsync"){a.putSourcePath(String.format("{0}::{1}",e,b.path.getValue()));a.putSourcePort(f?f:"0")}else if(c.get("name")=="rsync+ssh"||c.get("name")=="nfs"){var g=c.get("name")=="nfs"?"{0}:{1}":"{0}:/{1}";a.putSourcePath(String.format(g,e,b.path.getValue()));if(c.get("name")=="rsync+ssh")a.putSourcePort(f?f:"0")}a.putSourceLogin(b.login.getValue());a.putSourcePassword(b.password.getValue());
a.putSourceEject(b.autoEject.checked?1:0)}});Ext.namespace("_s8");
_s8.BackupSettings.Destination=_._1(Ext.Container,{constructor:function(){this.title=_TR("BACKUP_DESTINATION");this.controls={};this.lparamTest="backuptab-props-testconnection";this.typeinvalid=_TR("BACKUP_JOBS_INVALIDTYPE");this.isBrowseNew=true;this.html='<table style="margin: 0 auto 5px auto;"><tr><td id="'+(this.typeLblId=Ext.id())+'" class="x-bac-label">'+_TR("TYPE")+_TR("COLON")+'</td><td id="'+(this.sourceId=Ext.id())+'"></td><td></td></tr><tr><td id="'+(this.nameLblId=
Ext.id())+'" class="x-bac-label">'+_TR("NAME")+_TR("COLON")+'</td><td id="'+(this.nameId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.autoEjectRowId=Ext.id())+'"><td class="x-bac-label"></td><td id="'+(this.autoEjectId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.hostCntrId=Ext.id())+'"><td id="'+(this.hostLblId=Ext.id())+'" class="x-bac-label">'+_TR("HOST")+_TR("COLON")+'</td><td id="'+(this.hostId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.portCntrId=Ext.id())+'"><td id="'+(this.portLblId=
Ext.id())+'" class="x-bac-label">'+_TR("PORT")+_TR("COLON")+'</td><td id="'+(this.portId=Ext.id())+'"></td><td></td></tr><tr><td id="'+(this.pathLblId=Ext.id())+'"class="x-bac-label">'+_TR("PATH")+_TR("COLON")+'</td><td id="'+(this.pathId=Ext.id())+'" ></td><td id="'+(this.browseButtonId=Ext.id())+'" ></td></tr><tr id="'+(this.loginCntrId=Ext.id())+'"><td class="x-bac-label">'+_TR("LOGIN")+_TR("COLON")+'</td><td id="'+(this.loginId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.passwordCntrId=Ext.id())+
'"><td class="x-bac-label">'+_TR("PASSWORD")+_TR("COLON")+'</td><td id="'+(this.passwordId=Ext.id())+'"></td><td></td></tr><tr id="'+(this.testButtonCntrId=Ext.id())+'"><td class="x-bac-label"/><td id="'+(this.testButtonId=Ext.id())+'"></td><td></td></tr></table>';_s8.BackupSettings.Destination.superclass.constructor.apply(this,arguments);this.spBKManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getBackupManager()},afterRender:function(){_s8.BackupSettings.Destination.superclass.afterRender.apply(this,
arguments);this.controls.typeLbl=Ext.get(this.typeLblId);this.controls.destination=new Ext.UI.ComboBox({width:230,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","type","name","path","sharename","autoeject"],idIndex:0,data:[]}),disabled:true,valueField:"id",displayField:"type",tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_TYPE")},listeners:{scope:this,beforequery:function(a){var b=this.srBody.controls.source,c=b.getValue()!=this.typeinvalid&&b.getStore().getById(b.getValue()).get("type").toLowerCase()==
"remote";b=this.srBody.controls.name;b.getStore().getById(b.getValue())&&b.getStore().getById(b.getValue()).get("name");a.combo.getStore().loadData(this.cmbData);var e=[];a.combo.getStore().filterBy(function(f){var g=f.get("type");if(e.indexOf(g)==-1)if(!(c&&f.get("type").toLowerCase()=="remote")||f.get("type").toLowerCase()=="share"||f.get("type").toLowerCase()=="home"){e.push(g);return true}return false},this)},collapse:function(a){if(a.getValue()!=this.typeinvalid){a=a.getStore().getById(a.getValue());
this.controls.name.getStore().clearFilter();this.controls.name.setValue(a.get("id"));this.controls.path.setValue("");this.setDisabled(true);this.updateCtrlState(a.get("type").toLowerCase());this.setAutoEject(a.data.autoeject==="1"?true:false)}}}});this.controls.destination.render(this.sourceId);this.controls.nameLbl=Ext.get(this.nameLblId);this.controls.name=new Ext.UI.ComboBox({width:230,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","type","name","path",
"sharename","autoeject"],idIndex:0,data:[]}),valueField:"id",displayField:"sharename",tooltipCfg:{html:_TR("BACKUP_ERRORTIP_DESTINATION")},listeners:{scope:this,beforequery:function(a){a.forceAll=true;var b,c=a.combo.getStore().getById(a.combo.getValue());if(!c||a.combo.getRawValue()!=c.get("sharename"))b=a.combo.getRawValue();a.combo.getStore().loadData(this.cmbData);var e=this.controls.destination.getValue()!=""?this.controls.destination.getStore().getById(this.controls.destination.getValue()).get("type"):
"";a.combo.getStore().filterBy(function(f){return f.get("type")==e&&(!b||f.get("name").indexOf(b)!=-1||e=="home"&&f.get("name")=="*")},this);a.combo.getStore().snapshot=a.combo.getStore().data;if(e=="home"&&a.combo.getStore().getTotalCount()>20)a.combo.editable||a.combo.setEditable(true);else a.combo.editable&&a.combo.setEditable(false)},change:function(){this.isBrowseNew=true;this.controls.path.setValue("")},collapse:function(a){var b=this.controls.name.getValue()!=""?this.controls.name.getStore().getById(this.controls.name.getValue()):
false;if(b){var c=b.get("name");if(b.get("type")=="home"){var e=c=="*";this.controls.path.setDisabled(e);this.controls.browseButton.setDisabled(e)}if(b.get("type")=="remote"){Ext.get(this.loginCntrId).setDisplayed(c!=="nfs");this.controls.login.setDisabled(c==="nfs");Ext.get(this.passwordCntrId).setDisplayed(c!=="rsync+ssh"&&c!=="nfs");this.controls.password.setDisabled(c==="rsync+ssh"||c==="nfs")}if(b.get("type")=="usb"){e=b.get("path")=="";this.controls.path.setDisabled(e);this.controls.browseButton.setDisabled(e)}}Ext.get(this.portId).parent("tr").setDisplayed(b.get("name")==
"ftp"||b.get("name")=="rsync"||b.get("name")=="rsync+ssh");a=a.getStore().getById(a.getValue());this.setAutoEject(a&&a.data.autoeject==="1"?true:false)}}});this.controls.name.render(this.nameId);this.controls.autoEjectRow=Ext.get(this.autoEjectRowId);this.controls.autoEject=new Ext.UI.Checkbox({boxLabel:_TR("BACKUP_AUTO_EJECT"),disabled:false});this.controls.autoEject.render(this.autoEjectId);this.controls.hostLbl=Ext.get(this.hostLblId);this.controls.host=new Ext.UI.TextField({width:230,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_HOST")}});
this.controls.host.render(this.hostId);this.controls.portLbl=Ext.get(this.portLblId);this.controls.port=new Ext.UI.TextField({width:230,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_PORT")}});this.controls.port.render(this.portId);this.controls.pathLbl=Ext.get(this.pathLblId);this.controls.path=new Ext.UI.TextField({width:230,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_NOT_VOLUME")}});this.controls.path.render(this.pathId);this.controls.browseButton=new Ext.UI.Button({width:80,style:"margin-left: 3px;",
text:_TR("BROWSE"),handler:this.browseFolder,scope:this,expandToText:true});this.controls.browseButton.render(this.browseButtonId);this.controls.login=new Ext.UI.TextField({width:230});this.controls.login.render(this.loginId);this.controls.password=new Ext.UI.TextField({inputType:"password",width:230});this.controls.password.render(this.passwordId);this.controls.testButton=new Ext.UI.Button({width:150,text:_TR("TEST_CONNECTION"),handler:this.onTestConnection,scope:this,expandToText:true});this.controls.testButton.render(this.testButtonId)},
browseFolder:function(){this.bw=this.bw||CComSingleton(_s9.BrowseWindow);this.bw.on("selected",this.onSelectFile,this);this.bw.show();var a=this.controls.name.getStore().getById(this.controls.name.getValue()).get("path");this.bw.setBackupMode("destination");this.bw.browse.loadPath(a)},onSelectFile:function(a){this.bw.un("selected",this.onSelectFile,this);a=a.path||"";var b=this.controls.name.getStore().getById(this.controls.name.getValue()).get("path"),c="";if(a.indexOf(b)!=0||a==b){b=b.split("/");
var e=a.split("/"),f="";if(b[1]==e[1]){this.controls.name.getStore().each(function(g){if(g.get("path").toLowerCase()==("/"+e[1]+"/"+e[2]).toLowerCase()){f=g.get("id");return false}});if(f){this.controls.name.setValue(f);c=e.slice(3).join("/")}}}else c=a.replace(b+"/","");this.controls.path.setValue(c)},populate:function(a){this.setDisabled(true);this.updateTargets();Ext.get(this.portId).parent("tr").setDisplayed(false);if(a){this.jobId=a.getId();var b=a.getDestinationType().toLowerCase(),c=a.getDestinationShareNameOrProtocol()?
a.getDestinationShareNameOrProtocol().toLowerCase():null;if(!this.cmbData){this.setDisabled(true);return}var e="";this.store.each(function(l){if(l.get("type").toLowerCase()==b&&l.get("name").toLowerCase()==c){e=l.get("id");return false}},this);this.controls.destination.setValue(e);this.controls.name.setValue(e);a.getDestinationEject()==="1"?this.controls.autoEject.setValue(true):this.controls.autoEject.setValue(false);if(e==""){this.controls.typeLbl.addClass("x-bac-label-error");this.controls.destination.setValue(this.typeinvalid)}var f=
a.getDestinationPath()!=null?a.getDestinationPath():"";if(b!="remote"){this.controls.path.setValue(f);this.controls.host.setValue("")}else if(c=="rsync"){f=f.split("::");this.controls.host.setValue(f.length>=2?f[0]:"");this.controls.path.setValue(f.length>=2?f[1]:"");Ext.get(this.portId).parent("tr").setDisplayed(true);this.controls.port.setValue(a.getDestinationPort()!=null?a.getDestinationPort():"")}else if(c=="rsync+ssh"||c=="nfs"){var g=f.lastIndexOf(":"),h=f.substring(0,g),j=f.substring(g+(c==
"nfs"?1:2));this.controls.host.setValue(h);this.controls.path.setValue(j);if(c=="rsync+ssh"){Ext.get(this.portId).parent("tr").setDisplayed(true);this.controls.port.setValue(a.getDestinationPort()!=null?a.getDestinationPort():"")}}else if(c=="ftp"){f=f.substring(6);g=f.indexOf("/");var k=f.length;j=h="";if(g>0)h=f.substring(0,g);if(g+1<=k)j=f.substring(g+1,k);this.controls.host.setValue(h);this.controls.path.setValue(j);Ext.get(this.portId).parent("tr").setDisplayed(true);this.controls.port.setValue(a.getDestinationPort()!=
null?a.getDestinationPort():"")}else{f=f.replace("//","|");var m=f.indexOf("|");g=f.indexOf("/");k=f.length;j=h="";if(m+1<=g)h=f.substring(m+1,g);if(g+1<=k)j=f.substring(g+1,k);this.controls.host.setValue(h);this.controls.path.setValue(j)}this.controls.login.setValue(a.getDestinationLogin()?a.getDestinationLogin():"");this.controls.password.setValue(a.getDestinationPassword()?a.getDestinationPassword():"")}else{this.controls.destination.setValue("");this.controls.host.setValue("");this.controls.port.setValue("");
this.controls.name.setValue("");this.controls.autoEject.setValue("");this.controls.path.setValue("");this.controls.login.setValue("");this.controls.password.setValue("")}if(a){this.updateCtrlState(this.controls.destination.getValue()==this.typeinvalid?"":a.getDestinationType().toLowerCase(),a.getDestinationShareNameOrProtocol());this.setAutoEject(a.getDestinationEjectable()==="1"?true:false)}return _5},setAutoEject:function(a){if(a)this.controls.autoEjectRow.setDisplayed(true);else{this.controls.autoEjectRow.setDisplayed(false);
this.controls.autoEject.setValue("")}},onTestConnection:function(){var a=_a(new _1.backup,"_ie");a.putSourceShareNameOrProtocol(this.controls.name.getStore().getById(this.controls.name.getValue()).get("name"));var b=this.controls.host.getValue().trim().split(":"),c=this.controls.name.getStore().getById(this.controls.name.getValue()).get("name"),e="";if(b[0]){if(c.indexOf("cifs")==0)e=String.format("//{0}/{1}",b?b[0]:"",this.controls.path.getValue());else if(c=="ftp")e=String.format("ftp://{0}/{1}",
b?b[0]:"",this.controls.path.getValue());else if(c=="rsync")e=String.format("{0}::{1}",b?b[0]:"",this.controls.path.getValue());else if(c=="rsync+ssh"||c=="nfs")e=String.format("{0}:{1}",b?b[0]:"",this.controls.path.getValue());a.putSourcePath(e);a.putSourceLogin(this.controls.login.getValue());a.putSourcePassword(this.controls.password.getValue());if(c=="ftp"||c=="rsync"||c=="rsync+ssh"){b=this.controls.port.getValue();a.putSourcePort(b?b:"0")}else a.putSourcePort(b&&b.length>1?b[1]:"0");b=new String(this.lparamTest);
b.path=e;this.spBKManager.testBackupConnection(a,b,this.jobId)}else{this.controls.hostLbl.addClass("x-bac-label-error");this.setTip(this.controls.host.tooltip,true)}},setDisabled:function(a){this.controls.hostLbl.removeClass("x-bac-label-error");this.controls.typeLbl.removeClass("x-bac-label-error");this.controls.nameLbl.removeClass("x-bac-label-error");this.setTip(this.controls.destination.tooltip,false);this.setTip(this.controls.name.tooltip,false);this.setTip(this.controls.host.tooltip,false);
Ext.get(this.hostCntrId).setDisplayed(false);Ext.get(this.loginCntrId).setDisplayed(false);Ext.get(this.passwordCntrId).setDisplayed(false);Ext.get(this.testButtonCntrId).setDisplayed(false);this.controls.name.setDisabled(a);this.controls.host.setDisabled(a);this.controls.path.setDisabled(a);this.controls.login.setDisabled(a);this.controls.password.setDisabled(a);this.controls.testButton.setDisabled(a);this.controls.browseButton.setDisabled(a)},setTip:function(a,b){if(a)a.enabled=b},updateCtrlState:function(a,
b){if(a=="usb"){this.controls.name.enable();this.controls.path.enable();(a=this.controls.name.getValue()!=""?this.controls.name.getStore().getById(this.controls.name.getValue()):false)&&a.get("path")!=""&&this.controls.browseButton.enable()}else if(a=="volume"){this.controls.name.enable();this.controls.path.enable();this.controls.browseButton.enable();this.isBrowseNew=true}else if(a=="share"||a=="home"){this.controls.name.enable();if(b!="*"){this.controls.path.enable();this.controls.browseButton.enable()}this.isBrowseNew=
true}else if(a=="remote"){Ext.get(this.hostCntrId).setDisplayed(true);Ext.get(this.loginCntrId).setDisplayed(b!=="nfs");Ext.get(this.passwordCntrId).setDisplayed(b!=="rsync+ssh"&&b!=="nfs");Ext.get(this.testButtonCntrId).setDisplayed(true);this.controls.name.enable();this.controls.host.enable();this.controls.path.enable();this.controls.login.setDisabled(b==="nfs");this.controls.password.setDisabled(b==="rsync+ssh"||b==="nfs");this.controls.testButton.enable()}},updateTargets:function(){var a=_7(_._3.BackupSubSys.BackupTargets).__s;
this.cmbData=a.destData;this.store=a.destStore;this.controls.destination.getStore().loadData(this.cmbData);this.controls.name.getStore().loadData(this.cmbData)},updateBySource:function(){if(this.controls.name.getStore().getById(this.controls.name.getValue()).get("type").toLowerCase()=="home"){this.controls.typeLbl.addClass("x-bac-label-error");this.controls.destination.tooltip.enabled=true;this.controls.name.setValue("");this.controls.name.disable();this.controls.destination.setValue(this.typeinvalid)}},
validate:function(){var a=false,b=this.controls;b.typeLbl.removeClass("x-bac-label-error");b.destination.tooltip.update("BACKUP_INSPECTOR_ERRORTIP_TYPE");this.setTip(b.destination.tooltip,false);b.nameLbl.removeClass("x-bac-label-error");this.setTip(b.name.tooltip,false);b.hostLbl.removeClass("x-bac-label-error");this.setTip(b.host.tooltip,false);var c=b.name.getStore().getById(b.name.getValue()),e=b.host.getValue();if(c){if(c.get("type").toLowerCase()=="remote"&&!_.isValidIPAddress(e)){var f=c.get("name").toLowerCase();
if(f!=="ftp"&&f!=="rsync"&&f!=="rsync+ssh"||!_.isValidIPAddressWithPort(e)){e=e;f=e.indexOf(".local");if(f>0)e=e.substring(0,f);if(!_.isValidHostname(e)&&!_.isValidDomainName(e)){b.hostLbl.addClass("x-bac-label-error");a=b.host.tooltip.enabled=true}}}}else{b.typeLbl.addClass("x-bac-label-error");b.destination.tooltip.enabled=true;b.destination.setValue(this.typeinvalid);a=true}e=b.path.getValue();b.pathLbl.removeClass("x-bac-label-error");f=c.get("name").toLowerCase();if(c.get("type").toLowerCase()==
"remote"&&(!_.isValidPath(e)||e==""||(f=="rsync+ssh"||f=="nfs")&&e[0]!="/")){b.pathLbl.addClass("x-bac-label-error");a=b.path.tooltip.enabled=true}if(Ext.get(this.hostId).parent("tr").dom.style.display!="none"){c=b.host.getValue();b.hostLbl.removeClass("x-bac-label-error");if(!_.isValidDomainName(c)&&!_.isValidIPAddress(c)&&!_.Utils.isValidIPv6Address(c)){b.hostLbl.addClass("x-bac-label-error");a=true}}if(Ext.get(this.portId).parent("tr").dom.style.display!="none"){c=b.port.getValue();b.portLbl.removeClass("x-bac-label-error");
if(!_.isValidPort(c)){b.portLbl.addClass("x-bac-label-error");a=b.port.tooltip.enabled=true}}return!a},doApply:function(a){var b=this.controls,c=b.name.getStore().getById(b.name.getValue()),e=b.host.getValue(),f=this.controls.port.getValue();if(c!=null){a.putDestinationType(c.get("type"));a.putDestinationShareNameOrProtocol(c.get("name"))}a.putDestinationPath(b.path.getValue());if(c.get("type").toLowerCase()!="remote")a.putDestinationPath(b.path.getValue());else if(c.get("name").indexOf("cifs")==
0)a.putDestinationPath(String.format("//{0}/{1}",e,b.path.getValue()));else if(c.get("name")=="ftp"){a.putDestinationPath(String.format("ftp://{0}/{1}",e,b.path.getValue()));a.putDestinationPort(f?f:"0")}else if(c.get("name")=="rsync"){a.putDestinationPath(String.format("{0}::{1}",e,b.path.getValue()));a.putDestinationPort(f?f:"0")}else if(c.get("name")=="rsync+ssh"||c.get("name")=="nfs"){var g=c.get("name")=="nfs"?"{0}:{1}":"{0}:/{1}";a.putDestinationPath(String.format(g,e,b.path.getValue()));if(c.get("name")==
"rsync+ssh")a.putDestinationPort(f?f:"0")}a.putDestinationLogin(b.login.getValue());a.putDestinationPassword(b.password.getValue());a.putDestinationEject(b.autoEject.checked?1:0)}});Ext.namespace("_s8");
_s8.BackupSettings.Schedule=_._1(Ext.Container,{constructor:function(){this.controls={};this.controls.days=[];this.html='<table><tr><td align="right" class="x-bac-label">'+_TR("BACKUP_SCHEDULE_ENABLED")+_TR("COLON")+'</td><td id="'+(this.enableId=Ext.id())+'"></td></tr><tr><td align="right" class="x-bac-label">'+_TR("BACKUP_PERFORM_FREQ")+_TR("COLON")+'</td><td><div id="'+(this.everyId=Ext.id())+'" style="float: left; padding: 3px 5px 3px 0;"></div><div style="float: left; line-height: 36px; height: 36px;">'+
_TR("HOURS")+'</div></td></tr><tr><td id="'+(this.startLblId=Ext.id())+'" align="right" class="x-bac-label">'+_TR("BACKUP_PERFORM_TIME")+_TR("COLON")+'</td><td><div id="'+(this.startId=Ext.id())+'" style="float: left; padding: 3px 5px 3px 0;"></div><div id="'+(this.startAMPMId=Ext.id())+'" style="float: left; padding: 3px 5px 3px 0;"></div><div style="float: left; line-height: 36px; height: 36px;">'+_TR("BACKUP_PERFORM_TIME_TO")+'</div><div id="'+(this.stopId=Ext.id())+'" style="float: left; padding: 3px 5px 3px;"></div><div id="'+
(this.stopAMPMId=Ext.id())+'" style="float: left; padding: 3px 5px 3px 0;"></div></td></tr><tr><td align="right" valign="top" class="x-bac-label">'+_TR("BACKUP_ON_DAYS")+_TR("COLON")+'</td><td id="'+(this.bDaysId=Ext.id())+'"></td></tr><tr><td id="'+(this.wakeOnLblId=Ext.id())+'" style="display:block; height:0px; width:100%; overflow:hidden;" colspan="2">'+_TR("BACKUP_WAKE_ON_LAN_BEFORE_BACKUP")+_TR("COLON")+"</td></tr></table>";_s8.BackupSettings.Schedule.superclass.constructor.apply(this,
arguments)},afterRender:function(){var a,b=["SUN","MON","TUE","WED","THU","FRI","SAT"];_s8.BackupSettings.Schedule.superclass.afterRender.apply(this,arguments);this.controls.startLbl=Ext.get(this.startLblId);this.controls.enable=new Ext.UI.Checkbox({cls:"backup-sched-enable-chb",value:true,renderTo:this.enableId});this.controls.every=new Ext.UI.ComboBox({cls:"backup-sched-freq-combo",width:75,mode:"local",triggerAction:"all",store:[1,2,4,6,8,12,24],value:24,renderTo:this.everyId});this.controls.start=
new Ext.UI.ComboBox({cls:"backup-sched-start-combo",width:75,tooltipCfg:{html:_TR("BACKUP_SCHEDULE_START_TOOLTIP")},mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],idIndex:0,data:[]}),valueField:"id",displayField:"text",renderTo:this.startId,value:0});this.controls.stop=new Ext.UI.ComboBox({cls:"backup-sched-finish-combo",width:75,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],idIndex:0,data:[]}),valueField:"id",displayField:"text",
renderTo:this.stopId,value:23});this.controls.startAMPM=new Ext.UI.ComboBox({width:55,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("AM")],[1,_TR("PM")]]}),valueField:"id",displayField:"text",renderTo:this.startAMPMId,value:0,listeners:{scope:this,select:function(c,e){localStorage.getItem("enable24Hour");c=[];var f=this.controls.start.getValue();if(e.data.id==0)a=0;else{c=[[0,"12:05"]];a=1}for(;a<12;a++)c.push([a,
String.format("{0}:05",a<10?"0"+a:a)]);this.controls.start.getStore().loadData(c);f==0&&this.controls.start.setValue(0)}}});this.controls.stopAMPM=new Ext.UI.ComboBox({width:55,typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",autoSelect:true,store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("AM")],[1,_TR("PM")]]}),valueField:"id",displayField:"text",renderTo:this.stopAMPMId,value:0,listeners:{scope:this,select:function(c,e){localStorage.getItem("enable24Hour");c=[];var f=
this.controls.stop.getValue();if(e.data.id==0)a=0;else{c=[[0,"12:05"]];a=1}for(;a<12;a++)c.push([a,String.format("{0}:05",a<10?"0"+a:a)]);this.controls.stop.getStore().loadData(c);f==0&&this.controls.stop.setValue(0)}}});for(a=0;a<b.length;++a)this.controls.days[a]=new Ext.UI.Button({width:40,text:_TR(b[a]),cls:"backup-sched-weekday-btn x-bac-day-btn",enableToggle:true,pressed:true,renderTo:this.bDaysId})},populate:function(a){var b=localStorage.getItem("enable24Hour")=="true";this.controls.startAMPM.setVisible(!b);
this.controls.stopAMPM.setVisible(!b);var c="",e="";c=[];var f=b?24:12;this.controls.startLbl.removeClass("x-bac-label-error");this.controls.start.tooltip.enable=false;for(h=0;h<f;h++)c.push([h,String.format("{0}:05",h<10?"0"+h:h)]);if(b){this.controls.start.getStore().loadData(c);this.controls.stop.getStore().loadData(c)}if(a){c=+a.getSheduleStart();e=+a.getSheduleEnd();if(!b){var g=[[0,"12:05"]];for(h=1;h<f;h++)g.push([h,String.format("{0}:05",h<10?"0"+h:h)]);this.controls.start.getStore().loadData(g);
this.controls.stop.getStore().loadData(g)}this.controls.startAMPM.setValue(!b&&c>11?1:0);this.controls.stopAMPM.setValue(!b&&e>11?1:0);c=!b&&c>=12?c-12:c;e=!b&&e>=12?e-12:e;this.controls.enable.setValue(a.getSheduleEnabled()=="1");this.controls.every.setValue(a.getSheduleFrequency());this.controls.start.setValue(c);this.controls.stop.setValue(e);b=["sun","mon","tue","wed","thu","fri","sat"];a=a.getSheduleDayOfWeek()?a.getSheduleDayOfWeek().split(","):"";for(var h=0;h<this.controls.days.length;++h)this.controls.days[h].toggle(a.indexOf(b[h])!=
-1)}else{this.controls.enable.setValue(true);this.controls.every.setValue(24);if(!b){g=[[0,"12:05"]];for(h=1;h<f;h++)g.push([h,String.format("{0}:05",h<10?"0"+h:h)]);this.controls.start.getStore().loadData(g);this.controls.stop.getStore().loadData(g)}if(b){this.controls.start.setValue(0);this.controls.stop.setValue(23)}else{this.controls.start.setValue(0);this.controls.stop.setValue(11);this.controls.startAMPM.setValue(0);this.controls.stopAMPM.setValue(1)}for(h=0;h<this.controls.days.length;++h)this.controls.days[h].toggle(true)}},
validate:function(){var a=false,b=this.controls;b.startLbl.removeClass("x-bac-label-error");b.start.tooltip.enable=false;a=+this.controls.start.getValue();var c=+this.controls.stop.getValue(),e=this.controls.startAMPM.getValue(),f=this.controls.stopAMPM.getValue();if(localStorage.getItem("enable24Hour")=="true")a=a>c&&e==f;else{if(e==0){if(a==12)a=0}else if(a==12)a=12;else a+=12;if(f==0){if(c==12)c=0}else if(c==12)c=12;else c+=12;a=a>c}if(a){b.startLbl.addClass("x-bac-label-error");b.start.tooltip.enabled=
true}return!a},doApply:function(a){var b=["sun","mon","tue","wed","thu","fri","sat"],c=[],e=localStorage.getItem("enable24Hour")=="true",f=+this.controls.start.getValue(),g=+this.controls.stop.getValue(),h=this.controls.startAMPM.getValue(),j=this.controls.stopAMPM.getValue();if(!e){if(h==1)f=f%12+12;if(j==1)g=g%12+12}for(i=0;i<b.length;++i)this.controls.days[i].pressed&&c.push(b[i]);a.putSheduleEnabled(this.controls.enable.getValue()?1:0);a.putSheduleFrequency(this.controls.every.getValue());a.putSheduleStart(f);
a.putSheduleEnd(g);a.putSheduleDayOfWeek(c.join())}});Ext.namespace("_s8");
_s8.BackupSettings.Advanced=_._1(_.JSCom._9,Ext.Container,{constructor:function(){this.html='<div id="'+(this.boxMsgNotAvailId=Ext.id())+'">'+_TR("BACKUP_ADVANCED_OPTIONS_RSYNC")+'</div><div id="'+(this.boxControlsId=Ext.id())+'"><table><tr><td id="'+(this.enableCompressId=Ext.id())+'" class="x-bac-celltop"></td></tr><tr><td id="'+(this.removeFileId=Ext.id())+'" class="x-bac-celltop"></td></tr><tr><td id="'+(this.fat32modelId=Ext.id())+'" class="x-bac-celltop"></td></tr><tr><td id="'+
(this.chbHardLinksId=Ext.id())+'" class="x-bac-celltop"></td></tr><tr><td><div style="float:left" id="'+(this.chbMultipleFileSystemsId=Ext.id())+'"></div><div style="float:left" id="'+(this.boxMultipleFileSystemsHelpId=Ext.id())+'"></div><div style="clear:both"></div></td></tr></table><table style="margin-top: 20px; width: 100%;"><tr><td id="'+(this.searchFieldId=Ext.id())+'" style="width: 90%;"><h5>'+_TR("BACKUP_EXCLUDE_FILES_DIRS")+'</h5></td><td id="'+(this.bAddId=Ext.id())+'" style="width: 20px;"></td><td id="'+
(this.bDeleteId=Ext.id())+'" style="width: 20px;"></td></tr></table><div id="'+(this.gridFilesId=Ext.id())+'" style="max-height: 134px;"></div></div>';_s8.BackupSettings.Advanced.superclass.constructor.apply(this,arguments)},afterRender:function(){_s8.BackupSettings.Advanced.superclass.afterRender.apply(this,arguments);this.boxMsgNotAvail=Ext.get(this.boxMsgNotAvailId);this.boxControls=Ext.get(this.boxControlsId);this.boxfat32=Ext.get(this.fat32modelId);this.enableCompress=
new Ext.UI.Checkbox({id:"backups-jobs-settingswnd-compress-chb",bufferResize:0,boxLabel:_TR("BACKUP_ENABLE_COMPRESSION"),checked:false,value:false,renderTo:this.enableCompressId});this.removeFile=new Ext.UI.Checkbox({id:"backups-jobs-settingswnd-remove-deleted-chb",bufferResize:0,boxLabel:_TR("BACKUP_REMOVE_FILE"),checked:false,value:false,renderTo:this.removeFileId});this.fat32model=new Ext.UI.Checkbox({id:"backups-jobs-settingswnd-fat32-chb",bufferResize:0,boxLabel:_TR("BACKUP_ENABLE_FAT32"),checked:false,
value:false,renderTo:this.fat32modelId});this.chbHardLinks=new Ext.UI.Checkbox({id:"backups-jobs-settingswnd-preservehardlinks-chb",bufferResize:0,boxLabel:_TR("BACKUP_RSYNC_PRESERVE_HARD_LINKS"),checked:false,value:false,renderTo:this.chbHardLinksId});this.chbMultipleFileSystems=new Ext.UI.Checkbox({id:"backups-jobs-settingswnd-multiplefilesystems-chb",bufferResize:0,boxLabel:_TR("BACKUP_RSYNC_MULTIPLE_FILE_SYSTEMS"),checked:false,value:false,renderTo:this.chbMultipleFileSystemsId});new Ext.UI.RoundButton({cls:" x-frontview-btn-info",
style:"margin-left: 5px;",renderTo:this.boxMultipleFileSystemsHelpId,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("BACKUP_RSYNC_MULTIPLE_FILE_SYSTEMS_TOOLTIP")})}}});this.bAdd=new Ext.UI.RoundButton({id:"backups-jobs-settingswnd-excluded-add-btn",cls:"x-frontview-btn-plus-small",renderTo:this.bAddId,listeners:{click:this.onAddClick,scope:this}});this.bDelete=new Ext.UI.RoundButton({id:"backups-jobs-settingswnd-excluded-delete-btn",cls:"x-frontview-btn-minus-small",
renderTo:this.bDeleteId,listeners:{click:this.onDeleteClick,scope:this}});this.gridFiles=new Ext.UI.GridPanel({id:"backups-jobs-settingswnd-excluded-grid",header:false,autoHeight:true,bufferResize:0,singleSelect:true,trackMouseOver:false,store:new Ext.data.Store({autoDestroy:true,reader:new Ext.data.ArrayReader({idIndex:0},Ext.data.Record.create(["file"]))}),cm:new Ext.grid.ColumnModel({columns:[{header:_TR("NAME"),id:"file"}]}),renderTo:this.gridFilesId,viewConfig:{emptyText:'<div class="x-frontview-dataview-emptybg" style="font-size: 16px;">'+
_TR("BACKUP_EXCLUDE_FILES_DIRS_EMPTY")+"</div>",deferEmptyText:false,forceFit:true,markDirty:false},listeners:{rowclick:this.onGridRowClick,scope:this}});this.scroller=new Ext.UI.Scroller({dom:Ext.get(this.gridFilesId).dom,type:"vertical"});this.scroller.reg()},onGridRowClick:function(){this.getSelectedItem()?this.bDelete.setDisabled(false):this.bDelete.setDisabled(true)},onDeleteClick:function(){var a=this.getSelectedItem();Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),msg:String.format(_TR("WARN_DELETION"),
a.data.file),fn:function(b){if(b=="yes"){this.gridFiles.getStore().remove(a);this.bDelete.setDisabled(false)}},scope:this})},onAddClick:function(){this.wndAdd=this.wndAdd||new _s8.BackupSettings.Advanced.AddFile({listeners:{addclick:function(a,b){this.gridFiles.getStore().add([new Ext.data.Record({file:b})])},scope:this}});this.wndAdd.show();this.wndAdd.loadRecords(this.gridFiles.getStore().getRange())},getSelectedItem:function(){var a=this.gridFiles.getSelectionModel().getSelections();
return a&&a.length?a[0]:null},serializeExcluded:function(){for(var a=this.gridFiles.getStore().data.items,b="",c=0;c<a.length;c++){if(b!="")b+=",";b+=a[c].data.file}return b},populate:function(a){this.enableCompress.setValue(false);this.removeFile.setValue(false);this.fat32model.setValue(false).setVisible(false);this.boxfat32.removeClass("x-bac-celltop");this.chbHardLinks.setValue(false);this.chbMultipleFileSystems.setValue(false);var b=this.gridFiles.getStore();b.removeAll();var c=a.getRsyncOption(),
e=a.getRsyncExclude(),f=a.getSourceShareNameOrProtocol().toLowerCase();a=a.getDestinationShareNameOrProtocol().toLowerCase();f=f.indexOf("rsync")>=0;a=a.indexOf("rsync")>=0;f=f||a;this.setDisabled(!f);this.boxMsgNotAvail.setDisplayed(!f);this.boxControls.setDisplayed(f);if(f){a?this.boxfat32.addClass("x-bac-celltop"):this.boxfat32.removeClass("x-bac-celltop");this.fat32model.setVisible(a);if(Ext.isDefined(c)){c=+c;this.removeFile.setValue(!!(c&1));this.enableCompress.setValue(!!(c&2));this.fat32model.setValue(!!(c&
4));this.chbHardLinks.setValue(!!(c&8));this.chbMultipleFileSystems.setValue(!!(c&16))}if(e){c=e.split(",");for(e=0;e<c.length;e++)b.add([new Ext.data.Record({file:c[e]})])}}},doApply:function(a){if(!this.gridFiles.disabled){var b=0;if(this.removeFile.getValue())b+=1;if(this.enableCompress.getValue())b+=2;if(this.fat32model.getValue())b+=4;if(this.chbHardLinks.getValue())b+=8;if(this.chbMultipleFileSystems.getValue())b+=16;a.putRsyncOption(b);a.putRsyncExclude(this.serializeExcluded())}},setDisabled:function(a){this.enableCompress.setDisabled(a);
this.removeFile.setDisabled(a);this.fat32model.setDisabled(a);this.gridFiles.setDisabled(a);this.bDelete.setDisabled(a||!this.getSelectedItem());this.bAdd.setDisabled(a)}});_._2("_s9");
_s8.BackupSettings.Advanced.AddFile=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,constructor:function(){this.title=_TR("NEW_FILE_DIR");this.html='<table><tr><td id="'+(this.lFileId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>';this.fbar=[{xtype:"uibutton",text:_TR("CREATE"),width:100,acceptbtn:true,listeners:{click:this.onAddClick,scope:this}},{xtype:"uibutton",text:_TR("CANCEL"),width:100,cancelbtn:true,
listeners:{click:function(){this.hide()},scope:this}}];_s8.BackupSettings.Advanced.AddFile.superclass.constructor.apply(this,arguments)},loadRecords:function(a){this.records=a;this.lFile.removeClass("x-bac-label-error");this.tfFile.reset();this.tfFile.focus(false,true)},afterRender:function(){_s8.BackupSettings.Advanced.AddFile.superclass.afterRender.apply(this,arguments);this.lFile=Ext.get(this.lFileId);this.tfFile=new Ext.UI.TextField({width:300,renderTo:this.tfNameId})},
onAddClick:function(){if(this.validate()){this.fireEvent("addclick",this,this.tfFile.getValue());this.hide()}},validate:function(){var a=false;this.lFile.removeClass("x-bac-label-error");var b=this.tfFile.getValue();if(_.Utils.isValidPath(b.replace(/\*/g,""))){if(!this.isUniqName(b)){this.tfFile.showValidateTooltip(_TR("BACKUP_INSPECTOR_ERRORTIP_DIR_DUP"));a=true}}else{this.tfFile.showValidateTooltip(_TR("BACKUP_INSPECTOR_ERRORTIP_DIR"));a=true}if(a){this.lFile.addClass("x-bac-label-error");this.tfFile.focus()}return!a},
isUniqName:function(a){var b,c;a=a.toUpperCase();for(c=0;c<this.records.length;++c){b=this.records[c];if(b.data.file.toUpperCase()==a)return false}return true}});Ext.namespace("_s8");
_s8.BackupSettings.Options=_._1(Ext.Container,{constructor:function(){this.html='<table style="margin: 0 auto;"><tr><td class="x-bac-label">'+_TR("BACKUP_SCHEDULE_FULL")+_TR("COLON")+'</td><td id="'+(this.cbFullBackupId=Ext.id())+'"></td></tr><tr><td class="x-bac-label">'+_TR("BACKUP_ONCOMP_SEND")+_TR("COLON")+'</td><td><div style="float:left" id="'+(this.cbEmailId=Ext.id())+'"></div><div style="float:left" id="'+(this.boxEmailHelpId=Ext.id())+'"></div></td></tr><tr id="'+(this.wakeOnTrId=
Ext.id())+'"><td id="'+(this.wakeOnLblId=Ext.id())+'" class="x-bac-label">'+_TR("BACKUP_WAKE_ON_LAN_BEFORE_BACKUP")+_TR("COLON")+'</td><td id="'+(this.wakeOnId=Ext.id())+'"></td></tr><tr id="'+(this.spnWaitTrId=Ext.id())+'"><td class="x-bac-label">'+_TR("BACKUP_TIME_TO_WAIT")+_TR("COLON")+'</td><td><div style="float:left" id="'+(this.spnWaitId=Ext.id())+'"></div><div style="float:left" id="'+(this.spnWaitHelpId=Ext.id())+'"></div></td></tr></table><div style="margin: 20px 25px 0 25px;"><div id="'+
(this.chbBeforeId=Ext.id())+'" style="margin-bottom: 5px;"></div><div id="'+(this.chbBeforeTxtId=Ext.id())+'" class="ext-mb-warning x-backup-warning-indicator">'+_TR("BACKUP_INSPECTOR_OPT_REMOVE_LN2")+'</div></div><div style="margin: 20px 25px 0 25px;"><div id="'+(this.chbAfterId=Ext.id())+'" style="margin-bottom: 5px;"></div><div id="'+(this.chbAfterTxtId=Ext.id())+'" class="ext-mb-warning x-backup-warning-indicator">'+_TR("BACKUP_INSPECTOR_OPT_ONCOMPLITE_LN2")+"</div></div>";_s8.BackupSettings.Options.superclass.constructor.apply(this,
arguments)},afterRender:function(){_s8.BackupSettings.Options.superclass.afterRender.apply(this,arguments);this.controls={};this.cbFullBackup=new Ext.UI.ComboBox({width:150,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["FIRST_TIME",_TR("FIRST_TIME")],["EVERY_WEEK",_TR("EVERY_WEEK")],["EVERY_2_WEEKS",_TR("EVERY_2_WEEKS")],["EVERY_3_WEEKS",_TR("EVERY_3_WEEKS")],["EVERY_4_WEEKS",_TR("EVERY_4_WEEKS")],["EVERY_TIME",_TR("EVERY_TIME")],["NEVER",
_TR("BU_NEVER")]]}),valueField:"id",displayField:"text",value:"FIRST_TIME",renderTo:this.cbFullBackupId});this.cbEmail=new Ext.UI.ComboBox({width:150,mode:"local",triggerAction:"all",store:new Ext.data.ArrayStore({fields:["id","text"],data:[[0,_TR("ERRORS_ONLY")],[1,_TR("FULL_BACKUP_LOGS")],[2,_TR("STATUS_AND_ERRORS")]]}),valueField:"id",displayField:"text",value:0,renderTo:this.cbEmailId});new Ext.UI.RoundButton({cls:" x-frontview-btn-info",style:"margin-left: 5px;",renderTo:this.boxEmailHelpId,
listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("BACKUP_INSPECTOR_OPT_ONCOMPLITE_TOOLTIP")})}}});this.wakeOnLbl=Ext.get(this.wakeOnLblId);this.wakeOn=new Ext.UI.TextField({width:250,renderTo:this.wakeOnId,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_MAC_ADDRESS")},listeners:{change:this.onWakeOnChange,scope:this}});this.spnWait=new Ext.UI.SpinnerField({width:48,minValue:1,maxValue:59,selectOnFocus:true,renderTo:this.spnWaitId});new Ext.UI.RoundButton({cls:" x-frontview-btn-info",
style:"margin-left: 5px;",renderTo:this.spnWaitHelpId,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{width:230,html:_TR("BACKUP_TIME_TO_WAIT_TOOLTIP")})}}});this.chbBefore=new Ext.UI.Checkbox({boxLabel:_TR("BACKUP_INSPECTOR_OPT_REMOVE_LN1"),cls:"x-bac-chb-autoheight",renderTo:this.chbBeforeId});this.chbAfter=new Ext.UI.Checkbox({boxLabel:_TR("BACKUP_INSPECTOR_OPT_ONCOMPLITE_LN1"),cls:"x-bac-chb-autoheight",renderTo:this.chbAfterId})},onWakeOnChange:function(a,b){if(b!=""){this.spnWait.setDisabled(false);
this.spnWait.setValue(1)}else{this.spnWait.setDisabled(true);this.spnWait.setValue(0)}},isValidMacAddress:function(){this.wakeOnLbl.removeClass("x-bac-label-error");this.wakeOn.tooltip.enabled=false;var a=this.wakeOn.getValue();if(a=="")return true;if(!/[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}/.test(a)){this.wakeOnLbl.addClass("x-bac-label-error");this.wakeOn.tooltip.enabled=true;return false}return true},populate:function(a){if(a){this.cbFullBackup.setValue(a.getFullBackupFrequency());
this.cbEmail.setValue(a.getEmailThisToAlertEmail());this.chbAfter.setValue(a.getChownToShareOwner()=="1");var b=a.getDestinationShareNameOrProtocol();b=b?b.toLowerCase():null;this.chbBefore.setDisabled(false);this.chbAfter.setDisabled(a.getDestinationType()=="remote");var c=Ext.get(this.chbBeforeTxtId),e=Ext.get(this.chbAfterTxtId);c.removeClass("x-bac-disabled");e.removeClass("x-bac-disabled");a.getDestinationType()=="remote"&&e.addClass("x-bac-disabled");this.chbBefore.setDisabled(b&&b.indexOf("rsync")>=
0);if(b&&(b=="ftp"||b=="nfs"||b.indexOf("rsync")>=0)){this.chbBefore.setDisabled(true);this.chbBefore.setValue(false);c.addClass("x-bac-disabled")}else this.chbBefore.setValue(a.getRemovePreviousBackup()=="1");c=a.getSourceShareNameOrProtocol();var f=["cifs-ab","ftp"];if(f.indexOf(c)!=-1||f.indexOf(b)!=-1){this.chbAfter.setDisabled(true);e.addClass("x-bac-disabled")}b=a.getWolAddress();e=a.getTimeToWait();this.wakeOn.setValue(b);if(b!=""){this.spnWait.setDisabled(false);this.spnWait.setValue(e)}else{this.spnWait.setDisabled(true);
this.spnWait.setValue(0)}}this.backup=a;Ext.get(this.wakeOnTrId).setDisplayed(true);Ext.get(this.spnWaitTrId).setDisplayed(true);if(a.getSourceType()=="share"&&a.getDestinationType()=="share"){Ext.get(this.wakeOnTrId).setDisplayed(false);Ext.get(this.spnWaitTrId).setDisplayed(false)}},doApply:function(a){a.putFullBackupFrequency(this.cbFullBackup.getValue());a.putEmailThisToAlertEmail(this.cbEmail.getValue());a.putWolAddress(this.wakeOn.getValue());a.putTimeToWait(this.spnWait.getValue());a.putRemovePreviousBackup(this.chbBefore.getValue()?
"1":"0");a.putChownToShareOwner(this.chbAfter.getValue()?"1":"0")}});Ext.namespace("_s8");
_s8.BackupSettings.Log=_._1(_.JSCom._9,Ext.Container,{constructor:function(){this.bClear=new Ext.UI.Button({id:"backups-jobs-settingswnd-log-clear-btn",text:_TR("CLEAR"),width:80,handler:this.onClearClick,scope:this});this.taLog=new Ext.UI.TextArea({id:"backups-jobs-settingswnd-log-field",width:538,height:300,style:{marginBottom:"20px"},readonly:true});this.items=[this.taLog,this.bClear];_s8.BackupSettings.Log.superclass.constructor.apply(this,arguments);
this.spBKManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getBackupManager();_a(this.spBKManager,"_i1").Advise(this)},populate:function(a){this.backup&&_a(this.backup,"_i1").Unadvise(this);this.backup=a;_a(a,"_i1").Advise(this);this.UpdateLog()},UpdateLog:function(){this.taLog.setValue("");this.spBKManager.updateLog(this.backup,"backup-log-get")},onClearClick:function(){this.spBKManager.clearLog(this.backup,"backup-log-clear")},_ih:{OnLogUpdate:function(a,
b){if(a=="backup-log-get"){if(!b||b==_4)b=_TR("BACKUP_LOGS_NO");this.taLog.setValue(b)}},_o3:function(a,b,c){if(c=="backup-log-clear"){this.UpdateLog();a==_5?Ext.UI.MessageBox.info({msg:_TR("BACKUP_JOBS_LOGCLEAR_SUCCESS")}):Ext.UI.MessageBox.error({msg:_TR("BACKUP_JOBS_LOGCLEAR_FAIL")})}}}});Ext.namespace("_s8");
_s8.TimeMachine=_._1(Ext.UI.Window,{modal:true,width:640,height:550,resizable:false,updatesCount:0,help:"backup_wnd_edit_tm",constructor:function(){this.title='<div>                        <div style="float:left;">'+_TR("TIME_MACHINE")+'</div>                        <div style="float:right;">                            <div id="'+(this.ttDescId=Ext.id())+'" style="margin-left: 5px;"></div>                        </div>                        <div style="float:right;">                            <div id="'+
(this.btnProtocolId=Ext.id())+'" style="height: 40px; cursor: pointer;"></div>                        </div>                      </div>                      <div style="clear:both"></div>';this.items=[this.tmPrivate=new _s8.TimeMachinePrivate({listeners:{pending:this.showProgress,done:this.hideProgress,scope:this}}),this.tmShared=new _s8.TimeMachineShared({listeners:{change:this.onSharedTMChange,pending:this.showProgress,done:this.hideProgress,scope:this}})];this.fbar=["->",
this.bApply=new Ext.UI.Button({text:_TR("APPLY"),width:100,handler:this.onApplyClick,scope:this,acceptbtn:true}),this.bDone=new Ext.UI.Button({text:_TR("OK"),width:100,handler:function(){this.hide()},scope:this,cancelbtn:true}),this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this,cancelbtn:true})];_s8.TimeMachine.superclass.constructor.apply(this,arguments)},afterRender:function(){_s8.TimeMachine.superclass.afterRender.apply(this,
arguments);this.header.dom.style.height="34px";this.header.parent().dom.style.height="60px";this.tmShared.loadArgs(this.btnProtocolId);this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false});new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttDescId,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("TIME_MACHINE_PROTOCOL_DESC")})}}})},onShow:function(){_s8.TimeMachine.superclass.onShow.apply(this,
arguments);this.bApply.hide();this.bCancel.hide();this.bDone.show();this.tmPrivate.refresh();this.tmShared.refresh()},onSharedTMChange:function(){this.bApply.show();this.bCancel.show();this.bDone.hide()},onApplyClick:function(){if(this.tmShared.doApply()){this.bApply.hide();this.bCancel.hide();this.bDone.show()}},showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()}});Ext.namespace("_s8");
_s8.TimeMachineShared=_._1(_9,Ext.Container,{updateLparam:"backuptab_timemachine_settings",commitLparam:"backuptab_timemachine_commit",clsError:"x-bac-label-error",constructor:function(){this.html='<div><div style="float: left; font-size: 125%;">'+_TR("TIME_MACHINE_SHARED")+':</div><div id="'+(this.ttDescId=Ext.id())+'" style="float: left; margin-left: 5px;"></div><div class="x-clear"></div></div><table><tbody><tr><td style="vertical-align: top;"><table><tbody><tr><td class="x-bac-dlglabel">'+
_TR("TIME_MACHINE_SHARED_ENABLE")+'</td><td id="'+(this.booEnabledId=Ext.id())+'"></td></tr><tr><td class="x-bac-dlglabel">'+_TR("TIME_MACHINE_SHARED_USERNAME")+':</td><td id="'+(this.tfUsernameId=Ext.id())+'"></td></tr><tr><td id="'+(this.lPasswordId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("PASSWORD")+':</td><td id="'+(this.tfPasswordId=Ext.id())+'"></td></tr></tbody></table></td><td style="vertical-align: top; padding-left: 30px;"><table><tbody><tr><td colspan="3" class="x-bac-dlglabel"></td></tr><tr><td id="'+
(this.lCapacityId=Ext.id())+'" class="x-bac-dlglabel" style="width: 1%;">'+_TR("CAPACITY")+':</td><td id="'+(this.sfCapacityId=Ext.id())+'" style="width: 1%;"></td><td id="'+(this.lMaxCapacityId=Ext.id())+'" style="padding-left: 5px; line-height: 36px;"></td></tr><tr><td colspan="3" style="padding-top: 5px;">'+_TR("TIME_MACHINE_CAPACITY")+"</td></tr></tbody></table></td></tr></tbody></table>";_s8.TimeMachineShared.superclass.constructor.apply(this,arguments);this.spBKManager=_a(_7(_1.CLSIDS.Device5200),
"_i2").getBackupManager();_a(this.spBKManager,"_i1").Advise(this)},afterRender:function(){_s8.TimeMachineShared.superclass.afterRender.apply(this,arguments);new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttDescId,listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("TIME_MACHINE_SHARED_DESC")})}}});this.booEnabled=new Ext.UI.ButtonOnOff({textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),labelwidth:40,renderTo:this.booEnabledId,listeners:{valuechanged:this.onEnabledChange,
scope:this}});this.tfUsername=new Ext.UI.TextField({width:130,renderTo:this.tfUsernameId,readOnly:true});this.tfPassword=new Ext.UI.TextField({width:130,renderTo:this.tfPasswordId,inputType:"password",enableKeyEvents:true,listeners:{keyup:this.onChange,change:this.onChange,scope:this}});this.lPassword=Ext.get(this.lPasswordId);this.sfCapacity=new Ext.UI.SpinnerField({width:80,renderTo:this.sfCapacityId,minValue:1,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3,listeners:{valid:this.onChange,
spin:this.onChange,focus:this.onFocus,scope:this}});this.lCapacity=Ext.get(this.lCapacityId);this.lMaxCapacity=Ext.get(this.lMaxCapacityId)},loadArgs:function(a){this.switchBtnOnOff=new Ext.UI.ButtonOnOff({cls:"x-cloud-settings-btnonoff",textOn:"SMB",textOff:"AFP",renderTo:a,listeners:{click:this.onOnOffClick,scope:this}})},onOnOffClick:function(a){this.tfPassword.setValue("");if(a.isOff()){this.spTM.putProtocol("AFP");Ext.UI.MessageBox.show({title:"AFP",msg:_TR("TIME_MACHINE_AFP_WARNING"),buttons:Ext.Msg.OK,
icon:Ext.MessageBox.WARNING,fn:function(){}})}else this.spTM.putProtocol("SMB");this.onChange();return false},refresh:function(){this.clearErrors();this.spBKManager.updateTimeMachine(this.updateLparam)},doApply:function(){var a=false;if(this.validate()){this.spTM.putEnable(this.booEnabled.isOff()?"0":"1");this.spTM.putPassword(this.tfPassword.getValue());this.spTM.putCapacity(this.sfCapacity.getValue()*1E3);this.spBKManager.commitTimeMachine(this.commitLparam);a=true}return a},validate:function(){this.clearErrors();
var a=false;if(!this.booEnabled.isOff()){if(!this.tfPassword.getValue()){a=true;this.lPassword.addClass(this.clsError)}if(!this.sfCapacity.getValue()){a=true;this.lCapacity.addClass(this.clsError)}}return!a},clearErrors:function(){this.lPassword.removeClass(this.clsError);this.lCapacity.removeClass(this.clsError)},onFocus:function(a){if(_.isIE){var b=a.el.dom;a=b.value.length;b.focus();if(document.selection){b=b.createTextRange();b.moveStart("character",a);b.collapse();b.select()}else if(typeof b.selectionStart==
"number"&&typeof b.selectionEnd=="number")b.selectionStart=b.selectionEnd=a}},onChange:function(){this.fireEvent("change",this)},onEnabledChange:function(){var a=!this.booEnabled.isOff();if(this.spTM&&this.spTM.getEnable()=="1"&&!a){this.booEnabled.changeUI(false,true);Ext.UI.MessageBox.confirm({title:_TR("CONFIRMATION"),msg:_TR("TIME_MACHINE_SHARED_CONF"),fn:function(b){if(b=="yes"){this.booEnabled.changeUI(true,true);this.onChange();this.tfUsername.setDisabled(true);this.tfPassword.setDisabled(true);
this.sfCapacity.setDisabled(true)}},scope:this})}else{this.onChange();this.tfUsername.setDisabled(!a);this.tfPassword.setDisabled(!a);this.tfPassword.setValue("");this.sfCapacity.setDisabled(!a)}},populate:function(a){var b=a.getEnable()=="1",c=parseFloat((a.getMaxCapacity()/1E3).toFixed(2)),e=parseFloat((a.getCapacity()/1E3).toFixed(2));this.booEnabled.changeUI(!b,true);this.tfUsername.setValue(a.getUserName());this.tfPassword.setValue(a.getPassword());this.sfCapacity.setRawValue(e);this.sfCapacity.setMaxValue(c);
this.lMaxCapacity.update(_TR("GB")+" "+_TR("BACKUP_TIMEMACHINE_CAPACITY_OF")+" "+c+" "+_TR("GB"));this.tfUsername.setDisabled(!b);this.tfPassword.setDisabled(!b);this.sfCapacity.setDisabled(!b);this.switchBtnOnOff.setValue(a.getProtocol()!="SMB")},showProgress:function(){this.fireEvent("pending",this)},hideProgress:function(){this.fireEvent("done",this)},_ih:{_o1:function(a,b){if(b==this.updateLparam||b==this.commitLparam)this.showProgress()},_o2:function(a,b){if(b==this.updateLparam){this.spTM=
_a(this.spBKManager.getTimeMachine(),"_il");this.populate(this.spTM)}else b==this.commitLparam&&this.spBKManager.updateTimeMachine(this.updateLparam)},_o3:function(a,b,c){if(c==this.updateLparam||c==this.commitLparam){this.hideProgress();if(a!=_5&&this.getWidth()!=0)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,
buttonShowLog:false,buttonSend:false,checkboxShow:false})}}}}});Ext.namespace("_s8");
_s8.TimeMachinePrivate=_._1(_9,Ext.Container,{panelCls:"x-backup-panel-settings",constructor:function(){this.html='<div><div style="float: left; font-size: 125%;">'+_TR("TIME_MACHINE_PRIVATE")+'</div><div id="'+(this.ttDescId=Ext.id())+'" style="float: left; margin-left: 5px;"></div><div class="ptm-controls" id="'+(this.bAddId=this.bDeleteId=Ext.id())+'"></div><div class="x-clear"></div></div><div id="'+(this.boxDataId=Ext.id())+'" style="max-height: 160px;"><table class="ptm-users" cellspacing="0" id="'+
(this.tUsersId=Ext.id())+'"><tr><th class="ptm-col-name x-ellipsis">'+_TR("NAME")+'</th><th class="x-ellipsis">'+_TR("CONSUMED")+'</th><th></th></tr></table><div><div class="ptm-nodata x-frontview-dataview-emptybg" id="'+(this.lEmptyId=Ext.id())+'">'+_TR("TIME_MACHINE_PRIVATE_NODATA")+"</div>";_s8.TimeMachinePrivate.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spScrManager=a.getSecurityManager();_a(this.spScrManager,
"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager();_a(this.zfsVolumesManager,"_i1").Advise(this);this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this);this.urows=[]},afterRender:function(){_s8.TimeMachinePrivate.superclass.afterRender.apply(this,arguments);new Ext.UI.RoundButton({cls:"x-frontview-btn-info",renderTo:this.ttDescId,
listeners:{afterrender:function(a){new Ext.UI.ToolTip(a.el,{html:_TR("TIME_MACHINE_PRIVATE_DESC")})}}});this.bDelete=new Ext.UI.RoundButton({cls:"x-frontview-btn-minus-small",renderTo:this.bDeleteId,disabled:true,listeners:{click:this.onDeleteClick,scope:this}});this.bAdd=new Ext.UI.RoundButton({cls:"x-frontview-btn-plus-small",renderTo:this.bAddId,listeners:{click:this.onAddClick,scope:this}});this.tUsers=Ext.get(this.tUsersId);this.lEmpty=Ext.get(this.lEmptyId);this.scroller=new Ext.UI.Scroller({dom:Ext.get(this.boxDataId).dom,
type:"vertical"});this.scroller.reg()},refresh:function(){this.zfsVolumesManager.UpdateVolumes("backup-ptm-update-zfsvolumes");this.spScrManager.updateADSMode("backup-ptm-update-adsmode")},clearUsers:function(){delete this.userSelected;delete this.rowSelected;for(var a=0,b=this.urows.length;a<b;++a)this.urows[a].destroy();this.urows=[]},populateUsers:function(a,b,c){this.clearUsers();for(var e,f,g=0,h=a.length;g<h;++g){e=_a(a[g],"_i2z");if((f=e.getTimeMachine())&&f!=_4&&f.getEnabled()==
"1")this.urows.push(this.renderUser(this.tUsers,e,f,e.isAdmin()?"admin":"regular"))}if(c){e=c;(f=e.getTimeMachine())&&f!=_4&&f.getEnabled()=="1"&&this.urows.push(this.renderUser(this.tUsers,e,f,"owner"))}g=0;for(h=b.length;g<h;++g){e=_a(b[g],"_i2z");(f=e.getTimeMachine())&&f!=_4&&f.getEnabled()=="1"&&this.urows.push(this.renderUser(this.tUsers,e,f,"cloud"))}this.tUsers.setDisplayed(!!this.urows.length);this.lEmpty.setDisplayed(!this.urows.length);this.bDelete.disable()},renderUser:function(a,
b,c,e){var f=c.getSizeLimit();f=f==_4?"0":parseFloat((f*1).toFixed(3))+" "+_TR("GB");c=c.getUsedGB();c=c==_4?"0":c+" "+_TR("GB");a=a.dom.insertRow(-1);var g=new Ext.Component({applyTo:a});Ext.get(a).addClass(e=="admin"?"x-sec-grid-admin":"");Ext.get(a.insertCell(0)).addClass("x-ellipsis ptm-col-name "+(e=="cloud"?"x-cloud-users-cloudrow":e=="owner"?"x-cloud-users-ownerrow":"x-sec-grid-uname")).update(b.getName());Ext.get(a.insertCell(1)).update(String.format(_TR("TIME_MACHINE_PRIVATE_CONSUMED"),
c,f));Ext.get(a.insertCell(2)).update("<a></a>").addClass("x-frontview-icon-settings");g.el.user=b;g.el.on("click",this.onRowClick,this);return g},onAddClick:function(){this.wndAddUser||(this.wndAddUser=new _s8.TimeMachineAddUser);this.wndAddUser.show();this.wndAddUser.center()},onDeleteClick:function(){var a=_a(this.spBKManager.getTimeMachine(),"_il").getProtocol();a=String.format(_TR("TIME_MACHINE_PRIVATE_CONF"),a);Ext.UI.MessageBox.confirm({title:_TR("CONFIRM_DELETION"),
msg:a,fn:function(b){b=="yes"&&this.spScrManager.removeUserTimeMachine(this.userSelected,"backup-ptm-commit-user")},scope:this})},onRowClick:function(a,b){a=Ext.get(a.browserEvent.currentTarget);this.rowSelected&&this.rowSelected.removeClass("active");this.rowSelected=a;this.userSelected=a.user;this.rowSelected&&this.rowSelected.addClass("active");this.bDelete.enable();if(b&&b.tagName=="A"){this.wndEditUser||(this.wndEditUser=new _s8.TimeMachineEditUser);this.wndEditUser.show(this.userSelected);
this.wndEditUser.center()}},showProgress:function(){this.fireEvent("pending",this)},hideProgress:function(){this.fireEvent("done",this)},_i2y:{_o1:function(a,b){if(!(b=="sync-update-users"&&!this.rendered)){if(b=="backup-ptm-update-adsmode"||b=="backup-ptm-update-rcusers"||b==="backup-ptm-commit-newuser"||b=="backup-ptm-commit-user"||b=="sync-update-users")this.showProgress();return _5}},_o2:function(a,b){if(!(b=="sync-update-users"&&!this.rendered)){if(b=="backup-ptm-update-adsmode"){a=
this.spScrManager.getADSMode();if(a=="user")this.spScrManager.updateUsers("sync-update-users");else a=="ads"&&this.spScrManager.queryUsersWithTimeMachine("backup-ptm-query-users")}else if(b=="sync-update-users")this.spScrManager.updateUsersWithAdmin("backup-ptm-update-users",true,false);else if(b=="backup-ptm-update-users")this.spScrManager.UpdateRCUsers("backup-ptm-update-rcusers");else if(b=="backup-ptm-update-rcusers")this.spSysManager.updateCloudOwner("backup-ptm-update-rcowner");else if(b=="backup-ptm-query-users")this.populateUsers(this.spScrManager.getQueryUsers(),
[],null);else if(b=="backup-ptm-commit-user"||b==="backup-ptm-commit-newuser")this.spScrManager.updateADSMode("backup-ptm-update-adsmode");return _5}},_o3:function(a,b,c){if(!(c=="sync-update-users"&&!this.rendered)){if(c=="backup-ptm-update-adsmode"||c=="backup-ptm-update-users"||c=="backup-ptm-update-rcusers"||c==="backup-ptm-commit-newuser"||c=="backup-ptm-commit-user"||c=="sync-update-users"){this.hideProgress();if(a!=_5)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();
_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5}}},_i45:{_o1:function(a,b){b=="backup-ptm-update-rcowner"&&this.showProgress();return _5},_o2:function(a,b){if(b=="backup-ptm-update-rcowner"){a=this.spScrManager.getUsers();b=this.spScrManager.getRCUsers();var c=_a(this.spSysManager.getCloudOwner(),
"_i2z");if(!c||c==_4||!c.getName()||!c.getName()==_4)c=null;this.populateUsers(a,b,c)}return _5},_o3:function(a,b,c){if(c=="backup-ptm-update-rcowner"){this.hideProgress();if(a!=_5)if(a=_a(b,"_io").getLastNMLError()){a=a.getErrorCode();_a(_7(_._3.ErrorReporter),"IErrorReporter").report(_TR(a),"Code: "+a,_2.ERROR,{title:"",subTitle:_TR(a),buttonInspect:false,buttonShowLog:false,buttonSend:false,checkboxShow:false})}}return _5}},_i3v:{_o2:function(a,
b){if(b=="backup-ptm-update-zfsvolumes"||b=="sync-update-zfsvolumes"){a=this.zfsVolumesManager.getActiveVolumes();if(a!=_4&&a.length)this.bigMask&&this.bigMask.hide();else{this.bigMask=this.bigMask||new Ext.UI.LoadMask(this.el,{frame:false,spinner:false});this.bigMask.show()}}}}});Ext.namespace("_s8");
_s8.TimeMachineAddUser=_._1(_9,Ext.UI.Window,_ih,_i2y,_i45,{modal:true,width:600,height:500,resizable:false,minimizable:false,maximizable:false,help:"backup_wnd_add_tm_user",constructor:function(a){this.title=_TR("TIME_MACHINE_PRIVATE_CREATE");this.html=this.getHtml();this.fbar=this.getFooter();_s8.TimeMachineAddUser.superclass.constructor.call(this,a);this.usel=this.elsel=null;this.urows=[];this.adssize=
20},initComponent:function(){_s8.TimeMachineAddUser.superclass.initComponent.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this);this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this);this.spSysManager=a.getSystemManager();_a(this.spSysManager,"_i1").Advise(this)}this.on("afterrender",this.onAfterRender,
this);this.on("show",this.onAfterShow,this)},getHtml:function(){return'<div class="ptm-adduser-adsbar" id="'+(this.idadsbar=Ext.id())+'"></div><table class="ptm-adduser" cellpadding="0" cellspacing="0"><tr><th class="ptm-col-name x-ellipsis">'+_TR("NAME")+'</th><th class="ptm-col-email x-ellipsis">'+_TR("EMAIL")+'</th></tr></table><div class="ptm-adduser-wrap" id="'+(this.iduserswrap=Ext.id())+'"><table class="ptm-adduser" cellpadding="0" cellspacing="0" id="'+(this.idusers=Ext.id())+'" style="table-layout:fixed;"></table></div><table class="ptm-adduser ptm-capacity" cellpadding="0" cellspacing="0"><tr><td class="x-backup-panel-settings-lbl" id="'+
(this.idlcapacity=Ext.id())+'">'+_TR("CAPACITY")+_TR("COLON")+'</td><td class="x-backup-panel-settings-capacity" id="'+(this.idcapacity=Ext.id())+'"></td><td class="x-backup-panel-settings-cell-space" id="'+(this.idmax=Ext.id())+'"></td></tr></table>'},getFooter:function(){this.btncreate=new Ext.UI.Button({text:_TR("ADD"),width:100,disabled:true,handler:this.onCreateClick,scope:this,acceptbtn:true});return["->",this.btncreate,new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},
scope:this,cancelbtn:true})]},onAfterRender:function(){this.renderAdsBar(Ext.get(this.idadsbar));this.elusers=Ext.get(this.idusers);this.lcapacity=Ext.get(this.idlcapacity);this.capacity=new Ext.UI.SpinnerField({width:70,minValue:1,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.capacity.render(this.idcapacity);if(_.isIE){Ext.get(this.capacity.id).un("focus",function(){});Ext.get(this.capacity.id).on("focus",this.onFocus)}this.max=new Ext.Component({html:"MB"});this.max.render(this.idmax);
this.scroller=new Ext.UI.Scroller({dom:Ext.get(this.iduserswrap).dom,type:"vertical"});this.scroller.reg()},onFocus:function(a){if(_.isIE){var b=a.target;a=b.value.length;b.focus();if(document.selection){b=b.createTextRange();b.moveStart("character",a);b.collapse();b.select()}else if(typeof b.selectionStart=="number"&&typeof b.selectionEnd=="number")b.selectionStart=b.selectionEnd=a}},renderAdsBar:function(a){this.cmpsearch=new Ext.UI.TextField({cls:"x-sec-search-field",width:200,enableKeyEvents:true,
renderTo:a,listeners:{specialkey:this.onSearchSpecialKeyPress,scope:this}});new Ext.UI.RoundButton({cls:"x-frontview-btn-search x-sec-search-btn",renderTo:a,listeners:{click:this.onSearchClick,scope:this}});this.cmppage=new Ext.UI.TextField({width:60,maskRe:/^[0-9]*$/,enableKeyEvents:true,value:"1",listeners:{specialkey:this.onPageSpecialKeyPress,scope:this}});var b=Ext.id(),c=Ext.id(),e=Ext.id(),f=Ext.id(),g=Ext.id(),h=Ext.id();new Ext.Component({cls:"x-sec-pager",hidden:false,renderTo:a,html:String.format('<table cellpadding="0" cellspacing="0" border="0"><tr><td><div id="{0}" class="x-sec-pager-first x-sec-pager-disable"></div></td><td><div id="{1}" class="x-sec-pager-left x-sec-pager-disable"></div></td><td class="x-sec-pager-text">{2}</td><td id="{3}"></td><td class="x-sec-pager-text">{4}&nbsp;<span id="{5}"></span></td><td><div id="{6}" class="x-sec-pager-right x-sec-pager-disable"></div></td><td><div id="{7}" class="x-sec-pager-last x-sec-pager-disable"></div></td></tr></table>',
b,c,_TR("PAGE"),g,_TR("OF"),h,e,f),listeners:{scope:this,afterrender:function(){this.btnfirst=Ext.get(b);this.btnfirst.on("click",this.onFirstClick,this);this.btnprev=Ext.get(c);this.btnprev.on("click",this.onPrevClick,this);this.cmppage.render(g);this.elcount=Ext.get(h);this.btnnext=Ext.get(e);this.btnnext.on("click",this.onNextClick,this);this.btnlast=Ext.get(f);this.btnlast.on("click",this.onLastClick,this)}}})},onSearchSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ESC:this.cmpsearch.setValue("");
return false;case b.ENTER:this.queryUsers(this.cmpsearch.getValue(),1);return false}},onPageSpecialKeyPress:function(a,b){switch(b.getKey()){case b.ENTER:a=parseInt(this.cmppage.getValue());if(a>this.totalpages)a=this.totalpages;a!=this.page&&this.queryUsers(this.cmpsearch.getValue(),a);return false}},onSearchClick:function(){this.queryUsers(this.cmpsearch.getValue(),1)},onFirstClick:function(){this.page!=1&&this.queryUsers(this.cmpsearch.getValue(),1)},onPrevClick:function(){this.page!=1&&this.queryUsers(this.cmpsearch.getValue(),
this.page-1)},onNextClick:function(){this.page<this.totalpages&&this.queryUsers(this.cmpsearch.getValue(),this.page+1)},onLastClick:function(){this.page!=this.totalpages&&this.queryUsers(this.cmpsearch.getValue(),this.totalpages)},onCreateClick:function(){var a=this.usel,b=this.capacity.getValue();this.lcapacity[b?"removeClass":"addClass"]("x-bac-label-error");if(a&&b){b=a.getTimeMachine();if(!b||b==_4)b=a.createTimeMachine();b.putEnabled("1");b.putSizeLimit(this.capacity.getValue()||0);this.spScrManager.commitUser("backup-ptm-commit-newuser",
a)}},onAfterShow:function(){this.clear();var a=_a(this.spBKManager.getTimeMachine(),"_il");a&&a!=_4?this.populateTimeMachine(a):this.spBKManager.updateTimeMachine("backup-ptmadd-update-tm");this.spScrManager.updateADSMode("backup-ptmadd-update-adsmode")},queryUsers:function(a,b){this.page=b;this.spScrManager.queryUsers(a,(b-1)*this.adssize,this.adssize,"backup-ptmadd-query-users")},populateTimeMachine:function(a){var b=parseFloat((a.getMaxCapacity()/1E3).toFixed(2));this.capacity.setRawValue(parseFloat((a.getCapacity()/
1E3).toFixed(2)));this.capacity.setMaxValue(b);this.max.update(_TR("GB")+" "+_TR("BACKUP_TIMEMACHINE_CAPACITY_OF")+" "+b+" "+_TR("GB"));(a=this.spScrManager.getDefaultUserProfile())&&a!=_4?this.populateProfile(a):this.spScrManager.UpdateDefaultUserProfile("backup-ptmadd-update-defuserprofile")},populateProfile:function(a){if((a=a.getTimeMachine())&&a!=_4){a=a.getSizeLimit();a==_4||(a*1).toFixed(0);this.capacity.setRawValue(0)}},populateUsers:function(a,b,c){this.clearUsers();for(var e=
0,f=a.length;e<f;++e){var g=_a(a[e],"_i2z");if(g.getId()!="98")this.urows.push(this.renderUser(this.elusers,g,g.isAdmin()?"admin":"regular"))}c&&this.urows.push(this.renderUser(this.elusers,c,"owner"));e=0;for(f=b.length;e<f;++e)this.urows.push(this.renderUser(this.elusers,_a(b[e],"_i2z"),"cloud"));this.urows.length==0&&this.urows.push(this.renderUser(this.elusers,_TR("NO_USERS")))},renderUser:function(a,b,c){if(typeof b=="object"){a=a.dom;a=a.insertRow(-1);var e=new Ext.Component({applyTo:a});
Ext.get(a).addClass(c=="admin"?"x-sec-grid-admin":"");Ext.get(a.insertCell(0)).addClass("x-ellipsis ptm-col-name "+(c=="cloud"?"x-cloud-users-cloudrow":c=="owner"?"x-cloud-users-ownerrow":"x-sec-grid-uname")).update(b.getName());Ext.get(a.insertCell(1)).addClass("x-ellipsis ptm-col-email").update(b.getEmail()).set({title:b.getEmail()});Ext.get(a.insertCell(2)).update(0);e.el.on("click",function(){this.elsel&&this.elsel.removeClass("active");(this.elsel=e.el)&&this.elsel.addClass("active");this.usel=
b;this.btncreate.enable()},this)}else{a=a.dom;a=a.insertRow(-1);e=new Ext.Component({applyTo:a});Ext.get(a.insertCell(0)).set({colspan:2}).addClass("ptm-nodata").update(b)}return e},clear:function(){this.el[this.spScrManager.getADSMode()=="ads"?"addClass":"removeClass"]("ptm-adduser-adsmode");this.totalpages=this.page=1;this.cmpsearch.setValue("");this.cmppage.setValue(this.page);this.elcount.update(this.totalpages);this.clearUsers();this.clearErrors()},clearUsers:function(){this.btncreate.disable();
this.usel=this.elsel=null;for(var a=0,b=this.urows.length;a<b;++a)this.urows[a].destroy();this.urows=[]},clearErrors:function(){this.lcapacity.removeClass("x-bac-label-error")},_ih:{_o2:function(a,b){if(b=="backup-ptmadd-update-tm"){a=_a(a,"_ig");this.populateTimeMachine(_a(a.getTimeMachine(),"_il"))}return _5}},_i2y:{_o1:function(a,b){b=="backup-ptm-commit-newuser"&&this.hide();return _5},_o2:function(a,b){if(b==
"backup-ptmadd-update-adsmode"){a=this.spScrManager.getADSMode();this.el[a=="ads"?"addClass":"removeClass"]("ptm-adduser-adsmode");if(a=="user")this.spScrManager.updateUsersWithAdmin("backup-ptmadd-update-users",true,false);else a=="ads"&&this.queryUsers(this.cmpsearch.getValue(),1)}else if(b=="backup-ptmadd-update-users")this.spScrManager.UpdateRCUsers("backup-ptmadd-update-rcusers");else if(b=="backup-ptmadd-update-rcusers")this.spSysManager.updateCloudOwner("backup-ptmadd-update-rcowner");else if(b==
"backup-ptmadd-query-users"){this.cmppage.setRawValue(this.page);this.totalpages=Math.ceil(this.spScrManager.getQueryUsersCount()/this.adssize);if(!this.totalpages)this.totalpages=1;this.elcount.update(this.totalpages);this.populateUsers(this.spScrManager.getQueryUsers(),[],null)}else if(b=="backup-ptmadd-update-defuserprofile")this.populateProfile(this.spScrManager.getDefaultUserProfile());else b==="backup-ptm-commit-newuser"&&Ext.UI.MessageBox.info({title:_TR("TIME_MACHINE_PRIVATE"),msg:String.format(_TR("TIME_MACHINE_PRIVATE_USER_ADDED"),
this.usel.getName())});return _5}},_i45:{_o2:function(a,b){if(b=="backup-ptmadd-update-rcowner"){a=this.spScrManager.getUsers();b=this.spScrManager.getRCUsers();var c=_a(this.spSysManager.getCloudOwner(),"_i2z");if(!c||c==_4||!c.getName()||!c.getName()==_4)c=null;this.populateUsers(a,b,c)}return _5}}});Ext.namespace("_s8");
_s8.TimeMachineEditUser=_._1(_9,Ext.UI.Window,_ih,_i2y,{modal:true,width:400,height:240,resizable:false,minimizable:false,maximizable:false,help:"backup_wnd_edit_tm_user",constructor:function(a){this.title=_TR("TIME_MACHINE_PRIVATE_EDIT");this.html=this.getHtml();this.fbar=this.getFooter();_s8.TimeMachineEditUser.superclass.constructor.call(this,a)},initComponent:function(){_s8.TimeMachineAddUser.superclass.initComponent.apply(this,
arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");if(a){this.spScrManager=a.getSecurityManager();_a(this.spScrManager,"_i1").Advise(this);this.spBKManager=a.getBackupManager();_a(this.spBKManager,"_i1").Advise(this)}this.on("afterrender",this.onAfterRender,this);this.on("show",this.onAfterShow,this)},onApplyClick:function(){var a=this.user;if(a){var b=a.getTimeMachine();if(!b||b==_4)b=a.createTimeMachine();b.putEnabled("1");b.putSizeLimit(this.capacity.getValue()||
0);this.spScrManager.commitUser("backup-ptm-commit-user",a)}},populateTimeMachine:function(a){var b=parseFloat((a.getMaxCapacity()/1E3).toFixed(2));this.capacity.setRawValue(parseFloat((a.getCapacity()/1E3).toFixed(2)));this.capacity.setMaxValue(b);this.max.update(_TR("GB")+" "+_TR("BACKUP_TIMEMACHINE_CAPACITY_OF")+" "+b+" "+_TR("GB"));b=this.user;a=b.getTimeMachine();this.elname.update(b.getName());if(a&&a!=_4){a=a.getSizeLimit();a=a==_4?"0":(a*1).toFixed(0);this.capacity.setValue(a=="0"?
"":a)}else this.capacity.setValue("")},getHtml:function(){return'<table class="ptm-edituser" cellpadding="0" cellspacing="0"><tr><td class="x-backup-panel-settings-lbl">'+_TR("USER_NAME")+_TR("COLON")+'</td><td id="'+(this.idname=Ext.id())+'" colspan="2"></td></tr><tr><td class="x-backup-panel-settings-lbl">'+_TR("CAPACITY")+_TR("COLON")+'</td><td class="x-backup-panel-settings-capacity" id="'+(this.idcapacity=Ext.id())+'"></td><td class="x-backup-panel-settings-cell-space" id="'+(this.idmax=Ext.id())+
'"></td></tr></table>'},onAfterRender:function(){this.elname=Ext.get(this.idname);this.capacity=new Ext.UI.SpinnerField({width:70,minValue:1,incrementValue:1,alternateIncrementValue:10,validationDelay:1E3});this.capacity.render(this.idcapacity);this.max=new Ext.Component({html:"MB"});this.max.render(this.idmax)},show:function(a){this.user=a;_s8.TimeMachineAddUser.superclass.show.call(this)},onAfterShow:function(){var a=_a(this.spBKManager.getTimeMachine(),"_il");a&&a!=
_4?this.populateTimeMachine(a):this.spBKManager.updateTimeMachine("backup-ptmedit-update-tm")},getFooter:function(){this.btnappend=new Ext.UI.Button({text:_TR("APPLY"),width:100,handler:this.onApplyClick,scope:this,acceptbtn:true});return["->",this.btnappend,new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this,cancelbtn:true})]},_ih:{_o2:function(a,b){if(b=="backup-ptmedit-update-tm"){a=_a(a,"_ig");this.populateTimeMachine(_a(a.getTimeMachine(),
"_il"))}return _5}},_i2y:{_o1:function(a,b){b=="backup-ptm-commit-user"&&this.hide();return _5}}});Ext.namespace("_s8");
_s8.ReadyDR=_._1(_9,Ext.Container,{cls:"x-backup-readydr",help:"backup_panel_readydr",constructor:function(){_s8.ReadyDR.Instance=this;this.title=_TR("READYDR");this.html='<div class="x-frontview-panel"><div><span class="x-frontview-panel-title"><span style="display:inline-block;">'+this.title+'</span><span style="display:inline-block; margin-left:5px;" id="'+(this.ttTitleId=Ext.id())+'"></span></span></div><div id="'+(this.booEnabledId=this.bAddId=this.bKeysId=
Ext.id())+'"></div><div class="x-clear"></div><div id="'+(this.cmpJobsId=Ext.id())+'"></div></div>';_s8.ReadyDR.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spServiceManager=a.getSystemServiceManager();_a(this.spServiceManager,"_i1").Advise(this);this.zfsVolumesManager=a.getZFSVolumesManager()},afterRender:function(){_s8.ReadyDR.superclass.afterRender.apply(this,arguments);new Ext.UI.RoundButton({cls:"x-frontview-btn-info",
renderTo:this.ttTitleId,listeners:{afterrender:function(a){this.ttTitle=new Ext.UI.ToolTip(a.el,{style:"font-style: italic; ",html:_TR("READYDR_TOOLTIP")})},scope:this}});this.booEnabled=new Ext.UI.ButtonOnOff({cls:this.cls+"-enable-btn",textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.booEnabledId,listeners:{click:this.onEnabledChange,scope:this}});this.bKeys=new Ext.UI.Button({id:"readydr-keys-btn",cls:this.cls+"-keys-btn",width:125,expandToText:true,text:_TR("READYDR_KEYS"),handler:this.onKeysClick,
scope:this,renderTo:this.bKeysId});this.bAdd=new Ext.UI.Button({id:"readydr-add-job-btn",cls:this.cls+"-add-job-btn",width:125,expandToText:true,text:_TR("READYDR_JOBS_CREATE"),acceptbtn:true,handler:this.onAddClick,scope:this,renderTo:this.bAddId});this.cmpJobs=new _s8.ReadyDR.Jobs({mask:this.mask,renderTo:this.cmpJobsId})},onKeysClick:function(){if(!this.wndKeys)this.wndKeys=new _s8.ReadyDR.Keys;this.wndKeys.show()},onAddClick:function(){if(!this.wndCreate)this.wndCreate=
new _s8.ReadyDR.Jobs.Create;this.wndCreate.show();_s0.GA.trackEvent({eventCategory:"Backup",eventAction:"click",eventLabel:"Add ReadyDR Job"})},onEnabledChange:function(){var a=!this.booEnabled.isOff(),b=this.spServiceManager.getSystemServiceByName("replisync");if(b&&b!=_4){b.putEnable(a);this.spServiceManager.commitSystemService("backuptab-readydr-commit-service")}},ImportKey:function(a){if(!this.updprompt)this.updprompt=_a(_7(_._3.Controls.FirmwareWindow),
"IPromptWindow");_a(this.updprompt,"_i1").Advise(a);this.updprompt.Show(_s10.FirmwareWindow.ADDON,{upurl:document.fsupload,params:{path:"/tmp/"},submittype:"sshsubmit",caption:_TR("READYDR_KEYS_IMPORT"),iscustom:true,fieldname:_TR("FILE_NAME")+_TR("COLON"),okbtn:_TR("UPLOAD")})},refresh:function(){this.spServiceManager.updateSystemServiceInfo("backuptab-readydr-update-service")},populateService:function(){var a=this.spServiceManager.getSystemServiceByName("replisync");a=!!a&&
a!=_4&&a.getEnable();this.booEnabled.setValue(!a);this.bKeys.setDisabled(!a);this.bAdd.setDisabled(!a);this.cmpJobs.setDisabled(!a);this.cmpJobs.refresh()},onTabDeactivate:function(){this.cmpJobs.onTabDeactivate()},_i35:{_o1:function(a,b){if(b=="backuptab-readydr-update-service"||b=="backuptab-readydr-commit-service")this.mask.showProgress()},_o3:function(a,b,c){if(c=="backuptab-readydr-update-service"){this.populateService();this.mask.hideProgress()}else if(c==
"backuptab-readydr-commit-service"){this.refresh();this.mask.hideProgress()}}}});Ext.namespace("_s8.ReadyDR");
_s8.ReadyDR.Keys=_._1(_9,Ext.UI.Window,{modal:true,width:990,height:620,resizable:false,minimizable:false,maximizable:false,cls:"x-backup-readydr-keys",updatesCount:0,constructor:function(){this.title=_TR("READYDR_KEYS");this.html='<div id="'+(this.bAddId=this.elHeaderId=Ext.id())+'"></div><div class="x-clear"></div>';this.fbar=this.getFooter();_s8.ReadyDR.Keys.superclass.constructor.apply(this,arguments);this.spRepliSyncKeysManager=_a(_7(_1.CLSIDS.Device5200),
"_i2").getRepliSyncSystem().getKeysManager();_a(this.spRepliSyncKeysManager,"_i1").Advise(this);this.sshprompt=_a(_7(_._3.Security.SshPromptWindow),"IPromptWindow")},afterRender:function(){_s8.ReadyDR.Keys.superclass.afterRender.apply(this,arguments);this.elHeader=Ext.get(this.elHeaderId);this.bDownload=new Ext.UI.Button({id:"readydr-keys-download-btn",cls:this.cls+"-download-btn",width:150,expandToText:true,text:_TR("READYDR_KEYS_EXPORT"),
handler:this.onDownloadClick,scope:this,renderTo:this.bAddId});this.bAdd=new Ext.UI.Button({id:"readydr-keys-add-btn",cls:this.cls+"-add-btn",width:150,expandToText:true,text:_TR("READYDR_KEYS_IMPORT"),acceptbtn:true,handler:this.onAddClick,scope:this,renderTo:this.bAddId});this.renderGrid();this.createMenu();this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},getFooter:function(){this.bCancel=new Ext.UI.Button({id:"readydr-keys-close-btn",
text:_TR("CLOSE"),width:100,handler:function(){this.hide()},scope:this});return["->",this.bCancel]},onShow:function(){_s8.ReadyDR.Keys.superclass.onShow.apply(this,arguments);this.reset();this.center();this.onResized();this.refresh()},reset:function(){this.grid.getStore().loadData([])},renderGrid:function(){var a=[{header:"&#160;",width:33,fixed:true,hideable:false,menuDisabled:true,dataIndex:"",xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="grid-backup-icon"></div>')).compile()},
{header:_TR("TITLE"),width:100,dataIndex:"title"},{header:_TR("FINGERPRINT"),width:200,dataIndex:"fingerprint"},{header:"&#160;",width:36,fixed:true,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="x-frontview-icon-settings"><a></a></div>')).compile()}];this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true,handleMouseDown:function(b,c,e){if(!this.isSelected(c)){this.selectRow(c,e.ctrlKey||e.shiftKey);this.grid.getView().focusRow(c)}}});this.grid=new Ext.UI.GridPanel({id:"readydr-keys-grid",
uicls:"ui-fwgrid",autoHeight:true,sm:this.selModel,colModel:new Ext.grid.ColumnModel(a),store:new Ext.data.Store({data:[],reader:new Ext.data.JsonReader({idProperty:"id",fields:["id","spKey","title","fingerprint"]})}),viewConfig:{forceFit:true,autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+_TR("READYDR_KEYS_EMPTY")+"</div>",deferEmptyText:false,getRowClass:function(b,c){b="x-grid3-row-even";if(c%2==1)b="x-grid3-row-odd";return b}},renderTo:this.body,listeners:{cellclick:function(b,
c,e){e==b.getColumnModel().config.length-1&&this.showMenu(b.getView().getRow(c))},cellcontextmenu:function(b,c,e,f){this.showMenu(null,f.xy);f.preventDefault()},scope:this}})},createMenu:function(){this.itemDelete=new Ext.menu.Item({text:_TR("DELETE"),icon:false,ctCls:"x-frontview-icon-delete",commandName:"delete",id:"readyrd-keys-context-menu-delete-btn"});this.itemEdit=new Ext.menu.Item({text:_TR("EDIT"),icon:false,ctCls:"x-frontview-icon-settings",commandName:"edit",id:"readyrd-keys-context-menu-edit-btn"});
this.menu=new Ext.UI.Menu({id:"readyrd-keys-context-menu",cls:"x-backup-jobs-menu",defaultAlign:"tr-br?",enableScrolling:false,items:[this.itemDelete,this.itemEdit],listeners:{itemclick:function(a){switch(a.commandName){case "download":this.onDownloadClick();break;case "delete":this.onRemoveClick();break;case "edit":this.onEditClick();break}},scope:this}})},showMenu:function(a,b){if(this.selModel.getSelected())b?this.menu.showAt(b):this.menu.show(a)},onResized:function(){var a=this.elHeader.getWidth();
a>400||(a=400);this.grid.setWidth(a)},onAddClick:function(){_s8.ReadyDR.Instance.ImportKey(this)},onDownloadClick:function(){var a=_a(_7(_._3.Controls.SSHKeyDownload),"ILogDownloader");a.Initialize({downloadId:"downloadreplisynckey",downloadId:"ReplisyncKeys",resourceType:"ReplisyncKeys"});a.Start(document.dbbroker)},onRemoveClick:function(){var a=this.grid.getSelectionModel().getSelected();Ext.UI.MessageBox.confirm({title:_TR("CONFIRMATION"),msg:String.format(_TR("WARN_DELETION"),
a.get("title")),fn:function(b){b=="yes"&&this.spRepliSyncKeysManager.RemoveKey("backuptab-readydr-remove-key",a.get("id"))},scope:this})},onEditClick:function(){var a=this.grid.getSelectionModel().getSelected();_a(this.sshprompt,"_i1").Advise(this);this.sshprompt.Show(_s4.PromptWindow.SSHKEY,{caption:_TR("EDIT"),delegatename:"delegateEditing",elId:a.get("id"),interfaceName:"IRepliSyncKey",ssh:a.get("spKey")})},delegateEditing:function(a){if(a.getArgs().ssh.putTitle(a.getArgs().arg1)==
_5){var b=this.grid.getSelectionModel().getSelected();b=_a(b.get("spKey"),"IRepliSyncKey");b.putTitle(a.getArgs().arg1);this.spRepliSyncKeysManager.CommitKey("backuptab-readydr-commit-key",b)}},refresh:function(){this.spRepliSyncKeysManager.UpdateKeys("backuptab-readydr-update-keys")},populateKeys:function(){var a=this.spRepliSyncKeysManager.getKeys(),b=[];_.each(a,function(c){var e=c.getId();b.push({id:e,spKey:c,title:Ext.util.Format.htmlEncode(c.getTitle()),fingerprint:c.getFingerPrint()})},
this);this.grid.getStore().loadData(b);this.onResized()},showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},IRepliSyncKeysManagerEvents:{_o1:function(a,b){if(b=="backuptab-readydr-update-keys"||b=="backuptab-readydr-add-key"||b=="backuptab-readydr-remove-key"||b=="backuptab-readydr-commit-key")this.showProgress()},_o3:function(a,b,c){if(c=="backuptab-readydr-update-keys"||
c=="backuptab-readydr-add-key"||c=="backuptab-readydr-remove-key"||c=="backuptab-readydr-commit-key"){this.hideProgress();c=="backuptab-readydr-update-keys"?this.populateKeys():this.refresh();if(a!=_5)if(a=_a(b,"_io").getLastNMLError())Ext.UI.MessageBox.error({title:this.title,msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}}},IPromptWindowEvents:{OnClosing:function(a){if(!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().delegatename))this[a.getArgs().delegatename](a);else{a=
a.getArgs();this.spRepliSyncKeysManager.AddKey("backuptab-readydr-add-key",a.fname,a.params.path+a.fname)}},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){if(!Ext.isEmpty(a.getArgs())&&!Ext.isEmpty(a.getArgs().validatefunc))this[a.getArgs().validatefunc](a);else if(a.getArgs().fsize>1E6){a.setResult(false);Ext.UI.MessageBox.show({title:_TR("ERROR"),msg:_TR("SSH_FILE_SIZE_TOO_BIG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300})}else a.setResult(true)}}});
Ext.namespace("_s8.ReadyDR");
_s8.ReadyDR.Jobs=_._1(_9,Ext.Container,{cls:"x-backup-readydr-jobs",STATUS_IDLE:"REPLISYNC_IDLE",STATUS_RUNNING:"REPLISYNC_RUNNING",STATUS_WAKING:"REPLISYNC_WAKING",constructor:function(){_s8.ReadyDR.Jobs.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spSysManager=a.getSystemManager();this.spRepliSyncJobsManager=a.getRepliSyncSystem().getJobsManager();_a(this.spRepliSyncJobsManager,
"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.isDisabled=false},afterRender:function(){_s8.ReadyDR.Jobs.superclass.afterRender.apply(this,arguments);this.renderGrid();this.createMenu();this.createTooltip()},renderGrid:function(){var a=[{id:"icon",header:"&#160;",width:33,fixed:true,hideable:false,menuDisabled:true,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<div class="x-backup-readydr-job-icon                        <tpl if="remote == \'src\'"> remote-src</tpl>                        <tpl if="remote == \'dst\'"> remote-dst</tpl>                        <tpl if="!remote && !sourceHost"> managed-src</tpl>                        <tpl if="!remote && !!sourceHost && !destinationHost"> managed-dst</tpl>                        <tpl if="!remote && !!sourceHost && !!destinationHost"> managed-src</tpl>                        <tpl if="!enabled || !isServiceEnabled"> disabled</tpl>                    "></div>')).compile()},
{header:_TR("NAME"),width:100,dataIndex:"name",renderer:{fn:this.renderNameLabel,scope:this}}],b=new Ext.XTemplate('<span class="'+this.cls+'-srcdst" ><tpl if="remote==\'src\'">'+_TR("SOURCE")+": </tpl>                    <tpl if=\"remote=='dst'\">"+_TR("DESTINATION")+': </tpl>                    {sourceHost}{sourcePath}                    <tpl if="!remote"> \u2192 </tpl>                    {destinationHost}{destinationPath}</span>');a=a.concat([{header:_TR("SOURCE")+" / "+_TR("DESTINATION"),width:260,
xtype:"templatecolumn",tpl:b.compile()},{header:_TR("SCHEDULE"),width:175,dataIndex:"schedule",renderer:{fn:this.renderSchedule,scope:this}},{id:"status",header:_TR("STATUS"),width:75,dataIndex:"status",renderer:{fn:this.renderStatusLabel,scope:this}},{header:_TR("BACKUP_DATE_LAST"),width:150,dataIndex:"statusDate"},{id:"settings",header:"&#160;",width:36,fixed:true,xtype:"templatecolumn",tpl:(new Ext.XTemplate('<tpl if="isServiceEnabled"><div class="x-frontview-icon-settings"><a></a></div></tpl>')).compile()}]);
this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true,handleMouseDown:function(c,e,f){if(!this.isSelected(e)){this.selectRow(e,f.ctrlKey||f.shiftKey);this.grid.getView().focusRow(e)}}});this.grid=new Ext.UI.GridPanel({id:"readydr-jobs-grid",uicls:"ui-fwgrid",autoHeight:true,disableScroll:true,sm:this.selModel,colModel:new Ext.grid.ColumnModel(a),store:new Ext.data.Store({data:[],reader:new Ext.data.JsonReader({idProperty:"id",fields:["id","spJob","name","sourceHost","sourcePath","destinationHost",
"destinationPath","schedule","status","statusDate","statusSpeed","statusRuntime","statusTransferred","WakingRemainingTime","lastResult","enabled","isServiceEnabled","allowExport","allowImport","remote"]})}),viewConfig:{forceFit:true,autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+_TR("READYDR_JOBS_EMPTY")+"</div>",deferEmptyText:false,getRowClass:function(c,e){var f="x-grid3-row-even";if(e%2==1)f="x-grid3-row-odd";c.data.enabled||(f+=" x-backup-readydr-disabled");
return f}},renderTo:this.el,listeners:{cellclick:function(c,e,f,g){if(c.getColumnModel().getColumnId(f)=="settings")this.isDisabled||this.showMenu(c.getView().getRow(e),g.xy)},cellcontextmenu:function(c,e,f,g){this.isDisabled||this.showMenu(null,g.xy);g.preventDefault()},mouseover:function(c){if(!this.isDisabled&&c.target&&c.target.className==this.cls+"-status-more"){c=Ext.get(c.target);var e=c.getAttribute("data-record");(e=this.grid.getStore().getById(e))&&this.showTooltip(c,e)}else if(!this.isDisabled&&
c.target&&c.target.className===this.cls+"-srcdst"){e=this.ttStatus;if(!e.target||e.target.dom!=c.target.dom)e.initTarget(c.target);e.update(c.target.innerText);e.onTagerMouseMove()}},scope:this}});a=_a(_7(_._3.BackupSubSys.BackupTab),"IExtNative").getNative();a.on("tabactivate",this.onResized,this);a.content.on("resize",this.onResized,this);Ext.EventManager.on(window,"resize",this.onResized,this)},createMenu:function(){this.itemRun=new Ext.menu.Item({text:_TR("RUN"),icon:false,
ctCls:"x-frontview-icon-run",commandName:"run",id:"readyrd-jobs-context-menu-run-btn"});this.itemStop=new Ext.menu.Item({text:_TR("CANCEL"),icon:false,ctCls:"x-frontview-icon-cancel",commandName:"cancel",id:"readyrd-jobs-context-menu-stop-btn"});this.itemLog=new Ext.menu.Item({text:_TR("HISTORY"),icon:false,ctCls:"x-frontview-icon-log",commandName:"log",id:"readyrd-jobs-context-menu-log-btn"});this.itemExport=new Ext.menu.Item({text:_TR("EXPORT"),icon:false,ctCls:"x-frontview-icon-export",commandName:"export",
id:"readyrd-keys-context-menu-export-btn"});this.itemImport=new Ext.menu.Item({text:_TR("IMPORT"),icon:false,ctCls:"x-frontview-icon-import",commandName:"import",id:"readyrd-keys-context-menu-import-btn"});this.itemDelete=new Ext.menu.Item({text:_TR("DELETE"),icon:false,ctCls:"x-frontview-icon-delete",commandName:"delete",id:"readyrd-jobs-context-menu-delete-btn"});this.itemEnable=new Ext.menu.Item({text:_TR("ENABLE"),icon:false,ctCls:"x-frontview-icon-plus",commandName:"enable",id:"readyrd-jobs-context-menu-enable-btn"});
this.itemDisable=new Ext.menu.Item({text:_TR("DISABLE"),icon:false,ctCls:"x-frontview-icon-minus",commandName:"disable",id:"readyrd-jobs-context-menu-disable-btn"});this.itemSettings=new Ext.menu.Item({text:_TR("SETTINGS"),icon:false,ctCls:"x-frontview-icon-settings",commandName:"settings",id:"readyrd-jobs-context-menu-settings-btn"});this.menu=new Ext.UI.Menu({id:"readyrd-jobs-context-menu",cls:"x-backup-jobs-menu",defaultAlign:"tr-br?",enableScrolling:false,items:[this.itemRun,this.itemStop,this.itemLog,
this.itemExport,this.itemImport,this.itemDelete,this.itemEnable,this.itemDisable,this.itemSettings],listeners:{itemclick:function(a){switch(a.commandName){case "run":this.onStartClick();break;case "cancel":this.onStopClick();break;case "log":this.onLogClick();break;case "export":this.onExportClick();break;case "import":this.onImportClick();break;case "delete":this.onRemoveClick();break;case "enable":this.onEnabledChange(true);break;case "disable":this.onEnabledChange(false);break;case "settings":this.onSettingsChange(false);
break}},scope:this}})},showMenu:function(a,b){var c=this.selModel.getSelected();if(c){c.get("spJob");var e=c.get("status")==this.STATUS_RUNNING,f=c.get("enabled"),g=!!c.get("remote");this.itemRun.setVisible(!e&&!g);this.itemStop.setVisible(e&&!g);this.itemEnable.setVisible(!f&&!g);this.itemDisable.setVisible(f&&!g);this.itemExport.setVisible(c.get("allowExport"));this.itemImport.setVisible(c.get("allowImport"));this.itemLog.setVisible(!g);this.itemSettings.setVisible(!g);b?this.menu.showAt(b):this.menu.show(a)}},
createTooltip:function(){this.ttStatus=new Ext.UI.ToolTip(null,{html:"",delay:0,width:200,autowidth:false});this.ttStatus.on("hide",function(){this.ttStatus.destroyEvents()},this)},showTooltip:function(a,b){var c=this.ttStatus;if(!c.target||c.target.dom!=a.dom)c.initTarget(a);if(b.get("status")==this.STATUS_RUNNING){a=String.format(_TR("READYDR_JOBS_SPEED"),this.convertKBPerSecToMBPerSec(b.get("statusSpeed")))+"<br />"+String.format(_TR("READYDR_JOBS_RUNTIME"),this.convertSecsToHumanReadableStr(b.get("statusRuntime")))+
"<br />"+String.format(_TR("READYDR_JOBS_TRANSFERRED"),this.convertKBPerSecToMBPerSec(b.get("statusTransferred")));c.update(a);c.onTagerMouseMove()}},convertSecsToHumanReadableStr:function(a){var b=parseInt(a/3600),c=parseInt(a/60)%60;a=a%60;var e=function(f){return f>=10?f:"0"+f};return String.format(_TR("FORMAT_HH_MM_SS"),e(b),e(c),e(a))},convertKBPerSecToMBPerSec:function(a){return _s10.Utils.fileSize(a*1024)},renderNameLabel:function(a){return Ext.util.Format.htmlEncode(a)},renderSchedule:function(a,
b,c){return c.get("remote")=="dst"?"<small>"+_TR("READYDR_SCHEDULE_UNAVAILABLE")+"</small>":c.get("remote")=="src"?_TR("READYDR_SCHEDULE_PERIODIC"):a?_TR("READYDR_SCHEDULE_PERIODIC"):_TR("READYDR_SCHEDULE_INSTANT")},formatSeconds:function(a){var b=parseInt(a);a=0;if(b>60){a=parseInt(b/60);b=parseInt(b%60);if(a>60){parseInt(a/60);a=parseInt(a%60)}}b=""+parseInt(b)+_TR("BACKUP_STATUS__WOL_WAKING_S");if(a>0)b=""+parseInt(a)+_TR("BACKUP_STATUS__WOL_WAKING_M")+" "+b;return b},renderStatusLabel:function(a,
b,c){if(c.get("isServiceEnabled")){var e="x-frontview-led-";e+=c.get("lastResult")=="0"||a==this.STATUS_RUNNING?"green":"red";b.css=this.cls+"-status-led "+e}e="";switch(a){case this.STATUS_IDLE:e=_TR("READYDR_STATUS_IDLE");break;case this.STATUS_RUNNING:e='<span class="'+this.cls+'-status-more" data-record="'+c.get("id")+'">'+_TR("READYDR_STATUS_RUNNING")+"</span>";break;case this.STATUS_WAKING:e=String.format(_TR("BACKUP_STATUS__WOL_WAKING"),this.formatSeconds(c.data.WakingRemainingTime));this.mask.hideProgress();
break}if(!c.data.enabled){e="Disabled";b.css=this.cls+"-status-led x-frontview-led-grey"}return e},onResized:function(){var a=this.el.getWidth();a>400||(a=400);this.grid.setWidth(a)},onStartClick:function(){this.spRepliSyncJobsManager.StartJob("backuptab-readydr-start-job",this.grid.getSelectionModel().getSelected().get("id"))},onStopClick:function(){this.spRepliSyncJobsManager.CancelJob("backuptab-readydr-stop-job",this.grid.getSelectionModel().getSelected().get("id"))},onLogClick:function(){var a=
this.grid.getSelectionModel().getSelected();if(!this.wndLog)this.wndLog=new _s8.ReadyDR.Jobs.Log;this.wndLog.show();this.wndLog.loadArgs(a.get("name"))},onExportClick:function(){var a=this.grid.getSelectionModel().getSelected();if(!this.wndExport)this.wndExport=new _s8.ReadyDR.Jobs.Export;this.wndExport.show();this.wndExport.loadArgs(a.get("name"))},onImportClick:function(){var a=this.grid.getSelectionModel().getSelected();if(!this.wndImport)this.wndImport=new _s8.ReadyDR.Jobs.Import;
this.wndImport.show();this.wndImport.loadArgs(a.get("name"))},onRemoveClick:function(){var a=this.grid.getSelectionModel().getSelected();Ext.UI.MessageBox.confirm({title:_TR("CONFIRMATION"),msg:String.format(_TR("WARN_DELETION"),Ext.util.Format.htmlEncode(a.get("name"))),fn:function(b){b=="yes"&&this.spRepliSyncJobsManager.RemoveJob("backuptab-readydr-remove-job",a.get("id"))},scope:this})},onEnabledChange:function(a){var b=this.grid.getSelectionModel().getSelected().get("spJob");b.putEnabled(a?"1":
"0");this.spRepliSyncJobsManager.CommitJob("backuptab-readydr-commit-job",b)},onSettingsChange:function(){var a=this.grid.getSelectionModel().getSelected();if(!this.wndEdit)this.wndEdit=new _s8.ReadyDR.Jobs.Edit;this.wndEdit.show();this.wndEdit.loadArgs(a.get("spJob"))},onTabDeactivate:function(){clearTimeout(this.procIdPulling);this.deactivatedPulling=true},refresh:function(){this.deactivatedPulling=false;clearTimeout(this.procIdPulling);this.isJobsUpdated=this.isStatusesUpdated=false;
this.spShareManager.updateShares("backuptab-readydr-update-shares");this.spShareManager.updateLUNS("backuptab-readydr-update-luns");this.spRepliSyncJobsManager.UpdateJobs("backuptab-readydr-update-jobs");this.spRepliSyncJobsManager.UpdateStatuses("backuptab-readydr-update-jobstatuses")},fetchStatuses:function(){!this.isDisabled&&this.grid.getStore().getCount()&&this.spRepliSyncJobsManager.UpdateStatuses("backuptab-readydr-update-jobstatuses")},setDisabled:function(a){this.isDisabled=a},populateJobs:function(){if(this.isJobsUpdated&&
this.isStatusesUpdated){var a=this.spRepliSyncJobsManager.getJobs(),b=[];a!=_4&&_.each(a,function(c){var e="";if(c.getLastRunningTimestamp()!="0")e=_.formatDateTime(new Date(c.getLastRunningTime()));var f=c.getName(),g=this.spRepliSyncJobsManager.getStatusByJobName(f),h=!c.getDestHost()&&!c.getDestPath(),j=!c.getSourceHost()&&!c.getSourcePath();c={id:c.getId(),spJob:c,name:f,enabled:c.getEnabled()=="1",sourceHost:c.getSourceHost(),sourcePath:c.getSourcePath(),destinationHost:c.getDestHost(),
destinationPath:c.getDestPath(),schedule:c.getSchedule(),statusDate:!this.isDisabled?e:"",lastResult:c.getLastResult(),isServiceEnabled:!this.isDisabled,remote:h?"src":j?"dst":"",allowImport:!!c.getSourceHost()||!c.getSourcePath(),allowExport:!!c.getDestHost()||!c.getDestPath()};if(g&&g!=_4){c.status=g.getStatus();c.statusSpeed=g.getSpeed();c.statusRuntime=g.getRuntime();c.statusTransferred=g.getTransferred();c.WakingRemainingTime=g.getWakingRemainingTime()}b.push(c)},this);this.grid.getStore().loadData(b);
this.onResized()}},IRepliSyncJobsManagerEvents:{_o1:function(a,b){if(b=="backuptab-readydr-update-jobs"||b=="backuptab-readydr-add-job"||b=="backuptab-readydr-commit-job"||b=="backuptab-readydr-start-job"||b=="backuptab-readydr-stop-job"||b=="backuptab-readydr-remove-job")this.mask.showProgress()},_o3:function(a,b,c){var e;if(c=="backuptab-readydr-update-jobs"){this.isJobsUpdated=true;this.populateJobs();this.mask.hideProgress();if(a!==_5)e=_a(b,"_io").getLastNMLError()}else if(c==
"backuptab-readydr-add-job"||c=="backuptab-readydr-commit-job"||c=="backuptab-readydr-start-job"||c=="backuptab-readydr-stop-job"||c=="backuptab-readydr-remove-job"){this.refresh();this.mask.hideProgress();if(a!==_5)e=_a(b,"_io").getLastNMLError()}else if(c=="backuptab-readydr-update-jobstatuses"){this.isStatusesUpdated=true;this.populateJobs();if(!this.deactivatedPulling){clearTimeout(this.procIdPulling);this.procIdPulling=this.fetchStatuses.defer(5E3,this)}}e&&Ext.UI.MessageBox.error({title:_TR("READYDR"),
msg:_TR(e.getErrorCode())+"<br >"+e.getErrorDetails()})}},_i3b:{_o1:function(a,b){if(b=="backuptab-readydr-update-shares"||b=="sync-update-shares"||b=="sync-update-luns"||b=="backuptab-readydr-update-luns")this.mask.showProgress()},_o3:function(a,b,c){if(c=="backuptab-readydr-update-shares"||c=="sync-update-shares"||c=="sync-update-luns"||c=="backuptab-readydr-update-luns")this.mask.hideProgress()}}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.GenSettings=_._1(_9,Ext.Container,{cls:"x-backups-readydr-jobs-gensettings",constructor:function(){this.html='<table><tr><td id="'+(this.lblNameId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr></table>';_s8.ReadyDR.Jobs.GenSettings.superclass.constructor.apply(this,arguments);this.spRepliSyncJobsManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getRepliSyncSystem().getJobsManager()},
afterRender:function(){_s8.ReadyDR.Jobs.GenSettings.superclass.afterRender.apply(this,arguments);this.lblName=Ext.get(this.lblNameId);this.tfName=new Ext.UI.TextField({width:200,renderTo:this.tfNameId})},loadArgs:function(a){this.reset();if(a){this.tfName.setValue(a.getName());this.tfName.setReadOnly(true)}else this.tfName.setReadOnly(false);this.spJob=a},reset:function(){this.lblName.removeClass("x-bac-label-error");this.tfName.setValue("")},validate:function(){var a=false,b=this.tfName.getValue().trim(),
c;this.lblName.removeClass("x-bac-label-error");if(!b||b.indexOf(":")>-1){this.lblName.addClass("x-bac-label-error");a=true}else{b=b.toLowerCase();for(var e=this.spRepliSyncJobsManager.getJobs(),f=0;f<e.length;++f){c=e[f];if(c.getName().toLowerCase()==b&&(!this.spJob||c.getId()!=this.spJob.getId())){this.lblName.addClass("x-bac-label-error");a=true;break}}}return!a},doApply:function(a){a.putName(this.tfName.getValue().trim())}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.SrcDst=_._1(_9,Ext.Container,{cls:"x-backups-readydr-jobs-srcdst",type:"",updatesCount:0,constructor:function(){this.html='<div id="'+(this.scLocationId=Ext.id())+'"></div><table style="margin: 0 auto;"><tr id="'+(this.elRemoteId=Ext.id())+'"><td id="'+(this.lblHostId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("HOST")+':</td><td id="'+(this.tfHostId=Ext.id())+'"></td><td id="'+(this.bBrowseLanId=Ext.id())+'"></td></tr><tr><td id="'+(this.lblPortId=Ext.id())+
'" class="x-bac-dlglabel">'+_TR("PORT")+':</td><td id="'+(this.tfPortId=Ext.id())+'" ></td><td id="'+(this.tbPortId=Ext.id())+'" style="padding-left:6px;"></td></tr><tr><td id="'+(this.lblPathId=Ext.id())+'" class="x-bac-dlglabel"></td><td id="'+(this.tfPathId=Ext.id())+'"></td><td id="'+(this.bBrowseId=Ext.id())+'"></td></tr></table>';_s8.ReadyDR.Jobs.SrcDst.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spRepliSyncKeysManager=
a.getRepliSyncSystem().getKeysManager();this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.isFetching=false;this.wndBrowse=new _s8.ReadyDR.Browse;this.wndBrowse.setType(this.type);this.wndBrowse.on("select",this.onPathSelected,this);this.wndBrowseLan=new _s8.ReadyDR.BrowseLan;this.wndBrowseLan.on("select",this.onHostSelected,this)},afterRender:function(){_s8.ReadyDR.Jobs.SrcDst.superclass.afterRender.apply(this,
arguments);this.sbLocal=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("BACKUP_LOCAL"),value:"local",width:120});this.sbRemote=new Ext.UI.SegmentedButton({xtype:"uisegmentedbutton",text:_TR("BACKUP_REMOTE"),value:"remote",width:120});this.scLocation=new Ext.UI.SegmentedControl({items:[this.sbLocal,this.sbRemote],style:"margin: 0 auto 20px;",renderTo:this.scLocationId,listeners:{buttonchecked:this.onLocationTabItemSelect,scope:this}});this.elRemote=Ext.get(this.elRemoteId);this.lblHost=
Ext.get(this.lblHostId);this.tfHost=new Ext.UI.TextField({width:200,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_HOST")},renderTo:this.tfHostId,listeners:{scope:this}});this.lblPath=Ext.get(this.lblPathId);this.lblPath.update(_TR(this.type=="src"?"READYDR_SHARE_NAME":"READYDR_SHARE_NAME_RDR_ONLY")+":");this.tfPath=new Ext.UI.TextField({width:200,readOnly:true,displayField:"path",renderTo:this.tfPathId});this.bBrowse=new Ext.UI.Button({width:80,text:_TR("BROWSE"),handler:this.onBrowseClick,scope:this,
renderTo:this.bBrowseId});this.bBrowseLan=new Ext.UI.Button({width:80,text:_TR("BROWSE"),handler:this.onBrowseLanClick,scope:this,renderTo:this.bBrowseLanId});this.lblPort=Ext.get(this.lblPortId);this.tfPort=new Ext.UI.TextField({width:200,renderTo:this.tfPortId,value:5253});this.tbPort=new Ext.UI.RoundButton({cls:"x-frontview-btn-info-mark"});this.tbPort.render(this.tbPortId);this.ttPort=new Ext.UI.ToolTip(this.tbPort.el,{cls:"x-backups-readydr-jobs-tooltip",autowidth:false,autoheight:false,scroller:false,
html:_TR("READYDR_PORT_INFO")});var a=this.type=="src";Ext.get(this.tfPortId).parent("tr").setDisplayed(!a);this.maskProgress=new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},onLocationTabItemSelect:function(a){a=a.value=="remote";this.elRemote.setDisplayed(a);Ext.get(this.tfPortId).parent("tr").setDisplayed(a);this.lblPath.removeClass("x-bac-label-error");this.tfPath.reset()},onBrowseClick:function(){if(this.sbLocal.checked||this.validateHost()){this.wndBrowse.show();
this.wndBrowse.loadArgs(this.type,this.sbLocal.checked?"":this.tfHost.getValue(),this.tfPath.getValue(),this.tfPort.getValue())}},onBrowseLanClick:function(){this.wndBrowseLan.show();this.wndBrowseLan.loadArgs(this.tfHost.getValue())},onPathSelected:function(a,b,c){this.tfPath.setValue(b);if(this.type=="dst"){b=_a(c,"ISimpleShare");a=null;if(b&&b!=_4)a=b.getUsedBy();if(a&&a!=_4&&a.length){b=a.indexOf(":")+1;a=a.substr(b);Ext.UI.MessageBox.show({title:_TR("WARNING"),msg:String.format(_TR("READYDR_SHARE_INUSE_WARNING"),
Ext.util.Format.htmlEncode(a)),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300})}}},onHostSelected:function(a){this.tfHost.setValue(a.Hostname)},onAddKeyClick:function(){_s8.ReadyDR.Instance.ImportKey(this)},loadArgs:function(a){var b,c;this.reset();if(a){if(this.type=="src"){b=a.getSourceHost();c=a.getSourcePath();a=a.getSourcePort()}else{b=a.getDestHost();c=a.getDestPath();a=a.getDestPort()}this.scLocation.setPressedButton(!b?0:1);this.tfHost.setValue(b);this.tfPort.setValue(a);
this.tfPath.setValue(c);this.sbLocal.disable();this.sbRemote.disable();this.tfPath.disable();this.bBrowse.disable();Ext.get(this.bBrowseLanId).setDisplayed(false)}},reset:function(){this.lblHost.removeClass("x-bac-label-error");this.tfHost.reset();this.lblPath.removeClass("x-bac-label-error");this.tfPath.reset();this.tfPort.reset();this.sbLocal.enable();this.sbRemote.enable();this.tfPath.enable();this.bBrowse.enable();this.scLocation.setPressedButton(this.type=="src"?0:1)},validate:function(a,b){var c=
true;if(this.sbRemote.checked)this.validateHost()||(c=false);this.lblPath.removeClass("x-bac-label-error");if(!this.tfPath.getValue()||this.getLocation()=="local"&&a=="local"&&this.tfPath.getValue()==b){this.lblPath.addClass("x-bac-label-error");c=false}this.lblPort.removeClass("x-bac-label-error");if(!_.isValidPort(this.tfPort.getValue())){this.lblPort.addClass("x-bac-label-error");c=false}return c},validateHost:function(){var a=true;this.lblHost.removeClass("x-bac-label-error");this.setTip(this.tfHost.tooltip,
false);var b=this.tfHost.getValue();if(!_.isValidDomainName(b)&&!_.isValidIPAddress(b)&&!_.Utils.isValidIPv6Address(b)){this.lblHost.addClass("x-bac-label-error");this.setTip(this.tfHost.tooltip,true);a=false}return a},setTip:function(a,b){if(a)a.enabled=b},getLocation:function(){return this.sbLocal.checked?"local":"remote"},getPath:function(){return this.tfPath.getValue()},getShare:function(){var a=this.tfPath.getValue(),b,c=this.sbLocal.checked?this.spShareManager.getShares().concat(this.spShareManager.getLUNS()):
null;c&&c!=_4&&_.each(c,function(e){var f=null;if((f=_a(e,"_i38"))&&f!=_4&&f.getPath()==a){b=f;return false}else if((f=_a(e,"_i1j"))&&f!=_4&&String.format("/{0}/{1}",f.getVolumeId(),f.getName())==a){b=f;return false}});return b},doApply:function(a){if(this.sbLocal.checked)if(this.type=="src"){a.putSourceHost("");a.putSourcePath(this.tfPath.getValue())}else{a.putDestHost("");a.putDestPath(this.tfPath.getValue())}else if(this.type=="src"){a.putSourceHost(this.tfHost.getValue());
a.putSourcePath(this.tfPath.getValue());a.putSourcePort(this.tfPort.getValue())}else{a.putDestHost(this.tfHost.getValue());a.putDestPath(this.tfPath.getValue());a.putDestPort(this.tfPort.getValue())}},showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},IPromptWindowEvents:{OnClosing:function(a){a=a.getArgs();this.spRepliSyncKeysManager.AddKey("backuptab-readydr-add-key",a.fname,
a.params.path+a.fname)},OnClosed:function(a){_a(a,"_i1").Unadvise(this);return _5},OnValidate:function(a){if(a.getArgs().fsize>1E6){a.setResult(false);Ext.UI.MessageBox.show({title:_TR("ERROR"),msg:_TR("SSH_FILE_SIZE_TOO_BIG"),buttons:Ext.Msg.OK,icon:Ext.MessageBox.WARNING,height:170,width:300})}else a.setResult(true)}}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Login=_._1(Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,updatesCount:0,constructor:function(){this.title=_TR("BACKUP_READYDR_ENHANCEMENTS_CONNECT_WINDOWTITLE");this.html=this.getHtml();this.fbar=this.getFooter();_s8.ReadyDR.Jobs.Login.superclass.constructor.apply(this,arguments)},initComponent:function(){this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager();
_a(this.spShareManager,"_i1").Advise(this);_s8.ReadyDR.Jobs.Login.superclass.initComponent.apply(this,arguments)},getHtml:function(){return'<table cellpadding="0" cellspacing="0"><tr><td id="'+(this.lblLoginId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("LOGIN")+':</td><td id="'+(this.tfLoginId=Ext.id())+'" ></td></tr><tr><td id="'+(this.lblPasswordId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("PASSWORD")+':</td><td id="'+(this.tfPasswordId=Ext.id())+'" ></td></tr></table>'},
getFooter:function(){return["->",new Ext.UI.Button({text:_TR("BACKUP_READYDR_ENHANCEMENTS_CONNECT_BUTTONNAME"),width:100,acceptbtn:true,listeners:{click:this.onConnectClick,scope:this}}),new Ext.UI.Button({text:_TR("CANCEL"),width:100,cancelbtn:true,listeners:{click:function(){this.hide()},scope:this}})]},afterRender:function(){_s9.CloneSnapshot.superclass.afterRender.apply(this,arguments);this.lblLogin=Ext.get(this.lblLoginId);this.lblPassword=Ext.get(this.lblPasswordId);this.tfLogin=new Ext.UI.TextField({width:200,
renderTo:this.tfLoginId});this.tfPassword=new Ext.UI.TextField({width:200,inputType:"password",renderTo:this.tfPasswordId});this.maskProgress=new Ext.UI.LoadMask(document.body,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},onConnectClick:function(){if(this.validate()){var a=this.loadedArgs.host,b=this.tfLogin.getValue(),c=this.tfPassword.getValue();if(_.Utils.isValidIPv6Address(a))a="["+a+"]";this.spShareManager.updateConnectionWithLanDevices(a,b,c,"update-connection-with-landevices")}},
loadArgs:function(a){this.loadedArgs=a;this.clear()},validate:function(){var a=true;this.lblLogin.removeClass("x-bac-label-error");var b=this.tfLogin.getValue();if(_.isEmpty(b)){this.lblLogin.addClass("x-bac-label-error");a=false}this.lblPassword.removeClass("x-bac-label-error");b=this.tfPassword.getValue();if(_.isEmpty(b)){this.lblPassword.addClass("x-bac-label-error");a=false}return a},clear:function(){this.tfLogin.setValue("");this.tfPassword.setValue("");this.center()},showProgress:function(){this.updatesCount||
this.maskProgress&&this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress&&this.maskProgress.hide()},_i3b:{_o1:function(a,b){b=="update-connection-with-landevices"&&this.showProgress()},OnFailed:function(a,b,c){if(c=="update-connection-with-landevices"){this.hideProgress();Ext.UI.MessageBox.show({title:"Connect Error",msg:_TR(b.getErrorCode()),buttons:Ext.Msg.OK,icon:Ext.MessageBox.ERROR})}},_o3:function(a,
b,c){if(!a&&c=="update-connection-with-landevices"){this.hideProgress();if(this.loadedArgs){this.loadedArgs.parentWindow.bAdd.enable();this.loadedArgs.parentWindow.loadArgs(this.loadedArgs.type,this.loadedArgs.host,this.loadedArgs.path)}this.hide()}}}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Schedule=_._1(_9,Ext.Container,{cls:"x-backups-readydr-jobs-schedule",basePowerCls:"x-system-panel-power",constructor:function(){this.html=this.getHtml();_s8.ReadyDR.Jobs.Schedule.superclass.constructor.apply(this,arguments)},getHtml:function(){var a=[_TR("SU"),_TR("MO"),_TR("TU"),_TR("WE"),_TR("TH"),_TR("FR"),_TR("SA")],b=["SU","MO","TU","WE","TH","FR","SA"],c,e,f;this.sddays=[_TR("SUNDAY"),_TR("MONDAY"),_TR("TUESDAY"),_TR("WEDNESDAY"),
_TR("THURSDAY"),_TR("FRIDAY"),_TR("SATURDAY")];f=String.format('<tr><td id="{2}" class="{5}-{0}"  title="'+_TR("POWERTIMER_TIP_NIGHT1")+'" colspan="3"></td><td colspan=5></td><td id="{3}" class="{5}-{1}"   title="'+_TR("POWERTIMER_TIP_DAY")+'" colspan="3"></td><td colspan=10></td><td id="{4}" class="{5}-{0}"  title="'+_TR("POWERTIMER_TIP_NIGHT2")+'" colspan=3></td><td></td><td/></tr>',"night","day",this.elNight1Id=Ext.id(),this.elDayId=Ext.id(),this.elNight2Id=Ext.id(),this.basePowerCls);for(c=0;c<
7;c++){e=_TR("POWERTIMER_TIP_"+b[c]);f+=String.format('<tr><td class="{2}-timeday" title="{1}">{0}</td>',a[c],e,this.basePowerCls);for(e=0;e<8;e++)f+='<td class="'+this.basePowerCls+'-hour-off" ></td>';for(;e<21;e++)f+='<td class="'+this.basePowerCls+"-hour-off "+this.basePowerCls+'-hour-day" ></td>';for(;e<24;e++)f+='<td class="'+this.basePowerCls+'-hour-off" ></td>';f+="</tr>"}f+='<tr class="readydr-24hours-tr"><td class="'+this.basePowerCls+'-timeday"></td>';for(e=0;e<24;e++)f+=String.format('<td class="{1}-hours" title="{0}:00 - {0}:59">{0}</td>',
e,this.basePowerCls);f+="</tr>";f+='<tr><td colspan="25"><div style="height: 10px;">&nbsp;</div><td></tr>';f+="<tr><td></td>";f+=String.format('<td id="{0}"  class="{1}rinfo" colspan=14 ></td>',this.sdpowerinfoid=Ext.id(),this.basePowerCls);f+=String.format('<td colspan="12"><div style="display: inline-block;" ><div class="{3}-houron"></div><div class="{3}-status">{0}</div></div><div style="display: inline-block;" ><div class="{3}-houroffday"></div><div class="{3}-status">{1}</div></div><div style="display: inline-block;" ><div class="{3}-houroffnight"></div><div class="{3}-status">{2}</div></div></td>',
_TR("ON_LC"),_TR("DAY_OFF"),_TR("NIGHT_OFF"),this.basePowerCls);f+="</tr>";return f='<div id="'+(this.boxSnapSchedId=Ext.id())+'"><div class="" style="margin-bottom:8px;font-size:18px;">'+_TR("SNAPSHOT")+'</div><div style="padding-left: 20px; margin-bottom: 20px;"><div id="'+(this.elScheduleNoteId=Ext.id())+'">'+_TR("READYDR_REMOTE_SNAPSHOT_CONFIG_NOTE")+'</div><table id="'+(this.elScheduleSettingsId=Ext.id())+'"><tr><td class="x-bac-dlglabel">'+_TR("SCHEDULE")+':</td><td id="'+(this.cbScheduleId=
Ext.id())+'"></td><td id="'+(this.tbScheduleId=Ext.id())+'"  style="padding-left:6px;"></td></tr></table></div></div><div class="" style="margin-bottom: 8px;font-size:18px;">'+_TR("BACKUP")+'</div><div style="padding-left: 20px;"><table style="margin-bottom: 20px;"><tr><td class="x-bac-dlglabel">'+_TR("TYPE")+':</td><td id="'+(this.cbTypeId=Ext.id())+'"></td></tr></table><div class="x-powerpanel-timer"><div class="'+this.basePowerCls+'-body"><div id="'+(this.cbBackupTypeInstId=Ext.id())+'">'+_TR("READYDR_INSTANT_BACKUP")+
'</div><table id="'+(this.elTableDaysId=Ext.id())+'" cellpadding="0" cellspacing="1">'+f+"</table></div></div></div>"},initLable:function(){Ext.select(".readydr-24hours-tr").elements.length!=0&&$_(Ext.select(".readydr-24hours-tr").elements).forEach(function(a){a=a.children;for(var b=1,c=a.length;b<c;b++){var e=b-1,f=localStorage.getItem("enable24Hour")=="true",g="";f||(g=e>=12?" "+_TR("PM"):" "+_TR("AM"));if(!f&&e>12)e-=12;if(g==" "+_TR("AM")&&e==0)e=12;a[b].title=String.format("{0}:00{1} - {0}:59{1}",
e,g);Ext.get(a[b]).update(e+"")}})},afterRender:function(){_s8.ReadyDR.Jobs.Schedule.superclass.afterRender.apply(this,arguments);this.boxSnapSched=Ext.get(this.boxSnapSchedId);this.cbSchedule=new Ext.UI.ComboBox({width:200,forceSelection:true,editable:false,mode:"local",triggerAction:"all",multiSelect:false,store:new Ext.data.ArrayStore({fields:["id","text","checked"],data:[]}),valueField:"id",displayField:"text",value:"0",emptyText:_TR("CLOUD_DRIVE_NON_SELECTED")});this.cbSchedule.render(this.cbScheduleId);
this.cbSchedule.on("select",function(){},this);this.tbSchedule=new Ext.UI.RoundButton({cls:"x-frontview-btn-info-mark"});this.tbSchedule.render(this.tbScheduleId);this.ttSchedule=new Ext.UI.ToolTip(this.tbSchedule.el,{cls:"x-backups-readydr-jobs-tooltip",autowidth:false,autoheight:false,scroller:false,html:_TR("READYDR_SCHEDULE_INFO")});this.cbType=new Ext.UI.ComboBox({width:200,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["instant",_TR("READYDR_SCHEDULE_INSTANT")],
["periodic",_TR("READYDR_SCHEDULE_PERIODIC")]]}),valueField:"id",displayField:"text",value:"instant",renderTo:this.cbTypeId,listeners:{select:function(){this.elTableDays.setDisplayed(this.cbType.getValue()=="periodic");Ext.get(this.cbBackupTypeInstId).setDisplayed(this.cbType.getValue()!="periodic");this.initLable()},scope:this}});this.elTableDays=Ext.get(this.elTableDaysId);this.bProps=new Ext.UI.RoundButton({cls:"x-frontview-btn-settings",renderTo:this.bPropsId});this.elTableDays.on("mouseover",
function(a,b){if(this.sddrag)this.sddrag=="add"?Ext.get(b).addClass(this.basePowerCls+"-hour-on"):Ext.get(b).removeClass(this.basePowerCls+"-hour-on");a=this.sddays[b.parentNode.rowIndex-1];b=b.cellIndex-1;var c=localStorage.getItem("enable24Hour")=="true",e="";c||(e=b>=12?" "+_TR("PM"):" "+_TR("AM"));if(!c&&b>12)b-=12;if(e==" "+_TR("AM")&&b==0)b=12;Ext.get(this.sdpowerinfoid).update(String.format("{0}, {1}:00{2} - {1}:59{2}",a,b,e))},this,{delegate:"."+this.basePowerCls+"-hour-off"});this.elTableDays.on("mousedown",
function(a,b){this.sddrag=Ext.get(b).is("."+this.basePowerCls+"-hour-on")?"remove":"add";Ext.get(b).toggleClass(this.basePowerCls+"-hour-on")},this,{delegate:"."+this.basePowerCls+"-hour-off"});this.elTableDays.on("mouseup",function(){this.sddrag=null},this);this.elTableDays.on("mouseleave",function(){this.sddrag=null;Ext.get(this.sdpowerinfoid).update("")},this);this.elTableDays.on("click",function(a,b){a=false;b=Ext.get(b).next("."+this.basePowerCls+"-hour-off");if(b.is("."+this.basePowerCls+"-hour-on"))a=
true;for(;b!=null;){a?b.removeClass(""+this.basePowerCls+"-hour-on"):b.addClass(""+this.basePowerCls+"-hour-on");b=b.next("."+this.basePowerCls+"-hour-off")}},this,{delegate:"."+this.basePowerCls+"-timeday"});this.elTableDays.on("click",function(a,b){a=false;var c=this.elTableDays.dom;b=b.cellIndex;if(Ext.get(c.rows[1].cells[b]).is("."+this.basePowerCls+"-hour-on"))a=true;for(var e=1;e<8;e++)a?Ext.get(c.rows[e].cells[b]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(c.rows[e].cells[b]).addClass(this.basePowerCls+
"-hour-on")},this,{delegate:"."+this.basePowerCls+"-hours"});Ext.get(this.elDayId).on("click",function(){var a=false,b=this.elTableDays.dom;if(Ext.get(b.rows[1].cells[9]).is("."+this.basePowerCls+"-hour-on"))a=true;for(var c=1;c<8;c++)for(var e=9;e<22;e++)a?Ext.get(b.rows[c].cells[e]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(b.rows[c].cells[e]).addClass(this.basePowerCls+"-hour-on")},this);Ext.get(this.elNight1Id).on("click",function(){var a=false,b=this.elTableDays.dom;if(Ext.get(b.rows[1].cells[1]).is("."+
this.basePowerCls+"-hour-on"))a=true;for(var c=1;c<8;c++)for(var e=1;e<9;e++)a?Ext.get(b.rows[c].cells[e]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(b.rows[c].cells[e]).addClass(this.basePowerCls+"-hour-on")},this);Ext.get(this.elNight2Id).on("click",function(){var a=false,b=this.elTableDays.dom;if(Ext.get(b.rows[1].cells[22]).is("."+this.basePowerCls+"-hour-on"))a=true;for(var c=1;c<8;c++)for(var e=22;e<25;e++)a?Ext.get(b.rows[c].cells[e]).removeClass(this.basePowerCls+"-hour-on"):Ext.get(b.rows[c].cells[e]).addClass(this.basePowerCls+
"-hour-on")},this)},onShow:function(){_s8.ReadyDR.Jobs.Schedule.superclass.onShow.apply(this,arguments);if(this.srcLocation=="local"){Ext.get(this.elScheduleSettingsId).setDisplayed(true);Ext.get(this.elScheduleNoteId).setDisplayed(false);this.cbType.setDisabled(false)}else{Ext.get(this.elScheduleSettingsId).setDisplayed(false);Ext.get(this.elScheduleNoteId).setDisplayed(true);this.cbType.setValue("periodic");this.cbType.setDisabled(true);this.elTableDays.setDisplayed(true);Ext.get(this.cbBackupTypeInstId).setDisplayed(false)}this.boxSnapSched.setDisplayed(true);
if(this.srcLocation=="local"&&this.share&&this.share!=_4){this.cbSchedule.getStore().loadData([]);var a=[["hourly",_TR("HOURLY"),false],["daily",_TR("DAILY"),false],["weekly",_TR("WEEKLY"),false]],b=this.share.getCustomSnapshotManagement(),c=this.share.getSnapshotScheduleInterval(),e=this.share.getEnableProtection();if(b)a=[["custom",_TR("CUSTOM"),false]].concat(a);else if(!e||c.length===0)a=[["never",_TR("NEVER"),false]].concat(a);this.cbSchedule.getStore().loadData(a);this.cbSchedule.setValue(b?
"custom":e&&c.length>0?c:"never");a=this.share.isReadyDRShare();a!=_3&&a!=_4&&this.boxSnapSched.setDisplayed(!a)}this.initLable()},loadArgs:function(a){this.reset(false);if(a)if(a=a.getSchedule()){Ext.get(this.cbBackupTypeInstId).setDisplayed(false);this.cbType.setValue("periodic");this.elTableDays.setDisplayed(true);for(var b=0;b<7;b++)for(var c=0;c<24;c++)a[b*24+c]=="1"&&Ext.get(this.elTableDays.dom.rows[b+1].cells[c+1]).addClass(this.basePowerCls+"-hour-on")}else{Ext.get(this.cbBackupTypeInstId).setDisplayed(true);
this.cbType.setValue("instant")}},reset:function(a){this.boxSnapSched.setDisplayed(true);this.cbType.reset();this.cbSchedule.reset();this.elTableDays.setDisplayed(false);for(var b=0;b<7;b++)for(var c=0;c<24;c++)a?Ext.get(this.elTableDays.dom.rows[b+1].cells[c+1]).addClass(this.basePowerCls+"-hour-on"):Ext.get(this.elTableDays.dom.rows[b+1].cells[c+1]).removeClass(this.basePowerCls+"-hour-on")},validate:function(){return true},putShare:function(a){var b=_a(a,"_i38");a=_a(a,"_i1j");
this.share=b&&b!=_4?b:a&&a!=_4?a:null},putSourceLocation:function(a){this.srcLocation=a},putDestinationLocation:function(a){this.dstLocation=a},doApply:function(a){var b;if(this.cbType.getValue()=="periodic"){b=[];for(var c=0;c<7;c++)for(var e=0;e<24;e++)b.push(Ext.get(this.elTableDays.dom.rows[c+1].cells[e+1]).hasClass(this.basePowerCls+"-hour-on")?1:0);b=b.join("")}else b="";a.putSchedule(b);a=this.cbSchedule.getValue();if(this.share&&a&&a!=="custom"){a==="never"?this.share.putEnableProtection(false):
this.share.putEnableProtection(true);this.share.putSnapshotScheduleInterval(a);this.share.putCustomSnapshotManagement(false)}}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Options=_._1(_9,Ext.Container,{cls:"x-backups-readydr-jobs-options",type:"",constructor:function(a){this.html='<table><tr><td id="'+(this.lblCompletionSendId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("BACKUP_READYDR_ENHANCEMENTS_ONCOMPLETIONSEND")+':</td><td id="'+(this.cbCompletionSendId=Ext.id())+'"></td></tr><tr><td id="'+(this.lblBandwidthId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("READYDR_BANDWIDTH")+" ("+_TR("MB_PS")+'):</td><td id="'+(this.tfBandwidthId=
Ext.id())+'"></td></tr><tr><td class="x-bac-dlglabel">'+_TR("COMPRESSION")+':</td><td id="'+(this.cbComressionId=Ext.id())+'" colspan="2"></td></tr><tr><td class="x-bac-dlglabel">'+_TR("READYDR_ENCRYPT")+':</td><td id="'+(this.booEncryptId=Ext.id())+'" colspan="2"></td></tr><tr id="'+(this.wakeOnTrId=Ext.id())+'"><td id="'+(this.wakeOnLblId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("BACKUP_WAKE_ON_LAN_BEFORE_BACKUP")+_TR("COLON")+'</td><td id="'+(this.wakeOnId=Ext.id())+'"></td></tr><tr id="'+(this.spnWaitTrId=
Ext.id())+'"><td class="x-bac-label">'+_TR("BACKUP_TIME_TO_WAIT")+_TR("COLON")+'</td><td><div style="float:left" id="'+(this.spnWaitId=Ext.id())+'"></div><div style="float:left" id="'+(this.spnWaitHelpId=Ext.id())+'"></div></td></tr>'+(a.type=="create"?'<tr id="'+(this.exportSeedId=Ext.id())+'"><td class="x-bac-dlglabel">'+_TR("READYDR_EXPORT_SEED")+':</td><td colspan="2"><table><tr><td id="'+(this.cbExportId=Ext.id())+'"></td><td id="'+(this.rbExportSeedTooltipId=Ext.id())+'" style="padding-left:6px;"></td></tr></table></td></tr>':
"")+"</table>";_s8.ReadyDR.Jobs.Options.superclass.constructor.apply(this,arguments)},afterRender:function(){_s8.ReadyDR.Jobs.Options.superclass.afterRender.apply(this,arguments);if(this.type=="create"){this.boxExportSeed=Ext.get(this.exportSeedId);this.boxExportSeed.setVisible(false)}this.lblBandwidth=Ext.get(this.lblBandwidthId);this.tfBandwidth=new Ext.UI.TextField({width:200,maskRe:/[0-9]/,enableKeyEvents:true,renderTo:this.tfBandwidthId});_.initElePHEvent(this.tfBandwidth,
_TR("READYDR_UNLIMITED"));this.cbCompletionSend=new Ext.UI.ComboBox({width:200,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["0",_TR("READYDR_COMPLETION_ERROR_ONLY")],["1",_TR("READYDR_COMPLETION_STATUS_ERROR")]]}),valueField:"id",displayField:"text",value:"0",renderTo:this.cbCompletionSendId});this.cbCompression=new Ext.UI.ComboBox({width:200,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","text"],
data:[["9",_TR("READYDR_COMPRESSION_BETTER")],["1",_TR("READYDR_COMPRESSION_FASTER")],["0",_TR("READYDR_COMPRESSION_DISABLED")]]}),valueField:"id",displayField:"text",value:"0",renderTo:this.cbComressionId});this.booEncrypt=new Ext.UI.ButtonOnOff({textOn:_TR("ON_LC"),textOff:_TR("OFF_LC"),renderTo:this.booEncryptId});this.wakeOnLbl=Ext.get(this.wakeOnLblId);this.wakeOn=new Ext.UI.TextField({width:200,renderTo:this.wakeOnId,tooltipCfg:{html:_TR("BACKUP_INSPECTOR_ERRORTIP_MAC_ADDRESS")},listeners:{change:this.onWakeOnChange,
scope:this}});this.spnWait=new Ext.UI.SpinnerField({width:48,minValue:1,maxValue:59,selectOnFocus:true,renderTo:this.spnWaitId});new Ext.UI.RoundButton({cls:" x-frontview-btn-info",style:"margin-left: 5px;",renderTo:this.spnWaitHelpId,listeners:{afterrender:function(b){new Ext.UI.ToolTip(b.el,{width:230,html:_TR("BACKUP_TIME_TO_WAIT_TOOLTIP")})}}});this.spnWait.setDisabled(true);this.spnWait.setValue(0);if(this.type=="create"){this.cbExportSeed=new Ext.UI.Checkbox({boxLabel:"",renderTo:this.cbExportId});
var a=new Ext.UI.RoundButton({cls:"x-frontview-btn-info-mark",renderTo:this.rbExportSeedTooltipId});this.ttExportSeed=new Ext.UI.ToolTip(a.el,{html:_TR("READYDR_EXPORT_SEED_DESC")})}},isValidMacAddress:function(){this.wakeOnLbl.removeClass("x-bac-label-error");this.wakeOn.tooltip.enabled=false;var a=this.wakeOn.getValue();if(a=="")return true;if(!/[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}/.test(a)){this.wakeOnLbl.addClass("x-bac-label-error");this.wakeOn.tooltip.enabled=
true;return false}return true},onWakeOnChange:function(a,b){if(b!=""){this.spnWait.setDisabled(false);this.spnWait.getValue()==0&&this.spnWait.setValue(1)}else{this.spnWait.setDisabled(true);this.spnWait.setValue(0)}},onShow:function(){_s8.ReadyDR.Jobs.Options.superclass.onShow.apply(this,arguments);this.cbCompression.setDisabled(this.srcLocation=="local"&&this.dstLocation=="local");this.booEncrypt.setDisabled(this.srcLocation=="local"&&this.dstLocation=="local");this.type=="create"&&
this.showExportSeed(this.srcLocation,this.dstLocation);Ext.get(this.wakeOnTrId).setDisplayed(!(this.srcLocation=="local"&&this.dstLocation=="local"));Ext.get(this.spnWaitTrId).setDisplayed(!(this.srcLocation=="local"&&this.dstLocation=="local"))},loadArgs:function(a){this.reset();if(a){this.cbCompletionSend.setValue(a.getCompletionSend());var b=a.getBwLimit();if(b!="0"&&b!=""){b/=1024;this.tfBandwidth.setValue(b)}this.cbCompression.setValue(a.getCompress());this.booEncrypt.setValue(a.getEncrypt()!=
"1");b=a.getWolAddress();a=a.getTimeToWait();this.wakeOn.setValue(b);if(b!=""){this.spnWait.setDisabled(false);this.spnWait.setValue(a)}else{this.spnWait.setDisabled(true);this.spnWait.setValue(0)}}},reset:function(){this.lblBandwidth.removeClass("x-bac-label-error");this.tfBandwidth.reset();_.initElePHEvent(this.tfBandwidth,_TR("READYDR_UNLIMITED"));this.cbCompression.reset();this.booEncrypt.setValue(true);this.type=="create"&&this.cbExportSeed.reset();this.wakeOn.setValue("");this.spnWait.setDisabled(true);
this.spnWait.setValue(0)},validate:function(){return this.isValidMacAddress()},putShare:function(){},putSourceLocation:function(a){this.srcLocation=a},putDestinationLocation:function(a){this.dstLocation=a},doApply:function(a){a.putCompletionSend(this.cbCompletionSend.getValue());a.putCompress(this.cbCompression.getValue());var b=this.tfBandwidth.getValue();if(b=="0"||b=="")a.putBwLimit("0");else{b*=1024;a.putBwLimit(b)}a.putEncrypt(this.booEncrypt.isOff()?"0":"1");a.putWolAddress(this.wakeOn.getValue());
a.putTimeToWait(this.spnWait.getValue());if(this.type=="create")a.putEnabled(this.cbExportSeed.getValue()?"0":"1")},showExportSeed:function(a,b){a=="local"&&b=="remote"?this.boxExportSeed.setVisible(true):this.boxExportSeed.setVisible(false)}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Create=_._1(_9,Ext.UI.Window,{modal:true,width:1E3,height:620,resizable:false,minimizable:false,maximizable:false,cls:"x-backups-readydr-jobs-create",constructor:function(){this.title=_TR("READYDR_JOBS_CREATE");this.fbar=this.getFooter();_s8.ReadyDR.Jobs.Create.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spRepliSyncJobsManager=a.getRepliSyncSystem().getJobsManager();
this.spShareManager=a.getShareManager()},getFooter:function(){this.bNext=new Ext.UI.Button({id:"readydr-jobs-create-next-btn",text:_TR("NEXT"),width:100,acceptbtn:true,handler:this.onNextClicked,scope:this});this.bCancel=new Ext.UI.Button({id:"readydr-jobs-create-cancel-btn",text:_TR("CANCEL"),width:100,handler:this.onCancelClick,scope:this});this.bBack=new Ext.UI.Button({id:"readydr-jobs-create-back-btn",text:_TR("BACK"),hidden:true,width:100,handler:this.onBackClick,scope:this});this.bFinish=new Ext.UI.Button({id:"readydr-jobs-create-finish-btn",
text:_TR("FINISH"),width:100,hidden:true,acceptbtn:true,handler:this.onFinishClick,scope:this});return["->",this.bNext,this.bCancel,this.bBack,this.bFinish]},afterRender:function(){_s8.ReadyDR.Jobs.Create.superclass.afterRender.apply(this,arguments);this.cmpStep1=new _s8.ReadyDR.Jobs.Create.Step1({renderTo:this.body});this.cmpStep2=new _s8.ReadyDR.Jobs.Create.Step2({renderTo:this.body});ScrollManager.reg(this.body.dom,ScrollManager.VERTICAL)},onShow:function(){_s8.ReadyDR.Jobs.Create.superclass.onShow.apply(this,
arguments);this.reset();this.center()},showButtons:function(a){if(a==1){this.bNext.show();this.bCancel.show();this.bBack.hide();this.bFinish.hide()}else{this.bNext.hide();this.bCancel.hide();this.bBack.show();this.bFinish.show()}},onNextClicked:function(){if(this.cmpStep1.validate()){this.cmpStep2.putShare(this.cmpStep1.getShare());this.cmpStep2.putSourceLocation(this.cmpStep1.getSourceLocation());this.cmpStep2.putDestinationLocation(this.cmpStep1.getDestinationLocation());this.cmpStep2.show();this.cmpStep1.hide();
this.showButtons(2)}},onCancelClick:function(){this.hide()},onBackClick:function(){this.cmpStep2.hide();this.cmpStep1.show();this.showButtons(1)},finishFun:function(){if(this.cmpStep2.validate()){var a=this.spRepliSyncJobsManager.createJob();this.cmpStep1.doApply(a);this.cmpStep2.doApply(a);this.spRepliSyncJobsManager.AddJob("backuptab-readydr-add-job",a);if(this.cmpStep1.getSourceLocation()=="local"){a=null;if(a=_a(this.cmpStep1.getShare(),"_i38"))this.spShareManager.commitShare(a,"readydr_commit_share");
else if(a=_a(this.cmpStep1.getShare(),"_i1j"))this.spShareManager.commitLUN(a,"readydr_commit_share")}this.hide()}},onFinishClick:function(){this.cmpStep2.cmpSchedule.cbSchedule.getValue()=="never"?Ext.UI.MessageBox.show({title:_TR("READYDR_JOBS_CREATE_SNAPSHOT_SCHEDULE_WARNING_TITLE"),msg:_TR("READYDR_JOBS_CREATE_SNAPSHOT_SCHEDULE_WARNING_MESSAGE"),buttons:Ext.Msg.OKCANCEL,icon:Ext.MessageBox.WARNING,fn:function(a){a=="ok"&&this.finishFun()},scope:this}):this.finishFun()},reset:function(){this.cmpStep1.reset();
this.cmpStep2.reset();this.cmpStep1.show();this.cmpStep2.hide();this.showButtons(1)}});Ext.namespace("_s8.ReadyDR.Jobs.Create");
_s8.ReadyDR.Jobs.Create.Step1=_._1(_9,Ext.Container,{cls:"x-backups-readydr-jobs-create-step1",constructor:function(){this.html='<div id="'+(this.cmpGenSettingsId=Ext.id())+'" style="margin-bottom: 40px;"></div><div class="'+this.cls+'-srcdst"><div id="'+(this.cmpSrcId=this.cmpDstId=Ext.id())+'" ></div><div class="'+this.cls+'-splitter"><div class="'+this.cls+'-arrow"></div></div><div class="x-clear"></div></div>';_s8.ReadyDR.Jobs.Create.Step1.superclass.constructor.apply(this,
arguments)},afterRender:function(){_s8.ReadyDR.Jobs.Create.Step1.superclass.afterRender.apply(this,arguments);this.cmpGenSettings=new _s8.ReadyDR.Jobs.GenSettings({renderTo:this.cmpGenSettingsId});this.cmpSrc=new _s8.ReadyDR.Jobs.SrcDst({type:"src",renderTo:this.cmpSrcId});this.cmpDst=new _s8.ReadyDR.Jobs.SrcDst({type:"dst",renderTo:this.cmpDstId})},onShow:function(){_s8.ReadyDR.Jobs.Create.Step1.superclass.onShow.apply(this,arguments)},
reset:function(){this.cmpGenSettings.reset();this.cmpSrc.reset();this.cmpDst.reset()},validate:function(){var a=true;this.cmpGenSettings.validate()||(a=false);this.cmpSrc.validate(this.cmpDst.getLocation(),this.cmpDst.getPath())||(a=false);this.cmpDst.validate(this.cmpSrc.getLocation(),this.cmpSrc.getPath())||(a=false);return a},getShare:function(){return this.cmpSrc.getShare()},getSourceLocation:function(){return this.cmpSrc.getLocation()},getDestinationLocation:function(){return this.cmpDst.getLocation()},
doApply:function(a){this.cmpGenSettings.doApply(a);this.cmpSrc.doApply(a);this.cmpDst.doApply(a)}});Ext.namespace("_s8.ReadyDR.Jobs.Create");
_s8.ReadyDR.Jobs.Create.Step2=_._1(_9,Ext.Container,{cls:"x-backups-readydr-jobs-create-step2",constructor:function(){this.html='<div id="'+(this.cmpOptionsId=Ext.id())+'" class="'+this.cls+'-left"><div class="x-window-header-text">'+_TR("OPTIONS")+'</div></div><div id="'+(this.cmpScheduleId=Ext.id())+'" class="'+this.cls+'-right"><div class="x-window-header-text" style="margin-bottom:28px">'+_TR("SCHEDULE")+"</div></div>";_s8.ReadyDR.Jobs.Create.Step2.superclass.constructor.apply(this,
arguments)},afterRender:function(){_s8.ReadyDR.Jobs.Create.Step2.superclass.afterRender.apply(this,arguments);this.cmpOptions=new _s8.ReadyDR.Jobs.Options({type:"create",renderTo:this.cmpOptionsId});this.cmpSchedule=new _s8.ReadyDR.Jobs.Schedule({renderTo:this.cmpScheduleId})},onShow:function(){_s8.ReadyDR.Jobs.Create.Step2.superclass.onShow.apply(this,arguments);this.cmpSchedule.onShow();this.cmpOptions.onShow()},reset:function(){this.cmpOptions.reset();
this.cmpSchedule.reset(true)},validate:function(){return this.cmpOptions.validate()},putShare:function(a){this.cmpSchedule.putShare(a);this.cmpOptions.putShare(a)},putSourceLocation:function(a){this.cmpSchedule.putSourceLocation(a);this.cmpOptions.putSourceLocation(a)},putDestinationLocation:function(a){this.cmpSchedule.putDestinationLocation(a);this.cmpOptions.putDestinationLocation(a)},doApply:function(a){this.cmpOptions.doApply(a);this.cmpSchedule.doApply(a)}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Edit=_._1(_9,Ext.UI.Window,{modal:true,width:600,height:520,resizable:false,minimizable:false,maximizable:false,cls:"x-backups-readydr-jobs-edit",constructor:function(){this.fbar=this.getFooter();this.items=[this.cmpGenSettings=new _s8.ReadyDR.Jobs.GenSettings,this.cmpSrc=new _s8.ReadyDR.Jobs.SrcDst({type:"src"}),this.cmpDst=new _s8.ReadyDR.Jobs.SrcDst({type:"dst"}),this.cmpSchedule=new _s8.ReadyDR.Jobs.Schedule,
this.cmpOptions=new _s8.ReadyDR.Jobs.Options({type:"edit"})];_s8.ReadyDR.Jobs.Edit.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spRepliSyncJobsManager=a.getRepliSyncSystem().getJobsManager();this.spShareManager=a.getShareManager()},getFooter:function(){this.bApply=new Ext.UI.Button({id:"readydr-jobs-edit-apply-btn",text:_TR("APPLY"),width:100,acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=
new Ext.UI.Button({id:"readydr-jobs-edit-cancel-btn",text:_TR("CANCEL"),width:100,handler:this.onCancelClick,scope:this});return["->",this.bApply,this.bCancel]},afterRender:function(){_s8.ReadyDR.Jobs.Edit.superclass.afterRender.apply(this,arguments);this.bTabGeneral=new Ext.UI.SegmentedButton({id:"readydr-jobs-edit-gen-tab",xtype:"uisegmentedbutton",text:_TR("GENERAL"),value:"general",width:80});this.bTabSrc=new Ext.UI.SegmentedButton({id:"readydr-jobs-edit-src-tab",xtype:"uisegmentedbutton",
text:_TR("SOURCE"),value:"src",width:80});this.bTabDst=new Ext.UI.SegmentedButton({id:"readydr-jobs-edit-dst-tab",xtype:"uisegmentedbutton",text:_TR("DESTINATION"),value:"dst",width:80});this.bTabSchedule=new Ext.UI.SegmentedButton({id:"readydr-jobs-edit-sched-tab",xtype:"uisegmentedbutton",text:_TR("SCHEDULE"),value:"schedule",width:80});this.bTabOptions=new Ext.UI.SegmentedButton({id:"readydr-jobs-edit-opt-tab",xtype:"uisegmentedbutton",text:_TR("OPTIONS"),value:"options",width:80});this.tabs=new Ext.UI.SegmentedControl({items:[this.bTabGeneral,
this.bTabSrc,this.bTabDst,this.bTabSchedule,this.bTabOptions],style:"margin: 20px auto;",renderTo:this.header.parent(),listeners:{buttonchecked:this.onTabItemSelect,scope:this}});ScrollManager.reg(this.body.dom,ScrollManager.VERTICAL)},onShow:function(){_s8.ReadyDR.Jobs.Edit.superclass.onShow.apply(this,arguments);this.tabs.setPressedButton(0);this.center()},onTabItemSelect:function(a){this.cmpGenSettings.hide();this.cmpSrc.hide();this.cmpDst.hide();this.cmpSchedule.hide();this.cmpOptions.hide();
switch(a.value){case "general":this.cmpGenSettings.show();break;case "src":this.cmpSrc.show();break;case "dst":this.cmpDst.show();break;case "schedule":this.cmpSchedule.putShare(this.cmpSrc.getShare());this.cmpSchedule.putSourceLocation(this.cmpSrc.getLocation());this.cmpSchedule.putDestinationLocation(this.cmpDst.getLocation());this.cmpSchedule.show();break;case "options":this.cmpOptions.putSourceLocation(this.cmpSrc.getLocation());this.cmpOptions.putDestinationLocation(this.cmpDst.getLocation());
this.cmpOptions.show();break}},onCancelClick:function(){this.hide()},onApplyClick:function(){if(this.validate()){var a=this.spJob;this.cmpGenSettings.doApply(a);this.cmpSrc.doApply(a);this.cmpDst.doApply(a);this.cmpSchedule.doApply(a);this.cmpOptions.doApply(a);this.spRepliSyncJobsManager.CommitJob("backuptab-readydr-commit-job",a);a=null;if(a=_a(this.cmpSrc.getShare(),"_i38"))this.spShareManager.commitShare(a,"readydr_edit_share");else if(a=_a(this.cmpSrc.getShare(),"_i1j"))this.spShareManager.commitLUN(a,
"readydr_edit_share");this.hide()}},loadArgs:function(a){this.spJob=a;this.setTitle(Ext.util.Format.htmlEncode(a.getName()));this.cmpGenSettings.loadArgs(this.spJob);this.cmpSrc.loadArgs(this.spJob);this.cmpDst.loadArgs(this.spJob);this.cmpSchedule.loadArgs(this.spJob);this.cmpOptions.loadArgs(this.spJob)},validate:function(){var a=true;if(!this.cmpGenSettings.validate()){a=false;this.tabs.setPressedButton(0)}if(!this.cmpSrc.validate(this.cmpDst.getLocation(),this.cmpDst.getPath())){a&&this.tabs.setPressedButton(1);
a=false}if(!this.cmpDst.validate(this.cmpSrc.getLocation(),this.cmpSrc.getPath())){a&&this.tabs.setPressedButton(2);a=false}if(!this.cmpSchedule.validate()){a&&this.tabs.setPressedButton(3);a=false}if(!this.cmpOptions.validate()){a&&this.tabs.setPressedButton(4);a=false}return a}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Log=_._1(_9,Ext.UI.Window,{modal:true,width:990,height:620,resizable:false,minimizable:false,maximizable:false,cls:"x-backups-readydr-jobs-log",updatesCount:0,constructor:function(){this.title=_TR("READYDR_JOBS_HISTORY");this.html='<div id="'+(this.bClearHistoryId=Ext.id())+'"></div><div class="x-clear"></div>';this.fbar=this.getFooter();_s8.ReadyDR.Jobs.Log.superclass.constructor.apply(this,arguments);this.spRepliSyncJobsManager=_a(_7(_1.CLSIDS.Device5200),
"_i2").getRepliSyncSystem().getJobsManager();_a(this.spRepliSyncJobsManager,"_i1").Advise(this)},getFooter:function(){this.bCancel=new Ext.UI.Button({id:"readydr-jobs-log-close-btn",text:_TR("CLOSE"),width:100,handler:function(){this.hide()},scope:this});return["->",this.bCancel]},afterRender:function(){_s8.ReadyDR.Jobs.Log.superclass.afterRender.apply(this,arguments);this.bClearHistory=new Ext.UI.Button({cls:"ptm-controls",text:_TR("BACKUP_READYDR_ENHANCEMENTS_CLEARHISTORY_BUTTONNAME"),
handler:this.onClearHistoryClick,scope:this,renderTo:this.bClearHistoryId});this.renderGrid();this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},onClearHistoryClick:function(){this.spRepliSyncJobsManager.ClearHistory("backuptab-readydr-clear-history",this.loadedArgs.jobId)},renderGrid:function(){var a=[{header:_TR("READYDR_LOGS_SNAPSHOT"),dataIndex:"snapshot"},{header:_TR("READYDR_LOGS_ROLE"),dataIndex:"role",width:100,fixed:true},
{header:_TR("READYDR_LOGS_DATE"),dataIndex:"date"},{header:_TR("READYDR_LOGS_DURATION"),dataIndex:"duration",width:100,fixed:true},{header:_TR("READYDR_LOGS_RESULT"),dataIndex:"result",renderer:{fn:this.renderResult,scope:this}}];this.grid=new Ext.UI.GridPanel({id:"readydr-keys-grid",uicls:"ui-fwgrid",height:460,colModel:new Ext.grid.ColumnModel(a),store:new Ext.data.Store({data:[],reader:new Ext.data.JsonReader({fields:["snapshot","role","date","duration","result","code"]})}),viewConfig:{forceFit:true,
autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+_TR("READYDR_JOBS_NOHISTORY")+"</div>",deferEmptyText:false,getRowClass:function(b,c){b="x-grid3-row-even";if(c%2==1)b="x-grid3-row-odd";return b}},renderTo:this.body})},renderResult:function(a,b,c){var e="x-frontview-led-";e+=c.get("code")=="0"?"green":"red";b.css=this.cls+"-led "+e;return a},onShow:function(){_s8.ReadyDR.Jobs.Log.superclass.onShow.apply(this,arguments);this.reset();this.center()},loadArgs:function(a){this.loadedArgs=
{jobId:a};this.spRepliSyncJobsManager.UpdateLogs("backuptab-readydr-update-logs",a)},reset:function(){this.grid.getStore().loadData([])},populateLogs:function(a){var b=[],c;_.each(a,function(e){c=new Date(e.getYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHour()+":"+e.getMinute()+":"+e.getSecond());b.push({snapshot:e.getName(),role:e.getRole(),start:e.getStartTime(),date:_.formatDateTime(c),duration:this.getDuration(e.getDuration()),result:e.getResult(),code:e.getCode()})},this);this.grid.getStore().loadData(b)},
getDuration:function(a){a=parseInt(a);var b=parseInt(a/60),c=parseInt(b/60),e=this.getTime;a-=b*60;b-=c*60;return e(c)+":"+e(b)+":"+e(a)},getTime:function(a){return a<10?"0"+a:a},showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},IRepliSyncJobsManagerEvents:{_o1:function(a,b){if(b=="backuptab-readydr-update-logs"||b=="backuptab-readydr-clear-history")this.showProgress()},
OnLogsUpdate:function(a,b,c){a=="backuptab-readydr-update-logs"&&this.loadedArgs&&this.loadedArgs.jobId==c&&this.populateLogs(b)},_o3:function(a,b,c){if(c=="backuptab-readydr-update-logs"||c=="backuptab-readydr-clear-history"){this.hideProgress();c=="backuptab-readydr-clear-history"&&!a&&this.spRepliSyncJobsManager.UpdateLogs("backuptab-readydr-update-logs",this.loadedArgs.jobId)}}}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Export=_._1(_9,Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",cls:"x-backups-readydr-jobs-export",updatesCount:0,constructor:function(){this.title=_TR("EXPORT");this.html='<table><tr><td id="'+(this.lblPathId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("PATH")+':</td><td id="'+(this.tfPathId=Ext.id())+'"></td><td id="'+(this.bBrowseId=Ext.id())+'"></td></tr><tr><td class="x-bac-dlglabel">'+
_TR("COMPRESSION")+':</td><td id="'+(this.cbComressionId=Ext.id())+'" colspan="2"></td></tr></table>';this.fbar=this.getFooter();_s8.ReadyDR.Jobs.Export.superclass.constructor.apply(this,arguments);this.spRepliSyncJobsManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getRepliSyncSystem().getJobsManager();_a(this.spRepliSyncJobsManager,"_i1").Advise(this)},getFooter:function(){this.progressIndicator=new Ext.Component;this.bApply=new Ext.UI.Button({id:"readydr-jobs-export-apply-btn",
text:_TR("EXPORT"),width:100,acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({id:"readydr-jobs-export-close-btn",text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this});return[this.progressIndicator,"->",this.bApply,this.bCancel]},afterRender:function(){_s8.ReadyDR.Jobs.Export.superclass.afterRender.apply(this,arguments);this.lblPath=Ext.get(this.lblPathId);this.tfPath=new Ext.UI.TextField({id:"readydr-jobs-export-path",width:220,
renderTo:this.tfPathId});this.bBrowse=new Ext.UI.Button({id:"readydr-jobs-export-browse-btn",text:_TR("BROWSE"),width:80,renderTo:this.bBrowseId,handler:this.onBrowseClick,scope:this});this.cbCompression=new Ext.UI.ComboBox({width:220,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id","text"],data:[["9",_TR("READYDR_COMPRESSION_BETTER")],["1",_TR("READYDR_COMPRESSION_FASTER")],["0",_TR("READYDR_COMPRESSION_DISABLED")]]}),valueField:"id",displayField:"text",value:"0",
renderTo:this.cbComressionId})},onShow:function(){_s8.ReadyDR.Jobs.Export.superclass.onShow.apply(this,arguments);this.reset();this.center()},loadArgs:function(a){this.loadedArgs={jobId:a}},reset:function(){delete this.pid;this.lblPath.removeClass("x-bac-label-error");this.tfPath.reset();this.tfPath.enable();this.bBrowse.enable();this.bApply.enable();this.bApply.show();this.bCancel.enable();this.bCancel.setText(_TR("CLOSE"))},onBrowseClick:function(){if(!this.wndBrowse)this.wndBrowse=
CComSingleton(_s9.BrowseWindow);this.wndBrowse.setBackupMode("");this.wndBrowse.on("selected",this.onSelectPath,this);this.wndBrowse.show()},onSelectPath:function(a){this.wndBrowse.un("selected",this.onSelectPath,this);this.tfPath.setValue(a.path||"/")},onApplyClick:function(){this.loadedArgs&&this.validate()&&this.spRepliSyncJobsManager.ExportSeeding("backuptab-readydr-export-seed",this.loadedArgs.jobId,this.tfPath.getValue(),this.cbCompression.getValue())},validate:function(){var a=true,
b=this.tfPath.getValue();this.lblPath.removeClass("x-bac-label-error");if(!b||b.split("/").length<3){this.lblPath.addClass("x-bac-label-error");a=false}return a},fetchStatus:function(){var a=this;setTimeout(function(){!a.hidden&&a.pid?a.spRepliSyncJobsManager.UpdateExportSeedingStatus("backuptab-readydr-update-export-seed-status",a.pid):a.hideProgress()},2E3)},showProgress:function(){if(!this.updatesCount){this.progressIndicator.addClass("x-frontview-icon-progress");this.tfPath.disable();this.bBrowse.disable();
this.bApply.disable();this.bCancel.disable()}++this.updatesCount},hideProgress:function(){--this.updatesCount;if(!this.updatesCount){this.progressIndicator.removeClass("x-frontview-icon-progress");this.tfPath.enable();this.bBrowse.enable();this.bApply.enable();this.bCancel.enable()}},IRepliSyncJobsManagerEvents:{_o1:function(a,b){b=="backuptab-readydr-export-seed"&&this.showProgress()},OnQueue:function(a,b,c){if(c=="backuptab-readydr-export-seed"){this.bApply.hide();this.bCancel.enable();
this.bCancel.setText(_TR("READYDR_EXPORT_SEED_BACKGROUND"));this.pid=a;this.fetchStatus()}},OnExportSeedingStatusUpdate:function(a,b,c){if(a=="backuptab-readydr-update-export-seed-status"&&this.pid==c)if(b=="not-exists"){this.hideProgress();this.hide()}else this.fetchStatus()},_o3:function(a,b,c){if(c=="backuptab-readydr-export-seed"||c=="backuptab-readydr-update-export-seed-status")if(a!=_5&&a!=E_PENDING){this.hideProgress();if(a=_a(b,"_io").getLastNMLError())Ext.UI.MessageBox.error({title:this.title,
msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}}}});Ext.namespace("_s8.ReadyDR.Jobs");
_s8.ReadyDR.Jobs.Import=_._1(_9,Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,cls:"x-backups-readydr-jobs-import",updatesCount:0,constructor:function(){this.title=_TR("IMPORT");this.html='<table><tr><td id="'+(this.lblPathId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("READYDR_SEED_FILE")+':</td><td id="'+(this.tfPathId=Ext.id())+'"></td><td id="'+(this.bBrowseId=Ext.id())+'"></td></tr></table>';this.fbar=this.getFooter();
_s8.ReadyDR.Jobs.Import.superclass.constructor.apply(this,arguments);this.spRepliSyncJobsManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getRepliSyncSystem().getJobsManager();_a(this.spRepliSyncJobsManager,"_i1").Advise(this)},getFooter:function(){this.bApply=new Ext.UI.Button({id:"readydr-jobs-import-apply-btn",text:_TR("IMPORT"),width:100,acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({id:"readydr-jobs-import-close-btn",
text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this});return["->",this.bApply,this.bCancel]},afterRender:function(){_s8.ReadyDR.Jobs.Import.superclass.afterRender.apply(this,arguments);this.lblPath=Ext.get(this.lblPathId);this.tfPath=new Ext.UI.TextField({id:"readydr-jobs-import-path",width:220,renderTo:this.tfPathId});this.bBrowse=new Ext.UI.Button({id:"readydr-jobs-import-browse-btn",text:_TR("BROWSE"),width:80,renderTo:this.bBrowseId,handler:this.onBrowseClick,
scope:this});this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},onShow:function(){_s8.ReadyDR.Jobs.Import.superclass.onShow.apply(this,arguments);this.reset();this.center()},loadArgs:function(a){this.loadedArgs={jobId:a}},reset:function(){this.lblPath.removeClass("x-bac-label-error");this.tfPath.reset()},onBrowseClick:function(){if(!this.wndBrowse)this.wndBrowse=CComSingleton(_s9.BrowseWindow);this.wndBrowse.on("selected",
this.onSelectPath,this);this.wndBrowse.show();this.wndBrowse.setBackupMode("",true)},onSelectPath:function(a){this.wndBrowse.un("selected",this.onSelectPath,this);this.tfPath.setValue(a.path||"/")},onApplyClick:function(){this.loadedArgs&&this.validate()&&this.spRepliSyncJobsManager.ImportSeeding("backuptab-readydr-import-seed",this.loadedArgs.jobId,this.tfPath.getValue())},validate:function(){var a=true,b=this.tfPath.getValue();this.lblPath.removeClass("x-bac-label-error");if(!b||b.split("/").length<
4){this.lblPath.addClass("x-bac-label-error");a=false}return a},showProgress:function(){this.updatesCount||this.maskProgress.show();++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},IRepliSyncJobsManagerEvents:{_o1:function(a,b){b=="backuptab-readydr-import-seed"&&this.showProgress()},_o3:function(a,b,c){if(c=="backuptab-readydr-import-seed"){this.hideProgress();if(a==_5||a==E_PENDING)this.hide();else if(a=_a(b,"_io").getLastNMLError())Ext.UI.MessageBox.error({title:this.title,
msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}}}});Ext.namespace("_s8.ReadyDR");
_s8.ReadyDR.Browse=_._1(_9,Ext.UI.Window,{modal:true,width:800,height:550,resizable:false,minimizable:false,maximizable:false,cls:"x-backup-readydr-browse",updatesCount:0,constructor:function(){this.updatesState={shares:false,luns:false};this.html='<div id="'+(this.bAddId=this.elHeaderId=Ext.id())+'"></div><div class="x-clear"></div>';this.fbar=this.getFooter();_s8.ReadyDR.Browse.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),
"_i2");this.spRepliSyncRemoteBrowseManager=a.getRepliSyncSystem().getRemoteBrowseManager();_a(this.spRepliSyncRemoteBrowseManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);this.wndReadyDRLogin=new _s8.ReadyDR.Jobs.Login},afterRender:function(){_s8.ReadyDR.Browse.superclass.afterRender.apply(this,arguments);this.elHeader=Ext.get(this.elHeaderId);this.bAdd=new Ext.UI.Button({cls:this.cls+
"-add-btn",width:180,expandToText:true,text:_TR("READYDR_CREATE_SHARE"),acceptbtn:true,handler:this.onAddClick,scope:this,renderTo:this.bAddId});this.renderGrid();this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},getFooter:function(){this.bApply=new Ext.UI.Button({width:100,text:_TR("SELECT"),acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},
scope:this});return["->",this.bApply,this.bCancel]},renderGrid:function(){var a=[{header:"&#160;",width:42,fixed:true,hideable:false,menuDisabled:true,dataIndex:"type",xtype:"templatecolumn",tpl:(new Ext.XTemplate('<tpl if="rdr"><div class="x-backup-readydr-sharerdr-icon"></div></tpl><tpl if="!rdr"><div class="x-backup-readydr-{type}-icon"></div></tpl>')).compile()},{header:_TR("NAME"),width:100,dataIndex:"name"},{header:_TR("PATH"),width:200,dataIndex:"path"}];this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true,
listeners:{selectionchange:function(){this.bApply.setDisabled(!this.selModel.getSelected())},scope:this}});this.grid=new Ext.UI.GridPanel({uicls:"ui-fwgrid",height:350,sm:this.selModel,colModel:new Ext.grid.ColumnModel(a),store:new Ext.data.ArrayStore({fields:["type","path","name","rdr","obj"]}),viewConfig:{forceFit:true,autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+_TR("NO_SHARES")+"</div>",deferEmptyText:false},renderTo:this.body})},onResized:function(){var a=
this.elHeader.getWidth();a>400||(a=400);this.grid.setWidth(a)},onShow:function(){_s8.ReadyDR.Browse.superclass.onShow.apply(this,arguments);this.reset();this.center();this.onResized();this.type==="src"?this.bAdd.hide():this.bAdd.show()},reset:function(){delete this.createdShare;this.grid.getStore().loadData([]);this.bApply.disable()},loadArgs:function(a,b,c,e){var f=_TR(a=="src"?"READYDR_BROWSE":"READYDR_BROWSE_RDR_ONLY");this.bAdd.disable(true);this.loadedArgs={type:a,host:b,path:c,
port:e};if(b){this.fetchRemoteShares();this.setTitle(f+": "+b)}else{this.populateLocalShares();this.setTitle(f);this.fetchLocalShares()}},onApplyClick:function(){var a=this.selModel.getSelected();a&&this.fireEvent("select",this,a.get("path"),a.get("obj"));this.hide()},onAddClick:function(){if(!this.wndCreateShare){this.wndCreateShare=CComSingleton(_s8.ReadyDR.CreateShare);this.wndCreateShare.on("hide",function(){this.wndCreateShare.un("created",this.onCreateShareComplete,this)},this)}this.wndCreateShare.on("created",
this.onCreateShareComplete,this);this.wndCreateShare.show();this.wndCreateShare.loadArgs(this.loadedArgs.host,this.loadedArgs.port)},onCreateShareComplete:function(a,b){this.createdShare=b;this.loadedArgs.host?this.fetchRemoteShares():this.fetchLocalShares()},fetchLocalShares:function(){if(this.loadedArgs.type=="src"){this.spShareManager.updateShares(this.createdShare?"sync-update-shares":"backuptab-readydr-update-shares");this.spShareManager.updateLUNS(this.createdShare?"sync-update-luns":"backuptab-readydr-update-luns");
this.updatesState={shares:false,luns:false}}else{this.createdShare&&this.spShareManager.updateShares("sync-update-shares");this.bAdd&&this.bAdd.enable();this.spShareManager.updateReadyDRDestShares("backuptab-readydr-update-shares");this.updatesState={shares:false,luns:true}}},fetchRemoteShares:function(){this.loadedArgs.type=="src"?this.spRepliSyncRemoteBrowseManager.UpdateSources("backuptab-readydr-fetch-remote-src-shares",this.loadedArgs.host,this.loadedArgs.port):this.spRepliSyncRemoteBrowseManager.UpdateDestinations("backuptab-readydr-fetch-remote-dst-shares",
this.loadedArgs.host,this.loadedArgs.port)},populateLocalShares:function(){var a=this.loadedArgs.type=="src"?this.spShareManager.getShares().concat(this.spShareManager.getLUNS()):this.spShareManager.getReadyDRDestShares(),b=[];a!=_4&&_.each(a,function(c){var e=null;if((e=_a(c,"_i38"))&&e.getVolumeId()!="media")b.push(["share",e.getPath(),e.getName(),e.isReadyDRShare(),e]);else if(e=_a(c,"ISimpleShare"))b.push(["share","/"+e.getId(),e.getName(),true,e]);else if(e=_a(c,
"_i1j"))b.push(["lun",String.format("/{0}/{1}",e.getVolumeId(),e.getName()),e.getName(),false,e])});this.populateShares(b)},populateRemoteShares:function(a){var b=[],c=[],e=this.loadedArgs.type=="dst";a&&a!=_4&&_.each(a,function(f){f.isLUN()?c.push(["lun","/"+f.getId(),f.getName(),false,f]):b.push(["share","/"+f.getId(),f.getName(),e||f.isReadyDRShare(),f])});this.populateShares(b.concat(c))},populateShares:function(a){var b=this.createdShare||this.loadedArgs.path,c;b&&_.each(a,function(e,
f){if(e[1]==b){c=f;return false}},this);this.grid.getStore().loadData(a);b&&this.selModel.selectRow(c)},setType:function(a){this.type=a},showProgress:function(){if(!this.updatesCount){this.maskProgress.show();this.maskProgress.mask.setDisplayed(false)}++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},_i3b:{_o1:function(a,b){if(b=="backuptab-readydr-update-shares"||b=="sync-update-shares"&&this.loadedArgs&&this.loadedArgs.type==
"src"||b=="sync-update-luns"||b=="backuptab-readydr-update-luns")this.loadedArgs&&!this.loadedArgs.host&&this.showProgress()},_o3:function(a,b,c){if(c=="backuptab-readydr-update-shares"||c=="sync-update-shares"&&this.loadedArgs&&this.loadedArgs.type=="src"){if(this.loadedArgs&&!this.loadedArgs.host){this.hideProgress();this.updatesState.shares=true}}else if(c=="sync-update-luns"||c=="backuptab-readydr-update-luns"){if(this.loadedArgs&&!this.loadedArgs.host){this.hideProgress();this.updatesState.luns=
true}}else return;if(this.updatesState.luns&&this.updatesState.shares){this.updatesState.shares=false;this.updatesState.luns=false;this.populateLocalShares()}}},IRepliSyncRemoteBrowseManagerEvents:{_o1:function(a,b){if(this.loadedArgs&&(this.loadedArgs.type=="src"&&b=="backuptab-readydr-fetch-remote-src-shares"||this.loadedArgs.type=="dst"&&b=="backuptab-readydr-fetch-remote-dst-shares"))this.showProgress()},OnSourcesUpdate:function(a,b,c){this.loadedArgs&&this.loadedArgs.type=="src"&&a==
"backuptab-readydr-fetch-remote-src-shares"&&this.populateRemoteShares(c)},OnDestinationsUpdate:function(a,b,c){this.loadedArgs&&this.loadedArgs.type=="dst"&&a=="backuptab-readydr-fetch-remote-dst-shares"&&this.populateRemoteShares(c)},_o3:function(a,b,c){if(this.loadedArgs&&(this.loadedArgs.type=="src"&&c=="backuptab-readydr-fetch-remote-src-shares"||this.loadedArgs.type=="dst"&&c=="backuptab-readydr-fetch-remote-dst-shares")){this.hideProgress();if(a!==_5){this.populateRemoteShares([]);if(a=
_a(b,"_io").getLastNMLError())if(a.getErrorCode()=="33007050001"){a=this.wndReadyDRLogin;b=this.loadedArgs;b.parentWindow=this;a.show();a.loadArgs(b)}else Ext.UI.MessageBox.error({title:_TR("READYDR_FETCH_REMOTE_SHARES"),msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}else this.bAdd.enable()}}}});Ext.namespace("_s8.ReadyDR");
_s8.ReadyDR.BrowseLan=_._1(_9,Ext.UI.Window,{modal:true,width:400,height:600,resizable:false,minimizable:false,maximizable:false,cls:"x-backup-readydr-browse",updatesCount:0,constructor:function(){this.html='<div id="'+(this.elHeaderId=Ext.id())+'"></div>';this.fbar=this.getFooter();_s8.ReadyDR.BrowseLan.superclass.constructor.apply(this,arguments);this.spShareManager=_a(_7(_1.CLSIDS.Device5200),"_i2").getShareManager();_a(this.spShareManager,
"_i1").Advise(this)},afterRender:function(){_s8.ReadyDR.BrowseLan.superclass.afterRender.apply(this,arguments);this.elHeader=Ext.get(this.elHeaderId);this.renderGrid();this.maskProgress=new Ext.UI.LoadMask(this.bwrap.dom,{type:Ext.UI.LoadMask.LARGE,msgCls:"ui-mask-style1",delay:0,frame:false})},getFooter:function(){this.bApply=new Ext.UI.Button({width:100,text:_TR("SELECT"),acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),
width:100,handler:function(){this.hide()},scope:this});return["->",this.bApply,this.bCancel]},renderGrid:function(){var a=[{header:"&#160;",width:70,fixed:true,hideable:false,menuDisabled:true,dataIndex:"ModelCss",xtype:"templatecolumn",tpl:(new Ext.XTemplate(' <tpl if="ModelCss">                            <div style="background-size:64px; background-position:center center; height:70px; width:70px;" class="{ModelCss}"></div>                        </tpl>')).compile()},{header:_TR("NAME"),width:100,
dataIndex:"Hostname",css:"hostNameTxt"}];this.selModel=new Ext.grid.RowSelectionModel({singleSelect:true,listeners:{selectionchange:function(){this.bApply.setDisabled(!this.selModel.getSelected())},scope:this}});this.grid=new Ext.UI.GridPanel({uicls:"ui-fwgrid",height:400,sm:this.selModel,colModel:new Ext.grid.ColumnModel(a),store:new Ext.data.ArrayStore({fields:["Hostname","Model","Serial","IPv4","IPv6","ModelCss","obj"]}),viewConfig:{forceFit:true,autoFill:true,scrollOffset:0,emptyText:'<div class="x-frontview-dataview-emptybg">'+
_TR("BACKUP_READYDR_ENHANCEMENTS_BROWSELANWINDOW_EMPTYTXT")+"</div>",deferEmptyText:false},renderTo:this.body})},onShow:function(){_s8.ReadyDR.BrowseLan.superclass.onShow.apply(this,arguments);this.reset();this.center();this.onResized()},reset:function(){this.grid.getStore().loadData([]);this.bApply.disable()},onResized:function(){var a=this.elHeader.getWidth();a>200||(a=200);this.grid.setWidth(a)},loadArgs:function(a){this.setTitle(_TR("BACKUP_READYDR_ENHANCEMENTS_BROWSELANWINDOW_TITLE"));
this.loadedArgs={hostIp:a};a?this.populateReplisyncDevices():this.fetchReplisyncDevices()},onApplyClick:function(){var a=this.selModel.getSelected();a&&this.fireEvent("select",{Hostname:a.get("Hostname"),Model:a.get("Model"),Serial:a.get("Serial"),IPv4:a.get("IPv4"),IPv6:a.get("IPv6")});this.hide()},fetchReplisyncDevices:function(){this.spShareManager.updateLanDevices("sync-update-replisync-devices")},populateReplisyncDevices:function(){var a=this.spShareManager.getLanDevices(),b=[];a!=_4&&_.each(a,
function(c){var e=null;if(e=_a(c,"IReplisyncDevice")){c=e.getModel().toLocaleLowerCase().replace(/\s/g,"");c=_s10.Utils.getDeviceCls(c);b.push([e.getHostname(),e.getModel(),e.getSerial(),e.getIPv4(),e.getIPv6(),c,e])}});this.populateCurrentDevice(b)},populateCurrentDevice:function(a){var b=this.loadedArgs.hostIp,c;b&&_.each(a,function(e,f){if(e[3]==b){c=f;return false}},this);this.grid.getStore().loadData(a);b&&this.selModel.selectRow(c)},showProgress:function(){if(!this.updatesCount){this.maskProgress.show();
this.maskProgress.mask.setDisplayed(false)}++this.updatesCount},hideProgress:function(){--this.updatesCount;this.updatesCount||this.maskProgress.hide()},_i3b:{_o1:function(a,b){b=="sync-update-replisync-devices"&&this.loadedArgs&&!this.loadedArgs.hostIp&&this.showProgress()},_o3:function(a,b,c){if(c=="sync-update-replisync-devices")if(this.loadedArgs&&!this.loadedArgs.hostIp){this.hideProgress();this.populateReplisyncDevices()}}}});Ext.namespace("_s8.ReadyDR");
_s8.ReadyDR.CreateShare=_._1(_9,Ext.UI.Window,{modal:true,autoWidth:true,resizable:false,minimizable:false,maximizable:false,buttonAlign:"left",cls:"x-backups-readydr-jobs-create-share",updatesCount:0,constructor:function(){this.title=_TR("READYDR_CREATE_SHARE");this.html='<table><tr><td id="'+(this.lblNameId=Ext.id())+'" class="x-bac-dlglabel">'+_TR("NAME")+':</td><td id="'+(this.tfNameId=Ext.id())+'"></td></tr><tr><td id="'+(this.lblVolumeId=Ext.id())+'" class="x-bac-dlglabel">'+
_TR("VOLUME")+':</td><td id="'+(this.cbVolumeId=Ext.id())+'"></td></tr></table>';this.fbar=this.getFooter();_s8.ReadyDR.CreateShare.superclass.constructor.apply(this,arguments);var a=_a(_7(_1.CLSIDS.Device5200),"_i2");this.spRepliSyncRemoteBrowseManager=a.getRepliSyncSystem().getRemoteBrowseManager();_a(this.spRepliSyncRemoteBrowseManager,"_i1").Advise(this);this.spShareManager=a.getShareManager();_a(this.spShareManager,"_i1").Advise(this);
this.zfsVolumesManager=a.getZFSVolumesManager()},getFooter:function(){this.indicator=new Ext.BoxComponent({cls:"x-controls-prompt-progress-bg"});this.bApply=new Ext.UI.Button({text:_TR("CREATE"),width:100,acceptbtn:true,handler:this.onApplyClick,scope:this});this.bCancel=new Ext.UI.Button({text:_TR("CANCEL"),width:100,handler:function(){this.hide()},scope:this});return[this.indicator,"->",this.bApply,this.bCancel]},afterRender:function(){_s8.ReadyDR.CreateShare.superclass.afterRender.apply(this,
arguments);this.lblName=Ext.get(this.lblNameId);this.tfName=new Ext.UI.TextField({width:240,renderTo:this.tfNameId});this.lblVolume=Ext.get(this.lblVolumeId);this.cbVolume=new Ext.UI.ComboBox({width:240,mode:"local",triggerAction:"all",lastQuery:"",store:new Ext.data.ArrayStore({fields:["id"],data:[]}),valueField:"id",displayField:"id",renderTo:this.cbVolumeId})},onShow:function(){_s8.ReadyDR.CreateShare.superclass.onShow.apply(this,arguments);this.reset();this.center()},reset:function(){delete this.loadedArgs;
this.lblName.removeClass("x-bac-label-error");this.lblVolume.removeClass("x-bac-label-error");this.tfName.setValue("");this.cbVolume.reset();var a=this.zfsVolumesManager.getActiveVolumes(),b=[];a!=_4&&_.each(a,function(c){c=_a(c,"_i4o");b.push([c.getVolumeId()])},this);this.cbVolume.getStore().loadData(b);b.length>0&&this.cbVolume.setValue(b[0])},loadArgs:function(a,b){this.loadedArgs={address:a,port:b};if(a){this.cbVolume.getStore().loadData([]);this.spRepliSyncRemoteBrowseManager.UpdateDestinations("backuptab-readydr-fetch-remote-volumes",
a,b)}},validate:function(){var a=false,b=this.tfName.getValue().trim();this.lblName.removeClass("x-bac-label-error");this.lblVolume.removeClass("x-bac-label-error");if(!b||!_.isValidShareName(b)){this.lblName.addClass("x-bac-label-error");a=true}else if(!this.loadedArgs){b=b.toLowerCase();for(var c=this.spShareManager.getShares(),e,f=0;f<c.length;++f){e=_a(c[f],"_i38");if(e.getName().toLowerCase()==b){this.lblName.addClass("x-bac-label-error");a=true;break}}}if(!this.cbVolume.getValue()){this.lblVolume.addClass("x-bac-label-error");
a=true}return!a},showIndicator:function(){if(Ext.isEmpty(this.progress))this.progress=new Ext.UI.LoadMask(this.indicator.el,{type:Ext.UI.LoadMask.MIDDLE,background:false,frame:false,msgCls:"ui-mask-style1"});this.progress.show()},hideIndicator:function(){Ext.isEmpty(this.progress)||this.progress.hide()},onApplyClick:function(){if(this.validate())this.loadedArgs&&this.loadedArgs.address?this.spRepliSyncRemoteBrowseManager.CreateShare("backuptab-readydr-create-share",this.loadedArgs.address,this.cbVolume.getValue(),
this.tfName.getValue(),this.loadedArgs.port):this.spShareManager.addShareReadyDR("backuptab-readydr-create-share",this.tfName.getValue(),this.cbVolume.getValue())},showProgress:function(){if(!this.updatesCount){this.showIndicator();this.tfName.disable();this.cbVolume.disable();this.bApply.disable();this.bCancel.disable()}++this.updatesCount},hideProgress:function(){--this.updatesCount;if(!this.updatesCount){this.hideIndicator();this.tfName.enable();this.cbVolume.enable();this.bApply.enable();this.bCancel.enable()}},
_i3b:{_o1:function(a,b){b=="backuptab-readydr-create-share"&&this.showProgress()},_o3:function(a,b,c){if(c=="backuptab-readydr-create-share"){this.hideProgress();if(a==_5){this.fireEvent("created",this,"/"+this.cbVolume.getValue()+"/"+this.tfName.getValue());this.hide()}else if(a=_a(b,"_io").getLastNMLError())Ext.UI.MessageBox.error({title:this.title,msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}}},IRepliSyncRemoteBrowseManagerEvents:{_o1:function(a,
b){if(b=="backuptab-readydr-create-share"||b=="backuptab-readydr-fetch-remote-volumes")this.showProgress()},OnDestinationsUpdate:function(a,b,c,e){if(this.loadedArgs&&this.loadedArgs.address==b&&a=="backuptab-readydr-fetch-remote-volumes"){var f=[];_.each(e,function(g){g.getEjectable()||f.push([g.getVolumeId()])},this);this.cbVolume.getStore().loadData(f);f.length>0&&this.cbVolume.setValue(f[0])}},_o3:function(a,b,c){if(c=="backuptab-readydr-create-share"||c=="backuptab-readydr-fetch-remote-volumes"){this.hideProgress();
if(a==_5){if(c=="backuptab-readydr-create-share"){this.fireEvent("created",this,"/"+this.cbVolume.getValue()+"/"+this.tfName.getValue());this.hide()}}else if(a=_a(b,"_io").getLastNMLError())Ext.UI.MessageBox.error({title:this.title,msg:_TR(a.getErrorCode())+"<br >"+a.getErrorDetails()})}}}});
